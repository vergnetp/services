var fa=Object.defineProperty;var ua=(l,e,t)=>e in l?fa(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t;var al=(l,e,t)=>ua(l,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();function ae(){}const Hr=l=>l;function da(l,e){for(const t in e)l[t]=e[t];return l}function Gr(l){return l()}function vs(){return Object.create(null)}function Fe(l){l.forEach(Gr)}function zn(l){return typeof l=="function"}function Je(l,e){return l!=l?e==e:l!==e||l&&typeof l=="object"||typeof l=="function"}function pa(l){return Object.keys(l).length===0}function xn(l,...e){if(l==null){for(const n of e)n(void 0);return ae}const t=l.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function en(l){let e;return xn(l,t=>e=t)(),e}function We(l,e,t){l.$$.on_destroy.push(xn(e,t))}function Yt(l,e,t,n){if(l){const s=Wr(l,e,t,n);return l[0](s)}}function Wr(l,e,t,n){return l[1]&&n?da(t.ctx.slice(),l[1](n(e))):t.ctx}function Vt(l,e,t,n){if(l[2]&&n){const s=l[2](n(t));if(e.dirty===void 0)return s;if(typeof s=="object"){const i=[],o=Math.max(e.dirty.length,s.length);for(let c=0;c<o;c+=1)i[c]=e.dirty[c]|s[c];return i}return e.dirty|s}return e.dirty}function Kt(l,e,t,n,s,i){if(s){const o=Wr(e,t,n,i);l.p(o,s)}}function Qt(l){if(l.ctx.length>32){const e=[],t=l.ctx.length/32;for(let n=0;n<t;n++)e[n]=-1;return e}return-1}function Jr(l){const e={};for(const t in l)e[t]=!0;return e}function ms(l,e,t){return l.set(t),e}function hs(l){const e=typeof l=="string"&&l.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[l,"px"]}const Yr=typeof window<"u";let _a=Yr?()=>window.performance.now():()=>Date.now(),es=Yr?l=>requestAnimationFrame(l):ae;const Ol=new Set;function Vr(l){Ol.forEach(e=>{e.c(l)||(Ol.delete(e),e.f())}),Ol.size!==0&&es(Vr)}function va(l){let e;return Ol.size===0&&es(Vr),{promise:new Promise(t=>{Ol.add(e={c:l,f:t})}),abort(){Ol.delete(e)}}}const Kr=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function a(l,e){l.appendChild(e)}function Qr(l){if(!l)return document;const e=l.getRootNode?l.getRootNode():l.ownerDocument;return e&&e.host?e:l.ownerDocument}function ma(l){const e=p("style");return e.textContent="/* empty */",ha(Qr(l),e),e.sheet}function ha(l,e){return a(l.head||l,e),e.sheet}function k(l,e,t){l.insertBefore(e,t||null)}function $(l){l.parentNode&&l.parentNode.removeChild(l)}function Me(l,e){for(let t=0;t<l.length;t+=1)l[t]&&l[t].d(e)}function p(l){return document.createElement(l)}function ga(l){return document.createElementNS("http://www.w3.org/2000/svg",l)}function T(l){return document.createTextNode(l)}function b(){return T(" ")}function Le(){return T("")}function te(l,e,t,n){return l.addEventListener(e,t,n),()=>l.removeEventListener(e,t,n)}function Xr(l){return function(e){return e.preventDefault(),l.call(this,e)}}function u(l,e,t){t==null?l.removeAttribute(e):l.getAttribute(e)!==t&&l.setAttribute(e,t)}function Zr(l){let e;return{p(...t){e=t,e.forEach(n=>l.push(n))},r(){e.forEach(t=>l.splice(l.indexOf(t),1))}}}function Rt(l){return l===""?null:+l}function ba(l){return Array.from(l.childNodes)}function B(l,e){e=""+e,l.data!==e&&(l.data=e)}function Q(l,e){l.value=e??""}function qe(l,e,t,n){t==null?l.style.removeProperty(e):l.style.setProperty(e,t,"")}function Pe(l,e,t){for(let n=0;n<l.options.length;n+=1){const s=l.options[n];if(s.__value===e){s.selected=!0;return}}(!t||e!==void 0)&&(l.selectedIndex=-1)}function Ge(l){const e=l.querySelector(":checked");return e&&e.__value}function $e(l,e,t){l.classList.toggle(e,!!t)}function xr(l,e,{bubbles:t=!1,cancelable:n=!1}={}){return new CustomEvent(l,{detail:e,bubbles:t,cancelable:n})}class $a{constructor(e=!1){al(this,"is_svg",!1);al(this,"e");al(this,"n");al(this,"t");al(this,"a");this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,n=null){this.e||(this.is_svg?this.e=ga(t.nodeName):this.e=p(t.nodeType===11?"TEMPLATE":t.nodeName),this.t=t.tagName!=="TEMPLATE"?t:t.content,this.c(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)k(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach($)}}const Pn=new Map;let En=0;function ka(l){let e=5381,t=l.length;for(;t--;)e=(e<<5)-e^l.charCodeAt(t);return e>>>0}function wa(l,e){const t={stylesheet:ma(e),rules:{}};return Pn.set(l,t),t}function gs(l,e,t,n,s,i,o,c=0){const r=16.666/n;let f=`{
`;for(let C=0;C<=1;C+=r){const y=e+(t-e)*i(C);f+=C*100+`%{${o(y,1-y)}}
`}const d=f+`100% {${o(t,1-t)}}
}`,_=`__svelte_${ka(d)}_${c}`,v=Qr(l),{stylesheet:h,rules:m}=Pn.get(v)||wa(v,l);m[_]||(m[_]=!0,h.insertRule(`@keyframes ${_} ${d}`,h.cssRules.length));const g=l.style.animation||"";return l.style.animation=`${g?`${g}, `:""}${_} ${n}ms linear ${s}ms 1 both`,En+=1,_}function ya(l,e){const t=(l.style.animation||"").split(", "),n=t.filter(e?i=>i.indexOf(e)<0:i=>i.indexOf("__svelte")===-1),s=t.length-n.length;s&&(l.style.animation=n.join(", "),En-=s,En||Ca())}function Ca(){es(()=>{En||(Pn.forEach(l=>{const{ownerNode:e}=l.stylesheet;e&&$(e)}),Pn.clear())})}let Xl;function Ql(l){Xl=l}function ts(){if(!Xl)throw new Error("Function called outside component initialization");return Xl}function ul(l){ts().$$.on_mount.push(l)}function ls(l){ts().$$.on_destroy.push(l)}function tn(){const l=ts();return(e,t,{cancelable:n=!1}={})=>{const s=l.$$.callbacks[e];if(s){const i=xr(e,t,{cancelable:n});return s.slice().forEach(o=>{o.call(l,i)}),!i.defaultPrevented}return!0}}function bs(l,e){const t=l.$$.callbacks[e.type];t&&t.slice().forEach(n=>n.call(this,e))}const Ll=[],kt=[];let Al=[];const Vn=[],Sa=Promise.resolve();let Kn=!1;function Ta(){Kn||(Kn=!0,Sa.then(ea))}function Ue(l){Al.push(l)}function Mn(l){Vn.push(l)}const Wn=new Set;let Ml=0;function ea(){if(Ml!==0)return;const l=Xl;do{try{for(;Ml<Ll.length;){const e=Ll[Ml];Ml++,Ql(e),Da(e.$$)}}catch(e){throw Ll.length=0,Ml=0,e}for(Ql(null),Ll.length=0,Ml=0;kt.length;)kt.pop()();for(let e=0;e<Al.length;e+=1){const t=Al[e];Wn.has(t)||(Wn.add(t),t())}Al.length=0}while(Ll.length);for(;Vn.length;)Vn.pop()();Kn=!1,Wn.clear(),Ql(l)}function Da(l){if(l.fragment!==null){l.update(),Fe(l.before_update);const e=l.dirty;l.dirty=[-1],l.fragment&&l.fragment.p(l.ctx,e),l.after_update.forEach(Ue)}}function Pa(l){const e=[],t=[];Al.forEach(n=>l.indexOf(n)===-1?e.push(n):t.push(n)),t.forEach(n=>n()),Al=e}let Kl;function Ea(){return Kl||(Kl=Promise.resolve(),Kl.then(()=>{Kl=null})),Kl}function Jn(l,e,t){l.dispatchEvent(xr(`${e?"intro":"outro"}${t}`))}const Dn=new Set;let Jt;function ke(){Jt={r:0,c:[],p:Jt}}function we(){Jt.r||Fe(Jt.c),Jt=Jt.p}function E(l,e){l&&l.i&&(Dn.delete(l),l.i(e))}function N(l,e,t,n){if(l&&l.o){if(Dn.has(l))return;Dn.add(l),Jt.c.push(()=>{Dn.delete(l),n&&(t&&l.d(1),n())}),l.o(e)}else n&&n()}const Ma={duration:0};function Nl(l,e,t,n){let i=e(l,t,{direction:"both"}),o=n?0:1,c=null,r=null,f=null,d;function _(){f&&ya(l,f)}function v(m,g){const C=m.b-o;return g*=Math.abs(C),{a:o,b:m.b,d:C,duration:g,start:m.start,end:m.start+g,group:m.group}}function h(m){const{delay:g=0,duration:C=300,easing:y=Hr,tick:w=ae,css:S}=i||Ma,M={start:_a()+g,b:m};m||(M.group=Jt,Jt.r+=1),"inert"in l&&(m?d!==void 0&&(l.inert=d):(d=l.inert,l.inert=!0)),c||r?r=M:(S&&(_(),f=gs(l,o,m,C,g,y,S)),m&&w(0,1),c=v(M,C),Ue(()=>Jn(l,m,"start")),va(P=>{if(r&&P>r.start&&(c=v(r,C),r=null,Jn(l,c.b,"start"),S&&(_(),f=gs(l,o,c.b,c.duration,0,y,i.css))),c){if(P>=c.end)w(o=c.b,1-o),Jn(l,c.b,"end"),r||(c.b?_():--c.group.r||Fe(c.group.c)),c=null;else if(P>=c.start){const D=P-c.start;o=c.a+c.d*y(D/c.duration),w(o,1-o)}}return!!(c||r)}))}return{run(m){zn(i)?Ea().then(()=>{i=i({direction:m?"in":"out"}),h(m)}):h(m)},end(){_(),c=r=null}}}function _e(l){return(l==null?void 0:l.length)!==void 0?l:Array.from(l)}function ta(l,e){N(l,1,1,()=>{e.delete(l.key)})}function la(l,e,t,n,s,i,o,c,r,f,d,_){let v=l.length,h=i.length,m=v;const g={};for(;m--;)g[l[m].key]=m;const C=[],y=new Map,w=new Map,S=[];for(m=h;m--;){const j=_(s,i,m),L=t(j);let R=o.get(L);R?S.push(()=>R.p(j,e)):(R=f(L,j),R.c()),y.set(L,C[m]=R),L in g&&w.set(L,Math.abs(m-g[L]))}const M=new Set,P=new Set;function D(j){E(j,1),j.m(c,d),o.set(j.key,j),d=j.first,h--}for(;v&&h;){const j=C[h-1],L=l[v-1],R=j.key,A=L.key;j===L?(d=j.first,v--,h--):y.has(A)?!o.has(R)||M.has(R)?D(j):P.has(A)?v--:w.get(R)>w.get(A)?(P.add(R),D(j)):(M.add(A),v--):(r(L,o),v--)}for(;v--;){const j=l[v];y.has(j.key)||r(j,o)}for(;h;)D(C[h-1]);return Fe(S),C}function jn(l,e,t){const n=l.$$.props[e];n!==void 0&&(l.$$.bound[n]=t,t(l.$$.ctx[n]))}function oe(l){l&&l.c()}function ne(l,e,t){const{fragment:n,after_update:s}=l.$$;n&&n.m(e,t),Ue(()=>{const i=l.$$.on_mount.map(Gr).filter(zn);l.$$.on_destroy?l.$$.on_destroy.push(...i):Fe(i),l.$$.on_mount=[]}),s.forEach(Ue)}function se(l,e){const t=l.$$;t.fragment!==null&&(Pa(t.after_update),Fe(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function ja(l,e){l.$$.dirty[0]===-1&&(Ll.push(l),Ta(),l.$$.dirty.fill(0)),l.$$.dirty[e/31|0]|=1<<e%31}function Ye(l,e,t,n,s,i,o=null,c=[-1]){const r=Xl;Ql(l);const f=l.$$={fragment:null,ctx:[],props:i,update:ae,not_equal:s,bound:vs(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(r?r.$$.context:[])),callbacks:vs(),dirty:c,skip_bound:!1,root:e.target||r.$$.root};o&&o(f.root);let d=!1;if(f.ctx=t?t(l,e.props||{},(_,v,...h)=>{const m=h.length?h[0]:v;return f.ctx&&s(f.ctx[_],f.ctx[_]=m)&&(!f.skip_bound&&f.bound[_]&&f.bound[_](m),d&&ja(l,_)),v}):[],f.update(),d=!0,Fe(f.before_update),f.fragment=n?n(f.ctx):!1,e.target){if(e.hydrate){const _=ba(e.target);f.fragment&&f.fragment.l(_),_.forEach($)}else f.fragment&&f.fragment.c();e.intro&&E(l.$$.fragment),ne(l,e.target,e.anchor),ea()}Ql(r)}class Ve{constructor(){al(this,"$$");al(this,"$$set")}$destroy(){se(this,1),this.$destroy=ae}$on(e,t){if(!zn(t))return ae;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const s=n.indexOf(t);s!==-1&&n.splice(s,1)}}$set(e){this.$$set&&!pa(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const La="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(La);const jl=[];function Na(l,e){return{subscribe:dl(l,e).subscribe}}function dl(l,e=ae){let t;const n=new Set;function s(c){if(Je(l,c)&&(l=c,t)){const r=!jl.length;for(const f of n)f[1](),jl.push(f,l);if(r){for(let f=0;f<jl.length;f+=2)jl[f][0](jl[f+1]);jl.length=0}}}function i(c){s(c(l))}function o(c,r=ae){const f=[c,r];return n.add(f),n.size===1&&(t=e(s,i)||ae),c(l),()=>{n.delete(f),n.size===0&&t&&(t(),t=null)}}return{set:s,update:i,subscribe:o}}function ql(l,e,t){const n=!Array.isArray(l),s=n?[l]:l;if(!s.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const i=e.length<2;return Na(t,(o,c)=>{let r=!1;const f=[];let d=0,_=ae;const v=()=>{if(d)return;_();const m=e(n?f[0]:f,o,c);i?o(m):_=zn(m)?m:ae},h=s.map((m,g)=>xn(m,C=>{f[g]=C,d&=~(1<<g),r&&v()},()=>{d|=1<<g}));return r=!0,v(),function(){Fe(h),_(),r=!1}})}function ns(l,e,t=7){const n=new Date(Date.now()+t*864e5).toUTCString();document.cookie=`${l}=${encodeURIComponent(e)}; expires=${n}; path=/; SameSite=Strict`}function ss(l){const e=document.cookie.match(new RegExp("(^| )"+l+"=([^;]+)"));return e?decodeURIComponent(e[2]):null}function $s(l){document.cookie=`${l}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; SameSite=Strict`}function Ra(){const{subscribe:l,set:e,update:t}=dl({token:ss("jwt_token"),user:null,loading:!1,error:null});return{subscribe:l,setToken(n){ns("jwt_token",n,7),t(s=>({...s,token:n,error:null}))},setUser(n){t(s=>({...s,user:n}))},setError(n){t(s=>({...s,error:n,loading:!1}))},setLoading(n){t(s=>({...s,loading:n}))},logout(){$s("jwt_token"),$s("do_token_local"),e({token:null,user:null,loading:!1,error:null})},clearError(){t(n=>({...n,error:null}))}}}const ht=Ra();ql(ht,l=>!!l.token&&!!l.user);function Zl(){return ss("do_token_local")}function Oa(l){ns("do_token_local",l,30)}function Qn(){return ss("cf_token_local")}function Aa(l){ns("cf_token_local",l,30)}function qa(){const{subscribe:l,update:e}=dl([]);let t=0;function n(i,o="info",c=3e3){const r={id:++t,message:i,type:o};return e(f=>[...f,r]),c>0&&setTimeout(()=>s(r.id),c),r.id}function s(i){e(o=>o.filter(c=>c.id!==i))}return{subscribe:l,success:(i,o)=>n(i,"success",o),error:(i,o)=>n(i,"error",o),warning:(i,o)=>n(i,"warning",o),info:(i,o)=>n(i,"info",o),remove:s}}const ve=qa(),na="/api/v1",sa=["/infra/servers","/infra/snapshots","/infra/setup","/infra/deploy","/infra/registry","/infra/agent","/infra/architecture","/infra/fleet"];function oa(l,e={}){const t=en(ht),n={"Content-Type":"application/json"};t.token&&(n.Authorization=`Bearer ${t.token}`);let s=na+l;if(!e.skipDoToken&&sa.some(o=>l.startsWith(o))){const o=Zl();if(!o)return{error:"DO token not set",url:null,headers:null};const c=s.includes("?")?"&":"?";s+=`${c}do_token=${encodeURIComponent(o)}`}return{url:s,headers:n,error:null}}async function os(l){if(l.status===401){let e="Authentication failed";try{const n=await l.json();e=n.detail||n.error||n.message||e}catch{}throw en(ht).token&&(ht.logout(),e="Session expired - please login again"),new Error(e)}if(!l.ok){const e=await l.json().catch(()=>({detail:"Request failed"}));throw new Error(e.detail||e.error||e.message||"Request failed")}}async function Be(l,e,t=null,n={}){const{url:s,headers:i,error:o}=oa(e,n);if(o)return console.debug(`Skipping ${e} - ${o}`),null;const c={method:l,headers:i};t&&(c.body=JSON.stringify(t));const r=await fetch(s,c);if(await os(r),r.status===204)return null;const f=await r.json();return f&&f.success===!0&&f.data!==void 0?f.data:f}async function ia(l,e,t=null,n,s={}){const{url:i,headers:o,error:c}=oa(e,s);if(c)throw new Error(c);const r={method:l,headers:o};t&&(r.body=JSON.stringify(t));const f=await fetch(i,r);await os(f);const d=f.body.getReader(),_=new TextDecoder;let v="";for(;;){const{done:h,value:m}=await d.read();if(h)break;v+=_.decode(m,{stream:!0});const g=v.split(`
`);v=g.pop()||"";for(const C of g)if(C.startsWith("data: "))try{const y=JSON.parse(C.slice(6));n(y)}catch{}}}async function Fa(l,e,t,n={}){const s=en(ht);let i=na+l;if(!n.skipDoToken&&sa.some(v=>l.startsWith(v))){const v=Zl();if(!v)throw new Error("DO token not set");const h=i.includes("?")?"&":"?";i+=`${h}do_token=${encodeURIComponent(v)}`}const c={};s.token&&(c.Authorization=`Bearer ${s.token}`);const r=await fetch(i,{method:"POST",headers:c,body:e});await os(r);const f=r.body.getReader(),d=new TextDecoder;let _="";for(;;){const{done:v,value:h}=await f.read();if(v)break;_+=d.decode(h,{stream:!0});const m=_.split(`
`);_=m.pop()||"";for(const g of m)if(g.startsWith("data: "))try{const C=JSON.parse(g.slice(6));t(C)}catch{}}}async function za(){if(!en(ht).token)return!1;try{const e=await Be("GET","/auth/me");return ht.setUser(e),!0}catch{return ht.logout(),!1}}function Ba(l,e,t={}){const{refreshInterval:n=0,revalidateOnFocus:s=!0,revalidateOnMount:i=!0,dedupingInterval:o=2e3,initialData:c=null}=t,r=dl({data:c,error:null,loading:!1,lastFetched:null});let f=0,d=null,_=null,v=0;async function h(S=!1){const M=Date.now();return!S&&d&&M-f<o||(f=M,r.update(P=>{var D;return{...P,loading:P.data===null||((D=P.data)==null?void 0:D.length)===0}}),d=(async()=>{try{const P=await e();return r.set({data:P,error:null,loading:!1,lastFetched:new Date}),P}catch(P){throw r.update(D=>({...D,error:P.message||"Fetch failed",loading:!1})),P}finally{d=null}})()),d}function m(){document.visibilityState==="visible"&&s&&h()}function g(){n>0&&!_&&(_=setInterval(()=>h(),n))}function C(){_&&(clearInterval(_),_=null)}const{subscribe:y}=r;function w(S){v++,v===1&&(s&&typeof document<"u"&&document.addEventListener("visibilitychange",m),i&&h(),g());const M=y(S);return()=>{M(),v--,v===0&&(typeof document<"u"&&document.removeEventListener("visibilitychange",m),C())}}return{subscribe:w,refresh:()=>h(!0),mutate:S=>r.update(M=>({...M,data:S})),get:()=>en(r)}}function Bn(l,e={}){const{transform:t=s=>s,...n}=e;return Ba(l,async()=>{const s=await Be("GET",l);return t(s)},n)}function Ua(l,e={}){const{transform:t=r=>r,...n}=e,s=dl({data:null,error:null,loading:!1,lastFetched:null});let i=null,o=null;async function c(r){const f=l(r);if(!f){s.set({data:null,error:null,loading:!1,lastFetched:null});return}return o&&JSON.stringify(r)===JSON.stringify(i)||(i=r,s.update(d=>({...d,loading:!0})),o=(async()=>{try{const d=await Be("GET",f),_=t(d);return s.set({data:_,error:null,loading:!1,lastFetched:new Date}),_}catch(d){throw s.update(_=>({..._,error:d.message||"Fetch failed",loading:!1})),d}finally{o=null}})()),o}return{subscribe:s.subscribe,fetch:c,refresh:()=>i&&c(i),clear:()=>{i=null,s.set({data:null,error:null,loading:!1,lastFetched:null})}}}const ks=dl("infra"),Tt=dl({project:"",env:"",server:"",container:"",range:"30d",tail:!1}),Ia=["infra","metrics","logs","deployments"],cl=Bn("/infra/servers",{transform:l=>l.servers||l||[],refreshInterval:6e4,revalidateOnFocus:!0,initialData:[]}),ra=Bn("/infra/projects",{transform:l=>l.projects||[],refreshInterval:12e4,initialData:[]}),Ln=Bn("/infra/snapshots",{transform:l=>l.snapshots||[],refreshInterval:6e4,initialData:[]}),Rl=Bn("/infra/deployments/history",{transform:l=>l.deployments||[],refreshInterval:3e4,initialData:[]}),Xn=Ua(l=>l!=null&&l.server?`/infra/agent/${l.server}/containers`:null,{transform:l=>(l.containers||l||[]).map(t=>({id:t.ID||t.Id||t.id,name:t.Names||t.Name||t.name||"unknown",image:t.Image||t.image,status:t.Status||t.State||t.status,state:t.State||t.state}))}),bl=ql(cl,l=>l.data||[]),aa=ql(ra,l=>l.data||[]),Zn=ql(Ln,l=>l.data||[]);ql(Rl,l=>l.data||[]);const Ha=ql(Xn,l=>l.data||[]),Ga="1.9.5";function Wa(){const l=typeof localStorage<"u"&&localStorage.getItem("theme")||"dark",{subscribe:e,set:t}=dl(l);return typeof document<"u"&&document.documentElement.setAttribute("data-theme",l),{subscribe:e,set(n){typeof localStorage<"u"&&localStorage.setItem("theme",n),typeof document<"u"&&document.documentElement.setAttribute("data-theme",n),t(n)}}}const Yn=Wa();function ws(l){let e;return{c(){e=p("span"),u(e,"class","brand-dot svelte-16ksbsk")},m(t,n){k(t,e,n)},d(t){t&&$(e)}}}function ys(l){let e,t,n,s,i,o;return{c(){e=p("div"),t=p("button"),t.textContent="Sign In",n=b(),s=p("button"),s.textContent="Sign Up",u(t,"class","tab svelte-16ksbsk"),$e(t,"active",l[4]==="login"),u(s,"class","tab svelte-16ksbsk"),$e(s,"active",l[4]==="signup"),u(e,"class","tabs svelte-16ksbsk")},m(c,r){k(c,e,r),a(e,t),a(e,n),a(e,s),i||(o=[te(t,"click",l[16]),te(s,"click",l[17])],i=!0)},p(c,r){r&16&&$e(t,"active",c[4]==="login"),r&16&&$e(s,"active",c[4]==="signup")},d(c){c&&$(e),i=!1,Fe(o)}}}function Ja(l){let e,t,n,s,i,o,c,r,f,d,_,v,h,m,g,C,y,w,S;function M(j,L){return j[5]?Ka:Va}let P=M(l),D=P(l);return{c(){e=p("form"),t=p("div"),n=p("label"),n.textContent="Email",s=b(),i=p("input"),o=b(),c=p("div"),r=p("label"),r.textContent="Password",f=b(),d=p("input"),_=b(),v=p("div"),h=p("label"),h.textContent="Confirm Password",m=b(),g=p("input"),C=b(),y=p("button"),D.c(),u(n,"for","signup-email"),u(n,"class","svelte-16ksbsk"),u(i,"type","email"),u(i,"id","signup-email"),u(i,"placeholder","you@example.com"),i.required=!0,i.disabled=l[5],u(i,"class","svelte-16ksbsk"),u(t,"class","form-group svelte-16ksbsk"),u(r,"for","signup-password"),u(r,"class","svelte-16ksbsk"),u(d,"type","password"),u(d,"id","signup-password"),u(d,"placeholder","••••••••"),d.required=!0,d.disabled=l[5],u(d,"class","svelte-16ksbsk"),u(c,"class","form-group svelte-16ksbsk"),u(h,"for","signup-confirm"),u(h,"class","svelte-16ksbsk"),u(g,"type","password"),u(g,"id","signup-confirm"),u(g,"placeholder","••••••••"),g.required=!0,g.disabled=l[5],u(g,"class","svelte-16ksbsk"),u(v,"class","form-group svelte-16ksbsk"),u(y,"type","submit"),u(y,"class","btn btn-primary btn-full svelte-16ksbsk"),y.disabled=l[5]},m(j,L){k(j,e,L),a(e,t),a(t,n),a(t,s),a(t,i),Q(i,l[9]),a(e,o),a(e,c),a(c,r),a(c,f),a(c,d),Q(d,l[10]),a(e,_),a(e,v),a(v,h),a(v,m),a(v,g),Q(g,l[11]),a(e,C),a(e,y),D.m(y,null),w||(S=[te(i,"input",l[20]),te(d,"input",l[21]),te(g,"input",l[22]),te(e,"submit",l[14])],w=!0)},p(j,L){L&32&&(i.disabled=j[5]),L&512&&i.value!==j[9]&&Q(i,j[9]),L&32&&(d.disabled=j[5]),L&1024&&d.value!==j[10]&&Q(d,j[10]),L&32&&(g.disabled=j[5]),L&2048&&g.value!==j[11]&&Q(g,j[11]),P!==(P=M(j))&&(D.d(1),D=P(j),D&&(D.c(),D.m(y,null))),L&32&&(y.disabled=j[5])},d(j){j&&$(e),D.d(),w=!1,Fe(S)}}}function Ya(l){let e,t,n,s,i,o,c,r,f,d,_,v,h,m;function g(w,S){return w[5]?Xa:Qa}let C=g(l),y=C(l);return{c(){e=p("form"),t=p("div"),n=p("label"),n.textContent="Email",s=b(),i=p("input"),o=b(),c=p("div"),r=p("label"),r.textContent="Password",f=b(),d=p("input"),_=b(),v=p("button"),y.c(),u(n,"for","login-email"),u(n,"class","svelte-16ksbsk"),u(i,"type","email"),u(i,"id","login-email"),u(i,"placeholder","you@example.com"),i.required=!0,i.disabled=l[5],u(i,"class","svelte-16ksbsk"),u(t,"class","form-group svelte-16ksbsk"),u(r,"for","login-password"),u(r,"class","svelte-16ksbsk"),u(d,"type","password"),u(d,"id","login-password"),u(d,"placeholder","••••••••"),d.required=!0,d.disabled=l[5],u(d,"class","svelte-16ksbsk"),u(c,"class","form-group svelte-16ksbsk"),u(v,"type","submit"),u(v,"class","btn btn-primary btn-full svelte-16ksbsk"),v.disabled=l[5]},m(w,S){k(w,e,S),a(e,t),a(t,n),a(t,s),a(t,i),Q(i,l[7]),a(e,o),a(e,c),a(c,r),a(c,f),a(c,d),Q(d,l[8]),a(e,_),a(e,v),y.m(v,null),h||(m=[te(i,"input",l[18]),te(d,"input",l[19]),te(e,"submit",l[13])],h=!0)},p(w,S){S&32&&(i.disabled=w[5]),S&128&&i.value!==w[7]&&Q(i,w[7]),S&32&&(d.disabled=w[5]),S&256&&d.value!==w[8]&&Q(d,w[8]),C!==(C=g(w))&&(y.d(1),y=C(w),y&&(y.c(),y.m(v,null))),S&32&&(v.disabled=w[5])},d(w){w&&$(e),y.d(),h=!1,Fe(m)}}}function Va(l){let e;return{c(){e=T("Create Account")},m(t,n){k(t,e,n)},d(t){t&&$(e)}}}function Ka(l){let e;return{c(){e=p("span"),u(e,"class","spinner svelte-16ksbsk")},m(t,n){k(t,e,n)},d(t){t&&$(e)}}}function Qa(l){let e;return{c(){e=T("Sign In")},m(t,n){k(t,e,n)},d(t){t&&$(e)}}}function Xa(l){let e;return{c(){e=p("span"),u(e,"class","spinner svelte-16ksbsk")},m(t,n){k(t,e,n)},d(t){t&&$(e)}}}function Cs(l){let e,t;return{c(){e=p("p"),t=T(l[6]),u(e,"class","error-message svelte-16ksbsk")},m(n,s){k(n,e,s),a(e,t)},p(n,s){s&64&&B(t,n[6])},d(n){n&&$(e)}}}function Za(l){let e,t,n,s,i,o,c,r,f,d,_,v,h=l[2]&&ws(),m=l[3]&&ys(l);function g(S,M){return S[4]==="login"?Ya:Ja}let C=g(l),y=C(l),w=l[6]&&Cs(l);return{c(){e=p("div"),t=p("div"),n=p("div"),s=p("h1"),h&&h.c(),i=b(),o=T(l[0]),c=b(),r=p("p"),f=T(l[1]),d=b(),m&&m.c(),_=b(),y.c(),v=b(),w&&w.c(),u(s,"class","svelte-16ksbsk"),u(r,"class","svelte-16ksbsk"),u(n,"class","auth-title svelte-16ksbsk"),u(t,"class","auth-card glass svelte-16ksbsk"),u(e,"class","auth-container svelte-16ksbsk")},m(S,M){k(S,e,M),a(e,t),a(t,n),a(n,s),h&&h.m(s,null),a(s,i),a(s,o),a(n,c),a(n,r),a(r,f),a(t,d),m&&m.m(t,null),a(t,_),y.m(t,null),a(t,v),w&&w.m(t,null)},p(S,[M]){S[2]?h||(h=ws(),h.c(),h.m(s,i)):h&&(h.d(1),h=null),M&1&&B(o,S[0]),M&2&&B(f,S[1]),S[3]?m?m.p(S,M):(m=ys(S),m.c(),m.m(t,_)):m&&(m.d(1),m=null),C===(C=g(S))&&y?y.p(S,M):(y.d(1),y=C(S),y&&(y.c(),y.m(t,v))),S[6]?w?w.p(S,M):(w=Cs(S),w.c(),w.m(t,null)):w&&(w.d(1),w=null)},i:ae,o:ae,d(S){S&&$(e),h&&h.d(),m&&m.d(),y.d(),w&&w.d()}}}function xa(l,e,t){let{title:n="Welcome"}=e,{subtitle:s="Sign in to your account"}=e,{apiBase:i="/api/v1"}=e,{showLogo:o=!0}=e,{allowSignup:c=!0}=e;const r=tn();let f="login",d=!1,_=null,v="",h="",m="",g="",C="";function y(q){t(4,f=q),t(6,_=null)}async function w(q,H,W){const I=await fetch(i+H,{method:q,headers:{"Content-Type":"application/json"},body:W?JSON.stringify(W):void 0});if(!I.ok){const J=await I.json().catch(()=>({detail:"Request failed"}));throw new Error(J.detail||J.error||J.message||"Request failed")}return I.json()}async function S(q){q.preventDefault(),t(5,d=!0),t(6,_=null);try{const W=(await w("POST","/auth/login",{username:v,password:h})).access_token,J=await(await fetch(i+"/auth/me",{headers:{Authorization:`Bearer ${W}`}})).json();r("success",{user:J,token:W})}catch(H){t(6,_=H.message),r("error",{error:H.message,type:"login"})}finally{t(5,d=!1)}}async function M(q){if(q.preventDefault(),g!==C){t(6,_="Passwords do not match");return}t(5,d=!0),t(6,_=null);try{await w("POST","/auth/register",{username:m,email:m,password:g});const W=(await w("POST","/auth/login",{username:m,password:g})).access_token,J=await(await fetch(i+"/auth/me",{headers:{Authorization:`Bearer ${W}`}})).json();r("success",{user:J,token:W})}catch(H){t(6,_=H.message),r("error",{error:H.message,type:"signup"})}finally{t(5,d=!1)}}const P=()=>y("login"),D=()=>y("signup");function j(){v=this.value,t(7,v)}function L(){h=this.value,t(8,h)}function R(){m=this.value,t(9,m)}function A(){g=this.value,t(10,g)}function F(){C=this.value,t(11,C)}return l.$$set=q=>{"title"in q&&t(0,n=q.title),"subtitle"in q&&t(1,s=q.subtitle),"apiBase"in q&&t(15,i=q.apiBase),"showLogo"in q&&t(2,o=q.showLogo),"allowSignup"in q&&t(3,c=q.allowSignup)},[n,s,o,c,f,d,_,v,h,m,g,C,y,S,M,i,P,D,j,L,R,A,F]}class ec extends Ve{constructor(e){super(),Ye(this,e,xa,Za,Je,{title:0,subtitle:1,apiBase:15,showLogo:2,allowSignup:3})}}function ca(l){const e=l-1;return e*e*e+1}function Ss(l,{delay:e=0,duration:t=400,easing:n=Hr}={}){const s=+getComputedStyle(l).opacity;return{delay:e,duration:t,easing:n,css:i=>`opacity: ${i*s}`}}function Ts(l,{delay:e=0,duration:t=400,easing:n=ca,x:s=0,y:i=0,opacity:o=0}={}){const c=getComputedStyle(l),r=+c.opacity,f=c.transform==="none"?"":c.transform,d=r*(1-o),[_,v]=hs(s),[h,m]=hs(i);return{delay:e,duration:t,easing:n,css:(g,C)=>`
			transform: ${f} translate(${(1-g)*_}${v}, ${(1-g)*h}${m});
			opacity: ${r-d*C}`}}function Ds(l,{delay:e=0,duration:t=400,easing:n=ca,start:s=0,opacity:i=0}={}){const o=getComputedStyle(l),c=+o.opacity,r=o.transform==="none"?"":o.transform,f=1-s,d=c*(1-i);return{delay:e,duration:t,easing:n,css:(_,v)=>`
			transform: ${r} scale(${1-f*v});
			opacity: ${c-d*v}
		`}}function Ps(l,e,t){const n=l.slice();return n[2]=e[t],n}function Es(l,e){let t,n,s=e[2].message+"",i,o,c,r,f,d,_,v,h;function m(){return e[1](e[2])}return{key:l,first:null,c(){t=p("div"),n=p("span"),i=T(s),o=b(),c=p("button"),c.textContent="×",r=b(),u(n,"class","toast-message svelte-1l5lsfn"),u(c,"class","toast-close svelte-1l5lsfn"),u(t,"class",f="toast toast-"+e[2].type+" svelte-1l5lsfn"),this.first=t},m(g,C){k(g,t,C),a(t,n),a(n,i),a(t,o),a(t,c),a(t,r),_=!0,v||(h=te(c,"click",m),v=!0)},p(g,C){e=g,(!_||C&1)&&s!==(s=e[2].message+"")&&B(i,s),(!_||C&1&&f!==(f="toast toast-"+e[2].type+" svelte-1l5lsfn"))&&u(t,"class",f)},i(g){_||(g&&Ue(()=>{_&&(d||(d=Nl(t,Ts,{x:100,duration:200},!0)),d.run(1))}),_=!0)},o(g){g&&(d||(d=Nl(t,Ts,{x:100,duration:200},!1)),d.run(0)),_=!1},d(g){g&&$(t),g&&d&&d.end(),v=!1,h()}}}function tc(l){let e,t=[],n=new Map,s,i=_e(l[0]);const o=c=>c[2].id;for(let c=0;c<i.length;c+=1){let r=Ps(l,i,c),f=o(r);n.set(f,t[c]=Es(f,r))}return{c(){e=p("div");for(let c=0;c<t.length;c+=1)t[c].c();u(e,"class","toast-container svelte-1l5lsfn")},m(c,r){k(c,e,r);for(let f=0;f<t.length;f+=1)t[f]&&t[f].m(e,null);s=!0},p(c,[r]){r&1&&(i=_e(c[0]),ke(),t=la(t,r,o,1,c,i,n,e,ta,Es,null,Ps),we())},i(c){if(!s){for(let r=0;r<i.length;r+=1)E(t[r]);s=!0}},o(c){for(let r=0;r<t.length;r+=1)N(t[r]);s=!1},d(c){c&&$(e);for(let r=0;r<t.length;r+=1)t[r].d()}}}function lc(l,e,t){let n;return We(l,ve,i=>t(0,n=i)),[n,i=>ve.remove(i.id)]}class nc extends Ve{constructor(e){super(),Ye(this,e,lc,tc,Je,{})}}function sc(l){let e,t,n,s,i,o,c=l[3]&&Ms();const r=l[7].default,f=Yt(r,l,l[6],null);return{c(){e=p("button"),c&&c.c(),t=b(),f&&f.c(),u(e,"type",l[4]),u(e,"class",n="btn btn-"+l[0]+" btn-"+l[1]+" svelte-1qvbuil"),e.disabled=l[2]},m(d,_){k(d,e,_),c&&c.m(e,null),a(e,t),f&&f.m(e,null),s=!0,i||(o=te(e,"click",l[9]),i=!0)},p(d,_){d[3]?c||(c=Ms(),c.c(),c.m(e,t)):c&&(c.d(1),c=null),f&&f.p&&(!s||_&64)&&Kt(f,r,d,d[6],s?Vt(r,d[6],_,null):Qt(d[6]),null),(!s||_&16)&&u(e,"type",d[4]),(!s||_&3&&n!==(n="btn btn-"+d[0]+" btn-"+d[1]+" svelte-1qvbuil"))&&u(e,"class",n),(!s||_&4)&&(e.disabled=d[2])},i(d){s||(E(f,d),s=!0)},o(d){N(f,d),s=!1},d(d){d&&$(e),c&&c.d(),f&&f.d(d),i=!1,o()}}}function oc(l){let e,t,n,s,i,o,c=l[3]&&js();const r=l[7].default,f=Yt(r,l,l[6],null);return{c(){e=p("a"),c&&c.c(),t=b(),f&&f.c(),u(e,"href",l[5]),u(e,"class",n="btn btn-"+l[0]+" btn-"+l[1]+" svelte-1qvbuil"),$e(e,"disabled",l[2])},m(d,_){k(d,e,_),c&&c.m(e,null),a(e,t),f&&f.m(e,null),s=!0,i||(o=te(e,"click",l[8]),i=!0)},p(d,_){d[3]?c||(c=js(),c.c(),c.m(e,t)):c&&(c.d(1),c=null),f&&f.p&&(!s||_&64)&&Kt(f,r,d,d[6],s?Vt(r,d[6],_,null):Qt(d[6]),null),(!s||_&32)&&u(e,"href",d[5]),(!s||_&3&&n!==(n="btn btn-"+d[0]+" btn-"+d[1]+" svelte-1qvbuil"))&&u(e,"class",n),(!s||_&7)&&$e(e,"disabled",d[2])},i(d){s||(E(f,d),s=!0)},o(d){N(f,d),s=!1},d(d){d&&$(e),c&&c.d(),f&&f.d(d),i=!1,o()}}}function Ms(l){let e;return{c(){e=p("span"),u(e,"class","spinner svelte-1qvbuil")},m(t,n){k(t,e,n)},d(t){t&&$(e)}}}function js(l){let e;return{c(){e=p("span"),u(e,"class","spinner svelte-1qvbuil")},m(t,n){k(t,e,n)},d(t){t&&$(e)}}}function ic(l){let e,t,n,s;const i=[oc,sc],o=[];function c(r,f){return r[5]?0:1}return e=c(l),t=o[e]=i[e](l),{c(){t.c(),n=Le()},m(r,f){o[e].m(r,f),k(r,n,f),s=!0},p(r,[f]){let d=e;e=c(r),e===d?o[e].p(r,f):(ke(),N(o[d],1,1,()=>{o[d]=null}),we(),t=o[e],t?t.p(r,f):(t=o[e]=i[e](r),t.c()),E(t,1),t.m(n.parentNode,n))},i(r){s||(E(t),s=!0)},o(r){N(t),s=!1},d(r){r&&$(n),o[e].d(r)}}}function rc(l,e,t){let{$$slots:n={},$$scope:s}=e,{variant:i="default"}=e,{size:o="md"}=e,{disabled:c=!1}=e,{loading:r=!1}=e,{type:f="button"}=e,{href:d=null}=e;function _(h){bs.call(this,l,h)}function v(h){bs.call(this,l,h)}return l.$$set=h=>{"variant"in h&&t(0,i=h.variant),"size"in h&&t(1,o=h.size),"disabled"in h&&t(2,c=h.disabled),"loading"in h&&t(3,r=h.loading),"type"in h&&t(4,f=h.type),"href"in h&&t(5,d=h.href),"$$scope"in h&&t(6,s=h.$$scope)},[i,o,c,r,f,d,s,n,_,v]}class Te extends Ve{constructor(e){super(),Ye(this,e,rc,ic,Je,{variant:0,size:1,disabled:2,loading:3,type:4,href:5})}}function Ls(l){let e,t=l[1].user.email+"",n;return{c(){e=p("span"),n=T(t),u(e,"class","user-email svelte-1qs0uw9")},m(s,i){k(s,e,i),a(e,n)},p(s,i){i&2&&t!==(t=s[1].user.email+"")&&B(n,t)},d(s){s&&$(e)}}}function ac(l){let e;return{c(){e=T("Logout")},m(t,n){k(t,e,n)},d(t){t&&$(e)}}}function cc(l){let e,t,n,s,i,o,c,r,f,d,_=l[1].user&&Ls(l);return f=new Te({props:{variant:"ghost",size:"sm",$$slots:{default:[ac]},$$scope:{ctx:l}}}),f.$on("click",l[2]),{c(){e=p("header"),t=p("h1"),n=p("span"),s=b(),i=T(l[0]),o=b(),c=p("div"),_&&_.c(),r=b(),oe(f.$$.fragment),u(n,"class","brand-dot svelte-1qs0uw9"),u(t,"class","svelte-1qs0uw9"),u(c,"class","header-actions svelte-1qs0uw9"),u(e,"class","header glass svelte-1qs0uw9")},m(v,h){k(v,e,h),a(e,t),a(t,n),a(t,s),a(t,i),a(e,o),a(e,c),_&&_.m(c,null),a(c,r),ne(f,c,null),d=!0},p(v,[h]){(!d||h&1)&&B(i,v[0]),v[1].user?_?_.p(v,h):(_=Ls(v),_.c(),_.m(c,r)):_&&(_.d(1),_=null);const m={};h&8&&(m.$$scope={dirty:h,ctx:v}),f.$set(m)},i(v){d||(E(f.$$.fragment,v),d=!0)},o(v){N(f.$$.fragment,v),d=!1},d(v){v&&$(e),_&&_.d(),se(f)}}}function fc(l,e,t){let n;We(l,ht,o=>t(1,n=o));let{title:s="Deploy Dashboard"}=e;function i(){ht.logout()}return l.$$set=o=>{"title"in o&&t(0,s=o.title)},[s,n,i]}class uc extends Ve{constructor(e){super(),Ye(this,e,fc,cc,Je,{title:0})}}function Ns(l,e,t){const n=l.slice();return n[6]=e[t],n}function Rs(l){let e,t=l[6].icon+"",n;return{c(){e=p("span"),n=T(t),u(e,"class","tab-icon svelte-1po08a6")},m(s,i){k(s,e,i),a(e,n)},p(s,i){i&2&&t!==(t=s[6].icon+"")&&B(n,t)},d(s){s&&$(e)}}}function Os(l){let e,t,n=l[6].label+"",s,i,o,c,r=l[6].icon&&Rs(l);function f(){return l[4](l[6])}return{c(){e=p("button"),r&&r.c(),t=b(),s=T(n),i=b(),u(e,"class","tab svelte-1po08a6"),$e(e,"active",l[0]===l[6].id)},m(d,_){k(d,e,_),r&&r.m(e,null),a(e,t),a(e,s),a(e,i),o||(c=te(e,"click",f),o=!0)},p(d,_){l=d,l[6].icon?r?r.p(l,_):(r=Rs(l),r.c(),r.m(e,t)):r&&(r.d(1),r=null),_&2&&n!==(n=l[6].label+"")&&B(s,n),_&3&&$e(e,"active",l[0]===l[6].id)},d(d){d&&$(e),r&&r.d(),o=!1,c()}}}function dc(l){let e,t=_e(l[1]),n=[];for(let s=0;s<t.length;s+=1)n[s]=Os(Ns(l,t,s));return{c(){e=p("div");for(let s=0;s<n.length;s+=1)n[s].c();u(e,"class","tabs svelte-1po08a6"),$e(e,"scrollable",l[2])},m(s,i){k(s,e,i);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null)},p(s,[i]){if(i&11){t=_e(s[1]);let o;for(o=0;o<t.length;o+=1){const c=Ns(s,t,o);n[o]?n[o].p(c,i):(n[o]=Os(c),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=t.length}i&4&&$e(e,"scrollable",s[2])},i:ae,o:ae,d(s){s&&$(e),Me(n,s)}}}function pc(l,e,t){let{tabs:n=[]}=e,{active:s=""}=e,{scrollable:i=!0}=e;const o=tn();function c(f){t(0,s=f),o("change",f)}const r=f=>c(f.id);return l.$$set=f=>{"tabs"in f&&t(1,n=f.tabs),"active"in f&&t(0,s=f.active),"scrollable"in f&&t(2,i=f.scrollable)},[s,n,i,c,r]}class _c extends Ve{constructor(e){super(),Ye(this,e,pc,dc,Je,{tabs:1,active:0,scrollable:2})}}function As(l,e,t){const n=l.slice();return n[16]=e[t],n}function qs(l,e,t){var i,o,c;const n=l.slice();n[19]=e[t];const s=n[19].ip||((c=(o=(i=n[19].networks)==null?void 0:i.v4)==null?void 0:o[0])==null?void 0:c.ip_address);return n[20]=s,n}function Fs(l,e,t){const n=l.slice();return n[23]=e[t],n}function zs(l){let e,t=l[23]+"",n,s;return{c(){e=p("option"),n=T(t),e.__value=s=l[23],Q(e,e.__value)},m(i,o){k(i,e,o),a(e,n)},p(i,o){o&8&&t!==(t=i[23]+"")&&B(n,t),o&8&&s!==(s=i[23])&&(e.__value=s,Q(e,e.__value))},d(i){i&&$(e)}}}function Bs(l){let e,t=(l[19].name||"unnamed")+"",n,s,i=l[20]+"",o,c,r;return{c(){e=p("option"),n=T(t),s=T(" ("),o=T(i),c=T(")"),e.__value=r=l[20],Q(e,e.__value)},m(f,d){k(f,e,d),a(e,n),a(e,s),a(e,o),a(e,c)},p(f,d){d&16&&t!==(t=(f[19].name||"unnamed")+"")&&B(n,t),d&16&&i!==(i=f[20]+"")&&B(o,i),d&16&&r!==(r=f[20])&&(e.__value=r,Q(e,e.__value))},d(f){f&&$(e)}}}function Us(l){let e,t=l[20]&&Bs(l);return{c(){t&&t.c(),e=Le()},m(n,s){t&&t.m(n,s),k(n,e,s)},p(n,s){n[20]?t?t.p(n,s):(t=Bs(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(n){n&&$(e),t&&t.d(n)}}}function Is(l){let e,t,n,s,i,o,c,r=_e(l[5]),f=[];for(let d=0;d<r.length;d+=1)f[d]=Hs(As(l,r,d));return{c(){e=p("div"),t=p("label"),t.textContent="Container:",n=b(),s=p("select"),i=p("option"),i.textContent="(All)";for(let d=0;d<f.length;d+=1)f[d].c();u(t,"class","svelte-1wvrz0m"),i.__value="",Q(i,i.__value),u(s,"class","svelte-1wvrz0m"),l[2].container===void 0&&Ue(()=>l[12].call(s)),u(e,"class","scope-field svelte-1wvrz0m")},m(d,_){k(d,e,_),a(e,t),a(e,n),a(e,s),a(s,i);for(let v=0;v<f.length;v+=1)f[v]&&f[v].m(s,null);Pe(s,l[2].container,!0),o||(c=[te(s,"change",l[12]),te(s,"change",l[6])],o=!0)},p(d,_){if(_&32){r=_e(d[5]);let v;for(v=0;v<r.length;v+=1){const h=As(d,r,v);f[v]?f[v].p(h,_):(f[v]=Hs(h),f[v].c(),f[v].m(s,null))}for(;v<f.length;v+=1)f[v].d(1);f.length=r.length}_&12&&Pe(s,d[2].container)},d(d){d&&$(e),Me(f,d),o=!1,Fe(c)}}}function Hs(l){let e,t=l[16].name+"",n,s;return{c(){e=p("option"),n=T(t),e.__value=s=l[16].name,Q(e,e.__value)},m(i,o){k(i,e,o),a(e,n)},p(i,o){o&32&&t!==(t=i[16].name+"")&&B(n,t),o&32&&s!==(s=i[16].name)&&(e.__value=s,Q(e,e.__value))},d(i){i&&$(e)}}}function Gs(l){let e,t,n,s,i;return{c(){e=p("label"),t=p("input"),n=T(`
      Tail`),u(t,"type","checkbox"),u(t,"class","svelte-1wvrz0m"),u(e,"class","tail-toggle svelte-1wvrz0m")},m(o,c){k(o,e,c),a(e,t),t.checked=l[2].tail,a(e,n),s||(i=[te(t,"change",l[14]),te(t,"change",l[6])],s=!0)},p(o,c){c&12&&(t.checked=o[2].tail)},d(o){o&&$(e),s=!1,Fe(i)}}}function vc(l){let e,t,n,s,i,o,c,r,f,d,_,v,h,m,g,C,y,w,S,M,P,D,j,L,R,A,F,q,H,W,I,J,z,G,O,U,Y,Z,ie,le,ee,ue=_e(l[3]),x=[];for(let de=0;de<ue.length;de+=1)x[de]=zs(Fs(l,ue,de));let he=_e(l[4]),re=[];for(let de=0;de<he.length;de+=1)re[de]=Us(qs(l,he,de));let X=l[1]&&l[2].server&&Is(l),pe=l[0]&&Gs(l);return{c(){e=p("div"),t=p("div"),n=p("div"),n.innerHTML='<span class="brand-dot svelte-1wvrz0m"></span> <span>cc</span>',s=b(),i=p("div"),o=p("label"),o.textContent="Project:",c=b(),r=p("select"),f=p("option"),f.textContent="All";for(let de=0;de<x.length;de+=1)x[de].c();d=b(),_=p("div"),v=p("label"),v.textContent="Env:",h=b(),m=p("select"),g=p("option"),g.textContent="All",C=p("option"),C.textContent="prod",y=p("option"),y.textContent="staging",w=p("option"),w.textContent="dev",S=b(),M=p("div"),P=p("label"),P.textContent="Server:",D=b(),j=p("select"),L=p("option"),L.textContent="(Fleet)";for(let de=0;de<re.length;de+=1)re[de].c();R=b(),X&&X.c(),A=b(),F=p("div"),q=p("label"),q.textContent="Last",H=b(),W=p("select"),I=p("option"),I.textContent="15m",J=p("option"),J.textContent="1h",z=p("option"),z.textContent="6h",G=p("option"),G.textContent="24h",O=p("option"),O.textContent="7d",U=p("option"),U.textContent="30d",Y=b(),Z=p("button"),Z.innerHTML='<svg viewBox="0 0 24 24" fill="none" class="svelte-1wvrz0m"><path d="M20 12a8 8 0 1 1-2.34-5.66" stroke="currentColor" stroke-width="2" stroke-linecap="round"></path><path d="M20 4v6h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg>',ie=b(),pe&&pe.c(),u(n,"class","scope-brand svelte-1wvrz0m"),u(o,"class","svelte-1wvrz0m"),f.__value="",Q(f,f.__value),u(r,"class","svelte-1wvrz0m"),l[2].project===void 0&&Ue(()=>l[9].call(r)),u(i,"class","scope-field svelte-1wvrz0m"),u(v,"class","svelte-1wvrz0m"),g.__value="",Q(g,g.__value),C.__value="prod",Q(C,C.__value),y.__value="staging",Q(y,y.__value),w.__value="dev",Q(w,w.__value),u(m,"class","svelte-1wvrz0m"),l[2].env===void 0&&Ue(()=>l[10].call(m)),u(_,"class","scope-field svelte-1wvrz0m"),u(P,"class","svelte-1wvrz0m"),L.__value="",Q(L,L.__value),u(j,"class","svelte-1wvrz0m"),l[2].server===void 0&&Ue(()=>l[11].call(j)),u(M,"class","scope-field svelte-1wvrz0m"),u(q,"class","svelte-1wvrz0m"),I.__value="15m",Q(I,I.__value),J.__value="1h",Q(J,J.__value),z.__value="6h",Q(z,z.__value),G.__value="24h",Q(G,G.__value),O.__value="7d",Q(O,O.__value),U.__value="30d",Q(U,U.__value),u(W,"class","svelte-1wvrz0m"),l[2].range===void 0&&Ue(()=>l[13].call(W)),u(F,"class","scope-field svelte-1wvrz0m"),u(Z,"class","iconbtn svelte-1wvrz0m"),u(Z,"title","Refresh"),u(t,"class","scope-bar-inner svelte-1wvrz0m"),u(e,"class","scope-bar glass svelte-1wvrz0m")},m(de,be){k(de,e,be),a(e,t),a(t,n),a(t,s),a(t,i),a(i,o),a(i,c),a(i,r),a(r,f);for(let fe=0;fe<x.length;fe+=1)x[fe]&&x[fe].m(r,null);Pe(r,l[2].project,!0),a(t,d),a(t,_),a(_,v),a(_,h),a(_,m),a(m,g),a(m,C),a(m,y),a(m,w),Pe(m,l[2].env,!0),a(t,S),a(t,M),a(M,P),a(M,D),a(M,j),a(j,L);for(let fe=0;fe<re.length;fe+=1)re[fe]&&re[fe].m(j,null);Pe(j,l[2].server,!0),a(t,R),X&&X.m(t,null),a(t,A),a(t,F),a(F,q),a(F,H),a(F,W),a(W,I),a(W,J),a(W,z),a(W,G),a(W,O),a(W,U),Pe(W,l[2].range,!0),a(t,Y),a(t,Z),a(e,ie),pe&&pe.m(e,null),le||(ee=[te(r,"change",l[9]),te(r,"change",l[6]),te(m,"change",l[10]),te(m,"change",l[6]),te(j,"change",l[11]),te(j,"change",l[7]),te(W,"change",l[13]),te(W,"change",l[6]),te(Z,"click",l[8])],le=!0)},p(de,[be]){if(be&8){ue=_e(de[3]);let fe;for(fe=0;fe<ue.length;fe+=1){const ye=Fs(de,ue,fe);x[fe]?x[fe].p(ye,be):(x[fe]=zs(ye),x[fe].c(),x[fe].m(r,null))}for(;fe<x.length;fe+=1)x[fe].d(1);x.length=ue.length}if(be&12&&Pe(r,de[2].project),be&12&&Pe(m,de[2].env),be&16){he=_e(de[4]);let fe;for(fe=0;fe<he.length;fe+=1){const ye=qs(de,he,fe);re[fe]?re[fe].p(ye,be):(re[fe]=Us(ye),re[fe].c(),re[fe].m(j,null))}for(;fe<re.length;fe+=1)re[fe].d(1);re.length=he.length}be&12&&Pe(j,de[2].server),de[1]&&de[2].server?X?X.p(de,be):(X=Is(de),X.c(),X.m(t,A)):X&&(X.d(1),X=null),be&12&&Pe(W,de[2].range),de[0]?pe?pe.p(de,be):(pe=Gs(de),pe.c(),pe.m(e,null)):pe&&(pe.d(1),pe=null)},i:ae,o:ae,d(de){de&&$(e),Me(x,de),Me(re,de),X&&X.d(),pe&&pe.d(),le=!1,Fe(ee)}}}function mc(l,e,t){let n,s,i,o;We(l,Tt,S=>t(2,n=S)),We(l,aa,S=>t(3,s=S)),We(l,bl,S=>t(4,i=S)),We(l,Ha,S=>t(5,o=S));let{showTail:c=!1}=e,{showContainer:r=!1}=e;const f=tn();function d(){f("change",n)}function _(){ms(Tt,n.container="",n),d()}function v(){f("refresh")}function h(){n.project=Ge(this),Tt.set(n)}function m(){n.env=Ge(this),Tt.set(n)}function g(){n.server=Ge(this),Tt.set(n)}function C(){n.container=Ge(this),Tt.set(n)}function y(){n.range=Ge(this),Tt.set(n)}function w(){n.tail=this.checked,Tt.set(n)}return l.$$set=S=>{"showTail"in S&&t(0,c=S.showTail),"showContainer"in S&&t(1,r=S.showContainer)},l.$$.update=()=>{l.$$.dirty&4&&(n.server?Xn.fetch({server:n.server}):(Xn.clear(),ms(Tt,n.container="",n)))},[c,r,n,s,i,o,d,_,v,h,m,g,C,y,w]}class hc extends Ve{constructor(e){super(),Ye(this,e,mc,vc,Je,{showTail:0,showContainer:1})}}const gc=l=>({}),Ws=l=>({}),bc=l=>({}),Js=l=>({});function Ys(l){let e,t,n,s=l[0]&&Vs(l);const i=l[5].header,o=Yt(i,l,l[4],Js);return{c(){e=p("div"),s&&s.c(),t=b(),o&&o.c(),u(e,"class","card-header svelte-1qbuf8h")},m(c,r){k(c,e,r),s&&s.m(e,null),a(e,t),o&&o.m(e,null),n=!0},p(c,r){c[0]?s?s.p(c,r):(s=Vs(c),s.c(),s.m(e,t)):s&&(s.d(1),s=null),o&&o.p&&(!n||r&16)&&Kt(o,i,c,c[4],n?Vt(i,c[4],r,bc):Qt(c[4]),Js)},i(c){n||(E(o,c),n=!0)},o(c){N(o,c),n=!1},d(c){c&&$(e),s&&s.d(),o&&o.d(c)}}}function Vs(l){let e,t;return{c(){e=p("span"),t=T(l[0]),u(e,"class","card-title svelte-1qbuf8h")},m(n,s){k(n,e,s),a(e,t)},p(n,s){s&1&&B(t,n[0])},d(n){n&&$(e)}}}function Ks(l){let e,t;const n=l[5].footer,s=Yt(n,l,l[4],Ws);return{c(){e=p("div"),s&&s.c(),u(e,"class","card-footer svelte-1qbuf8h")},m(i,o){k(i,e,o),s&&s.m(e,null),t=!0},p(i,o){s&&s.p&&(!t||o&16)&&Kt(s,n,i,i[4],t?Vt(n,i[4],o,gc):Qt(i[4]),Ws)},i(i){t||(E(s,i),t=!0)},o(i){N(s,i),t=!1},d(i){i&&$(e),s&&s.d(i)}}}function $c(l){let e,t,n,s,i,o=(l[0]||l[3].header)&&Ys(l);const c=l[5].default,r=Yt(c,l,l[4],null);let f=l[3].footer&&Ks(l);return{c(){e=p("div"),o&&o.c(),t=b(),n=p("div"),r&&r.c(),s=b(),f&&f.c(),u(n,"class","card-body svelte-1qbuf8h"),u(e,"class","card svelte-1qbuf8h"),$e(e,"glass",l[1]),$e(e,"no-padding",!l[2])},m(d,_){k(d,e,_),o&&o.m(e,null),a(e,t),a(e,n),r&&r.m(n,null),a(e,s),f&&f.m(e,null),i=!0},p(d,[_]){d[0]||d[3].header?o?(o.p(d,_),_&9&&E(o,1)):(o=Ys(d),o.c(),E(o,1),o.m(e,t)):o&&(ke(),N(o,1,1,()=>{o=null}),we()),r&&r.p&&(!i||_&16)&&Kt(r,c,d,d[4],i?Vt(c,d[4],_,null):Qt(d[4]),null),d[3].footer?f?(f.p(d,_),_&8&&E(f,1)):(f=Ks(d),f.c(),E(f,1),f.m(e,null)):f&&(ke(),N(f,1,1,()=>{f=null}),we()),(!i||_&2)&&$e(e,"glass",d[1]),(!i||_&4)&&$e(e,"no-padding",!d[2])},i(d){i||(E(o),E(r,d),E(f),i=!0)},o(d){N(o),N(r,d),N(f),i=!1},d(d){d&&$(e),o&&o.d(),r&&r.d(d),f&&f.d()}}}function kc(l,e,t){let{$$slots:n={},$$scope:s}=e;const i=Jr(n);let{title:o=""}=e,{glass:c=!1}=e,{padding:r=!0}=e;return l.$$set=f=>{"title"in f&&t(0,o=f.title),"glass"in f&&t(1,c=f.glass),"padding"in f&&t(2,r=f.padding),"$$scope"in f&&t(4,s=f.$$scope)},[o,c,r,i,s,n]}class Re extends Ve{constructor(e){super(),Ye(this,e,kc,$c,Je,{title:0,glass:1,padding:2})}}const wc=l=>({}),Qs=l=>({}),yc=l=>({}),Xs=l=>({});function Zs(l){let e,t,n,s,i,o,c,r,f,d,_=(l[1]||l[6].header)&&xs(l);const v=l[9].default,h=Yt(v,l,l[8],null);let m=l[6].footer&&to(l);return{c(){e=p("div"),t=p("div"),_&&_.c(),n=b(),s=p("div"),h&&h.c(),i=b(),m&&m.c(),u(s,"class","modal-body svelte-1yjbw5w"),u(t,"class","modal svelte-1yjbw5w"),qe(t,"max-width",l[2]),u(e,"class","modal-overlay svelte-1yjbw5w"),u(e,"role","dialog"),u(e,"aria-modal","true")},m(g,C){k(g,e,C),a(e,t),_&&_.m(t,null),a(t,n),a(t,s),h&&h.m(s,null),a(t,i),m&&m.m(t,null),r=!0,f||(d=te(e,"click",l[4]),f=!0)},p(g,C){g[1]||g[6].header?_?(_.p(g,C),C&66&&E(_,1)):(_=xs(g),_.c(),E(_,1),_.m(t,n)):_&&(ke(),N(_,1,1,()=>{_=null}),we()),h&&h.p&&(!r||C&256)&&Kt(h,v,g,g[8],r?Vt(v,g[8],C,null):Qt(g[8]),null),g[6].footer?m?(m.p(g,C),C&64&&E(m,1)):(m=to(g),m.c(),E(m,1),m.m(t,null)):m&&(ke(),N(m,1,1,()=>{m=null}),we()),(!r||C&4)&&qe(t,"max-width",g[2])},i(g){r||(E(_),E(h,g),E(m),g&&Ue(()=>{r&&(o||(o=Nl(t,Ds,{duration:200,start:.95},!0)),o.run(1))}),g&&Ue(()=>{r&&(c||(c=Nl(e,Ss,{duration:150},!0)),c.run(1))}),r=!0)},o(g){N(_),N(h,g),N(m),g&&(o||(o=Nl(t,Ds,{duration:200,start:.95},!1)),o.run(0)),g&&(c||(c=Nl(e,Ss,{duration:150},!1)),c.run(0)),r=!1},d(g){g&&$(e),_&&_.d(),h&&h.d(g),m&&m.d(),g&&o&&o.end(),g&&c&&c.end(),f=!1,d()}}}function xs(l){let e,t,n,s,i,o,c,r=l[1]&&eo(l);const f=l[9].header,d=Yt(f,l,l[8],Xs);return{c(){e=p("div"),r&&r.c(),t=b(),d&&d.c(),n=b(),s=p("button"),s.innerHTML='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-1yjbw5w"><path d="M18 6L6 18M6 6l12 12"></path></svg>',u(s,"class","modal-close svelte-1yjbw5w"),u(s,"aria-label","Close"),u(e,"class","modal-header svelte-1yjbw5w")},m(_,v){k(_,e,v),r&&r.m(e,null),a(e,t),d&&d.m(e,null),a(e,n),a(e,s),i=!0,o||(c=te(s,"click",l[3]),o=!0)},p(_,v){_[1]?r?r.p(_,v):(r=eo(_),r.c(),r.m(e,t)):r&&(r.d(1),r=null),d&&d.p&&(!i||v&256)&&Kt(d,f,_,_[8],i?Vt(f,_[8],v,yc):Qt(_[8]),Xs)},i(_){i||(E(d,_),i=!0)},o(_){N(d,_),i=!1},d(_){_&&$(e),r&&r.d(),d&&d.d(_),o=!1,c()}}}function eo(l){let e,t;return{c(){e=p("h3"),t=T(l[1]),u(e,"class","svelte-1yjbw5w")},m(n,s){k(n,e,s),a(e,t)},p(n,s){s&2&&B(t,n[1])},d(n){n&&$(e)}}}function to(l){let e,t;const n=l[9].footer,s=Yt(n,l,l[8],Qs);return{c(){e=p("div"),s&&s.c(),u(e,"class","modal-footer svelte-1yjbw5w")},m(i,o){k(i,e,o),s&&s.m(e,null),t=!0},p(i,o){s&&s.p&&(!t||o&256)&&Kt(s,n,i,i[8],t?Vt(n,i[8],o,wc):Qt(i[8]),Qs)},i(i){t||(E(s,i),t=!0)},o(i){N(s,i),t=!1},d(i){i&&$(e),s&&s.d(i)}}}function Cc(l){let e,t,n,s,i=l[0]&&Zs(l);return{c(){i&&i.c(),e=Le()},m(o,c){i&&i.m(o,c),k(o,e,c),t=!0,n||(s=te(window,"keydown",l[5]),n=!0)},p(o,[c]){o[0]?i?(i.p(o,c),c&1&&E(i,1)):(i=Zs(o),i.c(),E(i,1),i.m(e.parentNode,e)):i&&(ke(),N(i,1,1,()=>{i=null}),we())},i(o){t||(E(i),t=!0)},o(o){N(i),t=!1},d(o){o&&$(e),i&&i.d(o),n=!1,s()}}}function Sc(l,e,t){let{$$slots:n={},$$scope:s}=e;const i=Jr(n);let{open:o=!1}=e,{title:c=""}=e,{width:r="500px"}=e,{closeOnOverlay:f=!0}=e;const d=tn();function _(){d("close")}function v(m){f&&m.target===m.currentTarget&&_()}function h(m){m.key==="Escape"&&_()}return l.$$set=m=>{"open"in m&&t(0,o=m.open),"title"in m&&t(1,c=m.title),"width"in m&&t(2,r=m.width),"closeOnOverlay"in m&&t(7,f=m.closeOnOverlay),"$$scope"in m&&t(8,s=m.$$scope)},[o,c,r,_,v,h,i,f,s,n]}class Nn extends Ve{constructor(e){super(),Ye(this,e,Sc,Cc,Je,{open:0,title:1,width:2,closeOnOverlay:7})}}function Tc(l){let e,t,n;const s=l[2].default,i=Yt(s,l,l[1],null);return{c(){e=p("span"),i&&i.c(),u(e,"class",t="badge badge-"+l[0]+" svelte-1xueqee")},m(o,c){k(o,e,c),i&&i.m(e,null),n=!0},p(o,[c]){i&&i.p&&(!n||c&2)&&Kt(i,s,o,o[1],n?Vt(s,o[1],c,null):Qt(o[1]),null),(!n||c&1&&t!==(t="badge badge-"+o[0]+" svelte-1xueqee"))&&u(e,"class",t)},i(o){n||(E(i,o),n=!0)},o(o){N(i,o),n=!1},d(o){o&&$(e),i&&i.d(o)}}}function Dc(l,e,t){let{$$slots:n={},$$scope:s}=e,{variant:i="info"}=e;return l.$$set=o=>{"variant"in o&&t(0,i=o.variant),"$$scope"in o&&t(1,s=o.$$scope)},[i,s,n]}class Ie extends Ve{constructor(e){super(),Ye(this,e,Dc,Tc,Je,{variant:0})}}function lo(l,e,t){const n=l.slice();return n[15]=e[t],n}function no(l){let e,t;return e=new Ie({props:{variant:"info",$$slots:{default:[Pc]},$$scope:{ctx:l}}}),{c(){oe(e.$$.fragment)},m(n,s){ne(e,n,s),t=!0},p(n,s){const i={};s&262145&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){se(e,n)}}}function Pc(l){let e=l[0].project+"",t;return{c(){t=T(e)},m(n,s){k(n,t,s)},p(n,s){s&1&&e!==(e=n[0].project+"")&&B(t,e)},d(n){n&&$(t)}}}function so(l){let e,t;return e=new Ie({props:{variant:l[0].env==="prod"?"danger":"warning",$$slots:{default:[Ec]},$$scope:{ctx:l}}}),{c(){oe(e.$$.fragment)},m(n,s){ne(e,n,s),t=!0},p(n,s){const i={};s&1&&(i.variant=n[0].env==="prod"?"danger":"warning"),s&262145&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){se(e,n)}}}function Ec(l){let e=l[0].env+"",t;return{c(){t=T(e)},m(n,s){k(n,t,s)},p(n,s){s&1&&e!==(e=n[0].env+"")&&B(t,e)},d(n){n&&$(t)}}}function oo(l){let e,t,n,s,i=l[4].length+"",o;return{c(){e=p("div"),t=p("span"),t.textContent="Containers",n=b(),s=p("span"),o=T(i),u(t,"class","label svelte-1jkc1of"),u(e,"class","detail svelte-1jkc1of")},m(c,r){k(c,e,r),a(e,t),a(e,n),a(e,s),a(s,o)},p(c,r){r&16&&i!==(i=c[4].length+"")&&B(o,i)},d(c){c&&$(e)}}}function io(l){let e,t,n,s,i,o;return{c(){e=p("div"),t=p("span"),t.textContent="Agent",n=b(),s=p("span"),i=T("v"),o=T(l[1]),u(t,"class","label svelte-1jkc1of"),u(s,"class","svelte-1jkc1of"),$e(s,"outdated",l[3]),u(e,"class","detail svelte-1jkc1of")},m(c,r){k(c,e,r),a(e,t),a(e,n),a(e,s),a(s,i),a(s,o)},p(c,r){r&2&&B(o,c[1]),r&8&&$e(s,"outdated",c[3])},d(c){c&&$(e)}}}function ro(l){let e,t,n=_e(l[4].slice(0,5)),s=[];for(let o=0;o<n.length;o+=1)s[o]=ao(lo(l,n,o));let i=l[4].length>5&&co(l);return{c(){e=p("div");for(let o=0;o<s.length;o+=1)s[o].c();t=b(),i&&i.c(),u(e,"class","containers svelte-1jkc1of")},m(o,c){k(o,e,c);for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(e,null);a(e,t),i&&i.m(e,null)},p(o,c){if(c&16){n=_e(o[4].slice(0,5));let r;for(r=0;r<n.length;r+=1){const f=lo(o,n,r);s[r]?s[r].p(f,c):(s[r]=ao(f),s[r].c(),s[r].m(e,t))}for(;r<s.length;r+=1)s[r].d(1);s.length=n.length}o[4].length>5?i?i.p(o,c):(i=co(o),i.c(),i.m(e,null)):i&&(i.d(1),i=null)},d(o){o&&$(e),Me(s,o),i&&i.d()}}}function ao(l){let e,t=(l[15].name||l[15])+"",n;return{c(){e=p("span"),n=T(t),u(e,"class","container-tag svelte-1jkc1of")},m(s,i){k(s,e,i),a(e,n)},p(s,i){i&16&&t!==(t=(s[15].name||s[15])+"")&&B(n,t)},d(s){s&&$(e)}}}function co(l){let e,t,n=l[4].length-5+"",s;return{c(){e=p("span"),t=T("+"),s=T(n),u(e,"class","container-tag more svelte-1jkc1of")},m(i,o){k(i,e,o),a(e,t),a(e,s)},p(i,o){o&16&&n!==(n=i[4].length-5+"")&&B(s,n)},d(i){i&&$(e)}}}function Mc(l){let e;return{c(){e=T("Terminal")},m(t,n){k(t,e,n)},d(t){t&&$(e)}}}function jc(l){let e;return{c(){e=T("Details")},m(t,n){k(t,e,n)},d(t){t&&$(e)}}}function Lc(l){let e,t;return e=new Te({props:{variant:"warning",size:"sm",$$slots:{default:[Rc]},$$scope:{ctx:l}}}),e.$on("click",l[12]),{c(){oe(e.$$.fragment)},m(n,s){ne(e,n,s),t=!0},p(n,s){const i={};s&262144&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){se(e,n)}}}function Nc(l){let e,t;return e=new Te({props:{variant:"success",size:"sm",$$slots:{default:[Oc]},$$scope:{ctx:l}}}),e.$on("click",l[11]),{c(){oe(e.$$.fragment)},m(n,s){ne(e,n,s),t=!0},p(n,s){const i={};s&262144&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){se(e,n)}}}function Rc(l){let e;return{c(){e=T("Stop")},m(t,n){k(t,e,n)},d(t){t&&$(e)}}}function Oc(l){let e;return{c(){e=T("Start")},m(t,n){k(t,e,n)},d(t){t&&$(e)}}}function Ac(l){let e;return{c(){e=T("Destroy")},m(t,n){k(t,e,n)},d(t){t&&$(e)}}}function qc(l){var qt;let e,t,n,s,i,o,c,r=(l[0].name||"Unnamed")+"",f,d,_,v,h,m,g,C,y,w,S,M,P,D,j,L,R=(l[0].size_slug||l[0].size||"N/A")+"",A,F,q,H,W,I,J=(((qt=l[0].region)==null?void 0:qt.slug)||l[0].region||"N/A")+"",z,G,O,U,Y,Z,ie,le,ee,ue,x,he,re,X,pe,de=l[0].project&&no(l),be=l[0].env&&so(l),fe=l[4].length>0&&oo(l),ye=l[1]&&io(l),Ae=l[4].length>0&&ro(l);ie=new Te({props:{variant:"ghost",size:"sm",$$slots:{default:[Mc]},$$scope:{ctx:l}}}),ie.$on("click",l[9]),ee=new Te({props:{variant:"ghost",size:"sm",$$slots:{default:[jc]},$$scope:{ctx:l}}}),ee.$on("click",l[10]);const dt=[Nc,Lc],et=[];function At(Se,Ne){return Se[5]?1:0}return x=At(l),he=et[x]=dt[x](l),X=new Te({props:{variant:"danger",size:"sm",$$slots:{default:[Ac]},$$scope:{ctx:l}}}),X.$on("click",l[13]),{c(){e=p("div"),t=p("div"),n=p("div"),s=p("span"),o=b(),c=p("span"),f=T(r),d=b(),_=p("div"),de&&de.c(),v=b(),be&&be.c(),h=b(),m=p("div"),g=p("div"),C=p("span"),C.textContent="IP",y=b(),w=p("code"),S=T(l[6]),M=b(),P=p("div"),D=p("span"),D.textContent="Size",j=b(),L=p("span"),A=T(R),F=b(),q=p("div"),H=p("span"),H.textContent="Region",W=b(),I=p("span"),z=T(J),G=b(),fe&&fe.c(),O=b(),ye&&ye.c(),U=b(),Ae&&Ae.c(),Y=b(),Z=p("div"),oe(ie.$$.fragment),le=b(),oe(ee.$$.fragment),ue=b(),he.c(),re=b(),oe(X.$$.fragment),u(s,"class",i="status-dot "+l[7](l[2])+" svelte-1jkc1of"),u(n,"class","server-name svelte-1jkc1of"),u(_,"class","server-badges svelte-1jkc1of"),u(t,"class","server-header svelte-1jkc1of"),u(C,"class","label svelte-1jkc1of"),u(w,"class","server-ip svelte-1jkc1of"),u(g,"class","detail svelte-1jkc1of"),u(D,"class","label svelte-1jkc1of"),u(P,"class","detail svelte-1jkc1of"),u(H,"class","label svelte-1jkc1of"),u(q,"class","detail svelte-1jkc1of"),u(m,"class","server-details svelte-1jkc1of"),u(Z,"class","server-actions svelte-1jkc1of"),u(e,"class","server-item svelte-1jkc1of")},m(Se,Ne){k(Se,e,Ne),a(e,t),a(t,n),a(n,s),a(n,o),a(n,c),a(c,f),a(t,d),a(t,_),de&&de.m(_,null),a(_,v),be&&be.m(_,null),a(e,h),a(e,m),a(m,g),a(g,C),a(g,y),a(g,w),a(w,S),a(m,M),a(m,P),a(P,D),a(P,j),a(P,L),a(L,A),a(m,F),a(m,q),a(q,H),a(q,W),a(q,I),a(I,z),a(m,G),fe&&fe.m(m,null),a(m,O),ye&&ye.m(m,null),a(e,U),Ae&&Ae.m(e,null),a(e,Y),a(e,Z),ne(ie,Z,null),a(Z,le),ne(ee,Z,null),a(Z,ue),et[x].m(Z,null),a(Z,re),ne(X,Z,null),pe=!0},p(Se,[Ne]){var Ft;(!pe||Ne&4&&i!==(i="status-dot "+Se[7](Se[2])+" svelte-1jkc1of"))&&u(s,"class",i),(!pe||Ne&1)&&r!==(r=(Se[0].name||"Unnamed")+"")&&B(f,r),Se[0].project?de?(de.p(Se,Ne),Ne&1&&E(de,1)):(de=no(Se),de.c(),E(de,1),de.m(_,v)):de&&(ke(),N(de,1,1,()=>{de=null}),we()),Se[0].env?be?(be.p(Se,Ne),Ne&1&&E(be,1)):(be=so(Se),be.c(),E(be,1),be.m(_,null)):be&&(ke(),N(be,1,1,()=>{be=null}),we()),(!pe||Ne&64)&&B(S,Se[6]),(!pe||Ne&1)&&R!==(R=(Se[0].size_slug||Se[0].size||"N/A")+"")&&B(A,R),(!pe||Ne&1)&&J!==(J=(((Ft=Se[0].region)==null?void 0:Ft.slug)||Se[0].region||"N/A")+"")&&B(z,J),Se[4].length>0?fe?fe.p(Se,Ne):(fe=oo(Se),fe.c(),fe.m(m,O)):fe&&(fe.d(1),fe=null),Se[1]?ye?ye.p(Se,Ne):(ye=io(Se),ye.c(),ye.m(m,null)):ye&&(ye.d(1),ye=null),Se[4].length>0?Ae?Ae.p(Se,Ne):(Ae=ro(Se),Ae.c(),Ae.m(e,Y)):Ae&&(Ae.d(1),Ae=null);const Dt={};Ne&262144&&(Dt.$$scope={dirty:Ne,ctx:Se}),ie.$set(Dt);const pl={};Ne&262144&&(pl.$$scope={dirty:Ne,ctx:Se}),ee.$set(pl);let Ke=x;x=At(Se),x===Ke?et[x].p(Se,Ne):(ke(),N(et[Ke],1,1,()=>{et[Ke]=null}),we(),he=et[x],he?he.p(Se,Ne):(he=et[x]=dt[x](Se),he.c()),E(he,1),he.m(Z,re));const _l={};Ne&262144&&(_l.$$scope={dirty:Ne,ctx:Se}),X.$set(_l)},i(Se){pe||(E(de),E(be),E(ie.$$.fragment,Se),E(ee.$$.fragment,Se),E(he),E(X.$$.fragment,Se),pe=!0)},o(Se){N(de),N(be),N(ie.$$.fragment,Se),N(ee.$$.fragment,Se),N(he),N(X.$$.fragment,Se),pe=!1},d(Se){Se&&$(e),de&&de.d(),be&&be.d(),fe&&fe.d(),ye&&ye.d(),Ae&&Ae.d(),se(ie),se(ee),et[x].d(),se(X)}}}function Fc(l,e,t){let n,s,i,o,c,r,{server:f}=e;const d=tn();function _(w){switch(w){case"active":case"online":return"green";case"new":case"starting":return"blue";case"off":case"stopped":return"yellow";default:return"red"}}function v(w){d(w,{server:f})}const h=()=>v("ssh"),m=()=>v("details"),g=()=>v("start"),C=()=>v("stop"),y=()=>v("destroy");return l.$$set=w=>{"server"in w&&t(0,f=w.server)},l.$$.update=()=>{var w,S,M;l.$$.dirty&1&&t(6,n=f.ip||((M=(S=(w=f.networks)==null?void 0:w.v4)==null?void 0:S[0])==null?void 0:M.ip_address)||"N/A"),l.$$.dirty&1&&t(2,s=f.status||"unknown"),l.$$.dirty&4&&t(5,i=s==="active"||s==="online"),l.$$.dirty&1&&t(4,o=f.containers||[]),l.$$.dirty&1&&t(1,c=f.agent_version),l.$$.dirty&2&&t(3,r=c&&c!==Ga)},[f,c,s,r,o,i,n,_,v,h,m,g,C,y]}class zc extends Ve{constructor(e){super(),Ye(this,e,Fc,qc,Je,{server:0})}}function fo(l,e,t){const n=l.slice();return n[22]=e[t],n}function uo(l,e,t){const n=l.slice();return n[25]=e[t],n}function po(l,e,t){const n=l.slice();return n[28]=e[t],n}function Bc(l){let e,t;return{c(){e=p("span"),e.textContent="+",t=T(`
      Provision`),u(e,"class","plus-icon svelte-156md29")},m(n,s){k(n,e,s),k(n,t,s)},p:ae,d(n){n&&($(e),$(t))}}}function Uc(l){let e=[],t=new Map,n,s,i=_e(l[3]);const o=c=>c[28].id;for(let c=0;c<i.length;c+=1){let r=po(l,i,c),f=o(r);t.set(f,e[c]=_o(f,r))}return{c(){for(let c=0;c<e.length;c+=1)e[c].c();n=Le()},m(c,r){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(c,r);k(c,n,r),s=!0},p(c,r){r[0]&136&&(i=_e(c[3]),ke(),e=la(e,r,o,1,c,i,t,n.parentNode,ta,_o,n,po),we())},i(c){if(!s){for(let r=0;r<i.length;r+=1)E(e[r]);s=!0}},o(c){for(let r=0;r<e.length;r+=1)N(e[r]);s=!1},d(c){c&&$(n);for(let r=0;r<e.length;r+=1)e[r].d(c)}}}function Ic(l){let e;return{c(){e=p("div"),e.innerHTML="<p>No servers found. Provision one to get started.</p>",u(e,"class","empty-state svelte-156md29")},m(t,n){k(t,e,n)},p:ae,i:ae,o:ae,d(t){t&&$(e)}}}function Hc(l){let e;return{c(){e=p("div"),e.innerHTML="<p>Loading...</p>",u(e,"class","empty-state svelte-156md29")},m(t,n){k(t,e,n)},p:ae,i:ae,o:ae,d(t){t&&$(e)}}}function _o(l,e){let t,n,s;return n=new zc({props:{server:e[28]}}),n.$on("start",e[7]),n.$on("stop",e[7]),n.$on("destroy",e[7]),n.$on("ssh",e[7]),n.$on("details",e[7]),{key:l,first:null,c(){t=Le(),oe(n.$$.fragment),this.first=t},m(i,o){k(i,t,o),ne(n,i,o),s=!0},p(i,o){e=i;const c={};o[0]&8&&(c.server=e[28]),n.$set(c)},i(i){s||(E(n.$$.fragment,i),s=!0)},o(i){N(n.$$.fragment,i),s=!1},d(i){i&&$(t),se(n,i)}}}function Gc(l){let e,t,n,s;const i=[Hc,Ic,Uc],o=[];function c(r,f){return r[0]?0:r[3].length===0?1:2}return t=c(l),n=o[t]=i[t](l),{c(){e=p("div"),n.c(),u(e,"class","server-list svelte-156md29")},m(r,f){k(r,e,f),o[t].m(e,null),s=!0},p(r,f){let d=t;t=c(r),t===d?o[t].p(r,f):(ke(),N(o[d],1,1,()=>{o[d]=null}),we(),n=o[t],n?n.p(r,f):(n=o[t]=i[t](r),n.c()),E(n,1),n.m(e,null))},i(r){s||(E(n),s=!0)},o(r){N(n),s=!1},d(r){r&&$(e),o[t].d()}}}function Wc(l){let e;return{c(){e=T("↻ Refresh")},m(t,n){k(t,e,n)},d(t){t&&$(e)}}}function Jc(l){let e,t;return e=new Te({props:{slot:"header",variant:"ghost",size:"sm",$$slots:{default:[Wc]},$$scope:{ctx:l}}}),e.$on("click",l[12]),{c(){oe(e.$$.fragment)},m(n,s){ne(e,n,s),t=!0},p(n,s){const i={};s[1]&1&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){se(e,n)}}}function vo(l){let e,t=l[25].label+"",n;return{c(){e=p("option"),n=T(t),e.__value=l[25].value,Q(e,e.__value)},m(s,i){k(s,e,i),a(e,n)},p:ae,d(s){s&&$(e)}}}function mo(l){let e,t=l[22].label+"",n;return{c(){e=p("option"),n=T(t),e.__value=l[22].value,Q(e,e.__value)},m(s,i){k(s,e,i),a(e,n)},p:ae,d(s){s&&$(e)}}}function Yc(l){let e,t,n,s,i,o,c,r,f,d,_,v,h,m,g,C,y,w,S,M,P,D,j,L,R,A,F,q,H,W,I,J,z,G,O,U,Y,Z,ie=_e(l[4]),le=[];for(let x=0;x<ie.length;x+=1)le[x]=vo(uo(l,ie,x));let ee=_e(l[5]),ue=[];for(let x=0;x<ee.length;x+=1)ue[x]=mo(fo(l,ee,x));return{c(){e=p("form"),t=p("div"),n=p("div"),s=p("label"),s.textContent="Name *",i=b(),o=p("input"),c=b(),r=p("div"),f=p("div"),d=p("label"),d.textContent="Project",_=b(),v=p("input"),h=b(),m=p("div"),g=p("label"),g.textContent="Environment",C=b(),y=p("select"),w=p("option"),w.textContent="Production",S=p("option"),S.textContent="Staging",M=p("option"),M.textContent="Development",P=b(),D=p("div"),j=p("div"),L=p("label"),L.textContent="Region",R=b(),A=p("select");for(let x=0;x<le.length;x+=1)le[x].c();F=b(),q=p("div"),H=p("label"),H.textContent="Count",W=b(),I=p("input"),J=b(),z=p("div"),G=p("label"),G.textContent="Size",O=b(),U=p("select");for(let x=0;x<ue.length;x+=1)ue[x].c();u(s,"for","prov-name"),u(s,"class","svelte-156md29"),u(o,"id","prov-name"),u(o,"type","text"),u(o,"placeholder","web-server-01"),o.required=!0,u(o,"class","svelte-156md29"),u(n,"class","form-group svelte-156md29"),u(t,"class","form-row svelte-156md29"),u(d,"for","prov-project"),u(d,"class","svelte-156md29"),u(v,"id","prov-project"),u(v,"type","text"),u(v,"placeholder","myapp"),u(v,"class","svelte-156md29"),u(f,"class","form-group svelte-156md29"),u(g,"for","prov-env"),u(g,"class","svelte-156md29"),w.__value="prod",Q(w,w.__value),S.__value="staging",Q(S,S.__value),M.__value="dev",Q(M,M.__value),u(y,"id","prov-env"),u(y,"class","svelte-156md29"),l[2].env===void 0&&Ue(()=>l[16].call(y)),u(m,"class","form-group svelte-156md29"),u(r,"class","form-row two-col svelte-156md29"),u(L,"for","prov-region"),u(L,"class","svelte-156md29"),u(A,"id","prov-region"),u(A,"class","svelte-156md29"),l[2].region===void 0&&Ue(()=>l[17].call(A)),u(j,"class","form-group svelte-156md29"),u(H,"for","prov-count"),u(H,"class","svelte-156md29"),u(I,"id","prov-count"),u(I,"type","number"),u(I,"min","1"),u(I,"max","10"),u(I,"class","svelte-156md29"),u(q,"class","form-group svelte-156md29"),u(D,"class","form-row two-col svelte-156md29"),u(G,"for","prov-size"),u(G,"class","svelte-156md29"),u(U,"id","prov-size"),u(U,"class","svelte-156md29"),l[2].size===void 0&&Ue(()=>l[19].call(U)),u(z,"class","form-group svelte-156md29")},m(x,he){k(x,e,he),a(e,t),a(t,n),a(n,s),a(n,i),a(n,o),Q(o,l[2].name),a(e,c),a(e,r),a(r,f),a(f,d),a(f,_),a(f,v),Q(v,l[2].project),a(r,h),a(r,m),a(m,g),a(m,C),a(m,y),a(y,w),a(y,S),a(y,M),Pe(y,l[2].env,!0),a(e,P),a(e,D),a(D,j),a(j,L),a(j,R),a(j,A);for(let re=0;re<le.length;re+=1)le[re]&&le[re].m(A,null);Pe(A,l[2].region,!0),a(D,F),a(D,q),a(q,H),a(q,W),a(q,I),Q(I,l[2].count),a(e,J),a(e,z),a(z,G),a(z,O),a(z,U);for(let re=0;re<ue.length;re+=1)ue[re]&&ue[re].m(U,null);Pe(U,l[2].size,!0),Y||(Z=[te(o,"input",l[14]),te(v,"input",l[15]),te(y,"change",l[16]),te(A,"change",l[17]),te(I,"input",l[18]),te(U,"change",l[19]),te(e,"submit",Xr(l[6]))],Y=!0)},p(x,he){if(he[0]&4&&o.value!==x[2].name&&Q(o,x[2].name),he[0]&4&&v.value!==x[2].project&&Q(v,x[2].project),he[0]&4&&Pe(y,x[2].env),he[0]&16){ie=_e(x[4]);let re;for(re=0;re<ie.length;re+=1){const X=uo(x,ie,re);le[re]?le[re].p(X,he):(le[re]=vo(X),le[re].c(),le[re].m(A,null))}for(;re<le.length;re+=1)le[re].d(1);le.length=ie.length}if(he[0]&4&&Pe(A,x[2].region),he[0]&4&&Rt(I.value)!==x[2].count&&Q(I,x[2].count),he[0]&32){ee=_e(x[5]);let re;for(re=0;re<ee.length;re+=1){const X=fo(x,ee,re);ue[re]?ue[re].p(X,he):(ue[re]=mo(X),ue[re].c(),ue[re].m(U,null))}for(;re<ue.length;re+=1)ue[re].d(1);ue.length=ee.length}he[0]&4&&Pe(U,x[2].size)},d(x){x&&$(e),Me(le,x),Me(ue,x),Y=!1,Fe(Z)}}}function Vc(l){let e;return{c(){e=T("Cancel")},m(t,n){k(t,e,n)},d(t){t&&$(e)}}}function Kc(l){let e;return{c(){e=T("🚀 Provision")},m(t,n){k(t,e,n)},d(t){t&&$(e)}}}function Qc(l){let e,t,n,s,i;return t=new Te({props:{variant:"ghost",$$slots:{default:[Vc]},$$scope:{ctx:l}}}),t.$on("click",l[13]),s=new Te({props:{variant:"primary",$$slots:{default:[Kc]},$$scope:{ctx:l}}}),s.$on("click",l[6]),{c(){e=p("div"),oe(t.$$.fragment),n=b(),oe(s.$$.fragment),u(e,"slot","footer")},m(o,c){k(o,e,c),ne(t,e,null),a(e,n),ne(s,e,null),i=!0},p(o,c){const r={};c[1]&1&&(r.$$scope={dirty:c,ctx:o}),t.$set(r);const f={};c[1]&1&&(f.$$scope={dirty:c,ctx:o}),s.$set(f)},i(o){i||(E(t.$$.fragment,o),E(s.$$.fragment,o),i=!0)},o(o){N(t.$$.fragment,o),N(s.$$.fragment,o),i=!1},d(o){o&&$(e),se(t),se(s)}}}function Xc(l){let e,t,n,s,i,o,c,r,f,d,_;i=new Te({props:{variant:"primary",$$slots:{default:[Bc]},$$scope:{ctx:l}}}),i.$on("click",l[11]),c=new Re({props:{title:"Servers",padding:!1,$$slots:{header:[Jc],default:[Gc]},$$scope:{ctx:l}}});function v(m){l[20](m)}let h={title:"Provision Server",width:"500px",$$slots:{footer:[Qc],default:[Yc]},$$scope:{ctx:l}};return l[1]!==void 0&&(h.open=l[1]),f=new Nn({props:h}),kt.push(()=>jn(f,"open",v)),f.$on("close",l[21]),{c(){e=p("div"),t=p("div"),n=p("div"),n.innerHTML='<h1 class="svelte-156md29">Infrastructure</h1> <p class="subtitle svelte-156md29">Inventory &amp; lifecycle actions</p>',s=b(),oe(i.$$.fragment),o=b(),oe(c.$$.fragment),r=b(),oe(f.$$.fragment),u(t,"class","page-header svelte-156md29"),u(e,"class","infrastructure svelte-156md29")},m(m,g){k(m,e,g),a(e,t),a(t,n),a(t,s),ne(i,t,null),a(e,o),ne(c,e,null),k(m,r,g),ne(f,m,g),_=!0},p(m,g){const C={};g[1]&1&&(C.$$scope={dirty:g,ctx:m}),i.$set(C);const y={};g[0]&9|g[1]&1&&(y.$$scope={dirty:g,ctx:m}),c.$set(y);const w={};g[0]&6|g[1]&1&&(w.$$scope={dirty:g,ctx:m}),!d&&g[0]&2&&(d=!0,w.open=m[1],Mn(()=>d=!1)),f.$set(w)},i(m){_||(E(i.$$.fragment,m),E(c.$$.fragment,m),E(f.$$.fragment,m),_=!0)},o(m){N(i.$$.fragment,m),N(c.$$.fragment,m),N(f.$$.fragment,m),_=!1},d(m){m&&($(e),$(r)),se(i),se(c),se(f,m)}}}function Zc(l,e,t){let n,s,i;We(l,cl,R=>t(10,s=R)),We(l,bl,R=>t(3,i=R));let o=!1,c=!1,r={name:"",project:"",env:"prod",region:"nyc1",size:"s-1vcpu-1gb",count:1};const f=[{value:"nyc1",label:"New York 1"},{value:"nyc3",label:"New York 3"},{value:"sfo3",label:"San Francisco 3"},{value:"ams3",label:"Amsterdam 3"},{value:"sgp1",label:"Singapore 1"},{value:"lon1",label:"London 1"},{value:"fra1",label:"Frankfurt 1"},{value:"tor1",label:"Toronto 1"},{value:"blr1",label:"Bangalore 1"}],d=[{value:"s-1vcpu-512mb-10gb",label:"$4/mo - 1 vCPU, 512MB RAM"},{value:"s-1vcpu-1gb",label:"$6/mo - 1 vCPU, 1GB RAM"},{value:"s-1vcpu-2gb",label:"$12/mo - 1 vCPU, 2GB RAM"},{value:"s-2vcpu-2gb",label:"$18/mo - 2 vCPU, 2GB RAM"},{value:"s-2vcpu-4gb",label:"$24/mo - 2 vCPU, 4GB RAM"},{value:"s-4vcpu-8gb",label:"$48/mo - 4 vCPU, 8GB RAM"}];async function _(){try{const R=await Be("POST","/infra/servers/provision",{name:r.name,project:r.project,env:r.env,region:r.region,size:r.size,count:r.count});ve.success(`Provisioned ${R.created||1} server(s)`),t(1,c=!1),cl.refresh()}catch(R){ve.error("Failed to provision: "+R.message)}}async function v(R){const{server:A}=R.detail,F=R.type;try{switch(F){case"start":ve.info("Power actions not yet implemented. Use DigitalOcean console.");break;case"stop":ve.info("Power actions not yet implemented. Use DigitalOcean console.");break;case"destroy":confirm(`Are you sure you want to destroy ${A.name}? This cannot be undone.`)&&(await Be("DELETE",`/infra/servers/${A.id}`),ve.success(`Destroyed ${A.name}`));break;case"ssh":ve.info("Terminal feature coming soon");break;case"details":ve.info("Details modal coming soon");break}cl.refresh()}catch(q){ve.error(`Failed to ${F}: ${q.message}`)}}function h(){cl.refresh()}const m=()=>t(1,c=!0),g=()=>cl.refresh(),C=()=>t(1,c=!1);function y(){r.name=this.value,t(2,r)}function w(){r.project=this.value,t(2,r)}function S(){r.env=Ge(this),t(2,r)}function M(){r.region=Ge(this),t(2,r)}function P(){r.count=Rt(this.value),t(2,r)}function D(){r.size=Ge(this),t(2,r)}function j(R){c=R,t(1,c)}const L=()=>t(1,c=!1);return l.$$.update=()=>{l.$$.dirty[0]&1024&&t(9,n=s||{loading:!1}),l.$$.dirty[0]&512&&t(0,o=n.loading)},[o,c,r,i,f,d,_,v,h,n,s,m,g,C,y,w,S,M,P,D,j,L]}class xc extends Ve{constructor(e){super(),Ye(this,e,Zc,Xc,Je,{refresh:8},null,[-1,-1])}get refresh(){return this.$$.ctx[8]}}const ef="modulepreload",tf=function(l){return"/static/"+l},ho={},go=function(e,t,n){let s=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(t.map(r=>{if(r=tf(r),r in ho)return;ho[r]=!0;const f=r.endsWith(".css"),d=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${d}`))return;const _=document.createElement("link");if(_.rel=f?"stylesheet":ef,f||(_.as="script"),_.crossOrigin="",_.href=r,c&&_.setAttribute("nonce",c),document.head.appendChild(_),f)return new Promise((v,h)=>{_.addEventListener("load",v),_.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${r}`)))})}))}function i(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return s.then(o=>{for(const c of o||[])c.status==="rejected"&&i(c.reason);return e().catch(i)})},{Boolean:is}=Kr;function bo(l,e,t){const n=l.slice();return n[138]=e[t],n}function $o(l,e,t){const n=l.slice();return n[138]=e[t],n}function ko(l,e,t){const n=l.slice();return n[138]=e[t],n}function wo(l,e,t){const n=l.slice();return n[64]=e[t],n}function yo(l,e,t){const n=l.slice();return n[147]=e[t],n}function Co(l,e,t){const n=l.slice();return n[150]=e[t],n}function So(l,e,t){const n=l.slice();return n[153]=e[t],n}function To(l,e,t){var i,o,c;const n=l.slice();n[138]=e[t];const s=n[138].ip||((c=(o=(i=n[138].networks)==null?void 0:i.v4)==null?void 0:o[0])==null?void 0:c.ip_address);return n[156]=s,n}function Do(l,e,t){const n=l.slice();return n[159]=e[t],n[161]=t,n}function lf(l){const e=l.slice(),t=e[19].find(s=>s.isMain);e[162]=t;const n=e[19].filter(s=>!s.isMain).length;return e[163]=n,e}function Po(l,e,t){const n=l.slice();return n[159]=e[t],n[161]=t,n}function Eo(l,e,t){const n=l.slice();return n[165]=e[t],n}function Mo(l){let e,t=l[165]+"",n;return{c(){e=p("option"),n=T(t),e.__value=l[165],Q(e,e.__value)},m(s,i){k(s,e,i),a(e,n)},p:ae,d(s){s&&$(e)}}}function nf(l){let e;return{c(){e=T("📥 Load")},m(t,n){k(t,e,n)},d(t){t&&$(e)}}}function sf(l){let e;return{c(){e=T("💾 Save")},m(t,n){k(t,e,n)},d(t){t&&$(e)}}}function of(l){let e;return{c(){e=T("🚫 Exclusions")},m(t,n){k(t,e,n)},d(t){t&&$(e)}}}function jo(l){let e,t;return{c(){e=p("span"),t=T(l[42]),u(e,"class","config-status svelte-78e7a1")},m(n,s){k(n,e,s),a(e,t)},p(n,s){s[1]&2048&&B(t,n[42])},d(n){n&&$(e)}}}function Lo(l){let e,t,n,s,i,o,c,r,f,d,_,v;return i=new Te({props:{variant:"ghost",size:"sm",$$slots:{default:[rf]},$$scope:{ctx:l}}}),i.$on("click",l[52]),{c(){e=p("div"),t=p("div"),n=p("label"),n.textContent="Exclusion Patterns",s=b(),oe(i.$$.fragment),o=b(),c=p("textarea"),r=b(),f=p("small"),f.textContent="One pattern per line. Applied to folder uploads and git clones.",u(n,"class","svelte-78e7a1"),u(t,"class","exclude-header svelte-78e7a1"),u(c,"rows","6"),u(c,"placeholder","node_modules/ __pycache__/ *.pyc .git/"),u(c,"class","svelte-78e7a1"),u(f,"class","svelte-78e7a1"),u(e,"class","exclude-editor svelte-78e7a1")},m(h,m){k(h,e,m),a(e,t),a(t,n),a(t,s),ne(i,t,null),a(e,o),a(e,c),Q(c,l[44]),a(e,r),a(e,f),d=!0,_||(v=te(c,"input",l[69]),_=!0)},p(h,m){const g={};m[5]&8192&&(g.$$scope={dirty:m,ctx:h}),i.$set(g),m[1]&8192&&Q(c,h[44])},i(h){d||(E(i.$$.fragment,h),d=!0)},o(h){N(i.$$.fragment,h),d=!1},d(h){h&&$(e),se(i),_=!1,v()}}}function rf(l){let e;return{c(){e=T("Reset to Defaults")},m(t,n){k(t,e,n)},d(t){t&&$(e)}}}function No(l){let e,t,n,s,i,o,c,r,f,d,_,v,h,m,g,C,y,w,S,M,P,D=l[19].length>0&&Ro(l);f=new Te({props:{size:"sm",$$slots:{default:[cf]},$$scope:{ctx:l}}}),f.$on("click",l[55]);function j(q,H){return H[0]&524288&&(v=null),q[19].length===0?uf:(v==null&&(v=!q[19].some(Ff)),v?ff:qo)}function L(q,H){return H===qo?lf(q):q}let R=j(l,[-1,-1,-1,-1,-1,-1]),A=R(L(l,R)),F=l[24]&&zo(l);return{c(){e=p("div"),t=p("div"),n=p("label"),n.textContent="Build Folders",s=b(),i=p("input"),o=b(),D&&D.c(),c=b(),r=p("div"),oe(f.$$.fragment),d=b(),_=p("div"),A.c(),h=b(),m=p("label"),g=p("input"),C=b(),y=p("span"),y.textContent="Remember folder configuration for this service",w=b(),F&&F.c(),u(n,"class","svelte-78e7a1"),u(i,"type","file"),u(i,"webkitdirectory",""),u(i,"directory",""),i.multiple=!0,qe(i,"display","none"),u(i,"class","svelte-78e7a1"),u(r,"class","folder-actions svelte-78e7a1"),u(_,"class","code-selection-info svelte-78e7a1"),$e(_,"success",l[19].some(pi)),$e(_,"warning",l[19].length>0&&!l[19].some(_i)),u(g,"type","checkbox"),u(g,"class","svelte-78e7a1"),u(m,"class","checkbox-label small-check svelte-78e7a1"),u(t,"class","form-group svelte-78e7a1"),u(e,"class","source-config svelte-78e7a1")},m(q,H){k(q,e,H),a(e,t),a(t,n),a(t,s),a(t,i),l[76](i),a(t,o),D&&D.m(t,null),a(t,c),a(t,r),ne(f,r,null),a(t,d),a(t,_),A.m(_,null),a(t,h),a(t,m),a(m,g),g.checked=l[21],a(m,C),a(m,y),a(e,w),F&&F.m(e,null),S=!0,M||(P=[te(i,"change",l[56]),te(g,"change",l[79])],M=!0)},p(q,H){q[19].length>0?D?(D.p(q,H),H[0]&524288&&E(D,1)):(D=Ro(q),D.c(),E(D,1),D.m(t,c)):D&&(ke(),N(D,1,1,()=>{D=null}),we());const W={};H[5]&8192&&(W.$$scope={dirty:H,ctx:q}),f.$set(W),R===(R=j(q,H))&&A?A.p(L(q,R),H):(A.d(1),A=R(L(q,R)),A&&(A.c(),A.m(_,null))),(!S||H[0]&524288)&&$e(_,"success",q[19].some(pi)),(!S||H[0]&524288)&&$e(_,"warning",q[19].length>0&&!q[19].some(_i)),H[0]&2097152&&(g.checked=q[21]),q[24]?F?(F.p(q,H),H[0]&16777216&&E(F,1)):(F=zo(q),F.c(),E(F,1),F.m(e,null)):F&&(ke(),N(F,1,1,()=>{F=null}),we())},i(q){S||(E(D),E(f.$$.fragment,q),E(F),S=!0)},o(q){N(D),N(f.$$.fragment,q),N(F),S=!1},d(q){q&&$(e),l[76](null),D&&D.d(),se(f),A.d(),F&&F.d(),M=!1,Fe(P)}}}function Ro(l){let e,t,n=_e(l[19]),s=[];for(let o=0;o<n.length;o+=1)s[o]=Ao(Po(l,n,o));const i=o=>N(s[o],1,1,()=>{s[o]=null});return{c(){e=p("div");for(let o=0;o<s.length;o+=1)s[o].c();u(e,"class","folder-list svelte-78e7a1")},m(o,c){k(o,e,c);for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(e,null);t=!0},p(o,c){if(c[0]&524288|c[1]&201326592){n=_e(o[19]);let r;for(r=0;r<n.length;r+=1){const f=Po(o,n,r);s[r]?(s[r].p(f,c),E(s[r],1)):(s[r]=Ao(f),s[r].c(),E(s[r],1),s[r].m(e,null))}for(ke(),r=n.length;r<s.length;r+=1)i(r);we()}},i(o){if(!t){for(let c=0;c<n.length;c+=1)E(s[c]);t=!0}},o(o){s=s.filter(is);for(let c=0;c<s.length;c+=1)N(s[c]);t=!1},d(o){o&&$(e),Me(s,o)}}}function af(l){let e=l[159].isMain?"MAIN":"dependency",t;return{c(){t=T(e)},m(n,s){k(n,t,s)},p(n,s){s[0]&524288&&e!==(e=n[159].isMain?"MAIN":"dependency")&&B(t,e)},d(n){n&&$(t)}}}function Oo(l){let e,t,n;function s(){return l[77](l[161])}return{c(){e=p("button"),e.textContent="⭐",u(e,"type","button"),u(e,"class","set-main-btn svelte-78e7a1"),u(e,"title","Set as main")},m(i,o){k(i,e,o),t||(n=te(e,"click",s),t=!0)},p(i,o){l=i},d(i){i&&$(e),t=!1,n()}}}function Ao(l){let e,t,n=l[159].isMain?"📁":"📂",s,i,o,c=l[159].name+"",r,f,d,_,v,h,m=l[159].fileCount+"",g,C,y,w,S,M,P,D,j;_=new Ie({props:{variant:l[159].isMain?"success":"secondary",$$slots:{default:[af]},$$scope:{ctx:l}}});let L=!l[159].isMain&&Oo(l);function R(){return l[78](l[161])}return{c(){e=p("div"),t=p("span"),s=T(n),i=b(),o=p("strong"),r=T(c),f=T("/"),d=b(),oe(_.$$.fragment),v=b(),h=p("span"),g=T(m),C=T(" files"),y=b(),L&&L.c(),w=b(),S=p("button"),S.textContent="✕",M=b(),u(t,"class","folder-icon svelte-78e7a1"),u(o,"class","svelte-78e7a1"),u(h,"class","file-count svelte-78e7a1"),u(S,"type","button"),u(S,"class","remove-btn svelte-78e7a1"),u(e,"class","folder-item svelte-78e7a1")},m(A,F){k(A,e,F),a(e,t),a(t,s),a(e,i),a(e,o),a(o,r),a(o,f),a(e,d),ne(_,e,null),a(e,v),a(e,h),a(h,g),a(h,C),a(e,y),L&&L.m(e,null),a(e,w),a(e,S),a(e,M),P=!0,D||(j=te(S,"click",R),D=!0)},p(A,F){l=A,(!P||F[0]&524288)&&n!==(n=l[159].isMain?"📁":"📂")&&B(s,n),(!P||F[0]&524288)&&c!==(c=l[159].name+"")&&B(r,c);const q={};F[0]&524288&&(q.variant=l[159].isMain?"success":"secondary"),F[0]&524288|F[5]&8192&&(q.$$scope={dirty:F,ctx:l}),_.$set(q),(!P||F[0]&524288)&&m!==(m=l[159].fileCount+"")&&B(g,m),l[159].isMain?L&&(L.d(1),L=null):L?L.p(l,F):(L=Oo(l),L.c(),L.m(e,w))},i(A){P||(E(_.$$.fragment,A),P=!0)},o(A){N(_.$$.fragment,A),P=!1},d(A){A&&$(e),se(_),L&&L.d(),D=!1,j()}}}function cf(l){let e;return{c(){e=T("➕ Add Folder")},m(t,n){k(t,e,n)},d(t){t&&$(e)}}}function qo(l){let e,t,n=l[162].name+"",s,i,o,c,r=l[163]>0&&Fo(l);return{c(){e=T("✓ Main: "),t=p("strong"),s=T(n),i=T("/"),o=b(),r&&r.c(),c=Le()},m(f,d){k(f,e,d),k(f,t,d),a(t,s),a(t,i),k(f,o,d),r&&r.m(f,d),k(f,c,d)},p(f,d){d[0]&524288&&n!==(n=f[162].name+"")&&B(s,n),f[163]>0?r?r.p(f,d):(r=Fo(f),r.c(),r.m(c.parentNode,c)):r&&(r.d(1),r=null)},d(f){f&&($(e),$(t),$(o),$(c)),r&&r.d(f)}}}function ff(l){let e;return{c(){e=T("⚠️ No main folder selected. Click ⭐ to set one as main.")},m(t,n){k(t,e,n)},p:ae,d(t){t&&$(e)}}}function uf(l){let e;return{c(){e=T("No folders selected. Add your main service folder and any dependencies.")},m(t,n){k(t,e,n)},p:ae,d(t){t&&$(e)}}}function Fo(l){let e,t=l[163]+"",n,s,i=l[163]===1?"y":"ies",o;return{c(){e=T("+ "),n=T(t),s=T(" dependenc"),o=T(i)},m(c,r){k(c,e,r),k(c,n,r),k(c,s,r),k(c,o,r)},p(c,r){r[0]&524288&&t!==(t=c[163]+"")&&B(n,t),r[0]&524288&&i!==(i=c[163]===1?"y":"ies")&&B(o,i)},d(c){c&&($(e),$(n),$(s),$(o))}}}function zo(l){let e,t,n,s,i,o,c,r,f,d,_,v,h,m,g,C,y,w,S,M,P,D;return i=new Ie({props:{variant:l[23]==="from folder"?"success":l[23]==="multi-folder"?"info":"warning",$$slots:{default:[df]},$$scope:{ctx:l}}}),{c(){e=p("div"),t=p("div"),n=p("label"),s=T(`🐳 Dockerfile
                    `),oe(i.$$.fragment),o=b(),c=p("textarea"),r=b(),f=p("div"),d=p("select"),_=p("option"),_.textContent="FROM...",v=p("option"),v.textContent="python:3.11-slim",h=p("option"),h.textContent="python:3.12-slim",m=p("option"),m.textContent="node:20-alpine",g=p("option"),g.textContent="node:18-alpine",C=p("option"),C.textContent="golang:1.21-alpine",y=p("option"),y.textContent="nginx:alpine",w=b(),S=p("input"),u(n,"class","svelte-78e7a1"),u(t,"class","dockerfile-header svelte-78e7a1"),u(c,"rows","8"),u(c,"class","dockerfile-editor svelte-78e7a1"),u(c,"spellcheck","false"),_.__value="",Q(_,_.__value),v.__value="python:3.11-slim",Q(v,v.__value),h.__value="python:3.12-slim",Q(h,h.__value),m.__value="node:20-alpine",Q(m,m.__value),g.__value="node:18-alpine",Q(g,g.__value),C.__value="golang:1.21-alpine",Q(C,C.__value),y.__value="nginx:alpine",Q(y,y.__value),u(d,"class","svelte-78e7a1"),l[25]===void 0&&Ue(()=>l[81].call(d)),u(S,"type","text"),u(S,"placeholder","CMD (e.g. uvicorn main:app ...)"),u(S,"class","svelte-78e7a1"),u(f,"class","dockerfile-quick-fields svelte-78e7a1"),u(e,"class","dockerfile-preview svelte-78e7a1")},m(j,L){k(j,e,L),a(e,t),a(t,n),a(n,s),ne(i,n,null),a(e,o),a(e,c),Q(c,l[22]),a(e,r),a(e,f),a(f,d),a(d,_),a(d,v),a(d,h),a(d,m),a(d,g),a(d,C),a(d,y),Pe(d,l[25],!0),a(f,w),a(f,S),Q(S,l[26]),M=!0,P||(D=[te(c,"input",l[80]),te(d,"change",l[81]),te(d,"change",l[82]),te(S,"input",l[83]),te(S,"change",l[84])],P=!0)},p(j,L){const R={};L[0]&8388608&&(R.variant=j[23]==="from folder"?"success":j[23]==="multi-folder"?"info":"warning"),L[0]&8388608|L[5]&8192&&(R.$$scope={dirty:L,ctx:j}),i.$set(R),L[0]&4194304&&Q(c,j[22]),L[0]&33554432&&Pe(d,j[25]),L[0]&67108864&&S.value!==j[26]&&Q(S,j[26])},i(j){M||(E(i.$$.fragment,j),M=!0)},o(j){N(i.$$.fragment,j),M=!1},d(j){j&&$(e),se(i),P=!1,Fe(D)}}}function df(l){let e;return{c(){e=T(l[23])},m(t,n){k(t,e,n)},p(t,n){n[0]&8388608&&B(e,t[23])},d(t){t&&$(e)}}}function Bo(l){let e,t,n,s,i,o,c,r,f,d,_,v,h,m,g,C,y,w,S,M,P,D,j,L,R,A,F,q,H,W,I,J,z,G,O,U,Y,Z,ie=l[12].length>0&&Uo(l);return P=new Te({props:{size:"sm",$$slots:{default:[_f]},$$scope:{ctx:l}}}),P.$on("click",l[89]),j=new Te({props:{variant:"ghost",size:"sm",$$slots:{default:[vf]},$$scope:{ctx:l}}}),j.$on("click",l[90]),{c(){e=p("div"),t=p("div"),n=p("label"),n.textContent="Git Repository URL *",s=b(),i=p("input"),o=b(),c=p("small"),c.textContent="HTTPS URL (SSH not supported)",r=b(),f=p("div"),d=p("label"),d.textContent="Branch",_=b(),v=p("input"),h=b(),m=p("div"),g=p("label"),g.textContent="Folders to Include",C=b(),ie&&ie.c(),y=b(),w=p("div"),S=p("input"),M=b(),oe(P.$$.fragment),D=b(),oe(j.$$.fragment),L=b(),R=p("small"),R.textContent="Leave empty to use entire repo. Add paths for multi-folder builds (main folder contains Dockerfile).",A=b(),F=p("details"),q=p("summary"),q.textContent="🔐 Private repository?",H=b(),W=p("div"),I=p("label"),I.textContent="Personal Access Token",J=b(),z=p("input"),G=b(),O=p("small"),O.innerHTML="Needs <code>repo</code> scope for private repos",u(n,"for","git-url"),u(n,"class","svelte-78e7a1"),u(i,"id","git-url"),u(i,"type","url"),u(i,"placeholder","https://github.com/user/repo"),u(i,"class","svelte-78e7a1"),u(c,"class","svelte-78e7a1"),u(t,"class","form-group svelte-78e7a1"),u(d,"for","git-branch"),u(d,"class","svelte-78e7a1"),u(v,"id","git-branch"),u(v,"type","text"),u(v,"placeholder","main"),u(v,"class","svelte-78e7a1"),u(f,"class","form-group svelte-78e7a1"),u(g,"class","svelte-78e7a1"),u(S,"type","text"),u(S,"placeholder","e.g. services/my_api"),u(S,"class","svelte-78e7a1"),u(w,"class","folder-input svelte-78e7a1"),u(R,"class","svelte-78e7a1"),u(m,"class","form-group svelte-78e7a1"),u(q,"class","svelte-78e7a1"),u(I,"for","git-token"),u(I,"class","svelte-78e7a1"),u(z,"id","git-token"),u(z,"type","password"),u(z,"placeholder","ghp_xxxxxxxxxxxx"),u(z,"class","svelte-78e7a1"),u(O,"class","svelte-78e7a1"),u(W,"class","form-group svelte-78e7a1"),u(F,"class","private-repo svelte-78e7a1"),u(e,"class","source-config svelte-78e7a1")},m(le,ee){k(le,e,ee),a(e,t),a(t,n),a(t,s),a(t,i),Q(i,l[9]),a(t,o),a(t,c),a(e,r),a(e,f),a(f,d),a(f,_),a(f,v),Q(v,l[10]),a(e,h),a(e,m),a(m,g),a(m,C),ie&&ie.m(m,null),a(m,y),a(m,w),a(w,S),Q(S,l[13]),a(w,M),ne(P,w,null),a(w,D),ne(j,w,null),a(m,L),a(m,R),a(e,A),a(e,F),a(F,q),a(F,H),a(F,W),a(W,I),a(W,J),a(W,z),Q(z,l[11]),a(W,G),a(W,O),U=!0,Y||(Z=[te(i,"input",l[85]),te(v,"input",l[86]),te(S,"input",l[88]),te(z,"input",l[91])],Y=!0)},p(le,ee){ee[0]&512&&i.value!==le[9]&&Q(i,le[9]),ee[0]&1024&&v.value!==le[10]&&Q(v,le[10]),le[12].length>0?ie?(ie.p(le,ee),ee[0]&4096&&E(ie,1)):(ie=Uo(le),ie.c(),E(ie,1),ie.m(m,y)):ie&&(ke(),N(ie,1,1,()=>{ie=null}),we()),ee[0]&8192&&S.value!==le[13]&&Q(S,le[13]);const ue={};ee[5]&8192&&(ue.$$scope={dirty:ee,ctx:le}),P.$set(ue);const x={};ee[5]&8192&&(x.$$scope={dirty:ee,ctx:le}),j.$set(x),ee[0]&2048&&z.value!==le[11]&&Q(z,le[11])},i(le){U||(E(ie),E(P.$$.fragment,le),E(j.$$.fragment,le),U=!0)},o(le){N(ie),N(P.$$.fragment,le),N(j.$$.fragment,le),U=!1},d(le){le&&$(e),ie&&ie.d(),se(P),se(j),Y=!1,Fe(Z)}}}function Uo(l){let e,t,n=_e(l[12]),s=[];for(let o=0;o<n.length;o+=1)s[o]=Io(Do(l,n,o));const i=o=>N(s[o],1,1,()=>{s[o]=null});return{c(){e=p("div");for(let o=0;o<s.length;o+=1)s[o].c();u(e,"class","folder-list svelte-78e7a1")},m(o,c){k(o,e,c);for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(e,null);t=!0},p(o,c){if(c[0]&4096|c[1]&1073741824){n=_e(o[12]);let r;for(r=0;r<n.length;r+=1){const f=Do(o,n,r);s[r]?(s[r].p(f,c),E(s[r],1)):(s[r]=Io(f),s[r].c(),E(s[r],1),s[r].m(e,null))}for(ke(),r=n.length;r<s.length;r+=1)i(r);we()}},i(o){if(!t){for(let c=0;c<n.length;c+=1)E(s[c]);t=!0}},o(o){s=s.filter(is);for(let c=0;c<s.length;c+=1)N(s[c]);t=!1},d(o){o&&$(e),Me(s,o)}}}function pf(l){let e=l[159].isMain?"MAIN":"dependency",t;return{c(){t=T(e)},m(n,s){k(n,t,s)},p(n,s){s[0]&4096&&e!==(e=n[159].isMain?"MAIN":"dependency")&&B(t,e)},d(n){n&&$(t)}}}function Io(l){let e,t,n=l[159].isMain?"📁":"📂",s,i,o,c=l[159].path+"",r,f,d,_,v,h,m,g,C;d=new Ie({props:{variant:l[159].isMain?"success":"secondary",$$slots:{default:[pf]},$$scope:{ctx:l}}});function y(){return l[87](l[161])}return{c(){e=p("div"),t=p("span"),s=T(n),i=b(),o=p("strong"),r=T(c),f=b(),oe(d.$$.fragment),_=b(),v=p("button"),v.textContent="✕",h=b(),u(o,"class","svelte-78e7a1"),u(v,"type","button"),u(v,"class","remove-btn svelte-78e7a1"),u(e,"class","folder-item svelte-78e7a1")},m(w,S){k(w,e,S),a(e,t),a(t,s),a(e,i),a(e,o),a(o,r),a(e,f),ne(d,e,null),a(e,_),a(e,v),a(e,h),m=!0,g||(C=te(v,"click",y),g=!0)},p(w,S){l=w,(!m||S[0]&4096)&&n!==(n=l[159].isMain?"📁":"📂")&&B(s,n),(!m||S[0]&4096)&&c!==(c=l[159].path+"")&&B(r,c);const M={};S[0]&4096&&(M.variant=l[159].isMain?"success":"secondary"),S[0]&4096|S[5]&8192&&(M.$$scope={dirty:S,ctx:l}),d.$set(M)},i(w){m||(E(d.$$.fragment,w),m=!0)},o(w){N(d.$$.fragment,w),m=!1},d(w){w&&$(e),se(d),g=!1,C()}}}function _f(l){let e;return{c(){e=T("+ Main")},m(t,n){k(t,e,n)},d(t){t&&$(e)}}}function vf(l){let e;return{c(){e=T("+ Dep")},m(t,n){k(t,e,n)},d(t){t&&$(e)}}}function Ho(l){let e,t,n,s,i,o,c,r,f;return{c(){e=p("div"),t=p("div"),n=p("label"),n.textContent="Docker Image *",s=b(),i=p("input"),o=b(),c=p("small"),c.textContent="Full image URL from DO Registry or Docker Hub",u(n,"for","image-url"),u(n,"class","svelte-78e7a1"),u(i,"id","image-url"),u(i,"type","text"),u(i,"placeholder","registry.digitalocean.com/my-registry/app:latest"),u(i,"class","svelte-78e7a1"),u(c,"class","svelte-78e7a1"),u(t,"class","form-group svelte-78e7a1"),u(e,"class","source-config svelte-78e7a1")},m(d,_){k(d,e,_),a(e,t),a(t,n),a(t,s),a(t,i),Q(i,l[14]),a(t,o),a(t,c),r||(f=te(i,"input",l[92]),r=!0)},p(d,_){_[0]&16384&&i.value!==d[14]&&Q(i,d[14])},d(d){d&&$(e),r=!1,f()}}}function Go(l){let e,t,n,s,i,o,c,r,f,d,_,v,h,m,g,C,y,w,S,M,P,D,j,L,R,A,F,q,H=l[15]&&Wo(l);return{c(){e=p("div"),t=p("div"),n=p("label"),n.textContent="Docker Image File (.tar) *",s=b(),i=p("input"),o=b(),H&&H.c(),c=b(),r=p("small"),r.innerHTML="Export from Docker with: <code>docker save myimage:latest -o image.tar</code>",f=b(),d=p("div"),_=p("label"),_.textContent="Image Name *",v=b(),h=p("input"),m=b(),g=p("small"),g.textContent="The image name/tag as it appears in the tar file",C=b(),y=p("div"),w=p("div"),S=p("label"),S.textContent="Container Port",M=b(),P=p("input"),D=b(),j=p("div"),L=p("label"),L.textContent="Host Port",R=b(),A=p("input"),u(n,"for","image-file"),u(n,"class","svelte-78e7a1"),u(i,"id","image-file"),u(i,"type","file"),u(i,"accept",".tar,.tar.gz"),u(i,"class","svelte-78e7a1"),u(r,"class","svelte-78e7a1"),u(t,"class","form-group svelte-78e7a1"),u(_,"for","image-name"),u(_,"class","svelte-78e7a1"),u(h,"id","image-name"),u(h,"type","text"),u(h,"placeholder","myapp:latest"),u(h,"class","svelte-78e7a1"),u(g,"class","svelte-78e7a1"),u(d,"class","form-group svelte-78e7a1"),u(S,"for","container-port"),u(S,"class","svelte-78e7a1"),u(P,"id","container-port"),u(P,"type","number"),u(P,"placeholder",l[7]),u(P,"class","svelte-78e7a1"),u(w,"class","form-group svelte-78e7a1"),u(L,"for","host-port"),u(L,"class","svelte-78e7a1"),u(A,"id","host-port"),u(A,"type","number"),u(A,"placeholder",l[7]),u(A,"class","svelte-78e7a1"),u(j,"class","form-group svelte-78e7a1"),u(y,"class","form-row svelte-78e7a1"),u(e,"class","source-config svelte-78e7a1")},m(W,I){k(W,e,I),a(e,t),a(t,n),a(t,s),a(t,i),a(t,o),H&&H.m(t,null),a(t,c),a(t,r),a(e,f),a(e,d),a(d,_),a(d,v),a(d,h),Q(h,l[16]),a(d,m),a(d,g),a(e,C),a(e,y),a(y,w),a(w,S),a(w,M),a(w,P),Q(P,l[17]),a(y,D),a(y,j),a(j,L),a(j,R),a(j,A),Q(A,l[18]),F||(q=[te(i,"change",l[62]),te(h,"input",l[93]),te(P,"input",l[94]),te(A,"input",l[95])],F=!0)},p(W,I){W[15]?H?H.p(W,I):(H=Wo(W),H.c(),H.m(t,c)):H&&(H.d(1),H=null),I[0]&65536&&h.value!==W[16]&&Q(h,W[16]),I[0]&128&&u(P,"placeholder",W[7]),I[0]&131072&&Rt(P.value)!==W[17]&&Q(P,W[17]),I[0]&128&&u(A,"placeholder",W[7]),I[0]&262144&&Rt(A.value)!==W[18]&&Q(A,W[18])},d(W){W&&$(e),H&&H.d(),F=!1,Fe(q)}}}function Wo(l){let e,t,n=l[15].name+"",s,i,o=(l[15].size/1024/1024).toFixed(2)+"",c,r;return{c(){e=p("div"),t=T("📦 "),s=T(n),i=T(" ("),c=T(o),r=T(" MB)"),u(e,"class","file-selected svelte-78e7a1")},m(f,d){k(f,e,d),a(e,t),a(e,s),a(e,i),a(e,c),a(e,r)},p(f,d){d[0]&32768&&n!==(n=f[15].name+"")&&B(s,n),d[0]&32768&&o!==(o=(f[15].size/1024/1024).toFixed(2)+"")&&B(c,o)},d(f){f&&$(e)}}}function Jo(l){let e,t,n,s,i,o,c,r,f,d,_,v,h,m,g,C,y,w,S,M,P;return{c(){e=p("div"),t=p("label"),t.textContent="Dependencies:",n=b(),s=p("div"),i=p("label"),o=p("input"),c=T(`
                  🐘 PostgreSQL`),r=b(),f=p("label"),d=p("input"),_=T(`
                  ⚡ Redis`),v=b(),h=p("label"),m=p("input"),g=T(`
                  🐬 MySQL`),C=b(),y=p("label"),w=p("input"),S=T(`
                  🍃 MongoDB`),u(o,"type","checkbox"),u(o,"class","svelte-78e7a1"),u(i,"class","dep-item svelte-78e7a1"),u(d,"type","checkbox"),u(d,"class","svelte-78e7a1"),u(f,"class","dep-item svelte-78e7a1"),u(m,"type","checkbox"),u(m,"class","svelte-78e7a1"),u(h,"class","dep-item svelte-78e7a1"),u(w,"type","checkbox"),u(w,"class","svelte-78e7a1"),u(y,"class","dep-item svelte-78e7a1"),u(s,"class","dep-list svelte-78e7a1"),u(e,"class","dependencies svelte-78e7a1")},m(D,j){k(D,e,j),a(e,t),a(e,n),a(e,s),a(s,i),a(i,o),o.checked=l[39].postgres,a(i,c),a(s,r),a(s,f),a(f,d),d.checked=l[39].redis,a(f,_),a(s,v),a(s,h),a(h,m),m.checked=l[39].mysql,a(h,g),a(s,C),a(s,y),a(y,w),w.checked=l[39].mongo,a(y,S),M||(P=[te(o,"change",l[99]),te(d,"change",l[100]),te(m,"change",l[101]),te(w,"change",l[102])],M=!0)},p(D,j){j[1]&256&&(o.checked=D[39].postgres),j[1]&256&&(d.checked=D[39].redis),j[1]&256&&(m.checked=D[39].mysql),j[1]&256&&(w.checked=D[39].mongo)},d(D){D&&$(e),M=!1,Fe(P)}}}function Yo(l){let e,t,n,s,i,o=(l[46]||"app-project-env.domain.com")+"",c,r,f,d,_,v,h,m,g,C,y,w,S,M,P;return{c(){e=p("div"),t=p("div"),n=p("label"),n.textContent="Domain Preview:",s=b(),i=p("code"),c=T(o),r=b(),f=p("div"),d=p("label"),d.textContent="Base Domain",_=b(),v=p("input"),h=b(),m=p("div"),g=p("label"),g.innerHTML='Custom Aliases <small class="svelte-78e7a1">(optional)</small>',C=b(),y=p("input"),w=b(),S=p("small"),S.textContent="Comma-separated custom domains (requires DNS setup)",u(n,"class","svelte-78e7a1"),u(i,"class","svelte-78e7a1"),u(t,"class","domain-preview svelte-78e7a1"),u(d,"for","base-domain"),u(d,"class","svelte-78e7a1"),u(v,"id","base-domain"),u(v,"type","text"),u(v,"placeholder","example.com"),u(v,"class","svelte-78e7a1"),u(f,"class","form-group svelte-78e7a1"),u(g,"for","domain-aliases"),u(g,"class","svelte-78e7a1"),u(y,"id","domain-aliases"),u(y,"type","text"),u(y,"placeholder","api.myclient.com, app.example.com"),u(y,"class","svelte-78e7a1"),u(S,"class","svelte-78e7a1"),u(m,"class","form-group svelte-78e7a1"),u(e,"class","domain-config svelte-78e7a1")},m(D,j){k(D,e,j),a(e,t),a(t,n),a(t,s),a(t,i),a(i,c),a(e,r),a(e,f),a(f,d),a(f,_),a(f,v),Q(v,l[4]),a(e,h),a(e,m),a(m,g),a(m,C),a(m,y),Q(y,l[41]),a(m,w),a(m,S),M||(P=[te(v,"input",l[105]),te(y,"input",l[106])],M=!0)},p(D,j){j[1]&32768&&o!==(o=(D[46]||"app-project-env.domain.com")+"")&&B(c,o),j[0]&16&&v.value!==D[4]&&Q(v,D[4]),j[1]&1024&&y.value!==D[41]&&Q(y,D[41])},d(D){D&&$(e),M=!1,Fe(P)}}}function mf(l){let e=l[34].size+"",t,n;return{c(){t=T(e),n=T(" selected")},m(s,i){k(s,t,i),k(s,n,i)},p(s,i){i[1]&8&&e!==(e=s[34].size+"")&&B(t,e)},d(s){s&&($(t),$(n))}}}function hf(l){let e;return{c(){e=T("✓ All")},m(t,n){k(t,e,n)},d(t){t&&$(e)}}}function gf(l){let e;return{c(){e=T("✕ None")},m(t,n){k(t,e,n)},d(t){t&&$(e)}}}function bf(l){let e,t,n=_e(l[45]),s=[];for(let o=0;o<n.length;o+=1)s[o]=Qo(To(l,n,o));const i=o=>N(s[o],1,1,()=>{s[o]=null});return{c(){for(let o=0;o<s.length;o+=1)s[o].c();e=Le()},m(o,c){for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(o,c);k(o,e,c),t=!0},p(o,c){if(c[1]&4210696){n=_e(o[45]);let r;for(r=0;r<n.length;r+=1){const f=To(o,n,r);s[r]?(s[r].p(f,c),E(s[r],1)):(s[r]=Qo(f),s[r].c(),E(s[r],1),s[r].m(e.parentNode,e))}for(ke(),r=n.length;r<s.length;r+=1)i(r);we()}},i(o){if(!t){for(let c=0;c<n.length;c+=1)E(s[c]);t=!0}},o(o){s=s.filter(is);for(let c=0;c<s.length;c+=1)N(s[c]);t=!1},d(o){o&&$(e),Me(s,o)}}}function $f(l){let e,t,n=(l[3]||"any region")+"",s;return{c(){e=p("div"),t=T("No servers in "),s=T(n),u(e,"class","empty svelte-78e7a1")},m(i,o){k(i,e,o),a(e,t),a(e,s)},p(i,o){o[0]&8&&n!==(n=(i[3]||"any region")+"")&&B(s,n)},i:ae,o:ae,d(i){i&&$(e)}}}function Vo(l){let e,t,n,s,i,o=(l[138].name||"unnamed")+"",c,r,f,d=l[156]+"",_,v,h,m,g,C;function y(){return l[109](l[156])}let w=l[138].project&&Ko(l);return{c(){e=p("label"),t=p("input"),s=b(),i=p("span"),c=T(o),r=b(),f=p("code"),_=T(d),v=b(),w&&w.c(),h=b(),u(t,"type","checkbox"),t.checked=n=l[34].has(l[156]),u(t,"class","svelte-78e7a1"),u(i,"class","server-name svelte-78e7a1"),u(f,"class","server-ip svelte-78e7a1"),u(e,"class","server-item svelte-78e7a1"),$e(e,"selected",l[34].has(l[156]))},m(S,M){k(S,e,M),a(e,t),a(e,s),a(e,i),a(i,c),a(e,r),a(e,f),a(f,_),a(e,v),w&&w.m(e,null),a(e,h),m=!0,g||(C=te(t,"change",y),g=!0)},p(S,M){l=S,(!m||M[1]&16392&&n!==(n=l[34].has(l[156])))&&(t.checked=n),(!m||M[1]&16384)&&o!==(o=(l[138].name||"unnamed")+"")&&B(c,o),(!m||M[1]&16384)&&d!==(d=l[156]+"")&&B(_,d),l[138].project?w?(w.p(l,M),M[1]&16384&&E(w,1)):(w=Ko(l),w.c(),E(w,1),w.m(e,h)):w&&(ke(),N(w,1,1,()=>{w=null}),we()),(!m||M[1]&16392)&&$e(e,"selected",l[34].has(l[156]))},i(S){m||(E(w),m=!0)},o(S){N(w),m=!1},d(S){S&&$(e),w&&w.d(),g=!1,C()}}}function Ko(l){let e,t;return e=new Ie({props:{variant:"info",$$slots:{default:[kf]},$$scope:{ctx:l}}}),{c(){oe(e.$$.fragment)},m(n,s){ne(e,n,s),t=!0},p(n,s){const i={};s[1]&16384|s[5]&8192&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){se(e,n)}}}function kf(l){let e=l[138].project+"",t;return{c(){t=T(e)},m(n,s){k(n,t,s)},p(n,s){s[1]&16384&&e!==(e=n[138].project+"")&&B(t,e)},d(n){n&&$(t)}}}function Qo(l){let e,t,n=l[156]&&Vo(l);return{c(){n&&n.c(),e=Le()},m(s,i){n&&n.m(s,i),k(s,e,i),t=!0},p(s,i){s[156]?n?(n.p(s,i),i[1]&16384&&E(n,1)):(n=Vo(s),n.c(),E(n,1),n.m(e.parentNode,e)):n&&(ke(),N(n,1,1,()=>{n=null}),we())},i(s){t||(E(n),t=!0)},o(s){N(n),t=!1},d(s){s&&$(e),n&&n.d(s)}}}function Xo(l){let e;return{c(){e=T("*")},m(t,n){k(t,e,n)},d(t){t&&$(e)}}}function Zo(l){let e,t=l[153].name+"",n,s;return{c(){e=p("option"),n=T(t),e.__value=s=l[153].id,Q(e,e.__value)},m(i,o){k(i,e,o),a(e,n)},p(i,o){o[1]&65536&&t!==(t=i[153].name+"")&&B(n,t),o[1]&65536&&s!==(s=i[153].id)&&(e.__value=s,Q(e,e.__value))},d(i){i&&$(e)}}}function xo(l){let e,t=(l[150].name||l[150].slug)+"",n,s;return{c(){e=p("option"),n=T(t),e.__value=s=l[150].slug,Q(e,e.__value)},m(i,o){k(i,e,o),a(e,n)},p(i,o){o[0]&536870912&&t!==(t=(i[150].name||i[150].slug)+"")&&B(n,t),o[0]&536870912&&s!==(s=i[150].slug)&&(e.__value=s,Q(e,e.__value))},d(i){i&&$(e)}}}function ei(l){let e,t=(l[147].description||l[147].slug)+"",n,s;return{c(){e=p("option"),n=T(t),e.__value=s=l[147].slug,Q(e,e.__value)},m(i,o){k(i,e,o),a(e,n)},p(i,o){o[0]&1073741824&&t!==(t=(i[147].description||i[147].slug)+"")&&B(n,t),o[0]&1073741824&&s!==(s=i[147].slug)&&(e.__value=s,Q(e,e.__value))},d(i){i&&$(e)}}}function ti(l){let e;return{c(){e=p("small"),e.textContent="⚠️ Select a snapshot for new servers",u(e,"class","warning svelte-78e7a1")},m(t,n){k(t,e,n)},d(t){t&&$(e)}}}function wf(l){let e;return{c(){e=T("🚀 Deploy")},m(t,n){k(t,e,n)},d(t){t&&$(e)}}}function yf(l){let e;return{c(){e=T("Deploying...")},m(t,n){k(t,e,n)},d(t){t&&$(e)}}}function Cf(l){let e;function t(i,o){return i[31]?yf:wf}let n=t(l),s=n(l);return{c(){s.c(),e=Le()},m(i,o){s.m(i,o),k(i,e,o)},p(i,o){n!==(n=t(i))&&(s.d(1),s=n(i),s&&(s.c(),s.m(e.parentNode,e)))},d(i){i&&$(e),s.d(i)}}}function Sf(l){let e,t,n,s,i,o,c,r,f,d,_,v,h,m,g,C,y,w,S,M,P,D,j,L,R,A,F,q,H,W,I,J,z,G,O,U,Y,Z,ie,le,ee,ue,x,he,re,X,pe,de,be,fe,ye,Ae,dt,et,At,qt,Se,Ne,Dt,pl,Ke,_l,Ft,ln,Pt,Xt,$l,wt,nn,kl,Fl,ze,vl,sn,zt,Bt,on,zl,wl,Bl,yl,Cl,Ul,Et,Zt,Ut,rn,Il,an,Hl,cn,Gl,fn,xt,It,un,Wl,dn,Jl,pn,_n,gt,el,tl,Yl,vn,Ht,mn,ll,Mt,hn,jt,gn,ml,ot,pt,bn,Sl,Lt,nl,Gt,$n,kn,_t,sl,wn,ol,hl,yn,bt,Cn,il,gl,Sn,$t,Tn,yt,Vl,V,ce,me,je,De,Oe,Ee,it,Ct,Wt,Nt,Un,In,rs,Tl=_e(l[48]),tt=[];for(let K=0;K<Tl.length;K+=1)tt[K]=Mo(Eo(l,Tl,K));P=new Te({props:{variant:"ghost",size:"sm",title:"Load saved config",$$slots:{default:[nf]},$$scope:{ctx:l}}}),P.$on("click",l[49]),j=new Te({props:{variant:"ghost",size:"sm",title:"Save current settings",$$slots:{default:[sf]},$$scope:{ctx:l}}}),j.$on("click",l[50]),R=new Te({props:{variant:"ghost",size:"sm",title:"Edit exclusion patterns",$$slots:{default:[of]},$$scope:{ctx:l}}}),R.$on("click",l[51]);let rt=l[42]&&jo(l),Qe=l[43]&&Lo(l),Xe=l[6]==="code"&&No(l),Ze=l[6]==="git"&&Bo(l),at=l[6]==="image"&&Ho(l),ct=l[6]==="image_file"&&Go(l),ft=l[37]&&Jo(l),ut=l[40]&&Yo(l);Ht=new Ie({props:{variant:"info",$$slots:{default:[mf]},$$scope:{ctx:l}}}),Mt=new Te({props:{variant:"ghost",size:"sm",$$slots:{default:[hf]},$$scope:{ctx:l}}}),Mt.$on("click",l[107]),jt=new Te({props:{variant:"ghost",size:"sm",$$slots:{default:[gf]},$$scope:{ctx:l}}}),jt.$on("click",l[108]);const as=[$f,bf],rl=[];function cs(K,ge){return K[45].length===0?0:1}ot=cs(l),pt=rl[ot]=as[ot](l);let vt=l[35]>0&&Xo(),Dl=_e(l[47]),lt=[];for(let K=0;K<Dl.length;K+=1)lt[K]=Zo(So(l,Dl,K));let Pl=_e(l[29]),nt=[];for(let K=0;K<Pl.length;K+=1)nt[K]=xo(Co(l,Pl,K));let El=_e(l[30]),st=[];for(let K=0;K<El.length;K+=1)st[K]=ei(yo(l,El,K));let mt=l[35]>0&&!l[27]&&ti();return Wt=new Te({props:{variant:"primary",type:"submit",disabled:l[31],$$slots:{default:[Cf]},$$scope:{ctx:l}}}),Un=Zr(l[72][0]),{c(){e=p("form"),t=p("div"),n=p("div"),s=p("label"),s.textContent="App Name *",i=b(),o=p("input"),c=b(),r=p("div"),f=p("label"),f.textContent="Project",d=b(),_=p("input"),v=b(),h=p("div"),m=p("label"),m.textContent="Environment",g=b(),C=p("select");for(let K=0;K<tt.length;K+=1)tt[K].c();y=b(),w=p("div"),S=p("span"),S.textContent="Config:",M=b(),oe(P.$$.fragment),D=b(),oe(j.$$.fragment),L=b(),oe(R.$$.fragment),A=b(),rt&&rt.c(),F=b(),Qe&&Qe.c(),q=b(),H=p("div"),W=p("label"),W.innerHTML='Tags <small class="svelte-78e7a1">(comma-separated)</small>',I=b(),J=p("input"),z=b(),G=p("div"),O=p("label"),O.textContent="Source Type *",U=b(),Y=p("div"),Z=p("label"),ie=p("input"),le=T(`
              📁 Local Code`),ee=b(),ue=p("label"),x=p("input"),he=T(`
              📦 Git Repo`),re=b(),X=p("label"),pe=p("input"),de=T(`
              🐳 Registry`),be=b(),fe=p("label"),ye=p("input"),Ae=T(`
              📦 Local Image`),dt=b(),Xe&&Xe.c(),et=b(),Ze&&Ze.c(),At=b(),at&&at.c(),qt=b(),ct&&ct.c(),Se=b(),Ne=p("div"),Dt=p("label"),Dt.textContent="App Port",pl=b(),Ke=p("input"),_l=b(),Ft=p("small"),Ft.textContent="Port your app listens on inside the container",ln=b(),Pt=p("div"),Xt=p("label"),Xt.textContent="Environment Variables",$l=b(),wt=p("textarea"),nn=b(),kl=p("small"),kl.textContent="One per line: KEY=value",Fl=b(),ze=p("div"),vl=p("div"),vl.innerHTML="<span>🔧</span> <span>Service Configuration</span>",sn=b(),zt=p("label"),Bt=p("input"),on=b(),zl=p("span"),zl.textContent="Auto-inject service discovery",wl=b(),Bl=p("small"),Bl.textContent="Injects DATABASE_URL, REDIS_URL, etc. based on dependencies",yl=b(),ft&&ft.c(),Cl=b(),Ul=p("div"),Et=b(),Zt=p("label"),Ut=p("input"),rn=b(),Il=p("span"),Il.textContent="💾 Persist data (mount volume)",an=b(),Hl=p("small"),Hl.textContent="Mounts /data volume for databases and stateful services",cn=b(),Gl=p("div"),fn=b(),xt=p("label"),It=p("input"),un=b(),Wl=p("span"),Wl.textContent="🌐 Setup domain (Cloudflare)",dn=b(),Jl=p("small"),Jl.textContent="Auto-provision subdomain with SSL via Cloudflare",pn=b(),ut&&ut.c(),_n=b(),gt=p("div"),el=p("div"),tl=p("div"),Yl=p("span"),Yl.textContent="🖥️ Servers",vn=b(),oe(Ht.$$.fragment),mn=b(),ll=p("div"),oe(Mt.$$.fragment),hn=b(),oe(jt.$$.fragment),gn=b(),ml=p("div"),pt.c(),bn=b(),Sl=p("div"),Lt=p("div"),nl=p("div"),Gt=p("label"),$n=T("Snapshot "),vt&&vt.c(),kn=b(),_t=p("select"),sl=p("option"),sl.textContent="Select snapshot...";for(let K=0;K<lt.length;K+=1)lt[K].c();wn=b(),ol=p("div"),hl=p("label"),hl.textContent="Region",yn=b(),bt=p("select");for(let K=0;K<nt.length;K+=1)nt[K].c();Cn=b(),il=p("div"),gl=p("label"),gl.textContent="Size",Sn=b(),$t=p("select");for(let K=0;K<st.length;K+=1)st[K].c();Tn=b(),yt=p("div"),Vl=p("span"),Vl.textContent="➕ New servers:",V=b(),ce=p("div"),me=p("button"),me.textContent="−",je=b(),De=p("input"),Oe=b(),Ee=p("button"),Ee.textContent="+",it=b(),mt&&mt.c(),Ct=b(),oe(Wt.$$.fragment),u(s,"for","deploy-name"),u(s,"class","svelte-78e7a1"),u(o,"id","deploy-name"),u(o,"type","text"),u(o,"placeholder","my-app"),o.required=!0,u(o,"pattern","[-a-z0-9]+"),u(o,"title","Lowercase letters, numbers, hyphens only"),u(o,"class","svelte-78e7a1"),u(n,"class","form-group svelte-78e7a1"),u(f,"for","deploy-project"),u(f,"class","svelte-78e7a1"),u(_,"id","deploy-project"),u(_,"type","text"),u(_,"placeholder","my-project"),u(_,"pattern","[-a-z0-9]*"),u(_,"class","svelte-78e7a1"),u(r,"class","form-group svelte-78e7a1"),u(m,"for","deploy-env"),u(m,"class","svelte-78e7a1"),u(C,"id","deploy-env"),u(C,"class","svelte-78e7a1"),l[2]===void 0&&Ue(()=>l[68].call(C)),u(h,"class","form-group svelte-78e7a1"),u(t,"class","form-row three-col svelte-78e7a1"),u(S,"class","config-label svelte-78e7a1"),u(w,"class","config-bar svelte-78e7a1"),u(W,"for","deploy-tags"),u(W,"class","svelte-78e7a1"),u(J,"id","deploy-tags"),u(J,"type","text"),u(J,"placeholder","api, backend, v2"),u(J,"class","svelte-78e7a1"),u(H,"class","form-group svelte-78e7a1"),u(O,"class","svelte-78e7a1"),u(ie,"type","radio"),ie.__value="code",Q(ie,ie.__value),u(ie,"class","svelte-78e7a1"),u(Z,"class","source-option svelte-78e7a1"),$e(Z,"active",l[6]==="code"),u(x,"type","radio"),x.__value="git",Q(x,x.__value),u(x,"class","svelte-78e7a1"),u(ue,"class","source-option svelte-78e7a1"),$e(ue,"active",l[6]==="git"),u(pe,"type","radio"),pe.__value="image",Q(pe,pe.__value),u(pe,"class","svelte-78e7a1"),u(X,"class","source-option svelte-78e7a1"),$e(X,"active",l[6]==="image"),u(ye,"type","radio"),ye.__value="image_file",Q(ye,ye.__value),u(ye,"class","svelte-78e7a1"),u(fe,"class","source-option svelte-78e7a1"),$e(fe,"active",l[6]==="image_file"),u(Y,"class","source-radio-group svelte-78e7a1"),u(G,"class","form-group svelte-78e7a1"),u(Dt,"for","deploy-port"),u(Dt,"class","svelte-78e7a1"),u(Ke,"id","deploy-port"),u(Ke,"type","number"),u(Ke,"min","1"),u(Ke,"max","65535"),u(Ke,"class","svelte-78e7a1"),u(Ft,"class","svelte-78e7a1"),u(Ne,"class","form-group svelte-78e7a1"),u(Xt,"for","deploy-envvars"),u(Xt,"class","svelte-78e7a1"),u(wt,"id","deploy-envvars"),u(wt,"rows","3"),u(wt,"placeholder","KEY=value ANOTHER_KEY=value"),u(wt,"class","svelte-78e7a1"),u(kl,"class","svelte-78e7a1"),u(Pt,"class","form-group svelte-78e7a1"),u(vl,"class","config-header svelte-78e7a1"),u(Bt,"type","checkbox"),u(Bt,"class","svelte-78e7a1"),u(zt,"class","checkbox-label svelte-78e7a1"),u(Ul,"class","config-divider svelte-78e7a1"),u(Ut,"type","checkbox"),u(Ut,"class","svelte-78e7a1"),u(Zt,"class","checkbox-label svelte-78e7a1"),u(Gl,"class","config-divider svelte-78e7a1"),u(It,"type","checkbox"),u(It,"class","svelte-78e7a1"),u(xt,"class","checkbox-label svelte-78e7a1"),u(ze,"class","service-config svelte-78e7a1"),u(tl,"class","server-title svelte-78e7a1"),u(ll,"class","server-actions svelte-78e7a1"),u(el,"class","server-header svelte-78e7a1"),u(ml,"class","server-list svelte-78e7a1"),u(Gt,"for","snapshot-select"),u(Gt,"class","svelte-78e7a1"),sl.__value="",Q(sl,sl.__value),u(_t,"id","snapshot-select"),u(_t,"class","svelte-78e7a1"),l[27]===void 0&&Ue(()=>l[110].call(_t)),u(nl,"class","form-group svelte-78e7a1"),u(hl,"for","region-select"),u(hl,"class","svelte-78e7a1"),u(bt,"id","region-select"),u(bt,"class","svelte-78e7a1"),l[3]===void 0&&Ue(()=>l[111].call(bt)),u(ol,"class","form-group svelte-78e7a1"),u(gl,"for","size-select"),u(gl,"class","svelte-78e7a1"),u($t,"id","size-select"),u($t,"class","svelte-78e7a1"),l[28]===void 0&&Ue(()=>l[112].call($t)),u(il,"class","form-group svelte-78e7a1"),u(Lt,"class","form-row three-col svelte-78e7a1"),u(Sl,"class","provisioning-config svelte-78e7a1"),u(me,"type","button"),u(me,"class","svelte-78e7a1"),u(De,"type","number"),u(De,"min","0"),u(De,"max","10"),u(De,"class","svelte-78e7a1"),u(Ee,"type","button"),u(Ee,"class","svelte-78e7a1"),u(ce,"class","number-spinner svelte-78e7a1"),u(yt,"class","new-servers svelte-78e7a1"),u(gt,"class","server-selection svelte-78e7a1"),Un.p(ie,x,pe,ye)},m(K,ge){k(K,e,ge),a(e,t),a(t,n),a(n,s),a(n,i),a(n,o),Q(o,l[0]),a(t,c),a(t,r),a(r,f),a(r,d),a(r,_),Q(_,l[1]),a(t,v),a(t,h),a(h,m),a(h,g),a(h,C);for(let He=0;He<tt.length;He+=1)tt[He]&&tt[He].m(C,null);Pe(C,l[2],!0),a(e,y),a(e,w),a(w,S),a(w,M),ne(P,w,null),a(w,D),ne(j,w,null),a(w,L),ne(R,w,null),a(w,A),rt&&rt.m(w,null),a(e,F),Qe&&Qe.m(e,null),a(e,q),a(e,H),a(H,W),a(H,I),a(H,J),Q(J,l[5]),a(e,z),a(e,G),a(G,O),a(G,U),a(G,Y),a(Y,Z),a(Z,ie),ie.checked=ie.__value===l[6],a(Z,le),a(Y,ee),a(Y,ue),a(ue,x),x.checked=x.__value===l[6],a(ue,he),a(Y,re),a(Y,X),a(X,pe),pe.checked=pe.__value===l[6],a(X,de),a(Y,be),a(Y,fe),a(fe,ye),ye.checked=ye.__value===l[6],a(fe,Ae),a(e,dt),Xe&&Xe.m(e,null),a(e,et),Ze&&Ze.m(e,null),a(e,At),at&&at.m(e,null),a(e,qt),ct&&ct.m(e,null),a(e,Se),a(e,Ne),a(Ne,Dt),a(Ne,pl),a(Ne,Ke),Q(Ke,l[7]),a(Ne,_l),a(Ne,Ft),a(e,ln),a(e,Pt),a(Pt,Xt),a(Pt,$l),a(Pt,wt),Q(wt,l[8]),a(Pt,nn),a(Pt,kl),a(e,Fl),a(e,ze),a(ze,vl),a(ze,sn),a(ze,zt),a(zt,Bt),Bt.checked=l[37],a(zt,on),a(zt,zl),a(ze,wl),a(ze,Bl),a(ze,yl),ft&&ft.m(ze,null),a(ze,Cl),a(ze,Ul),a(ze,Et),a(ze,Zt),a(Zt,Ut),Ut.checked=l[38],a(Zt,rn),a(Zt,Il),a(ze,an),a(ze,Hl),a(ze,cn),a(ze,Gl),a(ze,fn),a(ze,xt),a(xt,It),It.checked=l[40],a(xt,un),a(xt,Wl),a(ze,dn),a(ze,Jl),a(ze,pn),ut&&ut.m(ze,null),a(e,_n),a(e,gt),a(gt,el),a(el,tl),a(tl,Yl),a(tl,vn),ne(Ht,tl,null),a(el,mn),a(el,ll),ne(Mt,ll,null),a(ll,hn),ne(jt,ll,null),a(gt,gn),a(gt,ml),rl[ot].m(ml,null),a(gt,bn),a(gt,Sl),a(Sl,Lt),a(Lt,nl),a(nl,Gt),a(Gt,$n),vt&&vt.m(Gt,null),a(nl,kn),a(nl,_t),a(_t,sl);for(let He=0;He<lt.length;He+=1)lt[He]&&lt[He].m(_t,null);Pe(_t,l[27],!0),a(Lt,wn),a(Lt,ol),a(ol,hl),a(ol,yn),a(ol,bt);for(let He=0;He<nt.length;He+=1)nt[He]&&nt[He].m(bt,null);Pe(bt,l[3],!0),a(Lt,Cn),a(Lt,il),a(il,gl),a(il,Sn),a(il,$t);for(let He=0;He<st.length;He+=1)st[He]&&st[He].m($t,null);Pe($t,l[28],!0),a(gt,Tn),a(gt,yt),a(yt,Vl),a(yt,V),a(yt,ce),a(ce,me),a(ce,je),a(ce,De),Q(De,l[35]),a(ce,Oe),a(ce,Ee),a(yt,it),mt&&mt.m(yt,null),a(e,Ct),ne(Wt,e,null),Nt=!0,In||(rs=[te(o,"input",l[66]),te(_,"input",l[67]),te(C,"change",l[68]),te(J,"input",l[70]),te(ie,"change",l[71]),te(x,"change",l[73]),te(pe,"change",l[74]),te(ye,"change",l[75]),te(Ke,"input",l[96]),te(wt,"input",l[97]),te(Bt,"change",l[98]),te(Ut,"change",l[103]),te(It,"change",l[104]),te(_t,"change",l[110]),te(bt,"change",l[111]),te($t,"change",l[112]),te(me,"click",l[113]),te(De,"input",l[114]),te(Ee,"click",l[115]),te(e,"submit",l[63])],In=!0)},p(K,ge){if(ge[0]&1&&o.value!==K[0]&&Q(o,K[0]),ge[0]&2&&_.value!==K[1]&&Q(_,K[1]),ge[1]&131072){Tl=_e(K[48]);let Ce;for(Ce=0;Ce<Tl.length;Ce+=1){const St=Eo(K,Tl,Ce);tt[Ce]?tt[Ce].p(St,ge):(tt[Ce]=Mo(St),tt[Ce].c(),tt[Ce].m(C,null))}for(;Ce<tt.length;Ce+=1)tt[Ce].d(1);tt.length=Tl.length}ge[0]&4|ge[1]&131072&&Pe(C,K[2]);const He={};ge[5]&8192&&(He.$$scope={dirty:ge,ctx:K}),P.$set(He);const fs={};ge[5]&8192&&(fs.$$scope={dirty:ge,ctx:K}),j.$set(fs);const us={};ge[5]&8192&&(us.$$scope={dirty:ge,ctx:K}),R.$set(us),K[42]?rt?rt.p(K,ge):(rt=jo(K),rt.c(),rt.m(w,null)):rt&&(rt.d(1),rt=null),K[43]?Qe?(Qe.p(K,ge),ge[1]&4096&&E(Qe,1)):(Qe=Lo(K),Qe.c(),E(Qe,1),Qe.m(e,q)):Qe&&(ke(),N(Qe,1,1,()=>{Qe=null}),we()),ge[0]&32&&J.value!==K[5]&&Q(J,K[5]),ge[0]&64&&(ie.checked=ie.__value===K[6]),(!Nt||ge[0]&64)&&$e(Z,"active",K[6]==="code"),ge[0]&64&&(x.checked=x.__value===K[6]),(!Nt||ge[0]&64)&&$e(ue,"active",K[6]==="git"),ge[0]&64&&(pe.checked=pe.__value===K[6]),(!Nt||ge[0]&64)&&$e(X,"active",K[6]==="image"),ge[0]&64&&(ye.checked=ye.__value===K[6]),(!Nt||ge[0]&64)&&$e(fe,"active",K[6]==="image_file"),K[6]==="code"?Xe?(Xe.p(K,ge),ge[0]&64&&E(Xe,1)):(Xe=No(K),Xe.c(),E(Xe,1),Xe.m(e,et)):Xe&&(ke(),N(Xe,1,1,()=>{Xe=null}),we()),K[6]==="git"?Ze?(Ze.p(K,ge),ge[0]&64&&E(Ze,1)):(Ze=Bo(K),Ze.c(),E(Ze,1),Ze.m(e,At)):Ze&&(ke(),N(Ze,1,1,()=>{Ze=null}),we()),K[6]==="image"?at?at.p(K,ge):(at=Ho(K),at.c(),at.m(e,qt)):at&&(at.d(1),at=null),K[6]==="image_file"?ct?ct.p(K,ge):(ct=Go(K),ct.c(),ct.m(e,Se)):ct&&(ct.d(1),ct=null),ge[0]&128&&Rt(Ke.value)!==K[7]&&Q(Ke,K[7]),ge[0]&256&&Q(wt,K[8]),ge[1]&64&&(Bt.checked=K[37]),K[37]?ft?ft.p(K,ge):(ft=Jo(K),ft.c(),ft.m(ze,Cl)):ft&&(ft.d(1),ft=null),ge[1]&128&&(Ut.checked=K[38]),ge[1]&512&&(It.checked=K[40]),K[40]?ut?ut.p(K,ge):(ut=Yo(K),ut.c(),ut.m(ze,null)):ut&&(ut.d(1),ut=null);const ds={};ge[1]&8|ge[5]&8192&&(ds.$$scope={dirty:ge,ctx:K}),Ht.$set(ds);const ps={};ge[5]&8192&&(ps.$$scope={dirty:ge,ctx:K}),Mt.$set(ps);const _s={};ge[5]&8192&&(_s.$$scope={dirty:ge,ctx:K}),jt.$set(_s);let Hn=ot;if(ot=cs(K),ot===Hn?rl[ot].p(K,ge):(ke(),N(rl[Hn],1,1,()=>{rl[Hn]=null}),we(),pt=rl[ot],pt?pt.p(K,ge):(pt=rl[ot]=as[ot](K),pt.c()),E(pt,1),pt.m(ml,null)),K[35]>0?vt||(vt=Xo(),vt.c(),vt.m(Gt,null)):vt&&(vt.d(1),vt=null),ge[1]&65536){Dl=_e(K[47]);let Ce;for(Ce=0;Ce<Dl.length;Ce+=1){const St=So(K,Dl,Ce);lt[Ce]?lt[Ce].p(St,ge):(lt[Ce]=Zo(St),lt[Ce].c(),lt[Ce].m(_t,null))}for(;Ce<lt.length;Ce+=1)lt[Ce].d(1);lt.length=Dl.length}if(ge[0]&134217728|ge[1]&65536&&Pe(_t,K[27]),ge[0]&536870912){Pl=_e(K[29]);let Ce;for(Ce=0;Ce<Pl.length;Ce+=1){const St=Co(K,Pl,Ce);nt[Ce]?nt[Ce].p(St,ge):(nt[Ce]=xo(St),nt[Ce].c(),nt[Ce].m(bt,null))}for(;Ce<nt.length;Ce+=1)nt[Ce].d(1);nt.length=Pl.length}if(ge[0]&536870920&&Pe(bt,K[3]),ge[0]&1073741824){El=_e(K[30]);let Ce;for(Ce=0;Ce<El.length;Ce+=1){const St=yo(K,El,Ce);st[Ce]?st[Ce].p(St,ge):(st[Ce]=ei(St),st[Ce].c(),st[Ce].m($t,null))}for(;Ce<st.length;Ce+=1)st[Ce].d(1);st.length=El.length}ge[0]&1342177280&&Pe($t,K[28]),ge[1]&16&&Rt(De.value)!==K[35]&&Q(De,K[35]),K[35]>0&&!K[27]?mt||(mt=ti(),mt.c(),mt.m(yt,null)):mt&&(mt.d(1),mt=null);const Gn={};ge[1]&1&&(Gn.disabled=K[31]),ge[1]&1|ge[5]&8192&&(Gn.$$scope={dirty:ge,ctx:K}),Wt.$set(Gn)},i(K){Nt||(E(P.$$.fragment,K),E(j.$$.fragment,K),E(R.$$.fragment,K),E(Qe),E(Xe),E(Ze),E(Ht.$$.fragment,K),E(Mt.$$.fragment,K),E(jt.$$.fragment,K),E(pt),E(Wt.$$.fragment,K),Nt=!0)},o(K){N(P.$$.fragment,K),N(j.$$.fragment,K),N(R.$$.fragment,K),N(Qe),N(Xe),N(Ze),N(Ht.$$.fragment,K),N(Mt.$$.fragment,K),N(jt.$$.fragment,K),N(pt),N(Wt.$$.fragment,K),Nt=!1},d(K){K&&$(e),Me(tt,K),se(P),se(j),se(R),rt&&rt.d(),Qe&&Qe.d(),Xe&&Xe.d(),Ze&&Ze.d(),at&&at.d(),ct&&ct.d(),ft&&ft.d(),ut&&ut.d(),se(Ht),se(Mt),se(jt),rl[ot].d(),vt&&vt.d(),Me(lt,K),Me(nt,K),Me(st,K),mt&&mt.d(),se(Wt),Un.r(),In=!1,Fe(rs)}}}function Tf(l){let e;return{c(){e=p("div"),e.innerHTML='<p>No deployment in progress</p> <p class="hint svelte-78e7a1">Fill in the form and click Deploy to start</p>',u(e,"class","empty-state svelte-78e7a1")},m(t,n){k(t,e,n)},p:ae,d(t){t&&$(e)}}}function Df(l){let e,t,n,s,i,o,c=_e(l[33]),r=[];for(let v=0;v<c.length;v+=1)r[v]=li(wo(l,c,v));function f(v,h){if(v[36]&&v[36].success)return Ef;if(v[36]&&!v[36].success)return Pf}let d=f(l),_=d&&d(l);return{c(){e=p("div"),t=p("div"),n=p("div"),s=b(),i=p("div");for(let v=0;v<r.length;v+=1)r[v].c();o=b(),_&&_.c(),u(n,"class","progress-fill svelte-78e7a1"),qe(n,"width",l[32]+"%"),u(t,"class","progress-bar svelte-78e7a1"),u(i,"class","log-output svelte-78e7a1"),u(e,"class","progress-section svelte-78e7a1")},m(v,h){k(v,e,h),a(e,t),a(t,n),a(e,s),a(e,i);for(let m=0;m<r.length;m+=1)r[m]&&r[m].m(i,null);a(e,o),_&&_.m(e,null)},p(v,h){if(h[1]&2&&qe(n,"width",v[32]+"%"),h[1]&4){c=_e(v[33]);let m;for(m=0;m<c.length;m+=1){const g=wo(v,c,m);r[m]?r[m].p(g,h):(r[m]=li(g),r[m].c(),r[m].m(i,null))}for(;m<r.length;m+=1)r[m].d(1);r.length=c.length}d===(d=f(v))&&_?_.p(v,h):(_&&_.d(1),_=d&&d(v),_&&(_.c(),_.m(e,null)))},d(v){v&&$(e),Me(r,v),_&&_.d()}}}function li(l){let e,t,n=l[64].time.toLocaleTimeString()+"",s,i,o,c=ui(l[64].message)+"",r,f;return{c(){e=p("div"),t=p("span"),s=T(n),i=b(),o=new $a(!1),r=b(),u(t,"class","log-time svelte-78e7a1"),o.a=r,u(e,"class",f="log-line "+l[64].type+" svelte-78e7a1")},m(d,_){k(d,e,_),a(e,t),a(t,s),a(e,i),o.m(c,e),a(e,r)},p(d,_){_[1]&4&&n!==(n=d[64].time.toLocaleTimeString()+"")&&B(s,n),_[1]&4&&c!==(c=ui(d[64].message)+"")&&o.p(c),_[1]&4&&f!==(f="log-line "+d[64].type+" svelte-78e7a1")&&u(e,"class",f)},d(d){d&&$(e)}}}function Pf(l){let e,t,n,s,i,o=l[2].toUpperCase()+"",c,r,f,d=l[36].error&&ni(l);function _(m,g){return m[36].servers&&m[36].servers.length>0?jf:Mf}let v=_(l),h=v(l);return{c(){e=p("div"),t=p("div"),n=p("h4"),n.textContent="❌ Deployment Failed",s=b(),i=p("span"),c=T(o),r=b(),d&&d.c(),f=b(),h.c(),u(n,"class","svelte-78e7a1"),u(i,"class","env-badge svelte-78e7a1"),u(t,"class","result-header svelte-78e7a1"),u(e,"class","deploy-failure-box svelte-78e7a1")},m(m,g){k(m,e,g),a(e,t),a(t,n),a(t,s),a(t,i),a(i,c),a(e,r),d&&d.m(e,null),a(e,f),h.m(e,null)},p(m,g){g[0]&4&&o!==(o=m[2].toUpperCase()+"")&&B(c,o),m[36].error?d?d.p(m,g):(d=ni(m),d.c(),d.m(e,f)):d&&(d.d(1),d=null),v===(v=_(m))&&h?h.p(m,g):(h.d(1),h=v(m),h&&(h.c(),h.m(e,null)))},d(m){m&&$(e),d&&d.d(),h.d()}}}function Ef(l){let e,t,n,s,i,o=l[2].toUpperCase()+"",c,r,f,d=l[36].domain&&ii(l),_=l[36].servers&&l[36].servers.length>0&&ri(l);return{c(){e=p("div"),t=p("div"),n=p("h4"),n.textContent="✅ Deployment Complete",s=b(),i=p("span"),c=T(o),r=b(),d&&d.c(),f=b(),_&&_.c(),u(n,"class","svelte-78e7a1"),u(i,"class","env-badge svelte-78e7a1"),u(t,"class","result-header svelte-78e7a1"),u(e,"class","deploy-success-box svelte-78e7a1")},m(v,h){k(v,e,h),a(e,t),a(t,n),a(t,s),a(t,i),a(i,c),a(e,r),d&&d.m(e,null),a(e,f),_&&_.m(e,null)},p(v,h){h[0]&4&&o!==(o=v[2].toUpperCase()+"")&&B(c,o),v[36].domain?d?d.p(v,h):(d=ii(v),d.c(),d.m(e,f)):d&&(d.d(1),d=null),v[36].servers&&v[36].servers.length>0?_?_.p(v,h):(_=ri(v),_.c(),_.m(e,null)):_&&(_.d(1),_=null)},d(v){v&&$(e),d&&d.d(),_&&_.d()}}}function ni(l){let e,t=l[36].error+"",n;return{c(){e=p("p"),n=T(t)},m(s,i){k(s,e,i),a(e,n)},p(s,i){i[1]&32&&t!==(t=s[36].error+"")&&B(n,t)},d(s){s&&$(e)}}}function Mf(l){let e;return{c(){e=p("p"),e.textContent="No server details available",qe(e,"margin-top","8px"),qe(e,"opacity","0.8")},m(t,n){k(t,e,n)},p:ae,d(t){t&&$(e)}}}function jf(l){let e,t,n,s,i=_e(l[36].servers),o=[];for(let c=0;c<i.length;c+=1)o[c]=oi(bo(l,i,c));return{c(){e=p("div"),t=p("span"),t.textContent="Server Status:",n=b(),s=p("div");for(let c=0;c<o.length;c+=1)o[c].c();u(t,"class","result-label svelte-78e7a1"),u(s,"class","server-links svelte-78e7a1"),u(e,"class","result-section svelte-78e7a1"),qe(e,"margin-top","12px")},m(c,r){k(c,e,r),a(e,t),a(e,n),a(e,s);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(s,null)},p(c,r){if(r[0]&1|r[1]&32){i=_e(c[36].servers);let f;for(f=0;f<i.length;f+=1){const d=bo(c,i,f);o[f]?o[f].p(d,r):(o[f]=oi(d),o[f].c(),o[f].m(s,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=i.length}},d(c){c&&$(e),Me(o,c)}}}function Lf(l){let e,t=l[138].ip+"",n,s,i=l[138].error&&si(l);return{c(){e=T("❌ "),n=T(t),i&&i.c(),s=Le()},m(o,c){k(o,e,c),k(o,n,c),i&&i.m(o,c),k(o,s,c)},p(o,c){c[1]&32&&t!==(t=o[138].ip+"")&&B(n,t),o[138].error?i?i.p(o,c):(i=si(o),i.c(),i.m(s.parentNode,s)):i&&(i.d(1),i=null)},d(o){o&&($(e),$(n),$(s)),i&&i.d(o)}}}function Nf(l){let e,t=l[138].ip+"",n;return{c(){e=T("✅ "),n=T(t)},m(s,i){k(s,e,i),k(s,n,i)},p(s,i){i[1]&32&&t!==(t=s[138].ip+"")&&B(n,t)},d(s){s&&($(e),$(n))}}}function si(l){let e,t=l[138].error+"",n;return{c(){e=T(": "),n=T(t)},m(s,i){k(s,e,i),k(s,n,i)},p(s,i){i[1]&32&&t!==(t=s[138].error+"")&&B(n,t)},d(s){s&&($(e),$(n))}}}function oi(l){let e,t,n,s,i,o,c;function r(v,h){return v[138].success?Nf:Lf}let f=r(l),d=f(l);function _(){return l[118](l[138])}return{c(){e=p("div"),t=p("span"),d.c(),n=b(),s=p("button"),s.textContent="📋 Logs",i=b(),u(s,"class","log-btn svelte-78e7a1"),u(e,"class","server-link-row svelte-78e7a1")},m(v,h){k(v,e,h),a(e,t),d.m(t,null),a(e,n),a(e,s),a(e,i),o||(c=te(s,"click",_),o=!0)},p(v,h){l=v,f===(f=r(l))&&d?d.p(l,h):(d.d(1),d=f(l),d&&(d.c(),d.m(t,null)))},d(v){v&&$(e),d.d(),o=!1,c()}}}function ii(l){let e,t,n,s,i,o=l[36].domain+"",c,r;return{c(){e=p("div"),t=p("span"),t.textContent="Domain:",n=b(),s=p("a"),i=T("https://"),c=T(o),u(t,"class","result-label svelte-78e7a1"),u(s,"href",r="https://"+l[36].domain),u(s,"target","_blank"),u(s,"class","result-link svelte-78e7a1"),u(e,"class","result-section svelte-78e7a1")},m(f,d){k(f,e,d),a(e,t),a(e,n),a(e,s),a(s,i),a(s,c)},p(f,d){d[1]&32&&o!==(o=f[36].domain+"")&&B(c,o),d[1]&32&&r!==(r="https://"+f[36].domain)&&u(s,"href",r)},d(f){f&&$(e)}}}function ri(l){let e,t,n,s,i,o=l[36].servers.some(di),c,r=_e(l[36].servers.filter(vi)),f=[];for(let _=0;_<r.length;_+=1)f[_]=ai(ko(l,r,_));let d=o&&ci(l);return{c(){e=p("div"),t=p("span"),t.textContent="Servers:",n=b(),s=p("div");for(let _=0;_<f.length;_+=1)f[_].c();i=b(),d&&d.c(),c=Le(),u(t,"class","result-label svelte-78e7a1"),u(s,"class","server-links svelte-78e7a1"),u(e,"class","result-section svelte-78e7a1")},m(_,v){k(_,e,v),a(e,t),a(e,n),a(e,s);for(let h=0;h<f.length;h+=1)f[h]&&f[h].m(s,null);k(_,i,v),d&&d.m(_,v),k(_,c,v)},p(_,v){if(v[0]&1|v[1]&32){r=_e(_[36].servers.filter(vi));let h;for(h=0;h<r.length;h+=1){const m=ko(_,r,h);f[h]?f[h].p(m,v):(f[h]=ai(m),f[h].c(),f[h].m(s,null))}for(;h<f.length;h+=1)f[h].d(1);f.length=r.length}v[1]&32&&(o=_[36].servers.some(di)),o?d?d.p(_,v):(d=ci(_),d.c(),d.m(c.parentNode,c)):d&&(d.d(1),d=null)},d(_){_&&($(e),$(i),$(c)),Me(f,_),d&&d.d(_)}}}function ai(l){let e,t,n=l[138].url+"",s,i,o,c,r,f,d;function _(){return l[116](l[138])}return{c(){e=p("div"),t=p("a"),s=T(n),o=b(),c=p("button"),c.textContent="📋 Logs",r=b(),u(t,"href",i=l[138].url),u(t,"target","_blank"),u(t,"class","result-link svelte-78e7a1"),u(c,"class","log-btn svelte-78e7a1"),u(e,"class","server-link-row svelte-78e7a1")},m(v,h){k(v,e,h),a(e,t),a(t,s),a(e,o),a(e,c),a(e,r),f||(d=te(c,"click",_),f=!0)},p(v,h){l=v,h[1]&32&&n!==(n=l[138].url+"")&&B(s,n),h[1]&32&&i!==(i=l[138].url)&&u(t,"href",i)},d(v){v&&$(e),f=!1,d()}}}function ci(l){let e,t,n,s=_e(l[36].servers.filter(mi)),i=[];for(let o=0;o<s.length;o+=1)i[o]=fi($o(l,s,o));return{c(){e=p("div"),t=p("span"),t.textContent="Failed Servers:",n=b();for(let o=0;o<i.length;o+=1)i[o].c();u(t,"class","result-label svelte-78e7a1"),qe(t,"color","#fef3c7"),u(e,"class","failed-servers-section svelte-78e7a1")},m(o,c){k(o,e,c),a(e,t),a(e,n);for(let r=0;r<i.length;r+=1)i[r]&&i[r].m(e,null)},p(o,c){if(c[0]&1|c[1]&32){s=_e(o[36].servers.filter(mi));let r;for(r=0;r<s.length;r+=1){const f=$o(o,s,r);i[r]?i[r].p(f,c):(i[r]=fi(f),i[r].c(),i[r].m(e,null))}for(;r<i.length;r+=1)i[r].d(1);i.length=s.length}},d(o){o&&$(e),Me(i,o)}}}function fi(l){let e,t,n,s=l[138].ip+"",i,o,c=(l[138].error||"Unknown error")+"",r,f,d,_,v,h;function m(){return l[117](l[138])}return{c(){e=p("div"),t=p("span"),n=T("❌ "),i=T(s),o=T(": "),r=T(c),f=b(),d=p("button"),d.textContent="📋 Logs",_=b(),qe(t,"color","#fef3c7"),u(d,"class","log-btn svelte-78e7a1"),u(e,"class","server-link-row svelte-78e7a1")},m(g,C){k(g,e,C),a(e,t),a(t,n),a(t,i),a(t,o),a(t,r),a(e,f),a(e,d),a(e,_),v||(h=te(d,"click",m),v=!0)},p(g,C){l=g,C[1]&32&&s!==(s=l[138].ip+"")&&B(i,s),C[1]&32&&c!==(c=(l[138].error||"Unknown error")+"")&&B(r,c)},d(g){g&&$(e),v=!1,h()}}}function Rf(l){let e;function t(i,o){return i[31]||i[33].length>0?Df:Tf}let n=t(l),s=n(l);return{c(){s.c(),e=Le()},m(i,o){s.m(i,o),k(i,e,o)},p(i,o){n===(n=t(i))&&s?s.p(i,o):(s.d(1),s=n(i),s&&(s.c(),s.m(e.parentNode,e)))},d(i){i&&$(e),s.d(i)}}}function Of(l){let e,t,n,s,i,o;return n=new Re({props:{title:"🚀 Deploy Application",$$slots:{default:[Sf]},$$scope:{ctx:l}}}),i=new Re({props:{title:"📋 Deployment Progress",$$slots:{default:[Rf]},$$scope:{ctx:l}}}),{c(){e=p("div"),t=p("div"),oe(n.$$.fragment),s=b(),oe(i.$$.fragment),u(t,"class","deploy-grid svelte-78e7a1"),u(e,"class","deploy-page svelte-78e7a1")},m(c,r){k(c,e,r),a(e,t),ne(n,t,null),a(t,s),ne(i,t,null),o=!0},p(c,r){const f={};r[0]&2147483647|r[1]&131033|r[5]&8192&&(f.$$scope={dirty:r,ctx:c}),n.$set(f);const d={};r[0]&5|r[1]&39|r[5]&8192&&(d.$$scope={dirty:r,ctx:c}),i.$set(d)},i(c){o||(E(n.$$.fragment,c),E(i.$$.fragment,c),o=!0)},o(c){N(n.$$.fragment,c),N(i.$$.fragment,c),o=!1},d(c){c&&$(e),se(n),se(i)}}}function Af(l){return new Promise((e,t)=>{const n=new FileReader;n.onload=()=>e(new Uint8Array(n.result)),n.onerror=t,n.readAsArrayBuffer(l)})}function qf(l){return new Promise((e,t)=>{const n=new FileReader;n.onload=()=>e(n.result),n.onerror=t,n.readAsText(l)})}function ui(l){const e=/(https?:\/\/[^\s]+)/g;return l.replace(e,'<a href="$1" target="_blank" class="log-link">$1</a>')}const di=l=>!l.success,Ff=l=>l.isMain,pi=l=>l.isMain,_i=l=>l.isMain,vi=l=>l.success,mi=l=>!l.success;function zf(l,e,t){let n,s,i,o;We(l,Zn,V=>t(47,i=V)),We(l,bl,V=>t(65,o=V));let c="",r="",f="prod",d="",_="code",v=8e3,h="",m="",g="main",C="",y=[],w="",S="",M=null,P="",D="",j="",L=[],R=null,A=null,F=!0,q="",H="",W=!1,I="",J="",z="",G="lon1",O="s-1vcpu-2gb",U=[],Y=[],Z=!1,ie=0,le=[],ee=new Set,ue=0,x=null,he=!0,re=!0,X={postgres:!1,redis:!1,mysql:!1,mongo:!1},pe=!0,de="digitalpixo.com",be="",fe="",ye=!1,Ae=["node_modules/","__pycache__/","*.pyc",".git/",".venv/","venv/",".env",".DS_Store",".idea/",".vscode/","dist/","build/",".pytest_cache/",".mypy_cache/"],dt=Ae.join(`
`);const et=[...Ae],At=["dev","test","staging","uat","prod"];ul(()=>{qt(),Se(),Ne()});async function qt(){try{const V=await Be("GET","/infra/servers");bl.set(V.servers||V||[])}catch(V){console.error("Failed to load servers:",V)}}async function Se(){try{const V=await Be("GET","/infra/snapshots");Zn.set(V.snapshots||V||[]),i.length>0&&!z&&t(27,z=i[0].id)}catch(V){console.error("Failed to load snapshots:",V)}}async function Ne(){try{try{const V=await Be("GET","/infra/regions");t(29,U=V.regions||V||[])}catch{t(29,U=[{slug:"nyc1",name:"New York 1"},{slug:"nyc3",name:"New York 3"},{slug:"sfo3",name:"San Francisco 3"},{slug:"ams3",name:"Amsterdam 3"},{slug:"sgp1",name:"Singapore 1"},{slug:"lon1",name:"London 1"},{slug:"fra1",name:"Frankfurt 1"}])}try{const V=await Be("GET","/infra/sizes");t(30,Y=V.sizes||V||[])}catch{t(30,Y=[{slug:"s-1vcpu-512mb-10gb",description:"512MB / 1 vCPU"},{slug:"s-1vcpu-1gb",description:"1GB / 1 vCPU"},{slug:"s-1vcpu-2gb",description:"2GB / 1 vCPU"},{slug:"s-2vcpu-2gb",description:"2GB / 2 vCPU"},{slug:"s-2vcpu-4gb",description:"4GB / 2 vCPU"},{slug:"s-4vcpu-8gb",description:"8GB / 4 vCPU"}])}}catch(V){console.error("Failed to load regions/sizes:",V)}}async function Dt(){var V;if(!c){ve.warning("Enter app name first");return}t(42,fe="Loading...");try{const me=await Be("GET",`/infra/deploy-configs/${r||"default"}/${c}/${f}`);Ke(me),t(42,fe="✓ Loaded"),ve.success("Config loaded")}catch(ce){(V=ce.message)!=null&&V.includes("404")?(t(42,fe="No saved config"),ve.info("No saved config found")):(t(42,fe="Load failed"),ve.error("Failed to load config"))}}async function pl(){try{const ce=await Be("GET",`/infra/deploy-configs/${r||"default"}/${c}/${f}`);Ke(ce),t(42,fe="✓ Auto-loaded")}catch{t(42,fe="")}}function Ke(V){var ce,me;V.source_type&&t(6,_={folder:"code",git:"git",image:"image"}[V.source_type]||V.source_type),V.git_url&&t(9,m=V.git_url),V.git_branch&&t(10,g=V.git_branch),V.port&&t(7,v=V.port),V.env_vars&&Object.keys(V.env_vars).length>0&&t(8,h=Object.entries(V.env_vars).map(([je,De])=>`${je}=${De}`).join(`
`)),((ce=V.exclude_patterns)==null?void 0:ce.length)>0&&(Ae=V.exclude_patterns,t(44,dt=Ae.join(`
`))),((me=V.server_ips)==null?void 0:me.length)>0&&t(34,ee=new Set(V.server_ips))}async function _l(){if(!c){ve.warning("Enter app name first");return}t(42,fe="Saving...");const V={};for(const je of h.split(`
`)){const De=je.trim();if(De&&De.includes("=")){const[Oe,...Ee]=De.split("=");V[Oe.trim()]=Ee.join("=").trim()}}const ce=dt.split(`
`).map(je=>je.trim()).filter(Boolean),me={project_name:r||"default",service_name:c,env:f,source_type:_==="code"?"folder":_,git_url:m||null,git_branch:g||"main",exclude_patterns:ce.length>0?ce:et,port:v,env_vars:V,server_ips:Array.from(ee)};try{await Be("POST","/infra/deploy-configs",me),t(42,fe="✓ Saved"),ve.success("Config saved")}catch{t(42,fe="Save failed"),ve.error("Failed to save config")}}function Ft(){t(43,ye=!ye),ye||(Ae=dt.split(`
`).map(V=>V.trim()).filter(Boolean))}function ln(){Ae=[...et],t(44,dt=et.join(`
`)),ve.info("Reset to default patterns")}function Pt(V){for(const ce of Ae)if(ce.endsWith("/")){const me=ce.slice(0,-1);if(V.startsWith(me+"/")||V.includes("/"+me+"/"))return!0}else if(ce.startsWith("*")){const me=ce.slice(1);if(V.endsWith(me))return!0}else if(V===ce||V.endsWith("/"+ce))return!0;return!1}function Xt(V){ee.has(V)?ee.delete(V):ee.add(V),t(34,ee)}function $l(V){V?n.forEach(ce=>{var je,De,Oe;const me=ce.ip||((Oe=(De=(je=ce.networks)==null?void 0:je.v4)==null?void 0:De[0])==null?void 0:Oe.ip_address);me&&ee.add(me)}):ee.clear(),t(34,ee)}function wt(){A=async(V,ce)=>{await kl(V,ce,L.length===0)},R==null||R.click()}async function nn(V){const ce=Array.from(V.target.files||[]);if(!ce.length||!A)return;console.log(`[Deploy] Browser returned ${ce.length} files`),ce.length<50?console.log("[Deploy] Files:",ce.map(De=>De.webkitRelativePath)):console.log("[Deploy] First 20 files:",ce.slice(0,20).map(De=>De.webkitRelativePath));const je=ce[0].webkitRelativePath.split("/")[0];await A(ce,je),A=null,V.target.value=""}async function kl(V,ce,me){if(L.some(Ee=>Ee.name===ce)){ve.error(`Folder "${ce}" is already added`);return}me&&L.some(Ee=>Ee.isMain)&&t(19,L=L.map(Ee=>({...Ee,isMain:!1})));const je=[];let De=null,Oe=0;for(const Ee of V){const it=Ee.webkitRelativePath.replace(`${ce}/`,"");if(Pt(it)){Oe++;continue}const Ct=await Af(Ee);je.push({path:it,content:Ct}),me&&it==="Dockerfile"&&(De=await qf(Ee))}console.log(`[Deploy] Processed ${ce}/: ${V.length} total, ${Oe} skipped, ${je.length} included`),t(19,L=[...L,{name:ce,fileContents:je,isMain:me,fileCount:je.length}]),vl(),L.some(Ee=>Ee.isMain)&&zt(De),F&&r&&c&&Bl(),ve.success(`Added ${ce}/ (${je.length} files)`)}function Fl(V){t(19,L=L.filter((ce,me)=>me!==V)),vl(),L.length>0&&!L.some(ce=>ce.isMain)&&t(19,L=L.map((ce,me)=>({...ce,isMain:me===0})))}function ze(V){t(19,L=L.map((ce,me)=>({...ce,isMain:me===V}))),zt()}function vl(){const V=L.some(ce=>ce.isMain);L.length&&V&&sn()}async function sn(){if(!L.length)return;const{default:V}=await go(async()=>{const{default:me}=await import("https://cdn.jsdelivr.net/npm/jszip@3.10.1/+esm");return{default:me}},[]),ce=new V;for(const me of L)for(const{path:je,content:De}of me.fileContents)ce.file(`${me.name}/${je}`,De);L.length>1&&q&&ce.file("Dockerfile",q),await ce.generateAsync({type:"blob"})}function zt(V=null){if(t(24,W=!0),V)t(22,q=V),t(23,H="from folder");else if(L.length>1)t(22,q=Bt()),t(23,H="multi-folder");else if(L.length===1){const ce=L[0];t(22,q=on(ce.fileContents.map(me=>me.path))),t(23,H="generated")}zl()}function Bt(){const V=L.find(De=>De.isMain);if(!V)return"";const ce=L.filter(De=>!De.isMain),me=V.fileContents.some(De=>De.path==="requirements.txt");V.fileContents.some(De=>De.path==="package.json");let je=`FROM python:3.11-slim

WORKDIR /app

`;for(const De of ce)je+=`# Copy ${De.name}
COPY ${De.name}/ ./${De.name}/

`;return je+=`# Copy main service
COPY ${V.name}/ ./${V.name}/

`,me&&(je+=`# Install dependencies
RUN pip install --no-cache-dir -r ${V.name}/requirements.txt

`),je+=`EXPOSE ${v}

`,je+=`CMD ["uvicorn", "${V.name}.main:app", "--host", "0.0.0.0", "--port", "${v}"]
`,je}function on(V){const ce=V.includes("requirements.txt"),me=V.includes("package.json"),je=V.includes("pyproject.toml");return ce||je?`FROM python:3.11-slim

WORKDIR /app

COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

COPY . .

EXPOSE ${v}

CMD ["uvicorn", "main:app", "--host", "0.0.0.0", "--port", "${v}"]
`:me?`FROM node:20-alpine

WORKDIR /app

COPY package*.json ./
RUN npm ci --only=production

COPY . .

EXPOSE ${v}

CMD ["node", "index.js"]
`:`FROM python:3.11-slim

WORKDIR /app

COPY . .

EXPOSE ${v}

CMD ["python", "main.py"]
`}function zl(){const V=q.match(/^FROM\s+(\S+)/m),ce=q.match(/^CMD\s+(.+)$/m);t(25,I=V?V[1]:""),t(26,J=ce?ce[1]:"")}function wl(V){V==="from"&&I?t(22,q=q.replace(/^FROM\s+\S+/m,`FROM ${I}`)):V==="cmd"&&J&&(q.includes("CMD ")?t(22,q=q.replace(/^CMD\s+.+$/m,`CMD ${J}`)):t(22,q+=`
CMD ${J}
`)),t(23,H="edited")}function Bl(){if(!r||!c)return;const V=`build_folders_${r}_${c}`,ce=L.map(me=>({name:me.name,isMain:me.isMain}));localStorage.setItem(V,JSON.stringify(ce))}function yl(V){if(!w.trim()){ve.error("Please enter a folder path");return}const ce=w.trim();if(V&&y.some(me=>me.isMain)&&t(12,y=y.map(me=>({...me,isMain:!1}))),y.some(me=>me.path===ce)){ve.error("This folder is already added");return}t(12,y=[...y,{path:ce,isMain:V}]),t(13,w="")}function Cl(V){t(12,y=y.filter((ce,me)=>me!==V))}function Ul(V){var me;const ce=(me=V.target.files)==null?void 0:me[0];if(ce){if(!ce.name.endsWith(".tar")&&!ce.name.endsWith(".tar.gz")){ve.error("Only .tar or .tar.gz image files are supported");return}t(15,M=ce),ve.success(`Selected: ${ce.name}`)}}function Et(V,ce="info"){t(33,le=[...le,{message:V,type:ce,time:new Date}])}async function Zt(V){if(V.preventDefault(),!c){ve.error("App name is required");return}if(_==="code"&&!L.some(ce=>ce.isMain)){ve.error("Add a main folder with your code");return}if(_==="git"&&!m){ve.error("Git URL is required");return}if(_==="image"&&!S){ve.error("Docker image URL is required");return}if(_==="image_file"&&!M){ve.error("Upload a Docker image file (.tar)");return}if(_==="image_file"&&!P){ve.error("Image name is required for local images");return}if(ee.size===0&&ue===0){ve.error("Select at least one server or add new servers");return}if(ue>0&&!z){ve.error("Select a snapshot for new servers");return}if(!Zl()){ve.error("Configure your DO Token in Settings first");return}if(pe&&!Qn()){ve.error("Configure your Cloudflare Token in Settings first (required for domain setup)");return}t(31,Z=!0),t(32,ie=0),t(33,le=[]),t(36,x=null);try{Et(`Starting deployment of ${c}...`),t(32,ie=10);let ce=null;if(_==="code"){Et("Creating code archive...");const{default:Ee}=await go(async()=>{const{default:Ct}=await import("https://cdn.jsdelivr.net/npm/jszip@3.10.1/+esm");return{default:Ct}},[]),it=new Ee;for(const Ct of L)for(const{path:Wt,content:Nt}of Ct.fileContents)it.file(`${Ct.name}/${Wt}`,Nt);L.length>1&&q&&it.file("Dockerfile",q),ce=await it.generateAsync({type:"blob"})}Et("Sending deployment request... server provisioning may take 30-60s"),t(32,ie=20);const me=Zl(),je=Qn(),De=new URLSearchParams({do_token:me,snapshot_id:z||"",new_server_count:String(ue),region:G,size:O,project:r||"",environment:f,setup_domain:String(pe),base_domain:de,domain_aliases:JSON.stringify(be.split(",").map(Ee=>Ee.trim()).filter(Boolean))});pe&&je&&De.set("cf_token",je);const Oe=new FormData;Oe.append("name",c),Oe.append("port",String(v)),Oe.append("source_type",_),Oe.append("env_vars",h),Oe.append("tags",d),Oe.append("server_ips",JSON.stringify(Array.from(ee))),Oe.append("depends_on",JSON.stringify(Object.entries(X).filter(([Ee,it])=>it).map(([Ee])=>Ee))),Oe.append("exclude_patterns",JSON.stringify(Ae)),q&&Oe.append("dockerfile",q),m&&Oe.append("git_url",m),g&&Oe.append("git_branch",g),C&&Oe.append("git_token",C),y.length&&Oe.append("git_folders",JSON.stringify(y)),S&&Oe.append("image",S),ce&&Oe.append("code_tar",ce,"code.zip"),_==="image_file"&&(M&&Oe.append("image_tar",M),P&&Oe.append("image",P),D&&Oe.append("container_port",String(D)),j&&Oe.append("host_port",String(j))),await Fa(`/infra/deploy/multipart?${De}`,Oe,Ee=>{if(Ee.type==="log")Et(Ee.message);else if(Ee.type==="progress")t(32,ie=Math.min(20+(Ee.percent||0)*.8,95));else if(Ee.type==="done"){if(t(36,x=Ee),t(32,ie=100),!Ee.success){const it=Ee.failed_count||0,Ct=Ee.error||`Deployment failed: ${it} server(s) failed`;throw new Error(Ct)}}else if(Ee.type==="error")throw new Error(Ee.message||"Deployment failed")}),Et("✅ Deployment complete!","success"),ve.success("Deployment successful!"),await qt()}catch(ce){let me="Unknown error";if(typeof ce=="string")me=ce;else if(ce!=null&&ce.message)me=ce.message;else if(ce!=null&&ce.detail)me=ce.detail;else if(ce!=null&&ce.error)me=ce.error;else try{me=JSON.stringify(ce)}catch{me=String(ce)}Et(`❌ Error: ${me}`,"error"),ve.error(me)}finally{t(31,Z=!1)}}const Ut=[[]];function rn(){c=this.value,t(0,c)}function Il(){r=this.value,t(1,r)}function an(){f=Ge(this),t(2,f),t(48,At)}function Hl(){dt=this.value,t(44,dt)}function cn(){d=this.value,t(5,d)}function Gl(){_=this.__value,t(6,_)}function fn(){_=this.__value,t(6,_)}function xt(){_=this.__value,t(6,_)}function It(){_=this.__value,t(6,_)}function un(V){kt[V?"unshift":"push"](()=>{R=V,t(20,R)})}const Wl=V=>ze(V),dn=V=>Fl(V);function Jl(){F=this.checked,t(21,F)}function pn(){q=this.value,t(22,q)}function _n(){I=Ge(this),t(25,I)}const gt=()=>wl("from");function el(){J=this.value,t(26,J)}const tl=()=>wl("cmd");function Yl(){m=this.value,t(9,m)}function vn(){g=this.value,t(10,g)}const Ht=V=>Cl(V);function mn(){w=this.value,t(13,w)}const ll=()=>yl(!0),Mt=()=>yl(!1);function hn(){C=this.value,t(11,C)}function jt(){S=this.value,t(14,S)}function gn(){P=this.value,t(16,P)}function ml(){D=Rt(this.value),t(17,D)}function ot(){j=Rt(this.value),t(18,j)}function pt(){v=Rt(this.value),t(7,v)}function bn(){h=this.value,t(8,h)}function Sl(){he=this.checked,t(37,he)}function Lt(){X.postgres=this.checked,t(39,X)}function nl(){X.redis=this.checked,t(39,X)}function Gt(){X.mysql=this.checked,t(39,X)}function $n(){X.mongo=this.checked,t(39,X)}function kn(){re=this.checked,t(38,re)}function _t(){pe=this.checked,t(40,pe)}function sl(){de=this.value,t(4,de)}function wn(){be=this.value,t(41,be)}const ol=()=>$l(!0),hl=()=>$l(!1),yn=V=>Xt(V);function bt(){z=Ge(this),t(27,z)}function Cn(){G=Ge(this),t(3,G),t(29,U)}function il(){O=Ge(this),t(28,O),t(30,Y)}const gl=()=>t(35,ue=Math.max(0,ue-1));function Sn(){ue=Rt(this.value),t(35,ue)}const $t=()=>t(35,ue=Math.min(10,ue+1)),Tn=V=>window.open(`/api/v1/infra/logs/${V.ip}/${V.container_name||x.container_name||c}`,"_blank"),yt=V=>window.open(`/api/v1/infra/logs/${V.ip}/${V.container_name||x.container_name||c}`,"_blank"),Vl=V=>window.open(`/api/v1/infra/logs/${V.ip}/${V.container_name||x.container_name||c}`,"_blank");return l.$$.update=()=>{l.$$.dirty[0]&8|l.$$.dirty[2]&8&&t(45,n=o.filter(V=>!G||V.region===G)),l.$$.dirty[0]&23&&t(46,s=c&&r&&f?`${c}-${r}-${f}.${de}`:""),l.$$.dirty[0]&3&&c&&r&&pl()},[c,r,f,G,de,d,_,v,h,m,g,C,y,w,S,M,P,D,j,L,R,F,q,H,W,I,J,z,O,U,Y,Z,ie,le,ee,ue,x,he,re,X,pe,be,fe,ye,dt,n,s,i,At,Dt,_l,Ft,ln,Xt,$l,wt,nn,Fl,ze,wl,yl,Cl,Ul,Zt,Et,o,rn,Il,an,Hl,cn,Gl,Ut,fn,xt,It,un,Wl,dn,Jl,pn,_n,gt,el,tl,Yl,vn,Ht,mn,ll,Mt,hn,jt,gn,ml,ot,pt,bn,Sl,Lt,nl,Gt,$n,kn,_t,sl,wn,ol,hl,yn,bt,Cn,il,gl,Sn,$t,Tn,yt,Vl]}class Bf extends Ve{constructor(e){super(),Ye(this,e,zf,Of,Je,{},null,[-1,-1,-1,-1,-1,-1])}}function hi(l,e,t){const n=l.slice();return n[31]=e[t],n}function gi(l,e,t){const n=l.slice();return n[34]=e[t][0],n[35]=e[t][1],n}function Uf(l){const e=l.slice(),t=e[8].config_snapshot;return e[30]=t,e}function bi(l,e,t){const n=l.slice();return n[38]=e[t],n}function $i(l,e,t){const n=l.slice();return n[41]=e[t],n}function ki(l,e,t){const n=l.slice();n[44]=e[t];const s=xl(n[44]);return n[45]=s,n}function wi(l){let e,t,n=Vi(l[10])+"",s;return{c(){e=p("span"),t=T("Updated "),s=T(n),u(e,"class","last-updated svelte-dlnmf")},m(i,o){k(i,e,o),a(e,t),a(e,s)},p(i,o){o[0]&1024&&n!==(n=Vi(i[10])+"")&&B(s,n)},d(i){i&&$(e)}}}function If(l){let e;return{c(){e=T("↻ Refresh")},m(t,n){k(t,e,n)},d(t){t&&$(e)}}}function Hf(l){let e,t,n=_e(l[9]),s=[];for(let o=0;o<n.length;o+=1)s[o]=Si(ki(l,n,o));const i=o=>N(s[o],1,1,()=>{s[o]=null});return{c(){for(let o=0;o<s.length;o+=1)s[o].c();e=Le()},m(o,c){for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(o,c);k(o,e,c),t=!0},p(o,c){if(c[0]&10752){n=_e(o[9]);let r;for(r=0;r<n.length;r+=1){const f=ki(o,n,r);s[r]?(s[r].p(f,c),E(s[r],1)):(s[r]=Si(f),s[r].c(),E(s[r],1),s[r].m(e.parentNode,e))}for(ke(),r=n.length;r<s.length;r+=1)i(r);we()}},i(o){if(!t){for(let c=0;c<n.length;c+=1)E(s[c]);t=!0}},o(o){s=s.filter(Boolean);for(let c=0;c<s.length;c+=1)N(s[c]);t=!1},d(o){o&&$(e),Me(s,o)}}}function Gf(l){let e;return{c(){e=p("tr"),e.innerHTML='<td colspan="11" class="empty-cell svelte-dlnmf">No deployments found</td>',u(e,"class","svelte-dlnmf")},m(t,n){k(t,e,n)},p:ae,i:ae,o:ae,d(t){t&&$(e)}}}function Wf(l){let e;return{c(){e=p("tr"),e.innerHTML='<td colspan="11" class="loading-cell svelte-dlnmf">Loading deployment history...</td>',u(e,"class","svelte-dlnmf")},m(t,n){k(t,e,n)},p:ae,i:ae,o:ae,d(t){t&&$(e)}}}function Jf(l){let e=(l[44].environment||"-")+"",t;return{c(){t=T(e)},m(n,s){k(n,t,s)},p(n,s){s[0]&512&&e!==(e=(n[44].environment||"-")+"")&&B(t,e)},d(n){n&&$(t)}}}function Yf(l){let e;return{c(){e=p("span"),e.textContent="-",u(e,"class","version-none svelte-dlnmf")},m(t,n){k(t,e,n)},p:ae,d(t){t&&$(e)}}}function Vf(l){let e,t,n=l[44].version+"",s;return{c(){e=p("span"),t=T("v"),s=T(n),u(e,"class","version-badge svelte-dlnmf")},m(i,o){k(i,e,o),a(e,t),a(e,s)},p(i,o){o[0]&512&&n!==(n=i[44].version+"")&&B(s,n)},d(i){i&&$(e)}}}function Kf(l){let e=l[44].is_rollback?"rollback":"deploy",t;return{c(){t=T(e)},m(n,s){k(n,t,s)},p(n,s){s[0]&512&&e!==(e=n[44].is_rollback?"rollback":"deploy")&&B(t,e)},d(n){n&&$(t)}}}function Qf(l){let e=l[45]+"",t;return{c(){t=T(e)},m(n,s){k(n,t,s)},p(n,s){s[0]&512&&e!==(e=n[45]+"")&&B(t,e)},d(n){n&&$(t)}}}function yi(l){let e,t,n;function s(){return l[19](l[44])}return{c(){e=p("button"),e.textContent="⚙️",u(e,"class","icon-btn svelte-dlnmf"),u(e,"title","View config")},m(i,o){k(i,e,o),t||(n=te(e,"click",s),t=!0)},p(i,o){l=i},d(i){i&&$(e),t=!1,n()}}}function Ci(l){let e,t,n;function s(){return l[20](l[44])}return{c(){e=p("button"),e.innerHTML=`<span class="rollback-icon svelte-dlnmf">⏪</span>
                      Rollback`,u(e,"class","rollback-btn svelte-dlnmf")},m(i,o){k(i,e,o),t||(n=te(e,"click",s),t=!0)},p(i,o){l=i},d(i){i&&$(e),t=!1,n()}}}function Si(l){let e,t,n,s=(l[44].project||"-")+"",i,o,c,r,f=(l[44].service||l[44].name)+"",d,_,v,h,m,g,C,y,w=fl(l[44].deployed_at||l[44].created_at)+"",S,M,P,D=(l[44].deployed_by||l[44].user||"-")+"",j,L,R,A,F,q,H,W,I,J=(l[44].comment||"-")+"",z,G,O,U,Y,Z,ie;h=new Ie({props:{variant:l[44].environment==="prod"?"purple":l[44].environment==="staging"?"warning":"info",$$slots:{default:[Jf]},$$scope:{ctx:l}}});function le(re,X){return re[44].version?Vf:Yf}let ee=le(l),ue=ee(l);A=new Ie({props:{variant:l[44].is_rollback?"warning":"info",$$slots:{default:[Kf]},$$scope:{ctx:l}}}),H=new Ie({props:{variant:Rn(l[45]),$$slots:{default:[Qf]},$$scope:{ctx:l}}});let x=l[44].config_snapshot&&yi(l),he=l[44].is_current_active&&Ci(l);return{c(){e=p("tr"),t=p("td"),n=p("span"),i=T(s),o=b(),c=p("td"),r=p("span"),d=T(f),_=b(),v=p("td"),oe(h.$$.fragment),m=b(),g=p("td"),ue.c(),C=b(),y=p("td"),S=T(w),M=b(),P=p("td"),j=T(D),L=b(),R=p("td"),oe(A.$$.fragment),F=b(),q=p("td"),oe(H.$$.fragment),W=b(),I=p("td"),z=T(J),G=b(),O=p("td"),x&&x.c(),U=b(),Y=p("td"),he&&he.c(),Z=b(),u(n,"class","project-name svelte-dlnmf"),u(t,"class","svelte-dlnmf"),u(r,"class","service-name svelte-dlnmf"),u(c,"class","svelte-dlnmf"),u(v,"class","svelte-dlnmf"),u(g,"class","version-cell svelte-dlnmf"),u(y,"class","date-cell svelte-dlnmf"),u(P,"class","svelte-dlnmf"),u(R,"class","svelte-dlnmf"),u(q,"class","svelte-dlnmf"),u(I,"class","comment-cell svelte-dlnmf"),u(O,"class","config-cell svelte-dlnmf"),u(Y,"class","rollback-cell svelte-dlnmf"),u(e,"class","svelte-dlnmf")},m(re,X){k(re,e,X),a(e,t),a(t,n),a(n,i),a(e,o),a(e,c),a(c,r),a(r,d),a(e,_),a(e,v),ne(h,v,null),a(e,m),a(e,g),ue.m(g,null),a(e,C),a(e,y),a(y,S),a(e,M),a(e,P),a(P,j),a(e,L),a(e,R),ne(A,R,null),a(e,F),a(e,q),ne(H,q,null),a(e,W),a(e,I),a(I,z),a(e,G),a(e,O),x&&x.m(O,null),a(e,U),a(e,Y),he&&he.m(Y,null),a(e,Z),ie=!0},p(re,X){(!ie||X[0]&512)&&s!==(s=(re[44].project||"-")+"")&&B(i,s),(!ie||X[0]&512)&&f!==(f=(re[44].service||re[44].name)+"")&&B(d,f);const pe={};X[0]&512&&(pe.variant=re[44].environment==="prod"?"purple":re[44].environment==="staging"?"warning":"info"),X[0]&512|X[1]&131072&&(pe.$$scope={dirty:X,ctx:re}),h.$set(pe),ee===(ee=le(re))&&ue?ue.p(re,X):(ue.d(1),ue=ee(re),ue&&(ue.c(),ue.m(g,null))),(!ie||X[0]&512)&&w!==(w=fl(re[44].deployed_at||re[44].created_at)+"")&&B(S,w),(!ie||X[0]&512)&&D!==(D=(re[44].deployed_by||re[44].user||"-")+"")&&B(j,D);const de={};X[0]&512&&(de.variant=re[44].is_rollback?"warning":"info"),X[0]&512|X[1]&131072&&(de.$$scope={dirty:X,ctx:re}),A.$set(de);const be={};X[0]&512&&(be.variant=Rn(re[45])),X[0]&512|X[1]&131072&&(be.$$scope={dirty:X,ctx:re}),H.$set(be),(!ie||X[0]&512)&&J!==(J=(re[44].comment||"-")+"")&&B(z,J),re[44].config_snapshot?x?x.p(re,X):(x=yi(re),x.c(),x.m(O,null)):x&&(x.d(1),x=null),re[44].is_current_active?he?he.p(re,X):(he=Ci(re),he.c(),he.m(Y,null)):he&&(he.d(1),he=null)},i(re){ie||(E(h.$$.fragment,re),E(A.$$.fragment,re),E(H.$$.fragment,re),ie=!0)},o(re){N(h.$$.fragment,re),N(A.$$.fragment,re),N(H.$$.fragment,re),ie=!1},d(re){re&&$(e),se(h),ue.d(),se(A),se(H),x&&x.d(),he&&he.d()}}}function Xf(l){let e,t,n,s,i,o,c,r;const f=[Wf,Gf,Hf],d=[];function _(v,h){return v[0]&&v[9].length===0?0:v[9].length===0?1:2}return o=_(l),c=d[o]=f[o](l),{c(){e=p("div"),t=p("table"),n=p("thead"),n.innerHTML='<tr class="svelte-dlnmf"><th class="svelte-dlnmf">Project</th> <th class="svelte-dlnmf">Service</th> <th class="svelte-dlnmf">Environment</th> <th class="version-col svelte-dlnmf">v</th> <th class="svelte-dlnmf">Deployed</th> <th class="svelte-dlnmf">By</th> <th class="svelte-dlnmf">Type</th> <th class="svelte-dlnmf">Status</th> <th class="svelte-dlnmf">Comment</th> <th class="config-col svelte-dlnmf"></th> <th class="rollback-col svelte-dlnmf"></th></tr>',s=b(),i=p("tbody"),c.c(),u(t,"class","table svelte-dlnmf"),u(e,"class","table-container svelte-dlnmf")},m(v,h){k(v,e,h),a(e,t),a(t,n),a(t,s),a(t,i),d[o].m(i,null),r=!0},p(v,h){let m=o;o=_(v),o===m?d[o].p(v,h):(ke(),N(d[m],1,1,()=>{d[m]=null}),we(),c=d[o],c?c.p(v,h):(c=d[o]=f[o](v),c.c()),E(c,1),c.m(i,null))},i(v){r||(E(c),r=!0)},o(v){N(c),r=!1},d(v){v&&$(e),d[o].d()}}}function Ti(l){let e,t,n,s=(l[2].service||l[2].name)+"",i,o,c,r=l[2].project+"",f,d,_=l[2].environment+"",v,h,m,g,C,y,w,S=fl(l[2].deployed_at||l[2].created_at)+"",M,P,D,j,L=(l[2].deployed_by||l[2].user||"unknown")+"",R,A,F,q,H,W,I,J,z,G,O=l[2].comment&&Di(l);const U=[xf,Zf],Y=[];function Z(le,ee){return le[3].length===0?0:1}I=Z(l),J=Y[I]=U[I](l);let ie=l[6].length>0&&Ei(l);return{c(){e=p("div"),t=p("div"),n=p("div"),i=T(s),o=b(),c=p("div"),f=T(r),d=T(" / "),v=T(_),h=b(),m=p("div"),g=p("label"),g.textContent="📍 Current Deployment",C=b(),y=p("div"),w=p("div"),M=T(S),P=b(),D=p("div"),j=T("by "),R=T(L),A=b(),O&&O.c(),F=b(),q=p("div"),H=p("label"),H.textContent="🎯 Rollback to",W=b(),J.c(),z=b(),ie&&ie.c(),u(n,"class","service-name svelte-dlnmf"),u(c,"class","service-coords svelte-dlnmf"),u(t,"class","service-info svelte-dlnmf"),u(g,"class","svelte-dlnmf"),u(w,"class","deploy-date svelte-dlnmf"),u(D,"class","deploy-by svelte-dlnmf"),u(y,"class","deployment-card current svelte-dlnmf"),u(m,"class","section svelte-dlnmf"),u(H,"class","svelte-dlnmf"),u(q,"class","section svelte-dlnmf"),u(e,"class","rollback-content svelte-dlnmf")},m(le,ee){k(le,e,ee),a(e,t),a(t,n),a(n,i),a(t,o),a(t,c),a(c,f),a(c,d),a(c,v),a(e,h),a(e,m),a(m,g),a(m,C),a(m,y),a(y,w),a(w,M),a(y,P),a(y,D),a(D,j),a(D,R),a(y,A),O&&O.m(y,null),a(e,F),a(e,q),a(q,H),a(q,W),Y[I].m(q,null),a(e,z),ie&&ie.m(e,null),G=!0},p(le,ee){(!G||ee[0]&4)&&s!==(s=(le[2].service||le[2].name)+"")&&B(i,s),(!G||ee[0]&4)&&r!==(r=le[2].project+"")&&B(f,r),(!G||ee[0]&4)&&_!==(_=le[2].environment+"")&&B(v,_),(!G||ee[0]&4)&&S!==(S=fl(le[2].deployed_at||le[2].created_at)+"")&&B(M,S),(!G||ee[0]&4)&&L!==(L=(le[2].deployed_by||le[2].user||"unknown")+"")&&B(R,L),le[2].comment?O?O.p(le,ee):(O=Di(le),O.c(),O.m(y,null)):O&&(O.d(1),O=null);let ue=I;I=Z(le),I===ue?Y[I].p(le,ee):(ke(),N(Y[ue],1,1,()=>{Y[ue]=null}),we(),J=Y[I],J?J.p(le,ee):(J=Y[I]=U[I](le),J.c()),E(J,1),J.m(q,null)),le[6].length>0?ie?ie.p(le,ee):(ie=Ei(le),ie.c(),ie.m(e,null)):ie&&(ie.d(1),ie=null)},i(le){G||(E(J),G=!0)},o(le){N(J),G=!1},d(le){le&&$(e),O&&O.d(),Y[I].d(),ie&&ie.d()}}}function Di(l){let e,t=l[2].comment+"",n;return{c(){e=p("div"),n=T(t),u(e,"class","deploy-comment svelte-dlnmf")},m(s,i){k(s,e,i),a(e,n)},p(s,i){i[0]&4&&t!==(t=s[2].comment+"")&&B(n,t)},d(s){s&&$(e)}}}function Zf(l){let e,t,n=_e(l[3]),s=[];for(let o=0;o<n.length;o+=1)s[o]=Pi($i(l,n,o));const i=o=>N(s[o],1,1,()=>{s[o]=null});return{c(){e=p("div");for(let o=0;o<s.length;o+=1)s[o].c();u(e,"class","deployment-list svelte-dlnmf")},m(o,c){k(o,e,c);for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(e,null);t=!0},p(o,c){if(c[0]&56){n=_e(o[3]);let r;for(r=0;r<n.length;r+=1){const f=$i(o,n,r);s[r]?(s[r].p(f,c),E(s[r],1)):(s[r]=Pi(f),s[r].c(),E(s[r],1),s[r].m(e,null))}for(ke(),r=n.length;r<s.length;r+=1)i(r);we()}},i(o){if(!t){for(let c=0;c<n.length;c+=1)E(s[c]);t=!0}},o(o){s=s.filter(Boolean);for(let c=0;c<s.length;c+=1)N(s[c]);t=!1},d(o){o&&$(e),Me(s,o)}}}function xf(l){let e;return{c(){e=p("div"),e.textContent="No previous deployments found",u(e,"class","no-deployments svelte-dlnmf")},m(t,n){k(t,e,n)},p:ae,i:ae,o:ae,d(t){t&&$(e)}}}function eu(l){let e,t=l[41].id.substring(0,8)+"",n;return{c(){e=p("span"),n=T(t),u(e,"class","version-badge muted svelte-dlnmf")},m(s,i){k(s,e,i),a(e,n)},p(s,i){i[0]&8&&t!==(t=s[41].id.substring(0,8)+"")&&B(n,t)},d(s){s&&$(e)}}}function tu(l){let e,t,n=l[41].version+"",s;return{c(){e=p("span"),t=T("v"),s=T(n),u(e,"class","version-badge svelte-dlnmf")},m(i,o){k(i,e,o),a(e,t),a(e,s)},p(i,o){o[0]&8&&n!==(n=i[41].version+"")&&B(s,n)},d(i){i&&$(e)}}}function lu(l){let e=xl(l[41])+"",t;return{c(){t=T(e)},m(n,s){k(n,t,s)},p(n,s){s[0]&8&&e!==(e=xl(n[41])+"")&&B(t,e)},d(n){n&&$(t)}}}function Pi(l){let e,t,n,s=!1,i,o,c,r,f,d=fl(l[41].deployed_at||l[41].created_at)+"",_,v,h,m,g=(l[41].deployed_by||l[41].user||"unknown")+"",C,y,w,S,M,P,D,j;function L(F,q){return F[41].version?tu:eu}let R=L(l),A=R(l);return w=new Ie({props:{variant:Rn(xl(l[41])),$$slots:{default:[lu]},$$scope:{ctx:l}}}),P=Zr(l[23][0]),{c(){e=p("label"),t=p("input"),i=b(),o=p("div"),A.c(),c=b(),r=p("div"),f=p("div"),_=T(d),v=b(),h=p("div"),m=T("by "),C=T(g),y=b(),oe(w.$$.fragment),S=b(),u(t,"type","radio"),t.__value=n=l[41].id,Q(t,t.__value),t.disabled=l[5],u(t,"class","svelte-dlnmf"),u(o,"class","deploy-version svelte-dlnmf"),u(f,"class","deploy-date svelte-dlnmf"),u(h,"class","deploy-by svelte-dlnmf"),u(r,"class","deploy-info svelte-dlnmf"),u(e,"class","deployment-option svelte-dlnmf"),$e(e,"selected",l[4]===l[41].id),P.p(t)},m(F,q){k(F,e,q),a(e,t),t.checked=t.__value===l[4],a(e,i),a(e,o),A.m(o,null),a(e,c),a(e,r),a(r,f),a(f,_),a(r,v),a(r,h),a(h,m),a(h,C),a(e,y),ne(w,e,null),a(e,S),M=!0,D||(j=te(t,"change",l[22]),D=!0)},p(F,q){(!M||q[0]&8&&n!==(n=F[41].id))&&(t.__value=n,Q(t,t.__value),s=!0),(!M||q[0]&32)&&(t.disabled=F[5]),(s||q[0]&24)&&(t.checked=t.__value===F[4]),R===(R=L(F))&&A?A.p(F,q):(A.d(1),A=R(F),A&&(A.c(),A.m(o,null))),(!M||q[0]&8)&&d!==(d=fl(F[41].deployed_at||F[41].created_at)+"")&&B(_,d),(!M||q[0]&8)&&g!==(g=(F[41].deployed_by||F[41].user||"unknown")+"")&&B(C,g);const H={};q[0]&8&&(H.variant=Rn(xl(F[41]))),q[0]&8|q[1]&131072&&(H.$$scope={dirty:q,ctx:F}),w.$set(H),(!M||q[0]&24)&&$e(e,"selected",F[4]===F[41].id)},i(F){M||(E(w.$$.fragment,F),M=!0)},o(F){N(w.$$.fragment,F),M=!1},d(F){F&&$(e),A.d(),se(w),P.r(),D=!1,j()}}}function Ei(l){let e,t,n,s,i,o=_e(l[6]),c=[];for(let f=0;f<o.length;f+=1)c[f]=Mi(bi(l,o,f));let r=l[5]&&ji();return{c(){e=p("div"),t=p("label"),t.textContent="📋 Progress",n=b(),s=p("div");for(let f=0;f<c.length;f+=1)c[f].c();i=b(),r&&r.c(),u(t,"class","svelte-dlnmf"),u(s,"class","rollback-logs svelte-dlnmf"),u(e,"class","section rollback-logs-section svelte-dlnmf")},m(f,d){k(f,e,d),a(e,t),a(e,n),a(e,s);for(let _=0;_<c.length;_+=1)c[_]&&c[_].m(s,null);a(s,i),r&&r.m(s,null)},p(f,d){if(d[0]&64){o=_e(f[6]);let _;for(_=0;_<o.length;_+=1){const v=bi(f,o,_);c[_]?c[_].p(v,d):(c[_]=Mi(v),c[_].c(),c[_].m(s,i))}for(;_<c.length;_+=1)c[_].d(1);c.length=o.length}f[5]?r||(r=ji(),r.c(),r.m(s,null)):r&&(r.d(1),r=null)},d(f){f&&$(e),Me(c,f),r&&r.d()}}}function Mi(l){let e,t=l[38].message+"",n,s;return{c(){e=p("div"),n=T(t),u(e,"class",s="log-entry log-"+l[38].type+" svelte-dlnmf")},m(i,o){k(i,e,o),a(e,n)},p(i,o){o[0]&64&&t!==(t=i[38].message+"")&&B(n,t),o[0]&64&&s!==(s="log-entry log-"+i[38].type+" svelte-dlnmf")&&u(e,"class",s)},d(i){i&&$(e)}}}function ji(l){let e;return{c(){e=p("div"),e.innerHTML='<span class="spinner svelte-dlnmf">⏳</span> Working...',u(e,"class","log-entry log-info svelte-dlnmf")},m(t,n){k(t,e,n)},d(t){t&&$(e)}}}function nu(l){let e,t,n=l[2]&&Ti(l);return{c(){n&&n.c(),e=Le()},m(s,i){n&&n.m(s,i),k(s,e,i),t=!0},p(s,i){s[2]?n?(n.p(s,i),i[0]&4&&E(n,1)):(n=Ti(s),n.c(),E(n,1),n.m(e.parentNode,e)):n&&(ke(),N(n,1,1,()=>{n=null}),we())},i(s){t||(E(n),t=!0)},o(s){N(n),t=!1},d(s){s&&$(e),n&&n.d(s)}}}function su(l){let e=l[6].length>0?"Close":"Cancel",t;return{c(){t=T(e)},m(n,s){k(n,t,s)},p(n,s){s[0]&64&&e!==(e=n[6].length>0?"Close":"Cancel")&&B(t,e)},d(n){n&&$(t)}}}function ou(l){let e;return{c(){e=T("⏪ Execute Rollback")},m(t,n){k(t,e,n)},d(t){t&&$(e)}}}function iu(l){let e;return{c(){e=T("⏳ Rolling back...")},m(t,n){k(t,e,n)},d(t){t&&$(e)}}}function ru(l){let e;function t(i,o){return i[5]?iu:ou}let n=t(l),s=n(l);return{c(){s.c(),e=Le()},m(i,o){s.m(i,o),k(i,e,o)},p(i,o){n!==(n=t(i))&&(s.d(1),s=n(i),s&&(s.c(),s.m(e.parentNode,e)))},d(i){i&&$(e),s.d(i)}}}function au(l){let e,t,n,s,i;return t=new Te({props:{variant:"ghost",$$slots:{default:[su]},$$scope:{ctx:l}}}),t.$on("click",l[21]),s=new Te({props:{variant:"warning",disabled:!l[4]||l[5],$$slots:{default:[ru]},$$scope:{ctx:l}}}),s.$on("click",l[14]),{c(){e=p("div"),oe(t.$$.fragment),n=b(),oe(s.$$.fragment),u(e,"slot","footer")},m(o,c){k(o,e,c),ne(t,e,null),a(e,n),ne(s,e,null),i=!0},p(o,c){const r={};c[0]&64|c[1]&131072&&(r.$$scope={dirty:c,ctx:o}),t.$set(r);const f={};c[0]&48&&(f.disabled=!o[4]||o[5]),c[0]&32|c[1]&131072&&(f.$$scope={dirty:c,ctx:o}),s.$set(f)},i(o){i||(E(t.$$.fragment,o),E(s.$$.fragment,o),i=!0)},o(o){N(t.$$.fragment,o),N(s.$$.fragment,o),i=!1},d(o){o&&$(e),se(t),se(s)}}}function Li(l){let e,t,n,s=(l[8].service_name||l[8].service)+"",i,o,c,r=l[8].environment+"",f,d,_=fl(l[8].deployed_at)+"",v,h,m,g,C;const y=[fu,cu],w=[];function S(P,D){return P[8].config_snapshot?0:1}function M(P,D){return D===0?Uf(P):P}return m=S(l),g=w[m]=y[m](M(l,m)),{c(){e=p("div"),t=p("div"),n=p("span"),i=T(s),o=b(),c=p("span"),f=T(r),d=T(" • "),v=T(_),h=b(),g.c(),u(n,"class","service-name svelte-dlnmf"),u(c,"class","meta svelte-dlnmf"),u(t,"class","config-header-info svelte-dlnmf"),u(e,"class","config-content svelte-dlnmf")},m(P,D){k(P,e,D),a(e,t),a(t,n),a(n,i),a(t,o),a(t,c),a(c,f),a(c,d),a(c,v),a(e,h),w[m].m(e,null),C=!0},p(P,D){(!C||D[0]&256)&&s!==(s=(P[8].service_name||P[8].service)+"")&&B(i,s),(!C||D[0]&256)&&r!==(r=P[8].environment+"")&&B(f,r),(!C||D[0]&256)&&_!==(_=fl(P[8].deployed_at)+"")&&B(v,_);let j=m;m=S(P),m===j?w[m].p(M(P,m),D):(ke(),N(w[j],1,1,()=>{w[j]=null}),we(),g=w[m],g?g.p(M(P,m),D):(g=w[m]=y[m](M(P,m)),g.c()),E(g,1),g.m(e,null))},i(P){C||(E(g),C=!0)},o(P){N(g),C=!1},d(P){P&&$(e),w[m].d()}}}function cu(l){let e;return{c(){e=p("div"),e.textContent="No config snapshot available",u(e,"class","no-config svelte-dlnmf")},m(t,n){k(t,e,n)},p:ae,i:ae,o:ae,d(t){t&&$(e)}}}function fu(l){var he,re;let e,t,n,s,i,o,c=(l[30].source_type||"-")+"",r,f,d,_,v,h,m,g,C=(l[30].port||"-")+"",y,w,S,M,P,D,j,L,R,A,F=l[30].env_vars&&Object.keys(l[30].env_vars).length>0,q,H,W,I=l[30].git_url&&Ni(l),J=l[30].git_branch&&Ri(l),z=l[30].image&&Oi(l),G=l[30].container_port&&Ai(l),O=l[30].host_port&&qi(l),U=l[30].snapshot_id&&Fi(l),Y=l[30].region&&zi(l),Z=l[30].size&&Bi(l),ie=((he=l[30].server_ips)==null?void 0:he.length)&&Ui(l),le=l[30].setup_domain&&Ii(),ee=l[30].base_domain&&Hi(l),ue=F&&Gi(l),x=((re=l[30].tags)==null?void 0:re.length)&&Ji(l);return{c(){e=p("table"),t=p("tbody"),n=p("tr"),s=p("td"),s.textContent="Source Type",i=p("td"),o=p("strong"),r=T(c),f=b(),I&&I.c(),d=b(),J&&J.c(),_=b(),z&&z.c(),v=b(),h=p("tr"),m=p("td"),m.textContent="Port",g=p("td"),y=T(C),w=b(),G&&G.c(),S=b(),O&&O.c(),M=b(),U&&U.c(),P=b(),Y&&Y.c(),D=b(),Z&&Z.c(),j=b(),ie&&ie.c(),L=b(),le&&le.c(),R=b(),ee&&ee.c(),A=b(),ue&&ue.c(),q=b(),x&&x.c(),H=Le(),u(s,"class","label svelte-dlnmf"),u(i,"class","svelte-dlnmf"),u(m,"class","label svelte-dlnmf"),u(g,"class","svelte-dlnmf"),u(t,"class","svelte-dlnmf"),u(e,"class","config-table svelte-dlnmf")},m(X,pe){k(X,e,pe),a(e,t),a(t,n),a(n,s),a(n,i),a(i,o),a(o,r),a(t,f),I&&I.m(t,null),a(t,d),J&&J.m(t,null),a(t,_),z&&z.m(t,null),a(t,v),a(t,h),a(h,m),a(h,g),a(g,y),a(t,w),G&&G.m(t,null),a(t,S),O&&O.m(t,null),a(t,M),U&&U.m(t,null),a(t,P),Y&&Y.m(t,null),a(t,D),Z&&Z.m(t,null),a(t,j),ie&&ie.m(t,null),a(t,L),le&&le.m(t,null),a(t,R),ee&&ee.m(t,null),k(X,A,pe),ue&&ue.m(X,pe),k(X,q,pe),x&&x.m(X,pe),k(X,H,pe),W=!0},p(X,pe){var de,be;(!W||pe[0]&256)&&c!==(c=(X[30].source_type||"-")+"")&&B(r,c),X[30].git_url?I?I.p(X,pe):(I=Ni(X),I.c(),I.m(t,d)):I&&(I.d(1),I=null),X[30].git_branch?J?J.p(X,pe):(J=Ri(X),J.c(),J.m(t,_)):J&&(J.d(1),J=null),X[30].image?z?z.p(X,pe):(z=Oi(X),z.c(),z.m(t,v)):z&&(z.d(1),z=null),(!W||pe[0]&256)&&C!==(C=(X[30].port||"-")+"")&&B(y,C),X[30].container_port?G?G.p(X,pe):(G=Ai(X),G.c(),G.m(t,S)):G&&(G.d(1),G=null),X[30].host_port?O?O.p(X,pe):(O=qi(X),O.c(),O.m(t,M)):O&&(O.d(1),O=null),X[30].snapshot_id?U?U.p(X,pe):(U=Fi(X),U.c(),U.m(t,P)):U&&(U.d(1),U=null),X[30].region?Y?Y.p(X,pe):(Y=zi(X),Y.c(),Y.m(t,D)):Y&&(Y.d(1),Y=null),X[30].size?Z?Z.p(X,pe):(Z=Bi(X),Z.c(),Z.m(t,j)):Z&&(Z.d(1),Z=null),(de=X[30].server_ips)!=null&&de.length?ie?ie.p(X,pe):(ie=Ui(X),ie.c(),ie.m(t,L)):ie&&(ie.d(1),ie=null),X[30].setup_domain?le||(le=Ii(),le.c(),le.m(t,R)):le&&(le.d(1),le=null),X[30].base_domain?ee?ee.p(X,pe):(ee=Hi(X),ee.c(),ee.m(t,null)):ee&&(ee.d(1),ee=null),pe[0]&256&&(F=X[30].env_vars&&Object.keys(X[30].env_vars).length>0),F?ue?ue.p(X,pe):(ue=Gi(X),ue.c(),ue.m(q.parentNode,q)):ue&&(ue.d(1),ue=null),(be=X[30].tags)!=null&&be.length?x?(x.p(X,pe),pe[0]&256&&E(x,1)):(x=Ji(X),x.c(),E(x,1),x.m(H.parentNode,H)):x&&(ke(),N(x,1,1,()=>{x=null}),we())},i(X){W||(E(x),W=!0)},o(X){N(x),W=!1},d(X){X&&($(e),$(A),$(q),$(H)),I&&I.d(),J&&J.d(),z&&z.d(),G&&G.d(),O&&O.d(),U&&U.d(),Y&&Y.d(),Z&&Z.d(),ie&&ie.d(),le&&le.d(),ee&&ee.d(),ue&&ue.d(X),x&&x.d(X)}}}function Ni(l){let e,t,n,s=l[30].git_url+"",i;return{c(){e=p("tr"),t=p("td"),t.textContent="Git URL",n=p("td"),i=T(s),u(t,"class","label svelte-dlnmf"),u(n,"class","svelte-dlnmf")},m(o,c){k(o,e,c),a(e,t),a(e,n),a(n,i)},p(o,c){c[0]&256&&s!==(s=o[30].git_url+"")&&B(i,s)},d(o){o&&$(e)}}}function Ri(l){let e,t,n,s=l[30].git_branch+"",i;return{c(){e=p("tr"),t=p("td"),t.textContent="Git Branch",n=p("td"),i=T(s),u(t,"class","label svelte-dlnmf"),u(n,"class","svelte-dlnmf")},m(o,c){k(o,e,c),a(e,t),a(e,n),a(n,i)},p(o,c){c[0]&256&&s!==(s=o[30].git_branch+"")&&B(i,s)},d(o){o&&$(e)}}}function Oi(l){let e,t,n,s=l[30].image+"",i;return{c(){e=p("tr"),t=p("td"),t.textContent="Image",n=p("td"),i=T(s),u(t,"class","label svelte-dlnmf"),u(n,"class","svelte-dlnmf")},m(o,c){k(o,e,c),a(e,t),a(e,n),a(n,i)},p(o,c){c[0]&256&&s!==(s=o[30].image+"")&&B(i,s)},d(o){o&&$(e)}}}function Ai(l){let e,t,n,s=l[30].container_port+"",i;return{c(){e=p("tr"),t=p("td"),t.textContent="Container Port",n=p("td"),i=T(s),u(t,"class","label svelte-dlnmf"),u(n,"class","svelte-dlnmf")},m(o,c){k(o,e,c),a(e,t),a(e,n),a(n,i)},p(o,c){c[0]&256&&s!==(s=o[30].container_port+"")&&B(i,s)},d(o){o&&$(e)}}}function qi(l){let e,t,n,s=l[30].host_port+"",i;return{c(){e=p("tr"),t=p("td"),t.textContent="Host Port",n=p("td"),i=T(s),u(t,"class","label svelte-dlnmf"),u(n,"class","svelte-dlnmf")},m(o,c){k(o,e,c),a(e,t),a(e,n),a(n,i)},p(o,c){c[0]&256&&s!==(s=o[30].host_port+"")&&B(i,s)},d(o){o&&$(e)}}}function Fi(l){let e,t,n,s=l[30].snapshot_id+"",i;return{c(){e=p("tr"),t=p("td"),t.textContent="Snapshot ID",n=p("td"),i=T(s),u(t,"class","label svelte-dlnmf"),u(n,"class","svelte-dlnmf")},m(o,c){k(o,e,c),a(e,t),a(e,n),a(n,i)},p(o,c){c[0]&256&&s!==(s=o[30].snapshot_id+"")&&B(i,s)},d(o){o&&$(e)}}}function zi(l){let e,t,n,s=l[30].region+"",i;return{c(){e=p("tr"),t=p("td"),t.textContent="Region",n=p("td"),i=T(s),u(t,"class","label svelte-dlnmf"),u(n,"class","svelte-dlnmf")},m(o,c){k(o,e,c),a(e,t),a(e,n),a(n,i)},p(o,c){c[0]&256&&s!==(s=o[30].region+"")&&B(i,s)},d(o){o&&$(e)}}}function Bi(l){let e,t,n,s=l[30].size+"",i;return{c(){e=p("tr"),t=p("td"),t.textContent="Size",n=p("td"),i=T(s),u(t,"class","label svelte-dlnmf"),u(n,"class","svelte-dlnmf")},m(o,c){k(o,e,c),a(e,t),a(e,n),a(n,i)},p(o,c){c[0]&256&&s!==(s=o[30].size+"")&&B(i,s)},d(o){o&&$(e)}}}function Ui(l){let e,t,n,s=l[30].server_ips.join(", ")+"",i;return{c(){e=p("tr"),t=p("td"),t.textContent="Servers",n=p("td"),i=T(s),u(t,"class","label svelte-dlnmf"),u(n,"class","svelte-dlnmf")},m(o,c){k(o,e,c),a(e,t),a(e,n),a(n,i)},p(o,c){c[0]&256&&s!==(s=o[30].server_ips.join(", ")+"")&&B(i,s)},d(o){o&&$(e)}}}function Ii(l){let e;return{c(){e=p("tr"),e.innerHTML='<td class="label svelte-dlnmf">Setup Domain</td><td class="svelte-dlnmf">Yes</td>'},m(t,n){k(t,e,n)},d(t){t&&$(e)}}}function Hi(l){let e,t,n,s=l[30].base_domain+"",i;return{c(){e=p("tr"),t=p("td"),t.textContent="Base Domain",n=p("td"),i=T(s),u(t,"class","label svelte-dlnmf"),u(n,"class","svelte-dlnmf")},m(o,c){k(o,e,c),a(e,t),a(e,n),a(n,i)},p(o,c){c[0]&256&&s!==(s=o[30].base_domain+"")&&B(i,s)},d(o){o&&$(e)}}}function Gi(l){let e,t,n,s,i=_e(Object.entries(l[30].env_vars)),o=[];for(let c=0;c<i.length;c+=1)o[c]=Wi(gi(l,i,c));return{c(){e=p("div"),t=p("div"),t.textContent="Environment Variables",n=b(),s=p("div");for(let c=0;c<o.length;c+=1)o[c].c();u(t,"class","section-title svelte-dlnmf"),u(s,"class","env-list svelte-dlnmf"),u(e,"class","env-section svelte-dlnmf")},m(c,r){k(c,e,r),a(e,t),a(e,n),a(e,s);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(s,null)},p(c,r){if(r[0]&256){i=_e(Object.entries(c[30].env_vars));let f;for(f=0;f<i.length;f+=1){const d=gi(c,i,f);o[f]?o[f].p(d,r):(o[f]=Wi(d),o[f].c(),o[f].m(s,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=i.length}},d(c){c&&$(e),Me(o,c)}}}function Wi(l){let e,t=l[34]+"",n,s,i=(l[35].length>20?l[35].substring(0,20)+"...":l[35])+"",o;return{c(){e=p("div"),n=T(t),s=T("="),o=T(i),u(e,"class","env-item svelte-dlnmf")},m(c,r){k(c,e,r),a(e,n),a(e,s),a(e,o)},p(c,r){r[0]&256&&t!==(t=c[34]+"")&&B(n,t),r[0]&256&&i!==(i=(c[35].length>20?c[35].substring(0,20)+"...":c[35])+"")&&B(o,i)},d(c){c&&$(e)}}}function Ji(l){let e,t,n,s,i,o=_e(l[30].tags),c=[];for(let f=0;f<o.length;f+=1)c[f]=Yi(hi(l,o,f));const r=f=>N(c[f],1,1,()=>{c[f]=null});return{c(){e=p("div"),t=p("div"),t.textContent="Tags",n=b(),s=p("div");for(let f=0;f<c.length;f+=1)c[f].c();u(t,"class","section-title svelte-dlnmf"),u(s,"class","tags-list svelte-dlnmf"),u(e,"class","tags-section svelte-dlnmf")},m(f,d){k(f,e,d),a(e,t),a(e,n),a(e,s);for(let _=0;_<c.length;_+=1)c[_]&&c[_].m(s,null);i=!0},p(f,d){if(d[0]&256){o=_e(f[30].tags);let _;for(_=0;_<o.length;_+=1){const v=hi(f,o,_);c[_]?(c[_].p(v,d),E(c[_],1)):(c[_]=Yi(v),c[_].c(),E(c[_],1),c[_].m(s,null))}for(ke(),_=o.length;_<c.length;_+=1)r(_);we()}},i(f){if(!i){for(let d=0;d<o.length;d+=1)E(c[d]);i=!0}},o(f){c=c.filter(Boolean);for(let d=0;d<c.length;d+=1)N(c[d]);i=!1},d(f){f&&$(e),Me(c,f)}}}function uu(l){let e=l[31]+"",t;return{c(){t=T(e)},m(n,s){k(n,t,s)},p(n,s){s[0]&256&&e!==(e=n[31]+"")&&B(t,e)},d(n){n&&$(t)}}}function Yi(l){let e,t;return e=new Ie({props:{$$slots:{default:[uu]},$$scope:{ctx:l}}}),{c(){oe(e.$$.fragment)},m(n,s){ne(e,n,s),t=!0},p(n,s){const i={};s[0]&256|s[1]&131072&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){se(e,n)}}}function du(l){let e,t,n=l[8]&&Li(l);return{c(){n&&n.c(),e=Le()},m(s,i){n&&n.m(s,i),k(s,e,i),t=!0},p(s,i){s[8]?n?(n.p(s,i),i[0]&256&&E(n,1)):(n=Li(s),n.c(),E(n,1),n.m(e.parentNode,e)):n&&(ke(),N(n,1,1,()=>{n=null}),we())},i(s){t||(E(n),t=!0)},o(s){N(n),t=!1},d(s){s&&$(e),n&&n.d(s)}}}function pu(l){let e;return{c(){e=T("🚀 Redeploy with this config")},m(t,n){k(t,e,n)},d(t){t&&$(e)}}}function _u(l){let e;return{c(){e=T("Close")},m(t,n){k(t,e,n)},d(t){t&&$(e)}}}function vu(l){let e,t,n,s,i;return t=new Te({props:{variant:"primary",$$slots:{default:[pu]},$$scope:{ctx:l}}}),t.$on("click",l[12]),s=new Te({props:{variant:"ghost",$$slots:{default:[_u]},$$scope:{ctx:l}}}),s.$on("click",l[26]),{c(){e=p("div"),oe(t.$$.fragment),n=b(),oe(s.$$.fragment),u(e,"slot","footer")},m(o,c){k(o,e,c),ne(t,e,null),a(e,n),ne(s,e,null),i=!0},p(o,c){const r={};c[1]&131072&&(r.$$scope={dirty:c,ctx:o}),t.$set(r);const f={};c[1]&131072&&(f.$$scope={dirty:c,ctx:o}),s.$set(f)},i(o){i||(E(t.$$.fragment,o),E(s.$$.fragment,o),i=!0)},o(o){N(t.$$.fragment,o),N(s.$$.fragment,o),i=!1},d(o){o&&$(e),se(t),se(s)}}}function mu(l){let e,t,n,s,i,o,c,r,f,d,_,v,h,m,g,C,y=l[10]&&wi(l);c=new Te({props:{variant:"ghost",$$slots:{default:[If]},$$scope:{ctx:l}}}),c.$on("click",l[18]),f=new Re({props:{padding:!1,$$slots:{default:[Xf]},$$scope:{ctx:l}}});function w(D){l[24](D)}let S={title:"⏪ Rollback",width:"600px",$$slots:{footer:[au],default:[nu]},$$scope:{ctx:l}};l[1]!==void 0&&(S.open=l[1]),_=new Nn({props:S}),kt.push(()=>jn(_,"open",w)),_.$on("close",l[25]);function M(D){l[27](D)}let P={title:"⚙️ Deployment Config",width:"500px",$$slots:{footer:[vu],default:[du]},$$scope:{ctx:l}};return l[7]!==void 0&&(P.open=l[7]),m=new Nn({props:P}),kt.push(()=>jn(m,"open",M)),m.$on("close",l[28]),{c(){e=p("div"),t=p("div"),n=p("h1"),n.textContent="Deployment History",s=b(),i=p("div"),y&&y.c(),o=b(),oe(c.$$.fragment),r=b(),oe(f.$$.fragment),d=b(),oe(_.$$.fragment),h=b(),oe(m.$$.fragment),u(n,"class","svelte-dlnmf"),u(i,"class","header-actions svelte-dlnmf"),u(t,"class","page-header svelte-dlnmf"),u(e,"class","deployments-page svelte-dlnmf")},m(D,j){k(D,e,j),a(e,t),a(t,n),a(t,s),a(t,i),y&&y.m(i,null),a(i,o),ne(c,i,null),a(e,r),ne(f,e,null),k(D,d,j),ne(_,D,j),k(D,h,j),ne(m,D,j),C=!0},p(D,j){D[10]?y?y.p(D,j):(y=wi(D),y.c(),y.m(i,o)):y&&(y.d(1),y=null);const L={};j[1]&131072&&(L.$$scope={dirty:j,ctx:D}),c.$set(L);const R={};j[0]&513|j[1]&131072&&(R.$$scope={dirty:j,ctx:D}),f.$set(R);const A={};j[0]&126|j[1]&131072&&(A.$$scope={dirty:j,ctx:D}),!v&&j[0]&2&&(v=!0,A.open=D[1],Mn(()=>v=!1)),_.$set(A);const F={};j[0]&384|j[1]&131072&&(F.$$scope={dirty:j,ctx:D}),!g&&j[0]&128&&(g=!0,F.open=D[7],Mn(()=>g=!1)),m.$set(F)},i(D){C||(E(c.$$.fragment,D),E(f.$$.fragment,D),E(_.$$.fragment,D),E(m.$$.fragment,D),C=!0)},o(D){N(c.$$.fragment,D),N(f.$$.fragment,D),N(_.$$.fragment,D),N(m.$$.fragment,D),C=!1},d(D){D&&($(e),$(d),$(h)),y&&y.d(),se(c),se(f),se(_,D),se(m,D)}}}function Vi(l){return l?l.toLocaleTimeString():""}function hu(l){const e=[...l],t=new Set;for(const n of e){const s=`${n.project}/${n.service||n.name}/${n.environment}`;n.status==="success"&&n.can_rollback&&!t.has(s)?(n.is_current_active=!0,t.add(s)):n.is_current_active=!1}return e}function fl(l){return l?new Date(l).toLocaleString():"-"}function Rn(l){switch(l){case"success":case"active":return"success";case"failed":case"error":return"danger";case"pending":case"deploying":return"warning";case"superseded":return"secondary";default:return"info"}}function xl(l){const e=l.status||"unknown";return e==="rolled_back"?l.is_rollback?"failed":"superseded":e}function gu(l,e,t){let n,s,i;We(l,Rl,z=>t(17,i=z));let o=!1,c=!1,r=null,f=[],d=null,_=!1,v=[],h=!1,m=null,g=[];function C(z){t(8,m=z),t(7,h=!0)}function y(){if(!(m!=null&&m.config_snapshot))return;const z=new CustomEvent("redeploy",{detail:{deployment:m,config:m.config_snapshot},bubbles:!0});document.dispatchEvent(z),t(7,h=!1),ve.info("Config loaded - switch to Deploy tab")}async function w(z){t(2,r=z);try{const G=new URLSearchParams({project:z.project||"",environment:z.environment||"",service_name:z.service_name||z.service||""}),O=await Be("GET",`/infra/deployments/rollback/preview?${G}`);t(3,f=(O.recent_deployments||[]).filter(U=>U.id!==z.id&&U.status==="success"))}catch{t(3,f=[])}t(1,c=!0)}async function S(){if(!r||!d){ve.error("Select a deployment to rollback to");return}t(6,v=[]),t(5,_=!0);const z=(G,O="info")=>{t(6,v=[...v,{message:G,type:O,time:new Date}])};try{const G=new URLSearchParams({project:r.project||"",environment:r.environment||"",service_name:r.service_name||r.service||""}).toString();z("Starting rollback...");let O=!1,U="";if(await ia("POST",`/infra/deployments/rollback?${G}`,{deployment_id:d},Y=>{Y.type==="progress"||Y.type==="start"?z(Y.message,"info"):Y.type==="server_complete"?z(`✅ ${Y.ip}: Success`,"success"):Y.type==="error"?(z(`❌ ${Y.message||Y.error}`,"error"),U=Y.message||Y.error||"Unknown error"):Y.type==="complete"&&(O=Y.success,O?z(`✅ ${Y.message}`,"success"):(U=Y.message||"Rollback failed",z(`❌ ${U}`,"error")))}),O)ve.success("Rollback completed successfully"),await M();else throw new Error(U||"Rollback failed")}catch(G){z(`❌ Error: ${G.message||String(G)}`,"error"),ve.error("Rollback failed: "+(G.message||String(G)))}finally{t(5,_=!1)}}function M(){Rl.refresh()}function P(){Rl.refresh()}const D=[[]],j=()=>Rl.refresh(),L=z=>C(z),R=z=>w(z),A=()=>{t(1,c=!1),t(6,v=[])};function F(){d=this.__value,t(4,d)}function q(z){c=z,t(1,c)}const H=()=>t(1,c=!1),W=()=>t(7,h=!1);function I(z){h=z,t(7,h)}const J=()=>t(7,h=!1);return l.$$.update=()=>{l.$$.dirty[0]&131072&&t(16,n=i||{loading:!1}),l.$$.dirty[0]&65536&&t(0,o=n.loading),l.$$.dirty[0]&65536&&t(10,s=n.lastFetched),l.$$.dirty[0]&65536&&n.data&&t(9,g=hu(n.data))},[o,c,r,f,d,_,v,h,m,g,s,C,y,w,S,P,n,i,j,L,R,A,F,D,q,H,W,I,J]}class bu extends Ve{constructor(e){super(),Ye(this,e,gu,mu,Je,{refresh:15},null,[-1,-1])}get refresh(){return this.$$.ctx[15]}}function $u(l){let e;return{c(){e=T("📋 Copy")},m(t,n){k(t,e,n)},d(t){t&&$(e)}}}function ku(l){let e;return{c(){e=T("⬇ Download")},m(t,n){k(t,e,n)},d(t){t&&$(e)}}}function Ki(l){let e;return{c(){e=p("div"),e.textContent="Loading logs...",u(e,"class","loading-overlay svelte-vo5055")},m(t,n){k(t,e,n)},d(t){t&&$(e)}}}function wu(l){let e;return{c(){e=p("span"),e.textContent="Select a server and container from the scope bar above to view logs.",u(e,"class","placeholder svelte-vo5055")},m(t,n){k(t,e,n)},p:ae,d(t){t&&$(e)}}}function yu(l){let e;return{c(){e=T(l[0])},m(t,n){k(t,e,n)},p(t,n){n&1&&B(e,t[0])},d(t){t&&$(e)}}}function Cu(l){let e,t,n,s,i,o,c,r,f,d,_,v,h,m,g,C,y,w,S,M,P,D,j;m=new Te({props:{variant:"ghost",size:"sm",$$slots:{default:[$u]},$$scope:{ctx:l}}}),m.$on("click",l[6]),C=new Te({props:{variant:"ghost",size:"sm",$$slots:{default:[ku]},$$scope:{ctx:l}}}),C.$on("click",l[7]);let L=l[1]&&Ki();function R(q,H){return q[0]?yu:wu}let A=R(l),F=A(l);return{c(){e=p("div"),t=p("div"),n=p("span"),n.textContent="🔍",s=b(),i=p("input"),o=b(),c=p("select"),r=p("option"),r.textContent="All Levels",f=p("option"),f.textContent="ERROR",d=p("option"),d.textContent="WARN",_=p("option"),_.textContent="INFO",v=p("option"),v.textContent="DEBUG",h=b(),oe(m.$$.fragment),g=b(),oe(C.$$.fragment),y=b(),w=p("div"),L&&L.c(),S=b(),M=p("pre"),F.c(),u(n,"class","search-icon svelte-vo5055"),u(i,"type","text"),u(i,"placeholder","Search logs..."),u(i,"class","svelte-vo5055"),u(t,"class","search-box svelte-vo5055"),r.__value="",Q(r,r.__value),f.__value="ERROR",Q(f,f.__value),d.__value="WARN",Q(d,d.__value),_.__value="INFO",Q(_,_.__value),v.__value="DEBUG",Q(v,v.__value),u(c,"class","svelte-vo5055"),l[3]===void 0&&Ue(()=>l[11].call(c)),u(e,"class","toolbar svelte-vo5055"),u(M,"class","log-content svelte-vo5055"),u(w,"class","log-viewer svelte-vo5055")},m(q,H){k(q,e,H),a(e,t),a(t,n),a(t,s),a(t,i),Q(i,l[2]),a(e,o),a(e,c),a(c,r),a(c,f),a(c,d),a(c,_),a(c,v),Pe(c,l[3],!0),a(e,h),ne(m,e,null),a(e,g),ne(C,e,null),k(q,y,H),k(q,w,H),L&&L.m(w,null),a(w,S),a(w,M),F.m(M,null),P=!0,D||(j=[te(i,"input",l[10]),te(i,"input",l[5]),te(c,"change",l[11]),te(c,"change",l[5])],D=!0)},p(q,H){H&4&&i.value!==q[2]&&Q(i,q[2]),H&8&&Pe(c,q[3]);const W={};H&131072&&(W.$$scope={dirty:H,ctx:q}),m.$set(W);const I={};H&131072&&(I.$$scope={dirty:H,ctx:q}),C.$set(I),q[1]?L||(L=Ki(),L.c(),L.m(w,S)):L&&(L.d(1),L=null),A===(A=R(q))&&F?F.p(q,H):(F.d(1),F=A(q),F&&(F.c(),F.m(M,null)))},i(q){P||(E(m.$$.fragment,q),E(C.$$.fragment,q),P=!0)},o(q){N(m.$$.fragment,q),N(C.$$.fragment,q),P=!1},d(q){q&&($(e),$(y),$(w)),se(m),se(C),L&&L.d(),F.d(),D=!1,Fe(j)}}}function Su(l){let e,t,n,s,i,o,c,r;return c=new Re({props:{padding:!1,$$slots:{default:[Cu]},$$scope:{ctx:l}}}),{c(){e=p("div"),t=p("h2"),n=T("Logs · "),s=p("span"),i=T(l[4]),o=b(),oe(c.$$.fragment),u(s,"class","context svelte-vo5055"),u(t,"class","page-title svelte-vo5055"),u(e,"class","logs-page svelte-vo5055")},m(f,d){k(f,e,d),a(e,t),a(t,n),a(t,s),a(s,i),a(e,o),ne(c,e,null),r=!0},p(f,[d]){(!r||d&16)&&B(i,f[4]);const _={};d&131087&&(_.$$scope={dirty:d,ctx:f}),c.$set(_)},i(f){r||(E(c.$$.fragment,f),r=!0)},o(f){N(c.$$.fragment,f),r=!1},d(f){f&&$(e),se(c)}}}function Tu(l,e,t){let n,s;We(l,Tt,M=>t(9,s=M));let i="",o="",c=!1,r="",f="",d=null;ul(()=>{s.server&&_()}),ls(()=>{m()});async function _(){if(!s.server){i="Select a server and container from the scope bar above to view logs.",t(0,o=i);return}t(1,c=!0);try{const M=s.server,P=s.container;if(!M){i="Select a server to view logs",t(0,o=i);return}if(!P||P==="all"){i=`Select a specific container from the scope bar above to view logs.

Tip: Use the Server dropdown to pick a server, then select a container.`,t(0,o=i),t(1,c=!1);return}const D=new URLSearchParams;D.set("lines","500");const j=`/infra/agent/${M}/containers/${P}/logs?${D}`,L=await Be("GET",j);L.data&&L.data.logs!==void 0?i=L.data.logs:L.logs!==void 0?i=L.logs:typeof L=="string"?i=L:i=JSON.stringify(L,null,2),v()}catch(M){i=`Error loading logs: ${M.message}`,t(0,o=i),ve.error("Failed to load logs: "+M.message)}finally{t(1,c=!1)}}function v(){let M=i;r&&(M=M.split(`
`).filter(D=>D.toLowerCase().includes(r.toLowerCase())).join(`
`)),f&&(M=M.split(`
`).filter(D=>D.toUpperCase().includes(f)).join(`
`)),t(0,o=M)}function h(){d||(d=setInterval(_,5e3),ve.info("Tailing logs..."))}function m(){d&&(clearInterval(d),d=null)}function g(){navigator.clipboard.writeText(o),ve.success("Logs copied to clipboard")}function C(){const M=new Blob([o],{type:"text/plain"}),P=URL.createObjectURL(M),D=document.createElement("a");D.href=P,D.download=`logs-${s.server||"unknown"}-${new Date().toISOString()}.txt`,D.click(),URL.revokeObjectURL(P)}function y(){_()}function w(){r=this.value,t(2,r)}function S(){f=Ge(this),t(3,f)}return l.$$.update=()=>{l.$$.dirty&512&&t(4,n=s.server?s.container?`${s.server} / ${s.container}`:s.server:"Select a server"),l.$$.dirty&512&&(s.server||s.container||s.range)&&_(),l.$$.dirty&512&&(s.tail?h():m())},v(),[o,c,r,f,n,v,g,C,y,s,w,S]}class Du extends Ve{constructor(e){super(),Ye(this,e,Tu,Su,Je,{refresh:8})}get refresh(){return this.$$.ctx[8]}}function Qi(l,e,t){const n=l.slice();return n[23]=e[t],n}function Xi(l,e,t){const n=l.slice();n[18]=e[t];const s=n[18].status==="online";n[19]=s;const i=n[18].containers>0?Math.round(n[18].healthy/n[18].containers*100):100;return n[20]=i,n}function Pu(l){var M;let e,t,n,s,i=(((M=l[11])==null?void 0:M.name)||l[2].server)+"",o,c,r,f,d,_,v,h,m,g,C=l[4]&&Zi(l);d=new Te({props:{variant:"ghost",size:"sm",$$slots:{default:[Mu]},$$scope:{ctx:l}}}),d.$on("click",l[0]);const y=[Lu,ju],w=[];function S(P,D){return P[5]?0:1}return v=S(l),h=w[v]=y[v](l),{c(){e=p("div"),t=p("h2"),n=T("Metrics · "),s=p("span"),o=T(i),c=b(),r=p("div"),C&&C.c(),f=b(),oe(d.$$.fragment),_=b(),h.c(),m=Le(),u(s,"class","server-name svelte-9h3o9i"),u(t,"class","page-title svelte-9h3o9i"),u(r,"class","header-actions svelte-9h3o9i"),u(e,"class","page-header svelte-9h3o9i")},m(P,D){k(P,e,D),a(e,t),a(t,n),a(t,s),a(s,o),a(e,c),a(e,r),C&&C.m(r,null),a(r,f),ne(d,r,null),k(P,_,D),w[v].m(P,D),k(P,m,D),g=!0},p(P,D){var R;(!g||D&2052)&&i!==(i=(((R=P[11])==null?void 0:R.name)||P[2].server)+"")&&B(o,i),P[4]?C?C.p(P,D):(C=Zi(P),C.c(),C.m(r,f)):C&&(C.d(1),C=null);const j={};D&67108864&&(j.$$scope={dirty:D,ctx:P}),d.$set(j);let L=v;v=S(P),v===L?w[v].p(P,D):(ke(),N(w[L],1,1,()=>{w[L]=null}),we(),h=w[v],h?h.p(P,D):(h=w[v]=y[v](P),h.c()),E(h,1),h.m(m.parentNode,m))},i(P){g||(E(d.$$.fragment,P),E(h),g=!0)},o(P){N(d.$$.fragment,P),N(h),g=!1},d(P){P&&($(e),$(_),$(m)),C&&C.d(),se(d),w[v].d(P)}}}function Eu(l){let e,t,n,s,i,o,c,r,f,d,_,v=l[4]&&er(l);o=new Te({props:{variant:"ghost",size:"sm",$$slots:{default:[Iu]},$$scope:{ctx:l}}}),o.$on("click",l[0]);const h=[Gu,Hu],m=[];function g(C,y){return C[5]?0:1}return r=g(l),f=m[r]=h[r](l),{c(){e=p("div"),t=p("h2"),t.textContent="Metrics · Fleet",n=b(),s=p("div"),v&&v.c(),i=b(),oe(o.$$.fragment),c=b(),f.c(),d=Le(),u(t,"class","page-title svelte-9h3o9i"),u(s,"class","header-actions svelte-9h3o9i"),u(e,"class","page-header svelte-9h3o9i")},m(C,y){k(C,e,y),a(e,t),a(e,n),a(e,s),v&&v.m(s,null),a(s,i),ne(o,s,null),k(C,c,y),m[r].m(C,y),k(C,d,y),_=!0},p(C,y){C[4]?v?v.p(C,y):(v=er(C),v.c(),v.m(s,i)):v&&(v.d(1),v=null);const w={};y&67108864&&(w.$$scope={dirty:y,ctx:C}),o.$set(w);let S=r;r=g(C),r===S?m[r].p(C,y):(ke(),N(m[S],1,1,()=>{m[S]=null}),we(),f=m[r],f?f.p(C,y):(f=m[r]=h[r](C),f.c()),E(f,1),f.m(d.parentNode,d))},i(C){_||(E(o.$$.fragment,C),E(f),_=!0)},o(C){N(o.$$.fragment,C),N(f),_=!1},d(C){C&&($(e),$(c),$(d)),v&&v.d(),se(o),m[r].d(C)}}}function Zi(l){let e,t,n=On(l[4])+"",s;return{c(){e=p("span"),t=T("Updated "),s=T(n),u(e,"class","last-updated svelte-9h3o9i")},m(i,o){k(i,e,o),a(e,t),a(e,s)},p(i,o){o&16&&n!==(n=On(i[4])+"")&&B(s,n)},d(i){i&&$(e)}}}function Mu(l){let e;return{c(){e=T("↻ Refresh")},m(t,n){k(t,e,n)},d(t){t&&$(e)}}}function ju(l){let e,t,n,s,i,o,c,r,f,d,_;return t=new Re({props:{$$slots:{default:[Nu]},$$scope:{ctx:l}}}),s=new Re({props:{$$slots:{default:[Ru]},$$scope:{ctx:l}}}),o=new Re({props:{$$slots:{default:[Ou]},$$scope:{ctx:l}}}),r=new Re({props:{$$slots:{default:[Au]},$$scope:{ctx:l}}}),d=new Re({props:{title:"🐳 Containers",$$slots:{default:[Uu]},$$scope:{ctx:l}}}),{c(){e=p("div"),oe(t.$$.fragment),n=b(),oe(s.$$.fragment),i=b(),oe(o.$$.fragment),c=b(),oe(r.$$.fragment),f=b(),oe(d.$$.fragment),u(e,"class","metrics-grid svelte-9h3o9i")},m(v,h){k(v,e,h),ne(t,e,null),a(e,n),ne(s,e,null),a(e,i),ne(o,e,null),a(e,c),ne(r,e,null),k(v,f,h),ne(d,v,h),_=!0},p(v,h){const m={};h&67109120&&(m.$$scope={dirty:h,ctx:v}),t.$set(m);const g={};h&67109120&&(g.$$scope={dirty:h,ctx:v}),s.$set(g);const C={};h&67109120&&(C.$$scope={dirty:h,ctx:v}),o.$set(C);const y={};h&67109120&&(y.$$scope={dirty:h,ctx:v}),r.$set(y);const w={};h&67109e3&&(w.$$scope={dirty:h,ctx:v}),d.$set(w)},i(v){_||(E(t.$$.fragment,v),E(s.$$.fragment,v),E(o.$$.fragment,v),E(r.$$.fragment,v),E(d.$$.fragment,v),_=!0)},o(v){N(t.$$.fragment,v),N(s.$$.fragment,v),N(o.$$.fragment,v),N(r.$$.fragment,v),N(d.$$.fragment,v),_=!1},d(v){v&&($(e),$(f)),se(t),se(s),se(o),se(r),se(d,v)}}}function Lu(l){let e,t,n,s;return{c(){e=p("div"),t=p("p"),n=T("Failed to load: "),s=T(l[5]),u(e,"class","empty-state svelte-9h3o9i")},m(i,o){k(i,e,o),a(e,t),a(t,n),a(t,s)},p(i,o){o&32&&B(s,i[5])},i:ae,o:ae,d(i){i&&$(e)}}}function Nu(l){var r;let e,t,n,s,i=(((r=l[8])==null?void 0:r.cpu)||0)+"",o,c;return{c(){var f;e=p("div"),t=p("div"),t.textContent="CPU",n=b(),s=p("div"),o=T(i),c=T("%"),u(t,"class","metric-label svelte-9h3o9i"),u(s,"class","metric-value svelte-9h3o9i"),qe(s,"color",Ot(((f=l[8])==null?void 0:f.cpu)||0)),u(e,"class","metric-card svelte-9h3o9i")},m(f,d){k(f,e,d),a(e,t),a(e,n),a(e,s),a(s,o),a(s,c)},p(f,d){var _,v;d&256&&i!==(i=(((_=f[8])==null?void 0:_.cpu)||0)+"")&&B(o,i),d&256&&qe(s,"color",Ot(((v=f[8])==null?void 0:v.cpu)||0))},d(f){f&&$(e)}}}function Ru(l){var g,C,y;let e,t,n,s,i=(((g=l[8])==null?void 0:g.memory)||0)+"",o,c,r,f,d=xe((C=l[8])==null?void 0:C.memoryUsed)+"",_,v,h=xe((y=l[8])==null?void 0:y.memoryTotal)+"",m;return{c(){var w;e=p("div"),t=p("div"),t.textContent="Memory",n=b(),s=p("div"),o=T(i),c=T("%"),r=b(),f=p("div"),_=T(d),v=T(" / "),m=T(h),u(t,"class","metric-label svelte-9h3o9i"),u(s,"class","metric-value svelte-9h3o9i"),qe(s,"color",Ot(((w=l[8])==null?void 0:w.memory)||0)),u(f,"class","metric-detail svelte-9h3o9i"),u(e,"class","metric-card svelte-9h3o9i")},m(w,S){k(w,e,S),a(e,t),a(e,n),a(e,s),a(s,o),a(s,c),a(e,r),a(e,f),a(f,_),a(f,v),a(f,m)},p(w,S){var M,P,D,j;S&256&&i!==(i=(((M=w[8])==null?void 0:M.memory)||0)+"")&&B(o,i),S&256&&qe(s,"color",Ot(((P=w[8])==null?void 0:P.memory)||0)),S&256&&d!==(d=xe((D=w[8])==null?void 0:D.memoryUsed)+"")&&B(_,d),S&256&&h!==(h=xe((j=w[8])==null?void 0:j.memoryTotal)+"")&&B(m,h)},d(w){w&&$(e)}}}function Ou(l){var g,C,y;let e,t,n,s,i=(((g=l[8])==null?void 0:g.disk)||0)+"",o,c,r,f,d=xe((C=l[8])==null?void 0:C.diskUsed)+"",_,v,h=xe((y=l[8])==null?void 0:y.diskTotal)+"",m;return{c(){var w;e=p("div"),t=p("div"),t.textContent="Disk",n=b(),s=p("div"),o=T(i),c=T("%"),r=b(),f=p("div"),_=T(d),v=T(" / "),m=T(h),u(t,"class","metric-label svelte-9h3o9i"),u(s,"class","metric-value svelte-9h3o9i"),qe(s,"color",Ot(((w=l[8])==null?void 0:w.disk)||0)),u(f,"class","metric-detail svelte-9h3o9i"),u(e,"class","metric-card svelte-9h3o9i")},m(w,S){k(w,e,S),a(e,t),a(e,n),a(e,s),a(s,o),a(s,c),a(e,r),a(e,f),a(f,_),a(f,v),a(f,m)},p(w,S){var M,P,D,j;S&256&&i!==(i=(((M=w[8])==null?void 0:M.disk)||0)+"")&&B(o,i),S&256&&qe(s,"color",Ot(((P=w[8])==null?void 0:P.disk)||0)),S&256&&d!==(d=xe((D=w[8])==null?void 0:D.diskUsed)+"")&&B(_,d),S&256&&h!==(h=xe((j=w[8])==null?void 0:j.diskTotal)+"")&&B(m,h)},d(w){w&&$(e)}}}function Au(l){var g,C,y,w;let e,t,n,s,i,o=xe(((C=(g=l[8])==null?void 0:g.network)==null?void 0:C.in)||0)+"",c,r,f,d,_,v=xe(((w=(y=l[8])==null?void 0:y.network)==null?void 0:w.out)||0)+"",h,m;return{c(){e=p("div"),t=p("div"),t.textContent="Network",n=b(),s=p("div"),i=T("↓ "),c=T(o),r=T("/s"),f=b(),d=p("div"),_=T("↑ "),h=T(v),m=T("/s"),u(t,"class","metric-label svelte-9h3o9i"),u(s,"class","metric-value small svelte-9h3o9i"),u(d,"class","metric-detail svelte-9h3o9i"),u(e,"class","metric-card svelte-9h3o9i")},m(S,M){k(S,e,M),a(e,t),a(e,n),a(e,s),a(s,i),a(s,c),a(s,r),a(e,f),a(e,d),a(d,_),a(d,h),a(d,m)},p(S,M){var P,D,j,L;M&256&&o!==(o=xe(((D=(P=S[8])==null?void 0:P.network)==null?void 0:D.in)||0)+"")&&B(c,o),M&256&&v!==(v=xe(((L=(j=S[8])==null?void 0:j.network)==null?void 0:L.out)||0)+"")&&B(h,v)},d(S){S&&$(e)}}}function qu(l){let e,t,n,s,i,o,c=_e(l[7]),r=[];for(let d=0;d<c.length;d+=1)r[d]=xi(Qi(l,c,d));const f=d=>N(r[d],1,1,()=>{r[d]=null});return{c(){e=p("div"),t=p("table"),n=p("thead"),n.innerHTML='<tr><th class="svelte-9h3o9i">Container</th> <th class="svelte-9h3o9i">Status</th> <th class="svelte-9h3o9i">CPU</th> <th class="svelte-9h3o9i">Memory</th> <th class="svelte-9h3o9i">Network I/O</th></tr>',s=b(),i=p("tbody");for(let d=0;d<r.length;d+=1)r[d].c();u(t,"class","table svelte-9h3o9i"),u(e,"class","table-container svelte-9h3o9i")},m(d,_){k(d,e,_),a(e,t),a(t,n),a(t,s),a(t,i);for(let v=0;v<r.length;v+=1)r[v]&&r[v].m(i,null);o=!0},p(d,_){if(_&128){c=_e(d[7]);let v;for(v=0;v<c.length;v+=1){const h=Qi(d,c,v);r[v]?(r[v].p(h,_),E(r[v],1)):(r[v]=xi(h),r[v].c(),E(r[v],1),r[v].m(i,null))}for(ke(),v=c.length;v<r.length;v+=1)f(v);we()}},i(d){if(!o){for(let _=0;_<c.length;_+=1)E(r[_]);o=!0}},o(d){r=r.filter(Boolean);for(let _=0;_<r.length;_+=1)N(r[_]);o=!1},d(d){d&&$(e),Me(r,d)}}}function Fu(l){let e;return{c(){e=p("div"),e.textContent="No containers found",u(e,"class","empty-state svelte-9h3o9i")},m(t,n){k(t,e,n)},p:ae,i:ae,o:ae,d(t){t&&$(e)}}}function zu(l){let e;return{c(){e=p("div"),e.textContent="Loading containers...",u(e,"class","empty-state svelte-9h3o9i")},m(t,n){k(t,e,n)},p:ae,i:ae,o:ae,d(t){t&&$(e)}}}function Bu(l){let e=l[23].status+"",t;return{c(){t=T(e)},m(n,s){k(n,t,s)},p(n,s){s&128&&e!==(e=n[23].status+"")&&B(t,e)},d(n){n&&$(t)}}}function xi(l){let e,t,n=l[23].name+"",s,i,o,c,r,f,d=l[23].cpu.toFixed(2)+"",_,v,h,m,g,C=l[23].memory_percent.toFixed(2)+"",y,w,S,M,P,D=xe(l[23].memory_used)+"",j,L,R,A,F,q=xe(l[23].net_in)+"",H,W,I=xe(l[23].net_out)+"",J,z,G;return c=new Ie({props:{variant:l[23].status==="running"?"success":"warning",$$slots:{default:[Bu]},$$scope:{ctx:l}}}),{c(){e=p("tr"),t=p("td"),s=T(n),i=b(),o=p("td"),oe(c.$$.fragment),r=b(),f=p("td"),_=T(d),v=T("%"),h=b(),m=p("td"),g=p("span"),y=T(C),w=T("%"),S=b(),M=p("span"),P=T("("),j=T(D),L=T(")"),R=b(),A=p("td"),F=T("↓"),H=T(q),W=T(" / ↑"),J=T(I),z=b(),u(t,"class","container-name svelte-9h3o9i"),u(o,"class","svelte-9h3o9i"),qe(f,"color",Ot(l[23].cpu)),u(f,"class","svelte-9h3o9i"),qe(g,"color",Ot(l[23].memory_percent)),u(M,"class","detail svelte-9h3o9i"),u(m,"class","svelte-9h3o9i"),u(A,"class","network-io svelte-9h3o9i")},m(O,U){k(O,e,U),a(e,t),a(t,s),a(e,i),a(e,o),ne(c,o,null),a(e,r),a(e,f),a(f,_),a(f,v),a(e,h),a(e,m),a(m,g),a(g,y),a(g,w),a(m,S),a(m,M),a(M,P),a(M,j),a(M,L),a(e,R),a(e,A),a(A,F),a(A,H),a(A,W),a(A,J),a(e,z),G=!0},p(O,U){(!G||U&128)&&n!==(n=O[23].name+"")&&B(s,n);const Y={};U&128&&(Y.variant=O[23].status==="running"?"success":"warning"),U&67108992&&(Y.$$scope={dirty:U,ctx:O}),c.$set(Y),(!G||U&128)&&d!==(d=O[23].cpu.toFixed(2)+"")&&B(_,d),(!G||U&128)&&qe(f,"color",Ot(O[23].cpu)),(!G||U&128)&&C!==(C=O[23].memory_percent.toFixed(2)+"")&&B(y,C),(!G||U&128)&&qe(g,"color",Ot(O[23].memory_percent)),(!G||U&128)&&D!==(D=xe(O[23].memory_used)+"")&&B(j,D),(!G||U&128)&&q!==(q=xe(O[23].net_in)+"")&&B(H,q),(!G||U&128)&&I!==(I=xe(O[23].net_out)+"")&&B(J,I)},i(O){G||(E(c.$$.fragment,O),G=!0)},o(O){N(c.$$.fragment,O),G=!1},d(O){O&&$(e),se(c)}}}function Uu(l){let e,t,n,s;const i=[zu,Fu,qu],o=[];function c(r,f){return r[3]?0:r[7].length===0?1:2}return e=c(l),t=o[e]=i[e](l),{c(){t.c(),n=Le()},m(r,f){o[e].m(r,f),k(r,n,f),s=!0},p(r,f){let d=e;e=c(r),e===d?o[e].p(r,f):(ke(),N(o[d],1,1,()=>{o[d]=null}),we(),t=o[e],t?t.p(r,f):(t=o[e]=i[e](r),t.c()),E(t,1),t.m(n.parentNode,n))},i(r){s||(E(t),s=!0)},o(r){N(t),s=!1},d(r){r&&$(n),o[e].d(r)}}}function er(l){let e,t,n=On(l[4])+"",s;return{c(){e=p("span"),t=T("Updated "),s=T(n),u(e,"class","last-updated svelte-9h3o9i")},m(i,o){k(i,e,o),a(e,t),a(e,s)},p(i,o){o&16&&n!==(n=On(i[4])+"")&&B(s,n)},d(i){i&&$(e)}}}function Iu(l){let e;return{c(){e=T("↻ Refresh")},m(t,n){k(t,e,n)},d(t){t&&$(e)}}}function Hu(l){let e,t,n,s,i,o,c,r,f,d,_;return t=new Re({props:{$$slots:{default:[Wu]},$$scope:{ctx:l}}}),s=new Re({props:{$$slots:{default:[Ju]},$$scope:{ctx:l}}}),o=new Re({props:{$$slots:{default:[Yu]},$$scope:{ctx:l}}}),r=new Re({props:{$$slots:{default:[Ku]},$$scope:{ctx:l}}}),d=new Re({props:{title:"Server Health",$$slots:{default:[ld]},$$scope:{ctx:l}}}),{c(){e=p("div"),oe(t.$$.fragment),n=b(),oe(s.$$.fragment),i=b(),oe(o.$$.fragment),c=b(),oe(r.$$.fragment),f=b(),oe(d.$$.fragment),u(e,"class","metrics-grid svelte-9h3o9i")},m(v,h){k(v,e,h),ne(t,e,null),a(e,n),ne(s,e,null),a(e,i),ne(o,e,null),a(e,c),ne(r,e,null),k(v,f,h),ne(d,v,h),_=!0},p(v,h){const m={};h&67109888&&(m.$$scope={dirty:h,ctx:v}),t.$set(m);const g={};h&67109888&&(g.$$scope={dirty:h,ctx:v}),s.$set(g);const C={};h&67109888&&(C.$$scope={dirty:h,ctx:v}),o.$set(C);const y={};h&67109888&&(y.$$scope={dirty:h,ctx:v}),r.$set(y);const w={};h&67109386&&(w.$$scope={dirty:h,ctx:v}),d.$set(w)},i(v){_||(E(t.$$.fragment,v),E(s.$$.fragment,v),E(o.$$.fragment,v),E(r.$$.fragment,v),E(d.$$.fragment,v),_=!0)},o(v){N(t.$$.fragment,v),N(s.$$.fragment,v),N(o.$$.fragment,v),N(r.$$.fragment,v),N(d.$$.fragment,v),_=!1},d(v){v&&($(e),$(f)),se(t),se(s),se(o),se(r),se(d,v)}}}function Gu(l){let e,t,n,s;return{c(){e=p("div"),t=p("p"),n=T("Failed to load: "),s=T(l[5]),u(e,"class","empty-state svelte-9h3o9i")},m(i,o){k(i,e,o),a(e,t),a(t,n),a(t,s)},p(i,o){o&32&&B(s,i[5])},i:ae,o:ae,d(i){i&&$(e)}}}function Wu(l){let e,t,n,s,i=l[10].serverCount+"",o;return{c(){e=p("div"),t=p("div"),t.textContent="Servers",n=b(),s=p("div"),o=T(i),u(t,"class","metric-label svelte-9h3o9i"),u(s,"class","metric-value svelte-9h3o9i"),u(e,"class","metric-card svelte-9h3o9i")},m(c,r){k(c,e,r),a(e,t),a(e,n),a(e,s),a(s,o)},p(c,r){r&1024&&i!==(i=c[10].serverCount+"")&&B(o,i)},d(c){c&&$(e)}}}function Ju(l){let e,t,n,s,i=l[10].containerCount+"",o;return{c(){e=p("div"),t=p("div"),t.textContent="Containers",n=b(),s=p("div"),o=T(i),u(t,"class","metric-label svelte-9h3o9i"),u(s,"class","metric-value svelte-9h3o9i"),u(e,"class","metric-card svelte-9h3o9i")},m(c,r){k(c,e,r),a(e,t),a(e,n),a(e,s),a(s,o)},p(c,r){r&1024&&i!==(i=c[10].containerCount+"")&&B(o,i)},d(c){c&&$(e)}}}function Yu(l){let e,t,n,s,i=or(l[10].monthlyCost)+"",o;return{c(){e=p("div"),t=p("div"),t.textContent="Monthly Cost",n=b(),s=p("div"),o=T(i),u(t,"class","metric-label svelte-9h3o9i"),u(s,"class","metric-value svelte-9h3o9i"),u(e,"class","metric-card svelte-9h3o9i")},m(c,r){k(c,e,r),a(e,t),a(e,n),a(e,s),a(s,o)},p(c,r){r&1024&&i!==(i=or(c[10].monthlyCost)+"")&&B(o,i)},d(c){c&&$(e)}}}function Vu(l){let e=l[10].health+"",t;return{c(){t=T(e)},m(n,s){k(n,t,s)},p(n,s){s&1024&&e!==(e=n[10].health+"")&&B(t,e)},d(n){n&&$(t)}}}function Ku(l){let e,t,n,s,i,o;return i=new Ie({props:{variant:ir(l[10].health),$$slots:{default:[Vu]},$$scope:{ctx:l}}}),{c(){e=p("div"),t=p("div"),t.textContent="Health",n=b(),s=p("div"),oe(i.$$.fragment),u(t,"class","metric-label svelte-9h3o9i"),u(s,"class","metric-value svelte-9h3o9i"),u(e,"class","metric-card svelte-9h3o9i")},m(c,r){k(c,e,r),a(e,t),a(e,n),a(e,s),ne(i,s,null),o=!0},p(c,r){const f={};r&1024&&(f.variant=ir(c[10].health)),r&67109888&&(f.$$scope={dirty:r,ctx:c}),i.$set(f)},i(c){o||(E(i.$$.fragment,c),o=!0)},o(c){N(i.$$.fragment,c),o=!1},d(c){c&&$(e),se(i)}}}function Qu(l){let e,t=_e(l[9]),n=[];for(let s=0;s<t.length;s+=1)n[s]=nr(Xi(l,t,s));return{c(){e=p("div");for(let s=0;s<n.length;s+=1)n[s].c();u(e,"class","usage-list svelte-9h3o9i")},m(s,i){k(s,e,i);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null)},p(s,i){if(i&512){t=_e(s[9]);let o;for(o=0;o<t.length;o+=1){const c=Xi(s,t,o);n[o]?n[o].p(c,i):(n[o]=nr(c),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=t.length}},d(s){s&&$(e),Me(n,s)}}}function Xu(l){let e;return{c(){e=p("div"),e.textContent="No servers found",u(e,"class","empty-state svelte-9h3o9i")},m(t,n){k(t,e,n)},p:ae,d(t){t&&$(e)}}}function Zu(l){let e;return{c(){e=p("div"),e.textContent="Unable to load fleet health. Check your DO token.",u(e,"class","empty-state svelte-9h3o9i")},m(t,n){k(t,e,n)},p:ae,d(t){t&&$(e)}}}function xu(l){let e;return{c(){e=p("div"),e.textContent="Loading fleet health...",u(e,"class","empty-state svelte-9h3o9i")},m(t,n){k(t,e,n)},p:ae,d(t){t&&$(e)}}}function ed(l){let e,t=l[18].status+"",n;return{c(){e=p("span"),n=T(t),u(e,"class","usage-value svelte-9h3o9i"),qe(e,"color","var(--text-muted)")},m(s,i){k(s,e,i),a(e,n)},p(s,i){i&512&&t!==(t=s[18].status+"")&&B(n,t)},d(s){s&&$(e)}}}function td(l){let e,t=l[18].healthy+"",n,s,i=l[18].containers+"",o;return{c(){e=p("span"),n=T(t),s=T("/"),o=T(i),u(e,"class","usage-value svelte-9h3o9i"),qe(e,"color",l[18].unhealthy>0?"var(--danger)":"var(--success)")},m(c,r){k(c,e,r),a(e,n),a(e,s),a(e,o)},p(c,r){r&512&&t!==(t=c[18].healthy+"")&&B(n,t),r&512&&i!==(i=c[18].containers+"")&&B(o,i),r&512&&qe(e,"color",c[18].unhealthy>0?"var(--danger)":"var(--success)")},d(c){c&&$(e)}}}function tr(l){let e,t,n,s,i,o,c=l[18].containers+"",r,f,d,_,v=l[18].healthy+"",h,m,g=l[18].unhealthy>0&&lr(l);return{c(){e=p("div"),t=p("div"),n=b(),s=p("div"),i=p("span"),o=T("Containers: "),r=T(c),f=b(),d=p("span"),_=T("Healthy: "),h=T(v),m=b(),g&&g.c(),u(t,"class","usage-fill svelte-9h3o9i"),qe(t,"width",l[20]+"%"),qe(t,"background",l[18].unhealthy>0?"var(--warning)":"var(--success)"),u(e,"class","usage-bar svelte-9h3o9i"),u(s,"class","usage-details svelte-9h3o9i")},m(C,y){k(C,e,y),a(e,t),k(C,n,y),k(C,s,y),a(s,i),a(i,o),a(i,r),a(s,f),a(s,d),a(d,_),a(d,h),a(s,m),g&&g.m(s,null)},p(C,y){y&512&&qe(t,"width",C[20]+"%"),y&512&&qe(t,"background",C[18].unhealthy>0?"var(--warning)":"var(--success)"),y&512&&c!==(c=C[18].containers+"")&&B(r,c),y&512&&v!==(v=C[18].healthy+"")&&B(h,v),C[18].unhealthy>0?g?g.p(C,y):(g=lr(C),g.c(),g.m(s,null)):g&&(g.d(1),g=null)},d(C){C&&($(e),$(n),$(s)),g&&g.d()}}}function lr(l){let e,t,n=l[18].unhealthy+"",s;return{c(){e=p("span"),t=T("Unhealthy: "),s=T(n),qe(e,"color","var(--danger)")},m(i,o){k(i,e,o),a(e,t),a(e,s)},p(i,o){o&512&&n!==(n=i[18].unhealthy+"")&&B(s,n)},d(i){i&&$(e)}}}function nr(l){let e,t,n,s,i,o=l[18].name+"",c,r,f,d;function _(g,C){return g[19]?td:ed}let v=_(l),h=v(l),m=l[19]&&tr(l);return{c(){e=p("div"),t=p("div"),n=p("span"),s=p("span"),i=b(),c=T(o),r=b(),h.c(),f=b(),m&&m.c(),d=b(),u(s,"class","status-dot svelte-9h3o9i"),$e(s,"online",l[19]),$e(s,"offline",!l[19]),u(n,"class","usage-name svelte-9h3o9i"),u(t,"class","usage-header svelte-9h3o9i"),u(e,"class","usage-item svelte-9h3o9i")},m(g,C){k(g,e,C),a(e,t),a(t,n),a(n,s),a(n,i),a(n,c),a(t,r),h.m(t,null),a(e,f),m&&m.m(e,null),a(e,d)},p(g,C){C&512&&$e(s,"online",g[19]),C&512&&$e(s,"offline",!g[19]),C&512&&o!==(o=g[18].name+"")&&B(c,o),v===(v=_(g))&&h?h.p(g,C):(h.d(1),h=v(g),h&&(h.c(),h.m(t,null))),g[19]?m?m.p(g,C):(m=tr(g),m.c(),m.m(e,d)):m&&(m.d(1),m=null)},d(g){g&&$(e),h.d(),m&&m.d()}}}function ld(l){let e;function t(i,o){return i[3]&&!i[1]?xu:i[1]?i[9].length===0?Xu:Qu:Zu}let n=t(l),s=n(l);return{c(){s.c(),e=Le()},m(i,o){s.m(i,o),k(i,e,o)},p(i,o){n===(n=t(i))&&s?s.p(i,o):(s.d(1),s=n(i),s&&(s.c(),s.m(e.parentNode,e)))},d(i){i&&$(e),s.d(i)}}}function nd(l){let e,t,n,s;const i=[Eu,Pu],o=[];function c(r,f){return r[6]?0:1}return t=c(l),n=o[t]=i[t](l),{c(){e=p("div"),n.c(),u(e,"class","metrics-page svelte-9h3o9i")},m(r,f){k(r,e,f),o[t].m(e,null),s=!0},p(r,[f]){let d=t;t=c(r),t===d?o[t].p(r,f):(ke(),N(o[d],1,1,()=>{o[d]=null}),we(),n=o[t],n?n.p(r,f):(n=o[t]=i[t](r),n.c()),E(n,1),n.m(e,null))},i(r){s||(E(n),s=!0)},o(r){N(n),s=!1},d(r){r&&$(e),o[t].d()}}}function On(l){return l?l.toLocaleTimeString():""}function sr(l){if(!l)return 0;const e=l.match(/([\d.]+)\s*(B|KB|KiB|MB|MiB|GB|GiB|TB|TiB)?/i);if(!e)return 0;const t=parseFloat(e[1]),n=(e[2]||"B").toLowerCase(),s={b:1,kb:1024,kib:1024,mb:1024**2,mib:1024**2,gb:1024**3,gib:1024**3,tb:1024**4,tib:1024**4};return t*(s[n]||1)}function xe(l){if(!l)return"0 B";const e=["B","KB","MB","GB","TB"];let t=0;for(;l>=1024&&t<e.length-1;)l/=1024,t++;return`${l.toFixed(1)} ${e[t]}`}function or(l){return`$${(l||0).toFixed(2)}`}function ir(l){switch(l){case"healthy":return"success";case"degraded":return"warning";case"unhealthy":return"danger";default:return"info"}}function Ot(l){return l>=90?"var(--danger)":l>=70?"var(--warning)":"var(--success)"}function sd(l,e,t){let n,s,i,o,c,r,f,d;We(l,Tt,P=>t(2,f=P)),We(l,bl,P=>t(15,d=P));let _=!1,v=null,h=null,m=!1,g=null,C=null,y=null;ul(()=>{S(),t(12,g=setInterval(S,n?3e4:15e3))}),ls(()=>{g&&clearInterval(g)});let w=null;async function S(){m||t(3,_=!0),t(5,h=null);try{n?t(1,C=await Be("GET","/infra/fleet/health")):t(13,y=await Be("GET",`/infra/agent/${f.server}/metrics`)),t(4,v=new Date),m=!0}catch(P){t(5,h=P.message)}finally{t(3,_=!1)}}function M(){S()}return l.$$.update=()=>{var P,D,j,L,R,A,F,q,H,W,I,J;if(l.$$.dirty&4&&t(6,n=!f.server),l.$$.dirty&32772&&t(11,s=d.find(z=>{var G,O,U;return(z.ip||((U=(O=(G=z.networks)==null?void 0:G.v4)==null?void 0:O[0])==null?void 0:U.ip_address))===f.server})),l.$$.dirty&32770&&t(10,i=C?{serverCount:((P=C.summary)==null?void 0:P.total)||d.length,containerCount:((D=C.servers)==null?void 0:D.reduce((z,G)=>{var O;return z+(((O=G.containers)==null?void 0:O.length)||0)},0))||0,monthlyCost:(((j=C.summary)==null?void 0:j.total)||0)*12,health:((L=C.summary)==null?void 0:L.healthy)===((R=C.summary)==null?void 0:R.total)?"healthy":"degraded"}:{serverCount:d.length,containerCount:0,monthlyCost:0,health:"unknown"}),l.$$.dirty&2&&t(9,o=((C==null?void 0:C.servers)||[]).map(z=>({name:z.name||z.ip||"Unknown",ip:z.ip,status:z.status||"unknown",containers:z.containers??0,healthy:z.healthy??0,unhealthy:z.unhealthy??0,healthStatus:z.health_status||"unknown"}))),l.$$.dirty&8192&&t(8,c=y?{cpu:((A=y.system)==null?void 0:A.load_1m)||0,memory:((F=y.system)==null?void 0:F.mem_percent)||0,memoryUsed:((q=y.system)==null?void 0:q.mem_used)||0,memoryTotal:((H=y.system)==null?void 0:H.mem_total)||0,disk:((W=y.system)==null?void 0:W.disk_percent)||0,diskUsed:((I=y.system)==null?void 0:I.disk_used)||0,diskTotal:((J=y.system)==null?void 0:J.disk_total)||0,network:{in:0,out:0}}:null),l.$$.dirty&8192&&t(7,r=((y==null?void 0:y.containers)||[]).map(z=>{var Z;const G=z.cpu||"0%",O=z.memory||"0B / 0B",U=z.mem_perc||"0%",Y=O.split("/");return{name:z.name||"unknown",cpu:parseFloat(G.replace("%",""))||0,memory_percent:parseFloat(U.replace("%",""))||0,memory_used:sr((Z=Y[0])==null?void 0:Z.trim()),memory_total:Y[1]?sr(Y[1].trim()):0,net_in:z.net_in||0,net_out:z.net_out||0,status:z.state||"running"}})),l.$$.dirty&20484){const z=f.server;z!==w&&w!==null&&(g&&clearInterval(g),m=!1,S(),t(12,g=setInterval(S,z?15e3:3e4))),t(14,w=z)}},[M,C,f,_,v,h,n,r,c,o,i,s,g,y,w,d]}class od extends Ve{constructor(e){super(),Ye(this,e,sd,nd,Je,{refresh:0})}get refresh(){return this.$$.ctx[0]}}function rr(l,e,t){const n=l.slice();return n[32]=e[t],n}function ar(l,e,t){const n=l.slice();return n[35]=e[t],n}function cr(l,e,t){const n=l.slice();return n[38]=e[t],n}function id(l){let e,t,n=_e(l[12]),s=[];for(let o=0;o<n.length;o+=1)s[o]=fr(cr(l,n,o));const i=o=>N(s[o],1,1,()=>{s[o]=null});return{c(){e=p("div");for(let o=0;o<s.length;o+=1)s[o].c();u(e,"class","snapshot-list svelte-m8qcvw")},m(o,c){k(o,e,c);for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(e,null);t=!0},p(o,c){if(c[0]&135168){n=_e(o[12]);let r;for(r=0;r<n.length;r+=1){const f=cr(o,n,r);s[r]?(s[r].p(f,c),E(s[r],1)):(s[r]=fr(f),s[r].c(),E(s[r],1),s[r].m(e,null))}for(ke(),r=n.length;r<s.length;r+=1)i(r);we()}},i(o){if(!t){for(let c=0;c<n.length;c+=1)E(s[c]);t=!0}},o(o){s=s.filter(Boolean);for(let c=0;c<s.length;c+=1)N(s[c]);t=!1},d(o){o&&$(e),Me(s,o)}}}function rd(l){let e;return{c(){e=p("div"),e.textContent="No snapshots found",u(e,"class","empty-state svelte-m8qcvw")},m(t,n){k(t,e,n)},p:ae,i:ae,o:ae,d(t){t&&$(e)}}}function ad(l){let e;return{c(){e=p("div"),e.textContent="Loading...",u(e,"class","empty-state svelte-m8qcvw")},m(t,n){k(t,e,n)},p:ae,i:ae,o:ae,d(t){t&&$(e)}}}function cd(l){let e;return{c(){e=T("🗑️")},m(t,n){k(t,e,n)},d(t){t&&$(e)}}}function fr(l){var H;let e,t,n,s=l[38].name+"",i,o,c,r,f=An(l[38].created_at)+"",d,_,v,h,m,g=_r(l[38].size_gigabytes)+"",C,y,w,S,M,P=(((H=l[38].regions)==null?void 0:H.join(", "))||"-")+"",D,j,L,R,A,F;function q(){return l[21](l[38])}return R=new Te({props:{variant:"danger",size:"sm",$$slots:{default:[cd]},$$scope:{ctx:l}}}),R.$on("click",q),{c(){e=p("div"),t=p("div"),n=p("div"),i=T(s),o=b(),c=p("div"),r=p("span"),d=T(f),_=b(),v=p("span"),v.textContent="•",h=b(),m=p("span"),C=T(g),y=b(),w=p("span"),w.textContent="•",S=b(),M=p("span"),D=T(P),j=b(),L=p("div"),oe(R.$$.fragment),A=b(),u(n,"class","snapshot-name svelte-m8qcvw"),u(c,"class","snapshot-meta svelte-m8qcvw"),u(t,"class","snapshot-info"),u(L,"class","snapshot-actions"),u(e,"class","snapshot-item svelte-m8qcvw")},m(W,I){k(W,e,I),a(e,t),a(t,n),a(n,i),a(t,o),a(t,c),a(c,r),a(r,d),a(c,_),a(c,v),a(c,h),a(c,m),a(m,C),a(c,y),a(c,w),a(c,S),a(c,M),a(M,D),a(e,j),a(e,L),ne(R,L,null),a(e,A),F=!0},p(W,I){var z;l=W,(!F||I[0]&4096)&&s!==(s=l[38].name+"")&&B(i,s),(!F||I[0]&4096)&&f!==(f=An(l[38].created_at)+"")&&B(d,f),(!F||I[0]&4096)&&g!==(g=_r(l[38].size_gigabytes)+"")&&B(C,g),(!F||I[0]&4096)&&P!==(P=(((z=l[38].regions)==null?void 0:z.join(", "))||"-")+"")&&B(D,P);const J={};I[1]&1024&&(J.$$scope={dirty:I,ctx:l}),R.$set(J)},i(W){F||(E(R.$$.fragment,W),F=!0)},o(W){N(R.$$.fragment,W),F=!1},d(W){W&&$(e),se(R)}}}function fd(l){let e;return{c(){e=T("↻ Refresh")},m(t,n){k(t,e,n)},d(t){t&&$(e)}}}function ud(l){let e,t,n,s,i,o;const c=[ad,rd,id],r=[];function f(d,_){return d[0]?0:d[12].length===0?1:2}return e=f(l),t=r[e]=c[e](l),i=new Te({props:{variant:"ghost",size:"sm",$$slots:{default:[fd]},$$scope:{ctx:l}}}),i.$on("click",l[14]),{c(){t.c(),n=b(),s=p("div"),oe(i.$$.fragment),u(s,"class","card-footer svelte-m8qcvw")},m(d,_){r[e].m(d,_),k(d,n,_),k(d,s,_),ne(i,s,null),o=!0},p(d,_){let v=e;e=f(d),e===v?r[e].p(d,_):(ke(),N(r[v],1,1,()=>{r[v]=null}),we(),t=r[e],t?t.p(d,_):(t=r[e]=c[e](d),t.c()),E(t,1),t.m(n.parentNode,n));const h={};_[1]&1024&&(h.$$scope={dirty:_,ctx:d}),i.$set(h)},i(d){o||(E(t),E(i.$$.fragment,d),o=!0)},o(d){N(t),N(i.$$.fragment,d),o=!1},d(d){d&&($(n),$(s)),r[e].d(d),se(i)}}}function dd(l){let e;return{c(){e=T("+ Custom")},m(t,n){k(t,e,n)},d(t){t&&$(e)}}}function pd(l){let e,t;return e=new Te({props:{slot:"header",variant:"success",size:"sm",$$slots:{default:[dd]},$$scope:{ctx:l}}}),e.$on("click",l[20]),{c(){oe(e.$$.fragment)},m(n,s){ne(e,n,s),t=!0},p(n,s){const i={};s[1]&1024&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){se(e,n)}}}function _d(l){let e,t,n,s,i,o,c;return t=new Ie({props:{variant:"warning",$$slots:{default:[hd]},$$scope:{ctx:l}}}),o=new Te({props:{variant:"primary",$$slots:{default:[gd]},$$scope:{ctx:l}}}),o.$on("click",l[15]),{c(){e=p("div"),oe(t.$$.fragment),n=b(),s=p("p"),s.textContent="Base snapshot is required for provisioning new servers.",i=b(),oe(o.$$.fragment),u(s,"class","svelte-m8qcvw"),u(e,"class","status-missing svelte-m8qcvw")},m(r,f){k(r,e,f),ne(t,e,null),a(e,n),a(e,s),a(e,i),ne(o,e,null),c=!0},p(r,f){const d={};f[1]&1024&&(d.$$scope={dirty:f,ctx:r}),t.$set(d);const _={};f[1]&1024&&(_.$$scope={dirty:f,ctx:r}),o.$set(_)},i(r){c||(E(t.$$.fragment,r),E(o.$$.fragment,r),c=!0)},o(r){N(t.$$.fragment,r),N(o.$$.fragment,r),c=!1},d(r){r&&$(e),se(t),se(o)}}}function vd(l){let e,t,n,s,i,o,c=l[1].name+"",r,f,d,_,v=An(l[1].created_at)+"",h,m;return t=new Ie({props:{variant:"success",$$slots:{default:[bd]},$$scope:{ctx:l}}}),{c(){e=p("div"),oe(t.$$.fragment),n=b(),s=p("div"),i=p("div"),o=T("Name: "),r=T(c),f=b(),d=p("div"),_=T("Created: "),h=T(v),u(s,"class","status-details svelte-m8qcvw"),u(e,"class","status-ok svelte-m8qcvw")},m(g,C){k(g,e,C),ne(t,e,null),a(e,n),a(e,s),a(s,i),a(i,o),a(i,r),a(s,f),a(s,d),a(d,_),a(d,h),m=!0},p(g,C){const y={};C[1]&1024&&(y.$$scope={dirty:C,ctx:g}),t.$set(y),(!m||C[0]&2)&&c!==(c=g[1].name+"")&&B(r,c),(!m||C[0]&2)&&v!==(v=An(g[1].created_at)+"")&&B(h,v)},i(g){m||(E(t.$$.fragment,g),m=!0)},o(g){N(t.$$.fragment,g),m=!1},d(g){g&&$(e),se(t)}}}function md(l){let e;return{c(){e=p("div"),e.textContent="Checking...",u(e,"class","status-checking svelte-m8qcvw")},m(t,n){k(t,e,n)},p:ae,i:ae,o:ae,d(t){t&&$(e)}}}function hd(l){let e;return{c(){e=T("Not found")},m(t,n){k(t,e,n)},d(t){t&&$(e)}}}function gd(l){let e;return{c(){e=T("Create Base Snapshot")},m(t,n){k(t,e,n)},d(t){t&&$(e)}}}function bd(l){let e;return{c(){e=T("✓ Ready")},m(t,n){k(t,e,n)},d(t){t&&$(e)}}}function $d(l){let e,t,n,s;const i=[md,vd,_d],o=[];function c(r,f){return r[1]===null?0:r[1].exists?1:2}return e=c(l),t=o[e]=i[e](l),{c(){t.c(),n=Le()},m(r,f){o[e].m(r,f),k(r,n,f),s=!0},p(r,f){let d=e;e=c(r),e===d?o[e].p(r,f):(ke(),N(o[d],1,1,()=>{o[d]=null}),we(),t=o[e],t?t.p(r,f):(t=o[e]=i[e](r),t.c()),E(t,1),t.m(n.parentNode,n))},i(r){s||(E(t),s=!0)},o(r){N(t),s=!1},d(r){r&&$(n),o[e].d(r)}}}function kd(l){let e,t,n,s,i;return t=new Ie({props:{variant:"info",$$slots:{default:[Cd]},$$scope:{ctx:l}}}),{c(){e=p("div"),oe(t.$$.fragment),n=b(),s=p("p"),s.textContent="Optional: Use DO Container Registry for private images.",u(s,"class","svelte-m8qcvw"),u(e,"class","status-missing svelte-m8qcvw")},m(o,c){k(o,e,c),ne(t,e,null),a(e,n),a(e,s),i=!0},p(o,c){const r={};c[1]&1024&&(r.$$scope={dirty:c,ctx:o}),t.$set(r)},i(o){i||(E(t.$$.fragment,o),i=!0)},o(o){N(t.$$.fragment,o),i=!1},d(o){o&&$(e),se(t)}}}function wd(l){let e,t,n,s,i,o,c=l[2].name+"",r,f,d,_,v=l[2].region+"",h,m;return t=new Ie({props:{variant:"success",$$slots:{default:[Sd]},$$scope:{ctx:l}}}),{c(){e=p("div"),oe(t.$$.fragment),n=b(),s=p("div"),i=p("div"),o=T("Name: "),r=T(c),f=b(),d=p("div"),_=T("Region: "),h=T(v),u(s,"class","status-details svelte-m8qcvw"),u(e,"class","status-ok svelte-m8qcvw")},m(g,C){k(g,e,C),ne(t,e,null),a(e,n),a(e,s),a(s,i),a(i,o),a(i,r),a(s,f),a(s,d),a(d,_),a(d,h),m=!0},p(g,C){const y={};C[1]&1024&&(y.$$scope={dirty:C,ctx:g}),t.$set(y),(!m||C[0]&4)&&c!==(c=g[2].name+"")&&B(r,c),(!m||C[0]&4)&&v!==(v=g[2].region+"")&&B(h,v)},i(g){m||(E(t.$$.fragment,g),m=!0)},o(g){N(t.$$.fragment,g),m=!1},d(g){g&&$(e),se(t)}}}function yd(l){let e;return{c(){e=p("div"),e.textContent="Checking...",u(e,"class","status-checking svelte-m8qcvw")},m(t,n){k(t,e,n)},p:ae,i:ae,o:ae,d(t){t&&$(e)}}}function Cd(l){let e;return{c(){e=T("Not configured")},m(t,n){k(t,e,n)},d(t){t&&$(e)}}}function Sd(l){let e;return{c(){e=T("✓ Connected")},m(t,n){k(t,e,n)},d(t){t&&$(e)}}}function Td(l){let e,t,n,s;const i=[yd,wd,kd],o=[];function c(r,f){return r[2]===null?0:r[2].exists?1:2}return e=c(l),t=o[e]=i[e](l),{c(){t.c(),n=Le()},m(r,f){o[e].m(r,f),k(r,n,f),s=!0},p(r,f){let d=e;e=c(r),e===d?o[e].p(r,f):(ke(),N(o[d],1,1,()=>{o[d]=null}),we(),t=o[e],t?t.p(r,f):(t=o[e]=i[e](r),t.c()),E(t,1),t.m(n.parentNode,n))},i(r){s||(E(t),s=!0)},o(r){N(t),s=!1},d(r){r&&$(n),o[e].d(r)}}}function ur(l){let e,t;return e=new Re({props:{title:"📋 Progress",$$slots:{default:[Dd]},$$scope:{ctx:l}}}),{c(){oe(e.$$.fragment)},m(n,s){ne(e,n,s),t=!0},p(n,s){const i={};s[0]&48|s[1]&1024&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){se(e,n)}}}function dr(l){let e,t=l[35].message+"",n,s;return{c(){e=p("div"),n=T(t),u(e,"class",s="log-line "+l[35].type+" svelte-m8qcvw")},m(i,o){k(i,e,o),a(e,n)},p(i,o){o[0]&32&&t!==(t=i[35].message+"")&&B(n,t),o[0]&32&&s!==(s="log-line "+i[35].type+" svelte-m8qcvw")&&u(e,"class",s)},d(i){i&&$(e)}}}function Dd(l){let e,t,n,s,i=_e(l[5]),o=[];for(let c=0;c<i.length;c+=1)o[c]=dr(ar(l,i,c));return{c(){e=p("div"),t=p("div"),n=b(),s=p("div");for(let c=0;c<o.length;c+=1)o[c].c();u(t,"class","progress-fill svelte-m8qcvw"),qe(t,"width",l[4]+"%"),u(e,"class","progress-bar svelte-m8qcvw"),u(s,"class","log-container svelte-m8qcvw")},m(c,r){k(c,e,r),a(e,t),k(c,n,r),k(c,s,r);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(s,null)},p(c,r){if(r[0]&16&&qe(t,"width",c[4]+"%"),r[0]&32){i=_e(c[5]);let f;for(f=0;f<i.length;f+=1){const d=ar(c,i,f);o[f]?o[f].p(d,r):(o[f]=dr(d),o[f].c(),o[f].m(s,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=i.length}},d(c){c&&($(e),$(n),$(s)),Me(o,c)}}}function pr(l){let e,t=l[32].label+"",n;return{c(){e=p("option"),n=T(t),e.__value=l[32].value,Q(e,e.__value)},m(s,i){k(s,e,i),a(e,n)},p:ae,d(s){s&&$(e)}}}function Pd(l){let e,t,n,s,i,o,c,r,f,d,_,v,h,m,g,C,y,w,S,M,P,D,j,L,R,A,F,q,H=_e(l[13]),W=[];for(let I=0;I<H.length;I+=1)W[I]=pr(rr(l,H,I));return{c(){e=p("form"),t=p("div"),n=p("label"),n.textContent="Snapshot Name *",s=b(),i=p("input"),o=b(),c=p("div"),r=p("label"),r.textContent="Base Image",f=b(),d=p("select");for(let I=0;I<W.length;I+=1)W[I].c();_=b(),v=p("div"),h=p("label"),h.textContent="Pre-install",m=b(),g=p("div"),C=p("label"),y=p("input"),w=T(`
          Docker`),S=b(),M=p("label"),P=p("input"),D=T(`
          Nginx`),j=b(),L=p("label"),R=p("input"),A=T(`
          Certbot (SSL)`),u(n,"for","snap-name"),u(n,"class","svelte-m8qcvw"),u(i,"id","snap-name"),u(i,"type","text"),u(i,"placeholder","my-base-snapshot"),i.required=!0,u(i,"class","svelte-m8qcvw"),u(t,"class","form-group svelte-m8qcvw"),u(r,"for","base-image"),u(r,"class","svelte-m8qcvw"),u(d,"id","base-image"),u(d,"class","svelte-m8qcvw"),l[8]===void 0&&Ue(()=>l[24].call(d)),u(c,"class","form-group svelte-m8qcvw"),u(h,"class","svelte-m8qcvw"),u(y,"type","checkbox"),u(y,"class","svelte-m8qcvw"),u(C,"class","checkbox-item svelte-m8qcvw"),u(P,"type","checkbox"),u(P,"class","svelte-m8qcvw"),u(M,"class","checkbox-item svelte-m8qcvw"),u(R,"type","checkbox"),u(R,"class","svelte-m8qcvw"),u(L,"class","checkbox-item svelte-m8qcvw"),u(g,"class","checkbox-list svelte-m8qcvw"),u(v,"class","form-group svelte-m8qcvw")},m(I,J){k(I,e,J),a(e,t),a(t,n),a(t,s),a(t,i),Q(i,l[7]),a(e,o),a(e,c),a(c,r),a(c,f),a(c,d);for(let z=0;z<W.length;z+=1)W[z]&&W[z].m(d,null);Pe(d,l[8],!0),a(e,_),a(e,v),a(v,h),a(v,m),a(v,g),a(g,C),a(C,y),y.checked=l[9],a(C,w),a(g,S),a(g,M),a(M,P),P.checked=l[10],a(M,D),a(g,j),a(g,L),a(L,R),R.checked=l[11],a(L,A),F||(q=[te(i,"input",l[23]),te(d,"change",l[24]),te(y,"change",l[25]),te(P,"change",l[26]),te(R,"change",l[27]),te(e,"submit",Xr(l[16]))],F=!0)},p(I,J){if(J[0]&128&&i.value!==I[7]&&Q(i,I[7]),J[0]&8192){H=_e(I[13]);let z;for(z=0;z<H.length;z+=1){const G=rr(I,H,z);W[z]?W[z].p(G,J):(W[z]=pr(G),W[z].c(),W[z].m(d,null))}for(;z<W.length;z+=1)W[z].d(1);W.length=H.length}J[0]&8448&&Pe(d,I[8]),J[0]&512&&(y.checked=I[9]),J[0]&1024&&(P.checked=I[10]),J[0]&2048&&(R.checked=I[11])},d(I){I&&$(e),Me(W,I),F=!1,Fe(q)}}}function Ed(l){let e;return{c(){e=T("Cancel")},m(t,n){k(t,e,n)},d(t){t&&$(e)}}}function Md(l){let e;return{c(){e=T("🔨 Build Snapshot")},m(t,n){k(t,e,n)},d(t){t&&$(e)}}}function jd(l){let e;return{c(){e=T("Building...")},m(t,n){k(t,e,n)},d(t){t&&$(e)}}}function Ld(l){let e;function t(i,o){return i[6]?jd:Md}let n=t(l),s=n(l);return{c(){s.c(),e=Le()},m(i,o){s.m(i,o),k(i,e,o)},p(i,o){n!==(n=t(i))&&(s.d(1),s=n(i),s&&(s.c(),s.m(e.parentNode,e)))},d(i){i&&$(e),s.d(i)}}}function Nd(l){let e,t,n,s,i;return t=new Te({props:{variant:"ghost",$$slots:{default:[Ed]},$$scope:{ctx:l}}}),t.$on("click",l[22]),s=new Te({props:{variant:"primary",disabled:l[6],$$slots:{default:[Ld]},$$scope:{ctx:l}}}),s.$on("click",l[16]),{c(){e=p("div"),oe(t.$$.fragment),n=b(),oe(s.$$.fragment),u(e,"slot","footer")},m(o,c){k(o,e,c),ne(t,e,null),a(e,n),ne(s,e,null),i=!0},p(o,c){const r={};c[1]&1024&&(r.$$scope={dirty:c,ctx:o}),t.$set(r);const f={};c[0]&64&&(f.disabled=o[6]),c[0]&64|c[1]&1024&&(f.$$scope={dirty:c,ctx:o}),s.$set(f)},i(o){i||(E(t.$$.fragment,o),E(s.$$.fragment,o),i=!0)},o(o){N(t.$$.fragment,o),N(s.$$.fragment,o),i=!1},d(o){o&&$(e),se(t),se(s)}}}function Rd(l){let e,t,n,s,i,o,c,r,f,d,_,v,h;n=new Re({props:{title:"📸 Your Snapshots",$$slots:{header:[pd],default:[ud]},$$scope:{ctx:l}}}),o=new Re({props:{title:"🏗️ Base Snapshot",$$slots:{default:[$d]},$$scope:{ctx:l}}}),r=new Re({props:{title:"📦 App Registry (DO)",$$slots:{default:[Td]},$$scope:{ctx:l}}});let m=l[5].length>0&&ur(l);function g(y){l[28](y)}let C={title:"Build Custom Snapshot",width:"500px",$$slots:{footer:[Nd],default:[Pd]},$$scope:{ctx:l}};return l[3]!==void 0&&(C.open=l[3]),_=new Nn({props:C}),kt.push(()=>jn(_,"open",g)),_.$on("close",l[29]),{c(){e=p("div"),t=p("div"),oe(n.$$.fragment),s=b(),i=p("div"),oe(o.$$.fragment),c=b(),oe(r.$$.fragment),f=b(),m&&m.c(),d=b(),oe(_.$$.fragment),u(i,"class","right-column svelte-m8qcvw"),u(t,"class","snapshots-grid svelte-m8qcvw"),u(e,"class","snapshots-page svelte-m8qcvw")},m(y,w){k(y,e,w),a(e,t),ne(n,t,null),a(t,s),a(t,i),ne(o,i,null),a(i,c),ne(r,i,null),a(i,f),m&&m.m(i,null),k(y,d,w),ne(_,y,w),h=!0},p(y,w){const S={};w[0]&4105|w[1]&1024&&(S.$$scope={dirty:w,ctx:y}),n.$set(S);const M={};w[0]&2|w[1]&1024&&(M.$$scope={dirty:w,ctx:y}),o.$set(M);const P={};w[0]&4|w[1]&1024&&(P.$$scope={dirty:w,ctx:y}),r.$set(P),y[5].length>0?m?(m.p(y,w),w[0]&32&&E(m,1)):(m=ur(y),m.c(),E(m,1),m.m(i,null)):m&&(ke(),N(m,1,1,()=>{m=null}),we());const D={};w[0]&4040|w[1]&1024&&(D.$$scope={dirty:w,ctx:y}),!v&&w[0]&8&&(v=!0,D.open=y[3],Mn(()=>v=!1)),_.$set(D)},i(y){h||(E(n.$$.fragment,y),E(o.$$.fragment,y),E(r.$$.fragment,y),E(m),E(_.$$.fragment,y),h=!0)},o(y){N(n.$$.fragment,y),N(o.$$.fragment,y),N(r.$$.fragment,y),N(m),N(_.$$.fragment,y),h=!1},d(y){y&&($(e),$(d)),se(n),se(o),se(r),m&&m.d(),se(_,y)}}}function An(l){return l?new Date(l).toLocaleDateString():"-"}function _r(l){return l?`${l} GB`:"-"}function Od(l,e,t){let n,s,i;We(l,Ln,O=>t(19,s=O)),We(l,Zn,O=>t(12,i=O));let o=!1,c=null,r=null,f=!1,d=0,_=[],v=!1,h="",m="ubuntu-22-04-x64",g=!0,C=!0,y=!0;const w=[{value:"ubuntu-22-04-x64",label:"Ubuntu 22.04 LTS"},{value:"ubuntu-20-04-x64",label:"Ubuntu 20.04 LTS"},{value:"debian-11-x64",label:"Debian 11"},{value:"debian-12-x64",label:"Debian 12"}];ul(()=>{M(),P()});function S(){Ln.refresh()}async function M(){try{const O=await Be("GET","/infra/setup/status");t(1,c=O)}catch(O){t(1,c={exists:!1,error:O.message})}}async function P(){try{const O=await Be("GET","/infra/registry");t(2,r=O)}catch(O){t(2,r={exists:!1,error:O.message})}}async function D(){t(6,v=!0),t(4,d=0),t(5,_=[]);try{_.push({message:"🚀 Creating base snapshot...",type:"info"}),t(4,d=5),await ia("POST","/infra/setup/init/stream",{},O=>{O.message&&(_.push({message:O.message,type:O.type||"info"}),t(5,_)),O.progress&&t(4,d=O.progress),(O.type==="done"||O.type==="complete")&&t(4,d=100)}),_.push({message:"✅ Base snapshot created successfully",type:"success"}),ve.success("Base snapshot created!"),await M(),await S()}catch(O){_.push({message:`❌ Error: ${O.message}`,type:"error"}),ve.error("Failed to create base snapshot: "+O.message)}finally{t(6,v=!1)}}async function j(){if(!h){ve.error("Snapshot name is required");return}t(6,v=!0),t(4,d=0),t(5,_=[]);try{_.push({message:`Building snapshot: ${h}`,type:"info"}),t(4,d=10);const O=await Be("POST","/infra/snapshots/build",{name:h,base_image:m,install_docker:g,install_nginx:C,install_certbot:y});t(4,d=100),_.push({message:"✅ Snapshot created successfully",type:"success"}),ve.success("Snapshot created!"),await S(),t(3,f=!1)}catch(O){_.push({message:`❌ Error: ${O.message}`,type:"error"}),ve.error(O.message)}finally{t(6,v=!1)}}async function L(O,U){if(confirm(`Delete snapshot "${U}"? This cannot be undone.`))try{await Be("DELETE",`/infra/snapshots/${O}`),ve.success("Snapshot deleted"),await S()}catch(Y){ve.error("Failed to delete snapshot: "+Y.message)}}const R=()=>t(3,f=!0),A=O=>L(O.id,O.name),F=()=>t(3,f=!1);function q(){h=this.value,t(7,h)}function H(){m=Ge(this),t(8,m),t(13,w)}function W(){g=this.checked,t(9,g)}function I(){C=this.checked,t(10,C)}function J(){y=this.checked,t(11,y)}function z(O){f=O,t(3,f)}const G=()=>t(3,f=!1);return l.$$.update=()=>{l.$$.dirty[0]&524288&&t(18,n=s||{loading:!1}),l.$$.dirty[0]&262144&&t(0,o=n.loading)},[o,c,r,f,d,_,v,h,m,g,C,y,i,w,S,D,j,L,n,s,R,A,F,q,H,W,I,J,z,G]}class Ad extends Ve{constructor(e){super(),Ye(this,e,Od,Rd,Je,{},null,[-1,-1])}}function vr(l,e,t){var i,o,c;const n=l.slice();n[22]=e[t];const s=n[22].ip||((c=(o=(i=n[22].networks)==null?void 0:i.v4)==null?void 0:o[0])==null?void 0:c.ip_address);return n[23]=s,n}function mr(l,e,t){const n=l.slice();return n[26]=e[t],n}function hr(l,e,t){const n=l.slice();return n[29]=e[t],n}function gr(l){let e,t=l[29].label+"",n;return{c(){e=p("option"),n=T(t),e.__value=l[29].value,Q(e,e.__value)},m(s,i){k(s,e,i),a(e,n)},p:ae,d(s){s&&$(e)}}}function br(l){let e,t=l[26].charAt(0).toUpperCase()+l[26].slice(1)+"",n;return{c(){e=p("option"),n=T(t),e.__value=l[26],Q(e,e.__value)},m(s,i){k(s,e,i),a(e,n)},p:ae,d(s){s&&$(e)}}}function $r(l){let e,t=(l[22].name||"unnamed")+"",n,s,i=l[23]+"",o,c,r;return{c(){e=p("option"),n=T(t),s=T(" ("),o=T(i),c=T(")"),e.__value=r=l[23],Q(e,e.__value)},m(f,d){k(f,e,d),a(e,n),a(e,s),a(e,o),a(e,c)},p(f,d){d[0]&64&&t!==(t=(f[22].name||"unnamed")+"")&&B(n,t),d[0]&64&&i!==(i=f[23]+"")&&B(o,i),d[0]&64&&r!==(r=f[23])&&(e.__value=r,Q(e,e.__value))},d(f){f&&$(e)}}}function kr(l){let e,t=l[23]&&$r(l);return{c(){t&&t.c(),e=Le()},m(n,s){t&&t.m(n,s),k(n,e,s)},p(n,s){n[23]?t?t.p(n,s):(t=$r(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(n){n&&$(e),t&&t.d(n)}}}function qd(l){let e;return{c(){e=T("🚀 Deploy Service")},m(t,n){k(t,e,n)},d(t){t&&$(e)}}}function Fd(l){let e;return{c(){e=T("Deploying...")},m(t,n){k(t,e,n)},d(t){t&&$(e)}}}function zd(l){let e;function t(i,o){return i[4]?Fd:qd}let n=t(l),s=n(l);return{c(){s.c(),e=Le()},m(i,o){s.m(i,o),k(i,e,o)},p(i,o){n!==(n=t(i))&&(s.d(1),s=n(i),s&&(s.c(),s.m(e.parentNode,e)))},d(i){i&&$(e),s.d(i)}}}function Bd(l){let e,t,n,s,i,o,c,r,f,d,_,v,h,m,g,C,y,w,S,M,P,D,j,L,R,A,F,q,H,W,I,J=_e(l[7]),z=[];for(let Z=0;Z<J.length;Z+=1)z[Z]=gr(hr(l,J,Z));let G=_e(l[8]),O=[];for(let Z=0;Z<G.length;Z+=1)O[Z]=br(mr(l,G,Z));let U=_e(l[6]),Y=[];for(let Z=0;Z<U.length;Z+=1)Y[Z]=kr(vr(l,U,Z));return q=new Te({props:{variant:"primary",type:"submit",disabled:l[4],$$slots:{default:[zd]},$$scope:{ctx:l}}}),{c(){e=p("p"),e.textContent="Deploy stateful services with automatic configuration, persistence, and service mesh.",t=b(),n=p("form"),s=p("div"),i=p("label"),i.textContent="Service Type *",o=b(),c=p("select"),r=p("option"),r.textContent="Select service...";for(let Z=0;Z<z.length;Z+=1)z[Z].c();f=b(),d=p("div"),_=p("label"),_.textContent="Project *",v=b(),h=p("input"),m=b(),g=p("div"),C=p("label"),C.textContent="Environment",y=b(),w=p("select");for(let Z=0;Z<O.length;Z+=1)O[Z].c();S=b(),M=p("div"),P=p("label"),P.textContent="Target Server *",D=b(),j=p("select"),L=p("option"),L.textContent="Select server...";for(let Z=0;Z<Y.length;Z+=1)Y[Z].c();R=b(),A=p("small"),A.textContent="Servers from Infrastructure tab",F=b(),oe(q.$$.fragment),u(e,"class","description svelte-2vlpp7"),u(i,"for","svc-type"),u(i,"class","svelte-2vlpp7"),r.__value="",Q(r,r.__value),u(c,"id","svc-type"),c.required=!0,u(c,"class","svelte-2vlpp7"),l[0]===void 0&&Ue(()=>l[11].call(c)),u(s,"class","form-group svelte-2vlpp7"),u(_,"for","svc-project"),u(_,"class","svelte-2vlpp7"),u(h,"id","svc-project"),u(h,"type","text"),u(h,"placeholder","myapp"),h.required=!0,u(h,"class","svelte-2vlpp7"),u(d,"class","form-group svelte-2vlpp7"),u(C,"for","svc-env"),u(C,"class","svelte-2vlpp7"),u(w,"id","svc-env"),u(w,"class","svelte-2vlpp7"),l[2]===void 0&&Ue(()=>l[13].call(w)),u(g,"class","form-group svelte-2vlpp7"),u(P,"for","svc-server"),u(P,"class","svelte-2vlpp7"),L.__value="",Q(L,L.__value),u(j,"id","svc-server"),j.required=!0,u(j,"class","svelte-2vlpp7"),l[3]===void 0&&Ue(()=>l[14].call(j)),u(A,"class","svelte-2vlpp7"),u(M,"class","form-group svelte-2vlpp7")},m(Z,ie){k(Z,e,ie),k(Z,t,ie),k(Z,n,ie),a(n,s),a(s,i),a(s,o),a(s,c),a(c,r);for(let le=0;le<z.length;le+=1)z[le]&&z[le].m(c,null);Pe(c,l[0],!0),a(n,f),a(n,d),a(d,_),a(d,v),a(d,h),Q(h,l[1]),a(n,m),a(n,g),a(g,C),a(g,y),a(g,w);for(let le=0;le<O.length;le+=1)O[le]&&O[le].m(w,null);Pe(w,l[2],!0),a(n,S),a(n,M),a(M,P),a(M,D),a(M,j),a(j,L);for(let le=0;le<Y.length;le+=1)Y[le]&&Y[le].m(j,null);Pe(j,l[3],!0),a(M,R),a(M,A),a(n,F),ne(q,n,null),H=!0,W||(I=[te(c,"change",l[11]),te(h,"input",l[12]),te(w,"change",l[13]),te(j,"change",l[14]),te(n,"submit",l[9])],W=!0)},p(Z,ie){if(ie[0]&128){J=_e(Z[7]);let ee;for(ee=0;ee<J.length;ee+=1){const ue=hr(Z,J,ee);z[ee]?z[ee].p(ue,ie):(z[ee]=gr(ue),z[ee].c(),z[ee].m(c,null))}for(;ee<z.length;ee+=1)z[ee].d(1);z.length=J.length}if(ie[0]&129&&Pe(c,Z[0]),ie[0]&2&&h.value!==Z[1]&&Q(h,Z[1]),ie[0]&256){G=_e(Z[8]);let ee;for(ee=0;ee<G.length;ee+=1){const ue=mr(Z,G,ee);O[ee]?O[ee].p(ue,ie):(O[ee]=br(ue),O[ee].c(),O[ee].m(w,null))}for(;ee<O.length;ee+=1)O[ee].d(1);O.length=G.length}if(ie[0]&260&&Pe(w,Z[2]),ie[0]&64){U=_e(Z[6]);let ee;for(ee=0;ee<U.length;ee+=1){const ue=vr(Z,U,ee);Y[ee]?Y[ee].p(ue,ie):(Y[ee]=kr(ue),Y[ee].c(),Y[ee].m(j,null))}for(;ee<Y.length;ee+=1)Y[ee].d(1);Y.length=U.length}ie[0]&72&&Pe(j,Z[3]);const le={};ie[0]&16&&(le.disabled=Z[4]),ie[0]&16|ie[1]&2&&(le.$$scope={dirty:ie,ctx:Z}),q.$set(le)},i(Z){H||(E(q.$$.fragment,Z),H=!0)},o(Z){N(q.$$.fragment,Z),H=!1},d(Z){Z&&($(e),$(t),$(n)),Me(z,Z),Me(O,Z),Me(Y,Z),se(q),W=!1,Fe(I)}}}function Ud(l){let e;return{c(){e=p("div"),e.innerHTML='<div class="empty-icon svelte-2vlpp7">🗄️</div> <div>Deploy a service to see connection details</div>',u(e,"class","empty-result svelte-2vlpp7")},m(t,n){k(t,e,n)},p:ae,d(t){t&&$(e)}}}function Id(l){let e,t,n,s,i,o=l[5].service_type+"",c,r,f,d,_,v,h,m,g=(l[5].host||"localhost")+"",C,y,w,S,M,P,D=l[5].port+"",j,L,R,A,F,q,H,W,I,J=l[5].database&&wr(l),z=l[5].username&&yr(l),G=l[5].password&&Cr(l),O=l[5].connection_url&&Sr(l);return{c(){e=p("div"),t=p("div"),n=p("span"),n.textContent="✅",s=b(),i=p("span"),c=T(o),r=T(" deployed"),f=b(),d=p("div"),_=p("div"),v=p("span"),v.textContent="Host:",h=b(),m=p("code"),C=T(g),y=b(),w=p("div"),S=p("span"),S.textContent="Port:",M=b(),P=p("code"),j=T(D),L=b(),J&&J.c(),R=b(),z&&z.c(),A=b(),G&&G.c(),F=b(),O&&O.c(),q=b(),H=p("small"),H.textContent="Click any value to copy",u(n,"class","result-icon svelte-2vlpp7"),u(i,"class","result-title svelte-2vlpp7"),u(t,"class","result-header svelte-2vlpp7"),u(v,"class","label svelte-2vlpp7"),u(m,"class","value clickable svelte-2vlpp7"),u(_,"class","info-row svelte-2vlpp7"),u(S,"class","label svelte-2vlpp7"),u(P,"class","value clickable svelte-2vlpp7"),u(w,"class","info-row svelte-2vlpp7"),u(d,"class","connection-info svelte-2vlpp7"),u(H,"class","copy-hint svelte-2vlpp7"),u(e,"class","result-content svelte-2vlpp7")},m(U,Y){k(U,e,Y),a(e,t),a(t,n),a(t,s),a(t,i),a(i,c),a(i,r),a(e,f),a(e,d),a(d,_),a(_,v),a(_,h),a(_,m),a(m,C),a(d,y),a(d,w),a(w,S),a(w,M),a(w,P),a(P,j),a(d,L),J&&J.m(d,null),a(d,R),z&&z.m(d,null),a(d,A),G&&G.m(d,null),a(d,F),O&&O.m(d,null),a(e,q),a(e,H),W||(I=[te(m,"click",l[15]),te(P,"click",l[16])],W=!0)},p(U,Y){Y[0]&32&&o!==(o=U[5].service_type+"")&&B(c,o),Y[0]&32&&g!==(g=(U[5].host||"localhost")+"")&&B(C,g),Y[0]&32&&D!==(D=U[5].port+"")&&B(j,D),U[5].database?J?J.p(U,Y):(J=wr(U),J.c(),J.m(d,R)):J&&(J.d(1),J=null),U[5].username?z?z.p(U,Y):(z=yr(U),z.c(),z.m(d,A)):z&&(z.d(1),z=null),U[5].password?G?G.p(U,Y):(G=Cr(U),G.c(),G.m(d,F)):G&&(G.d(1),G=null),U[5].connection_url?O?O.p(U,Y):(O=Sr(U),O.c(),O.m(d,null)):O&&(O.d(1),O=null)},d(U){U&&$(e),J&&J.d(),z&&z.d(),G&&G.d(),O&&O.d(),W=!1,Fe(I)}}}function wr(l){let e,t,n,s,i=l[5].database+"",o,c,r;return{c(){e=p("div"),t=p("span"),t.textContent="Database:",n=b(),s=p("code"),o=T(i),u(t,"class","label svelte-2vlpp7"),u(s,"class","value clickable svelte-2vlpp7"),u(e,"class","info-row svelte-2vlpp7")},m(f,d){k(f,e,d),a(e,t),a(e,n),a(e,s),a(s,o),c||(r=te(s,"click",l[17]),c=!0)},p(f,d){d[0]&32&&i!==(i=f[5].database+"")&&B(o,i)},d(f){f&&$(e),c=!1,r()}}}function yr(l){let e,t,n,s,i=l[5].username+"",o,c,r;return{c(){e=p("div"),t=p("span"),t.textContent="Username:",n=b(),s=p("code"),o=T(i),u(t,"class","label svelte-2vlpp7"),u(s,"class","value clickable svelte-2vlpp7"),u(e,"class","info-row svelte-2vlpp7")},m(f,d){k(f,e,d),a(e,t),a(e,n),a(e,s),a(s,o),c||(r=te(s,"click",l[18]),c=!0)},p(f,d){d[0]&32&&i!==(i=f[5].username+"")&&B(o,i)},d(f){f&&$(e),c=!1,r()}}}function Cr(l){let e,t,n,s,i=l[5].password+"",o,c,r;return{c(){e=p("div"),t=p("span"),t.textContent="Password:",n=b(),s=p("code"),o=T(i),u(t,"class","label svelte-2vlpp7"),u(s,"class","value clickable svelte-2vlpp7"),u(e,"class","info-row svelte-2vlpp7")},m(f,d){k(f,e,d),a(e,t),a(e,n),a(e,s),a(s,o),c||(r=te(s,"click",l[19]),c=!0)},p(f,d){d[0]&32&&i!==(i=f[5].password+"")&&B(o,i)},d(f){f&&$(e),c=!1,r()}}}function Sr(l){let e,t,n,s,i=l[5].connection_url+"",o,c,r;return{c(){e=p("div"),t=p("span"),t.textContent="Connection URL:",n=b(),s=p("code"),o=T(i),u(t,"class","label svelte-2vlpp7"),u(s,"class","value url clickable svelte-2vlpp7"),u(e,"class","info-row full-width svelte-2vlpp7")},m(f,d){k(f,e,d),a(e,t),a(e,n),a(e,s),a(s,o),c||(r=te(s,"click",l[20]),c=!0)},p(f,d){d[0]&32&&i!==(i=f[5].connection_url+"")&&B(o,i)},d(f){f&&$(e),c=!1,r()}}}function Hd(l){let e;function t(i,o){return i[5]?Id:Ud}let n=t(l),s=n(l);return{c(){s.c(),e=Le()},m(i,o){s.m(i,o),k(i,e,o)},p(i,o){n===(n=t(i))&&s?s.p(i,o):(s.d(1),s=n(i),s&&(s.c(),s.m(e.parentNode,e)))},d(i){i&&$(e),s.d(i)}}}function Gd(l){let e;return{c(){e=p("div"),e.innerHTML='<div class="feature svelte-2vlpp7"><strong class="svelte-2vlpp7">🔐 Auto Credentials</strong> <p class="svelte-2vlpp7">Deterministic passwords generated from project/env. Same inputs = same password.</p></div> <div class="feature svelte-2vlpp7"><strong class="svelte-2vlpp7">💾 Persistent Storage</strong> <p class="svelte-2vlpp7">Data volumes mounted at /data. Survives container restarts and redeploys.</p></div> <div class="feature svelte-2vlpp7"><strong class="svelte-2vlpp7">🔀 Service Mesh</strong> <p class="svelte-2vlpp7">Nginx proxy on internal ports. Apps connect to localhost:PORT.</p></div> <div class="feature svelte-2vlpp7"><strong class="svelte-2vlpp7">🔧 Auto-Inject</strong> <p class="svelte-2vlpp7">Enable &quot;Auto-inject&quot; in Deploy tab to get DATABASE_URL automatically.</p></div>',u(e,"class","features-grid svelte-2vlpp7")},m(t,n){k(t,e,n)},p:ae,d(t){t&&$(e)}}}function Wd(l){let e,t,n,s,i,o,c,r;return n=new Re({props:{title:"🗄️ Deploy Database/Cache",$$slots:{default:[Bd]},$$scope:{ctx:l}}}),i=new Re({props:{title:"📋 Deployment Result",$$slots:{default:[Hd]},$$scope:{ctx:l}}}),c=new Re({props:{title:"ℹ️ How It Works",$$slots:{default:[Gd]},$$scope:{ctx:l}}}),{c(){e=p("div"),t=p("div"),oe(n.$$.fragment),s=b(),oe(i.$$.fragment),o=b(),oe(c.$$.fragment),u(t,"class","services-grid svelte-2vlpp7"),u(e,"class","services-page svelte-2vlpp7")},m(f,d){k(f,e,d),a(e,t),ne(n,t,null),a(t,s),ne(i,t,null),a(e,o),ne(c,e,null),r=!0},p(f,d){const _={};d[0]&95|d[1]&2&&(_.$$scope={dirty:d,ctx:f}),n.$set(_);const v={};d[0]&32|d[1]&2&&(v.$$scope={dirty:d,ctx:f}),i.$set(v);const h={};d[1]&2&&(h.$$scope={dirty:d,ctx:f}),c.$set(h)},i(f){r||(E(n.$$.fragment,f),E(i.$$.fragment,f),E(c.$$.fragment,f),r=!0)},o(f){N(n.$$.fragment,f),N(i.$$.fragment,f),N(c.$$.fragment,f),r=!1},d(f){f&&$(e),se(n),se(i),se(c)}}}function Jd(l,e,t){let n;We(l,bl,R=>t(6,n=R));let s="",i="",o="prod",c="",r=!1,f=null;const d=[{value:"postgres",label:"🐘 PostgreSQL",port:5432},{value:"redis",label:"⚡ Redis",port:6379},{value:"mysql",label:"🐬 MySQL",port:3306},{value:"mongo",label:"🍃 MongoDB",port:27017}],_=["prod","staging","dev"];ul(()=>{v()});async function v(){try{const R=await Be("GET","/infra/servers");bl.set(R.servers||R||[])}catch(R){console.error("Failed to load servers:",R)}}async function h(R){if(R.preventDefault(),!s||!i||!c){ve.error("Please fill in all required fields");return}t(4,r=!0),t(5,f=null);try{ve.error("Service deployment not yet implemented. Use Deploy tab instead.");return}catch(A){ve.error("Deployment failed: "+A.message)}finally{t(4,r=!1)}}function m(R){navigator.clipboard.writeText(R),ve.success("Copied to clipboard")}function g(){s=Ge(this),t(0,s),t(7,d)}function C(){i=this.value,t(1,i)}function y(){o=Ge(this),t(2,o),t(8,_)}function w(){c=Ge(this),t(3,c)}return[s,i,o,c,r,f,n,d,_,h,m,g,C,y,w,()=>m(f.host||"localhost"),()=>m(String(f.port)),()=>m(f.database),()=>m(f.username),()=>m(f.password),()=>m(f.connection_url)]}class Yd extends Ve{constructor(e){super(),Ye(this,e,Jd,Wd,Je,{},null,[-1,-1])}}const{Boolean:Vd}=Kr;function Tr(l,e,t){const n=l.slice();return n[32]=e[t],n}function Kd(l){let e,t,n,s,i,o,c,r,f,d;return{c(){e=p("div"),t=p("label"),t.textContent="Theme",n=b(),s=p("select"),i=p("option"),i.textContent="🌙 Dark (Space)",o=p("option"),o.textContent="☀️ Light",c=b(),r=p("p"),r.textContent="Theme preference is saved to your browser.",u(t,"for","theme-select"),u(t,"class","svelte-16vnl3x"),i.__value="dark",Q(i,i.__value),o.__value="light",Q(o,o.__value),u(s,"id","theme-select"),u(s,"class","svelte-16vnl3x"),l[14]===void 0&&Ue(()=>l[21].call(s)),u(e,"class","form-group svelte-16vnl3x"),u(r,"class","hint svelte-16vnl3x")},m(_,v){k(_,e,v),a(e,t),a(e,n),a(e,s),a(s,i),a(s,o),Pe(s,l[14],!0),k(_,c,v),k(_,r,v),f||(d=[te(s,"change",l[21]),te(s,"change",l[22])],f=!0)},p(_,v){v[0]&16384&&Pe(s,_[14])},d(_){_&&($(e),$(c),$(r)),f=!1,Fe(d)}}}function Qd(l){let e;return{c(){e=T("Save Token")},m(t,n){k(t,e,n)},d(t){t&&$(e)}}}function Xd(l){let e,t;return e=new Ie({props:{variant:"danger",$$slots:{default:[ep]},$$scope:{ctx:l}}}),{c(){oe(e.$$.fragment)},m(n,s){ne(e,n,s),t=!0},p(n,s){const i={};s[1]&16&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){se(e,n)}}}function Zd(l){let e,t;return e=new Ie({props:{variant:"warning",$$slots:{default:[tp]},$$scope:{ctx:l}}}),{c(){oe(e.$$.fragment)},m(n,s){ne(e,n,s),t=!0},p(n,s){const i={};s[1]&16&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){se(e,n)}}}function xd(l){let e,t,n,s,i;return e=new Ie({props:{variant:"success",$$slots:{default:[lp]},$$scope:{ctx:l}}}),{c(){oe(e.$$.fragment),t=b(),n=p("span"),s=T(l[0]),u(n,"class","token-preview svelte-16vnl3x")},m(o,c){ne(e,o,c),k(o,t,c),k(o,n,c),a(n,s),i=!0},p(o,c){const r={};c[1]&16&&(r.$$scope={dirty:c,ctx:o}),e.$set(r),(!i||c[0]&1)&&B(s,o[0])},i(o){i||(E(e.$$.fragment,o),i=!0)},o(o){N(e.$$.fragment,o),i=!1},d(o){o&&($(t),$(n)),se(e,o)}}}function ep(l){let e;return{c(){e=T("Invalid token")},m(t,n){k(t,e,n)},d(t){t&&$(e)}}}function tp(l){let e;return{c(){e=T("Not configured")},m(t,n){k(t,e,n)},d(t){t&&$(e)}}}function lp(l){let e;return{c(){e=T("✓ Connected")},m(t,n){k(t,e,n)},d(t){t&&$(e)}}}function np(l){let e,t,n,s,i,o,c,r,f,d,_,v,h,m,g;r=new Te({props:{variant:"primary",type:"submit",$$slots:{default:[Qd]},$$scope:{ctx:l}}});const C=[xd,Zd,Xd],y=[];function w(S,M){var P,D;return(P=S[1])!=null&&P.valid?0:(D=S[1])!=null&&D.missing?1:2}return _=w(l),v=y[_]=C[_](l),{c(){e=p("p"),e.innerHTML=`Get your token from 
      <a href="https://cloud.digitalocean.com/account/api/tokens" target="_blank" class="svelte-16vnl3x">DO Control Panel</a>.`,t=b(),n=p("div"),n.innerHTML='<div class="info-title svelte-16vnl3x">🔒 Browser Storage</div> <div class="info-text svelte-16vnl3x">Token stored in browser cookie. Passed with each API request. Never stored on server.</div>',s=b(),i=p("form"),o=p("div"),o.innerHTML='<label for="do-token" class="svelte-16vnl3x">DigitalOcean API Token</label> <input id="do-token" type="password" placeholder="dop_v1_xxxxx" class="svelte-16vnl3x"/>',c=b(),oe(r.$$.fragment),f=b(),d=p("div"),v.c(),u(e,"class","description svelte-16vnl3x"),u(n,"class","info-box svelte-16vnl3x"),u(o,"class","form-group svelte-16vnl3x"),u(d,"class","token-status svelte-16vnl3x")},m(S,M){k(S,e,M),k(S,t,M),k(S,n,M),k(S,s,M),k(S,i,M),a(i,o),a(i,c),ne(r,i,null),k(S,f,M),k(S,d,M),y[_].m(d,null),h=!0,m||(g=te(i,"submit",l[15]),m=!0)},p(S,M){const P={};M[1]&16&&(P.$$scope={dirty:M,ctx:S}),r.$set(P);let D=_;_=w(S),_===D?y[_].p(S,M):(ke(),N(y[D],1,1,()=>{y[D]=null}),we(),v=y[_],v?v.p(S,M):(v=y[_]=C[_](S),v.c()),E(v,1),v.m(d,null))},i(S){h||(E(r.$$.fragment,S),E(v),h=!0)},o(S){N(r.$$.fragment,S),N(v),h=!1},d(S){S&&($(e),$(t),$(n),$(s),$(i),$(f),$(d)),se(r),y[_].d(),m=!1,g()}}}function sp(l){let e;return{c(){e=T("Save Token")},m(t,n){k(t,e,n)},d(t){t&&$(e)}}}function op(l){let e,t;return e=new Ie({props:{variant:"warning",$$slots:{default:[rp]},$$scope:{ctx:l}}}),{c(){oe(e.$$.fragment)},m(n,s){ne(e,n,s),t=!0},p(n,s){const i={};s[1]&16&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){se(e,n)}}}function ip(l){let e,t,n,s,i;return e=new Ie({props:{variant:"success",$$slots:{default:[ap]},$$scope:{ctx:l}}}),{c(){oe(e.$$.fragment),t=b(),n=p("span"),s=T(l[2]),u(n,"class","token-preview svelte-16vnl3x")},m(o,c){ne(e,o,c),k(o,t,c),k(o,n,c),a(n,s),i=!0},p(o,c){const r={};c[1]&16&&(r.$$scope={dirty:c,ctx:o}),e.$set(r),(!i||c[0]&4)&&B(s,o[2])},i(o){i||(E(e.$$.fragment,o),i=!0)},o(o){N(e.$$.fragment,o),i=!1},d(o){o&&($(t),$(n)),se(e,o)}}}function rp(l){let e;return{c(){e=T("Not configured")},m(t,n){k(t,e,n)},d(t){t&&$(e)}}}function ap(l){let e;return{c(){e=T("✓ Connected")},m(t,n){k(t,e,n)},d(t){t&&$(e)}}}function cp(l){let e,t,n,s,i,o,c,r,f,d,_,v,h;o=new Te({props:{variant:"primary",type:"submit",$$slots:{default:[sp]},$$scope:{ctx:l}}});const m=[ip,op],g=[];function C(y,w){var S;return(S=y[3])!=null&&S.valid?0:1}return f=C(l),d=g[f]=m[f](l),{c(){e=p("p"),e.innerHTML=`Get your token from 
      <a href="https://dash.cloudflare.com/profile/api-tokens" target="_blank" class="svelte-16vnl3x">Cloudflare Dashboard</a>.`,t=b(),n=p("form"),s=p("div"),s.innerHTML='<label for="cf-token" class="svelte-16vnl3x">Cloudflare API Token</label> <input id="cf-token" type="password" placeholder="xxxxx" class="svelte-16vnl3x"/>',i=b(),oe(o.$$.fragment),c=b(),r=p("div"),d.c(),u(e,"class","description svelte-16vnl3x"),u(s,"class","form-group svelte-16vnl3x"),u(r,"class","token-status svelte-16vnl3x")},m(y,w){k(y,e,w),k(y,t,w),k(y,n,w),a(n,s),a(n,i),ne(o,n,null),k(y,c,w),k(y,r,w),g[f].m(r,null),_=!0,v||(h=te(n,"submit",l[16]),v=!0)},p(y,w){const S={};w[1]&16&&(S.$$scope={dirty:w,ctx:y}),o.$set(S);let M=f;f=C(y),f===M?g[f].p(y,w):(ke(),N(g[M],1,1,()=>{g[M]=null}),we(),d=g[f],d?d.p(y,w):(d=g[f]=m[f](y),d.c()),E(d,1),d.m(r,null))},i(y){_||(E(o.$$.fragment,y),E(d),_=!0)},o(y){N(o.$$.fragment,y),N(d),_=!1},d(y){y&&($(e),$(t),$(n),$(c),$(r)),se(o),g[f].d(),v=!1,h()}}}function fp(l){let e;return{c(){e=T("Setup Domain")},m(t,n){k(t,e,n)},d(t){t&&$(e)}}}function Dr(l){let e,t=l[7].message+"",n;return{c(){e=p("div"),n=T(t),u(e,"class","result svelte-16vnl3x"),$e(e,"success",l[7].success),$e(e,"error",!l[7].success)},m(s,i){k(s,e,i),a(e,n)},p(s,i){i[0]&128&&t!==(t=s[7].message+"")&&B(n,t),i[0]&128&&$e(e,"success",s[7].success),i[0]&128&&$e(e,"error",!s[7].success)},d(s){s&&$(e)}}}function up(l){let e,t,n,s,i,o,c,r,f,d,_,v,h,m,g,C,y,w,S,M,P,D,j,L;S=new Te({props:{variant:"primary",type:"submit",$$slots:{default:[fp]},$$scope:{ctx:l}}});let R=l[7]&&Dr(l);return{c(){e=p("p"),e.textContent='Point a domain to your server. With "Proxied" enabled, HTTPS works automatically.',t=b(),n=p("form"),s=p("div"),i=p("label"),i.textContent="Domain",o=b(),c=p("input"),r=b(),f=p("div"),d=p("label"),d.textContent="Server IP",_=b(),v=p("input"),h=b(),m=p("label"),g=p("input"),C=T(`
        Proxied (Cloudflare handles SSL)`),y=b(),w=p("div"),oe(S.$$.fragment),M=b(),R&&R.c(),P=Le(),u(e,"class","description svelte-16vnl3x"),u(i,"for","domain-name"),u(i,"class","svelte-16vnl3x"),u(c,"id","domain-name"),u(c,"type","text"),u(c,"placeholder","api.example.com"),c.required=!0,u(c,"class","svelte-16vnl3x"),u(s,"class","form-group svelte-16vnl3x"),u(d,"for","domain-ip"),u(d,"class","svelte-16vnl3x"),u(v,"id","domain-ip"),u(v,"type","text"),u(v,"placeholder","1.2.3.4"),v.required=!0,u(v,"class","svelte-16vnl3x"),u(f,"class","form-group svelte-16vnl3x"),u(g,"type","checkbox"),u(g,"class","svelte-16vnl3x"),u(m,"class","checkbox-label svelte-16vnl3x"),u(w,"class","form-actions svelte-16vnl3x")},m(A,F){k(A,e,F),k(A,t,F),k(A,n,F),a(n,s),a(s,i),a(s,o),a(s,c),Q(c,l[4]),a(n,r),a(n,f),a(f,d),a(f,_),a(f,v),Q(v,l[5]),a(n,h),a(n,m),a(m,g),g.checked=l[6],a(m,C),a(n,y),a(n,w),ne(S,w,null),k(A,M,F),R&&R.m(A,F),k(A,P,F),D=!0,j||(L=[te(c,"input",l[23]),te(v,"input",l[24]),te(g,"change",l[25]),te(n,"submit",l[17])],j=!0)},p(A,F){F[0]&16&&c.value!==A[4]&&Q(c,A[4]),F[0]&32&&v.value!==A[5]&&Q(v,A[5]),F[0]&64&&(g.checked=A[6]);const q={};F[1]&16&&(q.$$scope={dirty:F,ctx:A}),S.$set(q),A[7]?R?R.p(A,F):(R=Dr(A),R.c(),R.m(P.parentNode,P)):R&&(R.d(1),R=null)},i(A){D||(E(S.$$.fragment,A),D=!0)},o(A){N(S.$$.fragment,A),D=!1},d(A){A&&($(e),$(t),$(n),$(M),$(P)),se(S),R&&R.d(A),j=!1,Fe(L)}}}function dp(l){let e;return{c(){e=T("Setup DNS Round-Robin")},m(t,n){k(t,e,n)},d(t){t&&$(e)}}}function Pr(l){let e,t=l[11].message+"",n;return{c(){e=p("div"),n=T(t),u(e,"class","result svelte-16vnl3x"),$e(e,"success",l[11].success),$e(e,"error",!l[11].success)},m(s,i){k(s,e,i),a(e,n)},p(s,i){i[0]&2048&&t!==(t=s[11].message+"")&&B(n,t),i[0]&2048&&$e(e,"success",s[11].success),i[0]&2048&&$e(e,"error",!s[11].success)},d(s){s&&$(e)}}}function pp(l){let e,t,n,s,i,o,c,r,f,d,_,v,h,m,g,C,y,w,S,M,P,D,j,L;S=new Te({props:{variant:"primary",type:"submit",$$slots:{default:[dp]},$$scope:{ctx:l}}});let R=l[11]&&Pr(l);return{c(){e=p("p"),e.innerHTML=`Simple load distribution via multiple A records. Cloudflare rotates between IPs at DNS level.
      <strong>FREE</strong>, but no health checks.`,t=b(),n=p("form"),s=p("div"),i=p("label"),i.textContent="Domain",o=b(),c=p("input"),r=b(),f=p("div"),d=p("label"),d.textContent="Server IPs (comma-separated)",_=b(),v=p("input"),h=b(),m=p("label"),g=p("input"),C=T(`
        Proxied (SSL + CDN)`),y=b(),w=p("div"),oe(S.$$.fragment),M=b(),R&&R.c(),P=Le(),u(e,"class","description svelte-16vnl3x"),u(i,"for","lb-domain"),u(i,"class","svelte-16vnl3x"),u(c,"id","lb-domain"),u(c,"type","text"),u(c,"placeholder","api.example.com"),c.required=!0,u(c,"class","svelte-16vnl3x"),u(s,"class","form-group svelte-16vnl3x"),u(d,"for","lb-ips"),u(d,"class","svelte-16vnl3x"),u(v,"id","lb-ips"),u(v,"type","text"),u(v,"placeholder","1.2.3.4, 5.6.7.8"),v.required=!0,u(v,"class","svelte-16vnl3x"),u(f,"class","form-group svelte-16vnl3x"),u(g,"type","checkbox"),u(g,"class","svelte-16vnl3x"),u(m,"class","checkbox-label svelte-16vnl3x"),u(w,"class","form-actions svelte-16vnl3x")},m(A,F){k(A,e,F),k(A,t,F),k(A,n,F),a(n,s),a(s,i),a(s,o),a(s,c),Q(c,l[8]),a(n,r),a(n,f),a(f,d),a(f,_),a(f,v),Q(v,l[9]),a(n,h),a(n,m),a(m,g),g.checked=l[10],a(m,C),a(n,y),a(n,w),ne(S,w,null),k(A,M,F),R&&R.m(A,F),k(A,P,F),D=!0,j||(L=[te(c,"input",l[26]),te(v,"input",l[27]),te(g,"change",l[28]),te(n,"submit",l[18])],j=!0)},p(A,F){F[0]&256&&c.value!==A[8]&&Q(c,A[8]),F[0]&512&&v.value!==A[9]&&Q(v,A[9]),F[0]&1024&&(g.checked=A[10]);const q={};F[1]&16&&(q.$$scope={dirty:F,ctx:A}),S.$set(q),A[11]?R?R.p(A,F):(R=Pr(A),R.c(),R.m(P.parentNode,P)):R&&(R.d(1),R=null)},i(A){D||(E(S.$$.fragment,A),D=!0)},o(A){N(S.$$.fragment,A),D=!1},d(A){A&&($(e),$(t),$(n),$(M),$(P)),se(S),R&&R.d(A),j=!1,Fe(L)}}}function _p(l){let e,t,n=_e(l[12]),s=[];for(let o=0;o<n.length;o+=1)s[o]=Er(Tr(l,n,o));const i=o=>N(s[o],1,1,()=>{s[o]=null});return{c(){e=p("div");for(let o=0;o<s.length;o+=1)s[o].c();u(e,"class","task-list svelte-16vnl3x")},m(o,c){k(o,e,c);for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(e,null);t=!0},p(o,c){if(c[0]&1052672){n=_e(o[12]);let r;for(r=0;r<n.length;r+=1){const f=Tr(o,n,r);s[r]?(s[r].p(f,c),E(s[r],1)):(s[r]=Er(f),s[r].c(),E(s[r],1),s[r].m(e,null))}for(ke(),r=n.length;r<s.length;r+=1)i(r);we()}},i(o){if(!t){for(let c=0;c<n.length;c+=1)E(s[c]);t=!0}},o(o){s=s.filter(Vd);for(let c=0;c<s.length;c+=1)N(s[c]);t=!1},d(o){o&&$(e),Me(s,o)}}}function vp(l){let e;return{c(){e=p("div"),e.textContent="No scheduled tasks",u(e,"class","empty-state svelte-16vnl3x")},m(t,n){k(t,e,n)},p:ae,i:ae,o:ae,d(t){t&&$(e)}}}function mp(l){let e;return{c(){e=p("div"),e.textContent="Loading tasks...",u(e,"class","empty-state svelte-16vnl3x")},m(t,n){k(t,e,n)},p:ae,i:ae,o:ae,d(t){t&&$(e)}}}function hp(l){let e=l[32].type+"",t;return{c(){t=T(e)},m(n,s){k(n,t,s)},p(n,s){s[0]&4096&&e!==(e=n[32].type+"")&&B(t,e)},d(n){n&&$(t)}}}function gp(l){let e;return{c(){e=T("🗑️")},m(t,n){k(t,e,n)},d(t){t&&$(e)}}}function Er(l){let e,t,n,s=l[32].name+"",i,o,c,r,f,d,_,v=l[32].interval+"",h,m,g,C,y,w;r=new Ie({props:{variant:"info",$$slots:{default:[hp]},$$scope:{ctx:l}}});function S(){return l[29](l[32])}return C=new Te({props:{variant:"danger",size:"sm",$$slots:{default:[gp]},$$scope:{ctx:l}}}),C.$on("click",S),{c(){e=p("div"),t=p("div"),n=p("div"),i=T(s),o=b(),c=p("div"),oe(r.$$.fragment),f=b(),d=p("span"),_=T("Every "),h=T(v),m=T(" min"),g=b(),oe(C.$$.fragment),y=b(),u(n,"class","task-name svelte-16vnl3x"),u(c,"class","task-meta svelte-16vnl3x"),u(t,"class","task-info"),u(e,"class","task-item svelte-16vnl3x")},m(M,P){k(M,e,P),a(e,t),a(t,n),a(n,i),a(t,o),a(t,c),ne(r,c,null),a(c,f),a(c,d),a(d,_),a(d,h),a(d,m),a(e,g),ne(C,e,null),a(e,y),w=!0},p(M,P){l=M,(!w||P[0]&4096)&&s!==(s=l[32].name+"")&&B(i,s);const D={};P[0]&4096|P[1]&16&&(D.$$scope={dirty:P,ctx:l}),r.$set(D),(!w||P[0]&4096)&&v!==(v=l[32].interval+"")&&B(h,v);const j={};P[1]&16&&(j.$$scope={dirty:P,ctx:l}),C.$set(j)},i(M){w||(E(r.$$.fragment,M),E(C.$$.fragment,M),w=!0)},o(M){N(r.$$.fragment,M),N(C.$$.fragment,M),w=!1},d(M){M&&$(e),se(r),se(C)}}}function bp(l){let e,t,n,s,i,o;const c=[mp,vp,_p],r=[];function f(d,_){return d[13]?0:d[12].length===0?1:2}return n=f(l),s=r[n]=c[n](l),{c(){e=p("p"),e.textContent="Schedule recurring tasks like health checks, auto-restart, and backups.",t=b(),s.c(),i=Le(),u(e,"class","description svelte-16vnl3x")},m(d,_){k(d,e,_),k(d,t,_),r[n].m(d,_),k(d,i,_),o=!0},p(d,_){let v=n;n=f(d),n===v?r[n].p(d,_):(ke(),N(r[v],1,1,()=>{r[v]=null}),we(),s=r[n],s?s.p(d,_):(s=r[n]=c[n](d),s.c()),E(s,1),s.m(i.parentNode,i))},i(d){o||(E(s),o=!0)},o(d){N(s),o=!1},d(d){d&&($(e),$(t),$(i)),r[n].d(d)}}}function $p(l){let e;return{c(){e=T("↻ Refresh")},m(t,n){k(t,e,n)},d(t){t&&$(e)}}}function kp(l){let e,t;return e=new Te({props:{slot:"header",variant:"ghost",size:"sm",$$slots:{default:[$p]},$$scope:{ctx:l}}}),e.$on("click",l[19]),{c(){oe(e.$$.fragment)},m(n,s){ne(e,n,s),t=!0},p(n,s){const i={};s[1]&16&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){se(e,n)}}}function wp(l){let e,t,n,s,i,o,c,r,f,d,_,v,h;return t=new Re({props:{title:"🎨 Appearance",$$slots:{default:[Kd]},$$scope:{ctx:l}}}),s=new Re({props:{title:"⚙️ DigitalOcean Credentials",$$slots:{default:[np]},$$scope:{ctx:l}}}),o=new Re({props:{title:"☁️ Cloudflare Credentials",$$slots:{default:[cp]},$$scope:{ctx:l}}}),r=new Re({props:{title:"🌐 Domain Setup",$$slots:{default:[up]},$$scope:{ctx:l}}}),d=new Re({props:{title:"🌐 DNS Round-Robin (Cloudflare)",$$slots:{default:[pp]},$$scope:{ctx:l}}}),v=new Re({props:{title:"⏰ Task Scheduler",$$slots:{header:[kp],default:[bp]},$$scope:{ctx:l}}}),{c(){e=p("div"),oe(t.$$.fragment),n=b(),oe(s.$$.fragment),i=b(),oe(o.$$.fragment),c=b(),oe(r.$$.fragment),f=b(),oe(d.$$.fragment),_=b(),oe(v.$$.fragment),u(e,"class","settings-page svelte-16vnl3x")},m(m,g){k(m,e,g),ne(t,e,null),a(e,n),ne(s,e,null),a(e,i),ne(o,e,null),a(e,c),ne(r,e,null),a(e,f),ne(d,e,null),a(e,_),ne(v,e,null),h=!0},p(m,g){const C={};g[0]&16384|g[1]&16&&(C.$$scope={dirty:g,ctx:m}),t.$set(C);const y={};g[0]&3|g[1]&16&&(y.$$scope={dirty:g,ctx:m}),s.$set(y);const w={};g[0]&12|g[1]&16&&(w.$$scope={dirty:g,ctx:m}),o.$set(w);const S={};g[0]&240|g[1]&16&&(S.$$scope={dirty:g,ctx:m}),r.$set(S);const M={};g[0]&3840|g[1]&16&&(M.$$scope={dirty:g,ctx:m}),d.$set(M);const P={};g[0]&12288|g[1]&16&&(P.$$scope={dirty:g,ctx:m}),v.$set(P)},i(m){h||(E(t.$$.fragment,m),E(s.$$.fragment,m),E(o.$$.fragment,m),E(r.$$.fragment,m),E(d.$$.fragment,m),E(v.$$.fragment,m),h=!0)},o(m){N(t.$$.fragment,m),N(s.$$.fragment,m),N(o.$$.fragment,m),N(r.$$.fragment,m),N(d.$$.fragment,m),N(v.$$.fragment,m),h=!1},d(m){m&&$(e),se(t),se(s),se(o),se(r),se(d),se(v)}}}function yp(l,e,t){let n;We(l,Yn,O=>t(14,n=O));let s="",i=null,o="",c=null,r="",f="",d=!0,_=null,v="",h="",m=!0,g=null,C=[],y=!1;ul(()=>{w(),S(),L()});async function w(){const O=Zl();if(O){t(0,s=O.substring(0,10)+"...");try{await Be("GET","/infra/snapshots"),t(1,i={valid:!0})}catch{t(1,i={valid:!1})}}else t(1,i={valid:!1,missing:!0})}async function S(){const O=Qn();O?(t(2,o=O.substring(0,10)+"..."),t(3,c={valid:!0})):t(3,c={valid:!1,missing:!0})}async function M(O){O.preventDefault();const U=O.target.querySelector("input"),Y=U.value;if(!Y){ve.error("Token is required");return}Oa(Y),U.value="",ve.success("DigitalOcean token saved"),await w()}async function P(O){O.preventDefault();const U=O.target.querySelector("input"),Y=U.value;if(!Y){ve.error("Token is required");return}Aa(Y),U.value="",ve.success("Cloudflare token saved"),await S()}async function D(O){O.preventDefault();try{const U=await Be("POST","/infra/cloudflare/domain",{domain:r,ip:f,proxied:d});t(7,_={success:!0,message:"Domain configured successfully"}),ve.success("Domain setup complete")}catch(U){t(7,_={success:!1,message:U.message}),ve.error(U.message)}}async function j(O){O.preventDefault();try{const U=h.split(",").map(Z=>Z.trim()).filter(Boolean),Y=await Be("POST","/infra/cloudflare/lb",{domain:v,server_ips:U,proxied:m});t(11,g={success:!0,message:`Created load balancer with ${U.length} servers`}),ve.success("Load balancer configured")}catch(U){t(11,g={success:!1,message:U.message}),ve.error(U.message)}}async function L(){t(13,y=!0);try{const O=await Be("GET","/infra/scheduler/tasks");t(12,C=O.tasks||O||[])}catch{t(12,C=[])}finally{t(13,y=!1)}}async function R(O){if(confirm("Delete this scheduled task?"))try{await Be("DELETE",`/infra/scheduler/tasks/${O}`),ve.success("Task deleted"),await L()}catch(U){ve.error(U.message)}}function A(){n=Ge(this),Yn.set(n)}const F=()=>Yn.set(n);function q(){r=this.value,t(4,r)}function H(){f=this.value,t(5,f)}function W(){d=this.checked,t(6,d)}function I(){v=this.value,t(8,v)}function J(){h=this.value,t(9,h)}function z(){m=this.checked,t(10,m)}return[s,i,o,c,r,f,d,_,v,h,m,g,C,y,n,M,P,D,j,L,R,A,F,q,H,W,I,J,z,O=>R(O.id)]}class Cp extends Ve{constructor(e){super(),Ye(this,e,yp,wp,Je,{},null,[-1,-1])}}function Mr(l,e,t){const n=l.slice();n[21]=e[t];const s=n[1].filter(function(...r){return l[17](n[21],...r)});n[22]=s;const i=n[21].domain;n[23]=i;const o=n[22].length>1;return n[24]=o,n}function jr(l,e,t){const n=l.slice();return n[27]=e[t],n}function Lr(l,e,t){const n=l.slice();return n[21]=e[t],n}function Nr(l,e,t){const n=l.slice();return n[32]=e[t],n}function Sp(l){let e,t,n,s,i,o,c,r,f,d,_,v,h,m,g,C,y,w,S=l[1].length+"",M,P,D,j,L,R,A,F,q=l[7].length+"",H,W,I,J;const z=[Mp,Ep],G=[];function O(U,Y){return U[11]?1:0}return v=O(l),h=G[v]=z[v](l),{c(){e=p("div"),t=p("div"),n=p("div"),n.innerHTML='<span class="summary-icon svelte-odhywp">🔀</span> <span>Nginx Sidecar</span>',s=b(),i=p("div"),o=T(l[3]),c=T("/"),r=T(l[2]),f=b(),d=p("div"),d.textContent="servers with nginx",_=b(),h.c(),m=b(),g=p("div"),C=p("div"),C.innerHTML='<span class="summary-icon svelte-odhywp">🤖</span> <span>Node Agents</span>',y=b(),w=p("div"),M=T(S),P=b(),D=p("div"),D.textContent="servers monitored",j=b(),L=p("div"),R=p("div"),R.innerHTML='<span class="summary-icon svelte-odhywp">📦</span> <span>Services</span>',A=b(),F=p("div"),H=T(q),W=b(),I=p("div"),I.textContent="deployed services",u(n,"class","summary-header svelte-odhywp"),u(i,"class","summary-value svelte-odhywp"),u(d,"class","summary-label svelte-odhywp"),u(t,"class","summary-card svelte-odhywp"),$e(t,"ok",l[11]),$e(t,"warn",!l[11]),u(C,"class","summary-header svelte-odhywp"),u(w,"class","summary-value svelte-odhywp"),u(D,"class","summary-label svelte-odhywp"),u(g,"class","summary-card info svelte-odhywp"),u(R,"class","summary-header svelte-odhywp"),u(F,"class","summary-value svelte-odhywp"),u(I,"class","summary-label svelte-odhywp"),u(L,"class","summary-card info svelte-odhywp"),u(e,"class","summary-grid svelte-odhywp")},m(U,Y){k(U,e,Y),a(e,t),a(t,n),a(t,s),a(t,i),a(i,o),a(i,c),a(i,r),a(t,f),a(t,d),a(t,_),G[v].m(t,null),a(e,m),a(e,g),a(g,C),a(g,y),a(g,w),a(w,M),a(g,P),a(g,D),a(e,j),a(e,L),a(L,R),a(L,A),a(L,F),a(F,H),a(L,W),a(L,I),J=!0},p(U,Y){(!J||Y[0]&8)&&B(o,U[3]),(!J||Y[0]&4)&&B(r,U[2]);let Z=v;v=O(U),v===Z?G[v].p(U,Y):(ke(),N(G[Z],1,1,()=>{G[Z]=null}),we(),h=G[v],h?h.p(U,Y):(h=G[v]=z[v](U),h.c()),E(h,1),h.m(t,null)),(!J||Y[0]&2048)&&$e(t,"ok",U[11]),(!J||Y[0]&2048)&&$e(t,"warn",!U[11]),(!J||Y[0]&2)&&S!==(S=U[1].length+"")&&B(M,S),(!J||Y[0]&128)&&q!==(q=U[7].length+"")&&B(H,q)},i(U){J||(E(h),J=!0)},o(U){N(h),J=!1},d(U){U&&$(e),G[v].d()}}}function Tp(l){let e;return{c(){e=p("div"),e.innerHTML='<p>No services deployed yet</p> <p class="hint svelte-odhywp">Deploy your first service to see the architecture</p>',u(e,"class","empty-state svelte-odhywp")},m(t,n){k(t,e,n)},p:ae,i:ae,o:ae,d(t){t&&$(e)}}}function Dp(l){let e,t,n,s,i,o;return{c(){e=p("div"),t=p("p"),n=T("Failed to load: "),s=T(l[9]),i=b(),o=p("p"),o.textContent="Check your connection and try refreshing",u(o,"class","hint svelte-odhywp"),u(e,"class","empty-state svelte-odhywp")},m(c,r){k(c,e,r),a(e,t),a(t,n),a(t,s),a(e,i),a(e,o)},p(c,r){r[0]&512&&B(s,c[9])},i:ae,o:ae,d(c){c&&$(e)}}}function Pp(l){let e;return{c(){e=p("div"),e.textContent="Loading architecture...",u(e,"class","empty-state svelte-odhywp")},m(t,n){k(t,e,n)},p:ae,i:ae,o:ae,d(t){t&&$(e)}}}function Ep(l){let e;return{c(){e=p("div"),e.textContent="✅ All servers OK",u(e,"class","summary-ok svelte-odhywp")},m(t,n){k(t,e,n)},p:ae,i:ae,o:ae,d(t){t&&$(e)}}}function Mp(l){let e,t;return e=new Te({props:{variant:"warning",size:"sm",$$slots:{default:[jp]},$$scope:{ctx:l}}}),e.$on("click",l[13]),{c(){oe(e.$$.fragment)},m(n,s){ne(e,n,s),t=!0},p(n,s){const i={};s[0]&12|s[1]&16&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){se(e,n)}}}function jp(l){let e,t=l[2]-l[3]+"",n,s;return{c(){e=T("🔧 Fix "),n=T(t),s=T(" server(s)")},m(i,o){k(i,e,o),k(i,n,o),k(i,s,o)},p(i,o){o[0]&12&&t!==(t=i[2]-i[3]+"")&&B(n,t)},d(i){i&&($(e),$(n),$(s))}}}function Lp(l){let e,t,n,s;const i=[Pp,Dp,Tp,Sp],o=[];function c(r,f){return r[6]&&!r[10]?0:r[9]?1:r[7].length===0&&r[1].length===0?2:3}return e=c(l),t=o[e]=i[e](l),{c(){t.c(),n=Le()},m(r,f){o[e].m(r,f),k(r,n,f),s=!0},p(r,f){let d=e;e=c(r),e===d?o[e].p(r,f):(ke(),N(o[d],1,1,()=>{o[d]=null}),we(),t=o[e],t?t.p(r,f):(t=o[e]=i[e](r),t.c()),E(t,1),t.m(n.parentNode,n))},i(r){s||(E(t),s=!0)},o(r){N(t),s=!1},d(r){r&&$(n),o[e].d(r)}}}function Rr(l){let e,t=l[32]+"",n,s;return{c(){e=p("option"),n=T(t),e.__value=s=l[32],Q(e,e.__value)},m(i,o){k(i,e,o),a(e,n)},p(i,o){o[0]&4096&&t!==(t=i[32]+"")&&B(n,t),o[0]&4096&&s!==(s=i[32])&&(e.__value=s,Q(e,e.__value))},d(i){i&&$(e)}}}function Or(l){let e,t,n=Ur(l[8])+"",s;return{c(){e=p("span"),t=T("Updated "),s=T(n),u(e,"class","last-updated svelte-odhywp")},m(i,o){k(i,e,o),a(e,t),a(e,s)},p(i,o){o[0]&256&&n!==(n=Ur(i[8])+"")&&B(s,n)},d(i){i&&$(e)}}}function Np(l){let e;return{c(){e=T("↻ Refresh")},m(t,n){k(t,e,n)},d(t){t&&$(e)}}}function Rp(l){let e,t,n,s,i,o,c,r,f,d,_,v,h,m,g,C=_e(l[12]),y=[];for(let S=0;S<C.length;S+=1)y[S]=Rr(Nr(l,C,S));let w=l[8]&&Or(l);return v=new Te({props:{variant:"ghost",size:"sm",$$slots:{default:[Np]},$$scope:{ctx:l}}}),v.$on("click",l[0]),{c(){e=p("div"),t=p("select"),n=p("option"),n.textContent="All Projects";for(let S=0;S<y.length;S+=1)y[S].c();s=b(),i=p("select"),o=p("option"),o.textContent="All Envs",c=p("option"),c.textContent="prod",r=p("option"),r.textContent="staging",f=p("option"),f.textContent="dev",d=b(),w&&w.c(),_=b(),oe(v.$$.fragment),n.__value="",Q(n,n.__value),u(t,"class","svelte-odhywp"),l[4]===void 0&&Ue(()=>l[15].call(t)),o.__value="",Q(o,o.__value),c.__value="prod",Q(c,c.__value),r.__value="staging",Q(r,r.__value),f.__value="dev",Q(f,f.__value),u(i,"class","svelte-odhywp"),l[5]===void 0&&Ue(()=>l[16].call(i)),u(e,"slot","header"),u(e,"class","filters svelte-odhywp")},m(S,M){k(S,e,M),a(e,t),a(t,n);for(let P=0;P<y.length;P+=1)y[P]&&y[P].m(t,null);Pe(t,l[4],!0),a(e,s),a(e,i),a(i,o),a(i,c),a(i,r),a(i,f),Pe(i,l[5],!0),a(e,d),w&&w.m(e,null),a(e,_),ne(v,e,null),h=!0,m||(g=[te(t,"change",l[15]),te(t,"change",l[14]),te(i,"change",l[16]),te(i,"change",l[14])],m=!0)},p(S,M){if(M[0]&4096){C=_e(S[12]);let D;for(D=0;D<C.length;D+=1){const j=Nr(S,C,D);y[D]?y[D].p(j,M):(y[D]=Rr(j),y[D].c(),y[D].m(t,null))}for(;D<y.length;D+=1)y[D].d(1);y.length=C.length}M[0]&4112&&Pe(t,S[4]),M[0]&32&&Pe(i,S[5]),S[8]?w?w.p(S,M):(w=Or(S),w.c(),w.m(e,_)):w&&(w.d(1),w=null);const P={};M[1]&16&&(P.$$scope={dirty:M,ctx:S}),v.$set(P)},i(S){h||(E(v.$$.fragment,S),h=!0)},o(S){N(v.$$.fragment,S),h=!1},d(S){S&&$(e),Me(y,S),w&&w.d(),se(v),m=!1,Fe(g)}}}function Op(l){let e,t,n=_e(l[7]),s=[];for(let o=0;o<n.length;o+=1)s[o]=Ar(Lr(l,n,o));const i=o=>N(s[o],1,1,()=>{s[o]=null});return{c(){e=p("div");for(let o=0;o<s.length;o+=1)s[o].c();u(e,"class","list svelte-odhywp")},m(o,c){k(o,e,c);for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(e,null);t=!0},p(o,c){if(c[0]&128){n=_e(o[7]);let r;for(r=0;r<n.length;r+=1){const f=Lr(o,n,r);s[r]?(s[r].p(f,c),E(s[r],1)):(s[r]=Ar(f),s[r].c(),E(s[r],1),s[r].m(e,null))}for(ke(),r=n.length;r<s.length;r+=1)i(r);we()}},i(o){if(!t){for(let c=0;c<n.length;c+=1)E(s[c]);t=!0}},o(o){s=s.filter(Boolean);for(let c=0;c<s.length;c+=1)N(s[c]);t=!1},d(o){o&&$(e),Me(s,o)}}}function Ap(l){let e;return{c(){e=p("div"),e.textContent="No services found",u(e,"class","empty-panel svelte-odhywp")},m(t,n){k(t,e,n)},p:ae,i:ae,o:ae,d(t){t&&$(e)}}}function qp(l){let e=l[21].type+"",t;return{c(){t=T(e)},m(n,s){k(n,t,s)},p(n,s){s[0]&128&&e!==(e=n[21].type+"")&&B(t,e)},d(n){n&&$(t)}}}function Ar(l){var I,J;let e,t,n=qn(l[21])+"",s,i,o,c,r=l[21].service+"",f,d,_,v=l[21].project+"",h,m,g=l[21].env+"",C,y,w,S,M=(((I=l[21].servers)==null?void 0:I.length)||0)+"",P,D,j,L,R=(((J=l[21].ports)==null?void 0:J.join(", "))||"-")+"",A,F,q,H,W;return q=new Ie({props:{variant:l[21].type==="stateful"?"warning":"info",$$slots:{default:[qp]},$$scope:{ctx:l}}}),{c(){e=p("div"),t=p("div"),s=T(n),i=b(),o=p("div"),c=p("div"),f=T(r),d=b(),_=p("div"),h=T(v),m=T(" / "),C=T(g),y=b(),w=p("div"),S=p("div"),P=T(M),D=T(" server(s)"),j=b(),L=p("div"),A=T(R),F=b(),oe(q.$$.fragment),H=b(),u(t,"class","item-icon svelte-odhywp"),u(c,"class","item-name svelte-odhywp"),u(_,"class","item-meta svelte-odhywp"),u(o,"class","item-info svelte-odhywp"),u(L,"class","ports svelte-odhywp"),u(w,"class","item-stats svelte-odhywp"),u(e,"class","list-item svelte-odhywp")},m(z,G){k(z,e,G),a(e,t),a(t,s),a(e,i),a(e,o),a(o,c),a(c,f),a(o,d),a(o,_),a(_,h),a(_,m),a(_,C),a(e,y),a(e,w),a(w,S),a(S,P),a(S,D),a(w,j),a(w,L),a(L,A),a(e,F),ne(q,e,null),a(e,H),W=!0},p(z,G){var U,Y;(!W||G[0]&128)&&n!==(n=qn(z[21])+"")&&B(s,n),(!W||G[0]&128)&&r!==(r=z[21].service+"")&&B(f,r),(!W||G[0]&128)&&v!==(v=z[21].project+"")&&B(h,v),(!W||G[0]&128)&&g!==(g=z[21].env+"")&&B(C,g),(!W||G[0]&128)&&M!==(M=(((U=z[21].servers)==null?void 0:U.length)||0)+"")&&B(P,M),(!W||G[0]&128)&&R!==(R=(((Y=z[21].ports)==null?void 0:Y.join(", "))||"-")+"")&&B(A,R);const O={};G[0]&128&&(O.variant=z[21].type==="stateful"?"warning":"info"),G[0]&128|G[1]&16&&(O.$$scope={dirty:G,ctx:z}),q.$set(O)},i(z){W||(E(q.$$.fragment,z),W=!0)},o(z){N(q.$$.fragment,z),W=!1},d(z){z&&$(e),se(q)}}}function Fp(l){let e,t,n,s;const i=[Ap,Op],o=[];function c(r,f){return r[7].length===0?0:1}return e=c(l),t=o[e]=i[e](l),{c(){t.c(),n=Le()},m(r,f){o[e].m(r,f),k(r,n,f),s=!0},p(r,f){let d=e;e=c(r),e===d?o[e].p(r,f):(ke(),N(o[d],1,1,()=>{o[d]=null}),we(),t=o[e],t?t.p(r,f):(t=o[e]=i[e](r),t.c()),E(t,1),t.m(n.parentNode,n))},i(r){s||(E(t),s=!0)},o(r){N(t),s=!1},d(r){r&&$(n),o[e].d(r)}}}function zp(l){let e,t,n=_e(l[1]),s=[];for(let o=0;o<n.length;o+=1)s[o]=qr(jr(l,n,o));const i=o=>N(s[o],1,1,()=>{s[o]=null});return{c(){e=p("div");for(let o=0;o<s.length;o+=1)s[o].c();u(e,"class","list svelte-odhywp")},m(o,c){k(o,e,c);for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(e,null);t=!0},p(o,c){if(c[0]&2){n=_e(o[1]);let r;for(r=0;r<n.length;r+=1){const f=jr(o,n,r);s[r]?(s[r].p(f,c),E(s[r],1)):(s[r]=qr(f),s[r].c(),E(s[r],1),s[r].m(e,null))}for(ke(),r=n.length;r<s.length;r+=1)i(r);we()}},i(o){if(!t){for(let c=0;c<n.length;c+=1)E(s[c]);t=!0}},o(o){s=s.filter(Boolean);for(let c=0;c<s.length;c+=1)N(s[c]);t=!1},d(o){o&&$(e),Me(s,o)}}}function Bp(l){let e;return{c(){e=p("div"),e.textContent="No servers found",u(e,"class","empty-panel svelte-odhywp")},m(t,n){k(t,e,n)},p:ae,i:ae,o:ae,d(t){t&&$(e)}}}function Up(l){let e=Fn(l[27])?"🔀 nginx":"⚠️ no nginx",t;return{c(){t=T(e)},m(n,s){k(n,t,s)},p(n,s){s[0]&2&&e!==(e=Fn(n[27])?"🔀 nginx":"⚠️ no nginx")&&B(t,e)},d(n){n&&$(t)}}}function Ip(l){let e,t=(l[27].agent_version||"?")+"",n;return{c(){e=T("🤖 v"),n=T(t)},m(s,i){k(s,e,i),k(s,n,i)},p(s,i){i[0]&2&&t!==(t=(s[27].agent_version||"?")+"")&&B(n,t)},d(s){s&&($(e),$(n))}}}function qr(l){let e,t,n=l[27].status==="online"?"🟢":"🔴",s,i,o,c,r=l[27].ip+"",f,d,_,v=(l[27].containers||0)+"",h,m,g,C,y,w,S,M,P;return y=new Ie({props:{variant:Fn(l[27])?"success":"warning",$$slots:{default:[Up]},$$scope:{ctx:l}}}),S=new Ie({props:{variant:"info",$$slots:{default:[Ip]},$$scope:{ctx:l}}}),{c(){e=p("div"),t=p("div"),s=T(n),i=b(),o=p("div"),c=p("code"),f=T(r),d=b(),_=p("div"),h=T(v),m=T(" container(s)"),g=b(),C=p("div"),oe(y.$$.fragment),w=b(),oe(S.$$.fragment),M=b(),u(t,"class","item-icon svelte-odhywp"),u(c,"class","server-ip svelte-odhywp"),u(_,"class","item-meta svelte-odhywp"),u(o,"class","item-info svelte-odhywp"),u(C,"class","item-badges svelte-odhywp"),u(e,"class","list-item svelte-odhywp")},m(D,j){k(D,e,j),a(e,t),a(t,s),a(e,i),a(e,o),a(o,c),a(c,f),a(o,d),a(o,_),a(_,h),a(_,m),a(e,g),a(e,C),ne(y,C,null),a(C,w),ne(S,C,null),a(e,M),P=!0},p(D,j){(!P||j[0]&2)&&n!==(n=D[27].status==="online"?"🟢":"🔴")&&B(s,n),(!P||j[0]&2)&&r!==(r=D[27].ip+"")&&B(f,r),(!P||j[0]&2)&&v!==(v=(D[27].containers||0)+"")&&B(h,v);const L={};j[0]&2&&(L.variant=Fn(D[27])?"success":"warning"),j[0]&2|j[1]&16&&(L.$$scope={dirty:j,ctx:D}),y.$set(L);const R={};j[0]&2|j[1]&16&&(R.$$scope={dirty:j,ctx:D}),S.$set(R)},i(D){P||(E(y.$$.fragment,D),E(S.$$.fragment,D),P=!0)},o(D){N(y.$$.fragment,D),N(S.$$.fragment,D),P=!1},d(D){D&&$(e),se(y),se(S)}}}function Hp(l){let e,t,n,s;const i=[Bp,zp],o=[];function c(r,f){return r[1].length===0?0:1}return e=c(l),t=o[e]=i[e](l),{c(){t.c(),n=Le()},m(r,f){o[e].m(r,f),k(r,n,f),s=!0},p(r,f){let d=e;e=c(r),e===d?o[e].p(r,f):(ke(),N(o[d],1,1,()=>{o[d]=null}),we(),t=o[e],t?t.p(r,f):(t=o[e]=i[e](r),t.c()),E(t,1),t.m(n.parentNode,n))},i(r){s||(E(t),s=!0)},o(r){N(t),s=!1},d(r){r&&$(n),o[e].d(r)}}}function Gp(l){let e,t,n=_e(l[7]),s=[];for(let o=0;o<n.length;o+=1)s[o]=Br(Mr(l,n,o));const i=o=>N(s[o],1,1,()=>{s[o]=null});return{c(){e=p("div");for(let o=0;o<s.length;o+=1)s[o].c();u(e,"class","traffic-flow svelte-odhywp")},m(o,c){k(o,e,c);for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(e,null);t=!0},p(o,c){if(c[0]&130){n=_e(o[7]);let r;for(r=0;r<n.length;r+=1){const f=Mr(o,n,r);s[r]?(s[r].p(f,c),E(s[r],1)):(s[r]=Br(f),s[r].c(),E(s[r],1),s[r].m(e,null))}for(ke(),r=n.length;r<s.length;r+=1)i(r);we()}},i(o){if(!t){for(let c=0;c<n.length;c+=1)E(s[c]);t=!0}},o(o){s=s.filter(Boolean);for(let c=0;c<s.length;c+=1)N(s[c]);t=!1},d(o){o&&$(e),Me(s,o)}}}function Wp(l){let e;return{c(){e=p("div"),e.textContent="Deploy services to see traffic flow",u(e,"class","empty-panel svelte-odhywp")},m(t,n){k(t,e,n)},p:ae,i:ae,o:ae,d(t){t&&$(e)}}}function Jp(l){let e=l[21].env+"",t;return{c(){t=T(e)},m(n,s){k(n,t,s)},p(n,s){s[0]&128&&e!==(e=n[21].env+"")&&B(t,e)},d(n){n&&$(t)}}}function Fr(l){let e,t,n,s,i,o,c=l[21].domain+"",r,f,d;return{c(){e=p("div"),t=p("span"),t.textContent="☁️",n=b(),s=p("span"),s.textContent="Cloudflare",i=b(),o=p("span"),r=T(c),f=b(),d=p("div"),d.textContent="→",u(t,"class","svelte-odhywp"),u(s,"class","node-label svelte-odhywp"),u(o,"class","node-detail svelte-odhywp"),u(e,"class","flow-node cloudflare svelte-odhywp"),u(d,"class","flow-arrow svelte-odhywp")},m(_,v){k(_,e,v),a(e,t),a(e,n),a(e,s),a(e,i),a(e,o),a(o,r),k(_,f,v),k(_,d,v)},p(_,v){v[0]&128&&c!==(c=_[21].domain+"")&&B(r,c)},d(_){_&&($(e),$(f),$(d))}}}function Yp(l){let e;return{c(){e=T("Server")},m(t,n){k(t,e,n)},p:ae,d(t){t&&$(e)}}}function Vp(l){let e,t=l[22].length+"",n,s;return{c(){e=T("⚖️ Load Balanced ("),n=T(t),s=T(")")},m(i,o){k(i,e,o),k(i,n,o),k(i,s,o)},p(i,o){o[0]&130&&t!==(t=i[22].length+"")&&B(n,t)},d(i){i&&($(e),$(n),$(s))}}}function zr(l){let e,t,n,s=l[21].domain+"",i,o;return{c(){e=p("span"),t=T("Domain: "),n=p("a"),i=T(s),u(n,"href",o="https://"+l[21].domain),u(n,"target","_blank"),u(n,"class","svelte-odhywp")},m(c,r){k(c,e,r),a(e,t),a(e,n),a(n,i)},p(c,r){r[0]&128&&s!==(s=c[21].domain+"")&&B(i,s),r[0]&128&&o!==(o="https://"+c[21].domain)&&u(n,"href",o)},d(c){c&&$(e)}}}function Br(l){let e,t,n,s=qn(l[21])+"",i,o,c,r=l[21].service+"",f,d,_,v,h,m,g,C,y,w,S,M,P,D,j,L,R,A,F,q,H,W,I,J,z=(l[21].host_port||"8000")+"",G,O,U,Y,Z,ie,le,ee=(l[21].container_name||l[21].id)+"",ue,x,he;_=new Ie({props:{variant:l[21].env==="prod"?"danger":"info",$$slots:{default:[Jp]},$$scope:{ctx:l}}});let re=l[23]&&Fr(l);function X(fe,ye){return fe[24]?Vp:Yp}let pe=X(l),de=pe(l),be=l[23]&&zr(l);return{c(){e=p("div"),t=p("div"),n=p("span"),i=T(s),o=b(),c=p("span"),f=T(r),d=b(),oe(_.$$.fragment),v=b(),h=p("div"),re&&re.c(),m=b(),g=p("div"),C=p("span"),C.textContent="🖥️",y=b(),w=p("span"),de.c(),S=b(),M=p("div"),M.textContent="→",P=b(),D=p("div"),D.innerHTML='<span class="svelte-odhywp">🔀</span> <span class="node-label svelte-odhywp">nginx</span> <span class="node-detail svelte-odhywp">:443</span>',j=b(),L=p("div"),L.textContent="→",R=b(),A=p("div"),F=p("span"),F.textContent="🐳",q=b(),H=p("span"),H.textContent="Container",W=b(),I=p("span"),J=T(":"),G=T(z),O=b(),U=p("div"),be&&be.c(),Y=b(),Z=p("span"),ie=T("Container: "),le=p("code"),ue=T(ee),x=b(),u(n,"class","flow-icon svelte-odhywp"),u(c,"class","flow-name svelte-odhywp"),u(t,"class","flow-header svelte-odhywp"),u(C,"class","svelte-odhywp"),u(w,"class","node-label svelte-odhywp"),u(g,"class","flow-node server svelte-odhywp"),u(M,"class","flow-arrow svelte-odhywp"),u(D,"class","flow-node nginx svelte-odhywp"),u(L,"class","flow-arrow svelte-odhywp"),u(F,"class","svelte-odhywp"),u(H,"class","node-label svelte-odhywp"),u(I,"class","node-detail svelte-odhywp"),u(A,"class","flow-node container svelte-odhywp"),u(h,"class","flow-path svelte-odhywp"),u(le,"class","svelte-odhywp"),u(U,"class","flow-details svelte-odhywp"),u(e,"class","flow-card svelte-odhywp")},m(fe,ye){k(fe,e,ye),a(e,t),a(t,n),a(n,i),a(t,o),a(t,c),a(c,f),a(t,d),ne(_,t,null),a(e,v),a(e,h),re&&re.m(h,null),a(h,m),a(h,g),a(g,C),a(g,y),a(g,w),de.m(w,null),a(h,S),a(h,M),a(h,P),a(h,D),a(h,j),a(h,L),a(h,R),a(h,A),a(A,F),a(A,q),a(A,H),a(A,W),a(A,I),a(I,J),a(I,G),a(e,O),a(e,U),be&&be.m(U,null),a(U,Y),a(U,Z),a(Z,ie),a(Z,le),a(le,ue),a(e,x),he=!0},p(fe,ye){(!he||ye[0]&128)&&s!==(s=qn(fe[21])+"")&&B(i,s),(!he||ye[0]&128)&&r!==(r=fe[21].service+"")&&B(f,r);const Ae={};ye[0]&128&&(Ae.variant=fe[21].env==="prod"?"danger":"info"),ye[0]&128|ye[1]&16&&(Ae.$$scope={dirty:ye,ctx:fe}),_.$set(Ae),fe[23]?re?re.p(fe,ye):(re=Fr(fe),re.c(),re.m(h,m)):re&&(re.d(1),re=null),pe===(pe=X(fe))&&de?de.p(fe,ye):(de.d(1),de=pe(fe),de&&(de.c(),de.m(w,null))),(!he||ye[0]&128)&&z!==(z=(fe[21].host_port||"8000")+"")&&B(G,z),fe[23]?be?be.p(fe,ye):(be=zr(fe),be.c(),be.m(U,Y)):be&&(be.d(1),be=null),(!he||ye[0]&128)&&ee!==(ee=(fe[21].container_name||fe[21].id)+"")&&B(ue,ee)},i(fe){he||(E(_.$$.fragment,fe),he=!0)},o(fe){N(_.$$.fragment,fe),he=!1},d(fe){fe&&$(e),se(_),re&&re.d(),de.d(),be&&be.d()}}}function Kp(l){let e,t,n,s;const i=[Wp,Gp],o=[];function c(r,f){return r[7].length===0?0:1}return e=c(l),t=o[e]=i[e](l),{c(){t.c(),n=Le()},m(r,f){o[e].m(r,f),k(r,n,f),s=!0},p(r,f){let d=e;e=c(r),e===d?o[e].p(r,f):(ke(),N(o[d],1,1,()=>{o[d]=null}),we(),t=o[e],t?t.p(r,f):(t=o[e]=i[e](r),t.c()),E(t,1),t.m(n.parentNode,n))},i(r){s||(E(t),s=!0)},o(r){N(t),s=!1},d(r){r&&$(n),o[e].d(r)}}}function Qp(l){let e;return{c(){e=p("span"),e.textContent="Request path from client to container",u(e,"slot","header"),u(e,"class","subtitle svelte-odhywp")},m(t,n){k(t,e,n)},p:ae,d(t){t&&$(e)}}}function Xp(l){let e,t,n,s,i,o,c,r,f,d;return t=new Re({props:{title:"🏗️ Architecture View",$$slots:{header:[Rp],default:[Lp]},$$scope:{ctx:l}}}),i=new Re({props:{title:"📦 Services",padding:!1,$$slots:{default:[Fp]},$$scope:{ctx:l}}}),c=new Re({props:{title:"🖥️ Servers",padding:!1,$$slots:{default:[Hp]},$$scope:{ctx:l}}}),f=new Re({props:{title:"🚦 Traffic Flow",$$slots:{header:[Qp],default:[Kp]},$$scope:{ctx:l}}}),{c(){e=p("div"),oe(t.$$.fragment),n=b(),s=p("div"),oe(i.$$.fragment),o=b(),oe(c.$$.fragment),r=b(),oe(f.$$.fragment),u(s,"class","panels-grid svelte-odhywp"),u(e,"class","architecture-page svelte-odhywp")},m(_,v){k(_,e,v),ne(t,e,null),a(e,n),a(e,s),ne(i,s,null),a(s,o),ne(c,s,null),a(e,r),ne(f,e,null),d=!0},p(_,v){const h={};v[0]&8190|v[1]&16&&(h.$$scope={dirty:v,ctx:_}),t.$set(h);const m={};v[0]&128|v[1]&16&&(m.$$scope={dirty:v,ctx:_}),i.$set(m);const g={};v[0]&2|v[1]&16&&(g.$$scope={dirty:v,ctx:_}),c.$set(g);const C={};v[0]&130|v[1]&16&&(C.$$scope={dirty:v,ctx:_}),f.$set(C)},i(_){d||(E(t.$$.fragment,_),E(i.$$.fragment,_),E(c.$$.fragment,_),E(f.$$.fragment,_),d=!0)},o(_){N(t.$$.fragment,_),N(i.$$.fragment,_),N(c.$$.fragment,_),N(f.$$.fragment,_),d=!1},d(_){_&&$(e),se(t),se(i),se(c),se(f)}}}function Ur(l){return l?l.toLocaleTimeString():""}function qn(l){switch(l.type){case"stateful":return"🗄️";case"frontend":return"🌐";case"api":return"⚡";case"worker":return"⚙️";default:return"📦"}}function Fn(l){return l.nginx_status==="running"}function Zp(l,e,t){let n,s,i,o;We(l,aa,L=>t(12,o=L));let c="",r="",f=!1,d=[],_=[],v=[],h=null,m=null,g=!1,C=null;ul(()=>{g||(y(),C=setInterval(y,6e4))}),ls(()=>{C&&clearInterval(C)});async function y(){g||t(6,f=!0),t(9,m=null);try{const L=await Be("POST","/infra/architecture",{project:c||null,environment:r||null});t(7,d=L.nodes||[]),t(1,_=L.servers||[]),v=L.infrastructure||[],t(8,h=new Date),t(10,g=!0)}catch(L){t(9,m=L.message),g||ve.error("Failed to load architecture: "+L.message)}finally{t(6,f=!1)}}async function w(){const L=_.filter(R=>R.nginx_status!=="running").map(R=>R.ip);if(L.length===0){ve.info("All servers already have nginx running");return}ve.info(`Fixing ${L.length} server(s)...`);try{await Be("POST","/infra/nginx/ensure",{server_ips:L}),ve.success("Nginx sidecar installed"),architectureStore.refresh()}catch(R){ve.error(R.message)}}function S(){y()}function M(){y()}function P(){c=Ge(this),t(4,c)}function D(){r=Ge(this),t(5,r)}const j=(L,R)=>{var A;return(A=L.servers)==null?void 0:A.includes(R.ip)};return l.$$.update=()=>{l.$$.dirty[0]&2&&t(3,n=_.filter(L=>L.nginx_status==="running").length),l.$$.dirty[0]&2&&t(2,s=_.length),l.$$.dirty[0]&12&&t(11,i=n===s)},[M,_,s,n,c,r,f,d,h,m,g,i,o,w,S,P,D,j]}class xp extends Ve{constructor(e){super(),Ye(this,e,Zp,Xp,Je,{refresh:0},null,[-1,-1])}get refresh(){return this.$$.ctx[0]}}function e_(l){let e,t,n,s,i,o,c,r,f,d,_,v,h,m,g,C,y,w,S,M,P,D,j,L,R,A;n=new uc({}),i=new _c({props:{tabs:l[11],active:l[0],scrollable:!0}}),i.$on("change",l[13]);let F=l[9]&&Ir(l),q={};d=new xc({props:q}),l[16](d),h=new Bf({});let H={};C=new bu({props:H}),l[17](C);let W={};S=new xp({props:W}),l[18](S);let I={};D=new od({props:I}),l[19](D);const J=[i_,o_,s_,n_],z=[];function G(O,U){return O[0]==="logs"?0:O[0]==="snapshots"?1:O[0]==="services"?2:O[0]==="settings"?3:-1}return~(L=G(l))&&(R=z[L]=J[L](l)),{c(){e=p("div"),t=p("div"),oe(n.$$.fragment),s=b(),oe(i.$$.fragment),o=b(),F&&F.c(),c=b(),r=p("main"),f=p("div"),oe(d.$$.fragment),_=b(),v=p("div"),oe(h.$$.fragment),m=b(),g=p("div"),oe(C.$$.fragment),y=b(),w=p("div"),oe(S.$$.fragment),M=b(),P=p("div"),oe(D.$$.fragment),j=b(),R&&R.c(),u(f,"class","svelte-p7g5el"),$e(f,"hidden",l[0]!=="infra"),u(v,"class","svelte-p7g5el"),$e(v,"hidden",l[0]!=="deploy"),u(g,"class","svelte-p7g5el"),$e(g,"hidden",l[0]!=="deployments"),u(w,"class","svelte-p7g5el"),$e(w,"hidden",l[0]!=="architecture"),u(P,"class","svelte-p7g5el"),$e(P,"hidden",l[0]!=="metrics"),u(r,"class","content glass svelte-p7g5el"),u(t,"class","container svelte-p7g5el"),u(e,"class","app svelte-p7g5el")},m(O,U){k(O,e,U),a(e,t),ne(n,t,null),a(t,s),ne(i,t,null),a(t,o),F&&F.m(t,null),a(t,c),a(t,r),a(r,f),ne(d,f,null),a(r,_),a(r,v),ne(h,v,null),a(r,m),a(r,g),ne(C,g,null),a(r,y),a(r,w),ne(S,w,null),a(r,M),a(r,P),ne(D,P,null),a(r,j),~L&&z[L].m(r,null),A=!0},p(O,U){const Y={};U&1&&(Y.active=O[0]),i.$set(Y),O[9]?F?(F.p(O,U),U&512&&E(F,1)):(F=Ir(O),F.c(),E(F,1),F.m(t,c)):F&&(ke(),N(F,1,1,()=>{F=null}),we());const Z={};d.$set(Z),(!A||U&1)&&$e(f,"hidden",O[0]!=="infra"),(!A||U&1)&&$e(v,"hidden",O[0]!=="deploy");const ie={};C.$set(ie),(!A||U&1)&&$e(g,"hidden",O[0]!=="deployments");const le={};S.$set(le),(!A||U&1)&&$e(w,"hidden",O[0]!=="architecture");const ee={};D.$set(ee),(!A||U&1)&&$e(P,"hidden",O[0]!=="metrics");let ue=L;L=G(O),L===ue?~L&&z[L].p(O,U):(R&&(ke(),N(z[ue],1,1,()=>{z[ue]=null}),we()),~L?(R=z[L],R?R.p(O,U):(R=z[L]=J[L](O),R.c()),E(R,1),R.m(r,null)):R=null)},i(O){A||(E(n.$$.fragment,O),E(i.$$.fragment,O),E(F),E(d.$$.fragment,O),E(h.$$.fragment,O),E(C.$$.fragment,O),E(S.$$.fragment,O),E(D.$$.fragment,O),E(R),A=!0)},o(O){N(n.$$.fragment,O),N(i.$$.fragment,O),N(F),N(d.$$.fragment,O),N(h.$$.fragment,O),N(C.$$.fragment,O),N(S.$$.fragment,O),N(D.$$.fragment,O),N(R),A=!1},d(O){O&&$(e),se(n),se(i),F&&F.d(),l[16](null),se(d),se(h),l[17](null),se(C),l[18](null),se(S),l[19](null),se(D),~L&&z[L].d()}}}function t_(l){let e,t;return e=new ec({props:{title:"Deploy Dashboard",subtitle:"Sign in to manage your infrastructure"}}),e.$on("success",l[12]),{c(){oe(e.$$.fragment)},m(n,s){ne(e,n,s),t=!0},p:ae,i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){se(e,n)}}}function l_(l){let e;return{c(){e=p("div"),e.innerHTML='<div class="spinner svelte-p7g5el"></div>',u(e,"class","loading-screen svelte-p7g5el")},m(t,n){k(t,e,n)},p:ae,i:ae,o:ae,d(t){t&&$(e)}}}function Ir(l){let e,t;return e=new hc({props:{showTail:l[8],showContainer:l[7]}}),e.$on("change",l[14]),e.$on("refresh",l[15]),{c(){oe(e.$$.fragment)},m(n,s){ne(e,n,s),t=!0},p(n,s){const i={};s&256&&(i.showTail=n[8]),s&128&&(i.showContainer=n[7]),e.$set(i)},i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){se(e,n)}}}function n_(l){let e,t;return e=new Cp({}),{c(){oe(e.$$.fragment)},m(n,s){ne(e,n,s),t=!0},p:ae,i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){se(e,n)}}}function s_(l){let e,t;return e=new Yd({}),{c(){oe(e.$$.fragment)},m(n,s){ne(e,n,s),t=!0},p:ae,i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){se(e,n)}}}function o_(l){let e,t;return e=new Ad({}),{c(){oe(e.$$.fragment)},m(n,s){ne(e,n,s),t=!0},p:ae,i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){N(e.$$.fragment,n),t=!1},d(n){se(e,n)}}}function i_(l){let e,t,n={};return e=new Du({props:n}),l[20](e),{c(){oe(e.$$.fragment)},m(s,i){ne(e,s,i),t=!0},p(s,i){const o={};e.$set(o)},i(s){t||(E(e.$$.fragment,s),t=!0)},o(s){N(e.$$.fragment,s),t=!1},d(s){l[20](null),se(e,s)}}}function r_(l){let e,t,n,s,i,o;e=new nc({});const c=[l_,t_,e_],r=[];function f(d,_){return d[1]?!d[10].token||!d[10].user?1:2:0}return n=f(l),s=r[n]=c[n](l),{c(){oe(e.$$.fragment),t=b(),s.c(),i=Le()},m(d,_){ne(e,d,_),k(d,t,_),r[n].m(d,_),k(d,i,_),o=!0},p(d,[_]){let v=n;n=f(d),n===v?r[n].p(d,_):(ke(),N(r[v],1,1,()=>{r[v]=null}),we(),s=r[n],s?s.p(d,_):(s=r[n]=c[n](d),s.c()),E(s,1),s.m(i.parentNode,i))},i(d){o||(E(e.$$.fragment,d),E(s),o=!0)},o(d){N(e.$$.fragment,d),N(s),o=!1},d(d){d&&($(t),$(i)),se(e,d),r[n].d(d)}}}function a_(l,e,t){let n,s,i,o,c;We(l,ks,R=>t(0,o=R)),We(l,ht,R=>t(10,c=R));let r=!1,f,d,_,v,h;const m=[{id:"infra",label:"Infrastructure"},{id:"deploy",label:"Deploy"},{id:"deployments",label:"Deployments"},{id:"architecture",label:"Architecture"},{id:"logs",label:"Logs"},{id:"metrics",label:"Metrics"},{id:"snapshots",label:"Snapshots"},{id:"services",label:"Services"},{id:"settings",label:"Settings"}];ul(async()=>{const R=await za();t(1,r=!0),R&&g()});function g(){cl.refresh(),ra.refresh(),Ln.refresh(),Rl.refresh()}async function C(R){const{user:A,token:F}=R.detail;ht.setToken(F),ht.setUser(A),g()}function y(R){ks.set(R.detail)}function w(){S()}function S(){switch(o){case"infra":f==null||f.refresh(),cl.refresh();break;case"deployments":d==null||d.refresh();break;case"logs":_==null||_.refresh();break;case"metrics":v==null||v.refresh();break;case"architecture":h==null||h.refresh();break}}function M(R){kt[R?"unshift":"push"](()=>{f=R,t(2,f)})}function P(R){kt[R?"unshift":"push"](()=>{d=R,t(3,d)})}function D(R){kt[R?"unshift":"push"](()=>{h=R,t(6,h)})}function j(R){kt[R?"unshift":"push"](()=>{v=R,t(5,v)})}function L(R){kt[R?"unshift":"push"](()=>{_=R,t(4,_)})}return l.$$.update=()=>{l.$$.dirty&1&&t(9,n=Ia.includes(o)),l.$$.dirty&1&&t(8,s=o==="logs"),l.$$.dirty&1&&t(7,i=o==="logs")},[o,r,f,d,_,v,h,i,s,n,c,m,C,y,w,S,M,P,D,j,L]}class c_ extends Ve{constructor(e){super(),Ye(this,e,a_,r_,Je,{})}}new c_({target:document.getElementById("app")});
