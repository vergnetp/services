var rc=Object.defineProperty;var ac=(l,e,t)=>e in l?rc(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t;var pl=(l,e,t)=>ac(l,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();function be(){}const Ru=l=>l;function Au(l,e){for(const t in e)l[t]=e[t];return l}function Mu(l){return l()}function In(){return Object.create(null)}function Ge(l){l.forEach(Mu)}function _n(l){return typeof l=="function"}function yt(l,e){return l!=l?e==e:l!==e||l&&typeof l=="object"||typeof l=="function"}let Ql;function nn(l,e){return l===e?!0:(Ql||(Ql=document.createElement("a")),Ql.href=e,l===Ql.href)}function uc(l){return Object.keys(l).length===0}function En(l,...e){if(l==null){for(const n of e)n(void 0);return be}const t=l.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function Ol(l){let e;return En(l,t=>e=t)(),e}function ht(l,e,t){l.$$.on_destroy.push(En(e,t))}function Nt(l,e,t,n){if(l){const s=zu(l,e,t,n);return l[0](s)}}function zu(l,e,t,n){return l[1]&&n?Au(t.ctx.slice(),l[1](n(e))):t.ctx}function Rt(l,e,t,n){if(l[2]&&n){const s=l[2](n(t));if(e.dirty===void 0)return s;if(typeof s=="object"){const o=[],i=Math.max(e.dirty.length,s.length);for(let a=0;a<i;a+=1)o[a]=e.dirty[a]|s[a];return o}return e.dirty|s}return e.dirty}function At(l,e,t,n,s,o){if(s){const i=zu(e,t,n,o);l.p(i,s)}}function Mt(l){if(l.ctx.length>32){const e=[],t=l.ctx.length/32;for(let n=0;n<t;n++)e[n]=-1;return e}return-1}function Ou(l){const e={};for(const t in l)e[t]=!0;return e}function Fn(l){const e=typeof l=="string"&&l.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[l,"px"]}const Iu=typeof window<"u";let fc=Iu?()=>window.performance.now():()=>Date.now(),Ln=Iu?l=>requestAnimationFrame(l):be;const Rl=new Set;function Fu(l){Rl.forEach(e=>{e.c(l)||(Rl.delete(e),e.f())}),Rl.size!==0&&Ln(Fu)}function cc(l){let e;return Rl.size===0&&Ln(Fu),{promise:new Promise(t=>{Rl.add(e={c:l,f:t})}),abort(){Rl.delete(e)}}}const Uu=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function r(l,e){l.appendChild(e)}function Bu(l){if(!l)return document;const e=l.getRootNode?l.getRootNode():l.ownerDocument;return e&&e.host?e:l.ownerDocument}function _c(l){const e=p("style");return e.textContent="/* empty */",pc(Bu(l),e),e.sheet}function pc(l,e){return r(l.head||l,e),e.sheet}function $(l,e,t){l.insertBefore(e,t||null)}function w(l){l.parentNode&&l.parentNode.removeChild(l)}function Ne(l,e){for(let t=0;t<l.length;t+=1)l[t]&&l[t].d(e)}function p(l){return document.createElement(l)}function Al(l){return document.createElementNS("http://www.w3.org/2000/svg",l)}function q(l){return document.createTextNode(l)}function b(){return q(" ")}function Oe(){return q("")}function x(l,e,t,n){return l.addEventListener(e,t,n),()=>l.removeEventListener(e,t,n)}function dc(l){return function(e){return e.preventDefault(),l.call(this,e)}}function Un(l){return function(e){return e.stopPropagation(),l.call(this,e)}}function f(l,e,t){t==null?l.removeAttribute(e):l.getAttribute(e)!==t&&l.setAttribute(e,t)}function pn(l){let e;return{p(...t){e=t,e.forEach(n=>l.push(n))},r(){e.forEach(t=>l.splice(l.indexOf(t),1))}}}function Kt(l){return l===""?null:+l}function mc(l){return Array.from(l.childNodes)}function F(l,e){e=""+e,l.data!==e&&(l.data=e)}function te(l,e){l.value=e??""}function Et(l,e,t,n){t==null?l.style.removeProperty(e):l.style.setProperty(e,t,"")}function Le(l,e,t){for(let n=0;n<l.options.length;n+=1){const s=l.options[n];if(s.__value===e){s.selected=!0;return}}(!t||e!==void 0)&&(l.selectedIndex=-1)}function ft(l){const e=l.querySelector(":checked");return e&&e.__value}function we(l,e,t){l.classList.toggle(e,!!t)}function Hu(l,e,{bubbles:t=!1,cancelable:n=!1}={}){return new CustomEvent(l,{detail:e,bubbles:t,cancelable:n})}class vc{constructor(e=!1){pl(this,"is_svg",!1);pl(this,"e");pl(this,"n");pl(this,"t");pl(this,"a");this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,n=null){this.e||(this.is_svg?this.e=Al(t.nodeName):this.e=p(t.nodeType===11?"TEMPLATE":t.nodeName),this.t=t.tagName!=="TEMPLATE"?t:t.content,this.c(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)$(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(w)}}const sn=new Map;let on=0;function hc(l){let e=5381,t=l.length;for(;t--;)e=(e<<5)-e^l.charCodeAt(t);return e>>>0}function gc(l,e){const t={stylesheet:_c(e),rules:{}};return sn.set(l,t),t}function Bn(l,e,t,n,s,o,i,a=0){const u=16.666/n;let c=`{
`;for(let S=0;S<=1;S+=u){const C=e+(t-e)*o(S);c+=S*100+`%{${i(C,1-C)}}
`}const _=c+`100% {${i(t,1-t)}}
}`,d=`__svelte_${hc(_)}_${a}`,m=Bu(l),{stylesheet:h,rules:v}=sn.get(m)||gc(m,l);v[d]||(v[d]=!0,h.insertRule(`@keyframes ${d} ${_}`,h.cssRules.length));const g=l.style.animation||"";return l.style.animation=`${g?`${g}, `:""}${d} ${n}ms linear ${s}ms 1 both`,on+=1,d}function bc(l,e){const t=(l.style.animation||"").split(", "),n=t.filter(e?o=>o.indexOf(e)<0:o=>o.indexOf("__svelte")===-1),s=t.length-n.length;s&&(l.style.animation=n.join(", "),on-=s,on||kc())}function kc(){Ln(()=>{on||(sn.forEach(l=>{const{ownerNode:e}=l.stylesheet;e&&w(e)}),sn.clear())})}let Vl;function Gl(l){Vl=l}function Pn(){if(!Vl)throw new Error("Function called outside component initialization");return Vl}function Cl(l){Pn().$$.on_mount.push(l)}function wc(l){Pn().$$.on_destroy.push(l)}function Il(){const l=Pn();return(e,t,{cancelable:n=!1}={})=>{const s=l.$$.callbacks[e];if(s){const o=Hu(e,t,{cancelable:n});return s.slice().forEach(i=>{i.call(l,o)}),!o.defaultPrevented}return!0}}function rn(l,e){const t=l.$$.callbacks[e.type];t&&t.slice().forEach(n=>n.call(this,e))}const El=[],zt=[];let Ml=[];const yn=[],$c=Promise.resolve();let Sn=!1;function Cc(){Sn||(Sn=!0,$c.then(Gu))}function Qe(l){Ml.push(l)}function dl(l){yn.push(l)}const wn=new Set;let jl=0;function Gu(){if(jl!==0)return;const l=Vl;do{try{for(;jl<El.length;){const e=El[jl];jl++,Gl(e),yc(e.$$)}}catch(e){throw El.length=0,jl=0,e}for(Gl(null),El.length=0,jl=0;zt.length;)zt.pop()();for(let e=0;e<Ml.length;e+=1){const t=Ml[e];wn.has(t)||(wn.add(t),t())}Ml.length=0}while(El.length);for(;yn.length;)yn.pop()();Sn=!1,wn.clear(),Gl(l)}function yc(l){if(l.fragment!==null){l.update(),Ge(l.before_update);const e=l.dirty;l.dirty=[-1],l.fragment&&l.fragment.p(l.ctx,e),l.after_update.forEach(Qe)}}function Sc(l){const e=[],t=[];Ml.forEach(n=>l.indexOf(n)===-1?e.push(n):t.push(n)),t.forEach(n=>n()),Ml=e}let Hl;function qc(){return Hl||(Hl=Promise.resolve(),Hl.then(()=>{Hl=null})),Hl}function $n(l,e,t){l.dispatchEvent(Hu(`${e?"intro":"outro"}${t}`))}const xl=new Set;let ol;function qe(){ol={r:0,c:[],p:ol}}function je(){ol.r||Ge(ol.c),ol=ol.p}function N(l,e){l&&l.i&&(xl.delete(l),l.i(e))}function M(l,e,t,n){if(l&&l.o){if(xl.has(l))return;xl.add(l),ol.c.push(()=>{xl.delete(l),n&&(t&&l.d(1),n())}),l.o(e)}else n&&n()}const jc={duration:0};function Nl(l,e,t,n){let o=e(l,t,{direction:"both"}),i=n?0:1,a=null,u=null,c=null,_;function d(){c&&bc(l,c)}function m(v,g){const S=v.b-i;return g*=Math.abs(S),{a:i,b:v.b,d:S,duration:g,start:v.start,end:v.start+g,group:v.group}}function h(v){const{delay:g=0,duration:S=300,easing:C=Ru,tick:k=be,css:y}=o||jc,T={start:fc()+g,b:v};v||(T.group=ol,ol.r+=1),"inert"in l&&(v?_!==void 0&&(l.inert=_):(_=l.inert,l.inert=!0)),a||u?u=T:(y&&(d(),c=Bn(l,i,v,S,g,C,y)),v&&k(0,1),a=m(T,S),Qe(()=>$n(l,v,"start")),cc(D=>{if(u&&D>u.start&&(a=m(u,S),u=null,$n(l,a.b,"start"),y&&(d(),c=Bn(l,i,a.b,a.duration,0,C,o.css))),a){if(D>=a.end)k(i=a.b,1-i),$n(l,a.b,"end"),u||(a.b?d():--a.group.r||Ge(a.group.c)),a=null;else if(D>=a.start){const E=D-a.start;i=a.a+a.d*C(E/a.duration),k(i,1-i)}}return!!(a||u)}))}return{run(v){_n(o)?qc().then(()=>{o=o({direction:v?"in":"out"}),h(v)}):h(v)},end(){d(),a=u=null}}}function pe(l){return(l==null?void 0:l.length)!==void 0?l:Array.from(l)}function Vu(l,e){M(l,1,1,()=>{e.delete(l.key)})}function Wu(l,e,t,n,s,o,i,a,u,c,_,d){let m=l.length,h=o.length,v=m;const g={};for(;v--;)g[l[v].key]=v;const S=[],C=new Map,k=new Map,y=[];for(v=h;v--;){const j=d(s,o,v),L=t(j);let I=i.get(L);I?y.push(()=>I.p(j,e)):(I=c(L,j),I.c()),C.set(L,S[v]=I),L in g&&k.set(L,Math.abs(v-g[L]))}const T=new Set,D=new Set;function E(j){N(j,1),j.m(a,_),i.set(j.key,j),_=j.first,h--}for(;m&&h;){const j=S[h-1],L=l[m-1],I=j.key,R=L.key;j===L?(_=j.first,m--,h--):C.has(R)?!i.has(I)||T.has(I)?E(j):D.has(R)?m--:k.get(I)>k.get(R)?(D.add(I),E(j)):(T.add(R),m--):(u(L,i),m--)}for(;m--;){const j=l[m];C.has(j.key)||u(j,i)}for(;h;)E(S[h-1]);return Ge(y),S}function ml(l,e,t){const n=l.$$.props[e];n!==void 0&&(l.$$.bound[n]=t,t(l.$$.ctx[n]))}function _e(l){l&&l.c()}function fe(l,e,t){const{fragment:n,after_update:s}=l.$$;n&&n.m(e,t),Qe(()=>{const o=l.$$.on_mount.map(Mu).filter(_n);l.$$.on_destroy?l.$$.on_destroy.push(...o):Ge(o),l.$$.on_mount=[]}),s.forEach(Qe)}function ce(l,e){const t=l.$$;t.fragment!==null&&(Sc(t.after_update),Ge(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function Tc(l,e){l.$$.dirty[0]===-1&&(El.push(l),Cc(),l.$$.dirty.fill(0)),l.$$.dirty[e/31|0]|=1<<e%31}function qt(l,e,t,n,s,o,i=null,a=[-1]){const u=Vl;Gl(l);const c=l.$$={fragment:null,ctx:[],props:o,update:be,not_equal:s,bound:In(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:In(),dirty:a,skip_bound:!1,root:e.target||u.$$.root};i&&i(c.root);let _=!1;if(c.ctx=t?t(l,e.props||{},(d,m,...h)=>{const v=h.length?h[0]:m;return c.ctx&&s(c.ctx[d],c.ctx[d]=v)&&(!c.skip_bound&&c.bound[d]&&c.bound[d](v),_&&Tc(l,d)),m}):[],c.update(),_=!0,Ge(c.before_update),c.fragment=n?n(c.ctx):!1,e.target){if(e.hydrate){const d=mc(e.target);c.fragment&&c.fragment.l(d),d.forEach(w)}else c.fragment&&c.fragment.c();e.intro&&N(l.$$.fragment),fe(l,e.target,e.anchor),Gu()}Gl(u)}class jt{constructor(){pl(this,"$$");pl(this,"$$set")}$destroy(){ce(this,1),this.$destroy=be}$on(e,t){if(!_n(t))return be;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const s=n.indexOf(t);s!==-1&&n.splice(s,1)}}$set(e){this.$$set&&!uc(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Dc="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Dc);const Tl=[];function Ec(l,e){return{subscribe:tl(l,e).subscribe}}function tl(l,e=be){let t;const n=new Set;function s(a){if(yt(l,a)&&(l=a,t)){const u=!Tl.length;for(const c of n)c[1](),Tl.push(c,l);if(u){for(let c=0;c<Tl.length;c+=2)Tl[c][0](Tl[c+1]);Tl.length=0}}}function o(a){s(a(l))}function i(a,u=be){const c=[a,u];return n.add(c),n.size===1&&(t=e(s,o)||be),a(l),()=>{n.delete(c),n.size===0&&t&&(t(),t=null)}}return{set:s,update:o,subscribe:i}}function vl(l,e,t){const n=!Array.isArray(l),s=n?[l]:l;if(!s.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const o=e.length<2;return Ec(t,(i,a)=>{let u=!1;const c=[];let _=0,d=be;const m=()=>{if(_)return;d();const v=e(n?c[0]:c,i,a);o?i(v):d=_n(v)?v:be},h=s.map((v,g)=>En(v,S=>{c[g]=S,_&=~(1<<g),u&&m()},()=>{_|=1<<g}));return u=!0,m(),function(){Ge(h),d(),u=!1}})}function Ju(l,e,t=7){if(typeof document>"u")return;const n=new Date(Date.now()+t*864e5).toUTCString();document.cookie=`${l}=${encodeURIComponent(e)}; expires=${n}; path=/; SameSite=Strict`}function Nn(l){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(^| )"+l+"=([^;]+)"));return e?decodeURIComponent(e[2]):null}function Lc(l){typeof document>"u"||(document.cookie=`${l}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; SameSite=Strict`)}const en="jwt_token";function Pc(){const l=Nn(en),{subscribe:e,set:t,update:n}=tl({token:l,user:null,loading:!1,error:null});return{subscribe:e,setToken(s){Ju(en,s,7),n(o=>({...o,token:s,error:null}))},setUser(s){n(o=>({...o,user:s}))},setError(s){n(o=>({...o,error:s,loading:!1}))},setLoading(s){n(o=>({...o,loading:s}))},logout(){Lc(en),t({token:null,user:null,loading:!1,error:null})},clearError(){n(s=>({...s,error:null}))}}}const kt=Pc();vl(kt,l=>!!l.token&&!!l.user);vl(kt,l=>l.user);let Ku=[];function Nc(l){Ku=l.map(e=>e.toLowerCase())}const Rc=vl(kt,l=>{var e;return(e=l.user)!=null&&e.email?l.user.role==="admin"?!0:Ku.includes(l.user.email.toLowerCase()):!1});function Hn(){return Nn(en)}function qn(l){kt.setToken(l)}function Ac(){kt.logout()}function Yu(l){return Nn(l)}function Qu(l,e,t=30){Ju(l,e,t)}let Zu={baseUrl:"/api/v1",onUnauthorized:null};function Mc(l,e={}){const t=e.config||Zu,n=Ol(kt),s={"Content-Type":"application/json"},o=l.startsWith("/auth/login")||l.startsWith("/auth/register");return n.token&&!o&&!e.skipAuth&&(s.Authorization=`Bearer ${n.token}`),e.headers&&Object.assign(s,e.headers),{url:t.baseUrl+l,headers:s}}async function zc(l,e={}){const t=e.config||Zu;if(l.status===401){let n="Authentication failed";try{const o=await l.json();n=o.detail||o.error||o.message||n}catch{}throw Ol(kt).token&&(kt.logout(),n="Session expired - please login again"),t.onUnauthorized&&t.onUnauthorized(n),new Error(n)}if(!l.ok){const n=await l.json().catch(()=>({detail:"Request failed"}));throw new Error(n.detail||n.error||n.message||"Request failed")}}async function Oc(l,e,t=null,n={}){const{url:s,headers:o}=Mc(e,n),i={method:l,headers:o};t&&(i.body=JSON.stringify(t));const a=await fetch(s,i);if(await zc(a,n),a.status===204)return null;const u=await a.json();return u&&u.success===!0&&u.data!==void 0?u.data:u}async function Ll(l,e,t=null,n={}){return Oc(l,e,t,n)}function Ic(l){let e,t,n,s,o,i,a=l[3]&&Gn();const u=l[9].default,c=Nt(u,l,l[8],null);return{c(){e=p("button"),a&&a.c(),t=b(),c&&c.c(),f(e,"type",l[4]),f(e,"title",l[6]),f(e,"aria-label",l[7]),f(e,"class",n="btn btn-"+l[0]+" btn-"+l[1]+" svelte-1umzi1p"),e.disabled=l[2]},m(_,d){$(_,e,d),a&&a.m(e,null),r(e,t),c&&c.m(e,null),s=!0,o||(i=x(e,"click",l[11]),o=!0)},p(_,d){_[3]?a||(a=Gn(),a.c(),a.m(e,t)):a&&(a.d(1),a=null),c&&c.p&&(!s||d&256)&&At(c,u,_,_[8],s?Rt(u,_[8],d,null):Mt(_[8]),null),(!s||d&16)&&f(e,"type",_[4]),(!s||d&64)&&f(e,"title",_[6]),(!s||d&128)&&f(e,"aria-label",_[7]),(!s||d&3&&n!==(n="btn btn-"+_[0]+" btn-"+_[1]+" svelte-1umzi1p"))&&f(e,"class",n),(!s||d&4)&&(e.disabled=_[2])},i(_){s||(N(c,_),s=!0)},o(_){M(c,_),s=!1},d(_){_&&w(e),a&&a.d(),c&&c.d(_),o=!1,i()}}}function Fc(l){let e,t,n,s,o,i,a=l[3]&&Vn();const u=l[9].default,c=Nt(u,l,l[8],null);return{c(){e=p("a"),a&&a.c(),t=b(),c&&c.c(),f(e,"href",l[5]),f(e,"title",l[6]),f(e,"aria-label",l[7]),f(e,"class",n="btn btn-"+l[0]+" btn-"+l[1]+" svelte-1umzi1p"),we(e,"disabled",l[2])},m(_,d){$(_,e,d),a&&a.m(e,null),r(e,t),c&&c.m(e,null),s=!0,o||(i=x(e,"click",l[10]),o=!0)},p(_,d){_[3]?a||(a=Vn(),a.c(),a.m(e,t)):a&&(a.d(1),a=null),c&&c.p&&(!s||d&256)&&At(c,u,_,_[8],s?Rt(u,_[8],d,null):Mt(_[8]),null),(!s||d&32)&&f(e,"href",_[5]),(!s||d&64)&&f(e,"title",_[6]),(!s||d&128)&&f(e,"aria-label",_[7]),(!s||d&3&&n!==(n="btn btn-"+_[0]+" btn-"+_[1]+" svelte-1umzi1p"))&&f(e,"class",n),(!s||d&7)&&we(e,"disabled",_[2])},i(_){s||(N(c,_),s=!0)},o(_){M(c,_),s=!1},d(_){_&&w(e),a&&a.d(),c&&c.d(_),o=!1,i()}}}function Gn(l){let e;return{c(){e=p("span"),f(e,"class","spinner svelte-1umzi1p")},m(t,n){$(t,e,n)},d(t){t&&w(e)}}}function Vn(l){let e;return{c(){e=p("span"),f(e,"class","spinner svelte-1umzi1p")},m(t,n){$(t,e,n)},d(t){t&&w(e)}}}function Uc(l){let e,t,n,s;const o=[Fc,Ic],i=[];function a(u,c){return u[5]?0:1}return e=a(l),t=i[e]=o[e](l),{c(){t.c(),n=Oe()},m(u,c){i[e].m(u,c),$(u,n,c),s=!0},p(u,[c]){let _=e;e=a(u),e===_?i[e].p(u,c):(qe(),M(i[_],1,1,()=>{i[_]=null}),je(),t=i[e],t?t.p(u,c):(t=i[e]=o[e](u),t.c()),N(t,1),t.m(n.parentNode,n))},i(u){s||(N(t),s=!0)},o(u){M(t),s=!1},d(u){u&&w(n),i[e].d(u)}}}function Bc(l,e,t){let{$$slots:n={},$$scope:s}=e,{variant:o="default"}=e,{size:i="md"}=e,{disabled:a=!1}=e,{loading:u=!1}=e,{type:c="button"}=e,{href:_=null}=e,{title:d=void 0}=e,{ariaLabel:m=void 0}=e;function h(g){rn.call(this,l,g)}function v(g){rn.call(this,l,g)}return l.$$set=g=>{"variant"in g&&t(0,o=g.variant),"size"in g&&t(1,i=g.size),"disabled"in g&&t(2,a=g.disabled),"loading"in g&&t(3,u=g.loading),"type"in g&&t(4,c=g.type),"href"in g&&t(5,_=g.href),"title"in g&&t(6,d=g.title),"ariaLabel"in g&&t(7,m=g.ariaLabel),"$$scope"in g&&t(8,s=g.$$scope)},[o,i,a,u,c,_,d,m,s,n,h,v]}class Be extends jt{constructor(e){super(),qt(this,e,Bc,Uc,yt,{variant:0,size:1,disabled:2,loading:3,type:4,href:5,title:6,ariaLabel:7})}}const Hc=l=>({}),Wn=l=>({}),Gc=l=>({}),Jn=l=>({});function Kn(l,e,t){const n=l.slice();return n[57]=e[t],n[58]=e,n[59]=t,n}function Yn(l,e,t){const n=l.slice();return n[60]=e[t],n}function Qn(l,e,t){const n=l.slice();return n[63]=e[t],n}const Vc=l=>({}),Zn=l=>({}),Wc=l=>({}),Xn=l=>({});function xn(l){let e;function t(o,i){return o[2]?Kc:Jc}let n=t(l),s=n(l);return{c(){s.c(),e=Oe()},m(o,i){s.m(o,i),$(o,e,i)},p(o,i){n===(n=t(o))&&s?s.p(o,i):(s.d(1),s=n(o),s&&(s.c(),s.m(e.parentNode,e)))},d(o){o&&w(e),s.d(o)}}}function Jc(l){let e;return{c(){e=p("span"),f(e,"class","brand-dot svelte-18o6zjb")},m(t,n){$(t,e,n)},p:be,d(t){t&&w(e)}}}function Kc(l){let e,t;return{c(){e=p("img"),nn(e.src,t=l[2])||f(e,"src",t),f(e,"alt",l[0]),f(e,"class","auth-logo svelte-18o6zjb")},m(n,s){$(n,e,s)},p(n,s){s[0]&4&&!nn(e.src,t=n[2])&&f(e,"src",t),s[0]&1&&f(e,"alt",n[0])},d(n){n&&w(e)}}}function Yc(l){let e,t,n,s,o,i,a,u=l[3]&&xn(l);return{c(){e=p("div"),u&&u.c(),t=b(),n=p("h1"),s=q(l[0]),o=b(),i=p("p"),a=q(l[1]),f(n,"class","svelte-18o6zjb"),f(i,"class","subtitle svelte-18o6zjb"),f(e,"class","auth-header svelte-18o6zjb")},m(c,_){$(c,e,_),u&&u.m(e,null),r(e,t),r(e,n),r(n,s),r(e,o),r(e,i),r(i,a)},p(c,_){c[3]?u?u.p(c,_):(u=xn(c),u.c(),u.m(e,t)):u&&(u.d(1),u=null),_[0]&1&&F(s,c[0]),_[0]&2&&F(a,c[1])},d(c){c&&w(e),u&&u.d()}}}function es(l){let e,t,n,s=pe(l[6]),o=[];for(let a=0;a<s.length;a+=1)o[a]=ts(Qn(l,s,a));let i=!l[7]&&ls();return{c(){e=p("div");for(let a=0;a<o.length;a+=1)o[a].c();t=b(),i&&i.c(),n=Oe(),f(e,"class","social-login svelte-18o6zjb")},m(a,u){$(a,e,u);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(e,null);$(a,t,u),i&&i.m(a,u),$(a,n,u)},p(a,u){if(u[0]&67371072|u[1]&1){s=pe(a[6]);let c;for(c=0;c<s.length;c+=1){const _=Qn(a,s,c);o[c]?o[c].p(_,u):(o[c]=ts(_),o[c].c(),o[c].m(e,null))}for(;c<o.length;c+=1)o[c].d(1);o.length=s.length}a[7]?i&&(i.d(1),i=null):i||(i=ls(),i.c(),i.m(n.parentNode,n))},d(a){a&&(w(e),w(t),w(n)),Ne(o,a),i&&i.d(a)}}}function ts(l){let e,t,n=(l[26][l[63]]||"")+"",s,o=l[63].charAt(0).toUpperCase()+l[63].slice(1)+"",i,a,u,c,_;function d(){return l[43](l[63])}return{c(){e=p("button"),t=p("span"),s=q(`
            Continue with `),i=q(o),a=b(),f(t,"class","social-icon svelte-18o6zjb"),f(e,"class",u="btn-social btn-social-"+l[63]+" svelte-18o6zjb"),e.disabled=l[18]},m(m,h){$(m,e,h),r(e,t),t.innerHTML=n,r(e,s),r(e,i),r(e,a),c||(_=x(e,"click",d),c=!0)},p(m,h){l=m,h[0]&64&&n!==(n=(l[26][l[63]]||"")+"")&&(t.innerHTML=n),h[0]&64&&o!==(o=l[63].charAt(0).toUpperCase()+l[63].slice(1)+"")&&F(i,o),h[0]&64&&u!==(u="btn-social btn-social-"+l[63]+" svelte-18o6zjb")&&f(e,"class",u),h[0]&262144&&(e.disabled=l[18])},d(m){m&&w(e),c=!1,_()}}}function ls(l){let e;return{c(){e=p("div"),e.innerHTML='<span class="svelte-18o6zjb">or</span>',f(e,"class","divider svelte-18o6zjb")},m(t,n){$(t,e,n)},d(t){t&&w(e)}}}function ns(l){let e,t,n,s,o,i,a,u=l[10]&&l[27][l[10]]&&ss(l),c=!l[7]&&os();return{c(){e=p("button"),u&&u.c(),t=b(),n=q(l[9]),s=b(),c&&c.c(),o=Oe(),f(e,"class","btn-sso svelte-18o6zjb"),e.disabled=l[18]},m(_,d){$(_,e,d),u&&u.m(e,null),r(e,t),r(e,n),$(_,s,d),c&&c.m(_,d),$(_,o,d),i||(a=x(e,"click",l[32]),i=!0)},p(_,d){_[10]&&_[27][_[10]]?u?u.p(_,d):(u=ss(_),u.c(),u.m(e,t)):u&&(u.d(1),u=null),d[0]&512&&F(n,_[9]),d[0]&262144&&(e.disabled=_[18]),_[7]?c&&(c.d(1),c=null):c||(c=os(),c.c(),c.m(o.parentNode,o))},d(_){_&&(w(e),w(s),w(o)),u&&u.d(),c&&c.d(_),i=!1,a()}}}function ss(l){let e,t=l[27][l[10]]+"";return{c(){e=p("span"),f(e,"class","sso-icon svelte-18o6zjb")},m(n,s){$(n,e,s),e.innerHTML=t},p(n,s){s[0]&1024&&t!==(t=n[27][n[10]]+"")&&(e.innerHTML=t)},d(n){n&&w(e)}}}function os(l){let e;return{c(){e=p("div"),e.innerHTML='<span class="svelte-18o6zjb">or use email</span>',f(e,"class","divider svelte-18o6zjb")},m(t,n){$(t,e,n)},d(t){t&&w(e)}}}function is(l){let e,t,n,s,o,i=l[4]&&rs(l);const a=[Zc,Qc],u=[];function c(_,d){return _[17]==="login"?0:1}return t=c(l),n=u[t]=a[t](l),{c(){i&&i.c(),e=b(),n.c(),s=Oe()},m(_,d){i&&i.m(_,d),$(_,e,d),u[t].m(_,d),$(_,s,d),o=!0},p(_,d){_[4]?i?i.p(_,d):(i=rs(_),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null);let m=t;t=c(_),t===m?u[t].p(_,d):(qe(),M(u[m],1,1,()=>{u[m]=null}),je(),n=u[t],n?n.p(_,d):(n=u[t]=a[t](_),n.c()),N(n,1),n.m(s.parentNode,s))},i(_){o||(N(n),o=!0)},o(_){M(n),o=!1},d(_){_&&(w(e),w(s)),i&&i.d(_),u[t].d(_)}}}function rs(l){let e,t,n,s,o,i;return{c(){e=p("div"),t=p("button"),t.textContent="Sign In",n=b(),s=p("button"),s.textContent="Sign Up",f(t,"class","tab svelte-18o6zjb"),we(t,"active",l[17]==="login"),f(s,"class","tab svelte-18o6zjb"),we(s,"active",l[17]==="signup"),f(e,"class","tabs svelte-18o6zjb")},m(a,u){$(a,e,u),r(e,t),r(e,n),r(e,s),o||(i=[x(t,"click",l[44]),x(s,"click",l[45])],o=!0)},p(a,u){u[0]&131072&&we(t,"active",a[17]==="login"),u[0]&131072&&we(s,"active",a[17]==="signup")},d(a){a&&w(e),o=!1,Ge(i)}}}function Qc(l){let e,t,n,s,o,i,a,u,c,_,d,m,h,v,g,S,C,k,y,T,D,E,j=pe(l[15]),L=[];for(let R=0;R<j.length;R+=1)L[R]=us(Kn(l,j,R));let I=l[11]&&fs(l);return y=new Be({props:{type:"submit",variant:"primary",loading:l[18],disabled:l[18],$$slots:{default:[t1]},$$scope:{ctx:l}}}),{c(){e=p("form"),t=p("div"),n=p("label"),n.textContent="Email",s=b(),o=p("input"),i=b(),a=p("div"),u=p("label"),u.textContent="Password",c=b(),_=p("input"),d=b(),m=p("div"),h=p("label"),h.textContent="Confirm Password",v=b(),g=p("input"),S=b();for(let R=0;R<L.length;R+=1)L[R].c();C=b(),I&&I.c(),k=b(),_e(y.$$.fragment),f(n,"for","signup-email"),f(n,"class","svelte-18o6zjb"),f(o,"type","email"),f(o,"id","signup-email"),f(o,"placeholder","you@example.com"),o.required=!0,o.disabled=l[18],f(o,"autocomplete","email"),f(o,"class","svelte-18o6zjb"),f(t,"class","form-group svelte-18o6zjb"),f(u,"for","signup-password"),f(u,"class","svelte-18o6zjb"),f(_,"type","password"),f(_,"id","signup-password"),f(_,"placeholder","••••••••"),_.required=!0,_.disabled=l[18],f(_,"autocomplete","new-password"),f(_,"class","svelte-18o6zjb"),f(a,"class","form-group svelte-18o6zjb"),f(h,"for","signup-confirm"),f(h,"class","svelte-18o6zjb"),f(g,"type","password"),f(g,"id","signup-confirm"),f(g,"placeholder","••••••••"),g.required=!0,g.disabled=l[18],f(g,"autocomplete","new-password"),f(g,"class","svelte-18o6zjb"),f(m,"class","form-group svelte-18o6zjb"),f(e,"class","svelte-18o6zjb")},m(R,z){$(R,e,z),r(e,t),r(t,n),r(t,s),r(t,o),te(o,l[22]),r(e,i),r(e,a),r(a,u),r(a,c),r(a,_),te(_,l[23]),r(e,d),r(e,m),r(m,h),r(m,v),r(m,g),te(g,l[24]),r(e,S);for(let Y=0;Y<L.length;Y+=1)L[Y]&&L[Y].m(e,null);r(e,C),I&&I.m(e,null),r(e,k),fe(y,e,null),T=!0,D||(E=[x(o,"input",l[48]),x(_,"input",l[49]),x(g,"input",l[50]),x(e,"submit",l[30])],D=!0)},p(R,z){if((!T||z[0]&262144)&&(o.disabled=R[18]),z[0]&4194304&&o.value!==R[22]&&te(o,R[22]),(!T||z[0]&262144)&&(_.disabled=R[18]),z[0]&8388608&&_.value!==R[23]&&te(_,R[23]),(!T||z[0]&262144)&&(g.disabled=R[18]),z[0]&16777216&&g.value!==R[24]&&te(g,R[24]),z[0]&360448){j=pe(R[15]);let U;for(U=0;U<j.length;U+=1){const O=Kn(R,j,U);L[U]?L[U].p(O,z):(L[U]=us(O),L[U].c(),L[U].m(e,C))}for(;U<L.length;U+=1)L[U].d(1);L.length=j.length}R[11]?I?I.p(R,z):(I=fs(R),I.c(),I.m(e,k)):I&&(I.d(1),I=null);const Y={};z[0]&262144&&(Y.loading=R[18]),z[0]&262144&&(Y.disabled=R[18]),z[1]&16777216&&(Y.$$scope={dirty:z,ctx:R}),y.$set(Y)},i(R){T||(N(y.$$.fragment,R),T=!0)},o(R){M(y.$$.fragment,R),T=!1},d(R){R&&w(e),Ne(L,R),I&&I.d(),ce(y),D=!1,Ge(E)}}}function Zc(l){let e,t,n,s,o,i,a,u,c,_,d,m,h,v,g,S,C=l[5]&&cs(l);return h=new Be({props:{type:"submit",variant:"primary",loading:l[18],disabled:l[18],$$slots:{default:[l1]},$$scope:{ctx:l}}}),{c(){e=p("form"),t=p("div"),n=p("label"),n.textContent="Email",s=b(),o=p("input"),i=b(),a=p("div"),u=p("label"),u.textContent="Password",c=b(),_=p("input"),d=b(),C&&C.c(),m=b(),_e(h.$$.fragment),f(n,"for","login-email"),f(n,"class","svelte-18o6zjb"),f(o,"type","email"),f(o,"id","login-email"),f(o,"placeholder","you@example.com"),o.required=!0,o.disabled=l[18],f(o,"autocomplete","email"),f(o,"class","svelte-18o6zjb"),f(t,"class","form-group svelte-18o6zjb"),f(u,"for","login-password"),f(u,"class","svelte-18o6zjb"),f(_,"type","password"),f(_,"id","login-password"),f(_,"placeholder","••••••••"),_.required=!0,_.disabled=l[18],f(_,"autocomplete","current-password"),f(_,"class","svelte-18o6zjb"),f(a,"class","form-group svelte-18o6zjb"),f(e,"class","svelte-18o6zjb")},m(k,y){$(k,e,y),r(e,t),r(t,n),r(t,s),r(t,o),te(o,l[20]),r(e,i),r(e,a),r(a,u),r(a,c),r(a,_),te(_,l[21]),r(e,d),C&&C.m(e,null),r(e,m),fe(h,e,null),v=!0,g||(S=[x(o,"input",l[46]),x(_,"input",l[47]),x(e,"submit",l[29])],g=!0)},p(k,y){(!v||y[0]&262144)&&(o.disabled=k[18]),y[0]&1048576&&o.value!==k[20]&&te(o,k[20]),(!v||y[0]&262144)&&(_.disabled=k[18]),y[0]&2097152&&_.value!==k[21]&&te(_,k[21]),k[5]?C?C.p(k,y):(C=cs(k),C.c(),C.m(e,m)):C&&(C.d(1),C=null);const T={};y[0]&262144&&(T.loading=k[18]),y[0]&262144&&(T.disabled=k[18]),y[1]&16777216&&(T.$$scope={dirty:y,ctx:k}),h.$set(T)},i(k){v||(N(h.$$.fragment,k),v=!0)},o(k){M(h.$$.fragment,k),v=!1},d(k){k&&w(e),C&&C.d(),ce(h),g=!1,Ge(S)}}}function Xc(l){let e,t,n,s,o,i;function a(){l[53].call(e,l[57])}return{c(){e=p("input"),f(e,"type","text"),f(e,"id",t="signup-"+l[57].name),f(e,"placeholder",n=l[57].placeholder||""),e.required=s=l[57].required,e.disabled=l[18],f(e,"class","svelte-18o6zjb")},m(u,c){$(u,e,c),te(e,l[16][l[57].name]),o||(i=x(e,"input",a),o=!0)},p(u,c){l=u,c[0]&32768&&t!==(t="signup-"+l[57].name)&&f(e,"id",t),c[0]&32768&&n!==(n=l[57].placeholder||"")&&f(e,"placeholder",n),c[0]&32768&&s!==(s=l[57].required)&&(e.required=s),c[0]&262144&&(e.disabled=l[18]),c[0]&98304&&e.value!==l[16][l[57].name]&&te(e,l[16][l[57].name])},d(u){u&&w(e),o=!1,i()}}}function xc(l){let e,t,n,s,o,i;function a(){l[52].call(e,l[57])}return{c(){e=p("textarea"),f(e,"id",t="signup-"+l[57].name),f(e,"placeholder",n=l[57].placeholder||""),e.required=s=l[57].required,e.disabled=l[18],f(e,"rows","3"),f(e,"class","svelte-18o6zjb")},m(u,c){$(u,e,c),te(e,l[16][l[57].name]),o||(i=x(e,"input",a),o=!0)},p(u,c){l=u,c[0]&32768&&t!==(t="signup-"+l[57].name)&&f(e,"id",t),c[0]&32768&&n!==(n=l[57].placeholder||"")&&f(e,"placeholder",n),c[0]&32768&&s!==(s=l[57].required)&&(e.required=s),c[0]&262144&&(e.disabled=l[18]),c[0]&98304&&te(e,l[16][l[57].name])},d(u){u&&w(e),o=!1,i()}}}function e1(l){let e,t,n,s,o,i,a=pe(l[57].options),u=[];for(let _=0;_<a.length;_+=1)u[_]=as(Yn(l,a,_));function c(){l[51].call(e,l[57])}return{c(){e=p("select"),t=p("option"),t.textContent="Select...";for(let _=0;_<u.length;_+=1)u[_].c();t.__value="",te(t,t.__value),f(e,"id",n="signup-"+l[57].name),e.required=s=l[57].required,e.disabled=l[18],f(e,"class","svelte-18o6zjb"),l[16][l[57].name]===void 0&&Qe(c)},m(_,d){$(_,e,d),r(e,t);for(let m=0;m<u.length;m+=1)u[m]&&u[m].m(e,null);Le(e,l[16][l[57].name],!0),o||(i=x(e,"change",c),o=!0)},p(_,d){if(l=_,d[0]&32768){a=pe(l[57].options);let m;for(m=0;m<a.length;m+=1){const h=Yn(l,a,m);u[m]?u[m].p(h,d):(u[m]=as(h),u[m].c(),u[m].m(e,null))}for(;m<u.length;m+=1)u[m].d(1);u.length=a.length}d[0]&32768&&n!==(n="signup-"+l[57].name)&&f(e,"id",n),d[0]&32768&&s!==(s=l[57].required)&&(e.required=s),d[0]&262144&&(e.disabled=l[18]),d[0]&98304&&Le(e,l[16][l[57].name])},d(_){_&&w(e),Ne(u,_),o=!1,i()}}}function as(l){let e,t=l[60]+"",n,s;return{c(){e=p("option"),n=q(t),e.__value=s=l[60],te(e,e.__value)},m(o,i){$(o,e,i),r(e,n)},p(o,i){i[0]&32768&&t!==(t=o[60]+"")&&F(n,t),i[0]&32768&&s!==(s=o[60])&&(e.__value=s,te(e,e.__value))},d(o){o&&w(e)}}}function us(l){let e,t,n=l[57].label+"",s,o,i,a;function u(d,m){return d[57].type==="select"&&d[57].options?e1:d[57].type==="textarea"?xc:Xc}let c=u(l),_=c(l);return{c(){e=p("div"),t=p("label"),s=q(n),i=b(),_.c(),a=b(),f(t,"for",o="signup-"+l[57].name),f(t,"class","svelte-18o6zjb"),f(e,"class","form-group svelte-18o6zjb")},m(d,m){$(d,e,m),r(e,t),r(t,s),r(e,i),_.m(e,null),r(e,a)},p(d,m){m[0]&32768&&n!==(n=d[57].label+"")&&F(s,n),m[0]&32768&&o!==(o="signup-"+d[57].name)&&f(t,"for",o),c===(c=u(d))&&_?_.p(d,m):(_.d(1),_=c(d),_&&(_.c(),_.m(e,a)))},d(d){d&&w(e),_.d()}}}function fs(l){let e,t,n,s,o,i,a,u,c,_,d,m,h;return{c(){e=p("label"),t=p("input"),n=b(),s=p("span"),o=q(l[14]),i=b(),a=p("a"),u=q("Terms"),c=q(` and 
                `),_=p("a"),d=q("Privacy Policy"),f(t,"type","checkbox"),t.disabled=l[18],f(t,"class","svelte-18o6zjb"),f(a,"href",l[12]),f(a,"target","_blank"),f(a,"class","svelte-18o6zjb"),f(_,"href",l[13]),f(_,"target","_blank"),f(_,"class","svelte-18o6zjb"),f(e,"class","terms-checkbox svelte-18o6zjb")},m(v,g){$(v,e,g),r(e,t),t.checked=l[25],r(e,n),r(e,s),r(s,o),r(s,i),r(s,a),r(a,u),r(s,c),r(s,_),r(_,d),m||(h=x(t,"change",l[54]),m=!0)},p(v,g){g[0]&262144&&(t.disabled=v[18]),g[0]&33554432&&(t.checked=v[25]),g[0]&16384&&F(o,v[14]),g[0]&4096&&f(a,"href",v[12]),g[0]&8192&&f(_,"href",v[13])},d(v){v&&w(e),m=!1,h()}}}function t1(l){let e;return{c(){e=q("Create Account")},m(t,n){$(t,e,n)},d(t){t&&w(e)}}}function cs(l){let e,t,n;return{c(){e=p("button"),e.textContent="Forgot password?",f(e,"type","button"),f(e,"class","link-btn forgot-link svelte-18o6zjb")},m(s,o){$(s,e,o),t||(n=x(e,"click",l[33]),t=!0)},p:be,d(s){s&&w(e),t=!1,n()}}}function l1(l){let e;return{c(){e=q("Sign In")},m(t,n){$(t,e,n)},d(t){t&&w(e)}}}function _s(l){let e,t;return{c(){e=p("p"),t=q(l[19]),f(e,"class","error-message svelte-18o6zjb")},m(n,s){$(n,e,s),r(e,t)},p(n,s){s[0]&524288&&F(t,n[19])},d(n){n&&w(e)}}}function n1(l){let e,t,n,s,o,i,a,u,c,_;const d=l[42].header,m=Nt(d,l,l[55],Xn),h=m||Yc(l),v=l[42]["before-form"],g=Nt(v,l,l[55],Zn);let S=l[6].length>0&&es(l),C=l[8]&&ns(l),k=!l[7]&&is(l),y=l[19]&&_s(l);const T=l[42]["after-form"],D=Nt(T,l,l[55],Jn),E=l[42].footer,j=Nt(E,l,l[55],Wn);return{c(){e=p("div"),t=p("div"),h&&h.c(),n=b(),g&&g.c(),s=b(),S&&S.c(),o=b(),C&&C.c(),i=b(),k&&k.c(),a=b(),y&&y.c(),u=b(),D&&D.c(),c=b(),j&&j.c(),f(t,"class","auth-card glass svelte-18o6zjb"),f(e,"class","auth-container svelte-18o6zjb")},m(L,I){$(L,e,I),r(e,t),h&&h.m(t,null),r(t,n),g&&g.m(t,null),r(t,s),S&&S.m(t,null),r(t,o),C&&C.m(t,null),r(t,i),k&&k.m(t,null),r(t,a),y&&y.m(t,null),r(t,u),D&&D.m(t,null),r(t,c),j&&j.m(t,null),_=!0},p(L,I){m?m.p&&(!_||I[1]&16777216)&&At(m,d,L,L[55],_?Rt(d,L[55],I,Wc):Mt(L[55]),Xn):h&&h.p&&(!_||I[0]&15)&&h.p(L,_?I:[-1,-1,-1]),g&&g.p&&(!_||I[1]&16777216)&&At(g,v,L,L[55],_?Rt(v,L[55],I,Vc):Mt(L[55]),Zn),L[6].length>0?S?S.p(L,I):(S=es(L),S.c(),S.m(t,o)):S&&(S.d(1),S=null),L[8]?C?C.p(L,I):(C=ns(L),C.c(),C.m(t,i)):C&&(C.d(1),C=null),L[7]?k&&(qe(),M(k,1,1,()=>{k=null}),je()):k?(k.p(L,I),I[0]&128&&N(k,1)):(k=is(L),k.c(),N(k,1),k.m(t,a)),L[19]?y?y.p(L,I):(y=_s(L),y.c(),y.m(t,u)):y&&(y.d(1),y=null),D&&D.p&&(!_||I[1]&16777216)&&At(D,T,L,L[55],_?Rt(T,L[55],I,Gc):Mt(L[55]),Jn),j&&j.p&&(!_||I[1]&16777216)&&At(j,E,L,L[55],_?Rt(E,L[55],I,Hc):Mt(L[55]),Wn)},i(L){_||(N(h,L),N(g,L),N(k),N(D,L),N(j,L),_=!0)},o(L){M(h,L),M(g,L),M(k),M(D,L),M(j,L),_=!1},d(L){L&&w(e),h&&h.d(L),g&&g.d(L),S&&S.d(),C&&C.d(),k&&k.d(),y&&y.d(),D&&D.d(L),j&&j.d(L)}}}function s1(l,e,t){let{$$slots:n={},$$scope:s}=e,{title:o="Welcome"}=e,{subtitle:i="Sign in to your account"}=e,{logo:a=null}=e,{showLogo:u=!0}=e,{allowSignup:c=!0}=e,{allowPasswordReset:_=!0}=e,{requireEmailVerification:d=!1}=e,{socialProviders:m=[]}=e,{socialOnly:h=!1}=e,{ssoEnabled:v=!1}=e,{ssoButtonText:g="Sign in with SSO"}=e,{ssoProvider:S=null}=e,{ssoUrl:C="/api/v1/auth/sso"}=e,{showTerms:k=!1}=e,{termsUrl:y="/terms"}=e,{privacyUrl:T="/privacy"}=e,{termsText:D="I agree to the"}=e,{signupFields:E=[]}=e,{apiBase:j="/api/v1"}=e,{loginEndpoint:L="/auth/login"}=e,{registerEndpoint:I="/auth/register"}=e,{meEndpoint:R="/auth/me"}=e,{onSuccess:z=null}=e,{onError:Y=null}=e;const U=Il();let O="login",H=!1,P=null,A="",B="",J="",Q="",G="",oe=!1,ee={};const V={google:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4"/><path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"/><path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" fill="#FBBC05"/><path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"/></svg>',github:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z"/></svg>',microsoft:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M11.4 11.4H0V0h11.4v11.4z" fill="#F25022"/><path d="M24 11.4H12.6V0H24v11.4z" fill="#7FBA00"/><path d="M11.4 24H0V12.6h11.4V24z" fill="#00A4EF"/><path d="M24 24H12.6V12.6H24V24z" fill="#FFB900"/></svg>',apple:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z"/></svg>',facebook:'<svg viewBox="0 0 24 24" fill="#1877F2"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>'},K={okta:'<svg viewBox="0 0 24 24" fill="currentColor"><circle cx="12" cy="12" r="10" fill="#007DC1"/><path d="M12 6a6 6 0 100 12 6 6 0 000-12zm0 9a3 3 0 110-6 3 3 0 010 6z" fill="white"/></svg>',azure:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M13.05 4.24L6.56 18.05l2.97.01 1.42-3.22h5.09l-.96 3.21h3.03L13.05 4.24z" fill="#0078D4"/></svg>'};function ae(ve){t(17,O=ve),t(19,P=null)}async function W(ve){ve.preventDefault(),t(18,H=!0),t(19,P=null);try{const ze=await Ll("POST",L,{username:A,password:B},{skipAuth:!0}),Me=(ze==null?void 0:ze.access_token)||(ze==null?void 0:ze.token);if(!Me)throw new Error("Login failed - no token returned");qn(Me);let Re=ze==null?void 0:ze.user;if(Re||(Re=await Ll("GET",R)),!Re)throw new Error("Login failed - no user info");kt.setUser(Re);const Ue={user:Re,token:Me};U("success",Ue),z&&z(Ue)}catch(ze){t(19,P=ze.message),U("error",{error:ze.message,type:"login"}),Y&&Y({error:ze.message,type:"login"})}finally{t(18,H=!1)}}async function ie(ve){if(ve.preventDefault(),Q!==G){t(19,P="Passwords do not match");return}if(k&&!oe){t(19,P="Please accept the terms and conditions");return}t(18,H=!0),t(19,P=null);try{const ze={username:J,email:J,password:Q,...ee};await Ll("POST",I,ze,{skipAuth:!0});const Me=await Ll("POST",L,{username:J,password:Q},{skipAuth:!0}),Re=(Me==null?void 0:Me.access_token)||(Me==null?void 0:Me.token);if(!Re)throw new Error("Signup failed - no token returned");qn(Re);let Ue=Me==null?void 0:Me.user;if(Ue||(Ue=await Ll("GET",R)),!Ue)throw new Error("Signup failed - no user info");kt.setUser(Ue);const et={user:Ue,token:Re};U("success",et),z&&z(et)}catch(ze){t(19,P=ze.message),U("error",{error:ze.message,type:"signup"}),Y&&Y({error:ze.message,type:"signup"})}finally{t(18,H=!1)}}async function ue(ve){window.location.href=`${j}/auth/oauth/${ve}`}async function le(){window.location.href=C}function me(){U("passwordReset",{email:A})}const re=ve=>ue(ve),ne=()=>ae("login"),X=()=>ae("signup");function Z(){A=this.value,t(20,A)}function ge(){B=this.value,t(21,B)}function $e(){J=this.value,t(22,J)}function We(){Q=this.value,t(23,Q)}function ct(){G=this.value,t(24,G)}function bt(ve){ee[ve.name]=ft(this),t(16,ee),t(15,E),t(15,E)}function rt(ve){ee[ve.name]=this.value,t(16,ee),t(15,E),t(15,E)}function Ee(ve){ee[ve.name]=this.value,t(16,ee),t(15,E),t(15,E)}function Ie(){oe=this.checked,t(25,oe)}return l.$$set=ve=>{"title"in ve&&t(0,o=ve.title),"subtitle"in ve&&t(1,i=ve.subtitle),"logo"in ve&&t(2,a=ve.logo),"showLogo"in ve&&t(3,u=ve.showLogo),"allowSignup"in ve&&t(4,c=ve.allowSignup),"allowPasswordReset"in ve&&t(5,_=ve.allowPasswordReset),"requireEmailVerification"in ve&&t(34,d=ve.requireEmailVerification),"socialProviders"in ve&&t(6,m=ve.socialProviders),"socialOnly"in ve&&t(7,h=ve.socialOnly),"ssoEnabled"in ve&&t(8,v=ve.ssoEnabled),"ssoButtonText"in ve&&t(9,g=ve.ssoButtonText),"ssoProvider"in ve&&t(10,S=ve.ssoProvider),"ssoUrl"in ve&&t(35,C=ve.ssoUrl),"showTerms"in ve&&t(11,k=ve.showTerms),"termsUrl"in ve&&t(12,y=ve.termsUrl),"privacyUrl"in ve&&t(13,T=ve.privacyUrl),"termsText"in ve&&t(14,D=ve.termsText),"signupFields"in ve&&t(15,E=ve.signupFields),"apiBase"in ve&&t(36,j=ve.apiBase),"loginEndpoint"in ve&&t(37,L=ve.loginEndpoint),"registerEndpoint"in ve&&t(38,I=ve.registerEndpoint),"meEndpoint"in ve&&t(39,R=ve.meEndpoint),"onSuccess"in ve&&t(40,z=ve.onSuccess),"onError"in ve&&t(41,Y=ve.onError),"$$scope"in ve&&t(55,s=ve.$$scope)},l.$$.update=()=>{l.$$.dirty[0]&98304&&E.forEach(ve=>{ve.name in ee||t(16,ee[ve.name]=ve.default||"",ee)})},[o,i,a,u,c,_,m,h,v,g,S,k,y,T,D,E,ee,O,H,P,A,B,J,Q,G,oe,V,K,ae,W,ie,ue,le,me,d,C,j,L,I,R,z,Y,n,re,ne,X,Z,ge,$e,We,ct,bt,rt,Ee,Ie,s]}class o1 extends jt{constructor(e){super(),qt(this,e,s1,n1,yt,{title:0,subtitle:1,logo:2,showLogo:3,allowSignup:4,allowPasswordReset:5,requireEmailVerification:34,socialProviders:6,socialOnly:7,ssoEnabled:8,ssoButtonText:9,ssoProvider:10,ssoUrl:35,showTerms:11,termsUrl:12,privacyUrl:13,termsText:14,signupFields:15,apiBase:36,loginEndpoint:37,registerEndpoint:38,meEndpoint:39,onSuccess:40,onError:41},null,[-1,-1,-1])}}const Rn="theme",ps="dark";function i1(){return typeof localStorage>"u"?ps:localStorage.getItem(Rn)||ps}function jn(l){typeof document<"u"&&document.documentElement.setAttribute("data-theme",l)}function r1(){const l=i1(),{subscribe:e,set:t}=tl(l);return jn(l),{subscribe:e,set(n){typeof localStorage<"u"&&localStorage.setItem(Rn,n),jn(n),t(n)}}}const Xu=r1();function a1(){Xu.update(l=>{const e=l==="dark"?"light":"dark";return typeof localStorage<"u"&&localStorage.setItem(Rn,e),jn(e),e})}function u1(l){let e,t;return{c(){e=Al("svg"),t=Al("path"),f(t,"d","M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"),f(e,"viewBox","0 0 24 24"),f(e,"fill","none"),f(e,"stroke","currentColor"),f(e,"stroke-width","2"),f(e,"class","svelte-8jsmst")},m(n,s){$(n,e,s),r(e,t)},d(n){n&&w(e)}}}function f1(l){let e,t,n;return{c(){e=Al("svg"),t=Al("circle"),n=Al("path"),f(t,"cx","12"),f(t,"cy","12"),f(t,"r","5"),f(n,"d","M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"),f(e,"viewBox","0 0 24 24"),f(e,"fill","none"),f(e,"stroke","currentColor"),f(e,"stroke-width","2"),f(e,"class","svelte-8jsmst")},m(s,o){$(s,e,o),r(e,t),r(e,n)},d(s){s&&w(e)}}}function c1(l){let e,t,n,s;function o(u,c){return u[0]==="dark"?f1:u1}let i=o(l),a=i(l);return{c(){e=p("button"),a.c(),f(e,"class","theme-toggle svelte-8jsmst"),f(e,"title",t=l[0]==="dark"?"Switch to light mode":"Switch to dark mode"),f(e,"aria-label","Toggle theme")},m(u,c){$(u,e,c),a.m(e,null),n||(s=x(e,"click",a1),n=!0)},p(u,[c]){i!==(i=o(u))&&(a.d(1),a=i(u),a&&(a.c(),a.m(e,null))),c&1&&t!==(t=u[0]==="dark"?"Switch to light mode":"Switch to dark mode")&&f(e,"title",t)},i:be,o:be,d(u){u&&w(e),a.d(),n=!1,s()}}}function _1(l,e,t){let n;return ht(l,Xu,s=>t(0,n=s)),[n]}class p1 extends jt{constructor(e){super(),qt(this,e,_1,c1,yt,{})}}const d1=l=>({}),ds=l=>({}),m1=l=>({}),ms=l=>({});function vs(l){let e;function t(o,i){return o[1]?h1:v1}let n=t(l),s=n(l);return{c(){s.c(),e=Oe()},m(o,i){s.m(o,i),$(o,e,i)},p(o,i){n===(n=t(o))&&s?s.p(o,i):(s.d(1),s=n(o),s&&(s.c(),s.m(e.parentNode,e)))},d(o){o&&w(e),s.d(o)}}}function v1(l){let e;return{c(){e=p("span"),f(e,"class","brand-dot svelte-x14ysc")},m(t,n){$(t,e,n)},p:be,d(t){t&&w(e)}}}function h1(l){let e,t;return{c(){e=p("img"),nn(e.src,t=l[1])||f(e,"src",t),f(e,"alt",l[0]),f(e,"class","header-logo svelte-x14ysc")},m(n,s){$(n,e,s)},p(n,s){s&2&&!nn(e.src,t=n[1])&&f(e,"src",t),s&1&&f(e,"alt",n[0])},d(n){n&&w(e)}}}function hs(l){let e;return{c(){e=p("span"),e.textContent="MOCK",f(e,"class","mock-badge svelte-x14ysc")},m(t,n){$(t,e,n)},d(t){t&&w(e)}}}function gs(l){let e,t;return e=new p1({}),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function bs(l){let e,t=(l[8].user.email||l[8].user.username)+"",n;return{c(){e=p("span"),n=q(t),f(e,"class","user-email svelte-x14ysc")},m(s,o){$(s,e,o),r(e,n)},p(s,o){o&256&&t!==(t=(s[8].user.email||s[8].user.username)+"")&&F(n,t)},d(s){s&&w(e)}}}function ks(l){let e,t;return e=new Be({props:{variant:"ghost",size:"sm",$$slots:{default:[g1]},$$scope:{ctx:l}}}),e.$on("click",l[9]),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const o={};s&4160&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function g1(l){let e;return{c(){e=q(l[6])},m(t,n){$(t,e,n)},p(t,n){n&64&&F(e,t[6])},d(t){t&&w(e)}}}function b1(l){let e,t,n,s,o,i,a,u,c,_,d,m,h,v=l[2]&&vs(l);const g=l[11]["after-title"],S=Nt(g,l,l[12],ms),C=l[11].actions,k=Nt(C,l,l[12],ds);let y=l[7]&&hs(),T=l[4]&&gs(),D=l[3]&&l[8].user&&bs(l),E=l[5]&&l[8].token&&ks(l);return{c(){e=p("header"),t=p("div"),v&&v.c(),n=b(),s=p("h1"),o=q(l[0]),i=b(),S&&S.c(),a=b(),u=p("div"),k&&k.c(),c=b(),y&&y.c(),_=b(),T&&T.c(),d=b(),D&&D.c(),m=b(),E&&E.c(),f(s,"class","svelte-x14ysc"),f(t,"class","header-brand svelte-x14ysc"),f(u,"class","header-actions svelte-x14ysc"),f(e,"class","header glass svelte-x14ysc")},m(j,L){$(j,e,L),r(e,t),v&&v.m(t,null),r(t,n),r(t,s),r(s,o),r(t,i),S&&S.m(t,null),r(e,a),r(e,u),k&&k.m(u,null),r(u,c),y&&y.m(u,null),r(u,_),T&&T.m(u,null),r(u,d),D&&D.m(u,null),r(u,m),E&&E.m(u,null),h=!0},p(j,[L]){j[2]?v?v.p(j,L):(v=vs(j),v.c(),v.m(t,n)):v&&(v.d(1),v=null),(!h||L&1)&&F(o,j[0]),S&&S.p&&(!h||L&4096)&&At(S,g,j,j[12],h?Rt(g,j[12],L,m1):Mt(j[12]),ms),k&&k.p&&(!h||L&4096)&&At(k,C,j,j[12],h?Rt(C,j[12],L,d1):Mt(j[12]),ds),j[7]?y||(y=hs(),y.c(),y.m(u,_)):y&&(y.d(1),y=null),j[4]?T?L&16&&N(T,1):(T=gs(),T.c(),N(T,1),T.m(u,d)):T&&(qe(),M(T,1,1,()=>{T=null}),je()),j[3]&&j[8].user?D?D.p(j,L):(D=bs(j),D.c(),D.m(u,m)):D&&(D.d(1),D=null),j[5]&&j[8].token?E?(E.p(j,L),L&288&&N(E,1)):(E=ks(j),E.c(),N(E,1),E.m(u,null)):E&&(qe(),M(E,1,1,()=>{E=null}),je())},i(j){h||(N(S,j),N(k,j),N(T),N(E),h=!0)},o(j){M(S,j),M(k,j),M(T),M(E),h=!1},d(j){j&&w(e),v&&v.d(),S&&S.d(j),k&&k.d(j),y&&y.d(),T&&T.d(),D&&D.d(),E&&E.d()}}}function k1(l,e,t){var C,k;let n;ht(l,kt,y=>t(8,n=y));let{$$slots:s={},$$scope:o}=e,{title:i="Dashboard"}=e,{logo:a=null}=e,{showLogo:u=!0}=e,{showUser:c=!0}=e,{showThemeToggle:_=!1}=e,{showLogout:d=!0}=e,{logoutText:m="Logout"}=e,{showMockBadge:h=!1}=e;const v=Il();let g=h;try{typeof window<"u"&&(g=h||((k=(C=import.meta)==null?void 0:C.env)==null?void 0:k.VITE_MOCK_API)==="1"||localStorage.getItem("mockApi")==="1")}catch{g=h}function S(){Ac(),v("logout")}return l.$$set=y=>{"title"in y&&t(0,i=y.title),"logo"in y&&t(1,a=y.logo),"showLogo"in y&&t(2,u=y.showLogo),"showUser"in y&&t(3,c=y.showUser),"showThemeToggle"in y&&t(4,_=y.showThemeToggle),"showLogout"in y&&t(5,d=y.showLogout),"logoutText"in y&&t(6,m=y.logoutText),"showMockBadge"in y&&t(10,h=y.showMockBadge),"$$scope"in y&&t(12,o=y.$$scope)},[i,a,u,c,_,d,m,g,n,S,h,s,o]}class w1 extends jt{constructor(e){super(),qt(this,e,k1,b1,yt,{title:0,logo:1,showLogo:2,showUser:3,showThemeToggle:4,showLogout:5,logoutText:6,showMockBadge:10})}}function $1(l){let e,t,n;const s=l[2].default,o=Nt(s,l,l[1],null);return{c(){e=p("span"),o&&o.c(),f(e,"class",t="badge badge-"+l[0]+" svelte-1d0la3i")},m(i,a){$(i,e,a),o&&o.m(e,null),n=!0},p(i,[a]){o&&o.p&&(!n||a&2)&&At(o,s,i,i[1],n?Rt(s,i[1],a,null):Mt(i[1]),null),(!n||a&1&&t!==(t="badge badge-"+i[0]+" svelte-1d0la3i"))&&f(e,"class",t)},i(i){n||(N(o,i),n=!0)},o(i){M(o,i),n=!1},d(i){i&&w(e),o&&o.d(i)}}}function C1(l,e,t){let{$$slots:n={},$$scope:s}=e,{variant:o="info"}=e;return l.$$set=i=>{"variant"in i&&t(0,o=i.variant),"$$scope"in i&&t(1,s=i.$$scope)},[o,s,n]}class xe extends jt{constructor(e){super(),qt(this,e,C1,$1,yt,{variant:0})}}const y1=l=>({}),ws=l=>({}),S1=l=>({}),$s=l=>({});function Cs(l){let e,t,n,s=l[0]&&ys(l);const o=l[5].header,i=Nt(o,l,l[4],$s);return{c(){e=p("div"),s&&s.c(),t=b(),i&&i.c(),f(e,"class","card-header svelte-1qbuf8h")},m(a,u){$(a,e,u),s&&s.m(e,null),r(e,t),i&&i.m(e,null),n=!0},p(a,u){a[0]?s?s.p(a,u):(s=ys(a),s.c(),s.m(e,t)):s&&(s.d(1),s=null),i&&i.p&&(!n||u&16)&&At(i,o,a,a[4],n?Rt(o,a[4],u,S1):Mt(a[4]),$s)},i(a){n||(N(i,a),n=!0)},o(a){M(i,a),n=!1},d(a){a&&w(e),s&&s.d(),i&&i.d(a)}}}function ys(l){let e,t;return{c(){e=p("span"),t=q(l[0]),f(e,"class","card-title svelte-1qbuf8h")},m(n,s){$(n,e,s),r(e,t)},p(n,s){s&1&&F(t,n[0])},d(n){n&&w(e)}}}function Ss(l){let e,t;const n=l[5].footer,s=Nt(n,l,l[4],ws);return{c(){e=p("div"),s&&s.c(),f(e,"class","card-footer svelte-1qbuf8h")},m(o,i){$(o,e,i),s&&s.m(e,null),t=!0},p(o,i){s&&s.p&&(!t||i&16)&&At(s,n,o,o[4],t?Rt(n,o[4],i,y1):Mt(o[4]),ws)},i(o){t||(N(s,o),t=!0)},o(o){M(s,o),t=!1},d(o){o&&w(e),s&&s.d(o)}}}function q1(l){let e,t,n,s,o,i=(l[0]||l[3].header)&&Cs(l);const a=l[5].default,u=Nt(a,l,l[4],null);let c=l[3].footer&&Ss(l);return{c(){e=p("div"),i&&i.c(),t=b(),n=p("div"),u&&u.c(),s=b(),c&&c.c(),f(n,"class","card-body svelte-1qbuf8h"),f(e,"class","card svelte-1qbuf8h"),we(e,"glass",l[1]),we(e,"no-padding",!l[2])},m(_,d){$(_,e,d),i&&i.m(e,null),r(e,t),r(e,n),u&&u.m(n,null),r(e,s),c&&c.m(e,null),o=!0},p(_,[d]){_[0]||_[3].header?i?(i.p(_,d),d&9&&N(i,1)):(i=Cs(_),i.c(),N(i,1),i.m(e,t)):i&&(qe(),M(i,1,1,()=>{i=null}),je()),u&&u.p&&(!o||d&16)&&At(u,a,_,_[4],o?Rt(a,_[4],d,null):Mt(_[4]),null),_[3].footer?c?(c.p(_,d),d&8&&N(c,1)):(c=Ss(_),c.c(),N(c,1),c.m(e,null)):c&&(qe(),M(c,1,1,()=>{c=null}),je()),(!o||d&2)&&we(e,"glass",_[1]),(!o||d&4)&&we(e,"no-padding",!_[2])},i(_){o||(N(i),N(u,_),N(c),o=!0)},o(_){M(i),M(u,_),M(c),o=!1},d(_){_&&w(e),i&&i.d(),u&&u.d(_),c&&c.d()}}}function j1(l,e,t){let{$$slots:n={},$$scope:s}=e;const o=Ou(n);let{title:i=""}=e,{glass:a=!1}=e,{padding:u=!0}=e;return l.$$set=c=>{"title"in c&&t(0,i=c.title),"glass"in c&&t(1,a=c.glass),"padding"in c&&t(2,u=c.padding),"$$scope"in c&&t(4,s=c.$$scope)},[i,a,u,o,s,n]}class mt extends jt{constructor(e){super(),qt(this,e,j1,q1,yt,{title:0,glass:1,padding:2})}}function xu(l){const e=l-1;return e*e*e+1}function qs(l,{delay:e=0,duration:t=400,easing:n=Ru}={}){const s=+getComputedStyle(l).opacity;return{delay:e,duration:t,easing:n,css:o=>`opacity: ${o*s}`}}function js(l,{delay:e=0,duration:t=400,easing:n=xu,x:s=0,y:o=0,opacity:i=0}={}){const a=getComputedStyle(l),u=+a.opacity,c=a.transform==="none"?"":a.transform,_=u*(1-i),[d,m]=Fn(s),[h,v]=Fn(o);return{delay:e,duration:t,easing:n,css:(g,S)=>`
			transform: ${c} translate(${(1-g)*d}${m}, ${(1-g)*h}${v});
			opacity: ${u-_*S}`}}function Ts(l,{delay:e=0,duration:t=400,easing:n=xu,start:s=0,opacity:o=0}={}){const i=getComputedStyle(l),a=+i.opacity,u=i.transform==="none"?"":i.transform,c=1-s,_=a*(1-o);return{delay:e,duration:t,easing:n,css:(d,m)=>`
			transform: ${u} scale(${1-c*m});
			opacity: ${a-_*m}
		`}}const T1=l=>({}),Ds=l=>({}),D1=l=>({}),Es=l=>({});function Ls(l){let e,t,n,s,o,i,a,u,c,_,d=(l[1]||l[6].header)&&Ps(l);const m=l[9].default,h=Nt(m,l,l[8],null);let v=l[6].footer&&Rs(l);return{c(){e=p("div"),t=p("div"),d&&d.c(),n=b(),s=p("div"),h&&h.c(),o=b(),v&&v.c(),f(s,"class","modal-body svelte-f0wwwf"),f(t,"class","modal svelte-f0wwwf"),Et(t,"max-width",l[2]),f(e,"class","modal-overlay svelte-f0wwwf"),f(e,"role","dialog"),f(e,"aria-modal","true")},m(g,S){$(g,e,S),r(e,t),d&&d.m(t,null),r(t,n),r(t,s),h&&h.m(s,null),r(t,o),v&&v.m(t,null),u=!0,c||(_=x(e,"click",l[4]),c=!0)},p(g,S){g[1]||g[6].header?d?(d.p(g,S),S&66&&N(d,1)):(d=Ps(g),d.c(),N(d,1),d.m(t,n)):d&&(qe(),M(d,1,1,()=>{d=null}),je()),h&&h.p&&(!u||S&256)&&At(h,m,g,g[8],u?Rt(m,g[8],S,null):Mt(g[8]),null),g[6].footer?v?(v.p(g,S),S&64&&N(v,1)):(v=Rs(g),v.c(),N(v,1),v.m(t,null)):v&&(qe(),M(v,1,1,()=>{v=null}),je()),(!u||S&4)&&Et(t,"max-width",g[2])},i(g){u||(N(d),N(h,g),N(v),g&&Qe(()=>{u&&(i||(i=Nl(t,Ts,{duration:200,start:.95},!0)),i.run(1))}),g&&Qe(()=>{u&&(a||(a=Nl(e,qs,{duration:150},!0)),a.run(1))}),u=!0)},o(g){M(d),M(h,g),M(v),g&&(i||(i=Nl(t,Ts,{duration:200,start:.95},!1)),i.run(0)),g&&(a||(a=Nl(e,qs,{duration:150},!1)),a.run(0)),u=!1},d(g){g&&w(e),d&&d.d(),h&&h.d(g),v&&v.d(),g&&i&&i.end(),g&&a&&a.end(),c=!1,_()}}}function Ps(l){let e,t,n,s,o,i,a,u=l[1]&&Ns(l);const c=l[9].header,_=Nt(c,l,l[8],Es);return{c(){e=p("div"),u&&u.c(),t=b(),_&&_.c(),n=b(),s=p("button"),s.innerHTML='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-f0wwwf"><path d="M18 6L6 18M6 6l12 12"></path></svg>',f(s,"class","modal-close svelte-f0wwwf"),f(s,"aria-label","Close"),f(e,"class","modal-header svelte-f0wwwf")},m(d,m){$(d,e,m),u&&u.m(e,null),r(e,t),_&&_.m(e,null),r(e,n),r(e,s),o=!0,i||(a=x(s,"click",l[3]),i=!0)},p(d,m){d[1]?u?u.p(d,m):(u=Ns(d),u.c(),u.m(e,t)):u&&(u.d(1),u=null),_&&_.p&&(!o||m&256)&&At(_,c,d,d[8],o?Rt(c,d[8],m,D1):Mt(d[8]),Es)},i(d){o||(N(_,d),o=!0)},o(d){M(_,d),o=!1},d(d){d&&w(e),u&&u.d(),_&&_.d(d),i=!1,a()}}}function Ns(l){let e,t;return{c(){e=p("h3"),t=q(l[1]),f(e,"class","svelte-f0wwwf")},m(n,s){$(n,e,s),r(e,t)},p(n,s){s&2&&F(t,n[1])},d(n){n&&w(e)}}}function Rs(l){let e,t;const n=l[9].footer,s=Nt(n,l,l[8],Ds);return{c(){e=p("div"),s&&s.c(),f(e,"class","modal-footer svelte-f0wwwf")},m(o,i){$(o,e,i),s&&s.m(e,null),t=!0},p(o,i){s&&s.p&&(!t||i&256)&&At(s,n,o,o[8],t?Rt(n,o[8],i,T1):Mt(o[8]),Ds)},i(o){t||(N(s,o),t=!0)},o(o){M(s,o),t=!1},d(o){o&&w(e),s&&s.d(o)}}}function E1(l){let e,t,n,s,o=l[0]&&Ls(l);return{c(){o&&o.c(),e=Oe()},m(i,a){o&&o.m(i,a),$(i,e,a),t=!0,n||(s=x(window,"keydown",l[5]),n=!0)},p(i,[a]){i[0]?o?(o.p(i,a),a&1&&N(o,1)):(o=Ls(i),o.c(),N(o,1),o.m(e.parentNode,e)):o&&(qe(),M(o,1,1,()=>{o=null}),je())},i(i){t||(N(o),t=!0)},o(i){M(o),t=!1},d(i){i&&w(e),o&&o.d(i),n=!1,s()}}}function L1(l,e,t){let{$$slots:n={},$$scope:s}=e;const o=Ou(n);let{open:i=!1}=e,{title:a=""}=e,{width:u="500px"}=e,{closeOnOverlay:c=!0}=e;const _=Il();function d(){t(0,i=!1),_("close")}function m(v){c&&v.target===v.currentTarget&&d()}function h(v){v.key==="Escape"&&d()}return l.$$set=v=>{"open"in v&&t(0,i=v.open),"title"in v&&t(1,a=v.title),"width"in v&&t(2,u=v.width),"closeOnOverlay"in v&&t(7,c=v.closeOnOverlay),"$$scope"in v&&t(8,s=v.$$scope)},[i,a,u,d,m,h,o,c,s,n]}class il extends jt{constructor(e){super(),qt(this,e,L1,E1,yt,{open:0,title:1,width:2,closeOnOverlay:7})}}function As(l,e,t){const n=l.slice();return n[6]=e[t],n}function Ms(l){let e,t=l[6].icon+"",n;return{c(){e=p("span"),n=q(t),f(e,"class","tab-icon svelte-1po08a6")},m(s,o){$(s,e,o),r(e,n)},p(s,o){o&2&&t!==(t=s[6].icon+"")&&F(n,t)},d(s){s&&w(e)}}}function zs(l){let e,t,n=l[6].label+"",s,o,i,a,u=l[6].icon&&Ms(l);function c(){return l[4](l[6])}return{c(){e=p("button"),u&&u.c(),t=b(),s=q(n),o=b(),f(e,"class","tab svelte-1po08a6"),we(e,"active",l[0]===l[6].id)},m(_,d){$(_,e,d),u&&u.m(e,null),r(e,t),r(e,s),r(e,o),i||(a=x(e,"click",c),i=!0)},p(_,d){l=_,l[6].icon?u?u.p(l,d):(u=Ms(l),u.c(),u.m(e,t)):u&&(u.d(1),u=null),d&2&&n!==(n=l[6].label+"")&&F(s,n),d&3&&we(e,"active",l[0]===l[6].id)},d(_){_&&w(e),u&&u.d(),i=!1,a()}}}function P1(l){let e,t=pe(l[1]),n=[];for(let s=0;s<t.length;s+=1)n[s]=zs(As(l,t,s));return{c(){e=p("div");for(let s=0;s<n.length;s+=1)n[s].c();f(e,"class","tabs svelte-1po08a6"),we(e,"scrollable",l[2])},m(s,o){$(s,e,o);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(e,null)},p(s,[o]){if(o&11){t=pe(s[1]);let i;for(i=0;i<t.length;i+=1){const a=As(s,t,i);n[i]?n[i].p(a,o):(n[i]=zs(a),n[i].c(),n[i].m(e,null))}for(;i<n.length;i+=1)n[i].d(1);n.length=t.length}o&4&&we(e,"scrollable",s[2])},i:be,o:be,d(s){s&&w(e),Ne(n,s)}}}function N1(l,e,t){let{tabs:n=[]}=e,{active:s=""}=e,{scrollable:o=!0}=e;const i=Il();function a(c){t(0,s=c),i("change",c)}const u=c=>a(c.id);return l.$$set=c=>{"tabs"in c&&t(1,n=c.tabs),"active"in c&&t(0,s=c.active),"scrollable"in c&&t(2,o=c.scrollable)},[s,n,o,a,u]}class R1 extends jt{constructor(e){super(),qt(this,e,N1,P1,yt,{tabs:1,active:0,scrollable:2})}}function A1(){const{subscribe:l,update:e}=tl([]);let t=0;function n(o,i="info",a=3e3){const u={id:++t,message:o,type:i};return e(c=>[...c,u]),a>0&&setTimeout(()=>s(u.id),a),u.id}function s(o){e(i=>i.filter(a=>a.id!==o))}return{subscribe:l,success:(o,i)=>n(o,"success",i),error:(o,i)=>n(o,"error",i??5e3),warning:(o,i)=>n(o,"warning",i),info:(o,i)=>n(o,"info",i),add:n,remove:s}}const Ce=A1();function Os(l,e,t){const n=l.slice();return n[2]=e[t],n}function Is(l,e){let t,n,s=e[2].message+"",o,i,a,u,c,_,d,m,h;function v(){return e[1](e[2])}return{key:l,first:null,c(){t=p("div"),n=p("span"),o=q(s),i=b(),a=p("button"),a.textContent="×",u=b(),f(n,"class","toast-message svelte-1l5lsfn"),f(a,"class","toast-close svelte-1l5lsfn"),f(t,"class",c="toast toast-"+e[2].type+" svelte-1l5lsfn"),this.first=t},m(g,S){$(g,t,S),r(t,n),r(n,o),r(t,i),r(t,a),r(t,u),d=!0,m||(h=x(a,"click",v),m=!0)},p(g,S){e=g,(!d||S&1)&&s!==(s=e[2].message+"")&&F(o,s),(!d||S&1&&c!==(c="toast toast-"+e[2].type+" svelte-1l5lsfn"))&&f(t,"class",c)},i(g){d||(g&&Qe(()=>{d&&(_||(_=Nl(t,js,{x:100,duration:200},!0)),_.run(1))}),d=!0)},o(g){g&&(_||(_=Nl(t,js,{x:100,duration:200},!1)),_.run(0)),d=!1},d(g){g&&w(t),g&&_&&_.end(),m=!1,h()}}}function M1(l){let e,t=[],n=new Map,s,o=pe(l[0]);const i=a=>a[2].id;for(let a=0;a<o.length;a+=1){let u=Os(l,o,a),c=i(u);n.set(c,t[a]=Is(c,u))}return{c(){e=p("div");for(let a=0;a<t.length;a+=1)t[a].c();f(e,"class","toast-container svelte-1l5lsfn")},m(a,u){$(a,e,u);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null);s=!0},p(a,[u]){u&1&&(o=pe(a[0]),qe(),t=Wu(t,u,i,1,a,o,n,e,Vu,Is,null,Os),je())},i(a){if(!s){for(let u=0;u<o.length;u+=1)N(t[u]);s=!0}},o(a){for(let u=0;u<t.length;u+=1)M(t[u]);s=!1},d(a){a&&w(e);for(let u=0;u<t.length;u+=1)t[u].d()}}}function z1(l,e,t){let n;return ht(l,Ce,o=>t(0,n=o)),[n,o=>Ce.remove(o.id)]}class O1 extends jt{constructor(e){super(),qt(this,e,z1,M1,yt,{})}}const I1={internal:{allowSignup:!1,allowPasswordReset:!1,socialProviders:[],ssoEnabled:!1,showTerms:!1,subtitle:"Sign in to continue"}};Nc(["vergnetp@yahoo.fr"]);function Dt(){return Yu("do_token_local")}function F1(l){Qu("do_token_local",l,30)}function Tn(){return Yu("cf_token_local")}function U1(l){Qu("cf_token_local",l,30)}const ef="/api/v1",tf=["/infra/servers","/infra/snapshots","/infra/setup","/infra/deploy","/infra/registry","/infra/agent","/infra/architecture","/infra/fleet","/infra/projects","/infra/containers","/infra/services","/infra/deployments"];function lf(l){return!l||typeof l!="string"?!1:l.split(".").length===3}function nf(l,e={}){const t=Ol(kt),n={"Content-Type":"application/json"},s=l.startsWith("/auth/login")||l.startsWith("/auth/register");if(t.token&&t.token.trim()!==""&&!s&&!e.skipAuth){if(!lf(t.token))return console.error("Invalid JWT format detected - token may be corrupted"),kt.logout(),{error:"Session corrupted - please login again",url:null,headers:null};n.Authorization=`Bearer ${t.token}`}let o=ef+l;if(!e.skipDoToken&&(l.startsWith("/infra/")||tf.some(a=>l.startsWith(a)))){const a=Dt();if(!a)return{error:"DO token not set",url:null,headers:null};const u=o.includes("?")?"&":"?";o+=`${u}do_token=${encodeURIComponent(a)}`}return{url:o,headers:n,error:null}}async function An(l){if(l.status===401){let e="Authentication failed";try{const n=await l.json();e=n.detail||n.error||n.message||e}catch{}throw Ol(kt).token&&(kt.logout(),e="Session expired - please login again"),new Error(e)}if(!l.ok){const e=await l.json().catch(()=>({detail:"Request failed"}));throw new Error(e.detail||e.error||e.message||"Request failed")}}async function He(l,e,t=null,n={}){const{url:s,headers:o,error:i}=nf(e,n);if(i)return console.debug(`Skipping ${e} - ${i}`),null;const a={method:l,headers:o};t&&(a.body=JSON.stringify(t));const u=await fetch(s,a);if(await An(u),u.status===204)return null;const c=await u.json();return c&&c.success===!0&&c.data!==void 0?c.data:c}async function tn(l,e,t=null,n,s={}){const{url:o,headers:i,error:a}=nf(e,s);if(a)throw new Error(a);const u={method:l,headers:i};t&&(u.body=JSON.stringify(t));const c=await fetch(o,u);await An(c);const _=c.body.getReader(),d=new TextDecoder;let m="";for(;;){const{done:h,value:v}=await _.read();if(h)break;m+=d.decode(v,{stream:!0});const g=m.split(`
`);m=g.pop()||"";for(const S of g)if(S.startsWith("data: "))try{const C=JSON.parse(S.slice(6));n(C)}catch{}}}async function B1(l,e,t,n={}){const s=Ol(kt);if(s.token&&!lf(s.token))throw console.error("Invalid JWT format detected - token may be corrupted"),kt.logout(),new Error("Session corrupted - please login again");let o=ef+l;if(!n.skipDoToken&&tf.some(m=>l.startsWith(m))){const m=Dt();if(!m)throw new Error("DO token not set");const h=o.includes("?")?"&":"?";o+=`${h}do_token=${encodeURIComponent(m)}`}const a={};s.token&&(a.Authorization=`Bearer ${s.token}`);const u=await fetch(o,{method:"POST",headers:a,body:e});await An(u);const c=u.body.getReader(),_=new TextDecoder;let d="";for(;;){const{done:m,value:h}=await c.read();if(m)break;d+=_.decode(h,{stream:!0});const v=d.split(`
`);d=v.pop()||"";for(const g of v)if(g.startsWith("data: "))try{const S=JSON.parse(g.slice(6));t(S)}catch{}}}function H1(l,e,t={}){const{refreshInterval:n=0,revalidateOnFocus:s=!0,revalidateOnMount:o=!0,dedupingInterval:i=2e3,initialData:a=null}=t,u=tl({data:a,error:null,loading:!1,lastFetched:null});let c=0,_=null,d=null,m=0;async function h(y=!1){const T=Date.now();return!y&&_&&T-c<i||(c=T,u.update(D=>{var E;return{...D,loading:D.data===null||((E=D.data)==null?void 0:E.length)===0}}),_=(async()=>{try{const D=await e();return u.set({data:D,error:null,loading:!1,lastFetched:new Date}),D}catch(D){throw u.update(E=>({...E,error:D.message||"Fetch failed",loading:!1})),D}finally{_=null}})()),_}function v(){document.visibilityState==="visible"&&s&&h()}function g(){n>0&&!d&&(d=setInterval(()=>h(),n))}function S(){d&&(clearInterval(d),d=null)}const{subscribe:C}=u;function k(y){m++,m===1&&(s&&typeof document<"u"&&document.addEventListener("visibilitychange",v),o&&h(),g());const T=C(y);return()=>{T(),m--,m===0&&(typeof document<"u"&&document.removeEventListener("visibilitychange",v),S())}}return{subscribe:k,refresh:()=>h(!0),mutate:y=>u.update(T=>({...T,data:y})),get:()=>Ol(u)}}function dn(l,e={}){const{transform:t=s=>s,...n}=e;return H1(l,async()=>{const s=await He("GET",l);return t(s)},n)}function G1(l,e={}){const{transform:t=u=>u,...n}=e,s=tl({data:null,error:null,loading:!1,lastFetched:null});let o=null,i=null;async function a(u){const c=l(u);if(!c){s.set({data:null,error:null,loading:!1,lastFetched:null});return}return i&&JSON.stringify(u)===JSON.stringify(o)||(o=u,s.update(_=>({..._,loading:!0})),i=(async()=>{try{const _=await He("GET",c),d=t(_);return s.set({data:d,error:null,loading:!1,lastFetched:new Date}),d}catch(_){throw s.update(d=>({...d,error:_.message||"Fetch failed",loading:!1})),_}finally{i=null}})()),i}return{subscribe:s.subscribe,fetch:a,refresh:()=>o&&a(o),clear:()=>{o=null,s.set({data:null,error:null,loading:!1,lastFetched:null})}}}const Fs=tl("infra");function V1(){const{subscribe:l,set:e}=tl(null);return typeof window<"u"&&e(Dt()),{subscribe:l,refresh(){e(Dt())},set(t){e(t)}}}const Mn=V1(),Pl=tl({project:"",env:"",server:"",container:"",range:"30d",tail:!1}),Zt=dn("/infra/servers",{transform:l=>(l==null?void 0:l.servers)||l||[],refreshInterval:6e4,revalidateOnFocus:!0,initialData:[]}),zn=dn("/infra/projects",{transform:l=>(l==null?void 0:l.projects)||[],refreshInterval:12e4,initialData:[]}),mn=dn("/infra/snapshots",{transform:l=>(l==null?void 0:l.snapshots)||[],refreshInterval:6e4,initialData:[]}),$l=dn("/infra/deployments/history",{transform:l=>(l==null?void 0:l.deployments)||[],refreshInterval:3e4,initialData:[]}),Dn=G1(l=>l!=null&&l.server?`/infra/agent/${l.server}/containers`:null,{transform:l=>{const e=(l==null?void 0:l.containers)||l||[];return(Array.isArray(e)?e:[]).map(t=>({id:t.ID||t.Id||t.id,name:t.Names||t.Name||t.name||"unknown",image:t.Image||t.image,status:t.Status||t.State||t.status,state:t.State||t.state}))}}),vn=vl(Zt,l=>(l==null?void 0:l.data)||[]),On=vl(zn,l=>(l==null?void 0:l.data)||[]),W1=vl(mn,l=>(l==null?void 0:l.data)||[]),sf=vl($l,l=>(l==null?void 0:l.data)||[]),J1=vl(Dn,l=>(l==null?void 0:l.data)||[]),K1="2.6.7";function Y1(){const l=typeof localStorage<"u"&&localStorage.getItem("theme")||"dark",{subscribe:e,set:t}=tl(l);return typeof document<"u"&&document.documentElement.setAttribute("data-theme",l),{subscribe:e,set(n){typeof localStorage<"u"&&localStorage.setItem("theme",n),typeof document<"u"&&document.documentElement.setAttribute("data-theme",n),t(n)}}}const Cn=Y1();function Us(l,e,t){const n=l.slice();return n[20]=e[t],n}function Bs(l,e,t){var o,i,a;const n=l.slice();n[23]=e[t];const s=n[23].ip||((a=(i=(o=n[23].networks)==null?void 0:o.v4)==null?void 0:i[0])==null?void 0:a.ip_address);return n[24]=s,n}function Hs(l,e,t){const n=l.slice();return n[27]=e[t],n}function Gs(l,e,t){const n=l.slice();return n[30]=e[t],n}function Vs(l){let e,t=l[30]+"",n,s;return{c(){e=p("option"),n=q(t),e.__value=s=l[30],te(e,e.__value)},m(o,i){$(o,e,i),r(e,n)},p(o,i){i[0]&16&&t!==(t=o[30]+"")&&F(n,t),i[0]&16&&s!==(s=o[30])&&(e.__value=s,te(e,e.__value))},d(o){o&&w(e)}}}function Ws(l){let e,t=l[27]+"",n,s;return{c(){e=p("option"),n=q(t),e.__value=s=l[27],te(e,e.__value)},m(o,i){$(o,e,i),r(e,n)},p(o,i){i[0]&8&&t!==(t=o[27]+"")&&F(n,t),i[0]&8&&s!==(s=o[27])&&(e.__value=s,te(e,e.__value))},d(o){o&&w(e)}}}function Js(l){let e,t=(l[23].name||"unnamed")+"",n,s,o=l[24]+"",i,a,u;return{c(){e=p("option"),n=q(t),s=q(" ("),i=q(o),a=q(")"),e.__value=u=l[23].id,te(e,e.__value)},m(c,_){$(c,e,_),r(e,n),r(e,s),r(e,i),r(e,a)},p(c,_){_[0]&32&&t!==(t=(c[23].name||"unnamed")+"")&&F(n,t),_[0]&32&&o!==(o=c[24]+"")&&F(i,o),_[0]&32&&u!==(u=c[23].id)&&(e.__value=u,te(e,e.__value))},d(c){c&&w(e)}}}function Ks(l){let e,t=l[24]&&l[23].id&&Js(l);return{c(){t&&t.c(),e=Oe()},m(n,s){t&&t.m(n,s),$(n,e,s)},p(n,s){n[24]&&n[23].id?t?t.p(n,s):(t=Js(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(n){n&&w(e),t&&t.d(n)}}}function Ys(l){let e,t,n,s,o,i,a,u,c=pe(l[6]||[]),_=[];for(let d=0;d<c.length;d+=1)_[d]=Qs(Us(l,c,d));return{c(){e=p("div"),t=p("label"),t.textContent="Container:",n=b(),s=p("select"),o=p("option"),o.textContent="(All)";for(let d=0;d<_.length;d+=1)_[d].c();f(t,"class","svelte-1wvrz0m"),o.__value="",te(o,o.__value),f(s,"class","svelte-1wvrz0m"),f(e,"class","scope-field svelte-1wvrz0m")},m(d,m){$(d,e,m),r(e,t),r(e,n),r(e,s),r(s,o);for(let h=0;h<_.length;h+=1)_[h]&&_[h].m(s,null);Le(s,l[2].container),a||(u=x(s,"change",l[16]),a=!0)},p(d,m){if(m[0]&64){c=pe(d[6]||[]);let h;for(h=0;h<c.length;h+=1){const v=Us(d,c,h);_[h]?_[h].p(v,m):(_[h]=Qs(v),_[h].c(),_[h].m(s,null))}for(;h<_.length;h+=1)_[h].d(1);_.length=c.length}m[0]&20&&i!==(i=d[2].container)&&Le(s,d[2].container)},d(d){d&&w(e),Ne(_,d),a=!1,u()}}}function Qs(l){let e,t=l[20].name+"",n,s;return{c(){e=p("option"),n=q(t),e.__value=s=l[20].name,te(e,e.__value)},m(o,i){$(o,e,i),r(e,n)},p(o,i){i[0]&64&&t!==(t=o[20].name+"")&&F(n,t),i[0]&64&&s!==(s=o[20].name)&&(e.__value=s,te(e,e.__value))},d(o){o&&w(e)}}}function Zs(l){let e,t,n,s,o,i;return{c(){e=p("label"),t=p("input"),s=q(`
      Tail`),f(t,"type","checkbox"),t.checked=n=l[2].tail,f(t,"class","svelte-1wvrz0m"),f(e,"class","tail-toggle svelte-1wvrz0m")},m(a,u){$(a,e,u),r(e,t),r(e,s),o||(i=x(t,"change",l[18]),o=!0)},p(a,u){u[0]&20&&n!==(n=a[2].tail)&&(t.checked=n)},d(a){a&&w(e),o=!1,i()}}}function Q1(l){let e,t,n,s,o,i,a,u,c,_,d,m,h,v,g,S,C,k,y,T,D,E,j,L,I,R,z,Y,U,O,H,P,A,B,J,Q,G,oe,ee,V,K,ae,W=pe(l[4]),ie=[];for(let Z=0;Z<W.length;Z+=1)ie[Z]=Vs(Gs(l,W,Z));let ue=pe(l[3]),le=[];for(let Z=0;Z<ue.length;Z+=1)le[Z]=Ws(Hs(l,ue,Z));let me=pe(l[5]||[]),re=[];for(let Z=0;Z<me.length;Z+=1)re[Z]=Ks(Bs(l,me,Z));let ne=l[1]&&l[2].server&&Ys(l),X=l[0]&&Zs(l);return{c(){e=p("div"),t=p("div"),n=p("div"),n.innerHTML='<span class="brand-dot svelte-1wvrz0m"></span> <span>cc</span>',s=b(),o=p("div"),i=p("label"),i.textContent="Project:",a=b(),u=p("select"),c=p("option"),c.textContent="All";for(let Z=0;Z<ie.length;Z+=1)ie[Z].c();d=b(),m=p("div"),h=p("label"),h.textContent="Env:",v=b(),g=p("select"),S=p("option"),S.textContent="All";for(let Z=0;Z<le.length;Z+=1)le[Z].c();k=b(),y=p("div"),T=p("label"),T.textContent="Server:",D=b(),E=p("select"),j=p("option"),j.textContent="(Fleet)";for(let Z=0;Z<re.length;Z+=1)re[Z].c();I=b(),ne&&ne.c(),R=b(),z=p("div"),Y=p("label"),Y.textContent="Last",U=b(),O=p("select"),H=p("option"),H.textContent="15m",P=p("option"),P.textContent="1h",A=p("option"),A.textContent="6h",B=p("option"),B.textContent="24h",J=p("option"),J.textContent="7d",Q=p("option"),Q.textContent="30d",oe=b(),ee=p("button"),ee.innerHTML='<svg viewBox="0 0 24 24" fill="none" class="svelte-1wvrz0m"><path d="M20 12a8 8 0 1 1-2.34-5.66" stroke="currentColor" stroke-width="2" stroke-linecap="round"></path><path d="M20 4v6h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg>',V=b(),X&&X.c(),f(n,"class","scope-brand svelte-1wvrz0m"),f(i,"class","svelte-1wvrz0m"),c.__value="",te(c,c.__value),f(u,"class","svelte-1wvrz0m"),f(o,"class","scope-field svelte-1wvrz0m"),f(h,"class","svelte-1wvrz0m"),S.__value="",te(S,S.__value),f(g,"class","svelte-1wvrz0m"),f(m,"class","scope-field svelte-1wvrz0m"),f(T,"class","svelte-1wvrz0m"),j.__value="",te(j,j.__value),f(E,"class","svelte-1wvrz0m"),f(y,"class","scope-field svelte-1wvrz0m"),f(Y,"class","svelte-1wvrz0m"),H.__value="15m",te(H,H.__value),P.__value="1h",te(P,P.__value),A.__value="6h",te(A,A.__value),B.__value="24h",te(B,B.__value),J.__value="7d",te(J,J.__value),Q.__value="30d",te(Q,Q.__value),f(O,"class","svelte-1wvrz0m"),f(z,"class","scope-field svelte-1wvrz0m"),f(ee,"class","iconbtn svelte-1wvrz0m"),f(ee,"title","Refresh"),f(t,"class","scope-bar-inner svelte-1wvrz0m"),f(e,"class","scope-bar glass svelte-1wvrz0m")},m(Z,ge){$(Z,e,ge),r(e,t),r(t,n),r(t,s),r(t,o),r(o,i),r(o,a),r(o,u),r(u,c);for(let $e=0;$e<ie.length;$e+=1)ie[$e]&&ie[$e].m(u,null);Le(u,l[2].project),r(t,d),r(t,m),r(m,h),r(m,v),r(m,g),r(g,S);for(let $e=0;$e<le.length;$e+=1)le[$e]&&le[$e].m(g,null);Le(g,l[2].env),r(t,k),r(t,y),r(y,T),r(y,D),r(y,E),r(E,j);for(let $e=0;$e<re.length;$e+=1)re[$e]&&re[$e].m(E,null);Le(E,l[2].server),r(t,I),ne&&ne.m(t,null),r(t,R),r(t,z),r(z,Y),r(z,U),r(z,O),r(O,H),r(O,P),r(O,A),r(O,B),r(O,J),r(O,Q),Le(O,l[2].range),r(t,oe),r(t,ee),r(e,V),X&&X.m(e,null),K||(ae=[x(u,"change",l[13]),x(g,"change",l[14]),x(E,"change",l[15]),x(O,"change",l[17]),x(ee,"click",l[10])],K=!0)},p(Z,ge){if(ge[0]&16){W=pe(Z[4]);let $e;for($e=0;$e<W.length;$e+=1){const We=Gs(Z,W,$e);ie[$e]?ie[$e].p(We,ge):(ie[$e]=Vs(We),ie[$e].c(),ie[$e].m(u,null))}for(;$e<ie.length;$e+=1)ie[$e].d(1);ie.length=W.length}if(ge[0]&20&&_!==(_=Z[2].project)&&Le(u,Z[2].project),ge[0]&8){ue=pe(Z[3]);let $e;for($e=0;$e<ue.length;$e+=1){const We=Hs(Z,ue,$e);le[$e]?le[$e].p(We,ge):(le[$e]=Ws(We),le[$e].c(),le[$e].m(g,null))}for(;$e<le.length;$e+=1)le[$e].d(1);le.length=ue.length}if(ge[0]&20&&C!==(C=Z[2].env)&&Le(g,Z[2].env),ge[0]&32){me=pe(Z[5]||[]);let $e;for($e=0;$e<me.length;$e+=1){const We=Bs(Z,me,$e);re[$e]?re[$e].p(We,ge):(re[$e]=Ks(We),re[$e].c(),re[$e].m(E,null))}for(;$e<re.length;$e+=1)re[$e].d(1);re.length=me.length}ge[0]&20&&L!==(L=Z[2].server)&&Le(E,Z[2].server),Z[1]&&Z[2].server?ne?ne.p(Z,ge):(ne=Ys(Z),ne.c(),ne.m(t,R)):ne&&(ne.d(1),ne=null),ge[0]&20&&G!==(G=Z[2].range)&&Le(O,Z[2].range),Z[0]?X?X.p(Z,ge):(X=Zs(Z),X.c(),X.m(e,null)):X&&(X.d(1),X=null)},i:be,o:be,d(Z){Z&&w(e),Ne(ie,Z),Ne(le,Z),Ne(re,Z),ne&&ne.d(),X&&X.d(),K=!1,Ge(ae)}}}function Z1(l,e,t){let n,s,o,i,a,u,c;ht(l,Pl,j=>t(2,o=j)),ht(l,sf,j=>t(11,i=j)),ht(l,On,j=>t(12,a=j)),ht(l,vn,j=>t(5,u=j)),ht(l,J1,j=>t(6,c=j));let{showTail:_=!1}=e,{showContainer:d=!1}=e;const m=Il();function h(j,L){Pl.update(I=>({...I,[j]:L})),m("change")}function v(j){Pl.update(L=>({...L,server:j,container:""})),m("change")}function g(j){Pl.update(L=>({...L,tail:j})),m("change")}function S(){m("refresh")}const C=j=>h("project",j.target.value),k=j=>h("env",j.target.value),y=j=>v(j.target.value),T=j=>h("container",j.target.value),D=j=>h("range",j.target.value),E=j=>g(j.target.checked);return l.$$set=j=>{"showTail"in j&&t(0,_=j.showTail),"showContainer"in j&&t(1,d=j.showContainer)},l.$$.update=()=>{l.$$.dirty[0]&6144&&t(4,n=[...new Set([...a||[],...(i||[]).map(j=>j.project).filter(Boolean)])].sort()),l.$$.dirty[0]&2048&&t(3,s=[...new Set(["prod","staging","uat","test","dev",...(i||[]).map(j=>j.environment).filter(Boolean)])].sort()),l.$$.dirty[0]&4&&(o.server?Dn.fetch({server:o.server}):(Dn.clear(),o.container&&Pl.update(j=>({...j,container:""}))))},[_,d,o,s,n,u,c,h,v,g,S,i,a,C,k,y,T,D,E]}class X1 extends jt{constructor(e){super(),qt(this,e,Z1,Q1,yt,{showTail:0,showContainer:1},null,[-1,-1])}}function Xs(l,e,t){const n=l.slice();n[29]=e[t];const s=a_(n[29]);n[30]=s;const o=ln(n[30]);n[31]=o;const i=u_(n[29]);n[32]=i;const a=n[8][n[30]];return n[33]=a,n}function xs(l){let e;return{c(){e=p("span"),e.textContent="⚠",f(e,"class","health-warn svelte-3mbtsx"),f(e,"title","High resource usage")},m(t,n){$(t,e,n)},d(t){t&&w(e)}}}function eo(l){let e;return{c(){e=p("span"),e.textContent="⚠️",f(e,"class","agent-warn svelte-3mbtsx"),f(e,"title","Agent outdated")},m(t,n){$(t,e,n)},d(t){t&&w(e)}}}function x1(l){let e;return{c(){e=p("span"),e.textContent="offline",f(e,"class","metric-inline offline svelte-3mbtsx")},m(t,n){$(t,e,n)},p:be,d(t){t&&w(e)}}}function e_(l){let e,t,n,s,o;return{c(){e=p("span"),t=b(),n=p("span"),s=b(),o=p("span"),f(e,"class","metric-skeleton svelte-3mbtsx"),f(n,"class","metric-skeleton svelte-3mbtsx"),f(o,"class","metric-skeleton svelte-3mbtsx")},m(i,a){$(i,e,a),$(i,t,a),$(i,n,a),$(i,s,a),$(i,o,a)},p:be,d(i){i&&(w(e),w(t),w(n),w(s),w(o))}}}function t_(l){let e,t,n=l[3].cpu.toFixed(0)+"",s,o,i,a,u,c,_=l[3].mem.toFixed(0)+"",d,m,h,v,g,S,C=l[3].disk.toFixed(0)+"",k,y,T,D,E,j=(l[3].netIn||l[3].netOut)&&to(l);return{c(){e=p("span"),t=q("CPU "),s=q(n),o=q("%"),a=b(),u=p("span"),c=q("MEM "),d=q(_),m=q("%"),v=b(),g=p("span"),S=q("DISK "),k=q(C),y=q("%"),D=b(),j&&j.c(),E=Oe(),f(e,"class",i="metric-inline "+Dl(l[3].cpu)+" svelte-3mbtsx"),f(u,"class",h="metric-inline "+Dl(l[3].mem)+" svelte-3mbtsx"),f(g,"class",T="metric-inline "+Dl(l[3].disk)+" svelte-3mbtsx")},m(L,I){$(L,e,I),r(e,t),r(e,s),r(e,o),$(L,a,I),$(L,u,I),r(u,c),r(u,d),r(u,m),$(L,v,I),$(L,g,I),r(g,S),r(g,k),r(g,y),$(L,D,I),j&&j.m(L,I),$(L,E,I)},p(L,I){I[0]&8&&n!==(n=L[3].cpu.toFixed(0)+"")&&F(s,n),I[0]&8&&i!==(i="metric-inline "+Dl(L[3].cpu)+" svelte-3mbtsx")&&f(e,"class",i),I[0]&8&&_!==(_=L[3].mem.toFixed(0)+"")&&F(d,_),I[0]&8&&h!==(h="metric-inline "+Dl(L[3].mem)+" svelte-3mbtsx")&&f(u,"class",h),I[0]&8&&C!==(C=L[3].disk.toFixed(0)+"")&&F(k,C),I[0]&8&&T!==(T="metric-inline "+Dl(L[3].disk)+" svelte-3mbtsx")&&f(g,"class",T),L[3].netIn||L[3].netOut?j?j.p(L,I):(j=to(L),j.c(),j.m(E.parentNode,E)):j&&(j.d(1),j=null)},d(L){L&&(w(e),w(a),w(u),w(v),w(g),w(D),w(E)),j&&j.d(L)}}}function to(l){let e,t,n=Zl(l[3].netIn)+"",s,o,i=Zl(l[3].netOut)+"",a;return{c(){e=p("span"),t=q("↓"),s=q(n),o=q(" ↑"),a=q(i),f(e,"class","metric-inline net svelte-3mbtsx")},m(u,c){$(u,e,c),r(e,t),r(e,s),r(e,o),r(e,a)},p(u,c){c[0]&8&&n!==(n=Zl(u[3].netIn)+"")&&F(s,n),c[0]&8&&i!==(i=Zl(u[3].netOut)+"")&&F(a,i)},d(u){u&&w(e)}}}function lo(l){let e,t;return e=new xe({props:{variant:"info",$$slots:{default:[l_]},$$scope:{ctx:l}}}),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const o={};s[0]&1|s[1]&32&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function l_(l){let e=l[0].project+"",t;return{c(){t=q(e)},m(n,s){$(n,t,s)},p(n,s){s[0]&1&&e!==(e=n[0].project+"")&&F(t,e)},d(n){n&&w(t)}}}function n_(l){let e,t=pe(l[6]),n=[];for(let s=0;s<t.length;s+=1)n[s]=no(Xs(l,t,s));return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=Oe()},m(s,o){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(s,o);$(s,e,o)},p(s,o){if(o[0]&459072){t=pe(s[6]);let i;for(i=0;i<t.length;i+=1){const a=Xs(s,t,i);n[i]?n[i].p(a,o):(n[i]=no(a),n[i].c(),n[i].m(e.parentNode,e))}for(;i<n.length;i+=1)n[i].d(1);n.length=t.length}},d(s){s&&w(e),Ne(n,s)}}}function s_(l){let e;return{c(){e=p("span"),e.textContent="No containers",f(e,"class","empty-text svelte-3mbtsx")},m(t,n){$(t,e,n)},p:be,d(t){t&&w(e)}}}function o_(l){let e;return{c(){e=p("span"),e.textContent="Loading...",f(e,"class","loading-text svelte-3mbtsx")},m(t,n){$(t,e,n)},p:be,d(t){t&&w(e)}}}function no(l){let e,t,n,s,o,i=l[31]+"",a,u,c,_,d=l[33]==="restart"?"...":"↻",m,h,v,g,S,C,k,y,T,D,E,j;function L(){return l[23](l[30])}function I(){return l[24](l[30])}function R(){return l[25](l[30])}return{c(){e=p("div"),t=p("span"),s=b(),o=p("span"),a=q(i),u=b(),c=p("div"),_=p("button"),m=q(d),v=b(),g=p("button"),g.textContent="📋",S=b(),C=p("button"),k=q("×"),T=b(),f(t,"class",n="container-status "+so(l[32])+" svelte-3mbtsx"),f(o,"class","container-name svelte-3mbtsx"),f(_,"class","pill-btn svelte-3mbtsx"),f(_,"title","Restart"),_.disabled=h=l[33],f(g,"class","pill-btn svelte-3mbtsx"),f(g,"title","Logs"),f(C,"class","pill-btn danger svelte-3mbtsx"),f(C,"title","Remove"),C.disabled=y=l[33],f(c,"class","container-actions svelte-3mbtsx"),f(e,"class","container-pill svelte-3mbtsx"),f(e,"title",D=l[30]),we(e,"busy",l[33])},m(z,Y){$(z,e,Y),r(e,t),r(e,s),r(e,o),r(o,a),r(e,u),r(e,c),r(c,_),r(_,m),r(c,v),r(c,g),r(c,S),r(c,C),r(C,k),r(e,T),E||(j=[x(_,"click",L),x(g,"click",I),x(C,"click",R)],E=!0)},p(z,Y){l=z,Y[0]&64&&n!==(n="container-status "+so(l[32])+" svelte-3mbtsx")&&f(t,"class",n),Y[0]&64&&i!==(i=l[31]+"")&&F(a,i),Y[0]&320&&d!==(d=l[33]==="restart"?"...":"↻")&&F(m,d),Y[0]&320&&h!==(h=l[33])&&(_.disabled=h),Y[0]&320&&y!==(y=l[33])&&(C.disabled=y),Y[0]&64&&D!==(D=l[30])&&f(e,"title",D),Y[0]&320&&we(e,"busy",l[33])},d(z){z&&w(e),E=!1,Ge(j)}}}function i_(l){var ne;let e,t,n,s,o,i,a,u=(l[0].name||"Unnamed")+"",c,_,d,m,h,v,g,S=(((ne=l[0].region)==null?void 0:ne.slug)||l[0].region||"")+"",C,k,y,T,D,E,j,L,I,R,z,Y,U,O=l[7]||l[9]?"...":"↻",H,P,A,B,J,Q,G,oe,ee,V=l[11]&&xs(),K=l[12]&&eo();function ae(X,Z){if(X[4]&&X[3])return t_;if(X[4]&&X[9])return e_;if(!X[4])return x1}let W=ae(l),ie=W&&W(l),ue=l[1]&&l[0].project&&lo(l);function le(X,Z){return X[7]&&X[6].length===0?o_:X[6].length===0&&X[2]?s_:n_}let me=le(l),re=me(l);return{c(){e=p("div"),t=p("div"),n=p("div"),s=p("span"),i=b(),a=p("span"),c=q(u),_=b(),V&&V.c(),d=b(),m=p("code"),h=q(l[13]),v=b(),g=p("span"),C=q(S),k=b(),K&&K.c(),y=b(),T=p("div"),ie&&ie.c(),D=b(),E=p("span"),j=q("£"),L=q(l[10]),I=q("/mo"),R=b(),z=p("div"),ue&&ue.c(),Y=b(),U=p("button"),H=q(O),A=b(),B=p("button"),B.textContent="🗑️",J=b(),Q=p("div"),re.c(),f(s,"class",o="status-dot "+l[14](l[5])+" svelte-3mbtsx"),f(a,"class","server-name svelte-3mbtsx"),f(m,"class","server-ip svelte-3mbtsx"),f(g,"class","server-meta svelte-3mbtsx"),f(n,"class","server-info svelte-3mbtsx"),f(E,"class","metric-inline cost svelte-3mbtsx"),f(T,"class","server-metrics-inline svelte-3mbtsx"),f(U,"class","icon-btn svelte-3mbtsx"),f(U,"title","Refresh"),U.disabled=P=l[7]||l[9],f(B,"class","icon-btn danger svelte-3mbtsx"),f(B,"title","Destroy"),f(z,"class","server-actions svelte-3mbtsx"),f(t,"class","server-header svelte-3mbtsx"),f(Q,"class","containers svelte-3mbtsx"),f(e,"class","server-card svelte-3mbtsx")},m(X,Z){$(X,e,Z),r(e,t),r(t,n),r(n,s),r(n,i),r(n,a),r(a,c),r(n,_),V&&V.m(n,null),r(n,d),r(n,m),r(m,h),r(n,v),r(n,g),r(g,C),r(n,k),K&&K.m(n,null),r(t,y),r(t,T),ie&&ie.m(T,null),r(T,D),r(T,E),r(E,j),r(E,L),r(E,I),r(t,R),r(t,z),ue&&ue.m(z,null),r(z,Y),r(z,U),r(U,H),r(z,A),r(z,B),r(e,J),r(e,Q),re.m(Q,null),G=!0,oe||(ee=[x(U,"click",l[19]),x(B,"click",l[22])],oe=!0)},p(X,Z){var ge;(!G||Z[0]&32&&o!==(o="status-dot "+X[14](X[5])+" svelte-3mbtsx"))&&f(s,"class",o),(!G||Z[0]&1)&&u!==(u=(X[0].name||"Unnamed")+"")&&F(c,u),X[11]?V||(V=xs(),V.c(),V.m(n,d)):V&&(V.d(1),V=null),(!G||Z[0]&8192)&&F(h,X[13]),(!G||Z[0]&1)&&S!==(S=(((ge=X[0].region)==null?void 0:ge.slug)||X[0].region||"")+"")&&F(C,S),X[12]?K||(K=eo(),K.c(),K.m(n,null)):K&&(K.d(1),K=null),W===(W=ae(X))&&ie?ie.p(X,Z):(ie&&ie.d(1),ie=W&&W(X),ie&&(ie.c(),ie.m(T,D))),(!G||Z[0]&1024)&&F(L,X[10]),X[1]&&X[0].project?ue?(ue.p(X,Z),Z[0]&3&&N(ue,1)):(ue=lo(X),ue.c(),N(ue,1),ue.m(z,Y)):ue&&(qe(),M(ue,1,1,()=>{ue=null}),je()),(!G||Z[0]&640)&&O!==(O=X[7]||X[9]?"...":"↻")&&F(H,O),(!G||Z[0]&640&&P!==(P=X[7]||X[9]))&&(U.disabled=P),me===(me=le(X))&&re?re.p(X,Z):(re.d(1),re=me(X),re&&(re.c(),re.m(Q,null)))},i(X){G||(N(ue),G=!0)},o(X){M(ue),G=!1},d(X){X&&w(e),V&&V.d(),K&&K.d(),ie&&ie.d(),ue&&ue.d(),re.d(),oe=!1,Ge(ee)}}}function r_(l){return l.includes("4gb")?24:l.includes("2gb")?12:l.includes("1gb")?6:l.includes("512mb")?4:6}function so(l){if(!l)return"gray";const e=l.toLowerCase();return e==="running"?"green":e==="exited"||e==="stopped"?"yellow":e==="restarting"?"blue":"red"}function Dl(l){return l>=90?"danger":l>=70?"warning":"ok"}function a_(l){return l.Names&&typeof l.Names=="string"?l.Names.replace(/^\//,""):Array.isArray(l.Names)&&l.Names.length>0?l.Names[0].replace(/^\//,""):l.Name?l.Name.replace(/^\//,""):l.name?l.name:l.ID?l.ID.substring(0,12):l.Id?l.Id.substring(0,12):"unknown"}function u_(l){return l.State||l.state||l.Status||"unknown"}function ln(l){if(!l)return"unknown";const e=l.split("-");return e.length>=3&&e[0].length<=10?e.slice(2).join("-"):l}function Zl(l){return l?l<1024?`${l}B`:l<1048576?`${(l/1024).toFixed(0)}K`:l<1073741824?`${(l/1048576).toFixed(1)}M`:`${(l/1073741824).toFixed(1)}G`:"0"}function f_(l,e,t){let n,s,o,i,a,u,c,_;ht(l,Mn,P=>t(21,_=P));let{server:d}=e,{showProject:m=!1}=e;const h=Il();let v=[],g=!1,S=!1,C={},k=null,y=!1;function T(P){switch(P){case"active":case"online":return"green";case"new":case"starting":return"blue";case"off":case"stopped":return"yellow";default:return"red"}}function D(P){h(P,{server:d})}async function E(){if(!(!o||!_||!d.id)){t(7,g=!0);try{const P=await He("GET",`/infra/agent/${d.id}/containers?do_token=${_}`);t(6,v=P.containers||[]),t(2,S=!0)}catch(P){console.error("Failed to load containers:",P),t(6,v=[])}finally{t(7,g=!1)}}}async function j(){var P,A,B,J,Q;if(!(!o||!_||!d.id)){t(9,y=!0);try{const G=await He("GET",`/infra/agent/${d.id}/metrics?do_token=${_}`);t(3,k={cpu:((P=G.system)==null?void 0:P.load_1m)||0,mem:((A=G.system)==null?void 0:A.mem_percent)||0,disk:((B=G.system)==null?void 0:B.disk_percent)||0,netIn:((J=G.system)==null?void 0:J.net_in_bytes)||0,netOut:((Q=G.system)==null?void 0:Q.net_out_bytes)||0})}catch(G){console.error("Failed to load metrics:",G)}finally{t(9,y=!1)}}}async function L(P){if(!(!_||!d.id)){t(8,C[P]="restart",C);try{await He("POST",`/infra/agent/${d.id}/containers/${P}/restart?do_token=${_}`),Ce.success(`Restarted ${ln(P)}`),await E()}catch(A){Ce.error(`Failed: ${A.message}`)}finally{t(8,C[P]=null,C)}}}async function I(P){if(!(!_||!d.id)&&confirm(`Remove "${ln(P)}"?`)){t(8,C[P]="remove",C);try{await He("POST",`/infra/agent/${d.id}/containers/${P}/stop?do_token=${_}`).catch(()=>{}),await He("POST",`/infra/agent/${d.id}/containers/${P}/remove?do_token=${_}`),Ce.success(`Removed ${ln(P)}`),await E()}catch(A){Ce.error(`Failed: ${A.message}`)}finally{t(8,C[P]=null,C)}}}function R(P){h("viewLogs",{server:d,containerName:P})}async function z(){await Promise.all([E(),j()])}const Y=()=>D("destroy"),U=P=>L(P),O=P=>R(P),H=P=>I(P);return l.$$set=P=>{"server"in P&&t(0,d=P.server),"showProject"in P&&t(1,m=P.showProject)},l.$$.update=()=>{var P,A,B;l.$$.dirty[0]&1&&t(13,n=d.ip||((B=(A=(P=d.networks)==null?void 0:P.v4)==null?void 0:A[0])==null?void 0:B.ip_address)||"N/A"),l.$$.dirty[0]&1&&t(5,s=d.status||"unknown"),l.$$.dirty[0]&32&&t(4,o=s==="active"||s==="online"),l.$$.dirty[0]&1&&t(20,i=d.agent_version),l.$$.dirty[0]&1048576&&t(12,a=i&&i!==K1),l.$$.dirty[0]&8&&t(11,u=k&&(k.cpu>80||k.mem>80||k.disk>80)),l.$$.dirty[0]&1&&t(10,c=r_(d.size_slug||d.size||"")),l.$$.dirty[0]&2097172&&o&&!S&&_&&(E(),j())},[d,m,S,k,o,s,v,g,C,y,c,u,a,n,T,D,L,I,R,z,i,_,Y,U,O,H]}class c_ extends jt{constructor(e){super(),qt(this,e,f_,i_,yt,{server:0,showProject:1},null,[-1,-1])}}function oo(l,e,t){const n=l.slice();return n[102]=e[t],n}function io(l,e,t){const n=l.slice();return n[105]=e[t],n}function ro(l,e,t){const n=l.slice();return n[108]=e[t][0],n[109]=e[t][1],n}function ao(l,e,t){const n=l.slice();return n[108]=e[t][0],n[109]=e[t][1],n}function uo(l,e,t){const n=l.slice();return n[102]=e[t],n}function fo(l,e,t){const n=l.slice();return n[116]=e[t],n}function co(l,e,t){const n=l.slice();return n[119]=e[t],n}function _o(l,e,t){const n=l.slice();return n[122]=e[t],n}function po(l,e,t){const n=l.slice();return n[122]=e[t],n}function mo(l,e,t){const n=l.slice();return n[127]=e[t],n}function vo(l,e,t){const n=l.slice();return n[130]=e[t],n}function ho(l,e,t){const n=l.slice();return n[133]=e[t],n}function go(l){let e,t=l[133]+"",n,s;return{c(){e=p("option"),n=q(t),e.__value=s=l[133],te(e,e.__value)},m(o,i){$(o,e,i),r(e,n)},p(o,i){i[1]&128&&t!==(t=o[133]+"")&&F(n,t),i[1]&128&&s!==(s=o[133])&&(e.__value=s,te(e,e.__value))},d(o){o&&w(e)}}}function bo(l){let e,t=l[130]+"",n,s;return{c(){e=p("option"),n=q(t),e.__value=s=l[130],te(e,e.__value)},m(o,i){$(o,e,i),r(e,n)},p(o,i){i[1]&64&&t!==(t=o[130]+"")&&F(n,t),i[1]&64&&s!==(s=o[130])&&(e.__value=s,te(e,e.__value))},d(o){o&&w(e)}}}function ko(l){let e,t,n,s;const o=[d_,p_,__],i=[];function a(u,c){return u[33]?0:u[36].length?2:1}return t=a(l),n=i[t]=o[t](l),{c(){e=p("div"),n.c(),f(e,"class","section-content svelte-abn0n1")},m(u,c){$(u,e,c),i[t].m(e,null),s=!0},p(u,c){let _=t;t=a(u),t===_?i[t].p(u,c):(qe(),M(i[_],1,1,()=>{i[_]=null}),je(),n=i[t],n?n.p(u,c):(n=i[t]=o[t](u),n.c()),N(n,1),n.m(e,null))},i(u){s||(N(n),s=!0)},o(u){M(n),s=!1},d(u){u&&w(e),i[t].d()}}}function __(l){let e=[],t=new Map,n,s,o=pe(l[36]);const i=a=>a[127].id;for(let a=0;a<o.length;a+=1){let u=mo(l,o,a),c=i(u);t.set(c,e[a]=wo(c,u))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();n=Oe()},m(a,u){for(let c=0;c<e.length;c+=1)e[c]&&e[c].m(a,u);$(a,n,u),s=!0},p(a,u){u[1]&98336&&(o=pe(a[36]),qe(),e=Wu(e,u,i,1,a,o,t,n.parentNode,Vu,wo,n,mo),je())},i(a){if(!s){for(let u=0;u<o.length;u+=1)N(e[u]);s=!0}},o(a){for(let u=0;u<e.length;u+=1)M(e[u]);s=!1},d(a){a&&w(n);for(let u=0;u<e.length;u+=1)e[u].d(a)}}}function p_(l){let e;function t(o,i){return o[1]||o[2]?v_:m_}let n=t(l),s=n(l);return{c(){e=p("div"),s.c(),f(e,"class","empty-msg svelte-abn0n1")},m(o,i){$(o,e,i),s.m(e,null)},p(o,i){n!==(n=t(o))&&(s.d(1),s=n(o),s&&(s.c(),s.m(e,null)))},i:be,o:be,d(o){o&&w(e),s.d()}}}function d_(l){let e;return{c(){e=p("div"),e.innerHTML='<div class="skeleton-card svelte-abn0n1"></div> <div class="skeleton-card svelte-abn0n1"></div>',f(e,"class","loading-skeleton svelte-abn0n1")},m(t,n){$(t,e,n)},p:be,i:be,o:be,d(t){t&&w(e)}}}function wo(l,e){let t,n,s;return n=new c_({props:{server:e[127]}}),n.$on("destroy",e[46]),n.$on("viewLogs",e[47]),{key:l,first:null,c(){t=Oe(),_e(n.$$.fragment),this.first=t},m(o,i){$(o,t,i),fe(n,o,i),s=!0},p(o,i){e=o;const a={};i[1]&32&&(a.server=e[127]),n.$set(a)},i(o){s||(N(n.$$.fragment,o),s=!0)},o(o){M(n.$$.fragment,o),s=!1},d(o){o&&w(t),ce(n,o)}}}function m_(l){let e;return{c(){e=q('No servers. Click "+ Add" to provision.')},m(t,n){$(t,e,n)},d(t){t&&w(e)}}}function v_(l){let e;return{c(){e=q("No servers match filters")},m(t,n){$(t,e,n)},d(t){t&&w(e)}}}function $o(l){let e,t,n,s,o,i,a,u;const c=[b_,g_,h_],_=[];function d(g,S){return g[20]===null?0:g[20].exists?1:2}o=d(l),i=_[o]=c[o](l);function m(g,S){return g[5]?y_:g[4].length?$_:C_}let h=m(l),v=h(l);return{c(){e=p("div"),t=p("div"),n=p("span"),n.textContent="Base Snapshot:",s=b(),i.c(),a=b(),v.c(),f(n,"class","base-label svelte-abn0n1"),f(t,"class","base-snapshot-row svelte-abn0n1"),f(e,"class","section-content svelte-abn0n1")},m(g,S){$(g,e,S),r(e,t),r(t,n),r(t,s),_[o].m(t,null),r(e,a),v.m(e,null),u=!0},p(g,S){let C=o;o=d(g),o===C?_[o].p(g,S):(qe(),M(_[C],1,1,()=>{_[C]=null}),je(),i=_[o],i?i.p(g,S):(i=_[o]=c[o](g),i.c()),N(i,1),i.m(t,null)),h===(h=m(g))&&v?v.p(g,S):(v.d(1),v=h(g),v&&(v.c(),v.m(e,null)))},i(g){u||(N(i),u=!0)},o(g){M(i),u=!1},d(g){g&&w(e),_[o].d(),v.d()}}}function h_(l){let e,t,n,s;return e=new xe({props:{variant:"warning",$$slots:{default:[k_]},$$scope:{ctx:l}}}),{c(){_e(e.$$.fragment),t=b(),n=p("span"),n.textContent='Use "+ Build" to create',f(n,"class","base-hint svelte-abn0n1")},m(o,i){fe(e,o,i),$(o,t,i),$(o,n,i),s=!0},p(o,i){const a={};i[4]&4096&&(a.$$scope={dirty:i,ctx:o}),e.$set(a)},i(o){s||(N(e.$$.fragment,o),s=!0)},o(o){M(e.$$.fragment,o),s=!1},d(o){o&&(w(t),w(n)),ce(e,o)}}}function g_(l){let e,t;return e=new xe({props:{variant:"success",$$slots:{default:[w_]},$$scope:{ctx:l}}}),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const o={};s[0]&1048576|s[4]&4096&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function b_(l){let e;return{c(){e=p("span"),e.textContent="checking...",f(e,"class","base-status checking svelte-abn0n1")},m(t,n){$(t,e,n)},p:be,i:be,o:be,d(t){t&&w(e)}}}function k_(l){let e;return{c(){e=q("Not found")},m(t,n){$(t,e,n)},d(t){t&&w(e)}}}function w_(l){let e,t=l[20].name+"",n;return{c(){e=q("✓ "),n=q(t)},m(s,o){$(s,e,o),$(s,n,o)},p(s,o){o[0]&1048576&&t!==(t=s[20].name+"")&&F(n,t)},d(s){s&&(w(e),w(n))}}}function $_(l){let e,t=pe(l[4]),n=[];for(let s=0;s<t.length;s+=1)n[s]=Co(po(l,t,s));return{c(){e=p("div");for(let s=0;s<n.length;s+=1)n[s].c();f(e,"class","snapshots-grid svelte-abn0n1")},m(s,o){$(s,e,o);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(e,null)},p(s,o){if(o[0]&16|o[1]&4096){t=pe(s[4]);let i;for(i=0;i<t.length;i+=1){const a=po(s,t,i);n[i]?n[i].p(a,o):(n[i]=Co(a),n[i].c(),n[i].m(e,null))}for(;i<n.length;i+=1)n[i].d(1);n.length=t.length}},d(s){s&&w(e),Ne(n,s)}}}function C_(l){let e;return{c(){e=p("div"),e.textContent="No custom snapshots",f(e,"class","empty-msg svelte-abn0n1")},m(t,n){$(t,e,n)},p:be,d(t){t&&w(e)}}}function y_(l){let e;return{c(){e=p("div"),e.textContent="Loading...",f(e,"class","empty-msg svelte-abn0n1")},m(t,n){$(t,e,n)},p:be,d(t){t&&w(e)}}}function Co(l){let e,t,n=l[122].name+"",s,o,i,a=Vo(l[122].size_gigabytes*1024*1024*1024)+"",u,c,_=Wo(l[122].created_at)+"",d,m,h,v,g,S;function C(){return l[68](l[122])}return{c(){e=p("div"),t=p("span"),s=q(n),o=b(),i=p("span"),u=q(a),c=q(" • "),d=q(_),m=b(),h=p("button"),h.textContent="×",v=b(),f(t,"class","snap-name svelte-abn0n1"),f(i,"class","snap-meta svelte-abn0n1"),f(h,"class","pill-del svelte-abn0n1"),f(h,"title","Delete"),f(e,"class","snapshot-pill svelte-abn0n1")},m(k,y){$(k,e,y),r(e,t),r(t,s),r(e,o),r(e,i),r(i,u),r(i,c),r(i,d),r(e,m),r(e,h),r(e,v),g||(S=x(h,"click",C),g=!0)},p(k,y){l=k,y[0]&16&&n!==(n=l[122].name+"")&&F(s,n),y[0]&16&&a!==(a=Vo(l[122].size_gigabytes*1024*1024*1024)+"")&&F(u,a),y[0]&16&&_!==(_=Wo(l[122].created_at)+"")&&F(d,_)},d(k){k&&w(e),g=!1,S()}}}function yo(l){let e,t=l[122].name+"",n,s;return{c(){e=p("option"),n=q(t),e.__value=s=l[122].id,te(e,e.__value)},m(o,i){$(o,e,i),r(e,n)},p(o,i){i[0]&16&&t!==(t=o[122].name+"")&&F(n,t),i[0]&16&&s!==(s=o[122].id)&&(e.__value=s,te(e,e.__value))},d(o){o&&w(e)}}}function So(l){let e;return{c(){e=p("option"),e.textContent="No base snapshot - create one first",e.__value="",te(e,e.__value)},m(t,n){$(t,e,n)},d(t){t&&w(e)}}}function qo(l){let e,t=l[119].label+"",n;return{c(){e=p("option"),n=q(t),e.__value=l[119].value,te(e,e.__value)},m(s,o){$(s,e,o),r(e,n)},p:be,d(s){s&&w(e)}}}function jo(l){let e,t=(l[116].description||l[116].slug)+"",n,s;return{c(){e=p("option"),n=q(t),e.__value=s=l[116].slug,te(e,e.__value)},m(o,i){$(o,e,i),r(e,n)},p(o,i){i[1]&2&&t!==(t=(o[116].description||o[116].slug)+"")&&F(n,t),i[1]&2&&s!==(s=o[116].slug)&&(e.__value=s,te(e,e.__value))},d(o){o&&w(e)}}}function To(l){let e,t,n,s,o,i=pe(l[9]),a=[];for(let c=0;c<i.length;c+=1)a[c]=Do(uo(l,i,c));let u=l[10]&&Eo();return{c(){e=p("div"),t=p("label"),t.textContent="📋 Progress",n=b(),s=p("div");for(let c=0;c<a.length;c+=1)a[c].c();o=b(),u&&u.c(),f(t,"class","svelte-abn0n1"),f(s,"class","operation-logs svelte-abn0n1"),f(e,"class","operation-logs-section svelte-abn0n1")},m(c,_){$(c,e,_),r(e,t),r(e,n),r(e,s);for(let d=0;d<a.length;d+=1)a[d]&&a[d].m(s,null);r(s,o),u&&u.m(s,null)},p(c,_){if(_[0]&512){i=pe(c[9]);let d;for(d=0;d<i.length;d+=1){const m=uo(c,i,d);a[d]?a[d].p(m,_):(a[d]=Do(m),a[d].c(),a[d].m(s,o))}for(;d<a.length;d+=1)a[d].d(1);a.length=i.length}c[10]?u||(u=Eo(),u.c(),u.m(s,null)):u&&(u.d(1),u=null)},d(c){c&&w(e),Ne(a,c),u&&u.d()}}}function Do(l){let e,t=l[102].message+"",n,s;return{c(){e=p("div"),n=q(t),f(e,"class",s="log-entry log-"+l[102].type+" svelte-abn0n1")},m(o,i){$(o,e,i),r(e,n)},p(o,i){i[0]&512&&t!==(t=o[102].message+"")&&F(n,t),i[0]&512&&s!==(s="log-entry log-"+o[102].type+" svelte-abn0n1")&&f(e,"class",s)},d(o){o&&w(e)}}}function Eo(l){let e;return{c(){e=p("div"),e.innerHTML='<span class="spinner svelte-abn0n1">⏳</span> Provisioning...',f(e,"class","log-entry log-info svelte-abn0n1")},m(t,n){$(t,e,n)},d(t){t&&w(e)}}}function S_(l){let e,t,n,s,o,i,a=l[4].filter(Ko).length===0,u,c,_,d,m,h,v,g,S,C,k,y,T,D,E=pe(l[4].filter(Yo)),j=[];for(let O=0;O<E.length;O+=1)j[O]=yo(_o(l,E,O));let L=a&&So(),I=pe(l[41]),R=[];for(let O=0;O<I.length;O+=1)R[O]=qo(co(l,I,O));let z=pe(l[32]),Y=[];for(let O=0;O<z.length;O+=1)Y[O]=jo(fo(l,z,O));let U=(l[9].length>0||l[10])&&To(l);return{c(){e=p("div"),t=p("div"),n=p("label"),n.textContent="Snapshot",s=b(),o=p("select");for(let O=0;O<j.length;O+=1)j[O].c();i=Oe(),L&&L.c(),u=b(),c=p("div"),_=p("label"),_.textContent="Region",d=b(),m=p("select");for(let O=0;O<R.length;O+=1)R[O].c();h=b(),v=p("div"),g=p("label"),g.textContent="Size",S=b(),C=p("select");for(let O=0;O<Y.length;O+=1)Y[O].c();k=b(),U&&U.c(),y=Oe(),f(n,"class","svelte-abn0n1"),o.disabled=l[10],f(o,"class","svelte-abn0n1"),l[31].snapshot_id===void 0&&Qe(()=>l[70].call(o)),f(t,"class","form-group full svelte-abn0n1"),f(_,"class","svelte-abn0n1"),m.disabled=l[10],f(m,"class","svelte-abn0n1"),l[31].region===void 0&&Qe(()=>l[71].call(m)),f(c,"class","form-group svelte-abn0n1"),f(g,"class","svelte-abn0n1"),C.disabled=l[10],f(C,"class","svelte-abn0n1"),l[31].size===void 0&&Qe(()=>l[72].call(C)),f(v,"class","form-group svelte-abn0n1"),f(e,"class","form-grid svelte-abn0n1")},m(O,H){$(O,e,H),r(e,t),r(t,n),r(t,s),r(t,o);for(let P=0;P<j.length;P+=1)j[P]&&j[P].m(o,null);r(o,i),L&&L.m(o,null),Le(o,l[31].snapshot_id,!0),r(e,u),r(e,c),r(c,_),r(c,d),r(c,m);for(let P=0;P<R.length;P+=1)R[P]&&R[P].m(m,null);Le(m,l[31].region,!0),r(e,h),r(e,v),r(v,g),r(v,S),r(v,C);for(let P=0;P<Y.length;P+=1)Y[P]&&Y[P].m(C,null);Le(C,l[31].size,!0),$(O,k,H),U&&U.m(O,H),$(O,y,H),T||(D=[x(o,"change",l[70]),x(m,"change",l[71]),x(C,"change",l[72])],T=!0)},p(O,H){if(H[0]&16){E=pe(O[4].filter(Yo));let P;for(P=0;P<E.length;P+=1){const A=_o(O,E,P);j[P]?j[P].p(A,H):(j[P]=yo(A),j[P].c(),j[P].m(o,i))}for(;P<j.length;P+=1)j[P].d(1);j.length=E.length}if(H[0]&16&&(a=O[4].filter(Ko).length===0),a?L||(L=So(),L.c(),L.m(o,null)):L&&(L.d(1),L=null),H[0]&1024&&(o.disabled=O[10]),H[0]&16|H[1]&1&&Le(o,O[31].snapshot_id),H[1]&1024){I=pe(O[41]);let P;for(P=0;P<I.length;P+=1){const A=co(O,I,P);R[P]?R[P].p(A,H):(R[P]=qo(A),R[P].c(),R[P].m(m,null))}for(;P<R.length;P+=1)R[P].d(1);R.length=I.length}if(H[0]&1024&&(m.disabled=O[10]),H[0]&16|H[1]&1&&Le(m,O[31].region),H[1]&2){z=pe(O[32]);let P;for(P=0;P<z.length;P+=1){const A=fo(O,z,P);Y[P]?Y[P].p(A,H):(Y[P]=jo(A),Y[P].c(),Y[P].m(C,null))}for(;P<Y.length;P+=1)Y[P].d(1);Y.length=z.length}H[0]&1024&&(C.disabled=O[10]),H[0]&16|H[1]&1&&Le(C,O[31].size),O[9].length>0||O[10]?U?U.p(O,H):(U=To(O),U.c(),U.m(y.parentNode,y)):U&&(U.d(1),U=null)},d(O){O&&(w(e),w(k),w(y)),Ne(j,O),L&&L.d(),Ne(R,O),Ne(Y,O),U&&U.d(O),T=!1,Ge(D)}}}function q_(l){let e=l[9].length>0?"Close":"Cancel",t;return{c(){t=q(e)},m(n,s){$(n,t,s)},p(n,s){s[0]&512&&e!==(e=n[9].length>0?"Close":"Cancel")&&F(t,e)},d(n){n&&w(t)}}}function j_(l){let e;return{c(){e=q("🚀 Provision")},m(t,n){$(t,e,n)},d(t){t&&w(e)}}}function T_(l){let e;return{c(){e=q("⏳ Provisioning...")},m(t,n){$(t,e,n)},d(t){t&&w(e)}}}function D_(l){let e;function t(o,i){return o[10]?T_:j_}let n=t(l),s=n(l);return{c(){s.c(),e=Oe()},m(o,i){s.m(o,i),$(o,e,i)},p(o,i){n!==(n=t(o))&&(s.d(1),s=n(o),s&&(s.c(),s.m(e.parentNode,e)))},d(o){o&&w(e),s.d(o)}}}function E_(l){let e,t,n,s,o;return t=new Be({props:{variant:"ghost",$$slots:{default:[q_]},$$scope:{ctx:l}}}),t.$on("click",l[69]),s=new Be({props:{variant:"primary",disabled:l[10]||!l[31].snapshot_id,$$slots:{default:[D_]},$$scope:{ctx:l}}}),s.$on("click",l[45]),{c(){e=p("div"),_e(t.$$.fragment),n=b(),_e(s.$$.fragment),f(e,"slot","footer")},m(i,a){$(i,e,a),fe(t,e,null),r(e,n),fe(s,e,null),o=!0},p(i,a){const u={};a[0]&512|a[4]&4096&&(u.$$scope={dirty:a,ctx:i}),t.$set(u);const c={};a[0]&1024|a[1]&1&&(c.disabled=i[10]||!i[31].snapshot_id),a[0]&1024|a[4]&4096&&(c.$$scope={dirty:a,ctx:i}),s.$set(c)},i(i){o||(N(t.$$.fragment,i),N(s.$$.fragment,i),o=!0)},o(i){M(t.$$.fragment,i),M(s.$$.fragment,i),o=!1},d(i){i&&w(e),ce(t),ce(s)}}}function Lo(l){let e,t,n,s,o,i,a,u,c,_,d,m,h,v,g,S,C,k,y,T,D=(l[34]||"No logs")+"",E,j,L,I;return k=new Be({props:{variant:"ghost",size:"sm",disabled:l[23],$$slots:{default:[L_]},$$scope:{ctx:l}}}),k.$on("click",l[48]),{c(){e=p("div"),t=p("div"),n=p("input"),s=b(),o=p("div"),i=p("label"),i.textContent="Lines:",a=b(),u=p("select"),c=p("option"),c.textContent="100",_=p("option"),_.textContent="200",d=p("option"),d.textContent="500",m=p("option"),m.textContent="1000",h=b(),v=p("label"),g=p("input"),S=q(`
        Auto-refresh`),C=b(),_e(k.$$.fragment),y=b(),T=p("pre"),E=q(D),f(n,"type","text"),f(n,"placeholder","Search logs..."),f(n,"class","svelte-abn0n1"),f(t,"class","logs-search svelte-abn0n1"),f(i,"class","svelte-abn0n1"),c.__value=100,te(c,c.__value),_.__value=200,te(_,_.__value),d.__value=500,te(d,d.__value),m.__value=1e3,te(m,m.__value),f(u,"class","svelte-abn0n1"),l[24]===void 0&&Qe(()=>l[79].call(u)),f(o,"class","logs-tail svelte-abn0n1"),f(g,"type","checkbox"),f(g,"class","svelte-abn0n1"),f(v,"class","logs-auto svelte-abn0n1"),f(e,"class","logs-toolbar svelte-abn0n1"),f(T,"class","logs-content large svelte-abn0n1")},m(R,z){$(R,e,z),r(e,t),r(t,n),te(n,l[6]),r(e,s),r(e,o),r(o,i),r(o,a),r(o,u),r(u,c),r(u,_),r(u,d),r(u,m),Le(u,l[24],!0),r(e,h),r(e,v),r(v,g),g.checked=l[25],r(v,S),r(e,C),fe(k,e,null),$(R,y,z),$(R,T,z),r(T,E),j=!0,L||(I=[x(n,"input",l[78]),x(u,"change",l[79]),x(u,"change",l[48]),x(g,"change",l[80]),x(g,"change",l[51])],L=!0)},p(R,z){z[0]&64&&n.value!==R[6]&&te(n,R[6]),z[0]&16777216&&Le(u,R[24]),z[0]&33554432&&(g.checked=R[25]);const Y={};z[0]&8388608&&(Y.disabled=R[23]),z[0]&8388608|z[4]&4096&&(Y.$$scope={dirty:z,ctx:R}),k.$set(Y),(!j||z[1]&8)&&D!==(D=(R[34]||"No logs")+"")&&F(E,D)},i(R){j||(N(k.$$.fragment,R),j=!0)},o(R){M(k.$$.fragment,R),j=!1},d(R){R&&(w(e),w(y),w(T)),ce(k),L=!1,Ge(I)}}}function L_(l){let e=l[23]?"...":"↻",t;return{c(){t=q(e)},m(n,s){$(n,t,s)},p(n,s){s[0]&8388608&&e!==(e=n[23]?"...":"↻")&&F(t,e)},d(n){n&&w(t)}}}function Po(l){let e;function t(o,i){var a;return o[28]?A_:(a=o[27])!=null&&a.error?R_:o[27]?N_:P_}let n=t(l),s=n(l);return{c(){e=p("div"),s.c(),f(e,"class","env-vars-container svelte-abn0n1")},m(o,i){$(o,e,i),s.m(e,null)},p(o,i){n===(n=t(o))&&s?s.p(o,i):(s.d(1),s=n(o),s&&(s.c(),s.m(e,null)))},d(o){o&&w(e),s.d()}}}function P_(l){let e;return{c(){e=p("div"),e.textContent="Click to load environment variables",f(e,"class","env-empty svelte-abn0n1")},m(t,n){$(t,e,n)},p:be,d(t){t&&w(e)}}}function N_(l){let e,t,n,s,o=(l[27].total_env_vars||0)+"",i,a,u,c,_,d=l[27].auto_injected&&Object.keys(l[27].auto_injected).length>0,m,h,v,g,S=l[27].has_redis_url&&No(),C=l[27].has_database_url&&Ro(),k=d&&Ao(l);function y(E,j){if(j[0]&134217728&&(h=null),j[0]&134217728&&(v=null),h==null&&(h=!!(E[27].user_defined&&Object.keys(E[27].user_defined).length>0)),h)return z_;if(v==null&&(v=!E[27].auto_injected||Object.keys(E[27].auto_injected).length===0),v)return M_}let T=y(l,[-1,-1,-1,-1,-1]),D=T&&T(l);return{c(){e=p("div"),t=p("div"),n=p("strong"),n.textContent="Total:",s=b(),i=q(o),a=q(" variables"),u=b(),S&&S.c(),c=b(),C&&C.c(),_=b(),k&&k.c(),m=b(),D&&D.c(),g=Oe(),f(t,"class","env-stat svelte-abn0n1"),f(e,"class","env-summary svelte-abn0n1")},m(E,j){$(E,e,j),r(e,t),r(t,n),r(t,s),r(t,i),r(t,a),r(e,u),S&&S.m(e,null),r(e,c),C&&C.m(e,null),$(E,_,j),k&&k.m(E,j),$(E,m,j),D&&D.m(E,j),$(E,g,j)},p(E,j){j[0]&134217728&&o!==(o=(E[27].total_env_vars||0)+"")&&F(i,o),E[27].has_redis_url?S||(S=No(),S.c(),S.m(e,c)):S&&(S.d(1),S=null),E[27].has_database_url?C||(C=Ro(),C.c(),C.m(e,null)):C&&(C.d(1),C=null),j[0]&134217728&&(d=E[27].auto_injected&&Object.keys(E[27].auto_injected).length>0),d?k?k.p(E,j):(k=Ao(E),k.c(),k.m(m.parentNode,m)):k&&(k.d(1),k=null),T===(T=y(E,j))&&D?D.p(E,j):(D&&D.d(1),D=T&&T(E),D&&(D.c(),D.m(g.parentNode,g)))},d(E){E&&(w(e),w(_),w(m),w(g)),S&&S.d(),C&&C.d(),k&&k.d(E),D&&D.d(E)}}}function R_(l){let e,t,n=l[27].error+"",s;return{c(){e=p("div"),t=q("Error: "),s=q(n),f(e,"class","env-error svelte-abn0n1")},m(o,i){$(o,e,i),r(e,t),r(e,s)},p(o,i){i[0]&134217728&&n!==(n=o[27].error+"")&&F(s,n)},d(o){o&&w(e)}}}function A_(l){let e;return{c(){e=p("div"),e.textContent="Loading environment variables...",f(e,"class","env-loading svelte-abn0n1")},m(t,n){$(t,e,n)},p:be,d(t){t&&w(e)}}}function No(l){let e;return{c(){e=p("div"),e.textContent="✓ REDIS_URL present",f(e,"class","env-stat success svelte-abn0n1")},m(t,n){$(t,e,n)},d(t){t&&w(e)}}}function Ro(l){let e;return{c(){e=p("div"),e.textContent="✓ DATABASE_URL present",f(e,"class","env-stat success svelte-abn0n1")},m(t,n){$(t,e,n)},d(t){t&&w(e)}}}function Ao(l){let e,t,n,s,o=pe(Object.entries(l[27].auto_injected)),i=[];for(let a=0;a<o.length;a+=1)i[a]=Mo(ao(l,o,a));return{c(){e=p("div"),t=p("h4"),t.textContent="🔧 Auto-Injected (Stateful Services)",n=b(),s=p("div");for(let a=0;a<i.length;a+=1)i[a].c();f(t,"class","svelte-abn0n1"),f(s,"class","env-list svelte-abn0n1"),f(e,"class","env-section svelte-abn0n1")},m(a,u){$(a,e,u),r(e,t),r(e,n),r(e,s);for(let c=0;c<i.length;c+=1)i[c]&&i[c].m(s,null)},p(a,u){if(u[0]&671088640|u[1]&524288){o=pe(Object.entries(a[27].auto_injected));let c;for(c=0;c<o.length;c+=1){const _=ao(a,o,c);i[c]?i[c].p(_,u):(i[c]=Mo(_),i[c].c(),i[c].m(s,null))}for(;c<i.length;c+=1)i[c].d(1);i.length=o.length}},d(a){a&&w(e),Ne(i,a)}}}function Mo(l){let e,t,n=l[108]+"",s,o,i,a,u=l[109]+"",c,_,d,m=l[29][l[108]]?"✓":"📋",h,v,g,S;function C(){return l[81](l[108],l[109])}return{c(){e=p("div"),t=p("div"),s=q(n),o=b(),i=p("div"),a=p("code"),c=q(u),_=b(),d=p("button"),h=q(m),v=b(),f(t,"class","env-key svelte-abn0n1"),f(a,"class","svelte-abn0n1"),f(d,"class","copy-btn svelte-abn0n1"),f(d,"title","Copy to clipboard"),we(d,"copied",l[29][l[108]]),f(i,"class","env-value svelte-abn0n1"),f(e,"class","env-item auto-injected svelte-abn0n1")},m(k,y){$(k,e,y),r(e,t),r(t,s),r(e,o),r(e,i),r(i,a),r(a,c),r(i,_),r(i,d),r(d,h),r(e,v),g||(S=x(d,"click",C),g=!0)},p(k,y){l=k,y[0]&134217728&&n!==(n=l[108]+"")&&F(s,n),y[0]&134217728&&u!==(u=l[109]+"")&&F(c,u),y[0]&671088640&&m!==(m=l[29][l[108]]?"✓":"📋")&&F(h,m),y[0]&671088640&&we(d,"copied",l[29][l[108]])},d(k){k&&w(e),g=!1,S()}}}function M_(l){let e;return{c(){e=p("div"),e.textContent="No environment variables found",f(e,"class","env-empty svelte-abn0n1")},m(t,n){$(t,e,n)},p:be,d(t){t&&w(e)}}}function z_(l){let e,t,n,s,o=pe(Object.entries(l[27].user_defined)),i=[];for(let a=0;a<o.length;a+=1)i[a]=zo(ro(l,o,a));return{c(){e=p("div"),t=p("h4"),t.textContent="👤 User-Defined",n=b(),s=p("div");for(let a=0;a<i.length;a+=1)i[a].c();f(t,"class","svelte-abn0n1"),f(s,"class","env-list svelte-abn0n1"),f(e,"class","env-section svelte-abn0n1")},m(a,u){$(a,e,u),r(e,t),r(e,n),r(e,s);for(let c=0;c<i.length;c+=1)i[c]&&i[c].m(s,null)},p(a,u){if(u[0]&671088640|u[1]&524288){o=pe(Object.entries(a[27].user_defined));let c;for(c=0;c<o.length;c+=1){const _=ro(a,o,c);i[c]?i[c].p(_,u):(i[c]=zo(_),i[c].c(),i[c].m(s,null))}for(;c<i.length;c+=1)i[c].d(1);i.length=o.length}},d(a){a&&w(e),Ne(i,a)}}}function zo(l){let e,t,n=l[108]+"",s,o,i,a,u=l[109]+"",c,_,d,m=l[29][l[108]]?"✓":"📋",h,v,g,S;function C(){return l[82](l[108],l[109])}return{c(){e=p("div"),t=p("div"),s=q(n),o=b(),i=p("div"),a=p("code"),c=q(u),_=b(),d=p("button"),h=q(m),v=b(),f(t,"class","env-key svelte-abn0n1"),f(a,"class","svelte-abn0n1"),f(d,"class","copy-btn svelte-abn0n1"),f(d,"title","Copy to clipboard"),we(d,"copied",l[29][l[108]]),f(i,"class","env-value svelte-abn0n1"),f(e,"class","env-item svelte-abn0n1")},m(k,y){$(k,e,y),r(e,t),r(t,s),r(e,o),r(e,i),r(i,a),r(a,c),r(i,_),r(i,d),r(d,h),r(e,v),g||(S=x(d,"click",C),g=!0)},p(k,y){l=k,y[0]&134217728&&n!==(n=l[108]+"")&&F(s,n),y[0]&134217728&&u!==(u=l[109]+"")&&F(c,u),y[0]&671088640&&m!==(m=l[29][l[108]]?"✓":"📋")&&F(h,m),y[0]&671088640&&we(d,"copied",l[29][l[108]])},d(k){k&&w(e),g=!1,S()}}}function O_(l){let e,t,n,s,o,i,a,u,c,_,d=l[26]==="logs"&&Lo(l),m=l[26]==="env"&&Po(l);return{c(){e=p("div"),t=p("button"),t.textContent="📋 Logs",n=b(),s=p("button"),s.textContent="🔐 Env Vars",o=b(),d&&d.c(),i=b(),m&&m.c(),a=Oe(),f(t,"class","tab-button svelte-abn0n1"),we(t,"active",l[26]==="logs"),f(s,"class","tab-button svelte-abn0n1"),we(s,"active",l[26]==="env"),f(e,"class","modal-tabs svelte-abn0n1")},m(h,v){$(h,e,v),r(e,t),r(e,n),r(e,s),$(h,o,v),d&&d.m(h,v),$(h,i,v),m&&m.m(h,v),$(h,a,v),u=!0,c||(_=[x(t,"click",l[76]),x(s,"click",l[77])],c=!0)},p(h,v){(!u||v[0]&67108864)&&we(t,"active",h[26]==="logs"),(!u||v[0]&67108864)&&we(s,"active",h[26]==="env"),h[26]==="logs"?d?(d.p(h,v),v[0]&67108864&&N(d,1)):(d=Lo(h),d.c(),N(d,1),d.m(i.parentNode,i)):d&&(qe(),M(d,1,1,()=>{d=null}),je()),h[26]==="env"?m?m.p(h,v):(m=Po(h),m.c(),m.m(a.parentNode,a)):m&&(m.d(1),m=null)},i(h){u||(N(d),u=!0)},o(h){M(d),u=!1},d(h){h&&(w(e),w(o),w(i),w(a)),d&&d.d(h),m&&m.d(h),c=!1,Ge(_)}}}function Oo(l){var o;let e,t=(((o=l[34])==null?void 0:o.split(`
`).length)||0)+"",n,s;return{c(){e=p("span"),n=q(t),s=q(" lines"),f(e,"class","logs-count svelte-abn0n1")},m(i,a){$(i,e,a),r(e,n),r(e,s)},p(i,a){var u;a[1]&8&&t!==(t=(((u=i[34])==null?void 0:u.split(`
`).length)||0)+"")&&F(n,t)},d(i){i&&w(e)}}}function I_(l){let e;return{c(){e=q("Close")},m(t,n){$(t,e,n)},d(t){t&&w(e)}}}function F_(l){let e,t,n,s,o=l[26]==="logs"&&Oo(l);return n=new Be({props:{variant:"ghost",$$slots:{default:[I_]},$$scope:{ctx:l}}}),n.$on("click",l[75]),{c(){e=p("div"),o&&o.c(),t=b(),_e(n.$$.fragment),f(e,"slot","footer")},m(i,a){$(i,e,a),o&&o.m(e,null),r(e,t),fe(n,e,null),s=!0},p(i,a){i[26]==="logs"?o?o.p(i,a):(o=Oo(i),o.c(),o.m(e,t)):o&&(o.d(1),o=null);const u={};a[4]&4096&&(u.$$scope={dirty:a,ctx:i}),n.$set(u)},i(i){s||(N(n.$$.fragment,i),s=!0)},o(i){M(n.$$.fragment,i),s=!1},d(i){i&&w(e),o&&o.d(),ce(n)}}}function U_(l){let e,t,n,s,o,i,a,u,c,_,d,m,h,v,g,S,C,k,y,T,D,E,j,L,I,R,z,Y,U=pe(l[39]),O=[];for(let H=0;H<U.length;H+=1)O[H]=Io(io(l,U,H));return{c(){e=p("form"),t=p("div"),n=p("label"),n.textContent="Snapshot Name *",s=b(),o=p("input"),i=b(),a=p("div"),u=p("label"),u.textContent="Base Image",c=b(),_=p("select");for(let H=0;H<O.length;H+=1)O[H].c();d=b(),m=p("div"),h=p("label"),h.textContent="Pre-install",v=b(),g=p("div"),S=p("label"),C=p("input"),k=q(" Docker"),y=b(),T=p("label"),D=p("input"),E=q(" Nginx"),j=b(),L=p("label"),I=p("input"),R=q(" Certbot"),f(n,"for","snap-name"),f(n,"class","svelte-abn0n1"),f(o,"id","snap-name"),f(o,"type","text"),f(o,"placeholder","my-custom-snapshot"),o.disabled=l[13],f(o,"class","svelte-abn0n1"),f(t,"class","form-group svelte-abn0n1"),f(u,"for","base-image"),f(u,"class","svelte-abn0n1"),f(_,"id","base-image"),_.disabled=l[13],f(_,"class","svelte-abn0n1"),l[16]===void 0&&Qe(()=>l[88].call(_)),f(a,"class","form-group svelte-abn0n1"),f(h,"class","svelte-abn0n1"),f(C,"type","checkbox"),C.disabled=l[13],f(C,"class","svelte-abn0n1"),f(S,"class","checkbox-item svelte-abn0n1"),f(D,"type","checkbox"),D.disabled=l[13],f(D,"class","svelte-abn0n1"),f(T,"class","checkbox-item svelte-abn0n1"),f(I,"type","checkbox"),I.disabled=l[13],f(I,"class","svelte-abn0n1"),f(L,"class","checkbox-item svelte-abn0n1"),f(g,"class","checkbox-list svelte-abn0n1"),f(m,"class","form-group svelte-abn0n1")},m(H,P){$(H,e,P),r(e,t),r(t,n),r(t,s),r(t,o),te(o,l[15]),r(e,i),r(e,a),r(a,u),r(a,c),r(a,_);for(let A=0;A<O.length;A+=1)O[A]&&O[A].m(_,null);Le(_,l[16],!0),r(e,d),r(e,m),r(m,h),r(m,v),r(m,g),r(g,S),r(S,C),C.checked=l[17],r(S,k),r(g,y),r(g,T),r(T,D),D.checked=l[18],r(T,E),r(g,j),r(g,L),r(L,I),I.checked=l[19],r(L,R),z||(Y=[x(o,"input",l[87]),x(_,"change",l[88]),x(C,"change",l[89]),x(D,"change",l[90]),x(I,"change",l[91]),x(e,"submit",dc(l[44]))],z=!0)},p(H,P){if(P[0]&8192&&(o.disabled=H[13]),P[0]&32768&&o.value!==H[15]&&te(o,H[15]),P[1]&256){U=pe(H[39]);let A;for(A=0;A<U.length;A+=1){const B=io(H,U,A);O[A]?O[A].p(B,P):(O[A]=Io(B),O[A].c(),O[A].m(_,null))}for(;A<O.length;A+=1)O[A].d(1);O.length=U.length}P[0]&8192&&(_.disabled=H[13]),P[0]&65536|P[1]&256&&Le(_,H[16]),P[0]&8192&&(C.disabled=H[13]),P[0]&131072&&(C.checked=H[17]),P[0]&8192&&(D.disabled=H[13]),P[0]&262144&&(D.checked=H[18]),P[0]&8192&&(I.disabled=H[13]),P[0]&524288&&(I.checked=H[19])},i:be,o:be,d(H){H&&w(e),Ne(O,H),z=!1,Ge(Y)}}}function B_(l){var i;let e,t,n,s,o=((i=l[20])==null?void 0:i.exists)&&Fo(l);return{c(){e=p("div"),t=p("p"),t.textContent="Creates the default base snapshot with Docker, Nginx, Certbot pre-installed. Required for provisioning new servers.",n=b(),o&&o.c(),f(t,"class","svelte-abn0n1"),f(e,"class","snap-type-info svelte-abn0n1")},m(a,u){$(a,e,u),r(e,t),r(e,n),o&&o.m(e,null),s=!0},p(a,u){var c;(c=a[20])!=null&&c.exists?o?(o.p(a,u),u[0]&1048576&&N(o,1)):(o=Fo(a),o.c(),N(o,1),o.m(e,null)):o&&(qe(),M(o,1,1,()=>{o=null}),je())},i(a){s||(N(o),s=!0)},o(a){M(o),s=!1},d(a){a&&w(e),o&&o.d()}}}function Io(l){let e,t=l[105].label+"",n;return{c(){e=p("option"),n=q(t),e.__value=l[105].value,te(e,e.__value)},m(s,o){$(s,e,o),r(e,n)},p:be,d(s){s&&w(e)}}}function Fo(l){let e,t;return e=new xe({props:{variant:"warning",$$slots:{default:[H_]},$$scope:{ctx:l}}}),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const o={};s[0]&1048576|s[4]&4096&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function H_(l){let e,t=l[20].name+"",n;return{c(){e=q("⚠️ Base snapshot already exists: "),n=q(t)},m(s,o){$(s,e,o),$(s,n,o)},p(s,o){o[0]&1048576&&t!==(t=s[20].name+"")&&F(n,t)},d(s){s&&(w(e),w(n))}}}function Uo(l){let e,t,n,s,o,i=pe(l[8]),a=[];for(let c=0;c<i.length;c+=1)a[c]=Bo(oo(l,i,c));let u=l[13]&&Ho();return{c(){e=p("div"),t=p("label"),t.textContent="📋 Progress",n=b(),s=p("div");for(let c=0;c<a.length;c+=1)a[c].c();o=b(),u&&u.c(),f(t,"class","svelte-abn0n1"),f(s,"class","operation-logs svelte-abn0n1"),f(e,"class","operation-logs-section svelte-abn0n1")},m(c,_){$(c,e,_),r(e,t),r(e,n),r(e,s);for(let d=0;d<a.length;d+=1)a[d]&&a[d].m(s,null);r(s,o),u&&u.m(s,null)},p(c,_){if(_[0]&256){i=pe(c[8]);let d;for(d=0;d<i.length;d+=1){const m=oo(c,i,d);a[d]?a[d].p(m,_):(a[d]=Bo(m),a[d].c(),a[d].m(s,o))}for(;d<a.length;d+=1)a[d].d(1);a.length=i.length}c[13]?u||(u=Ho(),u.c(),u.m(s,null)):u&&(u.d(1),u=null)},d(c){c&&w(e),Ne(a,c),u&&u.d()}}}function Bo(l){let e,t=l[102].message+"",n,s;return{c(){e=p("div"),n=q(t),f(e,"class",s="log-entry log-"+l[102].type+" svelte-abn0n1")},m(o,i){$(o,e,i),r(e,n)},p(o,i){i[0]&256&&t!==(t=o[102].message+"")&&F(n,t),i[0]&256&&s!==(s="log-entry log-"+o[102].type+" svelte-abn0n1")&&f(e,"class",s)},d(o){o&&w(e)}}}function Ho(l){let e;return{c(){e=p("div"),e.innerHTML='<span class="spinner svelte-abn0n1">⏳</span> Working...',f(e,"class","log-entry log-info svelte-abn0n1")},m(t,n){$(t,e,n)},d(t){t&&w(e)}}}function G_(l){let e,t,n,s,o,i,a,u,c,_,d,m,h,v;const g=[B_,U_],S=[];function C(y,T){return y[14]==="base"?0:1}u=C(l),c=S[u]=g[u](l);let k=(l[8].length>0||l[13])&&Uo(l);return{c(){e=p("div"),t=p("button"),n=q("🏗️ Base Snapshot"),s=b(),o=p("button"),i=q("📸 Custom Snapshot"),a=b(),c.c(),_=b(),k&&k.c(),d=Oe(),f(t,"class","snap-type-btn svelte-abn0n1"),t.disabled=l[13],we(t,"active",l[14]==="base"),f(o,"class","snap-type-btn svelte-abn0n1"),o.disabled=l[13],we(o,"active",l[14]==="custom"),f(e,"class","snap-type-selector svelte-abn0n1")},m(y,T){$(y,e,T),r(e,t),r(t,n),r(e,s),r(e,o),r(o,i),$(y,a,T),S[u].m(y,T),$(y,_,T),k&&k.m(y,T),$(y,d,T),m=!0,h||(v=[x(t,"click",l[85]),x(o,"click",l[86])],h=!0)},p(y,T){(!m||T[0]&8192)&&(t.disabled=y[13]),(!m||T[0]&16384)&&we(t,"active",y[14]==="base"),(!m||T[0]&8192)&&(o.disabled=y[13]),(!m||T[0]&16384)&&we(o,"active",y[14]==="custom");let D=u;u=C(y),u===D?S[u].p(y,T):(qe(),M(S[D],1,1,()=>{S[D]=null}),je(),c=S[u],c?c.p(y,T):(c=S[u]=g[u](y),c.c()),N(c,1),c.m(_.parentNode,_)),y[8].length>0||y[13]?k?k.p(y,T):(k=Uo(y),k.c(),k.m(d.parentNode,d)):k&&(k.d(1),k=null)},i(y){m||(N(c),m=!0)},o(y){M(c),m=!1},d(y){y&&(w(e),w(a),w(_),w(d)),S[u].d(y),k&&k.d(y),h=!1,Ge(v)}}}function V_(l){let e=l[8].length>0?"Close":"Cancel",t;return{c(){t=q(e)},m(n,s){$(n,t,s)},p(n,s){s[0]&256&&e!==(e=n[8].length>0?"Close":"Cancel")&&F(t,e)},d(n){n&&w(t)}}}function W_(l){let e;return{c(){e=q("🔨 Build")},m(t,n){$(t,e,n)},d(t){t&&w(e)}}}function J_(l){let e;return{c(){e=q("⏳ Building...")},m(t,n){$(t,e,n)},d(t){t&&w(e)}}}function K_(l){let e;function t(o,i){return o[13]?J_:W_}let n=t(l),s=n(l);return{c(){s.c(),e=Oe()},m(o,i){s.m(o,i),$(o,e,i)},p(o,i){n!==(n=t(o))&&(s.d(1),s=n(o),s&&(s.c(),s.m(e.parentNode,e)))},d(o){o&&w(e),s.d(o)}}}function Y_(l){let e,t,n,s,o;return t=new Be({props:{variant:"ghost",$$slots:{default:[V_]},$$scope:{ctx:l}}}),t.$on("click",l[84]),s=new Be({props:{variant:"primary",disabled:l[13],$$slots:{default:[K_]},$$scope:{ctx:l}}}),s.$on("click",l[44]),{c(){e=p("div"),_e(t.$$.fragment),n=b(),_e(s.$$.fragment),f(e,"slot","footer")},m(i,a){$(i,e,a),fe(t,e,null),r(e,n),fe(s,e,null),o=!0},p(i,a){const u={};a[0]&256|a[4]&4096&&(u.$$scope={dirty:a,ctx:i}),t.$set(u);const c={};a[0]&8192&&(c.disabled=i[13]),a[0]&8192|a[4]&4096&&(c.$$scope={dirty:a,ctx:i}),s.$set(c)},i(i){o||(N(t.$$.fragment,i),N(s.$$.fragment,i),o=!0)},o(i){M(t.$$.fragment,i),M(s.$$.fragment,i),o=!1},d(i){i&&w(e),ce(t),ce(s)}}}function Q_(l){let e,t,n,s,o,i,a,u,c,_,d,m,h,v,g,S,C,k,y=Jo(l[7])+"",T,D,E,j,L,I,R,z=l[36].length+"",Y,U,O,H=l[36].length===1?"SERVER":"SERVERS",P,A,B,J,Q=l[35].containerCount+"",G,oe,ee,V=l[35].containerCount===1?"CONTAINER":"CONTAINERS",K,ae,W,ie,ue,le=l[35].monthlyCost+"",me,re,ne,X,Z,ge,$e=l[35].healthyContainers+"",We,ct,bt=l[35].containerCount+"",rt,Ee,Ie,ve,ze,Me,Re,Ue,et,lt=l[11]?"▼":"▶",ot,Je,it,St=Xl(l[36].length,"Server")+"",Tt,Yt,tt,Ot,Te,Ke,Ye,at,he,Pe,_t,It,Gt=l[3]?"▼":"▶",Ze,Vt,hl,al=Xl(l[4].length,"Snapshot")+"",gl,yl,Wt,Xt,ul,ll,fl,bl,Ut,kl,nl,Bt,sl,cl,Ht,ye,ke,Xe,Jt,Ft=pe(l[38]),gt=[];for(let De=0;De<Ft.length;De+=1)gt[De]=go(ho(l,Ft,De));let st=pe(l[37]),pt=[];for(let De=0;De<st.length;De+=1)pt[De]=bo(vo(l,st,De));let wt=l[11]&&ko(l),$t=l[3]&&$o(l);function gn(De){l[73](De)}let Wl={title:"Provision Server",width:"500px",$$slots:{footer:[E_],default:[S_]},$$scope:{ctx:l}};l[30]!==void 0&&(Wl.open=l[30]),Ut=new il({props:Wl}),zt.push(()=>ml(Ut,"open",gn)),Ut.$on("close",l[74]);function bn(De){l[83](De)}let Jl={title:l[22],width:"1000px",$$slots:{footer:[F_],default:[O_]},$$scope:{ctx:l}};l[21]!==void 0&&(Jl.open=l[21]),Bt=new il({props:Jl}),zt.push(()=>ml(Bt,"open",bn));function kn(De){l[92](De)}let Kl={title:"Build Snapshot",width:"600px",$$slots:{footer:[Y_],default:[G_]},$$scope:{ctx:l}};return l[12]!==void 0&&(Kl.open=l[12]),Ht=new il({props:Kl}),zt.push(()=>ml(Ht,"open",kn)),Ht.$on("close",l[93]),{c(){e=p("div"),t=p("div"),n=p("div"),s=p("label"),s.textContent="Project",o=b(),i=p("select"),a=p("option"),a.textContent="All";for(let De=0;De<gt.length;De+=1)gt[De].c();u=b(),c=p("div"),_=p("label"),_.textContent="Env",d=b(),m=p("select"),h=p("option"),h.textContent="All";for(let De=0;De<pt.length;De+=1)pt[De].c();v=b(),g=p("div"),S=b(),C=p("span"),k=q("Updated "),T=q(y),D=b(),E=p("button"),E.textContent="↻",j=b(),L=p("div"),I=p("div"),R=p("span"),Y=q(z),U=b(),O=p("span"),P=q(H),A=b(),B=p("div"),J=p("span"),G=q(Q),oe=b(),ee=p("span"),K=q(V),ae=b(),W=p("div"),ie=p("span"),ue=q("£"),me=q(le),re=b(),ne=p("span"),ne.textContent="/MONTH",X=b(),Z=p("div"),ge=p("span"),We=q($e),ct=q("/"),rt=q(bt),Ie=b(),ve=p("span"),ve.textContent="HEALTHY",ze=b(),Me=p("div"),Re=p("div"),Ue=p("div"),et=p("span"),ot=q(lt),Je=b(),it=p("span"),Tt=q(St),Yt=b(),tt=p("div"),Ot=p("button"),Ot.textContent="↻",Te=b(),Ke=p("button"),Ke.textContent="+ Add",Ye=b(),wt&&wt.c(),at=b(),he=p("div"),Pe=p("div"),_t=p("div"),It=p("span"),Ze=q(Gt),Vt=b(),hl=p("span"),gl=q(al),yl=b(),Wt=p("div"),Xt=p("button"),Xt.textContent="↻",ul=b(),ll=p("button"),ll.textContent="+ Build",fl=b(),$t&&$t.c(),bl=b(),_e(Ut.$$.fragment),nl=b(),_e(Bt.$$.fragment),cl=b(),_e(Ht.$$.fragment),f(s,"class","svelte-abn0n1"),a.__value="",te(a,a.__value),f(i,"class","svelte-abn0n1"),l[1]===void 0&&Qe(()=>l[63].call(i)),f(n,"class","filter-group svelte-abn0n1"),f(_,"class","svelte-abn0n1"),h.__value="",te(h,h.__value),f(m,"class","svelte-abn0n1"),l[2]===void 0&&Qe(()=>l[64].call(m)),f(c,"class","filter-group svelte-abn0n1"),f(g,"class","filter-spacer svelte-abn0n1"),f(C,"class","last-updated svelte-abn0n1"),f(E,"class","filter-refresh svelte-abn0n1"),f(E,"title","Refresh"),f(t,"class","filter-bar svelte-abn0n1"),f(R,"class","banner-value svelte-abn0n1"),f(O,"class","banner-label svelte-abn0n1"),f(I,"class","banner-metric svelte-abn0n1"),f(J,"class","banner-value svelte-abn0n1"),f(ee,"class","banner-label svelte-abn0n1"),f(B,"class","banner-metric svelte-abn0n1"),f(ie,"class","banner-value svelte-abn0n1"),f(ne,"class","banner-label svelte-abn0n1"),f(W,"class","banner-metric svelte-abn0n1"),f(ge,"class",Ee="banner-value "+(l[35].unhealthyContainers>0?"warning":"success")+" svelte-abn0n1"),f(ve,"class","banner-label svelte-abn0n1"),f(Z,"class","banner-metric svelte-abn0n1"),f(L,"class","summary-banner svelte-abn0n1"),f(et,"class","expand-icon svelte-abn0n1"),f(Ue,"class","section-title svelte-abn0n1"),f(Ot,"class","section-btn svelte-abn0n1"),f(Ke,"class","section-btn primary svelte-abn0n1"),f(tt,"class","section-actions svelte-abn0n1"),f(Re,"class","section-header svelte-abn0n1"),f(Me,"class","section svelte-abn0n1"),we(Me,"expanded",l[11]),f(It,"class","expand-icon svelte-abn0n1"),f(_t,"class","section-title svelte-abn0n1"),f(Xt,"class","section-btn svelte-abn0n1"),f(ll,"class","section-btn primary svelte-abn0n1"),f(Wt,"class","section-actions svelte-abn0n1"),f(Pe,"class","section-header svelte-abn0n1"),f(he,"class","section svelte-abn0n1"),we(he,"expanded",l[3]),f(e,"class","infrastructure svelte-abn0n1")},m(De,Fe){$(De,e,Fe),r(e,t),r(t,n),r(n,s),r(n,o),r(n,i),r(i,a);for(let Pt=0;Pt<gt.length;Pt+=1)gt[Pt]&&gt[Pt].m(i,null);Le(i,l[1],!0),r(t,u),r(t,c),r(c,_),r(c,d),r(c,m),r(m,h);for(let Pt=0;Pt<pt.length;Pt+=1)pt[Pt]&&pt[Pt].m(m,null);Le(m,l[2],!0),r(t,v),r(t,g),r(t,S),r(t,C),r(C,k),r(C,T),r(t,D),r(t,E),r(e,j),r(e,L),r(L,I),r(I,R),r(R,Y),r(I,U),r(I,O),r(O,P),r(L,A),r(L,B),r(B,J),r(J,G),r(B,oe),r(B,ee),r(ee,K),r(L,ae),r(L,W),r(W,ie),r(ie,ue),r(ie,me),r(W,re),r(W,ne),r(L,X),r(L,Z),r(Z,ge),r(ge,We),r(ge,ct),r(ge,rt),r(Z,Ie),r(Z,ve),r(e,ze),r(e,Me),r(Me,Re),r(Re,Ue),r(Ue,et),r(et,ot),r(Ue,Je),r(Ue,it),r(it,Tt),r(Re,Yt),r(Re,tt),r(tt,Ot),r(tt,Te),r(tt,Ke),r(Me,Ye),wt&&wt.m(Me,null),r(e,at),r(e,he),r(he,Pe),r(Pe,_t),r(_t,It),r(It,Ze),r(_t,Vt),r(_t,hl),r(hl,gl),r(Pe,yl),r(Pe,Wt),r(Wt,Xt),r(Wt,ul),r(Wt,ll),r(he,fl),$t&&$t.m(he,null),$(De,bl,Fe),fe(Ut,De,Fe),$(De,nl,Fe),fe(Bt,De,Fe),$(De,cl,Fe),fe(Ht,De,Fe),ke=!0,Xe||(Jt=[x(i,"change",l[63]),x(m,"change",l[64]),x(E,"click",l[0]),x(Ot,"click",l[0]),x(Ke,"click",l[65]),x(tt,"click",Un(l[62])),x(Re,"click",l[66]),x(Xt,"click",l[42]),x(ll,"click",l[40]),x(Wt,"click",Un(l[61])),x(Pe,"click",l[67])],Xe=!0)},p(De,Fe){if(Fe[1]&128){Ft=pe(De[38]);let dt;for(dt=0;dt<Ft.length;dt+=1){const wl=ho(De,Ft,dt);gt[dt]?gt[dt].p(wl,Fe):(gt[dt]=go(wl),gt[dt].c(),gt[dt].m(i,null))}for(;dt<gt.length;dt+=1)gt[dt].d(1);gt.length=Ft.length}if(Fe[0]&2|Fe[1]&128&&Le(i,De[1]),Fe[1]&64){st=pe(De[37]);let dt;for(dt=0;dt<st.length;dt+=1){const wl=vo(De,st,dt);pt[dt]?pt[dt].p(wl,Fe):(pt[dt]=bo(wl),pt[dt].c(),pt[dt].m(m,null))}for(;dt<pt.length;dt+=1)pt[dt].d(1);pt.length=st.length}Fe[0]&4|Fe[1]&64&&Le(m,De[2]),(!ke||Fe[0]&128)&&y!==(y=Jo(De[7])+"")&&F(T,y),(!ke||Fe[1]&32)&&z!==(z=De[36].length+"")&&F(Y,z),(!ke||Fe[1]&32)&&H!==(H=De[36].length===1?"SERVER":"SERVERS")&&F(P,H),(!ke||Fe[1]&16)&&Q!==(Q=De[35].containerCount+"")&&F(G,Q),(!ke||Fe[1]&16)&&V!==(V=De[35].containerCount===1?"CONTAINER":"CONTAINERS")&&F(K,V),(!ke||Fe[1]&16)&&le!==(le=De[35].monthlyCost+"")&&F(me,le),(!ke||Fe[1]&16)&&$e!==($e=De[35].healthyContainers+"")&&F(We,$e),(!ke||Fe[1]&16)&&bt!==(bt=De[35].containerCount+"")&&F(rt,bt),(!ke||Fe[1]&16&&Ee!==(Ee="banner-value "+(De[35].unhealthyContainers>0?"warning":"success")+" svelte-abn0n1"))&&f(ge,"class",Ee),(!ke||Fe[0]&2048)&&lt!==(lt=De[11]?"▼":"▶")&&F(ot,lt),(!ke||Fe[1]&32)&&St!==(St=Xl(De[36].length,"Server")+"")&&F(Tt,St),De[11]?wt?(wt.p(De,Fe),Fe[0]&2048&&N(wt,1)):(wt=ko(De),wt.c(),N(wt,1),wt.m(Me,null)):wt&&(qe(),M(wt,1,1,()=>{wt=null}),je()),(!ke||Fe[0]&2048)&&we(Me,"expanded",De[11]),(!ke||Fe[0]&8)&&Gt!==(Gt=De[3]?"▼":"▶")&&F(Ze,Gt),(!ke||Fe[0]&16)&&al!==(al=Xl(De[4].length,"Snapshot")+"")&&F(gl,al),De[3]?$t?($t.p(De,Fe),Fe[0]&8&&N($t,1)):($t=$o(De),$t.c(),N($t,1),$t.m(he,null)):$t&&(qe(),M($t,1,1,()=>{$t=null}),je()),(!ke||Fe[0]&8)&&we(he,"expanded",De[3]);const Pt={};Fe[0]&1073743376|Fe[1]&3|Fe[4]&4096&&(Pt.$$scope={dirty:Fe,ctx:De}),!kl&&Fe[0]&1073741824&&(kl=!0,Pt.open=De[30],dl(()=>kl=!1)),Ut.$set(Pt);const Sl={};Fe[0]&4194304&&(Sl.title=De[22]),Fe[0]&1067450432|Fe[1]&8|Fe[4]&4096&&(Sl.$$scope={dirty:Fe,ctx:De}),!sl&&Fe[0]&2097152&&(sl=!0,Sl.open=De[21],dl(()=>sl=!1)),Bt.$set(Sl);const Fl={};Fe[0]&2093312|Fe[4]&4096&&(Fl.$$scope={dirty:Fe,ctx:De}),!ye&&Fe[0]&4096&&(ye=!0,Fl.open=De[12],dl(()=>ye=!1)),Ht.$set(Fl)},i(De){ke||(N(wt),N($t),N(Ut.$$.fragment,De),N(Bt.$$.fragment,De),N(Ht.$$.fragment,De),ke=!0)},o(De){M(wt),M($t),M(Ut.$$.fragment,De),M(Bt.$$.fragment,De),M(Ht.$$.fragment,De),ke=!1},d(De){De&&(w(e),w(bl),w(nl),w(cl)),Ne(gt,De),Ne(pt,De),wt&&wt.d(),$t&&$t.d(),ce(Ut,De),ce(Bt,De),ce(Ht,De),Xe=!1,Ge(Jt)}}}function Go(l){return l!=null&&l.length?l.reduce((e,t)=>{const n=t.size_slug||t.size||"";return n.includes("4gb")?e+24:n.includes("2gb")?e+12:n.includes("1gb")?e+6:n.includes("512mb")?e+4:e+6},0):0}function Xl(l,e,t=null){return l===1?`${l} ${e}`:`${l} ${t||e+"s"}`}function Vo(l){if(!l)return"0 B";const e=1024,t=["B","KB","MB","GB"],n=Math.floor(Math.log(l)/Math.log(e));return parseFloat((l/Math.pow(e,n)).toFixed(1))+" "+t[n]}function Wo(l){return l?new Date(l).toLocaleDateString("en-GB",{day:"2-digit",month:"short"}):""}function Jo(l){if(!l)return"never";const t=Math.floor((new Date-l)/1e3);return t<5?"just now":t<60?`${t}s ago`:t<3600?`${Math.floor(t/60)}m ago`:l.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"})}const Ko=l=>{var e;return(e=l.name)==null?void 0:e.startsWith("base-")},Yo=l=>{var e;return(e=l.name)==null?void 0:e.startsWith("base-")};function Z_(l,e,t){let n,s,o,i,a,u,c,_,d,m,h,v;ht(l,vn,ye=>t(56,_=ye)),ht(l,Mn,ye=>t(57,d=ye)),ht(l,Zt,ye=>t(58,m=ye)),ht(l,sf,ye=>t(59,h=ye)),ht(l,On,ye=>t(60,v=ye));let g="",S="",C=null,k=[],y=[],T=!1,D=!0,E=!1,j=[],L=!1,I=!1,R=!1,z="custom",Y="",U="ubuntu-22-04-x64",O=!0,H=!0,P=!0,A=null;const B=[{value:"ubuntu-22-04-x64",label:"Ubuntu 22.04 LTS"},{value:"ubuntu-20-04-x64",label:"Ubuntu 20.04 LTS"},{value:"debian-11-x64",label:"Debian 11"},{value:"debian-12-x64",label:"Debian 12"}];function J(){t(14,z=A!=null&&A.exists?"custom":"base"),t(12,I=!0)}let Q=null;async function G(){if(d)try{t(53,Q=await He("GET",`/infra/fleet/health?do_token=${d}`))}catch(ye){console.error("Failed to load fleet health:",ye)}finally{}}let oe=!1,ee="",V="",K=!1,ae=null,W=null,ie="",ue=200,le=!1,me=null,re="logs",ne=null,X=!1,Z={},ge=!1,$e={region:"lon1",size:"s-2vcpu-2gb",snapshot_id:""};const We=[{value:"lon1",label:"London 1"},{value:"fra1",label:"Frankfurt 1"},{value:"ams3",label:"Amsterdam 3"},{value:"nyc1",label:"New York 1"},{value:"nyc3",label:"New York 3"},{value:"sfo3",label:"San Francisco 3"},{value:"sgp1",label:"Singapore 1"},{value:"blr1",label:"Bangalore 1"},{value:"tor1",label:"Toronto 1"},{value:"syd1",label:"Sydney 1"}];let ct=[{slug:"s-1vcpu-512mb-10gb",memory:512,vcpus:1,price_monthly:4,description:"$4/mo - 512MB / 1 vCPU"},{slug:"s-1vcpu-1gb",memory:1024,vcpus:1,price_monthly:6,description:"$6/mo - 1GB / 1 vCPU"},{slug:"s-2vcpu-2gb",memory:2048,vcpus:2,price_monthly:18,description:"$18/mo - 2GB / 2 vCPU"},{slug:"s-2vcpu-4gb",memory:4096,vcpus:2,price_monthly:24,description:"$24/mo - 4GB / 2 vCPU"},{slug:"s-4vcpu-8gb",memory:8192,vcpus:4,price_monthly:48,description:"$48/mo - 8GB / 4 vCPU"}];async function bt(){var ye;try{const ke=await He("GET","/infra/sizes");((ye=ke.sizes)==null?void 0:ye.length)>0&&t(32,ct=ke.sizes)}catch{console.warn("Using fallback sizes")}}Cl(()=>{bt()});async function rt(){t(5,L=!0);try{const ye=await He("GET",`/infra/snapshots?do_token=${d}`);t(4,j=ye.snapshots||[]),Ee()}catch(ye){console.error("Failed to load snapshots:",ye)}finally{t(5,L=!1)}}function Ee(){const ye=j.find(ke=>{var Xe;return(Xe=ke.name)==null?void 0:Xe.toLowerCase().startsWith("base-")});ye?t(20,A={exists:!0,name:ye.name,created_at:ye.created_at}):t(20,A={exists:!1})}async function Ie(ye,ke){if(confirm(`Delete snapshot "${ke}"?`))try{await He("DELETE",`/infra/snapshots/${ye}?do_token=${d}`),Ce.success(`Deleted ${ke}`),t(4,j=j.filter(Xe=>Xe.id!==ye))}catch(Xe){Ce.error(`Failed: ${Xe.message}`)}}async function ve(){t(13,R=!0),t(8,k=[]);const ye=(ke,Xe="info")=>{t(8,k=[...k,{message:ke,type:Xe,time:new Date}])};try{if(z==="base")ye("Starting base snapshot creation..."),await tn("POST",`/infra/setup/init/stream?do_token=${d}`,{},ke=>{var Xe;ke.type==="log"?ye(ke.message||((Xe=ke.data)==null?void 0:Xe.message),"info"):ke.type==="progress"?ke.message&&ye(ke.message,"info"):ke.type==="error"?ye(ke.message||ke.error,"error"):ke.type==="done"||ke.type==="complete"?ke.success?ye("✅ Base snapshot created successfully!","success"):ye(`❌ ${ke.message||ke.error||"Failed"}`,"error"):ke.message&&ye(ke.message,"info")}),await Ee(),await rt(),Ce.success("Base snapshot created!");else{if(!Y){Ce.error("Snapshot name required"),t(13,R=!1);return}if(Y.toLowerCase().startsWith("base-")){Ce.error('Custom snapshots cannot start with "base-"'),t(13,R=!1);return}ye(`Starting custom snapshot "${Y}"...`),await tn("POST",`/infra/snapshots/ensure/stream?do_token=${d}`,{name:Y,base_image:U,install_docker:O,install_nginx:H,install_certbot:P},ke=>{var Xe;ke.type==="log"?ye(ke.message||((Xe=ke.data)==null?void 0:Xe.message),"info"):ke.type==="progress"?ke.message&&ye(ke.message,"info"):ke.type==="error"?ye(ke.message||ke.error,"error"):ke.type==="done"||ke.type==="complete"?ke.success?ye("✅ Snapshot created successfully!","success"):ye(`❌ ${ke.message||ke.error||"Failed"}`,"error"):ke.message&&ye(ke.message,"info")}),await rt(),Ce.success("Custom snapshot created!"),t(15,Y="")}}catch(ke){ye(`❌ Error: ${ke.message}`,"error"),Ce.error(ke.message)}finally{t(13,R=!1)}}async function ze(){t(10,T=!0),t(9,y=[]);const ye=(ke,Xe="info")=>{t(9,y=[...y,{message:ke,type:Xe,time:new Date}])};try{ye("Starting provisioning..."),await tn("POST",`/infra/servers/provision/stream?do_token=${d}`,{snapshot_id:$e.snapshot_id||null,region:$e.region,size:$e.size},ke=>{var Xe;ke.type==="log"?ye(ke.message||((Xe=ke.data)==null?void 0:Xe.message),"info"):ke.type==="progress"?ye(ke.message||`Progress: ${ke.percent||""}%`,"info"):ke.type==="error"?ye(ke.message||ke.error,"error"):ke.type==="done"||ke.type==="complete"?ke.success?ye(`✅ Server provisioned! IP: ${ke.ip||"pending"}`,"success"):ye(`❌ ${ke.message||ke.error||"Failed"}`,"error"):ke.message&&ye(ke.message,"info")}),Ce.success("Server provisioned"),Zt.refresh()}catch(ke){ye(`❌ Error: ${ke.message}`,"error"),Ce.error("Failed: "+ke.message)}finally{t(10,T=!1)}}async function Me(ye){const{server:ke}=ye.detail;if(ye.type==="destroy"&&confirm(`Destroy ${ke.name}? This cannot be undone.`))try{await He("DELETE",`/infra/servers/${ke.id}?do_token=${d}`),Ce.success(`Destroyed ${ke.name}`),Zt.refresh()}catch(Jt){Ce.error(`Failed: ${Jt.message}`)}}async function Re(ye){var Ft,gt,st;const{server:ke,containerName:Xe}=ye.detail,Jt=ke.ip||((st=(gt=(Ft=ke.networks)==null?void 0:Ft.v4)==null?void 0:gt[0])==null?void 0:st.ip_address)||"unknown";ae=ke.id,W=Xe,t(22,ee=`📋 ${Xe} @ ${Jt}`),t(54,V=""),t(6,ie=""),t(26,re="logs"),t(27,ne=null),t(29,Z={}),t(21,oe=!0),t(23,K=!0);try{const pt=await He("GET",`/infra/agent/${ke.id}/containers/${Xe}/logs?do_token=${d}&tail=${ue}`);t(54,V=pt.logs||"No logs available")}catch(pt){t(54,V=`Error: ${pt.message}`)}finally{t(23,K=!1)}}async function Ue(){if(!(!ae||!W)){t(23,K=!0);try{const ye=await He("GET",`/infra/agent/${ae}/containers/${W}/logs?do_token=${d}&tail=${ue}`);t(54,V=ye.logs||"No logs available")}catch(ye){t(54,V=`Error: ${ye.message}`)}finally{t(23,K=!1)}}}async function et(){if(!(!ae||!W)){t(28,X=!0);try{const ye=await He("GET",`/infra/containers/${W}/env?server_id=${ae}&do_token=${d}`);t(27,ne=ye)}catch(ye){t(27,ne={error:ye.message})}finally{t(28,X=!1)}}}function lt(ye,ke){navigator.clipboard.writeText(`${ye}=${ke}`),t(29,Z[ye]=!0,Z),setTimeout(()=>{t(29,Z[ye]=!1,Z),t(29,Z={...Z})},2e3)}function ot(){le?me=setInterval(Ue,3e3):Je()}function Je(){me&&(clearInterval(me),me=null),t(25,le=!1)}function it(){Zt.refresh(),t(7,C=new Date)}function St(ye){rn.call(this,l,ye)}function Tt(ye){rn.call(this,l,ye)}function Yt(){g=ft(this),t(1,g),t(38,n),t(56,_),t(60,v),t(59,h)}function tt(){S=ft(this),t(2,S),t(37,s),t(56,_)}const Ot=()=>t(30,ge=!0),Te=()=>t(11,D=!D),Ke=()=>t(3,E=!E),Ye=ye=>Ie(ye.id,ye.name),at=()=>{t(30,ge=!1),t(9,y=[])};function he(){$e.snapshot_id=ft(this),t(31,$e),t(4,j)}function Pe(){$e.region=ft(this),t(31,$e),t(4,j)}function _t(){$e.size=ft(this),t(31,$e),t(4,j)}function It(ye){ge=ye,t(30,ge)}const Gt=()=>{t(30,ge=!1),t(9,y=[])},Ze=()=>{t(21,oe=!1),Je()},Vt=()=>t(26,re="logs"),hl=()=>{t(26,re="env"),!ne&&!X&&et()};function al(){ie=this.value,t(6,ie)}function gl(){ue=ft(this),t(24,ue)}function yl(){le=this.checked,t(25,le)}const Wt=(ye,ke)=>lt(ye,ke),Xt=(ye,ke)=>lt(ye,ke);function ul(ye){oe=ye,t(21,oe)}const ll=()=>{t(12,I=!1),t(8,k=[])},fl=()=>t(14,z="base"),bl=()=>t(14,z="custom");function Ut(){Y=this.value,t(15,Y)}function kl(){U=ft(this),t(16,U),t(39,B)}function nl(){O=this.checked,t(17,O)}function Bt(){H=this.checked,t(18,H)}function sl(){P=this.checked,t(19,P)}function cl(ye){I=ye,t(12,I)}const Ht=()=>{t(12,I=!1),t(8,k=[])};return l.$$.update=()=>{var ye,ke,Xe,Jt,Ft,gt;l.$$.dirty[1]&838860800&&t(38,n=[...new Set([...(_||[]).map(st=>st.project).filter(Boolean),...v||[],...(h||[]).map(st=>st.project).filter(Boolean)])].sort()),l.$$.dirty[1]&33554432&&t(37,s=[...new Set([...(_||[]).map(st=>st.env||st.environment).filter(Boolean),"prod","staging","dev"])].sort()),l.$$.dirty[0]&6|l.$$.dirty[1]&33554432&&t(36,o=(_||[]).filter(st=>!(g&&st.project!==g||S&&(st.env||st.environment)!==S))),l.$$.dirty[0]&56&&E&&j.length===0&&!L&&rt(),l.$$.dirty[1]&37748736&&t(35,i=Q?{serverCount:((ye=Q.summary)==null?void 0:ye.total)||(_==null?void 0:_.length)||0,containerCount:((ke=Q.servers)==null?void 0:ke.reduce((st,pt)=>st+(pt.containers||0),0))||0,healthyContainers:((Xe=Q.servers)==null?void 0:Xe.reduce((st,pt)=>st+(pt.healthy||0),0))||0,unhealthyContainers:((Jt=Q.servers)==null?void 0:Jt.reduce((st,pt)=>st+(pt.unhealthy||0),0))||0,monthlyCost:Go(_),health:((Ft=Q.summary)==null?void 0:Ft.healthy)===((gt=Q.summary)==null?void 0:gt.total)?"healthy":"degraded"}:{serverCount:(_==null?void 0:_.length)||0,containerCount:0,healthyContainers:0,unhealthyContainers:0,monthlyCost:Go(_),health:"unknown"}),l.$$.dirty[1]&71303168&&!Q&&d&&G(),l.$$.dirty[0]&64|l.$$.dirty[1]&8388608&&t(34,a=ie?V.split(`
`).filter(st=>st.toLowerCase().includes(ie.toLowerCase())).join(`
`):V),l.$$.dirty[1]&134217728&&t(55,u=m||{loading:!1}),l.$$.dirty[1]&16777216&&t(33,c=u.loading),l.$$.dirty[1]&33554432&&_&&t(7,C=new Date)},[it,g,S,E,j,L,ie,C,k,y,T,D,I,R,z,Y,U,O,H,P,A,oe,ee,K,ue,le,re,ne,X,Z,ge,$e,ct,c,a,i,o,s,n,B,J,We,rt,Ie,ve,ze,Me,Re,Ue,et,lt,ot,Je,Q,V,u,_,d,m,h,v,St,Tt,Yt,tt,Ot,Te,Ke,Ye,at,he,Pe,_t,It,Gt,Ze,Vt,hl,al,gl,yl,Wt,Xt,ul,ll,fl,bl,Ut,kl,nl,Bt,sl,cl,Ht]}class X_ extends jt{constructor(e){super(),qt(this,e,Z_,Q_,yt,{refresh:0},null,[-1,-1,-1,-1,-1])}get refresh(){return this.$$.ctx[0]}}const x_="modulepreload",ep=function(l){return"/static/"+l},Qo={},Zo=function(e,t,n){let s=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),a=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));s=Promise.allSettled(t.map(u=>{if(u=ep(u),u in Qo)return;Qo[u]=!0;const c=u.endsWith(".css"),_=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${_}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":x_,c||(d.as="script"),d.crossOrigin="",d.href=u,a&&d.setAttribute("nonce",a),document.head.appendChild(d),c)return new Promise((m,h)=>{d.addEventListener("load",m),d.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${u}`)))})}))}function o(i){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i}return s.then(i=>{for(const a of i||[])a.status==="rejected"&&o(a.reason);return e().catch(o)})},{Boolean:hn}=Uu;function Xo(l,e,t){const n=l.slice();return n[179]=e[t],n}function xo(l,e,t){const n=l.slice();return n[179]=e[t],n}function ei(l,e,t){const n=l.slice();return n[179]=e[t],n}function ti(l,e,t){const n=l.slice();return n[179]=e[t],n}function li(l,e,t){const n=l.slice();return n[83]=e[t],n}function ni(l,e,t){const n=l.slice();return n[190]=e[t],n}function si(l,e,t){const n=l.slice();return n[193]=e[t],n}function oi(l,e,t){const n=l.slice();return n[196]=e[t],n}function ii(l,e,t){var o,i,a;const n=l.slice();n[179]=e[t];const s=n[179].ip||((a=(i=(o=n[179].networks)==null?void 0:o.v4)==null?void 0:i[0])==null?void 0:a.ip_address);return n[199]=s,n}function ri(l,e,t){var o,i,a;const n=l.slice();n[179]=e[t];const s=n[179].ip||((a=(i=(o=n[179].networks)==null?void 0:o.v4)==null?void 0:i[0])==null?void 0:a.ip_address);return n[199]=s,n}function ai(l,e,t){const n=l.slice();return n[204]=e[t],n[206]=t,n}function tp(l){const e=l.slice(),t=e[28].find(s=>s.isMain);e[207]=t;const n=e[28].filter(s=>!s.isMain).length;return e[208]=n,e}function ui(l,e,t){const n=l.slice();return n[204]=e[t],n[206]=t,n}function fi(l,e,t){const n=l.slice();return n[210]=e[t],n}function ci(l,e,t){const n=l.slice();return n[213]=e[t],n}function _i(l,e,t){const n=l.slice();return n[216]=e[t],n}function pi(l){let e,t,n,s,o,i,a,u,c,_;function d(){return l[86](l[216])}return{c(){e=p("label"),t=p("input"),s=b(),o=p("span"),o.textContent=`${l[216].label}`,i=b(),a=p("span"),a.textContent=`${l[216].description}`,u=b(),f(t,"type","radio"),f(t,"name","deployType"),t.checked=n=l[0]===l[216].value,f(t,"class","svelte-1hrwlue"),f(o,"class","dt-label svelte-1hrwlue"),f(a,"class","dt-desc svelte-1hrwlue"),f(e,"class","deploy-type-option svelte-1hrwlue"),we(e,"active",l[0]===l[216].value)},m(m,h){$(m,e,h),r(e,t),r(e,s),r(e,o),r(e,i),r(e,a),r(e,u),c||(_=x(t,"change",d),c=!0)},p(m,h){l=m,h[0]&1&&n!==(n=l[0]===l[216].value)&&(t.checked=n),h[0]&1|h[1]&536870912&&we(e,"active",l[0]===l[216].value)},d(m){m&&w(e),c=!1,_()}}}function di(l){let e,t,n;return{c(){e=p("small"),t=q("Usually same as type: "),n=q(l[1]),f(e,"class","svelte-1hrwlue")},m(s,o){$(s,e,o),r(e,t),r(e,n)},p(s,o){o[0]&2&&F(n,s[1])},d(s){s&&w(e)}}}function mi(l){let e,t=l[213]+"",n;return{c(){e=p("option"),n=q(t),e.__value=l[213],te(e,e.__value)},m(s,o){$(s,e,o),r(e,n)},p:be,d(s){s&&w(e)}}}function vi(l){var h;let e,t,n,s,o,i,a,u=((h=l[2].find(l[92]))==null?void 0:h.image)+"",c,_,d=pe(l[2]),m=[];for(let v=0;v<d.length;v+=1)m[v]=hi(fi(l,d,v));return{c(){e=p("div"),t=p("label"),t.textContent="Service Type *",n=b(),s=p("div");for(let v=0;v<m.length;v+=1)m[v].c();o=b(),i=p("small"),a=q("Image: "),c=q(u),_=q(" • Data persisted to /data"),f(t,"class","svelte-1hrwlue"),f(s,"class","stateful-type-selector svelte-1hrwlue"),f(i,"class","svelte-1hrwlue"),f(e,"class","form-group svelte-1hrwlue")},m(v,g){$(v,e,g),r(e,t),r(e,n),r(e,s);for(let S=0;S<m.length;S+=1)m[S]&&m[S].m(s,null);r(e,o),r(e,i),r(i,a),r(i,c),r(i,_)},p(v,g){var S;if(g[0]&6){d=pe(v[2]);let C;for(C=0;C<d.length;C+=1){const k=fi(v,d,C);m[C]?m[C].p(k,g):(m[C]=hi(k),m[C].c(),m[C].m(s,null))}for(;C<m.length;C+=1)m[C].d(1);m.length=d.length}g[0]&6&&u!==(u=((S=v[2].find(v[92]))==null?void 0:S.image)+"")&&F(c,u)},d(v){v&&w(e),Ne(m,v)}}}function hi(l){let e,t,n,s=!1,o,i,a=l[210].label+"",u,c,_,d,m=l[210].port+"",h,v,g,S,C;return g=pn(l[91][1]),{c(){e=p("label"),t=p("input"),o=b(),i=p("span"),u=q(a),c=b(),_=p("span"),d=q("Port "),h=q(m),v=b(),f(t,"type","radio"),t.__value=n=l[210].value,te(t,t.__value),f(t,"class","svelte-1hrwlue"),f(i,"class","st-label svelte-1hrwlue"),f(_,"class","st-port svelte-1hrwlue"),f(e,"class","stateful-option svelte-1hrwlue"),we(e,"active",l[1]===l[210].value),g.p(t)},m(k,y){$(k,e,y),r(e,t),t.checked=t.__value===l[1],r(e,o),r(e,i),r(i,u),r(e,c),r(e,_),r(_,d),r(_,h),r(e,v),S||(C=x(t,"change",l[90]),S=!0)},p(k,y){y[0]&4&&n!==(n=k[210].value)&&(t.__value=n,te(t,t.__value),s=!0),(s||y[0]&6)&&(t.checked=t.__value===k[1]),y[0]&4&&a!==(a=k[210].label+"")&&F(u,a),y[0]&4&&m!==(m=k[210].port+"")&&F(h,m),y[0]&6&&we(e,"active",k[1]===k[210].value)},d(k){k&&w(e),g.r(),S=!1,C()}}}function gi(l){let e,t,n,s,o,i,a,u,c,_,d,m,h,v,g,S,C,k,y,T,D,E,j,L,I,R,z,Y,U,O,H,P,A,B,J,Q,G,oe,ee,V,K,ae,W,ie;s=new Be({props:{variant:"ghost",size:"sm",title:"Load saved config",$$slots:{default:[lp]},$$scope:{ctx:l}}}),s.$on("click",l[63]),i=new Be({props:{variant:"ghost",size:"sm",title:"Save current settings",$$slots:{default:[np]},$$scope:{ctx:l}}}),i.$on("click",l[64]),u=new Be({props:{variant:"ghost",size:"sm",title:"Edit exclusion patterns",$$slots:{default:[sp]},$$scope:{ctx:l}}}),u.$on("click",l[65]);let ue=l[53]&&bi(l),le=l[54]&&ki(l),me=l[15]==="code"&&wi(l),re=l[15]==="git"&&Di(l),ne=l[15]==="image"&&Pi(l),X=l[15]==="image_file"&&Ni(l);return ae=pn(l[91][0]),{c(){e=p("div"),t=p("span"),t.textContent="Config:",n=b(),_e(s.$$.fragment),o=b(),_e(i.$$.fragment),a=b(),_e(u.$$.fragment),c=b(),ue&&ue.c(),_=b(),le&&le.c(),d=b(),m=p("div"),h=p("label"),h.innerHTML='Tags <small class="svelte-1hrwlue">(comma-separated)</small>',v=b(),g=p("input"),S=b(),C=p("div"),k=p("label"),k.textContent="Source Type *",y=b(),T=p("div"),D=p("label"),E=p("input"),j=q(`
              📁 Local Code`),L=b(),I=p("label"),R=p("input"),z=q(`
              📦 Git Repo`),Y=b(),U=p("label"),O=p("input"),H=q(`
              🐳 Registry`),P=b(),A=p("label"),B=p("input"),J=q(`
              📦 Local Image`),Q=b(),me&&me.c(),G=b(),re&&re.c(),oe=b(),ne&&ne.c(),ee=b(),X&&X.c(),V=Oe(),f(t,"class","config-label svelte-1hrwlue"),f(e,"class","config-bar svelte-1hrwlue"),f(h,"for","deploy-tags"),f(h,"class","svelte-1hrwlue"),f(g,"id","deploy-tags"),f(g,"type","text"),f(g,"placeholder","api, backend, v2"),f(g,"class","svelte-1hrwlue"),f(m,"class","form-group svelte-1hrwlue"),f(k,"class","svelte-1hrwlue"),f(E,"type","radio"),E.__value="code",te(E,E.__value),f(E,"class","svelte-1hrwlue"),f(D,"class","source-option svelte-1hrwlue"),we(D,"active",l[15]==="code"),f(R,"type","radio"),R.__value="git",te(R,R.__value),f(R,"class","svelte-1hrwlue"),f(I,"class","source-option svelte-1hrwlue"),we(I,"active",l[15]==="git"),f(O,"type","radio"),O.__value="image",te(O,O.__value),f(O,"class","svelte-1hrwlue"),f(U,"class","source-option svelte-1hrwlue"),we(U,"active",l[15]==="image"),f(B,"type","radio"),B.__value="image_file",te(B,B.__value),f(B,"class","svelte-1hrwlue"),f(A,"class","source-option svelte-1hrwlue"),we(A,"active",l[15]==="image_file"),f(T,"class","source-radio-group svelte-1hrwlue"),f(C,"class","form-group svelte-1hrwlue"),ae.p(E,R,O,B)},m(Z,ge){$(Z,e,ge),r(e,t),r(e,n),fe(s,e,null),r(e,o),fe(i,e,null),r(e,a),fe(u,e,null),r(e,c),ue&&ue.m(e,null),$(Z,_,ge),le&&le.m(Z,ge),$(Z,d,ge),$(Z,m,ge),r(m,h),r(m,v),r(m,g),te(g,l[14]),$(Z,S,ge),$(Z,C,ge),r(C,k),r(C,y),r(C,T),r(T,D),r(D,E),E.checked=E.__value===l[15],r(D,j),r(T,L),r(T,I),r(I,R),R.checked=R.__value===l[15],r(I,z),r(T,Y),r(T,U),r(U,O),O.checked=O.__value===l[15],r(U,H),r(T,P),r(T,A),r(A,B),B.checked=B.__value===l[15],r(A,J),$(Z,Q,ge),me&&me.m(Z,ge),$(Z,G,ge),re&&re.m(Z,ge),$(Z,oe,ge),ne&&ne.m(Z,ge),$(Z,ee,ge),X&&X.m(Z,ge),$(Z,V,ge),K=!0,W||(ie=[x(g,"input",l[94]),x(E,"change",l[95]),x(R,"change",l[96]),x(O,"change",l[97]),x(B,"change",l[98])],W=!0)},p(Z,ge){const $e={};ge[7]&4&&($e.$$scope={dirty:ge,ctx:Z}),s.$set($e);const We={};ge[7]&4&&(We.$$scope={dirty:ge,ctx:Z}),i.$set(We);const ct={};ge[7]&4&&(ct.$$scope={dirty:ge,ctx:Z}),u.$set(ct),Z[53]?ue?ue.p(Z,ge):(ue=bi(Z),ue.c(),ue.m(e,null)):ue&&(ue.d(1),ue=null),Z[54]?le?(le.p(Z,ge),ge[1]&8388608&&N(le,1)):(le=ki(Z),le.c(),N(le,1),le.m(d.parentNode,d)):le&&(qe(),M(le,1,1,()=>{le=null}),je()),ge[0]&16384&&g.value!==Z[14]&&te(g,Z[14]),ge[0]&32768&&(E.checked=E.__value===Z[15]),(!K||ge[0]&32768)&&we(D,"active",Z[15]==="code"),ge[0]&32768&&(R.checked=R.__value===Z[15]),(!K||ge[0]&32768)&&we(I,"active",Z[15]==="git"),ge[0]&32768&&(O.checked=O.__value===Z[15]),(!K||ge[0]&32768)&&we(U,"active",Z[15]==="image"),ge[0]&32768&&(B.checked=B.__value===Z[15]),(!K||ge[0]&32768)&&we(A,"active",Z[15]==="image_file"),Z[15]==="code"?me?(me.p(Z,ge),ge[0]&32768&&N(me,1)):(me=wi(Z),me.c(),N(me,1),me.m(G.parentNode,G)):me&&(qe(),M(me,1,1,()=>{me=null}),je()),Z[15]==="git"?re?(re.p(Z,ge),ge[0]&32768&&N(re,1)):(re=Di(Z),re.c(),N(re,1),re.m(oe.parentNode,oe)):re&&(qe(),M(re,1,1,()=>{re=null}),je()),Z[15]==="image"?ne?ne.p(Z,ge):(ne=Pi(Z),ne.c(),ne.m(ee.parentNode,ee)):ne&&(ne.d(1),ne=null),Z[15]==="image_file"?X?X.p(Z,ge):(X=Ni(Z),X.c(),X.m(V.parentNode,V)):X&&(X.d(1),X=null)},i(Z){K||(N(s.$$.fragment,Z),N(i.$$.fragment,Z),N(u.$$.fragment,Z),N(le),N(me),N(re),K=!0)},o(Z){M(s.$$.fragment,Z),M(i.$$.fragment,Z),M(u.$$.fragment,Z),M(le),M(me),M(re),K=!1},d(Z){Z&&(w(e),w(_),w(d),w(m),w(S),w(C),w(Q),w(G),w(oe),w(ee),w(V)),ce(s),ce(i),ce(u),ue&&ue.d(),le&&le.d(Z),me&&me.d(Z),re&&re.d(Z),ne&&ne.d(Z),X&&X.d(Z),ae.r(),W=!1,Ge(ie)}}}function lp(l){let e;return{c(){e=q("📥 Load")},m(t,n){$(t,e,n)},d(t){t&&w(e)}}}function np(l){let e;return{c(){e=q("💾 Save")},m(t,n){$(t,e,n)},d(t){t&&w(e)}}}function sp(l){let e;return{c(){e=q("🚫 Exclusions")},m(t,n){$(t,e,n)},d(t){t&&w(e)}}}function bi(l){let e,t;return{c(){e=p("span"),t=q(l[53]),f(e,"class","config-status svelte-1hrwlue")},m(n,s){$(n,e,s),r(e,t)},p(n,s){s[1]&4194304&&F(t,n[53])},d(n){n&&w(e)}}}function ki(l){let e,t,n,s,o,i,a,u,c,_,d,m;return o=new Be({props:{variant:"ghost",size:"sm",$$slots:{default:[op]},$$scope:{ctx:l}}}),o.$on("click",l[66]),{c(){e=p("div"),t=p("div"),n=p("label"),n.textContent="Exclusion Patterns",s=b(),_e(o.$$.fragment),i=b(),a=p("textarea"),u=b(),c=p("small"),c.textContent="One pattern per line. Applied to folder uploads and git clones.",f(n,"class","svelte-1hrwlue"),f(t,"class","exclude-header svelte-1hrwlue"),f(a,"rows","6"),f(a,"placeholder","node_modules/ __pycache__/ *.pyc .git/"),f(a,"class","svelte-1hrwlue"),f(c,"class","svelte-1hrwlue"),f(e,"class","exclude-editor svelte-1hrwlue")},m(h,v){$(h,e,v),r(e,t),r(t,n),r(t,s),fe(o,t,null),r(e,i),r(e,a),te(a,l[55]),r(e,u),r(e,c),_=!0,d||(m=x(a,"input",l[93]),d=!0)},p(h,v){const g={};v[7]&4&&(g.$$scope={dirty:v,ctx:h}),o.$set(g),v[1]&16777216&&te(a,h[55])},i(h){_||(N(o.$$.fragment,h),_=!0)},o(h){M(o.$$.fragment,h),_=!1},d(h){h&&w(e),ce(o),d=!1,m()}}}function op(l){let e;return{c(){e=q("Reset to Defaults")},m(t,n){$(t,e,n)},d(t){t&&w(e)}}}function wi(l){let e,t,n,s,o,i,a,u,c,_,d,m,h,v,g,S,C,k,y,T,D,E,j,L,I,R=l[31]&&$i(),z=l[28].length>0&&Ci(l);d=new Be({props:{size:"sm",$$slots:{default:[rp]},$$scope:{ctx:l}}}),d.$on("click",l[70]);function Y(A,B){return B[0]&268435456&&(S=null),A[28].length===0?up:(S==null&&(S=!A[28].some(ld)),S?ap:qi)}function U(A,B){return B===qi?tp(A):A}let O=Y(l,[-1,-1,-1,-1,-1,-1,-1,-1]),H=O(U(l,O)),P=l[34]&&Ti(l);return{c(){e=p("div"),t=p("div"),n=p("label"),n.textContent="Build Folders",s=b(),o=p("div"),R&&R.c(),i=b(),a=p("input"),u=b(),z&&z.c(),c=b(),_=p("div"),_e(d.$$.fragment),m=b(),h=p("span"),h.textContent="or drag & drop folders here",v=b(),g=p("div"),H.c(),C=b(),k=p("label"),y=p("input"),T=b(),D=p("span"),D.textContent="Remember folder configuration for this service",E=b(),P&&P.c(),f(n,"class","svelte-1hrwlue"),f(a,"type","file"),f(a,"webkitdirectory",""),f(a,"directory",""),a.multiple=!0,Et(a,"display","none"),f(a,"class","svelte-1hrwlue"),f(h,"class","drop-hint svelte-1hrwlue"),f(_,"class","folder-actions svelte-1hrwlue"),f(o,"class","folder-drop-zone svelte-1hrwlue"),we(o,"dragover",l[31]),f(g,"class","code-selection-info svelte-1hrwlue"),we(g,"success",l[28].some(Cr)),we(g,"warning",l[28].length>0&&!l[28].some(yr)),f(y,"type","checkbox"),f(y,"class","svelte-1hrwlue"),f(k,"class","checkbox-label small-check svelte-1hrwlue"),f(t,"class","form-group svelte-1hrwlue"),f(e,"class","source-config svelte-1hrwlue")},m(A,B){$(A,e,B),r(e,t),r(t,n),r(t,s),r(t,o),R&&R.m(o,null),r(o,i),r(o,a),l[99](a),r(o,u),z&&z.m(o,null),r(o,c),r(o,_),fe(d,_,null),r(_,m),r(_,h),r(t,v),r(t,g),H.m(g,null),r(t,C),r(t,k),r(k,y),y.checked=l[30],r(k,T),r(k,D),r(e,E),P&&P.m(e,null),j=!0,L||(I=[x(a,"change",l[71]),x(o,"dragenter",l[72]),x(o,"dragleave",l[73]),x(o,"dragover",td),x(o,"drop",l[74]),x(y,"change",l[102])],L=!0)},p(A,B){A[31]?R||(R=$i(),R.c(),R.m(o,i)):R&&(R.d(1),R=null),A[28].length>0?z?(z.p(A,B),B[0]&268435456&&N(z,1)):(z=Ci(A),z.c(),N(z,1),z.m(o,c)):z&&(qe(),M(z,1,1,()=>{z=null}),je());const J={};B[7]&4&&(J.$$scope={dirty:B,ctx:A}),d.$set(J),(!j||B[1]&1)&&we(o,"dragover",A[31]),O===(O=Y(A,B))&&H?H.p(U(A,O),B):(H.d(1),H=O(U(A,O)),H&&(H.c(),H.m(g,null))),(!j||B[0]&268435456)&&we(g,"success",A[28].some(Cr)),(!j||B[0]&268435456)&&we(g,"warning",A[28].length>0&&!A[28].some(yr)),B[0]&1073741824&&(y.checked=A[30]),A[34]?P?(P.p(A,B),B[1]&8&&N(P,1)):(P=Ti(A),P.c(),N(P,1),P.m(e,null)):P&&(qe(),M(P,1,1,()=>{P=null}),je())},i(A){j||(N(z),N(d.$$.fragment,A),N(P),j=!0)},o(A){M(z),M(d.$$.fragment,A),M(P),j=!1},d(A){A&&w(e),R&&R.d(),l[99](null),z&&z.d(),ce(d),H.d(),P&&P.d(),L=!1,Ge(I)}}}function $i(l){let e;return{c(){e=p("div"),e.innerHTML='<span class="drop-icon svelte-1hrwlue">📂</span> <span>Drop folder here</span>',f(e,"class","drop-overlay svelte-1hrwlue")},m(t,n){$(t,e,n)},d(t){t&&w(e)}}}function Ci(l){let e,t,n=pe(l[28]),s=[];for(let i=0;i<n.length;i+=1)s[i]=Si(ui(l,n,i));const o=i=>M(s[i],1,1,()=>{s[i]=null});return{c(){e=p("div");for(let i=0;i<s.length;i+=1)s[i].c();f(e,"class","folder-list svelte-1hrwlue")},m(i,a){$(i,e,a);for(let u=0;u<s.length;u+=1)s[u]&&s[u].m(e,null);t=!0},p(i,a){if(a[0]&268435456|a[2]&24576){n=pe(i[28]);let u;for(u=0;u<n.length;u+=1){const c=ui(i,n,u);s[u]?(s[u].p(c,a),N(s[u],1)):(s[u]=Si(c),s[u].c(),N(s[u],1),s[u].m(e,null))}for(qe(),u=n.length;u<s.length;u+=1)o(u);je()}},i(i){if(!t){for(let a=0;a<n.length;a+=1)N(s[a]);t=!0}},o(i){s=s.filter(hn);for(let a=0;a<s.length;a+=1)M(s[a]);t=!1},d(i){i&&w(e),Ne(s,i)}}}function ip(l){let e=l[204].isMain?"MAIN":"dependency",t;return{c(){t=q(e)},m(n,s){$(n,t,s)},p(n,s){s[0]&268435456&&e!==(e=n[204].isMain?"MAIN":"dependency")&&F(t,e)},d(n){n&&w(t)}}}function yi(l){let e,t,n;function s(){return l[100](l[206])}return{c(){e=p("button"),e.textContent="⭐",f(e,"type","button"),f(e,"class","set-main-btn svelte-1hrwlue"),f(e,"title","Set as main")},m(o,i){$(o,e,i),t||(n=x(e,"click",s),t=!0)},p(o,i){l=o},d(o){o&&w(e),t=!1,n()}}}function Si(l){let e,t,n=l[204].isMain?"📁":"📂",s,o,i,a=l[204].name+"",u,c,_,d,m,h,v=l[204].fileCount+"",g,S,C,k,y,T,D,E,j;d=new xe({props:{variant:l[204].isMain?"success":"secondary",$$slots:{default:[ip]},$$scope:{ctx:l}}});let L=!l[204].isMain&&yi(l);function I(){return l[101](l[206])}return{c(){e=p("div"),t=p("span"),s=q(n),o=b(),i=p("strong"),u=q(a),c=q("/"),_=b(),_e(d.$$.fragment),m=b(),h=p("span"),g=q(v),S=q(" files"),C=b(),L&&L.c(),k=b(),y=p("button"),y.textContent="✕",T=b(),f(t,"class","folder-icon svelte-1hrwlue"),f(i,"class","svelte-1hrwlue"),f(h,"class","file-count svelte-1hrwlue"),f(y,"type","button"),f(y,"class","remove-btn svelte-1hrwlue"),f(e,"class","folder-item svelte-1hrwlue")},m(R,z){$(R,e,z),r(e,t),r(t,s),r(e,o),r(e,i),r(i,u),r(i,c),r(e,_),fe(d,e,null),r(e,m),r(e,h),r(h,g),r(h,S),r(e,C),L&&L.m(e,null),r(e,k),r(e,y),r(e,T),D=!0,E||(j=x(y,"click",I),E=!0)},p(R,z){l=R,(!D||z[0]&268435456)&&n!==(n=l[204].isMain?"📁":"📂")&&F(s,n),(!D||z[0]&268435456)&&a!==(a=l[204].name+"")&&F(u,a);const Y={};z[0]&268435456&&(Y.variant=l[204].isMain?"success":"secondary"),z[0]&268435456|z[7]&4&&(Y.$$scope={dirty:z,ctx:l}),d.$set(Y),(!D||z[0]&268435456)&&v!==(v=l[204].fileCount+"")&&F(g,v),l[204].isMain?L&&(L.d(1),L=null):L?L.p(l,z):(L=yi(l),L.c(),L.m(e,k))},i(R){D||(N(d.$$.fragment,R),D=!0)},o(R){M(d.$$.fragment,R),D=!1},d(R){R&&w(e),ce(d),L&&L.d(),E=!1,j()}}}function rp(l){let e;return{c(){e=q("➕ Add Folder")},m(t,n){$(t,e,n)},d(t){t&&w(e)}}}function qi(l){let e,t,n=l[207].name+"",s,o,i,a,u=l[208]>0&&ji(l);return{c(){e=q("✓ Main: "),t=p("strong"),s=q(n),o=q("/"),i=b(),u&&u.c(),a=Oe()},m(c,_){$(c,e,_),$(c,t,_),r(t,s),r(t,o),$(c,i,_),u&&u.m(c,_),$(c,a,_)},p(c,_){_[0]&268435456&&n!==(n=c[207].name+"")&&F(s,n),c[208]>0?u?u.p(c,_):(u=ji(c),u.c(),u.m(a.parentNode,a)):u&&(u.d(1),u=null)},d(c){c&&(w(e),w(t),w(i),w(a)),u&&u.d(c)}}}function ap(l){let e;return{c(){e=q("⚠️ No main folder selected. Click ⭐ to set one as main.")},m(t,n){$(t,e,n)},p:be,d(t){t&&w(e)}}}function up(l){let e;return{c(){e=q("No folders selected. Add your main service folder and any dependencies.")},m(t,n){$(t,e,n)},p:be,d(t){t&&w(e)}}}function ji(l){let e,t=l[208]+"",n,s,o=l[208]===1?"y":"ies",i;return{c(){e=q("+ "),n=q(t),s=q(" dependenc"),i=q(o)},m(a,u){$(a,e,u),$(a,n,u),$(a,s,u),$(a,i,u)},p(a,u){u[0]&268435456&&t!==(t=a[208]+"")&&F(n,t),u[0]&268435456&&o!==(o=a[208]===1?"y":"ies")&&F(i,o)},d(a){a&&(w(e),w(n),w(s),w(i))}}}function Ti(l){let e,t,n,s,o,i,a,u,c,_,d,m,h,v,g,S,C,k,y,T,D,E;return o=new xe({props:{variant:l[33]==="from folder"?"success":l[33]==="multi-folder"?"info":"warning",$$slots:{default:[fp]},$$scope:{ctx:l}}}),{c(){e=p("div"),t=p("div"),n=p("label"),s=q(`🐳 Dockerfile
                    `),_e(o.$$.fragment),i=b(),a=p("textarea"),u=b(),c=p("div"),_=p("select"),d=p("option"),d.textContent="FROM...",m=p("option"),m.textContent="python:3.11-slim",h=p("option"),h.textContent="python:3.12-slim",v=p("option"),v.textContent="node:20-alpine",g=p("option"),g.textContent="node:18-alpine",S=p("option"),S.textContent="golang:1.21-alpine",C=p("option"),C.textContent="nginx:alpine",k=b(),y=p("input"),f(n,"class","svelte-1hrwlue"),f(t,"class","dockerfile-header svelte-1hrwlue"),f(a,"rows","8"),f(a,"class","dockerfile-editor svelte-1hrwlue"),f(a,"spellcheck","false"),d.__value="",te(d,d.__value),m.__value="python:3.11-slim",te(m,m.__value),h.__value="python:3.12-slim",te(h,h.__value),v.__value="node:20-alpine",te(v,v.__value),g.__value="node:18-alpine",te(g,g.__value),S.__value="golang:1.21-alpine",te(S,S.__value),C.__value="nginx:alpine",te(C,C.__value),f(_,"class","svelte-1hrwlue"),l[35]===void 0&&Qe(()=>l[104].call(_)),f(y,"type","text"),f(y,"placeholder","CMD (e.g. uvicorn main:app ...)"),f(y,"class","svelte-1hrwlue"),f(c,"class","dockerfile-quick-fields svelte-1hrwlue"),f(e,"class","dockerfile-preview svelte-1hrwlue")},m(j,L){$(j,e,L),r(e,t),r(t,n),r(n,s),fe(o,n,null),r(e,i),r(e,a),te(a,l[32]),r(e,u),r(e,c),r(c,_),r(_,d),r(_,m),r(_,h),r(_,v),r(_,g),r(_,S),r(_,C),Le(_,l[35],!0),r(c,k),r(c,y),te(y,l[36]),T=!0,D||(E=[x(a,"input",l[103]),x(_,"change",l[104]),x(_,"change",l[105]),x(y,"input",l[106]),x(y,"change",l[107])],D=!0)},p(j,L){const I={};L[1]&4&&(I.variant=j[33]==="from folder"?"success":j[33]==="multi-folder"?"info":"warning"),L[1]&4|L[7]&4&&(I.$$scope={dirty:L,ctx:j}),o.$set(I),L[1]&2&&te(a,j[32]),L[1]&16&&Le(_,j[35]),L[1]&32&&y.value!==j[36]&&te(y,j[36])},i(j){T||(N(o.$$.fragment,j),T=!0)},o(j){M(o.$$.fragment,j),T=!1},d(j){j&&w(e),ce(o),D=!1,Ge(E)}}}function fp(l){let e;return{c(){e=q(l[33])},m(t,n){$(t,e,n)},p(t,n){n[1]&4&&F(e,t[33])},d(t){t&&w(e)}}}function Di(l){let e,t,n,s,o,i,a,u,c,_,d,m,h,v,g,S,C,k,y,T,D,E,j,L,I,R,z,Y,U,O,H,P,A,B,J,Q,G,oe,ee=l[21].length>0&&Ei(l);return D=new Be({props:{size:"sm",$$slots:{default:[_p]},$$scope:{ctx:l}}}),D.$on("click",l[112]),j=new Be({props:{variant:"ghost",size:"sm",$$slots:{default:[pp]},$$scope:{ctx:l}}}),j.$on("click",l[113]),{c(){e=p("div"),t=p("div"),n=p("label"),n.textContent="Git Repository URL *",s=b(),o=p("input"),i=b(),a=p("small"),a.textContent="HTTPS URL (SSH not supported)",u=b(),c=p("div"),_=p("label"),_.textContent="Branch",d=b(),m=p("input"),h=b(),v=p("div"),g=p("label"),g.textContent="Folders to Include",S=b(),ee&&ee.c(),C=b(),k=p("div"),y=p("input"),T=b(),_e(D.$$.fragment),E=b(),_e(j.$$.fragment),L=b(),I=p("small"),I.textContent="Leave empty to use entire repo. Add paths for multi-folder builds (main folder contains Dockerfile).",R=b(),z=p("details"),Y=p("summary"),Y.textContent="🔐 Private repository?",U=b(),O=p("div"),H=p("label"),H.textContent="Personal Access Token",P=b(),A=p("input"),B=b(),J=p("small"),J.innerHTML="Needs <code>repo</code> scope for private repos",f(n,"for","git-url"),f(n,"class","svelte-1hrwlue"),f(o,"id","git-url"),f(o,"type","url"),f(o,"placeholder","https://github.com/user/repo"),f(o,"class","svelte-1hrwlue"),f(a,"class","svelte-1hrwlue"),f(t,"class","form-group svelte-1hrwlue"),f(_,"for","git-branch"),f(_,"class","svelte-1hrwlue"),f(m,"id","git-branch"),f(m,"type","text"),f(m,"placeholder","main"),f(m,"class","svelte-1hrwlue"),f(c,"class","form-group svelte-1hrwlue"),f(g,"class","svelte-1hrwlue"),f(y,"type","text"),f(y,"placeholder","e.g. services/my_api"),f(y,"class","svelte-1hrwlue"),f(k,"class","folder-input svelte-1hrwlue"),f(I,"class","svelte-1hrwlue"),f(v,"class","form-group svelte-1hrwlue"),f(Y,"class","svelte-1hrwlue"),f(H,"for","git-token"),f(H,"class","svelte-1hrwlue"),f(A,"id","git-token"),f(A,"type","password"),f(A,"placeholder","ghp_xxxxxxxxxxxx"),f(A,"class","svelte-1hrwlue"),f(J,"class","svelte-1hrwlue"),f(O,"class","form-group svelte-1hrwlue"),f(z,"class","private-repo svelte-1hrwlue"),f(e,"class","source-config svelte-1hrwlue")},m(V,K){$(V,e,K),r(e,t),r(t,n),r(t,s),r(t,o),te(o,l[18]),r(t,i),r(t,a),r(e,u),r(e,c),r(c,_),r(c,d),r(c,m),te(m,l[19]),r(e,h),r(e,v),r(v,g),r(v,S),ee&&ee.m(v,null),r(v,C),r(v,k),r(k,y),te(y,l[22]),r(k,T),fe(D,k,null),r(k,E),fe(j,k,null),r(v,L),r(v,I),r(e,R),r(e,z),r(z,Y),r(z,U),r(z,O),r(O,H),r(O,P),r(O,A),te(A,l[20]),r(O,B),r(O,J),Q=!0,G||(oe=[x(o,"input",l[108]),x(m,"input",l[109]),x(y,"input",l[111]),x(A,"input",l[114])],G=!0)},p(V,K){K[0]&262144&&o.value!==V[18]&&te(o,V[18]),K[0]&524288&&m.value!==V[19]&&te(m,V[19]),V[21].length>0?ee?(ee.p(V,K),K[0]&2097152&&N(ee,1)):(ee=Ei(V),ee.c(),N(ee,1),ee.m(v,C)):ee&&(qe(),M(ee,1,1,()=>{ee=null}),je()),K[0]&4194304&&y.value!==V[22]&&te(y,V[22]);const ae={};K[7]&4&&(ae.$$scope={dirty:K,ctx:V}),D.$set(ae);const W={};K[7]&4&&(W.$$scope={dirty:K,ctx:V}),j.$set(W),K[0]&1048576&&A.value!==V[20]&&te(A,V[20])},i(V){Q||(N(ee),N(D.$$.fragment,V),N(j.$$.fragment,V),Q=!0)},o(V){M(ee),M(D.$$.fragment,V),M(j.$$.fragment,V),Q=!1},d(V){V&&w(e),ee&&ee.d(),ce(D),ce(j),G=!1,Ge(oe)}}}function Ei(l){let e,t,n=pe(l[21]),s=[];for(let i=0;i<n.length;i+=1)s[i]=Li(ai(l,n,i));const o=i=>M(s[i],1,1,()=>{s[i]=null});return{c(){e=p("div");for(let i=0;i<s.length;i+=1)s[i].c();f(e,"class","folder-list svelte-1hrwlue")},m(i,a){$(i,e,a);for(let u=0;u<s.length;u+=1)s[u]&&s[u].m(e,null);t=!0},p(i,a){if(a[0]&2097152|a[2]&131072){n=pe(i[21]);let u;for(u=0;u<n.length;u+=1){const c=ai(i,n,u);s[u]?(s[u].p(c,a),N(s[u],1)):(s[u]=Li(c),s[u].c(),N(s[u],1),s[u].m(e,null))}for(qe(),u=n.length;u<s.length;u+=1)o(u);je()}},i(i){if(!t){for(let a=0;a<n.length;a+=1)N(s[a]);t=!0}},o(i){s=s.filter(hn);for(let a=0;a<s.length;a+=1)M(s[a]);t=!1},d(i){i&&w(e),Ne(s,i)}}}function cp(l){let e=l[204].isMain?"MAIN":"dependency",t;return{c(){t=q(e)},m(n,s){$(n,t,s)},p(n,s){s[0]&2097152&&e!==(e=n[204].isMain?"MAIN":"dependency")&&F(t,e)},d(n){n&&w(t)}}}function Li(l){let e,t,n=l[204].isMain?"📁":"📂",s,o,i,a=l[204].path+"",u,c,_,d,m,h,v,g,S;_=new xe({props:{variant:l[204].isMain?"success":"secondary",$$slots:{default:[cp]},$$scope:{ctx:l}}});function C(){return l[110](l[206])}return{c(){e=p("div"),t=p("span"),s=q(n),o=b(),i=p("strong"),u=q(a),c=b(),_e(_.$$.fragment),d=b(),m=p("button"),m.textContent="✕",h=b(),f(i,"class","svelte-1hrwlue"),f(m,"type","button"),f(m,"class","remove-btn svelte-1hrwlue"),f(e,"class","folder-item svelte-1hrwlue")},m(k,y){$(k,e,y),r(e,t),r(t,s),r(e,o),r(e,i),r(i,u),r(e,c),fe(_,e,null),r(e,d),r(e,m),r(e,h),v=!0,g||(S=x(m,"click",C),g=!0)},p(k,y){l=k,(!v||y[0]&2097152)&&n!==(n=l[204].isMain?"📁":"📂")&&F(s,n),(!v||y[0]&2097152)&&a!==(a=l[204].path+"")&&F(u,a);const T={};y[0]&2097152&&(T.variant=l[204].isMain?"success":"secondary"),y[0]&2097152|y[7]&4&&(T.$$scope={dirty:y,ctx:l}),_.$set(T)},i(k){v||(N(_.$$.fragment,k),v=!0)},o(k){M(_.$$.fragment,k),v=!1},d(k){k&&w(e),ce(_),g=!1,S()}}}function _p(l){let e;return{c(){e=q("+ Main")},m(t,n){$(t,e,n)},d(t){t&&w(e)}}}function pp(l){let e;return{c(){e=q("+ Dep")},m(t,n){$(t,e,n)},d(t){t&&w(e)}}}function Pi(l){let e,t,n,s,o,i,a,u,c;return{c(){e=p("div"),t=p("div"),n=p("label"),n.textContent="Docker Image *",s=b(),o=p("input"),i=b(),a=p("small"),a.textContent="Full image URL from DO Registry or Docker Hub",f(n,"for","image-url"),f(n,"class","svelte-1hrwlue"),f(o,"id","image-url"),f(o,"type","text"),f(o,"placeholder","registry.digitalocean.com/my-registry/app:latest"),f(o,"class","svelte-1hrwlue"),f(a,"class","svelte-1hrwlue"),f(t,"class","form-group svelte-1hrwlue"),f(e,"class","source-config svelte-1hrwlue")},m(_,d){$(_,e,d),r(e,t),r(t,n),r(t,s),r(t,o),te(o,l[23]),r(t,i),r(t,a),u||(c=x(o,"input",l[115]),u=!0)},p(_,d){d[0]&8388608&&o.value!==_[23]&&te(o,_[23])},d(_){_&&w(e),u=!1,c()}}}function Ni(l){let e,t,n,s,o,i,a,u,c,_,d,m,h,v,g,S,C,k,y,T,D,E,j,L,I,R,z,Y,U=l[24]&&Ri(l);return{c(){e=p("div"),t=p("div"),n=p("label"),n.textContent="Docker Image File (.tar) *",s=b(),o=p("input"),i=b(),U&&U.c(),a=b(),u=p("small"),u.innerHTML="Export from Docker with: <code>docker save myimage:latest -o image.tar</code>",c=b(),_=p("div"),d=p("label"),d.textContent="Image Name *",m=b(),h=p("input"),v=b(),g=p("small"),g.textContent="The image name/tag as it appears in the tar file",S=b(),C=p("div"),k=p("div"),y=p("label"),y.textContent="Container Port",T=b(),D=p("input"),E=b(),j=p("div"),L=p("label"),L.textContent="Host Port",I=b(),R=p("input"),f(n,"for","image-file"),f(n,"class","svelte-1hrwlue"),f(o,"id","image-file"),f(o,"type","file"),f(o,"accept",".tar,.tar.gz"),f(o,"class","svelte-1hrwlue"),f(u,"class","svelte-1hrwlue"),f(t,"class","form-group svelte-1hrwlue"),f(d,"for","image-name"),f(d,"class","svelte-1hrwlue"),f(h,"id","image-name"),f(h,"type","text"),f(h,"placeholder","myapp:latest"),f(h,"class","svelte-1hrwlue"),f(g,"class","svelte-1hrwlue"),f(_,"class","form-group svelte-1hrwlue"),f(y,"for","container-port"),f(y,"class","svelte-1hrwlue"),f(D,"id","container-port"),f(D,"type","number"),f(D,"placeholder",l[16]),f(D,"class","svelte-1hrwlue"),f(k,"class","form-group svelte-1hrwlue"),f(L,"for","host-port"),f(L,"class","svelte-1hrwlue"),f(R,"id","host-port"),f(R,"type","number"),f(R,"placeholder",l[16]),f(R,"class","svelte-1hrwlue"),f(j,"class","form-group svelte-1hrwlue"),f(C,"class","form-row svelte-1hrwlue"),f(e,"class","source-config svelte-1hrwlue")},m(O,H){$(O,e,H),r(e,t),r(t,n),r(t,s),r(t,o),r(t,i),U&&U.m(t,null),r(t,a),r(t,u),r(e,c),r(e,_),r(_,d),r(_,m),r(_,h),te(h,l[25]),r(_,v),r(_,g),r(e,S),r(e,C),r(C,k),r(k,y),r(k,T),r(k,D),te(D,l[26]),r(C,E),r(C,j),r(j,L),r(j,I),r(j,R),te(R,l[27]),z||(Y=[x(o,"change",l[80]),x(h,"input",l[116]),x(D,"input",l[117]),x(R,"input",l[118])],z=!0)},p(O,H){O[24]?U?U.p(O,H):(U=Ri(O),U.c(),U.m(t,a)):U&&(U.d(1),U=null),H[0]&33554432&&h.value!==O[25]&&te(h,O[25]),H[0]&65536&&f(D,"placeholder",O[16]),H[0]&67108864&&Kt(D.value)!==O[26]&&te(D,O[26]),H[0]&65536&&f(R,"placeholder",O[16]),H[0]&134217728&&Kt(R.value)!==O[27]&&te(R,O[27])},d(O){O&&w(e),U&&U.d(),z=!1,Ge(Y)}}}function Ri(l){let e,t,n=l[24].name+"",s,o,i=(l[24].size/1024/1024).toFixed(2)+"",a,u;return{c(){e=p("div"),t=q("📦 "),s=q(n),o=q(" ("),a=q(i),u=q(" MB)"),f(e,"class","file-selected svelte-1hrwlue")},m(c,_){$(c,e,_),r(e,t),r(e,s),r(e,o),r(e,a),r(e,u)},p(c,_){_[0]&16777216&&n!==(n=c[24].name+"")&&F(s,n),_[0]&16777216&&i!==(i=(c[24].size/1024/1024).toFixed(2)+"")&&F(a,i)},d(c){c&&w(e)}}}function Ai(l){let e,t,n,s,o,i,a,u;return{c(){e=p("div"),t=p("label"),t.textContent="App Port",n=b(),s=p("input"),o=b(),i=p("small"),i.textContent="Port your app listens on inside the container",f(t,"for","deploy-port"),f(t,"class","svelte-1hrwlue"),f(s,"id","deploy-port"),f(s,"type","number"),f(s,"min","1"),f(s,"max","65535"),f(s,"class","svelte-1hrwlue"),f(i,"class","svelte-1hrwlue"),f(e,"class","form-group svelte-1hrwlue")},m(c,_){$(c,e,_),r(e,t),r(e,n),r(e,s),te(s,l[16]),r(e,o),r(e,i),a||(u=x(s,"input",l[119]),a=!0)},p(c,_){_[0]&65536&&Kt(s.value)!==c[16]&&te(s,c[16])},d(c){c&&w(e),a=!1,u()}}}function Mi(l){let e,t,n,s,o,i,a,u;return{c(){e=p("div"),t=p("label"),t.textContent="Command Override",n=b(),s=p("input"),o=b(),i=p("small"),i.textContent="Override Dockerfile CMD (e.g., different entrypoint for worker vs webservice)",f(t,"for","custom-cmd"),f(t,"class","svelte-1hrwlue"),f(s,"id","custom-cmd"),f(s,"type","text"),f(s,"placeholder","python worker.py"),f(s,"class","svelte-1hrwlue"),f(i,"class","svelte-1hrwlue"),f(e,"class","form-group svelte-1hrwlue")},m(c,_){$(c,e,_),r(e,t),r(e,n),r(e,s),te(s,l[12]),r(e,o),r(e,i),a||(u=x(s,"input",l[120]),a=!0)},p(c,_){_[0]&4096&&s.value!==c[12]&&te(s,c[12])},d(c){c&&w(e),a=!1,u()}}}function zi(l){let e,t,n,s,o,i,a,u,c,_,d,m,h,v,g,S,C;return{c(){e=p("div"),t=p("label"),t.textContent="Cron Schedule *",n=b(),s=p("input"),o=b(),i=p("small"),i.textContent='Standard cron format: minute hour day month weekday (e.g., "0 */6 * * *" = every 6 hours)',a=b(),u=p("div"),c=p("button"),c.textContent="Every min",_=b(),d=p("button"),d.textContent="Hourly",m=b(),h=p("button"),h.textContent="Daily",v=b(),g=p("button"),g.textContent="Weekly",f(t,"for","cron-schedule"),f(t,"class","svelte-1hrwlue"),f(s,"id","cron-schedule"),f(s,"type","text"),f(s,"placeholder","0 * * * *"),s.required=!0,f(s,"class","svelte-1hrwlue"),f(i,"class","svelte-1hrwlue"),f(c,"type","button"),f(c,"class","preset-btn svelte-1hrwlue"),f(d,"type","button"),f(d,"class","preset-btn svelte-1hrwlue"),f(h,"type","button"),f(h,"class","preset-btn svelte-1hrwlue"),f(g,"type","button"),f(g,"class","preset-btn svelte-1hrwlue"),f(u,"class","cron-presets svelte-1hrwlue"),f(e,"class","form-group svelte-1hrwlue")},m(k,y){$(k,e,y),r(e,t),r(e,n),r(e,s),te(s,l[13]),r(e,o),r(e,i),r(e,a),r(e,u),r(u,c),r(u,_),r(u,d),r(u,m),r(u,h),r(u,v),r(u,g),S||(C=[x(s,"input",l[121]),x(c,"click",l[122]),x(d,"click",l[123]),x(h,"click",l[124]),x(g,"click",l[125])],S=!0)},p(k,y){y[0]&8192&&s.value!==k[13]&&te(s,k[13])},d(k){k&&w(e),S=!1,Ge(C)}}}function Oi(l){let e,t,n,s=l[56]?"▼":"▶",o,i,a,u,c=l[17].trim(),_,d,m,h,v=c&&Ii(l),g=l[56]&&Fi(l);return{c(){e=p("div"),t=p("button"),n=p("span"),o=q(s),i=b(),a=p("span"),a.textContent="Environment Variables",u=b(),v&&v.c(),_=b(),g&&g.c(),f(n,"class","toggle-icon svelte-1hrwlue"),f(t,"type","button"),f(t,"class","section-toggle svelte-1hrwlue"),f(e,"class","collapsible-section svelte-1hrwlue"),we(e,"expanded",l[56])},m(S,C){$(S,e,C),r(e,t),r(t,n),r(n,o),r(t,i),r(t,a),r(t,u),v&&v.m(t,null),r(e,_),g&&g.m(e,null),d=!0,m||(h=x(t,"click",l[126]),m=!0)},p(S,C){(!d||C[1]&33554432)&&s!==(s=S[56]?"▼":"▶")&&F(o,s),C[0]&131072&&(c=S[17].trim()),c?v?(v.p(S,C),C[0]&131072&&N(v,1)):(v=Ii(S),v.c(),N(v,1),v.m(t,null)):v&&(qe(),M(v,1,1,()=>{v=null}),je()),S[56]?g?g.p(S,C):(g=Fi(S),g.c(),g.m(e,null)):g&&(g.d(1),g=null),(!d||C[1]&33554432)&&we(e,"expanded",S[56])},i(S){d||(N(v),d=!0)},o(S){M(v),d=!1},d(S){S&&w(e),v&&v.d(),g&&g.d(),m=!1,h()}}}function Ii(l){let e,t;return e=new xe({props:{variant:"info",$$slots:{default:[dp]},$$scope:{ctx:l}}}),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const o={};s[0]&131072|s[7]&4&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function dp(l){let e=l[17].trim().split(`
`).filter(Sr).length+"",t,n;return{c(){t=q(e),n=q(" vars")},m(s,o){$(s,t,o),$(s,n,o)},p(s,o){o[0]&131072&&e!==(e=s[17].trim().split(`
`).filter(Sr).length+"")&&F(t,e)},d(s){s&&(w(t),w(n))}}}function Fi(l){let e,t,n,s,o,i;return{c(){e=p("div"),t=p("textarea"),n=b(),s=p("small"),s.textContent="One per line: KEY=value",f(t,"id","deploy-envvars"),f(t,"rows","3"),f(t,"placeholder","KEY=value ANOTHER_KEY=value"),f(t,"class","svelte-1hrwlue"),f(s,"class","svelte-1hrwlue"),f(e,"class","section-content svelte-1hrwlue")},m(a,u){$(a,e,u),r(e,t),te(t,l[17]),r(e,n),r(e,s),o||(i=x(t,"input",l[127]),o=!0)},p(a,u){u[0]&131072&&te(t,a[17])},d(a){a&&w(e),o=!1,i()}}}function Ui(l){let e,t,n,s=l[57]?"▼":"▶",o,i,a,u,c=l[0]==="service"&&l[51]||Object.values(l[50]).some($r),_,d,m,h,v=c&&Bi(l),g=l[57]&&Hi(l);return{c(){e=p("div"),t=p("button"),n=p("span"),o=q(s),i=b(),a=p("span"),a.textContent="🔧 Service Configuration",u=b(),v&&v.c(),_=b(),g&&g.c(),f(n,"class","toggle-icon svelte-1hrwlue"),f(t,"type","button"),f(t,"class","section-toggle svelte-1hrwlue"),f(e,"class","collapsible-section svelte-1hrwlue"),we(e,"expanded",l[57])},m(S,C){$(S,e,C),r(e,t),r(t,n),r(n,o),r(t,i),r(t,a),r(t,u),v&&v.m(t,null),r(e,_),g&&g.m(e,null),d=!0,m||(h=x(t,"click",l[128]),m=!0)},p(S,C){(!d||C[1]&67108864)&&s!==(s=S[57]?"▼":"▶")&&F(o,s),C[0]&1|C[1]&1572864&&(c=S[0]==="service"&&S[51]||Object.values(S[50]).some($r)),c?v?C[0]&1|C[1]&1572864&&N(v,1):(v=Bi(S),v.c(),N(v,1),v.m(t,null)):v&&(qe(),M(v,1,1,()=>{v=null}),je()),S[57]?g?g.p(S,C):(g=Hi(S),g.c(),g.m(e,null)):g&&(g.d(1),g=null),(!d||C[1]&67108864)&&we(e,"expanded",S[57])},i(S){d||(N(v),d=!0)},o(S){M(v),d=!1},d(S){S&&w(e),v&&v.d(),g&&g.d(),m=!1,h()}}}function Bi(l){let e,t;return e=new xe({props:{variant:"info",$$slots:{default:[mp]},$$scope:{ctx:l}}}),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function mp(l){let e;return{c(){e=q("configured")},m(t,n){$(t,e,n)},d(t){t&&w(e)}}}function Hi(l){let e,t,n,s,o,i,a,u,c,_,d,m,h,v,g,S,C,k,y,T,D=l[48]&&Gi(l),E=l[0]==="service"&&Vi(l);return{c(){e=p("div"),t=p("label"),n=p("input"),s=b(),o=p("span"),o.textContent="Auto-inject service discovery",i=b(),a=p("small"),a.textContent="Injects DATABASE_URL, REDIS_URL, etc. based on dependencies",u=b(),D&&D.c(),c=b(),_=p("div"),d=b(),m=p("label"),h=p("input"),v=b(),g=p("span"),g.textContent="💾 Persist data (mount volume)",S=b(),C=p("small"),C.textContent="Mounts /data volume for databases and stateful services",k=b(),E&&E.c(),f(n,"type","checkbox"),f(n,"class","svelte-1hrwlue"),f(t,"class","checkbox-label svelte-1hrwlue"),f(a,"class","svelte-1hrwlue"),f(_,"class","config-divider svelte-1hrwlue"),f(h,"type","checkbox"),f(h,"class","svelte-1hrwlue"),f(m,"class","checkbox-label svelte-1hrwlue"),f(C,"class","svelte-1hrwlue"),f(e,"class","section-content service-config svelte-1hrwlue")},m(j,L){$(j,e,L),r(e,t),r(t,n),n.checked=l[48],r(t,s),r(t,o),r(e,i),r(e,a),r(e,u),D&&D.m(e,null),r(e,c),r(e,_),r(e,d),r(e,m),r(m,h),h.checked=l[49],r(m,v),r(m,g),r(e,S),r(e,C),r(e,k),E&&E.m(e,null),y||(T=[x(n,"change",l[129]),x(h,"change",l[134])],y=!0)},p(j,L){L[1]&131072&&(n.checked=j[48]),j[48]?D?D.p(j,L):(D=Gi(j),D.c(),D.m(e,c)):D&&(D.d(1),D=null),L[1]&262144&&(h.checked=j[49]),j[0]==="service"?E?E.p(j,L):(E=Vi(j),E.c(),E.m(e,null)):E&&(E.d(1),E=null)},d(j){j&&w(e),D&&D.d(),E&&E.d(),y=!1,Ge(T)}}}function Gi(l){let e,t,n,s,o,i,a,u,c,_,d,m,h,v,g,S,C,k,y,T,D;return{c(){e=p("div"),t=p("label"),t.textContent="Dependencies:",n=b(),s=p("div"),o=p("label"),i=p("input"),a=q(`
                      🐘 PostgreSQL`),u=b(),c=p("label"),_=p("input"),d=q(`
                      ⚡ Redis`),m=b(),h=p("label"),v=p("input"),g=q(`
                      🐬 MySQL`),S=b(),C=p("label"),k=p("input"),y=q(`
                      🍃 MongoDB`),f(i,"type","checkbox"),f(i,"class","svelte-1hrwlue"),f(o,"class","dep-item svelte-1hrwlue"),f(_,"type","checkbox"),f(_,"class","svelte-1hrwlue"),f(c,"class","dep-item svelte-1hrwlue"),f(v,"type","checkbox"),f(v,"class","svelte-1hrwlue"),f(h,"class","dep-item svelte-1hrwlue"),f(k,"type","checkbox"),f(k,"class","svelte-1hrwlue"),f(C,"class","dep-item svelte-1hrwlue"),f(s,"class","dep-list svelte-1hrwlue"),f(e,"class","dependencies svelte-1hrwlue")},m(E,j){$(E,e,j),r(e,t),r(e,n),r(e,s),r(s,o),r(o,i),i.checked=l[50].postgres,r(o,a),r(s,u),r(s,c),r(c,_),_.checked=l[50].redis,r(c,d),r(s,m),r(s,h),r(h,v),v.checked=l[50].mysql,r(h,g),r(s,S),r(s,C),r(C,k),k.checked=l[50].mongo,r(C,y),T||(D=[x(i,"change",l[130]),x(_,"change",l[131]),x(v,"change",l[132]),x(k,"change",l[133])],T=!0)},p(E,j){j[1]&524288&&(i.checked=E[50].postgres),j[1]&524288&&(_.checked=E[50].redis),j[1]&524288&&(v.checked=E[50].mysql),j[1]&524288&&(k.checked=E[50].mongo)},d(E){E&&w(e),T=!1,Ge(D)}}}function Vi(l){let e,t,n,s,o,i,a,u,c,_,d,m,h=l[51]&&Wi(l);return{c(){e=p("div"),t=b(),n=p("label"),s=p("input"),o=b(),i=p("span"),i.textContent="🌐 Setup domain (Cloudflare)",a=b(),u=p("small"),u.textContent="Auto-provision subdomain with SSL via Cloudflare",c=b(),h&&h.c(),_=Oe(),f(e,"class","config-divider svelte-1hrwlue"),f(s,"type","checkbox"),f(s,"class","svelte-1hrwlue"),f(n,"class","checkbox-label svelte-1hrwlue"),f(u,"class","svelte-1hrwlue")},m(v,g){$(v,e,g),$(v,t,g),$(v,n,g),r(n,s),s.checked=l[51],r(n,o),r(n,i),$(v,a,g),$(v,u,g),$(v,c,g),h&&h.m(v,g),$(v,_,g),d||(m=x(s,"change",l[135]),d=!0)},p(v,g){g[1]&1048576&&(s.checked=v[51]),v[51]?h?h.p(v,g):(h=Wi(v),h.c(),h.m(_.parentNode,_)):h&&(h.d(1),h=null)},d(v){v&&(w(e),w(t),w(n),w(a),w(u),w(c),w(_)),h&&h.d(v),d=!1,m()}}}function Wi(l){let e,t,n,s,o,i=(l[59]||"app-project-env.domain.com")+"",a,u,c,_,d,m,h,v,g,S,C,k,y,T,D;return{c(){e=p("div"),t=p("div"),n=p("label"),n.textContent="Domain Preview:",s=b(),o=p("code"),a=q(i),u=b(),c=p("div"),_=p("label"),_.textContent="Base Domain",d=b(),m=p("input"),h=b(),v=p("div"),g=p("label"),g.innerHTML='Custom Aliases <small class="svelte-1hrwlue">(optional)</small>',S=b(),C=p("input"),k=b(),y=p("small"),y.textContent="Comma-separated custom domains (requires DNS setup)",f(n,"class","svelte-1hrwlue"),f(o,"class","svelte-1hrwlue"),f(t,"class","domain-preview svelte-1hrwlue"),f(_,"for","base-domain"),f(_,"class","svelte-1hrwlue"),f(m,"id","base-domain"),f(m,"type","text"),f(m,"placeholder","example.com"),f(m,"class","svelte-1hrwlue"),f(c,"class","form-group svelte-1hrwlue"),f(g,"for","domain-aliases"),f(g,"class","svelte-1hrwlue"),f(C,"id","domain-aliases"),f(C,"type","text"),f(C,"placeholder","api.myclient.com, app.example.com"),f(C,"class","svelte-1hrwlue"),f(y,"class","svelte-1hrwlue"),f(v,"class","form-group svelte-1hrwlue"),f(e,"class","domain-config svelte-1hrwlue")},m(E,j){$(E,e,j),r(e,t),r(t,n),r(t,s),r(t,o),r(o,a),r(e,u),r(e,c),r(c,_),r(c,d),r(c,m),te(m,l[10]),r(e,h),r(e,v),r(v,g),r(v,S),r(v,C),te(C,l[52]),r(v,k),r(v,y),T||(D=[x(m,"input",l[136]),x(C,"input",l[137])],T=!0)},p(E,j){j[1]&268435456&&i!==(i=(E[59]||"app-project-env.domain.com")+"")&&F(a,i),j[0]&1024&&m.value!==E[10]&&te(m,E[10]),j[1]&2097152&&C.value!==E[52]&&te(C,E[52])},d(E){E&&w(e),T=!1,Ge(D)}}}function vp(l){let e,t;return e=new xe({props:{variant:"info",$$slots:{default:[gp]},$$scope:{ctx:l}}}),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const o={};s[0]&256|s[7]&4&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function hp(l){let e,t;return e=new xe({props:{variant:"info",$$slots:{default:[bp]},$$scope:{ctx:l}}}),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const o={};s[0]&256|s[7]&4&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function gp(l){let e=l[8].size+"",t,n;return{c(){t=q(e),n=q(" selected")},m(s,o){$(s,t,o),$(s,n,o)},p(s,o){o[0]&256&&e!==(e=s[8].size+"")&&F(t,e)},d(s){s&&(w(t),w(n))}}}function bp(l){let e=l[8].size===1?"1 selected":"select 1",t;return{c(){t=q(e)},m(n,s){$(n,t,s)},p(n,s){s[0]&256&&e!==(e=n[8].size===1?"1 selected":"select 1")&&F(t,e)},d(n){n&&w(t)}}}function Ji(l){let e,t,n,s,o;return t=new Be({props:{variant:"ghost",size:"sm",$$slots:{default:[kp]},$$scope:{ctx:l}}}),t.$on("click",l[138]),s=new Be({props:{variant:"ghost",size:"sm",$$slots:{default:[wp]},$$scope:{ctx:l}}}),s.$on("click",l[139]),{c(){e=p("div"),_e(t.$$.fragment),n=b(),_e(s.$$.fragment),f(e,"class","server-actions svelte-1hrwlue")},m(i,a){$(i,e,a),fe(t,e,null),r(e,n),fe(s,e,null),o=!0},p(i,a){const u={};a[7]&4&&(u.$$scope={dirty:a,ctx:i}),t.$set(u);const c={};a[7]&4&&(c.$$scope={dirty:a,ctx:i}),s.$set(c)},i(i){o||(N(t.$$.fragment,i),N(s.$$.fragment,i),o=!0)},o(i){M(t.$$.fragment,i),M(s.$$.fragment,i),o=!1},d(i){i&&w(e),ce(t),ce(s)}}}function kp(l){let e;return{c(){e=q("✓ All")},m(t,n){$(t,e,n)},d(t){t&&w(e)}}}function wp(l){let e;return{c(){e=q("✕ None")},m(t,n){$(t,e,n)},d(t){t&&w(e)}}}function $p(l){let e,t,n,s;const o=[Sp,yp],i=[];function a(u,c){return!u[40]||u[40].length===0?0:1}return t=a(l),n=i[t]=o[t](l),{c(){e=p("div"),n.c(),f(e,"class","server-list svelte-1hrwlue")},m(u,c){$(u,e,c),i[t].m(e,null),s=!0},p(u,c){let _=t;t=a(u),t===_?i[t].p(u,c):(qe(),M(i[_],1,1,()=>{i[_]=null}),je(),n=i[t],n?n.p(u,c):(n=i[t]=o[t](u),n.c()),N(n,1),n.m(e,null))},i(u){s||(N(n),s=!0)},o(u){M(n),s=!1},d(u){u&&w(e),i[t].d()}}}function Cp(l){let e,t,n,s,o,i;function a(h,v){return h[0]==="stateful"?Tp:jp}let u=a(l),c=u(l);const _=[Ep,Dp],d=[];function m(h,v){return!h[40]||h[40].length===0?0:1}return s=m(l),o=d[s]=_[s](l),{c(){e=p("div"),t=p("small"),c.c(),n=b(),o.c(),f(t,"class","select-hint svelte-1hrwlue"),f(e,"class","server-list single-select svelte-1hrwlue")},m(h,v){$(h,e,v),r(e,t),c.m(t,null),r(e,n),d[s].m(e,null),i=!0},p(h,v){u!==(u=a(h))&&(c.d(1),c=u(h),c&&(c.c(),c.m(t,null)));let g=s;s=m(h),s===g?d[s].p(h,v):(qe(),M(d[g],1,1,()=>{d[g]=null}),je(),o=d[s],o?o.p(h,v):(o=d[s]=_[s](h),o.c()),N(o,1),o.m(e,null))},i(h){i||(N(o),i=!0)},o(h){M(o),i=!1},d(h){h&&w(e),c.d(),d[s].d()}}}function yp(l){let e,t,n=pe(l[40]),s=[];for(let i=0;i<n.length;i+=1)s[i]=Qi(ii(l,n,i));const o=i=>M(s[i],1,1,()=>{s[i]=null});return{c(){for(let i=0;i<s.length;i+=1)s[i].c();e=Oe()},m(i,a){for(let u=0;u<s.length;u+=1)s[u]&&s[u].m(i,a);$(i,e,a),t=!0},p(i,a){if(a[0]&256|a[1]&512|a[2]&32){n=pe(i[40]);let u;for(u=0;u<n.length;u+=1){const c=ii(i,n,u);s[u]?(s[u].p(c,a),N(s[u],1)):(s[u]=Qi(c),s[u].c(),N(s[u],1),s[u].m(e.parentNode,e))}for(qe(),u=n.length;u<s.length;u+=1)o(u);je()}},i(i){if(!t){for(let a=0;a<n.length;a+=1)N(s[a]);t=!0}},o(i){s=s.filter(hn);for(let a=0;a<s.length;a+=1)M(s[a]);t=!1},d(i){i&&w(e),Ne(s,i)}}}function Sp(l){let e,t,n=(l[7]||"any region")+"",s;return{c(){e=p("div"),t=q("No servers in "),s=q(n),f(e,"class","empty svelte-1hrwlue")},m(o,i){$(o,e,i),r(e,t),r(e,s)},p(o,i){i[0]&128&&n!==(n=(o[7]||"any region")+"")&&F(s,n)},i:be,o:be,d(o){o&&w(e)}}}function Ki(l){let e,t,n,s,o,i=(l[179].name||"unnamed")+"",a,u,c,_=l[199]+"",d,m,h,v,g,S;function C(){return l[141](l[199])}let k=l[179].project&&Yi(l);return{c(){e=p("label"),t=p("input"),s=b(),o=p("span"),a=q(i),u=b(),c=p("code"),d=q(_),m=b(),k&&k.c(),h=b(),f(t,"type","checkbox"),t.checked=n=l[8].has(l[199]),f(t,"class","svelte-1hrwlue"),f(o,"class","server-name svelte-1hrwlue"),f(c,"class","server-ip svelte-1hrwlue"),f(e,"class","server-item svelte-1hrwlue"),we(e,"selected",l[8].has(l[199]))},m(y,T){$(y,e,T),r(e,t),r(e,s),r(e,o),r(o,a),r(e,u),r(e,c),r(c,d),r(e,m),k&&k.m(e,null),r(e,h),v=!0,g||(S=x(t,"change",C),g=!0)},p(y,T){l=y,(!v||T[0]&256|T[1]&512&&n!==(n=l[8].has(l[199])))&&(t.checked=n),(!v||T[1]&512)&&i!==(i=(l[179].name||"unnamed")+"")&&F(a,i),(!v||T[1]&512)&&_!==(_=l[199]+"")&&F(d,_),l[179].project?k?(k.p(l,T),T[1]&512&&N(k,1)):(k=Yi(l),k.c(),N(k,1),k.m(e,h)):k&&(qe(),M(k,1,1,()=>{k=null}),je()),(!v||T[0]&256|T[1]&512)&&we(e,"selected",l[8].has(l[199]))},i(y){v||(N(k),v=!0)},o(y){M(k),v=!1},d(y){y&&w(e),k&&k.d(),g=!1,S()}}}function Yi(l){let e,t;return e=new xe({props:{variant:"info",$$slots:{default:[qp]},$$scope:{ctx:l}}}),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const o={};s[1]&512|s[7]&4&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function qp(l){let e=l[179].project+"",t;return{c(){t=q(e)},m(n,s){$(n,t,s)},p(n,s){s[1]&512&&e!==(e=n[179].project+"")&&F(t,e)},d(n){n&&w(t)}}}function Qi(l){let e,t,n=l[199]&&Ki(l);return{c(){n&&n.c(),e=Oe()},m(s,o){n&&n.m(s,o),$(s,e,o),t=!0},p(s,o){s[199]?n?(n.p(s,o),o[1]&512&&N(n,1)):(n=Ki(s),n.c(),N(n,1),n.m(e.parentNode,e)):n&&(qe(),M(n,1,1,()=>{n=null}),je())},i(s){t||(N(n),t=!0)},o(s){M(n),t=!1},d(s){s&&w(e),n&&n.d(s)}}}function jp(l){let e;return{c(){e=q("ℹ️ Scheduled jobs run on one server to avoid duplicate execution.")},m(t,n){$(t,e,n)},d(t){t&&w(e)}}}function Tp(l){let e;return{c(){e=q("ℹ️ Stateful services run on a single server. For replication, deploy multiple named services.")},m(t,n){$(t,e,n)},d(t){t&&w(e)}}}function Dp(l){let e,t,n=pe(l[40]),s=[];for(let i=0;i<n.length;i+=1)s[i]=xi(ri(l,n,i));const o=i=>M(s[i],1,1,()=>{s[i]=null});return{c(){for(let i=0;i<s.length;i+=1)s[i].c();e=Oe()},m(i,a){for(let u=0;u<s.length;u+=1)s[u]&&s[u].m(i,a);$(i,e,a),t=!0},p(i,a){if(a[0]&256|a[1]&512|a[2]&128){n=pe(i[40]);let u;for(u=0;u<n.length;u+=1){const c=ri(i,n,u);s[u]?(s[u].p(c,a),N(s[u],1)):(s[u]=xi(c),s[u].c(),N(s[u],1),s[u].m(e.parentNode,e))}for(qe(),u=n.length;u<s.length;u+=1)o(u);je()}},i(i){if(!t){for(let a=0;a<n.length;a+=1)N(s[a]);t=!0}},o(i){s=s.filter(hn);for(let a=0;a<s.length;a+=1)M(s[a]);t=!1},d(i){i&&w(e),Ne(s,i)}}}function Ep(l){let e,t,n=(l[7]||"any region")+"",s;return{c(){e=p("div"),t=q("No servers in "),s=q(n),f(e,"class","empty svelte-1hrwlue")},m(o,i){$(o,e,i),r(e,t),r(e,s)},p(o,i){i[0]&128&&n!==(n=(o[7]||"any region")+"")&&F(s,n)},i:be,o:be,d(o){o&&w(e)}}}function Zi(l){let e,t,n,s,o,i=(l[179].name||"unnamed")+"",a,u,c,_=l[199]+"",d,m,h,v,g,S;function C(){return l[140](l[199])}let k=l[179].project&&Xi(l);return{c(){e=p("label"),t=p("input"),s=b(),o=p("span"),a=q(i),u=b(),c=p("code"),d=q(_),m=b(),k&&k.c(),h=b(),f(t,"type","radio"),f(t,"name","single-server"),t.checked=n=l[8].has(l[199]),f(t,"class","svelte-1hrwlue"),f(o,"class","server-name svelte-1hrwlue"),f(c,"class","server-ip svelte-1hrwlue"),f(e,"class","server-item svelte-1hrwlue"),we(e,"selected",l[8].has(l[199]))},m(y,T){$(y,e,T),r(e,t),r(e,s),r(e,o),r(o,a),r(e,u),r(e,c),r(c,d),r(e,m),k&&k.m(e,null),r(e,h),v=!0,g||(S=x(t,"change",C),g=!0)},p(y,T){l=y,(!v||T[0]&256|T[1]&512&&n!==(n=l[8].has(l[199])))&&(t.checked=n),(!v||T[1]&512)&&i!==(i=(l[179].name||"unnamed")+"")&&F(a,i),(!v||T[1]&512)&&_!==(_=l[199]+"")&&F(d,_),l[179].project?k?(k.p(l,T),T[1]&512&&N(k,1)):(k=Xi(l),k.c(),N(k,1),k.m(e,h)):k&&(qe(),M(k,1,1,()=>{k=null}),je()),(!v||T[0]&256|T[1]&512)&&we(e,"selected",l[8].has(l[199]))},i(y){v||(N(k),v=!0)},o(y){M(k),v=!1},d(y){y&&w(e),k&&k.d(),g=!1,S()}}}function Xi(l){let e,t;return e=new xe({props:{variant:"info",$$slots:{default:[Lp]},$$scope:{ctx:l}}}),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const o={};s[1]&512|s[7]&4&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function Lp(l){let e=l[179].project+"",t;return{c(){t=q(e)},m(n,s){$(n,t,s)},p(n,s){s[1]&512&&e!==(e=n[179].project+"")&&F(t,e)},d(n){n&&w(t)}}}function xi(l){let e,t,n=l[199]&&Zi(l);return{c(){n&&n.c(),e=Oe()},m(s,o){n&&n.m(s,o),$(s,e,o),t=!0},p(s,o){s[199]?n?(n.p(s,o),o[1]&512&&N(n,1)):(n=Zi(s),n.c(),N(n,1),n.m(e.parentNode,e)):n&&(qe(),M(n,1,1,()=>{n=null}),je())},i(s){t||(N(n),t=!0)},o(s){M(n),t=!1},d(s){s&&w(e),n&&n.d(s)}}}function er(l){let e,t;return e=new xe({props:{variant:"warning",$$slots:{default:[Pp]},$$scope:{ctx:l}}}),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const o={};s[0]&512|s[7]&4&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function Pp(l){let e,t;return{c(){e=q(l[9]),t=q(" new")},m(n,s){$(n,e,s),$(n,t,s)},p(n,s){s[0]&512&&F(e,n[9])},d(n){n&&(w(e),w(t))}}}function tr(l){let e,t,n,s,o,i,a,u,c,_,d,m,h,v,g,S,C,k,y,T,D,E,j=l[0]==="service"||l[0]==="worker"?"s":"",L,I,R,z,Y,U,O=l[9]>0&&lr(),H=pe(l[11]||[]),P=[];for(let K=0;K<H.length;K+=1)P[K]=nr(oi(l,H,K));let A=pe(l[38]||[]),B=[];for(let K=0;K<A.length;K+=1)B[K]=sr(si(l,A,K));let J=pe(l[39]||[]),Q=[];for(let K=0;K<J.length;K+=1)Q[K]=or(ni(l,J,K));function G(K,ae){return K[0]==="stateful"||K[0]==="scheduled"?Rp:Np}let oe=G(l),ee=oe(l),V=l[9]>0&&!l[6]&&ir();return{c(){e=p("div"),t=p("div"),n=p("div"),s=p("label"),o=q("Snapshot "),O&&O.c(),i=b(),a=p("select"),u=p("option"),u.textContent="Select snapshot...";for(let K=0;K<P.length;K+=1)P[K].c();c=b(),_=p("div"),d=p("label"),d.textContent="Region",m=b(),h=p("select");for(let K=0;K<B.length;K+=1)B[K].c();v=b(),g=p("div"),S=p("label"),S.textContent="Size",C=b(),k=p("select");for(let K=0;K<Q.length;K+=1)Q[K].c();y=b(),T=p("div"),D=p("span"),E=q("New server"),L=q(j),I=q(" to provision:"),R=b(),ee.c(),z=b(),V&&V.c(),f(s,"for","snapshot-select"),f(s,"class","svelte-1hrwlue"),u.__value="",te(u,u.__value),f(a,"id","snapshot-select"),f(a,"class","svelte-1hrwlue"),l[6]===void 0&&Qe(()=>l[143].call(a)),f(n,"class","form-group svelte-1hrwlue"),f(d,"for","region-select"),f(d,"class","svelte-1hrwlue"),f(h,"id","region-select"),f(h,"class","svelte-1hrwlue"),l[7]===void 0&&Qe(()=>l[144].call(h)),f(_,"class","form-group svelte-1hrwlue"),f(S,"for","size-select"),f(S,"class","svelte-1hrwlue"),f(k,"id","size-select"),f(k,"class","svelte-1hrwlue"),l[37]===void 0&&Qe(()=>l[145].call(k)),f(g,"class","form-group svelte-1hrwlue"),f(t,"class","form-row three-col svelte-1hrwlue"),f(T,"class","new-servers svelte-1hrwlue"),f(e,"class","section-content provisioning-config svelte-1hrwlue")},m(K,ae){$(K,e,ae),r(e,t),r(t,n),r(n,s),r(s,o),O&&O.m(s,null),r(n,i),r(n,a),r(a,u);for(let W=0;W<P.length;W+=1)P[W]&&P[W].m(a,null);Le(a,l[6],!0),r(t,c),r(t,_),r(_,d),r(_,m),r(_,h);for(let W=0;W<B.length;W+=1)B[W]&&B[W].m(h,null);Le(h,l[7],!0),r(t,v),r(t,g),r(g,S),r(g,C),r(g,k);for(let W=0;W<Q.length;W+=1)Q[W]&&Q[W].m(k,null);Le(k,l[37],!0),r(e,y),r(e,T),r(T,D),r(D,E),r(D,L),r(D,I),r(T,R),ee.m(T,null),r(T,z),V&&V.m(T,null),Y||(U=[x(a,"change",l[143]),x(h,"change",l[144]),x(k,"change",l[145])],Y=!0)},p(K,ae){if(K[9]>0?O||(O=lr(),O.c(),O.m(s,null)):O&&(O.d(1),O=null),ae[0]&2048){H=pe(K[11]||[]);let W;for(W=0;W<H.length;W+=1){const ie=oi(K,H,W);P[W]?P[W].p(ie,ae):(P[W]=nr(ie),P[W].c(),P[W].m(a,null))}for(;W<P.length;W+=1)P[W].d(1);P.length=H.length}if(ae[0]&2112&&Le(a,K[6]),ae[1]&128){A=pe(K[38]||[]);let W;for(W=0;W<A.length;W+=1){const ie=si(K,A,W);B[W]?B[W].p(ie,ae):(B[W]=sr(ie),B[W].c(),B[W].m(h,null))}for(;W<B.length;W+=1)B[W].d(1);B.length=A.length}if(ae[0]&128|ae[1]&128&&Le(h,K[7]),ae[1]&256){J=pe(K[39]||[]);let W;for(W=0;W<J.length;W+=1){const ie=ni(K,J,W);Q[W]?Q[W].p(ie,ae):(Q[W]=or(ie),Q[W].c(),Q[W].m(k,null))}for(;W<Q.length;W+=1)Q[W].d(1);Q.length=J.length}ae[1]&320&&Le(k,K[37]),ae[0]&1&&j!==(j=K[0]==="service"||K[0]==="worker"?"s":"")&&F(L,j),oe===(oe=G(K))&&ee?ee.p(K,ae):(ee.d(1),ee=oe(K),ee&&(ee.c(),ee.m(T,z))),K[9]>0&&!K[6]?V||(V=ir(),V.c(),V.m(T,null)):V&&(V.d(1),V=null)},d(K){K&&w(e),O&&O.d(),Ne(P,K),Ne(B,K),Ne(Q,K),ee.d(),V&&V.d(),Y=!1,Ge(U)}}}function lr(l){let e;return{c(){e=q("*")},m(t,n){$(t,e,n)},d(t){t&&w(e)}}}function nr(l){let e,t=l[196].name+"",n,s;return{c(){e=p("option"),n=q(t),e.__value=s=l[196].id,te(e,e.__value)},m(o,i){$(o,e,i),r(e,n)},p(o,i){i[0]&2048&&t!==(t=o[196].name+"")&&F(n,t),i[0]&2048&&s!==(s=o[196].id)&&(e.__value=s,te(e,e.__value))},d(o){o&&w(e)}}}function sr(l){let e,t=(l[193].name||l[193].slug)+"",n,s;return{c(){e=p("option"),n=q(t),e.__value=s=l[193].slug,te(e,e.__value)},m(o,i){$(o,e,i),r(e,n)},p(o,i){i[1]&128&&t!==(t=(o[193].name||o[193].slug)+"")&&F(n,t),i[1]&128&&s!==(s=o[193].slug)&&(e.__value=s,te(e,e.__value))},d(o){o&&w(e)}}}function or(l){let e,t=(l[190].description||l[190].slug)+"",n,s;return{c(){e=p("option"),n=q(t),e.__value=s=l[190].slug,te(e,e.__value)},m(o,i){$(o,e,i),r(e,n)},p(o,i){i[1]&256&&t!==(t=(o[190].description||o[190].slug)+"")&&F(n,t),i[1]&256&&s!==(s=o[190].slug)&&(e.__value=s,te(e,e.__value))},d(o){o&&w(e)}}}function Np(l){let e,t,n,s,o,i,a,u;return{c(){e=p("div"),t=p("button"),t.textContent="−",n=b(),s=p("input"),o=b(),i=p("button"),i.textContent="+",f(t,"type","button"),f(t,"class","svelte-1hrwlue"),f(s,"type","number"),f(s,"min","0"),f(s,"max","10"),f(s,"class","svelte-1hrwlue"),f(i,"type","button"),f(i,"class","svelte-1hrwlue"),f(e,"class","number-spinner svelte-1hrwlue")},m(c,_){$(c,e,_),r(e,t),r(e,n),r(e,s),te(s,l[9]),r(e,o),r(e,i),a||(u=[x(t,"click",l[147]),x(s,"input",l[148]),x(i,"click",l[149])],a=!0)},p(c,_){_[0]&512&&Kt(s.value)!==c[9]&&te(s,c[9])},d(c){c&&w(e),a=!1,Ge(u)}}}function Rp(l){let e,t,n,s,o,i,a;return{c(){e=p("label"),t=p("input"),s=b(),o=p("span"),o.textContent="Provision 1 new server",f(t,"type","checkbox"),t.checked=n=l[9]===1,f(t,"class","svelte-1hrwlue"),f(e,"class","checkbox-label svelte-1hrwlue")},m(u,c){$(u,e,c),r(e,t),r(e,s),r(e,o),i||(a=x(t,"change",l[146]),i=!0)},p(u,c){c[0]&512&&n!==(n=u[9]===1)&&(t.checked=n)},d(u){u&&w(e),i=!1,a()}}}function ir(l){let e;return{c(){e=p("small"),e.textContent="⚠️ Select a snapshot for new servers",f(e,"class","warning svelte-1hrwlue")},m(t,n){$(t,e,n)},d(t){t&&w(e)}}}function Ap(l){let e;return{c(){e=q("🚀 Deploy")},m(t,n){$(t,e,n)},d(t){t&&w(e)}}}function Mp(l){let e;return{c(){e=q("Deploying...")},m(t,n){$(t,e,n)},d(t){t&&w(e)}}}function zp(l){let e;function t(o,i){return o[41]?Mp:Ap}let n=t(l),s=n(l);return{c(){s.c(),e=Oe()},m(o,i){s.m(o,i),$(o,e,i)},p(o,i){n!==(n=t(o))&&(s.d(1),s=n(o),s&&(s.c(),s.m(e.parentNode,e)))},d(o){o&&w(e),s.d(o)}}}function Op(l){let e,t,n,s,o,i,a,u,c,_,d,m,h,v,g,S,C,k,y,T,D,E,j,L,I,R,z,Y,U,O,H,P,A,B=l[0]==="service"||l[0]==="worker"?"s":"",J,Q,G,oe,ee,V,K,ae,W,ie,ue,le,me=l[58]?"▼":"▶",re,ne,X,Z,ge,$e,We,ct,bt,rt,Ee=pe(l[60]),Ie=[];for(let he=0;he<Ee.length;he+=1)Ie[he]=pi(_i(l,Ee,he));let ve=l[0]==="stateful"&&di(l),ze=pe(l[62]),Me=[];for(let he=0;he<ze.length;he+=1)Me[he]=mi(ci(l,ze,he));let Re=l[0]==="stateful"&&vi(l),Ue=l[0]!=="stateful"&&gi(l),et=l[0]==="service"&&Ai(l),lt=(l[0]==="worker"||l[0]==="scheduled")&&Mi(l),ot=l[0]==="scheduled"&&zi(l),Je=l[0]!=="stateful"&&Oi(l),it=l[0]!=="stateful"&&Ui(l);const St=[hp,vp],Tt=[];function Yt(he,Pe){return he[0]==="stateful"||he[0]==="scheduled"?0:1}G=Yt(l),oe=Tt[G]=St[G](l);let tt=(l[0]==="service"||l[0]==="worker")&&Ji(l);const Ot=[Cp,$p],Te=[];function Ke(he,Pe){return he[0]==="stateful"||he[0]==="scheduled"?0:1}K=Ke(l),ae=Te[K]=Ot[K](l);let Ye=l[9]>0&&er(l),at=l[58]&&tr(l);return We=new Be({props:{variant:"primary",type:"submit",disabled:l[41],$$slots:{default:[zp]},$$scope:{ctx:l}}}),{c(){e=p("form"),t=p("div");for(let he=0;he<Ie.length;he+=1)Ie[he].c();n=b(),s=p("div"),o=p("div"),i=p("label"),i.textContent="Project *",a=b(),u=p("input"),c=b(),_=p("div"),d=p("label"),d.textContent="Service Name *",m=b(),h=p("input"),g=b(),ve&&ve.c(),S=b(),C=p("div"),k=p("label"),k.textContent="Environment",y=b(),T=p("select");for(let he=0;he<Me.length;he+=1)Me[he].c();D=b(),Re&&Re.c(),E=b(),Ue&&Ue.c(),j=b(),et&&et.c(),L=b(),lt&&lt.c(),I=b(),ot&&ot.c(),R=b(),Je&&Je.c(),z=b(),it&&it.c(),Y=b(),U=p("div"),O=p("div"),H=p("div"),P=p("span"),A=q("🖥️ Server"),J=q(B),Q=b(),oe.c(),ee=b(),tt&&tt.c(),V=b(),ae.c(),W=b(),ie=p("div"),ue=p("button"),le=p("span"),re=q(me),ne=b(),X=p("span"),X.textContent="➕ New Server Provisioning",Z=b(),Ye&&Ye.c(),ge=b(),at&&at.c(),$e=b(),_e(We.$$.fragment),f(t,"class","deploy-type-selector svelte-1hrwlue"),f(i,"for","deploy-project"),f(i,"class","svelte-1hrwlue"),f(u,"id","deploy-project"),f(u,"type","text"),f(u,"placeholder","my-project"),u.required=!0,f(u,"pattern","[-a-z0-9]*"),f(u,"class","svelte-1hrwlue"),f(o,"class","form-group svelte-1hrwlue"),f(d,"for","deploy-name"),f(d,"class","svelte-1hrwlue"),f(h,"id","deploy-name"),f(h,"type","text"),f(h,"placeholder",v=l[0]==="stateful"?l[1]:"api"),h.required=!0,f(h,"pattern","[-a-z0-9]+"),f(h,"title","Lowercase letters, numbers, hyphens only"),f(h,"class","svelte-1hrwlue"),f(_,"class","form-group svelte-1hrwlue"),f(k,"for","deploy-env"),f(k,"class","svelte-1hrwlue"),f(T,"id","deploy-env"),f(T,"class","svelte-1hrwlue"),l[5]===void 0&&Qe(()=>l[89].call(T)),f(C,"class","form-group svelte-1hrwlue"),f(s,"class","form-row three-col svelte-1hrwlue"),f(H,"class","server-title svelte-1hrwlue"),f(O,"class","server-header svelte-1hrwlue"),f(le,"class","toggle-icon svelte-1hrwlue"),f(ue,"type","button"),f(ue,"class","section-toggle svelte-1hrwlue"),f(ie,"class","collapsible-section svelte-1hrwlue"),we(ie,"expanded",l[58]),f(U,"class","server-selection svelte-1hrwlue")},m(he,Pe){$(he,e,Pe),r(e,t);for(let _t=0;_t<Ie.length;_t+=1)Ie[_t]&&Ie[_t].m(t,null);r(e,n),r(e,s),r(s,o),r(o,i),r(o,a),r(o,u),te(u,l[4]),r(s,c),r(s,_),r(_,d),r(_,m),r(_,h),te(h,l[3]),r(_,g),ve&&ve.m(_,null),r(s,S),r(s,C),r(C,k),r(C,y),r(C,T);for(let _t=0;_t<Me.length;_t+=1)Me[_t]&&Me[_t].m(T,null);Le(T,l[5],!0),r(e,D),Re&&Re.m(e,null),r(e,E),Ue&&Ue.m(e,null),r(e,j),et&&et.m(e,null),r(e,L),lt&&lt.m(e,null),r(e,I),ot&&ot.m(e,null),r(e,R),Je&&Je.m(e,null),r(e,z),it&&it.m(e,null),r(e,Y),r(e,U),r(U,O),r(O,H),r(H,P),r(P,A),r(P,J),r(H,Q),Tt[G].m(H,null),r(O,ee),tt&&tt.m(O,null),r(U,V),Te[K].m(U,null),r(U,W),r(U,ie),r(ie,ue),r(ue,le),r(le,re),r(ue,ne),r(ue,X),r(ue,Z),Ye&&Ye.m(ue,null),r(ie,ge),at&&at.m(ie,null),r(e,$e),fe(We,e,null),ct=!0,bt||(rt=[x(u,"input",l[87]),x(h,"input",l[88]),x(T,"change",l[89]),x(ue,"click",l[142]),x(e,"submit",l[81])],bt=!0)},p(he,Pe){if(Pe[0]&1|Pe[1]&1610612736){Ee=pe(he[60]);let Ze;for(Ze=0;Ze<Ee.length;Ze+=1){const Vt=_i(he,Ee,Ze);Ie[Ze]?Ie[Ze].p(Vt,Pe):(Ie[Ze]=pi(Vt),Ie[Ze].c(),Ie[Ze].m(t,null))}for(;Ze<Ie.length;Ze+=1)Ie[Ze].d(1);Ie.length=Ee.length}if(Pe[0]&16&&u.value!==he[4]&&te(u,he[4]),(!ct||Pe[0]&3&&v!==(v=he[0]==="stateful"?he[1]:"api"))&&f(h,"placeholder",v),Pe[0]&8&&h.value!==he[3]&&te(h,he[3]),he[0]==="stateful"?ve?ve.p(he,Pe):(ve=di(he),ve.c(),ve.m(_,null)):ve&&(ve.d(1),ve=null),Pe[2]&1){ze=pe(he[62]);let Ze;for(Ze=0;Ze<ze.length;Ze+=1){const Vt=ci(he,ze,Ze);Me[Ze]?Me[Ze].p(Vt,Pe):(Me[Ze]=mi(Vt),Me[Ze].c(),Me[Ze].m(T,null))}for(;Ze<Me.length;Ze+=1)Me[Ze].d(1);Me.length=ze.length}Pe[0]&32|Pe[2]&1&&Le(T,he[5]),he[0]==="stateful"?Re?Re.p(he,Pe):(Re=vi(he),Re.c(),Re.m(e,E)):Re&&(Re.d(1),Re=null),he[0]!=="stateful"?Ue?(Ue.p(he,Pe),Pe[0]&1&&N(Ue,1)):(Ue=gi(he),Ue.c(),N(Ue,1),Ue.m(e,j)):Ue&&(qe(),M(Ue,1,1,()=>{Ue=null}),je()),he[0]==="service"?et?et.p(he,Pe):(et=Ai(he),et.c(),et.m(e,L)):et&&(et.d(1),et=null),he[0]==="worker"||he[0]==="scheduled"?lt?lt.p(he,Pe):(lt=Mi(he),lt.c(),lt.m(e,I)):lt&&(lt.d(1),lt=null),he[0]==="scheduled"?ot?ot.p(he,Pe):(ot=zi(he),ot.c(),ot.m(e,R)):ot&&(ot.d(1),ot=null),he[0]!=="stateful"?Je?(Je.p(he,Pe),Pe[0]&1&&N(Je,1)):(Je=Oi(he),Je.c(),N(Je,1),Je.m(e,z)):Je&&(qe(),M(Je,1,1,()=>{Je=null}),je()),he[0]!=="stateful"?it?(it.p(he,Pe),Pe[0]&1&&N(it,1)):(it=Ui(he),it.c(),N(it,1),it.m(e,Y)):it&&(qe(),M(it,1,1,()=>{it=null}),je()),(!ct||Pe[0]&1)&&B!==(B=he[0]==="service"||he[0]==="worker"?"s":"")&&F(J,B);let _t=G;G=Yt(he),G===_t?Tt[G].p(he,Pe):(qe(),M(Tt[_t],1,1,()=>{Tt[_t]=null}),je(),oe=Tt[G],oe?oe.p(he,Pe):(oe=Tt[G]=St[G](he),oe.c()),N(oe,1),oe.m(H,null)),he[0]==="service"||he[0]==="worker"?tt?(tt.p(he,Pe),Pe[0]&1&&N(tt,1)):(tt=Ji(he),tt.c(),N(tt,1),tt.m(O,null)):tt&&(qe(),M(tt,1,1,()=>{tt=null}),je());let It=K;K=Ke(he),K===It?Te[K].p(he,Pe):(qe(),M(Te[It],1,1,()=>{Te[It]=null}),je(),ae=Te[K],ae?ae.p(he,Pe):(ae=Te[K]=Ot[K](he),ae.c()),N(ae,1),ae.m(U,W)),(!ct||Pe[1]&134217728)&&me!==(me=he[58]?"▼":"▶")&&F(re,me),he[9]>0?Ye?(Ye.p(he,Pe),Pe[0]&512&&N(Ye,1)):(Ye=er(he),Ye.c(),N(Ye,1),Ye.m(ue,null)):Ye&&(qe(),M(Ye,1,1,()=>{Ye=null}),je()),he[58]?at?at.p(he,Pe):(at=tr(he),at.c(),at.m(ie,null)):at&&(at.d(1),at=null),(!ct||Pe[1]&134217728)&&we(ie,"expanded",he[58]);const Gt={};Pe[1]&1024&&(Gt.disabled=he[41]),Pe[1]&1024|Pe[7]&4&&(Gt.$$scope={dirty:Pe,ctx:he}),We.$set(Gt)},i(he){ct||(N(Ue),N(Je),N(it),N(oe),N(tt),N(ae),N(Ye),N(We.$$.fragment,he),ct=!0)},o(he){M(Ue),M(Je),M(it),M(oe),M(tt),M(ae),M(Ye),M(We.$$.fragment,he),ct=!1},d(he){he&&w(e),Ne(Ie,he),ve&&ve.d(),Ne(Me,he),Re&&Re.d(),Ue&&Ue.d(),et&&et.d(),lt&&lt.d(),ot&&ot.d(),Je&&Je.d(),it&&it.d(),Tt[G].d(),tt&&tt.d(),Te[K].d(),Ye&&Ye.d(),at&&at.d(),ce(We),bt=!1,Ge(rt)}}}function Ip(l){let e;return{c(){e=p("div"),e.innerHTML='<p>No deployment in progress</p> <p class="hint svelte-1hrwlue">Fill in the form and click Deploy to start</p>',f(e,"class","empty-state svelte-1hrwlue")},m(t,n){$(t,e,n)},p:be,d(t){t&&w(e)}}}function Fp(l){let e,t,n,s,o,i,a=pe(l[43]),u=[];for(let m=0;m<a.length;m+=1)u[m]=rr(li(l,a,m));function c(m,h){if(m[44]&&m[44].success)return Bp;if(m[44]&&!m[44].success)return Up}let _=c(l),d=_&&_(l);return{c(){e=p("div"),t=p("div"),n=p("div"),s=b(),o=p("div");for(let m=0;m<u.length;m+=1)u[m].c();i=b(),d&&d.c(),f(n,"class","progress-fill svelte-1hrwlue"),Et(n,"width",l[42]+"%"),f(t,"class","progress-bar svelte-1hrwlue"),f(o,"class","log-output svelte-1hrwlue"),f(e,"class","progress-section svelte-1hrwlue")},m(m,h){$(m,e,h),r(e,t),r(t,n),r(e,s),r(e,o);for(let v=0;v<u.length;v+=1)u[v]&&u[v].m(o,null);r(e,i),d&&d.m(e,null)},p(m,h){if(h[1]&2048&&Et(n,"width",m[42]+"%"),h[1]&4096){a=pe(m[43]);let v;for(v=0;v<a.length;v+=1){const g=li(m,a,v);u[v]?u[v].p(g,h):(u[v]=rr(g),u[v].c(),u[v].m(o,null))}for(;v<u.length;v+=1)u[v].d(1);u.length=a.length}_===(_=c(m))&&d?d.p(m,h):(d&&d.d(1),d=_&&_(m),d&&(d.c(),d.m(e,null)))},d(m){m&&w(e),Ne(u,m),d&&d.d()}}}function rr(l){let e,t,n=l[83].time.toLocaleTimeString()+"",s,o,i,a=kr(l[83].message)+"",u,c;return{c(){e=p("div"),t=p("span"),s=q(n),o=b(),i=new vc(!1),u=b(),f(t,"class","log-time svelte-1hrwlue"),i.a=u,f(e,"class",c="log-line "+l[83].type+" svelte-1hrwlue")},m(_,d){$(_,e,d),r(e,t),r(t,s),r(e,o),i.m(a,e),r(e,u)},p(_,d){d[1]&4096&&n!==(n=_[83].time.toLocaleTimeString()+"")&&F(s,n),d[1]&4096&&a!==(a=kr(_[83].message)+"")&&i.p(a),d[1]&4096&&c!==(c="log-line "+_[83].type+" svelte-1hrwlue")&&f(e,"class",c)},d(_){_&&w(e)}}}function Up(l){let e,t,n,s,o,i=l[5].toUpperCase()+"",a,u,c,_=l[44].error&&ar(l);function d(v,g){return v[44].servers&&v[44].servers.length>0?Gp:Hp}let m=d(l),h=m(l);return{c(){e=p("div"),t=p("div"),n=p("h4"),n.textContent="❌ Deployment Failed",s=b(),o=p("span"),a=q(i),u=b(),_&&_.c(),c=b(),h.c(),f(n,"class","svelte-1hrwlue"),f(o,"class","env-badge svelte-1hrwlue"),f(t,"class","result-header svelte-1hrwlue"),f(e,"class","deploy-failure-box svelte-1hrwlue")},m(v,g){$(v,e,g),r(e,t),r(t,n),r(t,s),r(t,o),r(o,a),r(e,u),_&&_.m(e,null),r(e,c),h.m(e,null)},p(v,g){g[0]&32&&i!==(i=v[5].toUpperCase()+"")&&F(a,i),v[44].error?_?_.p(v,g):(_=ar(v),_.c(),_.m(e,c)):_&&(_.d(1),_=null),m===(m=d(v))&&h?h.p(v,g):(h.d(1),h=m(v),h&&(h.c(),h.m(e,null)))},d(v){v&&w(e),_&&_.d(),h.d()}}}function Bp(l){let e,t,n,s,o,i=l[5].toUpperCase()+"",a,u,c,_,d=l[44].domain&&cr(l),m=l[44].connection_url&&_r(l),h=l[44].servers&&l[44].servers.length>0&&pr(l);return{c(){e=p("div"),t=p("div"),n=p("h4"),n.textContent="✅ Deployment Complete",s=b(),o=p("span"),a=q(i),u=b(),d&&d.c(),c=b(),m&&m.c(),_=b(),h&&h.c(),f(n,"class","svelte-1hrwlue"),f(o,"class","env-badge svelte-1hrwlue"),f(t,"class","result-header svelte-1hrwlue"),f(e,"class","deploy-success-box svelte-1hrwlue")},m(v,g){$(v,e,g),r(e,t),r(t,n),r(t,s),r(t,o),r(o,a),r(e,u),d&&d.m(e,null),r(e,c),m&&m.m(e,null),r(e,_),h&&h.m(e,null)},p(v,g){g[0]&32&&i!==(i=v[5].toUpperCase()+"")&&F(a,i),v[44].domain?d?d.p(v,g):(d=cr(v),d.c(),d.m(e,c)):d&&(d.d(1),d=null),v[44].connection_url?m?m.p(v,g):(m=_r(v),m.c(),m.m(e,_)):m&&(m.d(1),m=null),v[44].servers&&v[44].servers.length>0?h?h.p(v,g):(h=pr(v),h.c(),h.m(e,null)):h&&(h.d(1),h=null)},d(v){v&&w(e),d&&d.d(),m&&m.d(),h&&h.d()}}}function ar(l){let e,t=l[44].error+"",n;return{c(){e=p("p"),n=q(t)},m(s,o){$(s,e,o),r(e,n)},p(s,o){o[1]&8192&&t!==(t=s[44].error+"")&&F(n,t)},d(s){s&&w(e)}}}function Hp(l){let e;return{c(){e=p("p"),e.textContent="No server details available",Et(e,"margin-top","8px"),Et(e,"opacity","0.8")},m(t,n){$(t,e,n)},p:be,d(t){t&&w(e)}}}function Gp(l){let e,t,n,s,o=pe(l[44].servers),i=[];for(let a=0;a<o.length;a+=1)i[a]=fr(xo(l,o,a));return{c(){e=p("div"),t=p("span"),t.textContent="Server Status:",n=b(),s=p("div");for(let a=0;a<i.length;a+=1)i[a].c();f(t,"class","result-label svelte-1hrwlue"),f(s,"class","server-links svelte-1hrwlue"),f(e,"class","result-section svelte-1hrwlue"),Et(e,"margin-top","12px")},m(a,u){$(a,e,u),r(e,t),r(e,n),r(e,s);for(let c=0;c<i.length;c+=1)i[c]&&i[c].m(s,null)},p(a,u){if(u[0]&8|u[1]&8192){o=pe(a[44].servers);let c;for(c=0;c<o.length;c+=1){const _=xo(a,o,c);i[c]?i[c].p(_,u):(i[c]=fr(_),i[c].c(),i[c].m(s,null))}for(;c<i.length;c+=1)i[c].d(1);i.length=o.length}},d(a){a&&w(e),Ne(i,a)}}}function Vp(l){let e,t=l[179].ip+"",n,s,o=l[179].error&&ur(l);return{c(){e=q("❌ "),n=q(t),o&&o.c(),s=Oe()},m(i,a){$(i,e,a),$(i,n,a),o&&o.m(i,a),$(i,s,a)},p(i,a){a[1]&8192&&t!==(t=i[179].ip+"")&&F(n,t),i[179].error?o?o.p(i,a):(o=ur(i),o.c(),o.m(s.parentNode,s)):o&&(o.d(1),o=null)},d(i){i&&(w(e),w(n),w(s)),o&&o.d(i)}}}function Wp(l){let e,t=l[179].ip+"",n;return{c(){e=q("✅ "),n=q(t)},m(s,o){$(s,e,o),$(s,n,o)},p(s,o){o[1]&8192&&t!==(t=s[179].ip+"")&&F(n,t)},d(s){s&&(w(e),w(n))}}}function ur(l){let e,t=l[179].error+"",n;return{c(){e=q(": "),n=q(t)},m(s,o){$(s,e,o),$(s,n,o)},p(s,o){o[1]&8192&&t!==(t=s[179].error+"")&&F(n,t)},d(s){s&&(w(e),w(n))}}}function fr(l){let e,t,n,s,o,i,a;function u(m,h){return m[179].success?Wp:Vp}let c=u(l),_=c(l);function d(){return l[153](l[179])}return{c(){e=p("div"),t=p("span"),_.c(),n=b(),s=p("button"),s.textContent="📋 Logs",o=b(),f(s,"class","log-btn svelte-1hrwlue"),f(e,"class","server-link-row svelte-1hrwlue")},m(m,h){$(m,e,h),r(e,t),_.m(t,null),r(e,n),r(e,s),r(e,o),i||(a=x(s,"click",d),i=!0)},p(m,h){l=m,c===(c=u(l))&&_?_.p(l,h):(_.d(1),_=c(l),_&&(_.c(),_.m(t,null)))},d(m){m&&w(e),_.d(),i=!1,a()}}}function cr(l){let e,t,n,s,o,i=l[44].domain+"",a,u;return{c(){e=p("div"),t=p("span"),t.textContent="🌐 Domain:",n=b(),s=p("a"),o=q("https://"),a=q(i),f(t,"class","result-label svelte-1hrwlue"),f(s,"href",u="https://"+l[44].domain),f(s,"target","_blank"),f(s,"class","result-link svelte-1hrwlue"),f(e,"class","result-section svelte-1hrwlue")},m(c,_){$(c,e,_),r(e,t),r(e,n),r(e,s),r(s,o),r(s,a)},p(c,_){_[1]&8192&&i!==(i=c[44].domain+"")&&F(a,i),_[1]&8192&&u!==(u="https://"+c[44].domain)&&f(s,"href",u)},d(c){c&&w(e)}}}function _r(l){let e,t,n,s,o,i=(l[44].env_var_name||"URL")+"",a,u,c=l[44].connection_url+"",_,d,m,h,v;return{c(){e=p("div"),t=p("span"),t.textContent="Connection:",n=b(),s=p("div"),o=p("code"),a=q(i),u=q("="),_=q(c),d=b(),m=p("button"),m.textContent="📋 Copy",f(t,"class","result-label svelte-1hrwlue"),f(o,"class","connection-url svelte-1hrwlue"),f(m,"class","copy-btn svelte-1hrwlue"),f(s,"class","connection-info svelte-1hrwlue"),f(e,"class","result-section svelte-1hrwlue")},m(g,S){$(g,e,S),r(e,t),r(e,n),r(e,s),r(s,o),r(o,a),r(o,u),r(o,_),r(s,d),r(s,m),h||(v=x(m,"click",l[150]),h=!0)},p(g,S){S[1]&8192&&i!==(i=(g[44].env_var_name||"URL")+"")&&F(a,i),S[1]&8192&&c!==(c=g[44].connection_url+"")&&F(_,c)},d(g){g&&w(e),h=!1,v()}}}function pr(l){let e,t,n=l[0]==="stateful"?"TCP Endpoint:":"Servers:",s,o,i,a,u=l[44].servers.some(wr),c,_=pe(l[44].servers.filter(qr)),d=[];for(let h=0;h<_.length;h+=1)d[h]=dr(ti(l,_,h));let m=u&&mr(l);return{c(){e=p("div"),t=p("span"),s=q(n),o=b(),i=p("div");for(let h=0;h<d.length;h+=1)d[h].c();a=b(),m&&m.c(),c=Oe(),f(t,"class","result-label svelte-1hrwlue"),f(i,"class","server-links svelte-1hrwlue"),f(e,"class","result-section svelte-1hrwlue")},m(h,v){$(h,e,v),r(e,t),r(t,s),r(e,o),r(e,i);for(let g=0;g<d.length;g+=1)d[g]&&d[g].m(i,null);$(h,a,v),m&&m.m(h,v),$(h,c,v)},p(h,v){if(v[0]&1&&n!==(n=h[0]==="stateful"?"TCP Endpoint:":"Servers:")&&F(s,n),v[0]&9|v[1]&8192){_=pe(h[44].servers.filter(qr));let g;for(g=0;g<_.length;g+=1){const S=ti(h,_,g);d[g]?d[g].p(S,v):(d[g]=dr(S),d[g].c(),d[g].m(i,null))}for(;g<d.length;g+=1)d[g].d(1);d.length=_.length}v[1]&8192&&(u=h[44].servers.some(wr)),u?m?m.p(h,v):(m=mr(h),m.c(),m.m(c.parentNode,c)):m&&(m.d(1),m=null)},d(h){h&&(w(e),w(a),w(c)),Ne(d,h),m&&m.d(h)}}}function Jp(l){let e,t=l[179].url+"",n,s;return{c(){e=p("a"),n=q(t),f(e,"href",s=l[179].url),f(e,"target","_blank"),f(e,"class","result-link svelte-1hrwlue")},m(o,i){$(o,e,i),r(e,n)},p(o,i){i[1]&8192&&t!==(t=o[179].url+"")&&F(n,t),i[1]&8192&&s!==(s=o[179].url)&&f(e,"href",s)},d(o){o&&w(e)}}}function Kp(l){var s;let e,t=(((s=l[179].url)==null?void 0:s.replace("http://",""))||`${l[179].ip}:${l[44].host_port||l[179].host_port}`)+"",n;return{c(){e=p("code"),n=q(t),f(e,"class","tcp-endpoint svelte-1hrwlue")},m(o,i){$(o,e,i),r(e,n)},p(o,i){var a;i[1]&8192&&t!==(t=(((a=o[179].url)==null?void 0:a.replace("http://",""))||`${o[179].ip}:${o[44].host_port||o[179].host_port}`)+"")&&F(n,t)},d(o){o&&w(e)}}}function dr(l){let e,t,n,s,o,i;function a(d,m){return d[0]==="stateful"?Kp:Jp}let u=a(l),c=u(l);function _(){return l[151](l[179])}return{c(){e=p("div"),c.c(),t=b(),n=p("button"),n.textContent="📋 Logs",s=b(),f(n,"class","log-btn svelte-1hrwlue"),f(e,"class","server-link-row svelte-1hrwlue")},m(d,m){$(d,e,m),c.m(e,null),r(e,t),r(e,n),r(e,s),o||(i=x(n,"click",_),o=!0)},p(d,m){l=d,u===(u=a(l))&&c?c.p(l,m):(c.d(1),c=u(l),c&&(c.c(),c.m(e,t)))},d(d){d&&w(e),c.d(),o=!1,i()}}}function mr(l){let e,t,n,s=pe(l[44].servers.filter(jr)),o=[];for(let i=0;i<s.length;i+=1)o[i]=vr(ei(l,s,i));return{c(){e=p("div"),t=p("span"),t.textContent="Failed Servers:",n=b();for(let i=0;i<o.length;i+=1)o[i].c();f(t,"class","result-label svelte-1hrwlue"),Et(t,"color","#fef3c7"),f(e,"class","failed-servers-section svelte-1hrwlue")},m(i,a){$(i,e,a),r(e,t),r(e,n);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(e,null)},p(i,a){if(a[0]&8|a[1]&8192){s=pe(i[44].servers.filter(jr));let u;for(u=0;u<s.length;u+=1){const c=ei(i,s,u);o[u]?o[u].p(c,a):(o[u]=vr(c),o[u].c(),o[u].m(e,null))}for(;u<o.length;u+=1)o[u].d(1);o.length=s.length}},d(i){i&&w(e),Ne(o,i)}}}function vr(l){let e,t,n,s=l[179].ip+"",o,i,a=(l[179].error||"Unknown error")+"",u,c,_,d,m,h;function v(){return l[152](l[179])}return{c(){e=p("div"),t=p("span"),n=q("❌ "),o=q(s),i=q(": "),u=q(a),c=b(),_=p("button"),_.textContent="📋 Logs",d=b(),Et(t,"color","#fef3c7"),f(_,"class","log-btn svelte-1hrwlue"),f(e,"class","server-link-row svelte-1hrwlue")},m(g,S){$(g,e,S),r(e,t),r(t,n),r(t,o),r(t,i),r(t,u),r(e,c),r(e,_),r(e,d),m||(h=x(_,"click",v),m=!0)},p(g,S){l=g,S[1]&8192&&s!==(s=l[179].ip+"")&&F(o,s),S[1]&8192&&a!==(a=(l[179].error||"Unknown error")+"")&&F(u,a)},d(g){g&&w(e),m=!1,h()}}}function Yp(l){let e;function t(o,i){return o[41]||o[43].length>0?Fp:Ip}let n=t(l),s=n(l);return{c(){s.c(),e=Oe()},m(o,i){s.m(o,i),$(o,e,i)},p(o,i){n===(n=t(o))&&s?s.p(o,i):(s.d(1),s=n(o),s&&(s.c(),s.m(e.parentNode,e)))},d(o){o&&w(e),s.d(o)}}}function hr(l){let e,t,n=(l[179].name||l[179].ip)+"",s,o,i,a=l[179].ip+"",u,c;return{c(){e=p("div"),t=p("span"),s=q(n),o=b(),i=p("span"),u=q(a),c=b(),f(t,"class","server-name svelte-1hrwlue"),f(i,"class","server-ip svelte-1hrwlue"),f(e,"class","cleanup-server-item svelte-1hrwlue")},m(_,d){$(_,e,d),r(e,t),r(t,s),r(e,o),r(e,i),r(i,u),r(e,c)},p(_,d){d[1]&32768&&n!==(n=(_[179].name||_[179].ip)+"")&&F(s,n),d[1]&32768&&a!==(a=_[179].ip+"")&&F(u,a)},d(_){_&&w(e)}}}function Qp(l){let e,t,n,s,o=l[46].length+[...l[8]].length+"",i,a,u,c=[...l[8]].length+"",_,d,m,h,v,g,S=pe(l[46]),C=[];for(let k=0;k<S.length;k+=1)C[k]=hr(Xo(l,S,k));return{c(){e=p("div"),t=p("p"),n=q("This service is currently running on "),s=p("strong"),i=q(o),a=q(` servers.
      You're deploying to `),u=p("strong"),_=q(c),d=q(" servers."),m=b(),h=p("p"),h.textContent="Stop containers on the following servers?",v=b(),g=p("div");for(let k=0;k<C.length;k+=1)C[k].c();f(t,"class","svelte-1hrwlue"),f(h,"class","svelte-1hrwlue"),f(g,"class","cleanup-server-list svelte-1hrwlue"),f(e,"class","cleanup-confirm-content svelte-1hrwlue")},m(k,y){$(k,e,y),r(e,t),r(t,n),r(t,s),r(s,i),r(t,a),r(t,u),r(u,_),r(t,d),r(e,m),r(e,h),r(e,v),r(e,g);for(let T=0;T<C.length;T+=1)C[T]&&C[T].m(g,null)},p(k,y){if(y[0]&256|y[1]&32768&&o!==(o=k[46].length+[...k[8]].length+"")&&F(i,o),y[0]&256&&c!==(c=[...k[8]].length+"")&&F(_,c),y[1]&32768){S=pe(k[46]);let T;for(T=0;T<S.length;T+=1){const D=Xo(k,S,T);C[T]?C[T].p(D,y):(C[T]=hr(D),C[T].c(),C[T].m(g,null))}for(;T<C.length;T+=1)C[T].d(1);C.length=S.length}},d(k){k&&w(e),Ne(C,k)}}}function Zp(l){let e;return{c(){e=q("Proceed")},m(t,n){$(t,e,n)},d(t){t&&w(e)}}}function Xp(l){let e;return{c(){e=q("Cancel")},m(t,n){$(t,e,n)},d(t){t&&w(e)}}}function xp(l){let e,t,n,s,o;return t=new Be({props:{variant:"primary",$$slots:{default:[Zp]},$$scope:{ctx:l}}}),t.$on("click",l[82]),s=new Be({props:{variant:"ghost",$$slots:{default:[Xp]},$$scope:{ctx:l}}}),s.$on("click",l[154]),{c(){e=p("div"),_e(t.$$.fragment),n=b(),_e(s.$$.fragment),f(e,"slot","footer")},m(i,a){$(i,e,a),fe(t,e,null),r(e,n),fe(s,e,null),o=!0},p(i,a){const u={};a[7]&4&&(u.$$scope={dirty:a,ctx:i}),t.$set(u);const c={};a[7]&4&&(c.$$scope={dirty:a,ctx:i}),s.$set(c)},i(i){o||(N(t.$$.fragment,i),N(s.$$.fragment,i),o=!0)},o(i){M(t.$$.fragment,i),M(s.$$.fragment,i),o=!1},d(i){i&&w(e),ce(t),ce(s)}}}function ed(l){let e,t,n,s,o,i,a,u,c;n=new mt({props:{title:"🚀 Deploy",$$slots:{default:[Op]},$$scope:{ctx:l}}}),o=new mt({props:{title:"📋 Deployment Progress",$$slots:{default:[Yp]},$$scope:{ctx:l}}});function _(m){l[155](m)}let d={title:"⚠️ Service Already Running",width:"500px",$$slots:{footer:[xp],default:[Qp]},$$scope:{ctx:l}};return l[45]!==void 0&&(d.open=l[45]),a=new il({props:d}),zt.push(()=>ml(a,"open",_)),a.$on("close",l[156]),{c(){e=p("div"),t=p("div"),_e(n.$$.fragment),s=b(),_e(o.$$.fragment),i=b(),_e(a.$$.fragment),f(t,"class","deploy-grid svelte-1hrwlue"),f(e,"class","deploy-page svelte-1hrwlue")},m(m,h){$(m,e,h),r(e,t),fe(n,t,null),r(t,s),fe(o,t,null),$(m,i,h),fe(a,m,h),c=!0},p(m,h){const v={};h[0]&2147483647|h[1]&536741887|h[7]&4&&(v.$$scope={dirty:h,ctx:m}),n.$set(v);const g={};h[0]&41|h[1]&15360|h[7]&4&&(g.$$scope={dirty:h,ctx:m}),o.$set(g);const S={};h[0]&256|h[1]&114688|h[7]&4&&(S.$$scope={dirty:h,ctx:m}),!u&&h[1]&16384&&(u=!0,S.open=m[45],dl(()=>u=!1)),a.$set(S)},i(m){c||(N(n.$$.fragment,m),N(o.$$.fragment,m),N(a.$$.fragment,m),c=!0)},o(m){M(n.$$.fragment,m),M(o.$$.fragment,m),M(a.$$.fragment,m),c=!1},d(m){m&&(w(e),w(i)),ce(n),ce(o),ce(a,m)}}}function td(l){l.preventDefault(),l.stopPropagation()}async function of(l,e){const t=[],n=l.createReader();let s=[],o;do o=await new Promise((i,a)=>{n.readEntries(i,a)}),s=s.concat(o);while(o.length>0);for(const i of s){const a=e?`${e}/${i.name}`:i.name;if(i.isFile){const u=await new Promise((c,_)=>{i.file(c,_)});u._relativePath=a,t.push(u)}else if(i.isDirectory){const u=await of(i,a);t.push(...u)}}return t}function gr(l){return new Promise((e,t)=>{const n=new FileReader;n.onload=()=>e(new Uint8Array(n.result)),n.onerror=t,n.readAsArrayBuffer(l)})}function br(l){return new Promise((e,t)=>{const n=new FileReader;n.onload=()=>e(n.result),n.onerror=t,n.readAsText(l)})}function kr(l){if(!l)return"";const e=/(https?:\/\/[^\s]+)/g;return l.replace(e,'<a href="$1" target="_blank" class="log-link">$1</a>')}const wr=l=>!l.success,$r=l=>l,ld=l=>l.isMain,Cr=l=>l.isMain,yr=l=>l.isMain,Sr=l=>l.trim(),qr=l=>l.success,jr=l=>!l.success;function nd(l,e,t){let n,s,o;ht(l,W1,se=>t(11,s=se)),ht(l,vn,se=>t(85,o=se));let i="service";const a=[{value:"stateful",label:"🗄️ Stateful",description:"Database or cache (postgres, redis...)"},{value:"service",label:"🌐 Service",description:"Web app with HTTP port & domain"},{value:"worker",label:"⚙️ Worker",description:"Background job processor"},{value:"scheduled",label:"⏰ Scheduled",description:"Cron job / periodic task"}];let u="redis",c=[{value:"redis",label:"⚡ Redis",port:6379,image:"redis:7-alpine",description:"In-memory cache & pub/sub"},{value:"postgres",label:"🐘 PostgreSQL",port:5432,image:"postgres:16-alpine",description:"Relational database"},{value:"mysql",label:"🐬 MySQL",port:3306,image:"mysql:8",description:"Relational database"},{value:"mongo",label:"🍃 MongoDB",port:27017,image:"mongo:7",description:"Document database"},{value:"opensearch",label:"🔍 OpenSearch",port:9200,image:"opensearchproject/opensearch:2",description:"Search & analytics"},{value:"qdrant",label:"🧠 Qdrant",port:6333,image:"qdrant/qdrant:latest",description:"Vector database for AI"}],_="",d="",m="",h="",v="prod",g="",S="code",C=8e3,k="",y="",T="main",D="",E=[],j="",L="",I=null,R="",z="",Y="",U=[],O=null,H=null,P=!0,A=!1,B="",J="",Q=!1,G="",oe="",ee="",V="lon1",K="s-1vcpu-2gb",ae=[],W=[],ie=[],ue=!1,le=0,me=[],re=new Set,ne=0,X=null;function Z(se){i!==se&&(t(0,i=se),t(3,m=""),t(4,h=""),t(5,v="prod"),re.clear(),t(8,re),t(0,i),t(9,ne),t(9,ne=0),se==="stateful"&&t(9,ne=1))}let ge=!1,$e=[],We=null,ct=!0,bt=!0,rt={postgres:!1,redis:!1,mysql:!1,mongo:!1},Ee=!0,Ie="digitalpixo.com",ve="",ze="",Me=!1,Re=["node_modules/","__pycache__/","*.pyc",".git/",".venv/","venv/",".env",".DS_Store",".idea/",".vscode/","dist/","build/",".pytest_cache/",".mypy_cache/"],Ue=Re.join(`
`),et=!1,lt=!1,ot=!1;const Je=[...Re],it=["dev","test","staging","uat","prod"];Cl(()=>{Zt.refresh().catch(()=>{}),mn.refresh().catch(()=>{}),Tt()});let St=null;async function Tt(){var se;try{try{const de=await He("GET","/infra/regions");t(38,ae=de.regions||de||[])}catch{t(38,ae=[{slug:"nyc1",name:"New York 1"},{slug:"nyc3",name:"New York 3"},{slug:"sfo3",name:"San Francisco 3"},{slug:"ams3",name:"Amsterdam 3"},{slug:"sgp1",name:"Singapore 1"},{slug:"lon1",name:"London 1"},{slug:"fra1",name:"Frankfurt 1"}])}try{const de=await He("GET","/infra/sizes");t(39,W=de.sizes||de||[])}catch{t(39,W=[{slug:"s-1vcpu-512mb-10gb",description:"$4/mo - 512MB / 1 vCPU"},{slug:"s-1vcpu-1gb",description:"$6/mo - 1GB / 1 vCPU"},{slug:"s-1vcpu-2gb",description:"$12/mo - 2GB / 1 vCPU"},{slug:"s-2vcpu-2gb",description:"$18/mo - 2GB / 2 vCPU"},{slug:"s-2vcpu-4gb",description:"$24/mo - 4GB / 2 vCPU"},{slug:"s-4vcpu-8gb",description:"$48/mo - 8GB / 4 vCPU"}])}try{const de=await He("GET","/infra/stateful-types");((se=de.types)==null?void 0:se.length)>0&&t(2,c=de.types)}catch{console.warn("Using fallback stateful types")}}catch(de){console.error("Failed to load regions/sizes:",de)}}async function Yt(){var se;if(!m){Ce.warning("Enter app name first");return}t(53,ze="Loading...");try{const Se=await He("GET",`/infra/deploy-configs/${h||"default"}/${m}/${v}`);Ot(Se),t(53,ze="✓ Loaded"),Ce.success("Config loaded")}catch(de){(se=de.message)!=null&&se.includes("404")?(t(53,ze="No saved config"),Ce.info("No saved config found")):(t(53,ze="Load failed"),Ce.error("Failed to load config"))}}async function tt(){try{const de=await He("GET",`/infra/deploy-configs/${h||"default"}/${m}/${v}`);Ot(de),t(53,ze="✓ Auto-loaded")}catch{t(53,ze="")}}function Ot(se){var de,Se;se.source_type&&t(15,S={folder:"code",git:"git",image:"image"}[se.source_type]||se.source_type),se.git_url&&t(18,y=se.git_url),se.git_branch&&t(19,T=se.git_branch),se.port&&t(16,C=se.port),se.env_vars&&Object.keys(se.env_vars).length>0&&t(17,k=Object.entries(se.env_vars).map(([Ae,Ve])=>`${Ae}=${Ve}`).join(`
`)),((de=se.exclude_patterns)==null?void 0:de.length)>0&&(Re=se.exclude_patterns,t(55,Ue=Re.join(`
`))),((Se=se.server_ips)==null?void 0:Se.length)>0&&t(8,re=new Set(se.server_ips))}async function Te(){if(!m){Ce.warning("Enter app name first");return}t(53,ze="Saving...");const se={};for(const Ae of k.split(`
`)){const Ve=Ae.trim();if(Ve&&Ve.includes("=")){const[Ct,...vt]=Ve.split("=");se[Ct.trim()]=vt.join("=").trim()}}const de=Ue.split(`
`).map(Ae=>Ae.trim()).filter(Boolean),Se={project_name:h||"default",service_name:m,env:v,source_type:S==="code"?"folder":S,git_url:y||null,git_branch:T||"main",exclude_patterns:de.length>0?de:Je,port:C,env_vars:se,server_ips:Array.from(re)};try{await He("POST","/infra/deploy-configs",Se),t(53,ze="✓ Saved"),Ce.success("Config saved")}catch{t(53,ze="Save failed"),Ce.error("Failed to save config")}}function Ke(){t(54,Me=!Me),Me||(Re=Ue.split(`
`).map(se=>se.trim()).filter(Boolean))}function Ye(){Re=[...Je],t(55,Ue=Je.join(`
`)),Ce.info("Reset to default patterns")}function at(se){for(const de of Re)if(de.endsWith("/")){const Se=de.slice(0,-1);if(se.startsWith(Se+"/")||se.includes("/"+Se+"/"))return!0}else if(de.startsWith("*")){const Se=de.slice(1);if(se.endsWith(Se))return!0}else if(se===de||se.endsWith("/"+de))return!0;return!1}function he(se){re.has(se)?re.delete(se):re.add(se),t(8,re),t(0,i),t(9,ne)}function Pe(se){se?(ie||[]).forEach(de=>{var Ae,Ve,Ct;const Se=de.ip||((Ct=(Ve=(Ae=de.networks)==null?void 0:Ae.v4)==null?void 0:Ve[0])==null?void 0:Ct.ip_address);Se&&re.add(Se)}):re.clear(),t(8,re),t(0,i),t(9,ne)}function _t(se){re.clear(),re.add(se),t(8,re),t(0,i),t(9,ne),(i==="stateful"||i==="scheduled")&&t(9,ne=0)}function It(){H=async(se,de)=>{await yl(se,de,U.length===0)},O==null||O.click()}async function Gt(se){const de=Array.from(se.target.files||[]);if(!de.length||!H)return;console.log(`[Deploy] Browser returned ${de.length} files`),de.length<50?console.log("[Deploy] Files:",de.map(Ve=>Ve.webkitRelativePath)):console.log("[Deploy] First 20 files:",de.slice(0,20).map(Ve=>Ve.webkitRelativePath));const Ae=de[0].webkitRelativePath.split("/")[0];await H(de,Ae),H=null,se.target.value=""}function Ze(se){se.preventDefault(),se.stopPropagation(),t(31,A=!0)}function Vt(se){se.preventDefault(),se.stopPropagation(),se.currentTarget.contains(se.relatedTarget)||t(31,A=!1)}async function hl(se){var Se,Ae;se.preventDefault(),se.stopPropagation(),t(31,A=!1);const de=(Se=se.dataTransfer)==null?void 0:Se.items;if(!(!de||de.length===0)){for(const Ve of de)if(Ve.kind==="file"){const Ct=(Ae=Ve.webkitGetAsEntry)==null?void 0:Ae.call(Ve);Ct!=null&&Ct.isDirectory&&await al(Ct)}}}async function al(se){const de=se.name;if(U.some(Ve=>Ve.name===de)){Ce.error(`Folder "${de}" is already added`);return}Ce.info(`Reading ${de}/...`);const Se=await of(se,"");if(Se.length===0){Ce.error(`No files found in ${de}/`);return}const Ae=U.length===0;await gl(Se,de,Ae)}async function gl(se,de,Se){Se&&U.some(vt=>vt.isMain)&&t(28,U=U.map(vt=>({...vt,isMain:!1})));const Ae=[];let Ve=null,Ct=0;for(const vt of se){const xt=vt._relativePath||vt.name;if(at(xt)){Ct++;continue}const ql=await gr(vt);Ae.push({path:xt,content:ql}),Se&&xt==="Dockerfile"&&(Ve=await br(vt))}console.log(`[Deploy] Dropped ${de}/: ${se.length} total, ${Ct} skipped, ${Ae.length} included`),t(28,U=[...U,{name:de,fileContents:Ae,isMain:Se,fileCount:Ae.length}]),ul(),U.some(vt=>vt.isMain)&&await fl(Ve),P&&h&&m&&Bt(),Ce.success(`Added ${de}/ (${Ae.length} files)`)}async function yl(se,de,Se){if(U.some(vt=>vt.name===de)){Ce.error(`Folder "${de}" is already added`);return}Se&&U.some(vt=>vt.isMain)&&t(28,U=U.map(vt=>({...vt,isMain:!1})));const Ae=[];let Ve=null,Ct=0;for(const vt of se){const xt=vt.webkitRelativePath.replace(`${de}/`,"");if(at(xt)){Ct++;continue}const ql=await gr(vt);Ae.push({path:xt,content:ql}),Se&&xt==="Dockerfile"&&(Ve=await br(vt))}console.log(`[Deploy] Processed ${de}/: ${se.length} total, ${Ct} skipped, ${Ae.length} included`),t(28,U=[...U,{name:de,fileContents:Ae,isMain:Se,fileCount:Ae.length}]),ul(),U.some(vt=>vt.isMain)&&await fl(Ve),P&&h&&m&&Bt(),Ce.success(`Added ${de}/ (${Ae.length} files)`)}function Wt(se){t(28,U=U.filter((de,Se)=>Se!==se)),ul(),U.length>0&&!U.some(de=>de.isMain)&&t(28,U=U.map((de,Se)=>({...de,isMain:Se===0})))}async function Xt(se){t(28,U=U.map((de,Se)=>({...de,isMain:Se===se}))),await fl()}function ul(){const se=U.some(de=>de.isMain);U.length&&se&&ll()}async function ll(){if(!U.length)return;const{default:se}=await Zo(async()=>{const{default:Se}=await import("https://cdn.jsdelivr.net/npm/jszip@3.10.1/+esm");return{default:Se}},[]),de=new se;for(const Se of U)for(const{path:Ae,content:Ve}of Se.fileContents)de.file(`${Se.name}/${Ae}`,Ve);U.length>1&&B&&de.file("Dockerfile",B),await de.generateAsync({type:"blob"})}async function fl(se=null){t(34,Q=!0),se?(t(32,B=se),t(33,J="from folder")):(t(32,B=await bl()),t(33,J=U.length>1?"multi-folder":"generated")),kl()}async function bl(){const se=U.find(Ae=>Ae.isMain);if(!se)return"";const de=U.filter(Ae=>!Ae.isMain).map(Ae=>Ae.name),Se=[];for(const Ae of U)for(const Ve of Ae.fileContents)Se.push(`${Ae.name}/${Ve.path}`);try{return(await He.post("/infra/dockerfile/generate",{files:Se,main_folder:se.name,dep_folders:de,port:parseInt(C)||8e3})).dockerfile||""}catch(Ae){return console.error("[Deploy] Failed to generate Dockerfile via API:",Ae),Ut(se)}}function Ut(se){const de=se.fileContents.some(Ve=>Ve.path==="requirements.txt"),Se=U.filter(Ve=>!Ve.isMain);let Ae=`FROM python:3.11-slim

WORKDIR /app

`;for(const Ve of Se)Ae+=`COPY ${Ve.name}/ ./${Ve.name}/
`;return Ae+=`COPY ${se.name}/ ./${se.name}/

`,de&&(Ae+=`RUN pip install --no-cache-dir -r ${se.name}/requirements.txt

`),Ae+=`EXPOSE ${C}

`,Ae+=`CMD ["uvicorn", "${se.name}.main:app", "--host", "0.0.0.0", "--port", "${C}"]
`,Ae}function kl(){const se=B.match(/^FROM\s+(\S+)/m),de=B.match(/^CMD\s+(.+)$/m);t(35,G=se?se[1]:""),t(36,oe=de?de[1]:"")}function nl(se){B&&(se==="from"&&G?t(32,B=B.replace(/^FROM\s+\S+/m,`FROM ${G}`)):se==="cmd"&&oe&&(B.includes("CMD ")?t(32,B=B.replace(/^CMD\s+.+$/m,`CMD ${oe}`)):t(32,B+=`
CMD ${oe}
`)),t(33,J="edited"))}function Bt(){if(!h||!m)return;const se=`build_folders_${h}_${m}`,de=U.map(Se=>({name:Se.name,isMain:Se.isMain}));localStorage.setItem(se,JSON.stringify(de))}function sl(se){if(!j.trim()){Ce.error("Please enter a folder path");return}const de=j.trim();if(se&&E.some(Se=>Se.isMain)&&t(21,E=E.map(Se=>({...Se,isMain:!1}))),E.some(Se=>Se.path===de)){Ce.error("This folder is already added");return}t(21,E=[...E,{path:de,isMain:se}]),t(22,j="")}function cl(se){t(21,E=E.filter((de,Se)=>Se!==se))}function Ht(se){var Se;const de=(Se=se.target.files)==null?void 0:Se[0];if(de){if(!de.name.endsWith(".tar")&&!de.name.endsWith(".tar.gz")){Ce.error("Only .tar or .tar.gz image files are supported");return}t(24,I=de),Ce.success(`Selected: ${de.name}`)}}function ye(se,de="info"){t(43,me=[...me,{message:se,type:de,time:new Date}])}async function ke(se){if(se.preventDefault(),St&&(clearTimeout(St),t(84,St=null)),!m){Ce.error("Service name is required");return}if(!h){Ce.error("Project name is required");return}if(i!=="stateful"){if(S==="code"&&!U.some(Se=>Se.isMain)){Ce.error("Add a main folder with your code");return}if(S==="code"){const Se=U.find(Ae=>Ae.isMain);if(!(Se!=null&&Se.fileContents)||Se.fileContents.length===0){Ce.error("Please re-upload your folders. File contents are not loaded from previous sessions.");return}}if(S==="git"&&!y){Ce.error("Git URL is required");return}if(S==="image"&&!L){Ce.error("Docker image URL is required");return}if(S==="image_file"&&!I){Ce.error("Upload a Docker image file (.tar)");return}if(S==="image_file"&&!R){Ce.error("Image name is required for local images");return}}if(i==="scheduled"&&!d){Ce.error("Cron schedule is required for scheduled jobs");return}if(re.size===0&&ne===0){Ce.error("Select at least one server or add new servers");return}if(ne>0&&!ee){Ce.error("Select a snapshot for new servers");return}if(!Dt()){Ce.error("Configure your DO Token in Settings first");return}if(i==="service"&&Ee&&!Tn()){Ce.error("Configure your Cloudflare Token in Settings first (required for domain setup)");return}const de=[...re];if(h&&m&&v)try{const Se=new URLSearchParams({project:h,environment:v,service_name:m}),Ae=await He("GET",`/infra/services/state?${Se}`);if(Ae.server_ips&&Ae.server_ips.length>0){const Ve=Ae.servers.filter(Ct=>!de.includes(Ct.ip));if(Ve.length>0){t(46,$e=Ve),t(47,We=()=>Jt(se)),t(45,ge=!0);return}}}catch(Se){console.log("Service state check:",Se.message||Se)}await Jt()}async function Xe(){t(45,ge=!1);const se=`${h}_${m}_${v}`.replace(/[^a-zA-Z0-9_]/g,"_");if($e.length>0){const de=$e.map(Se=>Se.ip);ye(`Stopping containers on ${$e.length} server(s)...`);try{const Se=await He("POST",`/infra/services/cleanup?do_token=${Dt()}`,{server_ips:de,container_name:se});ye(`Cleanup complete: ${Se.cleaned} stopped, ${Se.failed} failed`)}catch(Se){ye(`Cleanup warning: ${Se.message||Se}`,"warning")}}t(46,$e=[]),We&&(await We(),t(47,We=null))}async function Jt(se){t(41,ue=!0),t(42,le=0),t(43,me=[]),t(44,X=null);try{ye(`Starting ${i} deployment of ${m}...`),t(42,le=10);let de=S,Se=L,Ae=C;if(i==="stateful"){de="image";const nt=c.find(_l=>_l.value===u);Se=(nt==null?void 0:nt.image)||`${u}:latest`,Ae=(nt==null?void 0:nt.port)||5432}let Ve=null;if(i!=="stateful"&&S==="code"){ye("Creating code archive..."),console.log("[Deploy] buildFolders:",U.map(Qt=>{var Yl;return{name:Qt.name,isMain:Qt.isMain,fileCount:Qt.fileCount,hasContents:((Yl=Qt.fileContents)==null?void 0:Yl.length)||0}}));const nt=U.find(Qt=>Qt.isMain);if(!(nt!=null&&nt.fileContents)||nt.fileContents.length===0)throw new Error("No file contents in main folder. Please re-upload your folders.");const{default:_l}=await Zo(async()=>{const{default:Qt}=await import("https://cdn.jsdelivr.net/npm/jszip@3.10.1/+esm");return{default:Qt}},[]),Ul=new _l;let Bl=0;for(const Qt of U){const Yl=Qt.fileContents||[];for(const{path:oc,content:ic}of Yl)Ul.file(`${Qt.name}/${oc}`,ic),Bl++}if(console.log("[Deploy] Total files in zip:",Bl),Bl===0)throw new Error("No files to deploy. Please re-upload your folders.");U.length>1&&B&&Ul.file("Dockerfile",B),Ve=await Ul.generateAsync({type:"blob"})}ye("Sending deployment request... server provisioning may take 30-60s"),t(42,le=20);const Ct=i==="service"&&Ee,vt=Dt(),xt=Tn(),ql=new URLSearchParams({do_token:vt,snapshot_id:ee||"",new_server_count:String(ne),region:V,size:K,project:h||"",environment:v,setup_domain:String(Ct),base_domain:Ie,domain_aliases:JSON.stringify(ve.split(",").map(nt=>nt.trim()).filter(Boolean))});Ct&&xt&&ql.set("cf_token",xt);const ut=new FormData;ut.append("name",m),ut.append("port",String(Ae)),ut.append("source_type",de),ut.append("env_vars",k),ut.append("tags",g),ut.append("server_ips",JSON.stringify(Array.from(re))),ut.append("depends_on",JSON.stringify(Object.entries(rt).filter(([nt,_l])=>_l).map(([nt])=>nt))),ut.append("exclude_patterns",JSON.stringify(Re)),ut.append("deploy_type",i),i==="stateful"?(ut.append("is_stateful","true"),ut.append("persist_data","true"),ut.append("image",Se)):(ut.append("is_stateful","false"),ut.append("persist_data",String(bt))),(i==="worker"||i==="scheduled")&&_&&ut.append("custom_cmd",_),i==="scheduled"&&d&&ut.append("cron_schedule",d),B&&ut.append("dockerfile",B),y&&ut.append("git_url",y),T&&ut.append("git_branch",T),D&&ut.append("git_token",D),E.length&&ut.append("git_folders",JSON.stringify(E)),Se&&i!=="stateful"&&ut.append("image",Se),Ve&&ut.append("code_tar",Ve,"code.zip"),S==="image_file"&&(I&&ut.append("image_tar",I),R&&ut.append("image",R),z&&ut.append("container_port",String(z)),Y&&ut.append("host_port",String(Y))),await B1(`/infra/deploy/multipart?${ql}`,ut,nt=>{var _l;if(nt.type==="log")ye(nt.message);else if(nt.type==="warning")ye(nt.message||((_l=nt.data)==null?void 0:_l.message),"warning");else if(nt.type==="progress")t(42,le=Math.min(20+(nt.percent||0)*.8,95));else if(nt.type==="done"){if(t(44,X=nt),t(42,le=100),!nt.success){const Ul=nt.failed_count||0,Bl=nt.error||`Deployment failed: ${Ul} server(s) failed`;throw new Error(Bl)}}else if(nt.type==="error")throw new Error(nt.message||"Deployment failed")}),ye("✅ Deployment complete!","success"),Ce.success("Deployment successful!"),await Zt.refresh().catch(()=>{})}catch(de){let Se="Unknown error";if(typeof de=="string")Se=de;else if(de!=null&&de.message)Se=de.message;else if(de!=null&&de.detail)Se=de.detail;else if(de!=null&&de.error)Se=de.error;else try{Se=JSON.stringify(de)}catch{Se=String(de)}ye(`❌ Error: ${Se}`,"error"),Ce.error(Se)}finally{t(41,ue=!1),t(9,ne=0)}}const Ft=[[],[]],gt=se=>Z(se.value);function st(){h=this.value,t(4,h)}function pt(){m=this.value,t(3,m),t(0,i),t(2,c),t(1,u)}function wt(){v=ft(this),t(5,v),t(62,it)}function $t(){u=this.__value,t(1,u)}const gn=se=>se.value===u;function Wl(){Ue=this.value,t(55,Ue)}function bn(){g=this.value,t(14,g)}function Jl(){S=this.__value,t(15,S)}function kn(){S=this.__value,t(15,S)}function Kl(){S=this.__value,t(15,S)}function De(){S=this.__value,t(15,S)}function Fe(se){zt[se?"unshift":"push"](()=>{O=se,t(29,O)})}const Pt=se=>Xt(se),Sl=se=>Wt(se);function Fl(){P=this.checked,t(30,P)}function dt(){B=this.value,t(32,B)}function wl(){G=ft(this),t(35,G)}const rf=()=>nl("from");function af(){oe=this.value,t(36,oe)}const uf=()=>nl("cmd");function ff(){y=this.value,t(18,y)}function cf(){T=this.value,t(19,T)}const _f=se=>cl(se);function pf(){j=this.value,t(22,j)}const df=()=>sl(!0),mf=()=>sl(!1);function vf(){D=this.value,t(20,D)}function hf(){L=this.value,t(23,L)}function gf(){R=this.value,t(25,R)}function bf(){z=Kt(this.value),t(26,z)}function kf(){Y=Kt(this.value),t(27,Y)}function wf(){C=Kt(this.value),t(16,C)}function $f(){_=this.value,t(12,_)}function Cf(){d=this.value,t(13,d)}const yf=()=>t(13,d="* * * * *"),Sf=()=>t(13,d="0 * * * *"),qf=()=>t(13,d="0 0 * * *"),jf=()=>t(13,d="0 0 * * 0"),Tf=()=>t(56,et=!et);function Df(){k=this.value,t(17,k)}const Ef=()=>t(57,lt=!lt);function Lf(){ct=this.checked,t(48,ct)}function Pf(){rt.postgres=this.checked,t(50,rt)}function Nf(){rt.redis=this.checked,t(50,rt)}function Rf(){rt.mysql=this.checked,t(50,rt)}function Af(){rt.mongo=this.checked,t(50,rt)}function Mf(){bt=this.checked,t(49,bt)}function zf(){Ee=this.checked,t(51,Ee)}function Of(){Ie=this.value,t(10,Ie)}function If(){ve=this.value,t(52,ve)}const Ff=()=>Pe(!0),Uf=()=>Pe(!1),Bf=se=>_t(se),Hf=se=>he(se),Gf=()=>t(58,ot=!ot);function Vf(){ee=ft(this),t(6,ee),t(11,s)}function Wf(){V=ft(this),t(7,V),t(38,ae)}function Jf(){K=ft(this),t(37,K),t(39,W)}const Kf=se=>t(9,ne=se.target.checked?1:0),Yf=()=>t(9,ne=Math.max(0,ne-1));function Qf(){ne=Kt(this.value),t(9,ne),t(0,i)}const Zf=()=>t(9,ne=Math.min(10,ne+1)),Xf=()=>{navigator.clipboard.writeText(X.connection_url),Ce.success("Copied to clipboard!")},xf=se=>window.open(`/api/v1/infra/agent/${se.droplet_id||se.ip}/containers/${se.container_name||X.container_name||m}/logs?do_token=${Dt()}`,"_blank"),ec=se=>window.open(`/api/v1/infra/agent/${se.droplet_id||se.ip}/containers/${se.container_name||X.container_name||m}/logs?do_token=${Dt()}`,"_blank"),tc=se=>window.open(`/api/v1/infra/agent/${se.droplet_id||se.ip}/containers/${se.container_name||X.container_name||m}/logs?do_token=${Dt()}`,"_blank"),lc=()=>{t(45,ge=!1),t(47,We=null)};function nc(se){ge=se,t(45,ge)}const sc=()=>{t(45,ge=!1),t(47,We=null)};return l.$$.update=()=>{if(l.$$.dirty[0]&15&&i==="stateful"&&(!m||c.some(se=>se.value===m))&&t(3,m=u),l.$$.dirty[0]&128|l.$$.dirty[2]&8388608&&t(40,ie=(o||[]).filter(se=>!V||se.region===V)),l.$$.dirty[0]&257&&(i==="stateful"||i==="scheduled")&&re.size>1){const se=[...re][0];re.clear(),se&&re.add(se),t(8,re),t(0,i),t(9,ne)}if(l.$$.dirty[0]&513&&(i==="stateful"||i==="scheduled")&&ne>1&&t(9,ne=1),l.$$.dirty[0]&769&&(i==="stateful"||i==="scheduled")&&ne>0&&re.size>0&&(re.clear(),t(8,re),t(0,i),t(9,ne)),l.$$.dirty[0]&1080&&t(59,n=m&&h&&v?`${m}-${h}-${v}.${Ie}`:""),l.$$.dirty[0]&25|l.$$.dirty[2]&4194304&&m&&h&&i!=="stateful"&&(St&&clearTimeout(St),t(84,St=setTimeout(()=>{tt()},500))),l.$$.dirty[0]&2112&&(s==null?void 0:s.length)>0&&!ee){const se=s.find(de=>(de.name||"").toLowerCase().includes("base"));t(6,ee=(se==null?void 0:se.id)||(se==null?void 0:se.name)||s[0].id||s[0].name)}},[i,u,c,m,h,v,ee,V,re,ne,Ie,s,_,d,g,S,C,k,y,T,D,E,j,L,I,R,z,Y,U,O,P,A,B,J,Q,G,oe,K,ae,W,ie,ue,le,me,X,ge,$e,We,ct,bt,rt,Ee,ve,ze,Me,Ue,et,lt,ot,n,a,Z,it,Yt,Te,Ke,Ye,he,Pe,_t,It,Gt,Ze,Vt,hl,Wt,Xt,nl,sl,cl,Ht,ke,Xe,ye,St,o,gt,st,pt,wt,$t,Ft,gn,Wl,bn,Jl,kn,Kl,De,Fe,Pt,Sl,Fl,dt,wl,rf,af,uf,ff,cf,_f,pf,df,mf,vf,hf,gf,bf,kf,wf,$f,Cf,yf,Sf,qf,jf,Tf,Df,Ef,Lf,Pf,Nf,Rf,Af,Mf,zf,Of,If,Ff,Uf,Bf,Hf,Gf,Vf,Wf,Jf,Kf,Yf,Qf,Zf,Xf,xf,ec,tc,lc,nc,sc]}class sd extends jt{constructor(e){super(),qt(this,e,nd,ed,yt,{},null,[-1,-1,-1,-1,-1,-1,-1,-1])}}function Tr(l,e,t){const n=l.slice();return n[55]=e[t],n}function Dr(l,e,t){const n=l.slice();return n[55]=e[t],n}function Er(l,e,t){const n=l.slice();return n[55]=e[t],n}function Lr(l,e,t){const n=l.slice();return n[62]=e[t],n}function Pr(l,e,t){const n=l.slice();return n[66]=e[t],n}function Nr(l,e,t){const n=l.slice();return n[69]=e[t][0],n[70]=e[t][1],n}function od(l){const e=l.slice(),t=e[14].config_snapshot;return e[65]=t,e}function Rr(l,e,t){const n=l.slice();return n[62]=e[t],n}function Ar(l,e,t){const n=l.slice();return n[75]=e[t],n}function Mr(l,e,t){const n=l.slice();n[78]=e[t];const s=rl(n[78]);return n[79]=s,n}function zr(l){let e,t,n=ha(l[20])+"",s;return{c(){e=p("span"),t=q("Updated "),s=q(n),f(e,"class","last-updated svelte-cuxyqu")},m(o,i){$(o,e,i),r(e,t),r(e,s)},p(o,i){i[0]&1048576&&n!==(n=ha(o[20])+"")&&F(s,n)},d(o){o&&w(e)}}}function id(l){let e;return{c(){e=q("↻ Refresh")},m(t,n){$(t,e,n)},d(t){t&&w(e)}}}function rd(l){let e,t,n=pe(l[19]),s=[];for(let i=0;i<n.length;i+=1)s[i]=Ur(Mr(l,n,i));const o=i=>M(s[i],1,1,()=>{s[i]=null});return{c(){for(let i=0;i<s.length;i+=1)s[i].c();e=Oe()},m(i,a){for(let u=0;u<s.length;u+=1)s[u]&&s[u].m(i,a);$(i,e,a),t=!0},p(i,a){if(a[0]&27787264){n=pe(i[19]);let u;for(u=0;u<n.length;u+=1){const c=Mr(i,n,u);s[u]?(s[u].p(c,a),N(s[u],1)):(s[u]=Ur(c),s[u].c(),N(s[u],1),s[u].m(e.parentNode,e))}for(qe(),u=n.length;u<s.length;u+=1)o(u);je()}},i(i){if(!t){for(let a=0;a<n.length;a+=1)N(s[a]);t=!0}},o(i){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)M(s[a]);t=!1},d(i){i&&w(e),Ne(s,i)}}}function ad(l){let e;return{c(){e=p("tr"),e.innerHTML='<td colspan="12" class="empty-cell svelte-cuxyqu">No deployments found</td>',f(e,"class","svelte-cuxyqu")},m(t,n){$(t,e,n)},p:be,i:be,o:be,d(t){t&&w(e)}}}function ud(l){let e;return{c(){e=p("tr"),e.innerHTML='<td colspan="12" class="loading-cell svelte-cuxyqu">Loading deployment history...</td>',f(e,"class","svelte-cuxyqu")},m(t,n){$(t,e,n)},p:be,i:be,o:be,d(t){t&&w(e)}}}function fd(l){let e=(l[78].environment||"-")+"",t;return{c(){t=q(e)},m(n,s){$(n,t,s)},p(n,s){s[0]&524288&&e!==(e=(n[78].environment||"-")+"")&&F(t,e)},d(n){n&&w(t)}}}function cd(l){let e;return{c(){e=p("span"),e.textContent="-",f(e,"class","version-none svelte-cuxyqu")},m(t,n){$(t,e,n)},p:be,d(t){t&&w(e)}}}function _d(l){let e,t,n=l[78].version+"",s;return{c(){e=p("span"),t=q("v"),s=q(n),f(e,"class","version-badge svelte-cuxyqu")},m(o,i){$(o,e,i),r(e,t),r(e,s)},p(o,i){i[0]&524288&&n!==(n=o[78].version+"")&&F(s,n)},d(o){o&&w(e)}}}function pd(l){let e=l[78].is_rollback?"rollback":"deploy",t;return{c(){t=q(e)},m(n,s){$(n,t,s)},p(n,s){s[0]&524288&&e!==(e=n[78].is_rollback?"rollback":"deploy")&&F(t,e)},d(n){n&&w(t)}}}function dd(l){let e=l[79]+"",t;return{c(){t=q(e)},m(n,s){$(n,t,s)},p(n,s){s[0]&524288&&e!==(e=n[79]+"")&&F(t,e)},d(n){n&&w(t)}}}function Or(l){let e,t,n;function s(){return l[34](l[78])}return{c(){e=p("button"),e.textContent="⚙️",f(e,"class","icon-btn svelte-cuxyqu"),f(e,"title","View config")},m(o,i){$(o,e,i),t||(n=x(e,"click",s),t=!0)},p(o,i){l=o},d(o){o&&w(e),t=!1,n()}}}function Ir(l){let e,t,n;function s(){return l[35](l[78])}return{c(){e=p("button"),e.textContent="📋",f(e,"class","icon-btn svelte-cuxyqu"),f(e,"title","View logs")},m(o,i){$(o,e,i),t||(n=x(e,"click",s),t=!0)},p(o,i){l=o},d(o){o&&w(e),t=!1,n()}}}function Fr(l){let e,t,n;function s(){return l[36](l[78])}return{c(){e=p("button"),e.textContent="⏪",f(e,"class","icon-btn rollback-icon-btn svelte-cuxyqu"),f(e,"title","Rollback")},m(o,i){$(o,e,i),t||(n=x(e,"click",s),t=!0)},p(o,i){l=o},d(o){o&&w(e),t=!1,n()}}}function Ur(l){let e,t,n,s=(l[78].project||"-")+"",o,i,a,u,c=(l[78].service||l[78].name)+"",_,d,m,h,v,g,S,C,k=el(l[78].deployed_at||l[78].created_at)+"",y,T,D,E=(l[78].deployed_by||l[78].user||"-")+"",j,L,I,R,z,Y,U,O,H,P,A=(l[78].comment||"-")+"",B,J,Q,G,oe,ee,V,K,ae;h=new xe({props:{variant:l[78].environment==="prod"?"purple":l[78].environment==="staging"?"warning":"info",$$slots:{default:[fd]},$$scope:{ctx:l}}});function W(ne,X){return ne[78].version?_d:cd}let ie=W(l),ue=ie(l);z=new xe({props:{variant:l[78].is_rollback?"warning":"info",$$slots:{default:[pd]},$$scope:{ctx:l}}}),O=new xe({props:{variant:zl(l[79]),$$slots:{default:[dd]},$$scope:{ctx:l}}});let le=l[78].config_snapshot&&Or(l),me=l[78].has_logs&&Ir(l),re=l[78].is_current_active&&Fr(l);return{c(){e=p("tr"),t=p("td"),n=p("span"),o=q(s),i=b(),a=p("td"),u=p("span"),_=q(c),d=b(),m=p("td"),_e(h.$$.fragment),v=b(),g=p("td"),ue.c(),S=b(),C=p("td"),y=q(k),T=b(),D=p("td"),j=q(E),I=b(),R=p("td"),_e(z.$$.fragment),Y=b(),U=p("td"),_e(O.$$.fragment),H=b(),P=p("td"),B=q(A),J=b(),Q=p("td"),le&&le.c(),G=b(),oe=p("td"),me&&me.c(),ee=b(),V=p("td"),re&&re.c(),K=b(),f(n,"class","project-name svelte-cuxyqu"),f(t,"class","svelte-cuxyqu"),f(u,"class","service-name svelte-cuxyqu"),f(a,"class","svelte-cuxyqu"),f(m,"class","svelte-cuxyqu"),f(g,"class","version-cell svelte-cuxyqu"),f(C,"class","date-cell svelte-cuxyqu"),f(D,"class","by-cell svelte-cuxyqu"),f(D,"title",L=l[78].deployed_by||l[78].user||"-"),f(R,"class","svelte-cuxyqu"),f(U,"class","svelte-cuxyqu"),f(P,"class","comment-cell svelte-cuxyqu"),f(Q,"class","config-cell svelte-cuxyqu"),f(oe,"class","logs-cell svelte-cuxyqu"),f(V,"class","rollback-cell svelte-cuxyqu"),f(e,"class","svelte-cuxyqu")},m(ne,X){$(ne,e,X),r(e,t),r(t,n),r(n,o),r(e,i),r(e,a),r(a,u),r(u,_),r(e,d),r(e,m),fe(h,m,null),r(e,v),r(e,g),ue.m(g,null),r(e,S),r(e,C),r(C,y),r(e,T),r(e,D),r(D,j),r(e,I),r(e,R),fe(z,R,null),r(e,Y),r(e,U),fe(O,U,null),r(e,H),r(e,P),r(P,B),r(e,J),r(e,Q),le&&le.m(Q,null),r(e,G),r(e,oe),me&&me.m(oe,null),r(e,ee),r(e,V),re&&re.m(V,null),r(e,K),ae=!0},p(ne,X){(!ae||X[0]&524288)&&s!==(s=(ne[78].project||"-")+"")&&F(o,s),(!ae||X[0]&524288)&&c!==(c=(ne[78].service||ne[78].name)+"")&&F(_,c);const Z={};X[0]&524288&&(Z.variant=ne[78].environment==="prod"?"purple":ne[78].environment==="staging"?"warning":"info"),X[0]&524288|X[2]&1048576&&(Z.$$scope={dirty:X,ctx:ne}),h.$set(Z),ie===(ie=W(ne))&&ue?ue.p(ne,X):(ue.d(1),ue=ie(ne),ue&&(ue.c(),ue.m(g,null))),(!ae||X[0]&524288)&&k!==(k=el(ne[78].deployed_at||ne[78].created_at)+"")&&F(y,k),(!ae||X[0]&524288)&&E!==(E=(ne[78].deployed_by||ne[78].user||"-")+"")&&F(j,E),(!ae||X[0]&524288&&L!==(L=ne[78].deployed_by||ne[78].user||"-"))&&f(D,"title",L);const ge={};X[0]&524288&&(ge.variant=ne[78].is_rollback?"warning":"info"),X[0]&524288|X[2]&1048576&&(ge.$$scope={dirty:X,ctx:ne}),z.$set(ge);const $e={};X[0]&524288&&($e.variant=zl(ne[79])),X[0]&524288|X[2]&1048576&&($e.$$scope={dirty:X,ctx:ne}),O.$set($e),(!ae||X[0]&524288)&&A!==(A=(ne[78].comment||"-")+"")&&F(B,A),ne[78].config_snapshot?le?le.p(ne,X):(le=Or(ne),le.c(),le.m(Q,null)):le&&(le.d(1),le=null),ne[78].has_logs?me?me.p(ne,X):(me=Ir(ne),me.c(),me.m(oe,null)):me&&(me.d(1),me=null),ne[78].is_current_active?re?re.p(ne,X):(re=Fr(ne),re.c(),re.m(V,null)):re&&(re.d(1),re=null)},i(ne){ae||(N(h.$$.fragment,ne),N(z.$$.fragment,ne),N(O.$$.fragment,ne),ae=!0)},o(ne){M(h.$$.fragment,ne),M(z.$$.fragment,ne),M(O.$$.fragment,ne),ae=!1},d(ne){ne&&w(e),ce(h),ue.d(),ce(z),ce(O),le&&le.d(),me&&me.d(),re&&re.d()}}}function md(l){let e,t,n,s,o,i,a,u;const c=[ud,ad,rd],_=[];function d(m,h){return m[0]&&m[19].length===0?0:m[19].length===0?1:2}return i=d(l),a=_[i]=c[i](l),{c(){e=p("div"),t=p("table"),n=p("thead"),n.innerHTML='<tr class="svelte-cuxyqu"><th class="svelte-cuxyqu">Project</th> <th class="svelte-cuxyqu">Service</th> <th class="svelte-cuxyqu">Environment</th> <th class="version-col svelte-cuxyqu">v</th> <th class="svelte-cuxyqu">Deployed</th> <th class="svelte-cuxyqu">By</th> <th class="svelte-cuxyqu">Type</th> <th class="svelte-cuxyqu">Status</th> <th class="svelte-cuxyqu">Comment</th> <th class="config-col svelte-cuxyqu"></th> <th class="logs-col svelte-cuxyqu"></th> <th class="rollback-col svelte-cuxyqu"></th></tr>',s=b(),o=p("tbody"),a.c(),f(t,"class","table svelte-cuxyqu"),f(e,"class","table-container svelte-cuxyqu")},m(m,h){$(m,e,h),r(e,t),r(t,n),r(t,s),r(t,o),_[i].m(o,null),u=!0},p(m,h){let v=i;i=d(m),i===v?_[i].p(m,h):(qe(),M(_[v],1,1,()=>{_[v]=null}),je(),a=_[i],a?a.p(m,h):(a=_[i]=c[i](m),a.c()),N(a,1),a.m(o,null))},i(m){u||(N(a),u=!0)},o(m){M(a),u=!1},d(m){m&&w(e),_[i].d()}}}function Br(l){let e,t,n,s=(l[2].service||l[2].name)+"",o,i,a,u=l[2].project+"",c,_,d=l[2].environment+"",m,h,v,g,S,C,k,y=el(l[2].deployed_at||l[2].created_at)+"",T,D,E,j,L=(l[2].deployed_by||l[2].user||"unknown")+"",I,R,z,Y,U,O,H,P,A,B,J=l[2].comment&&Hr(l);const Q=[hd,vd],G=[];function oe(V,K){return V[3].length===0?0:1}H=oe(l),P=G[H]=Q[H](l);let ee=l[6].length>0&&Vr(l);return{c(){e=p("div"),t=p("div"),n=p("div"),o=q(s),i=b(),a=p("div"),c=q(u),_=q(" / "),m=q(d),h=b(),v=p("div"),g=p("label"),g.textContent="📍 Current Deployment",S=b(),C=p("div"),k=p("div"),T=q(y),D=b(),E=p("div"),j=q("by "),I=q(L),R=b(),J&&J.c(),z=b(),Y=p("div"),U=p("label"),U.textContent="🎯 Rollback to",O=b(),P.c(),A=b(),ee&&ee.c(),f(n,"class","service-name svelte-cuxyqu"),f(a,"class","service-coords svelte-cuxyqu"),f(t,"class","service-info svelte-cuxyqu"),f(g,"class","svelte-cuxyqu"),f(k,"class","deploy-date svelte-cuxyqu"),f(E,"class","deploy-by svelte-cuxyqu"),f(C,"class","deployment-card current svelte-cuxyqu"),f(v,"class","section svelte-cuxyqu"),f(U,"class","svelte-cuxyqu"),f(Y,"class","section svelte-cuxyqu"),f(e,"class","rollback-content svelte-cuxyqu")},m(V,K){$(V,e,K),r(e,t),r(t,n),r(n,o),r(t,i),r(t,a),r(a,c),r(a,_),r(a,m),r(e,h),r(e,v),r(v,g),r(v,S),r(v,C),r(C,k),r(k,T),r(C,D),r(C,E),r(E,j),r(E,I),r(C,R),J&&J.m(C,null),r(e,z),r(e,Y),r(Y,U),r(Y,O),G[H].m(Y,null),r(e,A),ee&&ee.m(e,null),B=!0},p(V,K){(!B||K[0]&4)&&s!==(s=(V[2].service||V[2].name)+"")&&F(o,s),(!B||K[0]&4)&&u!==(u=V[2].project+"")&&F(c,u),(!B||K[0]&4)&&d!==(d=V[2].environment+"")&&F(m,d),(!B||K[0]&4)&&y!==(y=el(V[2].deployed_at||V[2].created_at)+"")&&F(T,y),(!B||K[0]&4)&&L!==(L=(V[2].deployed_by||V[2].user||"unknown")+"")&&F(I,L),V[2].comment?J?J.p(V,K):(J=Hr(V),J.c(),J.m(C,null)):J&&(J.d(1),J=null);let ae=H;H=oe(V),H===ae?G[H].p(V,K):(qe(),M(G[ae],1,1,()=>{G[ae]=null}),je(),P=G[H],P?P.p(V,K):(P=G[H]=Q[H](V),P.c()),N(P,1),P.m(Y,null)),V[6].length>0?ee?ee.p(V,K):(ee=Vr(V),ee.c(),ee.m(e,null)):ee&&(ee.d(1),ee=null)},i(V){B||(N(P),B=!0)},o(V){M(P),B=!1},d(V){V&&w(e),J&&J.d(),G[H].d(),ee&&ee.d()}}}function Hr(l){let e,t=l[2].comment+"",n;return{c(){e=p("div"),n=q(t),f(e,"class","deploy-comment svelte-cuxyqu")},m(s,o){$(s,e,o),r(e,n)},p(s,o){o[0]&4&&t!==(t=s[2].comment+"")&&F(n,t)},d(s){s&&w(e)}}}function vd(l){let e,t,n=pe(l[3]),s=[];for(let i=0;i<n.length;i+=1)s[i]=Gr(Ar(l,n,i));const o=i=>M(s[i],1,1,()=>{s[i]=null});return{c(){e=p("div");for(let i=0;i<s.length;i+=1)s[i].c();f(e,"class","deployment-list svelte-cuxyqu")},m(i,a){$(i,e,a);for(let u=0;u<s.length;u+=1)s[u]&&s[u].m(e,null);t=!0},p(i,a){if(a[0]&56){n=pe(i[3]);let u;for(u=0;u<n.length;u+=1){const c=Ar(i,n,u);s[u]?(s[u].p(c,a),N(s[u],1)):(s[u]=Gr(c),s[u].c(),N(s[u],1),s[u].m(e,null))}for(qe(),u=n.length;u<s.length;u+=1)o(u);je()}},i(i){if(!t){for(let a=0;a<n.length;a+=1)N(s[a]);t=!0}},o(i){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)M(s[a]);t=!1},d(i){i&&w(e),Ne(s,i)}}}function hd(l){let e;return{c(){e=p("div"),e.textContent="No previous deployments found",f(e,"class","no-deployments svelte-cuxyqu")},m(t,n){$(t,e,n)},p:be,i:be,o:be,d(t){t&&w(e)}}}function gd(l){let e,t=l[75].id.substring(0,8)+"",n;return{c(){e=p("span"),n=q(t),f(e,"class","version-badge muted svelte-cuxyqu")},m(s,o){$(s,e,o),r(e,n)},p(s,o){o[0]&8&&t!==(t=s[75].id.substring(0,8)+"")&&F(n,t)},d(s){s&&w(e)}}}function bd(l){let e,t,n=l[75].version+"",s;return{c(){e=p("span"),t=q("v"),s=q(n),f(e,"class","version-badge svelte-cuxyqu")},m(o,i){$(o,e,i),r(e,t),r(e,s)},p(o,i){i[0]&8&&n!==(n=o[75].version+"")&&F(s,n)},d(o){o&&w(e)}}}function kd(l){let e=rl(l[75])+"",t;return{c(){t=q(e)},m(n,s){$(n,t,s)},p(n,s){s[0]&8&&e!==(e=rl(n[75])+"")&&F(t,e)},d(n){n&&w(t)}}}function Gr(l){let e,t,n,s=!1,o,i,a,u,c,_=el(l[75].deployed_at||l[75].created_at)+"",d,m,h,v,g=(l[75].deployed_by||l[75].user||"unknown")+"",S,C,k,y,T,D,E,j;function L(z,Y){return z[75].version?bd:gd}let I=L(l),R=I(l);return k=new xe({props:{variant:zl(rl(l[75])),$$slots:{default:[kd]},$$scope:{ctx:l}}}),D=pn(l[39][0]),{c(){e=p("label"),t=p("input"),o=b(),i=p("div"),R.c(),a=b(),u=p("div"),c=p("div"),d=q(_),m=b(),h=p("div"),v=q("by "),S=q(g),C=b(),_e(k.$$.fragment),y=b(),f(t,"type","radio"),t.__value=n=l[75].id,te(t,t.__value),t.disabled=l[5],f(t,"class","svelte-cuxyqu"),f(i,"class","deploy-version svelte-cuxyqu"),f(c,"class","deploy-date svelte-cuxyqu"),f(h,"class","deploy-by svelte-cuxyqu"),f(u,"class","deploy-info svelte-cuxyqu"),f(e,"class","deployment-option svelte-cuxyqu"),we(e,"selected",l[4]===l[75].id),D.p(t)},m(z,Y){$(z,e,Y),r(e,t),t.checked=t.__value===l[4],r(e,o),r(e,i),R.m(i,null),r(e,a),r(e,u),r(u,c),r(c,d),r(u,m),r(u,h),r(h,v),r(h,S),r(e,C),fe(k,e,null),r(e,y),T=!0,E||(j=x(t,"change",l[38]),E=!0)},p(z,Y){(!T||Y[0]&8&&n!==(n=z[75].id))&&(t.__value=n,te(t,t.__value),s=!0),(!T||Y[0]&32)&&(t.disabled=z[5]),(s||Y[0]&24)&&(t.checked=t.__value===z[4]),I===(I=L(z))&&R?R.p(z,Y):(R.d(1),R=I(z),R&&(R.c(),R.m(i,null))),(!T||Y[0]&8)&&_!==(_=el(z[75].deployed_at||z[75].created_at)+"")&&F(d,_),(!T||Y[0]&8)&&g!==(g=(z[75].deployed_by||z[75].user||"unknown")+"")&&F(S,g);const U={};Y[0]&8&&(U.variant=zl(rl(z[75]))),Y[0]&8|Y[2]&1048576&&(U.$$scope={dirty:Y,ctx:z}),k.$set(U),(!T||Y[0]&24)&&we(e,"selected",z[4]===z[75].id)},i(z){T||(N(k.$$.fragment,z),T=!0)},o(z){M(k.$$.fragment,z),T=!1},d(z){z&&w(e),R.d(),ce(k),D.r(),E=!1,j()}}}function Vr(l){let e,t,n,s,o,i=pe(l[6]),a=[];for(let c=0;c<i.length;c+=1)a[c]=Wr(Rr(l,i,c));let u=l[5]&&Jr();return{c(){e=p("div"),t=p("label"),t.textContent="📋 Progress",n=b(),s=p("div");for(let c=0;c<a.length;c+=1)a[c].c();o=b(),u&&u.c(),f(t,"class","svelte-cuxyqu"),f(s,"class","rollback-logs svelte-cuxyqu"),f(e,"class","section rollback-logs-section svelte-cuxyqu")},m(c,_){$(c,e,_),r(e,t),r(e,n),r(e,s);for(let d=0;d<a.length;d+=1)a[d]&&a[d].m(s,null);r(s,o),u&&u.m(s,null)},p(c,_){if(_[0]&64){i=pe(c[6]);let d;for(d=0;d<i.length;d+=1){const m=Rr(c,i,d);a[d]?a[d].p(m,_):(a[d]=Wr(m),a[d].c(),a[d].m(s,o))}for(;d<a.length;d+=1)a[d].d(1);a.length=i.length}c[5]?u||(u=Jr(),u.c(),u.m(s,null)):u&&(u.d(1),u=null)},d(c){c&&w(e),Ne(a,c),u&&u.d()}}}function Wr(l){let e,t=l[62].message+"",n,s;return{c(){e=p("div"),n=q(t),f(e,"class",s="log-entry log-"+l[62].type+" svelte-cuxyqu")},m(o,i){$(o,e,i),r(e,n)},p(o,i){i[0]&64&&t!==(t=o[62].message+"")&&F(n,t),i[0]&64&&s!==(s="log-entry log-"+o[62].type+" svelte-cuxyqu")&&f(e,"class",s)},d(o){o&&w(e)}}}function Jr(l){let e;return{c(){e=p("div"),e.innerHTML='<span class="spinner svelte-cuxyqu">⏳</span> Working...',f(e,"class","log-entry log-info svelte-cuxyqu")},m(t,n){$(t,e,n)},d(t){t&&w(e)}}}function wd(l){let e,t,n=l[2]&&Br(l);return{c(){n&&n.c(),e=Oe()},m(s,o){n&&n.m(s,o),$(s,e,o),t=!0},p(s,o){s[2]?n?(n.p(s,o),o[0]&4&&N(n,1)):(n=Br(s),n.c(),N(n,1),n.m(e.parentNode,e)):n&&(qe(),M(n,1,1,()=>{n=null}),je())},i(s){t||(N(n),t=!0)},o(s){M(n),t=!1},d(s){s&&w(e),n&&n.d(s)}}}function $d(l){let e=l[6].length>0?"Close":"Cancel",t;return{c(){t=q(e)},m(n,s){$(n,t,s)},p(n,s){s[0]&64&&e!==(e=n[6].length>0?"Close":"Cancel")&&F(t,e)},d(n){n&&w(t)}}}function Cd(l){let e;return{c(){e=q("⏪ Execute Rollback")},m(t,n){$(t,e,n)},d(t){t&&w(e)}}}function yd(l){let e;return{c(){e=q("⏳ Rolling back...")},m(t,n){$(t,e,n)},d(t){t&&w(e)}}}function Sd(l){let e;function t(o,i){return o[5]?yd:Cd}let n=t(l),s=n(l);return{c(){s.c(),e=Oe()},m(o,i){s.m(o,i),$(o,e,i)},p(o,i){n!==(n=t(o))&&(s.d(1),s=n(o),s&&(s.c(),s.m(e.parentNode,e)))},d(o){o&&w(e),s.d(o)}}}function qd(l){let e,t,n,s,o;return t=new Be({props:{variant:"ghost",$$slots:{default:[$d]},$$scope:{ctx:l}}}),t.$on("click",l[37]),s=new Be({props:{variant:"warning",disabled:!l[4]||l[5],$$slots:{default:[Sd]},$$scope:{ctx:l}}}),s.$on("click",l[25]),{c(){e=p("div"),_e(t.$$.fragment),n=b(),_e(s.$$.fragment),f(e,"slot","footer")},m(i,a){$(i,e,a),fe(t,e,null),r(e,n),fe(s,e,null),o=!0},p(i,a){const u={};a[0]&64|a[2]&1048576&&(u.$$scope={dirty:a,ctx:i}),t.$set(u);const c={};a[0]&48&&(c.disabled=!i[4]||i[5]),a[0]&32|a[2]&1048576&&(c.$$scope={dirty:a,ctx:i}),s.$set(c)},i(i){o||(N(t.$$.fragment,i),N(s.$$.fragment,i),o=!0)},o(i){M(t.$$.fragment,i),M(s.$$.fragment,i),o=!1},d(i){i&&w(e),ce(t),ce(s)}}}function Kr(l){let e,t,n,s=(l[14].service_name||l[14].service)+"",o,i,a,u=l[14].environment+"",c,_,d=el(l[14].deployed_at)+"",m,h,v,g,S;const C=[Td,jd],k=[];function y(D,E){return D[14].config_snapshot?0:1}function T(D,E){return E===0?od(D):D}return v=y(l),g=k[v]=C[v](T(l,v)),{c(){e=p("div"),t=p("div"),n=p("span"),o=q(s),i=b(),a=p("span"),c=q(u),_=q(" • "),m=q(d),h=b(),g.c(),f(n,"class","service-name svelte-cuxyqu"),f(a,"class","meta svelte-cuxyqu"),f(t,"class","config-header-info svelte-cuxyqu"),f(e,"class","config-content svelte-cuxyqu")},m(D,E){$(D,e,E),r(e,t),r(t,n),r(n,o),r(t,i),r(t,a),r(a,c),r(a,_),r(a,m),r(e,h),k[v].m(e,null),S=!0},p(D,E){(!S||E[0]&16384)&&s!==(s=(D[14].service_name||D[14].service)+"")&&F(o,s),(!S||E[0]&16384)&&u!==(u=D[14].environment+"")&&F(c,u),(!S||E[0]&16384)&&d!==(d=el(D[14].deployed_at)+"")&&F(m,d);let j=v;v=y(D),v===j?k[v].p(T(D,v),E):(qe(),M(k[j],1,1,()=>{k[j]=null}),je(),g=k[v],g?g.p(T(D,v),E):(g=k[v]=C[v](T(D,v)),g.c()),N(g,1),g.m(e,null))},i(D){S||(N(g),S=!0)},o(D){M(g),S=!1},d(D){D&&w(e),k[v].d()}}}function jd(l){let e;return{c(){e=p("div"),e.textContent="No config snapshot available",f(e,"class","no-config svelte-cuxyqu")},m(t,n){$(t,e,n)},p:be,i:be,o:be,d(t){t&&w(e)}}}function Td(l){var ie,ue;let e,t,n,s,o,i,a=(l[65].source_type||"-")+"",u,c,_,d,m,h,v,g,S=(l[65].port||"-")+"",C,k,y,T,D,E,j,L,I,R,z=l[65].env_vars&&Object.keys(l[65].env_vars).length>0,Y,U,O,H=l[65].git_url&&Yr(l),P=l[65].git_branch&&Qr(l),A=l[65].image&&Zr(l),B=l[65].container_port&&Xr(l),J=l[65].host_port&&xr(l),Q=l[65].snapshot_id&&ea(l),G=l[65].region&&ta(l),oe=l[65].size&&la(l),ee=((ie=l[65].server_ips)==null?void 0:ie.length)&&na(l),V=l[65].setup_domain&&sa(),K=l[65].base_domain&&oa(l),ae=z&&ia(l),W=((ue=l[65].tags)==null?void 0:ue.length)&&aa(l);return{c(){e=p("table"),t=p("tbody"),n=p("tr"),s=p("td"),s.textContent="Source Type",o=p("td"),i=p("strong"),u=q(a),c=b(),H&&H.c(),_=b(),P&&P.c(),d=b(),A&&A.c(),m=b(),h=p("tr"),v=p("td"),v.textContent="Port",g=p("td"),C=q(S),k=b(),B&&B.c(),y=b(),J&&J.c(),T=b(),Q&&Q.c(),D=b(),G&&G.c(),E=b(),oe&&oe.c(),j=b(),ee&&ee.c(),L=b(),V&&V.c(),I=b(),K&&K.c(),R=b(),ae&&ae.c(),Y=b(),W&&W.c(),U=Oe(),f(s,"class","label svelte-cuxyqu"),f(o,"class","svelte-cuxyqu"),f(v,"class","label svelte-cuxyqu"),f(g,"class","svelte-cuxyqu"),f(t,"class","svelte-cuxyqu"),f(e,"class","config-table svelte-cuxyqu")},m(le,me){$(le,e,me),r(e,t),r(t,n),r(n,s),r(n,o),r(o,i),r(i,u),r(t,c),H&&H.m(t,null),r(t,_),P&&P.m(t,null),r(t,d),A&&A.m(t,null),r(t,m),r(t,h),r(h,v),r(h,g),r(g,C),r(t,k),B&&B.m(t,null),r(t,y),J&&J.m(t,null),r(t,T),Q&&Q.m(t,null),r(t,D),G&&G.m(t,null),r(t,E),oe&&oe.m(t,null),r(t,j),ee&&ee.m(t,null),r(t,L),V&&V.m(t,null),r(t,I),K&&K.m(t,null),$(le,R,me),ae&&ae.m(le,me),$(le,Y,me),W&&W.m(le,me),$(le,U,me),O=!0},p(le,me){var re,ne;(!O||me[0]&16384)&&a!==(a=(le[65].source_type||"-")+"")&&F(u,a),le[65].git_url?H?H.p(le,me):(H=Yr(le),H.c(),H.m(t,_)):H&&(H.d(1),H=null),le[65].git_branch?P?P.p(le,me):(P=Qr(le),P.c(),P.m(t,d)):P&&(P.d(1),P=null),le[65].image?A?A.p(le,me):(A=Zr(le),A.c(),A.m(t,m)):A&&(A.d(1),A=null),(!O||me[0]&16384)&&S!==(S=(le[65].port||"-")+"")&&F(C,S),le[65].container_port?B?B.p(le,me):(B=Xr(le),B.c(),B.m(t,y)):B&&(B.d(1),B=null),le[65].host_port?J?J.p(le,me):(J=xr(le),J.c(),J.m(t,T)):J&&(J.d(1),J=null),le[65].snapshot_id?Q?Q.p(le,me):(Q=ea(le),Q.c(),Q.m(t,D)):Q&&(Q.d(1),Q=null),le[65].region?G?G.p(le,me):(G=ta(le),G.c(),G.m(t,E)):G&&(G.d(1),G=null),le[65].size?oe?oe.p(le,me):(oe=la(le),oe.c(),oe.m(t,j)):oe&&(oe.d(1),oe=null),(re=le[65].server_ips)!=null&&re.length?ee?ee.p(le,me):(ee=na(le),ee.c(),ee.m(t,L)):ee&&(ee.d(1),ee=null),le[65].setup_domain?V||(V=sa(),V.c(),V.m(t,I)):V&&(V.d(1),V=null),le[65].base_domain?K?K.p(le,me):(K=oa(le),K.c(),K.m(t,null)):K&&(K.d(1),K=null),me[0]&16384&&(z=le[65].env_vars&&Object.keys(le[65].env_vars).length>0),z?ae?ae.p(le,me):(ae=ia(le),ae.c(),ae.m(Y.parentNode,Y)):ae&&(ae.d(1),ae=null),(ne=le[65].tags)!=null&&ne.length?W?(W.p(le,me),me[0]&16384&&N(W,1)):(W=aa(le),W.c(),N(W,1),W.m(U.parentNode,U)):W&&(qe(),M(W,1,1,()=>{W=null}),je())},i(le){O||(N(W),O=!0)},o(le){M(W),O=!1},d(le){le&&(w(e),w(R),w(Y),w(U)),H&&H.d(),P&&P.d(),A&&A.d(),B&&B.d(),J&&J.d(),Q&&Q.d(),G&&G.d(),oe&&oe.d(),ee&&ee.d(),V&&V.d(),K&&K.d(),ae&&ae.d(le),W&&W.d(le)}}}function Yr(l){let e,t,n,s=l[65].git_url+"",o;return{c(){e=p("tr"),t=p("td"),t.textContent="Git URL",n=p("td"),o=q(s),f(t,"class","label svelte-cuxyqu"),f(n,"class","svelte-cuxyqu")},m(i,a){$(i,e,a),r(e,t),r(e,n),r(n,o)},p(i,a){a[0]&16384&&s!==(s=i[65].git_url+"")&&F(o,s)},d(i){i&&w(e)}}}function Qr(l){let e,t,n,s=l[65].git_branch+"",o;return{c(){e=p("tr"),t=p("td"),t.textContent="Git Branch",n=p("td"),o=q(s),f(t,"class","label svelte-cuxyqu"),f(n,"class","svelte-cuxyqu")},m(i,a){$(i,e,a),r(e,t),r(e,n),r(n,o)},p(i,a){a[0]&16384&&s!==(s=i[65].git_branch+"")&&F(o,s)},d(i){i&&w(e)}}}function Zr(l){let e,t,n,s=l[65].image+"",o;return{c(){e=p("tr"),t=p("td"),t.textContent="Image",n=p("td"),o=q(s),f(t,"class","label svelte-cuxyqu"),f(n,"class","svelte-cuxyqu")},m(i,a){$(i,e,a),r(e,t),r(e,n),r(n,o)},p(i,a){a[0]&16384&&s!==(s=i[65].image+"")&&F(o,s)},d(i){i&&w(e)}}}function Xr(l){let e,t,n,s=l[65].container_port+"",o;return{c(){e=p("tr"),t=p("td"),t.textContent="Container Port",n=p("td"),o=q(s),f(t,"class","label svelte-cuxyqu"),f(n,"class","svelte-cuxyqu")},m(i,a){$(i,e,a),r(e,t),r(e,n),r(n,o)},p(i,a){a[0]&16384&&s!==(s=i[65].container_port+"")&&F(o,s)},d(i){i&&w(e)}}}function xr(l){let e,t,n,s=l[65].host_port+"",o;return{c(){e=p("tr"),t=p("td"),t.textContent="Host Port",n=p("td"),o=q(s),f(t,"class","label svelte-cuxyqu"),f(n,"class","svelte-cuxyqu")},m(i,a){$(i,e,a),r(e,t),r(e,n),r(n,o)},p(i,a){a[0]&16384&&s!==(s=i[65].host_port+"")&&F(o,s)},d(i){i&&w(e)}}}function ea(l){let e,t,n,s=l[65].snapshot_id+"",o;return{c(){e=p("tr"),t=p("td"),t.textContent="Snapshot ID",n=p("td"),o=q(s),f(t,"class","label svelte-cuxyqu"),f(n,"class","svelte-cuxyqu")},m(i,a){$(i,e,a),r(e,t),r(e,n),r(n,o)},p(i,a){a[0]&16384&&s!==(s=i[65].snapshot_id+"")&&F(o,s)},d(i){i&&w(e)}}}function ta(l){let e,t,n,s=l[65].region+"",o;return{c(){e=p("tr"),t=p("td"),t.textContent="Region",n=p("td"),o=q(s),f(t,"class","label svelte-cuxyqu"),f(n,"class","svelte-cuxyqu")},m(i,a){$(i,e,a),r(e,t),r(e,n),r(n,o)},p(i,a){a[0]&16384&&s!==(s=i[65].region+"")&&F(o,s)},d(i){i&&w(e)}}}function la(l){let e,t,n,s=l[65].size+"",o;return{c(){e=p("tr"),t=p("td"),t.textContent="Size",n=p("td"),o=q(s),f(t,"class","label svelte-cuxyqu"),f(n,"class","svelte-cuxyqu")},m(i,a){$(i,e,a),r(e,t),r(e,n),r(n,o)},p(i,a){a[0]&16384&&s!==(s=i[65].size+"")&&F(o,s)},d(i){i&&w(e)}}}function na(l){let e,t,n,s=l[65].server_ips.join(", ")+"",o;return{c(){e=p("tr"),t=p("td"),t.textContent="Servers",n=p("td"),o=q(s),f(t,"class","label svelte-cuxyqu"),f(n,"class","svelte-cuxyqu")},m(i,a){$(i,e,a),r(e,t),r(e,n),r(n,o)},p(i,a){a[0]&16384&&s!==(s=i[65].server_ips.join(", ")+"")&&F(o,s)},d(i){i&&w(e)}}}function sa(l){let e;return{c(){e=p("tr"),e.innerHTML='<td class="label svelte-cuxyqu">Setup Domain</td><td class="svelte-cuxyqu">Yes</td>'},m(t,n){$(t,e,n)},d(t){t&&w(e)}}}function oa(l){let e,t,n,s=l[65].base_domain+"",o;return{c(){e=p("tr"),t=p("td"),t.textContent="Base Domain",n=p("td"),o=q(s),f(t,"class","label svelte-cuxyqu"),f(n,"class","svelte-cuxyqu")},m(i,a){$(i,e,a),r(e,t),r(e,n),r(n,o)},p(i,a){a[0]&16384&&s!==(s=i[65].base_domain+"")&&F(o,s)},d(i){i&&w(e)}}}function ia(l){let e,t,n,s,o=pe(Object.entries(l[65].env_vars)),i=[];for(let a=0;a<o.length;a+=1)i[a]=ra(Nr(l,o,a));return{c(){e=p("div"),t=p("div"),t.textContent="Environment Variables",n=b(),s=p("div");for(let a=0;a<i.length;a+=1)i[a].c();f(t,"class","section-title svelte-cuxyqu"),f(s,"class","env-list svelte-cuxyqu"),f(e,"class","env-section svelte-cuxyqu")},m(a,u){$(a,e,u),r(e,t),r(e,n),r(e,s);for(let c=0;c<i.length;c+=1)i[c]&&i[c].m(s,null)},p(a,u){if(u[0]&16384){o=pe(Object.entries(a[65].env_vars));let c;for(c=0;c<o.length;c+=1){const _=Nr(a,o,c);i[c]?i[c].p(_,u):(i[c]=ra(_),i[c].c(),i[c].m(s,null))}for(;c<i.length;c+=1)i[c].d(1);i.length=o.length}},d(a){a&&w(e),Ne(i,a)}}}function ra(l){let e,t=l[69]+"",n,s,o=(l[70].length>20?l[70].substring(0,20)+"...":l[70])+"",i;return{c(){e=p("div"),n=q(t),s=q("="),i=q(o),f(e,"class","env-item svelte-cuxyqu")},m(a,u){$(a,e,u),r(e,n),r(e,s),r(e,i)},p(a,u){u[0]&16384&&t!==(t=a[69]+"")&&F(n,t),u[0]&16384&&o!==(o=(a[70].length>20?a[70].substring(0,20)+"...":a[70])+"")&&F(i,o)},d(a){a&&w(e)}}}function aa(l){let e,t,n,s,o,i=pe(l[65].tags),a=[];for(let c=0;c<i.length;c+=1)a[c]=ua(Pr(l,i,c));const u=c=>M(a[c],1,1,()=>{a[c]=null});return{c(){e=p("div"),t=p("div"),t.textContent="Tags",n=b(),s=p("div");for(let c=0;c<a.length;c+=1)a[c].c();f(t,"class","section-title svelte-cuxyqu"),f(s,"class","tags-list svelte-cuxyqu"),f(e,"class","tags-section svelte-cuxyqu")},m(c,_){$(c,e,_),r(e,t),r(e,n),r(e,s);for(let d=0;d<a.length;d+=1)a[d]&&a[d].m(s,null);o=!0},p(c,_){if(_[0]&16384){i=pe(c[65].tags);let d;for(d=0;d<i.length;d+=1){const m=Pr(c,i,d);a[d]?(a[d].p(m,_),N(a[d],1)):(a[d]=ua(m),a[d].c(),N(a[d],1),a[d].m(s,null))}for(qe(),d=i.length;d<a.length;d+=1)u(d);je()}},i(c){if(!o){for(let _=0;_<i.length;_+=1)N(a[_]);o=!0}},o(c){a=a.filter(Boolean);for(let _=0;_<a.length;_+=1)M(a[_]);o=!1},d(c){c&&w(e),Ne(a,c)}}}function Dd(l){let e=l[66]+"",t;return{c(){t=q(e)},m(n,s){$(n,t,s)},p(n,s){s[0]&16384&&e!==(e=n[66]+"")&&F(t,e)},d(n){n&&w(t)}}}function ua(l){let e,t;return e=new xe({props:{$$slots:{default:[Dd]},$$scope:{ctx:l}}}),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const o={};s[0]&16384|s[2]&1048576&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function Ed(l){let e,t,n=l[14]&&Kr(l);return{c(){n&&n.c(),e=Oe()},m(s,o){n&&n.m(s,o),$(s,e,o),t=!0},p(s,o){s[14]?n?(n.p(s,o),o[0]&16384&&N(n,1)):(n=Kr(s),n.c(),N(n,1),n.m(e.parentNode,e)):n&&(qe(),M(n,1,1,()=>{n=null}),je())},i(s){t||(N(n),t=!0)},o(s){M(n),t=!1},d(s){s&&w(e),n&&n.d(s)}}}function Ld(l){let e;return{c(){e=q("🚀 Redeploy with this config")},m(t,n){$(t,e,n)},d(t){t&&w(e)}}}function Pd(l){let e;return{c(){e=q("Close")},m(t,n){$(t,e,n)},d(t){t&&w(e)}}}function Nd(l){let e,t,n,s,o;return t=new Be({props:{variant:"primary",$$slots:{default:[Ld]},$$scope:{ctx:l}}}),t.$on("click",l[22]),s=new Be({props:{variant:"ghost",$$slots:{default:[Pd]},$$scope:{ctx:l}}}),s.$on("click",l[42]),{c(){e=p("div"),_e(t.$$.fragment),n=b(),_e(s.$$.fragment),f(e,"slot","footer")},m(i,a){$(i,e,a),fe(t,e,null),r(e,n),fe(s,e,null),o=!0},p(i,a){const u={};a[2]&1048576&&(u.$$scope={dirty:a,ctx:i}),t.$set(u);const c={};a[2]&1048576&&(c.$$scope={dirty:a,ctx:i}),s.$set(c)},i(i){o||(N(t.$$.fragment,i),N(s.$$.fragment,i),o=!0)},o(i){M(t.$$.fragment,i),M(s.$$.fragment,i),o=!1},d(i){i&&w(e),ce(t),ce(s)}}}function fa(l){let e,t,n,s=(l[16].service||l[16].name)+"",o,i,a,u=l[16].environment+"",c,_,d=el(l[16].deployed_at)+"",m,h,v,g,S,C,k=l[16].version&&ca(l);g=new xe({props:{variant:zl(rl(l[16])),$$slots:{default:[Ad]},$$scope:{ctx:l}}});function y(E,j){return E[18]?Od:E[17].length===0?zd:Md}let T=y(l),D=T(l);return{c(){e=p("div"),t=p("div"),n=p("span"),o=q(s),i=b(),a=p("span"),c=q(u),_=q(" • "),m=q(d),h=b(),k&&k.c(),v=b(),_e(g.$$.fragment),S=b(),D.c(),f(n,"class","service-name svelte-cuxyqu"),f(a,"class","meta svelte-cuxyqu"),f(t,"class","logs-header-info svelte-cuxyqu"),f(e,"class","logs-modal-content svelte-cuxyqu")},m(E,j){$(E,e,j),r(e,t),r(t,n),r(n,o),r(t,i),r(t,a),r(a,c),r(a,_),r(a,m),r(t,h),k&&k.m(t,null),r(t,v),fe(g,t,null),r(e,S),D.m(e,null),C=!0},p(E,j){(!C||j[0]&65536)&&s!==(s=(E[16].service||E[16].name)+"")&&F(o,s),(!C||j[0]&65536)&&u!==(u=E[16].environment+"")&&F(c,u),(!C||j[0]&65536)&&d!==(d=el(E[16].deployed_at)+"")&&F(m,d),E[16].version?k?(k.p(E,j),j[0]&65536&&N(k,1)):(k=ca(E),k.c(),N(k,1),k.m(t,v)):k&&(qe(),M(k,1,1,()=>{k=null}),je());const L={};j[0]&65536&&(L.variant=zl(rl(E[16]))),j[0]&65536|j[2]&1048576&&(L.$$scope={dirty:j,ctx:E}),g.$set(L),T===(T=y(E))&&D?D.p(E,j):(D.d(1),D=T(E),D&&(D.c(),D.m(e,null)))},i(E){C||(N(k),N(g.$$.fragment,E),C=!0)},o(E){M(k),M(g.$$.fragment,E),C=!1},d(E){E&&w(e),k&&k.d(),ce(g),D.d()}}}function ca(l){let e,t;return e=new xe({props:{variant:"purple",$$slots:{default:[Rd]},$$scope:{ctx:l}}}),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const o={};s[0]&65536|s[2]&1048576&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function Rd(l){let e,t=l[16].version+"",n;return{c(){e=q("v"),n=q(t)},m(s,o){$(s,e,o),$(s,n,o)},p(s,o){o[0]&65536&&t!==(t=s[16].version+"")&&F(n,t)},d(s){s&&(w(e),w(n))}}}function Ad(l){let e=rl(l[16])+"",t;return{c(){t=q(e)},m(n,s){$(n,t,s)},p(n,s){s[0]&65536&&e!==(e=rl(n[16])+"")&&F(t,e)},d(n){n&&w(t)}}}function Md(l){let e,t=pe(l[17]),n=[];for(let s=0;s<t.length;s+=1)n[s]=_a(Lr(l,t,s));return{c(){e=p("div");for(let s=0;s<n.length;s+=1)n[s].c();f(e,"class","logs-container svelte-cuxyqu")},m(s,o){$(s,e,o);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(e,null)},p(s,o){if(o[0]&131072){t=pe(s[17]);let i;for(i=0;i<t.length;i+=1){const a=Lr(s,t,i);n[i]?n[i].p(a,o):(n[i]=_a(a),n[i].c(),n[i].m(e,null))}for(;i<n.length;i+=1)n[i].d(1);n.length=t.length}},d(s){s&&w(e),Ne(n,s)}}}function zd(l){let e;return{c(){e=p("div"),e.textContent="No logs available for this deployment",f(e,"class","no-logs svelte-cuxyqu")},m(t,n){$(t,e,n)},p:be,d(t){t&&w(e)}}}function Od(l){let e;return{c(){e=p("div"),e.textContent="Loading logs...",f(e,"class","logs-loading svelte-cuxyqu")},m(t,n){$(t,e,n)},p:be,d(t){t&&w(e)}}}function _a(l){let e,t,n=(l[62].timestamp?new Date(l[62].timestamp).toLocaleTimeString():"")+"",s,o,i,a=l[62].message+"",u,c;return{c(){e=p("div"),t=p("span"),s=q(n),o=b(),i=p("span"),u=q(a),c=b(),f(t,"class","log-time svelte-cuxyqu"),f(i,"class","log-message svelte-cuxyqu"),f(e,"class","log-line svelte-cuxyqu")},m(_,d){$(_,e,d),r(e,t),r(t,s),r(e,o),r(e,i),r(i,u),r(e,c)},p(_,d){d[0]&131072&&n!==(n=(_[62].timestamp?new Date(_[62].timestamp).toLocaleTimeString():"")+"")&&F(s,n),d[0]&131072&&a!==(a=_[62].message+"")&&F(u,a)},d(_){_&&w(e)}}}function Id(l){let e,t,n=l[16]&&fa(l);return{c(){n&&n.c(),e=Oe()},m(s,o){n&&n.m(s,o),$(s,e,o),t=!0},p(s,o){s[16]?n?(n.p(s,o),o[0]&65536&&N(n,1)):(n=fa(s),n.c(),N(n,1),n.m(e.parentNode,e)):n&&(qe(),M(n,1,1,()=>{n=null}),je())},i(s){t||(N(n),t=!0)},o(s){M(n),t=!1},d(s){s&&w(e),n&&n.d(s)}}}function Fd(l){let e;return{c(){e=q("Close")},m(t,n){$(t,e,n)},d(t){t&&w(e)}}}function Ud(l){let e,t,n;return t=new Be({props:{variant:"ghost",$$slots:{default:[Fd]},$$scope:{ctx:l}}}),t.$on("click",l[45]),{c(){e=p("div"),_e(t.$$.fragment),f(e,"slot","footer")},m(s,o){$(s,e,o),fe(t,e,null),n=!0},p(s,o){const i={};o[2]&1048576&&(i.$$scope={dirty:o,ctx:s}),t.$set(i)},i(s){n||(N(t.$$.fragment,s),n=!0)},o(s){M(t.$$.fragment,s),n=!1},d(s){s&&w(e),ce(t)}}}function Bd(l){let e,t,n,s=l[10].length+"",o,i,a,u,c,_,d=pe(l[10]),m=[];for(let g=0;g<d.length;g+=1)m[g]=pa(Dr(l,d,g));const h=g=>M(m[g],1,1,()=>{m[g]=null});let v=l[11].length>0&&da(l);return{c(){e=p("div"),t=p("p"),n=p("strong"),o=q(s),i=q(" server(s) from the original deployment are unavailable:"),a=b(),u=p("div");for(let g=0;g<m.length;g+=1)m[g].c();c=b(),v&&v.c(),f(t,"class","svelte-cuxyqu"),f(u,"class","confirm-server-list unavailable svelte-cuxyqu"),f(e,"class","rollback-confirm-content svelte-cuxyqu")},m(g,S){$(g,e,S),r(e,t),r(t,n),r(n,o),r(t,i),r(e,a),r(e,u);for(let C=0;C<m.length;C+=1)m[C]&&m[C].m(u,null);r(e,c),v&&v.m(e,null),_=!0},p(g,S){if((!_||S[0]&1024)&&s!==(s=g[10].length+"")&&F(o,s),S[0]&1024){d=pe(g[10]);let C;for(C=0;C<d.length;C+=1){const k=Dr(g,d,C);m[C]?(m[C].p(k,S),N(m[C],1)):(m[C]=pa(k),m[C].c(),N(m[C],1),m[C].m(u,null))}for(qe(),C=d.length;C<m.length;C+=1)h(C);je()}g[11].length>0?v?(v.p(g,S),S[0]&2048&&N(v,1)):(v=da(g),v.c(),N(v,1),v.m(e,null)):v&&(qe(),M(v,1,1,()=>{v=null}),je())},i(g){if(!_){for(let S=0;S<d.length;S+=1)N(m[S]);N(v),_=!0}},o(g){m=m.filter(Boolean);for(let S=0;S<m.length;S+=1)M(m[S]);M(v),_=!1},d(g){g&&w(e),Ne(m,g),v&&v.d()}}}function Hd(l){let e,t,n,s,o=l[11].length+"",i,a,u,c=l[11].length+l[9].length+"",_,d,m,h,v,g,S=pe(l[9]),C=[];for(let k=0;k<S.length;k+=1)C[k]=va(Er(l,S,k));return{c(){e=p("div"),t=p("p"),n=q("Rolling back will restore to "),s=p("strong"),i=q(o),a=q(` servers.
        Service currently runs on `),u=p("strong"),_=q(c),d=q(" servers."),m=b(),h=p("p"),h.textContent="Stop containers on the following servers?",v=b(),g=p("div");for(let k=0;k<C.length;k+=1)C[k].c();f(t,"class","svelte-cuxyqu"),f(h,"class","svelte-cuxyqu"),f(g,"class","confirm-server-list svelte-cuxyqu"),f(e,"class","rollback-confirm-content svelte-cuxyqu")},m(k,y){$(k,e,y),r(e,t),r(t,n),r(t,s),r(s,i),r(t,a),r(t,u),r(u,_),r(t,d),r(e,m),r(e,h),r(e,v),r(e,g);for(let T=0;T<C.length;T+=1)C[T]&&C[T].m(g,null)},p(k,y){if(y[0]&2048&&o!==(o=k[11].length+"")&&F(i,o),y[0]&2560&&c!==(c=k[11].length+k[9].length+"")&&F(_,c),y[0]&512){S=pe(k[9]);let T;for(T=0;T<S.length;T+=1){const D=Er(k,S,T);C[T]?C[T].p(D,y):(C[T]=va(D),C[T].c(),C[T].m(g,null))}for(;T<C.length;T+=1)C[T].d(1);C.length=S.length}},i:be,o:be,d(k){k&&w(e),Ne(C,k)}}}function Gd(l){let e;return{c(){e=q("offline")},m(t,n){$(t,e,n)},d(t){t&&w(e)}}}function pa(l){let e,t,n=(l[55].name||l[55].ip)+"",s,o,i,a=l[55].ip+"",u,c,_,d,m;return _=new xe({props:{variant:"error",$$slots:{default:[Gd]},$$scope:{ctx:l}}}),{c(){e=p("div"),t=p("span"),s=q(n),o=b(),i=p("span"),u=q(a),c=b(),_e(_.$$.fragment),d=b(),f(t,"class","server-name svelte-cuxyqu"),f(i,"class","server-ip svelte-cuxyqu"),f(e,"class","confirm-server-item svelte-cuxyqu")},m(h,v){$(h,e,v),r(e,t),r(t,s),r(e,o),r(e,i),r(i,u),r(e,c),fe(_,e,null),r(e,d),m=!0},p(h,v){(!m||v[0]&1024)&&n!==(n=(h[55].name||h[55].ip)+"")&&F(s,n),(!m||v[0]&1024)&&a!==(a=h[55].ip+"")&&F(u,a);const g={};v[2]&1048576&&(g.$$scope={dirty:v,ctx:h}),_.$set(g)},i(h){m||(N(_.$$.fragment,h),m=!0)},o(h){M(_.$$.fragment,h),m=!1},d(h){h&&w(e),ce(_)}}}function da(l){let e,t,n=l[11].length+"",s,o,i,a,u,c=pe(l[11]),_=[];for(let m=0;m<c.length;m+=1)_[m]=ma(Tr(l,c,m));const d=m=>M(_[m],1,1,()=>{_[m]=null});return{c(){e=p("p"),t=q("Available servers ("),s=q(n),o=q("):"),i=b(),a=p("div");for(let m=0;m<_.length;m+=1)_[m].c();f(e,"class","svelte-cuxyqu"),f(a,"class","confirm-server-list available svelte-cuxyqu")},m(m,h){$(m,e,h),r(e,t),r(e,s),r(e,o),$(m,i,h),$(m,a,h);for(let v=0;v<_.length;v+=1)_[v]&&_[v].m(a,null);u=!0},p(m,h){if((!u||h[0]&2048)&&n!==(n=m[11].length+"")&&F(s,n),h[0]&2048){c=pe(m[11]);let v;for(v=0;v<c.length;v+=1){const g=Tr(m,c,v);_[v]?(_[v].p(g,h),N(_[v],1)):(_[v]=ma(g),_[v].c(),N(_[v],1),_[v].m(a,null))}for(qe(),v=c.length;v<_.length;v+=1)d(v);je()}},i(m){if(!u){for(let h=0;h<c.length;h+=1)N(_[h]);u=!0}},o(m){_=_.filter(Boolean);for(let h=0;h<_.length;h+=1)M(_[h]);u=!1},d(m){m&&(w(e),w(i),w(a)),Ne(_,m)}}}function Vd(l){let e;return{c(){e=q("online")},m(t,n){$(t,e,n)},d(t){t&&w(e)}}}function ma(l){let e,t,n=(l[55].name||l[55].ip)+"",s,o,i,a=l[55].ip+"",u,c,_,d,m;return _=new xe({props:{variant:"success",$$slots:{default:[Vd]},$$scope:{ctx:l}}}),{c(){e=p("div"),t=p("span"),s=q(n),o=b(),i=p("span"),u=q(a),c=b(),_e(_.$$.fragment),d=b(),f(t,"class","server-name svelte-cuxyqu"),f(i,"class","server-ip svelte-cuxyqu"),f(e,"class","confirm-server-item svelte-cuxyqu")},m(h,v){$(h,e,v),r(e,t),r(t,s),r(e,o),r(e,i),r(i,u),r(e,c),fe(_,e,null),r(e,d),m=!0},p(h,v){(!m||v[0]&2048)&&n!==(n=(h[55].name||h[55].ip)+"")&&F(s,n),(!m||v[0]&2048)&&a!==(a=h[55].ip+"")&&F(u,a);const g={};v[2]&1048576&&(g.$$scope={dirty:v,ctx:h}),_.$set(g)},i(h){m||(N(_.$$.fragment,h),m=!0)},o(h){M(_.$$.fragment,h),m=!1},d(h){h&&w(e),ce(_)}}}function va(l){let e,t,n=(l[55].name||l[55].ip)+"",s,o,i,a=l[55].ip+"",u,c;return{c(){e=p("div"),t=p("span"),s=q(n),o=b(),i=p("span"),u=q(a),c=b(),f(t,"class","server-name svelte-cuxyqu"),f(i,"class","server-ip svelte-cuxyqu"),f(e,"class","confirm-server-item svelte-cuxyqu")},m(_,d){$(_,e,d),r(e,t),r(t,s),r(e,o),r(e,i),r(i,u),r(e,c)},p(_,d){d[0]&512&&n!==(n=(_[55].name||_[55].ip)+"")&&F(s,n),d[0]&512&&a!==(a=_[55].ip+"")&&F(u,a)},d(_){_&&w(e)}}}function Wd(l){let e,t,n,s;const o=[Hd,Bd],i=[];function a(u,c){return u[8]==="cleanup"?0:u[8]==="missing"?1:-1}return~(e=a(l))&&(t=i[e]=o[e](l)),{c(){t&&t.c(),n=Oe()},m(u,c){~e&&i[e].m(u,c),$(u,n,c),s=!0},p(u,c){let _=e;e=a(u),e===_?~e&&i[e].p(u,c):(t&&(qe(),M(i[_],1,1,()=>{i[_]=null}),je()),~e?(t=i[e],t?t.p(u,c):(t=i[e]=o[e](u),t.c()),N(t,1),t.m(n.parentNode,n)):t=null)},i(u){s||(N(t),s=!0)},o(u){M(t),s=!1},d(u){u&&w(n),~e&&i[e].d(u)}}}function Jd(l){let e,t;return e=new Be({props:{variant:"primary",$$slots:{default:[Yd]},$$scope:{ctx:l}}}),e.$on("click",l[27]),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const o={};s[2]&1048576&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function Kd(l){let e,t;return e=new Be({props:{variant:"primary",$$slots:{default:[Qd]},$$scope:{ctx:l}}}),e.$on("click",l[26]),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const o={};s[2]&1048576&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function Yd(l){let e;return{c(){e=q("Proceed with available only")},m(t,n){$(t,e,n)},d(t){t&&w(e)}}}function Qd(l){let e;return{c(){e=q("Proceed")},m(t,n){$(t,e,n)},d(t){t&&w(e)}}}function Zd(l){let e;return{c(){e=q("Cancel")},m(t,n){$(t,e,n)},d(t){t&&w(e)}}}function Xd(l){let e,t,n,s,o,i;const a=[Kd,Jd],u=[];function c(_,d){return _[8]==="cleanup"?0:_[8]==="missing"&&_[11].length>0?1:-1}return~(t=c(l))&&(n=u[t]=a[t](l)),o=new Be({props:{variant:"ghost",$$slots:{default:[Zd]},$$scope:{ctx:l}}}),o.$on("click",l[48]),{c(){e=p("div"),n&&n.c(),s=b(),_e(o.$$.fragment),f(e,"slot","footer")},m(_,d){$(_,e,d),~t&&u[t].m(e,null),r(e,s),fe(o,e,null),i=!0},p(_,d){let m=t;t=c(_),t===m?~t&&u[t].p(_,d):(n&&(qe(),M(u[m],1,1,()=>{u[m]=null}),je()),~t?(n=u[t],n?n.p(_,d):(n=u[t]=a[t](_),n.c()),N(n,1),n.m(e,s)):n=null);const h={};d[2]&1048576&&(h.$$scope={dirty:d,ctx:_}),o.$set(h)},i(_){i||(N(n),N(o.$$.fragment,_),i=!0)},o(_){M(n),M(o.$$.fragment,_),i=!1},d(_){_&&w(e),~t&&u[t].d(),ce(o)}}}function xd(l){let e,t,n,s,o,i,a,u,c,_,d,m,h,v,g,S,C,k,y,T,D,E,j=l[20]&&zr(l);a=new Be({props:{variant:"ghost",$$slots:{default:[id]},$$scope:{ctx:l}}}),a.$on("click",l[33]),c=new mt({props:{padding:!1,$$slots:{default:[md]},$$scope:{ctx:l}}});function L(P){l[40](P)}let I={title:"⏪ Rollback",width:"600px",$$slots:{footer:[qd],default:[wd]},$$scope:{ctx:l}};l[1]!==void 0&&(I.open=l[1]),d=new il({props:I}),zt.push(()=>ml(d,"open",L)),d.$on("close",l[41]);function R(P){l[43](P)}let z={title:"⚙️ Deployment Config",width:"500px",$$slots:{footer:[Nd],default:[Ed]},$$scope:{ctx:l}};l[13]!==void 0&&(z.open=l[13]),v=new il({props:z}),zt.push(()=>ml(v,"open",R)),v.$on("close",l[44]);function Y(P){l[46](P)}let U={title:"📋 Deployment Logs",width:"700px",$$slots:{footer:[Ud],default:[Id]},$$scope:{ctx:l}};l[15]!==void 0&&(U.open=l[15]),C=new il({props:U}),zt.push(()=>ml(C,"open",Y)),C.$on("close",l[47]);function O(P){l[49](P)}let H={title:l[8]==="cleanup"?"⚠️ Stop Orphan Containers":"⚠️ Servers Unavailable",width:"500px",$$slots:{footer:[Xd],default:[Wd]},$$scope:{ctx:l}};return l[7]!==void 0&&(H.open=l[7]),T=new il({props:H}),zt.push(()=>ml(T,"open",O)),T.$on("close",l[50]),{c(){e=p("div"),t=p("div"),n=p("h1"),n.textContent="Deployment History",s=b(),o=p("div"),j&&j.c(),i=b(),_e(a.$$.fragment),u=b(),_e(c.$$.fragment),_=b(),_e(d.$$.fragment),h=b(),_e(v.$$.fragment),S=b(),_e(C.$$.fragment),y=b(),_e(T.$$.fragment),f(n,"class","svelte-cuxyqu"),f(o,"class","header-actions svelte-cuxyqu"),f(t,"class","page-header svelte-cuxyqu"),f(e,"class","deployments-page svelte-cuxyqu")},m(P,A){$(P,e,A),r(e,t),r(t,n),r(t,s),r(t,o),j&&j.m(o,null),r(o,i),fe(a,o,null),r(e,u),fe(c,e,null),$(P,_,A),fe(d,P,A),$(P,h,A),fe(v,P,A),$(P,S,A),fe(C,P,A),$(P,y,A),fe(T,P,A),E=!0},p(P,A){P[20]?j?j.p(P,A):(j=zr(P),j.c(),j.m(o,i)):j&&(j.d(1),j=null);const B={};A[2]&1048576&&(B.$$scope={dirty:A,ctx:P}),a.$set(B);const J={};A[0]&524289|A[2]&1048576&&(J.$$scope={dirty:A,ctx:P}),c.$set(J);const Q={};A[0]&126|A[2]&1048576&&(Q.$$scope={dirty:A,ctx:P}),!m&&A[0]&2&&(m=!0,Q.open=P[1],dl(()=>m=!1)),d.$set(Q);const G={};A[0]&24576|A[2]&1048576&&(G.$$scope={dirty:A,ctx:P}),!g&&A[0]&8192&&(g=!0,G.open=P[13],dl(()=>g=!1)),v.$set(G);const oe={};A[0]&491520|A[2]&1048576&&(oe.$$scope={dirty:A,ctx:P}),!k&&A[0]&32768&&(k=!0,oe.open=P[15],dl(()=>k=!1)),C.$set(oe);const ee={};A[0]&256&&(ee.title=P[8]==="cleanup"?"⚠️ Stop Orphan Containers":"⚠️ Servers Unavailable"),A[0]&8064|A[2]&1048576&&(ee.$$scope={dirty:A,ctx:P}),!D&&A[0]&128&&(D=!0,ee.open=P[7],dl(()=>D=!1)),T.$set(ee)},i(P){E||(N(a.$$.fragment,P),N(c.$$.fragment,P),N(d.$$.fragment,P),N(v.$$.fragment,P),N(C.$$.fragment,P),N(T.$$.fragment,P),E=!0)},o(P){M(a.$$.fragment,P),M(c.$$.fragment,P),M(d.$$.fragment,P),M(v.$$.fragment,P),M(C.$$.fragment,P),M(T.$$.fragment,P),E=!1},d(P){P&&(w(e),w(_),w(h),w(S),w(y)),j&&j.d(),ce(a),ce(c),ce(d,P),ce(v,P),ce(C,P),ce(T,P)}}}function ha(l){return l?l.toLocaleTimeString():""}function em(l,e){return l?l.filter(t=>!(e.project&&t.project!==e.project||e.env&&t.environment!==e.env)):[]}function tm(l){const e=[...l],t=new Set;for(const n of e){const s=`${n.project}/${n.service||n.name}/${n.environment}`;n.status==="success"&&n.can_rollback&&!t.has(s)?(n.is_current_active=!0,t.add(s)):n.is_current_active=!1}return e}function el(l){return l?new Date(l).toLocaleString():"-"}function zl(l){switch(l){case"success":case"active":return"success";case"failed":case"error":return"danger";case"pending":case"deploying":return"warning";case"superseded":return"secondary";default:return"info"}}function rl(l){const e=l.status||"unknown";return e==="rolled_back"?l.is_rollback?"failed":"superseded":e}function lm(l,e,t){let n,s,o,i;ht(l,Pl,Ee=>t(31,o=Ee)),ht(l,$l,Ee=>t(32,i=Ee));let a=!1,u=!1,c=null,_=[],d=null,m=!1,h=[],v=!1,g="",S=[],C=[],k=[],y=null,T=!1,D=null,E=!1,j=null,L=[],I=!1,R=[],z=[];function Y(Ee){t(14,D=Ee),t(13,T=!0)}function U(){if(!(D!=null&&D.config_snapshot))return;const Ee=new CustomEvent("redeploy",{detail:{deployment:D,config:D.config_snapshot},bubbles:!0});document.dispatchEvent(Ee),t(13,T=!1),Ce.info("Config loaded - switch to Deploy tab")}async function O(Ee){t(16,j=Ee),t(15,E=!0),t(18,I=!0),t(17,L=[]);try{const Ie=await He("GET",`/infra/deployments/history/${Ee.id}/logs`);t(17,L=Ie.logs||[])}catch(Ie){Ce.error("Failed to load logs: "+(Ie.message||Ie))}finally{t(18,I=!1)}}async function H(Ee){t(2,c=Ee);try{const Ie=new URLSearchParams({project:Ee.project||"",environment:Ee.environment||"",service_name:Ee.service_name||Ee.service||""}),ve=await He("GET",`/infra/deployments/rollback/preview?${Ie}`);t(3,_=(ve.recent_deployments||[]).filter(ze=>ze.id!==Ee.id&&ze.status==="success"))}catch{t(3,_=[])}t(1,u=!0)}async function P(){if(!c||!d){Ce.error("Select a deployment to rollback to");return}const Ee=_.find(Me=>Me.id===d);if(!Ee){Ce.error("Target deployment not found");return}const Ie=c.project||"",ve=c.environment||"",ze=c.service_name||c.service||"";try{const Me=new URLSearchParams({project:Ie,environment:ve,service_name:ze}),Re=await He("GET",`/infra/services/state?${Me}`),Ue=Ee.server_ips||[],lt=(Re.server_ips||[]).filter(Je=>!Ue.includes(Je)),ot=(Re.servers||[]).filter(Je=>lt.includes(Je.ip));if(Ue.length>0){const Je=await He("POST",`/infra/services/check-servers?do_token=${Dt()}&server_ips=${Ue.join(",")}`,null);if(t(10,C=Je.unavailable||[]),t(11,k=Je.available||[]),C.length>0){t(8,g="missing"),t(12,y=Ee),t(7,v=!0);return}}if(ot.length>0){t(9,S=ot),t(8,g="cleanup"),t(12,y=Ee),t(7,v=!0);return}}catch(Me){console.log("Rollback pre-check:",Me.message||Me)}await G()}async function A(){if(t(7,v=!1),g==="cleanup"&&S.length>0){const Ee=`${c.project}_${c.service||c.service_name}_${c.environment}`.replace(/[^a-zA-Z0-9_]/g,"_"),Ie=S.map(ve=>ve.ip);try{const ve=await He("POST",`/infra/services/cleanup?do_token=${Dt()}`,{server_ips:Ie,container_name:Ee});t(6,h=[...h,{message:`Cleanup: ${ve.cleaned} stopped`,type:"info",time:new Date}])}catch(ve){t(6,h=[...h,{message:`Cleanup warning: ${ve.message}`,type:"warning",time:new Date}])}}t(9,S=[]),t(10,C=[]),t(12,y=null),await G()}let B=!1,J=[];async function Q(){t(7,v=!1),B=!0,J=k.map(Ee=>Ee.ip),t(10,C=[]),t(12,y=null),await G()}async function G(){t(6,h=[]),t(5,m=!0);const Ee=(Ie,ve="info")=>{t(6,h=[...h,{message:Ie,type:ve,time:new Date}])};try{const Ie=new URLSearchParams({project:c.project||"",environment:c.environment||"",service_name:c.service_name||c.service||""}).toString();Ee("Starting rollback...");let ve=!1,ze="";const Me={deployment_id:d};if(B&&J.length>0&&(Me.server_ips=J,Ee(`Partial rollback to ${J.length} available server(s)`)),await tn("POST",`/infra/deployments/rollback?${Ie}`,Me,Re=>{Re.type==="progress"||Re.type==="start"?Ee(Re.message,"info"):Re.type==="server_complete"?Ee(`✅ ${Re.ip}: Success`,"success"):Re.type==="error"?(Ee(`❌ ${Re.message||Re.error}`,"error"),ze=Re.message||Re.error||"Unknown error"):Re.type==="complete"&&(ve=Re.success,ve?Ee(`✅ ${Re.message}`,"success"):(ze=Re.message||"Rollback failed",Ee(`❌ ${ze}`,"error")))}),ve)Ce.success("Rollback completed successfully"),await oe();else throw new Error(ze||"Rollback failed")}catch(Ie){Ee(`❌ Error: ${Ie.message||String(Ie)}`,"error"),Ce.error("Rollback failed: "+(Ie.message||String(Ie)))}finally{t(5,m=!1),B=!1,J=[]}}function oe(){$l.refresh()}function ee(){$l.refresh()}const V=[[]],K=()=>$l.refresh(),ae=Ee=>Y(Ee),W=Ee=>O(Ee),ie=Ee=>H(Ee),ue=()=>{t(1,u=!1),t(6,h=[])};function le(){d=this.__value,t(4,d)}function me(Ee){u=Ee,t(1,u)}const re=()=>t(1,u=!1),ne=()=>t(13,T=!1);function X(Ee){T=Ee,t(13,T)}const Z=()=>t(13,T=!1),ge=()=>t(15,E=!1);function $e(Ee){E=Ee,t(15,E)}const We=()=>t(15,E=!1),ct=()=>{t(7,v=!1),t(12,y=null)};function bt(Ee){v=Ee,t(7,v)}const rt=()=>{t(7,v=!1),t(12,y=null)};return l.$$.update=()=>{l.$$.dirty[1]&2&&t(30,n=i||{loading:!1}),l.$$.dirty[0]&1073741824&&t(0,a=n.loading),l.$$.dirty[0]&1073741824&&t(20,s=n.lastFetched),l.$$.dirty[0]&1073741824&&n.data&&t(29,R=tm(n.data)),l.$$.dirty[0]&536870912|l.$$.dirty[1]&1&&t(19,z=em(R,o))},[a,u,c,_,d,m,h,v,g,S,C,k,y,T,D,E,j,L,I,z,s,Y,U,O,H,P,A,Q,ee,R,n,o,i,K,ae,W,ie,ue,le,V,me,re,ne,X,Z,ge,$e,We,ct,bt,rt]}class nm extends jt{constructor(e){super(),qt(this,e,lm,xd,yt,{refresh:28},null,[-1,-1,-1])}get refresh(){return this.$$.ctx[28]}}function ga(l,e,t){var o,i,a;const n=l.slice();n[33]=e[t];const s=n[33].ip||((a=(i=(o=n[33].networks)==null?void 0:o.v4)==null?void 0:i[0])==null?void 0:a.ip_address);return n[34]=s,n}function ba(l,e,t){const n=l.slice();return n[37]=e[t],n}function ka(l,e,t){const n=l.slice();return n[40]=e[t],n}function wa(l,e,t){const n=l.slice();return n[37]=e[t],n}function $a(l,e,t){const n=l.slice();return n[40]=e[t],n}function Ca(l){let e,t=l[40].label+"",n;return{c(){e=p("option"),n=q(t),e.__value=l[40].value,te(e,e.__value)},m(s,o){$(s,e,o),r(e,n)},p:be,d(s){s&&w(e)}}}function ya(l){let e,t=l[37].charAt(0).toUpperCase()+l[37].slice(1)+"",n;return{c(){e=p("option"),n=q(t),e.__value=l[37],te(e,e.__value)},m(s,o){$(s,e,o),r(e,n)},p:be,d(s){s&&w(e)}}}function sm(l){let e;return{c(){e=q("🔍 Get Credentials")},m(t,n){$(t,e,n)},d(t){t&&w(e)}}}function om(l){let e;return{c(){e=q("Looking up...")},m(t,n){$(t,e,n)},d(t){t&&w(e)}}}function im(l){let e;function t(o,i){return o[11]?om:sm}let n=t(l),s=n(l);return{c(){s.c(),e=Oe()},m(o,i){s.m(o,i),$(o,e,i)},p(o,i){n!==(n=t(o))&&(s.d(1),s=n(o),s&&(s.c(),s.m(e.parentNode,e)))},d(o){o&&w(e),s.d(o)}}}function Sa(l){let e,t,n,s,o,i=l[10].service+"",a,u,c,_,d,m,h=l[10].env_var_name+"",v,g,S,C,k=l[10].connection_url+"",y,T,D,E,j,L,I,R,z,Y,U,O,H,P=l[10].user&&qa(l),A=l[10].password&&ja(l),B=l[10].database&&Ta(l);function J(oe,ee){if(ee[0]&1024&&(z=null),ee[0]&1024&&(Y=null),ee[0]&1024&&(U=null),z==null&&(z=!!oe[10].service.toLowerCase().includes("redis")),z)return um;if(Y==null&&(Y=!!oe[10].service.toLowerCase().includes("postgres")),Y)return am;if(U==null&&(U=!!oe[10].service.toLowerCase().includes("mongo")),U)return rm}let Q=J(l,[-1,-1]),G=Q&&Q(l);return{c(){e=p("div"),t=p("div"),n=p("span"),n.textContent="✅",s=b(),o=p("span"),a=q(i),u=q(" credentials"),c=b(),_=p("div"),d=p("div"),m=p("span"),v=q(h),g=q(":"),S=b(),C=p("code"),y=q(k),T=b(),P&&P.c(),D=b(),A&&A.c(),E=b(),B&&B.c(),j=b(),L=p("small"),L.textContent="Click any value to copy",I=b(),R=p("div"),G&&G.c(),f(n,"class","result-icon svelte-14omwo7"),f(o,"class","result-title svelte-14omwo7"),f(t,"class","result-header svelte-14omwo7"),f(m,"class","label svelte-14omwo7"),f(C,"class","value url clickable svelte-14omwo7"),f(d,"class","info-row full-width svelte-14omwo7"),f(_,"class","connection-info svelte-14omwo7"),f(L,"class","copy-hint svelte-14omwo7"),f(R,"class","cli-examples svelte-14omwo7"),f(e,"class","lookup-result svelte-14omwo7")},m(oe,ee){$(oe,e,ee),r(e,t),r(t,n),r(t,s),r(t,o),r(o,a),r(o,u),r(e,c),r(e,_),r(_,d),r(d,m),r(m,v),r(m,g),r(d,S),r(d,C),r(C,y),r(_,T),P&&P.m(_,null),r(_,D),A&&A.m(_,null),r(_,E),B&&B.m(_,null),r(e,j),r(e,L),r(e,I),r(e,R),G&&G.m(R,null),O||(H=x(C,"click",l[23]),O=!0)},p(oe,ee){ee[0]&1024&&i!==(i=oe[10].service+"")&&F(a,i),ee[0]&1024&&h!==(h=oe[10].env_var_name+"")&&F(v,h),ee[0]&1024&&k!==(k=oe[10].connection_url+"")&&F(y,k),oe[10].user?P?P.p(oe,ee):(P=qa(oe),P.c(),P.m(_,D)):P&&(P.d(1),P=null),oe[10].password?A?A.p(oe,ee):(A=ja(oe),A.c(),A.m(_,E)):A&&(A.d(1),A=null),oe[10].database?B?B.p(oe,ee):(B=Ta(oe),B.c(),B.m(_,null)):B&&(B.d(1),B=null),Q===(Q=J(oe,ee))&&G?G.p(oe,ee):(G&&G.d(1),G=Q&&Q(oe),G&&(G.c(),G.m(R,null)))},d(oe){oe&&w(e),P&&P.d(),A&&A.d(),B&&B.d(),G&&G.d(),O=!1,H()}}}function qa(l){let e,t,n,s,o=l[10].user+"",i,a,u;return{c(){e=p("div"),t=p("span"),t.textContent="User:",n=b(),s=p("code"),i=q(o),f(t,"class","label svelte-14omwo7"),f(s,"class","value clickable svelte-14omwo7"),f(e,"class","info-row svelte-14omwo7")},m(c,_){$(c,e,_),r(e,t),r(e,n),r(e,s),r(s,i),a||(u=x(s,"click",l[24]),a=!0)},p(c,_){_[0]&1024&&o!==(o=c[10].user+"")&&F(i,o)},d(c){c&&w(e),a=!1,u()}}}function ja(l){let e,t,n,s,o=l[10].password+"",i,a,u;return{c(){e=p("div"),t=p("span"),t.textContent="Password:",n=b(),s=p("code"),i=q(o),f(t,"class","label svelte-14omwo7"),f(s,"class","value clickable svelte-14omwo7"),f(e,"class","info-row svelte-14omwo7")},m(c,_){$(c,e,_),r(e,t),r(e,n),r(e,s),r(s,i),a||(u=x(s,"click",l[25]),a=!0)},p(c,_){_[0]&1024&&o!==(o=c[10].password+"")&&F(i,o)},d(c){c&&w(e),a=!1,u()}}}function Ta(l){let e,t,n,s,o=l[10].database+"",i,a,u;return{c(){e=p("div"),t=p("span"),t.textContent="Database:",n=b(),s=p("code"),i=q(o),f(t,"class","label svelte-14omwo7"),f(s,"class","value clickable svelte-14omwo7"),f(e,"class","info-row svelte-14omwo7")},m(c,_){$(c,e,_),r(e,t),r(e,n),r(e,s),r(s,i),a||(u=x(s,"click",l[26]),a=!0)},p(c,_){_[0]&1024&&o!==(o=c[10].database+"")&&F(i,o)},d(c){c&&w(e),a=!1,u()}}}function rm(l){let e,t,n=l[10].connection_url+"",s,o;return{c(){e=p("code"),t=q('mongosh "'),s=q(n),o=q('"'),f(e,"class","svelte-14omwo7")},m(i,a){$(i,e,a),r(e,t),r(e,s),r(e,o)},p(i,a){a[0]&1024&&n!==(n=i[10].connection_url+"")&&F(s,n)},d(i){i&&w(e)}}}function am(l){let e,t,n=l[10].connection_url+"",s,o;return{c(){e=p("code"),t=q('psql "'),s=q(n),o=q('"'),f(e,"class","svelte-14omwo7")},m(i,a){$(i,e,a),r(e,t),r(e,s),r(e,o)},p(i,a){a[0]&1024&&n!==(n=i[10].connection_url+"")&&F(s,n)},d(i){i&&w(e)}}}function um(l){let e,t,n=l[10].host+"",s,o,i=l[10].port+"",a,u,c=l[10].password+"",_;return{c(){e=p("code"),t=q("redis-cli -h "),s=q(n),o=q(" -p "),a=q(i),u=q(" -a "),_=q(c),f(e,"class","svelte-14omwo7")},m(d,m){$(d,e,m),r(e,t),r(e,s),r(e,o),r(e,a),r(e,u),r(e,_)},p(d,m){m[0]&1024&&n!==(n=d[10].host+"")&&F(s,n),m[0]&1024&&i!==(i=d[10].port+"")&&F(a,i),m[0]&1024&&c!==(c=d[10].password+"")&&F(_,c)},d(d){d&&w(e)}}}function fm(l){let e,t,n,s,o,i,a,u,c,_,d,m,h,v,g,S,C,k,y,T,D,E,j,L,I,R,z,Y,U,O,H,P,A,B,J,Q,G,oe=pe(l[13]),ee=[];for(let W=0;W<oe.length;W+=1)ee[W]=Ca($a(l,oe,W));let V=pe(l[14]),K=[];for(let W=0;W<V.length;W+=1)K[W]=ya(wa(l,V,W));P=new Be({props:{variant:"primary",type:"submit",disabled:l[11],$$slots:{default:[im]},$$scope:{ctx:l}}});let ae=l[10]&&Sa(l);return{c(){e=p("p"),e.innerHTML="For CLI tools, DB admin apps, or local dev. <strong>Apps get URLs auto-injected</strong> when you enable dependencies in Deploy tab.",t=b(),n=p("form"),s=p("div"),o=p("label"),o.textContent="Service Type *",i=b(),a=p("select"),u=p("option"),u.textContent="Select service...";for(let W=0;W<ee.length;W+=1)ee[W].c();c=b(),_=p("div"),d=p("div"),m=p("label"),m.textContent="Project *",h=b(),v=p("input"),g=b(),S=p("div"),C=p("label"),C.textContent="Environment",k=b(),y=p("select");for(let W=0;W<K.length;W+=1)K[W].c();T=b(),D=p("div"),E=p("div"),j=p("label"),j.textContent="Server IP *",L=b(),I=p("input"),R=b(),z=p("div"),Y=p("label"),Y.textContent="Port *",U=b(),O=p("input"),H=b(),_e(P.$$.fragment),A=b(),ae&&ae.c(),B=Oe(),f(e,"class","description svelte-14omwo7"),f(o,"for","lookup-type"),f(o,"class","svelte-14omwo7"),u.__value="",te(u,u.__value),f(a,"id","lookup-type"),a.required=!0,f(a,"class","svelte-14omwo7"),l[0]===void 0&&Qe(()=>l[18].call(a)),f(s,"class","form-group svelte-14omwo7"),f(m,"for","lookup-project"),f(m,"class","svelte-14omwo7"),f(v,"id","lookup-project"),f(v,"type","text"),f(v,"placeholder","myapp"),v.required=!0,f(v,"class","svelte-14omwo7"),f(d,"class","form-group svelte-14omwo7"),f(C,"for","lookup-env"),f(C,"class","svelte-14omwo7"),f(y,"id","lookup-env"),f(y,"class","svelte-14omwo7"),l[8]===void 0&&Qe(()=>l[20].call(y)),f(S,"class","form-group svelte-14omwo7"),f(_,"class","form-row svelte-14omwo7"),f(j,"for","lookup-host"),f(j,"class","svelte-14omwo7"),f(I,"id","lookup-host"),f(I,"type","text"),f(I,"placeholder","206.189.18.79"),I.required=!0,f(I,"class","svelte-14omwo7"),f(E,"class","form-group svelte-14omwo7"),f(Y,"for","lookup-port"),f(Y,"class","svelte-14omwo7"),f(O,"id","lookup-port"),f(O,"type","number"),f(O,"placeholder","8453"),O.required=!0,f(O,"class","svelte-14omwo7"),f(z,"class","form-group svelte-14omwo7"),f(D,"class","form-row svelte-14omwo7")},m(W,ie){$(W,e,ie),$(W,t,ie),$(W,n,ie),r(n,s),r(s,o),r(s,i),r(s,a),r(a,u);for(let ue=0;ue<ee.length;ue+=1)ee[ue]&&ee[ue].m(a,null);Le(a,l[0],!0),r(n,c),r(n,_),r(_,d),r(d,m),r(d,h),r(d,v),te(v,l[7]),r(_,g),r(_,S),r(S,C),r(S,k),r(S,y);for(let ue=0;ue<K.length;ue+=1)K[ue]&&K[ue].m(y,null);Le(y,l[8],!0),r(n,T),r(n,D),r(D,E),r(E,j),r(E,L),r(E,I),te(I,l[9]),r(D,R),r(D,z),r(z,Y),r(z,U),r(z,O),te(O,l[1]),r(n,H),fe(P,n,null),$(W,A,ie),ae&&ae.m(W,ie),$(W,B,ie),J=!0,Q||(G=[x(a,"change",l[18]),x(v,"input",l[19]),x(y,"change",l[20]),x(I,"input",l[21]),x(O,"input",l[22]),x(n,"submit",l[16])],Q=!0)},p(W,ie){if(ie[0]&8192){oe=pe(W[13]);let le;for(le=0;le<oe.length;le+=1){const me=$a(W,oe,le);ee[le]?ee[le].p(me,ie):(ee[le]=Ca(me),ee[le].c(),ee[le].m(a,null))}for(;le<ee.length;le+=1)ee[le].d(1);ee.length=oe.length}if(ie[0]&8193&&Le(a,W[0]),ie[0]&128&&v.value!==W[7]&&te(v,W[7]),ie[0]&16384){V=pe(W[14]);let le;for(le=0;le<V.length;le+=1){const me=wa(W,V,le);K[le]?K[le].p(me,ie):(K[le]=ya(me),K[le].c(),K[le].m(y,null))}for(;le<K.length;le+=1)K[le].d(1);K.length=V.length}ie[0]&16640&&Le(y,W[8]),ie[0]&512&&I.value!==W[9]&&te(I,W[9]),ie[0]&2&&Kt(O.value)!==W[1]&&te(O,W[1]);const ue={};ie[0]&2048&&(ue.disabled=W[11]),ie[0]&2048|ie[1]&65536&&(ue.$$scope={dirty:ie,ctx:W}),P.$set(ue),W[10]?ae?ae.p(W,ie):(ae=Sa(W),ae.c(),ae.m(B.parentNode,B)):ae&&(ae.d(1),ae=null)},i(W){J||(N(P.$$.fragment,W),J=!0)},o(W){M(P.$$.fragment,W),J=!1},d(W){W&&(w(e),w(t),w(n),w(A),w(B)),Ne(ee,W),Ne(K,W),ce(P),ae&&ae.d(W),Q=!1,Ge(G)}}}function Da(l){let e,t=l[40].label+"",n;return{c(){e=p("option"),n=q(t),e.__value=l[40].value,te(e,e.__value)},m(s,o){$(s,e,o),r(e,n)},p:be,d(s){s&&w(e)}}}function Ea(l){let e,t=l[37].charAt(0).toUpperCase()+l[37].slice(1)+"",n;return{c(){e=p("option"),n=q(t),e.__value=l[37],te(e,e.__value)},m(s,o){$(s,e,o),r(e,n)},p:be,d(s){s&&w(e)}}}function La(l){let e,t=(l[33].name||"unnamed")+"",n,s,o=l[34]+"",i,a,u;return{c(){e=p("option"),n=q(t),s=q(" ("),i=q(o),a=q(")"),e.__value=u=l[34],te(e,e.__value)},m(c,_){$(c,e,_),r(e,n),r(e,s),r(e,i),r(e,a)},p(c,_){_[0]&4096&&t!==(t=(c[33].name||"unnamed")+"")&&F(n,t),_[0]&4096&&o!==(o=c[34]+"")&&F(i,o),_[0]&4096&&u!==(u=c[34])&&(e.__value=u,te(e,e.__value))},d(c){c&&w(e)}}}function Pa(l){let e,t=l[34]&&La(l);return{c(){t&&t.c(),e=Oe()},m(n,s){t&&t.m(n,s),$(n,e,s)},p(n,s){n[34]?t?t.p(n,s):(t=La(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(n){n&&w(e),t&&t.d(n)}}}function cm(l){let e;return{c(){e=q("Use Deploy Tab Instead →")},m(t,n){$(t,e,n)},d(t){t&&w(e)}}}function _m(l){let e;return{c(){e=q("Deploying...")},m(t,n){$(t,e,n)},d(t){t&&w(e)}}}function pm(l){let e;function t(o,i){return o[6]?_m:cm}let n=t(l),s=n(l);return{c(){s.c(),e=Oe()},m(o,i){s.m(o,i),$(o,e,i)},p(o,i){n!==(n=t(o))&&(s.d(1),s=n(o),s&&(s.c(),s.m(e.parentNode,e)))},d(o){o&&w(e),s.d(o)}}}function dm(l){let e,t,n,s,o,i,a,u,c,_,d,m,h,v,g,S,C,k,y,T,D,E,j,L,I,R,z,Y,U,O,H,P,A,B=pe(l[13]),J=[];for(let V=0;V<B.length;V+=1)J[V]=Da(ka(l,B,V));let Q=pe(l[14]),G=[];for(let V=0;V<Q.length;V+=1)G[V]=Ea(ba(l,Q,V));let oe=pe(l[12]||[]),ee=[];for(let V=0;V<oe.length;V+=1)ee[V]=Pa(ga(l,oe,V));return Y=new Be({props:{variant:"secondary",type:"submit",disabled:l[6],$$slots:{default:[pm]},$$scope:{ctx:l}}}),{c(){e=p("p"),e.textContent="Deploy stateful services with automatic configuration, persistence, and service mesh.",t=b(),n=p("form"),s=p("div"),o=p("label"),o.textContent="Service Type *",i=b(),a=p("select"),u=p("option"),u.textContent="Select service...";for(let V=0;V<J.length;V+=1)J[V].c();c=b(),_=p("div"),d=p("label"),d.textContent="Project *",m=b(),h=p("input"),v=b(),g=p("div"),S=p("label"),S.textContent="Environment",C=b(),k=p("select");for(let V=0;V<G.length;V+=1)G[V].c();y=b(),T=p("div"),D=p("label"),D.textContent="Target Server *",E=b(),j=p("select"),L=p("option"),L.textContent="Select server...";for(let V=0;V<ee.length;V+=1)ee[V].c();I=b(),R=p("small"),R.textContent="Servers from Infrastructure tab",z=b(),_e(Y.$$.fragment),U=b(),O=p("small"),O.textContent='Stateful deploys work via Deploy tab with "Stateful Service" type',f(e,"class","description svelte-14omwo7"),f(o,"for","svc-type"),f(o,"class","svelte-14omwo7"),u.__value="",te(u,u.__value),f(a,"id","svc-type"),a.required=!0,f(a,"class","svelte-14omwo7"),l[2]===void 0&&Qe(()=>l[27].call(a)),f(s,"class","form-group svelte-14omwo7"),f(d,"for","svc-project"),f(d,"class","svelte-14omwo7"),f(h,"id","svc-project"),f(h,"type","text"),f(h,"placeholder","myapp"),h.required=!0,f(h,"class","svelte-14omwo7"),f(_,"class","form-group svelte-14omwo7"),f(S,"for","svc-env"),f(S,"class","svelte-14omwo7"),f(k,"id","svc-env"),f(k,"class","svelte-14omwo7"),l[4]===void 0&&Qe(()=>l[29].call(k)),f(g,"class","form-group svelte-14omwo7"),f(D,"for","svc-server"),f(D,"class","svelte-14omwo7"),L.__value="",te(L,L.__value),f(j,"id","svc-server"),j.required=!0,f(j,"class","svelte-14omwo7"),l[5]===void 0&&Qe(()=>l[30].call(j)),f(R,"class","svelte-14omwo7"),f(T,"class","form-group svelte-14omwo7"),f(O,"class","hint svelte-14omwo7")},m(V,K){$(V,e,K),$(V,t,K),$(V,n,K),r(n,s),r(s,o),r(s,i),r(s,a),r(a,u);for(let ae=0;ae<J.length;ae+=1)J[ae]&&J[ae].m(a,null);Le(a,l[2],!0),r(n,c),r(n,_),r(_,d),r(_,m),r(_,h),te(h,l[3]),r(n,v),r(n,g),r(g,S),r(g,C),r(g,k);for(let ae=0;ae<G.length;ae+=1)G[ae]&&G[ae].m(k,null);Le(k,l[4],!0),r(n,y),r(n,T),r(T,D),r(T,E),r(T,j),r(j,L);for(let ae=0;ae<ee.length;ae+=1)ee[ae]&&ee[ae].m(j,null);Le(j,l[5],!0),r(T,I),r(T,R),r(n,z),fe(Y,n,null),r(n,U),r(n,O),H=!0,P||(A=[x(a,"change",l[27]),x(h,"input",l[28]),x(k,"change",l[29]),x(j,"change",l[30]),x(n,"submit",l[15])],P=!0)},p(V,K){if(K[0]&8192){B=pe(V[13]);let W;for(W=0;W<B.length;W+=1){const ie=ka(V,B,W);J[W]?J[W].p(ie,K):(J[W]=Da(ie),J[W].c(),J[W].m(a,null))}for(;W<J.length;W+=1)J[W].d(1);J.length=B.length}if(K[0]&8196&&Le(a,V[2]),K[0]&8&&h.value!==V[3]&&te(h,V[3]),K[0]&16384){Q=pe(V[14]);let W;for(W=0;W<Q.length;W+=1){const ie=ba(V,Q,W);G[W]?G[W].p(ie,K):(G[W]=Ea(ie),G[W].c(),G[W].m(k,null))}for(;W<G.length;W+=1)G[W].d(1);G.length=Q.length}if(K[0]&16400&&Le(k,V[4]),K[0]&4096){oe=pe(V[12]||[]);let W;for(W=0;W<oe.length;W+=1){const ie=ga(V,oe,W);ee[W]?ee[W].p(ie,K):(ee[W]=Pa(ie),ee[W].c(),ee[W].m(j,null))}for(;W<ee.length;W+=1)ee[W].d(1);ee.length=oe.length}K[0]&4128&&Le(j,V[5]);const ae={};K[0]&64&&(ae.disabled=V[6]),K[0]&64|K[1]&65536&&(ae.$$scope={dirty:K,ctx:V}),Y.$set(ae)},i(V){H||(N(Y.$$.fragment,V),H=!0)},o(V){M(Y.$$.fragment,V),H=!1},d(V){V&&(w(e),w(t),w(n)),Ne(J,V),Ne(G,V),Ne(ee,V),ce(Y),P=!1,Ge(A)}}}function mm(l){let e;return{c(){e=p("div"),e.innerHTML='<div class="feature svelte-14omwo7"><strong class="svelte-14omwo7">🔐 Auto Credentials</strong> <p class="svelte-14omwo7">Deterministic passwords generated from project/env. Same inputs = same password.</p></div> <div class="feature svelte-14omwo7"><strong class="svelte-14omwo7">💾 Persistent Storage</strong> <p class="svelte-14omwo7">Data volumes mounted at /data. Survives container restarts and redeploys.</p></div> <div class="feature svelte-14omwo7"><strong class="svelte-14omwo7">🔀 Service Mesh</strong> <p class="svelte-14omwo7">Nginx proxy on internal ports. Apps connect to localhost:PORT.</p></div> <div class="feature svelte-14omwo7"><strong class="svelte-14omwo7">🔧 Auto-Inject</strong> <p class="svelte-14omwo7">Enable &quot;Auto-inject&quot; in Deploy tab to get DATABASE_URL automatically.</p></div>',f(e,"class","features-grid svelte-14omwo7")},m(t,n){$(t,e,n)},p:be,d(t){t&&w(e)}}}function vm(l){let e,t,n,s,o,i,a,u;return n=new mt({props:{title:"🔑 Direct Access Credentials",$$slots:{default:[fm]},$$scope:{ctx:l}}}),o=new mt({props:{title:"🗄️ Deploy Database/Cache",$$slots:{default:[dm]},$$scope:{ctx:l}}}),a=new mt({props:{title:"ℹ️ How It Works",$$slots:{default:[mm]},$$scope:{ctx:l}}}),{c(){e=p("div"),t=p("div"),_e(n.$$.fragment),s=b(),_e(o.$$.fragment),i=b(),_e(a.$$.fragment),f(t,"class","services-grid svelte-14omwo7"),f(e,"class","services-page svelte-14omwo7")},m(c,_){$(c,e,_),r(e,t),fe(n,t,null),r(t,s),fe(o,t,null),r(e,i),fe(a,e,null),u=!0},p(c,_){const d={};_[0]&3971|_[1]&65536&&(d.$$scope={dirty:_,ctx:c}),n.$set(d);const m={};_[0]&4220|_[1]&65536&&(m.$$scope={dirty:_,ctx:c}),o.$set(m);const h={};_[1]&65536&&(h.$$scope={dirty:_,ctx:c}),a.$set(h)},i(c){u||(N(n.$$.fragment,c),N(o.$$.fragment,c),N(a.$$.fragment,c),u=!0)},o(c){M(n.$$.fragment,c),M(o.$$.fragment,c),M(a.$$.fragment,c),u=!1},d(c){c&&w(e),ce(n),ce(o),ce(a)}}}function hm(l,e,t){let n;ht(l,vn,J=>t(12,n=J));let s="",o="",i="prod",a="",u=!1,c="",_="",d="prod",m="",h="",v=null,g=!1;const S=[{value:"postgres",label:"🐘 PostgreSQL",port:5432},{value:"redis",label:"⚡ Redis",port:6379},{value:"mysql",label:"🐬 MySQL",port:3306},{value:"mongo",label:"🍃 MongoDB",port:27017}],C=["prod","staging","dev"];Cl(()=>{k()});async function k(){try{await Zt.refresh()}catch(J){console.error("Failed to load servers:",J)}}async function y(J){if(J.preventDefault(),!s||!o||!a){Ce.error("Please fill in all required fields");return}t(6,u=!0);try{Ce.error("Service deployment not yet implemented. Use Deploy tab instead.");return}catch(Q){Ce.error("Deployment failed: "+Q.message)}finally{t(6,u=!1)}}async function T(J){if(J.preventDefault(),!c||!_||!m||!h){Ce.error("Please fill in all required fields");return}t(11,g=!0),t(10,v=null);try{const Q=await He("GET",`/infra/services/${c}/connection?project=${encodeURIComponent(_)}&environment=${d}&host=${encodeURIComponent(m)}&port=${h}`);t(10,v=Q),Ce.success("Connection info retrieved!")}catch(Q){Ce.error("Lookup failed: "+Q.message)}finally{t(11,g=!1)}}function D(J){navigator.clipboard.writeText(J),Ce.success("Copied to clipboard")}function E(){c=ft(this),t(0,c),t(13,S)}function j(){_=this.value,t(7,_)}function L(){d=ft(this),t(8,d),t(14,C)}function I(){m=this.value,t(9,m)}function R(){h=Kt(this.value),t(1,h)}const z=()=>D(v.connection_url),Y=()=>D(v.user),U=()=>D(v.password),O=()=>D(v.database);function H(){s=ft(this),t(2,s),t(13,S)}function P(){o=this.value,t(3,o)}function A(){i=ft(this),t(4,i),t(14,C)}function B(){a=ft(this),t(5,a)}return l.$$.update=()=>{l.$$.dirty[0]&3&&c&&S.find(J=>J.value===c)},[c,h,s,o,i,a,u,_,d,m,v,g,n,S,C,y,T,D,E,j,L,I,R,z,Y,U,O,H,P,A,B]}class gm extends jt{constructor(e){super(),qt(this,e,hm,vm,yt,{},null,[-1,-1])}}const{Boolean:bm}=Uu;function Na(l,e,t){const n=l.slice();return n[32]=e[t],n}function km(l){let e,t,n,s,o,i,a,u,c,_;return{c(){e=p("div"),t=p("label"),t.textContent="Theme",n=b(),s=p("select"),o=p("option"),o.textContent="🌙 Dark (Space)",i=p("option"),i.textContent="☀️ Light",a=b(),u=p("p"),u.textContent="Theme preference is saved to your browser.",f(t,"for","theme-select"),f(t,"class","svelte-16vnl3x"),o.__value="dark",te(o,o.__value),i.__value="light",te(i,i.__value),f(s,"id","theme-select"),f(s,"class","svelte-16vnl3x"),l[14]===void 0&&Qe(()=>l[21].call(s)),f(e,"class","form-group svelte-16vnl3x"),f(u,"class","hint svelte-16vnl3x")},m(d,m){$(d,e,m),r(e,t),r(e,n),r(e,s),r(s,o),r(s,i),Le(s,l[14],!0),$(d,a,m),$(d,u,m),c||(_=[x(s,"change",l[21]),x(s,"change",l[22])],c=!0)},p(d,m){m[0]&16384&&Le(s,d[14])},d(d){d&&(w(e),w(a),w(u)),c=!1,Ge(_)}}}function wm(l){let e;return{c(){e=q("Save Token")},m(t,n){$(t,e,n)},d(t){t&&w(e)}}}function $m(l){let e,t;return e=new xe({props:{variant:"danger",$$slots:{default:[Sm]},$$scope:{ctx:l}}}),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const o={};s[1]&16&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function Cm(l){let e,t;return e=new xe({props:{variant:"warning",$$slots:{default:[qm]},$$scope:{ctx:l}}}),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const o={};s[1]&16&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function ym(l){let e,t,n,s,o;return e=new xe({props:{variant:"success",$$slots:{default:[jm]},$$scope:{ctx:l}}}),{c(){_e(e.$$.fragment),t=b(),n=p("span"),s=q(l[0]),f(n,"class","token-preview svelte-16vnl3x")},m(i,a){fe(e,i,a),$(i,t,a),$(i,n,a),r(n,s),o=!0},p(i,a){const u={};a[1]&16&&(u.$$scope={dirty:a,ctx:i}),e.$set(u),(!o||a[0]&1)&&F(s,i[0])},i(i){o||(N(e.$$.fragment,i),o=!0)},o(i){M(e.$$.fragment,i),o=!1},d(i){i&&(w(t),w(n)),ce(e,i)}}}function Sm(l){let e;return{c(){e=q("Invalid token")},m(t,n){$(t,e,n)},d(t){t&&w(e)}}}function qm(l){let e;return{c(){e=q("Not configured")},m(t,n){$(t,e,n)},d(t){t&&w(e)}}}function jm(l){let e;return{c(){e=q("✓ Connected")},m(t,n){$(t,e,n)},d(t){t&&w(e)}}}function Tm(l){let e,t,n,s,o,i,a,u,c,_,d,m,h,v,g;u=new Be({props:{variant:"primary",type:"submit",$$slots:{default:[wm]},$$scope:{ctx:l}}});const S=[ym,Cm,$m],C=[];function k(y,T){var D,E;return(D=y[1])!=null&&D.valid?0:(E=y[1])!=null&&E.missing?1:2}return d=k(l),m=C[d]=S[d](l),{c(){e=p("p"),e.innerHTML=`Get your token from 
      <a href="https://cloud.digitalocean.com/account/api/tokens" target="_blank" class="svelte-16vnl3x">DO Control Panel</a>.`,t=b(),n=p("div"),n.innerHTML='<div class="info-title svelte-16vnl3x">🔒 Browser Storage</div> <div class="info-text svelte-16vnl3x">Token stored in browser cookie. Passed with each API request. Never stored on server.</div>',s=b(),o=p("form"),i=p("div"),i.innerHTML='<label for="do-token" class="svelte-16vnl3x">DigitalOcean API Token</label> <input id="do-token" type="password" placeholder="dop_v1_xxxxx" class="svelte-16vnl3x"/>',a=b(),_e(u.$$.fragment),c=b(),_=p("div"),m.c(),f(e,"class","description svelte-16vnl3x"),f(n,"class","info-box svelte-16vnl3x"),f(i,"class","form-group svelte-16vnl3x"),f(_,"class","token-status svelte-16vnl3x")},m(y,T){$(y,e,T),$(y,t,T),$(y,n,T),$(y,s,T),$(y,o,T),r(o,i),r(o,a),fe(u,o,null),$(y,c,T),$(y,_,T),C[d].m(_,null),h=!0,v||(g=x(o,"submit",l[15]),v=!0)},p(y,T){const D={};T[1]&16&&(D.$$scope={dirty:T,ctx:y}),u.$set(D);let E=d;d=k(y),d===E?C[d].p(y,T):(qe(),M(C[E],1,1,()=>{C[E]=null}),je(),m=C[d],m?m.p(y,T):(m=C[d]=S[d](y),m.c()),N(m,1),m.m(_,null))},i(y){h||(N(u.$$.fragment,y),N(m),h=!0)},o(y){M(u.$$.fragment,y),M(m),h=!1},d(y){y&&(w(e),w(t),w(n),w(s),w(o),w(c),w(_)),ce(u),C[d].d(),v=!1,g()}}}function Dm(l){let e;return{c(){e=q("Save Token")},m(t,n){$(t,e,n)},d(t){t&&w(e)}}}function Em(l){let e,t;return e=new xe({props:{variant:"warning",$$slots:{default:[Pm]},$$scope:{ctx:l}}}),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const o={};s[1]&16&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function Lm(l){let e,t,n,s,o;return e=new xe({props:{variant:"success",$$slots:{default:[Nm]},$$scope:{ctx:l}}}),{c(){_e(e.$$.fragment),t=b(),n=p("span"),s=q(l[2]),f(n,"class","token-preview svelte-16vnl3x")},m(i,a){fe(e,i,a),$(i,t,a),$(i,n,a),r(n,s),o=!0},p(i,a){const u={};a[1]&16&&(u.$$scope={dirty:a,ctx:i}),e.$set(u),(!o||a[0]&4)&&F(s,i[2])},i(i){o||(N(e.$$.fragment,i),o=!0)},o(i){M(e.$$.fragment,i),o=!1},d(i){i&&(w(t),w(n)),ce(e,i)}}}function Pm(l){let e;return{c(){e=q("Not configured")},m(t,n){$(t,e,n)},d(t){t&&w(e)}}}function Nm(l){let e;return{c(){e=q("✓ Connected")},m(t,n){$(t,e,n)},d(t){t&&w(e)}}}function Rm(l){let e,t,n,s,o,i,a,u,c,_,d,m,h;i=new Be({props:{variant:"primary",type:"submit",$$slots:{default:[Dm]},$$scope:{ctx:l}}});const v=[Lm,Em],g=[];function S(C,k){var y;return(y=C[3])!=null&&y.valid?0:1}return c=S(l),_=g[c]=v[c](l),{c(){e=p("p"),e.innerHTML=`Get your token from 
      <a href="https://dash.cloudflare.com/profile/api-tokens" target="_blank" class="svelte-16vnl3x">Cloudflare Dashboard</a>.`,t=b(),n=p("form"),s=p("div"),s.innerHTML='<label for="cf-token" class="svelte-16vnl3x">Cloudflare API Token</label> <input id="cf-token" type="password" placeholder="xxxxx" class="svelte-16vnl3x"/>',o=b(),_e(i.$$.fragment),a=b(),u=p("div"),_.c(),f(e,"class","description svelte-16vnl3x"),f(s,"class","form-group svelte-16vnl3x"),f(u,"class","token-status svelte-16vnl3x")},m(C,k){$(C,e,k),$(C,t,k),$(C,n,k),r(n,s),r(n,o),fe(i,n,null),$(C,a,k),$(C,u,k),g[c].m(u,null),d=!0,m||(h=x(n,"submit",l[16]),m=!0)},p(C,k){const y={};k[1]&16&&(y.$$scope={dirty:k,ctx:C}),i.$set(y);let T=c;c=S(C),c===T?g[c].p(C,k):(qe(),M(g[T],1,1,()=>{g[T]=null}),je(),_=g[c],_?_.p(C,k):(_=g[c]=v[c](C),_.c()),N(_,1),_.m(u,null))},i(C){d||(N(i.$$.fragment,C),N(_),d=!0)},o(C){M(i.$$.fragment,C),M(_),d=!1},d(C){C&&(w(e),w(t),w(n),w(a),w(u)),ce(i),g[c].d(),m=!1,h()}}}function Am(l){let e;return{c(){e=q("Setup Domain")},m(t,n){$(t,e,n)},d(t){t&&w(e)}}}function Ra(l){let e,t=l[7].message+"",n;return{c(){e=p("div"),n=q(t),f(e,"class","result svelte-16vnl3x"),we(e,"success",l[7].success),we(e,"error",!l[7].success)},m(s,o){$(s,e,o),r(e,n)},p(s,o){o[0]&128&&t!==(t=s[7].message+"")&&F(n,t),o[0]&128&&we(e,"success",s[7].success),o[0]&128&&we(e,"error",!s[7].success)},d(s){s&&w(e)}}}function Mm(l){let e,t,n,s,o,i,a,u,c,_,d,m,h,v,g,S,C,k,y,T,D,E,j,L;y=new Be({props:{variant:"primary",type:"submit",$$slots:{default:[Am]},$$scope:{ctx:l}}});let I=l[7]&&Ra(l);return{c(){e=p("p"),e.textContent='Point a domain to your server. With "Proxied" enabled, HTTPS works automatically.',t=b(),n=p("form"),s=p("div"),o=p("label"),o.textContent="Domain",i=b(),a=p("input"),u=b(),c=p("div"),_=p("label"),_.textContent="Server IP",d=b(),m=p("input"),h=b(),v=p("label"),g=p("input"),S=q(`
        Proxied (Cloudflare handles SSL)`),C=b(),k=p("div"),_e(y.$$.fragment),T=b(),I&&I.c(),D=Oe(),f(e,"class","description svelte-16vnl3x"),f(o,"for","domain-name"),f(o,"class","svelte-16vnl3x"),f(a,"id","domain-name"),f(a,"type","text"),f(a,"placeholder","api.example.com"),a.required=!0,f(a,"class","svelte-16vnl3x"),f(s,"class","form-group svelte-16vnl3x"),f(_,"for","domain-ip"),f(_,"class","svelte-16vnl3x"),f(m,"id","domain-ip"),f(m,"type","text"),f(m,"placeholder","1.2.3.4"),m.required=!0,f(m,"class","svelte-16vnl3x"),f(c,"class","form-group svelte-16vnl3x"),f(g,"type","checkbox"),f(g,"class","svelte-16vnl3x"),f(v,"class","checkbox-label svelte-16vnl3x"),f(k,"class","form-actions svelte-16vnl3x")},m(R,z){$(R,e,z),$(R,t,z),$(R,n,z),r(n,s),r(s,o),r(s,i),r(s,a),te(a,l[4]),r(n,u),r(n,c),r(c,_),r(c,d),r(c,m),te(m,l[5]),r(n,h),r(n,v),r(v,g),g.checked=l[6],r(v,S),r(n,C),r(n,k),fe(y,k,null),$(R,T,z),I&&I.m(R,z),$(R,D,z),E=!0,j||(L=[x(a,"input",l[23]),x(m,"input",l[24]),x(g,"change",l[25]),x(n,"submit",l[17])],j=!0)},p(R,z){z[0]&16&&a.value!==R[4]&&te(a,R[4]),z[0]&32&&m.value!==R[5]&&te(m,R[5]),z[0]&64&&(g.checked=R[6]);const Y={};z[1]&16&&(Y.$$scope={dirty:z,ctx:R}),y.$set(Y),R[7]?I?I.p(R,z):(I=Ra(R),I.c(),I.m(D.parentNode,D)):I&&(I.d(1),I=null)},i(R){E||(N(y.$$.fragment,R),E=!0)},o(R){M(y.$$.fragment,R),E=!1},d(R){R&&(w(e),w(t),w(n),w(T),w(D)),ce(y),I&&I.d(R),j=!1,Ge(L)}}}function zm(l){let e;return{c(){e=q("Setup DNS Round-Robin")},m(t,n){$(t,e,n)},d(t){t&&w(e)}}}function Aa(l){let e,t=l[11].message+"",n;return{c(){e=p("div"),n=q(t),f(e,"class","result svelte-16vnl3x"),we(e,"success",l[11].success),we(e,"error",!l[11].success)},m(s,o){$(s,e,o),r(e,n)},p(s,o){o[0]&2048&&t!==(t=s[11].message+"")&&F(n,t),o[0]&2048&&we(e,"success",s[11].success),o[0]&2048&&we(e,"error",!s[11].success)},d(s){s&&w(e)}}}function Om(l){let e,t,n,s,o,i,a,u,c,_,d,m,h,v,g,S,C,k,y,T,D,E,j,L;y=new Be({props:{variant:"primary",type:"submit",$$slots:{default:[zm]},$$scope:{ctx:l}}});let I=l[11]&&Aa(l);return{c(){e=p("p"),e.innerHTML=`Simple load distribution via multiple A records. Cloudflare rotates between IPs at DNS level.
      <strong>FREE</strong>, but no health checks.`,t=b(),n=p("form"),s=p("div"),o=p("label"),o.textContent="Domain",i=b(),a=p("input"),u=b(),c=p("div"),_=p("label"),_.textContent="Server IPs (comma-separated)",d=b(),m=p("input"),h=b(),v=p("label"),g=p("input"),S=q(`
        Proxied (SSL + CDN)`),C=b(),k=p("div"),_e(y.$$.fragment),T=b(),I&&I.c(),D=Oe(),f(e,"class","description svelte-16vnl3x"),f(o,"for","lb-domain"),f(o,"class","svelte-16vnl3x"),f(a,"id","lb-domain"),f(a,"type","text"),f(a,"placeholder","api.example.com"),a.required=!0,f(a,"class","svelte-16vnl3x"),f(s,"class","form-group svelte-16vnl3x"),f(_,"for","lb-ips"),f(_,"class","svelte-16vnl3x"),f(m,"id","lb-ips"),f(m,"type","text"),f(m,"placeholder","1.2.3.4, 5.6.7.8"),m.required=!0,f(m,"class","svelte-16vnl3x"),f(c,"class","form-group svelte-16vnl3x"),f(g,"type","checkbox"),f(g,"class","svelte-16vnl3x"),f(v,"class","checkbox-label svelte-16vnl3x"),f(k,"class","form-actions svelte-16vnl3x")},m(R,z){$(R,e,z),$(R,t,z),$(R,n,z),r(n,s),r(s,o),r(s,i),r(s,a),te(a,l[8]),r(n,u),r(n,c),r(c,_),r(c,d),r(c,m),te(m,l[9]),r(n,h),r(n,v),r(v,g),g.checked=l[10],r(v,S),r(n,C),r(n,k),fe(y,k,null),$(R,T,z),I&&I.m(R,z),$(R,D,z),E=!0,j||(L=[x(a,"input",l[26]),x(m,"input",l[27]),x(g,"change",l[28]),x(n,"submit",l[18])],j=!0)},p(R,z){z[0]&256&&a.value!==R[8]&&te(a,R[8]),z[0]&512&&m.value!==R[9]&&te(m,R[9]),z[0]&1024&&(g.checked=R[10]);const Y={};z[1]&16&&(Y.$$scope={dirty:z,ctx:R}),y.$set(Y),R[11]?I?I.p(R,z):(I=Aa(R),I.c(),I.m(D.parentNode,D)):I&&(I.d(1),I=null)},i(R){E||(N(y.$$.fragment,R),E=!0)},o(R){M(y.$$.fragment,R),E=!1},d(R){R&&(w(e),w(t),w(n),w(T),w(D)),ce(y),I&&I.d(R),j=!1,Ge(L)}}}function Im(l){let e,t,n=pe(l[12]),s=[];for(let i=0;i<n.length;i+=1)s[i]=Ma(Na(l,n,i));const o=i=>M(s[i],1,1,()=>{s[i]=null});return{c(){e=p("div");for(let i=0;i<s.length;i+=1)s[i].c();f(e,"class","task-list svelte-16vnl3x")},m(i,a){$(i,e,a);for(let u=0;u<s.length;u+=1)s[u]&&s[u].m(e,null);t=!0},p(i,a){if(a[0]&1052672){n=pe(i[12]);let u;for(u=0;u<n.length;u+=1){const c=Na(i,n,u);s[u]?(s[u].p(c,a),N(s[u],1)):(s[u]=Ma(c),s[u].c(),N(s[u],1),s[u].m(e,null))}for(qe(),u=n.length;u<s.length;u+=1)o(u);je()}},i(i){if(!t){for(let a=0;a<n.length;a+=1)N(s[a]);t=!0}},o(i){s=s.filter(bm);for(let a=0;a<s.length;a+=1)M(s[a]);t=!1},d(i){i&&w(e),Ne(s,i)}}}function Fm(l){let e;return{c(){e=p("div"),e.textContent="No scheduled tasks",f(e,"class","empty-state svelte-16vnl3x")},m(t,n){$(t,e,n)},p:be,i:be,o:be,d(t){t&&w(e)}}}function Um(l){let e;return{c(){e=p("div"),e.textContent="Loading tasks...",f(e,"class","empty-state svelte-16vnl3x")},m(t,n){$(t,e,n)},p:be,i:be,o:be,d(t){t&&w(e)}}}function Bm(l){let e=l[32].type+"",t;return{c(){t=q(e)},m(n,s){$(n,t,s)},p(n,s){s[0]&4096&&e!==(e=n[32].type+"")&&F(t,e)},d(n){n&&w(t)}}}function Hm(l){let e;return{c(){e=q("🗑️")},m(t,n){$(t,e,n)},d(t){t&&w(e)}}}function Ma(l){let e,t,n,s=l[32].name+"",o,i,a,u,c,_,d,m=l[32].interval+"",h,v,g,S,C,k;u=new xe({props:{variant:"info",$$slots:{default:[Bm]},$$scope:{ctx:l}}});function y(){return l[29](l[32])}return S=new Be({props:{variant:"danger",size:"sm",$$slots:{default:[Hm]},$$scope:{ctx:l}}}),S.$on("click",y),{c(){e=p("div"),t=p("div"),n=p("div"),o=q(s),i=b(),a=p("div"),_e(u.$$.fragment),c=b(),_=p("span"),d=q("Every "),h=q(m),v=q(" min"),g=b(),_e(S.$$.fragment),C=b(),f(n,"class","task-name svelte-16vnl3x"),f(a,"class","task-meta svelte-16vnl3x"),f(t,"class","task-info"),f(e,"class","task-item svelte-16vnl3x")},m(T,D){$(T,e,D),r(e,t),r(t,n),r(n,o),r(t,i),r(t,a),fe(u,a,null),r(a,c),r(a,_),r(_,d),r(_,h),r(_,v),r(e,g),fe(S,e,null),r(e,C),k=!0},p(T,D){l=T,(!k||D[0]&4096)&&s!==(s=l[32].name+"")&&F(o,s);const E={};D[0]&4096|D[1]&16&&(E.$$scope={dirty:D,ctx:l}),u.$set(E),(!k||D[0]&4096)&&m!==(m=l[32].interval+"")&&F(h,m);const j={};D[1]&16&&(j.$$scope={dirty:D,ctx:l}),S.$set(j)},i(T){k||(N(u.$$.fragment,T),N(S.$$.fragment,T),k=!0)},o(T){M(u.$$.fragment,T),M(S.$$.fragment,T),k=!1},d(T){T&&w(e),ce(u),ce(S)}}}function Gm(l){let e,t,n,s,o,i;const a=[Um,Fm,Im],u=[];function c(_,d){return _[13]?0:_[12].length===0?1:2}return n=c(l),s=u[n]=a[n](l),{c(){e=p("p"),e.textContent="Schedule recurring tasks like health checks, auto-restart, and backups.",t=b(),s.c(),o=Oe(),f(e,"class","description svelte-16vnl3x")},m(_,d){$(_,e,d),$(_,t,d),u[n].m(_,d),$(_,o,d),i=!0},p(_,d){let m=n;n=c(_),n===m?u[n].p(_,d):(qe(),M(u[m],1,1,()=>{u[m]=null}),je(),s=u[n],s?s.p(_,d):(s=u[n]=a[n](_),s.c()),N(s,1),s.m(o.parentNode,o))},i(_){i||(N(s),i=!0)},o(_){M(s),i=!1},d(_){_&&(w(e),w(t),w(o)),u[n].d(_)}}}function Vm(l){let e;return{c(){e=q("↻ Refresh")},m(t,n){$(t,e,n)},d(t){t&&w(e)}}}function Wm(l){let e,t;return e=new Be({props:{slot:"header",variant:"ghost",size:"sm",$$slots:{default:[Vm]},$$scope:{ctx:l}}}),e.$on("click",l[19]),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const o={};s[1]&16&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function Jm(l){let e,t,n,s,o,i,a,u,c,_,d,m,h;return t=new mt({props:{title:"🎨 Appearance",$$slots:{default:[km]},$$scope:{ctx:l}}}),s=new mt({props:{title:"⚙️ DigitalOcean Credentials",$$slots:{default:[Tm]},$$scope:{ctx:l}}}),i=new mt({props:{title:"☁️ Cloudflare Credentials",$$slots:{default:[Rm]},$$scope:{ctx:l}}}),u=new mt({props:{title:"🌐 Domain Setup",$$slots:{default:[Mm]},$$scope:{ctx:l}}}),_=new mt({props:{title:"🌐 DNS Round-Robin (Cloudflare)",$$slots:{default:[Om]},$$scope:{ctx:l}}}),m=new mt({props:{title:"⏰ Task Scheduler",$$slots:{header:[Wm],default:[Gm]},$$scope:{ctx:l}}}),{c(){e=p("div"),_e(t.$$.fragment),n=b(),_e(s.$$.fragment),o=b(),_e(i.$$.fragment),a=b(),_e(u.$$.fragment),c=b(),_e(_.$$.fragment),d=b(),_e(m.$$.fragment),f(e,"class","settings-page svelte-16vnl3x")},m(v,g){$(v,e,g),fe(t,e,null),r(e,n),fe(s,e,null),r(e,o),fe(i,e,null),r(e,a),fe(u,e,null),r(e,c),fe(_,e,null),r(e,d),fe(m,e,null),h=!0},p(v,g){const S={};g[0]&16384|g[1]&16&&(S.$$scope={dirty:g,ctx:v}),t.$set(S);const C={};g[0]&3|g[1]&16&&(C.$$scope={dirty:g,ctx:v}),s.$set(C);const k={};g[0]&12|g[1]&16&&(k.$$scope={dirty:g,ctx:v}),i.$set(k);const y={};g[0]&240|g[1]&16&&(y.$$scope={dirty:g,ctx:v}),u.$set(y);const T={};g[0]&3840|g[1]&16&&(T.$$scope={dirty:g,ctx:v}),_.$set(T);const D={};g[0]&12288|g[1]&16&&(D.$$scope={dirty:g,ctx:v}),m.$set(D)},i(v){h||(N(t.$$.fragment,v),N(s.$$.fragment,v),N(i.$$.fragment,v),N(u.$$.fragment,v),N(_.$$.fragment,v),N(m.$$.fragment,v),h=!0)},o(v){M(t.$$.fragment,v),M(s.$$.fragment,v),M(i.$$.fragment,v),M(u.$$.fragment,v),M(_.$$.fragment,v),M(m.$$.fragment,v),h=!1},d(v){v&&w(e),ce(t),ce(s),ce(i),ce(u),ce(_),ce(m)}}}function Km(l,e,t){let n;ht(l,Cn,J=>t(14,n=J));let s="",o=null,i="",a=null,u="",c="",_=!0,d=null,m="",h="",v=!0,g=null,S=[],C=!1;Cl(()=>{k(),y(),L()});async function k(){const J=Dt();if(J){t(0,s=J.substring(0,10)+"...");try{await He("GET","/infra/snapshots"),t(1,o={valid:!0})}catch{t(1,o={valid:!1})}}else t(1,o={valid:!1,missing:!0})}async function y(){const J=Tn();J?(t(2,i=J.substring(0,10)+"..."),t(3,a={valid:!0})):t(3,a={valid:!1,missing:!0})}async function T(J){J.preventDefault();const Q=J.target.querySelector("input"),G=Q.value;if(!G){Ce.error("Token is required");return}F1(G),Q.value="",Ce.success("DigitalOcean token saved"),await k(),Zt.refresh(),zn.refresh(),mn.refresh(),$l.refresh()}async function D(J){J.preventDefault();const Q=J.target.querySelector("input"),G=Q.value;if(!G){Ce.error("Token is required");return}U1(G),Q.value="",Ce.success("Cloudflare token saved"),await y()}async function E(J){J.preventDefault();try{const Q=await He("POST","/infra/cloudflare/domain",{domain:u,ip:c,proxied:_});t(7,d={success:!0,message:"Domain configured successfully"}),Ce.success("Domain setup complete")}catch(Q){t(7,d={success:!1,message:Q.message}),Ce.error(Q.message)}}async function j(J){J.preventDefault();try{const Q=h.split(",").map(oe=>oe.trim()).filter(Boolean),G=await He("POST","/infra/cloudflare/lb",{domain:m,server_ips:Q,proxied:v});t(11,g={success:!0,message:`Created load balancer with ${Q.length} servers`}),Ce.success("Load balancer configured")}catch(Q){t(11,g={success:!1,message:Q.message}),Ce.error(Q.message)}}async function L(){t(13,C=!0);try{const J=await He("GET","/infra/scheduler/tasks");t(12,S=J.tasks||J||[])}catch{t(12,S=[])}finally{t(13,C=!1)}}async function I(J){if(confirm("Delete this scheduled task?"))try{await He("DELETE",`/infra/scheduler/tasks/${J}`),Ce.success("Task deleted"),await L()}catch(Q){Ce.error(Q.message)}}function R(){n=ft(this),Cn.set(n)}const z=()=>Cn.set(n);function Y(){u=this.value,t(4,u)}function U(){c=this.value,t(5,c)}function O(){_=this.checked,t(6,_)}function H(){m=this.value,t(8,m)}function P(){h=this.value,t(9,h)}function A(){v=this.checked,t(10,v)}return[s,o,i,a,u,c,_,d,m,h,v,g,S,C,n,T,D,E,j,L,I,R,z,Y,U,O,H,P,A,J=>I(J.id)]}class Ym extends jt{constructor(e){super(),qt(this,e,Km,Jm,yt,{},null,[-1,-1])}}function za(l,e,t){const n=l.slice();n[21]=e[t];const s=n[1].filter(function(...u){return l[17](n[21],...u)});n[22]=s;const o=n[21].domain;n[23]=o;const i=n[22].length>1;return n[24]=i,n}function Oa(l,e,t){const n=l.slice();return n[27]=e[t],n}function Ia(l,e,t){const n=l.slice();return n[21]=e[t],n}function Fa(l,e,t){const n=l.slice();return n[32]=e[t],n}function Qm(l){let e,t,n,s,o,i,a,u,c,_,d,m,h,v,g,S,C,k,y=l[1].length+"",T,D,E,j,L,I,R,z,Y=l[7].length+"",U,O,H,P;const A=[tv,ev],B=[];function J(Q,G){return Q[11]?1:0}return m=J(l),h=B[m]=A[m](l),{c(){e=p("div"),t=p("div"),n=p("div"),n.innerHTML='<span class="summary-icon svelte-odhywp">🔀</span> <span>Nginx Sidecar</span>',s=b(),o=p("div"),i=q(l[3]),a=q("/"),u=q(l[2]),c=b(),_=p("div"),_.textContent="servers with nginx",d=b(),h.c(),v=b(),g=p("div"),S=p("div"),S.innerHTML='<span class="summary-icon svelte-odhywp">🤖</span> <span>Node Agents</span>',C=b(),k=p("div"),T=q(y),D=b(),E=p("div"),E.textContent="servers monitored",j=b(),L=p("div"),I=p("div"),I.innerHTML='<span class="summary-icon svelte-odhywp">📦</span> <span>Services</span>',R=b(),z=p("div"),U=q(Y),O=b(),H=p("div"),H.textContent="deployed services",f(n,"class","summary-header svelte-odhywp"),f(o,"class","summary-value svelte-odhywp"),f(_,"class","summary-label svelte-odhywp"),f(t,"class","summary-card svelte-odhywp"),we(t,"ok",l[11]),we(t,"warn",!l[11]),f(S,"class","summary-header svelte-odhywp"),f(k,"class","summary-value svelte-odhywp"),f(E,"class","summary-label svelte-odhywp"),f(g,"class","summary-card info svelte-odhywp"),f(I,"class","summary-header svelte-odhywp"),f(z,"class","summary-value svelte-odhywp"),f(H,"class","summary-label svelte-odhywp"),f(L,"class","summary-card info svelte-odhywp"),f(e,"class","summary-grid svelte-odhywp")},m(Q,G){$(Q,e,G),r(e,t),r(t,n),r(t,s),r(t,o),r(o,i),r(o,a),r(o,u),r(t,c),r(t,_),r(t,d),B[m].m(t,null),r(e,v),r(e,g),r(g,S),r(g,C),r(g,k),r(k,T),r(g,D),r(g,E),r(e,j),r(e,L),r(L,I),r(L,R),r(L,z),r(z,U),r(L,O),r(L,H),P=!0},p(Q,G){(!P||G[0]&8)&&F(i,Q[3]),(!P||G[0]&4)&&F(u,Q[2]);let oe=m;m=J(Q),m===oe?B[m].p(Q,G):(qe(),M(B[oe],1,1,()=>{B[oe]=null}),je(),h=B[m],h?h.p(Q,G):(h=B[m]=A[m](Q),h.c()),N(h,1),h.m(t,null)),(!P||G[0]&2048)&&we(t,"ok",Q[11]),(!P||G[0]&2048)&&we(t,"warn",!Q[11]),(!P||G[0]&2)&&y!==(y=Q[1].length+"")&&F(T,y),(!P||G[0]&128)&&Y!==(Y=Q[7].length+"")&&F(U,Y)},i(Q){P||(N(h),P=!0)},o(Q){M(h),P=!1},d(Q){Q&&w(e),B[m].d()}}}function Zm(l){let e;return{c(){e=p("div"),e.innerHTML='<p>No services deployed yet</p> <p class="hint svelte-odhywp">Deploy your first service to see the architecture</p>',f(e,"class","empty-state svelte-odhywp")},m(t,n){$(t,e,n)},p:be,i:be,o:be,d(t){t&&w(e)}}}function Xm(l){let e,t,n,s,o,i;return{c(){e=p("div"),t=p("p"),n=q("Failed to load: "),s=q(l[9]),o=b(),i=p("p"),i.textContent="Check your connection and try refreshing",f(i,"class","hint svelte-odhywp"),f(e,"class","empty-state svelte-odhywp")},m(a,u){$(a,e,u),r(e,t),r(t,n),r(t,s),r(e,o),r(e,i)},p(a,u){u[0]&512&&F(s,a[9])},i:be,o:be,d(a){a&&w(e)}}}function xm(l){let e;return{c(){e=p("div"),e.textContent="Loading architecture...",f(e,"class","empty-state svelte-odhywp")},m(t,n){$(t,e,n)},p:be,i:be,o:be,d(t){t&&w(e)}}}function ev(l){let e;return{c(){e=p("div"),e.textContent="✅ All servers OK",f(e,"class","summary-ok svelte-odhywp")},m(t,n){$(t,e,n)},p:be,i:be,o:be,d(t){t&&w(e)}}}function tv(l){let e,t;return e=new Be({props:{variant:"warning",size:"sm",$$slots:{default:[lv]},$$scope:{ctx:l}}}),e.$on("click",l[13]),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const o={};s[0]&12|s[1]&16&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function lv(l){let e,t=l[2]-l[3]+"",n,s;return{c(){e=q("🔧 Fix "),n=q(t),s=q(" server(s)")},m(o,i){$(o,e,i),$(o,n,i),$(o,s,i)},p(o,i){i[0]&12&&t!==(t=o[2]-o[3]+"")&&F(n,t)},d(o){o&&(w(e),w(n),w(s))}}}function nv(l){let e,t,n,s;const o=[xm,Xm,Zm,Qm],i=[];function a(u,c){return u[6]&&!u[10]?0:u[9]?1:u[7].length===0&&u[1].length===0?2:3}return e=a(l),t=i[e]=o[e](l),{c(){t.c(),n=Oe()},m(u,c){i[e].m(u,c),$(u,n,c),s=!0},p(u,c){let _=e;e=a(u),e===_?i[e].p(u,c):(qe(),M(i[_],1,1,()=>{i[_]=null}),je(),t=i[e],t?t.p(u,c):(t=i[e]=o[e](u),t.c()),N(t,1),t.m(n.parentNode,n))},i(u){s||(N(t),s=!0)},o(u){M(t),s=!1},d(u){u&&w(n),i[e].d(u)}}}function Ua(l){let e,t=l[32]+"",n,s;return{c(){e=p("option"),n=q(t),e.__value=s=l[32],te(e,e.__value)},m(o,i){$(o,e,i),r(e,n)},p(o,i){i[0]&4096&&t!==(t=o[32]+"")&&F(n,t),i[0]&4096&&s!==(s=o[32])&&(e.__value=s,te(e,e.__value))},d(o){o&&w(e)}}}function Ba(l){let e,t,n=Ka(l[8])+"",s;return{c(){e=p("span"),t=q("Updated "),s=q(n),f(e,"class","last-updated svelte-odhywp")},m(o,i){$(o,e,i),r(e,t),r(e,s)},p(o,i){i[0]&256&&n!==(n=Ka(o[8])+"")&&F(s,n)},d(o){o&&w(e)}}}function sv(l){let e;return{c(){e=q("↻ Refresh")},m(t,n){$(t,e,n)},d(t){t&&w(e)}}}function ov(l){let e,t,n,s,o,i,a,u,c,_,d,m,h,v,g,S=pe(l[12]||[]),C=[];for(let y=0;y<S.length;y+=1)C[y]=Ua(Fa(l,S,y));let k=l[8]&&Ba(l);return m=new Be({props:{variant:"ghost",size:"sm",$$slots:{default:[sv]},$$scope:{ctx:l}}}),m.$on("click",l[0]),{c(){e=p("div"),t=p("select"),n=p("option"),n.textContent="All Projects";for(let y=0;y<C.length;y+=1)C[y].c();s=b(),o=p("select"),i=p("option"),i.textContent="All Envs",a=p("option"),a.textContent="prod",u=p("option"),u.textContent="staging",c=p("option"),c.textContent="dev",_=b(),k&&k.c(),d=b(),_e(m.$$.fragment),n.__value="",te(n,n.__value),f(t,"class","svelte-odhywp"),l[4]===void 0&&Qe(()=>l[15].call(t)),i.__value="",te(i,i.__value),a.__value="prod",te(a,a.__value),u.__value="staging",te(u,u.__value),c.__value="dev",te(c,c.__value),f(o,"class","svelte-odhywp"),l[5]===void 0&&Qe(()=>l[16].call(o)),f(e,"slot","header"),f(e,"class","filters svelte-odhywp")},m(y,T){$(y,e,T),r(e,t),r(t,n);for(let D=0;D<C.length;D+=1)C[D]&&C[D].m(t,null);Le(t,l[4],!0),r(e,s),r(e,o),r(o,i),r(o,a),r(o,u),r(o,c),Le(o,l[5],!0),r(e,_),k&&k.m(e,null),r(e,d),fe(m,e,null),h=!0,v||(g=[x(t,"change",l[15]),x(t,"change",l[14]),x(o,"change",l[16]),x(o,"change",l[14])],v=!0)},p(y,T){if(T[0]&4096){S=pe(y[12]||[]);let E;for(E=0;E<S.length;E+=1){const j=Fa(y,S,E);C[E]?C[E].p(j,T):(C[E]=Ua(j),C[E].c(),C[E].m(t,null))}for(;E<C.length;E+=1)C[E].d(1);C.length=S.length}T[0]&4112&&Le(t,y[4]),T[0]&32&&Le(o,y[5]),y[8]?k?k.p(y,T):(k=Ba(y),k.c(),k.m(e,d)):k&&(k.d(1),k=null);const D={};T[1]&16&&(D.$$scope={dirty:T,ctx:y}),m.$set(D)},i(y){h||(N(m.$$.fragment,y),h=!0)},o(y){M(m.$$.fragment,y),h=!1},d(y){y&&w(e),Ne(C,y),k&&k.d(),ce(m),v=!1,Ge(g)}}}function iv(l){let e,t,n=pe(l[7]),s=[];for(let i=0;i<n.length;i+=1)s[i]=Ha(Ia(l,n,i));const o=i=>M(s[i],1,1,()=>{s[i]=null});return{c(){e=p("div");for(let i=0;i<s.length;i+=1)s[i].c();f(e,"class","list svelte-odhywp")},m(i,a){$(i,e,a);for(let u=0;u<s.length;u+=1)s[u]&&s[u].m(e,null);t=!0},p(i,a){if(a[0]&128){n=pe(i[7]);let u;for(u=0;u<n.length;u+=1){const c=Ia(i,n,u);s[u]?(s[u].p(c,a),N(s[u],1)):(s[u]=Ha(c),s[u].c(),N(s[u],1),s[u].m(e,null))}for(qe(),u=n.length;u<s.length;u+=1)o(u);je()}},i(i){if(!t){for(let a=0;a<n.length;a+=1)N(s[a]);t=!0}},o(i){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)M(s[a]);t=!1},d(i){i&&w(e),Ne(s,i)}}}function rv(l){let e;return{c(){e=p("div"),e.textContent="No services found",f(e,"class","empty-panel svelte-odhywp")},m(t,n){$(t,e,n)},p:be,i:be,o:be,d(t){t&&w(e)}}}function av(l){let e=l[21].type+"",t;return{c(){t=q(e)},m(n,s){$(n,t,s)},p(n,s){s[0]&128&&e!==(e=n[21].type+"")&&F(t,e)},d(n){n&&w(t)}}}function Ha(l){var H,P;let e,t,n=an(l[21])+"",s,o,i,a,u=l[21].service+"",c,_,d,m=l[21].project+"",h,v,g=l[21].env+"",S,C,k,y,T=(((H=l[21].servers)==null?void 0:H.length)||0)+"",D,E,j,L,I=(((P=l[21].ports)==null?void 0:P.join(", "))||"-")+"",R,z,Y,U,O;return Y=new xe({props:{variant:l[21].type==="stateful"?"warning":"info",$$slots:{default:[av]},$$scope:{ctx:l}}}),{c(){e=p("div"),t=p("div"),s=q(n),o=b(),i=p("div"),a=p("div"),c=q(u),_=b(),d=p("div"),h=q(m),v=q(" / "),S=q(g),C=b(),k=p("div"),y=p("div"),D=q(T),E=q(" server(s)"),j=b(),L=p("div"),R=q(I),z=b(),_e(Y.$$.fragment),U=b(),f(t,"class","item-icon svelte-odhywp"),f(a,"class","item-name svelte-odhywp"),f(d,"class","item-meta svelte-odhywp"),f(i,"class","item-info svelte-odhywp"),f(L,"class","ports svelte-odhywp"),f(k,"class","item-stats svelte-odhywp"),f(e,"class","list-item svelte-odhywp")},m(A,B){$(A,e,B),r(e,t),r(t,s),r(e,o),r(e,i),r(i,a),r(a,c),r(i,_),r(i,d),r(d,h),r(d,v),r(d,S),r(e,C),r(e,k),r(k,y),r(y,D),r(y,E),r(k,j),r(k,L),r(L,R),r(e,z),fe(Y,e,null),r(e,U),O=!0},p(A,B){var Q,G;(!O||B[0]&128)&&n!==(n=an(A[21])+"")&&F(s,n),(!O||B[0]&128)&&u!==(u=A[21].service+"")&&F(c,u),(!O||B[0]&128)&&m!==(m=A[21].project+"")&&F(h,m),(!O||B[0]&128)&&g!==(g=A[21].env+"")&&F(S,g),(!O||B[0]&128)&&T!==(T=(((Q=A[21].servers)==null?void 0:Q.length)||0)+"")&&F(D,T),(!O||B[0]&128)&&I!==(I=(((G=A[21].ports)==null?void 0:G.join(", "))||"-")+"")&&F(R,I);const J={};B[0]&128&&(J.variant=A[21].type==="stateful"?"warning":"info"),B[0]&128|B[1]&16&&(J.$$scope={dirty:B,ctx:A}),Y.$set(J)},i(A){O||(N(Y.$$.fragment,A),O=!0)},o(A){M(Y.$$.fragment,A),O=!1},d(A){A&&w(e),ce(Y)}}}function uv(l){let e,t,n,s;const o=[rv,iv],i=[];function a(u,c){return u[7].length===0?0:1}return e=a(l),t=i[e]=o[e](l),{c(){t.c(),n=Oe()},m(u,c){i[e].m(u,c),$(u,n,c),s=!0},p(u,c){let _=e;e=a(u),e===_?i[e].p(u,c):(qe(),M(i[_],1,1,()=>{i[_]=null}),je(),t=i[e],t?t.p(u,c):(t=i[e]=o[e](u),t.c()),N(t,1),t.m(n.parentNode,n))},i(u){s||(N(t),s=!0)},o(u){M(t),s=!1},d(u){u&&w(n),i[e].d(u)}}}function fv(l){let e,t,n=pe(l[1]),s=[];for(let i=0;i<n.length;i+=1)s[i]=Ga(Oa(l,n,i));const o=i=>M(s[i],1,1,()=>{s[i]=null});return{c(){e=p("div");for(let i=0;i<s.length;i+=1)s[i].c();f(e,"class","list svelte-odhywp")},m(i,a){$(i,e,a);for(let u=0;u<s.length;u+=1)s[u]&&s[u].m(e,null);t=!0},p(i,a){if(a[0]&2){n=pe(i[1]);let u;for(u=0;u<n.length;u+=1){const c=Oa(i,n,u);s[u]?(s[u].p(c,a),N(s[u],1)):(s[u]=Ga(c),s[u].c(),N(s[u],1),s[u].m(e,null))}for(qe(),u=n.length;u<s.length;u+=1)o(u);je()}},i(i){if(!t){for(let a=0;a<n.length;a+=1)N(s[a]);t=!0}},o(i){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)M(s[a]);t=!1},d(i){i&&w(e),Ne(s,i)}}}function cv(l){let e;return{c(){e=p("div"),e.textContent="No servers found",f(e,"class","empty-panel svelte-odhywp")},m(t,n){$(t,e,n)},p:be,i:be,o:be,d(t){t&&w(e)}}}function _v(l){let e=un(l[27])?"🔀 nginx":"⚠️ no nginx",t;return{c(){t=q(e)},m(n,s){$(n,t,s)},p(n,s){s[0]&2&&e!==(e=un(n[27])?"🔀 nginx":"⚠️ no nginx")&&F(t,e)},d(n){n&&w(t)}}}function pv(l){let e,t=(l[27].agent_version||"?")+"",n;return{c(){e=q("🤖 v"),n=q(t)},m(s,o){$(s,e,o),$(s,n,o)},p(s,o){o[0]&2&&t!==(t=(s[27].agent_version||"?")+"")&&F(n,t)},d(s){s&&(w(e),w(n))}}}function Ga(l){let e,t,n=l[27].status==="online"?"🟢":"🔴",s,o,i,a,u=l[27].ip+"",c,_,d,m=(l[27].containers||0)+"",h,v,g,S,C,k,y,T,D;return C=new xe({props:{variant:un(l[27])?"success":"warning",$$slots:{default:[_v]},$$scope:{ctx:l}}}),y=new xe({props:{variant:"info",$$slots:{default:[pv]},$$scope:{ctx:l}}}),{c(){e=p("div"),t=p("div"),s=q(n),o=b(),i=p("div"),a=p("code"),c=q(u),_=b(),d=p("div"),h=q(m),v=q(" container(s)"),g=b(),S=p("div"),_e(C.$$.fragment),k=b(),_e(y.$$.fragment),T=b(),f(t,"class","item-icon svelte-odhywp"),f(a,"class","server-ip svelte-odhywp"),f(d,"class","item-meta svelte-odhywp"),f(i,"class","item-info svelte-odhywp"),f(S,"class","item-badges svelte-odhywp"),f(e,"class","list-item svelte-odhywp")},m(E,j){$(E,e,j),r(e,t),r(t,s),r(e,o),r(e,i),r(i,a),r(a,c),r(i,_),r(i,d),r(d,h),r(d,v),r(e,g),r(e,S),fe(C,S,null),r(S,k),fe(y,S,null),r(e,T),D=!0},p(E,j){(!D||j[0]&2)&&n!==(n=E[27].status==="online"?"🟢":"🔴")&&F(s,n),(!D||j[0]&2)&&u!==(u=E[27].ip+"")&&F(c,u),(!D||j[0]&2)&&m!==(m=(E[27].containers||0)+"")&&F(h,m);const L={};j[0]&2&&(L.variant=un(E[27])?"success":"warning"),j[0]&2|j[1]&16&&(L.$$scope={dirty:j,ctx:E}),C.$set(L);const I={};j[0]&2|j[1]&16&&(I.$$scope={dirty:j,ctx:E}),y.$set(I)},i(E){D||(N(C.$$.fragment,E),N(y.$$.fragment,E),D=!0)},o(E){M(C.$$.fragment,E),M(y.$$.fragment,E),D=!1},d(E){E&&w(e),ce(C),ce(y)}}}function dv(l){let e,t,n,s;const o=[cv,fv],i=[];function a(u,c){return u[1].length===0?0:1}return e=a(l),t=i[e]=o[e](l),{c(){t.c(),n=Oe()},m(u,c){i[e].m(u,c),$(u,n,c),s=!0},p(u,c){let _=e;e=a(u),e===_?i[e].p(u,c):(qe(),M(i[_],1,1,()=>{i[_]=null}),je(),t=i[e],t?t.p(u,c):(t=i[e]=o[e](u),t.c()),N(t,1),t.m(n.parentNode,n))},i(u){s||(N(t),s=!0)},o(u){M(t),s=!1},d(u){u&&w(n),i[e].d(u)}}}function mv(l){let e,t,n=pe(l[7]),s=[];for(let i=0;i<n.length;i+=1)s[i]=Ja(za(l,n,i));const o=i=>M(s[i],1,1,()=>{s[i]=null});return{c(){e=p("div");for(let i=0;i<s.length;i+=1)s[i].c();f(e,"class","traffic-flow svelte-odhywp")},m(i,a){$(i,e,a);for(let u=0;u<s.length;u+=1)s[u]&&s[u].m(e,null);t=!0},p(i,a){if(a[0]&130){n=pe(i[7]);let u;for(u=0;u<n.length;u+=1){const c=za(i,n,u);s[u]?(s[u].p(c,a),N(s[u],1)):(s[u]=Ja(c),s[u].c(),N(s[u],1),s[u].m(e,null))}for(qe(),u=n.length;u<s.length;u+=1)o(u);je()}},i(i){if(!t){for(let a=0;a<n.length;a+=1)N(s[a]);t=!0}},o(i){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)M(s[a]);t=!1},d(i){i&&w(e),Ne(s,i)}}}function vv(l){let e;return{c(){e=p("div"),e.textContent="Deploy services to see traffic flow",f(e,"class","empty-panel svelte-odhywp")},m(t,n){$(t,e,n)},p:be,i:be,o:be,d(t){t&&w(e)}}}function hv(l){let e=l[21].env+"",t;return{c(){t=q(e)},m(n,s){$(n,t,s)},p(n,s){s[0]&128&&e!==(e=n[21].env+"")&&F(t,e)},d(n){n&&w(t)}}}function Va(l){let e,t,n,s,o,i,a=l[21].domain+"",u,c,_;return{c(){e=p("div"),t=p("span"),t.textContent="☁️",n=b(),s=p("span"),s.textContent="Cloudflare",o=b(),i=p("span"),u=q(a),c=b(),_=p("div"),_.textContent="→",f(t,"class","svelte-odhywp"),f(s,"class","node-label svelte-odhywp"),f(i,"class","node-detail svelte-odhywp"),f(e,"class","flow-node cloudflare svelte-odhywp"),f(_,"class","flow-arrow svelte-odhywp")},m(d,m){$(d,e,m),r(e,t),r(e,n),r(e,s),r(e,o),r(e,i),r(i,u),$(d,c,m),$(d,_,m)},p(d,m){m[0]&128&&a!==(a=d[21].domain+"")&&F(u,a)},d(d){d&&(w(e),w(c),w(_))}}}function gv(l){let e;return{c(){e=q("Server")},m(t,n){$(t,e,n)},p:be,d(t){t&&w(e)}}}function bv(l){let e,t=l[22].length+"",n,s;return{c(){e=q("⚖️ Load Balanced ("),n=q(t),s=q(")")},m(o,i){$(o,e,i),$(o,n,i),$(o,s,i)},p(o,i){i[0]&130&&t!==(t=o[22].length+"")&&F(n,t)},d(o){o&&(w(e),w(n),w(s))}}}function Wa(l){let e,t,n,s=l[21].domain+"",o,i;return{c(){e=p("span"),t=q("Domain: "),n=p("a"),o=q(s),f(n,"href",i="https://"+l[21].domain),f(n,"target","_blank"),f(n,"class","svelte-odhywp")},m(a,u){$(a,e,u),r(e,t),r(e,n),r(n,o)},p(a,u){u[0]&128&&s!==(s=a[21].domain+"")&&F(o,s),u[0]&128&&i!==(i="https://"+a[21].domain)&&f(n,"href",i)},d(a){a&&w(e)}}}function Ja(l){let e,t,n,s=an(l[21])+"",o,i,a,u=l[21].service+"",c,_,d,m,h,v,g,S,C,k,y,T,D,E,j,L,I,R,z,Y,U,O,H,P,A=(l[21].host_port||"8000")+"",B,J,Q,G,oe,ee,V,K=(l[21].container_name||l[21].id)+"",ae,W,ie;d=new xe({props:{variant:l[21].env==="prod"?"danger":"info",$$slots:{default:[hv]},$$scope:{ctx:l}}});let ue=l[23]&&Va(l);function le(X,Z){return X[24]?bv:gv}let me=le(l),re=me(l),ne=l[23]&&Wa(l);return{c(){e=p("div"),t=p("div"),n=p("span"),o=q(s),i=b(),a=p("span"),c=q(u),_=b(),_e(d.$$.fragment),m=b(),h=p("div"),ue&&ue.c(),v=b(),g=p("div"),S=p("span"),S.textContent="🖥️",C=b(),k=p("span"),re.c(),y=b(),T=p("div"),T.textContent="→",D=b(),E=p("div"),E.innerHTML='<span class="svelte-odhywp">🔀</span> <span class="node-label svelte-odhywp">nginx</span> <span class="node-detail svelte-odhywp">:443</span>',j=b(),L=p("div"),L.textContent="→",I=b(),R=p("div"),z=p("span"),z.textContent="🐳",Y=b(),U=p("span"),U.textContent="Container",O=b(),H=p("span"),P=q(":"),B=q(A),J=b(),Q=p("div"),ne&&ne.c(),G=b(),oe=p("span"),ee=q("Container: "),V=p("code"),ae=q(K),W=b(),f(n,"class","flow-icon svelte-odhywp"),f(a,"class","flow-name svelte-odhywp"),f(t,"class","flow-header svelte-odhywp"),f(S,"class","svelte-odhywp"),f(k,"class","node-label svelte-odhywp"),f(g,"class","flow-node server svelte-odhywp"),f(T,"class","flow-arrow svelte-odhywp"),f(E,"class","flow-node nginx svelte-odhywp"),f(L,"class","flow-arrow svelte-odhywp"),f(z,"class","svelte-odhywp"),f(U,"class","node-label svelte-odhywp"),f(H,"class","node-detail svelte-odhywp"),f(R,"class","flow-node container svelte-odhywp"),f(h,"class","flow-path svelte-odhywp"),f(V,"class","svelte-odhywp"),f(Q,"class","flow-details svelte-odhywp"),f(e,"class","flow-card svelte-odhywp")},m(X,Z){$(X,e,Z),r(e,t),r(t,n),r(n,o),r(t,i),r(t,a),r(a,c),r(t,_),fe(d,t,null),r(e,m),r(e,h),ue&&ue.m(h,null),r(h,v),r(h,g),r(g,S),r(g,C),r(g,k),re.m(k,null),r(h,y),r(h,T),r(h,D),r(h,E),r(h,j),r(h,L),r(h,I),r(h,R),r(R,z),r(R,Y),r(R,U),r(R,O),r(R,H),r(H,P),r(H,B),r(e,J),r(e,Q),ne&&ne.m(Q,null),r(Q,G),r(Q,oe),r(oe,ee),r(oe,V),r(V,ae),r(e,W),ie=!0},p(X,Z){(!ie||Z[0]&128)&&s!==(s=an(X[21])+"")&&F(o,s),(!ie||Z[0]&128)&&u!==(u=X[21].service+"")&&F(c,u);const ge={};Z[0]&128&&(ge.variant=X[21].env==="prod"?"danger":"info"),Z[0]&128|Z[1]&16&&(ge.$$scope={dirty:Z,ctx:X}),d.$set(ge),X[23]?ue?ue.p(X,Z):(ue=Va(X),ue.c(),ue.m(h,v)):ue&&(ue.d(1),ue=null),me===(me=le(X))&&re?re.p(X,Z):(re.d(1),re=me(X),re&&(re.c(),re.m(k,null))),(!ie||Z[0]&128)&&A!==(A=(X[21].host_port||"8000")+"")&&F(B,A),X[23]?ne?ne.p(X,Z):(ne=Wa(X),ne.c(),ne.m(Q,G)):ne&&(ne.d(1),ne=null),(!ie||Z[0]&128)&&K!==(K=(X[21].container_name||X[21].id)+"")&&F(ae,K)},i(X){ie||(N(d.$$.fragment,X),ie=!0)},o(X){M(d.$$.fragment,X),ie=!1},d(X){X&&w(e),ce(d),ue&&ue.d(),re.d(),ne&&ne.d()}}}function kv(l){let e,t,n,s;const o=[vv,mv],i=[];function a(u,c){return u[7].length===0?0:1}return e=a(l),t=i[e]=o[e](l),{c(){t.c(),n=Oe()},m(u,c){i[e].m(u,c),$(u,n,c),s=!0},p(u,c){let _=e;e=a(u),e===_?i[e].p(u,c):(qe(),M(i[_],1,1,()=>{i[_]=null}),je(),t=i[e],t?t.p(u,c):(t=i[e]=o[e](u),t.c()),N(t,1),t.m(n.parentNode,n))},i(u){s||(N(t),s=!0)},o(u){M(t),s=!1},d(u){u&&w(n),i[e].d(u)}}}function wv(l){let e;return{c(){e=p("span"),e.textContent="Request path from client to container",f(e,"slot","header"),f(e,"class","subtitle svelte-odhywp")},m(t,n){$(t,e,n)},p:be,d(t){t&&w(e)}}}function $v(l){let e,t,n,s,o,i,a,u,c,_;return t=new mt({props:{title:"🏗️ Architecture View",$$slots:{header:[ov],default:[nv]},$$scope:{ctx:l}}}),o=new mt({props:{title:"📦 Services",padding:!1,$$slots:{default:[uv]},$$scope:{ctx:l}}}),a=new mt({props:{title:"🖥️ Servers",padding:!1,$$slots:{default:[dv]},$$scope:{ctx:l}}}),c=new mt({props:{title:"🚦 Traffic Flow",$$slots:{header:[wv],default:[kv]},$$scope:{ctx:l}}}),{c(){e=p("div"),_e(t.$$.fragment),n=b(),s=p("div"),_e(o.$$.fragment),i=b(),_e(a.$$.fragment),u=b(),_e(c.$$.fragment),f(s,"class","panels-grid svelte-odhywp"),f(e,"class","architecture-page svelte-odhywp")},m(d,m){$(d,e,m),fe(t,e,null),r(e,n),r(e,s),fe(o,s,null),r(s,i),fe(a,s,null),r(e,u),fe(c,e,null),_=!0},p(d,m){const h={};m[0]&8190|m[1]&16&&(h.$$scope={dirty:m,ctx:d}),t.$set(h);const v={};m[0]&128|m[1]&16&&(v.$$scope={dirty:m,ctx:d}),o.$set(v);const g={};m[0]&2|m[1]&16&&(g.$$scope={dirty:m,ctx:d}),a.$set(g);const S={};m[0]&130|m[1]&16&&(S.$$scope={dirty:m,ctx:d}),c.$set(S)},i(d){_||(N(t.$$.fragment,d),N(o.$$.fragment,d),N(a.$$.fragment,d),N(c.$$.fragment,d),_=!0)},o(d){M(t.$$.fragment,d),M(o.$$.fragment,d),M(a.$$.fragment,d),M(c.$$.fragment,d),_=!1},d(d){d&&w(e),ce(t),ce(o),ce(a),ce(c)}}}function Ka(l){return l?l.toLocaleTimeString():""}function an(l){switch(l.type){case"stateful":return"🗄️";case"frontend":return"🌐";case"api":return"⚡";case"worker":return"⚙️";default:return"📦"}}function un(l){return l.nginx_status==="running"}function Cv(l,e,t){let n,s,o,i;ht(l,On,L=>t(12,i=L));let a="",u="",c=!1,_=[],d=[],m=[],h=null,v=null,g=!1,S=null;Cl(()=>{g||(C(),S=setInterval(C,6e4))}),wc(()=>{S&&clearInterval(S)});async function C(){g||t(6,c=!0),t(9,v=null);try{const L=Dt();if(!L)throw new Error("DigitalOcean token required");const I=await He("POST","/infra/architecture",{project:a||null,environment:u||null,do_token:L});t(7,_=I.nodes||[]),t(1,d=I.servers||[]),m=I.infrastructure||[],t(8,h=new Date),t(10,g=!0)}catch(L){t(9,v=L.message),g||Ce.error("Failed to load architecture: "+L.message)}finally{t(6,c=!1)}}async function k(){const L=d.filter(I=>I.nginx_status!=="running").map(I=>I.ip);if(L.length===0){Ce.info("All servers already have nginx running");return}Ce.info(`Fixing ${L.length} server(s)...`);try{await He("POST","/infra/nginx/ensure",{server_ips:L}),Ce.success("Nginx sidecar installed"),architectureStore.refresh()}catch(I){Ce.error(I.message)}}function y(){C()}function T(){C()}function D(){a=ft(this),t(4,a)}function E(){u=ft(this),t(5,u)}const j=(L,I)=>{var R;return(R=L.servers)==null?void 0:R.includes(I.ip)};return l.$$.update=()=>{l.$$.dirty[0]&2&&t(3,n=d.filter(L=>L.nginx_status==="running").length),l.$$.dirty[0]&2&&t(2,s=d.length),l.$$.dirty[0]&12&&t(11,o=n===s)},[T,d,s,n,a,u,c,_,h,v,g,o,i,k,y,D,E,j]}class yv extends jt{constructor(e){super(),qt(this,e,Cv,$v,yt,{refresh:0},null,[-1,-1])}get refresh(){return this.$$.ctx[0]}}function Ya(l,e,t){const n=l.slice();return n[72]=e[t],n}function Qa(l,e,t){const n=l.slice();return n[75]=e[t][0],n[76]=e[t][1],n}function Za(l,e,t){const n=l.slice();return n[72]=e[t],n[80]=t,n}function Xa(l,e,t){const n=l.slice();return n[81]=e[t],n}function xa(l,e,t){const n=l.slice();return n[84]=e[t],n}function eu(l,e,t){const n=l.slice();return n[87]=e[t],n}function tu(l,e,t){const n=l.slice();return n[90]=e[t],n}function lu(l,e,t){const n=l.slice();return n[93]=e[t],n}function nu(l,e,t){const n=l.slice();return n[96]=e[t],n}function su(l,e,t){const n=l.slice();return n[99]=e[t],n}function Sv(l){let e,t,n,s,o,i,a,u,c,_,d,m,h,v,g,S,C;return _=new Be({props:{disabled:l[14],$$slots:{default:[jv]},$$scope:{ctx:l}}}),_.$on("click",l[33]),m=new Be({props:{variant:l[17]?"primary":"secondary",$$slots:{default:[Tv]},$$scope:{ctx:l}}}),m.$on("click",l[34]),v=new Be({props:{variant:"danger",$$slots:{default:[Dv]},$$scope:{ctx:l}}}),v.$on("click",l[35]),{c(){e=p("select"),t=p("option"),t.textContent="All Levels",n=p("option"),n.textContent="DEBUG",s=p("option"),s.textContent="INFO",o=p("option"),o.textContent="WARNING",i=p("option"),i.textContent="ERROR",a=b(),u=p("input"),c=b(),_e(_.$$.fragment),d=b(),_e(m.$$.fragment),h=b(),_e(v.$$.fragment),t.__value="",te(t,t.__value),n.__value="DEBUG",te(n,n.__value),s.__value="INFO",te(s,s.__value),o.__value="WARNING",te(o,o.__value),i.__value="ERROR",te(i,i.__value),f(e,"class","svelte-1qj4rom"),l[15]===void 0&&Qe(()=>l[49].call(e)),f(u,"type","text"),f(u,"placeholder","Search logs..."),f(u,"class","svelte-1qj4rom")},m(k,y){$(k,e,y),r(e,t),r(e,n),r(e,s),r(e,o),r(e,i),Le(e,l[15],!0),$(k,a,y),$(k,u,y),te(u,l[16]),$(k,c,y),fe(_,k,y),$(k,d,y),fe(m,k,y),$(k,h,y),fe(v,k,y),g=!0,S||(C=[x(e,"change",l[49]),x(e,"change",l[33]),x(u,"input",l[50]),x(u,"keyup",l[51])],S=!0)},p(k,y){y[0]&32768&&Le(e,k[15]),y[0]&65536&&u.value!==k[16]&&te(u,k[16]);const T={};y[0]&16384&&(T.disabled=k[14]),y[0]&16384|y[3]&512&&(T.$$scope={dirty:y,ctx:k}),_.$set(T);const D={};y[0]&131072&&(D.variant=k[17]?"primary":"secondary"),y[0]&131072|y[3]&512&&(D.$$scope={dirty:y,ctx:k}),m.$set(D);const E={};y[3]&512&&(E.$$scope={dirty:y,ctx:k}),v.$set(E)},i(k){g||(N(_.$$.fragment,k),N(m.$$.fragment,k),N(v.$$.fragment,k),g=!0)},o(k){M(_.$$.fragment,k),M(m.$$.fragment,k),M(v.$$.fragment,k),g=!1},d(k){k&&(w(e),w(a),w(u),w(c),w(d),w(h)),ce(_,k),ce(m,k),ce(v,k),S=!1,Ge(C)}}}function qv(l){let e,t,n,s,o,i,a,u,c,_;return a=new Be({props:{disabled:l[1],$$slots:{default:[Ev]},$$scope:{ctx:l}}}),a.$on("click",l[38]),{c(){e=p("select"),t=p("option"),t.textContent="Last 1 hour",n=p("option"),n.textContent="Last 6 hours",s=p("option"),s.textContent="Last 24 hours",o=p("option"),o.textContent="Last 7 days",i=b(),_e(a.$$.fragment),t.__value=1,te(t,t.__value),n.__value=6,te(n,n.__value),s.__value=24,te(s,s.__value),o.__value=168,te(o,o.__value),f(e,"class","svelte-1qj4rom"),l[9]===void 0&&Qe(()=>l[48].call(e))},m(d,m){$(d,e,m),r(e,t),r(e,n),r(e,s),r(e,o),Le(e,l[9],!0),$(d,i,m),fe(a,d,m),u=!0,c||(_=[x(e,"change",l[48]),x(e,"change",l[38])],c=!0)},p(d,m){m[0]&512&&Le(e,d[9]);const h={};m[0]&2&&(h.disabled=d[1]),m[0]&2|m[3]&512&&(h.$$scope={dirty:m,ctx:d}),a.$set(h)},i(d){u||(N(a.$$.fragment,d),u=!0)},o(d){M(a.$$.fragment,d),u=!1},d(d){d&&(w(e),w(i)),ce(a,d),c=!1,Ge(_)}}}function jv(l){let e=l[14]?"⏳":"🔄",t,n;return{c(){t=q(e),n=q(" Refresh")},m(s,o){$(s,t,o),$(s,n,o)},p(s,o){o[0]&16384&&e!==(e=s[14]?"⏳":"🔄")&&F(t,e)},d(s){s&&(w(t),w(n))}}}function Tv(l){let e=l[17]?"⏸️ Stop":"▶️ Auto",t;return{c(){t=q(e)},m(n,s){$(n,t,s)},p(n,s){s[0]&131072&&e!==(e=n[17]?"⏸️ Stop":"▶️ Auto")&&F(t,e)},d(n){n&&w(t)}}}function Dv(l){let e;return{c(){e=q("🗑️ Clear")},m(t,n){$(t,e,n)},d(t){t&&w(e)}}}function Ev(l){let e=l[1]?"⏳":"🔄",t,n;return{c(){t=q(e),n=q(" Refresh")},m(s,o){$(s,t,o),$(s,n,o)},p(s,o){o[0]&2&&e!==(e=s[1]?"⏳":"🔄")&&F(t,e)},d(s){s&&(w(t),w(n))}}}function ou(l){var z,Y;let e,t,n,s,o,i,a,u,c,_,d,m,h,v,g,S,C,k,y,T,D,E,j=l[2]&&iu(l),L=((Y=(z=l[2])==null?void 0:z.slow_endpoints)==null?void 0:Y.length)>0&&ru(l),I=pe(l[6]),R=[];for(let U=0;U<I.length;U+=1)R[U]=uu(nu(l,I,U));return C=new Be({props:{size:"small",$$slots:{default:[Ov]},$$scope:{ctx:l}}}),C.$on("click",l[36]),y=new mt({props:{$$slots:{default:[Fv]},$$scope:{ctx:l}}}),{c(){j&&j.c(),e=b(),L&&L.c(),t=b(),n=p("div"),s=p("select"),o=p("option"),o.textContent="All services";for(let U=0;U<R.length;U+=1)R[U].c();i=b(),a=p("input"),u=b(),c=p("input"),_=b(),d=p("select"),m=p("option"),m.textContent="All status",h=p("option"),h.textContent="2xx Success",v=p("option"),v.textContent="4xx Client Error",g=p("option"),g.textContent="5xx Server Error",S=b(),_e(C.$$.fragment),k=b(),_e(y.$$.fragment),o.__value="",te(o,o.__value),f(s,"title","Filter by service"),f(s,"class","svelte-1qj4rom"),l[8]===void 0&&Qe(()=>l[54].call(s)),f(a,"type","text"),f(a,"placeholder","Path prefix (e.g., /api/v1/infra)"),f(a,"class","svelte-1qj4rom"),f(c,"type","number"),f(c,"placeholder","Min ms"),f(c,"class","svelte-1qj4rom"),m.__value="",te(m,m.__value),h.__value="2xx",te(h,h.__value),v.__value="4xx",te(v,v.__value),g.__value="5xx",te(g,g.__value),f(d,"class","svelte-1qj4rom"),l[12]===void 0&&Qe(()=>l[57].call(d)),f(n,"class","filters svelte-1qj4rom")},m(U,O){j&&j.m(U,O),$(U,e,O),L&&L.m(U,O),$(U,t,O),$(U,n,O),r(n,s),r(s,o);for(let H=0;H<R.length;H+=1)R[H]&&R[H].m(s,null);Le(s,l[8],!0),r(n,i),r(n,a),te(a,l[10]),r(n,u),r(n,c),te(c,l[11]),r(n,_),r(n,d),r(d,m),r(d,h),r(d,v),r(d,g),Le(d,l[12],!0),r(n,S),fe(C,n,null),$(U,k,O),fe(y,U,O),T=!0,D||(E=[x(s,"change",l[54]),x(s,"change",l[38]),x(a,"input",l[55]),x(a,"change",l[36]),x(c,"input",l[56]),x(c,"change",l[36]),x(d,"change",l[57]),x(d,"change",l[36])],D=!0)},p(U,O){var A,B;if(U[2]?j?(j.p(U,O),O[0]&4&&N(j,1)):(j=iu(U),j.c(),N(j,1),j.m(e.parentNode,e)):j&&(qe(),M(j,1,1,()=>{j=null}),je()),((B=(A=U[2])==null?void 0:A.slow_endpoints)==null?void 0:B.length)>0?L?(L.p(U,O),O[0]&4&&N(L,1)):(L=ru(U),L.c(),N(L,1),L.m(t.parentNode,t)):L&&(qe(),M(L,1,1,()=>{L=null}),je()),O[0]&192){I=pe(U[6]);let J;for(J=0;J<I.length;J+=1){const Q=nu(U,I,J);R[J]?R[J].p(Q,O):(R[J]=uu(Q),R[J].c(),R[J].m(s,null))}for(;J<R.length;J+=1)R[J].d(1);R.length=I.length}O[0]&320&&Le(s,U[8]),O[0]&1024&&a.value!==U[10]&&te(a,U[10]),O[0]&2048&&Kt(c.value)!==U[11]&&te(c,U[11]),O[0]&4096&&Le(d,U[12]);const H={};O[3]&512&&(H.$$scope={dirty:O,ctx:U}),C.$set(H);const P={};O[0]&8|O[3]&512&&(P.$$scope={dirty:O,ctx:U}),y.$set(P)},i(U){T||(N(j),N(L),N(C.$$.fragment,U),N(y.$$.fragment,U),T=!0)},o(U){M(j),M(L),M(C.$$.fragment,U),M(y.$$.fragment,U),T=!1},d(U){U&&(w(e),w(t),w(n),w(k)),j&&j.d(U),L&&L.d(U),Ne(R,U),ce(C),ce(y,U),D=!1,Ge(E)}}}function iu(l){let e,t,n,s,o,i,a,u,c,_,d,m,h;return t=new mt({props:{$$slots:{default:[Lv]},$$scope:{ctx:l}}}),s=new mt({props:{$$slots:{default:[Pv]},$$scope:{ctx:l}}}),i=new mt({props:{$$slots:{default:[Nv]},$$scope:{ctx:l}}}),u=new mt({props:{$$slots:{default:[Rv]},$$scope:{ctx:l}}}),_=new mt({props:{$$slots:{default:[Av]},$$scope:{ctx:l}}}),m=new mt({props:{$$slots:{default:[Mv]},$$scope:{ctx:l}}}),{c(){e=p("div"),_e(t.$$.fragment),n=b(),_e(s.$$.fragment),o=b(),_e(i.$$.fragment),a=b(),_e(u.$$.fragment),c=b(),_e(_.$$.fragment),d=b(),_e(m.$$.fragment),f(e,"class","overview-grid svelte-1qj4rom")},m(v,g){$(v,e,g),fe(t,e,null),r(e,n),fe(s,e,null),r(e,o),fe(i,e,null),r(e,a),fe(u,e,null),r(e,c),fe(_,e,null),r(e,d),fe(m,e,null),h=!0},p(v,g){const S={};g[0]&4|g[3]&512&&(S.$$scope={dirty:g,ctx:v}),t.$set(S);const C={};g[0]&4|g[3]&512&&(C.$$scope={dirty:g,ctx:v}),s.$set(C);const k={};g[0]&4|g[3]&512&&(k.$$scope={dirty:g,ctx:v}),i.$set(k);const y={};g[0]&4|g[3]&512&&(y.$$scope={dirty:g,ctx:v}),u.$set(y);const T={};g[0]&4|g[3]&512&&(T.$$scope={dirty:g,ctx:v}),_.$set(T);const D={};g[0]&4|g[3]&512&&(D.$$scope={dirty:g,ctx:v}),m.$set(D)},i(v){h||(N(t.$$.fragment,v),N(s.$$.fragment,v),N(i.$$.fragment,v),N(u.$$.fragment,v),N(_.$$.fragment,v),N(m.$$.fragment,v),h=!0)},o(v){M(t.$$.fragment,v),M(s.$$.fragment,v),M(i.$$.fragment,v),M(u.$$.fragment,v),M(_.$$.fragment,v),M(m.$$.fragment,v),h=!1},d(v){v&&w(e),ce(t),ce(s),ce(i),ce(u),ce(_),ce(m)}}}function Lv(l){let e,t,n,s,o=l[2].total_requests.toLocaleString()+"",i;return{c(){e=p("div"),t=p("span"),t.textContent="Total Requests",n=b(),s=p("span"),i=q(o),f(t,"class","label svelte-1qj4rom"),f(s,"class","value svelte-1qj4rom"),f(e,"class","stat svelte-1qj4rom")},m(a,u){$(a,e,u),r(e,t),r(e,n),r(e,s),r(s,i)},p(a,u){u[0]&4&&o!==(o=a[2].total_requests.toLocaleString()+"")&&F(i,o)},d(a){a&&w(e)}}}function Pv(l){let e,t,n,s,o=Lt(l[2].avg_latency_ms)+"",i;return{c(){e=p("div"),t=p("span"),t.textContent="Avg Latency",n=b(),s=p("span"),i=q(o),f(t,"class","label svelte-1qj4rom"),f(s,"class","value svelte-1qj4rom"),f(e,"class","stat svelte-1qj4rom")},m(a,u){$(a,e,u),r(e,t),r(e,n),r(e,s),r(s,i)},p(a,u){u[0]&4&&o!==(o=Lt(a[2].avg_latency_ms)+"")&&F(i,o)},d(a){a&&w(e)}}}function Nv(l){let e,t,n,s,o=Lt(l[2].p95_latency_ms)+"",i;return{c(){e=p("div"),t=p("span"),t.textContent="P95 Latency",n=b(),s=p("span"),i=q(o),f(t,"class","label svelte-1qj4rom"),f(s,"class","value svelte-1qj4rom"),f(e,"class","stat svelte-1qj4rom")},m(a,u){$(a,e,u),r(e,t),r(e,n),r(e,s),r(s,i)},p(a,u){u[0]&4&&o!==(o=Lt(a[2].p95_latency_ms)+"")&&F(i,o)},d(a){a&&w(e)}}}function Rv(l){let e,t,n,s,o=l[2].error_rate+"",i,a;return{c(){e=p("div"),t=p("span"),t.textContent="Error Rate",n=b(),s=p("span"),i=q(o),a=q("%"),f(t,"class","label svelte-1qj4rom"),f(s,"class","value svelte-1qj4rom"),f(e,"class","stat svelte-1qj4rom"),we(e,"error",l[2].error_rate>5)},m(u,c){$(u,e,c),r(e,t),r(e,n),r(e,s),r(s,i),r(s,a)},p(u,c){c[0]&4&&o!==(o=u[2].error_rate+"")&&F(i,o),c[0]&4&&we(e,"error",u[2].error_rate>5)},d(u){u&&w(e)}}}function Av(l){let e,t,n,s,o=l[2].slow_count+"",i,a,u;return{c(){e=p("div"),t=p("span"),t.textContent="Slow Requests",n=b(),s=p("span"),i=q(o),f(t,"class","label svelte-1qj4rom"),f(s,"class","value svelte-1qj4rom"),f(e,"class","stat clickable svelte-1qj4rom")},m(c,_){$(c,e,_),r(e,t),r(e,n),r(e,s),r(s,i),a||(u=[x(e,"click",l[39]),x(e,"keypress",l[39])],a=!0)},p(c,_){_[0]&4&&o!==(o=c[2].slow_count+"")&&F(i,o)},d(c){c&&w(e),a=!1,Ge(u)}}}function Mv(l){let e,t,n,s,o=l[2].error_count+"",i,a,u;return{c(){e=p("div"),t=p("span"),t.textContent="5xx Errors",n=b(),s=p("span"),i=q(o),f(t,"class","label svelte-1qj4rom"),f(s,"class","value svelte-1qj4rom"),f(e,"class","stat clickable svelte-1qj4rom")},m(c,_){$(c,e,_),r(e,t),r(e,n),r(e,s),r(s,i),a||(u=[x(e,"click",l[52]),x(e,"keypress",l[53])],a=!0)},p(c,_){_[0]&4&&o!==(o=c[2].error_count+"")&&F(i,o)},d(c){c&&w(e),a=!1,Ge(u)}}}function ru(l){let e,t;return e=new mt({props:{$$slots:{default:[zv]},$$scope:{ctx:l}}}),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const o={};s[0]&4|s[3]&512&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function au(l){let e,t,n=l[99].path+"",s,o,i,a=Lt(l[99].avg_ms)+"",u,c,_,d=l[99].count+"",m,h;return{c(){e=p("tr"),t=p("td"),s=q(n),o=b(),i=p("td"),u=q(a),c=b(),_=p("td"),m=q(d),h=b(),f(t,"class","path svelte-1qj4rom"),f(i,"class","svelte-1qj4rom"),f(_,"class","svelte-1qj4rom"),f(e,"class","svelte-1qj4rom")},m(v,g){$(v,e,g),r(e,t),r(t,s),r(e,o),r(e,i),r(i,u),r(e,c),r(e,_),r(_,m),r(e,h)},p(v,g){g[0]&4&&n!==(n=v[99].path+"")&&F(s,n),g[0]&4&&a!==(a=Lt(v[99].avg_ms)+"")&&F(u,a),g[0]&4&&d!==(d=v[99].count+"")&&F(m,d)},d(v){v&&w(e)}}}function zv(l){let e,t,n,s,o,i,a=pe(l[2].slow_endpoints.slice(0,5)),u=[];for(let c=0;c<a.length;c+=1)u[c]=au(su(l,a,c));return{c(){e=p("h3"),e.textContent="🐢 Slowest Endpoints",t=b(),n=p("table"),s=p("thead"),s.innerHTML='<tr class="svelte-1qj4rom"><th class="svelte-1qj4rom">Path</th> <th class="svelte-1qj4rom">Avg</th> <th class="svelte-1qj4rom">Count</th></tr>',o=b(),i=p("tbody");for(let c=0;c<u.length;c+=1)u[c].c();f(e,"class","svelte-1qj4rom"),f(n,"class","mini-table svelte-1qj4rom")},m(c,_){$(c,e,_),$(c,t,_),$(c,n,_),r(n,s),r(n,o),r(n,i);for(let d=0;d<u.length;d+=1)u[d]&&u[d].m(i,null)},p(c,_){if(_[0]&4){a=pe(c[2].slow_endpoints.slice(0,5));let d;for(d=0;d<a.length;d+=1){const m=su(c,a,d);u[d]?u[d].p(m,_):(u[d]=au(m),u[d].c(),u[d].m(i,null))}for(;d<u.length;d+=1)u[d].d(1);u.length=a.length}},d(c){c&&(w(e),w(t),w(n)),Ne(u,c)}}}function uu(l){let e,t=l[96]+"",n,s,o=l[96]===l[7]?"(current)":"",i,a;return{c(){e=p("option"),n=q(t),s=b(),i=q(o),e.__value=a=l[96],te(e,e.__value)},m(u,c){$(u,e,c),r(e,n),r(e,s),r(e,i)},p(u,c){c[0]&64&&t!==(t=u[96]+"")&&F(n,t),c[0]&192&&o!==(o=u[96]===u[7]?"(current)":"")&&F(i,o),c[0]&64&&a!==(a=u[96])&&(e.__value=a,te(e,e.__value))},d(u){u&&w(e)}}}function Ov(l){let e;return{c(){e=q("Apply")},m(t,n){$(t,e,n)},d(t){t&&w(e)}}}function Iv(l){let e;return{c(){e=q("View")},m(t,n){$(t,e,n)},d(t){t&&w(e)}}}function fu(l){var ee;let e,t,n=Pu(l[93].timestamp)+"",s,o,i,a=(l[93].service_name||"-")+"",u,c,_,d,m=l[93].method+"",h,v,g,S,C=(((ee=l[93].path)==null?void 0:ee.length)>40?l[93].path.slice(0,40)+"...":l[93].path)+"",k,y,T,D,E,j=(l[93].status_code||"-")+"",L,I,R,z,Y=Lt(l[93].duration_ms)+"",U,O,H,P=l[93].span_count+"",A,B,J,Q,G;function oe(){return l[58](l[93])}return Q=new Be({props:{size:"small",$$slots:{default:[Iv]},$$scope:{ctx:l}}}),Q.$on("click",oe),{c(){var V;e=p("tr"),t=p("td"),s=q(n),o=b(),i=p("td"),u=q(a),c=b(),_=p("td"),d=p("span"),h=q(m),g=b(),S=p("td"),k=q(C),T=b(),D=p("td"),E=p("span"),L=q(j),R=b(),z=p("td"),U=q(Y),O=b(),H=p("td"),A=q(P),B=b(),J=p("td"),_e(Q.$$.fragment),f(t,"class","time svelte-1qj4rom"),f(i,"class","service svelte-1qj4rom"),f(d,"class",v="method "+((V=l[93].method)==null?void 0:V.toLowerCase())+" svelte-1qj4rom"),f(_,"class","svelte-1qj4rom"),f(S,"class","path svelte-1qj4rom"),f(S,"title",y=l[93].path),f(E,"class",I="status status-"+fn(l[93].status_code)+" svelte-1qj4rom"),f(D,"class","svelte-1qj4rom"),f(z,"class","svelte-1qj4rom"),we(z,"slow",l[93].duration_ms>1e3),f(H,"class","svelte-1qj4rom"),f(J,"class","svelte-1qj4rom"),f(e,"class","svelte-1qj4rom"),we(e,"error",l[93].status_code>=500),we(e,"warning",l[93].status_code>=400&&l[93].status_code<500)},m(V,K){$(V,e,K),r(e,t),r(t,s),r(e,o),r(e,i),r(i,u),r(e,c),r(e,_),r(_,d),r(d,h),r(e,g),r(e,S),r(S,k),r(e,T),r(e,D),r(D,E),r(E,L),r(e,R),r(e,z),r(z,U),r(e,O),r(e,H),r(H,A),r(e,B),r(e,J),fe(Q,J,null),G=!0},p(V,K){var W,ie;l=V,(!G||K[0]&8)&&n!==(n=Pu(l[93].timestamp)+"")&&F(s,n),(!G||K[0]&8)&&a!==(a=(l[93].service_name||"-")+"")&&F(u,a),(!G||K[0]&8)&&m!==(m=l[93].method+"")&&F(h,m),(!G||K[0]&8&&v!==(v="method "+((W=l[93].method)==null?void 0:W.toLowerCase())+" svelte-1qj4rom"))&&f(d,"class",v),(!G||K[0]&8)&&C!==(C=(((ie=l[93].path)==null?void 0:ie.length)>40?l[93].path.slice(0,40)+"...":l[93].path)+"")&&F(k,C),(!G||K[0]&8&&y!==(y=l[93].path))&&f(S,"title",y),(!G||K[0]&8)&&j!==(j=(l[93].status_code||"-")+"")&&F(L,j),(!G||K[0]&8&&I!==(I="status status-"+fn(l[93].status_code)+" svelte-1qj4rom"))&&f(E,"class",I),(!G||K[0]&8)&&Y!==(Y=Lt(l[93].duration_ms)+"")&&F(U,Y),(!G||K[0]&8)&&we(z,"slow",l[93].duration_ms>1e3),(!G||K[0]&8)&&P!==(P=l[93].span_count+"")&&F(A,P);const ae={};K[3]&512&&(ae.$$scope={dirty:K,ctx:l}),Q.$set(ae),(!G||K[0]&8)&&we(e,"error",l[93].status_code>=500),(!G||K[0]&8)&&we(e,"warning",l[93].status_code>=400&&l[93].status_code<500)},i(V){G||(N(Q.$$.fragment,V),G=!0)},o(V){M(Q.$$.fragment,V),G=!1},d(V){V&&w(e),ce(Q)}}}function cu(l){let e;return{c(){e=p("tr"),e.innerHTML='<td colspan="8" class="empty svelte-1qj4rom">No requests found</td>',f(e,"class","svelte-1qj4rom")},m(t,n){$(t,e,n)},d(t){t&&w(e)}}}function Fv(l){let e,t,n,s,o,i,a,u,c,_=pe(l[3]),d=[];for(let v=0;v<_.length;v+=1)d[v]=fu(lu(l,_,v));const m=v=>M(d[v],1,1,()=>{d[v]=null});let h=l[3].length===0&&cu();return{c(){e=p("h3"),e.textContent="📋 Recent Requests",t=b(),n=p("div"),s=p("table"),o=p("thead"),o.innerHTML='<tr class="svelte-1qj4rom"><th class="svelte-1qj4rom">Time</th> <th class="svelte-1qj4rom">Service</th> <th class="svelte-1qj4rom">Method</th> <th class="svelte-1qj4rom">Path</th> <th class="svelte-1qj4rom">Status</th> <th class="svelte-1qj4rom">Duration</th> <th class="svelte-1qj4rom">Spans</th> <th class="svelte-1qj4rom">Actions</th></tr>',i=b(),a=p("tbody");for(let v=0;v<d.length;v+=1)d[v].c();u=b(),h&&h.c(),f(e,"class","svelte-1qj4rom"),f(s,"class","svelte-1qj4rom"),f(n,"class","table-container svelte-1qj4rom")},m(v,g){$(v,e,g),$(v,t,g),$(v,n,g),r(n,s),r(s,o),r(s,i),r(s,a);for(let S=0;S<d.length;S+=1)d[S]&&d[S].m(a,null);r(a,u),h&&h.m(a,null),c=!0},p(v,g){if(g[0]&8|g[1]&64){_=pe(v[3]);let S;for(S=0;S<_.length;S+=1){const C=lu(v,_,S);d[S]?(d[S].p(C,g),N(d[S],1)):(d[S]=fu(C),d[S].c(),N(d[S],1),d[S].m(a,u))}for(qe(),S=_.length;S<d.length;S+=1)m(S);je()}v[3].length===0?h||(h=cu(),h.c(),h.m(a,null)):h&&(h.d(1),h=null)},i(v){if(!c){for(let g=0;g<_.length;g+=1)N(d[g]);c=!0}},o(v){d=d.filter(Boolean);for(let g=0;g<d.length;g+=1)M(d[g]);c=!1},d(v){v&&(w(e),w(t),w(n)),Ne(d,v),h&&h.d()}}}function _u(l){let e,t;return e=new mt({props:{$$slots:{default:[Gv]},$$scope:{ctx:l}}}),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const o={};s[0]&24576|s[3]&512&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function Uv(l){let e,t=pe(l[13]),n=[];for(let s=0;s<t.length;s+=1)n[s]=du(tu(l,t,s));return{c(){e=p("div");for(let s=0;s<n.length;s+=1)n[s].c();f(e,"class","logs-container svelte-1qj4rom")},m(s,o){$(s,e,o);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(e,null)},p(s,o){if(o[0]&8192){t=pe(s[13]);let i;for(i=0;i<t.length;i+=1){const a=tu(s,t,i);n[i]?n[i].p(a,o):(n[i]=du(a),n[i].c(),n[i].m(e,null))}for(;i<n.length;i+=1)n[i].d(1);n.length=t.length}},d(s){s&&w(e),Ne(n,s)}}}function Bv(l){let e;return{c(){e=p("div"),e.innerHTML='<p>No logs found.</p> <p class="hint svelte-1qj4rom">Logs are captured in memory. They reset when the server restarts.</p>',f(e,"class","empty-logs svelte-1qj4rom")},m(t,n){$(t,e,n)},p:be,d(t){t&&w(e)}}}function Hv(l){let e;return{c(){e=p("div"),e.textContent="Loading logs...",f(e,"class","loading-logs svelte-1qj4rom")},m(t,n){$(t,e,n)},p:be,d(t){t&&w(e)}}}function pu(l){let e,t,n=l[90].module+"",s,o,i=l[90].funcName+"",a,u,c=l[90].lineno+"",_,d;return{c(){e=p("span"),t=q("("),s=q(n),o=q("."),a=q(i),u=q(":"),_=q(c),d=q(")"),f(e,"class","log-location svelte-1qj4rom")},m(m,h){$(m,e,h),r(e,t),r(e,s),r(e,o),r(e,a),r(e,u),r(e,_),r(e,d)},p(m,h){h[0]&8192&&n!==(n=m[90].module+"")&&F(s,n),h[0]&8192&&i!==(i=m[90].funcName+"")&&F(a,i),h[0]&8192&&c!==(c=m[90].lineno+"")&&F(_,c)},d(m){m&&w(e)}}}function du(l){var E,j;let e,t,n=(((j=(E=l[90].timestamp)==null?void 0:E.split("T")[1])==null?void 0:j.split(".")[0])||l[90].timestamp)+"",s,o,i,a,u=l[90].level+"",c,_,d,m,h=l[90].logger+"",v,g,S,C=l[90].message+"",k,y,T,D=l[90].module&&l[90].funcName&&pu(l);return{c(){e=p("div"),t=p("span"),s=q(n),o=b(),i=p("span"),a=q("["),c=q(u),_=q("]"),d=b(),m=p("span"),v=q(h),g=b(),S=p("span"),k=q(C),y=b(),D&&D.c(),T=b(),f(t,"class","log-time svelte-1qj4rom"),f(i,"class","log-level svelte-1qj4rom"),Et(i,"color",Lu(l[90].level)),f(m,"class","log-logger svelte-1qj4rom"),f(S,"class","log-message svelte-1qj4rom"),f(e,"class","log-entry svelte-1qj4rom"),we(e,"error",l[90].level==="ERROR"||l[90].level==="CRITICAL"),we(e,"warning",l[90].level==="WARNING")},m(L,I){$(L,e,I),r(e,t),r(t,s),r(e,o),r(e,i),r(i,a),r(i,c),r(i,_),r(e,d),r(e,m),r(m,v),r(e,g),r(e,S),r(S,k),r(e,y),D&&D.m(e,null),r(e,T)},p(L,I){var R,z;I[0]&8192&&n!==(n=(((z=(R=L[90].timestamp)==null?void 0:R.split("T")[1])==null?void 0:z.split(".")[0])||L[90].timestamp)+"")&&F(s,n),I[0]&8192&&u!==(u=L[90].level+"")&&F(c,u),I[0]&8192&&Et(i,"color",Lu(L[90].level)),I[0]&8192&&h!==(h=L[90].logger+"")&&F(v,h),I[0]&8192&&C!==(C=L[90].message+"")&&F(k,C),L[90].module&&L[90].funcName?D?D.p(L,I):(D=pu(L),D.c(),D.m(e,T)):D&&(D.d(1),D=null),I[0]&8192&&we(e,"error",L[90].level==="ERROR"||L[90].level==="CRITICAL"),I[0]&8192&&we(e,"warning",L[90].level==="WARNING")},d(L){L&&w(e),D&&D.d()}}}function Gv(l){let e,t,n,s,o=l[13].length+"",i,a,u,c;function _(h,v){return h[14]?Hv:h[13].length===0?Bv:Uv}let d=_(l),m=d(l);return{c(){e=p("div"),t=p("h3"),t.textContent="📝 Backend Logs",n=b(),s=p("span"),i=q(o),a=q(" entries"),u=b(),m.c(),c=Oe(),f(t,"class","svelte-1qj4rom"),f(s,"class","log-count svelte-1qj4rom"),f(e,"class","logs-header svelte-1qj4rom")},m(h,v){$(h,e,v),r(e,t),r(e,n),r(e,s),r(s,i),r(s,a),$(h,u,v),m.m(h,v),$(h,c,v)},p(h,v){v[0]&8192&&o!==(o=h[13].length+"")&&F(i,o),d===(d=_(h))&&m?m.p(h,v):(m.d(1),m=d(h),m&&(m.c(),m.m(c.parentNode,c)))},d(h){h&&(w(e),w(u),w(c)),m.d(h)}}}function mu(l){let e,t;return e=new mt({props:{$$slots:{default:[Qv]},$$scope:{ctx:l}}}),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const o={};s[0]&66846720|s[3]&512&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function vu(l){let e,t=l[87].name+"",n,s,o=(l[87].ip||l[87].private_ip||"No IP")+"",i,a,u;return{c(){e=p("option"),n=q(t),s=q(" ("),i=q(o),a=q(")"),e.__value=u=l[87].id,te(e,e.__value)},m(c,_){$(c,e,_),r(e,n),r(e,s),r(e,i),r(e,a)},p(c,_){_[0]&262144&&t!==(t=c[87].name+"")&&F(n,t),_[0]&262144&&o!==(o=(c[87].ip||c[87].private_ip||"No IP")+"")&&F(i,o),_[0]&262144&&u!==(u=c[87].id)&&(e.__value=u,te(e,e.__value))},d(c){c&&w(e)}}}function hu(l){let e,t,n,s,o=pe(l[20]),i=[];for(let a=0;a<o.length;a+=1)i[a]=gu(xa(l,o,a));return{c(){e=p("select"),t=p("option"),t.textContent="Select Container...";for(let a=0;a<i.length;a+=1)i[a].c();t.__value="",te(t,t.__value),f(e,"class","log-select"),l[21]===void 0&&Qe(()=>l[63].call(e))},m(a,u){$(a,e,u),r(e,t);for(let c=0;c<i.length;c+=1)i[c]&&i[c].m(e,null);Le(e,l[21],!0),n||(s=x(e,"change",l[63]),n=!0)},p(a,u){if(u[0]&1048576){o=pe(a[20]);let c;for(c=0;c<o.length;c+=1){const _=xa(a,o,c);i[c]?i[c].p(_,u):(i[c]=gu(_),i[c].c(),i[c].m(e,null))}for(;c<i.length;c+=1)i[c].d(1);i.length=o.length}u[0]&3145728&&Le(e,a[21])},d(a){a&&w(e),Ne(i,a),n=!1,s()}}}function gu(l){var c,_,d;let e,t=(((_=(c=l[84].Names)==null?void 0:c[0])==null?void 0:_.replace(/^\//,""))||((d=l[84].Id)==null?void 0:d.slice(0,12)))+"",n,s,o=(l[84].State||"unknown")+"",i,a,u;return{c(){var m,h,v;e=p("option"),n=q(t),s=q(" ("),i=q(o),a=q(`)
                    `),e.__value=u=((h=(m=l[84].Names)==null?void 0:m[0])==null?void 0:h.replace(/^\//,""))||((v=l[84].Id)==null?void 0:v.slice(0,12)),te(e,e.__value)},m(m,h){$(m,e,h),r(e,n),r(e,s),r(e,i),r(e,a)},p(m,h){var v,g,S,C,k,y;h[0]&1048576&&t!==(t=(((g=(v=m[84].Names)==null?void 0:v[0])==null?void 0:g.replace(/^\//,""))||((S=m[84].Id)==null?void 0:S.slice(0,12)))+"")&&F(n,t),h[0]&1048576&&o!==(o=(m[84].State||"unknown")+"")&&F(i,o),h[0]&1048576&&u!==(u=((k=(C=m[84].Names)==null?void 0:C[0])==null?void 0:k.replace(/^\//,""))||((y=m[84].Id)==null?void 0:y.slice(0,12)))&&(e.__value=u,te(e,e.__value))},d(m){m&&w(e)}}}function Vv(l){let e=l[23]?"Loading...":"📥 Load Logs",t;return{c(){t=q(e)},m(n,s){$(n,t,s)},p(n,s){s[0]&8388608&&e!==(e=n[23]?"Loading...":"📥 Load Logs")&&F(t,e)},d(n){n&&w(t)}}}function Wv(l){let e;return{c(){e=p("div"),e.textContent="Select a server to view agent or container logs",f(e,"class","no-logs svelte-1qj4rom")},m(t,n){$(t,e,n)},p:be,d(t){t&&w(e)}}}function Jv(l){let e;return{c(){e=p("div"),e.textContent='Click "Load Logs" to fetch logs from the selected server',f(e,"class","no-logs svelte-1qj4rom")},m(t,n){$(t,e,n)},p:be,d(t){t&&w(e)}}}function Kv(l){let e,t,n;return{c(){e=p("div"),t=p("pre"),n=q(l[22]),f(t,"class","svelte-1qj4rom"),f(e,"class","logs-container agent-logs svelte-1qj4rom")},m(s,o){$(s,e,o),r(e,t),r(t,n)},p(s,o){o[0]&4194304&&F(n,s[22])},d(s){s&&w(e)}}}function Yv(l){let e;return{c(){e=p("div"),e.textContent="Loading logs from agent...",f(e,"class","loading-logs svelte-1qj4rom")},m(t,n){$(t,e,n)},p:be,d(t){t&&w(e)}}}function Qv(l){let e,t,n,s,o,i,a,u,c,_,d,m,h,v,g,S,C,k,y,T,D,E,j,L,I,R,z,Y,U,O,H=pe(l[18]),P=[];for(let G=0;G<H.length;G+=1)P[G]=vu(eu(l,H,G));let A=l[25]==="container"&&hu(l);L=new Be({props:{size:"small",disabled:l[23]||!l[19],$$slots:{default:[Vv]},$$scope:{ctx:l}}}),L.$on("click",l[41]);function B(G,oe){return G[23]&&!G[22]?Yv:G[22]?Kv:G[19]?Jv:Wv}let J=B(l),Q=J(l);return Y=pn(l[61][0]),{c(){e=p("div"),t=p("h3"),t.textContent="🖥️ Agent Logs",n=b(),s=p("div"),o=p("select"),i=p("option"),i.textContent="Select Server...";for(let G=0;G<P.length;G+=1)P[G].c();a=b(),u=p("div"),c=p("label"),_=p("input"),d=q(`
                        Agent Logs`),m=b(),h=p("label"),v=p("input"),g=q(`
                        Container Logs`),S=b(),A&&A.c(),C=b(),k=p("select"),y=p("option"),y.textContent="100 lines",T=p("option"),T.textContent="200 lines",D=p("option"),D.textContent="500 lines",E=p("option"),E.textContent="1000 lines",j=b(),_e(L.$$.fragment),I=b(),Q.c(),R=Oe(),f(t,"class","svelte-1qj4rom"),i.__value="",te(i,i.__value),f(o,"class","log-select"),l[19]===void 0&&Qe(()=>l[59].call(o)),f(_,"type","radio"),_.__value="agent",te(_,_.__value),f(c,"class","svelte-1qj4rom"),f(v,"type","radio"),v.__value="container",te(v,v.__value),f(h,"class","svelte-1qj4rom"),f(u,"class","log-type-selector svelte-1qj4rom"),y.__value=100,te(y,y.__value),T.__value=200,te(T,T.__value),D.__value=500,te(D,D.__value),E.__value=1e3,te(E,E.__value),f(k,"class","log-select lines-select svelte-1qj4rom"),l[24]===void 0&&Qe(()=>l[64].call(k)),f(s,"class","logs-controls"),f(e,"class","logs-header svelte-1qj4rom"),Y.p(_,v)},m(G,oe){$(G,e,oe),r(e,t),r(e,n),r(e,s),r(s,o),r(o,i);for(let ee=0;ee<P.length;ee+=1)P[ee]&&P[ee].m(o,null);Le(o,l[19],!0),r(s,a),r(s,u),r(u,c),r(c,_),_.checked=_.__value===l[25],r(c,d),r(u,m),r(u,h),r(h,v),v.checked=v.__value===l[25],r(h,g),r(s,S),A&&A.m(s,null),r(s,C),r(s,k),r(k,y),r(k,T),r(k,D),r(k,E),Le(k,l[24],!0),r(s,j),fe(L,s,null),$(G,I,oe),Q.m(G,oe),$(G,R,oe),z=!0,U||(O=[x(o,"change",l[59]),x(o,"change",l[42]),x(_,"change",l[60]),x(v,"change",l[62]),x(k,"change",l[64])],U=!0)},p(G,oe){if(oe[0]&262144){H=pe(G[18]);let V;for(V=0;V<H.length;V+=1){const K=eu(G,H,V);P[V]?P[V].p(K,oe):(P[V]=vu(K),P[V].c(),P[V].m(o,null))}for(;V<P.length;V+=1)P[V].d(1);P.length=H.length}oe[0]&786432&&Le(o,G[19]),oe[0]&33554432&&(_.checked=_.__value===G[25]),oe[0]&33554432&&(v.checked=v.__value===G[25]),G[25]==="container"?A?A.p(G,oe):(A=hu(G),A.c(),A.m(s,C)):A&&(A.d(1),A=null),oe[0]&16777216&&Le(k,G[24]);const ee={};oe[0]&8912896&&(ee.disabled=G[23]||!G[19]),oe[0]&8388608|oe[3]&512&&(ee.$$scope={dirty:oe,ctx:G}),L.$set(ee),J===(J=B(G))&&Q?Q.p(G,oe):(Q.d(1),Q=J(G),Q&&(Q.c(),Q.m(R.parentNode,R)))},i(G){z||(N(L.$$.fragment,G),z=!0)},o(G){M(L.$$.fragment,G),z=!1},d(G){G&&(w(e),w(I),w(R)),Ne(P,G),A&&A.d(),ce(L),Q.d(G),Y.r(),U=!1,Ge(O)}}}function bu(l){let e,t;return e=new mt({props:{$$slots:{default:[s0]},$$scope:{ctx:l}}}),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const o={};s[0]&1006632960|s[3]&512&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function Zv(l){let e=l[27]?"Loading...":"🔄 Refresh",t;return{c(){t=q(e)},m(n,s){$(n,t,s)},p(n,s){s[0]&134217728&&e!==(e=n[27]?"Loading...":"🔄 Refresh")&&F(t,e)},d(n){n&&w(t)}}}function Xv(l){let e,t,n,s,o;return s=new Be({props:{$$slots:{default:[t0]},$$scope:{ctx:l}}}),s.$on("click",l[30]),{c(){e=p("div"),t=p("p"),t.textContent="Could not load database info.",n=b(),_e(s.$$.fragment),f(e,"class","empty-db svelte-1qj4rom")},m(i,a){$(i,e,a),r(e,t),r(e,n),fe(s,e,null),o=!0},p(i,a){const u={};a[3]&512&&(u.$$scope={dirty:a,ctx:i}),s.$set(u)},i(i){o||(N(s.$$.fragment,i),o=!0)},o(i){M(s.$$.fragment,i),o=!1},d(i){i&&w(e),ce(s)}}}function xv(l){let e,t,n,s,o,i,a=l[26].path+"",u,c,_,d,m,h,v=l[26].size_mb?l[26].size_mb.toFixed(2)+" MB":"N/A",g,S,C,k,y,T,D=(l[26].modified||"N/A")+"",E,j,L,I,R,z,Y=l[26].exists?"✓ Exists":"✗ Not Found",U,O,H,P,A,B,J,Q,G,oe,ee,V,K,ae,W,ie,ue,le,me,re;return G=new Be({props:{variant:"secondary",$$slots:{default:[l0]},$$scope:{ctx:l}}}),G.$on("click",l[31]),me=new Be({props:{variant:"danger",disabled:l[28],$$slots:{default:[n0]},$$scope:{ctx:l}}}),me.$on("click",l[32]),{c(){e=p("div"),t=p("div"),n=p("div"),s=p("span"),s.textContent="Path:",o=b(),i=p("code"),u=q(a),c=b(),_=p("div"),d=p("span"),d.textContent="Size:",m=b(),h=p("span"),g=q(v),S=b(),C=p("div"),k=p("span"),k.textContent="Modified:",y=b(),T=p("span"),E=q(D),j=b(),L=p("div"),I=p("span"),I.textContent="Status:",R=b(),z=p("span"),U=q(Y),O=b(),H=p("div"),P=p("div"),A=p("h4"),A.textContent="📥 Download",B=b(),J=p("p"),J.textContent="Download the SQLite database for backup or offline editing.",Q=b(),_e(G.$$.fragment),oe=b(),ee=p("div"),V=p("h4"),V.textContent="📤 Upload & Replace",K=b(),ae=p("p"),ae.textContent="⚠️ This will REPLACE the entire database. A backup will be created automatically.",W=b(),ie=p("div"),ue=p("input"),le=b(),_e(me.$$.fragment),f(s,"class","label svelte-1qj4rom"),f(i,"class","svelte-1qj4rom"),f(n,"class","stat svelte-1qj4rom"),f(d,"class","label svelte-1qj4rom"),f(_,"class","stat svelte-1qj4rom"),f(k,"class","label svelte-1qj4rom"),f(C,"class","stat svelte-1qj4rom"),f(I,"class","label svelte-1qj4rom"),f(z,"class","status-badge svelte-1qj4rom"),we(z,"success",l[26].exists),we(z,"error",!l[26].exists),f(L,"class","stat svelte-1qj4rom"),f(t,"class","db-stats svelte-1qj4rom"),f(A,"class","svelte-1qj4rom"),f(J,"class","hint svelte-1qj4rom"),f(P,"class","action-group svelte-1qj4rom"),f(V,"class","svelte-1qj4rom"),f(ae,"class","hint warning svelte-1qj4rom"),f(ue,"type","file"),f(ue,"accept",".db"),f(ue,"class","file-input svelte-1qj4rom"),f(ie,"class","upload-row svelte-1qj4rom"),f(ee,"class","action-group svelte-1qj4rom"),f(H,"class","db-actions svelte-1qj4rom"),f(e,"class","db-info svelte-1qj4rom")},m(ne,X){$(ne,e,X),r(e,t),r(t,n),r(n,s),r(n,o),r(n,i),r(i,u),r(t,c),r(t,_),r(_,d),r(_,m),r(_,h),r(h,g),r(t,S),r(t,C),r(C,k),r(C,y),r(C,T),r(T,E),r(t,j),r(t,L),r(L,I),r(L,R),r(L,z),r(z,U),r(e,O),r(e,H),r(H,P),r(P,A),r(P,B),r(P,J),r(P,Q),fe(G,P,null),r(H,oe),r(H,ee),r(ee,V),r(ee,K),r(ee,ae),r(ee,W),r(ee,ie),r(ie,ue),l[65](ue),r(ie,le),fe(me,ie,null),re=!0},p(ne,X){(!re||X[0]&67108864)&&a!==(a=ne[26].path+"")&&F(u,a),(!re||X[0]&67108864)&&v!==(v=ne[26].size_mb?ne[26].size_mb.toFixed(2)+" MB":"N/A")&&F(g,v),(!re||X[0]&67108864)&&D!==(D=(ne[26].modified||"N/A")+"")&&F(E,D),(!re||X[0]&67108864)&&Y!==(Y=ne[26].exists?"✓ Exists":"✗ Not Found")&&F(U,Y),(!re||X[0]&67108864)&&we(z,"success",ne[26].exists),(!re||X[0]&67108864)&&we(z,"error",!ne[26].exists);const Z={};X[3]&512&&(Z.$$scope={dirty:X,ctx:ne}),G.$set(Z);const ge={};X[0]&268435456&&(ge.disabled=ne[28]),X[0]&268435456|X[3]&512&&(ge.$$scope={dirty:X,ctx:ne}),me.$set(ge)},i(ne){re||(N(G.$$.fragment,ne),N(me.$$.fragment,ne),re=!0)},o(ne){M(G.$$.fragment,ne),M(me.$$.fragment,ne),re=!1},d(ne){ne&&w(e),ce(G),l[65](null),ce(me)}}}function e0(l){let e;return{c(){e=p("div"),e.textContent="Loading database info...",f(e,"class","loading-db svelte-1qj4rom")},m(t,n){$(t,e,n)},p:be,i:be,o:be,d(t){t&&w(e)}}}function t0(l){let e;return{c(){e=q("Try Again")},m(t,n){$(t,e,n)},d(t){t&&w(e)}}}function l0(l){let e;return{c(){e=q("Download Database")},m(t,n){$(t,e,n)},d(t){t&&w(e)}}}function n0(l){let e=l[28]?"Uploading...":"Upload & Replace",t;return{c(){t=q(e)},m(n,s){$(n,t,s)},p(n,s){s[0]&268435456&&e!==(e=n[28]?"Uploading...":"Upload & Replace")&&F(t,e)},d(n){n&&w(t)}}}function s0(l){let e,t,n,s,o,i,a,u,c;s=new Be({props:{size:"small",disabled:l[27],$$slots:{default:[Zv]},$$scope:{ctx:l}}}),s.$on("click",l[30]);const _=[e0,xv,Xv],d=[];function m(h,v){return h[27]&&!h[26]?0:h[26]?1:2}return i=m(l),a=d[i]=_[i](l),{c(){e=p("div"),t=p("h3"),t.textContent="🗄️ Database Management",n=b(),_e(s.$$.fragment),o=b(),a.c(),u=Oe(),f(t,"class","svelte-1qj4rom"),f(e,"class","db-header svelte-1qj4rom")},m(h,v){$(h,e,v),r(e,t),r(e,n),fe(s,e,null),$(h,o,v),d[i].m(h,v),$(h,u,v),c=!0},p(h,v){const g={};v[0]&134217728&&(g.disabled=h[27]),v[0]&134217728|v[3]&512&&(g.$$scope={dirty:v,ctx:h}),s.$set(g);let S=i;i=m(h),i===S?d[i].p(h,v):(qe(),M(d[S],1,1,()=>{d[S]=null}),je(),a=d[i],a?a.p(h,v):(a=d[i]=_[i](h),a.c()),N(a,1),a.m(u.parentNode,u))},i(h){c||(N(s.$$.fragment,h),N(a),c=!0)},o(h){M(s.$$.fragment,h),M(a),c=!1},d(h){h&&(w(e),w(o),w(u)),ce(s),d[i].d(h)}}}function ku(l){let e,t;return e=new il({props:{open:!0,title:"Request Detail",width:"800px",$$slots:{default:[o0]},$$scope:{ctx:l}}}),e.$on("close",l[66]),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const o={};s[0]&16|s[3]&512&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function wu(l){let e,t=l[4].service_name+"",n;return{c(){e=p("span"),n=q(t),f(e,"class","service-badge svelte-1qj4rom")},m(s,o){$(s,e,o),r(e,n)},p(s,o){o[0]&16&&t!==(t=s[4].service_name+"")&&F(n,t)},d(s){s&&w(e)}}}function $u(l){let e,t,n=l[4].error+"",s;return{c(){e=p("div"),t=q("⚠️ "),s=q(n),f(e,"class","error-box svelte-1qj4rom")},m(o,i){$(o,e,i),r(e,t),r(e,s)},p(o,i){i[0]&16&&n!==(n=o[4].error+"")&&F(s,n)},d(o){o&&w(e)}}}function Cu(l){let e,t,n=l[4].user_id+"",s;return{c(){e=p("span"),t=q("User: "),s=q(n)},m(o,i){$(o,e,i),r(e,t),r(e,s)},p(o,i){i[0]&16&&n!==(n=o[4].user_id+"")&&F(s,n)},d(o){o&&w(e)}}}function yu(l){let e,t,n,s=l[81].name+"",o,i,a,u,c,_=Lt(l[81].duration_ms)+"",d,m;return{c(){e=p("div"),t=p("div"),n=q("└─ "),o=q(s),a=b(),u=p("div"),c=p("div"),d=q(_),m=b(),f(t,"class","span-name svelte-1qj4rom"),f(t,"title",i=l[81].name),f(c,"class","span-bar child-bar svelte-1qj4rom"),Et(c,"width",cn(l[81],l[4].total_ms)+"%"),we(c,"error",l[81].error),f(u,"class","span-bar-container svelte-1qj4rom"),f(e,"class","span-row child svelte-1qj4rom")},m(h,v){$(h,e,v),r(e,t),r(t,n),r(t,o),r(e,a),r(e,u),r(u,c),r(c,d),r(e,m)},p(h,v){v[0]&16&&s!==(s=h[81].name+"")&&F(o,s),v[0]&16&&i!==(i=h[81].name)&&f(t,"title",i),v[0]&16&&_!==(_=Lt(h[81].duration_ms)+"")&&F(d,_),v[0]&16&&Et(c,"width",cn(h[81],h[4].total_ms)+"%"),v[0]&16&&we(c,"error",h[81].error)},d(h){h&&w(e)}}}function Su(l){let e,t,n=l[72].name+"",s,o,i,a,u,c=Lt(l[72].duration_ms)+"",_,d,m,h=pe(l[72].children||[]),v=[];for(let g=0;g<h.length;g+=1)v[g]=yu(Xa(l,h,g));return{c(){e=p("div"),t=p("div"),s=q(n),i=b(),a=p("div"),u=p("div"),_=q(c),d=b();for(let g=0;g<v.length;g+=1)v[g].c();m=Oe(),f(t,"class","span-name svelte-1qj4rom"),f(t,"title",o=l[72].name),f(u,"class","span-bar svelte-1qj4rom"),Et(u,"width",cn(l[72],l[4].total_ms)+"%"),we(u,"error",l[72].error),f(a,"class","span-bar-container svelte-1qj4rom"),f(e,"class","span-row svelte-1qj4rom")},m(g,S){$(g,e,S),r(e,t),r(t,s),r(e,i),r(e,a),r(a,u),r(u,_),$(g,d,S);for(let C=0;C<v.length;C+=1)v[C]&&v[C].m(g,S);$(g,m,S)},p(g,S){if(S[0]&16&&n!==(n=g[72].name+"")&&F(s,n),S[0]&16&&o!==(o=g[72].name)&&f(t,"title",o),S[0]&16&&c!==(c=Lt(g[72].duration_ms)+"")&&F(_,c),S[0]&16&&Et(u,"width",cn(g[72],g[4].total_ms)+"%"),S[0]&16&&we(u,"error",g[72].error),S[0]&16){h=pe(g[72].children||[]);let C;for(C=0;C<h.length;C+=1){const k=Xa(g,h,C);v[C]?v[C].p(k,S):(v[C]=yu(k),v[C].c(),v[C].m(m.parentNode,m))}for(;C<v.length;C+=1)v[C].d(1);v.length=h.length}},d(g){g&&(w(e),w(d),w(m)),Ne(v,g)}}}function qu(l){let e,t,n,s=pe(l[4].spans),o=[];for(let i=0;i<s.length;i+=1)o[i]=Eu(Ya(l,s,i));return{c(){e=p("h4"),e.textContent="Span Details",t=b(),n=p("div");for(let i=0;i<o.length;i+=1)o[i].c();f(e,"class","svelte-1qj4rom"),f(n,"class","spans-details svelte-1qj4rom")},m(i,a){$(i,e,a),$(i,t,a),$(i,n,a);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(n,null)},p(i,a){if(a[0]&16){s=pe(i[4].spans);let u;for(u=0;u<s.length;u+=1){const c=Ya(i,s,u);o[u]?o[u].p(c,a):(o[u]=Eu(c),o[u].c(),o[u].m(n,null))}for(;u<o.length;u+=1)o[u].d(1);o.length=s.length}},d(i){i&&(w(e),w(t),w(n)),Ne(o,i)}}}function ju(l){let e;return{c(){e=p("span"),e.textContent="ERROR",f(e,"class","error-badge svelte-1qj4rom")},m(t,n){$(t,e,n)},d(t){t&&w(e)}}}function Tu(l){let e,t,n=l[75]+"",s,o,i,a,u=(typeof l[76]=="object"?JSON.stringify(l[76]):l[76])+"",c;return{c(){e=p("div"),t=p("span"),s=q(n),o=q(":"),i=b(),a=p("span"),c=q(u),f(t,"class","key svelte-1qj4rom"),f(a,"class","value svelte-1qj4rom"),f(e,"class","attr svelte-1qj4rom")},m(_,d){$(_,e,d),r(e,t),r(t,s),r(t,o),r(e,i),r(e,a),r(a,c)},p(_,d){d[0]&16&&n!==(n=_[75]+"")&&F(s,n),d[0]&16&&u!==(u=(typeof _[76]=="object"?JSON.stringify(_[76]):_[76])+"")&&F(c,u)},d(_){_&&w(e)}}}function Du(l){let e,t,n,s,o=l[72].error+"",i;return{c(){e=p("div"),t=p("span"),t.textContent="error:",n=b(),s=p("span"),i=q(o),f(t,"class","key svelte-1qj4rom"),f(s,"class","value svelte-1qj4rom"),f(e,"class","attr error svelte-1qj4rom")},m(a,u){$(a,e,u),r(e,t),r(e,n),r(e,s),r(s,i)},p(a,u){u[0]&16&&o!==(o=a[72].error+"")&&F(i,o)},d(a){a&&w(e)}}}function Eu(l){let e,t,n,s=l[72].kind+"",o,i,a=l[72].name+"",u,c,_=Lt(l[72].duration_ms)+"",d,m,h,v,g,S,C=l[72].error&&ju(),k=pe(Object.entries(l[72].attributes)),y=[];for(let D=0;D<k.length;D+=1)y[D]=Tu(Qa(l,k,D));let T=l[72].error&&Du(l);return{c(){e=p("details"),t=p("summary"),n=p("span"),o=q(s),i=b(),u=q(a),c=q(" - "),d=q(_),m=b(),C&&C.c(),h=b(),v=p("div");for(let D=0;D<y.length;D+=1)y[D].c();g=b(),T&&T.c(),S=b(),f(n,"class","span-kind svelte-1qj4rom"),f(t,"class","svelte-1qj4rom"),f(v,"class","span-attrs svelte-1qj4rom"),f(e,"class","svelte-1qj4rom")},m(D,E){$(D,e,E),r(e,t),r(t,n),r(n,o),r(t,i),r(t,u),r(t,c),r(t,d),r(t,m),C&&C.m(t,null),r(e,h),r(e,v);for(let j=0;j<y.length;j+=1)y[j]&&y[j].m(v,null);r(v,g),T&&T.m(v,null),r(e,S)},p(D,E){if(E[0]&16&&s!==(s=D[72].kind+"")&&F(o,s),E[0]&16&&a!==(a=D[72].name+"")&&F(u,a),E[0]&16&&_!==(_=Lt(D[72].duration_ms)+"")&&F(d,_),D[72].error?C||(C=ju(),C.c(),C.m(t,null)):C&&(C.d(1),C=null),E[0]&16){k=pe(Object.entries(D[72].attributes));let j;for(j=0;j<k.length;j+=1){const L=Qa(D,k,j);y[j]?y[j].p(L,E):(y[j]=Tu(L),y[j].c(),y[j].m(v,g))}for(;j<y.length;j+=1)y[j].d(1);y.length=k.length}D[72].error?T?T.p(D,E):(T=Du(D),T.c(),T.m(v,null)):T&&(T.d(1),T=null)},d(D){D&&w(e),C&&C.d(),Ne(y,D),T&&T.d()}}}function o0(l){let e,t,n,s,o=l[4].method+"",i,a,u,c,_=l[4].path+"",d,m,h,v=l[4].status_code+"",g,S,C,k,y=Lt(l[4].duration_ms)+"",T,D,E,j,L,I,R,z=l[4].request_id+"",Y,U,O,H,P,A=l[4].timestamp+"",B,J,Q,G,oe=l[4].spans.length+"",ee,V,K,ae,W,ie=l[4].service_name&&wu(l),ue=l[4].error&&$u(l),le=l[4].user_id&&Cu(l),me=pe(l[4].spans),re=[];for(let X=0;X<me.length;X+=1)re[X]=Su(Za(l,me,X));let ne=l[4].spans.length>0&&qu(l);return{c(){var X;e=p("div"),t=p("div"),ie&&ie.c(),n=b(),s=p("span"),i=q(o),u=b(),c=p("span"),d=q(_),m=b(),h=p("span"),g=q(v),C=b(),k=p("span"),T=q(y),D=b(),ue&&ue.c(),E=b(),j=p("div"),L=p("span"),I=q("Request ID: "),R=p("code"),Y=q(z),U=b(),le&&le.c(),O=b(),H=p("span"),P=q("Time: "),B=q(A),J=b(),Q=p("h4"),G=q("Timeline ("),ee=q(oe),V=q(" spans)"),K=b(),ae=p("div");for(let Z=0;Z<re.length;Z+=1)re[Z].c();W=b(),ne&&ne.c(),f(s,"class",a="method "+((X=l[4].method)==null?void 0:X.toLowerCase())+" svelte-1qj4rom"),f(c,"class","path svelte-1qj4rom"),f(h,"class",S="status status-"+fn(l[4].status_code)+" svelte-1qj4rom"),f(k,"class","duration svelte-1qj4rom"),f(t,"class","trace-header svelte-1qj4rom"),f(R,"class","svelte-1qj4rom"),f(j,"class","trace-meta svelte-1qj4rom"),f(Q,"class","svelte-1qj4rom"),f(ae,"class","spans-timeline svelte-1qj4rom"),f(e,"class","trace-detail svelte-1qj4rom")},m(X,Z){$(X,e,Z),r(e,t),ie&&ie.m(t,null),r(t,n),r(t,s),r(s,i),r(t,u),r(t,c),r(c,d),r(t,m),r(t,h),r(h,g),r(t,C),r(t,k),r(k,T),r(e,D),ue&&ue.m(e,null),r(e,E),r(e,j),r(j,L),r(L,I),r(L,R),r(R,Y),r(j,U),le&&le.m(j,null),r(j,O),r(j,H),r(H,P),r(H,B),r(e,J),r(e,Q),r(Q,G),r(Q,ee),r(Q,V),r(e,K),r(e,ae);for(let ge=0;ge<re.length;ge+=1)re[ge]&&re[ge].m(ae,null);r(e,W),ne&&ne.m(e,null)},p(X,Z){var ge;if(X[4].service_name?ie?ie.p(X,Z):(ie=wu(X),ie.c(),ie.m(t,n)):ie&&(ie.d(1),ie=null),Z[0]&16&&o!==(o=X[4].method+"")&&F(i,o),Z[0]&16&&a!==(a="method "+((ge=X[4].method)==null?void 0:ge.toLowerCase())+" svelte-1qj4rom")&&f(s,"class",a),Z[0]&16&&_!==(_=X[4].path+"")&&F(d,_),Z[0]&16&&v!==(v=X[4].status_code+"")&&F(g,v),Z[0]&16&&S!==(S="status status-"+fn(X[4].status_code)+" svelte-1qj4rom")&&f(h,"class",S),Z[0]&16&&y!==(y=Lt(X[4].duration_ms)+"")&&F(T,y),X[4].error?ue?ue.p(X,Z):(ue=$u(X),ue.c(),ue.m(e,E)):ue&&(ue.d(1),ue=null),Z[0]&16&&z!==(z=X[4].request_id+"")&&F(Y,z),X[4].user_id?le?le.p(X,Z):(le=Cu(X),le.c(),le.m(j,O)):le&&(le.d(1),le=null),Z[0]&16&&A!==(A=X[4].timestamp+"")&&F(B,A),Z[0]&16&&oe!==(oe=X[4].spans.length+"")&&F(ee,oe),Z[0]&16){me=pe(X[4].spans);let $e;for($e=0;$e<me.length;$e+=1){const We=Za(X,me,$e);re[$e]?re[$e].p(We,Z):(re[$e]=Su(We),re[$e].c(),re[$e].m(ae,null))}for(;$e<re.length;$e+=1)re[$e].d(1);re.length=me.length}X[4].spans.length>0?ne?ne.p(X,Z):(ne=qu(X),ne.c(),ne.m(e,null)):ne&&(ne.d(1),ne=null)},d(X){X&&w(e),ie&&ie.d(),ue&&ue.d(),le&&le.d(),Ne(re,X),ne&&ne.d()}}}function i0(l){let e,t,n,s,o,i,a,u,c,_,d,m,h,v,g,S,C,k,y,T,D,E,j,L,I;const R=[qv,Sv],z=[];function Y(B,J){return B[0]==="tracing"?0:1}g=Y(l),S=z[g]=R[g](l);let U=l[0]==="tracing"&&ou(l),O=l[0]==="logs"&&_u(l),H=l[0]==="agent"&&mu(l),P=l[0]==="database"&&bu(l),A=l[5]&&l[4]&&ku(l);return{c(){e=p("div"),t=p("div"),n=p("h2"),n.textContent="⚙️ Admin Dashboard",s=b(),o=p("div"),i=p("button"),i.textContent="📊 Request Tracing",a=b(),u=p("button"),u.textContent="📝 Backend Logs",c=b(),_=p("button"),_.textContent="🖥️ Agent Logs",d=b(),m=p("button"),m.textContent="🗄️ Database",h=b(),v=p("div"),S.c(),C=b(),U&&U.c(),k=b(),O&&O.c(),y=b(),H&&H.c(),T=b(),P&&P.c(),D=b(),A&&A.c(),E=Oe(),f(n,"class","svelte-1qj4rom"),f(i,"class","tab svelte-1qj4rom"),we(i,"active",l[0]==="tracing"),f(u,"class","tab svelte-1qj4rom"),we(u,"active",l[0]==="logs"),f(_,"class","tab svelte-1qj4rom"),we(_,"active",l[0]==="agent"),f(m,"class","tab svelte-1qj4rom"),we(m,"active",l[0]==="database"),f(o,"class","tabs svelte-1qj4rom"),f(v,"class","controls svelte-1qj4rom"),f(t,"class","header svelte-1qj4rom"),f(e,"class","telemetry svelte-1qj4rom")},m(B,J){$(B,e,J),r(e,t),r(t,n),r(t,s),r(t,o),r(o,i),r(o,a),r(o,u),r(o,c),r(o,_),r(o,d),r(o,m),r(t,h),r(t,v),z[g].m(v,null),r(e,C),U&&U.m(e,null),r(e,k),O&&O.m(e,null),r(e,y),H&&H.m(e,null),r(e,T),P&&P.m(e,null),$(B,D,J),A&&A.m(B,J),$(B,E,J),j=!0,L||(I=[x(i,"click",l[44]),x(u,"click",l[45]),x(_,"click",l[46]),x(m,"click",l[47])],L=!0)},p(B,J){(!j||J[0]&1)&&we(i,"active",B[0]==="tracing"),(!j||J[0]&1)&&we(u,"active",B[0]==="logs"),(!j||J[0]&1)&&we(_,"active",B[0]==="agent"),(!j||J[0]&1)&&we(m,"active",B[0]==="database");let Q=g;g=Y(B),g===Q?z[g].p(B,J):(qe(),M(z[Q],1,1,()=>{z[Q]=null}),je(),S=z[g],S?S.p(B,J):(S=z[g]=R[g](B),S.c()),N(S,1),S.m(v,null)),B[0]==="tracing"?U?(U.p(B,J),J[0]&1&&N(U,1)):(U=ou(B),U.c(),N(U,1),U.m(e,k)):U&&(qe(),M(U,1,1,()=>{U=null}),je()),B[0]==="logs"?O?(O.p(B,J),J[0]&1&&N(O,1)):(O=_u(B),O.c(),N(O,1),O.m(e,y)):O&&(qe(),M(O,1,1,()=>{O=null}),je()),B[0]==="agent"?H?(H.p(B,J),J[0]&1&&N(H,1)):(H=mu(B),H.c(),N(H,1),H.m(e,T)):H&&(qe(),M(H,1,1,()=>{H=null}),je()),B[0]==="database"?P?(P.p(B,J),J[0]&1&&N(P,1)):(P=bu(B),P.c(),N(P,1),P.m(e,null)):P&&(qe(),M(P,1,1,()=>{P=null}),je()),B[5]&&B[4]?A?(A.p(B,J),J[0]&48&&N(A,1)):(A=ku(B),A.c(),N(A,1),A.m(E.parentNode,E)):A&&(qe(),M(A,1,1,()=>{A=null}),je())},i(B){j||(N(S),N(U),N(O),N(H),N(P),N(A),j=!0)},o(B){M(S),M(U),M(O),M(H),M(P),M(A),j=!1},d(B){B&&(w(e),w(D),w(E)),z[g].d(),U&&U.d(),O&&O.d(),H&&H.d(),P&&P.d(),A&&A.d(B),L=!1,Ge(I)}}}let r0=50,a0=200;function Lu(l){switch(l){case"DEBUG":return"#888";case"INFO":return"#4CAF50";case"WARNING":return"#ff9800";case"ERROR":return"#f44336";case"CRITICAL":return"#9c27b0";default:return"#888"}}function Lt(l){return l?l<1e3?`${Math.round(l)}ms`:`${(l/1e3).toFixed(2)}s`:"-"}function Pu(l){return l?new Date(l).toLocaleTimeString():"-"}function fn(l){return l?l<300?"green":l<400?"blue":l<500?"yellow":"red":"gray"}function cn(l,e){return!l.duration_ms||!e?0:Math.max(2,l.duration_ms/e*100)}function u0(l,e,t){let n="tracing",s=!0,o=null,i=[],a=null,u=!1,c=[],_="",d="",m=24,h="",v="",g="",S=[],C=!1,k="",y="",T=!1,D=null,E=[],j="",L=[],I="",R="",z=!1,Y=100,U="agent",O=null,H=!1,P=!1,A;async function B(){t(27,H=!0);try{t(26,O=await He("GET","/admin/db/info"))}catch(Te){Ce.error(`Failed to load DB info: ${Te.message}`),t(26,O=null)}t(27,H=!1)}async function J(){try{const Te=Hn();if(!Te)throw new Error("Not authenticated");if(Te.split(".").length!==3)throw console.error("Invalid token format - clearing and requiring re-login"),new Error("Session corrupted - please logout and login again");const Ye=await fetch("/api/v1/admin/db/download",{headers:{Authorization:`Bearer ${Te}`}});if(!Ye.ok)throw new Error("Download failed");const at=await Ye.blob(),he=URL.createObjectURL(at),Pe=document.createElement("a");Pe.href=he,Pe.download=`deploy_backup_${new Date().toISOString().slice(0,10)}.db`,document.body.appendChild(Pe),Pe.click(),document.body.removeChild(Pe),URL.revokeObjectURL(he),Ce.success("Database downloaded")}catch(Te){Ce.error(`Download failed: ${Te.message}`)}}async function Q(){var Ke;if(!((Ke=A==null?void 0:A.files)!=null&&Ke[0])){Ce.error("Please select a file first");return}const Te=A.files[0];if(!Te.name.endsWith(".db")){Ce.error("File must have .db extension");return}if(confirm("⚠️ This will REPLACE the entire database! Are you sure?")){t(28,P=!0);try{const Ye=new FormData;Ye.append("file",Te);const at=Hn();if(!at)throw new Error("Not authenticated");if(at.split(".").length!==3)throw console.error("Invalid token format - clearing and requiring re-login"),new Error("Session corrupted - please logout and login again");const Pe=await fetch("/api/v1/admin/db/upload",{method:"POST",headers:{Authorization:`Bearer ${at}`},body:Ye});if(!Pe.ok){const It=await Pe.json();throw new Error(It.detail||"Upload failed")}const _t=await Pe.json();Ce.success(`Database replaced! Backup: ${_t.backup_path||"none"}`),t(29,A.value="",A),await B()}catch(Ye){Ce.error(`Upload failed: ${Ye.message}`)}t(28,P=!1)}}async function G(){t(14,C=!0);try{const Te=new URLSearchParams({limit:a0.toString()});k&&Te.set("level",k),y&&Te.set("search",y),t(13,S=await He("GET",`/admin/logs?${Te}`))}catch(Te){Ce.error(`Failed to load logs: ${Te.message}`),t(13,S=[])}t(14,C=!1)}function oe(){t(17,T=!T),T?(D=setInterval(G,3e3),Ce.info("Auto-refresh enabled (3s)")):(clearInterval(D),D=null,Ce.info("Auto-refresh disabled"))}async function ee(){try{await He("DELETE","/admin/logs"),t(13,S=[]),Ce.info("Logs cleared")}catch(Te){Ce.error(`Failed to clear logs: ${Te.message}`)}}async function V(){try{const Te=await He("GET","/admin/telemetry/services");t(6,c=Te.services||[]),t(7,_=Te.current||"unknown")}catch(Te){console.warn("Could not load services:",Te),t(6,c=[])}}async function K(){try{const Te=new URLSearchParams({hours:m.toString()});h&&Te.set("path_prefix",h),d&&Te.set("service_name",d),t(2,o=await He("GET",`/admin/telemetry/overview?${Te}`))}catch(Te){Ce.error(`Failed to load overview: ${Te.message}`)}}async function ae(){try{const Te=new URLSearchParams({hours:m.toString(),limit:r0.toString()});h&&Te.set("path_prefix",h),v&&Te.set("min_duration_ms",v),g&&Te.set("status_class",g),d&&Te.set("service_name",d),t(3,i=await He("GET",`/admin/telemetry/requests?${Te}`))}catch(Te){Ce.error(`Failed to load requests: ${Te.message}`)}}async function W(Te){try{t(4,a=await He("GET",`/admin/telemetry/requests/${Te}`)),t(5,u=!0)}catch(Ke){Ce.error(`Failed to load trace: ${Ke.message}`)}}async function ie(){t(1,s=!0),await Promise.all([V(),K(),ae()]),t(1,s=!1)}async function ue(){try{const Te=new URLSearchParams({hours:m.toString(),threshold_ms:"1000",limit:"50"});d&&Te.set("service_name",d),t(3,i=await He("GET",`/admin/telemetry/slow?${Te}`)),Ce.info("Showing slow requests (>1s)")}catch(Te){Ce.error(`Failed to load slow requests: ${Te.message}`)}}async function le(Te="5xx"){try{const Ke=new URLSearchParams({hours:m.toString(),status_class:Te,limit:"50"});d&&Ke.set("service_name",d),t(3,i=await He("GET",`/admin/telemetry/errors?${Ke}`)),Ce.info(`Showing ${Te} errors`)}catch(Ke){Ce.error(`Failed to load errors: ${Ke.message}`)}}Cl(()=>(ie(),()=>{D&&clearInterval(D)}));async function me(){const Te=Dt();if(!Te){Ce.error("DigitalOcean token required");return}try{const Ke=await He("GET",`/infra/servers?do_token=${encodeURIComponent(Te)}`);t(18,E=Ke.servers||[]),E.length>0&&!j&&(t(19,j=E[0].id),await re())}catch(Ke){Ce.error(`Failed to load servers: ${Ke.message}`),t(18,E=[])}}async function re(){if(!j)return;const Te=Dt();if(Te)try{const Ke=await He("GET",`/infra/agent/${j}/containers?do_token=${encodeURIComponent(Te)}`);t(20,L=Ke.containers||[]),t(21,I="")}catch(Ke){console.warn("Failed to load containers:",Ke),t(20,L=[])}}async function ne(){if(!j){Ce.error("Please select a server");return}const Te=Dt();if(!Te){Ce.error("DigitalOcean token required");return}t(23,z=!0);try{let Ke;U==="container"&&I?Ke=`/infra/agent/${j}/containers/${encodeURIComponent(I)}/logs?do_token=${encodeURIComponent(Te)}&lines=${Y}`:Ke=`/infra/agent/${j}/logs?do_token=${encodeURIComponent(Te)}&lines=${Y}`;const Ye=await He("GET",Ke);Ye.error?(Ce.error(`Failed to get logs: ${Ye.error}`),t(22,R="")):t(22,R=Ye.logs||"No logs available")}catch(Ke){Ce.error(`Failed to load logs: ${Ke.message}`),t(22,R="")}t(23,z=!1)}async function X(){t(22,R=""),t(20,L=[]),t(21,I=""),j&&await re()}function Z(Te){t(0,n=Te),Te==="logs"&&S.length===0&&G(),Te==="database"&&!O&&B(),Te==="agent"&&E.length===0&&me()}const ge=[[]],$e=()=>Z("tracing"),We=()=>Z("logs"),ct=()=>Z("agent"),bt=()=>Z("database");function rt(){m=ft(this),t(9,m)}function Ee(){k=ft(this),t(15,k)}function Ie(){y=this.value,t(16,y)}const ve=Te=>Te.key==="Enter"&&G(),ze=()=>le("5xx"),Me=()=>le("5xx");function Re(){d=ft(this),t(8,d),t(6,c)}function Ue(){h=this.value,t(10,h)}function et(){v=Kt(this.value),t(11,v)}function lt(){g=ft(this),t(12,g)}const ot=Te=>W(Te.request_id);function Je(){j=ft(this),t(19,j),t(18,E)}function it(){U=this.__value,t(25,U)}function St(){U=this.__value,t(25,U)}function Tt(){I=ft(this),t(21,I),t(20,L)}function Yt(){Y=ft(this),t(24,Y)}function tt(Te){zt[Te?"unshift":"push"](()=>{A=Te,t(29,A)})}return[n,s,o,i,a,u,c,_,d,m,h,v,g,S,C,k,y,T,E,j,L,I,R,z,Y,U,O,H,P,A,B,J,Q,G,oe,ee,ae,W,ie,ue,le,ne,X,Z,$e,We,ct,bt,rt,Ee,Ie,ve,ze,Me,Re,Ue,et,lt,ot,Je,it,ge,St,Tt,Yt,tt,()=>t(5,u=!1)]}class f0 extends jt{constructor(e){super(),qt(this,e,u0,i0,yt,{},null,[-1,-1,-1,-1])}}function c0(l){let e,t,n,s,o,i,a,u,c,_,d,m,h,v,g,S,C,k,y,T,D,E,j,L,I;n=new w1({props:{title:"Deploy Dashboard"}}),a=new R1({props:{tabs:l[10],active:l[1],scrollable:!0}}),a.$on("change",l[12]);let R=l[9]&&Nu(l),z={};m=new X_({props:z}),l[17](m),g=new sd({});let Y={};k=new nm({props:Y}),l[18](k);let U={};D=new yv({props:U}),l[19](D);const O=[v0,m0,d0],H=[];function P(A,B){return A[1]==="services"?0:A[1]==="settings"?1:A[1]==="telemetry"&&A[3]?2:-1}return~(j=P(l))&&(L=H[j]=O[j](l)),{c(){e=p("div"),t=p("div"),_e(n.$$.fragment),s=b(),o=p("div"),o.textContent=`${g0}`,i=b(),_e(a.$$.fragment),u=b(),R&&R.c(),c=b(),_=p("main"),d=p("div"),_e(m.$$.fragment),h=b(),v=p("div"),_e(g.$$.fragment),S=b(),C=p("div"),_e(k.$$.fragment),y=b(),T=p("div"),_e(D.$$.fragment),E=b(),L&&L.c(),f(o,"class","version-badge svelte-1jnwr0w"),f(o,"title","Build timestamp"),we(d,"hidden",l[1]!=="infra"),we(v,"hidden",l[1]!=="deploy"),we(C,"hidden",l[1]!=="deployments"),we(T,"hidden",l[1]!=="architecture"),f(_,"class","content glass"),f(t,"class","container"),f(e,"class","app")},m(A,B){$(A,e,B),r(e,t),fe(n,t,null),r(t,s),r(t,o),r(t,i),fe(a,t,null),r(t,u),R&&R.m(t,null),r(t,c),r(t,_),r(_,d),fe(m,d,null),r(_,h),r(_,v),fe(g,v,null),r(_,S),r(_,C),fe(k,C,null),r(_,y),r(_,T),fe(D,T,null),r(_,E),~j&&H[j].m(_,null),I=!0},p(A,B){const J={};B&1024&&(J.tabs=A[10]),B&2&&(J.active=A[1]),a.$set(J),A[9]?R?(R.p(A,B),B&512&&N(R,1)):(R=Nu(A),R.c(),N(R,1),R.m(t,c)):R&&(qe(),M(R,1,1,()=>{R=null}),je());const Q={};m.$set(Q),(!I||B&2)&&we(d,"hidden",A[1]!=="infra"),(!I||B&2)&&we(v,"hidden",A[1]!=="deploy");const G={};k.$set(G),(!I||B&2)&&we(C,"hidden",A[1]!=="deployments");const oe={};D.$set(oe),(!I||B&2)&&we(T,"hidden",A[1]!=="architecture");let ee=j;j=P(A),j!==ee&&(L&&(qe(),M(H[ee],1,1,()=>{H[ee]=null}),je()),~j?(L=H[j],L||(L=H[j]=O[j](A),L.c()),N(L,1),L.m(_,null)):L=null)},i(A){I||(N(n.$$.fragment,A),N(a.$$.fragment,A),N(R),N(m.$$.fragment,A),N(g.$$.fragment,A),N(k.$$.fragment,A),N(D.$$.fragment,A),N(L),I=!0)},o(A){M(n.$$.fragment,A),M(a.$$.fragment,A),M(R),M(m.$$.fragment,A),M(g.$$.fragment,A),M(k.$$.fragment,A),M(D.$$.fragment,A),M(L),I=!1},d(A){A&&w(e),ce(n),ce(a),R&&R.d(),l[17](null),ce(m),ce(g),l[18](null),ce(k),l[19](null),ce(D),~j&&H[j].d()}}}function _0(l){let e,t;const n=[{title:"Deploy Dashboard"},{subtitle:"Sign in to manage your infrastructure"},I1.internal,{allowSignup:!0}];let s={};for(let o=0;o<n.length;o+=1)s=Au(s,n[o]);return e=new o1({props:s}),e.$on("success",l[11]),{c(){_e(e.$$.fragment)},m(o,i){fe(e,o,i),t=!0},p(o,i){const a={};e.$set(a)},i(o){t||(N(e.$$.fragment,o),t=!0)},o(o){M(e.$$.fragment,o),t=!1},d(o){ce(e,o)}}}function p0(l){let e;return{c(){e=p("div"),e.innerHTML='<div class="spinner"></div>',f(e,"class","loading-screen")},m(t,n){$(t,e,n)},p:be,i:be,o:be,d(t){t&&w(e)}}}function Nu(l){let e,t;return e=new X1({props:{showTail:l[8],showContainer:l[7]}}),e.$on("change",l[13]),e.$on("refresh",l[14]),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const o={};s&256&&(o.showTail=n[8]),s&128&&(o.showContainer=n[7]),e.$set(o)},i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function d0(l){let e,t;return e=new f0({}),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function m0(l){let e,t;return e=new Ym({}),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function v0(l){let e,t;return e=new gm({}),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function h0(l){let e,t,n,s,o,i;e=new O1({});const a=[p0,_0,c0],u=[];function c(_,d){return _[0]?!_[2].token||!_[2].user?1:2:0}return n=c(l),s=u[n]=a[n](l),{c(){_e(e.$$.fragment),t=b(),s.c(),o=Oe()},m(_,d){fe(e,_,d),$(_,t,d),u[n].m(_,d),$(_,o,d),i=!0},p(_,[d]){let m=n;n=c(_),n===m?u[n].p(_,d):(qe(),M(u[m],1,1,()=>{u[m]=null}),je(),s=u[n],s?s.p(_,d):(s=u[n]=a[n](_),s.c()),N(s,1),s.m(o.parentNode,o))},i(_){i||(N(e.$$.fragment,_),N(s),i=!0)},o(_){M(e.$$.fragment,_),M(s),i=!1},d(_){_&&(w(t),w(o)),ce(e,_),u[n].d(_)}}}const g0="2026-01-23 13:34 UTC";function b0(l,e,t){let n,s,o,i,a,u,c,_;ht(l,Fs,z=>t(1,a=z)),ht(l,Mn,z=>t(16,u=z)),ht(l,kt,z=>t(2,c=z)),ht(l,Rc,z=>t(3,_=z));let d=!1,m,h,v,g=null;const S=[{id:"infra",label:"Infrastructure"},{id:"deploy",label:"Deploy"},{id:"deployments",label:"Deployments"},{id:"architecture",label:"Architecture"},{id:"services",label:"Services"},{id:"settings",label:"Settings"}],C=[{id:"telemetry",label:"⚙️ Admin",admin:!0}];Cl(async()=>{const z=await k();t(0,d=!0),z&&(t(15,g=u),y())});async function k(){const z=c;if(!z.token||z.token.trim()==="")return!1;try{const Y=await Ll("GET","/auth/me");return kt.setUser(Y),!0}catch{return kt.logout(),!1}}function y(){Zt.refresh(),zn.refresh(),mn.refresh(),$l.refresh()}async function T(z){const{user:Y,token:U}=z.detail;qn(U),kt.setUser(Y),t(15,g=u),y()}function D(z){Fs.set(z.detail)}function E(){j()}function j(){switch(a){case"infra":m==null||m.refresh(),Zt.refresh();break;case"deployments":h==null||h.refresh();break;case"architecture":v==null||v.refresh();break}}function L(z){zt[z?"unshift":"push"](()=>{m=z,t(4,m)})}function I(z){zt[z?"unshift":"push"](()=>{h=z,t(5,h)})}function R(z){zt[z?"unshift":"push"](()=>{v=z,t(6,v)})}return l.$$.update=()=>{l.$$.dirty&8&&t(10,n=_?[...S,...C]:S),l.$$.dirty&2&&t(9,s=a==="deployments"),l.$$.dirty&98309&&d&&c.user&&u&&u!==g&&(t(15,g=u),y())},t(8,o=!1),t(7,i=!1),[d,a,c,_,m,h,v,i,o,s,n,T,D,E,j,g,u,L,I,R]}class k0 extends jt{constructor(e){super(),qt(this,e,b0,h0,yt,{})}}new k0({target:document.getElementById("app")});
