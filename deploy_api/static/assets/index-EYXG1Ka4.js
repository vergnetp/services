var fa=Object.defineProperty;var ua=(l,e,t)=>e in l?fa(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t;var al=(l,e,t)=>ua(l,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();function ae(){}const Hr=l=>l;function pa(l,e){for(const t in e)l[t]=e[t];return l}function Gr(l){return l()}function vs(){return Object.create(null)}function Fe(l){l.forEach(Gr)}function zn(l){return typeof l=="function"}function Je(l,e){return l!=l?e==e:l!==e||l&&typeof l=="object"||typeof l=="function"}function da(l){return Object.keys(l).length===0}function xn(l,...e){if(l==null){for(const n of e)n(void 0);return ae}const t=l.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function en(l){let e;return xn(l,t=>e=t)(),e}function We(l,e,t){l.$$.on_destroy.push(xn(e,t))}function Yt(l,e,t,n){if(l){const s=Wr(l,e,t,n);return l[0](s)}}function Wr(l,e,t,n){return l[1]&&n?pa(t.ctx.slice(),l[1](n(e))):t.ctx}function Vt(l,e,t,n){if(l[2]&&n){const s=l[2](n(t));if(e.dirty===void 0)return s;if(typeof s=="object"){const i=[],o=Math.max(e.dirty.length,s.length);for(let c=0;c<o;c+=1)i[c]=e.dirty[c]|s[c];return i}return e.dirty|s}return e.dirty}function Kt(l,e,t,n,s,i){if(s){const o=Wr(e,t,n,i);l.p(o,s)}}function Qt(l){if(l.ctx.length>32){const e=[],t=l.ctx.length/32;for(let n=0;n<t;n++)e[n]=-1;return e}return-1}function Jr(l){const e={};for(const t in l)e[t]=!0;return e}function ms(l,e,t){return l.set(t),e}function hs(l){const e=typeof l=="string"&&l.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[l,"px"]}const Yr=typeof window<"u";let _a=Yr?()=>window.performance.now():()=>Date.now(),es=Yr?l=>requestAnimationFrame(l):ae;const Rl=new Set;function Vr(l){Rl.forEach(e=>{e.c(l)||(Rl.delete(e),e.f())}),Rl.size!==0&&es(Vr)}function va(l){let e;return Rl.size===0&&es(Vr),{promise:new Promise(t=>{Rl.add(e={c:l,f:t})}),abort(){Rl.delete(e)}}}const Kr=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function a(l,e){l.appendChild(e)}function Qr(l){if(!l)return document;const e=l.getRootNode?l.getRootNode():l.ownerDocument;return e&&e.host?e:l.ownerDocument}function ma(l){const e=d("style");return e.textContent="/* empty */",ha(Qr(l),e),e.sheet}function ha(l,e){return a(l.head||l,e),e.sheet}function w(l,e,t){l.insertBefore(e,t||null)}function $(l){l.parentNode&&l.parentNode.removeChild(l)}function Ee(l,e){for(let t=0;t<l.length;t+=1)l[t]&&l[t].d(e)}function d(l){return document.createElement(l)}function ga(l){return document.createElementNS("http://www.w3.org/2000/svg",l)}function q(l){return document.createTextNode(l)}function b(){return q(" ")}function je(){return q("")}function te(l,e,t,n){return l.addEventListener(e,t,n),()=>l.removeEventListener(e,t,n)}function Xr(l){return function(e){return e.preventDefault(),l.call(this,e)}}function u(l,e,t){t==null?l.removeAttribute(e):l.getAttribute(e)!==t&&l.setAttribute(e,t)}function Zr(l){let e;return{p(...t){e=t,e.forEach(n=>l.push(n))},r(){e.forEach(t=>l.splice(l.indexOf(t),1))}}}function Nt(l){return l===""?null:+l}function ba(l){return Array.from(l.childNodes)}function B(l,e){e=""+e,l.data!==e&&(l.data=e)}function Q(l,e){l.value=e??""}function Ae(l,e,t,n){t==null?l.style.removeProperty(e):l.style.setProperty(e,t,"")}function De(l,e,t){for(let n=0;n<l.options.length;n+=1){const s=l.options[n];if(s.__value===e){s.selected=!0;return}}(!t||e!==void 0)&&(l.selectedIndex=-1)}function Ge(l){const e=l.querySelector(":checked");return e&&e.__value}function $e(l,e,t){l.classList.toggle(e,!!t)}function xr(l,e,{bubbles:t=!1,cancelable:n=!1}={}){return new CustomEvent(l,{detail:e,bubbles:t,cancelable:n})}class $a{constructor(e=!1){al(this,"is_svg",!1);al(this,"e");al(this,"n");al(this,"t");al(this,"a");this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,n=null){this.e||(this.is_svg?this.e=ga(t.nodeName):this.e=d(t.nodeType===11?"TEMPLATE":t.nodeName),this.t=t.tagName!=="TEMPLATE"?t:t.content,this.c(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)w(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach($)}}const Dn=new Map;let Pn=0;function ka(l){let e=5381,t=l.length;for(;t--;)e=(e<<5)-e^l.charCodeAt(t);return e>>>0}function wa(l,e){const t={stylesheet:ma(e),rules:{}};return Dn.set(l,t),t}function gs(l,e,t,n,s,i,o,c=0){const r=16.666/n;let f=`{
`;for(let y=0;y<=1;y+=r){const C=e+(t-e)*i(y);f+=y*100+`%{${o(C,1-C)}}
`}const p=f+`100% {${o(t,1-t)}}
}`,_=`__svelte_${ka(p)}_${c}`,v=Qr(l),{stylesheet:h,rules:m}=Dn.get(v)||wa(v,l);m[_]||(m[_]=!0,h.insertRule(`@keyframes ${_} ${p}`,h.cssRules.length));const g=l.style.animation||"";return l.style.animation=`${g?`${g}, `:""}${_} ${n}ms linear ${s}ms 1 both`,Pn+=1,_}function ya(l,e){const t=(l.style.animation||"").split(", "),n=t.filter(e?i=>i.indexOf(e)<0:i=>i.indexOf("__svelte")===-1),s=t.length-n.length;s&&(l.style.animation=n.join(", "),Pn-=s,Pn||Ca())}function Ca(){es(()=>{Pn||(Dn.forEach(l=>{const{ownerNode:e}=l.stylesheet;e&&$(e)}),Dn.clear())})}let Xl;function Ql(l){Xl=l}function ts(){if(!Xl)throw new Error("Function called outside component initialization");return Xl}function ul(l){ts().$$.on_mount.push(l)}function ls(l){ts().$$.on_destroy.push(l)}function tn(){const l=ts();return(e,t,{cancelable:n=!1}={})=>{const s=l.$$.callbacks[e];if(s){const i=xr(e,t,{cancelable:n});return s.slice().forEach(o=>{o.call(l,i)}),!i.defaultPrevented}return!0}}function bs(l,e){const t=l.$$.callbacks[e.type];t&&t.slice().forEach(n=>n.call(this,e))}const jl=[],kt=[];let Ol=[];const Vn=[],Sa=Promise.resolve();let Kn=!1;function qa(){Kn||(Kn=!0,Sa.then(ea))}function Ue(l){Ol.push(l)}function En(l){Vn.push(l)}const Wn=new Set;let El=0;function ea(){if(El!==0)return;const l=Xl;do{try{for(;El<jl.length;){const e=jl[El];El++,Ql(e),Ta(e.$$)}}catch(e){throw jl.length=0,El=0,e}for(Ql(null),jl.length=0,El=0;kt.length;)kt.pop()();for(let e=0;e<Ol.length;e+=1){const t=Ol[e];Wn.has(t)||(Wn.add(t),t())}Ol.length=0}while(jl.length);for(;Vn.length;)Vn.pop()();Kn=!1,Wn.clear(),Ql(l)}function Ta(l){if(l.fragment!==null){l.update(),Fe(l.before_update);const e=l.dirty;l.dirty=[-1],l.fragment&&l.fragment.p(l.ctx,e),l.after_update.forEach(Ue)}}function Da(l){const e=[],t=[];Ol.forEach(n=>l.indexOf(n)===-1?e.push(n):t.push(n)),t.forEach(n=>n()),Ol=e}let Kl;function Pa(){return Kl||(Kl=Promise.resolve(),Kl.then(()=>{Kl=null})),Kl}function Jn(l,e,t){l.dispatchEvent(xr(`${e?"intro":"outro"}${t}`))}const Tn=new Set;let Jt;function ke(){Jt={r:0,c:[],p:Jt}}function we(){Jt.r||Fe(Jt.c),Jt=Jt.p}function P(l,e){l&&l.i&&(Tn.delete(l),l.i(e))}function L(l,e,t,n){if(l&&l.o){if(Tn.has(l))return;Tn.add(l),Jt.c.push(()=>{Tn.delete(l),n&&(t&&l.d(1),n())}),l.o(e)}else n&&n()}const Ea={duration:0};function Ll(l,e,t,n){let i=e(l,t,{direction:"both"}),o=n?0:1,c=null,r=null,f=null,p;function _(){f&&ya(l,f)}function v(m,g){const y=m.b-o;return g*=Math.abs(y),{a:o,b:m.b,d:y,duration:g,start:m.start,end:m.start+g,group:m.group}}function h(m){const{delay:g=0,duration:y=300,easing:C=Hr,tick:k=ae,css:S}=i||Ea,M={start:_a()+g,b:m};m||(M.group=Jt,Jt.r+=1),"inert"in l&&(m?p!==void 0&&(l.inert=p):(p=l.inert,l.inert=!0)),c||r?r=M:(S&&(_(),f=gs(l,o,m,y,g,C,S)),m&&k(0,1),c=v(M,y),Ue(()=>Jn(l,m,"start")),va(D=>{if(r&&D>r.start&&(c=v(r,y),r=null,Jn(l,c.b,"start"),S&&(_(),f=gs(l,o,c.b,c.duration,0,C,i.css))),c){if(D>=c.end)k(o=c.b,1-o),Jn(l,c.b,"end"),r||(c.b?_():--c.group.r||Fe(c.group.c)),c=null;else if(D>=c.start){const T=D-c.start;o=c.a+c.d*C(T/c.duration),k(o,1-o)}}return!!(c||r)}))}return{run(m){zn(i)?Pa().then(()=>{i=i({direction:m?"in":"out"}),h(m)}):h(m)},end(){_(),c=r=null}}}function _e(l){return(l==null?void 0:l.length)!==void 0?l:Array.from(l)}function ta(l,e){L(l,1,1,()=>{e.delete(l.key)})}function la(l,e,t,n,s,i,o,c,r,f,p,_){let v=l.length,h=i.length,m=v;const g={};for(;m--;)g[l[m].key]=m;const y=[],C=new Map,k=new Map,S=[];for(m=h;m--;){const E=_(s,i,m),j=t(E);let R=o.get(j);R?S.push(()=>R.p(E,e)):(R=f(j,E),R.c()),C.set(j,y[m]=R),j in g&&k.set(j,Math.abs(m-g[j]))}const M=new Set,D=new Set;function T(E){P(E,1),E.m(c,p),o.set(E.key,E),p=E.first,h--}for(;v&&h;){const E=y[h-1],j=l[v-1],R=E.key,O=j.key;E===j?(p=E.first,v--,h--):C.has(O)?!o.has(R)||M.has(R)?T(E):D.has(O)?v--:k.get(R)>k.get(O)?(D.add(R),T(E)):(M.add(O),v--):(r(j,o),v--)}for(;v--;){const E=l[v];C.has(E.key)||r(E,o)}for(;h;)T(y[h-1]);return Fe(S),y}function Mn(l,e,t){const n=l.$$.props[e];n!==void 0&&(l.$$.bound[n]=t,t(l.$$.ctx[n]))}function oe(l){l&&l.c()}function ne(l,e,t){const{fragment:n,after_update:s}=l.$$;n&&n.m(e,t),Ue(()=>{const i=l.$$.on_mount.map(Gr).filter(zn);l.$$.on_destroy?l.$$.on_destroy.push(...i):Fe(i),l.$$.on_mount=[]}),s.forEach(Ue)}function se(l,e){const t=l.$$;t.fragment!==null&&(Da(t.after_update),Fe(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function Ma(l,e){l.$$.dirty[0]===-1&&(jl.push(l),qa(),l.$$.dirty.fill(0)),l.$$.dirty[e/31|0]|=1<<e%31}function Ye(l,e,t,n,s,i,o=null,c=[-1]){const r=Xl;Ql(l);const f=l.$$={fragment:null,ctx:[],props:i,update:ae,not_equal:s,bound:vs(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(r?r.$$.context:[])),callbacks:vs(),dirty:c,skip_bound:!1,root:e.target||r.$$.root};o&&o(f.root);let p=!1;if(f.ctx=t?t(l,e.props||{},(_,v,...h)=>{const m=h.length?h[0]:v;return f.ctx&&s(f.ctx[_],f.ctx[_]=m)&&(!f.skip_bound&&f.bound[_]&&f.bound[_](m),p&&Ma(l,_)),v}):[],f.update(),p=!0,Fe(f.before_update),f.fragment=n?n(f.ctx):!1,e.target){if(e.hydrate){const _=ba(e.target);f.fragment&&f.fragment.l(_),_.forEach($)}else f.fragment&&f.fragment.c();e.intro&&P(l.$$.fragment),ne(l,e.target,e.anchor),ea()}Ql(r)}class Ve{constructor(){al(this,"$$");al(this,"$$set")}$destroy(){se(this,1),this.$destroy=ae}$on(e,t){if(!zn(t))return ae;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const s=n.indexOf(t);s!==-1&&n.splice(s,1)}}$set(e){this.$$set&&!da(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const ja="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(ja);const Ml=[];function La(l,e){return{subscribe:pl(l,e).subscribe}}function pl(l,e=ae){let t;const n=new Set;function s(c){if(Je(l,c)&&(l=c,t)){const r=!Ml.length;for(const f of n)f[1](),Ml.push(f,l);if(r){for(let f=0;f<Ml.length;f+=2)Ml[f][0](Ml[f+1]);Ml.length=0}}}function i(c){s(c(l))}function o(c,r=ae){const f=[c,r];return n.add(f),n.size===1&&(t=e(s,i)||ae),c(l),()=>{n.delete(f),n.size===0&&t&&(t(),t=null)}}return{set:s,update:i,subscribe:o}}function Al(l,e,t){const n=!Array.isArray(l),s=n?[l]:l;if(!s.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const i=e.length<2;return La(t,(o,c)=>{let r=!1;const f=[];let p=0,_=ae;const v=()=>{if(p)return;_();const m=e(n?f[0]:f,o,c);i?o(m):_=zn(m)?m:ae},h=s.map((m,g)=>xn(m,y=>{f[g]=y,p&=~(1<<g),r&&v()},()=>{p|=1<<g}));return r=!0,v(),function(){Fe(h),_(),r=!1}})}function ns(l,e,t=7){const n=new Date(Date.now()+t*864e5).toUTCString();document.cookie=`${l}=${encodeURIComponent(e)}; expires=${n}; path=/; SameSite=Strict`}function ss(l){const e=document.cookie.match(new RegExp("(^| )"+l+"=([^;]+)"));return e?decodeURIComponent(e[2]):null}function $s(l){document.cookie=`${l}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; SameSite=Strict`}function Na(){const{subscribe:l,set:e,update:t}=pl({token:ss("jwt_token"),user:null,loading:!1,error:null});return{subscribe:l,setToken(n){ns("jwt_token",n,7),t(s=>({...s,token:n,error:null}))},setUser(n){t(s=>({...s,user:n}))},setError(n){t(s=>({...s,error:n,loading:!1}))},setLoading(n){t(s=>({...s,loading:n}))},logout(){$s("jwt_token"),$s("do_token_local"),e({token:null,user:null,loading:!1,error:null})},clearError(){t(n=>({...n,error:null}))}}}const ht=Na();Al(ht,l=>!!l.token&&!!l.user);function Zl(){return ss("do_token_local")}function Ra(l){ns("do_token_local",l,30)}function Qn(){return ss("cf_token_local")}function Oa(l){ns("cf_token_local",l,30)}function Aa(){const{subscribe:l,update:e}=pl([]);let t=0;function n(i,o="info",c=3e3){const r={id:++t,message:i,type:o};return e(f=>[...f,r]),c>0&&setTimeout(()=>s(r.id),c),r.id}function s(i){e(o=>o.filter(c=>c.id!==i))}return{subscribe:l,success:(i,o)=>n(i,"success",o),error:(i,o)=>n(i,"error",o),warning:(i,o)=>n(i,"warning",o),info:(i,o)=>n(i,"info",o),remove:s}}const ve=Aa(),na="/api/v1",sa=["/infra/servers","/infra/snapshots","/infra/setup","/infra/deploy","/infra/registry","/infra/agent","/infra/architecture","/infra/fleet"];function oa(l,e={}){const t=en(ht),n={"Content-Type":"application/json"};t.token&&(n.Authorization=`Bearer ${t.token}`);let s=na+l;if(!e.skipDoToken&&sa.some(o=>l.startsWith(o))){const o=Zl();if(!o)return{error:"DO token not set",url:null,headers:null};const c=s.includes("?")?"&":"?";s+=`${c}do_token=${encodeURIComponent(o)}`}return{url:s,headers:n,error:null}}async function os(l){if(l.status===401){let e="Authentication failed";try{const n=await l.json();e=n.detail||n.error||n.message||e}catch{}throw en(ht).token&&(ht.logout(),e="Session expired - please login again"),new Error(e)}if(!l.ok){const e=await l.json().catch(()=>({detail:"Request failed"}));throw new Error(e.detail||e.error||e.message||"Request failed")}}async function Be(l,e,t=null,n={}){const{url:s,headers:i,error:o}=oa(e,n);if(o)return console.debug(`Skipping ${e} - ${o}`),null;const c={method:l,headers:i};t&&(c.body=JSON.stringify(t));const r=await fetch(s,c);if(await os(r),r.status===204)return null;const f=await r.json();return f&&f.success===!0&&f.data!==void 0?f.data:f}async function ia(l,e,t=null,n,s={}){const{url:i,headers:o,error:c}=oa(e,s);if(c)throw new Error(c);const r={method:l,headers:o};t&&(r.body=JSON.stringify(t));const f=await fetch(i,r);await os(f);const p=f.body.getReader(),_=new TextDecoder;let v="";for(;;){const{done:h,value:m}=await p.read();if(h)break;v+=_.decode(m,{stream:!0});const g=v.split(`
`);v=g.pop()||"";for(const y of g)if(y.startsWith("data: "))try{const C=JSON.parse(y.slice(6));n(C)}catch{}}}async function Fa(l,e,t,n={}){const s=en(ht);let i=na+l;if(!n.skipDoToken&&sa.some(v=>l.startsWith(v))){const v=Zl();if(!v)throw new Error("DO token not set");const h=i.includes("?")?"&":"?";i+=`${h}do_token=${encodeURIComponent(v)}`}const c={};s.token&&(c.Authorization=`Bearer ${s.token}`);const r=await fetch(i,{method:"POST",headers:c,body:e});await os(r);const f=r.body.getReader(),p=new TextDecoder;let _="";for(;;){const{done:v,value:h}=await f.read();if(v)break;_+=p.decode(h,{stream:!0});const m=_.split(`
`);_=m.pop()||"";for(const g of m)if(g.startsWith("data: "))try{const y=JSON.parse(g.slice(6));t(y)}catch{}}}async function za(){if(!en(ht).token)return!1;try{const e=await Be("GET","/auth/me");return ht.setUser(e),!0}catch{return ht.logout(),!1}}function Ba(l,e,t={}){const{refreshInterval:n=0,revalidateOnFocus:s=!0,revalidateOnMount:i=!0,dedupingInterval:o=2e3,initialData:c=null}=t,r=pl({data:c,error:null,loading:!1,lastFetched:null});let f=0,p=null,_=null,v=0;async function h(S=!1){const M=Date.now();return!S&&p&&M-f<o||(f=M,r.update(D=>{var T;return{...D,loading:D.data===null||((T=D.data)==null?void 0:T.length)===0}}),p=(async()=>{try{const D=await e();return r.set({data:D,error:null,loading:!1,lastFetched:new Date}),D}catch(D){throw r.update(T=>({...T,error:D.message||"Fetch failed",loading:!1})),D}finally{p=null}})()),p}function m(){document.visibilityState==="visible"&&s&&h()}function g(){n>0&&!_&&(_=setInterval(()=>h(),n))}function y(){_&&(clearInterval(_),_=null)}const{subscribe:C}=r;function k(S){v++,v===1&&(s&&typeof document<"u"&&document.addEventListener("visibilitychange",m),i&&h(),g());const M=C(S);return()=>{M(),v--,v===0&&(typeof document<"u"&&document.removeEventListener("visibilitychange",m),y())}}return{subscribe:k,refresh:()=>h(!0),mutate:S=>r.update(M=>({...M,data:S})),get:()=>en(r)}}function Bn(l,e={}){const{transform:t=s=>s,...n}=e;return Ba(l,async()=>{const s=await Be("GET",l);return t(s)},n)}function Ua(l,e={}){const{transform:t=r=>r,...n}=e,s=pl({data:null,error:null,loading:!1,lastFetched:null});let i=null,o=null;async function c(r){const f=l(r);if(!f){s.set({data:null,error:null,loading:!1,lastFetched:null});return}return o&&JSON.stringify(r)===JSON.stringify(i)||(i=r,s.update(p=>({...p,loading:!0})),o=(async()=>{try{const p=await Be("GET",f),_=t(p);return s.set({data:_,error:null,loading:!1,lastFetched:new Date}),_}catch(p){throw s.update(_=>({..._,error:p.message||"Fetch failed",loading:!1})),p}finally{o=null}})()),o}return{subscribe:s.subscribe,fetch:c,refresh:()=>i&&c(i),clear:()=>{i=null,s.set({data:null,error:null,loading:!1,lastFetched:null})}}}const ks=pl("infra"),qt=pl({project:"",env:"",server:"",container:"",range:"30d",tail:!1}),Ia=["infra","metrics","logs","deployments"],cl=Bn("/infra/servers",{transform:l=>l.servers||l||[],refreshInterval:6e4,revalidateOnFocus:!0,initialData:[]}),ra=Bn("/infra/projects",{transform:l=>l.projects||[],refreshInterval:12e4,initialData:[]}),jn=Bn("/infra/snapshots",{transform:l=>l.snapshots||[],refreshInterval:6e4,initialData:[]}),Nl=Bn("/infra/deployments/history",{transform:l=>l.deployments||[],refreshInterval:3e4,initialData:[]}),Xn=Ua(l=>l!=null&&l.server?`/infra/agent/${l.server}/containers`:null,{transform:l=>(l.containers||l||[]).map(t=>({id:t.ID||t.Id||t.id,name:t.Names||t.Name||t.name||"unknown",image:t.Image||t.image,status:t.Status||t.State||t.status,state:t.State||t.state}))}),bl=Al(cl,l=>l.data||[]),aa=Al(ra,l=>l.data||[]),Zn=Al(jn,l=>l.data||[]);Al(Nl,l=>l.data||[]);const Ha=Al(Xn,l=>l.data||[]),Ga="1.9.5";function Wa(){const l=typeof localStorage<"u"&&localStorage.getItem("theme")||"dark",{subscribe:e,set:t}=pl(l);return typeof document<"u"&&document.documentElement.setAttribute("data-theme",l),{subscribe:e,set(n){typeof localStorage<"u"&&localStorage.setItem("theme",n),typeof document<"u"&&document.documentElement.setAttribute("data-theme",n),t(n)}}}const Yn=Wa();function ws(l){let e;return{c(){e=d("span"),u(e,"class","brand-dot svelte-16ksbsk")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function ys(l){let e,t,n,s,i,o;return{c(){e=d("div"),t=d("button"),t.textContent="Sign In",n=b(),s=d("button"),s.textContent="Sign Up",u(t,"class","tab svelte-16ksbsk"),$e(t,"active",l[4]==="login"),u(s,"class","tab svelte-16ksbsk"),$e(s,"active",l[4]==="signup"),u(e,"class","tabs svelte-16ksbsk")},m(c,r){w(c,e,r),a(e,t),a(e,n),a(e,s),i||(o=[te(t,"click",l[16]),te(s,"click",l[17])],i=!0)},p(c,r){r&16&&$e(t,"active",c[4]==="login"),r&16&&$e(s,"active",c[4]==="signup")},d(c){c&&$(e),i=!1,Fe(o)}}}function Ja(l){let e,t,n,s,i,o,c,r,f,p,_,v,h,m,g,y,C,k,S;function M(E,j){return E[5]?Ka:Va}let D=M(l),T=D(l);return{c(){e=d("form"),t=d("div"),n=d("label"),n.textContent="Email",s=b(),i=d("input"),o=b(),c=d("div"),r=d("label"),r.textContent="Password",f=b(),p=d("input"),_=b(),v=d("div"),h=d("label"),h.textContent="Confirm Password",m=b(),g=d("input"),y=b(),C=d("button"),T.c(),u(n,"for","signup-email"),u(n,"class","svelte-16ksbsk"),u(i,"type","email"),u(i,"id","signup-email"),u(i,"placeholder","you@example.com"),i.required=!0,i.disabled=l[5],u(i,"class","svelte-16ksbsk"),u(t,"class","form-group svelte-16ksbsk"),u(r,"for","signup-password"),u(r,"class","svelte-16ksbsk"),u(p,"type","password"),u(p,"id","signup-password"),u(p,"placeholder","••••••••"),p.required=!0,p.disabled=l[5],u(p,"class","svelte-16ksbsk"),u(c,"class","form-group svelte-16ksbsk"),u(h,"for","signup-confirm"),u(h,"class","svelte-16ksbsk"),u(g,"type","password"),u(g,"id","signup-confirm"),u(g,"placeholder","••••••••"),g.required=!0,g.disabled=l[5],u(g,"class","svelte-16ksbsk"),u(v,"class","form-group svelte-16ksbsk"),u(C,"type","submit"),u(C,"class","btn btn-primary btn-full svelte-16ksbsk"),C.disabled=l[5]},m(E,j){w(E,e,j),a(e,t),a(t,n),a(t,s),a(t,i),Q(i,l[9]),a(e,o),a(e,c),a(c,r),a(c,f),a(c,p),Q(p,l[10]),a(e,_),a(e,v),a(v,h),a(v,m),a(v,g),Q(g,l[11]),a(e,y),a(e,C),T.m(C,null),k||(S=[te(i,"input",l[20]),te(p,"input",l[21]),te(g,"input",l[22]),te(e,"submit",l[14])],k=!0)},p(E,j){j&32&&(i.disabled=E[5]),j&512&&i.value!==E[9]&&Q(i,E[9]),j&32&&(p.disabled=E[5]),j&1024&&p.value!==E[10]&&Q(p,E[10]),j&32&&(g.disabled=E[5]),j&2048&&g.value!==E[11]&&Q(g,E[11]),D!==(D=M(E))&&(T.d(1),T=D(E),T&&(T.c(),T.m(C,null))),j&32&&(C.disabled=E[5])},d(E){E&&$(e),T.d(),k=!1,Fe(S)}}}function Ya(l){let e,t,n,s,i,o,c,r,f,p,_,v,h,m;function g(k,S){return k[5]?Xa:Qa}let y=g(l),C=y(l);return{c(){e=d("form"),t=d("div"),n=d("label"),n.textContent="Email",s=b(),i=d("input"),o=b(),c=d("div"),r=d("label"),r.textContent="Password",f=b(),p=d("input"),_=b(),v=d("button"),C.c(),u(n,"for","login-email"),u(n,"class","svelte-16ksbsk"),u(i,"type","email"),u(i,"id","login-email"),u(i,"placeholder","you@example.com"),i.required=!0,i.disabled=l[5],u(i,"class","svelte-16ksbsk"),u(t,"class","form-group svelte-16ksbsk"),u(r,"for","login-password"),u(r,"class","svelte-16ksbsk"),u(p,"type","password"),u(p,"id","login-password"),u(p,"placeholder","••••••••"),p.required=!0,p.disabled=l[5],u(p,"class","svelte-16ksbsk"),u(c,"class","form-group svelte-16ksbsk"),u(v,"type","submit"),u(v,"class","btn btn-primary btn-full svelte-16ksbsk"),v.disabled=l[5]},m(k,S){w(k,e,S),a(e,t),a(t,n),a(t,s),a(t,i),Q(i,l[7]),a(e,o),a(e,c),a(c,r),a(c,f),a(c,p),Q(p,l[8]),a(e,_),a(e,v),C.m(v,null),h||(m=[te(i,"input",l[18]),te(p,"input",l[19]),te(e,"submit",l[13])],h=!0)},p(k,S){S&32&&(i.disabled=k[5]),S&128&&i.value!==k[7]&&Q(i,k[7]),S&32&&(p.disabled=k[5]),S&256&&p.value!==k[8]&&Q(p,k[8]),y!==(y=g(k))&&(C.d(1),C=y(k),C&&(C.c(),C.m(v,null))),S&32&&(v.disabled=k[5])},d(k){k&&$(e),C.d(),h=!1,Fe(m)}}}function Va(l){let e;return{c(){e=q("Create Account")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Ka(l){let e;return{c(){e=d("span"),u(e,"class","spinner svelte-16ksbsk")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Qa(l){let e;return{c(){e=q("Sign In")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Xa(l){let e;return{c(){e=d("span"),u(e,"class","spinner svelte-16ksbsk")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Cs(l){let e,t;return{c(){e=d("p"),t=q(l[6]),u(e,"class","error-message svelte-16ksbsk")},m(n,s){w(n,e,s),a(e,t)},p(n,s){s&64&&B(t,n[6])},d(n){n&&$(e)}}}function Za(l){let e,t,n,s,i,o,c,r,f,p,_,v,h=l[2]&&ws(),m=l[3]&&ys(l);function g(S,M){return S[4]==="login"?Ya:Ja}let y=g(l),C=y(l),k=l[6]&&Cs(l);return{c(){e=d("div"),t=d("div"),n=d("div"),s=d("h1"),h&&h.c(),i=b(),o=q(l[0]),c=b(),r=d("p"),f=q(l[1]),p=b(),m&&m.c(),_=b(),C.c(),v=b(),k&&k.c(),u(s,"class","svelte-16ksbsk"),u(r,"class","svelte-16ksbsk"),u(n,"class","auth-title svelte-16ksbsk"),u(t,"class","auth-card glass svelte-16ksbsk"),u(e,"class","auth-container svelte-16ksbsk")},m(S,M){w(S,e,M),a(e,t),a(t,n),a(n,s),h&&h.m(s,null),a(s,i),a(s,o),a(n,c),a(n,r),a(r,f),a(t,p),m&&m.m(t,null),a(t,_),C.m(t,null),a(t,v),k&&k.m(t,null)},p(S,[M]){S[2]?h||(h=ws(),h.c(),h.m(s,i)):h&&(h.d(1),h=null),M&1&&B(o,S[0]),M&2&&B(f,S[1]),S[3]?m?m.p(S,M):(m=ys(S),m.c(),m.m(t,_)):m&&(m.d(1),m=null),y===(y=g(S))&&C?C.p(S,M):(C.d(1),C=y(S),C&&(C.c(),C.m(t,v))),S[6]?k?k.p(S,M):(k=Cs(S),k.c(),k.m(t,null)):k&&(k.d(1),k=null)},i:ae,o:ae,d(S){S&&$(e),h&&h.d(),m&&m.d(),C.d(),k&&k.d()}}}function xa(l,e,t){let{title:n="Welcome"}=e,{subtitle:s="Sign in to your account"}=e,{apiBase:i="/api/v1"}=e,{showLogo:o=!0}=e,{allowSignup:c=!0}=e;const r=tn();let f="login",p=!1,_=null,v="",h="",m="",g="",y="";function C(F){t(4,f=F),t(6,_=null)}async function k(F,H,W){const I=await fetch(i+H,{method:F,headers:{"Content-Type":"application/json"},body:W?JSON.stringify(W):void 0});if(!I.ok){const J=await I.json().catch(()=>({detail:"Request failed"}));throw new Error(J.detail||J.error||J.message||"Request failed")}return I.json()}async function S(F){F.preventDefault(),t(5,p=!0),t(6,_=null);try{const W=(await k("POST","/auth/login",{username:v,password:h})).access_token,J=await(await fetch(i+"/auth/me",{headers:{Authorization:`Bearer ${W}`}})).json();r("success",{user:J,token:W})}catch(H){t(6,_=H.message),r("error",{error:H.message,type:"login"})}finally{t(5,p=!1)}}async function M(F){if(F.preventDefault(),g!==y){t(6,_="Passwords do not match");return}t(5,p=!0),t(6,_=null);try{await k("POST","/auth/register",{username:m,email:m,password:g});const W=(await k("POST","/auth/login",{username:m,password:g})).access_token,J=await(await fetch(i+"/auth/me",{headers:{Authorization:`Bearer ${W}`}})).json();r("success",{user:J,token:W})}catch(H){t(6,_=H.message),r("error",{error:H.message,type:"signup"})}finally{t(5,p=!1)}}const D=()=>C("login"),T=()=>C("signup");function E(){v=this.value,t(7,v)}function j(){h=this.value,t(8,h)}function R(){m=this.value,t(9,m)}function O(){g=this.value,t(10,g)}function z(){y=this.value,t(11,y)}return l.$$set=F=>{"title"in F&&t(0,n=F.title),"subtitle"in F&&t(1,s=F.subtitle),"apiBase"in F&&t(15,i=F.apiBase),"showLogo"in F&&t(2,o=F.showLogo),"allowSignup"in F&&t(3,c=F.allowSignup)},[n,s,o,c,f,p,_,v,h,m,g,y,C,S,M,i,D,T,E,j,R,O,z]}class ec extends Ve{constructor(e){super(),Ye(this,e,xa,Za,Je,{title:0,subtitle:1,apiBase:15,showLogo:2,allowSignup:3})}}function ca(l){const e=l-1;return e*e*e+1}function Ss(l,{delay:e=0,duration:t=400,easing:n=Hr}={}){const s=+getComputedStyle(l).opacity;return{delay:e,duration:t,easing:n,css:i=>`opacity: ${i*s}`}}function qs(l,{delay:e=0,duration:t=400,easing:n=ca,x:s=0,y:i=0,opacity:o=0}={}){const c=getComputedStyle(l),r=+c.opacity,f=c.transform==="none"?"":c.transform,p=r*(1-o),[_,v]=hs(s),[h,m]=hs(i);return{delay:e,duration:t,easing:n,css:(g,y)=>`
			transform: ${f} translate(${(1-g)*_}${v}, ${(1-g)*h}${m});
			opacity: ${r-p*y}`}}function Ts(l,{delay:e=0,duration:t=400,easing:n=ca,start:s=0,opacity:i=0}={}){const o=getComputedStyle(l),c=+o.opacity,r=o.transform==="none"?"":o.transform,f=1-s,p=c*(1-i);return{delay:e,duration:t,easing:n,css:(_,v)=>`
			transform: ${r} scale(${1-f*v});
			opacity: ${c-p*v}
		`}}function Ds(l,e,t){const n=l.slice();return n[2]=e[t],n}function Ps(l,e){let t,n,s=e[2].message+"",i,o,c,r,f,p,_,v,h;function m(){return e[1](e[2])}return{key:l,first:null,c(){t=d("div"),n=d("span"),i=q(s),o=b(),c=d("button"),c.textContent="×",r=b(),u(n,"class","toast-message svelte-1l5lsfn"),u(c,"class","toast-close svelte-1l5lsfn"),u(t,"class",f="toast toast-"+e[2].type+" svelte-1l5lsfn"),this.first=t},m(g,y){w(g,t,y),a(t,n),a(n,i),a(t,o),a(t,c),a(t,r),_=!0,v||(h=te(c,"click",m),v=!0)},p(g,y){e=g,(!_||y&1)&&s!==(s=e[2].message+"")&&B(i,s),(!_||y&1&&f!==(f="toast toast-"+e[2].type+" svelte-1l5lsfn"))&&u(t,"class",f)},i(g){_||(g&&Ue(()=>{_&&(p||(p=Ll(t,qs,{x:100,duration:200},!0)),p.run(1))}),_=!0)},o(g){g&&(p||(p=Ll(t,qs,{x:100,duration:200},!1)),p.run(0)),_=!1},d(g){g&&$(t),g&&p&&p.end(),v=!1,h()}}}function tc(l){let e,t=[],n=new Map,s,i=_e(l[0]);const o=c=>c[2].id;for(let c=0;c<i.length;c+=1){let r=Ds(l,i,c),f=o(r);n.set(f,t[c]=Ps(f,r))}return{c(){e=d("div");for(let c=0;c<t.length;c+=1)t[c].c();u(e,"class","toast-container svelte-1l5lsfn")},m(c,r){w(c,e,r);for(let f=0;f<t.length;f+=1)t[f]&&t[f].m(e,null);s=!0},p(c,[r]){r&1&&(i=_e(c[0]),ke(),t=la(t,r,o,1,c,i,n,e,ta,Ps,null,Ds),we())},i(c){if(!s){for(let r=0;r<i.length;r+=1)P(t[r]);s=!0}},o(c){for(let r=0;r<t.length;r+=1)L(t[r]);s=!1},d(c){c&&$(e);for(let r=0;r<t.length;r+=1)t[r].d()}}}function lc(l,e,t){let n;return We(l,ve,i=>t(0,n=i)),[n,i=>ve.remove(i.id)]}class nc extends Ve{constructor(e){super(),Ye(this,e,lc,tc,Je,{})}}function sc(l){let e,t,n,s,i,o,c=l[3]&&Es();const r=l[7].default,f=Yt(r,l,l[6],null);return{c(){e=d("button"),c&&c.c(),t=b(),f&&f.c(),u(e,"type",l[4]),u(e,"class",n="btn btn-"+l[0]+" btn-"+l[1]+" svelte-1qvbuil"),e.disabled=l[2]},m(p,_){w(p,e,_),c&&c.m(e,null),a(e,t),f&&f.m(e,null),s=!0,i||(o=te(e,"click",l[9]),i=!0)},p(p,_){p[3]?c||(c=Es(),c.c(),c.m(e,t)):c&&(c.d(1),c=null),f&&f.p&&(!s||_&64)&&Kt(f,r,p,p[6],s?Vt(r,p[6],_,null):Qt(p[6]),null),(!s||_&16)&&u(e,"type",p[4]),(!s||_&3&&n!==(n="btn btn-"+p[0]+" btn-"+p[1]+" svelte-1qvbuil"))&&u(e,"class",n),(!s||_&4)&&(e.disabled=p[2])},i(p){s||(P(f,p),s=!0)},o(p){L(f,p),s=!1},d(p){p&&$(e),c&&c.d(),f&&f.d(p),i=!1,o()}}}function oc(l){let e,t,n,s,i,o,c=l[3]&&Ms();const r=l[7].default,f=Yt(r,l,l[6],null);return{c(){e=d("a"),c&&c.c(),t=b(),f&&f.c(),u(e,"href",l[5]),u(e,"class",n="btn btn-"+l[0]+" btn-"+l[1]+" svelte-1qvbuil"),$e(e,"disabled",l[2])},m(p,_){w(p,e,_),c&&c.m(e,null),a(e,t),f&&f.m(e,null),s=!0,i||(o=te(e,"click",l[8]),i=!0)},p(p,_){p[3]?c||(c=Ms(),c.c(),c.m(e,t)):c&&(c.d(1),c=null),f&&f.p&&(!s||_&64)&&Kt(f,r,p,p[6],s?Vt(r,p[6],_,null):Qt(p[6]),null),(!s||_&32)&&u(e,"href",p[5]),(!s||_&3&&n!==(n="btn btn-"+p[0]+" btn-"+p[1]+" svelte-1qvbuil"))&&u(e,"class",n),(!s||_&7)&&$e(e,"disabled",p[2])},i(p){s||(P(f,p),s=!0)},o(p){L(f,p),s=!1},d(p){p&&$(e),c&&c.d(),f&&f.d(p),i=!1,o()}}}function Es(l){let e;return{c(){e=d("span"),u(e,"class","spinner svelte-1qvbuil")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Ms(l){let e;return{c(){e=d("span"),u(e,"class","spinner svelte-1qvbuil")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function ic(l){let e,t,n,s;const i=[oc,sc],o=[];function c(r,f){return r[5]?0:1}return e=c(l),t=o[e]=i[e](l),{c(){t.c(),n=je()},m(r,f){o[e].m(r,f),w(r,n,f),s=!0},p(r,[f]){let p=e;e=c(r),e===p?o[e].p(r,f):(ke(),L(o[p],1,1,()=>{o[p]=null}),we(),t=o[e],t?t.p(r,f):(t=o[e]=i[e](r),t.c()),P(t,1),t.m(n.parentNode,n))},i(r){s||(P(t),s=!0)},o(r){L(t),s=!1},d(r){r&&$(n),o[e].d(r)}}}function rc(l,e,t){let{$$slots:n={},$$scope:s}=e,{variant:i="default"}=e,{size:o="md"}=e,{disabled:c=!1}=e,{loading:r=!1}=e,{type:f="button"}=e,{href:p=null}=e;function _(h){bs.call(this,l,h)}function v(h){bs.call(this,l,h)}return l.$$set=h=>{"variant"in h&&t(0,i=h.variant),"size"in h&&t(1,o=h.size),"disabled"in h&&t(2,c=h.disabled),"loading"in h&&t(3,r=h.loading),"type"in h&&t(4,f=h.type),"href"in h&&t(5,p=h.href),"$$scope"in h&&t(6,s=h.$$scope)},[i,o,c,r,f,p,s,n,_,v]}class qe extends Ve{constructor(e){super(),Ye(this,e,rc,ic,Je,{variant:0,size:1,disabled:2,loading:3,type:4,href:5})}}function js(l){let e,t=l[1].user.email+"",n;return{c(){e=d("span"),n=q(t),u(e,"class","user-email svelte-1qs0uw9")},m(s,i){w(s,e,i),a(e,n)},p(s,i){i&2&&t!==(t=s[1].user.email+"")&&B(n,t)},d(s){s&&$(e)}}}function ac(l){let e;return{c(){e=q("Logout")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function cc(l){let e,t,n,s,i,o,c,r,f,p,_=l[1].user&&js(l);return f=new qe({props:{variant:"ghost",size:"sm",$$slots:{default:[ac]},$$scope:{ctx:l}}}),f.$on("click",l[2]),{c(){e=d("header"),t=d("h1"),n=d("span"),s=b(),i=q(l[0]),o=b(),c=d("div"),_&&_.c(),r=b(),oe(f.$$.fragment),u(n,"class","brand-dot svelte-1qs0uw9"),u(t,"class","svelte-1qs0uw9"),u(c,"class","header-actions svelte-1qs0uw9"),u(e,"class","header glass svelte-1qs0uw9")},m(v,h){w(v,e,h),a(e,t),a(t,n),a(t,s),a(t,i),a(e,o),a(e,c),_&&_.m(c,null),a(c,r),ne(f,c,null),p=!0},p(v,[h]){(!p||h&1)&&B(i,v[0]),v[1].user?_?_.p(v,h):(_=js(v),_.c(),_.m(c,r)):_&&(_.d(1),_=null);const m={};h&8&&(m.$$scope={dirty:h,ctx:v}),f.$set(m)},i(v){p||(P(f.$$.fragment,v),p=!0)},o(v){L(f.$$.fragment,v),p=!1},d(v){v&&$(e),_&&_.d(),se(f)}}}function fc(l,e,t){let n;We(l,ht,o=>t(1,n=o));let{title:s="Deploy Dashboard"}=e;function i(){ht.logout()}return l.$$set=o=>{"title"in o&&t(0,s=o.title)},[s,n,i]}class uc extends Ve{constructor(e){super(),Ye(this,e,fc,cc,Je,{title:0})}}function Ls(l,e,t){const n=l.slice();return n[6]=e[t],n}function Ns(l){let e,t=l[6].icon+"",n;return{c(){e=d("span"),n=q(t),u(e,"class","tab-icon svelte-1po08a6")},m(s,i){w(s,e,i),a(e,n)},p(s,i){i&2&&t!==(t=s[6].icon+"")&&B(n,t)},d(s){s&&$(e)}}}function Rs(l){let e,t,n=l[6].label+"",s,i,o,c,r=l[6].icon&&Ns(l);function f(){return l[4](l[6])}return{c(){e=d("button"),r&&r.c(),t=b(),s=q(n),i=b(),u(e,"class","tab svelte-1po08a6"),$e(e,"active",l[0]===l[6].id)},m(p,_){w(p,e,_),r&&r.m(e,null),a(e,t),a(e,s),a(e,i),o||(c=te(e,"click",f),o=!0)},p(p,_){l=p,l[6].icon?r?r.p(l,_):(r=Ns(l),r.c(),r.m(e,t)):r&&(r.d(1),r=null),_&2&&n!==(n=l[6].label+"")&&B(s,n),_&3&&$e(e,"active",l[0]===l[6].id)},d(p){p&&$(e),r&&r.d(),o=!1,c()}}}function pc(l){let e,t=_e(l[1]),n=[];for(let s=0;s<t.length;s+=1)n[s]=Rs(Ls(l,t,s));return{c(){e=d("div");for(let s=0;s<n.length;s+=1)n[s].c();u(e,"class","tabs svelte-1po08a6"),$e(e,"scrollable",l[2])},m(s,i){w(s,e,i);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null)},p(s,[i]){if(i&11){t=_e(s[1]);let o;for(o=0;o<t.length;o+=1){const c=Ls(s,t,o);n[o]?n[o].p(c,i):(n[o]=Rs(c),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=t.length}i&4&&$e(e,"scrollable",s[2])},i:ae,o:ae,d(s){s&&$(e),Ee(n,s)}}}function dc(l,e,t){let{tabs:n=[]}=e,{active:s=""}=e,{scrollable:i=!0}=e;const o=tn();function c(f){t(0,s=f),o("change",f)}const r=f=>c(f.id);return l.$$set=f=>{"tabs"in f&&t(1,n=f.tabs),"active"in f&&t(0,s=f.active),"scrollable"in f&&t(2,i=f.scrollable)},[s,n,i,c,r]}class _c extends Ve{constructor(e){super(),Ye(this,e,dc,pc,Je,{tabs:1,active:0,scrollable:2})}}function Os(l,e,t){const n=l.slice();return n[16]=e[t],n}function As(l,e,t){var i,o,c;const n=l.slice();n[19]=e[t];const s=n[19].ip||((c=(o=(i=n[19].networks)==null?void 0:i.v4)==null?void 0:o[0])==null?void 0:c.ip_address);return n[20]=s,n}function Fs(l,e,t){const n=l.slice();return n[23]=e[t],n}function zs(l){let e,t=l[23]+"",n,s;return{c(){e=d("option"),n=q(t),e.__value=s=l[23],Q(e,e.__value)},m(i,o){w(i,e,o),a(e,n)},p(i,o){o&8&&t!==(t=i[23]+"")&&B(n,t),o&8&&s!==(s=i[23])&&(e.__value=s,Q(e,e.__value))},d(i){i&&$(e)}}}function Bs(l){let e,t=(l[19].name||"unnamed")+"",n,s,i=l[20]+"",o,c,r;return{c(){e=d("option"),n=q(t),s=q(" ("),o=q(i),c=q(")"),e.__value=r=l[20],Q(e,e.__value)},m(f,p){w(f,e,p),a(e,n),a(e,s),a(e,o),a(e,c)},p(f,p){p&16&&t!==(t=(f[19].name||"unnamed")+"")&&B(n,t),p&16&&i!==(i=f[20]+"")&&B(o,i),p&16&&r!==(r=f[20])&&(e.__value=r,Q(e,e.__value))},d(f){f&&$(e)}}}function Us(l){let e,t=l[20]&&Bs(l);return{c(){t&&t.c(),e=je()},m(n,s){t&&t.m(n,s),w(n,e,s)},p(n,s){n[20]?t?t.p(n,s):(t=Bs(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(n){n&&$(e),t&&t.d(n)}}}function Is(l){let e,t,n,s,i,o,c,r=_e(l[5]),f=[];for(let p=0;p<r.length;p+=1)f[p]=Hs(Os(l,r,p));return{c(){e=d("div"),t=d("label"),t.textContent="Container:",n=b(),s=d("select"),i=d("option"),i.textContent="(All)";for(let p=0;p<f.length;p+=1)f[p].c();u(t,"class","svelte-1wvrz0m"),i.__value="",Q(i,i.__value),u(s,"class","svelte-1wvrz0m"),l[2].container===void 0&&Ue(()=>l[12].call(s)),u(e,"class","scope-field svelte-1wvrz0m")},m(p,_){w(p,e,_),a(e,t),a(e,n),a(e,s),a(s,i);for(let v=0;v<f.length;v+=1)f[v]&&f[v].m(s,null);De(s,l[2].container,!0),o||(c=[te(s,"change",l[12]),te(s,"change",l[6])],o=!0)},p(p,_){if(_&32){r=_e(p[5]);let v;for(v=0;v<r.length;v+=1){const h=Os(p,r,v);f[v]?f[v].p(h,_):(f[v]=Hs(h),f[v].c(),f[v].m(s,null))}for(;v<f.length;v+=1)f[v].d(1);f.length=r.length}_&12&&De(s,p[2].container)},d(p){p&&$(e),Ee(f,p),o=!1,Fe(c)}}}function Hs(l){let e,t=l[16].name+"",n,s;return{c(){e=d("option"),n=q(t),e.__value=s=l[16].name,Q(e,e.__value)},m(i,o){w(i,e,o),a(e,n)},p(i,o){o&32&&t!==(t=i[16].name+"")&&B(n,t),o&32&&s!==(s=i[16].name)&&(e.__value=s,Q(e,e.__value))},d(i){i&&$(e)}}}function Gs(l){let e,t,n,s,i;return{c(){e=d("label"),t=d("input"),n=q(`
      Tail`),u(t,"type","checkbox"),u(t,"class","svelte-1wvrz0m"),u(e,"class","tail-toggle svelte-1wvrz0m")},m(o,c){w(o,e,c),a(e,t),t.checked=l[2].tail,a(e,n),s||(i=[te(t,"change",l[14]),te(t,"change",l[6])],s=!0)},p(o,c){c&12&&(t.checked=o[2].tail)},d(o){o&&$(e),s=!1,Fe(i)}}}function vc(l){let e,t,n,s,i,o,c,r,f,p,_,v,h,m,g,y,C,k,S,M,D,T,E,j,R,O,z,F,H,W,I,J,A,G,N,U,Y,Z,ie,le,ee,ue=_e(l[3]),x=[];for(let pe=0;pe<ue.length;pe+=1)x[pe]=zs(Fs(l,ue,pe));let he=_e(l[4]),re=[];for(let pe=0;pe<he.length;pe+=1)re[pe]=Us(As(l,he,pe));let X=l[1]&&l[2].server&&Is(l),de=l[0]&&Gs(l);return{c(){e=d("div"),t=d("div"),n=d("div"),n.innerHTML='<span class="brand-dot svelte-1wvrz0m"></span> <span>cc</span>',s=b(),i=d("div"),o=d("label"),o.textContent="Project:",c=b(),r=d("select"),f=d("option"),f.textContent="All";for(let pe=0;pe<x.length;pe+=1)x[pe].c();p=b(),_=d("div"),v=d("label"),v.textContent="Env:",h=b(),m=d("select"),g=d("option"),g.textContent="All",y=d("option"),y.textContent="prod",C=d("option"),C.textContent="staging",k=d("option"),k.textContent="dev",S=b(),M=d("div"),D=d("label"),D.textContent="Server:",T=b(),E=d("select"),j=d("option"),j.textContent="(Fleet)";for(let pe=0;pe<re.length;pe+=1)re[pe].c();R=b(),X&&X.c(),O=b(),z=d("div"),F=d("label"),F.textContent="Last",H=b(),W=d("select"),I=d("option"),I.textContent="15m",J=d("option"),J.textContent="1h",A=d("option"),A.textContent="6h",G=d("option"),G.textContent="24h",N=d("option"),N.textContent="7d",U=d("option"),U.textContent="30d",Y=b(),Z=d("button"),Z.innerHTML='<svg viewBox="0 0 24 24" fill="none" class="svelte-1wvrz0m"><path d="M20 12a8 8 0 1 1-2.34-5.66" stroke="currentColor" stroke-width="2" stroke-linecap="round"></path><path d="M20 4v6h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg>',ie=b(),de&&de.c(),u(n,"class","scope-brand svelte-1wvrz0m"),u(o,"class","svelte-1wvrz0m"),f.__value="",Q(f,f.__value),u(r,"class","svelte-1wvrz0m"),l[2].project===void 0&&Ue(()=>l[9].call(r)),u(i,"class","scope-field svelte-1wvrz0m"),u(v,"class","svelte-1wvrz0m"),g.__value="",Q(g,g.__value),y.__value="prod",Q(y,y.__value),C.__value="staging",Q(C,C.__value),k.__value="dev",Q(k,k.__value),u(m,"class","svelte-1wvrz0m"),l[2].env===void 0&&Ue(()=>l[10].call(m)),u(_,"class","scope-field svelte-1wvrz0m"),u(D,"class","svelte-1wvrz0m"),j.__value="",Q(j,j.__value),u(E,"class","svelte-1wvrz0m"),l[2].server===void 0&&Ue(()=>l[11].call(E)),u(M,"class","scope-field svelte-1wvrz0m"),u(F,"class","svelte-1wvrz0m"),I.__value="15m",Q(I,I.__value),J.__value="1h",Q(J,J.__value),A.__value="6h",Q(A,A.__value),G.__value="24h",Q(G,G.__value),N.__value="7d",Q(N,N.__value),U.__value="30d",Q(U,U.__value),u(W,"class","svelte-1wvrz0m"),l[2].range===void 0&&Ue(()=>l[13].call(W)),u(z,"class","scope-field svelte-1wvrz0m"),u(Z,"class","iconbtn svelte-1wvrz0m"),u(Z,"title","Refresh"),u(t,"class","scope-bar-inner svelte-1wvrz0m"),u(e,"class","scope-bar glass svelte-1wvrz0m")},m(pe,be){w(pe,e,be),a(e,t),a(t,n),a(t,s),a(t,i),a(i,o),a(i,c),a(i,r),a(r,f);for(let fe=0;fe<x.length;fe+=1)x[fe]&&x[fe].m(r,null);De(r,l[2].project,!0),a(t,p),a(t,_),a(_,v),a(_,h),a(_,m),a(m,g),a(m,y),a(m,C),a(m,k),De(m,l[2].env,!0),a(t,S),a(t,M),a(M,D),a(M,T),a(M,E),a(E,j);for(let fe=0;fe<re.length;fe+=1)re[fe]&&re[fe].m(E,null);De(E,l[2].server,!0),a(t,R),X&&X.m(t,null),a(t,O),a(t,z),a(z,F),a(z,H),a(z,W),a(W,I),a(W,J),a(W,A),a(W,G),a(W,N),a(W,U),De(W,l[2].range,!0),a(t,Y),a(t,Z),a(e,ie),de&&de.m(e,null),le||(ee=[te(r,"change",l[9]),te(r,"change",l[6]),te(m,"change",l[10]),te(m,"change",l[6]),te(E,"change",l[11]),te(E,"change",l[7]),te(W,"change",l[13]),te(W,"change",l[6]),te(Z,"click",l[8])],le=!0)},p(pe,[be]){if(be&8){ue=_e(pe[3]);let fe;for(fe=0;fe<ue.length;fe+=1){const ye=Fs(pe,ue,fe);x[fe]?x[fe].p(ye,be):(x[fe]=zs(ye),x[fe].c(),x[fe].m(r,null))}for(;fe<x.length;fe+=1)x[fe].d(1);x.length=ue.length}if(be&12&&De(r,pe[2].project),be&12&&De(m,pe[2].env),be&16){he=_e(pe[4]);let fe;for(fe=0;fe<he.length;fe+=1){const ye=As(pe,he,fe);re[fe]?re[fe].p(ye,be):(re[fe]=Us(ye),re[fe].c(),re[fe].m(E,null))}for(;fe<re.length;fe+=1)re[fe].d(1);re.length=he.length}be&12&&De(E,pe[2].server),pe[1]&&pe[2].server?X?X.p(pe,be):(X=Is(pe),X.c(),X.m(t,O)):X&&(X.d(1),X=null),be&12&&De(W,pe[2].range),pe[0]?de?de.p(pe,be):(de=Gs(pe),de.c(),de.m(e,null)):de&&(de.d(1),de=null)},i:ae,o:ae,d(pe){pe&&$(e),Ee(x,pe),Ee(re,pe),X&&X.d(),de&&de.d(),le=!1,Fe(ee)}}}function mc(l,e,t){let n,s,i,o;We(l,qt,S=>t(2,n=S)),We(l,aa,S=>t(3,s=S)),We(l,bl,S=>t(4,i=S)),We(l,Ha,S=>t(5,o=S));let{showTail:c=!1}=e,{showContainer:r=!1}=e;const f=tn();function p(){f("change",n)}function _(){ms(qt,n.container="",n),p()}function v(){f("refresh")}function h(){n.project=Ge(this),qt.set(n)}function m(){n.env=Ge(this),qt.set(n)}function g(){n.server=Ge(this),qt.set(n)}function y(){n.container=Ge(this),qt.set(n)}function C(){n.range=Ge(this),qt.set(n)}function k(){n.tail=this.checked,qt.set(n)}return l.$$set=S=>{"showTail"in S&&t(0,c=S.showTail),"showContainer"in S&&t(1,r=S.showContainer)},l.$$.update=()=>{l.$$.dirty&4&&(n.server?Xn.fetch({server:n.server}):(Xn.clear(),ms(qt,n.container="",n)))},[c,r,n,s,i,o,p,_,v,h,m,g,y,C,k]}class hc extends Ve{constructor(e){super(),Ye(this,e,mc,vc,Je,{showTail:0,showContainer:1})}}const gc=l=>({}),Ws=l=>({}),bc=l=>({}),Js=l=>({});function Ys(l){let e,t,n,s=l[0]&&Vs(l);const i=l[5].header,o=Yt(i,l,l[4],Js);return{c(){e=d("div"),s&&s.c(),t=b(),o&&o.c(),u(e,"class","card-header svelte-1qbuf8h")},m(c,r){w(c,e,r),s&&s.m(e,null),a(e,t),o&&o.m(e,null),n=!0},p(c,r){c[0]?s?s.p(c,r):(s=Vs(c),s.c(),s.m(e,t)):s&&(s.d(1),s=null),o&&o.p&&(!n||r&16)&&Kt(o,i,c,c[4],n?Vt(i,c[4],r,bc):Qt(c[4]),Js)},i(c){n||(P(o,c),n=!0)},o(c){L(o,c),n=!1},d(c){c&&$(e),s&&s.d(),o&&o.d(c)}}}function Vs(l){let e,t;return{c(){e=d("span"),t=q(l[0]),u(e,"class","card-title svelte-1qbuf8h")},m(n,s){w(n,e,s),a(e,t)},p(n,s){s&1&&B(t,n[0])},d(n){n&&$(e)}}}function Ks(l){let e,t;const n=l[5].footer,s=Yt(n,l,l[4],Ws);return{c(){e=d("div"),s&&s.c(),u(e,"class","card-footer svelte-1qbuf8h")},m(i,o){w(i,e,o),s&&s.m(e,null),t=!0},p(i,o){s&&s.p&&(!t||o&16)&&Kt(s,n,i,i[4],t?Vt(n,i[4],o,gc):Qt(i[4]),Ws)},i(i){t||(P(s,i),t=!0)},o(i){L(s,i),t=!1},d(i){i&&$(e),s&&s.d(i)}}}function $c(l){let e,t,n,s,i,o=(l[0]||l[3].header)&&Ys(l);const c=l[5].default,r=Yt(c,l,l[4],null);let f=l[3].footer&&Ks(l);return{c(){e=d("div"),o&&o.c(),t=b(),n=d("div"),r&&r.c(),s=b(),f&&f.c(),u(n,"class","card-body svelte-1qbuf8h"),u(e,"class","card svelte-1qbuf8h"),$e(e,"glass",l[1]),$e(e,"no-padding",!l[2])},m(p,_){w(p,e,_),o&&o.m(e,null),a(e,t),a(e,n),r&&r.m(n,null),a(e,s),f&&f.m(e,null),i=!0},p(p,[_]){p[0]||p[3].header?o?(o.p(p,_),_&9&&P(o,1)):(o=Ys(p),o.c(),P(o,1),o.m(e,t)):o&&(ke(),L(o,1,1,()=>{o=null}),we()),r&&r.p&&(!i||_&16)&&Kt(r,c,p,p[4],i?Vt(c,p[4],_,null):Qt(p[4]),null),p[3].footer?f?(f.p(p,_),_&8&&P(f,1)):(f=Ks(p),f.c(),P(f,1),f.m(e,null)):f&&(ke(),L(f,1,1,()=>{f=null}),we()),(!i||_&2)&&$e(e,"glass",p[1]),(!i||_&4)&&$e(e,"no-padding",!p[2])},i(p){i||(P(o),P(r,p),P(f),i=!0)},o(p){L(o),L(r,p),L(f),i=!1},d(p){p&&$(e),o&&o.d(),r&&r.d(p),f&&f.d()}}}function kc(l,e,t){let{$$slots:n={},$$scope:s}=e;const i=Jr(n);let{title:o=""}=e,{glass:c=!1}=e,{padding:r=!0}=e;return l.$$set=f=>{"title"in f&&t(0,o=f.title),"glass"in f&&t(1,c=f.glass),"padding"in f&&t(2,r=f.padding),"$$scope"in f&&t(4,s=f.$$scope)},[o,c,r,i,s,n]}class Ne extends Ve{constructor(e){super(),Ye(this,e,kc,$c,Je,{title:0,glass:1,padding:2})}}const wc=l=>({}),Qs=l=>({}),yc=l=>({}),Xs=l=>({});function Zs(l){let e,t,n,s,i,o,c,r,f,p,_=(l[1]||l[6].header)&&xs(l);const v=l[9].default,h=Yt(v,l,l[8],null);let m=l[6].footer&&to(l);return{c(){e=d("div"),t=d("div"),_&&_.c(),n=b(),s=d("div"),h&&h.c(),i=b(),m&&m.c(),u(s,"class","modal-body svelte-1yjbw5w"),u(t,"class","modal svelte-1yjbw5w"),Ae(t,"max-width",l[2]),u(e,"class","modal-overlay svelte-1yjbw5w"),u(e,"role","dialog"),u(e,"aria-modal","true")},m(g,y){w(g,e,y),a(e,t),_&&_.m(t,null),a(t,n),a(t,s),h&&h.m(s,null),a(t,i),m&&m.m(t,null),r=!0,f||(p=te(e,"click",l[4]),f=!0)},p(g,y){g[1]||g[6].header?_?(_.p(g,y),y&66&&P(_,1)):(_=xs(g),_.c(),P(_,1),_.m(t,n)):_&&(ke(),L(_,1,1,()=>{_=null}),we()),h&&h.p&&(!r||y&256)&&Kt(h,v,g,g[8],r?Vt(v,g[8],y,null):Qt(g[8]),null),g[6].footer?m?(m.p(g,y),y&64&&P(m,1)):(m=to(g),m.c(),P(m,1),m.m(t,null)):m&&(ke(),L(m,1,1,()=>{m=null}),we()),(!r||y&4)&&Ae(t,"max-width",g[2])},i(g){r||(P(_),P(h,g),P(m),g&&Ue(()=>{r&&(o||(o=Ll(t,Ts,{duration:200,start:.95},!0)),o.run(1))}),g&&Ue(()=>{r&&(c||(c=Ll(e,Ss,{duration:150},!0)),c.run(1))}),r=!0)},o(g){L(_),L(h,g),L(m),g&&(o||(o=Ll(t,Ts,{duration:200,start:.95},!1)),o.run(0)),g&&(c||(c=Ll(e,Ss,{duration:150},!1)),c.run(0)),r=!1},d(g){g&&$(e),_&&_.d(),h&&h.d(g),m&&m.d(),g&&o&&o.end(),g&&c&&c.end(),f=!1,p()}}}function xs(l){let e,t,n,s,i,o,c,r=l[1]&&eo(l);const f=l[9].header,p=Yt(f,l,l[8],Xs);return{c(){e=d("div"),r&&r.c(),t=b(),p&&p.c(),n=b(),s=d("button"),s.innerHTML='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-1yjbw5w"><path d="M18 6L6 18M6 6l12 12"></path></svg>',u(s,"class","modal-close svelte-1yjbw5w"),u(s,"aria-label","Close"),u(e,"class","modal-header svelte-1yjbw5w")},m(_,v){w(_,e,v),r&&r.m(e,null),a(e,t),p&&p.m(e,null),a(e,n),a(e,s),i=!0,o||(c=te(s,"click",l[3]),o=!0)},p(_,v){_[1]?r?r.p(_,v):(r=eo(_),r.c(),r.m(e,t)):r&&(r.d(1),r=null),p&&p.p&&(!i||v&256)&&Kt(p,f,_,_[8],i?Vt(f,_[8],v,yc):Qt(_[8]),Xs)},i(_){i||(P(p,_),i=!0)},o(_){L(p,_),i=!1},d(_){_&&$(e),r&&r.d(),p&&p.d(_),o=!1,c()}}}function eo(l){let e,t;return{c(){e=d("h3"),t=q(l[1]),u(e,"class","svelte-1yjbw5w")},m(n,s){w(n,e,s),a(e,t)},p(n,s){s&2&&B(t,n[1])},d(n){n&&$(e)}}}function to(l){let e,t;const n=l[9].footer,s=Yt(n,l,l[8],Qs);return{c(){e=d("div"),s&&s.c(),u(e,"class","modal-footer svelte-1yjbw5w")},m(i,o){w(i,e,o),s&&s.m(e,null),t=!0},p(i,o){s&&s.p&&(!t||o&256)&&Kt(s,n,i,i[8],t?Vt(n,i[8],o,wc):Qt(i[8]),Qs)},i(i){t||(P(s,i),t=!0)},o(i){L(s,i),t=!1},d(i){i&&$(e),s&&s.d(i)}}}function Cc(l){let e,t,n,s,i=l[0]&&Zs(l);return{c(){i&&i.c(),e=je()},m(o,c){i&&i.m(o,c),w(o,e,c),t=!0,n||(s=te(window,"keydown",l[5]),n=!0)},p(o,[c]){o[0]?i?(i.p(o,c),c&1&&P(i,1)):(i=Zs(o),i.c(),P(i,1),i.m(e.parentNode,e)):i&&(ke(),L(i,1,1,()=>{i=null}),we())},i(o){t||(P(i),t=!0)},o(o){L(i),t=!1},d(o){o&&$(e),i&&i.d(o),n=!1,s()}}}function Sc(l,e,t){let{$$slots:n={},$$scope:s}=e;const i=Jr(n);let{open:o=!1}=e,{title:c=""}=e,{width:r="500px"}=e,{closeOnOverlay:f=!0}=e;const p=tn();function _(){p("close")}function v(m){f&&m.target===m.currentTarget&&_()}function h(m){m.key==="Escape"&&_()}return l.$$set=m=>{"open"in m&&t(0,o=m.open),"title"in m&&t(1,c=m.title),"width"in m&&t(2,r=m.width),"closeOnOverlay"in m&&t(7,f=m.closeOnOverlay),"$$scope"in m&&t(8,s=m.$$scope)},[o,c,r,_,v,h,i,f,s,n]}class Ln extends Ve{constructor(e){super(),Ye(this,e,Sc,Cc,Je,{open:0,title:1,width:2,closeOnOverlay:7})}}function qc(l){let e,t,n;const s=l[2].default,i=Yt(s,l,l[1],null);return{c(){e=d("span"),i&&i.c(),u(e,"class",t="badge badge-"+l[0]+" svelte-1xueqee")},m(o,c){w(o,e,c),i&&i.m(e,null),n=!0},p(o,[c]){i&&i.p&&(!n||c&2)&&Kt(i,s,o,o[1],n?Vt(s,o[1],c,null):Qt(o[1]),null),(!n||c&1&&t!==(t="badge badge-"+o[0]+" svelte-1xueqee"))&&u(e,"class",t)},i(o){n||(P(i,o),n=!0)},o(o){L(i,o),n=!1},d(o){o&&$(e),i&&i.d(o)}}}function Tc(l,e,t){let{$$slots:n={},$$scope:s}=e,{variant:i="info"}=e;return l.$$set=o=>{"variant"in o&&t(0,i=o.variant),"$$scope"in o&&t(1,s=o.$$scope)},[i,s,n]}class Ie extends Ve{constructor(e){super(),Ye(this,e,Tc,qc,Je,{variant:0})}}function lo(l,e,t){const n=l.slice();return n[15]=e[t],n}function no(l){let e,t;return e=new Ie({props:{variant:"info",$$slots:{default:[Dc]},$$scope:{ctx:l}}}),{c(){oe(e.$$.fragment)},m(n,s){ne(e,n,s),t=!0},p(n,s){const i={};s&262145&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){se(e,n)}}}function Dc(l){let e=l[0].project+"",t;return{c(){t=q(e)},m(n,s){w(n,t,s)},p(n,s){s&1&&e!==(e=n[0].project+"")&&B(t,e)},d(n){n&&$(t)}}}function so(l){let e,t;return e=new Ie({props:{variant:l[0].env==="prod"?"danger":"warning",$$slots:{default:[Pc]},$$scope:{ctx:l}}}),{c(){oe(e.$$.fragment)},m(n,s){ne(e,n,s),t=!0},p(n,s){const i={};s&1&&(i.variant=n[0].env==="prod"?"danger":"warning"),s&262145&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){se(e,n)}}}function Pc(l){let e=l[0].env+"",t;return{c(){t=q(e)},m(n,s){w(n,t,s)},p(n,s){s&1&&e!==(e=n[0].env+"")&&B(t,e)},d(n){n&&$(t)}}}function oo(l){let e,t,n,s,i=l[4].length+"",o;return{c(){e=d("div"),t=d("span"),t.textContent="Containers",n=b(),s=d("span"),o=q(i),u(t,"class","label svelte-1jkc1of"),u(e,"class","detail svelte-1jkc1of")},m(c,r){w(c,e,r),a(e,t),a(e,n),a(e,s),a(s,o)},p(c,r){r&16&&i!==(i=c[4].length+"")&&B(o,i)},d(c){c&&$(e)}}}function io(l){let e,t,n,s,i,o;return{c(){e=d("div"),t=d("span"),t.textContent="Agent",n=b(),s=d("span"),i=q("v"),o=q(l[1]),u(t,"class","label svelte-1jkc1of"),u(s,"class","svelte-1jkc1of"),$e(s,"outdated",l[3]),u(e,"class","detail svelte-1jkc1of")},m(c,r){w(c,e,r),a(e,t),a(e,n),a(e,s),a(s,i),a(s,o)},p(c,r){r&2&&B(o,c[1]),r&8&&$e(s,"outdated",c[3])},d(c){c&&$(e)}}}function ro(l){let e,t,n=_e(l[4].slice(0,5)),s=[];for(let o=0;o<n.length;o+=1)s[o]=ao(lo(l,n,o));let i=l[4].length>5&&co(l);return{c(){e=d("div");for(let o=0;o<s.length;o+=1)s[o].c();t=b(),i&&i.c(),u(e,"class","containers svelte-1jkc1of")},m(o,c){w(o,e,c);for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(e,null);a(e,t),i&&i.m(e,null)},p(o,c){if(c&16){n=_e(o[4].slice(0,5));let r;for(r=0;r<n.length;r+=1){const f=lo(o,n,r);s[r]?s[r].p(f,c):(s[r]=ao(f),s[r].c(),s[r].m(e,t))}for(;r<s.length;r+=1)s[r].d(1);s.length=n.length}o[4].length>5?i?i.p(o,c):(i=co(o),i.c(),i.m(e,null)):i&&(i.d(1),i=null)},d(o){o&&$(e),Ee(s,o),i&&i.d()}}}function ao(l){let e,t=(l[15].name||l[15])+"",n;return{c(){e=d("span"),n=q(t),u(e,"class","container-tag svelte-1jkc1of")},m(s,i){w(s,e,i),a(e,n)},p(s,i){i&16&&t!==(t=(s[15].name||s[15])+"")&&B(n,t)},d(s){s&&$(e)}}}function co(l){let e,t,n=l[4].length-5+"",s;return{c(){e=d("span"),t=q("+"),s=q(n),u(e,"class","container-tag more svelte-1jkc1of")},m(i,o){w(i,e,o),a(e,t),a(e,s)},p(i,o){o&16&&n!==(n=i[4].length-5+"")&&B(s,n)},d(i){i&&$(e)}}}function Ec(l){let e;return{c(){e=q("Terminal")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Mc(l){let e;return{c(){e=q("Details")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function jc(l){let e,t;return e=new qe({props:{variant:"warning",size:"sm",$$slots:{default:[Nc]},$$scope:{ctx:l}}}),e.$on("click",l[12]),{c(){oe(e.$$.fragment)},m(n,s){ne(e,n,s),t=!0},p(n,s){const i={};s&262144&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){se(e,n)}}}function Lc(l){let e,t;return e=new qe({props:{variant:"success",size:"sm",$$slots:{default:[Rc]},$$scope:{ctx:l}}}),e.$on("click",l[11]),{c(){oe(e.$$.fragment)},m(n,s){ne(e,n,s),t=!0},p(n,s){const i={};s&262144&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){se(e,n)}}}function Nc(l){let e;return{c(){e=q("Stop")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Rc(l){let e;return{c(){e=q("Start")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Oc(l){let e;return{c(){e=q("Destroy")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Ac(l){var At;let e,t,n,s,i,o,c,r=(l[0].name||"Unnamed")+"",f,p,_,v,h,m,g,y,C,k,S,M,D,T,E,j,R=(l[0].size_slug||l[0].size||"N/A")+"",O,z,F,H,W,I,J=(((At=l[0].region)==null?void 0:At.slug)||l[0].region||"N/A")+"",A,G,N,U,Y,Z,ie,le,ee,ue,x,he,re,X,de,pe=l[0].project&&no(l),be=l[0].env&&so(l),fe=l[4].length>0&&oo(l),ye=l[1]&&io(l),Oe=l[4].length>0&&ro(l);ie=new qe({props:{variant:"ghost",size:"sm",$$slots:{default:[Ec]},$$scope:{ctx:l}}}),ie.$on("click",l[9]),ee=new qe({props:{variant:"ghost",size:"sm",$$slots:{default:[Mc]},$$scope:{ctx:l}}}),ee.$on("click",l[10]);const pt=[Lc,jc],et=[];function Ot(Se,Le){return Se[5]?1:0}return x=Ot(l),he=et[x]=pt[x](l),X=new qe({props:{variant:"danger",size:"sm",$$slots:{default:[Oc]},$$scope:{ctx:l}}}),X.$on("click",l[13]),{c(){e=d("div"),t=d("div"),n=d("div"),s=d("span"),o=b(),c=d("span"),f=q(r),p=b(),_=d("div"),pe&&pe.c(),v=b(),be&&be.c(),h=b(),m=d("div"),g=d("div"),y=d("span"),y.textContent="IP",C=b(),k=d("code"),S=q(l[6]),M=b(),D=d("div"),T=d("span"),T.textContent="Size",E=b(),j=d("span"),O=q(R),z=b(),F=d("div"),H=d("span"),H.textContent="Region",W=b(),I=d("span"),A=q(J),G=b(),fe&&fe.c(),N=b(),ye&&ye.c(),U=b(),Oe&&Oe.c(),Y=b(),Z=d("div"),oe(ie.$$.fragment),le=b(),oe(ee.$$.fragment),ue=b(),he.c(),re=b(),oe(X.$$.fragment),u(s,"class",i="status-dot "+l[7](l[2])+" svelte-1jkc1of"),u(n,"class","server-name svelte-1jkc1of"),u(_,"class","server-badges svelte-1jkc1of"),u(t,"class","server-header svelte-1jkc1of"),u(y,"class","label svelte-1jkc1of"),u(k,"class","server-ip svelte-1jkc1of"),u(g,"class","detail svelte-1jkc1of"),u(T,"class","label svelte-1jkc1of"),u(D,"class","detail svelte-1jkc1of"),u(H,"class","label svelte-1jkc1of"),u(F,"class","detail svelte-1jkc1of"),u(m,"class","server-details svelte-1jkc1of"),u(Z,"class","server-actions svelte-1jkc1of"),u(e,"class","server-item svelte-1jkc1of")},m(Se,Le){w(Se,e,Le),a(e,t),a(t,n),a(n,s),a(n,o),a(n,c),a(c,f),a(t,p),a(t,_),pe&&pe.m(_,null),a(_,v),be&&be.m(_,null),a(e,h),a(e,m),a(m,g),a(g,y),a(g,C),a(g,k),a(k,S),a(m,M),a(m,D),a(D,T),a(D,E),a(D,j),a(j,O),a(m,z),a(m,F),a(F,H),a(F,W),a(F,I),a(I,A),a(m,G),fe&&fe.m(m,null),a(m,N),ye&&ye.m(m,null),a(e,U),Oe&&Oe.m(e,null),a(e,Y),a(e,Z),ne(ie,Z,null),a(Z,le),ne(ee,Z,null),a(Z,ue),et[x].m(Z,null),a(Z,re),ne(X,Z,null),de=!0},p(Se,[Le]){var Ft;(!de||Le&4&&i!==(i="status-dot "+Se[7](Se[2])+" svelte-1jkc1of"))&&u(s,"class",i),(!de||Le&1)&&r!==(r=(Se[0].name||"Unnamed")+"")&&B(f,r),Se[0].project?pe?(pe.p(Se,Le),Le&1&&P(pe,1)):(pe=no(Se),pe.c(),P(pe,1),pe.m(_,v)):pe&&(ke(),L(pe,1,1,()=>{pe=null}),we()),Se[0].env?be?(be.p(Se,Le),Le&1&&P(be,1)):(be=so(Se),be.c(),P(be,1),be.m(_,null)):be&&(ke(),L(be,1,1,()=>{be=null}),we()),(!de||Le&64)&&B(S,Se[6]),(!de||Le&1)&&R!==(R=(Se[0].size_slug||Se[0].size||"N/A")+"")&&B(O,R),(!de||Le&1)&&J!==(J=(((Ft=Se[0].region)==null?void 0:Ft.slug)||Se[0].region||"N/A")+"")&&B(A,J),Se[4].length>0?fe?fe.p(Se,Le):(fe=oo(Se),fe.c(),fe.m(m,N)):fe&&(fe.d(1),fe=null),Se[1]?ye?ye.p(Se,Le):(ye=io(Se),ye.c(),ye.m(m,null)):ye&&(ye.d(1),ye=null),Se[4].length>0?Oe?Oe.p(Se,Le):(Oe=ro(Se),Oe.c(),Oe.m(e,Y)):Oe&&(Oe.d(1),Oe=null);const Tt={};Le&262144&&(Tt.$$scope={dirty:Le,ctx:Se}),ie.$set(Tt);const dl={};Le&262144&&(dl.$$scope={dirty:Le,ctx:Se}),ee.$set(dl);let Ke=x;x=Ot(Se),x===Ke?et[x].p(Se,Le):(ke(),L(et[Ke],1,1,()=>{et[Ke]=null}),we(),he=et[x],he?he.p(Se,Le):(he=et[x]=pt[x](Se),he.c()),P(he,1),he.m(Z,re));const _l={};Le&262144&&(_l.$$scope={dirty:Le,ctx:Se}),X.$set(_l)},i(Se){de||(P(pe),P(be),P(ie.$$.fragment,Se),P(ee.$$.fragment,Se),P(he),P(X.$$.fragment,Se),de=!0)},o(Se){L(pe),L(be),L(ie.$$.fragment,Se),L(ee.$$.fragment,Se),L(he),L(X.$$.fragment,Se),de=!1},d(Se){Se&&$(e),pe&&pe.d(),be&&be.d(),fe&&fe.d(),ye&&ye.d(),Oe&&Oe.d(),se(ie),se(ee),et[x].d(),se(X)}}}function Fc(l,e,t){let n,s,i,o,c,r,{server:f}=e;const p=tn();function _(k){switch(k){case"active":case"online":return"green";case"new":case"starting":return"blue";case"off":case"stopped":return"yellow";default:return"red"}}function v(k){p(k,{server:f})}const h=()=>v("ssh"),m=()=>v("details"),g=()=>v("start"),y=()=>v("stop"),C=()=>v("destroy");return l.$$set=k=>{"server"in k&&t(0,f=k.server)},l.$$.update=()=>{var k,S,M;l.$$.dirty&1&&t(6,n=f.ip||((M=(S=(k=f.networks)==null?void 0:k.v4)==null?void 0:S[0])==null?void 0:M.ip_address)||"N/A"),l.$$.dirty&1&&t(2,s=f.status||"unknown"),l.$$.dirty&4&&t(5,i=s==="active"||s==="online"),l.$$.dirty&1&&t(4,o=f.containers||[]),l.$$.dirty&1&&t(1,c=f.agent_version),l.$$.dirty&2&&t(3,r=c&&c!==Ga)},[f,c,s,r,o,i,n,_,v,h,m,g,y,C]}class zc extends Ve{constructor(e){super(),Ye(this,e,Fc,Ac,Je,{server:0})}}function fo(l,e,t){const n=l.slice();return n[22]=e[t],n}function uo(l,e,t){const n=l.slice();return n[25]=e[t],n}function po(l,e,t){const n=l.slice();return n[28]=e[t],n}function Bc(l){let e,t;return{c(){e=d("span"),e.textContent="+",t=q(`
      Provision`),u(e,"class","plus-icon svelte-156md29")},m(n,s){w(n,e,s),w(n,t,s)},p:ae,d(n){n&&($(e),$(t))}}}function Uc(l){let e=[],t=new Map,n,s,i=_e(l[3]);const o=c=>c[28].id;for(let c=0;c<i.length;c+=1){let r=po(l,i,c),f=o(r);t.set(f,e[c]=_o(f,r))}return{c(){for(let c=0;c<e.length;c+=1)e[c].c();n=je()},m(c,r){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(c,r);w(c,n,r),s=!0},p(c,r){r[0]&136&&(i=_e(c[3]),ke(),e=la(e,r,o,1,c,i,t,n.parentNode,ta,_o,n,po),we())},i(c){if(!s){for(let r=0;r<i.length;r+=1)P(e[r]);s=!0}},o(c){for(let r=0;r<e.length;r+=1)L(e[r]);s=!1},d(c){c&&$(n);for(let r=0;r<e.length;r+=1)e[r].d(c)}}}function Ic(l){let e;return{c(){e=d("div"),e.innerHTML="<p>No servers found. Provision one to get started.</p>",u(e,"class","empty-state svelte-156md29")},m(t,n){w(t,e,n)},p:ae,i:ae,o:ae,d(t){t&&$(e)}}}function Hc(l){let e;return{c(){e=d("div"),e.innerHTML="<p>Loading...</p>",u(e,"class","empty-state svelte-156md29")},m(t,n){w(t,e,n)},p:ae,i:ae,o:ae,d(t){t&&$(e)}}}function _o(l,e){let t,n,s;return n=new zc({props:{server:e[28]}}),n.$on("start",e[7]),n.$on("stop",e[7]),n.$on("destroy",e[7]),n.$on("ssh",e[7]),n.$on("details",e[7]),{key:l,first:null,c(){t=je(),oe(n.$$.fragment),this.first=t},m(i,o){w(i,t,o),ne(n,i,o),s=!0},p(i,o){e=i;const c={};o[0]&8&&(c.server=e[28]),n.$set(c)},i(i){s||(P(n.$$.fragment,i),s=!0)},o(i){L(n.$$.fragment,i),s=!1},d(i){i&&$(t),se(n,i)}}}function Gc(l){let e,t,n,s;const i=[Hc,Ic,Uc],o=[];function c(r,f){return r[0]?0:r[3].length===0?1:2}return t=c(l),n=o[t]=i[t](l),{c(){e=d("div"),n.c(),u(e,"class","server-list svelte-156md29")},m(r,f){w(r,e,f),o[t].m(e,null),s=!0},p(r,f){let p=t;t=c(r),t===p?o[t].p(r,f):(ke(),L(o[p],1,1,()=>{o[p]=null}),we(),n=o[t],n?n.p(r,f):(n=o[t]=i[t](r),n.c()),P(n,1),n.m(e,null))},i(r){s||(P(n),s=!0)},o(r){L(n),s=!1},d(r){r&&$(e),o[t].d()}}}function Wc(l){let e;return{c(){e=q("↻ Refresh")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Jc(l){let e,t;return e=new qe({props:{slot:"header",variant:"ghost",size:"sm",$$slots:{default:[Wc]},$$scope:{ctx:l}}}),e.$on("click",l[12]),{c(){oe(e.$$.fragment)},m(n,s){ne(e,n,s),t=!0},p(n,s){const i={};s[1]&1&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){se(e,n)}}}function vo(l){let e,t=l[25].label+"",n;return{c(){e=d("option"),n=q(t),e.__value=l[25].value,Q(e,e.__value)},m(s,i){w(s,e,i),a(e,n)},p:ae,d(s){s&&$(e)}}}function mo(l){let e,t=l[22].label+"",n;return{c(){e=d("option"),n=q(t),e.__value=l[22].value,Q(e,e.__value)},m(s,i){w(s,e,i),a(e,n)},p:ae,d(s){s&&$(e)}}}function Yc(l){let e,t,n,s,i,o,c,r,f,p,_,v,h,m,g,y,C,k,S,M,D,T,E,j,R,O,z,F,H,W,I,J,A,G,N,U,Y,Z,ie=_e(l[4]),le=[];for(let x=0;x<ie.length;x+=1)le[x]=vo(uo(l,ie,x));let ee=_e(l[5]),ue=[];for(let x=0;x<ee.length;x+=1)ue[x]=mo(fo(l,ee,x));return{c(){e=d("form"),t=d("div"),n=d("div"),s=d("label"),s.textContent="Name *",i=b(),o=d("input"),c=b(),r=d("div"),f=d("div"),p=d("label"),p.textContent="Project",_=b(),v=d("input"),h=b(),m=d("div"),g=d("label"),g.textContent="Environment",y=b(),C=d("select"),k=d("option"),k.textContent="Production",S=d("option"),S.textContent="Staging",M=d("option"),M.textContent="Development",D=b(),T=d("div"),E=d("div"),j=d("label"),j.textContent="Region",R=b(),O=d("select");for(let x=0;x<le.length;x+=1)le[x].c();z=b(),F=d("div"),H=d("label"),H.textContent="Count",W=b(),I=d("input"),J=b(),A=d("div"),G=d("label"),G.textContent="Size",N=b(),U=d("select");for(let x=0;x<ue.length;x+=1)ue[x].c();u(s,"for","prov-name"),u(s,"class","svelte-156md29"),u(o,"id","prov-name"),u(o,"type","text"),u(o,"placeholder","web-server-01"),o.required=!0,u(o,"class","svelte-156md29"),u(n,"class","form-group svelte-156md29"),u(t,"class","form-row svelte-156md29"),u(p,"for","prov-project"),u(p,"class","svelte-156md29"),u(v,"id","prov-project"),u(v,"type","text"),u(v,"placeholder","myapp"),u(v,"class","svelte-156md29"),u(f,"class","form-group svelte-156md29"),u(g,"for","prov-env"),u(g,"class","svelte-156md29"),k.__value="prod",Q(k,k.__value),S.__value="staging",Q(S,S.__value),M.__value="dev",Q(M,M.__value),u(C,"id","prov-env"),u(C,"class","svelte-156md29"),l[2].env===void 0&&Ue(()=>l[16].call(C)),u(m,"class","form-group svelte-156md29"),u(r,"class","form-row two-col svelte-156md29"),u(j,"for","prov-region"),u(j,"class","svelte-156md29"),u(O,"id","prov-region"),u(O,"class","svelte-156md29"),l[2].region===void 0&&Ue(()=>l[17].call(O)),u(E,"class","form-group svelte-156md29"),u(H,"for","prov-count"),u(H,"class","svelte-156md29"),u(I,"id","prov-count"),u(I,"type","number"),u(I,"min","1"),u(I,"max","10"),u(I,"class","svelte-156md29"),u(F,"class","form-group svelte-156md29"),u(T,"class","form-row two-col svelte-156md29"),u(G,"for","prov-size"),u(G,"class","svelte-156md29"),u(U,"id","prov-size"),u(U,"class","svelte-156md29"),l[2].size===void 0&&Ue(()=>l[19].call(U)),u(A,"class","form-group svelte-156md29")},m(x,he){w(x,e,he),a(e,t),a(t,n),a(n,s),a(n,i),a(n,o),Q(o,l[2].name),a(e,c),a(e,r),a(r,f),a(f,p),a(f,_),a(f,v),Q(v,l[2].project),a(r,h),a(r,m),a(m,g),a(m,y),a(m,C),a(C,k),a(C,S),a(C,M),De(C,l[2].env,!0),a(e,D),a(e,T),a(T,E),a(E,j),a(E,R),a(E,O);for(let re=0;re<le.length;re+=1)le[re]&&le[re].m(O,null);De(O,l[2].region,!0),a(T,z),a(T,F),a(F,H),a(F,W),a(F,I),Q(I,l[2].count),a(e,J),a(e,A),a(A,G),a(A,N),a(A,U);for(let re=0;re<ue.length;re+=1)ue[re]&&ue[re].m(U,null);De(U,l[2].size,!0),Y||(Z=[te(o,"input",l[14]),te(v,"input",l[15]),te(C,"change",l[16]),te(O,"change",l[17]),te(I,"input",l[18]),te(U,"change",l[19]),te(e,"submit",Xr(l[6]))],Y=!0)},p(x,he){if(he[0]&4&&o.value!==x[2].name&&Q(o,x[2].name),he[0]&4&&v.value!==x[2].project&&Q(v,x[2].project),he[0]&4&&De(C,x[2].env),he[0]&16){ie=_e(x[4]);let re;for(re=0;re<ie.length;re+=1){const X=uo(x,ie,re);le[re]?le[re].p(X,he):(le[re]=vo(X),le[re].c(),le[re].m(O,null))}for(;re<le.length;re+=1)le[re].d(1);le.length=ie.length}if(he[0]&4&&De(O,x[2].region),he[0]&4&&Nt(I.value)!==x[2].count&&Q(I,x[2].count),he[0]&32){ee=_e(x[5]);let re;for(re=0;re<ee.length;re+=1){const X=fo(x,ee,re);ue[re]?ue[re].p(X,he):(ue[re]=mo(X),ue[re].c(),ue[re].m(U,null))}for(;re<ue.length;re+=1)ue[re].d(1);ue.length=ee.length}he[0]&4&&De(U,x[2].size)},d(x){x&&$(e),Ee(le,x),Ee(ue,x),Y=!1,Fe(Z)}}}function Vc(l){let e;return{c(){e=q("Cancel")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Kc(l){let e;return{c(){e=q("🚀 Provision")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Qc(l){let e,t,n,s,i;return t=new qe({props:{variant:"ghost",$$slots:{default:[Vc]},$$scope:{ctx:l}}}),t.$on("click",l[13]),s=new qe({props:{variant:"primary",$$slots:{default:[Kc]},$$scope:{ctx:l}}}),s.$on("click",l[6]),{c(){e=d("div"),oe(t.$$.fragment),n=b(),oe(s.$$.fragment),u(e,"slot","footer")},m(o,c){w(o,e,c),ne(t,e,null),a(e,n),ne(s,e,null),i=!0},p(o,c){const r={};c[1]&1&&(r.$$scope={dirty:c,ctx:o}),t.$set(r);const f={};c[1]&1&&(f.$$scope={dirty:c,ctx:o}),s.$set(f)},i(o){i||(P(t.$$.fragment,o),P(s.$$.fragment,o),i=!0)},o(o){L(t.$$.fragment,o),L(s.$$.fragment,o),i=!1},d(o){o&&$(e),se(t),se(s)}}}function Xc(l){let e,t,n,s,i,o,c,r,f,p,_;i=new qe({props:{variant:"primary",$$slots:{default:[Bc]},$$scope:{ctx:l}}}),i.$on("click",l[11]),c=new Ne({props:{title:"Servers",padding:!1,$$slots:{header:[Jc],default:[Gc]},$$scope:{ctx:l}}});function v(m){l[20](m)}let h={title:"Provision Server",width:"500px",$$slots:{footer:[Qc],default:[Yc]},$$scope:{ctx:l}};return l[1]!==void 0&&(h.open=l[1]),f=new Ln({props:h}),kt.push(()=>Mn(f,"open",v)),f.$on("close",l[21]),{c(){e=d("div"),t=d("div"),n=d("div"),n.innerHTML='<h1 class="svelte-156md29">Infrastructure</h1> <p class="subtitle svelte-156md29">Inventory &amp; lifecycle actions</p>',s=b(),oe(i.$$.fragment),o=b(),oe(c.$$.fragment),r=b(),oe(f.$$.fragment),u(t,"class","page-header svelte-156md29"),u(e,"class","infrastructure svelte-156md29")},m(m,g){w(m,e,g),a(e,t),a(t,n),a(t,s),ne(i,t,null),a(e,o),ne(c,e,null),w(m,r,g),ne(f,m,g),_=!0},p(m,g){const y={};g[1]&1&&(y.$$scope={dirty:g,ctx:m}),i.$set(y);const C={};g[0]&9|g[1]&1&&(C.$$scope={dirty:g,ctx:m}),c.$set(C);const k={};g[0]&6|g[1]&1&&(k.$$scope={dirty:g,ctx:m}),!p&&g[0]&2&&(p=!0,k.open=m[1],En(()=>p=!1)),f.$set(k)},i(m){_||(P(i.$$.fragment,m),P(c.$$.fragment,m),P(f.$$.fragment,m),_=!0)},o(m){L(i.$$.fragment,m),L(c.$$.fragment,m),L(f.$$.fragment,m),_=!1},d(m){m&&($(e),$(r)),se(i),se(c),se(f,m)}}}function Zc(l,e,t){let n,s,i;We(l,cl,R=>t(10,s=R)),We(l,bl,R=>t(3,i=R));let o=!1,c=!1,r={name:"",project:"",env:"prod",region:"nyc1",size:"s-1vcpu-1gb",count:1};const f=[{value:"nyc1",label:"New York 1"},{value:"nyc3",label:"New York 3"},{value:"sfo3",label:"San Francisco 3"},{value:"ams3",label:"Amsterdam 3"},{value:"sgp1",label:"Singapore 1"},{value:"lon1",label:"London 1"},{value:"fra1",label:"Frankfurt 1"},{value:"tor1",label:"Toronto 1"},{value:"blr1",label:"Bangalore 1"}],p=[{value:"s-1vcpu-512mb-10gb",label:"$4/mo - 1 vCPU, 512MB RAM"},{value:"s-1vcpu-1gb",label:"$6/mo - 1 vCPU, 1GB RAM"},{value:"s-1vcpu-2gb",label:"$12/mo - 1 vCPU, 2GB RAM"},{value:"s-2vcpu-2gb",label:"$18/mo - 2 vCPU, 2GB RAM"},{value:"s-2vcpu-4gb",label:"$24/mo - 2 vCPU, 4GB RAM"},{value:"s-4vcpu-8gb",label:"$48/mo - 4 vCPU, 8GB RAM"}];async function _(){try{const R=await Be("POST","/infra/servers/provision",{name:r.name,project:r.project,env:r.env,region:r.region,size:r.size,count:r.count});ve.success(`Provisioned ${R.created||1} server(s)`),t(1,c=!1),cl.refresh()}catch(R){ve.error("Failed to provision: "+R.message)}}async function v(R){const{server:O}=R.detail,z=R.type;try{switch(z){case"start":ve.info("Power actions not yet implemented. Use DigitalOcean console.");break;case"stop":ve.info("Power actions not yet implemented. Use DigitalOcean console.");break;case"destroy":confirm(`Are you sure you want to destroy ${O.name}? This cannot be undone.`)&&(await Be("DELETE",`/infra/servers/${O.id}`),ve.success(`Destroyed ${O.name}`));break;case"ssh":ve.info("Terminal feature coming soon");break;case"details":ve.info("Details modal coming soon");break}cl.refresh()}catch(F){ve.error(`Failed to ${z}: ${F.message}`)}}function h(){cl.refresh()}const m=()=>t(1,c=!0),g=()=>cl.refresh(),y=()=>t(1,c=!1);function C(){r.name=this.value,t(2,r)}function k(){r.project=this.value,t(2,r)}function S(){r.env=Ge(this),t(2,r)}function M(){r.region=Ge(this),t(2,r)}function D(){r.count=Nt(this.value),t(2,r)}function T(){r.size=Ge(this),t(2,r)}function E(R){c=R,t(1,c)}const j=()=>t(1,c=!1);return l.$$.update=()=>{l.$$.dirty[0]&1024&&t(9,n=s||{loading:!1}),l.$$.dirty[0]&512&&t(0,o=n.loading)},[o,c,r,i,f,p,_,v,h,n,s,m,g,y,C,k,S,M,D,T,E,j]}class xc extends Ve{constructor(e){super(),Ye(this,e,Zc,Xc,Je,{refresh:8},null,[-1,-1])}get refresh(){return this.$$.ctx[8]}}const ef="modulepreload",tf=function(l){return"/static/"+l},ho={},go=function(e,t,n){let s=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(t.map(r=>{if(r=tf(r),r in ho)return;ho[r]=!0;const f=r.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${p}`))return;const _=document.createElement("link");if(_.rel=f?"stylesheet":ef,f||(_.as="script"),_.crossOrigin="",_.href=r,c&&_.setAttribute("nonce",c),document.head.appendChild(_),f)return new Promise((v,h)=>{_.addEventListener("load",v),_.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${r}`)))})}))}function i(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return s.then(o=>{for(const c of o||[])c.status==="rejected"&&i(c.reason);return e().catch(i)})},{Boolean:is}=Kr;function bo(l,e,t){const n=l.slice();return n[138]=e[t],n}function $o(l,e,t){const n=l.slice();return n[138]=e[t],n}function ko(l,e,t){const n=l.slice();return n[138]=e[t],n}function wo(l,e,t){const n=l.slice();return n[64]=e[t],n}function yo(l,e,t){const n=l.slice();return n[147]=e[t],n}function Co(l,e,t){const n=l.slice();return n[150]=e[t],n}function So(l,e,t){const n=l.slice();return n[153]=e[t],n}function qo(l,e,t){var i,o,c;const n=l.slice();n[138]=e[t];const s=n[138].ip||((c=(o=(i=n[138].networks)==null?void 0:i.v4)==null?void 0:o[0])==null?void 0:c.ip_address);return n[156]=s,n}function To(l,e,t){const n=l.slice();return n[159]=e[t],n[161]=t,n}function lf(l){const e=l.slice(),t=e[19].find(s=>s.isMain);e[162]=t;const n=e[19].filter(s=>!s.isMain).length;return e[163]=n,e}function Do(l,e,t){const n=l.slice();return n[159]=e[t],n[161]=t,n}function Po(l,e,t){const n=l.slice();return n[165]=e[t],n}function Eo(l){let e,t=l[165]+"",n;return{c(){e=d("option"),n=q(t),e.__value=l[165],Q(e,e.__value)},m(s,i){w(s,e,i),a(e,n)},p:ae,d(s){s&&$(e)}}}function nf(l){let e;return{c(){e=q("📥 Load")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function sf(l){let e;return{c(){e=q("💾 Save")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function of(l){let e;return{c(){e=q("🚫 Exclusions")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Mo(l){let e,t;return{c(){e=d("span"),t=q(l[42]),u(e,"class","config-status svelte-78e7a1")},m(n,s){w(n,e,s),a(e,t)},p(n,s){s[1]&2048&&B(t,n[42])},d(n){n&&$(e)}}}function jo(l){let e,t,n,s,i,o,c,r,f,p,_,v;return i=new qe({props:{variant:"ghost",size:"sm",$$slots:{default:[rf]},$$scope:{ctx:l}}}),i.$on("click",l[52]),{c(){e=d("div"),t=d("div"),n=d("label"),n.textContent="Exclusion Patterns",s=b(),oe(i.$$.fragment),o=b(),c=d("textarea"),r=b(),f=d("small"),f.textContent="One pattern per line. Applied to folder uploads and git clones.",u(n,"class","svelte-78e7a1"),u(t,"class","exclude-header svelte-78e7a1"),u(c,"rows","6"),u(c,"placeholder","node_modules/ __pycache__/ *.pyc .git/"),u(c,"class","svelte-78e7a1"),u(f,"class","svelte-78e7a1"),u(e,"class","exclude-editor svelte-78e7a1")},m(h,m){w(h,e,m),a(e,t),a(t,n),a(t,s),ne(i,t,null),a(e,o),a(e,c),Q(c,l[44]),a(e,r),a(e,f),p=!0,_||(v=te(c,"input",l[69]),_=!0)},p(h,m){const g={};m[5]&8192&&(g.$$scope={dirty:m,ctx:h}),i.$set(g),m[1]&8192&&Q(c,h[44])},i(h){p||(P(i.$$.fragment,h),p=!0)},o(h){L(i.$$.fragment,h),p=!1},d(h){h&&$(e),se(i),_=!1,v()}}}function rf(l){let e;return{c(){e=q("Reset to Defaults")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Lo(l){let e,t,n,s,i,o,c,r,f,p,_,v,h,m,g,y,C,k,S,M,D,T=l[19].length>0&&No(l);f=new qe({props:{size:"sm",$$slots:{default:[cf]},$$scope:{ctx:l}}}),f.$on("click",l[55]);function E(F,H){return H[0]&524288&&(v=null),F[19].length===0?uf:(v==null&&(v=!F[19].some(Ff)),v?ff:Ao)}function j(F,H){return H===Ao?lf(F):F}let R=E(l,[-1,-1,-1,-1,-1,-1]),O=R(j(l,R)),z=l[24]&&zo(l);return{c(){e=d("div"),t=d("div"),n=d("label"),n.textContent="Build Folders",s=b(),i=d("input"),o=b(),T&&T.c(),c=b(),r=d("div"),oe(f.$$.fragment),p=b(),_=d("div"),O.c(),h=b(),m=d("label"),g=d("input"),y=b(),C=d("span"),C.textContent="Remember folder configuration for this service",k=b(),z&&z.c(),u(n,"class","svelte-78e7a1"),u(i,"type","file"),u(i,"webkitdirectory",""),u(i,"directory",""),i.multiple=!0,Ae(i,"display","none"),u(i,"class","svelte-78e7a1"),u(r,"class","folder-actions svelte-78e7a1"),u(_,"class","code-selection-info svelte-78e7a1"),$e(_,"success",l[19].some(di)),$e(_,"warning",l[19].length>0&&!l[19].some(_i)),u(g,"type","checkbox"),u(g,"class","svelte-78e7a1"),u(m,"class","checkbox-label small-check svelte-78e7a1"),u(t,"class","form-group svelte-78e7a1"),u(e,"class","source-config svelte-78e7a1")},m(F,H){w(F,e,H),a(e,t),a(t,n),a(t,s),a(t,i),l[76](i),a(t,o),T&&T.m(t,null),a(t,c),a(t,r),ne(f,r,null),a(t,p),a(t,_),O.m(_,null),a(t,h),a(t,m),a(m,g),g.checked=l[21],a(m,y),a(m,C),a(e,k),z&&z.m(e,null),S=!0,M||(D=[te(i,"change",l[56]),te(g,"change",l[79])],M=!0)},p(F,H){F[19].length>0?T?(T.p(F,H),H[0]&524288&&P(T,1)):(T=No(F),T.c(),P(T,1),T.m(t,c)):T&&(ke(),L(T,1,1,()=>{T=null}),we());const W={};H[5]&8192&&(W.$$scope={dirty:H,ctx:F}),f.$set(W),R===(R=E(F,H))&&O?O.p(j(F,R),H):(O.d(1),O=R(j(F,R)),O&&(O.c(),O.m(_,null))),(!S||H[0]&524288)&&$e(_,"success",F[19].some(di)),(!S||H[0]&524288)&&$e(_,"warning",F[19].length>0&&!F[19].some(_i)),H[0]&2097152&&(g.checked=F[21]),F[24]?z?(z.p(F,H),H[0]&16777216&&P(z,1)):(z=zo(F),z.c(),P(z,1),z.m(e,null)):z&&(ke(),L(z,1,1,()=>{z=null}),we())},i(F){S||(P(T),P(f.$$.fragment,F),P(z),S=!0)},o(F){L(T),L(f.$$.fragment,F),L(z),S=!1},d(F){F&&$(e),l[76](null),T&&T.d(),se(f),O.d(),z&&z.d(),M=!1,Fe(D)}}}function No(l){let e,t,n=_e(l[19]),s=[];for(let o=0;o<n.length;o+=1)s[o]=Oo(Do(l,n,o));const i=o=>L(s[o],1,1,()=>{s[o]=null});return{c(){e=d("div");for(let o=0;o<s.length;o+=1)s[o].c();u(e,"class","folder-list svelte-78e7a1")},m(o,c){w(o,e,c);for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(e,null);t=!0},p(o,c){if(c[0]&524288|c[1]&201326592){n=_e(o[19]);let r;for(r=0;r<n.length;r+=1){const f=Do(o,n,r);s[r]?(s[r].p(f,c),P(s[r],1)):(s[r]=Oo(f),s[r].c(),P(s[r],1),s[r].m(e,null))}for(ke(),r=n.length;r<s.length;r+=1)i(r);we()}},i(o){if(!t){for(let c=0;c<n.length;c+=1)P(s[c]);t=!0}},o(o){s=s.filter(is);for(let c=0;c<s.length;c+=1)L(s[c]);t=!1},d(o){o&&$(e),Ee(s,o)}}}function af(l){let e=l[159].isMain?"MAIN":"dependency",t;return{c(){t=q(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&524288&&e!==(e=n[159].isMain?"MAIN":"dependency")&&B(t,e)},d(n){n&&$(t)}}}function Ro(l){let e,t,n;function s(){return l[77](l[161])}return{c(){e=d("button"),e.textContent="⭐",u(e,"type","button"),u(e,"class","set-main-btn svelte-78e7a1"),u(e,"title","Set as main")},m(i,o){w(i,e,o),t||(n=te(e,"click",s),t=!0)},p(i,o){l=i},d(i){i&&$(e),t=!1,n()}}}function Oo(l){let e,t,n=l[159].isMain?"📁":"📂",s,i,o,c=l[159].name+"",r,f,p,_,v,h,m=l[159].fileCount+"",g,y,C,k,S,M,D,T,E;_=new Ie({props:{variant:l[159].isMain?"success":"secondary",$$slots:{default:[af]},$$scope:{ctx:l}}});let j=!l[159].isMain&&Ro(l);function R(){return l[78](l[161])}return{c(){e=d("div"),t=d("span"),s=q(n),i=b(),o=d("strong"),r=q(c),f=q("/"),p=b(),oe(_.$$.fragment),v=b(),h=d("span"),g=q(m),y=q(" files"),C=b(),j&&j.c(),k=b(),S=d("button"),S.textContent="✕",M=b(),u(t,"class","folder-icon svelte-78e7a1"),u(o,"class","svelte-78e7a1"),u(h,"class","file-count svelte-78e7a1"),u(S,"type","button"),u(S,"class","remove-btn svelte-78e7a1"),u(e,"class","folder-item svelte-78e7a1")},m(O,z){w(O,e,z),a(e,t),a(t,s),a(e,i),a(e,o),a(o,r),a(o,f),a(e,p),ne(_,e,null),a(e,v),a(e,h),a(h,g),a(h,y),a(e,C),j&&j.m(e,null),a(e,k),a(e,S),a(e,M),D=!0,T||(E=te(S,"click",R),T=!0)},p(O,z){l=O,(!D||z[0]&524288)&&n!==(n=l[159].isMain?"📁":"📂")&&B(s,n),(!D||z[0]&524288)&&c!==(c=l[159].name+"")&&B(r,c);const F={};z[0]&524288&&(F.variant=l[159].isMain?"success":"secondary"),z[0]&524288|z[5]&8192&&(F.$$scope={dirty:z,ctx:l}),_.$set(F),(!D||z[0]&524288)&&m!==(m=l[159].fileCount+"")&&B(g,m),l[159].isMain?j&&(j.d(1),j=null):j?j.p(l,z):(j=Ro(l),j.c(),j.m(e,k))},i(O){D||(P(_.$$.fragment,O),D=!0)},o(O){L(_.$$.fragment,O),D=!1},d(O){O&&$(e),se(_),j&&j.d(),T=!1,E()}}}function cf(l){let e;return{c(){e=q("➕ Add Folder")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Ao(l){let e,t,n=l[162].name+"",s,i,o,c,r=l[163]>0&&Fo(l);return{c(){e=q("✓ Main: "),t=d("strong"),s=q(n),i=q("/"),o=b(),r&&r.c(),c=je()},m(f,p){w(f,e,p),w(f,t,p),a(t,s),a(t,i),w(f,o,p),r&&r.m(f,p),w(f,c,p)},p(f,p){p[0]&524288&&n!==(n=f[162].name+"")&&B(s,n),f[163]>0?r?r.p(f,p):(r=Fo(f),r.c(),r.m(c.parentNode,c)):r&&(r.d(1),r=null)},d(f){f&&($(e),$(t),$(o),$(c)),r&&r.d(f)}}}function ff(l){let e;return{c(){e=q("⚠️ No main folder selected. Click ⭐ to set one as main.")},m(t,n){w(t,e,n)},p:ae,d(t){t&&$(e)}}}function uf(l){let e;return{c(){e=q("No folders selected. Add your main service folder and any dependencies.")},m(t,n){w(t,e,n)},p:ae,d(t){t&&$(e)}}}function Fo(l){let e,t=l[163]+"",n,s,i=l[163]===1?"y":"ies",o;return{c(){e=q("+ "),n=q(t),s=q(" dependenc"),o=q(i)},m(c,r){w(c,e,r),w(c,n,r),w(c,s,r),w(c,o,r)},p(c,r){r[0]&524288&&t!==(t=c[163]+"")&&B(n,t),r[0]&524288&&i!==(i=c[163]===1?"y":"ies")&&B(o,i)},d(c){c&&($(e),$(n),$(s),$(o))}}}function zo(l){let e,t,n,s,i,o,c,r,f,p,_,v,h,m,g,y,C,k,S,M,D,T;return i=new Ie({props:{variant:l[23]==="from folder"?"success":l[23]==="multi-folder"?"info":"warning",$$slots:{default:[pf]},$$scope:{ctx:l}}}),{c(){e=d("div"),t=d("div"),n=d("label"),s=q(`🐳 Dockerfile
                    `),oe(i.$$.fragment),o=b(),c=d("textarea"),r=b(),f=d("div"),p=d("select"),_=d("option"),_.textContent="FROM...",v=d("option"),v.textContent="python:3.11-slim",h=d("option"),h.textContent="python:3.12-slim",m=d("option"),m.textContent="node:20-alpine",g=d("option"),g.textContent="node:18-alpine",y=d("option"),y.textContent="golang:1.21-alpine",C=d("option"),C.textContent="nginx:alpine",k=b(),S=d("input"),u(n,"class","svelte-78e7a1"),u(t,"class","dockerfile-header svelte-78e7a1"),u(c,"rows","8"),u(c,"class","dockerfile-editor svelte-78e7a1"),u(c,"spellcheck","false"),_.__value="",Q(_,_.__value),v.__value="python:3.11-slim",Q(v,v.__value),h.__value="python:3.12-slim",Q(h,h.__value),m.__value="node:20-alpine",Q(m,m.__value),g.__value="node:18-alpine",Q(g,g.__value),y.__value="golang:1.21-alpine",Q(y,y.__value),C.__value="nginx:alpine",Q(C,C.__value),u(p,"class","svelte-78e7a1"),l[25]===void 0&&Ue(()=>l[81].call(p)),u(S,"type","text"),u(S,"placeholder","CMD (e.g. uvicorn main:app ...)"),u(S,"class","svelte-78e7a1"),u(f,"class","dockerfile-quick-fields svelte-78e7a1"),u(e,"class","dockerfile-preview svelte-78e7a1")},m(E,j){w(E,e,j),a(e,t),a(t,n),a(n,s),ne(i,n,null),a(e,o),a(e,c),Q(c,l[22]),a(e,r),a(e,f),a(f,p),a(p,_),a(p,v),a(p,h),a(p,m),a(p,g),a(p,y),a(p,C),De(p,l[25],!0),a(f,k),a(f,S),Q(S,l[26]),M=!0,D||(T=[te(c,"input",l[80]),te(p,"change",l[81]),te(p,"change",l[82]),te(S,"input",l[83]),te(S,"change",l[84])],D=!0)},p(E,j){const R={};j[0]&8388608&&(R.variant=E[23]==="from folder"?"success":E[23]==="multi-folder"?"info":"warning"),j[0]&8388608|j[5]&8192&&(R.$$scope={dirty:j,ctx:E}),i.$set(R),j[0]&4194304&&Q(c,E[22]),j[0]&33554432&&De(p,E[25]),j[0]&67108864&&S.value!==E[26]&&Q(S,E[26])},i(E){M||(P(i.$$.fragment,E),M=!0)},o(E){L(i.$$.fragment,E),M=!1},d(E){E&&$(e),se(i),D=!1,Fe(T)}}}function pf(l){let e;return{c(){e=q(l[23])},m(t,n){w(t,e,n)},p(t,n){n[0]&8388608&&B(e,t[23])},d(t){t&&$(e)}}}function Bo(l){let e,t,n,s,i,o,c,r,f,p,_,v,h,m,g,y,C,k,S,M,D,T,E,j,R,O,z,F,H,W,I,J,A,G,N,U,Y,Z,ie=l[12].length>0&&Uo(l);return D=new qe({props:{size:"sm",$$slots:{default:[_f]},$$scope:{ctx:l}}}),D.$on("click",l[89]),E=new qe({props:{variant:"ghost",size:"sm",$$slots:{default:[vf]},$$scope:{ctx:l}}}),E.$on("click",l[90]),{c(){e=d("div"),t=d("div"),n=d("label"),n.textContent="Git Repository URL *",s=b(),i=d("input"),o=b(),c=d("small"),c.textContent="HTTPS URL (SSH not supported)",r=b(),f=d("div"),p=d("label"),p.textContent="Branch",_=b(),v=d("input"),h=b(),m=d("div"),g=d("label"),g.textContent="Folders to Include",y=b(),ie&&ie.c(),C=b(),k=d("div"),S=d("input"),M=b(),oe(D.$$.fragment),T=b(),oe(E.$$.fragment),j=b(),R=d("small"),R.textContent="Leave empty to use entire repo. Add paths for multi-folder builds (main folder contains Dockerfile).",O=b(),z=d("details"),F=d("summary"),F.textContent="🔐 Private repository?",H=b(),W=d("div"),I=d("label"),I.textContent="Personal Access Token",J=b(),A=d("input"),G=b(),N=d("small"),N.innerHTML="Needs <code>repo</code> scope for private repos",u(n,"for","git-url"),u(n,"class","svelte-78e7a1"),u(i,"id","git-url"),u(i,"type","url"),u(i,"placeholder","https://github.com/user/repo"),u(i,"class","svelte-78e7a1"),u(c,"class","svelte-78e7a1"),u(t,"class","form-group svelte-78e7a1"),u(p,"for","git-branch"),u(p,"class","svelte-78e7a1"),u(v,"id","git-branch"),u(v,"type","text"),u(v,"placeholder","main"),u(v,"class","svelte-78e7a1"),u(f,"class","form-group svelte-78e7a1"),u(g,"class","svelte-78e7a1"),u(S,"type","text"),u(S,"placeholder","e.g. services/my_api"),u(S,"class","svelte-78e7a1"),u(k,"class","folder-input svelte-78e7a1"),u(R,"class","svelte-78e7a1"),u(m,"class","form-group svelte-78e7a1"),u(F,"class","svelte-78e7a1"),u(I,"for","git-token"),u(I,"class","svelte-78e7a1"),u(A,"id","git-token"),u(A,"type","password"),u(A,"placeholder","ghp_xxxxxxxxxxxx"),u(A,"class","svelte-78e7a1"),u(N,"class","svelte-78e7a1"),u(W,"class","form-group svelte-78e7a1"),u(z,"class","private-repo svelte-78e7a1"),u(e,"class","source-config svelte-78e7a1")},m(le,ee){w(le,e,ee),a(e,t),a(t,n),a(t,s),a(t,i),Q(i,l[9]),a(t,o),a(t,c),a(e,r),a(e,f),a(f,p),a(f,_),a(f,v),Q(v,l[10]),a(e,h),a(e,m),a(m,g),a(m,y),ie&&ie.m(m,null),a(m,C),a(m,k),a(k,S),Q(S,l[13]),a(k,M),ne(D,k,null),a(k,T),ne(E,k,null),a(m,j),a(m,R),a(e,O),a(e,z),a(z,F),a(z,H),a(z,W),a(W,I),a(W,J),a(W,A),Q(A,l[11]),a(W,G),a(W,N),U=!0,Y||(Z=[te(i,"input",l[85]),te(v,"input",l[86]),te(S,"input",l[88]),te(A,"input",l[91])],Y=!0)},p(le,ee){ee[0]&512&&i.value!==le[9]&&Q(i,le[9]),ee[0]&1024&&v.value!==le[10]&&Q(v,le[10]),le[12].length>0?ie?(ie.p(le,ee),ee[0]&4096&&P(ie,1)):(ie=Uo(le),ie.c(),P(ie,1),ie.m(m,C)):ie&&(ke(),L(ie,1,1,()=>{ie=null}),we()),ee[0]&8192&&S.value!==le[13]&&Q(S,le[13]);const ue={};ee[5]&8192&&(ue.$$scope={dirty:ee,ctx:le}),D.$set(ue);const x={};ee[5]&8192&&(x.$$scope={dirty:ee,ctx:le}),E.$set(x),ee[0]&2048&&A.value!==le[11]&&Q(A,le[11])},i(le){U||(P(ie),P(D.$$.fragment,le),P(E.$$.fragment,le),U=!0)},o(le){L(ie),L(D.$$.fragment,le),L(E.$$.fragment,le),U=!1},d(le){le&&$(e),ie&&ie.d(),se(D),se(E),Y=!1,Fe(Z)}}}function Uo(l){let e,t,n=_e(l[12]),s=[];for(let o=0;o<n.length;o+=1)s[o]=Io(To(l,n,o));const i=o=>L(s[o],1,1,()=>{s[o]=null});return{c(){e=d("div");for(let o=0;o<s.length;o+=1)s[o].c();u(e,"class","folder-list svelte-78e7a1")},m(o,c){w(o,e,c);for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(e,null);t=!0},p(o,c){if(c[0]&4096|c[1]&1073741824){n=_e(o[12]);let r;for(r=0;r<n.length;r+=1){const f=To(o,n,r);s[r]?(s[r].p(f,c),P(s[r],1)):(s[r]=Io(f),s[r].c(),P(s[r],1),s[r].m(e,null))}for(ke(),r=n.length;r<s.length;r+=1)i(r);we()}},i(o){if(!t){for(let c=0;c<n.length;c+=1)P(s[c]);t=!0}},o(o){s=s.filter(is);for(let c=0;c<s.length;c+=1)L(s[c]);t=!1},d(o){o&&$(e),Ee(s,o)}}}function df(l){let e=l[159].isMain?"MAIN":"dependency",t;return{c(){t=q(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&4096&&e!==(e=n[159].isMain?"MAIN":"dependency")&&B(t,e)},d(n){n&&$(t)}}}function Io(l){let e,t,n=l[159].isMain?"📁":"📂",s,i,o,c=l[159].path+"",r,f,p,_,v,h,m,g,y;p=new Ie({props:{variant:l[159].isMain?"success":"secondary",$$slots:{default:[df]},$$scope:{ctx:l}}});function C(){return l[87](l[161])}return{c(){e=d("div"),t=d("span"),s=q(n),i=b(),o=d("strong"),r=q(c),f=b(),oe(p.$$.fragment),_=b(),v=d("button"),v.textContent="✕",h=b(),u(o,"class","svelte-78e7a1"),u(v,"type","button"),u(v,"class","remove-btn svelte-78e7a1"),u(e,"class","folder-item svelte-78e7a1")},m(k,S){w(k,e,S),a(e,t),a(t,s),a(e,i),a(e,o),a(o,r),a(e,f),ne(p,e,null),a(e,_),a(e,v),a(e,h),m=!0,g||(y=te(v,"click",C),g=!0)},p(k,S){l=k,(!m||S[0]&4096)&&n!==(n=l[159].isMain?"📁":"📂")&&B(s,n),(!m||S[0]&4096)&&c!==(c=l[159].path+"")&&B(r,c);const M={};S[0]&4096&&(M.variant=l[159].isMain?"success":"secondary"),S[0]&4096|S[5]&8192&&(M.$$scope={dirty:S,ctx:l}),p.$set(M)},i(k){m||(P(p.$$.fragment,k),m=!0)},o(k){L(p.$$.fragment,k),m=!1},d(k){k&&$(e),se(p),g=!1,y()}}}function _f(l){let e;return{c(){e=q("+ Main")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function vf(l){let e;return{c(){e=q("+ Dep")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Ho(l){let e,t,n,s,i,o,c,r,f;return{c(){e=d("div"),t=d("div"),n=d("label"),n.textContent="Docker Image *",s=b(),i=d("input"),o=b(),c=d("small"),c.textContent="Full image URL from DO Registry or Docker Hub",u(n,"for","image-url"),u(n,"class","svelte-78e7a1"),u(i,"id","image-url"),u(i,"type","text"),u(i,"placeholder","registry.digitalocean.com/my-registry/app:latest"),u(i,"class","svelte-78e7a1"),u(c,"class","svelte-78e7a1"),u(t,"class","form-group svelte-78e7a1"),u(e,"class","source-config svelte-78e7a1")},m(p,_){w(p,e,_),a(e,t),a(t,n),a(t,s),a(t,i),Q(i,l[14]),a(t,o),a(t,c),r||(f=te(i,"input",l[92]),r=!0)},p(p,_){_[0]&16384&&i.value!==p[14]&&Q(i,p[14])},d(p){p&&$(e),r=!1,f()}}}function Go(l){let e,t,n,s,i,o,c,r,f,p,_,v,h,m,g,y,C,k,S,M,D,T,E,j,R,O,z,F,H=l[15]&&Wo(l);return{c(){e=d("div"),t=d("div"),n=d("label"),n.textContent="Docker Image File (.tar) *",s=b(),i=d("input"),o=b(),H&&H.c(),c=b(),r=d("small"),r.innerHTML="Export from Docker with: <code>docker save myimage:latest -o image.tar</code>",f=b(),p=d("div"),_=d("label"),_.textContent="Image Name *",v=b(),h=d("input"),m=b(),g=d("small"),g.textContent="The image name/tag as it appears in the tar file",y=b(),C=d("div"),k=d("div"),S=d("label"),S.textContent="Container Port",M=b(),D=d("input"),T=b(),E=d("div"),j=d("label"),j.textContent="Host Port",R=b(),O=d("input"),u(n,"for","image-file"),u(n,"class","svelte-78e7a1"),u(i,"id","image-file"),u(i,"type","file"),u(i,"accept",".tar,.tar.gz"),u(i,"class","svelte-78e7a1"),u(r,"class","svelte-78e7a1"),u(t,"class","form-group svelte-78e7a1"),u(_,"for","image-name"),u(_,"class","svelte-78e7a1"),u(h,"id","image-name"),u(h,"type","text"),u(h,"placeholder","myapp:latest"),u(h,"class","svelte-78e7a1"),u(g,"class","svelte-78e7a1"),u(p,"class","form-group svelte-78e7a1"),u(S,"for","container-port"),u(S,"class","svelte-78e7a1"),u(D,"id","container-port"),u(D,"type","number"),u(D,"placeholder",l[7]),u(D,"class","svelte-78e7a1"),u(k,"class","form-group svelte-78e7a1"),u(j,"for","host-port"),u(j,"class","svelte-78e7a1"),u(O,"id","host-port"),u(O,"type","number"),u(O,"placeholder",l[7]),u(O,"class","svelte-78e7a1"),u(E,"class","form-group svelte-78e7a1"),u(C,"class","form-row svelte-78e7a1"),u(e,"class","source-config svelte-78e7a1")},m(W,I){w(W,e,I),a(e,t),a(t,n),a(t,s),a(t,i),a(t,o),H&&H.m(t,null),a(t,c),a(t,r),a(e,f),a(e,p),a(p,_),a(p,v),a(p,h),Q(h,l[16]),a(p,m),a(p,g),a(e,y),a(e,C),a(C,k),a(k,S),a(k,M),a(k,D),Q(D,l[17]),a(C,T),a(C,E),a(E,j),a(E,R),a(E,O),Q(O,l[18]),z||(F=[te(i,"change",l[62]),te(h,"input",l[93]),te(D,"input",l[94]),te(O,"input",l[95])],z=!0)},p(W,I){W[15]?H?H.p(W,I):(H=Wo(W),H.c(),H.m(t,c)):H&&(H.d(1),H=null),I[0]&65536&&h.value!==W[16]&&Q(h,W[16]),I[0]&128&&u(D,"placeholder",W[7]),I[0]&131072&&Nt(D.value)!==W[17]&&Q(D,W[17]),I[0]&128&&u(O,"placeholder",W[7]),I[0]&262144&&Nt(O.value)!==W[18]&&Q(O,W[18])},d(W){W&&$(e),H&&H.d(),z=!1,Fe(F)}}}function Wo(l){let e,t,n=l[15].name+"",s,i,o=(l[15].size/1024/1024).toFixed(2)+"",c,r;return{c(){e=d("div"),t=q("📦 "),s=q(n),i=q(" ("),c=q(o),r=q(" MB)"),u(e,"class","file-selected svelte-78e7a1")},m(f,p){w(f,e,p),a(e,t),a(e,s),a(e,i),a(e,c),a(e,r)},p(f,p){p[0]&32768&&n!==(n=f[15].name+"")&&B(s,n),p[0]&32768&&o!==(o=(f[15].size/1024/1024).toFixed(2)+"")&&B(c,o)},d(f){f&&$(e)}}}function Jo(l){let e,t,n,s,i,o,c,r,f,p,_,v,h,m,g,y,C,k,S,M,D;return{c(){e=d("div"),t=d("label"),t.textContent="Dependencies:",n=b(),s=d("div"),i=d("label"),o=d("input"),c=q(`
                  🐘 PostgreSQL`),r=b(),f=d("label"),p=d("input"),_=q(`
                  ⚡ Redis`),v=b(),h=d("label"),m=d("input"),g=q(`
                  🐬 MySQL`),y=b(),C=d("label"),k=d("input"),S=q(`
                  🍃 MongoDB`),u(o,"type","checkbox"),u(o,"class","svelte-78e7a1"),u(i,"class","dep-item svelte-78e7a1"),u(p,"type","checkbox"),u(p,"class","svelte-78e7a1"),u(f,"class","dep-item svelte-78e7a1"),u(m,"type","checkbox"),u(m,"class","svelte-78e7a1"),u(h,"class","dep-item svelte-78e7a1"),u(k,"type","checkbox"),u(k,"class","svelte-78e7a1"),u(C,"class","dep-item svelte-78e7a1"),u(s,"class","dep-list svelte-78e7a1"),u(e,"class","dependencies svelte-78e7a1")},m(T,E){w(T,e,E),a(e,t),a(e,n),a(e,s),a(s,i),a(i,o),o.checked=l[39].postgres,a(i,c),a(s,r),a(s,f),a(f,p),p.checked=l[39].redis,a(f,_),a(s,v),a(s,h),a(h,m),m.checked=l[39].mysql,a(h,g),a(s,y),a(s,C),a(C,k),k.checked=l[39].mongo,a(C,S),M||(D=[te(o,"change",l[99]),te(p,"change",l[100]),te(m,"change",l[101]),te(k,"change",l[102])],M=!0)},p(T,E){E[1]&256&&(o.checked=T[39].postgres),E[1]&256&&(p.checked=T[39].redis),E[1]&256&&(m.checked=T[39].mysql),E[1]&256&&(k.checked=T[39].mongo)},d(T){T&&$(e),M=!1,Fe(D)}}}function Yo(l){let e,t,n,s,i,o=(l[46]||"app-project-env.domain.com")+"",c,r,f,p,_,v,h,m,g,y,C,k,S,M,D;return{c(){e=d("div"),t=d("div"),n=d("label"),n.textContent="Domain Preview:",s=b(),i=d("code"),c=q(o),r=b(),f=d("div"),p=d("label"),p.textContent="Base Domain",_=b(),v=d("input"),h=b(),m=d("div"),g=d("label"),g.innerHTML='Custom Aliases <small class="svelte-78e7a1">(optional)</small>',y=b(),C=d("input"),k=b(),S=d("small"),S.textContent="Comma-separated custom domains (requires DNS setup)",u(n,"class","svelte-78e7a1"),u(i,"class","svelte-78e7a1"),u(t,"class","domain-preview svelte-78e7a1"),u(p,"for","base-domain"),u(p,"class","svelte-78e7a1"),u(v,"id","base-domain"),u(v,"type","text"),u(v,"placeholder","example.com"),u(v,"class","svelte-78e7a1"),u(f,"class","form-group svelte-78e7a1"),u(g,"for","domain-aliases"),u(g,"class","svelte-78e7a1"),u(C,"id","domain-aliases"),u(C,"type","text"),u(C,"placeholder","api.myclient.com, app.example.com"),u(C,"class","svelte-78e7a1"),u(S,"class","svelte-78e7a1"),u(m,"class","form-group svelte-78e7a1"),u(e,"class","domain-config svelte-78e7a1")},m(T,E){w(T,e,E),a(e,t),a(t,n),a(t,s),a(t,i),a(i,c),a(e,r),a(e,f),a(f,p),a(f,_),a(f,v),Q(v,l[4]),a(e,h),a(e,m),a(m,g),a(m,y),a(m,C),Q(C,l[41]),a(m,k),a(m,S),M||(D=[te(v,"input",l[105]),te(C,"input",l[106])],M=!0)},p(T,E){E[1]&32768&&o!==(o=(T[46]||"app-project-env.domain.com")+"")&&B(c,o),E[0]&16&&v.value!==T[4]&&Q(v,T[4]),E[1]&1024&&C.value!==T[41]&&Q(C,T[41])},d(T){T&&$(e),M=!1,Fe(D)}}}function mf(l){let e=l[34].size+"",t,n;return{c(){t=q(e),n=q(" selected")},m(s,i){w(s,t,i),w(s,n,i)},p(s,i){i[1]&8&&e!==(e=s[34].size+"")&&B(t,e)},d(s){s&&($(t),$(n))}}}function hf(l){let e;return{c(){e=q("✓ All")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function gf(l){let e;return{c(){e=q("✕ None")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function bf(l){let e,t,n=_e(l[45]),s=[];for(let o=0;o<n.length;o+=1)s[o]=Qo(qo(l,n,o));const i=o=>L(s[o],1,1,()=>{s[o]=null});return{c(){for(let o=0;o<s.length;o+=1)s[o].c();e=je()},m(o,c){for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(o,c);w(o,e,c),t=!0},p(o,c){if(c[1]&4210696){n=_e(o[45]);let r;for(r=0;r<n.length;r+=1){const f=qo(o,n,r);s[r]?(s[r].p(f,c),P(s[r],1)):(s[r]=Qo(f),s[r].c(),P(s[r],1),s[r].m(e.parentNode,e))}for(ke(),r=n.length;r<s.length;r+=1)i(r);we()}},i(o){if(!t){for(let c=0;c<n.length;c+=1)P(s[c]);t=!0}},o(o){s=s.filter(is);for(let c=0;c<s.length;c+=1)L(s[c]);t=!1},d(o){o&&$(e),Ee(s,o)}}}function $f(l){let e,t,n=(l[3]||"any region")+"",s;return{c(){e=d("div"),t=q("No servers in "),s=q(n),u(e,"class","empty svelte-78e7a1")},m(i,o){w(i,e,o),a(e,t),a(e,s)},p(i,o){o[0]&8&&n!==(n=(i[3]||"any region")+"")&&B(s,n)},i:ae,o:ae,d(i){i&&$(e)}}}function Vo(l){let e,t,n,s,i,o=(l[138].name||"unnamed")+"",c,r,f,p=l[156]+"",_,v,h,m,g,y;function C(){return l[109](l[156])}let k=l[138].project&&Ko(l);return{c(){e=d("label"),t=d("input"),s=b(),i=d("span"),c=q(o),r=b(),f=d("code"),_=q(p),v=b(),k&&k.c(),h=b(),u(t,"type","checkbox"),t.checked=n=l[34].has(l[156]),u(t,"class","svelte-78e7a1"),u(i,"class","server-name svelte-78e7a1"),u(f,"class","server-ip svelte-78e7a1"),u(e,"class","server-item svelte-78e7a1"),$e(e,"selected",l[34].has(l[156]))},m(S,M){w(S,e,M),a(e,t),a(e,s),a(e,i),a(i,c),a(e,r),a(e,f),a(f,_),a(e,v),k&&k.m(e,null),a(e,h),m=!0,g||(y=te(t,"change",C),g=!0)},p(S,M){l=S,(!m||M[1]&16392&&n!==(n=l[34].has(l[156])))&&(t.checked=n),(!m||M[1]&16384)&&o!==(o=(l[138].name||"unnamed")+"")&&B(c,o),(!m||M[1]&16384)&&p!==(p=l[156]+"")&&B(_,p),l[138].project?k?(k.p(l,M),M[1]&16384&&P(k,1)):(k=Ko(l),k.c(),P(k,1),k.m(e,h)):k&&(ke(),L(k,1,1,()=>{k=null}),we()),(!m||M[1]&16392)&&$e(e,"selected",l[34].has(l[156]))},i(S){m||(P(k),m=!0)},o(S){L(k),m=!1},d(S){S&&$(e),k&&k.d(),g=!1,y()}}}function Ko(l){let e,t;return e=new Ie({props:{variant:"info",$$slots:{default:[kf]},$$scope:{ctx:l}}}),{c(){oe(e.$$.fragment)},m(n,s){ne(e,n,s),t=!0},p(n,s){const i={};s[1]&16384|s[5]&8192&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){se(e,n)}}}function kf(l){let e=l[138].project+"",t;return{c(){t=q(e)},m(n,s){w(n,t,s)},p(n,s){s[1]&16384&&e!==(e=n[138].project+"")&&B(t,e)},d(n){n&&$(t)}}}function Qo(l){let e,t,n=l[156]&&Vo(l);return{c(){n&&n.c(),e=je()},m(s,i){n&&n.m(s,i),w(s,e,i),t=!0},p(s,i){s[156]?n?(n.p(s,i),i[1]&16384&&P(n,1)):(n=Vo(s),n.c(),P(n,1),n.m(e.parentNode,e)):n&&(ke(),L(n,1,1,()=>{n=null}),we())},i(s){t||(P(n),t=!0)},o(s){L(n),t=!1},d(s){s&&$(e),n&&n.d(s)}}}function Xo(l){let e;return{c(){e=q("*")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Zo(l){let e,t=l[153].name+"",n,s;return{c(){e=d("option"),n=q(t),e.__value=s=l[153].id,Q(e,e.__value)},m(i,o){w(i,e,o),a(e,n)},p(i,o){o[1]&65536&&t!==(t=i[153].name+"")&&B(n,t),o[1]&65536&&s!==(s=i[153].id)&&(e.__value=s,Q(e,e.__value))},d(i){i&&$(e)}}}function xo(l){let e,t=(l[150].name||l[150].slug)+"",n,s;return{c(){e=d("option"),n=q(t),e.__value=s=l[150].slug,Q(e,e.__value)},m(i,o){w(i,e,o),a(e,n)},p(i,o){o[0]&536870912&&t!==(t=(i[150].name||i[150].slug)+"")&&B(n,t),o[0]&536870912&&s!==(s=i[150].slug)&&(e.__value=s,Q(e,e.__value))},d(i){i&&$(e)}}}function ei(l){let e,t=(l[147].description||l[147].slug)+"",n,s;return{c(){e=d("option"),n=q(t),e.__value=s=l[147].slug,Q(e,e.__value)},m(i,o){w(i,e,o),a(e,n)},p(i,o){o[0]&1073741824&&t!==(t=(i[147].description||i[147].slug)+"")&&B(n,t),o[0]&1073741824&&s!==(s=i[147].slug)&&(e.__value=s,Q(e,e.__value))},d(i){i&&$(e)}}}function ti(l){let e;return{c(){e=d("small"),e.textContent="⚠️ Select a snapshot for new servers",u(e,"class","warning svelte-78e7a1")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function wf(l){let e;return{c(){e=q("🚀 Deploy")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function yf(l){let e;return{c(){e=q("Deploying...")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Cf(l){let e;function t(i,o){return i[31]?yf:wf}let n=t(l),s=n(l);return{c(){s.c(),e=je()},m(i,o){s.m(i,o),w(i,e,o)},p(i,o){n!==(n=t(i))&&(s.d(1),s=n(i),s&&(s.c(),s.m(e.parentNode,e)))},d(i){i&&$(e),s.d(i)}}}function Sf(l){let e,t,n,s,i,o,c,r,f,p,_,v,h,m,g,y,C,k,S,M,D,T,E,j,R,O,z,F,H,W,I,J,A,G,N,U,Y,Z,ie,le,ee,ue,x,he,re,X,de,pe,be,fe,ye,Oe,pt,et,Ot,At,Se,Le,Tt,dl,Ke,_l,Ft,ln,Dt,Xt,$l,wt,nn,kl,Fl,ze,vl,sn,zt,Bt,on,zl,wl,Bl,yl,Cl,Ul,Pt,Zt,Ut,rn,Il,an,Hl,cn,Gl,fn,xt,It,un,Wl,pn,Jl,dn,_n,gt,el,tl,Yl,vn,Ht,mn,ll,Et,hn,Mt,gn,ml,ot,dt,bn,Sl,jt,nl,Gt,$n,kn,_t,sl,wn,ol,hl,yn,bt,Cn,il,gl,Sn,$t,qn,yt,Vl,V,ce,me,Me,Te,Re,Pe,it,Ct,Wt,Lt,Un,In,rs,ql=_e(l[48]),tt=[];for(let K=0;K<ql.length;K+=1)tt[K]=Eo(Po(l,ql,K));D=new qe({props:{variant:"ghost",size:"sm",title:"Load saved config",$$slots:{default:[nf]},$$scope:{ctx:l}}}),D.$on("click",l[49]),E=new qe({props:{variant:"ghost",size:"sm",title:"Save current settings",$$slots:{default:[sf]},$$scope:{ctx:l}}}),E.$on("click",l[50]),R=new qe({props:{variant:"ghost",size:"sm",title:"Edit exclusion patterns",$$slots:{default:[of]},$$scope:{ctx:l}}}),R.$on("click",l[51]);let rt=l[42]&&Mo(l),Qe=l[43]&&jo(l),Xe=l[6]==="code"&&Lo(l),Ze=l[6]==="git"&&Bo(l),at=l[6]==="image"&&Ho(l),ct=l[6]==="image_file"&&Go(l),ft=l[37]&&Jo(l),ut=l[40]&&Yo(l);Ht=new Ie({props:{variant:"info",$$slots:{default:[mf]},$$scope:{ctx:l}}}),Et=new qe({props:{variant:"ghost",size:"sm",$$slots:{default:[hf]},$$scope:{ctx:l}}}),Et.$on("click",l[107]),Mt=new qe({props:{variant:"ghost",size:"sm",$$slots:{default:[gf]},$$scope:{ctx:l}}}),Mt.$on("click",l[108]);const as=[$f,bf],rl=[];function cs(K,ge){return K[45].length===0?0:1}ot=cs(l),dt=rl[ot]=as[ot](l);let vt=l[35]>0&&Xo(),Tl=_e(l[47]),lt=[];for(let K=0;K<Tl.length;K+=1)lt[K]=Zo(So(l,Tl,K));let Dl=_e(l[29]),nt=[];for(let K=0;K<Dl.length;K+=1)nt[K]=xo(Co(l,Dl,K));let Pl=_e(l[30]),st=[];for(let K=0;K<Pl.length;K+=1)st[K]=ei(yo(l,Pl,K));let mt=l[35]>0&&!l[27]&&ti();return Wt=new qe({props:{variant:"primary",type:"submit",disabled:l[31],$$slots:{default:[Cf]},$$scope:{ctx:l}}}),Un=Zr(l[72][0]),{c(){e=d("form"),t=d("div"),n=d("div"),s=d("label"),s.textContent="App Name *",i=b(),o=d("input"),c=b(),r=d("div"),f=d("label"),f.textContent="Project",p=b(),_=d("input"),v=b(),h=d("div"),m=d("label"),m.textContent="Environment",g=b(),y=d("select");for(let K=0;K<tt.length;K+=1)tt[K].c();C=b(),k=d("div"),S=d("span"),S.textContent="Config:",M=b(),oe(D.$$.fragment),T=b(),oe(E.$$.fragment),j=b(),oe(R.$$.fragment),O=b(),rt&&rt.c(),z=b(),Qe&&Qe.c(),F=b(),H=d("div"),W=d("label"),W.innerHTML='Tags <small class="svelte-78e7a1">(comma-separated)</small>',I=b(),J=d("input"),A=b(),G=d("div"),N=d("label"),N.textContent="Source Type *",U=b(),Y=d("div"),Z=d("label"),ie=d("input"),le=q(`
              📁 Local Code`),ee=b(),ue=d("label"),x=d("input"),he=q(`
              📦 Git Repo`),re=b(),X=d("label"),de=d("input"),pe=q(`
              🐳 Registry`),be=b(),fe=d("label"),ye=d("input"),Oe=q(`
              📦 Local Image`),pt=b(),Xe&&Xe.c(),et=b(),Ze&&Ze.c(),Ot=b(),at&&at.c(),At=b(),ct&&ct.c(),Se=b(),Le=d("div"),Tt=d("label"),Tt.textContent="App Port",dl=b(),Ke=d("input"),_l=b(),Ft=d("small"),Ft.textContent="Port your app listens on inside the container",ln=b(),Dt=d("div"),Xt=d("label"),Xt.textContent="Environment Variables",$l=b(),wt=d("textarea"),nn=b(),kl=d("small"),kl.textContent="One per line: KEY=value",Fl=b(),ze=d("div"),vl=d("div"),vl.innerHTML="<span>🔧</span> <span>Service Configuration</span>",sn=b(),zt=d("label"),Bt=d("input"),on=b(),zl=d("span"),zl.textContent="Auto-inject service discovery",wl=b(),Bl=d("small"),Bl.textContent="Injects DATABASE_URL, REDIS_URL, etc. based on dependencies",yl=b(),ft&&ft.c(),Cl=b(),Ul=d("div"),Pt=b(),Zt=d("label"),Ut=d("input"),rn=b(),Il=d("span"),Il.textContent="💾 Persist data (mount volume)",an=b(),Hl=d("small"),Hl.textContent="Mounts /data volume for databases and stateful services",cn=b(),Gl=d("div"),fn=b(),xt=d("label"),It=d("input"),un=b(),Wl=d("span"),Wl.textContent="🌐 Setup domain (Cloudflare)",pn=b(),Jl=d("small"),Jl.textContent="Auto-provision subdomain with SSL via Cloudflare",dn=b(),ut&&ut.c(),_n=b(),gt=d("div"),el=d("div"),tl=d("div"),Yl=d("span"),Yl.textContent="🖥️ Servers",vn=b(),oe(Ht.$$.fragment),mn=b(),ll=d("div"),oe(Et.$$.fragment),hn=b(),oe(Mt.$$.fragment),gn=b(),ml=d("div"),dt.c(),bn=b(),Sl=d("div"),jt=d("div"),nl=d("div"),Gt=d("label"),$n=q("Snapshot "),vt&&vt.c(),kn=b(),_t=d("select"),sl=d("option"),sl.textContent="Select snapshot...";for(let K=0;K<lt.length;K+=1)lt[K].c();wn=b(),ol=d("div"),hl=d("label"),hl.textContent="Region",yn=b(),bt=d("select");for(let K=0;K<nt.length;K+=1)nt[K].c();Cn=b(),il=d("div"),gl=d("label"),gl.textContent="Size",Sn=b(),$t=d("select");for(let K=0;K<st.length;K+=1)st[K].c();qn=b(),yt=d("div"),Vl=d("span"),Vl.textContent="➕ New servers:",V=b(),ce=d("div"),me=d("button"),me.textContent="−",Me=b(),Te=d("input"),Re=b(),Pe=d("button"),Pe.textContent="+",it=b(),mt&&mt.c(),Ct=b(),oe(Wt.$$.fragment),u(s,"for","deploy-name"),u(s,"class","svelte-78e7a1"),u(o,"id","deploy-name"),u(o,"type","text"),u(o,"placeholder","my-app"),o.required=!0,u(o,"pattern","[-a-z0-9]+"),u(o,"title","Lowercase letters, numbers, hyphens only"),u(o,"class","svelte-78e7a1"),u(n,"class","form-group svelte-78e7a1"),u(f,"for","deploy-project"),u(f,"class","svelte-78e7a1"),u(_,"id","deploy-project"),u(_,"type","text"),u(_,"placeholder","my-project"),u(_,"pattern","[-a-z0-9]*"),u(_,"class","svelte-78e7a1"),u(r,"class","form-group svelte-78e7a1"),u(m,"for","deploy-env"),u(m,"class","svelte-78e7a1"),u(y,"id","deploy-env"),u(y,"class","svelte-78e7a1"),l[2]===void 0&&Ue(()=>l[68].call(y)),u(h,"class","form-group svelte-78e7a1"),u(t,"class","form-row three-col svelte-78e7a1"),u(S,"class","config-label svelte-78e7a1"),u(k,"class","config-bar svelte-78e7a1"),u(W,"for","deploy-tags"),u(W,"class","svelte-78e7a1"),u(J,"id","deploy-tags"),u(J,"type","text"),u(J,"placeholder","api, backend, v2"),u(J,"class","svelte-78e7a1"),u(H,"class","form-group svelte-78e7a1"),u(N,"class","svelte-78e7a1"),u(ie,"type","radio"),ie.__value="code",Q(ie,ie.__value),u(ie,"class","svelte-78e7a1"),u(Z,"class","source-option svelte-78e7a1"),$e(Z,"active",l[6]==="code"),u(x,"type","radio"),x.__value="git",Q(x,x.__value),u(x,"class","svelte-78e7a1"),u(ue,"class","source-option svelte-78e7a1"),$e(ue,"active",l[6]==="git"),u(de,"type","radio"),de.__value="image",Q(de,de.__value),u(de,"class","svelte-78e7a1"),u(X,"class","source-option svelte-78e7a1"),$e(X,"active",l[6]==="image"),u(ye,"type","radio"),ye.__value="image_file",Q(ye,ye.__value),u(ye,"class","svelte-78e7a1"),u(fe,"class","source-option svelte-78e7a1"),$e(fe,"active",l[6]==="image_file"),u(Y,"class","source-radio-group svelte-78e7a1"),u(G,"class","form-group svelte-78e7a1"),u(Tt,"for","deploy-port"),u(Tt,"class","svelte-78e7a1"),u(Ke,"id","deploy-port"),u(Ke,"type","number"),u(Ke,"min","1"),u(Ke,"max","65535"),u(Ke,"class","svelte-78e7a1"),u(Ft,"class","svelte-78e7a1"),u(Le,"class","form-group svelte-78e7a1"),u(Xt,"for","deploy-envvars"),u(Xt,"class","svelte-78e7a1"),u(wt,"id","deploy-envvars"),u(wt,"rows","3"),u(wt,"placeholder","KEY=value ANOTHER_KEY=value"),u(wt,"class","svelte-78e7a1"),u(kl,"class","svelte-78e7a1"),u(Dt,"class","form-group svelte-78e7a1"),u(vl,"class","config-header svelte-78e7a1"),u(Bt,"type","checkbox"),u(Bt,"class","svelte-78e7a1"),u(zt,"class","checkbox-label svelte-78e7a1"),u(Ul,"class","config-divider svelte-78e7a1"),u(Ut,"type","checkbox"),u(Ut,"class","svelte-78e7a1"),u(Zt,"class","checkbox-label svelte-78e7a1"),u(Gl,"class","config-divider svelte-78e7a1"),u(It,"type","checkbox"),u(It,"class","svelte-78e7a1"),u(xt,"class","checkbox-label svelte-78e7a1"),u(ze,"class","service-config svelte-78e7a1"),u(tl,"class","server-title svelte-78e7a1"),u(ll,"class","server-actions svelte-78e7a1"),u(el,"class","server-header svelte-78e7a1"),u(ml,"class","server-list svelte-78e7a1"),u(Gt,"for","snapshot-select"),u(Gt,"class","svelte-78e7a1"),sl.__value="",Q(sl,sl.__value),u(_t,"id","snapshot-select"),u(_t,"class","svelte-78e7a1"),l[27]===void 0&&Ue(()=>l[110].call(_t)),u(nl,"class","form-group svelte-78e7a1"),u(hl,"for","region-select"),u(hl,"class","svelte-78e7a1"),u(bt,"id","region-select"),u(bt,"class","svelte-78e7a1"),l[3]===void 0&&Ue(()=>l[111].call(bt)),u(ol,"class","form-group svelte-78e7a1"),u(gl,"for","size-select"),u(gl,"class","svelte-78e7a1"),u($t,"id","size-select"),u($t,"class","svelte-78e7a1"),l[28]===void 0&&Ue(()=>l[112].call($t)),u(il,"class","form-group svelte-78e7a1"),u(jt,"class","form-row three-col svelte-78e7a1"),u(Sl,"class","provisioning-config svelte-78e7a1"),u(me,"type","button"),u(me,"class","svelte-78e7a1"),u(Te,"type","number"),u(Te,"min","0"),u(Te,"max","10"),u(Te,"class","svelte-78e7a1"),u(Pe,"type","button"),u(Pe,"class","svelte-78e7a1"),u(ce,"class","number-spinner svelte-78e7a1"),u(yt,"class","new-servers svelte-78e7a1"),u(gt,"class","server-selection svelte-78e7a1"),Un.p(ie,x,de,ye)},m(K,ge){w(K,e,ge),a(e,t),a(t,n),a(n,s),a(n,i),a(n,o),Q(o,l[0]),a(t,c),a(t,r),a(r,f),a(r,p),a(r,_),Q(_,l[1]),a(t,v),a(t,h),a(h,m),a(h,g),a(h,y);for(let He=0;He<tt.length;He+=1)tt[He]&&tt[He].m(y,null);De(y,l[2],!0),a(e,C),a(e,k),a(k,S),a(k,M),ne(D,k,null),a(k,T),ne(E,k,null),a(k,j),ne(R,k,null),a(k,O),rt&&rt.m(k,null),a(e,z),Qe&&Qe.m(e,null),a(e,F),a(e,H),a(H,W),a(H,I),a(H,J),Q(J,l[5]),a(e,A),a(e,G),a(G,N),a(G,U),a(G,Y),a(Y,Z),a(Z,ie),ie.checked=ie.__value===l[6],a(Z,le),a(Y,ee),a(Y,ue),a(ue,x),x.checked=x.__value===l[6],a(ue,he),a(Y,re),a(Y,X),a(X,de),de.checked=de.__value===l[6],a(X,pe),a(Y,be),a(Y,fe),a(fe,ye),ye.checked=ye.__value===l[6],a(fe,Oe),a(e,pt),Xe&&Xe.m(e,null),a(e,et),Ze&&Ze.m(e,null),a(e,Ot),at&&at.m(e,null),a(e,At),ct&&ct.m(e,null),a(e,Se),a(e,Le),a(Le,Tt),a(Le,dl),a(Le,Ke),Q(Ke,l[7]),a(Le,_l),a(Le,Ft),a(e,ln),a(e,Dt),a(Dt,Xt),a(Dt,$l),a(Dt,wt),Q(wt,l[8]),a(Dt,nn),a(Dt,kl),a(e,Fl),a(e,ze),a(ze,vl),a(ze,sn),a(ze,zt),a(zt,Bt),Bt.checked=l[37],a(zt,on),a(zt,zl),a(ze,wl),a(ze,Bl),a(ze,yl),ft&&ft.m(ze,null),a(ze,Cl),a(ze,Ul),a(ze,Pt),a(ze,Zt),a(Zt,Ut),Ut.checked=l[38],a(Zt,rn),a(Zt,Il),a(ze,an),a(ze,Hl),a(ze,cn),a(ze,Gl),a(ze,fn),a(ze,xt),a(xt,It),It.checked=l[40],a(xt,un),a(xt,Wl),a(ze,pn),a(ze,Jl),a(ze,dn),ut&&ut.m(ze,null),a(e,_n),a(e,gt),a(gt,el),a(el,tl),a(tl,Yl),a(tl,vn),ne(Ht,tl,null),a(el,mn),a(el,ll),ne(Et,ll,null),a(ll,hn),ne(Mt,ll,null),a(gt,gn),a(gt,ml),rl[ot].m(ml,null),a(gt,bn),a(gt,Sl),a(Sl,jt),a(jt,nl),a(nl,Gt),a(Gt,$n),vt&&vt.m(Gt,null),a(nl,kn),a(nl,_t),a(_t,sl);for(let He=0;He<lt.length;He+=1)lt[He]&&lt[He].m(_t,null);De(_t,l[27],!0),a(jt,wn),a(jt,ol),a(ol,hl),a(ol,yn),a(ol,bt);for(let He=0;He<nt.length;He+=1)nt[He]&&nt[He].m(bt,null);De(bt,l[3],!0),a(jt,Cn),a(jt,il),a(il,gl),a(il,Sn),a(il,$t);for(let He=0;He<st.length;He+=1)st[He]&&st[He].m($t,null);De($t,l[28],!0),a(gt,qn),a(gt,yt),a(yt,Vl),a(yt,V),a(yt,ce),a(ce,me),a(ce,Me),a(ce,Te),Q(Te,l[35]),a(ce,Re),a(ce,Pe),a(yt,it),mt&&mt.m(yt,null),a(e,Ct),ne(Wt,e,null),Lt=!0,In||(rs=[te(o,"input",l[66]),te(_,"input",l[67]),te(y,"change",l[68]),te(J,"input",l[70]),te(ie,"change",l[71]),te(x,"change",l[73]),te(de,"change",l[74]),te(ye,"change",l[75]),te(Ke,"input",l[96]),te(wt,"input",l[97]),te(Bt,"change",l[98]),te(Ut,"change",l[103]),te(It,"change",l[104]),te(_t,"change",l[110]),te(bt,"change",l[111]),te($t,"change",l[112]),te(me,"click",l[113]),te(Te,"input",l[114]),te(Pe,"click",l[115]),te(e,"submit",l[63])],In=!0)},p(K,ge){if(ge[0]&1&&o.value!==K[0]&&Q(o,K[0]),ge[0]&2&&_.value!==K[1]&&Q(_,K[1]),ge[1]&131072){ql=_e(K[48]);let Ce;for(Ce=0;Ce<ql.length;Ce+=1){const St=Po(K,ql,Ce);tt[Ce]?tt[Ce].p(St,ge):(tt[Ce]=Eo(St),tt[Ce].c(),tt[Ce].m(y,null))}for(;Ce<tt.length;Ce+=1)tt[Ce].d(1);tt.length=ql.length}ge[0]&4|ge[1]&131072&&De(y,K[2]);const He={};ge[5]&8192&&(He.$$scope={dirty:ge,ctx:K}),D.$set(He);const fs={};ge[5]&8192&&(fs.$$scope={dirty:ge,ctx:K}),E.$set(fs);const us={};ge[5]&8192&&(us.$$scope={dirty:ge,ctx:K}),R.$set(us),K[42]?rt?rt.p(K,ge):(rt=Mo(K),rt.c(),rt.m(k,null)):rt&&(rt.d(1),rt=null),K[43]?Qe?(Qe.p(K,ge),ge[1]&4096&&P(Qe,1)):(Qe=jo(K),Qe.c(),P(Qe,1),Qe.m(e,F)):Qe&&(ke(),L(Qe,1,1,()=>{Qe=null}),we()),ge[0]&32&&J.value!==K[5]&&Q(J,K[5]),ge[0]&64&&(ie.checked=ie.__value===K[6]),(!Lt||ge[0]&64)&&$e(Z,"active",K[6]==="code"),ge[0]&64&&(x.checked=x.__value===K[6]),(!Lt||ge[0]&64)&&$e(ue,"active",K[6]==="git"),ge[0]&64&&(de.checked=de.__value===K[6]),(!Lt||ge[0]&64)&&$e(X,"active",K[6]==="image"),ge[0]&64&&(ye.checked=ye.__value===K[6]),(!Lt||ge[0]&64)&&$e(fe,"active",K[6]==="image_file"),K[6]==="code"?Xe?(Xe.p(K,ge),ge[0]&64&&P(Xe,1)):(Xe=Lo(K),Xe.c(),P(Xe,1),Xe.m(e,et)):Xe&&(ke(),L(Xe,1,1,()=>{Xe=null}),we()),K[6]==="git"?Ze?(Ze.p(K,ge),ge[0]&64&&P(Ze,1)):(Ze=Bo(K),Ze.c(),P(Ze,1),Ze.m(e,Ot)):Ze&&(ke(),L(Ze,1,1,()=>{Ze=null}),we()),K[6]==="image"?at?at.p(K,ge):(at=Ho(K),at.c(),at.m(e,At)):at&&(at.d(1),at=null),K[6]==="image_file"?ct?ct.p(K,ge):(ct=Go(K),ct.c(),ct.m(e,Se)):ct&&(ct.d(1),ct=null),ge[0]&128&&Nt(Ke.value)!==K[7]&&Q(Ke,K[7]),ge[0]&256&&Q(wt,K[8]),ge[1]&64&&(Bt.checked=K[37]),K[37]?ft?ft.p(K,ge):(ft=Jo(K),ft.c(),ft.m(ze,Cl)):ft&&(ft.d(1),ft=null),ge[1]&128&&(Ut.checked=K[38]),ge[1]&512&&(It.checked=K[40]),K[40]?ut?ut.p(K,ge):(ut=Yo(K),ut.c(),ut.m(ze,null)):ut&&(ut.d(1),ut=null);const ps={};ge[1]&8|ge[5]&8192&&(ps.$$scope={dirty:ge,ctx:K}),Ht.$set(ps);const ds={};ge[5]&8192&&(ds.$$scope={dirty:ge,ctx:K}),Et.$set(ds);const _s={};ge[5]&8192&&(_s.$$scope={dirty:ge,ctx:K}),Mt.$set(_s);let Hn=ot;if(ot=cs(K),ot===Hn?rl[ot].p(K,ge):(ke(),L(rl[Hn],1,1,()=>{rl[Hn]=null}),we(),dt=rl[ot],dt?dt.p(K,ge):(dt=rl[ot]=as[ot](K),dt.c()),P(dt,1),dt.m(ml,null)),K[35]>0?vt||(vt=Xo(),vt.c(),vt.m(Gt,null)):vt&&(vt.d(1),vt=null),ge[1]&65536){Tl=_e(K[47]);let Ce;for(Ce=0;Ce<Tl.length;Ce+=1){const St=So(K,Tl,Ce);lt[Ce]?lt[Ce].p(St,ge):(lt[Ce]=Zo(St),lt[Ce].c(),lt[Ce].m(_t,null))}for(;Ce<lt.length;Ce+=1)lt[Ce].d(1);lt.length=Tl.length}if(ge[0]&134217728|ge[1]&65536&&De(_t,K[27]),ge[0]&536870912){Dl=_e(K[29]);let Ce;for(Ce=0;Ce<Dl.length;Ce+=1){const St=Co(K,Dl,Ce);nt[Ce]?nt[Ce].p(St,ge):(nt[Ce]=xo(St),nt[Ce].c(),nt[Ce].m(bt,null))}for(;Ce<nt.length;Ce+=1)nt[Ce].d(1);nt.length=Dl.length}if(ge[0]&536870920&&De(bt,K[3]),ge[0]&1073741824){Pl=_e(K[30]);let Ce;for(Ce=0;Ce<Pl.length;Ce+=1){const St=yo(K,Pl,Ce);st[Ce]?st[Ce].p(St,ge):(st[Ce]=ei(St),st[Ce].c(),st[Ce].m($t,null))}for(;Ce<st.length;Ce+=1)st[Ce].d(1);st.length=Pl.length}ge[0]&1342177280&&De($t,K[28]),ge[1]&16&&Nt(Te.value)!==K[35]&&Q(Te,K[35]),K[35]>0&&!K[27]?mt||(mt=ti(),mt.c(),mt.m(yt,null)):mt&&(mt.d(1),mt=null);const Gn={};ge[1]&1&&(Gn.disabled=K[31]),ge[1]&1|ge[5]&8192&&(Gn.$$scope={dirty:ge,ctx:K}),Wt.$set(Gn)},i(K){Lt||(P(D.$$.fragment,K),P(E.$$.fragment,K),P(R.$$.fragment,K),P(Qe),P(Xe),P(Ze),P(Ht.$$.fragment,K),P(Et.$$.fragment,K),P(Mt.$$.fragment,K),P(dt),P(Wt.$$.fragment,K),Lt=!0)},o(K){L(D.$$.fragment,K),L(E.$$.fragment,K),L(R.$$.fragment,K),L(Qe),L(Xe),L(Ze),L(Ht.$$.fragment,K),L(Et.$$.fragment,K),L(Mt.$$.fragment,K),L(dt),L(Wt.$$.fragment,K),Lt=!1},d(K){K&&$(e),Ee(tt,K),se(D),se(E),se(R),rt&&rt.d(),Qe&&Qe.d(),Xe&&Xe.d(),Ze&&Ze.d(),at&&at.d(),ct&&ct.d(),ft&&ft.d(),ut&&ut.d(),se(Ht),se(Et),se(Mt),rl[ot].d(),vt&&vt.d(),Ee(lt,K),Ee(nt,K),Ee(st,K),mt&&mt.d(),se(Wt),Un.r(),In=!1,Fe(rs)}}}function qf(l){let e;return{c(){e=d("div"),e.innerHTML='<p>No deployment in progress</p> <p class="hint svelte-78e7a1">Fill in the form and click Deploy to start</p>',u(e,"class","empty-state svelte-78e7a1")},m(t,n){w(t,e,n)},p:ae,d(t){t&&$(e)}}}function Tf(l){let e,t,n,s,i,o,c=_e(l[33]),r=[];for(let v=0;v<c.length;v+=1)r[v]=li(wo(l,c,v));function f(v,h){if(v[36]&&v[36].success)return Pf;if(v[36]&&!v[36].success)return Df}let p=f(l),_=p&&p(l);return{c(){e=d("div"),t=d("div"),n=d("div"),s=b(),i=d("div");for(let v=0;v<r.length;v+=1)r[v].c();o=b(),_&&_.c(),u(n,"class","progress-fill svelte-78e7a1"),Ae(n,"width",l[32]+"%"),u(t,"class","progress-bar svelte-78e7a1"),u(i,"class","log-output svelte-78e7a1"),u(e,"class","progress-section svelte-78e7a1")},m(v,h){w(v,e,h),a(e,t),a(t,n),a(e,s),a(e,i);for(let m=0;m<r.length;m+=1)r[m]&&r[m].m(i,null);a(e,o),_&&_.m(e,null)},p(v,h){if(h[1]&2&&Ae(n,"width",v[32]+"%"),h[1]&4){c=_e(v[33]);let m;for(m=0;m<c.length;m+=1){const g=wo(v,c,m);r[m]?r[m].p(g,h):(r[m]=li(g),r[m].c(),r[m].m(i,null))}for(;m<r.length;m+=1)r[m].d(1);r.length=c.length}p===(p=f(v))&&_?_.p(v,h):(_&&_.d(1),_=p&&p(v),_&&(_.c(),_.m(e,null)))},d(v){v&&$(e),Ee(r,v),_&&_.d()}}}function li(l){let e,t,n=l[64].time.toLocaleTimeString()+"",s,i,o,c=ui(l[64].message)+"",r,f;return{c(){e=d("div"),t=d("span"),s=q(n),i=b(),o=new $a(!1),r=b(),u(t,"class","log-time svelte-78e7a1"),o.a=r,u(e,"class",f="log-line "+l[64].type+" svelte-78e7a1")},m(p,_){w(p,e,_),a(e,t),a(t,s),a(e,i),o.m(c,e),a(e,r)},p(p,_){_[1]&4&&n!==(n=p[64].time.toLocaleTimeString()+"")&&B(s,n),_[1]&4&&c!==(c=ui(p[64].message)+"")&&o.p(c),_[1]&4&&f!==(f="log-line "+p[64].type+" svelte-78e7a1")&&u(e,"class",f)},d(p){p&&$(e)}}}function Df(l){let e,t,n,s,i,o=l[2].toUpperCase()+"",c,r,f,p=l[36].error&&ni(l);function _(m,g){return m[36].servers&&m[36].servers.length>0?Mf:Ef}let v=_(l),h=v(l);return{c(){e=d("div"),t=d("div"),n=d("h4"),n.textContent="❌ Deployment Failed",s=b(),i=d("span"),c=q(o),r=b(),p&&p.c(),f=b(),h.c(),u(n,"class","svelte-78e7a1"),u(i,"class","env-badge svelte-78e7a1"),u(t,"class","result-header svelte-78e7a1"),u(e,"class","deploy-failure-box svelte-78e7a1")},m(m,g){w(m,e,g),a(e,t),a(t,n),a(t,s),a(t,i),a(i,c),a(e,r),p&&p.m(e,null),a(e,f),h.m(e,null)},p(m,g){g[0]&4&&o!==(o=m[2].toUpperCase()+"")&&B(c,o),m[36].error?p?p.p(m,g):(p=ni(m),p.c(),p.m(e,f)):p&&(p.d(1),p=null),v===(v=_(m))&&h?h.p(m,g):(h.d(1),h=v(m),h&&(h.c(),h.m(e,null)))},d(m){m&&$(e),p&&p.d(),h.d()}}}function Pf(l){let e,t,n,s,i,o=l[2].toUpperCase()+"",c,r,f,p=l[36].domain&&ii(l),_=l[36].servers&&l[36].servers.length>0&&ri(l);return{c(){e=d("div"),t=d("div"),n=d("h4"),n.textContent="✅ Deployment Complete",s=b(),i=d("span"),c=q(o),r=b(),p&&p.c(),f=b(),_&&_.c(),u(n,"class","svelte-78e7a1"),u(i,"class","env-badge svelte-78e7a1"),u(t,"class","result-header svelte-78e7a1"),u(e,"class","deploy-success-box svelte-78e7a1")},m(v,h){w(v,e,h),a(e,t),a(t,n),a(t,s),a(t,i),a(i,c),a(e,r),p&&p.m(e,null),a(e,f),_&&_.m(e,null)},p(v,h){h[0]&4&&o!==(o=v[2].toUpperCase()+"")&&B(c,o),v[36].domain?p?p.p(v,h):(p=ii(v),p.c(),p.m(e,f)):p&&(p.d(1),p=null),v[36].servers&&v[36].servers.length>0?_?_.p(v,h):(_=ri(v),_.c(),_.m(e,null)):_&&(_.d(1),_=null)},d(v){v&&$(e),p&&p.d(),_&&_.d()}}}function ni(l){let e,t=l[36].error+"",n;return{c(){e=d("p"),n=q(t)},m(s,i){w(s,e,i),a(e,n)},p(s,i){i[1]&32&&t!==(t=s[36].error+"")&&B(n,t)},d(s){s&&$(e)}}}function Ef(l){let e;return{c(){e=d("p"),e.textContent="No server details available",Ae(e,"margin-top","8px"),Ae(e,"opacity","0.8")},m(t,n){w(t,e,n)},p:ae,d(t){t&&$(e)}}}function Mf(l){let e,t,n,s,i=_e(l[36].servers),o=[];for(let c=0;c<i.length;c+=1)o[c]=oi(bo(l,i,c));return{c(){e=d("div"),t=d("span"),t.textContent="Server Status:",n=b(),s=d("div");for(let c=0;c<o.length;c+=1)o[c].c();u(t,"class","result-label svelte-78e7a1"),u(s,"class","server-links svelte-78e7a1"),u(e,"class","result-section svelte-78e7a1"),Ae(e,"margin-top","12px")},m(c,r){w(c,e,r),a(e,t),a(e,n),a(e,s);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(s,null)},p(c,r){if(r[0]&1|r[1]&32){i=_e(c[36].servers);let f;for(f=0;f<i.length;f+=1){const p=bo(c,i,f);o[f]?o[f].p(p,r):(o[f]=oi(p),o[f].c(),o[f].m(s,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=i.length}},d(c){c&&$(e),Ee(o,c)}}}function jf(l){let e,t=l[138].ip+"",n,s,i=l[138].error&&si(l);return{c(){e=q("❌ "),n=q(t),i&&i.c(),s=je()},m(o,c){w(o,e,c),w(o,n,c),i&&i.m(o,c),w(o,s,c)},p(o,c){c[1]&32&&t!==(t=o[138].ip+"")&&B(n,t),o[138].error?i?i.p(o,c):(i=si(o),i.c(),i.m(s.parentNode,s)):i&&(i.d(1),i=null)},d(o){o&&($(e),$(n),$(s)),i&&i.d(o)}}}function Lf(l){let e,t=l[138].ip+"",n;return{c(){e=q("✅ "),n=q(t)},m(s,i){w(s,e,i),w(s,n,i)},p(s,i){i[1]&32&&t!==(t=s[138].ip+"")&&B(n,t)},d(s){s&&($(e),$(n))}}}function si(l){let e,t=l[138].error+"",n;return{c(){e=q(": "),n=q(t)},m(s,i){w(s,e,i),w(s,n,i)},p(s,i){i[1]&32&&t!==(t=s[138].error+"")&&B(n,t)},d(s){s&&($(e),$(n))}}}function oi(l){let e,t,n,s,i,o,c;function r(v,h){return v[138].success?Lf:jf}let f=r(l),p=f(l);function _(){return l[118](l[138])}return{c(){e=d("div"),t=d("span"),p.c(),n=b(),s=d("button"),s.textContent="📋 Logs",i=b(),u(s,"class","log-btn svelte-78e7a1"),u(e,"class","server-link-row svelte-78e7a1")},m(v,h){w(v,e,h),a(e,t),p.m(t,null),a(e,n),a(e,s),a(e,i),o||(c=te(s,"click",_),o=!0)},p(v,h){l=v,f===(f=r(l))&&p?p.p(l,h):(p.d(1),p=f(l),p&&(p.c(),p.m(t,null)))},d(v){v&&$(e),p.d(),o=!1,c()}}}function ii(l){let e,t,n,s,i,o=l[36].domain+"",c,r;return{c(){e=d("div"),t=d("span"),t.textContent="Domain:",n=b(),s=d("a"),i=q("https://"),c=q(o),u(t,"class","result-label svelte-78e7a1"),u(s,"href",r="https://"+l[36].domain),u(s,"target","_blank"),u(s,"class","result-link svelte-78e7a1"),u(e,"class","result-section svelte-78e7a1")},m(f,p){w(f,e,p),a(e,t),a(e,n),a(e,s),a(s,i),a(s,c)},p(f,p){p[1]&32&&o!==(o=f[36].domain+"")&&B(c,o),p[1]&32&&r!==(r="https://"+f[36].domain)&&u(s,"href",r)},d(f){f&&$(e)}}}function ri(l){let e,t,n,s,i,o=l[36].servers.some(pi),c,r=_e(l[36].servers.filter(vi)),f=[];for(let _=0;_<r.length;_+=1)f[_]=ai(ko(l,r,_));let p=o&&ci(l);return{c(){e=d("div"),t=d("span"),t.textContent="Servers:",n=b(),s=d("div");for(let _=0;_<f.length;_+=1)f[_].c();i=b(),p&&p.c(),c=je(),u(t,"class","result-label svelte-78e7a1"),u(s,"class","server-links svelte-78e7a1"),u(e,"class","result-section svelte-78e7a1")},m(_,v){w(_,e,v),a(e,t),a(e,n),a(e,s);for(let h=0;h<f.length;h+=1)f[h]&&f[h].m(s,null);w(_,i,v),p&&p.m(_,v),w(_,c,v)},p(_,v){if(v[0]&1|v[1]&32){r=_e(_[36].servers.filter(vi));let h;for(h=0;h<r.length;h+=1){const m=ko(_,r,h);f[h]?f[h].p(m,v):(f[h]=ai(m),f[h].c(),f[h].m(s,null))}for(;h<f.length;h+=1)f[h].d(1);f.length=r.length}v[1]&32&&(o=_[36].servers.some(pi)),o?p?p.p(_,v):(p=ci(_),p.c(),p.m(c.parentNode,c)):p&&(p.d(1),p=null)},d(_){_&&($(e),$(i),$(c)),Ee(f,_),p&&p.d(_)}}}function ai(l){let e,t,n=l[138].url+"",s,i,o,c,r,f,p;function _(){return l[116](l[138])}return{c(){e=d("div"),t=d("a"),s=q(n),o=b(),c=d("button"),c.textContent="📋 Logs",r=b(),u(t,"href",i=l[138].url),u(t,"target","_blank"),u(t,"class","result-link svelte-78e7a1"),u(c,"class","log-btn svelte-78e7a1"),u(e,"class","server-link-row svelte-78e7a1")},m(v,h){w(v,e,h),a(e,t),a(t,s),a(e,o),a(e,c),a(e,r),f||(p=te(c,"click",_),f=!0)},p(v,h){l=v,h[1]&32&&n!==(n=l[138].url+"")&&B(s,n),h[1]&32&&i!==(i=l[138].url)&&u(t,"href",i)},d(v){v&&$(e),f=!1,p()}}}function ci(l){let e,t,n,s=_e(l[36].servers.filter(mi)),i=[];for(let o=0;o<s.length;o+=1)i[o]=fi($o(l,s,o));return{c(){e=d("div"),t=d("span"),t.textContent="Failed Servers:",n=b();for(let o=0;o<i.length;o+=1)i[o].c();u(t,"class","result-label svelte-78e7a1"),Ae(t,"color","#fef3c7"),u(e,"class","failed-servers-section svelte-78e7a1")},m(o,c){w(o,e,c),a(e,t),a(e,n);for(let r=0;r<i.length;r+=1)i[r]&&i[r].m(e,null)},p(o,c){if(c[0]&1|c[1]&32){s=_e(o[36].servers.filter(mi));let r;for(r=0;r<s.length;r+=1){const f=$o(o,s,r);i[r]?i[r].p(f,c):(i[r]=fi(f),i[r].c(),i[r].m(e,null))}for(;r<i.length;r+=1)i[r].d(1);i.length=s.length}},d(o){o&&$(e),Ee(i,o)}}}function fi(l){let e,t,n,s=l[138].ip+"",i,o,c=(l[138].error||"Unknown error")+"",r,f,p,_,v,h;function m(){return l[117](l[138])}return{c(){e=d("div"),t=d("span"),n=q("❌ "),i=q(s),o=q(": "),r=q(c),f=b(),p=d("button"),p.textContent="📋 Logs",_=b(),Ae(t,"color","#fef3c7"),u(p,"class","log-btn svelte-78e7a1"),u(e,"class","server-link-row svelte-78e7a1")},m(g,y){w(g,e,y),a(e,t),a(t,n),a(t,i),a(t,o),a(t,r),a(e,f),a(e,p),a(e,_),v||(h=te(p,"click",m),v=!0)},p(g,y){l=g,y[1]&32&&s!==(s=l[138].ip+"")&&B(i,s),y[1]&32&&c!==(c=(l[138].error||"Unknown error")+"")&&B(r,c)},d(g){g&&$(e),v=!1,h()}}}function Nf(l){let e;function t(i,o){return i[31]||i[33].length>0?Tf:qf}let n=t(l),s=n(l);return{c(){s.c(),e=je()},m(i,o){s.m(i,o),w(i,e,o)},p(i,o){n===(n=t(i))&&s?s.p(i,o):(s.d(1),s=n(i),s&&(s.c(),s.m(e.parentNode,e)))},d(i){i&&$(e),s.d(i)}}}function Rf(l){let e,t,n,s,i,o;return n=new Ne({props:{title:"🚀 Deploy Application",$$slots:{default:[Sf]},$$scope:{ctx:l}}}),i=new Ne({props:{title:"📋 Deployment Progress",$$slots:{default:[Nf]},$$scope:{ctx:l}}}),{c(){e=d("div"),t=d("div"),oe(n.$$.fragment),s=b(),oe(i.$$.fragment),u(t,"class","deploy-grid svelte-78e7a1"),u(e,"class","deploy-page svelte-78e7a1")},m(c,r){w(c,e,r),a(e,t),ne(n,t,null),a(t,s),ne(i,t,null),o=!0},p(c,r){const f={};r[0]&2147483647|r[1]&131033|r[5]&8192&&(f.$$scope={dirty:r,ctx:c}),n.$set(f);const p={};r[0]&5|r[1]&39|r[5]&8192&&(p.$$scope={dirty:r,ctx:c}),i.$set(p)},i(c){o||(P(n.$$.fragment,c),P(i.$$.fragment,c),o=!0)},o(c){L(n.$$.fragment,c),L(i.$$.fragment,c),o=!1},d(c){c&&$(e),se(n),se(i)}}}function Of(l){return new Promise((e,t)=>{const n=new FileReader;n.onload=()=>e(new Uint8Array(n.result)),n.onerror=t,n.readAsArrayBuffer(l)})}function Af(l){return new Promise((e,t)=>{const n=new FileReader;n.onload=()=>e(n.result),n.onerror=t,n.readAsText(l)})}function ui(l){const e=/(https?:\/\/[^\s]+)/g;return l.replace(e,'<a href="$1" target="_blank" class="log-link">$1</a>')}const pi=l=>!l.success,Ff=l=>l.isMain,di=l=>l.isMain,_i=l=>l.isMain,vi=l=>l.success,mi=l=>!l.success;function zf(l,e,t){let n,s,i,o;We(l,Zn,V=>t(47,i=V)),We(l,bl,V=>t(65,o=V));let c="",r="",f="prod",p="",_="code",v=8e3,h="",m="",g="main",y="",C=[],k="",S="",M=null,D="",T="",E="",j=[],R=null,O=null,z=!0,F="",H="",W=!1,I="",J="",A="",G="lon1",N="s-1vcpu-2gb",U=[],Y=[],Z=!1,ie=0,le=[],ee=new Set,ue=0,x=null,he=!0,re=!0,X={postgres:!1,redis:!1,mysql:!1,mongo:!1},de=!0,pe="digitalpixo.com",be="",fe="",ye=!1,Oe=["node_modules/","__pycache__/","*.pyc",".git/",".venv/","venv/",".env",".DS_Store",".idea/",".vscode/","dist/","build/",".pytest_cache/",".mypy_cache/"],pt=Oe.join(`
`);const et=[...Oe],Ot=["dev","test","staging","uat","prod"];ul(()=>{At(),Se(),Le()});async function At(){try{const V=await Be("GET","/infra/servers");bl.set(V.servers||V||[])}catch(V){console.error("Failed to load servers:",V)}}async function Se(){try{const V=await Be("GET","/infra/snapshots");Zn.set(V.snapshots||V||[]),i.length>0&&!A&&t(27,A=i[0].id)}catch(V){console.error("Failed to load snapshots:",V)}}async function Le(){try{try{const V=await Be("GET","/infra/regions");t(29,U=V.regions||V||[])}catch{t(29,U=[{slug:"nyc1",name:"New York 1"},{slug:"nyc3",name:"New York 3"},{slug:"sfo3",name:"San Francisco 3"},{slug:"ams3",name:"Amsterdam 3"},{slug:"sgp1",name:"Singapore 1"},{slug:"lon1",name:"London 1"},{slug:"fra1",name:"Frankfurt 1"}])}try{const V=await Be("GET","/infra/sizes");t(30,Y=V.sizes||V||[])}catch{t(30,Y=[{slug:"s-1vcpu-512mb-10gb",description:"512MB / 1 vCPU"},{slug:"s-1vcpu-1gb",description:"1GB / 1 vCPU"},{slug:"s-1vcpu-2gb",description:"2GB / 1 vCPU"},{slug:"s-2vcpu-2gb",description:"2GB / 2 vCPU"},{slug:"s-2vcpu-4gb",description:"4GB / 2 vCPU"},{slug:"s-4vcpu-8gb",description:"8GB / 4 vCPU"}])}}catch(V){console.error("Failed to load regions/sizes:",V)}}async function Tt(){var V;if(!c){ve.warning("Enter app name first");return}t(42,fe="Loading...");try{const me=await Be("GET",`/infra/deploy-configs/${r||"default"}/${c}/${f}`);Ke(me),t(42,fe="✓ Loaded"),ve.success("Config loaded")}catch(ce){(V=ce.message)!=null&&V.includes("404")?(t(42,fe="No saved config"),ve.info("No saved config found")):(t(42,fe="Load failed"),ve.error("Failed to load config"))}}async function dl(){try{const ce=await Be("GET",`/infra/deploy-configs/${r||"default"}/${c}/${f}`);Ke(ce),t(42,fe="✓ Auto-loaded")}catch{t(42,fe="")}}function Ke(V){var ce,me;V.source_type&&t(6,_={folder:"code",git:"git",image:"image"}[V.source_type]||V.source_type),V.git_url&&t(9,m=V.git_url),V.git_branch&&t(10,g=V.git_branch),V.port&&t(7,v=V.port),V.env_vars&&Object.keys(V.env_vars).length>0&&t(8,h=Object.entries(V.env_vars).map(([Me,Te])=>`${Me}=${Te}`).join(`
`)),((ce=V.exclude_patterns)==null?void 0:ce.length)>0&&(Oe=V.exclude_patterns,t(44,pt=Oe.join(`
`))),((me=V.server_ips)==null?void 0:me.length)>0&&t(34,ee=new Set(V.server_ips))}async function _l(){if(!c){ve.warning("Enter app name first");return}t(42,fe="Saving...");const V={};for(const Me of h.split(`
`)){const Te=Me.trim();if(Te&&Te.includes("=")){const[Re,...Pe]=Te.split("=");V[Re.trim()]=Pe.join("=").trim()}}const ce=pt.split(`
`).map(Me=>Me.trim()).filter(Boolean),me={project_name:r||"default",service_name:c,env:f,source_type:_==="code"?"folder":_,git_url:m||null,git_branch:g||"main",exclude_patterns:ce.length>0?ce:et,port:v,env_vars:V,server_ips:Array.from(ee)};try{await Be("POST","/infra/deploy-configs",me),t(42,fe="✓ Saved"),ve.success("Config saved")}catch{t(42,fe="Save failed"),ve.error("Failed to save config")}}function Ft(){t(43,ye=!ye),ye||(Oe=pt.split(`
`).map(V=>V.trim()).filter(Boolean))}function ln(){Oe=[...et],t(44,pt=et.join(`
`)),ve.info("Reset to default patterns")}function Dt(V){for(const ce of Oe)if(ce.endsWith("/")){const me=ce.slice(0,-1);if(V.startsWith(me+"/")||V.includes("/"+me+"/"))return!0}else if(ce.startsWith("*")){const me=ce.slice(1);if(V.endsWith(me))return!0}else if(V===ce||V.endsWith("/"+ce))return!0;return!1}function Xt(V){ee.has(V)?ee.delete(V):ee.add(V),t(34,ee)}function $l(V){V?n.forEach(ce=>{var Me,Te,Re;const me=ce.ip||((Re=(Te=(Me=ce.networks)==null?void 0:Me.v4)==null?void 0:Te[0])==null?void 0:Re.ip_address);me&&ee.add(me)}):ee.clear(),t(34,ee)}function wt(){O=async(V,ce)=>{await kl(V,ce,j.length===0)},R==null||R.click()}async function nn(V){const ce=Array.from(V.target.files||[]);if(!ce.length||!O)return;console.log(`[Deploy] Browser returned ${ce.length} files`),ce.length<50?console.log("[Deploy] Files:",ce.map(Te=>Te.webkitRelativePath)):console.log("[Deploy] First 20 files:",ce.slice(0,20).map(Te=>Te.webkitRelativePath));const Me=ce[0].webkitRelativePath.split("/")[0];await O(ce,Me),O=null,V.target.value=""}async function kl(V,ce,me){if(j.some(Pe=>Pe.name===ce)){ve.error(`Folder "${ce}" is already added`);return}me&&j.some(Pe=>Pe.isMain)&&t(19,j=j.map(Pe=>({...Pe,isMain:!1})));const Me=[];let Te=null,Re=0;for(const Pe of V){const it=Pe.webkitRelativePath.replace(`${ce}/`,"");if(Dt(it)){Re++;continue}const Ct=await Of(Pe);Me.push({path:it,content:Ct}),me&&it==="Dockerfile"&&(Te=await Af(Pe))}console.log(`[Deploy] Processed ${ce}/: ${V.length} total, ${Re} skipped, ${Me.length} included`),t(19,j=[...j,{name:ce,fileContents:Me,isMain:me,fileCount:Me.length}]),vl(),j.some(Pe=>Pe.isMain)&&zt(Te),z&&r&&c&&Bl(),ve.success(`Added ${ce}/ (${Me.length} files)`)}function Fl(V){t(19,j=j.filter((ce,me)=>me!==V)),vl(),j.length>0&&!j.some(ce=>ce.isMain)&&t(19,j=j.map((ce,me)=>({...ce,isMain:me===0})))}function ze(V){t(19,j=j.map((ce,me)=>({...ce,isMain:me===V}))),zt()}function vl(){const V=j.some(ce=>ce.isMain);j.length&&V&&sn()}async function sn(){if(!j.length)return;const{default:V}=await go(async()=>{const{default:me}=await import("https://cdn.jsdelivr.net/npm/jszip@3.10.1/+esm");return{default:me}},[]),ce=new V;for(const me of j)for(const{path:Me,content:Te}of me.fileContents)ce.file(`${me.name}/${Me}`,Te);j.length>1&&F&&ce.file("Dockerfile",F),await ce.generateAsync({type:"blob"})}function zt(V=null){if(t(24,W=!0),V)t(22,F=V),t(23,H="from folder");else if(j.length>1)t(22,F=Bt()),t(23,H="multi-folder");else if(j.length===1){const ce=j[0];t(22,F=on(ce.fileContents.map(me=>me.path))),t(23,H="generated")}zl()}function Bt(){const V=j.find(Te=>Te.isMain);if(!V)return"";const ce=j.filter(Te=>!Te.isMain),me=V.fileContents.some(Te=>Te.path==="requirements.txt");V.fileContents.some(Te=>Te.path==="package.json");let Me=`FROM python:3.11-slim

WORKDIR /app

`;for(const Te of ce)Me+=`# Copy ${Te.name}
COPY ${Te.name}/ ./${Te.name}/

`;return Me+=`# Copy main service
COPY ${V.name}/ ./${V.name}/

`,me&&(Me+=`# Install dependencies
RUN pip install --no-cache-dir -r ${V.name}/requirements.txt

`),Me+=`EXPOSE ${v}

`,Me+=`CMD ["uvicorn", "${V.name}.main:app", "--host", "0.0.0.0", "--port", "${v}"]
`,Me}function on(V){const ce=V.includes("requirements.txt"),me=V.includes("package.json"),Me=V.includes("pyproject.toml");return ce||Me?`FROM python:3.11-slim

WORKDIR /app

COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

COPY . .

EXPOSE ${v}

CMD ["uvicorn", "main:app", "--host", "0.0.0.0", "--port", "${v}"]
`:me?`FROM node:20-alpine

WORKDIR /app

COPY package*.json ./
RUN npm ci --only=production

COPY . .

EXPOSE ${v}

CMD ["node", "index.js"]
`:`FROM python:3.11-slim

WORKDIR /app

COPY . .

EXPOSE ${v}

CMD ["python", "main.py"]
`}function zl(){const V=F.match(/^FROM\s+(\S+)/m),ce=F.match(/^CMD\s+(.+)$/m);t(25,I=V?V[1]:""),t(26,J=ce?ce[1]:"")}function wl(V){V==="from"&&I?t(22,F=F.replace(/^FROM\s+\S+/m,`FROM ${I}`)):V==="cmd"&&J&&(F.includes("CMD ")?t(22,F=F.replace(/^CMD\s+.+$/m,`CMD ${J}`)):t(22,F+=`
CMD ${J}
`)),t(23,H="edited")}function Bl(){if(!r||!c)return;const V=`build_folders_${r}_${c}`,ce=j.map(me=>({name:me.name,isMain:me.isMain}));localStorage.setItem(V,JSON.stringify(ce))}function yl(V){if(!k.trim()){ve.error("Please enter a folder path");return}const ce=k.trim();if(V&&C.some(me=>me.isMain)&&t(12,C=C.map(me=>({...me,isMain:!1}))),C.some(me=>me.path===ce)){ve.error("This folder is already added");return}t(12,C=[...C,{path:ce,isMain:V}]),t(13,k="")}function Cl(V){t(12,C=C.filter((ce,me)=>me!==V))}function Ul(V){var me;const ce=(me=V.target.files)==null?void 0:me[0];if(ce){if(!ce.name.endsWith(".tar")&&!ce.name.endsWith(".tar.gz")){ve.error("Only .tar or .tar.gz image files are supported");return}t(15,M=ce),ve.success(`Selected: ${ce.name}`)}}function Pt(V,ce="info"){t(33,le=[...le,{message:V,type:ce,time:new Date}])}async function Zt(V){if(V.preventDefault(),!c){ve.error("App name is required");return}if(_==="code"&&!j.some(ce=>ce.isMain)){ve.error("Add a main folder with your code");return}if(_==="git"&&!m){ve.error("Git URL is required");return}if(_==="image"&&!S){ve.error("Docker image URL is required");return}if(_==="image_file"&&!M){ve.error("Upload a Docker image file (.tar)");return}if(_==="image_file"&&!D){ve.error("Image name is required for local images");return}if(ee.size===0&&ue===0){ve.error("Select at least one server or add new servers");return}if(ue>0&&!A){ve.error("Select a snapshot for new servers");return}if(!Zl()){ve.error("Configure your DO Token in Settings first");return}if(de&&!Qn()){ve.error("Configure your Cloudflare Token in Settings first (required for domain setup)");return}t(31,Z=!0),t(32,ie=0),t(33,le=[]),t(36,x=null);try{Pt(`Starting deployment of ${c}...`),t(32,ie=10);let ce=null;if(_==="code"){Pt("Creating code archive...");const{default:Pe}=await go(async()=>{const{default:Ct}=await import("https://cdn.jsdelivr.net/npm/jszip@3.10.1/+esm");return{default:Ct}},[]),it=new Pe;for(const Ct of j)for(const{path:Wt,content:Lt}of Ct.fileContents)it.file(`${Ct.name}/${Wt}`,Lt);j.length>1&&F&&it.file("Dockerfile",F),ce=await it.generateAsync({type:"blob"})}Pt("Sending deployment request... server provisioning may take 30-60s"),t(32,ie=20);const me=Zl(),Me=Qn(),Te=new URLSearchParams({do_token:me,snapshot_id:A||"",new_server_count:String(ue),region:G,size:N,project:r||"",environment:f,setup_domain:String(de),base_domain:pe,domain_aliases:JSON.stringify(be.split(",").map(Pe=>Pe.trim()).filter(Boolean))});de&&Me&&Te.set("cf_token",Me);const Re=new FormData;Re.append("name",c),Re.append("port",String(v)),Re.append("source_type",_),Re.append("env_vars",h),Re.append("tags",p),Re.append("server_ips",JSON.stringify(Array.from(ee))),Re.append("depends_on",JSON.stringify(Object.entries(X).filter(([Pe,it])=>it).map(([Pe])=>Pe))),Re.append("exclude_patterns",JSON.stringify(Oe)),F&&Re.append("dockerfile",F),m&&Re.append("git_url",m),g&&Re.append("git_branch",g),y&&Re.append("git_token",y),C.length&&Re.append("git_folders",JSON.stringify(C)),S&&Re.append("image",S),ce&&Re.append("code_tar",ce,"code.zip"),_==="image_file"&&(M&&Re.append("image_tar",M),D&&Re.append("image",D),T&&Re.append("container_port",String(T)),E&&Re.append("host_port",String(E))),await Fa(`/infra/deploy/multipart?${Te}`,Re,Pe=>{if(Pe.type==="log")Pt(Pe.message);else if(Pe.type==="progress")t(32,ie=Math.min(20+(Pe.percent||0)*.8,95));else if(Pe.type==="done"){if(t(36,x=Pe),t(32,ie=100),!Pe.success){const it=Pe.failed_count||0,Ct=Pe.error||`Deployment failed: ${it} server(s) failed`;throw new Error(Ct)}}else if(Pe.type==="error")throw new Error(Pe.message||"Deployment failed")}),Pt("✅ Deployment complete!","success"),ve.success("Deployment successful!"),await At()}catch(ce){let me="Unknown error";if(typeof ce=="string")me=ce;else if(ce!=null&&ce.message)me=ce.message;else if(ce!=null&&ce.detail)me=ce.detail;else if(ce!=null&&ce.error)me=ce.error;else try{me=JSON.stringify(ce)}catch{me=String(ce)}Pt(`❌ Error: ${me}`,"error"),ve.error(me)}finally{t(31,Z=!1)}}const Ut=[[]];function rn(){c=this.value,t(0,c)}function Il(){r=this.value,t(1,r)}function an(){f=Ge(this),t(2,f),t(48,Ot)}function Hl(){pt=this.value,t(44,pt)}function cn(){p=this.value,t(5,p)}function Gl(){_=this.__value,t(6,_)}function fn(){_=this.__value,t(6,_)}function xt(){_=this.__value,t(6,_)}function It(){_=this.__value,t(6,_)}function un(V){kt[V?"unshift":"push"](()=>{R=V,t(20,R)})}const Wl=V=>ze(V),pn=V=>Fl(V);function Jl(){z=this.checked,t(21,z)}function dn(){F=this.value,t(22,F)}function _n(){I=Ge(this),t(25,I)}const gt=()=>wl("from");function el(){J=this.value,t(26,J)}const tl=()=>wl("cmd");function Yl(){m=this.value,t(9,m)}function vn(){g=this.value,t(10,g)}const Ht=V=>Cl(V);function mn(){k=this.value,t(13,k)}const ll=()=>yl(!0),Et=()=>yl(!1);function hn(){y=this.value,t(11,y)}function Mt(){S=this.value,t(14,S)}function gn(){D=this.value,t(16,D)}function ml(){T=Nt(this.value),t(17,T)}function ot(){E=Nt(this.value),t(18,E)}function dt(){v=Nt(this.value),t(7,v)}function bn(){h=this.value,t(8,h)}function Sl(){he=this.checked,t(37,he)}function jt(){X.postgres=this.checked,t(39,X)}function nl(){X.redis=this.checked,t(39,X)}function Gt(){X.mysql=this.checked,t(39,X)}function $n(){X.mongo=this.checked,t(39,X)}function kn(){re=this.checked,t(38,re)}function _t(){de=this.checked,t(40,de)}function sl(){pe=this.value,t(4,pe)}function wn(){be=this.value,t(41,be)}const ol=()=>$l(!0),hl=()=>$l(!1),yn=V=>Xt(V);function bt(){A=Ge(this),t(27,A)}function Cn(){G=Ge(this),t(3,G),t(29,U)}function il(){N=Ge(this),t(28,N),t(30,Y)}const gl=()=>t(35,ue=Math.max(0,ue-1));function Sn(){ue=Nt(this.value),t(35,ue)}const $t=()=>t(35,ue=Math.min(10,ue+1)),qn=V=>window.open(`/api/v1/infra/logs/${V.ip}/${V.container_name||x.container_name||c}`,"_blank"),yt=V=>window.open(`/api/v1/infra/logs/${V.ip}/${V.container_name||x.container_name||c}`,"_blank"),Vl=V=>window.open(`/api/v1/infra/logs/${V.ip}/${V.container_name||x.container_name||c}`,"_blank");return l.$$.update=()=>{l.$$.dirty[0]&8|l.$$.dirty[2]&8&&t(45,n=o.filter(V=>!G||V.region===G)),l.$$.dirty[0]&23&&t(46,s=c&&r&&f?`${c}-${r}-${f}.${pe}`:""),l.$$.dirty[0]&3&&c&&r&&dl()},[c,r,f,G,pe,p,_,v,h,m,g,y,C,k,S,M,D,T,E,j,R,z,F,H,W,I,J,A,N,U,Y,Z,ie,le,ee,ue,x,he,re,X,de,be,fe,ye,pt,n,s,i,Ot,Tt,_l,Ft,ln,Xt,$l,wt,nn,Fl,ze,wl,yl,Cl,Ul,Zt,Pt,o,rn,Il,an,Hl,cn,Gl,Ut,fn,xt,It,un,Wl,pn,Jl,dn,_n,gt,el,tl,Yl,vn,Ht,mn,ll,Et,hn,Mt,gn,ml,ot,dt,bn,Sl,jt,nl,Gt,$n,kn,_t,sl,wn,ol,hl,yn,bt,Cn,il,gl,Sn,$t,qn,yt,Vl]}class Bf extends Ve{constructor(e){super(),Ye(this,e,zf,Rf,Je,{},null,[-1,-1,-1,-1,-1,-1])}}function hi(l,e,t){const n=l.slice();return n[31]=e[t],n}function gi(l,e,t){const n=l.slice();return n[34]=e[t][0],n[35]=e[t][1],n}function Uf(l){const e=l.slice(),t=e[8].config_snapshot;return e[30]=t,e}function bi(l,e,t){const n=l.slice();return n[38]=e[t],n}function $i(l,e,t){const n=l.slice();return n[41]=e[t],n}function ki(l,e,t){const n=l.slice();n[44]=e[t];const s=xl(n[44]);return n[45]=s,n}function wi(l){let e,t,n=Vi(l[10])+"",s;return{c(){e=d("span"),t=q("Updated "),s=q(n),u(e,"class","last-updated svelte-q3m9en")},m(i,o){w(i,e,o),a(e,t),a(e,s)},p(i,o){o[0]&1024&&n!==(n=Vi(i[10])+"")&&B(s,n)},d(i){i&&$(e)}}}function If(l){let e;return{c(){e=q("↻ Refresh")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Hf(l){let e,t,n=_e(l[9]),s=[];for(let o=0;o<n.length;o+=1)s[o]=Si(ki(l,n,o));const i=o=>L(s[o],1,1,()=>{s[o]=null});return{c(){for(let o=0;o<s.length;o+=1)s[o].c();e=je()},m(o,c){for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(o,c);w(o,e,c),t=!0},p(o,c){if(c[0]&10752){n=_e(o[9]);let r;for(r=0;r<n.length;r+=1){const f=ki(o,n,r);s[r]?(s[r].p(f,c),P(s[r],1)):(s[r]=Si(f),s[r].c(),P(s[r],1),s[r].m(e.parentNode,e))}for(ke(),r=n.length;r<s.length;r+=1)i(r);we()}},i(o){if(!t){for(let c=0;c<n.length;c+=1)P(s[c]);t=!0}},o(o){s=s.filter(Boolean);for(let c=0;c<s.length;c+=1)L(s[c]);t=!1},d(o){o&&$(e),Ee(s,o)}}}function Gf(l){let e;return{c(){e=d("tr"),e.innerHTML='<td colspan="11" class="empty-cell svelte-q3m9en">No deployments found</td>',u(e,"class","svelte-q3m9en")},m(t,n){w(t,e,n)},p:ae,i:ae,o:ae,d(t){t&&$(e)}}}function Wf(l){let e;return{c(){e=d("tr"),e.innerHTML='<td colspan="11" class="loading-cell svelte-q3m9en">Loading deployment history...</td>',u(e,"class","svelte-q3m9en")},m(t,n){w(t,e,n)},p:ae,i:ae,o:ae,d(t){t&&$(e)}}}function Jf(l){let e=(l[44].environment||"-")+"",t;return{c(){t=q(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&512&&e!==(e=(n[44].environment||"-")+"")&&B(t,e)},d(n){n&&$(t)}}}function Yf(l){let e;return{c(){e=d("span"),e.textContent="-",u(e,"class","version-none svelte-q3m9en")},m(t,n){w(t,e,n)},p:ae,d(t){t&&$(e)}}}function Vf(l){let e,t,n=l[44].version+"",s;return{c(){e=d("span"),t=q("v"),s=q(n),u(e,"class","version-badge svelte-q3m9en")},m(i,o){w(i,e,o),a(e,t),a(e,s)},p(i,o){o[0]&512&&n!==(n=i[44].version+"")&&B(s,n)},d(i){i&&$(e)}}}function Kf(l){let e=l[44].is_rollback?"rollback":"deploy",t;return{c(){t=q(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&512&&e!==(e=n[44].is_rollback?"rollback":"deploy")&&B(t,e)},d(n){n&&$(t)}}}function Qf(l){let e=l[45]+"",t;return{c(){t=q(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&512&&e!==(e=n[45]+"")&&B(t,e)},d(n){n&&$(t)}}}function yi(l){let e,t,n;function s(){return l[19](l[44])}return{c(){e=d("button"),e.textContent="⚙️",u(e,"class","icon-btn svelte-q3m9en"),u(e,"title","View config")},m(i,o){w(i,e,o),t||(n=te(e,"click",s),t=!0)},p(i,o){l=i},d(i){i&&$(e),t=!1,n()}}}function Ci(l){let e,t,n;function s(){return l[20](l[44])}return{c(){e=d("button"),e.innerHTML=`<span class="rollback-icon svelte-q3m9en">⏪</span>
                      Rollback`,u(e,"class","rollback-btn svelte-q3m9en")},m(i,o){w(i,e,o),t||(n=te(e,"click",s),t=!0)},p(i,o){l=i},d(i){i&&$(e),t=!1,n()}}}function Si(l){let e,t,n,s=(l[44].project||"-")+"",i,o,c,r,f=(l[44].service||l[44].name)+"",p,_,v,h,m,g,y,C,k=fl(l[44].deployed_at||l[44].created_at)+"",S,M,D,T=(l[44].deployed_by||l[44].user||"-")+"",E,j,R,O,z,F,H,W,I,J=(l[44].comment||"-")+"",A,G,N,U,Y,Z,ie;h=new Ie({props:{variant:l[44].environment==="prod"?"purple":l[44].environment==="staging"?"warning":"info",$$slots:{default:[Jf]},$$scope:{ctx:l}}});function le(re,X){return re[44].version?Vf:Yf}let ee=le(l),ue=ee(l);O=new Ie({props:{variant:l[44].is_rollback?"warning":"info",$$slots:{default:[Kf]},$$scope:{ctx:l}}}),H=new Ie({props:{variant:Nn(l[45]),$$slots:{default:[Qf]},$$scope:{ctx:l}}});let x=l[44].config_snapshot&&yi(l),he=l[44].is_current_active&&Ci(l);return{c(){e=d("tr"),t=d("td"),n=d("span"),i=q(s),o=b(),c=d("td"),r=d("span"),p=q(f),_=b(),v=d("td"),oe(h.$$.fragment),m=b(),g=d("td"),ue.c(),y=b(),C=d("td"),S=q(k),M=b(),D=d("td"),E=q(T),j=b(),R=d("td"),oe(O.$$.fragment),z=b(),F=d("td"),oe(H.$$.fragment),W=b(),I=d("td"),A=q(J),G=b(),N=d("td"),x&&x.c(),U=b(),Y=d("td"),he&&he.c(),Z=b(),u(n,"class","project-name svelte-q3m9en"),u(t,"class","svelte-q3m9en"),u(r,"class","service-name svelte-q3m9en"),u(c,"class","svelte-q3m9en"),u(v,"class","svelte-q3m9en"),u(g,"class","version-cell svelte-q3m9en"),u(C,"class","date-cell svelte-q3m9en"),u(D,"class","svelte-q3m9en"),u(R,"class","svelte-q3m9en"),u(F,"class","svelte-q3m9en"),u(I,"class","comment-cell svelte-q3m9en"),u(N,"class","config-cell svelte-q3m9en"),u(Y,"class","rollback-cell svelte-q3m9en"),u(e,"class","svelte-q3m9en")},m(re,X){w(re,e,X),a(e,t),a(t,n),a(n,i),a(e,o),a(e,c),a(c,r),a(r,p),a(e,_),a(e,v),ne(h,v,null),a(e,m),a(e,g),ue.m(g,null),a(e,y),a(e,C),a(C,S),a(e,M),a(e,D),a(D,E),a(e,j),a(e,R),ne(O,R,null),a(e,z),a(e,F),ne(H,F,null),a(e,W),a(e,I),a(I,A),a(e,G),a(e,N),x&&x.m(N,null),a(e,U),a(e,Y),he&&he.m(Y,null),a(e,Z),ie=!0},p(re,X){(!ie||X[0]&512)&&s!==(s=(re[44].project||"-")+"")&&B(i,s),(!ie||X[0]&512)&&f!==(f=(re[44].service||re[44].name)+"")&&B(p,f);const de={};X[0]&512&&(de.variant=re[44].environment==="prod"?"purple":re[44].environment==="staging"?"warning":"info"),X[0]&512|X[1]&131072&&(de.$$scope={dirty:X,ctx:re}),h.$set(de),ee===(ee=le(re))&&ue?ue.p(re,X):(ue.d(1),ue=ee(re),ue&&(ue.c(),ue.m(g,null))),(!ie||X[0]&512)&&k!==(k=fl(re[44].deployed_at||re[44].created_at)+"")&&B(S,k),(!ie||X[0]&512)&&T!==(T=(re[44].deployed_by||re[44].user||"-")+"")&&B(E,T);const pe={};X[0]&512&&(pe.variant=re[44].is_rollback?"warning":"info"),X[0]&512|X[1]&131072&&(pe.$$scope={dirty:X,ctx:re}),O.$set(pe);const be={};X[0]&512&&(be.variant=Nn(re[45])),X[0]&512|X[1]&131072&&(be.$$scope={dirty:X,ctx:re}),H.$set(be),(!ie||X[0]&512)&&J!==(J=(re[44].comment||"-")+"")&&B(A,J),re[44].config_snapshot?x?x.p(re,X):(x=yi(re),x.c(),x.m(N,null)):x&&(x.d(1),x=null),re[44].is_current_active?he?he.p(re,X):(he=Ci(re),he.c(),he.m(Y,null)):he&&(he.d(1),he=null)},i(re){ie||(P(h.$$.fragment,re),P(O.$$.fragment,re),P(H.$$.fragment,re),ie=!0)},o(re){L(h.$$.fragment,re),L(O.$$.fragment,re),L(H.$$.fragment,re),ie=!1},d(re){re&&$(e),se(h),ue.d(),se(O),se(H),x&&x.d(),he&&he.d()}}}function Xf(l){let e,t,n,s,i,o,c,r;const f=[Wf,Gf,Hf],p=[];function _(v,h){return v[0]&&v[9].length===0?0:v[9].length===0?1:2}return o=_(l),c=p[o]=f[o](l),{c(){e=d("div"),t=d("table"),n=d("thead"),n.innerHTML='<tr class="svelte-q3m9en"><th class="svelte-q3m9en">Project</th> <th class="svelte-q3m9en">Service</th> <th class="svelte-q3m9en">Environment</th> <th class="version-col svelte-q3m9en">v</th> <th class="svelte-q3m9en">Deployed</th> <th class="svelte-q3m9en">By</th> <th class="svelte-q3m9en">Type</th> <th class="svelte-q3m9en">Status</th> <th class="svelte-q3m9en">Comment</th> <th class="config-col svelte-q3m9en"></th> <th class="rollback-col svelte-q3m9en"></th></tr>',s=b(),i=d("tbody"),c.c(),u(t,"class","table svelte-q3m9en"),u(e,"class","table-container svelte-q3m9en")},m(v,h){w(v,e,h),a(e,t),a(t,n),a(t,s),a(t,i),p[o].m(i,null),r=!0},p(v,h){let m=o;o=_(v),o===m?p[o].p(v,h):(ke(),L(p[m],1,1,()=>{p[m]=null}),we(),c=p[o],c?c.p(v,h):(c=p[o]=f[o](v),c.c()),P(c,1),c.m(i,null))},i(v){r||(P(c),r=!0)},o(v){L(c),r=!1},d(v){v&&$(e),p[o].d()}}}function qi(l){let e,t,n,s=(l[2].service||l[2].name)+"",i,o,c,r=l[2].project+"",f,p,_=l[2].environment+"",v,h,m,g,y,C,k,S=fl(l[2].deployed_at||l[2].created_at)+"",M,D,T,E,j=(l[2].deployed_by||l[2].user||"unknown")+"",R,O,z,F,H,W,I,J,A,G,N=l[2].comment&&Ti(l);const U=[xf,Zf],Y=[];function Z(le,ee){return le[3].length===0?0:1}I=Z(l),J=Y[I]=U[I](l);let ie=l[6].length>0&&Pi(l);return{c(){e=d("div"),t=d("div"),n=d("div"),i=q(s),o=b(),c=d("div"),f=q(r),p=q(" / "),v=q(_),h=b(),m=d("div"),g=d("label"),g.textContent="📍 Current Deployment",y=b(),C=d("div"),k=d("div"),M=q(S),D=b(),T=d("div"),E=q("by "),R=q(j),O=b(),N&&N.c(),z=b(),F=d("div"),H=d("label"),H.textContent="🎯 Rollback to",W=b(),J.c(),A=b(),ie&&ie.c(),u(n,"class","service-name svelte-q3m9en"),u(c,"class","service-coords svelte-q3m9en"),u(t,"class","service-info svelte-q3m9en"),u(g,"class","svelte-q3m9en"),u(k,"class","deploy-date svelte-q3m9en"),u(T,"class","deploy-by svelte-q3m9en"),u(C,"class","deployment-card current svelte-q3m9en"),u(m,"class","section svelte-q3m9en"),u(H,"class","svelte-q3m9en"),u(F,"class","section svelte-q3m9en"),u(e,"class","rollback-content svelte-q3m9en")},m(le,ee){w(le,e,ee),a(e,t),a(t,n),a(n,i),a(t,o),a(t,c),a(c,f),a(c,p),a(c,v),a(e,h),a(e,m),a(m,g),a(m,y),a(m,C),a(C,k),a(k,M),a(C,D),a(C,T),a(T,E),a(T,R),a(C,O),N&&N.m(C,null),a(e,z),a(e,F),a(F,H),a(F,W),Y[I].m(F,null),a(e,A),ie&&ie.m(e,null),G=!0},p(le,ee){(!G||ee[0]&4)&&s!==(s=(le[2].service||le[2].name)+"")&&B(i,s),(!G||ee[0]&4)&&r!==(r=le[2].project+"")&&B(f,r),(!G||ee[0]&4)&&_!==(_=le[2].environment+"")&&B(v,_),(!G||ee[0]&4)&&S!==(S=fl(le[2].deployed_at||le[2].created_at)+"")&&B(M,S),(!G||ee[0]&4)&&j!==(j=(le[2].deployed_by||le[2].user||"unknown")+"")&&B(R,j),le[2].comment?N?N.p(le,ee):(N=Ti(le),N.c(),N.m(C,null)):N&&(N.d(1),N=null);let ue=I;I=Z(le),I===ue?Y[I].p(le,ee):(ke(),L(Y[ue],1,1,()=>{Y[ue]=null}),we(),J=Y[I],J?J.p(le,ee):(J=Y[I]=U[I](le),J.c()),P(J,1),J.m(F,null)),le[6].length>0?ie?ie.p(le,ee):(ie=Pi(le),ie.c(),ie.m(e,null)):ie&&(ie.d(1),ie=null)},i(le){G||(P(J),G=!0)},o(le){L(J),G=!1},d(le){le&&$(e),N&&N.d(),Y[I].d(),ie&&ie.d()}}}function Ti(l){let e,t=l[2].comment+"",n;return{c(){e=d("div"),n=q(t),u(e,"class","deploy-comment svelte-q3m9en")},m(s,i){w(s,e,i),a(e,n)},p(s,i){i[0]&4&&t!==(t=s[2].comment+"")&&B(n,t)},d(s){s&&$(e)}}}function Zf(l){let e,t,n=_e(l[3]),s=[];for(let o=0;o<n.length;o+=1)s[o]=Di($i(l,n,o));const i=o=>L(s[o],1,1,()=>{s[o]=null});return{c(){e=d("div");for(let o=0;o<s.length;o+=1)s[o].c();u(e,"class","deployment-list svelte-q3m9en")},m(o,c){w(o,e,c);for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(e,null);t=!0},p(o,c){if(c[0]&56){n=_e(o[3]);let r;for(r=0;r<n.length;r+=1){const f=$i(o,n,r);s[r]?(s[r].p(f,c),P(s[r],1)):(s[r]=Di(f),s[r].c(),P(s[r],1),s[r].m(e,null))}for(ke(),r=n.length;r<s.length;r+=1)i(r);we()}},i(o){if(!t){for(let c=0;c<n.length;c+=1)P(s[c]);t=!0}},o(o){s=s.filter(Boolean);for(let c=0;c<s.length;c+=1)L(s[c]);t=!1},d(o){o&&$(e),Ee(s,o)}}}function xf(l){let e;return{c(){e=d("div"),e.textContent="No previous deployments found",u(e,"class","no-deployments svelte-q3m9en")},m(t,n){w(t,e,n)},p:ae,i:ae,o:ae,d(t){t&&$(e)}}}function eu(l){let e=xl(l[41])+"",t;return{c(){t=q(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&8&&e!==(e=xl(n[41])+"")&&B(t,e)},d(n){n&&$(t)}}}function Di(l){let e,t,n,s=!1,i,o,c,r=fl(l[41].deployed_at||l[41].created_at)+"",f,p,_,v,h=(l[41].deployed_by||l[41].user||"unknown")+"",m,g,y,C,k,S,M,D;return y=new Ie({props:{variant:Nn(xl(l[41])),$$slots:{default:[eu]},$$scope:{ctx:l}}}),S=Zr(l[23][0]),{c(){e=d("label"),t=d("input"),i=b(),o=d("div"),c=d("div"),f=q(r),p=b(),_=d("div"),v=q("by "),m=q(h),g=b(),oe(y.$$.fragment),C=b(),u(t,"type","radio"),t.__value=n=l[41].id,Q(t,t.__value),t.disabled=l[5],u(t,"class","svelte-q3m9en"),u(c,"class","deploy-date svelte-q3m9en"),u(_,"class","deploy-by svelte-q3m9en"),u(o,"class","deploy-info svelte-q3m9en"),u(e,"class","deployment-option svelte-q3m9en"),$e(e,"selected",l[4]===l[41].id),S.p(t)},m(T,E){w(T,e,E),a(e,t),t.checked=t.__value===l[4],a(e,i),a(e,o),a(o,c),a(c,f),a(o,p),a(o,_),a(_,v),a(_,m),a(e,g),ne(y,e,null),a(e,C),k=!0,M||(D=te(t,"change",l[22]),M=!0)},p(T,E){(!k||E[0]&8&&n!==(n=T[41].id))&&(t.__value=n,Q(t,t.__value),s=!0),(!k||E[0]&32)&&(t.disabled=T[5]),(s||E[0]&24)&&(t.checked=t.__value===T[4]),(!k||E[0]&8)&&r!==(r=fl(T[41].deployed_at||T[41].created_at)+"")&&B(f,r),(!k||E[0]&8)&&h!==(h=(T[41].deployed_by||T[41].user||"unknown")+"")&&B(m,h);const j={};E[0]&8&&(j.variant=Nn(xl(T[41]))),E[0]&8|E[1]&131072&&(j.$$scope={dirty:E,ctx:T}),y.$set(j),(!k||E[0]&24)&&$e(e,"selected",T[4]===T[41].id)},i(T){k||(P(y.$$.fragment,T),k=!0)},o(T){L(y.$$.fragment,T),k=!1},d(T){T&&$(e),se(y),S.r(),M=!1,D()}}}function Pi(l){let e,t,n,s,i,o=_e(l[6]),c=[];for(let f=0;f<o.length;f+=1)c[f]=Ei(bi(l,o,f));let r=l[5]&&Mi();return{c(){e=d("div"),t=d("label"),t.textContent="📋 Progress",n=b(),s=d("div");for(let f=0;f<c.length;f+=1)c[f].c();i=b(),r&&r.c(),u(t,"class","svelte-q3m9en"),u(s,"class","rollback-logs svelte-q3m9en"),u(e,"class","section rollback-logs-section svelte-q3m9en")},m(f,p){w(f,e,p),a(e,t),a(e,n),a(e,s);for(let _=0;_<c.length;_+=1)c[_]&&c[_].m(s,null);a(s,i),r&&r.m(s,null)},p(f,p){if(p[0]&64){o=_e(f[6]);let _;for(_=0;_<o.length;_+=1){const v=bi(f,o,_);c[_]?c[_].p(v,p):(c[_]=Ei(v),c[_].c(),c[_].m(s,i))}for(;_<c.length;_+=1)c[_].d(1);c.length=o.length}f[5]?r||(r=Mi(),r.c(),r.m(s,null)):r&&(r.d(1),r=null)},d(f){f&&$(e),Ee(c,f),r&&r.d()}}}function Ei(l){let e,t=l[38].message+"",n,s;return{c(){e=d("div"),n=q(t),u(e,"class",s="log-entry log-"+l[38].type+" svelte-q3m9en")},m(i,o){w(i,e,o),a(e,n)},p(i,o){o[0]&64&&t!==(t=i[38].message+"")&&B(n,t),o[0]&64&&s!==(s="log-entry log-"+i[38].type+" svelte-q3m9en")&&u(e,"class",s)},d(i){i&&$(e)}}}function Mi(l){let e;return{c(){e=d("div"),e.innerHTML='<span class="spinner svelte-q3m9en">⏳</span> Working...',u(e,"class","log-entry log-info svelte-q3m9en")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function tu(l){let e,t,n=l[2]&&qi(l);return{c(){n&&n.c(),e=je()},m(s,i){n&&n.m(s,i),w(s,e,i),t=!0},p(s,i){s[2]?n?(n.p(s,i),i[0]&4&&P(n,1)):(n=qi(s),n.c(),P(n,1),n.m(e.parentNode,e)):n&&(ke(),L(n,1,1,()=>{n=null}),we())},i(s){t||(P(n),t=!0)},o(s){L(n),t=!1},d(s){s&&$(e),n&&n.d(s)}}}function lu(l){let e=l[6].length>0?"Close":"Cancel",t;return{c(){t=q(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&64&&e!==(e=n[6].length>0?"Close":"Cancel")&&B(t,e)},d(n){n&&$(t)}}}function nu(l){let e;return{c(){e=q("⏪ Execute Rollback")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function su(l){let e;return{c(){e=q("⏳ Rolling back...")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function ou(l){let e;function t(i,o){return i[5]?su:nu}let n=t(l),s=n(l);return{c(){s.c(),e=je()},m(i,o){s.m(i,o),w(i,e,o)},p(i,o){n!==(n=t(i))&&(s.d(1),s=n(i),s&&(s.c(),s.m(e.parentNode,e)))},d(i){i&&$(e),s.d(i)}}}function iu(l){let e,t,n,s,i;return t=new qe({props:{variant:"ghost",$$slots:{default:[lu]},$$scope:{ctx:l}}}),t.$on("click",l[21]),s=new qe({props:{variant:"warning",disabled:!l[4]||l[5],$$slots:{default:[ou]},$$scope:{ctx:l}}}),s.$on("click",l[14]),{c(){e=d("div"),oe(t.$$.fragment),n=b(),oe(s.$$.fragment),u(e,"slot","footer")},m(o,c){w(o,e,c),ne(t,e,null),a(e,n),ne(s,e,null),i=!0},p(o,c){const r={};c[0]&64|c[1]&131072&&(r.$$scope={dirty:c,ctx:o}),t.$set(r);const f={};c[0]&48&&(f.disabled=!o[4]||o[5]),c[0]&32|c[1]&131072&&(f.$$scope={dirty:c,ctx:o}),s.$set(f)},i(o){i||(P(t.$$.fragment,o),P(s.$$.fragment,o),i=!0)},o(o){L(t.$$.fragment,o),L(s.$$.fragment,o),i=!1},d(o){o&&$(e),se(t),se(s)}}}function ji(l){let e,t,n,s=(l[8].service_name||l[8].service)+"",i,o,c,r=l[8].environment+"",f,p,_=fl(l[8].deployed_at)+"",v,h,m,g,y;const C=[au,ru],k=[];function S(D,T){return D[8].config_snapshot?0:1}function M(D,T){return T===0?Uf(D):D}return m=S(l),g=k[m]=C[m](M(l,m)),{c(){e=d("div"),t=d("div"),n=d("span"),i=q(s),o=b(),c=d("span"),f=q(r),p=q(" • "),v=q(_),h=b(),g.c(),u(n,"class","service-name svelte-q3m9en"),u(c,"class","meta svelte-q3m9en"),u(t,"class","config-header-info svelte-q3m9en"),u(e,"class","config-content svelte-q3m9en")},m(D,T){w(D,e,T),a(e,t),a(t,n),a(n,i),a(t,o),a(t,c),a(c,f),a(c,p),a(c,v),a(e,h),k[m].m(e,null),y=!0},p(D,T){(!y||T[0]&256)&&s!==(s=(D[8].service_name||D[8].service)+"")&&B(i,s),(!y||T[0]&256)&&r!==(r=D[8].environment+"")&&B(f,r),(!y||T[0]&256)&&_!==(_=fl(D[8].deployed_at)+"")&&B(v,_);let E=m;m=S(D),m===E?k[m].p(M(D,m),T):(ke(),L(k[E],1,1,()=>{k[E]=null}),we(),g=k[m],g?g.p(M(D,m),T):(g=k[m]=C[m](M(D,m)),g.c()),P(g,1),g.m(e,null))},i(D){y||(P(g),y=!0)},o(D){L(g),y=!1},d(D){D&&$(e),k[m].d()}}}function ru(l){let e;return{c(){e=d("div"),e.textContent="No config snapshot available",u(e,"class","no-config svelte-q3m9en")},m(t,n){w(t,e,n)},p:ae,i:ae,o:ae,d(t){t&&$(e)}}}function au(l){var he,re;let e,t,n,s,i,o,c=(l[30].source_type||"-")+"",r,f,p,_,v,h,m,g,y=(l[30].port||"-")+"",C,k,S,M,D,T,E,j,R,O,z=l[30].env_vars&&Object.keys(l[30].env_vars).length>0,F,H,W,I=l[30].git_url&&Li(l),J=l[30].git_branch&&Ni(l),A=l[30].image&&Ri(l),G=l[30].container_port&&Oi(l),N=l[30].host_port&&Ai(l),U=l[30].snapshot_id&&Fi(l),Y=l[30].region&&zi(l),Z=l[30].size&&Bi(l),ie=((he=l[30].server_ips)==null?void 0:he.length)&&Ui(l),le=l[30].setup_domain&&Ii(),ee=l[30].base_domain&&Hi(l),ue=z&&Gi(l),x=((re=l[30].tags)==null?void 0:re.length)&&Ji(l);return{c(){e=d("table"),t=d("tbody"),n=d("tr"),s=d("td"),s.textContent="Source Type",i=d("td"),o=d("strong"),r=q(c),f=b(),I&&I.c(),p=b(),J&&J.c(),_=b(),A&&A.c(),v=b(),h=d("tr"),m=d("td"),m.textContent="Port",g=d("td"),C=q(y),k=b(),G&&G.c(),S=b(),N&&N.c(),M=b(),U&&U.c(),D=b(),Y&&Y.c(),T=b(),Z&&Z.c(),E=b(),ie&&ie.c(),j=b(),le&&le.c(),R=b(),ee&&ee.c(),O=b(),ue&&ue.c(),F=b(),x&&x.c(),H=je(),u(s,"class","label svelte-q3m9en"),u(i,"class","svelte-q3m9en"),u(m,"class","label svelte-q3m9en"),u(g,"class","svelte-q3m9en"),u(t,"class","svelte-q3m9en"),u(e,"class","config-table svelte-q3m9en")},m(X,de){w(X,e,de),a(e,t),a(t,n),a(n,s),a(n,i),a(i,o),a(o,r),a(t,f),I&&I.m(t,null),a(t,p),J&&J.m(t,null),a(t,_),A&&A.m(t,null),a(t,v),a(t,h),a(h,m),a(h,g),a(g,C),a(t,k),G&&G.m(t,null),a(t,S),N&&N.m(t,null),a(t,M),U&&U.m(t,null),a(t,D),Y&&Y.m(t,null),a(t,T),Z&&Z.m(t,null),a(t,E),ie&&ie.m(t,null),a(t,j),le&&le.m(t,null),a(t,R),ee&&ee.m(t,null),w(X,O,de),ue&&ue.m(X,de),w(X,F,de),x&&x.m(X,de),w(X,H,de),W=!0},p(X,de){var pe,be;(!W||de[0]&256)&&c!==(c=(X[30].source_type||"-")+"")&&B(r,c),X[30].git_url?I?I.p(X,de):(I=Li(X),I.c(),I.m(t,p)):I&&(I.d(1),I=null),X[30].git_branch?J?J.p(X,de):(J=Ni(X),J.c(),J.m(t,_)):J&&(J.d(1),J=null),X[30].image?A?A.p(X,de):(A=Ri(X),A.c(),A.m(t,v)):A&&(A.d(1),A=null),(!W||de[0]&256)&&y!==(y=(X[30].port||"-")+"")&&B(C,y),X[30].container_port?G?G.p(X,de):(G=Oi(X),G.c(),G.m(t,S)):G&&(G.d(1),G=null),X[30].host_port?N?N.p(X,de):(N=Ai(X),N.c(),N.m(t,M)):N&&(N.d(1),N=null),X[30].snapshot_id?U?U.p(X,de):(U=Fi(X),U.c(),U.m(t,D)):U&&(U.d(1),U=null),X[30].region?Y?Y.p(X,de):(Y=zi(X),Y.c(),Y.m(t,T)):Y&&(Y.d(1),Y=null),X[30].size?Z?Z.p(X,de):(Z=Bi(X),Z.c(),Z.m(t,E)):Z&&(Z.d(1),Z=null),(pe=X[30].server_ips)!=null&&pe.length?ie?ie.p(X,de):(ie=Ui(X),ie.c(),ie.m(t,j)):ie&&(ie.d(1),ie=null),X[30].setup_domain?le||(le=Ii(),le.c(),le.m(t,R)):le&&(le.d(1),le=null),X[30].base_domain?ee?ee.p(X,de):(ee=Hi(X),ee.c(),ee.m(t,null)):ee&&(ee.d(1),ee=null),de[0]&256&&(z=X[30].env_vars&&Object.keys(X[30].env_vars).length>0),z?ue?ue.p(X,de):(ue=Gi(X),ue.c(),ue.m(F.parentNode,F)):ue&&(ue.d(1),ue=null),(be=X[30].tags)!=null&&be.length?x?(x.p(X,de),de[0]&256&&P(x,1)):(x=Ji(X),x.c(),P(x,1),x.m(H.parentNode,H)):x&&(ke(),L(x,1,1,()=>{x=null}),we())},i(X){W||(P(x),W=!0)},o(X){L(x),W=!1},d(X){X&&($(e),$(O),$(F),$(H)),I&&I.d(),J&&J.d(),A&&A.d(),G&&G.d(),N&&N.d(),U&&U.d(),Y&&Y.d(),Z&&Z.d(),ie&&ie.d(),le&&le.d(),ee&&ee.d(),ue&&ue.d(X),x&&x.d(X)}}}function Li(l){let e,t,n,s=l[30].git_url+"",i;return{c(){e=d("tr"),t=d("td"),t.textContent="Git URL",n=d("td"),i=q(s),u(t,"class","label svelte-q3m9en"),u(n,"class","svelte-q3m9en")},m(o,c){w(o,e,c),a(e,t),a(e,n),a(n,i)},p(o,c){c[0]&256&&s!==(s=o[30].git_url+"")&&B(i,s)},d(o){o&&$(e)}}}function Ni(l){let e,t,n,s=l[30].git_branch+"",i;return{c(){e=d("tr"),t=d("td"),t.textContent="Git Branch",n=d("td"),i=q(s),u(t,"class","label svelte-q3m9en"),u(n,"class","svelte-q3m9en")},m(o,c){w(o,e,c),a(e,t),a(e,n),a(n,i)},p(o,c){c[0]&256&&s!==(s=o[30].git_branch+"")&&B(i,s)},d(o){o&&$(e)}}}function Ri(l){let e,t,n,s=l[30].image+"",i;return{c(){e=d("tr"),t=d("td"),t.textContent="Image",n=d("td"),i=q(s),u(t,"class","label svelte-q3m9en"),u(n,"class","svelte-q3m9en")},m(o,c){w(o,e,c),a(e,t),a(e,n),a(n,i)},p(o,c){c[0]&256&&s!==(s=o[30].image+"")&&B(i,s)},d(o){o&&$(e)}}}function Oi(l){let e,t,n,s=l[30].container_port+"",i;return{c(){e=d("tr"),t=d("td"),t.textContent="Container Port",n=d("td"),i=q(s),u(t,"class","label svelte-q3m9en"),u(n,"class","svelte-q3m9en")},m(o,c){w(o,e,c),a(e,t),a(e,n),a(n,i)},p(o,c){c[0]&256&&s!==(s=o[30].container_port+"")&&B(i,s)},d(o){o&&$(e)}}}function Ai(l){let e,t,n,s=l[30].host_port+"",i;return{c(){e=d("tr"),t=d("td"),t.textContent="Host Port",n=d("td"),i=q(s),u(t,"class","label svelte-q3m9en"),u(n,"class","svelte-q3m9en")},m(o,c){w(o,e,c),a(e,t),a(e,n),a(n,i)},p(o,c){c[0]&256&&s!==(s=o[30].host_port+"")&&B(i,s)},d(o){o&&$(e)}}}function Fi(l){let e,t,n,s=l[30].snapshot_id+"",i;return{c(){e=d("tr"),t=d("td"),t.textContent="Snapshot ID",n=d("td"),i=q(s),u(t,"class","label svelte-q3m9en"),u(n,"class","svelte-q3m9en")},m(o,c){w(o,e,c),a(e,t),a(e,n),a(n,i)},p(o,c){c[0]&256&&s!==(s=o[30].snapshot_id+"")&&B(i,s)},d(o){o&&$(e)}}}function zi(l){let e,t,n,s=l[30].region+"",i;return{c(){e=d("tr"),t=d("td"),t.textContent="Region",n=d("td"),i=q(s),u(t,"class","label svelte-q3m9en"),u(n,"class","svelte-q3m9en")},m(o,c){w(o,e,c),a(e,t),a(e,n),a(n,i)},p(o,c){c[0]&256&&s!==(s=o[30].region+"")&&B(i,s)},d(o){o&&$(e)}}}function Bi(l){let e,t,n,s=l[30].size+"",i;return{c(){e=d("tr"),t=d("td"),t.textContent="Size",n=d("td"),i=q(s),u(t,"class","label svelte-q3m9en"),u(n,"class","svelte-q3m9en")},m(o,c){w(o,e,c),a(e,t),a(e,n),a(n,i)},p(o,c){c[0]&256&&s!==(s=o[30].size+"")&&B(i,s)},d(o){o&&$(e)}}}function Ui(l){let e,t,n,s=l[30].server_ips.join(", ")+"",i;return{c(){e=d("tr"),t=d("td"),t.textContent="Servers",n=d("td"),i=q(s),u(t,"class","label svelte-q3m9en"),u(n,"class","svelte-q3m9en")},m(o,c){w(o,e,c),a(e,t),a(e,n),a(n,i)},p(o,c){c[0]&256&&s!==(s=o[30].server_ips.join(", ")+"")&&B(i,s)},d(o){o&&$(e)}}}function Ii(l){let e;return{c(){e=d("tr"),e.innerHTML='<td class="label svelte-q3m9en">Setup Domain</td><td class="svelte-q3m9en">Yes</td>'},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Hi(l){let e,t,n,s=l[30].base_domain+"",i;return{c(){e=d("tr"),t=d("td"),t.textContent="Base Domain",n=d("td"),i=q(s),u(t,"class","label svelte-q3m9en"),u(n,"class","svelte-q3m9en")},m(o,c){w(o,e,c),a(e,t),a(e,n),a(n,i)},p(o,c){c[0]&256&&s!==(s=o[30].base_domain+"")&&B(i,s)},d(o){o&&$(e)}}}function Gi(l){let e,t,n,s,i=_e(Object.entries(l[30].env_vars)),o=[];for(let c=0;c<i.length;c+=1)o[c]=Wi(gi(l,i,c));return{c(){e=d("div"),t=d("div"),t.textContent="Environment Variables",n=b(),s=d("div");for(let c=0;c<o.length;c+=1)o[c].c();u(t,"class","section-title svelte-q3m9en"),u(s,"class","env-list svelte-q3m9en"),u(e,"class","env-section svelte-q3m9en")},m(c,r){w(c,e,r),a(e,t),a(e,n),a(e,s);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(s,null)},p(c,r){if(r[0]&256){i=_e(Object.entries(c[30].env_vars));let f;for(f=0;f<i.length;f+=1){const p=gi(c,i,f);o[f]?o[f].p(p,r):(o[f]=Wi(p),o[f].c(),o[f].m(s,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=i.length}},d(c){c&&$(e),Ee(o,c)}}}function Wi(l){let e,t=l[34]+"",n,s,i=(l[35].length>20?l[35].substring(0,20)+"...":l[35])+"",o;return{c(){e=d("div"),n=q(t),s=q("="),o=q(i),u(e,"class","env-item svelte-q3m9en")},m(c,r){w(c,e,r),a(e,n),a(e,s),a(e,o)},p(c,r){r[0]&256&&t!==(t=c[34]+"")&&B(n,t),r[0]&256&&i!==(i=(c[35].length>20?c[35].substring(0,20)+"...":c[35])+"")&&B(o,i)},d(c){c&&$(e)}}}function Ji(l){let e,t,n,s,i,o=_e(l[30].tags),c=[];for(let f=0;f<o.length;f+=1)c[f]=Yi(hi(l,o,f));const r=f=>L(c[f],1,1,()=>{c[f]=null});return{c(){e=d("div"),t=d("div"),t.textContent="Tags",n=b(),s=d("div");for(let f=0;f<c.length;f+=1)c[f].c();u(t,"class","section-title svelte-q3m9en"),u(s,"class","tags-list svelte-q3m9en"),u(e,"class","tags-section svelte-q3m9en")},m(f,p){w(f,e,p),a(e,t),a(e,n),a(e,s);for(let _=0;_<c.length;_+=1)c[_]&&c[_].m(s,null);i=!0},p(f,p){if(p[0]&256){o=_e(f[30].tags);let _;for(_=0;_<o.length;_+=1){const v=hi(f,o,_);c[_]?(c[_].p(v,p),P(c[_],1)):(c[_]=Yi(v),c[_].c(),P(c[_],1),c[_].m(s,null))}for(ke(),_=o.length;_<c.length;_+=1)r(_);we()}},i(f){if(!i){for(let p=0;p<o.length;p+=1)P(c[p]);i=!0}},o(f){c=c.filter(Boolean);for(let p=0;p<c.length;p+=1)L(c[p]);i=!1},d(f){f&&$(e),Ee(c,f)}}}function cu(l){let e=l[31]+"",t;return{c(){t=q(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&256&&e!==(e=n[31]+"")&&B(t,e)},d(n){n&&$(t)}}}function Yi(l){let e,t;return e=new Ie({props:{$$slots:{default:[cu]},$$scope:{ctx:l}}}),{c(){oe(e.$$.fragment)},m(n,s){ne(e,n,s),t=!0},p(n,s){const i={};s[0]&256|s[1]&131072&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){se(e,n)}}}function fu(l){let e,t,n=l[8]&&ji(l);return{c(){n&&n.c(),e=je()},m(s,i){n&&n.m(s,i),w(s,e,i),t=!0},p(s,i){s[8]?n?(n.p(s,i),i[0]&256&&P(n,1)):(n=ji(s),n.c(),P(n,1),n.m(e.parentNode,e)):n&&(ke(),L(n,1,1,()=>{n=null}),we())},i(s){t||(P(n),t=!0)},o(s){L(n),t=!1},d(s){s&&$(e),n&&n.d(s)}}}function uu(l){let e;return{c(){e=q("🚀 Redeploy with this config")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function pu(l){let e;return{c(){e=q("Close")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function du(l){let e,t,n,s,i;return t=new qe({props:{variant:"primary",$$slots:{default:[uu]},$$scope:{ctx:l}}}),t.$on("click",l[12]),s=new qe({props:{variant:"ghost",$$slots:{default:[pu]},$$scope:{ctx:l}}}),s.$on("click",l[26]),{c(){e=d("div"),oe(t.$$.fragment),n=b(),oe(s.$$.fragment),u(e,"slot","footer")},m(o,c){w(o,e,c),ne(t,e,null),a(e,n),ne(s,e,null),i=!0},p(o,c){const r={};c[1]&131072&&(r.$$scope={dirty:c,ctx:o}),t.$set(r);const f={};c[1]&131072&&(f.$$scope={dirty:c,ctx:o}),s.$set(f)},i(o){i||(P(t.$$.fragment,o),P(s.$$.fragment,o),i=!0)},o(o){L(t.$$.fragment,o),L(s.$$.fragment,o),i=!1},d(o){o&&$(e),se(t),se(s)}}}function _u(l){let e,t,n,s,i,o,c,r,f,p,_,v,h,m,g,y,C=l[10]&&wi(l);c=new qe({props:{variant:"ghost",$$slots:{default:[If]},$$scope:{ctx:l}}}),c.$on("click",l[18]),f=new Ne({props:{padding:!1,$$slots:{default:[Xf]},$$scope:{ctx:l}}});function k(T){l[24](T)}let S={title:"⏪ Rollback",width:"600px",$$slots:{footer:[iu],default:[tu]},$$scope:{ctx:l}};l[1]!==void 0&&(S.open=l[1]),_=new Ln({props:S}),kt.push(()=>Mn(_,"open",k)),_.$on("close",l[25]);function M(T){l[27](T)}let D={title:"⚙️ Deployment Config",width:"500px",$$slots:{footer:[du],default:[fu]},$$scope:{ctx:l}};return l[7]!==void 0&&(D.open=l[7]),m=new Ln({props:D}),kt.push(()=>Mn(m,"open",M)),m.$on("close",l[28]),{c(){e=d("div"),t=d("div"),n=d("h1"),n.textContent="Deployment History",s=b(),i=d("div"),C&&C.c(),o=b(),oe(c.$$.fragment),r=b(),oe(f.$$.fragment),p=b(),oe(_.$$.fragment),h=b(),oe(m.$$.fragment),u(n,"class","svelte-q3m9en"),u(i,"class","header-actions svelte-q3m9en"),u(t,"class","page-header svelte-q3m9en"),u(e,"class","deployments-page svelte-q3m9en")},m(T,E){w(T,e,E),a(e,t),a(t,n),a(t,s),a(t,i),C&&C.m(i,null),a(i,o),ne(c,i,null),a(e,r),ne(f,e,null),w(T,p,E),ne(_,T,E),w(T,h,E),ne(m,T,E),y=!0},p(T,E){T[10]?C?C.p(T,E):(C=wi(T),C.c(),C.m(i,o)):C&&(C.d(1),C=null);const j={};E[1]&131072&&(j.$$scope={dirty:E,ctx:T}),c.$set(j);const R={};E[0]&513|E[1]&131072&&(R.$$scope={dirty:E,ctx:T}),f.$set(R);const O={};E[0]&126|E[1]&131072&&(O.$$scope={dirty:E,ctx:T}),!v&&E[0]&2&&(v=!0,O.open=T[1],En(()=>v=!1)),_.$set(O);const z={};E[0]&384|E[1]&131072&&(z.$$scope={dirty:E,ctx:T}),!g&&E[0]&128&&(g=!0,z.open=T[7],En(()=>g=!1)),m.$set(z)},i(T){y||(P(c.$$.fragment,T),P(f.$$.fragment,T),P(_.$$.fragment,T),P(m.$$.fragment,T),y=!0)},o(T){L(c.$$.fragment,T),L(f.$$.fragment,T),L(_.$$.fragment,T),L(m.$$.fragment,T),y=!1},d(T){T&&($(e),$(p),$(h)),C&&C.d(),se(c),se(f),se(_,T),se(m,T)}}}function Vi(l){return l?l.toLocaleTimeString():""}function vu(l){const e=[...l],t=new Set;for(const n of e){const s=`${n.project}/${n.service||n.name}/${n.environment}`;n.status==="success"&&n.can_rollback&&!t.has(s)?(n.is_current_active=!0,t.add(s)):n.is_current_active=!1}return e}function fl(l){return l?new Date(l).toLocaleString():"-"}function Nn(l){switch(l){case"success":case"active":return"success";case"failed":case"error":return"danger";case"pending":case"deploying":return"warning";case"superseded":return"secondary";default:return"info"}}function xl(l){const e=l.status||"unknown";return e==="rolled_back"?l.is_rollback?"failed":"superseded":e}function mu(l,e,t){let n,s,i;We(l,Nl,A=>t(17,i=A));let o=!1,c=!1,r=null,f=[],p=null,_=!1,v=[],h=!1,m=null,g=[];function y(A){t(8,m=A),t(7,h=!0)}function C(){if(!(m!=null&&m.config_snapshot))return;const A=new CustomEvent("redeploy",{detail:{deployment:m,config:m.config_snapshot},bubbles:!0});document.dispatchEvent(A),t(7,h=!1),ve.info("Config loaded - switch to Deploy tab")}async function k(A){t(2,r=A);try{const G=new URLSearchParams({project:A.project||"",environment:A.environment||"",service_name:A.service_name||A.service||""}),N=await Be("GET",`/infra/deployments/rollback/preview?${G}`);t(3,f=(N.recent_deployments||[]).filter(U=>U.id!==A.id&&U.status==="success"))}catch{t(3,f=[])}t(1,c=!0)}async function S(){if(!r||!p){ve.error("Select a deployment to rollback to");return}t(6,v=[]),t(5,_=!0);const A=(G,N="info")=>{t(6,v=[...v,{message:G,type:N,time:new Date}])};try{const G=new URLSearchParams({project:r.project||"",environment:r.environment||"",service_name:r.service_name||r.service||""}).toString();A("Starting rollback...");let N=!1,U="";if(await ia("POST",`/infra/deployments/rollback?${G}`,{deployment_id:p},Y=>{Y.type==="progress"||Y.type==="start"?A(Y.message,"info"):Y.type==="server_complete"?A(`✅ ${Y.ip}: Success`,"success"):Y.type==="error"?(A(`❌ ${Y.message||Y.error}`,"error"),U=Y.message||Y.error||"Unknown error"):Y.type==="complete"&&(N=Y.success,N?A(`✅ ${Y.message}`,"success"):(U=Y.message||"Rollback failed",A(`❌ ${U}`,"error")))}),N)ve.success("Rollback completed successfully"),await M();else throw new Error(U||"Rollback failed")}catch(G){A(`❌ Error: ${G.message||String(G)}`,"error"),ve.error("Rollback failed: "+(G.message||String(G)))}finally{t(5,_=!1)}}function M(){Nl.refresh()}function D(){Nl.refresh()}const T=[[]],E=()=>Nl.refresh(),j=A=>y(A),R=A=>k(A),O=()=>{t(1,c=!1),t(6,v=[])};function z(){p=this.__value,t(4,p)}function F(A){c=A,t(1,c)}const H=()=>t(1,c=!1),W=()=>t(7,h=!1);function I(A){h=A,t(7,h)}const J=()=>t(7,h=!1);return l.$$.update=()=>{l.$$.dirty[0]&131072&&t(16,n=i||{loading:!1}),l.$$.dirty[0]&65536&&t(0,o=n.loading),l.$$.dirty[0]&65536&&t(10,s=n.lastFetched),l.$$.dirty[0]&65536&&n.data&&t(9,g=vu(n.data))},[o,c,r,f,p,_,v,h,m,g,s,y,C,k,S,D,n,i,E,j,R,O,z,T,F,H,W,I,J]}class hu extends Ve{constructor(e){super(),Ye(this,e,mu,_u,Je,{refresh:15},null,[-1,-1])}get refresh(){return this.$$.ctx[15]}}function gu(l){let e;return{c(){e=q("📋 Copy")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function bu(l){let e;return{c(){e=q("⬇ Download")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Ki(l){let e;return{c(){e=d("div"),e.textContent="Loading logs...",u(e,"class","loading-overlay svelte-vo5055")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function $u(l){let e;return{c(){e=d("span"),e.textContent="Select a server and container from the scope bar above to view logs.",u(e,"class","placeholder svelte-vo5055")},m(t,n){w(t,e,n)},p:ae,d(t){t&&$(e)}}}function ku(l){let e;return{c(){e=q(l[0])},m(t,n){w(t,e,n)},p(t,n){n&1&&B(e,t[0])},d(t){t&&$(e)}}}function wu(l){let e,t,n,s,i,o,c,r,f,p,_,v,h,m,g,y,C,k,S,M,D,T,E;m=new qe({props:{variant:"ghost",size:"sm",$$slots:{default:[gu]},$$scope:{ctx:l}}}),m.$on("click",l[6]),y=new qe({props:{variant:"ghost",size:"sm",$$slots:{default:[bu]},$$scope:{ctx:l}}}),y.$on("click",l[7]);let j=l[1]&&Ki();function R(F,H){return F[0]?ku:$u}let O=R(l),z=O(l);return{c(){e=d("div"),t=d("div"),n=d("span"),n.textContent="🔍",s=b(),i=d("input"),o=b(),c=d("select"),r=d("option"),r.textContent="All Levels",f=d("option"),f.textContent="ERROR",p=d("option"),p.textContent="WARN",_=d("option"),_.textContent="INFO",v=d("option"),v.textContent="DEBUG",h=b(),oe(m.$$.fragment),g=b(),oe(y.$$.fragment),C=b(),k=d("div"),j&&j.c(),S=b(),M=d("pre"),z.c(),u(n,"class","search-icon svelte-vo5055"),u(i,"type","text"),u(i,"placeholder","Search logs..."),u(i,"class","svelte-vo5055"),u(t,"class","search-box svelte-vo5055"),r.__value="",Q(r,r.__value),f.__value="ERROR",Q(f,f.__value),p.__value="WARN",Q(p,p.__value),_.__value="INFO",Q(_,_.__value),v.__value="DEBUG",Q(v,v.__value),u(c,"class","svelte-vo5055"),l[3]===void 0&&Ue(()=>l[11].call(c)),u(e,"class","toolbar svelte-vo5055"),u(M,"class","log-content svelte-vo5055"),u(k,"class","log-viewer svelte-vo5055")},m(F,H){w(F,e,H),a(e,t),a(t,n),a(t,s),a(t,i),Q(i,l[2]),a(e,o),a(e,c),a(c,r),a(c,f),a(c,p),a(c,_),a(c,v),De(c,l[3],!0),a(e,h),ne(m,e,null),a(e,g),ne(y,e,null),w(F,C,H),w(F,k,H),j&&j.m(k,null),a(k,S),a(k,M),z.m(M,null),D=!0,T||(E=[te(i,"input",l[10]),te(i,"input",l[5]),te(c,"change",l[11]),te(c,"change",l[5])],T=!0)},p(F,H){H&4&&i.value!==F[2]&&Q(i,F[2]),H&8&&De(c,F[3]);const W={};H&131072&&(W.$$scope={dirty:H,ctx:F}),m.$set(W);const I={};H&131072&&(I.$$scope={dirty:H,ctx:F}),y.$set(I),F[1]?j||(j=Ki(),j.c(),j.m(k,S)):j&&(j.d(1),j=null),O===(O=R(F))&&z?z.p(F,H):(z.d(1),z=O(F),z&&(z.c(),z.m(M,null)))},i(F){D||(P(m.$$.fragment,F),P(y.$$.fragment,F),D=!0)},o(F){L(m.$$.fragment,F),L(y.$$.fragment,F),D=!1},d(F){F&&($(e),$(C),$(k)),se(m),se(y),j&&j.d(),z.d(),T=!1,Fe(E)}}}function yu(l){let e,t,n,s,i,o,c,r;return c=new Ne({props:{padding:!1,$$slots:{default:[wu]},$$scope:{ctx:l}}}),{c(){e=d("div"),t=d("h2"),n=q("Logs · "),s=d("span"),i=q(l[4]),o=b(),oe(c.$$.fragment),u(s,"class","context svelte-vo5055"),u(t,"class","page-title svelte-vo5055"),u(e,"class","logs-page svelte-vo5055")},m(f,p){w(f,e,p),a(e,t),a(t,n),a(t,s),a(s,i),a(e,o),ne(c,e,null),r=!0},p(f,[p]){(!r||p&16)&&B(i,f[4]);const _={};p&131087&&(_.$$scope={dirty:p,ctx:f}),c.$set(_)},i(f){r||(P(c.$$.fragment,f),r=!0)},o(f){L(c.$$.fragment,f),r=!1},d(f){f&&$(e),se(c)}}}function Cu(l,e,t){let n,s;We(l,qt,M=>t(9,s=M));let i="",o="",c=!1,r="",f="",p=null;ul(()=>{s.server&&_()}),ls(()=>{m()});async function _(){if(!s.server){i="Select a server and container from the scope bar above to view logs.",t(0,o=i);return}t(1,c=!0);try{const M=s.server,D=s.container;if(!M){i="Select a server to view logs",t(0,o=i);return}if(!D||D==="all"){i=`Select a specific container from the scope bar above to view logs.

Tip: Use the Server dropdown to pick a server, then select a container.`,t(0,o=i),t(1,c=!1);return}const T=new URLSearchParams;T.set("lines","500");const E=`/infra/agent/${M}/containers/${D}/logs?${T}`,j=await Be("GET",E);j.data&&j.data.logs!==void 0?i=j.data.logs:j.logs!==void 0?i=j.logs:typeof j=="string"?i=j:i=JSON.stringify(j,null,2),v()}catch(M){i=`Error loading logs: ${M.message}`,t(0,o=i),ve.error("Failed to load logs: "+M.message)}finally{t(1,c=!1)}}function v(){let M=i;r&&(M=M.split(`
`).filter(T=>T.toLowerCase().includes(r.toLowerCase())).join(`
`)),f&&(M=M.split(`
`).filter(T=>T.toUpperCase().includes(f)).join(`
`)),t(0,o=M)}function h(){p||(p=setInterval(_,5e3),ve.info("Tailing logs..."))}function m(){p&&(clearInterval(p),p=null)}function g(){navigator.clipboard.writeText(o),ve.success("Logs copied to clipboard")}function y(){const M=new Blob([o],{type:"text/plain"}),D=URL.createObjectURL(M),T=document.createElement("a");T.href=D,T.download=`logs-${s.server||"unknown"}-${new Date().toISOString()}.txt`,T.click(),URL.revokeObjectURL(D)}function C(){_()}function k(){r=this.value,t(2,r)}function S(){f=Ge(this),t(3,f)}return l.$$.update=()=>{l.$$.dirty&512&&t(4,n=s.server?s.container?`${s.server} / ${s.container}`:s.server:"Select a server"),l.$$.dirty&512&&(s.server||s.container||s.range)&&_(),l.$$.dirty&512&&(s.tail?h():m())},v(),[o,c,r,f,n,v,g,y,C,s,k,S]}class Su extends Ve{constructor(e){super(),Ye(this,e,Cu,yu,Je,{refresh:8})}get refresh(){return this.$$.ctx[8]}}function Qi(l,e,t){const n=l.slice();return n[23]=e[t],n}function Xi(l,e,t){const n=l.slice();n[18]=e[t];const s=n[18].status==="online";n[19]=s;const i=n[18].containers>0?Math.round(n[18].healthy/n[18].containers*100):100;return n[20]=i,n}function qu(l){var M;let e,t,n,s,i=(((M=l[11])==null?void 0:M.name)||l[2].server)+"",o,c,r,f,p,_,v,h,m,g,y=l[4]&&Zi(l);p=new qe({props:{variant:"ghost",size:"sm",$$slots:{default:[Du]},$$scope:{ctx:l}}}),p.$on("click",l[0]);const C=[Eu,Pu],k=[];function S(D,T){return D[5]?0:1}return v=S(l),h=k[v]=C[v](l),{c(){e=d("div"),t=d("h2"),n=q("Metrics · "),s=d("span"),o=q(i),c=b(),r=d("div"),y&&y.c(),f=b(),oe(p.$$.fragment),_=b(),h.c(),m=je(),u(s,"class","server-name svelte-9h3o9i"),u(t,"class","page-title svelte-9h3o9i"),u(r,"class","header-actions svelte-9h3o9i"),u(e,"class","page-header svelte-9h3o9i")},m(D,T){w(D,e,T),a(e,t),a(t,n),a(t,s),a(s,o),a(e,c),a(e,r),y&&y.m(r,null),a(r,f),ne(p,r,null),w(D,_,T),k[v].m(D,T),w(D,m,T),g=!0},p(D,T){var R;(!g||T&2052)&&i!==(i=(((R=D[11])==null?void 0:R.name)||D[2].server)+"")&&B(o,i),D[4]?y?y.p(D,T):(y=Zi(D),y.c(),y.m(r,f)):y&&(y.d(1),y=null);const E={};T&67108864&&(E.$$scope={dirty:T,ctx:D}),p.$set(E);let j=v;v=S(D),v===j?k[v].p(D,T):(ke(),L(k[j],1,1,()=>{k[j]=null}),we(),h=k[v],h?h.p(D,T):(h=k[v]=C[v](D),h.c()),P(h,1),h.m(m.parentNode,m))},i(D){g||(P(p.$$.fragment,D),P(h),g=!0)},o(D){L(p.$$.fragment,D),L(h),g=!1},d(D){D&&($(e),$(_),$(m)),y&&y.d(),se(p),k[v].d(D)}}}function Tu(l){let e,t,n,s,i,o,c,r,f,p,_,v=l[4]&&er(l);o=new qe({props:{variant:"ghost",size:"sm",$$slots:{default:[Bu]},$$scope:{ctx:l}}}),o.$on("click",l[0]);const h=[Iu,Uu],m=[];function g(y,C){return y[5]?0:1}return r=g(l),f=m[r]=h[r](l),{c(){e=d("div"),t=d("h2"),t.textContent="Metrics · Fleet",n=b(),s=d("div"),v&&v.c(),i=b(),oe(o.$$.fragment),c=b(),f.c(),p=je(),u(t,"class","page-title svelte-9h3o9i"),u(s,"class","header-actions svelte-9h3o9i"),u(e,"class","page-header svelte-9h3o9i")},m(y,C){w(y,e,C),a(e,t),a(e,n),a(e,s),v&&v.m(s,null),a(s,i),ne(o,s,null),w(y,c,C),m[r].m(y,C),w(y,p,C),_=!0},p(y,C){y[4]?v?v.p(y,C):(v=er(y),v.c(),v.m(s,i)):v&&(v.d(1),v=null);const k={};C&67108864&&(k.$$scope={dirty:C,ctx:y}),o.$set(k);let S=r;r=g(y),r===S?m[r].p(y,C):(ke(),L(m[S],1,1,()=>{m[S]=null}),we(),f=m[r],f?f.p(y,C):(f=m[r]=h[r](y),f.c()),P(f,1),f.m(p.parentNode,p))},i(y){_||(P(o.$$.fragment,y),P(f),_=!0)},o(y){L(o.$$.fragment,y),L(f),_=!1},d(y){y&&($(e),$(c),$(p)),v&&v.d(),se(o),m[r].d(y)}}}function Zi(l){let e,t,n=Rn(l[4])+"",s;return{c(){e=d("span"),t=q("Updated "),s=q(n),u(e,"class","last-updated svelte-9h3o9i")},m(i,o){w(i,e,o),a(e,t),a(e,s)},p(i,o){o&16&&n!==(n=Rn(i[4])+"")&&B(s,n)},d(i){i&&$(e)}}}function Du(l){let e;return{c(){e=q("↻ Refresh")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Pu(l){let e,t,n,s,i,o,c,r,f,p,_;return t=new Ne({props:{$$slots:{default:[Mu]},$$scope:{ctx:l}}}),s=new Ne({props:{$$slots:{default:[ju]},$$scope:{ctx:l}}}),o=new Ne({props:{$$slots:{default:[Lu]},$$scope:{ctx:l}}}),r=new Ne({props:{$$slots:{default:[Nu]},$$scope:{ctx:l}}}),p=new Ne({props:{title:"🐳 Containers",$$slots:{default:[zu]},$$scope:{ctx:l}}}),{c(){e=d("div"),oe(t.$$.fragment),n=b(),oe(s.$$.fragment),i=b(),oe(o.$$.fragment),c=b(),oe(r.$$.fragment),f=b(),oe(p.$$.fragment),u(e,"class","metrics-grid svelte-9h3o9i")},m(v,h){w(v,e,h),ne(t,e,null),a(e,n),ne(s,e,null),a(e,i),ne(o,e,null),a(e,c),ne(r,e,null),w(v,f,h),ne(p,v,h),_=!0},p(v,h){const m={};h&67109120&&(m.$$scope={dirty:h,ctx:v}),t.$set(m);const g={};h&67109120&&(g.$$scope={dirty:h,ctx:v}),s.$set(g);const y={};h&67109120&&(y.$$scope={dirty:h,ctx:v}),o.$set(y);const C={};h&67109120&&(C.$$scope={dirty:h,ctx:v}),r.$set(C);const k={};h&67109e3&&(k.$$scope={dirty:h,ctx:v}),p.$set(k)},i(v){_||(P(t.$$.fragment,v),P(s.$$.fragment,v),P(o.$$.fragment,v),P(r.$$.fragment,v),P(p.$$.fragment,v),_=!0)},o(v){L(t.$$.fragment,v),L(s.$$.fragment,v),L(o.$$.fragment,v),L(r.$$.fragment,v),L(p.$$.fragment,v),_=!1},d(v){v&&($(e),$(f)),se(t),se(s),se(o),se(r),se(p,v)}}}function Eu(l){let e,t,n,s;return{c(){e=d("div"),t=d("p"),n=q("Failed to load: "),s=q(l[5]),u(e,"class","empty-state svelte-9h3o9i")},m(i,o){w(i,e,o),a(e,t),a(t,n),a(t,s)},p(i,o){o&32&&B(s,i[5])},i:ae,o:ae,d(i){i&&$(e)}}}function Mu(l){var r;let e,t,n,s,i=(((r=l[8])==null?void 0:r.cpu)||0)+"",o,c;return{c(){var f;e=d("div"),t=d("div"),t.textContent="CPU",n=b(),s=d("div"),o=q(i),c=q("%"),u(t,"class","metric-label svelte-9h3o9i"),u(s,"class","metric-value svelte-9h3o9i"),Ae(s,"color",Rt(((f=l[8])==null?void 0:f.cpu)||0)),u(e,"class","metric-card svelte-9h3o9i")},m(f,p){w(f,e,p),a(e,t),a(e,n),a(e,s),a(s,o),a(s,c)},p(f,p){var _,v;p&256&&i!==(i=(((_=f[8])==null?void 0:_.cpu)||0)+"")&&B(o,i),p&256&&Ae(s,"color",Rt(((v=f[8])==null?void 0:v.cpu)||0))},d(f){f&&$(e)}}}function ju(l){var g,y,C;let e,t,n,s,i=(((g=l[8])==null?void 0:g.memory)||0)+"",o,c,r,f,p=xe((y=l[8])==null?void 0:y.memoryUsed)+"",_,v,h=xe((C=l[8])==null?void 0:C.memoryTotal)+"",m;return{c(){var k;e=d("div"),t=d("div"),t.textContent="Memory",n=b(),s=d("div"),o=q(i),c=q("%"),r=b(),f=d("div"),_=q(p),v=q(" / "),m=q(h),u(t,"class","metric-label svelte-9h3o9i"),u(s,"class","metric-value svelte-9h3o9i"),Ae(s,"color",Rt(((k=l[8])==null?void 0:k.memory)||0)),u(f,"class","metric-detail svelte-9h3o9i"),u(e,"class","metric-card svelte-9h3o9i")},m(k,S){w(k,e,S),a(e,t),a(e,n),a(e,s),a(s,o),a(s,c),a(e,r),a(e,f),a(f,_),a(f,v),a(f,m)},p(k,S){var M,D,T,E;S&256&&i!==(i=(((M=k[8])==null?void 0:M.memory)||0)+"")&&B(o,i),S&256&&Ae(s,"color",Rt(((D=k[8])==null?void 0:D.memory)||0)),S&256&&p!==(p=xe((T=k[8])==null?void 0:T.memoryUsed)+"")&&B(_,p),S&256&&h!==(h=xe((E=k[8])==null?void 0:E.memoryTotal)+"")&&B(m,h)},d(k){k&&$(e)}}}function Lu(l){var g,y,C;let e,t,n,s,i=(((g=l[8])==null?void 0:g.disk)||0)+"",o,c,r,f,p=xe((y=l[8])==null?void 0:y.diskUsed)+"",_,v,h=xe((C=l[8])==null?void 0:C.diskTotal)+"",m;return{c(){var k;e=d("div"),t=d("div"),t.textContent="Disk",n=b(),s=d("div"),o=q(i),c=q("%"),r=b(),f=d("div"),_=q(p),v=q(" / "),m=q(h),u(t,"class","metric-label svelte-9h3o9i"),u(s,"class","metric-value svelte-9h3o9i"),Ae(s,"color",Rt(((k=l[8])==null?void 0:k.disk)||0)),u(f,"class","metric-detail svelte-9h3o9i"),u(e,"class","metric-card svelte-9h3o9i")},m(k,S){w(k,e,S),a(e,t),a(e,n),a(e,s),a(s,o),a(s,c),a(e,r),a(e,f),a(f,_),a(f,v),a(f,m)},p(k,S){var M,D,T,E;S&256&&i!==(i=(((M=k[8])==null?void 0:M.disk)||0)+"")&&B(o,i),S&256&&Ae(s,"color",Rt(((D=k[8])==null?void 0:D.disk)||0)),S&256&&p!==(p=xe((T=k[8])==null?void 0:T.diskUsed)+"")&&B(_,p),S&256&&h!==(h=xe((E=k[8])==null?void 0:E.diskTotal)+"")&&B(m,h)},d(k){k&&$(e)}}}function Nu(l){var g,y,C,k;let e,t,n,s,i,o=xe(((y=(g=l[8])==null?void 0:g.network)==null?void 0:y.in)||0)+"",c,r,f,p,_,v=xe(((k=(C=l[8])==null?void 0:C.network)==null?void 0:k.out)||0)+"",h,m;return{c(){e=d("div"),t=d("div"),t.textContent="Network",n=b(),s=d("div"),i=q("↓ "),c=q(o),r=q("/s"),f=b(),p=d("div"),_=q("↑ "),h=q(v),m=q("/s"),u(t,"class","metric-label svelte-9h3o9i"),u(s,"class","metric-value small svelte-9h3o9i"),u(p,"class","metric-detail svelte-9h3o9i"),u(e,"class","metric-card svelte-9h3o9i")},m(S,M){w(S,e,M),a(e,t),a(e,n),a(e,s),a(s,i),a(s,c),a(s,r),a(e,f),a(e,p),a(p,_),a(p,h),a(p,m)},p(S,M){var D,T,E,j;M&256&&o!==(o=xe(((T=(D=S[8])==null?void 0:D.network)==null?void 0:T.in)||0)+"")&&B(c,o),M&256&&v!==(v=xe(((j=(E=S[8])==null?void 0:E.network)==null?void 0:j.out)||0)+"")&&B(h,v)},d(S){S&&$(e)}}}function Ru(l){let e,t,n,s,i,o,c=_e(l[7]),r=[];for(let p=0;p<c.length;p+=1)r[p]=xi(Qi(l,c,p));const f=p=>L(r[p],1,1,()=>{r[p]=null});return{c(){e=d("div"),t=d("table"),n=d("thead"),n.innerHTML='<tr><th class="svelte-9h3o9i">Container</th> <th class="svelte-9h3o9i">Status</th> <th class="svelte-9h3o9i">CPU</th> <th class="svelte-9h3o9i">Memory</th> <th class="svelte-9h3o9i">Network I/O</th></tr>',s=b(),i=d("tbody");for(let p=0;p<r.length;p+=1)r[p].c();u(t,"class","table svelte-9h3o9i"),u(e,"class","table-container svelte-9h3o9i")},m(p,_){w(p,e,_),a(e,t),a(t,n),a(t,s),a(t,i);for(let v=0;v<r.length;v+=1)r[v]&&r[v].m(i,null);o=!0},p(p,_){if(_&128){c=_e(p[7]);let v;for(v=0;v<c.length;v+=1){const h=Qi(p,c,v);r[v]?(r[v].p(h,_),P(r[v],1)):(r[v]=xi(h),r[v].c(),P(r[v],1),r[v].m(i,null))}for(ke(),v=c.length;v<r.length;v+=1)f(v);we()}},i(p){if(!o){for(let _=0;_<c.length;_+=1)P(r[_]);o=!0}},o(p){r=r.filter(Boolean);for(let _=0;_<r.length;_+=1)L(r[_]);o=!1},d(p){p&&$(e),Ee(r,p)}}}function Ou(l){let e;return{c(){e=d("div"),e.textContent="No containers found",u(e,"class","empty-state svelte-9h3o9i")},m(t,n){w(t,e,n)},p:ae,i:ae,o:ae,d(t){t&&$(e)}}}function Au(l){let e;return{c(){e=d("div"),e.textContent="Loading containers...",u(e,"class","empty-state svelte-9h3o9i")},m(t,n){w(t,e,n)},p:ae,i:ae,o:ae,d(t){t&&$(e)}}}function Fu(l){let e=l[23].status+"",t;return{c(){t=q(e)},m(n,s){w(n,t,s)},p(n,s){s&128&&e!==(e=n[23].status+"")&&B(t,e)},d(n){n&&$(t)}}}function xi(l){let e,t,n=l[23].name+"",s,i,o,c,r,f,p=l[23].cpu.toFixed(2)+"",_,v,h,m,g,y=l[23].memory_percent.toFixed(2)+"",C,k,S,M,D,T=xe(l[23].memory_used)+"",E,j,R,O,z,F=xe(l[23].net_in)+"",H,W,I=xe(l[23].net_out)+"",J,A,G;return c=new Ie({props:{variant:l[23].status==="running"?"success":"warning",$$slots:{default:[Fu]},$$scope:{ctx:l}}}),{c(){e=d("tr"),t=d("td"),s=q(n),i=b(),o=d("td"),oe(c.$$.fragment),r=b(),f=d("td"),_=q(p),v=q("%"),h=b(),m=d("td"),g=d("span"),C=q(y),k=q("%"),S=b(),M=d("span"),D=q("("),E=q(T),j=q(")"),R=b(),O=d("td"),z=q("↓"),H=q(F),W=q(" / ↑"),J=q(I),A=b(),u(t,"class","container-name svelte-9h3o9i"),u(o,"class","svelte-9h3o9i"),Ae(f,"color",Rt(l[23].cpu)),u(f,"class","svelte-9h3o9i"),Ae(g,"color",Rt(l[23].memory_percent)),u(M,"class","detail svelte-9h3o9i"),u(m,"class","svelte-9h3o9i"),u(O,"class","network-io svelte-9h3o9i")},m(N,U){w(N,e,U),a(e,t),a(t,s),a(e,i),a(e,o),ne(c,o,null),a(e,r),a(e,f),a(f,_),a(f,v),a(e,h),a(e,m),a(m,g),a(g,C),a(g,k),a(m,S),a(m,M),a(M,D),a(M,E),a(M,j),a(e,R),a(e,O),a(O,z),a(O,H),a(O,W),a(O,J),a(e,A),G=!0},p(N,U){(!G||U&128)&&n!==(n=N[23].name+"")&&B(s,n);const Y={};U&128&&(Y.variant=N[23].status==="running"?"success":"warning"),U&67108992&&(Y.$$scope={dirty:U,ctx:N}),c.$set(Y),(!G||U&128)&&p!==(p=N[23].cpu.toFixed(2)+"")&&B(_,p),(!G||U&128)&&Ae(f,"color",Rt(N[23].cpu)),(!G||U&128)&&y!==(y=N[23].memory_percent.toFixed(2)+"")&&B(C,y),(!G||U&128)&&Ae(g,"color",Rt(N[23].memory_percent)),(!G||U&128)&&T!==(T=xe(N[23].memory_used)+"")&&B(E,T),(!G||U&128)&&F!==(F=xe(N[23].net_in)+"")&&B(H,F),(!G||U&128)&&I!==(I=xe(N[23].net_out)+"")&&B(J,I)},i(N){G||(P(c.$$.fragment,N),G=!0)},o(N){L(c.$$.fragment,N),G=!1},d(N){N&&$(e),se(c)}}}function zu(l){let e,t,n,s;const i=[Au,Ou,Ru],o=[];function c(r,f){return r[3]?0:r[7].length===0?1:2}return e=c(l),t=o[e]=i[e](l),{c(){t.c(),n=je()},m(r,f){o[e].m(r,f),w(r,n,f),s=!0},p(r,f){let p=e;e=c(r),e===p?o[e].p(r,f):(ke(),L(o[p],1,1,()=>{o[p]=null}),we(),t=o[e],t?t.p(r,f):(t=o[e]=i[e](r),t.c()),P(t,1),t.m(n.parentNode,n))},i(r){s||(P(t),s=!0)},o(r){L(t),s=!1},d(r){r&&$(n),o[e].d(r)}}}function er(l){let e,t,n=Rn(l[4])+"",s;return{c(){e=d("span"),t=q("Updated "),s=q(n),u(e,"class","last-updated svelte-9h3o9i")},m(i,o){w(i,e,o),a(e,t),a(e,s)},p(i,o){o&16&&n!==(n=Rn(i[4])+"")&&B(s,n)},d(i){i&&$(e)}}}function Bu(l){let e;return{c(){e=q("↻ Refresh")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Uu(l){let e,t,n,s,i,o,c,r,f,p,_;return t=new Ne({props:{$$slots:{default:[Hu]},$$scope:{ctx:l}}}),s=new Ne({props:{$$slots:{default:[Gu]},$$scope:{ctx:l}}}),o=new Ne({props:{$$slots:{default:[Wu]},$$scope:{ctx:l}}}),r=new Ne({props:{$$slots:{default:[Yu]},$$scope:{ctx:l}}}),p=new Ne({props:{title:"Server Health",$$slots:{default:[ep]},$$scope:{ctx:l}}}),{c(){e=d("div"),oe(t.$$.fragment),n=b(),oe(s.$$.fragment),i=b(),oe(o.$$.fragment),c=b(),oe(r.$$.fragment),f=b(),oe(p.$$.fragment),u(e,"class","metrics-grid svelte-9h3o9i")},m(v,h){w(v,e,h),ne(t,e,null),a(e,n),ne(s,e,null),a(e,i),ne(o,e,null),a(e,c),ne(r,e,null),w(v,f,h),ne(p,v,h),_=!0},p(v,h){const m={};h&67109888&&(m.$$scope={dirty:h,ctx:v}),t.$set(m);const g={};h&67109888&&(g.$$scope={dirty:h,ctx:v}),s.$set(g);const y={};h&67109888&&(y.$$scope={dirty:h,ctx:v}),o.$set(y);const C={};h&67109888&&(C.$$scope={dirty:h,ctx:v}),r.$set(C);const k={};h&67109386&&(k.$$scope={dirty:h,ctx:v}),p.$set(k)},i(v){_||(P(t.$$.fragment,v),P(s.$$.fragment,v),P(o.$$.fragment,v),P(r.$$.fragment,v),P(p.$$.fragment,v),_=!0)},o(v){L(t.$$.fragment,v),L(s.$$.fragment,v),L(o.$$.fragment,v),L(r.$$.fragment,v),L(p.$$.fragment,v),_=!1},d(v){v&&($(e),$(f)),se(t),se(s),se(o),se(r),se(p,v)}}}function Iu(l){let e,t,n,s;return{c(){e=d("div"),t=d("p"),n=q("Failed to load: "),s=q(l[5]),u(e,"class","empty-state svelte-9h3o9i")},m(i,o){w(i,e,o),a(e,t),a(t,n),a(t,s)},p(i,o){o&32&&B(s,i[5])},i:ae,o:ae,d(i){i&&$(e)}}}function Hu(l){let e,t,n,s,i=l[10].serverCount+"",o;return{c(){e=d("div"),t=d("div"),t.textContent="Servers",n=b(),s=d("div"),o=q(i),u(t,"class","metric-label svelte-9h3o9i"),u(s,"class","metric-value svelte-9h3o9i"),u(e,"class","metric-card svelte-9h3o9i")},m(c,r){w(c,e,r),a(e,t),a(e,n),a(e,s),a(s,o)},p(c,r){r&1024&&i!==(i=c[10].serverCount+"")&&B(o,i)},d(c){c&&$(e)}}}function Gu(l){let e,t,n,s,i=l[10].containerCount+"",o;return{c(){e=d("div"),t=d("div"),t.textContent="Containers",n=b(),s=d("div"),o=q(i),u(t,"class","metric-label svelte-9h3o9i"),u(s,"class","metric-value svelte-9h3o9i"),u(e,"class","metric-card svelte-9h3o9i")},m(c,r){w(c,e,r),a(e,t),a(e,n),a(e,s),a(s,o)},p(c,r){r&1024&&i!==(i=c[10].containerCount+"")&&B(o,i)},d(c){c&&$(e)}}}function Wu(l){let e,t,n,s,i=or(l[10].monthlyCost)+"",o;return{c(){e=d("div"),t=d("div"),t.textContent="Monthly Cost",n=b(),s=d("div"),o=q(i),u(t,"class","metric-label svelte-9h3o9i"),u(s,"class","metric-value svelte-9h3o9i"),u(e,"class","metric-card svelte-9h3o9i")},m(c,r){w(c,e,r),a(e,t),a(e,n),a(e,s),a(s,o)},p(c,r){r&1024&&i!==(i=or(c[10].monthlyCost)+"")&&B(o,i)},d(c){c&&$(e)}}}function Ju(l){let e=l[10].health+"",t;return{c(){t=q(e)},m(n,s){w(n,t,s)},p(n,s){s&1024&&e!==(e=n[10].health+"")&&B(t,e)},d(n){n&&$(t)}}}function Yu(l){let e,t,n,s,i,o;return i=new Ie({props:{variant:ir(l[10].health),$$slots:{default:[Ju]},$$scope:{ctx:l}}}),{c(){e=d("div"),t=d("div"),t.textContent="Health",n=b(),s=d("div"),oe(i.$$.fragment),u(t,"class","metric-label svelte-9h3o9i"),u(s,"class","metric-value svelte-9h3o9i"),u(e,"class","metric-card svelte-9h3o9i")},m(c,r){w(c,e,r),a(e,t),a(e,n),a(e,s),ne(i,s,null),o=!0},p(c,r){const f={};r&1024&&(f.variant=ir(c[10].health)),r&67109888&&(f.$$scope={dirty:r,ctx:c}),i.$set(f)},i(c){o||(P(i.$$.fragment,c),o=!0)},o(c){L(i.$$.fragment,c),o=!1},d(c){c&&$(e),se(i)}}}function Vu(l){let e,t=_e(l[9]),n=[];for(let s=0;s<t.length;s+=1)n[s]=nr(Xi(l,t,s));return{c(){e=d("div");for(let s=0;s<n.length;s+=1)n[s].c();u(e,"class","usage-list svelte-9h3o9i")},m(s,i){w(s,e,i);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null)},p(s,i){if(i&512){t=_e(s[9]);let o;for(o=0;o<t.length;o+=1){const c=Xi(s,t,o);n[o]?n[o].p(c,i):(n[o]=nr(c),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=t.length}},d(s){s&&$(e),Ee(n,s)}}}function Ku(l){let e;return{c(){e=d("div"),e.textContent="No servers found",u(e,"class","empty-state svelte-9h3o9i")},m(t,n){w(t,e,n)},p:ae,d(t){t&&$(e)}}}function Qu(l){let e;return{c(){e=d("div"),e.textContent="Unable to load fleet health. Check your DO token.",u(e,"class","empty-state svelte-9h3o9i")},m(t,n){w(t,e,n)},p:ae,d(t){t&&$(e)}}}function Xu(l){let e;return{c(){e=d("div"),e.textContent="Loading fleet health...",u(e,"class","empty-state svelte-9h3o9i")},m(t,n){w(t,e,n)},p:ae,d(t){t&&$(e)}}}function Zu(l){let e,t=l[18].status+"",n;return{c(){e=d("span"),n=q(t),u(e,"class","usage-value svelte-9h3o9i"),Ae(e,"color","var(--text-muted)")},m(s,i){w(s,e,i),a(e,n)},p(s,i){i&512&&t!==(t=s[18].status+"")&&B(n,t)},d(s){s&&$(e)}}}function xu(l){let e,t=l[18].healthy+"",n,s,i=l[18].containers+"",o;return{c(){e=d("span"),n=q(t),s=q("/"),o=q(i),u(e,"class","usage-value svelte-9h3o9i"),Ae(e,"color",l[18].unhealthy>0?"var(--danger)":"var(--success)")},m(c,r){w(c,e,r),a(e,n),a(e,s),a(e,o)},p(c,r){r&512&&t!==(t=c[18].healthy+"")&&B(n,t),r&512&&i!==(i=c[18].containers+"")&&B(o,i),r&512&&Ae(e,"color",c[18].unhealthy>0?"var(--danger)":"var(--success)")},d(c){c&&$(e)}}}function tr(l){let e,t,n,s,i,o,c=l[18].containers+"",r,f,p,_,v=l[18].healthy+"",h,m,g=l[18].unhealthy>0&&lr(l);return{c(){e=d("div"),t=d("div"),n=b(),s=d("div"),i=d("span"),o=q("Containers: "),r=q(c),f=b(),p=d("span"),_=q("Healthy: "),h=q(v),m=b(),g&&g.c(),u(t,"class","usage-fill svelte-9h3o9i"),Ae(t,"width",l[20]+"%"),Ae(t,"background",l[18].unhealthy>0?"var(--warning)":"var(--success)"),u(e,"class","usage-bar svelte-9h3o9i"),u(s,"class","usage-details svelte-9h3o9i")},m(y,C){w(y,e,C),a(e,t),w(y,n,C),w(y,s,C),a(s,i),a(i,o),a(i,r),a(s,f),a(s,p),a(p,_),a(p,h),a(s,m),g&&g.m(s,null)},p(y,C){C&512&&Ae(t,"width",y[20]+"%"),C&512&&Ae(t,"background",y[18].unhealthy>0?"var(--warning)":"var(--success)"),C&512&&c!==(c=y[18].containers+"")&&B(r,c),C&512&&v!==(v=y[18].healthy+"")&&B(h,v),y[18].unhealthy>0?g?g.p(y,C):(g=lr(y),g.c(),g.m(s,null)):g&&(g.d(1),g=null)},d(y){y&&($(e),$(n),$(s)),g&&g.d()}}}function lr(l){let e,t,n=l[18].unhealthy+"",s;return{c(){e=d("span"),t=q("Unhealthy: "),s=q(n),Ae(e,"color","var(--danger)")},m(i,o){w(i,e,o),a(e,t),a(e,s)},p(i,o){o&512&&n!==(n=i[18].unhealthy+"")&&B(s,n)},d(i){i&&$(e)}}}function nr(l){let e,t,n,s,i,o=l[18].name+"",c,r,f,p;function _(g,y){return g[19]?xu:Zu}let v=_(l),h=v(l),m=l[19]&&tr(l);return{c(){e=d("div"),t=d("div"),n=d("span"),s=d("span"),i=b(),c=q(o),r=b(),h.c(),f=b(),m&&m.c(),p=b(),u(s,"class","status-dot svelte-9h3o9i"),$e(s,"online",l[19]),$e(s,"offline",!l[19]),u(n,"class","usage-name svelte-9h3o9i"),u(t,"class","usage-header svelte-9h3o9i"),u(e,"class","usage-item svelte-9h3o9i")},m(g,y){w(g,e,y),a(e,t),a(t,n),a(n,s),a(n,i),a(n,c),a(t,r),h.m(t,null),a(e,f),m&&m.m(e,null),a(e,p)},p(g,y){y&512&&$e(s,"online",g[19]),y&512&&$e(s,"offline",!g[19]),y&512&&o!==(o=g[18].name+"")&&B(c,o),v===(v=_(g))&&h?h.p(g,y):(h.d(1),h=v(g),h&&(h.c(),h.m(t,null))),g[19]?m?m.p(g,y):(m=tr(g),m.c(),m.m(e,p)):m&&(m.d(1),m=null)},d(g){g&&$(e),h.d(),m&&m.d()}}}function ep(l){let e;function t(i,o){return i[3]&&!i[1]?Xu:i[1]?i[9].length===0?Ku:Vu:Qu}let n=t(l),s=n(l);return{c(){s.c(),e=je()},m(i,o){s.m(i,o),w(i,e,o)},p(i,o){n===(n=t(i))&&s?s.p(i,o):(s.d(1),s=n(i),s&&(s.c(),s.m(e.parentNode,e)))},d(i){i&&$(e),s.d(i)}}}function tp(l){let e,t,n,s;const i=[Tu,qu],o=[];function c(r,f){return r[6]?0:1}return t=c(l),n=o[t]=i[t](l),{c(){e=d("div"),n.c(),u(e,"class","metrics-page svelte-9h3o9i")},m(r,f){w(r,e,f),o[t].m(e,null),s=!0},p(r,[f]){let p=t;t=c(r),t===p?o[t].p(r,f):(ke(),L(o[p],1,1,()=>{o[p]=null}),we(),n=o[t],n?n.p(r,f):(n=o[t]=i[t](r),n.c()),P(n,1),n.m(e,null))},i(r){s||(P(n),s=!0)},o(r){L(n),s=!1},d(r){r&&$(e),o[t].d()}}}function Rn(l){return l?l.toLocaleTimeString():""}function sr(l){if(!l)return 0;const e=l.match(/([\d.]+)\s*(B|KB|KiB|MB|MiB|GB|GiB|TB|TiB)?/i);if(!e)return 0;const t=parseFloat(e[1]),n=(e[2]||"B").toLowerCase(),s={b:1,kb:1024,kib:1024,mb:1024**2,mib:1024**2,gb:1024**3,gib:1024**3,tb:1024**4,tib:1024**4};return t*(s[n]||1)}function xe(l){if(!l)return"0 B";const e=["B","KB","MB","GB","TB"];let t=0;for(;l>=1024&&t<e.length-1;)l/=1024,t++;return`${l.toFixed(1)} ${e[t]}`}function or(l){return`$${(l||0).toFixed(2)}`}function ir(l){switch(l){case"healthy":return"success";case"degraded":return"warning";case"unhealthy":return"danger";default:return"info"}}function Rt(l){return l>=90?"var(--danger)":l>=70?"var(--warning)":"var(--success)"}function lp(l,e,t){let n,s,i,o,c,r,f,p;We(l,qt,D=>t(2,f=D)),We(l,bl,D=>t(15,p=D));let _=!1,v=null,h=null,m=!1,g=null,y=null,C=null;ul(()=>{S(),t(12,g=setInterval(S,n?3e4:15e3))}),ls(()=>{g&&clearInterval(g)});let k=null;async function S(){m||t(3,_=!0),t(5,h=null);try{n?t(1,y=await Be("GET","/infra/fleet/health")):t(13,C=await Be("GET",`/infra/agent/${f.server}/metrics`)),t(4,v=new Date),m=!0}catch(D){t(5,h=D.message)}finally{t(3,_=!1)}}function M(){S()}return l.$$.update=()=>{var D,T,E,j,R,O,z,F,H,W,I,J;if(l.$$.dirty&4&&t(6,n=!f.server),l.$$.dirty&32772&&t(11,s=p.find(A=>{var G,N,U;return(A.ip||((U=(N=(G=A.networks)==null?void 0:G.v4)==null?void 0:N[0])==null?void 0:U.ip_address))===f.server})),l.$$.dirty&32770&&t(10,i=y?{serverCount:((D=y.summary)==null?void 0:D.total)||p.length,containerCount:((T=y.servers)==null?void 0:T.reduce((A,G)=>{var N;return A+(((N=G.containers)==null?void 0:N.length)||0)},0))||0,monthlyCost:(((E=y.summary)==null?void 0:E.total)||0)*12,health:((j=y.summary)==null?void 0:j.healthy)===((R=y.summary)==null?void 0:R.total)?"healthy":"degraded"}:{serverCount:p.length,containerCount:0,monthlyCost:0,health:"unknown"}),l.$$.dirty&2&&t(9,o=((y==null?void 0:y.servers)||[]).map(A=>({name:A.name||A.ip||"Unknown",ip:A.ip,status:A.status||"unknown",containers:A.containers??0,healthy:A.healthy??0,unhealthy:A.unhealthy??0,healthStatus:A.health_status||"unknown"}))),l.$$.dirty&8192&&t(8,c=C?{cpu:((O=C.system)==null?void 0:O.load_1m)||0,memory:((z=C.system)==null?void 0:z.mem_percent)||0,memoryUsed:((F=C.system)==null?void 0:F.mem_used)||0,memoryTotal:((H=C.system)==null?void 0:H.mem_total)||0,disk:((W=C.system)==null?void 0:W.disk_percent)||0,diskUsed:((I=C.system)==null?void 0:I.disk_used)||0,diskTotal:((J=C.system)==null?void 0:J.disk_total)||0,network:{in:0,out:0}}:null),l.$$.dirty&8192&&t(7,r=((C==null?void 0:C.containers)||[]).map(A=>{var Z;const G=A.cpu||"0%",N=A.memory||"0B / 0B",U=A.mem_perc||"0%",Y=N.split("/");return{name:A.name||"unknown",cpu:parseFloat(G.replace("%",""))||0,memory_percent:parseFloat(U.replace("%",""))||0,memory_used:sr((Z=Y[0])==null?void 0:Z.trim()),memory_total:Y[1]?sr(Y[1].trim()):0,net_in:A.net_in||0,net_out:A.net_out||0,status:A.state||"running"}})),l.$$.dirty&20484){const A=f.server;A!==k&&k!==null&&(g&&clearInterval(g),m=!1,S(),t(12,g=setInterval(S,A?15e3:3e4))),t(14,k=A)}},[M,y,f,_,v,h,n,r,c,o,i,s,g,C,k,p]}class np extends Ve{constructor(e){super(),Ye(this,e,lp,tp,Je,{refresh:0})}get refresh(){return this.$$.ctx[0]}}function rr(l,e,t){const n=l.slice();return n[32]=e[t],n}function ar(l,e,t){const n=l.slice();return n[35]=e[t],n}function cr(l,e,t){const n=l.slice();return n[38]=e[t],n}function sp(l){let e,t,n=_e(l[12]),s=[];for(let o=0;o<n.length;o+=1)s[o]=fr(cr(l,n,o));const i=o=>L(s[o],1,1,()=>{s[o]=null});return{c(){e=d("div");for(let o=0;o<s.length;o+=1)s[o].c();u(e,"class","snapshot-list svelte-m8qcvw")},m(o,c){w(o,e,c);for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(e,null);t=!0},p(o,c){if(c[0]&135168){n=_e(o[12]);let r;for(r=0;r<n.length;r+=1){const f=cr(o,n,r);s[r]?(s[r].p(f,c),P(s[r],1)):(s[r]=fr(f),s[r].c(),P(s[r],1),s[r].m(e,null))}for(ke(),r=n.length;r<s.length;r+=1)i(r);we()}},i(o){if(!t){for(let c=0;c<n.length;c+=1)P(s[c]);t=!0}},o(o){s=s.filter(Boolean);for(let c=0;c<s.length;c+=1)L(s[c]);t=!1},d(o){o&&$(e),Ee(s,o)}}}function op(l){let e;return{c(){e=d("div"),e.textContent="No snapshots found",u(e,"class","empty-state svelte-m8qcvw")},m(t,n){w(t,e,n)},p:ae,i:ae,o:ae,d(t){t&&$(e)}}}function ip(l){let e;return{c(){e=d("div"),e.textContent="Loading...",u(e,"class","empty-state svelte-m8qcvw")},m(t,n){w(t,e,n)},p:ae,i:ae,o:ae,d(t){t&&$(e)}}}function rp(l){let e;return{c(){e=q("🗑️")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function fr(l){var H;let e,t,n,s=l[38].name+"",i,o,c,r,f=On(l[38].created_at)+"",p,_,v,h,m,g=_r(l[38].size_gigabytes)+"",y,C,k,S,M,D=(((H=l[38].regions)==null?void 0:H.join(", "))||"-")+"",T,E,j,R,O,z;function F(){return l[21](l[38])}return R=new qe({props:{variant:"danger",size:"sm",$$slots:{default:[rp]},$$scope:{ctx:l}}}),R.$on("click",F),{c(){e=d("div"),t=d("div"),n=d("div"),i=q(s),o=b(),c=d("div"),r=d("span"),p=q(f),_=b(),v=d("span"),v.textContent="•",h=b(),m=d("span"),y=q(g),C=b(),k=d("span"),k.textContent="•",S=b(),M=d("span"),T=q(D),E=b(),j=d("div"),oe(R.$$.fragment),O=b(),u(n,"class","snapshot-name svelte-m8qcvw"),u(c,"class","snapshot-meta svelte-m8qcvw"),u(t,"class","snapshot-info"),u(j,"class","snapshot-actions"),u(e,"class","snapshot-item svelte-m8qcvw")},m(W,I){w(W,e,I),a(e,t),a(t,n),a(n,i),a(t,o),a(t,c),a(c,r),a(r,p),a(c,_),a(c,v),a(c,h),a(c,m),a(m,y),a(c,C),a(c,k),a(c,S),a(c,M),a(M,T),a(e,E),a(e,j),ne(R,j,null),a(e,O),z=!0},p(W,I){var A;l=W,(!z||I[0]&4096)&&s!==(s=l[38].name+"")&&B(i,s),(!z||I[0]&4096)&&f!==(f=On(l[38].created_at)+"")&&B(p,f),(!z||I[0]&4096)&&g!==(g=_r(l[38].size_gigabytes)+"")&&B(y,g),(!z||I[0]&4096)&&D!==(D=(((A=l[38].regions)==null?void 0:A.join(", "))||"-")+"")&&B(T,D);const J={};I[1]&1024&&(J.$$scope={dirty:I,ctx:l}),R.$set(J)},i(W){z||(P(R.$$.fragment,W),z=!0)},o(W){L(R.$$.fragment,W),z=!1},d(W){W&&$(e),se(R)}}}function ap(l){let e;return{c(){e=q("↻ Refresh")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function cp(l){let e,t,n,s,i,o;const c=[ip,op,sp],r=[];function f(p,_){return p[0]?0:p[12].length===0?1:2}return e=f(l),t=r[e]=c[e](l),i=new qe({props:{variant:"ghost",size:"sm",$$slots:{default:[ap]},$$scope:{ctx:l}}}),i.$on("click",l[14]),{c(){t.c(),n=b(),s=d("div"),oe(i.$$.fragment),u(s,"class","card-footer svelte-m8qcvw")},m(p,_){r[e].m(p,_),w(p,n,_),w(p,s,_),ne(i,s,null),o=!0},p(p,_){let v=e;e=f(p),e===v?r[e].p(p,_):(ke(),L(r[v],1,1,()=>{r[v]=null}),we(),t=r[e],t?t.p(p,_):(t=r[e]=c[e](p),t.c()),P(t,1),t.m(n.parentNode,n));const h={};_[1]&1024&&(h.$$scope={dirty:_,ctx:p}),i.$set(h)},i(p){o||(P(t),P(i.$$.fragment,p),o=!0)},o(p){L(t),L(i.$$.fragment,p),o=!1},d(p){p&&($(n),$(s)),r[e].d(p),se(i)}}}function fp(l){let e;return{c(){e=q("+ Custom")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function up(l){let e,t;return e=new qe({props:{slot:"header",variant:"success",size:"sm",$$slots:{default:[fp]},$$scope:{ctx:l}}}),e.$on("click",l[20]),{c(){oe(e.$$.fragment)},m(n,s){ne(e,n,s),t=!0},p(n,s){const i={};s[1]&1024&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){se(e,n)}}}function pp(l){let e,t,n,s,i,o,c;return t=new Ie({props:{variant:"warning",$$slots:{default:[vp]},$$scope:{ctx:l}}}),o=new qe({props:{variant:"primary",$$slots:{default:[mp]},$$scope:{ctx:l}}}),o.$on("click",l[15]),{c(){e=d("div"),oe(t.$$.fragment),n=b(),s=d("p"),s.textContent="Base snapshot is required for provisioning new servers.",i=b(),oe(o.$$.fragment),u(s,"class","svelte-m8qcvw"),u(e,"class","status-missing svelte-m8qcvw")},m(r,f){w(r,e,f),ne(t,e,null),a(e,n),a(e,s),a(e,i),ne(o,e,null),c=!0},p(r,f){const p={};f[1]&1024&&(p.$$scope={dirty:f,ctx:r}),t.$set(p);const _={};f[1]&1024&&(_.$$scope={dirty:f,ctx:r}),o.$set(_)},i(r){c||(P(t.$$.fragment,r),P(o.$$.fragment,r),c=!0)},o(r){L(t.$$.fragment,r),L(o.$$.fragment,r),c=!1},d(r){r&&$(e),se(t),se(o)}}}function dp(l){let e,t,n,s,i,o,c=l[1].name+"",r,f,p,_,v=On(l[1].created_at)+"",h,m;return t=new Ie({props:{variant:"success",$$slots:{default:[hp]},$$scope:{ctx:l}}}),{c(){e=d("div"),oe(t.$$.fragment),n=b(),s=d("div"),i=d("div"),o=q("Name: "),r=q(c),f=b(),p=d("div"),_=q("Created: "),h=q(v),u(s,"class","status-details svelte-m8qcvw"),u(e,"class","status-ok svelte-m8qcvw")},m(g,y){w(g,e,y),ne(t,e,null),a(e,n),a(e,s),a(s,i),a(i,o),a(i,r),a(s,f),a(s,p),a(p,_),a(p,h),m=!0},p(g,y){const C={};y[1]&1024&&(C.$$scope={dirty:y,ctx:g}),t.$set(C),(!m||y[0]&2)&&c!==(c=g[1].name+"")&&B(r,c),(!m||y[0]&2)&&v!==(v=On(g[1].created_at)+"")&&B(h,v)},i(g){m||(P(t.$$.fragment,g),m=!0)},o(g){L(t.$$.fragment,g),m=!1},d(g){g&&$(e),se(t)}}}function _p(l){let e;return{c(){e=d("div"),e.textContent="Checking...",u(e,"class","status-checking svelte-m8qcvw")},m(t,n){w(t,e,n)},p:ae,i:ae,o:ae,d(t){t&&$(e)}}}function vp(l){let e;return{c(){e=q("Not found")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function mp(l){let e;return{c(){e=q("Create Base Snapshot")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function hp(l){let e;return{c(){e=q("✓ Ready")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function gp(l){let e,t,n,s;const i=[_p,dp,pp],o=[];function c(r,f){return r[1]===null?0:r[1].exists?1:2}return e=c(l),t=o[e]=i[e](l),{c(){t.c(),n=je()},m(r,f){o[e].m(r,f),w(r,n,f),s=!0},p(r,f){let p=e;e=c(r),e===p?o[e].p(r,f):(ke(),L(o[p],1,1,()=>{o[p]=null}),we(),t=o[e],t?t.p(r,f):(t=o[e]=i[e](r),t.c()),P(t,1),t.m(n.parentNode,n))},i(r){s||(P(t),s=!0)},o(r){L(t),s=!1},d(r){r&&$(n),o[e].d(r)}}}function bp(l){let e,t,n,s,i;return t=new Ie({props:{variant:"info",$$slots:{default:[wp]},$$scope:{ctx:l}}}),{c(){e=d("div"),oe(t.$$.fragment),n=b(),s=d("p"),s.textContent="Optional: Use DO Container Registry for private images.",u(s,"class","svelte-m8qcvw"),u(e,"class","status-missing svelte-m8qcvw")},m(o,c){w(o,e,c),ne(t,e,null),a(e,n),a(e,s),i=!0},p(o,c){const r={};c[1]&1024&&(r.$$scope={dirty:c,ctx:o}),t.$set(r)},i(o){i||(P(t.$$.fragment,o),i=!0)},o(o){L(t.$$.fragment,o),i=!1},d(o){o&&$(e),se(t)}}}function $p(l){let e,t,n,s,i,o,c=l[2].name+"",r,f,p,_,v=l[2].region+"",h,m;return t=new Ie({props:{variant:"success",$$slots:{default:[yp]},$$scope:{ctx:l}}}),{c(){e=d("div"),oe(t.$$.fragment),n=b(),s=d("div"),i=d("div"),o=q("Name: "),r=q(c),f=b(),p=d("div"),_=q("Region: "),h=q(v),u(s,"class","status-details svelte-m8qcvw"),u(e,"class","status-ok svelte-m8qcvw")},m(g,y){w(g,e,y),ne(t,e,null),a(e,n),a(e,s),a(s,i),a(i,o),a(i,r),a(s,f),a(s,p),a(p,_),a(p,h),m=!0},p(g,y){const C={};y[1]&1024&&(C.$$scope={dirty:y,ctx:g}),t.$set(C),(!m||y[0]&4)&&c!==(c=g[2].name+"")&&B(r,c),(!m||y[0]&4)&&v!==(v=g[2].region+"")&&B(h,v)},i(g){m||(P(t.$$.fragment,g),m=!0)},o(g){L(t.$$.fragment,g),m=!1},d(g){g&&$(e),se(t)}}}function kp(l){let e;return{c(){e=d("div"),e.textContent="Checking...",u(e,"class","status-checking svelte-m8qcvw")},m(t,n){w(t,e,n)},p:ae,i:ae,o:ae,d(t){t&&$(e)}}}function wp(l){let e;return{c(){e=q("Not configured")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function yp(l){let e;return{c(){e=q("✓ Connected")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Cp(l){let e,t,n,s;const i=[kp,$p,bp],o=[];function c(r,f){return r[2]===null?0:r[2].exists?1:2}return e=c(l),t=o[e]=i[e](l),{c(){t.c(),n=je()},m(r,f){o[e].m(r,f),w(r,n,f),s=!0},p(r,f){let p=e;e=c(r),e===p?o[e].p(r,f):(ke(),L(o[p],1,1,()=>{o[p]=null}),we(),t=o[e],t?t.p(r,f):(t=o[e]=i[e](r),t.c()),P(t,1),t.m(n.parentNode,n))},i(r){s||(P(t),s=!0)},o(r){L(t),s=!1},d(r){r&&$(n),o[e].d(r)}}}function ur(l){let e,t;return e=new Ne({props:{title:"📋 Progress",$$slots:{default:[Sp]},$$scope:{ctx:l}}}),{c(){oe(e.$$.fragment)},m(n,s){ne(e,n,s),t=!0},p(n,s){const i={};s[0]&48|s[1]&1024&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){se(e,n)}}}function pr(l){let e,t=l[35].message+"",n,s;return{c(){e=d("div"),n=q(t),u(e,"class",s="log-line "+l[35].type+" svelte-m8qcvw")},m(i,o){w(i,e,o),a(e,n)},p(i,o){o[0]&32&&t!==(t=i[35].message+"")&&B(n,t),o[0]&32&&s!==(s="log-line "+i[35].type+" svelte-m8qcvw")&&u(e,"class",s)},d(i){i&&$(e)}}}function Sp(l){let e,t,n,s,i=_e(l[5]),o=[];for(let c=0;c<i.length;c+=1)o[c]=pr(ar(l,i,c));return{c(){e=d("div"),t=d("div"),n=b(),s=d("div");for(let c=0;c<o.length;c+=1)o[c].c();u(t,"class","progress-fill svelte-m8qcvw"),Ae(t,"width",l[4]+"%"),u(e,"class","progress-bar svelte-m8qcvw"),u(s,"class","log-container svelte-m8qcvw")},m(c,r){w(c,e,r),a(e,t),w(c,n,r),w(c,s,r);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(s,null)},p(c,r){if(r[0]&16&&Ae(t,"width",c[4]+"%"),r[0]&32){i=_e(c[5]);let f;for(f=0;f<i.length;f+=1){const p=ar(c,i,f);o[f]?o[f].p(p,r):(o[f]=pr(p),o[f].c(),o[f].m(s,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=i.length}},d(c){c&&($(e),$(n),$(s)),Ee(o,c)}}}function dr(l){let e,t=l[32].label+"",n;return{c(){e=d("option"),n=q(t),e.__value=l[32].value,Q(e,e.__value)},m(s,i){w(s,e,i),a(e,n)},p:ae,d(s){s&&$(e)}}}function qp(l){let e,t,n,s,i,o,c,r,f,p,_,v,h,m,g,y,C,k,S,M,D,T,E,j,R,O,z,F,H=_e(l[13]),W=[];for(let I=0;I<H.length;I+=1)W[I]=dr(rr(l,H,I));return{c(){e=d("form"),t=d("div"),n=d("label"),n.textContent="Snapshot Name *",s=b(),i=d("input"),o=b(),c=d("div"),r=d("label"),r.textContent="Base Image",f=b(),p=d("select");for(let I=0;I<W.length;I+=1)W[I].c();_=b(),v=d("div"),h=d("label"),h.textContent="Pre-install",m=b(),g=d("div"),y=d("label"),C=d("input"),k=q(`
          Docker`),S=b(),M=d("label"),D=d("input"),T=q(`
          Nginx`),E=b(),j=d("label"),R=d("input"),O=q(`
          Certbot (SSL)`),u(n,"for","snap-name"),u(n,"class","svelte-m8qcvw"),u(i,"id","snap-name"),u(i,"type","text"),u(i,"placeholder","my-base-snapshot"),i.required=!0,u(i,"class","svelte-m8qcvw"),u(t,"class","form-group svelte-m8qcvw"),u(r,"for","base-image"),u(r,"class","svelte-m8qcvw"),u(p,"id","base-image"),u(p,"class","svelte-m8qcvw"),l[8]===void 0&&Ue(()=>l[24].call(p)),u(c,"class","form-group svelte-m8qcvw"),u(h,"class","svelte-m8qcvw"),u(C,"type","checkbox"),u(C,"class","svelte-m8qcvw"),u(y,"class","checkbox-item svelte-m8qcvw"),u(D,"type","checkbox"),u(D,"class","svelte-m8qcvw"),u(M,"class","checkbox-item svelte-m8qcvw"),u(R,"type","checkbox"),u(R,"class","svelte-m8qcvw"),u(j,"class","checkbox-item svelte-m8qcvw"),u(g,"class","checkbox-list svelte-m8qcvw"),u(v,"class","form-group svelte-m8qcvw")},m(I,J){w(I,e,J),a(e,t),a(t,n),a(t,s),a(t,i),Q(i,l[7]),a(e,o),a(e,c),a(c,r),a(c,f),a(c,p);for(let A=0;A<W.length;A+=1)W[A]&&W[A].m(p,null);De(p,l[8],!0),a(e,_),a(e,v),a(v,h),a(v,m),a(v,g),a(g,y),a(y,C),C.checked=l[9],a(y,k),a(g,S),a(g,M),a(M,D),D.checked=l[10],a(M,T),a(g,E),a(g,j),a(j,R),R.checked=l[11],a(j,O),z||(F=[te(i,"input",l[23]),te(p,"change",l[24]),te(C,"change",l[25]),te(D,"change",l[26]),te(R,"change",l[27]),te(e,"submit",Xr(l[16]))],z=!0)},p(I,J){if(J[0]&128&&i.value!==I[7]&&Q(i,I[7]),J[0]&8192){H=_e(I[13]);let A;for(A=0;A<H.length;A+=1){const G=rr(I,H,A);W[A]?W[A].p(G,J):(W[A]=dr(G),W[A].c(),W[A].m(p,null))}for(;A<W.length;A+=1)W[A].d(1);W.length=H.length}J[0]&8448&&De(p,I[8]),J[0]&512&&(C.checked=I[9]),J[0]&1024&&(D.checked=I[10]),J[0]&2048&&(R.checked=I[11])},d(I){I&&$(e),Ee(W,I),z=!1,Fe(F)}}}function Tp(l){let e;return{c(){e=q("Cancel")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Dp(l){let e;return{c(){e=q("🔨 Build Snapshot")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Pp(l){let e;return{c(){e=q("Building...")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Ep(l){let e;function t(i,o){return i[6]?Pp:Dp}let n=t(l),s=n(l);return{c(){s.c(),e=je()},m(i,o){s.m(i,o),w(i,e,o)},p(i,o){n!==(n=t(i))&&(s.d(1),s=n(i),s&&(s.c(),s.m(e.parentNode,e)))},d(i){i&&$(e),s.d(i)}}}function Mp(l){let e,t,n,s,i;return t=new qe({props:{variant:"ghost",$$slots:{default:[Tp]},$$scope:{ctx:l}}}),t.$on("click",l[22]),s=new qe({props:{variant:"primary",disabled:l[6],$$slots:{default:[Ep]},$$scope:{ctx:l}}}),s.$on("click",l[16]),{c(){e=d("div"),oe(t.$$.fragment),n=b(),oe(s.$$.fragment),u(e,"slot","footer")},m(o,c){w(o,e,c),ne(t,e,null),a(e,n),ne(s,e,null),i=!0},p(o,c){const r={};c[1]&1024&&(r.$$scope={dirty:c,ctx:o}),t.$set(r);const f={};c[0]&64&&(f.disabled=o[6]),c[0]&64|c[1]&1024&&(f.$$scope={dirty:c,ctx:o}),s.$set(f)},i(o){i||(P(t.$$.fragment,o),P(s.$$.fragment,o),i=!0)},o(o){L(t.$$.fragment,o),L(s.$$.fragment,o),i=!1},d(o){o&&$(e),se(t),se(s)}}}function jp(l){let e,t,n,s,i,o,c,r,f,p,_,v,h;n=new Ne({props:{title:"📸 Your Snapshots",$$slots:{header:[up],default:[cp]},$$scope:{ctx:l}}}),o=new Ne({props:{title:"🏗️ Base Snapshot",$$slots:{default:[gp]},$$scope:{ctx:l}}}),r=new Ne({props:{title:"📦 App Registry (DO)",$$slots:{default:[Cp]},$$scope:{ctx:l}}});let m=l[5].length>0&&ur(l);function g(C){l[28](C)}let y={title:"Build Custom Snapshot",width:"500px",$$slots:{footer:[Mp],default:[qp]},$$scope:{ctx:l}};return l[3]!==void 0&&(y.open=l[3]),_=new Ln({props:y}),kt.push(()=>Mn(_,"open",g)),_.$on("close",l[29]),{c(){e=d("div"),t=d("div"),oe(n.$$.fragment),s=b(),i=d("div"),oe(o.$$.fragment),c=b(),oe(r.$$.fragment),f=b(),m&&m.c(),p=b(),oe(_.$$.fragment),u(i,"class","right-column svelte-m8qcvw"),u(t,"class","snapshots-grid svelte-m8qcvw"),u(e,"class","snapshots-page svelte-m8qcvw")},m(C,k){w(C,e,k),a(e,t),ne(n,t,null),a(t,s),a(t,i),ne(o,i,null),a(i,c),ne(r,i,null),a(i,f),m&&m.m(i,null),w(C,p,k),ne(_,C,k),h=!0},p(C,k){const S={};k[0]&4105|k[1]&1024&&(S.$$scope={dirty:k,ctx:C}),n.$set(S);const M={};k[0]&2|k[1]&1024&&(M.$$scope={dirty:k,ctx:C}),o.$set(M);const D={};k[0]&4|k[1]&1024&&(D.$$scope={dirty:k,ctx:C}),r.$set(D),C[5].length>0?m?(m.p(C,k),k[0]&32&&P(m,1)):(m=ur(C),m.c(),P(m,1),m.m(i,null)):m&&(ke(),L(m,1,1,()=>{m=null}),we());const T={};k[0]&4040|k[1]&1024&&(T.$$scope={dirty:k,ctx:C}),!v&&k[0]&8&&(v=!0,T.open=C[3],En(()=>v=!1)),_.$set(T)},i(C){h||(P(n.$$.fragment,C),P(o.$$.fragment,C),P(r.$$.fragment,C),P(m),P(_.$$.fragment,C),h=!0)},o(C){L(n.$$.fragment,C),L(o.$$.fragment,C),L(r.$$.fragment,C),L(m),L(_.$$.fragment,C),h=!1},d(C){C&&($(e),$(p)),se(n),se(o),se(r),m&&m.d(),se(_,C)}}}function On(l){return l?new Date(l).toLocaleDateString():"-"}function _r(l){return l?`${l} GB`:"-"}function Lp(l,e,t){let n,s,i;We(l,jn,N=>t(19,s=N)),We(l,Zn,N=>t(12,i=N));let o=!1,c=null,r=null,f=!1,p=0,_=[],v=!1,h="",m="ubuntu-22-04-x64",g=!0,y=!0,C=!0;const k=[{value:"ubuntu-22-04-x64",label:"Ubuntu 22.04 LTS"},{value:"ubuntu-20-04-x64",label:"Ubuntu 20.04 LTS"},{value:"debian-11-x64",label:"Debian 11"},{value:"debian-12-x64",label:"Debian 12"}];ul(()=>{M(),D()});function S(){jn.refresh()}async function M(){try{const N=await Be("GET","/infra/setup/status");t(1,c=N)}catch(N){t(1,c={exists:!1,error:N.message})}}async function D(){try{const N=await Be("GET","/infra/registry");t(2,r=N)}catch(N){t(2,r={exists:!1,error:N.message})}}async function T(){t(6,v=!0),t(4,p=0),t(5,_=[]);try{_.push({message:"🚀 Creating base snapshot...",type:"info"}),t(4,p=5),await ia("POST","/infra/setup/init/stream",{},N=>{N.message&&(_.push({message:N.message,type:N.type||"info"}),t(5,_)),N.progress&&t(4,p=N.progress),(N.type==="done"||N.type==="complete")&&t(4,p=100)}),_.push({message:"✅ Base snapshot created successfully",type:"success"}),ve.success("Base snapshot created!"),await M(),await S()}catch(N){_.push({message:`❌ Error: ${N.message}`,type:"error"}),ve.error("Failed to create base snapshot: "+N.message)}finally{t(6,v=!1)}}async function E(){if(!h){ve.error("Snapshot name is required");return}t(6,v=!0),t(4,p=0),t(5,_=[]);try{_.push({message:`Building snapshot: ${h}`,type:"info"}),t(4,p=10);const N=await Be("POST","/infra/snapshots/build",{name:h,base_image:m,install_docker:g,install_nginx:y,install_certbot:C});t(4,p=100),_.push({message:"✅ Snapshot created successfully",type:"success"}),ve.success("Snapshot created!"),await S(),t(3,f=!1)}catch(N){_.push({message:`❌ Error: ${N.message}`,type:"error"}),ve.error(N.message)}finally{t(6,v=!1)}}async function j(N,U){if(confirm(`Delete snapshot "${U}"? This cannot be undone.`))try{await Be("DELETE",`/infra/snapshots/${N}`),ve.success("Snapshot deleted"),await S()}catch(Y){ve.error("Failed to delete snapshot: "+Y.message)}}const R=()=>t(3,f=!0),O=N=>j(N.id,N.name),z=()=>t(3,f=!1);function F(){h=this.value,t(7,h)}function H(){m=Ge(this),t(8,m),t(13,k)}function W(){g=this.checked,t(9,g)}function I(){y=this.checked,t(10,y)}function J(){C=this.checked,t(11,C)}function A(N){f=N,t(3,f)}const G=()=>t(3,f=!1);return l.$$.update=()=>{l.$$.dirty[0]&524288&&t(18,n=s||{loading:!1}),l.$$.dirty[0]&262144&&t(0,o=n.loading)},[o,c,r,f,p,_,v,h,m,g,y,C,i,k,S,T,E,j,n,s,R,O,z,F,H,W,I,J,A,G]}class Np extends Ve{constructor(e){super(),Ye(this,e,Lp,jp,Je,{},null,[-1,-1])}}function vr(l,e,t){var i,o,c;const n=l.slice();n[22]=e[t];const s=n[22].ip||((c=(o=(i=n[22].networks)==null?void 0:i.v4)==null?void 0:o[0])==null?void 0:c.ip_address);return n[23]=s,n}function mr(l,e,t){const n=l.slice();return n[26]=e[t],n}function hr(l,e,t){const n=l.slice();return n[29]=e[t],n}function gr(l){let e,t=l[29].label+"",n;return{c(){e=d("option"),n=q(t),e.__value=l[29].value,Q(e,e.__value)},m(s,i){w(s,e,i),a(e,n)},p:ae,d(s){s&&$(e)}}}function br(l){let e,t=l[26].charAt(0).toUpperCase()+l[26].slice(1)+"",n;return{c(){e=d("option"),n=q(t),e.__value=l[26],Q(e,e.__value)},m(s,i){w(s,e,i),a(e,n)},p:ae,d(s){s&&$(e)}}}function $r(l){let e,t=(l[22].name||"unnamed")+"",n,s,i=l[23]+"",o,c,r;return{c(){e=d("option"),n=q(t),s=q(" ("),o=q(i),c=q(")"),e.__value=r=l[23],Q(e,e.__value)},m(f,p){w(f,e,p),a(e,n),a(e,s),a(e,o),a(e,c)},p(f,p){p[0]&64&&t!==(t=(f[22].name||"unnamed")+"")&&B(n,t),p[0]&64&&i!==(i=f[23]+"")&&B(o,i),p[0]&64&&r!==(r=f[23])&&(e.__value=r,Q(e,e.__value))},d(f){f&&$(e)}}}function kr(l){let e,t=l[23]&&$r(l);return{c(){t&&t.c(),e=je()},m(n,s){t&&t.m(n,s),w(n,e,s)},p(n,s){n[23]?t?t.p(n,s):(t=$r(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(n){n&&$(e),t&&t.d(n)}}}function Rp(l){let e;return{c(){e=q("🚀 Deploy Service")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Op(l){let e;return{c(){e=q("Deploying...")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Ap(l){let e;function t(i,o){return i[4]?Op:Rp}let n=t(l),s=n(l);return{c(){s.c(),e=je()},m(i,o){s.m(i,o),w(i,e,o)},p(i,o){n!==(n=t(i))&&(s.d(1),s=n(i),s&&(s.c(),s.m(e.parentNode,e)))},d(i){i&&$(e),s.d(i)}}}function Fp(l){let e,t,n,s,i,o,c,r,f,p,_,v,h,m,g,y,C,k,S,M,D,T,E,j,R,O,z,F,H,W,I,J=_e(l[7]),A=[];for(let Z=0;Z<J.length;Z+=1)A[Z]=gr(hr(l,J,Z));let G=_e(l[8]),N=[];for(let Z=0;Z<G.length;Z+=1)N[Z]=br(mr(l,G,Z));let U=_e(l[6]),Y=[];for(let Z=0;Z<U.length;Z+=1)Y[Z]=kr(vr(l,U,Z));return F=new qe({props:{variant:"primary",type:"submit",disabled:l[4],$$slots:{default:[Ap]},$$scope:{ctx:l}}}),{c(){e=d("p"),e.textContent="Deploy stateful services with automatic configuration, persistence, and service mesh.",t=b(),n=d("form"),s=d("div"),i=d("label"),i.textContent="Service Type *",o=b(),c=d("select"),r=d("option"),r.textContent="Select service...";for(let Z=0;Z<A.length;Z+=1)A[Z].c();f=b(),p=d("div"),_=d("label"),_.textContent="Project *",v=b(),h=d("input"),m=b(),g=d("div"),y=d("label"),y.textContent="Environment",C=b(),k=d("select");for(let Z=0;Z<N.length;Z+=1)N[Z].c();S=b(),M=d("div"),D=d("label"),D.textContent="Target Server *",T=b(),E=d("select"),j=d("option"),j.textContent="Select server...";for(let Z=0;Z<Y.length;Z+=1)Y[Z].c();R=b(),O=d("small"),O.textContent="Servers from Infrastructure tab",z=b(),oe(F.$$.fragment),u(e,"class","description svelte-2vlpp7"),u(i,"for","svc-type"),u(i,"class","svelte-2vlpp7"),r.__value="",Q(r,r.__value),u(c,"id","svc-type"),c.required=!0,u(c,"class","svelte-2vlpp7"),l[0]===void 0&&Ue(()=>l[11].call(c)),u(s,"class","form-group svelte-2vlpp7"),u(_,"for","svc-project"),u(_,"class","svelte-2vlpp7"),u(h,"id","svc-project"),u(h,"type","text"),u(h,"placeholder","myapp"),h.required=!0,u(h,"class","svelte-2vlpp7"),u(p,"class","form-group svelte-2vlpp7"),u(y,"for","svc-env"),u(y,"class","svelte-2vlpp7"),u(k,"id","svc-env"),u(k,"class","svelte-2vlpp7"),l[2]===void 0&&Ue(()=>l[13].call(k)),u(g,"class","form-group svelte-2vlpp7"),u(D,"for","svc-server"),u(D,"class","svelte-2vlpp7"),j.__value="",Q(j,j.__value),u(E,"id","svc-server"),E.required=!0,u(E,"class","svelte-2vlpp7"),l[3]===void 0&&Ue(()=>l[14].call(E)),u(O,"class","svelte-2vlpp7"),u(M,"class","form-group svelte-2vlpp7")},m(Z,ie){w(Z,e,ie),w(Z,t,ie),w(Z,n,ie),a(n,s),a(s,i),a(s,o),a(s,c),a(c,r);for(let le=0;le<A.length;le+=1)A[le]&&A[le].m(c,null);De(c,l[0],!0),a(n,f),a(n,p),a(p,_),a(p,v),a(p,h),Q(h,l[1]),a(n,m),a(n,g),a(g,y),a(g,C),a(g,k);for(let le=0;le<N.length;le+=1)N[le]&&N[le].m(k,null);De(k,l[2],!0),a(n,S),a(n,M),a(M,D),a(M,T),a(M,E),a(E,j);for(let le=0;le<Y.length;le+=1)Y[le]&&Y[le].m(E,null);De(E,l[3],!0),a(M,R),a(M,O),a(n,z),ne(F,n,null),H=!0,W||(I=[te(c,"change",l[11]),te(h,"input",l[12]),te(k,"change",l[13]),te(E,"change",l[14]),te(n,"submit",l[9])],W=!0)},p(Z,ie){if(ie[0]&128){J=_e(Z[7]);let ee;for(ee=0;ee<J.length;ee+=1){const ue=hr(Z,J,ee);A[ee]?A[ee].p(ue,ie):(A[ee]=gr(ue),A[ee].c(),A[ee].m(c,null))}for(;ee<A.length;ee+=1)A[ee].d(1);A.length=J.length}if(ie[0]&129&&De(c,Z[0]),ie[0]&2&&h.value!==Z[1]&&Q(h,Z[1]),ie[0]&256){G=_e(Z[8]);let ee;for(ee=0;ee<G.length;ee+=1){const ue=mr(Z,G,ee);N[ee]?N[ee].p(ue,ie):(N[ee]=br(ue),N[ee].c(),N[ee].m(k,null))}for(;ee<N.length;ee+=1)N[ee].d(1);N.length=G.length}if(ie[0]&260&&De(k,Z[2]),ie[0]&64){U=_e(Z[6]);let ee;for(ee=0;ee<U.length;ee+=1){const ue=vr(Z,U,ee);Y[ee]?Y[ee].p(ue,ie):(Y[ee]=kr(ue),Y[ee].c(),Y[ee].m(E,null))}for(;ee<Y.length;ee+=1)Y[ee].d(1);Y.length=U.length}ie[0]&72&&De(E,Z[3]);const le={};ie[0]&16&&(le.disabled=Z[4]),ie[0]&16|ie[1]&2&&(le.$$scope={dirty:ie,ctx:Z}),F.$set(le)},i(Z){H||(P(F.$$.fragment,Z),H=!0)},o(Z){L(F.$$.fragment,Z),H=!1},d(Z){Z&&($(e),$(t),$(n)),Ee(A,Z),Ee(N,Z),Ee(Y,Z),se(F),W=!1,Fe(I)}}}function zp(l){let e;return{c(){e=d("div"),e.innerHTML='<div class="empty-icon svelte-2vlpp7">🗄️</div> <div>Deploy a service to see connection details</div>',u(e,"class","empty-result svelte-2vlpp7")},m(t,n){w(t,e,n)},p:ae,d(t){t&&$(e)}}}function Bp(l){let e,t,n,s,i,o=l[5].service_type+"",c,r,f,p,_,v,h,m,g=(l[5].host||"localhost")+"",y,C,k,S,M,D,T=l[5].port+"",E,j,R,O,z,F,H,W,I,J=l[5].database&&wr(l),A=l[5].username&&yr(l),G=l[5].password&&Cr(l),N=l[5].connection_url&&Sr(l);return{c(){e=d("div"),t=d("div"),n=d("span"),n.textContent="✅",s=b(),i=d("span"),c=q(o),r=q(" deployed"),f=b(),p=d("div"),_=d("div"),v=d("span"),v.textContent="Host:",h=b(),m=d("code"),y=q(g),C=b(),k=d("div"),S=d("span"),S.textContent="Port:",M=b(),D=d("code"),E=q(T),j=b(),J&&J.c(),R=b(),A&&A.c(),O=b(),G&&G.c(),z=b(),N&&N.c(),F=b(),H=d("small"),H.textContent="Click any value to copy",u(n,"class","result-icon svelte-2vlpp7"),u(i,"class","result-title svelte-2vlpp7"),u(t,"class","result-header svelte-2vlpp7"),u(v,"class","label svelte-2vlpp7"),u(m,"class","value clickable svelte-2vlpp7"),u(_,"class","info-row svelte-2vlpp7"),u(S,"class","label svelte-2vlpp7"),u(D,"class","value clickable svelte-2vlpp7"),u(k,"class","info-row svelte-2vlpp7"),u(p,"class","connection-info svelte-2vlpp7"),u(H,"class","copy-hint svelte-2vlpp7"),u(e,"class","result-content svelte-2vlpp7")},m(U,Y){w(U,e,Y),a(e,t),a(t,n),a(t,s),a(t,i),a(i,c),a(i,r),a(e,f),a(e,p),a(p,_),a(_,v),a(_,h),a(_,m),a(m,y),a(p,C),a(p,k),a(k,S),a(k,M),a(k,D),a(D,E),a(p,j),J&&J.m(p,null),a(p,R),A&&A.m(p,null),a(p,O),G&&G.m(p,null),a(p,z),N&&N.m(p,null),a(e,F),a(e,H),W||(I=[te(m,"click",l[15]),te(D,"click",l[16])],W=!0)},p(U,Y){Y[0]&32&&o!==(o=U[5].service_type+"")&&B(c,o),Y[0]&32&&g!==(g=(U[5].host||"localhost")+"")&&B(y,g),Y[0]&32&&T!==(T=U[5].port+"")&&B(E,T),U[5].database?J?J.p(U,Y):(J=wr(U),J.c(),J.m(p,R)):J&&(J.d(1),J=null),U[5].username?A?A.p(U,Y):(A=yr(U),A.c(),A.m(p,O)):A&&(A.d(1),A=null),U[5].password?G?G.p(U,Y):(G=Cr(U),G.c(),G.m(p,z)):G&&(G.d(1),G=null),U[5].connection_url?N?N.p(U,Y):(N=Sr(U),N.c(),N.m(p,null)):N&&(N.d(1),N=null)},d(U){U&&$(e),J&&J.d(),A&&A.d(),G&&G.d(),N&&N.d(),W=!1,Fe(I)}}}function wr(l){let e,t,n,s,i=l[5].database+"",o,c,r;return{c(){e=d("div"),t=d("span"),t.textContent="Database:",n=b(),s=d("code"),o=q(i),u(t,"class","label svelte-2vlpp7"),u(s,"class","value clickable svelte-2vlpp7"),u(e,"class","info-row svelte-2vlpp7")},m(f,p){w(f,e,p),a(e,t),a(e,n),a(e,s),a(s,o),c||(r=te(s,"click",l[17]),c=!0)},p(f,p){p[0]&32&&i!==(i=f[5].database+"")&&B(o,i)},d(f){f&&$(e),c=!1,r()}}}function yr(l){let e,t,n,s,i=l[5].username+"",o,c,r;return{c(){e=d("div"),t=d("span"),t.textContent="Username:",n=b(),s=d("code"),o=q(i),u(t,"class","label svelte-2vlpp7"),u(s,"class","value clickable svelte-2vlpp7"),u(e,"class","info-row svelte-2vlpp7")},m(f,p){w(f,e,p),a(e,t),a(e,n),a(e,s),a(s,o),c||(r=te(s,"click",l[18]),c=!0)},p(f,p){p[0]&32&&i!==(i=f[5].username+"")&&B(o,i)},d(f){f&&$(e),c=!1,r()}}}function Cr(l){let e,t,n,s,i=l[5].password+"",o,c,r;return{c(){e=d("div"),t=d("span"),t.textContent="Password:",n=b(),s=d("code"),o=q(i),u(t,"class","label svelte-2vlpp7"),u(s,"class","value clickable svelte-2vlpp7"),u(e,"class","info-row svelte-2vlpp7")},m(f,p){w(f,e,p),a(e,t),a(e,n),a(e,s),a(s,o),c||(r=te(s,"click",l[19]),c=!0)},p(f,p){p[0]&32&&i!==(i=f[5].password+"")&&B(o,i)},d(f){f&&$(e),c=!1,r()}}}function Sr(l){let e,t,n,s,i=l[5].connection_url+"",o,c,r;return{c(){e=d("div"),t=d("span"),t.textContent="Connection URL:",n=b(),s=d("code"),o=q(i),u(t,"class","label svelte-2vlpp7"),u(s,"class","value url clickable svelte-2vlpp7"),u(e,"class","info-row full-width svelte-2vlpp7")},m(f,p){w(f,e,p),a(e,t),a(e,n),a(e,s),a(s,o),c||(r=te(s,"click",l[20]),c=!0)},p(f,p){p[0]&32&&i!==(i=f[5].connection_url+"")&&B(o,i)},d(f){f&&$(e),c=!1,r()}}}function Up(l){let e;function t(i,o){return i[5]?Bp:zp}let n=t(l),s=n(l);return{c(){s.c(),e=je()},m(i,o){s.m(i,o),w(i,e,o)},p(i,o){n===(n=t(i))&&s?s.p(i,o):(s.d(1),s=n(i),s&&(s.c(),s.m(e.parentNode,e)))},d(i){i&&$(e),s.d(i)}}}function Ip(l){let e;return{c(){e=d("div"),e.innerHTML='<div class="feature svelte-2vlpp7"><strong class="svelte-2vlpp7">🔐 Auto Credentials</strong> <p class="svelte-2vlpp7">Deterministic passwords generated from project/env. Same inputs = same password.</p></div> <div class="feature svelte-2vlpp7"><strong class="svelte-2vlpp7">💾 Persistent Storage</strong> <p class="svelte-2vlpp7">Data volumes mounted at /data. Survives container restarts and redeploys.</p></div> <div class="feature svelte-2vlpp7"><strong class="svelte-2vlpp7">🔀 Service Mesh</strong> <p class="svelte-2vlpp7">Nginx proxy on internal ports. Apps connect to localhost:PORT.</p></div> <div class="feature svelte-2vlpp7"><strong class="svelte-2vlpp7">🔧 Auto-Inject</strong> <p class="svelte-2vlpp7">Enable &quot;Auto-inject&quot; in Deploy tab to get DATABASE_URL automatically.</p></div>',u(e,"class","features-grid svelte-2vlpp7")},m(t,n){w(t,e,n)},p:ae,d(t){t&&$(e)}}}function Hp(l){let e,t,n,s,i,o,c,r;return n=new Ne({props:{title:"🗄️ Deploy Database/Cache",$$slots:{default:[Fp]},$$scope:{ctx:l}}}),i=new Ne({props:{title:"📋 Deployment Result",$$slots:{default:[Up]},$$scope:{ctx:l}}}),c=new Ne({props:{title:"ℹ️ How It Works",$$slots:{default:[Ip]},$$scope:{ctx:l}}}),{c(){e=d("div"),t=d("div"),oe(n.$$.fragment),s=b(),oe(i.$$.fragment),o=b(),oe(c.$$.fragment),u(t,"class","services-grid svelte-2vlpp7"),u(e,"class","services-page svelte-2vlpp7")},m(f,p){w(f,e,p),a(e,t),ne(n,t,null),a(t,s),ne(i,t,null),a(e,o),ne(c,e,null),r=!0},p(f,p){const _={};p[0]&95|p[1]&2&&(_.$$scope={dirty:p,ctx:f}),n.$set(_);const v={};p[0]&32|p[1]&2&&(v.$$scope={dirty:p,ctx:f}),i.$set(v);const h={};p[1]&2&&(h.$$scope={dirty:p,ctx:f}),c.$set(h)},i(f){r||(P(n.$$.fragment,f),P(i.$$.fragment,f),P(c.$$.fragment,f),r=!0)},o(f){L(n.$$.fragment,f),L(i.$$.fragment,f),L(c.$$.fragment,f),r=!1},d(f){f&&$(e),se(n),se(i),se(c)}}}function Gp(l,e,t){let n;We(l,bl,R=>t(6,n=R));let s="",i="",o="prod",c="",r=!1,f=null;const p=[{value:"postgres",label:"🐘 PostgreSQL",port:5432},{value:"redis",label:"⚡ Redis",port:6379},{value:"mysql",label:"🐬 MySQL",port:3306},{value:"mongo",label:"🍃 MongoDB",port:27017}],_=["prod","staging","dev"];ul(()=>{v()});async function v(){try{const R=await Be("GET","/infra/servers");bl.set(R.servers||R||[])}catch(R){console.error("Failed to load servers:",R)}}async function h(R){if(R.preventDefault(),!s||!i||!c){ve.error("Please fill in all required fields");return}t(4,r=!0),t(5,f=null);try{ve.error("Service deployment not yet implemented. Use Deploy tab instead.");return}catch(O){ve.error("Deployment failed: "+O.message)}finally{t(4,r=!1)}}function m(R){navigator.clipboard.writeText(R),ve.success("Copied to clipboard")}function g(){s=Ge(this),t(0,s),t(7,p)}function y(){i=this.value,t(1,i)}function C(){o=Ge(this),t(2,o),t(8,_)}function k(){c=Ge(this),t(3,c)}return[s,i,o,c,r,f,n,p,_,h,m,g,y,C,k,()=>m(f.host||"localhost"),()=>m(String(f.port)),()=>m(f.database),()=>m(f.username),()=>m(f.password),()=>m(f.connection_url)]}class Wp extends Ve{constructor(e){super(),Ye(this,e,Gp,Hp,Je,{},null,[-1,-1])}}const{Boolean:Jp}=Kr;function qr(l,e,t){const n=l.slice();return n[32]=e[t],n}function Yp(l){let e,t,n,s,i,o,c,r,f,p;return{c(){e=d("div"),t=d("label"),t.textContent="Theme",n=b(),s=d("select"),i=d("option"),i.textContent="🌙 Dark (Space)",o=d("option"),o.textContent="☀️ Light",c=b(),r=d("p"),r.textContent="Theme preference is saved to your browser.",u(t,"for","theme-select"),u(t,"class","svelte-16vnl3x"),i.__value="dark",Q(i,i.__value),o.__value="light",Q(o,o.__value),u(s,"id","theme-select"),u(s,"class","svelte-16vnl3x"),l[14]===void 0&&Ue(()=>l[21].call(s)),u(e,"class","form-group svelte-16vnl3x"),u(r,"class","hint svelte-16vnl3x")},m(_,v){w(_,e,v),a(e,t),a(e,n),a(e,s),a(s,i),a(s,o),De(s,l[14],!0),w(_,c,v),w(_,r,v),f||(p=[te(s,"change",l[21]),te(s,"change",l[22])],f=!0)},p(_,v){v[0]&16384&&De(s,_[14])},d(_){_&&($(e),$(c),$(r)),f=!1,Fe(p)}}}function Vp(l){let e;return{c(){e=q("Save Token")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Kp(l){let e,t;return e=new Ie({props:{variant:"danger",$$slots:{default:[Zp]},$$scope:{ctx:l}}}),{c(){oe(e.$$.fragment)},m(n,s){ne(e,n,s),t=!0},p(n,s){const i={};s[1]&16&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){se(e,n)}}}function Qp(l){let e,t;return e=new Ie({props:{variant:"warning",$$slots:{default:[xp]},$$scope:{ctx:l}}}),{c(){oe(e.$$.fragment)},m(n,s){ne(e,n,s),t=!0},p(n,s){const i={};s[1]&16&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){se(e,n)}}}function Xp(l){let e,t,n,s,i;return e=new Ie({props:{variant:"success",$$slots:{default:[ed]},$$scope:{ctx:l}}}),{c(){oe(e.$$.fragment),t=b(),n=d("span"),s=q(l[0]),u(n,"class","token-preview svelte-16vnl3x")},m(o,c){ne(e,o,c),w(o,t,c),w(o,n,c),a(n,s),i=!0},p(o,c){const r={};c[1]&16&&(r.$$scope={dirty:c,ctx:o}),e.$set(r),(!i||c[0]&1)&&B(s,o[0])},i(o){i||(P(e.$$.fragment,o),i=!0)},o(o){L(e.$$.fragment,o),i=!1},d(o){o&&($(t),$(n)),se(e,o)}}}function Zp(l){let e;return{c(){e=q("Invalid token")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function xp(l){let e;return{c(){e=q("Not configured")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function ed(l){let e;return{c(){e=q("✓ Connected")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function td(l){let e,t,n,s,i,o,c,r,f,p,_,v,h,m,g;r=new qe({props:{variant:"primary",type:"submit",$$slots:{default:[Vp]},$$scope:{ctx:l}}});const y=[Xp,Qp,Kp],C=[];function k(S,M){var D,T;return(D=S[1])!=null&&D.valid?0:(T=S[1])!=null&&T.missing?1:2}return _=k(l),v=C[_]=y[_](l),{c(){e=d("p"),e.innerHTML=`Get your token from 
      <a href="https://cloud.digitalocean.com/account/api/tokens" target="_blank" class="svelte-16vnl3x">DO Control Panel</a>.`,t=b(),n=d("div"),n.innerHTML='<div class="info-title svelte-16vnl3x">🔒 Browser Storage</div> <div class="info-text svelte-16vnl3x">Token stored in browser cookie. Passed with each API request. Never stored on server.</div>',s=b(),i=d("form"),o=d("div"),o.innerHTML='<label for="do-token" class="svelte-16vnl3x">DigitalOcean API Token</label> <input id="do-token" type="password" placeholder="dop_v1_xxxxx" class="svelte-16vnl3x"/>',c=b(),oe(r.$$.fragment),f=b(),p=d("div"),v.c(),u(e,"class","description svelte-16vnl3x"),u(n,"class","info-box svelte-16vnl3x"),u(o,"class","form-group svelte-16vnl3x"),u(p,"class","token-status svelte-16vnl3x")},m(S,M){w(S,e,M),w(S,t,M),w(S,n,M),w(S,s,M),w(S,i,M),a(i,o),a(i,c),ne(r,i,null),w(S,f,M),w(S,p,M),C[_].m(p,null),h=!0,m||(g=te(i,"submit",l[15]),m=!0)},p(S,M){const D={};M[1]&16&&(D.$$scope={dirty:M,ctx:S}),r.$set(D);let T=_;_=k(S),_===T?C[_].p(S,M):(ke(),L(C[T],1,1,()=>{C[T]=null}),we(),v=C[_],v?v.p(S,M):(v=C[_]=y[_](S),v.c()),P(v,1),v.m(p,null))},i(S){h||(P(r.$$.fragment,S),P(v),h=!0)},o(S){L(r.$$.fragment,S),L(v),h=!1},d(S){S&&($(e),$(t),$(n),$(s),$(i),$(f),$(p)),se(r),C[_].d(),m=!1,g()}}}function ld(l){let e;return{c(){e=q("Save Token")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function nd(l){let e,t;return e=new Ie({props:{variant:"warning",$$slots:{default:[od]},$$scope:{ctx:l}}}),{c(){oe(e.$$.fragment)},m(n,s){ne(e,n,s),t=!0},p(n,s){const i={};s[1]&16&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){se(e,n)}}}function sd(l){let e,t,n,s,i;return e=new Ie({props:{variant:"success",$$slots:{default:[id]},$$scope:{ctx:l}}}),{c(){oe(e.$$.fragment),t=b(),n=d("span"),s=q(l[2]),u(n,"class","token-preview svelte-16vnl3x")},m(o,c){ne(e,o,c),w(o,t,c),w(o,n,c),a(n,s),i=!0},p(o,c){const r={};c[1]&16&&(r.$$scope={dirty:c,ctx:o}),e.$set(r),(!i||c[0]&4)&&B(s,o[2])},i(o){i||(P(e.$$.fragment,o),i=!0)},o(o){L(e.$$.fragment,o),i=!1},d(o){o&&($(t),$(n)),se(e,o)}}}function od(l){let e;return{c(){e=q("Not configured")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function id(l){let e;return{c(){e=q("✓ Connected")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function rd(l){let e,t,n,s,i,o,c,r,f,p,_,v,h;o=new qe({props:{variant:"primary",type:"submit",$$slots:{default:[ld]},$$scope:{ctx:l}}});const m=[sd,nd],g=[];function y(C,k){var S;return(S=C[3])!=null&&S.valid?0:1}return f=y(l),p=g[f]=m[f](l),{c(){e=d("p"),e.innerHTML=`Get your token from 
      <a href="https://dash.cloudflare.com/profile/api-tokens" target="_blank" class="svelte-16vnl3x">Cloudflare Dashboard</a>.`,t=b(),n=d("form"),s=d("div"),s.innerHTML='<label for="cf-token" class="svelte-16vnl3x">Cloudflare API Token</label> <input id="cf-token" type="password" placeholder="xxxxx" class="svelte-16vnl3x"/>',i=b(),oe(o.$$.fragment),c=b(),r=d("div"),p.c(),u(e,"class","description svelte-16vnl3x"),u(s,"class","form-group svelte-16vnl3x"),u(r,"class","token-status svelte-16vnl3x")},m(C,k){w(C,e,k),w(C,t,k),w(C,n,k),a(n,s),a(n,i),ne(o,n,null),w(C,c,k),w(C,r,k),g[f].m(r,null),_=!0,v||(h=te(n,"submit",l[16]),v=!0)},p(C,k){const S={};k[1]&16&&(S.$$scope={dirty:k,ctx:C}),o.$set(S);let M=f;f=y(C),f===M?g[f].p(C,k):(ke(),L(g[M],1,1,()=>{g[M]=null}),we(),p=g[f],p?p.p(C,k):(p=g[f]=m[f](C),p.c()),P(p,1),p.m(r,null))},i(C){_||(P(o.$$.fragment,C),P(p),_=!0)},o(C){L(o.$$.fragment,C),L(p),_=!1},d(C){C&&($(e),$(t),$(n),$(c),$(r)),se(o),g[f].d(),v=!1,h()}}}function ad(l){let e;return{c(){e=q("Setup Domain")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Tr(l){let e,t=l[7].message+"",n;return{c(){e=d("div"),n=q(t),u(e,"class","result svelte-16vnl3x"),$e(e,"success",l[7].success),$e(e,"error",!l[7].success)},m(s,i){w(s,e,i),a(e,n)},p(s,i){i[0]&128&&t!==(t=s[7].message+"")&&B(n,t),i[0]&128&&$e(e,"success",s[7].success),i[0]&128&&$e(e,"error",!s[7].success)},d(s){s&&$(e)}}}function cd(l){let e,t,n,s,i,o,c,r,f,p,_,v,h,m,g,y,C,k,S,M,D,T,E,j;S=new qe({props:{variant:"primary",type:"submit",$$slots:{default:[ad]},$$scope:{ctx:l}}});let R=l[7]&&Tr(l);return{c(){e=d("p"),e.textContent='Point a domain to your server. With "Proxied" enabled, HTTPS works automatically.',t=b(),n=d("form"),s=d("div"),i=d("label"),i.textContent="Domain",o=b(),c=d("input"),r=b(),f=d("div"),p=d("label"),p.textContent="Server IP",_=b(),v=d("input"),h=b(),m=d("label"),g=d("input"),y=q(`
        Proxied (Cloudflare handles SSL)`),C=b(),k=d("div"),oe(S.$$.fragment),M=b(),R&&R.c(),D=je(),u(e,"class","description svelte-16vnl3x"),u(i,"for","domain-name"),u(i,"class","svelte-16vnl3x"),u(c,"id","domain-name"),u(c,"type","text"),u(c,"placeholder","api.example.com"),c.required=!0,u(c,"class","svelte-16vnl3x"),u(s,"class","form-group svelte-16vnl3x"),u(p,"for","domain-ip"),u(p,"class","svelte-16vnl3x"),u(v,"id","domain-ip"),u(v,"type","text"),u(v,"placeholder","1.2.3.4"),v.required=!0,u(v,"class","svelte-16vnl3x"),u(f,"class","form-group svelte-16vnl3x"),u(g,"type","checkbox"),u(g,"class","svelte-16vnl3x"),u(m,"class","checkbox-label svelte-16vnl3x"),u(k,"class","form-actions svelte-16vnl3x")},m(O,z){w(O,e,z),w(O,t,z),w(O,n,z),a(n,s),a(s,i),a(s,o),a(s,c),Q(c,l[4]),a(n,r),a(n,f),a(f,p),a(f,_),a(f,v),Q(v,l[5]),a(n,h),a(n,m),a(m,g),g.checked=l[6],a(m,y),a(n,C),a(n,k),ne(S,k,null),w(O,M,z),R&&R.m(O,z),w(O,D,z),T=!0,E||(j=[te(c,"input",l[23]),te(v,"input",l[24]),te(g,"change",l[25]),te(n,"submit",l[17])],E=!0)},p(O,z){z[0]&16&&c.value!==O[4]&&Q(c,O[4]),z[0]&32&&v.value!==O[5]&&Q(v,O[5]),z[0]&64&&(g.checked=O[6]);const F={};z[1]&16&&(F.$$scope={dirty:z,ctx:O}),S.$set(F),O[7]?R?R.p(O,z):(R=Tr(O),R.c(),R.m(D.parentNode,D)):R&&(R.d(1),R=null)},i(O){T||(P(S.$$.fragment,O),T=!0)},o(O){L(S.$$.fragment,O),T=!1},d(O){O&&($(e),$(t),$(n),$(M),$(D)),se(S),R&&R.d(O),E=!1,Fe(j)}}}function fd(l){let e;return{c(){e=q("Setup DNS Round-Robin")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Dr(l){let e,t=l[11].message+"",n;return{c(){e=d("div"),n=q(t),u(e,"class","result svelte-16vnl3x"),$e(e,"success",l[11].success),$e(e,"error",!l[11].success)},m(s,i){w(s,e,i),a(e,n)},p(s,i){i[0]&2048&&t!==(t=s[11].message+"")&&B(n,t),i[0]&2048&&$e(e,"success",s[11].success),i[0]&2048&&$e(e,"error",!s[11].success)},d(s){s&&$(e)}}}function ud(l){let e,t,n,s,i,o,c,r,f,p,_,v,h,m,g,y,C,k,S,M,D,T,E,j;S=new qe({props:{variant:"primary",type:"submit",$$slots:{default:[fd]},$$scope:{ctx:l}}});let R=l[11]&&Dr(l);return{c(){e=d("p"),e.innerHTML=`Simple load distribution via multiple A records. Cloudflare rotates between IPs at DNS level.
      <strong>FREE</strong>, but no health checks.`,t=b(),n=d("form"),s=d("div"),i=d("label"),i.textContent="Domain",o=b(),c=d("input"),r=b(),f=d("div"),p=d("label"),p.textContent="Server IPs (comma-separated)",_=b(),v=d("input"),h=b(),m=d("label"),g=d("input"),y=q(`
        Proxied (SSL + CDN)`),C=b(),k=d("div"),oe(S.$$.fragment),M=b(),R&&R.c(),D=je(),u(e,"class","description svelte-16vnl3x"),u(i,"for","lb-domain"),u(i,"class","svelte-16vnl3x"),u(c,"id","lb-domain"),u(c,"type","text"),u(c,"placeholder","api.example.com"),c.required=!0,u(c,"class","svelte-16vnl3x"),u(s,"class","form-group svelte-16vnl3x"),u(p,"for","lb-ips"),u(p,"class","svelte-16vnl3x"),u(v,"id","lb-ips"),u(v,"type","text"),u(v,"placeholder","1.2.3.4, 5.6.7.8"),v.required=!0,u(v,"class","svelte-16vnl3x"),u(f,"class","form-group svelte-16vnl3x"),u(g,"type","checkbox"),u(g,"class","svelte-16vnl3x"),u(m,"class","checkbox-label svelte-16vnl3x"),u(k,"class","form-actions svelte-16vnl3x")},m(O,z){w(O,e,z),w(O,t,z),w(O,n,z),a(n,s),a(s,i),a(s,o),a(s,c),Q(c,l[8]),a(n,r),a(n,f),a(f,p),a(f,_),a(f,v),Q(v,l[9]),a(n,h),a(n,m),a(m,g),g.checked=l[10],a(m,y),a(n,C),a(n,k),ne(S,k,null),w(O,M,z),R&&R.m(O,z),w(O,D,z),T=!0,E||(j=[te(c,"input",l[26]),te(v,"input",l[27]),te(g,"change",l[28]),te(n,"submit",l[18])],E=!0)},p(O,z){z[0]&256&&c.value!==O[8]&&Q(c,O[8]),z[0]&512&&v.value!==O[9]&&Q(v,O[9]),z[0]&1024&&(g.checked=O[10]);const F={};z[1]&16&&(F.$$scope={dirty:z,ctx:O}),S.$set(F),O[11]?R?R.p(O,z):(R=Dr(O),R.c(),R.m(D.parentNode,D)):R&&(R.d(1),R=null)},i(O){T||(P(S.$$.fragment,O),T=!0)},o(O){L(S.$$.fragment,O),T=!1},d(O){O&&($(e),$(t),$(n),$(M),$(D)),se(S),R&&R.d(O),E=!1,Fe(j)}}}function pd(l){let e,t,n=_e(l[12]),s=[];for(let o=0;o<n.length;o+=1)s[o]=Pr(qr(l,n,o));const i=o=>L(s[o],1,1,()=>{s[o]=null});return{c(){e=d("div");for(let o=0;o<s.length;o+=1)s[o].c();u(e,"class","task-list svelte-16vnl3x")},m(o,c){w(o,e,c);for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(e,null);t=!0},p(o,c){if(c[0]&1052672){n=_e(o[12]);let r;for(r=0;r<n.length;r+=1){const f=qr(o,n,r);s[r]?(s[r].p(f,c),P(s[r],1)):(s[r]=Pr(f),s[r].c(),P(s[r],1),s[r].m(e,null))}for(ke(),r=n.length;r<s.length;r+=1)i(r);we()}},i(o){if(!t){for(let c=0;c<n.length;c+=1)P(s[c]);t=!0}},o(o){s=s.filter(Jp);for(let c=0;c<s.length;c+=1)L(s[c]);t=!1},d(o){o&&$(e),Ee(s,o)}}}function dd(l){let e;return{c(){e=d("div"),e.textContent="No scheduled tasks",u(e,"class","empty-state svelte-16vnl3x")},m(t,n){w(t,e,n)},p:ae,i:ae,o:ae,d(t){t&&$(e)}}}function _d(l){let e;return{c(){e=d("div"),e.textContent="Loading tasks...",u(e,"class","empty-state svelte-16vnl3x")},m(t,n){w(t,e,n)},p:ae,i:ae,o:ae,d(t){t&&$(e)}}}function vd(l){let e=l[32].type+"",t;return{c(){t=q(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&4096&&e!==(e=n[32].type+"")&&B(t,e)},d(n){n&&$(t)}}}function md(l){let e;return{c(){e=q("🗑️")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Pr(l){let e,t,n,s=l[32].name+"",i,o,c,r,f,p,_,v=l[32].interval+"",h,m,g,y,C,k;r=new Ie({props:{variant:"info",$$slots:{default:[vd]},$$scope:{ctx:l}}});function S(){return l[29](l[32])}return y=new qe({props:{variant:"danger",size:"sm",$$slots:{default:[md]},$$scope:{ctx:l}}}),y.$on("click",S),{c(){e=d("div"),t=d("div"),n=d("div"),i=q(s),o=b(),c=d("div"),oe(r.$$.fragment),f=b(),p=d("span"),_=q("Every "),h=q(v),m=q(" min"),g=b(),oe(y.$$.fragment),C=b(),u(n,"class","task-name svelte-16vnl3x"),u(c,"class","task-meta svelte-16vnl3x"),u(t,"class","task-info"),u(e,"class","task-item svelte-16vnl3x")},m(M,D){w(M,e,D),a(e,t),a(t,n),a(n,i),a(t,o),a(t,c),ne(r,c,null),a(c,f),a(c,p),a(p,_),a(p,h),a(p,m),a(e,g),ne(y,e,null),a(e,C),k=!0},p(M,D){l=M,(!k||D[0]&4096)&&s!==(s=l[32].name+"")&&B(i,s);const T={};D[0]&4096|D[1]&16&&(T.$$scope={dirty:D,ctx:l}),r.$set(T),(!k||D[0]&4096)&&v!==(v=l[32].interval+"")&&B(h,v);const E={};D[1]&16&&(E.$$scope={dirty:D,ctx:l}),y.$set(E)},i(M){k||(P(r.$$.fragment,M),P(y.$$.fragment,M),k=!0)},o(M){L(r.$$.fragment,M),L(y.$$.fragment,M),k=!1},d(M){M&&$(e),se(r),se(y)}}}function hd(l){let e,t,n,s,i,o;const c=[_d,dd,pd],r=[];function f(p,_){return p[13]?0:p[12].length===0?1:2}return n=f(l),s=r[n]=c[n](l),{c(){e=d("p"),e.textContent="Schedule recurring tasks like health checks, auto-restart, and backups.",t=b(),s.c(),i=je(),u(e,"class","description svelte-16vnl3x")},m(p,_){w(p,e,_),w(p,t,_),r[n].m(p,_),w(p,i,_),o=!0},p(p,_){let v=n;n=f(p),n===v?r[n].p(p,_):(ke(),L(r[v],1,1,()=>{r[v]=null}),we(),s=r[n],s?s.p(p,_):(s=r[n]=c[n](p),s.c()),P(s,1),s.m(i.parentNode,i))},i(p){o||(P(s),o=!0)},o(p){L(s),o=!1},d(p){p&&($(e),$(t),$(i)),r[n].d(p)}}}function gd(l){let e;return{c(){e=q("↻ Refresh")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function bd(l){let e,t;return e=new qe({props:{slot:"header",variant:"ghost",size:"sm",$$slots:{default:[gd]},$$scope:{ctx:l}}}),e.$on("click",l[19]),{c(){oe(e.$$.fragment)},m(n,s){ne(e,n,s),t=!0},p(n,s){const i={};s[1]&16&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){se(e,n)}}}function $d(l){let e,t,n,s,i,o,c,r,f,p,_,v,h;return t=new Ne({props:{title:"🎨 Appearance",$$slots:{default:[Yp]},$$scope:{ctx:l}}}),s=new Ne({props:{title:"⚙️ DigitalOcean Credentials",$$slots:{default:[td]},$$scope:{ctx:l}}}),o=new Ne({props:{title:"☁️ Cloudflare Credentials",$$slots:{default:[rd]},$$scope:{ctx:l}}}),r=new Ne({props:{title:"🌐 Domain Setup",$$slots:{default:[cd]},$$scope:{ctx:l}}}),p=new Ne({props:{title:"🌐 DNS Round-Robin (Cloudflare)",$$slots:{default:[ud]},$$scope:{ctx:l}}}),v=new Ne({props:{title:"⏰ Task Scheduler",$$slots:{header:[bd],default:[hd]},$$scope:{ctx:l}}}),{c(){e=d("div"),oe(t.$$.fragment),n=b(),oe(s.$$.fragment),i=b(),oe(o.$$.fragment),c=b(),oe(r.$$.fragment),f=b(),oe(p.$$.fragment),_=b(),oe(v.$$.fragment),u(e,"class","settings-page svelte-16vnl3x")},m(m,g){w(m,e,g),ne(t,e,null),a(e,n),ne(s,e,null),a(e,i),ne(o,e,null),a(e,c),ne(r,e,null),a(e,f),ne(p,e,null),a(e,_),ne(v,e,null),h=!0},p(m,g){const y={};g[0]&16384|g[1]&16&&(y.$$scope={dirty:g,ctx:m}),t.$set(y);const C={};g[0]&3|g[1]&16&&(C.$$scope={dirty:g,ctx:m}),s.$set(C);const k={};g[0]&12|g[1]&16&&(k.$$scope={dirty:g,ctx:m}),o.$set(k);const S={};g[0]&240|g[1]&16&&(S.$$scope={dirty:g,ctx:m}),r.$set(S);const M={};g[0]&3840|g[1]&16&&(M.$$scope={dirty:g,ctx:m}),p.$set(M);const D={};g[0]&12288|g[1]&16&&(D.$$scope={dirty:g,ctx:m}),v.$set(D)},i(m){h||(P(t.$$.fragment,m),P(s.$$.fragment,m),P(o.$$.fragment,m),P(r.$$.fragment,m),P(p.$$.fragment,m),P(v.$$.fragment,m),h=!0)},o(m){L(t.$$.fragment,m),L(s.$$.fragment,m),L(o.$$.fragment,m),L(r.$$.fragment,m),L(p.$$.fragment,m),L(v.$$.fragment,m),h=!1},d(m){m&&$(e),se(t),se(s),se(o),se(r),se(p),se(v)}}}function kd(l,e,t){let n;We(l,Yn,N=>t(14,n=N));let s="",i=null,o="",c=null,r="",f="",p=!0,_=null,v="",h="",m=!0,g=null,y=[],C=!1;ul(()=>{k(),S(),j()});async function k(){const N=Zl();if(N){t(0,s=N.substring(0,10)+"...");try{await Be("GET","/infra/snapshots"),t(1,i={valid:!0})}catch{t(1,i={valid:!1})}}else t(1,i={valid:!1,missing:!0})}async function S(){const N=Qn();N?(t(2,o=N.substring(0,10)+"..."),t(3,c={valid:!0})):t(3,c={valid:!1,missing:!0})}async function M(N){N.preventDefault();const U=N.target.querySelector("input"),Y=U.value;if(!Y){ve.error("Token is required");return}Ra(Y),U.value="",ve.success("DigitalOcean token saved"),await k()}async function D(N){N.preventDefault();const U=N.target.querySelector("input"),Y=U.value;if(!Y){ve.error("Token is required");return}Oa(Y),U.value="",ve.success("Cloudflare token saved"),await S()}async function T(N){N.preventDefault();try{const U=await Be("POST","/infra/cloudflare/domain",{domain:r,ip:f,proxied:p});t(7,_={success:!0,message:"Domain configured successfully"}),ve.success("Domain setup complete")}catch(U){t(7,_={success:!1,message:U.message}),ve.error(U.message)}}async function E(N){N.preventDefault();try{const U=h.split(",").map(Z=>Z.trim()).filter(Boolean),Y=await Be("POST","/infra/cloudflare/lb",{domain:v,server_ips:U,proxied:m});t(11,g={success:!0,message:`Created load balancer with ${U.length} servers`}),ve.success("Load balancer configured")}catch(U){t(11,g={success:!1,message:U.message}),ve.error(U.message)}}async function j(){t(13,C=!0);try{const N=await Be("GET","/infra/scheduler/tasks");t(12,y=N.tasks||N||[])}catch{t(12,y=[])}finally{t(13,C=!1)}}async function R(N){if(confirm("Delete this scheduled task?"))try{await Be("DELETE",`/infra/scheduler/tasks/${N}`),ve.success("Task deleted"),await j()}catch(U){ve.error(U.message)}}function O(){n=Ge(this),Yn.set(n)}const z=()=>Yn.set(n);function F(){r=this.value,t(4,r)}function H(){f=this.value,t(5,f)}function W(){p=this.checked,t(6,p)}function I(){v=this.value,t(8,v)}function J(){h=this.value,t(9,h)}function A(){m=this.checked,t(10,m)}return[s,i,o,c,r,f,p,_,v,h,m,g,y,C,n,M,D,T,E,j,R,O,z,F,H,W,I,J,A,N=>R(N.id)]}class wd extends Ve{constructor(e){super(),Ye(this,e,kd,$d,Je,{},null,[-1,-1])}}function Er(l,e,t){const n=l.slice();n[21]=e[t];const s=n[1].filter(function(...r){return l[17](n[21],...r)});n[22]=s;const i=n[21].domain;n[23]=i;const o=n[22].length>1;return n[24]=o,n}function Mr(l,e,t){const n=l.slice();return n[27]=e[t],n}function jr(l,e,t){const n=l.slice();return n[21]=e[t],n}function Lr(l,e,t){const n=l.slice();return n[32]=e[t],n}function yd(l){let e,t,n,s,i,o,c,r,f,p,_,v,h,m,g,y,C,k,S=l[1].length+"",M,D,T,E,j,R,O,z,F=l[7].length+"",H,W,I,J;const A=[Dd,Td],G=[];function N(U,Y){return U[11]?1:0}return v=N(l),h=G[v]=A[v](l),{c(){e=d("div"),t=d("div"),n=d("div"),n.innerHTML='<span class="summary-icon svelte-odhywp">🔀</span> <span>Nginx Sidecar</span>',s=b(),i=d("div"),o=q(l[3]),c=q("/"),r=q(l[2]),f=b(),p=d("div"),p.textContent="servers with nginx",_=b(),h.c(),m=b(),g=d("div"),y=d("div"),y.innerHTML='<span class="summary-icon svelte-odhywp">🤖</span> <span>Node Agents</span>',C=b(),k=d("div"),M=q(S),D=b(),T=d("div"),T.textContent="servers monitored",E=b(),j=d("div"),R=d("div"),R.innerHTML='<span class="summary-icon svelte-odhywp">📦</span> <span>Services</span>',O=b(),z=d("div"),H=q(F),W=b(),I=d("div"),I.textContent="deployed services",u(n,"class","summary-header svelte-odhywp"),u(i,"class","summary-value svelte-odhywp"),u(p,"class","summary-label svelte-odhywp"),u(t,"class","summary-card svelte-odhywp"),$e(t,"ok",l[11]),$e(t,"warn",!l[11]),u(y,"class","summary-header svelte-odhywp"),u(k,"class","summary-value svelte-odhywp"),u(T,"class","summary-label svelte-odhywp"),u(g,"class","summary-card info svelte-odhywp"),u(R,"class","summary-header svelte-odhywp"),u(z,"class","summary-value svelte-odhywp"),u(I,"class","summary-label svelte-odhywp"),u(j,"class","summary-card info svelte-odhywp"),u(e,"class","summary-grid svelte-odhywp")},m(U,Y){w(U,e,Y),a(e,t),a(t,n),a(t,s),a(t,i),a(i,o),a(i,c),a(i,r),a(t,f),a(t,p),a(t,_),G[v].m(t,null),a(e,m),a(e,g),a(g,y),a(g,C),a(g,k),a(k,M),a(g,D),a(g,T),a(e,E),a(e,j),a(j,R),a(j,O),a(j,z),a(z,H),a(j,W),a(j,I),J=!0},p(U,Y){(!J||Y[0]&8)&&B(o,U[3]),(!J||Y[0]&4)&&B(r,U[2]);let Z=v;v=N(U),v===Z?G[v].p(U,Y):(ke(),L(G[Z],1,1,()=>{G[Z]=null}),we(),h=G[v],h?h.p(U,Y):(h=G[v]=A[v](U),h.c()),P(h,1),h.m(t,null)),(!J||Y[0]&2048)&&$e(t,"ok",U[11]),(!J||Y[0]&2048)&&$e(t,"warn",!U[11]),(!J||Y[0]&2)&&S!==(S=U[1].length+"")&&B(M,S),(!J||Y[0]&128)&&F!==(F=U[7].length+"")&&B(H,F)},i(U){J||(P(h),J=!0)},o(U){L(h),J=!1},d(U){U&&$(e),G[v].d()}}}function Cd(l){let e;return{c(){e=d("div"),e.innerHTML='<p>No services deployed yet</p> <p class="hint svelte-odhywp">Deploy your first service to see the architecture</p>',u(e,"class","empty-state svelte-odhywp")},m(t,n){w(t,e,n)},p:ae,i:ae,o:ae,d(t){t&&$(e)}}}function Sd(l){let e,t,n,s,i,o;return{c(){e=d("div"),t=d("p"),n=q("Failed to load: "),s=q(l[9]),i=b(),o=d("p"),o.textContent="Check your connection and try refreshing",u(o,"class","hint svelte-odhywp"),u(e,"class","empty-state svelte-odhywp")},m(c,r){w(c,e,r),a(e,t),a(t,n),a(t,s),a(e,i),a(e,o)},p(c,r){r[0]&512&&B(s,c[9])},i:ae,o:ae,d(c){c&&$(e)}}}function qd(l){let e;return{c(){e=d("div"),e.textContent="Loading architecture...",u(e,"class","empty-state svelte-odhywp")},m(t,n){w(t,e,n)},p:ae,i:ae,o:ae,d(t){t&&$(e)}}}function Td(l){let e;return{c(){e=d("div"),e.textContent="✅ All servers OK",u(e,"class","summary-ok svelte-odhywp")},m(t,n){w(t,e,n)},p:ae,i:ae,o:ae,d(t){t&&$(e)}}}function Dd(l){let e,t;return e=new qe({props:{variant:"warning",size:"sm",$$slots:{default:[Pd]},$$scope:{ctx:l}}}),e.$on("click",l[13]),{c(){oe(e.$$.fragment)},m(n,s){ne(e,n,s),t=!0},p(n,s){const i={};s[0]&12|s[1]&16&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){se(e,n)}}}function Pd(l){let e,t=l[2]-l[3]+"",n,s;return{c(){e=q("🔧 Fix "),n=q(t),s=q(" server(s)")},m(i,o){w(i,e,o),w(i,n,o),w(i,s,o)},p(i,o){o[0]&12&&t!==(t=i[2]-i[3]+"")&&B(n,t)},d(i){i&&($(e),$(n),$(s))}}}function Ed(l){let e,t,n,s;const i=[qd,Sd,Cd,yd],o=[];function c(r,f){return r[6]&&!r[10]?0:r[9]?1:r[7].length===0&&r[1].length===0?2:3}return e=c(l),t=o[e]=i[e](l),{c(){t.c(),n=je()},m(r,f){o[e].m(r,f),w(r,n,f),s=!0},p(r,f){let p=e;e=c(r),e===p?o[e].p(r,f):(ke(),L(o[p],1,1,()=>{o[p]=null}),we(),t=o[e],t?t.p(r,f):(t=o[e]=i[e](r),t.c()),P(t,1),t.m(n.parentNode,n))},i(r){s||(P(t),s=!0)},o(r){L(t),s=!1},d(r){r&&$(n),o[e].d(r)}}}function Nr(l){let e,t=l[32]+"",n,s;return{c(){e=d("option"),n=q(t),e.__value=s=l[32],Q(e,e.__value)},m(i,o){w(i,e,o),a(e,n)},p(i,o){o[0]&4096&&t!==(t=i[32]+"")&&B(n,t),o[0]&4096&&s!==(s=i[32])&&(e.__value=s,Q(e,e.__value))},d(i){i&&$(e)}}}function Rr(l){let e,t,n=Ur(l[8])+"",s;return{c(){e=d("span"),t=q("Updated "),s=q(n),u(e,"class","last-updated svelte-odhywp")},m(i,o){w(i,e,o),a(e,t),a(e,s)},p(i,o){o[0]&256&&n!==(n=Ur(i[8])+"")&&B(s,n)},d(i){i&&$(e)}}}function Md(l){let e;return{c(){e=q("↻ Refresh")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function jd(l){let e,t,n,s,i,o,c,r,f,p,_,v,h,m,g,y=_e(l[12]),C=[];for(let S=0;S<y.length;S+=1)C[S]=Nr(Lr(l,y,S));let k=l[8]&&Rr(l);return v=new qe({props:{variant:"ghost",size:"sm",$$slots:{default:[Md]},$$scope:{ctx:l}}}),v.$on("click",l[0]),{c(){e=d("div"),t=d("select"),n=d("option"),n.textContent="All Projects";for(let S=0;S<C.length;S+=1)C[S].c();s=b(),i=d("select"),o=d("option"),o.textContent="All Envs",c=d("option"),c.textContent="prod",r=d("option"),r.textContent="staging",f=d("option"),f.textContent="dev",p=b(),k&&k.c(),_=b(),oe(v.$$.fragment),n.__value="",Q(n,n.__value),u(t,"class","svelte-odhywp"),l[4]===void 0&&Ue(()=>l[15].call(t)),o.__value="",Q(o,o.__value),c.__value="prod",Q(c,c.__value),r.__value="staging",Q(r,r.__value),f.__value="dev",Q(f,f.__value),u(i,"class","svelte-odhywp"),l[5]===void 0&&Ue(()=>l[16].call(i)),u(e,"slot","header"),u(e,"class","filters svelte-odhywp")},m(S,M){w(S,e,M),a(e,t),a(t,n);for(let D=0;D<C.length;D+=1)C[D]&&C[D].m(t,null);De(t,l[4],!0),a(e,s),a(e,i),a(i,o),a(i,c),a(i,r),a(i,f),De(i,l[5],!0),a(e,p),k&&k.m(e,null),a(e,_),ne(v,e,null),h=!0,m||(g=[te(t,"change",l[15]),te(t,"change",l[14]),te(i,"change",l[16]),te(i,"change",l[14])],m=!0)},p(S,M){if(M[0]&4096){y=_e(S[12]);let T;for(T=0;T<y.length;T+=1){const E=Lr(S,y,T);C[T]?C[T].p(E,M):(C[T]=Nr(E),C[T].c(),C[T].m(t,null))}for(;T<C.length;T+=1)C[T].d(1);C.length=y.length}M[0]&4112&&De(t,S[4]),M[0]&32&&De(i,S[5]),S[8]?k?k.p(S,M):(k=Rr(S),k.c(),k.m(e,_)):k&&(k.d(1),k=null);const D={};M[1]&16&&(D.$$scope={dirty:M,ctx:S}),v.$set(D)},i(S){h||(P(v.$$.fragment,S),h=!0)},o(S){L(v.$$.fragment,S),h=!1},d(S){S&&$(e),Ee(C,S),k&&k.d(),se(v),m=!1,Fe(g)}}}function Ld(l){let e,t,n=_e(l[7]),s=[];for(let o=0;o<n.length;o+=1)s[o]=Or(jr(l,n,o));const i=o=>L(s[o],1,1,()=>{s[o]=null});return{c(){e=d("div");for(let o=0;o<s.length;o+=1)s[o].c();u(e,"class","list svelte-odhywp")},m(o,c){w(o,e,c);for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(e,null);t=!0},p(o,c){if(c[0]&128){n=_e(o[7]);let r;for(r=0;r<n.length;r+=1){const f=jr(o,n,r);s[r]?(s[r].p(f,c),P(s[r],1)):(s[r]=Or(f),s[r].c(),P(s[r],1),s[r].m(e,null))}for(ke(),r=n.length;r<s.length;r+=1)i(r);we()}},i(o){if(!t){for(let c=0;c<n.length;c+=1)P(s[c]);t=!0}},o(o){s=s.filter(Boolean);for(let c=0;c<s.length;c+=1)L(s[c]);t=!1},d(o){o&&$(e),Ee(s,o)}}}function Nd(l){let e;return{c(){e=d("div"),e.textContent="No services found",u(e,"class","empty-panel svelte-odhywp")},m(t,n){w(t,e,n)},p:ae,i:ae,o:ae,d(t){t&&$(e)}}}function Rd(l){let e=l[21].type+"",t;return{c(){t=q(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&128&&e!==(e=n[21].type+"")&&B(t,e)},d(n){n&&$(t)}}}function Or(l){var I,J;let e,t,n=An(l[21])+"",s,i,o,c,r=l[21].service+"",f,p,_,v=l[21].project+"",h,m,g=l[21].env+"",y,C,k,S,M=(((I=l[21].servers)==null?void 0:I.length)||0)+"",D,T,E,j,R=(((J=l[21].ports)==null?void 0:J.join(", "))||"-")+"",O,z,F,H,W;return F=new Ie({props:{variant:l[21].type==="stateful"?"warning":"info",$$slots:{default:[Rd]},$$scope:{ctx:l}}}),{c(){e=d("div"),t=d("div"),s=q(n),i=b(),o=d("div"),c=d("div"),f=q(r),p=b(),_=d("div"),h=q(v),m=q(" / "),y=q(g),C=b(),k=d("div"),S=d("div"),D=q(M),T=q(" server(s)"),E=b(),j=d("div"),O=q(R),z=b(),oe(F.$$.fragment),H=b(),u(t,"class","item-icon svelte-odhywp"),u(c,"class","item-name svelte-odhywp"),u(_,"class","item-meta svelte-odhywp"),u(o,"class","item-info svelte-odhywp"),u(j,"class","ports svelte-odhywp"),u(k,"class","item-stats svelte-odhywp"),u(e,"class","list-item svelte-odhywp")},m(A,G){w(A,e,G),a(e,t),a(t,s),a(e,i),a(e,o),a(o,c),a(c,f),a(o,p),a(o,_),a(_,h),a(_,m),a(_,y),a(e,C),a(e,k),a(k,S),a(S,D),a(S,T),a(k,E),a(k,j),a(j,O),a(e,z),ne(F,e,null),a(e,H),W=!0},p(A,G){var U,Y;(!W||G[0]&128)&&n!==(n=An(A[21])+"")&&B(s,n),(!W||G[0]&128)&&r!==(r=A[21].service+"")&&B(f,r),(!W||G[0]&128)&&v!==(v=A[21].project+"")&&B(h,v),(!W||G[0]&128)&&g!==(g=A[21].env+"")&&B(y,g),(!W||G[0]&128)&&M!==(M=(((U=A[21].servers)==null?void 0:U.length)||0)+"")&&B(D,M),(!W||G[0]&128)&&R!==(R=(((Y=A[21].ports)==null?void 0:Y.join(", "))||"-")+"")&&B(O,R);const N={};G[0]&128&&(N.variant=A[21].type==="stateful"?"warning":"info"),G[0]&128|G[1]&16&&(N.$$scope={dirty:G,ctx:A}),F.$set(N)},i(A){W||(P(F.$$.fragment,A),W=!0)},o(A){L(F.$$.fragment,A),W=!1},d(A){A&&$(e),se(F)}}}function Od(l){let e,t,n,s;const i=[Nd,Ld],o=[];function c(r,f){return r[7].length===0?0:1}return e=c(l),t=o[e]=i[e](l),{c(){t.c(),n=je()},m(r,f){o[e].m(r,f),w(r,n,f),s=!0},p(r,f){let p=e;e=c(r),e===p?o[e].p(r,f):(ke(),L(o[p],1,1,()=>{o[p]=null}),we(),t=o[e],t?t.p(r,f):(t=o[e]=i[e](r),t.c()),P(t,1),t.m(n.parentNode,n))},i(r){s||(P(t),s=!0)},o(r){L(t),s=!1},d(r){r&&$(n),o[e].d(r)}}}function Ad(l){let e,t,n=_e(l[1]),s=[];for(let o=0;o<n.length;o+=1)s[o]=Ar(Mr(l,n,o));const i=o=>L(s[o],1,1,()=>{s[o]=null});return{c(){e=d("div");for(let o=0;o<s.length;o+=1)s[o].c();u(e,"class","list svelte-odhywp")},m(o,c){w(o,e,c);for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(e,null);t=!0},p(o,c){if(c[0]&2){n=_e(o[1]);let r;for(r=0;r<n.length;r+=1){const f=Mr(o,n,r);s[r]?(s[r].p(f,c),P(s[r],1)):(s[r]=Ar(f),s[r].c(),P(s[r],1),s[r].m(e,null))}for(ke(),r=n.length;r<s.length;r+=1)i(r);we()}},i(o){if(!t){for(let c=0;c<n.length;c+=1)P(s[c]);t=!0}},o(o){s=s.filter(Boolean);for(let c=0;c<s.length;c+=1)L(s[c]);t=!1},d(o){o&&$(e),Ee(s,o)}}}function Fd(l){let e;return{c(){e=d("div"),e.textContent="No servers found",u(e,"class","empty-panel svelte-odhywp")},m(t,n){w(t,e,n)},p:ae,i:ae,o:ae,d(t){t&&$(e)}}}function zd(l){let e=Fn(l[27])?"🔀 nginx":"⚠️ no nginx",t;return{c(){t=q(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&2&&e!==(e=Fn(n[27])?"🔀 nginx":"⚠️ no nginx")&&B(t,e)},d(n){n&&$(t)}}}function Bd(l){let e,t=(l[27].agent_version||"?")+"",n;return{c(){e=q("🤖 v"),n=q(t)},m(s,i){w(s,e,i),w(s,n,i)},p(s,i){i[0]&2&&t!==(t=(s[27].agent_version||"?")+"")&&B(n,t)},d(s){s&&($(e),$(n))}}}function Ar(l){let e,t,n=l[27].status==="online"?"🟢":"🔴",s,i,o,c,r=l[27].ip+"",f,p,_,v=(l[27].containers||0)+"",h,m,g,y,C,k,S,M,D;return C=new Ie({props:{variant:Fn(l[27])?"success":"warning",$$slots:{default:[zd]},$$scope:{ctx:l}}}),S=new Ie({props:{variant:"info",$$slots:{default:[Bd]},$$scope:{ctx:l}}}),{c(){e=d("div"),t=d("div"),s=q(n),i=b(),o=d("div"),c=d("code"),f=q(r),p=b(),_=d("div"),h=q(v),m=q(" container(s)"),g=b(),y=d("div"),oe(C.$$.fragment),k=b(),oe(S.$$.fragment),M=b(),u(t,"class","item-icon svelte-odhywp"),u(c,"class","server-ip svelte-odhywp"),u(_,"class","item-meta svelte-odhywp"),u(o,"class","item-info svelte-odhywp"),u(y,"class","item-badges svelte-odhywp"),u(e,"class","list-item svelte-odhywp")},m(T,E){w(T,e,E),a(e,t),a(t,s),a(e,i),a(e,o),a(o,c),a(c,f),a(o,p),a(o,_),a(_,h),a(_,m),a(e,g),a(e,y),ne(C,y,null),a(y,k),ne(S,y,null),a(e,M),D=!0},p(T,E){(!D||E[0]&2)&&n!==(n=T[27].status==="online"?"🟢":"🔴")&&B(s,n),(!D||E[0]&2)&&r!==(r=T[27].ip+"")&&B(f,r),(!D||E[0]&2)&&v!==(v=(T[27].containers||0)+"")&&B(h,v);const j={};E[0]&2&&(j.variant=Fn(T[27])?"success":"warning"),E[0]&2|E[1]&16&&(j.$$scope={dirty:E,ctx:T}),C.$set(j);const R={};E[0]&2|E[1]&16&&(R.$$scope={dirty:E,ctx:T}),S.$set(R)},i(T){D||(P(C.$$.fragment,T),P(S.$$.fragment,T),D=!0)},o(T){L(C.$$.fragment,T),L(S.$$.fragment,T),D=!1},d(T){T&&$(e),se(C),se(S)}}}function Ud(l){let e,t,n,s;const i=[Fd,Ad],o=[];function c(r,f){return r[1].length===0?0:1}return e=c(l),t=o[e]=i[e](l),{c(){t.c(),n=je()},m(r,f){o[e].m(r,f),w(r,n,f),s=!0},p(r,f){let p=e;e=c(r),e===p?o[e].p(r,f):(ke(),L(o[p],1,1,()=>{o[p]=null}),we(),t=o[e],t?t.p(r,f):(t=o[e]=i[e](r),t.c()),P(t,1),t.m(n.parentNode,n))},i(r){s||(P(t),s=!0)},o(r){L(t),s=!1},d(r){r&&$(n),o[e].d(r)}}}function Id(l){let e,t,n=_e(l[7]),s=[];for(let o=0;o<n.length;o+=1)s[o]=Br(Er(l,n,o));const i=o=>L(s[o],1,1,()=>{s[o]=null});return{c(){e=d("div");for(let o=0;o<s.length;o+=1)s[o].c();u(e,"class","traffic-flow svelte-odhywp")},m(o,c){w(o,e,c);for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(e,null);t=!0},p(o,c){if(c[0]&130){n=_e(o[7]);let r;for(r=0;r<n.length;r+=1){const f=Er(o,n,r);s[r]?(s[r].p(f,c),P(s[r],1)):(s[r]=Br(f),s[r].c(),P(s[r],1),s[r].m(e,null))}for(ke(),r=n.length;r<s.length;r+=1)i(r);we()}},i(o){if(!t){for(let c=0;c<n.length;c+=1)P(s[c]);t=!0}},o(o){s=s.filter(Boolean);for(let c=0;c<s.length;c+=1)L(s[c]);t=!1},d(o){o&&$(e),Ee(s,o)}}}function Hd(l){let e;return{c(){e=d("div"),e.textContent="Deploy services to see traffic flow",u(e,"class","empty-panel svelte-odhywp")},m(t,n){w(t,e,n)},p:ae,i:ae,o:ae,d(t){t&&$(e)}}}function Gd(l){let e=l[21].env+"",t;return{c(){t=q(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&128&&e!==(e=n[21].env+"")&&B(t,e)},d(n){n&&$(t)}}}function Fr(l){let e,t,n,s,i,o,c=l[21].domain+"",r,f,p;return{c(){e=d("div"),t=d("span"),t.textContent="☁️",n=b(),s=d("span"),s.textContent="Cloudflare",i=b(),o=d("span"),r=q(c),f=b(),p=d("div"),p.textContent="→",u(t,"class","svelte-odhywp"),u(s,"class","node-label svelte-odhywp"),u(o,"class","node-detail svelte-odhywp"),u(e,"class","flow-node cloudflare svelte-odhywp"),u(p,"class","flow-arrow svelte-odhywp")},m(_,v){w(_,e,v),a(e,t),a(e,n),a(e,s),a(e,i),a(e,o),a(o,r),w(_,f,v),w(_,p,v)},p(_,v){v[0]&128&&c!==(c=_[21].domain+"")&&B(r,c)},d(_){_&&($(e),$(f),$(p))}}}function Wd(l){let e;return{c(){e=q("Server")},m(t,n){w(t,e,n)},p:ae,d(t){t&&$(e)}}}function Jd(l){let e,t=l[22].length+"",n,s;return{c(){e=q("⚖️ Load Balanced ("),n=q(t),s=q(")")},m(i,o){w(i,e,o),w(i,n,o),w(i,s,o)},p(i,o){o[0]&130&&t!==(t=i[22].length+"")&&B(n,t)},d(i){i&&($(e),$(n),$(s))}}}function zr(l){let e,t,n,s=l[21].domain+"",i,o;return{c(){e=d("span"),t=q("Domain: "),n=d("a"),i=q(s),u(n,"href",o="https://"+l[21].domain),u(n,"target","_blank"),u(n,"class","svelte-odhywp")},m(c,r){w(c,e,r),a(e,t),a(e,n),a(n,i)},p(c,r){r[0]&128&&s!==(s=c[21].domain+"")&&B(i,s),r[0]&128&&o!==(o="https://"+c[21].domain)&&u(n,"href",o)},d(c){c&&$(e)}}}function Br(l){let e,t,n,s=An(l[21])+"",i,o,c,r=l[21].service+"",f,p,_,v,h,m,g,y,C,k,S,M,D,T,E,j,R,O,z,F,H,W,I,J,A=(l[21].host_port||"8000")+"",G,N,U,Y,Z,ie,le,ee=(l[21].container_name||l[21].id)+"",ue,x,he;_=new Ie({props:{variant:l[21].env==="prod"?"danger":"info",$$slots:{default:[Gd]},$$scope:{ctx:l}}});let re=l[23]&&Fr(l);function X(fe,ye){return fe[24]?Jd:Wd}let de=X(l),pe=de(l),be=l[23]&&zr(l);return{c(){e=d("div"),t=d("div"),n=d("span"),i=q(s),o=b(),c=d("span"),f=q(r),p=b(),oe(_.$$.fragment),v=b(),h=d("div"),re&&re.c(),m=b(),g=d("div"),y=d("span"),y.textContent="🖥️",C=b(),k=d("span"),pe.c(),S=b(),M=d("div"),M.textContent="→",D=b(),T=d("div"),T.innerHTML='<span class="svelte-odhywp">🔀</span> <span class="node-label svelte-odhywp">nginx</span> <span class="node-detail svelte-odhywp">:443</span>',E=b(),j=d("div"),j.textContent="→",R=b(),O=d("div"),z=d("span"),z.textContent="🐳",F=b(),H=d("span"),H.textContent="Container",W=b(),I=d("span"),J=q(":"),G=q(A),N=b(),U=d("div"),be&&be.c(),Y=b(),Z=d("span"),ie=q("Container: "),le=d("code"),ue=q(ee),x=b(),u(n,"class","flow-icon svelte-odhywp"),u(c,"class","flow-name svelte-odhywp"),u(t,"class","flow-header svelte-odhywp"),u(y,"class","svelte-odhywp"),u(k,"class","node-label svelte-odhywp"),u(g,"class","flow-node server svelte-odhywp"),u(M,"class","flow-arrow svelte-odhywp"),u(T,"class","flow-node nginx svelte-odhywp"),u(j,"class","flow-arrow svelte-odhywp"),u(z,"class","svelte-odhywp"),u(H,"class","node-label svelte-odhywp"),u(I,"class","node-detail svelte-odhywp"),u(O,"class","flow-node container svelte-odhywp"),u(h,"class","flow-path svelte-odhywp"),u(le,"class","svelte-odhywp"),u(U,"class","flow-details svelte-odhywp"),u(e,"class","flow-card svelte-odhywp")},m(fe,ye){w(fe,e,ye),a(e,t),a(t,n),a(n,i),a(t,o),a(t,c),a(c,f),a(t,p),ne(_,t,null),a(e,v),a(e,h),re&&re.m(h,null),a(h,m),a(h,g),a(g,y),a(g,C),a(g,k),pe.m(k,null),a(h,S),a(h,M),a(h,D),a(h,T),a(h,E),a(h,j),a(h,R),a(h,O),a(O,z),a(O,F),a(O,H),a(O,W),a(O,I),a(I,J),a(I,G),a(e,N),a(e,U),be&&be.m(U,null),a(U,Y),a(U,Z),a(Z,ie),a(Z,le),a(le,ue),a(e,x),he=!0},p(fe,ye){(!he||ye[0]&128)&&s!==(s=An(fe[21])+"")&&B(i,s),(!he||ye[0]&128)&&r!==(r=fe[21].service+"")&&B(f,r);const Oe={};ye[0]&128&&(Oe.variant=fe[21].env==="prod"?"danger":"info"),ye[0]&128|ye[1]&16&&(Oe.$$scope={dirty:ye,ctx:fe}),_.$set(Oe),fe[23]?re?re.p(fe,ye):(re=Fr(fe),re.c(),re.m(h,m)):re&&(re.d(1),re=null),de===(de=X(fe))&&pe?pe.p(fe,ye):(pe.d(1),pe=de(fe),pe&&(pe.c(),pe.m(k,null))),(!he||ye[0]&128)&&A!==(A=(fe[21].host_port||"8000")+"")&&B(G,A),fe[23]?be?be.p(fe,ye):(be=zr(fe),be.c(),be.m(U,Y)):be&&(be.d(1),be=null),(!he||ye[0]&128)&&ee!==(ee=(fe[21].container_name||fe[21].id)+"")&&B(ue,ee)},i(fe){he||(P(_.$$.fragment,fe),he=!0)},o(fe){L(_.$$.fragment,fe),he=!1},d(fe){fe&&$(e),se(_),re&&re.d(),pe.d(),be&&be.d()}}}function Yd(l){let e,t,n,s;const i=[Hd,Id],o=[];function c(r,f){return r[7].length===0?0:1}return e=c(l),t=o[e]=i[e](l),{c(){t.c(),n=je()},m(r,f){o[e].m(r,f),w(r,n,f),s=!0},p(r,f){let p=e;e=c(r),e===p?o[e].p(r,f):(ke(),L(o[p],1,1,()=>{o[p]=null}),we(),t=o[e],t?t.p(r,f):(t=o[e]=i[e](r),t.c()),P(t,1),t.m(n.parentNode,n))},i(r){s||(P(t),s=!0)},o(r){L(t),s=!1},d(r){r&&$(n),o[e].d(r)}}}function Vd(l){let e;return{c(){e=d("span"),e.textContent="Request path from client to container",u(e,"slot","header"),u(e,"class","subtitle svelte-odhywp")},m(t,n){w(t,e,n)},p:ae,d(t){t&&$(e)}}}function Kd(l){let e,t,n,s,i,o,c,r,f,p;return t=new Ne({props:{title:"🏗️ Architecture View",$$slots:{header:[jd],default:[Ed]},$$scope:{ctx:l}}}),i=new Ne({props:{title:"📦 Services",padding:!1,$$slots:{default:[Od]},$$scope:{ctx:l}}}),c=new Ne({props:{title:"🖥️ Servers",padding:!1,$$slots:{default:[Ud]},$$scope:{ctx:l}}}),f=new Ne({props:{title:"🚦 Traffic Flow",$$slots:{header:[Vd],default:[Yd]},$$scope:{ctx:l}}}),{c(){e=d("div"),oe(t.$$.fragment),n=b(),s=d("div"),oe(i.$$.fragment),o=b(),oe(c.$$.fragment),r=b(),oe(f.$$.fragment),u(s,"class","panels-grid svelte-odhywp"),u(e,"class","architecture-page svelte-odhywp")},m(_,v){w(_,e,v),ne(t,e,null),a(e,n),a(e,s),ne(i,s,null),a(s,o),ne(c,s,null),a(e,r),ne(f,e,null),p=!0},p(_,v){const h={};v[0]&8190|v[1]&16&&(h.$$scope={dirty:v,ctx:_}),t.$set(h);const m={};v[0]&128|v[1]&16&&(m.$$scope={dirty:v,ctx:_}),i.$set(m);const g={};v[0]&2|v[1]&16&&(g.$$scope={dirty:v,ctx:_}),c.$set(g);const y={};v[0]&130|v[1]&16&&(y.$$scope={dirty:v,ctx:_}),f.$set(y)},i(_){p||(P(t.$$.fragment,_),P(i.$$.fragment,_),P(c.$$.fragment,_),P(f.$$.fragment,_),p=!0)},o(_){L(t.$$.fragment,_),L(i.$$.fragment,_),L(c.$$.fragment,_),L(f.$$.fragment,_),p=!1},d(_){_&&$(e),se(t),se(i),se(c),se(f)}}}function Ur(l){return l?l.toLocaleTimeString():""}function An(l){switch(l.type){case"stateful":return"🗄️";case"frontend":return"🌐";case"api":return"⚡";case"worker":return"⚙️";default:return"📦"}}function Fn(l){return l.nginx_status==="running"}function Qd(l,e,t){let n,s,i,o;We(l,aa,j=>t(12,o=j));let c="",r="",f=!1,p=[],_=[],v=[],h=null,m=null,g=!1,y=null;ul(()=>{g||(C(),y=setInterval(C,6e4))}),ls(()=>{y&&clearInterval(y)});async function C(){g||t(6,f=!0),t(9,m=null);try{const j=await Be("POST","/infra/architecture",{project:c||null,environment:r||null});t(7,p=j.nodes||[]),t(1,_=j.servers||[]),v=j.infrastructure||[],t(8,h=new Date),t(10,g=!0)}catch(j){t(9,m=j.message),g||ve.error("Failed to load architecture: "+j.message)}finally{t(6,f=!1)}}async function k(){const j=_.filter(R=>R.nginx_status!=="running").map(R=>R.ip);if(j.length===0){ve.info("All servers already have nginx running");return}ve.info(`Fixing ${j.length} server(s)...`);try{await Be("POST","/infra/nginx/ensure",{server_ips:j}),ve.success("Nginx sidecar installed"),architectureStore.refresh()}catch(R){ve.error(R.message)}}function S(){C()}function M(){C()}function D(){c=Ge(this),t(4,c)}function T(){r=Ge(this),t(5,r)}const E=(j,R)=>{var O;return(O=j.servers)==null?void 0:O.includes(R.ip)};return l.$$.update=()=>{l.$$.dirty[0]&2&&t(3,n=_.filter(j=>j.nginx_status==="running").length),l.$$.dirty[0]&2&&t(2,s=_.length),l.$$.dirty[0]&12&&t(11,i=n===s)},[M,_,s,n,c,r,f,p,h,m,g,i,o,k,S,D,T,E]}class Xd extends Ve{constructor(e){super(),Ye(this,e,Qd,Kd,Je,{refresh:0},null,[-1,-1])}get refresh(){return this.$$.ctx[0]}}function Zd(l){let e,t,n,s,i,o,c,r,f,p,_,v,h,m,g,y,C,k,S,M,D,T,E,j,R,O;n=new uc({}),i=new _c({props:{tabs:l[11],active:l[0],scrollable:!0}}),i.$on("change",l[13]);let z=l[9]&&Ir(l),F={};p=new xc({props:F}),l[16](p),h=new Bf({});let H={};y=new hu({props:H}),l[17](y);let W={};S=new Xd({props:W}),l[18](S);let I={};T=new np({props:I}),l[19](T);const J=[s_,n_,l_,t_],A=[];function G(N,U){return N[0]==="logs"?0:N[0]==="snapshots"?1:N[0]==="services"?2:N[0]==="settings"?3:-1}return~(j=G(l))&&(R=A[j]=J[j](l)),{c(){e=d("div"),t=d("div"),oe(n.$$.fragment),s=b(),oe(i.$$.fragment),o=b(),z&&z.c(),c=b(),r=d("main"),f=d("div"),oe(p.$$.fragment),_=b(),v=d("div"),oe(h.$$.fragment),m=b(),g=d("div"),oe(y.$$.fragment),C=b(),k=d("div"),oe(S.$$.fragment),M=b(),D=d("div"),oe(T.$$.fragment),E=b(),R&&R.c(),u(f,"class","svelte-p7g5el"),$e(f,"hidden",l[0]!=="infra"),u(v,"class","svelte-p7g5el"),$e(v,"hidden",l[0]!=="deploy"),u(g,"class","svelte-p7g5el"),$e(g,"hidden",l[0]!=="deployments"),u(k,"class","svelte-p7g5el"),$e(k,"hidden",l[0]!=="architecture"),u(D,"class","svelte-p7g5el"),$e(D,"hidden",l[0]!=="metrics"),u(r,"class","content glass svelte-p7g5el"),u(t,"class","container svelte-p7g5el"),u(e,"class","app svelte-p7g5el")},m(N,U){w(N,e,U),a(e,t),ne(n,t,null),a(t,s),ne(i,t,null),a(t,o),z&&z.m(t,null),a(t,c),a(t,r),a(r,f),ne(p,f,null),a(r,_),a(r,v),ne(h,v,null),a(r,m),a(r,g),ne(y,g,null),a(r,C),a(r,k),ne(S,k,null),a(r,M),a(r,D),ne(T,D,null),a(r,E),~j&&A[j].m(r,null),O=!0},p(N,U){const Y={};U&1&&(Y.active=N[0]),i.$set(Y),N[9]?z?(z.p(N,U),U&512&&P(z,1)):(z=Ir(N),z.c(),P(z,1),z.m(t,c)):z&&(ke(),L(z,1,1,()=>{z=null}),we());const Z={};p.$set(Z),(!O||U&1)&&$e(f,"hidden",N[0]!=="infra"),(!O||U&1)&&$e(v,"hidden",N[0]!=="deploy");const ie={};y.$set(ie),(!O||U&1)&&$e(g,"hidden",N[0]!=="deployments");const le={};S.$set(le),(!O||U&1)&&$e(k,"hidden",N[0]!=="architecture");const ee={};T.$set(ee),(!O||U&1)&&$e(D,"hidden",N[0]!=="metrics");let ue=j;j=G(N),j===ue?~j&&A[j].p(N,U):(R&&(ke(),L(A[ue],1,1,()=>{A[ue]=null}),we()),~j?(R=A[j],R?R.p(N,U):(R=A[j]=J[j](N),R.c()),P(R,1),R.m(r,null)):R=null)},i(N){O||(P(n.$$.fragment,N),P(i.$$.fragment,N),P(z),P(p.$$.fragment,N),P(h.$$.fragment,N),P(y.$$.fragment,N),P(S.$$.fragment,N),P(T.$$.fragment,N),P(R),O=!0)},o(N){L(n.$$.fragment,N),L(i.$$.fragment,N),L(z),L(p.$$.fragment,N),L(h.$$.fragment,N),L(y.$$.fragment,N),L(S.$$.fragment,N),L(T.$$.fragment,N),L(R),O=!1},d(N){N&&$(e),se(n),se(i),z&&z.d(),l[16](null),se(p),se(h),l[17](null),se(y),l[18](null),se(S),l[19](null),se(T),~j&&A[j].d()}}}function xd(l){let e,t;return e=new ec({props:{title:"Deploy Dashboard",subtitle:"Sign in to manage your infrastructure"}}),e.$on("success",l[12]),{c(){oe(e.$$.fragment)},m(n,s){ne(e,n,s),t=!0},p:ae,i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){se(e,n)}}}function e_(l){let e;return{c(){e=d("div"),e.innerHTML='<div class="spinner svelte-p7g5el"></div>',u(e,"class","loading-screen svelte-p7g5el")},m(t,n){w(t,e,n)},p:ae,i:ae,o:ae,d(t){t&&$(e)}}}function Ir(l){let e,t;return e=new hc({props:{showTail:l[8],showContainer:l[7]}}),e.$on("change",l[14]),e.$on("refresh",l[15]),{c(){oe(e.$$.fragment)},m(n,s){ne(e,n,s),t=!0},p(n,s){const i={};s&256&&(i.showTail=n[8]),s&128&&(i.showContainer=n[7]),e.$set(i)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){se(e,n)}}}function t_(l){let e,t;return e=new wd({}),{c(){oe(e.$$.fragment)},m(n,s){ne(e,n,s),t=!0},p:ae,i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){se(e,n)}}}function l_(l){let e,t;return e=new Wp({}),{c(){oe(e.$$.fragment)},m(n,s){ne(e,n,s),t=!0},p:ae,i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){se(e,n)}}}function n_(l){let e,t;return e=new Np({}),{c(){oe(e.$$.fragment)},m(n,s){ne(e,n,s),t=!0},p:ae,i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){se(e,n)}}}function s_(l){let e,t,n={};return e=new Su({props:n}),l[20](e),{c(){oe(e.$$.fragment)},m(s,i){ne(e,s,i),t=!0},p(s,i){const o={};e.$set(o)},i(s){t||(P(e.$$.fragment,s),t=!0)},o(s){L(e.$$.fragment,s),t=!1},d(s){l[20](null),se(e,s)}}}function o_(l){let e,t,n,s,i,o;e=new nc({});const c=[e_,xd,Zd],r=[];function f(p,_){return p[1]?!p[10].token||!p[10].user?1:2:0}return n=f(l),s=r[n]=c[n](l),{c(){oe(e.$$.fragment),t=b(),s.c(),i=je()},m(p,_){ne(e,p,_),w(p,t,_),r[n].m(p,_),w(p,i,_),o=!0},p(p,[_]){let v=n;n=f(p),n===v?r[n].p(p,_):(ke(),L(r[v],1,1,()=>{r[v]=null}),we(),s=r[n],s?s.p(p,_):(s=r[n]=c[n](p),s.c()),P(s,1),s.m(i.parentNode,i))},i(p){o||(P(e.$$.fragment,p),P(s),o=!0)},o(p){L(e.$$.fragment,p),L(s),o=!1},d(p){p&&($(t),$(i)),se(e,p),r[n].d(p)}}}function i_(l,e,t){let n,s,i,o,c;We(l,ks,R=>t(0,o=R)),We(l,ht,R=>t(10,c=R));let r=!1,f,p,_,v,h;const m=[{id:"infra",label:"Infrastructure"},{id:"deploy",label:"Deploy"},{id:"deployments",label:"Deployments"},{id:"architecture",label:"Architecture"},{id:"logs",label:"Logs"},{id:"metrics",label:"Metrics"},{id:"snapshots",label:"Snapshots"},{id:"services",label:"Services"},{id:"settings",label:"Settings"}];ul(async()=>{const R=await za();t(1,r=!0),R&&g()});function g(){cl.refresh(),ra.refresh(),jn.refresh(),Nl.refresh()}async function y(R){const{user:O,token:z}=R.detail;ht.setToken(z),ht.setUser(O),g()}function C(R){ks.set(R.detail)}function k(){S()}function S(){switch(o){case"infra":f==null||f.refresh(),cl.refresh();break;case"deployments":p==null||p.refresh();break;case"logs":_==null||_.refresh();break;case"metrics":v==null||v.refresh();break;case"architecture":h==null||h.refresh();break}}function M(R){kt[R?"unshift":"push"](()=>{f=R,t(2,f)})}function D(R){kt[R?"unshift":"push"](()=>{p=R,t(3,p)})}function T(R){kt[R?"unshift":"push"](()=>{h=R,t(6,h)})}function E(R){kt[R?"unshift":"push"](()=>{v=R,t(5,v)})}function j(R){kt[R?"unshift":"push"](()=>{_=R,t(4,_)})}return l.$$.update=()=>{l.$$.dirty&1&&t(9,n=Ia.includes(o)),l.$$.dirty&1&&t(8,s=o==="logs"),l.$$.dirty&1&&t(7,i=o==="logs")},[o,r,f,p,_,v,h,i,s,n,c,m,y,C,k,S,M,D,T,E,j]}class r_ extends Ve{constructor(e){super(),Ye(this,e,i_,o_,Je,{})}}new r_({target:document.getElementById("app")});
