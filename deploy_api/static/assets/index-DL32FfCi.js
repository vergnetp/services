var ka=Object.defineProperty;var $a=(l,e,t)=>e in l?ka(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t;var xt=(l,e,t)=>$a(l,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();function ie(){}const Bi=l=>l;function wa(l,e){for(const t in e)l[t]=e[t];return l}function Ii(l){return l()}function Fn(){return Object.create(null)}function Ue(l){l.forEach(Ii)}function $n(l){return typeof l=="function"}function Ye(l,e){return l!=l?e==e:l!==e||l&&typeof l=="object"||typeof l=="function"}function ya(l){return Object.keys(l).length===0}function Pn(l,...e){if(l==null){for(const n of e)n(void 0);return ie}const t=l.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function Wl(l){let e;return Pn(l,t=>e=t)(),e}function Je(l,e,t){l.$$.on_destroy.push(Pn(e,t))}function Jt(l,e,t,n){if(l){const s=Ui(l,e,t,n);return l[0](s)}}function Ui(l,e,t,n){return l[1]&&n?wa(t.ctx.slice(),l[1](n(e))):t.ctx}function Vt(l,e,t,n){if(l[2]&&n){const s=l[2](n(t));if(e.dirty===void 0)return s;if(typeof s=="object"){const r=[],o=Math.max(e.dirty.length,s.length);for(let c=0;c<o;c+=1)r[c]=e.dirty[c]|s[c];return r}return e.dirty|s}return e.dirty}function Yt(l,e,t,n,s,r){if(s){const o=Ui(e,t,n,r);l.p(o,s)}}function Kt(l){if(l.ctx.length>32){const e=[],t=l.ctx.length/32;for(let n=0;n<t;n++)e[n]=-1;return e}return-1}function Hi(l){const e={};for(const t in l)e[t]=!0;return e}function Bn(l){const e=typeof l=="string"&&l.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[l,"px"]}const Gi=typeof window<"u";let Ca=Gi?()=>window.performance.now():()=>Date.now(),En=Gi?l=>requestAnimationFrame(l):ie;const Cl=new Set;function Wi(l){Cl.forEach(e=>{e.c(l)||(Cl.delete(e),e.f())}),Cl.size!==0&&En(Wi)}function Sa(l){let e;return Cl.size===0&&En(Wi),{promise:new Promise(t=>{Cl.add(e={c:l,f:t})}),abort(){Cl.delete(e)}}}const Ji=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function a(l,e){l.appendChild(e)}function Vi(l){if(!l)return document;const e=l.getRootNode?l.getRootNode():l.ownerDocument;return e&&e.host?e:l.ownerDocument}function za(l){const e=_("style");return e.textContent="/* empty */",qa(Vi(l),e),e.sheet}function qa(l,e){return a(l.head||l,e),e.sheet}function w(l,e,t){l.insertBefore(e,t||null)}function $(l){l.parentNode&&l.parentNode.removeChild(l)}function Me(l,e){for(let t=0;t<l.length;t+=1)l[t]&&l[t].d(e)}function _(l){return document.createElement(l)}function Da(l){return document.createElementNS("http://www.w3.org/2000/svg",l)}function S(l){return document.createTextNode(l)}function b(){return S(" ")}function Ne(){return S("")}function se(l,e,t,n){return l.addEventListener(e,t,n),()=>l.removeEventListener(e,t,n)}function Yi(l){return function(e){return e.preventDefault(),l.call(this,e)}}function p(l,e,t){t==null?l.removeAttribute(e):l.getAttribute(e)!==t&&l.setAttribute(e,t)}function Ki(l){let e;return{p(...t){e=t,e.forEach(n=>l.push(n))},r(){e.forEach(t=>l.splice(l.indexOf(t),1))}}}function Ot(l){return l===""?null:+l}function Ta(l){return Array.from(l.childNodes)}function B(l,e){e=""+e,l.data!==e&&(l.data=e)}function ne(l,e){l.value=e??""}function Ie(l,e,t,n){t==null?l.style.removeProperty(e):l.style.setProperty(e,t,"")}function Le(l,e,t){for(let n=0;n<l.options.length;n+=1){const s=l.options[n];if(s.__value===e){s.selected=!0;return}}(!t||e!==void 0)&&(l.selectedIndex=-1)}function mt(l){const e=l.querySelector(":checked");return e&&e.__value}function Ce(l,e,t){l.classList.toggle(e,!!t)}function Qi(l,e,{bubbles:t=!1,cancelable:n=!1}={}){return new CustomEvent(l,{detail:e,bubbles:t,cancelable:n})}class Pa{constructor(e=!1){xt(this,"is_svg",!1);xt(this,"e");xt(this,"n");xt(this,"t");xt(this,"a");this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,n=null){this.e||(this.is_svg?this.e=Da(t.nodeName):this.e=_(t.nodeType===11?"TEMPLATE":t.nodeName),this.t=t.tagName!=="TEMPLATE"?t:t.content,this.c(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)w(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach($)}}const vn=new Map;let mn=0;function Ea(l){let e=5381,t=l.length;for(;t--;)e=(e<<5)-e^l.charCodeAt(t);return e>>>0}function La(l,e){const t={stylesheet:za(e),rules:{}};return vn.set(l,t),t}function In(l,e,t,n,s,r,o,c=0){const i=16.666/n;let u=`{
`;for(let y=0;y<=1;y+=i){const C=e+(t-e)*r(y);u+=y*100+`%{${o(C,1-C)}}
`}const f=u+`100% {${o(t,1-t)}}
}`,d=`__svelte_${Ea(f)}_${c}`,v=Vi(l),{stylesheet:h,rules:m}=vn.get(v)||La(v,l);m[d]||(m[d]=!0,h.insertRule(`@keyframes ${d} ${f}`,h.cssRules.length));const g=l.style.animation||"";return l.style.animation=`${g?`${g}, `:""}${d} ${n}ms linear ${s}ms 1 both`,mn+=1,d}function Ma(l,e){const t=(l.style.animation||"").split(", "),n=t.filter(e?r=>r.indexOf(e)<0:r=>r.indexOf("__svelte")===-1),s=t.length-n.length;s&&(l.style.animation=n.join(", "),mn-=s,mn||ja())}function ja(){En(()=>{mn||(vn.forEach(l=>{const{ownerNode:e}=l.stylesheet;e&&$(e)}),vn.clear())})}let Gl;function Hl(l){Gl=l}function Ln(){if(!Gl)throw new Error("Function called outside component initialization");return Gl}function ll(l){Ln().$$.on_mount.push(l)}function Mn(l){Ln().$$.on_destroy.push(l)}function Jl(){const l=Ln();return(e,t,{cancelable:n=!1}={})=>{const s=l.$$.callbacks[e];if(s){const r=Qi(e,t,{cancelable:n});return s.slice().forEach(o=>{o.call(l,r)}),!r.defaultPrevented}return!0}}function Un(l,e){const t=l.$$.callbacks[e.type];t&&t.slice().forEach(n=>n.call(this,e))}const wl=[],gt=[];let Sl=[];const zn=[],Na=Promise.resolve();let qn=!1;function Ra(){qn||(qn=!0,Na.then(Zi))}function Ve(l){Sl.push(l)}function ol(l){zn.push(l)}const yn=new Set;let kl=0;function Zi(){if(kl!==0)return;const l=Gl;do{try{for(;kl<wl.length;){const e=wl[kl];kl++,Hl(e),Aa(e.$$)}}catch(e){throw wl.length=0,kl=0,e}for(Hl(null),wl.length=0,kl=0;gt.length;)gt.pop()();for(let e=0;e<Sl.length;e+=1){const t=Sl[e];yn.has(t)||(yn.add(t),t())}Sl.length=0}while(wl.length);for(;zn.length;)zn.pop()();qn=!1,yn.clear(),Hl(l)}function Aa(l){if(l.fragment!==null){l.update(),Ue(l.before_update);const e=l.dirty;l.dirty=[-1],l.fragment&&l.fragment.p(l.ctx,e),l.after_update.forEach(Ve)}}function Oa(l){const e=[],t=[];Sl.forEach(n=>l.indexOf(n)===-1?e.push(n):t.push(n)),t.forEach(n=>n()),Sl=e}let Ul;function Fa(){return Ul||(Ul=Promise.resolve(),Ul.then(()=>{Ul=null})),Ul}function Cn(l,e,t){l.dispatchEvent(Qi(`${e?"intro":"outro"}${t}`))}const dn=new Set;let Gt;function we(){Gt={r:0,c:[],p:Gt}}function ye(){Gt.r||Ue(Gt.c),Gt=Gt.p}function P(l,e){l&&l.i&&(dn.delete(l),l.i(e))}function L(l,e,t,n){if(l&&l.o){if(dn.has(l))return;dn.add(l),Gt.c.push(()=>{dn.delete(l),n&&(t&&l.d(1),n())}),l.o(e)}else n&&n()}const Ba={duration:0};function yl(l,e,t,n){let r=e(l,t,{direction:"both"}),o=n?0:1,c=null,i=null,u=null,f;function d(){u&&Ma(l,u)}function v(m,g){const y=m.b-o;return g*=Math.abs(y),{a:o,b:m.b,d:y,duration:g,start:m.start,end:m.start+g,group:m.group}}function h(m){const{delay:g=0,duration:y=300,easing:C=Bi,tick:k=ie,css:z}=r||Ba,D={start:Ca()+g,b:m};m||(D.group=Gt,Gt.r+=1),"inert"in l&&(m?f!==void 0&&(l.inert=f):(f=l.inert,l.inert=!0)),c||i?i=D:(z&&(d(),u=In(l,o,m,y,g,C,z)),m&&k(0,1),c=v(D,y),Ve(()=>Cn(l,m,"start")),Sa(T=>{if(i&&T>i.start&&(c=v(i,y),i=null,Cn(l,c.b,"start"),z&&(d(),u=In(l,o,c.b,c.duration,0,C,r.css))),c){if(T>=c.end)k(o=c.b,1-o),Cn(l,c.b,"end"),i||(c.b?d():--c.group.r||Ue(c.group.c)),c=null;else if(T>=c.start){const E=T-c.start;o=c.a+c.d*C(E/c.duration),k(o,1-o)}}return!!(c||i)}))}return{run(m){$n(r)?Fa().then(()=>{r=r({direction:m?"in":"out"}),h(m)}):h(m)},end(){d(),c=i=null}}}function de(l){return(l==null?void 0:l.length)!==void 0?l:Array.from(l)}function Xi(l,e){L(l,1,1,()=>{e.delete(l.key)})}function xi(l,e,t,n,s,r,o,c,i,u,f,d){let v=l.length,h=r.length,m=v;const g={};for(;m--;)g[l[m].key]=m;const y=[],C=new Map,k=new Map,z=[];for(m=h;m--;){const q=d(s,r,m),j=t(q);let R=o.get(j);R?z.push(()=>R.p(q,e)):(R=u(j,q),R.c()),C.set(j,y[m]=R),j in g&&k.set(j,Math.abs(m-g[j]))}const D=new Set,T=new Set;function E(q){P(q,1),q.m(c,f),o.set(q.key,q),f=q.first,h--}for(;v&&h;){const q=y[h-1],j=l[v-1],R=q.key,O=j.key;q===j?(f=q.first,v--,h--):C.has(O)?!o.has(R)||D.has(R)?E(q):T.has(O)?v--:k.get(R)>k.get(O)?(T.add(R),E(q)):(D.add(O),v--):(i(j,o),v--)}for(;v--;){const q=l[v];C.has(q.key)||i(q,o)}for(;h;)E(y[h-1]);return Ue(z),y}function rl(l,e,t){const n=l.$$.props[e];n!==void 0&&(l.$$.bound[n]=t,t(l.$$.ctx[n]))}function x(l){l&&l.c()}function Z(l,e,t){const{fragment:n,after_update:s}=l.$$;n&&n.m(e,t),Ve(()=>{const r=l.$$.on_mount.map(Ii).filter($n);l.$$.on_destroy?l.$$.on_destroy.push(...r):Ue(r),l.$$.on_mount=[]}),s.forEach(Ve)}function X(l,e){const t=l.$$;t.fragment!==null&&(Oa(t.after_update),Ue(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function Ia(l,e){l.$$.dirty[0]===-1&&(wl.push(l),Ra(),l.$$.dirty.fill(0)),l.$$.dirty[e/31|0]|=1<<e%31}function et(l,e,t,n,s,r,o=null,c=[-1]){const i=Gl;Hl(l);const u=l.$$={fragment:null,ctx:[],props:r,update:ie,not_equal:s,bound:Fn(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(i?i.$$.context:[])),callbacks:Fn(),dirty:c,skip_bound:!1,root:e.target||i.$$.root};o&&o(u.root);let f=!1;if(u.ctx=t?t(l,e.props||{},(d,v,...h)=>{const m=h.length?h[0]:v;return u.ctx&&s(u.ctx[d],u.ctx[d]=m)&&(!u.skip_bound&&u.bound[d]&&u.bound[d](m),f&&Ia(l,d)),v}):[],u.update(),f=!0,Ue(u.before_update),u.fragment=n?n(u.ctx):!1,e.target){if(e.hydrate){const d=Ta(e.target);u.fragment&&u.fragment.l(d),d.forEach($)}else u.fragment&&u.fragment.c();e.intro&&P(l.$$.fragment),Z(l,e.target,e.anchor),Zi()}Hl(i)}class tt{constructor(){xt(this,"$$");xt(this,"$$set")}$destroy(){X(this,1),this.$destroy=ie}$on(e,t){if(!$n(t))return ie;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const s=n.indexOf(t);s!==-1&&n.splice(s,1)}}$set(e){this.$$set&&!ya(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Ua="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Ua);const $l=[];function Ha(l,e){return{subscribe:nl(l,e).subscribe}}function nl(l,e=ie){let t;const n=new Set;function s(c){if(Ye(l,c)&&(l=c,t)){const i=!$l.length;for(const u of n)u[1](),$l.push(u,l);if(i){for(let u=0;u<$l.length;u+=2)$l[u][0]($l[u+1]);$l.length=0}}}function r(c){s(c(l))}function o(c,i=ie){const u=[c,i];return n.add(u),n.size===1&&(t=e(s,r)||ie),c(l),()=>{n.delete(u),n.size===0&&t&&(t(),t=null)}}return{set:s,update:r,subscribe:o}}function Tl(l,e,t){const n=!Array.isArray(l),s=n?[l]:l;if(!s.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const r=e.length<2;return Ha(t,(o,c)=>{let i=!1;const u=[];let f=0,d=ie;const v=()=>{if(f)return;d();const m=e(n?u[0]:u,o,c);r?o(m):d=$n(m)?m:ie},h=s.map((m,g)=>Pn(m,y=>{u[g]=y,f&=~(1<<g),i&&v()},()=>{f|=1<<g}));return i=!0,v(),function(){Ue(h),d(),i=!1}})}function jn(l,e,t=7){const n=new Date(Date.now()+t*864e5).toUTCString();document.cookie=`${l}=${encodeURIComponent(e)}; expires=${n}; path=/; SameSite=Strict`}function Nn(l){const e=document.cookie.match(new RegExp("(^| )"+l+"=([^;]+)"));return e?decodeURIComponent(e[2]):null}function Hn(l){document.cookie=`${l}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; SameSite=Strict`}function Ga(){const l=Nn("jwt_token"),{subscribe:e,set:t,update:n}=nl({token:l,user:null,loading:!1,error:null});return{subscribe:e,setToken(s){jn("jwt_token",s,7),n(r=>({...r,token:s,error:null}))},setUser(s){n(r=>({...r,user:s}))},setError(s){n(r=>({...r,error:s,loading:!1}))},setLoading(s){n(r=>({...r,loading:s}))},logout(){Hn("jwt_token"),Hn("do_token_local"),t({token:null,user:null,loading:!1,error:null})},clearError(){n(s=>({...s,error:null}))}}}const zt=Ga();Tl(zt,l=>!!l.token&&!!l.user);function tl(){return Nn("do_token_local")}function Wa(l){jn("do_token_local",l,30)}function Dn(){return Nn("cf_token_local")}function Ja(l){jn("cf_token_local",l,30)}function Va(){const{subscribe:l,update:e}=nl([]);let t=0;function n(r,o="info",c=3e3){const i={id:++t,message:r,type:o};return e(u=>[...u,i]),c>0&&setTimeout(()=>s(i.id),c),i.id}function s(r){e(o=>o.filter(c=>c.id!==r))}return{subscribe:l,success:(r,o)=>n(r,"success",o),error:(r,o)=>n(r,"error",o),warning:(r,o)=>n(r,"warning",o),info:(r,o)=>n(r,"info",o),remove:s}}const ge=Va(),ea="/api/v1",ta=["/infra/servers","/infra/snapshots","/infra/setup","/infra/deploy","/infra/registry","/infra/agent","/infra/architecture","/infra/fleet","/infra/projects","/infra/containers","/infra/services","/infra/deployments"];function la(l,e={}){const t=Wl(zt),n={"Content-Type":"application/json"},s=l.startsWith("/auth/login")||l.startsWith("/auth/register");t.token&&t.token.trim()!==""&&!s&&!e.skipAuth&&(n.Authorization=`Bearer ${t.token}`);let r=ea+l;if(!e.skipDoToken&&(l.startsWith("/infra/")||ta.some(c=>l.startsWith(c)))){const c=tl();if(!c)return{error:"DO token not set",url:null,headers:null};const i=r.includes("?")?"&":"?";r+=`${i}do_token=${encodeURIComponent(c)}`}return{url:r,headers:n,error:null}}async function Rn(l){if(l.status===401){let e="Authentication failed";try{const n=await l.json();e=n.detail||n.error||n.message||e}catch{}throw Wl(zt).token&&(zt.logout(),e="Session expired - please login again"),new Error(e)}if(!l.ok){const e=await l.json().catch(()=>({detail:"Request failed"}));throw new Error(e.detail||e.error||e.message||"Request failed")}}async function Fe(l,e,t=null,n={}){const{url:s,headers:r,error:o}=la(e,n);if(o)return console.debug(`Skipping ${e} - ${o}`),null;const c={method:l,headers:r};t&&(c.body=JSON.stringify(t));const i=await fetch(s,c);if(await Rn(i),i.status===204)return null;const u=await i.json();return u&&u.success===!0&&u.data!==void 0?u.data:u}async function na(l,e,t=null,n,s={}){const{url:r,headers:o,error:c}=la(e,s);if(c)throw new Error(c);const i={method:l,headers:o};t&&(i.body=JSON.stringify(t));const u=await fetch(r,i);await Rn(u);const f=u.body.getReader(),d=new TextDecoder;let v="";for(;;){const{done:h,value:m}=await f.read();if(h)break;v+=d.decode(m,{stream:!0});const g=v.split(`
`);v=g.pop()||"";for(const y of g)if(y.startsWith("data: "))try{const C=JSON.parse(y.slice(6));n(C)}catch{}}}async function Ya(l,e,t,n={}){const s=Wl(zt);let r=ea+l;if(!n.skipDoToken&&ta.some(v=>l.startsWith(v))){const v=tl();if(!v)throw new Error("DO token not set");const h=r.includes("?")?"&":"?";r+=`${h}do_token=${encodeURIComponent(v)}`}const c={};s.token&&(c.Authorization=`Bearer ${s.token}`);const i=await fetch(r,{method:"POST",headers:c,body:e});await Rn(i);const u=i.body.getReader(),f=new TextDecoder;let d="";for(;;){const{done:v,value:h}=await u.read();if(v)break;d+=f.decode(h,{stream:!0});const m=d.split(`
`);d=m.pop()||"";for(const g of m)if(g.startsWith("data: "))try{const y=JSON.parse(g.slice(6));t(y)}catch{}}}async function Ka(){const l=Wl(zt);if(!l.token||l.token.trim()==="")return!1;try{const e=await Fe("GET","/auth/me");return zt.setUser(e),!0}catch{return zt.logout(),!1}}function Qa(l,e,t={}){const{refreshInterval:n=0,revalidateOnFocus:s=!0,revalidateOnMount:r=!0,dedupingInterval:o=2e3,initialData:c=null}=t,i=nl({data:c,error:null,loading:!1,lastFetched:null});let u=0,f=null,d=null,v=0;async function h(z=!1){const D=Date.now();return!z&&f&&D-u<o||(u=D,i.update(T=>{var E;return{...T,loading:T.data===null||((E=T.data)==null?void 0:E.length)===0}}),f=(async()=>{try{const T=await e();return i.set({data:T,error:null,loading:!1,lastFetched:new Date}),T}catch(T){throw i.update(E=>({...E,error:T.message||"Fetch failed",loading:!1})),T}finally{f=null}})()),f}function m(){document.visibilityState==="visible"&&s&&h()}function g(){n>0&&!d&&(d=setInterval(()=>h(),n))}function y(){d&&(clearInterval(d),d=null)}const{subscribe:C}=i;function k(z){v++,v===1&&(s&&typeof document<"u"&&document.addEventListener("visibilitychange",m),r&&h(),g());const D=C(z);return()=>{D(),v--,v===0&&(typeof document<"u"&&document.removeEventListener("visibilitychange",m),y())}}return{subscribe:k,refresh:()=>h(!0),mutate:z=>i.update(D=>({...D,data:z})),get:()=>Wl(i)}}function wn(l,e={}){const{transform:t=s=>s,...n}=e;return Qa(l,async()=>{const s=await Fe("GET",l);return t(s)},n)}function Za(l,e={}){const{transform:t=i=>i,...n}=e,s=nl({data:null,error:null,loading:!1,lastFetched:null});let r=null,o=null;async function c(i){const u=l(i);if(!u){s.set({data:null,error:null,loading:!1,lastFetched:null});return}return o&&JSON.stringify(i)===JSON.stringify(r)||(r=i,s.update(f=>({...f,loading:!0})),o=(async()=>{try{const f=await Fe("GET",u),d=t(f);return s.set({data:d,error:null,loading:!1,lastFetched:new Date}),d}catch(f){throw s.update(d=>({...d,error:f.message||"Fetch failed",loading:!1})),f}finally{o=null}})()),o}return{subscribe:s.subscribe,fetch:c,refresh:()=>r&&c(r),clear:()=>{r=null,s.set({data:null,error:null,loading:!1,lastFetched:null})}}}const Gn=nl("infra"),el=nl({project:"",env:"",server:"",container:"",range:"30d",tail:!1}),Xa=["infra","metrics","logs","deployments"],At=wn("/infra/servers",{transform:l=>(l==null?void 0:l.servers)||l||[],refreshInterval:6e4,revalidateOnFocus:!0,initialData:[]}),An=wn("/infra/projects",{transform:l=>(l==null?void 0:l.projects)||[],refreshInterval:12e4,initialData:[]}),zl=wn("/infra/snapshots",{transform:l=>(l==null?void 0:l.snapshots)||[],refreshInterval:6e4,initialData:[]}),il=wn("/infra/deployments/history",{transform:l=>(l==null?void 0:l.deployments)||[],refreshInterval:3e4,initialData:[]}),Tn=Za(l=>l!=null&&l.server?`/infra/agent/${l.server}/containers`:null,{transform:l=>{const e=(l==null?void 0:l.containers)||l||[];return(Array.isArray(e)?e:[]).map(t=>({id:t.ID||t.Id||t.id,name:t.Names||t.Name||t.name||"unknown",image:t.Image||t.image,status:t.Status||t.State||t.status,state:t.State||t.state}))}}),ql=Tl(At,l=>(l==null?void 0:l.data)||[]),sa=Tl(An,l=>(l==null?void 0:l.data)||[]),oa=Tl(zl,l=>(l==null?void 0:l.data)||[]),xa=Tl(il,l=>(l==null?void 0:l.data)||[]),ec=Tl(Tn,l=>(l==null?void 0:l.data)||[]),tc="1.9.5";function lc(){const l=typeof localStorage<"u"&&localStorage.getItem("theme")||"dark",{subscribe:e,set:t}=nl(l);return typeof document<"u"&&document.documentElement.setAttribute("data-theme",l),{subscribe:e,set(n){typeof localStorage<"u"&&localStorage.setItem("theme",n),typeof document<"u"&&document.documentElement.setAttribute("data-theme",n),t(n)}}}const Sn=lc();function Wn(l){let e;return{c(){e=_("span"),p(e,"class","brand-dot svelte-16ksbsk")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Jn(l){let e,t,n,s,r,o;return{c(){e=_("div"),t=_("button"),t.textContent="Sign In",n=b(),s=_("button"),s.textContent="Sign Up",p(t,"class","tab svelte-16ksbsk"),Ce(t,"active",l[4]==="login"),p(s,"class","tab svelte-16ksbsk"),Ce(s,"active",l[4]==="signup"),p(e,"class","tabs svelte-16ksbsk")},m(c,i){w(c,e,i),a(e,t),a(e,n),a(e,s),r||(o=[se(t,"click",l[16]),se(s,"click",l[17])],r=!0)},p(c,i){i&16&&Ce(t,"active",c[4]==="login"),i&16&&Ce(s,"active",c[4]==="signup")},d(c){c&&$(e),r=!1,Ue(o)}}}function nc(l){let e,t,n,s,r,o,c,i,u,f,d,v,h,m,g,y,C,k,z;function D(q,j){return q[5]?rc:oc}let T=D(l),E=T(l);return{c(){e=_("form"),t=_("div"),n=_("label"),n.textContent="Email",s=b(),r=_("input"),o=b(),c=_("div"),i=_("label"),i.textContent="Password",u=b(),f=_("input"),d=b(),v=_("div"),h=_("label"),h.textContent="Confirm Password",m=b(),g=_("input"),y=b(),C=_("button"),E.c(),p(n,"for","signup-email"),p(n,"class","svelte-16ksbsk"),p(r,"type","email"),p(r,"id","signup-email"),p(r,"placeholder","you@example.com"),r.required=!0,r.disabled=l[5],p(r,"class","svelte-16ksbsk"),p(t,"class","form-group svelte-16ksbsk"),p(i,"for","signup-password"),p(i,"class","svelte-16ksbsk"),p(f,"type","password"),p(f,"id","signup-password"),p(f,"placeholder","••••••••"),f.required=!0,f.disabled=l[5],p(f,"class","svelte-16ksbsk"),p(c,"class","form-group svelte-16ksbsk"),p(h,"for","signup-confirm"),p(h,"class","svelte-16ksbsk"),p(g,"type","password"),p(g,"id","signup-confirm"),p(g,"placeholder","••••••••"),g.required=!0,g.disabled=l[5],p(g,"class","svelte-16ksbsk"),p(v,"class","form-group svelte-16ksbsk"),p(C,"type","submit"),p(C,"class","btn btn-primary btn-full svelte-16ksbsk"),C.disabled=l[5]},m(q,j){w(q,e,j),a(e,t),a(t,n),a(t,s),a(t,r),ne(r,l[9]),a(e,o),a(e,c),a(c,i),a(c,u),a(c,f),ne(f,l[10]),a(e,d),a(e,v),a(v,h),a(v,m),a(v,g),ne(g,l[11]),a(e,y),a(e,C),E.m(C,null),k||(z=[se(r,"input",l[20]),se(f,"input",l[21]),se(g,"input",l[22]),se(e,"submit",l[14])],k=!0)},p(q,j){j&32&&(r.disabled=q[5]),j&512&&r.value!==q[9]&&ne(r,q[9]),j&32&&(f.disabled=q[5]),j&1024&&f.value!==q[10]&&ne(f,q[10]),j&32&&(g.disabled=q[5]),j&2048&&g.value!==q[11]&&ne(g,q[11]),T!==(T=D(q))&&(E.d(1),E=T(q),E&&(E.c(),E.m(C,null))),j&32&&(C.disabled=q[5])},d(q){q&&$(e),E.d(),k=!1,Ue(z)}}}function sc(l){let e,t,n,s,r,o,c,i,u,f,d,v,h,m;function g(k,z){return k[5]?ac:ic}let y=g(l),C=y(l);return{c(){e=_("form"),t=_("div"),n=_("label"),n.textContent="Email",s=b(),r=_("input"),o=b(),c=_("div"),i=_("label"),i.textContent="Password",u=b(),f=_("input"),d=b(),v=_("button"),C.c(),p(n,"for","login-email"),p(n,"class","svelte-16ksbsk"),p(r,"type","email"),p(r,"id","login-email"),p(r,"placeholder","you@example.com"),r.required=!0,r.disabled=l[5],p(r,"class","svelte-16ksbsk"),p(t,"class","form-group svelte-16ksbsk"),p(i,"for","login-password"),p(i,"class","svelte-16ksbsk"),p(f,"type","password"),p(f,"id","login-password"),p(f,"placeholder","••••••••"),f.required=!0,f.disabled=l[5],p(f,"class","svelte-16ksbsk"),p(c,"class","form-group svelte-16ksbsk"),p(v,"type","submit"),p(v,"class","btn btn-primary btn-full svelte-16ksbsk"),v.disabled=l[5]},m(k,z){w(k,e,z),a(e,t),a(t,n),a(t,s),a(t,r),ne(r,l[7]),a(e,o),a(e,c),a(c,i),a(c,u),a(c,f),ne(f,l[8]),a(e,d),a(e,v),C.m(v,null),h||(m=[se(r,"input",l[18]),se(f,"input",l[19]),se(e,"submit",l[13])],h=!0)},p(k,z){z&32&&(r.disabled=k[5]),z&128&&r.value!==k[7]&&ne(r,k[7]),z&32&&(f.disabled=k[5]),z&256&&f.value!==k[8]&&ne(f,k[8]),y!==(y=g(k))&&(C.d(1),C=y(k),C&&(C.c(),C.m(v,null))),z&32&&(v.disabled=k[5])},d(k){k&&$(e),C.d(),h=!1,Ue(m)}}}function oc(l){let e;return{c(){e=S("Create Account")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function rc(l){let e;return{c(){e=_("span"),p(e,"class","spinner svelte-16ksbsk")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function ic(l){let e;return{c(){e=S("Sign In")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function ac(l){let e;return{c(){e=_("span"),p(e,"class","spinner svelte-16ksbsk")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Vn(l){let e,t;return{c(){e=_("p"),t=S(l[6]),p(e,"class","error-message svelte-16ksbsk")},m(n,s){w(n,e,s),a(e,t)},p(n,s){s&64&&B(t,n[6])},d(n){n&&$(e)}}}function cc(l){let e,t,n,s,r,o,c,i,u,f,d,v,h=l[2]&&Wn(),m=l[3]&&Jn(l);function g(z,D){return z[4]==="login"?sc:nc}let y=g(l),C=y(l),k=l[6]&&Vn(l);return{c(){e=_("div"),t=_("div"),n=_("div"),s=_("h1"),h&&h.c(),r=b(),o=S(l[0]),c=b(),i=_("p"),u=S(l[1]),f=b(),m&&m.c(),d=b(),C.c(),v=b(),k&&k.c(),p(s,"class","svelte-16ksbsk"),p(i,"class","svelte-16ksbsk"),p(n,"class","auth-title svelte-16ksbsk"),p(t,"class","auth-card glass svelte-16ksbsk"),p(e,"class","auth-container svelte-16ksbsk")},m(z,D){w(z,e,D),a(e,t),a(t,n),a(n,s),h&&h.m(s,null),a(s,r),a(s,o),a(n,c),a(n,i),a(i,u),a(t,f),m&&m.m(t,null),a(t,d),C.m(t,null),a(t,v),k&&k.m(t,null)},p(z,[D]){z[2]?h||(h=Wn(),h.c(),h.m(s,r)):h&&(h.d(1),h=null),D&1&&B(o,z[0]),D&2&&B(u,z[1]),z[3]?m?m.p(z,D):(m=Jn(z),m.c(),m.m(t,d)):m&&(m.d(1),m=null),y===(y=g(z))&&C?C.p(z,D):(C.d(1),C=y(z),C&&(C.c(),C.m(t,v))),z[6]?k?k.p(z,D):(k=Vn(z),k.c(),k.m(t,null)):k&&(k.d(1),k=null)},i:ie,o:ie,d(z){z&&$(e),h&&h.d(),m&&m.d(),C.d(),k&&k.d()}}}function fc(l,e,t){let{title:n="Welcome"}=e,{subtitle:s="Sign in to your account"}=e,{apiBase:r="/api/v1"}=e,{showLogo:o=!0}=e,{allowSignup:c=!0}=e;const i=Jl();let u="login",f=!1,d=null,v="",h="",m="",g="",y="";function C(I){t(4,u=I),t(6,d=null)}async function k(I,V,J){return await Fe(I,V,J,{skipDoToken:!0})}async function z(I){I.preventDefault(),t(5,f=!0),t(6,d=null);try{const V=await k("POST","/auth/login",{username:v,password:h}),J=(V==null?void 0:V.access_token)||(V==null?void 0:V.token);if(!J)throw new Error("Login failed - no token returned");let U=V==null?void 0:V.user;if(!U){const A=await fetch("/api/v1/auth/me",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${J}`}});if(!A.ok)throw new Error("Failed to get user info");U=await A.json()}if(!U)throw new Error("Login failed - no user info");i("success",{user:U,token:J})}catch(V){t(6,d=V.message),i("error",{error:V.message,type:"login"})}finally{t(5,f=!1)}}async function D(I){if(I.preventDefault(),g!==y){t(6,d="Passwords do not match");return}t(5,f=!0),t(6,d=null);try{await k("POST","/auth/register",{username:m,email:m,password:g});const V=await k("POST","/auth/login",{username:m,password:g}),J=(V==null?void 0:V.access_token)||(V==null?void 0:V.token);if(!J)throw new Error("Signup failed - no token returned");let U=V==null?void 0:V.user;if(!U){const A=await fetch("/api/v1/auth/me",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${J}`}});if(!A.ok)throw new Error("Failed to get user info");U=await A.json()}if(!U)throw new Error("Signup failed - no user info");i("success",{user:U,token:J})}catch(V){t(6,d=V.message),i("error",{error:V.message,type:"signup"})}finally{t(5,f=!1)}}const T=()=>C("login"),E=()=>C("signup");function q(){v=this.value,t(7,v)}function j(){h=this.value,t(8,h)}function R(){m=this.value,t(9,m)}function O(){g=this.value,t(10,g)}function F(){y=this.value,t(11,y)}return l.$$set=I=>{"title"in I&&t(0,n=I.title),"subtitle"in I&&t(1,s=I.subtitle),"apiBase"in I&&t(15,r=I.apiBase),"showLogo"in I&&t(2,o=I.showLogo),"allowSignup"in I&&t(3,c=I.allowSignup)},[n,s,o,c,u,f,d,v,h,m,g,y,C,z,D,r,T,E,q,j,R,O,F]}class uc extends tt{constructor(e){super(),et(this,e,fc,cc,Ye,{title:0,subtitle:1,apiBase:15,showLogo:2,allowSignup:3})}}function ra(l){const e=l-1;return e*e*e+1}function Yn(l,{delay:e=0,duration:t=400,easing:n=Bi}={}){const s=+getComputedStyle(l).opacity;return{delay:e,duration:t,easing:n,css:r=>`opacity: ${r*s}`}}function Kn(l,{delay:e=0,duration:t=400,easing:n=ra,x:s=0,y:r=0,opacity:o=0}={}){const c=getComputedStyle(l),i=+c.opacity,u=c.transform==="none"?"":c.transform,f=i*(1-o),[d,v]=Bn(s),[h,m]=Bn(r);return{delay:e,duration:t,easing:n,css:(g,y)=>`
			transform: ${u} translate(${(1-g)*d}${v}, ${(1-g)*h}${m});
			opacity: ${i-f*y}`}}function Qn(l,{delay:e=0,duration:t=400,easing:n=ra,start:s=0,opacity:r=0}={}){const o=getComputedStyle(l),c=+o.opacity,i=o.transform==="none"?"":o.transform,u=1-s,f=c*(1-r);return{delay:e,duration:t,easing:n,css:(d,v)=>`
			transform: ${i} scale(${1-u*v});
			opacity: ${c-f*v}
		`}}function Zn(l,e,t){const n=l.slice();return n[2]=e[t],n}function Xn(l,e){let t,n,s=e[2].message+"",r,o,c,i,u,f,d,v,h;function m(){return e[1](e[2])}return{key:l,first:null,c(){t=_("div"),n=_("span"),r=S(s),o=b(),c=_("button"),c.textContent="×",i=b(),p(n,"class","toast-message svelte-1l5lsfn"),p(c,"class","toast-close svelte-1l5lsfn"),p(t,"class",u="toast toast-"+e[2].type+" svelte-1l5lsfn"),this.first=t},m(g,y){w(g,t,y),a(t,n),a(n,r),a(t,o),a(t,c),a(t,i),d=!0,v||(h=se(c,"click",m),v=!0)},p(g,y){e=g,(!d||y&1)&&s!==(s=e[2].message+"")&&B(r,s),(!d||y&1&&u!==(u="toast toast-"+e[2].type+" svelte-1l5lsfn"))&&p(t,"class",u)},i(g){d||(g&&Ve(()=>{d&&(f||(f=yl(t,Kn,{x:100,duration:200},!0)),f.run(1))}),d=!0)},o(g){g&&(f||(f=yl(t,Kn,{x:100,duration:200},!1)),f.run(0)),d=!1},d(g){g&&$(t),g&&f&&f.end(),v=!1,h()}}}function pc(l){let e,t=[],n=new Map,s,r=de(l[0]);const o=c=>c[2].id;for(let c=0;c<r.length;c+=1){let i=Zn(l,r,c),u=o(i);n.set(u,t[c]=Xn(u,i))}return{c(){e=_("div");for(let c=0;c<t.length;c+=1)t[c].c();p(e,"class","toast-container svelte-1l5lsfn")},m(c,i){w(c,e,i);for(let u=0;u<t.length;u+=1)t[u]&&t[u].m(e,null);s=!0},p(c,[i]){i&1&&(r=de(c[0]),we(),t=xi(t,i,o,1,c,r,n,e,Xi,Xn,null,Zn),ye())},i(c){if(!s){for(let i=0;i<r.length;i+=1)P(t[i]);s=!0}},o(c){for(let i=0;i<t.length;i+=1)L(t[i]);s=!1},d(c){c&&$(e);for(let i=0;i<t.length;i+=1)t[i].d()}}}function _c(l,e,t){let n;return Je(l,ge,r=>t(0,n=r)),[n,r=>ge.remove(r.id)]}class dc extends tt{constructor(e){super(),et(this,e,_c,pc,Ye,{})}}function vc(l){let e,t,n,s,r,o,c=l[3]&&xn();const i=l[9].default,u=Jt(i,l,l[8],null);return{c(){e=_("button"),c&&c.c(),t=b(),u&&u.c(),p(e,"type",l[4]),p(e,"title",l[6]),p(e,"aria-label",l[7]),p(e,"class",n="btn btn-"+l[0]+" btn-"+l[1]+" svelte-1vvc8tv"),e.disabled=l[2]},m(f,d){w(f,e,d),c&&c.m(e,null),a(e,t),u&&u.m(e,null),s=!0,r||(o=se(e,"click",l[11]),r=!0)},p(f,d){f[3]?c||(c=xn(),c.c(),c.m(e,t)):c&&(c.d(1),c=null),u&&u.p&&(!s||d&256)&&Yt(u,i,f,f[8],s?Vt(i,f[8],d,null):Kt(f[8]),null),(!s||d&16)&&p(e,"type",f[4]),(!s||d&64)&&p(e,"title",f[6]),(!s||d&128)&&p(e,"aria-label",f[7]),(!s||d&3&&n!==(n="btn btn-"+f[0]+" btn-"+f[1]+" svelte-1vvc8tv"))&&p(e,"class",n),(!s||d&4)&&(e.disabled=f[2])},i(f){s||(P(u,f),s=!0)},o(f){L(u,f),s=!1},d(f){f&&$(e),c&&c.d(),u&&u.d(f),r=!1,o()}}}function mc(l){let e,t,n,s,r,o,c=l[3]&&es();const i=l[9].default,u=Jt(i,l,l[8],null);return{c(){e=_("a"),c&&c.c(),t=b(),u&&u.c(),p(e,"href",l[5]),p(e,"title",l[6]),p(e,"aria-label",l[7]),p(e,"class",n="btn btn-"+l[0]+" btn-"+l[1]+" svelte-1vvc8tv"),Ce(e,"disabled",l[2])},m(f,d){w(f,e,d),c&&c.m(e,null),a(e,t),u&&u.m(e,null),s=!0,r||(o=se(e,"click",l[10]),r=!0)},p(f,d){f[3]?c||(c=es(),c.c(),c.m(e,t)):c&&(c.d(1),c=null),u&&u.p&&(!s||d&256)&&Yt(u,i,f,f[8],s?Vt(i,f[8],d,null):Kt(f[8]),null),(!s||d&32)&&p(e,"href",f[5]),(!s||d&64)&&p(e,"title",f[6]),(!s||d&128)&&p(e,"aria-label",f[7]),(!s||d&3&&n!==(n="btn btn-"+f[0]+" btn-"+f[1]+" svelte-1vvc8tv"))&&p(e,"class",n),(!s||d&7)&&Ce(e,"disabled",f[2])},i(f){s||(P(u,f),s=!0)},o(f){L(u,f),s=!1},d(f){f&&$(e),c&&c.d(),u&&u.d(f),r=!1,o()}}}function xn(l){let e;return{c(){e=_("span"),p(e,"class","spinner svelte-1vvc8tv")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function es(l){let e;return{c(){e=_("span"),p(e,"class","spinner svelte-1vvc8tv")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function hc(l){let e,t,n,s;const r=[mc,vc],o=[];function c(i,u){return i[5]?0:1}return e=c(l),t=o[e]=r[e](l),{c(){t.c(),n=Ne()},m(i,u){o[e].m(i,u),w(i,n,u),s=!0},p(i,[u]){let f=e;e=c(i),e===f?o[e].p(i,u):(we(),L(o[f],1,1,()=>{o[f]=null}),ye(),t=o[e],t?t.p(i,u):(t=o[e]=r[e](i),t.c()),P(t,1),t.m(n.parentNode,n))},i(i){s||(P(t),s=!0)},o(i){L(t),s=!1},d(i){i&&$(n),o[e].d(i)}}}function gc(l,e,t){let{$$slots:n={},$$scope:s}=e,{variant:r="default"}=e,{size:o="md"}=e,{disabled:c=!1}=e,{loading:i=!1}=e,{type:u="button"}=e,{href:f=null}=e,{title:d=void 0}=e,{ariaLabel:v=void 0}=e;function h(g){Un.call(this,l,g)}function m(g){Un.call(this,l,g)}return l.$$set=g=>{"variant"in g&&t(0,r=g.variant),"size"in g&&t(1,o=g.size),"disabled"in g&&t(2,c=g.disabled),"loading"in g&&t(3,i=g.loading),"type"in g&&t(4,u=g.type),"href"in g&&t(5,f=g.href),"title"in g&&t(6,d=g.title),"ariaLabel"in g&&t(7,v=g.ariaLabel),"$$scope"in g&&t(8,s=g.$$scope)},[r,o,c,i,u,f,d,v,s,n,h,m]}class qe extends tt{constructor(e){super(),et(this,e,gc,hc,Ye,{variant:0,size:1,disabled:2,loading:3,type:4,href:5,title:6,ariaLabel:7})}}function ts(l){let e;return{c(){e=_("span"),e.textContent="MOCK",p(e,"class","badge svelte-12krgw5")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function ls(l){let e,t=l[2].user.email+"",n;return{c(){e=_("span"),n=S(t),p(e,"class","user-email svelte-12krgw5")},m(s,r){w(s,e,r),a(e,n)},p(s,r){r&4&&t!==(t=s[2].user.email+"")&&B(n,t)},d(s){s&&$(e)}}}function bc(l){let e;return{c(){e=S("Logout")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function kc(l){let e,t,n,s,r,o,c,i,u,f,d,v=l[1]&&ts(),h=l[2].user&&ls(l);return f=new qe({props:{variant:"ghost",size:"sm",$$slots:{default:[bc]},$$scope:{ctx:l}}}),f.$on("click",l[3]),{c(){e=_("header"),t=_("h1"),n=_("span"),s=b(),r=S(l[0]),o=b(),c=_("div"),v&&v.c(),i=b(),h&&h.c(),u=b(),x(f.$$.fragment),p(n,"class","brand-dot svelte-12krgw5"),p(t,"class","svelte-12krgw5"),p(c,"class","header-actions svelte-12krgw5"),p(e,"class","header glass svelte-12krgw5")},m(m,g){w(m,e,g),a(e,t),a(t,n),a(t,s),a(t,r),a(e,o),a(e,c),v&&v.m(c,null),a(c,i),h&&h.m(c,null),a(c,u),Z(f,c,null),d=!0},p(m,[g]){(!d||g&1)&&B(r,m[0]),m[1]?v||(v=ts(),v.c(),v.m(c,i)):v&&(v.d(1),v=null),m[2].user?h?h.p(m,g):(h=ls(m),h.c(),h.m(c,u)):h&&(h.d(1),h=null);const y={};g&16&&(y.$$scope={dirty:g,ctx:m}),f.$set(y)},i(m){d||(P(f.$$.fragment,m),d=!0)},o(m){L(f.$$.fragment,m),d=!1},d(m){m&&$(e),v&&v.d(),h&&h.d(),X(f)}}}function $c(l,e,t){var c,i;let n;Je(l,zt,u=>t(2,n=u));let s=!1;try{s=((i=(c=import.meta)==null?void 0:c.env)==null?void 0:i.VITE_MOCK_API)==="1"||typeof localStorage<"u"&&localStorage.getItem("mockApi")==="1"}catch{s=!1}let{title:r="Deploy Dashboard"}=e;function o(){zt.logout()}return l.$$set=u=>{"title"in u&&t(0,r=u.title)},[r,s,n,o]}class wc extends tt{constructor(e){super(),et(this,e,$c,kc,Ye,{title:0})}}function ns(l,e,t){const n=l.slice();return n[6]=e[t],n}function ss(l){let e,t=l[6].icon+"",n;return{c(){e=_("span"),n=S(t),p(e,"class","tab-icon svelte-1po08a6")},m(s,r){w(s,e,r),a(e,n)},p(s,r){r&2&&t!==(t=s[6].icon+"")&&B(n,t)},d(s){s&&$(e)}}}function os(l){let e,t,n=l[6].label+"",s,r,o,c,i=l[6].icon&&ss(l);function u(){return l[4](l[6])}return{c(){e=_("button"),i&&i.c(),t=b(),s=S(n),r=b(),p(e,"class","tab svelte-1po08a6"),Ce(e,"active",l[0]===l[6].id)},m(f,d){w(f,e,d),i&&i.m(e,null),a(e,t),a(e,s),a(e,r),o||(c=se(e,"click",u),o=!0)},p(f,d){l=f,l[6].icon?i?i.p(l,d):(i=ss(l),i.c(),i.m(e,t)):i&&(i.d(1),i=null),d&2&&n!==(n=l[6].label+"")&&B(s,n),d&3&&Ce(e,"active",l[0]===l[6].id)},d(f){f&&$(e),i&&i.d(),o=!1,c()}}}function yc(l){let e,t=de(l[1]),n=[];for(let s=0;s<t.length;s+=1)n[s]=os(ns(l,t,s));return{c(){e=_("div");for(let s=0;s<n.length;s+=1)n[s].c();p(e,"class","tabs svelte-1po08a6"),Ce(e,"scrollable",l[2])},m(s,r){w(s,e,r);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null)},p(s,[r]){if(r&11){t=de(s[1]);let o;for(o=0;o<t.length;o+=1){const c=ns(s,t,o);n[o]?n[o].p(c,r):(n[o]=os(c),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=t.length}r&4&&Ce(e,"scrollable",s[2])},i:ie,o:ie,d(s){s&&$(e),Me(n,s)}}}function Cc(l,e,t){let{tabs:n=[]}=e,{active:s=""}=e,{scrollable:r=!0}=e;const o=Jl();function c(u){t(0,s=u),o("change",u)}const i=u=>c(u.id);return l.$$set=u=>{"tabs"in u&&t(1,n=u.tabs),"active"in u&&t(0,s=u.active),"scrollable"in u&&t(2,r=u.scrollable)},[s,n,r,c,i]}class Sc extends tt{constructor(e){super(),et(this,e,Cc,yc,Ye,{tabs:1,active:0,scrollable:2})}}function rs(l,e,t){const n=l.slice();return n[20]=e[t],n}function is(l,e,t){var r,o,c;const n=l.slice();n[23]=e[t];const s=n[23].ip||((c=(o=(r=n[23].networks)==null?void 0:r.v4)==null?void 0:o[0])==null?void 0:c.ip_address);return n[24]=s,n}function as(l,e,t){const n=l.slice();return n[27]=e[t],n}function cs(l,e,t){const n=l.slice();return n[30]=e[t],n}function fs(l){let e,t=l[30]+"",n,s;return{c(){e=_("option"),n=S(t),e.__value=s=l[30],ne(e,e.__value)},m(r,o){w(r,e,o),a(e,n)},p(r,o){o[0]&16&&t!==(t=r[30]+"")&&B(n,t),o[0]&16&&s!==(s=r[30])&&(e.__value=s,ne(e,e.__value))},d(r){r&&$(e)}}}function us(l){let e,t=l[27]+"",n,s;return{c(){e=_("option"),n=S(t),e.__value=s=l[27],ne(e,e.__value)},m(r,o){w(r,e,o),a(e,n)},p(r,o){o[0]&8&&t!==(t=r[27]+"")&&B(n,t),o[0]&8&&s!==(s=r[27])&&(e.__value=s,ne(e,e.__value))},d(r){r&&$(e)}}}function ps(l){let e,t=(l[23].name||"unnamed")+"",n,s,r=l[24]+"",o,c,i;return{c(){e=_("option"),n=S(t),s=S(" ("),o=S(r),c=S(")"),e.__value=i=l[24],ne(e,e.__value)},m(u,f){w(u,e,f),a(e,n),a(e,s),a(e,o),a(e,c)},p(u,f){f[0]&32&&t!==(t=(u[23].name||"unnamed")+"")&&B(n,t),f[0]&32&&r!==(r=u[24]+"")&&B(o,r),f[0]&32&&i!==(i=u[24])&&(e.__value=i,ne(e,e.__value))},d(u){u&&$(e)}}}function _s(l){let e,t=l[24]&&ps(l);return{c(){t&&t.c(),e=Ne()},m(n,s){t&&t.m(n,s),w(n,e,s)},p(n,s){n[24]?t?t.p(n,s):(t=ps(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(n){n&&$(e),t&&t.d(n)}}}function ds(l){let e,t,n,s,r,o,c,i,u=de(l[6]||[]),f=[];for(let d=0;d<u.length;d+=1)f[d]=vs(rs(l,u,d));return{c(){e=_("div"),t=_("label"),t.textContent="Container:",n=b(),s=_("select"),r=_("option"),r.textContent="(All)";for(let d=0;d<f.length;d+=1)f[d].c();p(t,"class","svelte-1wvrz0m"),r.__value="",ne(r,r.__value),p(s,"class","svelte-1wvrz0m"),p(e,"class","scope-field svelte-1wvrz0m")},m(d,v){w(d,e,v),a(e,t),a(e,n),a(e,s),a(s,r);for(let h=0;h<f.length;h+=1)f[h]&&f[h].m(s,null);Le(s,l[2].container),c||(i=se(s,"change",l[16]),c=!0)},p(d,v){if(v[0]&64){u=de(d[6]||[]);let h;for(h=0;h<u.length;h+=1){const m=rs(d,u,h);f[h]?f[h].p(m,v):(f[h]=vs(m),f[h].c(),f[h].m(s,null))}for(;h<f.length;h+=1)f[h].d(1);f.length=u.length}v[0]&20&&o!==(o=d[2].container)&&Le(s,d[2].container)},d(d){d&&$(e),Me(f,d),c=!1,i()}}}function vs(l){let e,t=l[20].name+"",n,s;return{c(){e=_("option"),n=S(t),e.__value=s=l[20].name,ne(e,e.__value)},m(r,o){w(r,e,o),a(e,n)},p(r,o){o[0]&64&&t!==(t=r[20].name+"")&&B(n,t),o[0]&64&&s!==(s=r[20].name)&&(e.__value=s,ne(e,e.__value))},d(r){r&&$(e)}}}function ms(l){let e,t,n,s,r,o;return{c(){e=_("label"),t=_("input"),s=S(`
      Tail`),p(t,"type","checkbox"),t.checked=n=l[2].tail,p(t,"class","svelte-1wvrz0m"),p(e,"class","tail-toggle svelte-1wvrz0m")},m(c,i){w(c,e,i),a(e,t),a(e,s),r||(o=se(t,"change",l[18]),r=!0)},p(c,i){i[0]&20&&n!==(n=c[2].tail)&&(t.checked=n)},d(c){c&&$(e),r=!1,o()}}}function zc(l){let e,t,n,s,r,o,c,i,u,f,d,v,h,m,g,y,C,k,z,D,T,E,q,j,R,O,F,I,V,J,U,A,M,G,N,H,ee,Q,te,W,le,K,oe=de(l[4]),$e=[];for(let ce=0;ce<oe.length;ce+=1)$e[ce]=fs(cs(l,oe,ce));let _e=de(l[3]),re=[];for(let ce=0;ce<_e.length;ce+=1)re[ce]=us(as(l,_e,ce));let he=de(l[5]||[]),be=[];for(let ce=0;ce<he.length;ce+=1)be[ce]=_s(is(l,he,ce));let ue=l[1]&&l[2].server&&ds(l),pe=l[0]&&ms(l);return{c(){e=_("div"),t=_("div"),n=_("div"),n.innerHTML='<span class="brand-dot svelte-1wvrz0m"></span> <span>cc</span>',s=b(),r=_("div"),o=_("label"),o.textContent="Project:",c=b(),i=_("select"),u=_("option"),u.textContent="All";for(let ce=0;ce<$e.length;ce+=1)$e[ce].c();d=b(),v=_("div"),h=_("label"),h.textContent="Env:",m=b(),g=_("select"),y=_("option"),y.textContent="All";for(let ce=0;ce<re.length;ce+=1)re[ce].c();k=b(),z=_("div"),D=_("label"),D.textContent="Server:",T=b(),E=_("select"),q=_("option"),q.textContent="(Fleet)";for(let ce=0;ce<be.length;ce+=1)be[ce].c();R=b(),ue&&ue.c(),O=b(),F=_("div"),I=_("label"),I.textContent="Last",V=b(),J=_("select"),U=_("option"),U.textContent="15m",A=_("option"),A.textContent="1h",M=_("option"),M.textContent="6h",G=_("option"),G.textContent="24h",N=_("option"),N.textContent="7d",H=_("option"),H.textContent="30d",Q=b(),te=_("button"),te.innerHTML='<svg viewBox="0 0 24 24" fill="none" class="svelte-1wvrz0m"><path d="M20 12a8 8 0 1 1-2.34-5.66" stroke="currentColor" stroke-width="2" stroke-linecap="round"></path><path d="M20 4v6h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg>',W=b(),pe&&pe.c(),p(n,"class","scope-brand svelte-1wvrz0m"),p(o,"class","svelte-1wvrz0m"),u.__value="",ne(u,u.__value),p(i,"class","svelte-1wvrz0m"),p(r,"class","scope-field svelte-1wvrz0m"),p(h,"class","svelte-1wvrz0m"),y.__value="",ne(y,y.__value),p(g,"class","svelte-1wvrz0m"),p(v,"class","scope-field svelte-1wvrz0m"),p(D,"class","svelte-1wvrz0m"),q.__value="",ne(q,q.__value),p(E,"class","svelte-1wvrz0m"),p(z,"class","scope-field svelte-1wvrz0m"),p(I,"class","svelte-1wvrz0m"),U.__value="15m",ne(U,U.__value),A.__value="1h",ne(A,A.__value),M.__value="6h",ne(M,M.__value),G.__value="24h",ne(G,G.__value),N.__value="7d",ne(N,N.__value),H.__value="30d",ne(H,H.__value),p(J,"class","svelte-1wvrz0m"),p(F,"class","scope-field svelte-1wvrz0m"),p(te,"class","iconbtn svelte-1wvrz0m"),p(te,"title","Refresh"),p(t,"class","scope-bar-inner svelte-1wvrz0m"),p(e,"class","scope-bar glass svelte-1wvrz0m")},m(ce,De){w(ce,e,De),a(e,t),a(t,n),a(t,s),a(t,r),a(r,o),a(r,c),a(r,i),a(i,u);for(let ke=0;ke<$e.length;ke+=1)$e[ke]&&$e[ke].m(i,null);Le(i,l[2].project),a(t,d),a(t,v),a(v,h),a(v,m),a(v,g),a(g,y);for(let ke=0;ke<re.length;ke+=1)re[ke]&&re[ke].m(g,null);Le(g,l[2].env),a(t,k),a(t,z),a(z,D),a(z,T),a(z,E),a(E,q);for(let ke=0;ke<be.length;ke+=1)be[ke]&&be[ke].m(E,null);Le(E,l[2].server),a(t,R),ue&&ue.m(t,null),a(t,O),a(t,F),a(F,I),a(F,V),a(F,J),a(J,U),a(J,A),a(J,M),a(J,G),a(J,N),a(J,H),Le(J,l[2].range),a(t,Q),a(t,te),a(e,W),pe&&pe.m(e,null),le||(K=[se(i,"change",l[13]),se(g,"change",l[14]),se(E,"change",l[15]),se(J,"change",l[17]),se(te,"click",l[10])],le=!0)},p(ce,De){if(De[0]&16){oe=de(ce[4]);let ke;for(ke=0;ke<oe.length;ke+=1){const Ae=cs(ce,oe,ke);$e[ke]?$e[ke].p(Ae,De):($e[ke]=fs(Ae),$e[ke].c(),$e[ke].m(i,null))}for(;ke<$e.length;ke+=1)$e[ke].d(1);$e.length=oe.length}if(De[0]&20&&f!==(f=ce[2].project)&&Le(i,ce[2].project),De[0]&8){_e=de(ce[3]);let ke;for(ke=0;ke<_e.length;ke+=1){const Ae=as(ce,_e,ke);re[ke]?re[ke].p(Ae,De):(re[ke]=us(Ae),re[ke].c(),re[ke].m(g,null))}for(;ke<re.length;ke+=1)re[ke].d(1);re.length=_e.length}if(De[0]&20&&C!==(C=ce[2].env)&&Le(g,ce[2].env),De[0]&32){he=de(ce[5]||[]);let ke;for(ke=0;ke<he.length;ke+=1){const Ae=is(ce,he,ke);be[ke]?be[ke].p(Ae,De):(be[ke]=_s(Ae),be[ke].c(),be[ke].m(E,null))}for(;ke<be.length;ke+=1)be[ke].d(1);be.length=he.length}De[0]&20&&j!==(j=ce[2].server)&&Le(E,ce[2].server),ce[1]&&ce[2].server?ue?ue.p(ce,De):(ue=ds(ce),ue.c(),ue.m(t,O)):ue&&(ue.d(1),ue=null),De[0]&20&&ee!==(ee=ce[2].range)&&Le(J,ce[2].range),ce[0]?pe?pe.p(ce,De):(pe=ms(ce),pe.c(),pe.m(e,null)):pe&&(pe.d(1),pe=null)},i:ie,o:ie,d(ce){ce&&$(e),Me($e,ce),Me(re,ce),Me(be,ce),ue&&ue.d(),pe&&pe.d(),le=!1,Ue(K)}}}function qc(l,e,t){let n,s,r,o,c,i,u;Je(l,el,q=>t(2,r=q)),Je(l,xa,q=>t(11,o=q)),Je(l,sa,q=>t(12,c=q)),Je(l,ql,q=>t(5,i=q)),Je(l,ec,q=>t(6,u=q));let{showTail:f=!1}=e,{showContainer:d=!1}=e;const v=Jl();function h(q,j){el.update(R=>({...R,[q]:j})),v("change")}function m(q){el.update(j=>({...j,server:q,container:""})),v("change")}function g(q){el.update(j=>({...j,tail:q})),v("change")}function y(){v("refresh")}const C=q=>h("project",q.target.value),k=q=>h("env",q.target.value),z=q=>m(q.target.value),D=q=>h("container",q.target.value),T=q=>h("range",q.target.value),E=q=>g(q.target.checked);return l.$$set=q=>{"showTail"in q&&t(0,f=q.showTail),"showContainer"in q&&t(1,d=q.showContainer)},l.$$.update=()=>{l.$$.dirty[0]&6144&&t(4,n=[...new Set([...c||[],...(o||[]).map(q=>q.project).filter(Boolean)])].sort()),l.$$.dirty[0]&2048&&t(3,s=[...new Set(["prod","staging","uat","test","dev",...(o||[]).map(q=>q.environment).filter(Boolean)])].sort()),l.$$.dirty[0]&4&&(r.server?Tn.fetch({server:r.server}):(Tn.clear(),r.container&&el.update(q=>({...q,container:""}))))},[f,d,r,s,n,i,u,h,m,g,y,o,c,C,k,z,D,T,E]}class Dc extends tt{constructor(e){super(),et(this,e,qc,zc,Ye,{showTail:0,showContainer:1},null,[-1,-1])}}const Tc=l=>({}),hs=l=>({}),Pc=l=>({}),gs=l=>({});function bs(l){let e,t,n,s=l[0]&&ks(l);const r=l[5].header,o=Jt(r,l,l[4],gs);return{c(){e=_("div"),s&&s.c(),t=b(),o&&o.c(),p(e,"class","card-header svelte-1qbuf8h")},m(c,i){w(c,e,i),s&&s.m(e,null),a(e,t),o&&o.m(e,null),n=!0},p(c,i){c[0]?s?s.p(c,i):(s=ks(c),s.c(),s.m(e,t)):s&&(s.d(1),s=null),o&&o.p&&(!n||i&16)&&Yt(o,r,c,c[4],n?Vt(r,c[4],i,Pc):Kt(c[4]),gs)},i(c){n||(P(o,c),n=!0)},o(c){L(o,c),n=!1},d(c){c&&$(e),s&&s.d(),o&&o.d(c)}}}function ks(l){let e,t;return{c(){e=_("span"),t=S(l[0]),p(e,"class","card-title svelte-1qbuf8h")},m(n,s){w(n,e,s),a(e,t)},p(n,s){s&1&&B(t,n[0])},d(n){n&&$(e)}}}function $s(l){let e,t;const n=l[5].footer,s=Jt(n,l,l[4],hs);return{c(){e=_("div"),s&&s.c(),p(e,"class","card-footer svelte-1qbuf8h")},m(r,o){w(r,e,o),s&&s.m(e,null),t=!0},p(r,o){s&&s.p&&(!t||o&16)&&Yt(s,n,r,r[4],t?Vt(n,r[4],o,Tc):Kt(r[4]),hs)},i(r){t||(P(s,r),t=!0)},o(r){L(s,r),t=!1},d(r){r&&$(e),s&&s.d(r)}}}function Ec(l){let e,t,n,s,r,o=(l[0]||l[3].header)&&bs(l);const c=l[5].default,i=Jt(c,l,l[4],null);let u=l[3].footer&&$s(l);return{c(){e=_("div"),o&&o.c(),t=b(),n=_("div"),i&&i.c(),s=b(),u&&u.c(),p(n,"class","card-body svelte-1qbuf8h"),p(e,"class","card svelte-1qbuf8h"),Ce(e,"glass",l[1]),Ce(e,"no-padding",!l[2])},m(f,d){w(f,e,d),o&&o.m(e,null),a(e,t),a(e,n),i&&i.m(n,null),a(e,s),u&&u.m(e,null),r=!0},p(f,[d]){f[0]||f[3].header?o?(o.p(f,d),d&9&&P(o,1)):(o=bs(f),o.c(),P(o,1),o.m(e,t)):o&&(we(),L(o,1,1,()=>{o=null}),ye()),i&&i.p&&(!r||d&16)&&Yt(i,c,f,f[4],r?Vt(c,f[4],d,null):Kt(f[4]),null),f[3].footer?u?(u.p(f,d),d&8&&P(u,1)):(u=$s(f),u.c(),P(u,1),u.m(e,null)):u&&(we(),L(u,1,1,()=>{u=null}),ye()),(!r||d&2)&&Ce(e,"glass",f[1]),(!r||d&4)&&Ce(e,"no-padding",!f[2])},i(f){r||(P(o),P(i,f),P(u),r=!0)},o(f){L(o),L(i,f),L(u),r=!1},d(f){f&&$(e),o&&o.d(),i&&i.d(f),u&&u.d()}}}function Lc(l,e,t){let{$$slots:n={},$$scope:s}=e;const r=Hi(n);let{title:o=""}=e,{glass:c=!1}=e,{padding:i=!0}=e;return l.$$set=u=>{"title"in u&&t(0,o=u.title),"glass"in u&&t(1,c=u.glass),"padding"in u&&t(2,i=u.padding),"$$scope"in u&&t(4,s=u.$$scope)},[o,c,i,r,s,n]}class Be extends tt{constructor(e){super(),et(this,e,Lc,Ec,Ye,{title:0,glass:1,padding:2})}}const Mc=l=>({}),ws=l=>({}),jc=l=>({}),ys=l=>({});function Cs(l){let e,t,n,s,r,o,c,i,u,f,d=(l[1]||l[6].header)&&Ss(l);const v=l[9].default,h=Jt(v,l,l[8],null);let m=l[6].footer&&qs(l);return{c(){e=_("div"),t=_("div"),d&&d.c(),n=b(),s=_("div"),h&&h.c(),r=b(),m&&m.c(),p(s,"class","modal-body svelte-kno8vc"),p(t,"class","modal svelte-kno8vc"),Ie(t,"max-width",l[2]),p(e,"class","modal-overlay svelte-kno8vc"),p(e,"role","dialog"),p(e,"aria-modal","true")},m(g,y){w(g,e,y),a(e,t),d&&d.m(t,null),a(t,n),a(t,s),h&&h.m(s,null),a(t,r),m&&m.m(t,null),i=!0,u||(f=se(e,"click",l[4]),u=!0)},p(g,y){g[1]||g[6].header?d?(d.p(g,y),y&66&&P(d,1)):(d=Ss(g),d.c(),P(d,1),d.m(t,n)):d&&(we(),L(d,1,1,()=>{d=null}),ye()),h&&h.p&&(!i||y&256)&&Yt(h,v,g,g[8],i?Vt(v,g[8],y,null):Kt(g[8]),null),g[6].footer?m?(m.p(g,y),y&64&&P(m,1)):(m=qs(g),m.c(),P(m,1),m.m(t,null)):m&&(we(),L(m,1,1,()=>{m=null}),ye()),(!i||y&4)&&Ie(t,"max-width",g[2])},i(g){i||(P(d),P(h,g),P(m),g&&Ve(()=>{i&&(o||(o=yl(t,Qn,{duration:200,start:.95},!0)),o.run(1))}),g&&Ve(()=>{i&&(c||(c=yl(e,Yn,{duration:150},!0)),c.run(1))}),i=!0)},o(g){L(d),L(h,g),L(m),g&&(o||(o=yl(t,Qn,{duration:200,start:.95},!1)),o.run(0)),g&&(c||(c=yl(e,Yn,{duration:150},!1)),c.run(0)),i=!1},d(g){g&&$(e),d&&d.d(),h&&h.d(g),m&&m.d(),g&&o&&o.end(),g&&c&&c.end(),u=!1,f()}}}function Ss(l){let e,t,n,s,r,o,c,i=l[1]&&zs(l);const u=l[9].header,f=Jt(u,l,l[8],ys);return{c(){e=_("div"),i&&i.c(),t=b(),f&&f.c(),n=b(),s=_("button"),s.innerHTML='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-kno8vc"><path d="M18 6L6 18M6 6l12 12"></path></svg>',p(s,"class","modal-close svelte-kno8vc"),p(s,"aria-label","Close"),p(e,"class","modal-header svelte-kno8vc")},m(d,v){w(d,e,v),i&&i.m(e,null),a(e,t),f&&f.m(e,null),a(e,n),a(e,s),r=!0,o||(c=se(s,"click",l[3]),o=!0)},p(d,v){d[1]?i?i.p(d,v):(i=zs(d),i.c(),i.m(e,t)):i&&(i.d(1),i=null),f&&f.p&&(!r||v&256)&&Yt(f,u,d,d[8],r?Vt(u,d[8],v,jc):Kt(d[8]),ys)},i(d){r||(P(f,d),r=!0)},o(d){L(f,d),r=!1},d(d){d&&$(e),i&&i.d(),f&&f.d(d),o=!1,c()}}}function zs(l){let e,t;return{c(){e=_("h3"),t=S(l[1]),p(e,"class","svelte-kno8vc")},m(n,s){w(n,e,s),a(e,t)},p(n,s){s&2&&B(t,n[1])},d(n){n&&$(e)}}}function qs(l){let e,t;const n=l[9].footer,s=Jt(n,l,l[8],ws);return{c(){e=_("div"),s&&s.c(),p(e,"class","modal-footer svelte-kno8vc")},m(r,o){w(r,e,o),s&&s.m(e,null),t=!0},p(r,o){s&&s.p&&(!t||o&256)&&Yt(s,n,r,r[8],t?Vt(n,r[8],o,Mc):Kt(r[8]),ws)},i(r){t||(P(s,r),t=!0)},o(r){L(s,r),t=!1},d(r){r&&$(e),s&&s.d(r)}}}function Nc(l){let e,t,n,s,r=l[0]&&Cs(l);return{c(){r&&r.c(),e=Ne()},m(o,c){r&&r.m(o,c),w(o,e,c),t=!0,n||(s=se(window,"keydown",l[5]),n=!0)},p(o,[c]){o[0]?r?(r.p(o,c),c&1&&P(r,1)):(r=Cs(o),r.c(),P(r,1),r.m(e.parentNode,e)):r&&(we(),L(r,1,1,()=>{r=null}),ye())},i(o){t||(P(r),t=!0)},o(o){L(r),t=!1},d(o){o&&$(e),r&&r.d(o),n=!1,s()}}}function Rc(l,e,t){let{$$slots:n={},$$scope:s}=e;const r=Hi(n);let{open:o=!1}=e,{title:c=""}=e,{width:i="500px"}=e,{closeOnOverlay:u=!0}=e;const f=Jl();function d(){f("close")}function v(m){u&&m.target===m.currentTarget&&d()}function h(m){m.key==="Escape"&&d()}return l.$$set=m=>{"open"in m&&t(0,o=m.open),"title"in m&&t(1,c=m.title),"width"in m&&t(2,i=m.width),"closeOnOverlay"in m&&t(7,u=m.closeOnOverlay),"$$scope"in m&&t(8,s=m.$$scope)},[o,c,i,d,v,h,r,u,s,n]}class al extends tt{constructor(e){super(),et(this,e,Rc,Nc,Ye,{open:0,title:1,width:2,closeOnOverlay:7})}}function Ac(l){let e,t,n;const s=l[2].default,r=Jt(s,l,l[1],null);return{c(){e=_("span"),r&&r.c(),p(e,"class",t="badge badge-"+l[0]+" svelte-1d0la3i")},m(o,c){w(o,e,c),r&&r.m(e,null),n=!0},p(o,[c]){r&&r.p&&(!n||c&2)&&Yt(r,s,o,o[1],n?Vt(s,o[1],c,null):Kt(o[1]),null),(!n||c&1&&t!==(t="badge badge-"+o[0]+" svelte-1d0la3i"))&&p(e,"class",t)},i(o){n||(P(r,o),n=!0)},o(o){L(r,o),n=!1},d(o){o&&$(e),r&&r.d(o)}}}function Oc(l,e,t){let{$$slots:n={},$$scope:s}=e,{variant:r="info"}=e;return l.$$set=o=>{"variant"in o&&t(0,r=o.variant),"$$scope"in o&&t(1,s=o.$$scope)},[r,s,n]}class Re extends tt{constructor(e){super(),et(this,e,Oc,Ac,Ye,{variant:0})}}function Ds(l,e,t){const n=l.slice();return n[15]=e[t],n}function Ts(l){let e,t;return e=new Re({props:{variant:"info",$$slots:{default:[Fc]},$$scope:{ctx:l}}}),{c(){x(e.$$.fragment)},m(n,s){Z(e,n,s),t=!0},p(n,s){const r={};s&262145&&(r.$$scope={dirty:s,ctx:n}),e.$set(r)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){X(e,n)}}}function Fc(l){let e=l[0].project+"",t;return{c(){t=S(e)},m(n,s){w(n,t,s)},p(n,s){s&1&&e!==(e=n[0].project+"")&&B(t,e)},d(n){n&&$(t)}}}function Ps(l){let e,t;return e=new Re({props:{variant:l[0].env==="prod"?"danger":"warning",$$slots:{default:[Bc]},$$scope:{ctx:l}}}),{c(){x(e.$$.fragment)},m(n,s){Z(e,n,s),t=!0},p(n,s){const r={};s&1&&(r.variant=n[0].env==="prod"?"danger":"warning"),s&262145&&(r.$$scope={dirty:s,ctx:n}),e.$set(r)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){X(e,n)}}}function Bc(l){let e=l[0].env+"",t;return{c(){t=S(e)},m(n,s){w(n,t,s)},p(n,s){s&1&&e!==(e=n[0].env+"")&&B(t,e)},d(n){n&&$(t)}}}function Es(l){let e,t,n,s,r=l[4].length+"",o;return{c(){e=_("div"),t=_("span"),t.textContent="Containers",n=b(),s=_("span"),o=S(r),p(t,"class","label svelte-1jkc1of"),p(e,"class","detail svelte-1jkc1of")},m(c,i){w(c,e,i),a(e,t),a(e,n),a(e,s),a(s,o)},p(c,i){i&16&&r!==(r=c[4].length+"")&&B(o,r)},d(c){c&&$(e)}}}function Ls(l){let e,t,n,s,r,o;return{c(){e=_("div"),t=_("span"),t.textContent="Agent",n=b(),s=_("span"),r=S("v"),o=S(l[1]),p(t,"class","label svelte-1jkc1of"),p(s,"class","svelte-1jkc1of"),Ce(s,"outdated",l[3]),p(e,"class","detail svelte-1jkc1of")},m(c,i){w(c,e,i),a(e,t),a(e,n),a(e,s),a(s,r),a(s,o)},p(c,i){i&2&&B(o,c[1]),i&8&&Ce(s,"outdated",c[3])},d(c){c&&$(e)}}}function Ms(l){let e,t,n=de(l[4].slice(0,5)),s=[];for(let o=0;o<n.length;o+=1)s[o]=js(Ds(l,n,o));let r=l[4].length>5&&Ns(l);return{c(){e=_("div");for(let o=0;o<s.length;o+=1)s[o].c();t=b(),r&&r.c(),p(e,"class","containers svelte-1jkc1of")},m(o,c){w(o,e,c);for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(e,null);a(e,t),r&&r.m(e,null)},p(o,c){if(c&16){n=de(o[4].slice(0,5));let i;for(i=0;i<n.length;i+=1){const u=Ds(o,n,i);s[i]?s[i].p(u,c):(s[i]=js(u),s[i].c(),s[i].m(e,t))}for(;i<s.length;i+=1)s[i].d(1);s.length=n.length}o[4].length>5?r?r.p(o,c):(r=Ns(o),r.c(),r.m(e,null)):r&&(r.d(1),r=null)},d(o){o&&$(e),Me(s,o),r&&r.d()}}}function js(l){let e,t=(l[15].name||l[15])+"",n;return{c(){e=_("span"),n=S(t),p(e,"class","container-tag svelte-1jkc1of")},m(s,r){w(s,e,r),a(e,n)},p(s,r){r&16&&t!==(t=(s[15].name||s[15])+"")&&B(n,t)},d(s){s&&$(e)}}}function Ns(l){let e,t,n=l[4].length-5+"",s;return{c(){e=_("span"),t=S("+"),s=S(n),p(e,"class","container-tag more svelte-1jkc1of")},m(r,o){w(r,e,o),a(e,t),a(e,s)},p(r,o){o&16&&n!==(n=r[4].length-5+"")&&B(s,n)},d(r){r&&$(e)}}}function Ic(l){let e;return{c(){e=S("Terminal")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Uc(l){let e;return{c(){e=S("Details")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Hc(l){let e,t;return e=new qe({props:{variant:"warning",size:"sm",$$slots:{default:[Wc]},$$scope:{ctx:l}}}),e.$on("click",l[12]),{c(){x(e.$$.fragment)},m(n,s){Z(e,n,s),t=!0},p(n,s){const r={};s&262144&&(r.$$scope={dirty:s,ctx:n}),e.$set(r)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){X(e,n)}}}function Gc(l){let e,t;return e=new qe({props:{variant:"success",size:"sm",$$slots:{default:[Jc]},$$scope:{ctx:l}}}),e.$on("click",l[11]),{c(){x(e.$$.fragment)},m(n,s){Z(e,n,s),t=!0},p(n,s){const r={};s&262144&&(r.$$scope={dirty:s,ctx:n}),e.$set(r)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){X(e,n)}}}function Wc(l){let e;return{c(){e=S("Stop")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Jc(l){let e;return{c(){e=S("Start")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Vc(l){let e;return{c(){e=S("Destroy")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Yc(l){var ot;let e,t,n,s,r,o,c,i=(l[0].name||"Unnamed")+"",u,f,d,v,h,m,g,y,C,k,z,D,T,E,q,j,R=(l[0].size_slug||l[0].size||"N/A")+"",O,F,I,V,J,U,A=(((ot=l[0].region)==null?void 0:ot.slug)||l[0].region||"N/A")+"",M,G,N,H,ee,Q,te,W,le,K,oe,$e,_e,re,he,be=l[0].project&&Ts(l),ue=l[0].env&&Ps(l),pe=l[4].length>0&&Es(l),ce=l[1]&&Ls(l),De=l[4].length>0&&Ms(l);te=new qe({props:{variant:"ghost",size:"sm",$$slots:{default:[Ic]},$$scope:{ctx:l}}}),te.$on("click",l[9]),le=new qe({props:{variant:"ghost",size:"sm",$$slots:{default:[Uc]},$$scope:{ctx:l}}}),le.$on("click",l[10]);const ke=[Gc,Hc],Ae=[];function $t(ze,ve){return ze[5]?1:0}return oe=$t(l),$e=Ae[oe]=ke[oe](l),re=new qe({props:{variant:"danger",size:"sm",$$slots:{default:[Vc]},$$scope:{ctx:l}}}),re.$on("click",l[13]),{c(){e=_("div"),t=_("div"),n=_("div"),s=_("span"),o=b(),c=_("span"),u=S(i),f=b(),d=_("div"),be&&be.c(),v=b(),ue&&ue.c(),h=b(),m=_("div"),g=_("div"),y=_("span"),y.textContent="IP",C=b(),k=_("code"),z=S(l[6]),D=b(),T=_("div"),E=_("span"),E.textContent="Size",q=b(),j=_("span"),O=S(R),F=b(),I=_("div"),V=_("span"),V.textContent="Region",J=b(),U=_("span"),M=S(A),G=b(),pe&&pe.c(),N=b(),ce&&ce.c(),H=b(),De&&De.c(),ee=b(),Q=_("div"),x(te.$$.fragment),W=b(),x(le.$$.fragment),K=b(),$e.c(),_e=b(),x(re.$$.fragment),p(s,"class",r="status-dot "+l[7](l[2])+" svelte-1jkc1of"),p(n,"class","server-name svelte-1jkc1of"),p(d,"class","server-badges svelte-1jkc1of"),p(t,"class","server-header svelte-1jkc1of"),p(y,"class","label svelte-1jkc1of"),p(k,"class","server-ip svelte-1jkc1of"),p(g,"class","detail svelte-1jkc1of"),p(E,"class","label svelte-1jkc1of"),p(T,"class","detail svelte-1jkc1of"),p(V,"class","label svelte-1jkc1of"),p(I,"class","detail svelte-1jkc1of"),p(m,"class","server-details svelte-1jkc1of"),p(Q,"class","server-actions svelte-1jkc1of"),p(e,"class","server-item svelte-1jkc1of")},m(ze,ve){w(ze,e,ve),a(e,t),a(t,n),a(n,s),a(n,o),a(n,c),a(c,u),a(t,f),a(t,d),be&&be.m(d,null),a(d,v),ue&&ue.m(d,null),a(e,h),a(e,m),a(m,g),a(g,y),a(g,C),a(g,k),a(k,z),a(m,D),a(m,T),a(T,E),a(T,q),a(T,j),a(j,O),a(m,F),a(m,I),a(I,V),a(I,J),a(I,U),a(U,M),a(m,G),pe&&pe.m(m,null),a(m,N),ce&&ce.m(m,null),a(e,H),De&&De.m(e,null),a(e,ee),a(e,Q),Z(te,Q,null),a(Q,W),Z(le,Q,null),a(Q,K),Ae[oe].m(Q,null),a(Q,_e),Z(re,Q,null),he=!0},p(ze,[ve]){var Ge;(!he||ve&4&&r!==(r="status-dot "+ze[7](ze[2])+" svelte-1jkc1of"))&&p(s,"class",r),(!he||ve&1)&&i!==(i=(ze[0].name||"Unnamed")+"")&&B(u,i),ze[0].project?be?(be.p(ze,ve),ve&1&&P(be,1)):(be=Ts(ze),be.c(),P(be,1),be.m(d,v)):be&&(we(),L(be,1,1,()=>{be=null}),ye()),ze[0].env?ue?(ue.p(ze,ve),ve&1&&P(ue,1)):(ue=Ps(ze),ue.c(),P(ue,1),ue.m(d,null)):ue&&(we(),L(ue,1,1,()=>{ue=null}),ye()),(!he||ve&64)&&B(z,ze[6]),(!he||ve&1)&&R!==(R=(ze[0].size_slug||ze[0].size||"N/A")+"")&&B(O,R),(!he||ve&1)&&A!==(A=(((Ge=ze[0].region)==null?void 0:Ge.slug)||ze[0].region||"N/A")+"")&&B(M,A),ze[4].length>0?pe?pe.p(ze,ve):(pe=Es(ze),pe.c(),pe.m(m,N)):pe&&(pe.d(1),pe=null),ze[1]?ce?ce.p(ze,ve):(ce=Ls(ze),ce.c(),ce.m(m,null)):ce&&(ce.d(1),ce=null),ze[4].length>0?De?De.p(ze,ve):(De=Ms(ze),De.c(),De.m(e,ee)):De&&(De.d(1),De=null);const Oe={};ve&262144&&(Oe.$$scope={dirty:ve,ctx:ze}),te.$set(Oe);const We={};ve&262144&&(We.$$scope={dirty:ve,ctx:ze}),le.$set(We);let He=oe;oe=$t(ze),oe===He?Ae[oe].p(ze,ve):(we(),L(Ae[He],1,1,()=>{Ae[He]=null}),ye(),$e=Ae[oe],$e?$e.p(ze,ve):($e=Ae[oe]=ke[oe](ze),$e.c()),P($e,1),$e.m(Q,_e));const nt={};ve&262144&&(nt.$$scope={dirty:ve,ctx:ze}),re.$set(nt)},i(ze){he||(P(be),P(ue),P(te.$$.fragment,ze),P(le.$$.fragment,ze),P($e),P(re.$$.fragment,ze),he=!0)},o(ze){L(be),L(ue),L(te.$$.fragment,ze),L(le.$$.fragment,ze),L($e),L(re.$$.fragment,ze),he=!1},d(ze){ze&&$(e),be&&be.d(),ue&&ue.d(),pe&&pe.d(),ce&&ce.d(),De&&De.d(),X(te),X(le),Ae[oe].d(),X(re)}}}function Kc(l,e,t){let n,s,r,o,c,i,{server:u}=e;const f=Jl();function d(k){switch(k){case"active":case"online":return"green";case"new":case"starting":return"blue";case"off":case"stopped":return"yellow";default:return"red"}}function v(k){f(k,{server:u})}const h=()=>v("ssh"),m=()=>v("details"),g=()=>v("start"),y=()=>v("stop"),C=()=>v("destroy");return l.$$set=k=>{"server"in k&&t(0,u=k.server)},l.$$.update=()=>{var k,z,D;l.$$.dirty&1&&t(6,n=u.ip||((D=(z=(k=u.networks)==null?void 0:k.v4)==null?void 0:z[0])==null?void 0:D.ip_address)||"N/A"),l.$$.dirty&1&&t(2,s=u.status||"unknown"),l.$$.dirty&4&&t(5,r=s==="active"||s==="online"),l.$$.dirty&1&&t(4,o=u.containers||[]),l.$$.dirty&1&&t(1,c=u.agent_version),l.$$.dirty&2&&t(3,i=c&&c!==tc)},[u,c,s,i,o,r,n,d,v,h,m,g,y,C]}class Qc extends tt{constructor(e){super(),et(this,e,Kc,Yc,Ye,{server:0})}}function Rs(l,e,t){const n=l.slice();return n[22]=e[t],n}function As(l,e,t){const n=l.slice();return n[25]=e[t],n}function Os(l,e,t){const n=l.slice();return n[28]=e[t],n}function Zc(l){let e,t;return{c(){e=_("span"),e.textContent="+",t=S(`
      Provision`),p(e,"class","plus-icon svelte-156md29")},m(n,s){w(n,e,s),w(n,t,s)},p:ie,d(n){n&&($(e),$(t))}}}function Xc(l){let e=[],t=new Map,n,s,r=de(l[3]);const o=c=>c[28].id;for(let c=0;c<r.length;c+=1){let i=Os(l,r,c),u=o(i);t.set(u,e[c]=Fs(u,i))}return{c(){for(let c=0;c<e.length;c+=1)e[c].c();n=Ne()},m(c,i){for(let u=0;u<e.length;u+=1)e[u]&&e[u].m(c,i);w(c,n,i),s=!0},p(c,i){i[0]&136&&(r=de(c[3]),we(),e=xi(e,i,o,1,c,r,t,n.parentNode,Xi,Fs,n,Os),ye())},i(c){if(!s){for(let i=0;i<r.length;i+=1)P(e[i]);s=!0}},o(c){for(let i=0;i<e.length;i+=1)L(e[i]);s=!1},d(c){c&&$(n);for(let i=0;i<e.length;i+=1)e[i].d(c)}}}function xc(l){let e;return{c(){e=_("div"),e.innerHTML="<p>No servers found. Provision one to get started.</p>",p(e,"class","empty-state svelte-156md29")},m(t,n){w(t,e,n)},p:ie,i:ie,o:ie,d(t){t&&$(e)}}}function ef(l){let e;return{c(){e=_("div"),e.innerHTML="<p>Loading...</p>",p(e,"class","empty-state svelte-156md29")},m(t,n){w(t,e,n)},p:ie,i:ie,o:ie,d(t){t&&$(e)}}}function Fs(l,e){let t,n,s;return n=new Qc({props:{server:e[28]}}),n.$on("start",e[7]),n.$on("stop",e[7]),n.$on("destroy",e[7]),n.$on("ssh",e[7]),n.$on("details",e[7]),{key:l,first:null,c(){t=Ne(),x(n.$$.fragment),this.first=t},m(r,o){w(r,t,o),Z(n,r,o),s=!0},p(r,o){e=r;const c={};o[0]&8&&(c.server=e[28]),n.$set(c)},i(r){s||(P(n.$$.fragment,r),s=!0)},o(r){L(n.$$.fragment,r),s=!1},d(r){r&&$(t),X(n,r)}}}function tf(l){let e,t,n,s;const r=[ef,xc,Xc],o=[];function c(i,u){return i[0]?0:!i[3]||i[3].length===0?1:2}return t=c(l),n=o[t]=r[t](l),{c(){e=_("div"),n.c(),p(e,"class","server-list svelte-156md29")},m(i,u){w(i,e,u),o[t].m(e,null),s=!0},p(i,u){let f=t;t=c(i),t===f?o[t].p(i,u):(we(),L(o[f],1,1,()=>{o[f]=null}),ye(),n=o[t],n?n.p(i,u):(n=o[t]=r[t](i),n.c()),P(n,1),n.m(e,null))},i(i){s||(P(n),s=!0)},o(i){L(n),s=!1},d(i){i&&$(e),o[t].d()}}}function lf(l){let e;return{c(){e=S("↻ Refresh")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function nf(l){let e,t;return e=new qe({props:{slot:"header",variant:"ghost",size:"sm",$$slots:{default:[lf]},$$scope:{ctx:l}}}),e.$on("click",l[12]),{c(){x(e.$$.fragment)},m(n,s){Z(e,n,s),t=!0},p(n,s){const r={};s[1]&1&&(r.$$scope={dirty:s,ctx:n}),e.$set(r)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){X(e,n)}}}function Bs(l){let e,t=l[25].label+"",n;return{c(){e=_("option"),n=S(t),e.__value=l[25].value,ne(e,e.__value)},m(s,r){w(s,e,r),a(e,n)},p:ie,d(s){s&&$(e)}}}function Is(l){let e,t=l[22].label+"",n;return{c(){e=_("option"),n=S(t),e.__value=l[22].value,ne(e,e.__value)},m(s,r){w(s,e,r),a(e,n)},p:ie,d(s){s&&$(e)}}}function sf(l){let e,t,n,s,r,o,c,i,u,f,d,v,h,m,g,y,C,k,z,D,T,E,q,j,R,O,F,I,V,J,U,A,M,G,N,H,ee,Q,te=de(l[4]),W=[];for(let oe=0;oe<te.length;oe+=1)W[oe]=Bs(As(l,te,oe));let le=de(l[5]),K=[];for(let oe=0;oe<le.length;oe+=1)K[oe]=Is(Rs(l,le,oe));return{c(){e=_("form"),t=_("div"),n=_("div"),s=_("label"),s.textContent="Name *",r=b(),o=_("input"),c=b(),i=_("div"),u=_("div"),f=_("label"),f.textContent="Project",d=b(),v=_("input"),h=b(),m=_("div"),g=_("label"),g.textContent="Environment",y=b(),C=_("select"),k=_("option"),k.textContent="Production",z=_("option"),z.textContent="Staging",D=_("option"),D.textContent="Development",T=b(),E=_("div"),q=_("div"),j=_("label"),j.textContent="Region",R=b(),O=_("select");for(let oe=0;oe<W.length;oe+=1)W[oe].c();F=b(),I=_("div"),V=_("label"),V.textContent="Count",J=b(),U=_("input"),A=b(),M=_("div"),G=_("label"),G.textContent="Size",N=b(),H=_("select");for(let oe=0;oe<K.length;oe+=1)K[oe].c();p(s,"for","prov-name"),p(s,"class","svelte-156md29"),p(o,"id","prov-name"),p(o,"type","text"),p(o,"placeholder","web-server-01"),o.required=!0,p(o,"class","svelte-156md29"),p(n,"class","form-group svelte-156md29"),p(t,"class","form-row svelte-156md29"),p(f,"for","prov-project"),p(f,"class","svelte-156md29"),p(v,"id","prov-project"),p(v,"type","text"),p(v,"placeholder","myapp"),p(v,"class","svelte-156md29"),p(u,"class","form-group svelte-156md29"),p(g,"for","prov-env"),p(g,"class","svelte-156md29"),k.__value="prod",ne(k,k.__value),z.__value="staging",ne(z,z.__value),D.__value="dev",ne(D,D.__value),p(C,"id","prov-env"),p(C,"class","svelte-156md29"),l[2].env===void 0&&Ve(()=>l[16].call(C)),p(m,"class","form-group svelte-156md29"),p(i,"class","form-row two-col svelte-156md29"),p(j,"for","prov-region"),p(j,"class","svelte-156md29"),p(O,"id","prov-region"),p(O,"class","svelte-156md29"),l[2].region===void 0&&Ve(()=>l[17].call(O)),p(q,"class","form-group svelte-156md29"),p(V,"for","prov-count"),p(V,"class","svelte-156md29"),p(U,"id","prov-count"),p(U,"type","number"),p(U,"min","1"),p(U,"max","10"),p(U,"class","svelte-156md29"),p(I,"class","form-group svelte-156md29"),p(E,"class","form-row two-col svelte-156md29"),p(G,"for","prov-size"),p(G,"class","svelte-156md29"),p(H,"id","prov-size"),p(H,"class","svelte-156md29"),l[2].size===void 0&&Ve(()=>l[19].call(H)),p(M,"class","form-group svelte-156md29")},m(oe,$e){w(oe,e,$e),a(e,t),a(t,n),a(n,s),a(n,r),a(n,o),ne(o,l[2].name),a(e,c),a(e,i),a(i,u),a(u,f),a(u,d),a(u,v),ne(v,l[2].project),a(i,h),a(i,m),a(m,g),a(m,y),a(m,C),a(C,k),a(C,z),a(C,D),Le(C,l[2].env,!0),a(e,T),a(e,E),a(E,q),a(q,j),a(q,R),a(q,O);for(let _e=0;_e<W.length;_e+=1)W[_e]&&W[_e].m(O,null);Le(O,l[2].region,!0),a(E,F),a(E,I),a(I,V),a(I,J),a(I,U),ne(U,l[2].count),a(e,A),a(e,M),a(M,G),a(M,N),a(M,H);for(let _e=0;_e<K.length;_e+=1)K[_e]&&K[_e].m(H,null);Le(H,l[2].size,!0),ee||(Q=[se(o,"input",l[14]),se(v,"input",l[15]),se(C,"change",l[16]),se(O,"change",l[17]),se(U,"input",l[18]),se(H,"change",l[19]),se(e,"submit",Yi(l[6]))],ee=!0)},p(oe,$e){if($e[0]&4&&o.value!==oe[2].name&&ne(o,oe[2].name),$e[0]&4&&v.value!==oe[2].project&&ne(v,oe[2].project),$e[0]&4&&Le(C,oe[2].env),$e[0]&16){te=de(oe[4]);let _e;for(_e=0;_e<te.length;_e+=1){const re=As(oe,te,_e);W[_e]?W[_e].p(re,$e):(W[_e]=Bs(re),W[_e].c(),W[_e].m(O,null))}for(;_e<W.length;_e+=1)W[_e].d(1);W.length=te.length}if($e[0]&4&&Le(O,oe[2].region),$e[0]&4&&Ot(U.value)!==oe[2].count&&ne(U,oe[2].count),$e[0]&32){le=de(oe[5]);let _e;for(_e=0;_e<le.length;_e+=1){const re=Rs(oe,le,_e);K[_e]?K[_e].p(re,$e):(K[_e]=Is(re),K[_e].c(),K[_e].m(H,null))}for(;_e<K.length;_e+=1)K[_e].d(1);K.length=le.length}$e[0]&4&&Le(H,oe[2].size)},d(oe){oe&&$(e),Me(W,oe),Me(K,oe),ee=!1,Ue(Q)}}}function of(l){let e;return{c(){e=S("Cancel")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function rf(l){let e;return{c(){e=S("🚀 Provision")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function af(l){let e,t,n,s,r;return t=new qe({props:{variant:"ghost",$$slots:{default:[of]},$$scope:{ctx:l}}}),t.$on("click",l[13]),s=new qe({props:{variant:"primary",$$slots:{default:[rf]},$$scope:{ctx:l}}}),s.$on("click",l[6]),{c(){e=_("div"),x(t.$$.fragment),n=b(),x(s.$$.fragment),p(e,"slot","footer")},m(o,c){w(o,e,c),Z(t,e,null),a(e,n),Z(s,e,null),r=!0},p(o,c){const i={};c[1]&1&&(i.$$scope={dirty:c,ctx:o}),t.$set(i);const u={};c[1]&1&&(u.$$scope={dirty:c,ctx:o}),s.$set(u)},i(o){r||(P(t.$$.fragment,o),P(s.$$.fragment,o),r=!0)},o(o){L(t.$$.fragment,o),L(s.$$.fragment,o),r=!1},d(o){o&&$(e),X(t),X(s)}}}function cf(l){let e,t,n,s,r,o,c,i,u,f,d;r=new qe({props:{variant:"primary",$$slots:{default:[Zc]},$$scope:{ctx:l}}}),r.$on("click",l[11]),c=new Be({props:{title:"Servers",padding:!1,$$slots:{header:[nf],default:[tf]},$$scope:{ctx:l}}});function v(m){l[20](m)}let h={title:"Provision Server",width:"500px",$$slots:{footer:[af],default:[sf]},$$scope:{ctx:l}};return l[1]!==void 0&&(h.open=l[1]),u=new al({props:h}),gt.push(()=>rl(u,"open",v)),u.$on("close",l[21]),{c(){e=_("div"),t=_("div"),n=_("div"),n.innerHTML='<h1 class="svelte-156md29">Infrastructure</h1> <p class="subtitle svelte-156md29">Inventory &amp; lifecycle actions</p>',s=b(),x(r.$$.fragment),o=b(),x(c.$$.fragment),i=b(),x(u.$$.fragment),p(t,"class","page-header svelte-156md29"),p(e,"class","infrastructure svelte-156md29")},m(m,g){w(m,e,g),a(e,t),a(t,n),a(t,s),Z(r,t,null),a(e,o),Z(c,e,null),w(m,i,g),Z(u,m,g),d=!0},p(m,g){const y={};g[1]&1&&(y.$$scope={dirty:g,ctx:m}),r.$set(y);const C={};g[0]&9|g[1]&1&&(C.$$scope={dirty:g,ctx:m}),c.$set(C);const k={};g[0]&6|g[1]&1&&(k.$$scope={dirty:g,ctx:m}),!f&&g[0]&2&&(f=!0,k.open=m[1],ol(()=>f=!1)),u.$set(k)},i(m){d||(P(r.$$.fragment,m),P(c.$$.fragment,m),P(u.$$.fragment,m),d=!0)},o(m){L(r.$$.fragment,m),L(c.$$.fragment,m),L(u.$$.fragment,m),d=!1},d(m){m&&($(e),$(i)),X(r),X(c),X(u,m)}}}function ff(l,e,t){let n,s,r;Je(l,At,R=>t(10,s=R)),Je(l,ql,R=>t(3,r=R));let o=!1,c=!1,i={name:"",project:"",env:"prod",region:"nyc1",size:"s-1vcpu-1gb",count:1};const u=[{value:"nyc1",label:"New York 1"},{value:"nyc3",label:"New York 3"},{value:"sfo3",label:"San Francisco 3"},{value:"ams3",label:"Amsterdam 3"},{value:"sgp1",label:"Singapore 1"},{value:"lon1",label:"London 1"},{value:"fra1",label:"Frankfurt 1"},{value:"tor1",label:"Toronto 1"},{value:"blr1",label:"Bangalore 1"}],f=[{value:"s-1vcpu-512mb-10gb",label:"$4/mo - 1 vCPU, 512MB RAM"},{value:"s-1vcpu-1gb",label:"$6/mo - 1 vCPU, 1GB RAM"},{value:"s-1vcpu-2gb",label:"$12/mo - 1 vCPU, 2GB RAM"},{value:"s-2vcpu-2gb",label:"$18/mo - 2 vCPU, 2GB RAM"},{value:"s-2vcpu-4gb",label:"$24/mo - 2 vCPU, 4GB RAM"},{value:"s-4vcpu-8gb",label:"$48/mo - 4 vCPU, 8GB RAM"}];async function d(){try{const R=await Fe("POST","/infra/servers/provision",{name:i.name,project:i.project,env:i.env,region:i.region,size:i.size,count:i.count});ge.success(`Provisioned ${R.created||1} server(s)`),t(1,c=!1),At.refresh()}catch(R){ge.error("Failed to provision: "+R.message)}}async function v(R){const{server:O}=R.detail,F=R.type;try{switch(F){case"start":ge.info("Power actions not yet implemented. Use DigitalOcean console.");break;case"stop":ge.info("Power actions not yet implemented. Use DigitalOcean console.");break;case"destroy":confirm(`Are you sure you want to destroy ${O.name}? This cannot be undone.`)&&(await Fe("DELETE",`/infra/servers/${O.id}`),ge.success(`Destroyed ${O.name}`));break;case"ssh":ge.info("Terminal feature coming soon");break;case"details":ge.info("Details modal coming soon");break}At.refresh()}catch(I){ge.error(`Failed to ${F}: ${I.message}`)}}function h(){At.refresh()}const m=()=>t(1,c=!0),g=()=>At.refresh(),y=()=>t(1,c=!1);function C(){i.name=this.value,t(2,i)}function k(){i.project=this.value,t(2,i)}function z(){i.env=mt(this),t(2,i)}function D(){i.region=mt(this),t(2,i)}function T(){i.count=Ot(this.value),t(2,i)}function E(){i.size=mt(this),t(2,i)}function q(R){c=R,t(1,c)}const j=()=>t(1,c=!1);return l.$$.update=()=>{l.$$.dirty[0]&1024&&t(9,n=s||{loading:!1}),l.$$.dirty[0]&512&&t(0,o=n.loading)},[o,c,i,r,u,f,d,v,h,n,s,m,g,y,C,k,z,D,T,E,q,j]}class uf extends tt{constructor(e){super(),et(this,e,ff,cf,Ye,{refresh:8},null,[-1,-1])}get refresh(){return this.$$.ctx[8]}}const pf="modulepreload",_f=function(l){return"/static/"+l},Us={},Hs=function(e,t,n){let s=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(t.map(i=>{if(i=_f(i),i in Us)return;Us[i]=!0;const u=i.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${f}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":pf,u||(d.as="script"),d.crossOrigin="",d.href=i,c&&d.setAttribute("nonce",c),document.head.appendChild(d),u)return new Promise((v,h)=>{d.addEventListener("load",v),d.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${i}`)))})}))}function r(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return s.then(o=>{for(const c of o||[])c.status==="rejected"&&r(c.reason);return e().catch(r)})},{Boolean:On}=Ji;function Gs(l,e,t){const n=l.slice();return n[156]=e[t],n}function Ws(l,e,t){const n=l.slice();return n[156]=e[t],n}function Js(l,e,t){const n=l.slice();return n[156]=e[t],n}function Vs(l,e,t){const n=l.slice();return n[156]=e[t],n}function Ys(l,e,t){const n=l.slice();return n[75]=e[t],n}function Ks(l,e,t){const n=l.slice();return n[167]=e[t],n}function Qs(l,e,t){const n=l.slice();return n[170]=e[t],n}function Zs(l,e,t){const n=l.slice();return n[173]=e[t],n}function Xs(l,e,t){var r,o,c;const n=l.slice();n[156]=e[t];const s=n[156].ip||((c=(o=(r=n[156].networks)==null?void 0:r.v4)==null?void 0:o[0])==null?void 0:c.ip_address);return n[176]=s,n}function xs(l,e,t){const n=l.slice();return n[179]=e[t],n[181]=t,n}function df(l){const e=l.slice(),t=e[21].find(s=>s.isMain);e[182]=t;const n=e[21].filter(s=>!s.isMain).length;return e[183]=n,e}function eo(l,e,t){const n=l.slice();return n[179]=e[t],n[181]=t,n}function to(l,e,t){const n=l.slice();return n[185]=e[t],n}function lo(l){let e,t=l[185]+"",n;return{c(){e=_("option"),n=S(t),e.__value=l[185],ne(e,e.__value)},m(s,r){w(s,e,r),a(e,n)},p:ie,d(s){s&&$(e)}}}function vf(l){let e;return{c(){e=S("📥 Load")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function mf(l){let e;return{c(){e=S("💾 Save")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function hf(l){let e;return{c(){e=S("🚫 Exclusions")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function no(l){let e,t;return{c(){e=_("span"),t=S(l[48]),p(e,"class","config-status svelte-8rkhbz")},m(n,s){w(n,e,s),a(e,t)},p(n,s){s[1]&131072&&B(t,n[48])},d(n){n&&$(e)}}}function so(l){let e,t,n,s,r,o,c,i,u,f,d,v;return r=new qe({props:{variant:"ghost",size:"sm",$$slots:{default:[gf]},$$scope:{ctx:l}}}),r.$on("click",l[59]),{c(){e=_("div"),t=_("div"),n=_("label"),n.textContent="Exclusion Patterns",s=b(),x(r.$$.fragment),o=b(),c=_("textarea"),i=b(),u=_("small"),u.textContent="One pattern per line. Applied to folder uploads and git clones.",p(n,"class","svelte-8rkhbz"),p(t,"class","exclude-header svelte-8rkhbz"),p(c,"rows","6"),p(c,"placeholder","node_modules/ __pycache__/ *.pyc .git/"),p(c,"class","svelte-8rkhbz"),p(u,"class","svelte-8rkhbz"),p(e,"class","exclude-editor svelte-8rkhbz")},m(h,m){w(h,e,m),a(e,t),a(t,n),a(t,s),Z(r,t,null),a(e,o),a(e,c),ne(c,l[50]),a(e,i),a(e,u),f=!0,d||(v=se(c,"input",l[80]),d=!0)},p(h,m){const g={};m[6]&4&&(g.$$scope={dirty:m,ctx:h}),r.$set(g),m[1]&524288&&ne(c,h[50])},i(h){f||(P(r.$$.fragment,h),f=!0)},o(h){L(r.$$.fragment,h),f=!1},d(h){h&&$(e),X(r),d=!1,v()}}}function gf(l){let e;return{c(){e=S("Reset to Defaults")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function oo(l){let e,t,n,s,r,o,c,i,u,f,d,v,h,m,g,y,C,k,z,D,T,E,q,j,R,O=l[24]&&ro(),F=l[21].length>0&&io(l);d=new qe({props:{size:"sm",$$slots:{default:[kf]},$$scope:{ctx:l}}}),d.$on("click",l[62]);function I(M,G){return G[0]&2097152&&(y=null),M[21].length===0?wf:(y==null&&(y=!M[21].some(tu)),y?$f:fo)}function V(M,G){return G===fo?df(M):M}let J=I(l,[-1,-1,-1,-1,-1,-1,-1]),U=J(V(l,J)),A=l[27]&&po(l);return{c(){e=_("div"),t=_("div"),n=_("label"),n.textContent="Build Folders",s=b(),r=_("div"),O&&O.c(),o=b(),c=_("input"),i=b(),F&&F.c(),u=b(),f=_("div"),x(d.$$.fragment),v=b(),h=_("span"),h.textContent="or drag & drop folders here",m=b(),g=_("div"),U.c(),C=b(),k=_("label"),z=_("input"),D=b(),T=_("span"),T.textContent="Remember folder configuration for this service",E=b(),A&&A.c(),p(n,"class","svelte-8rkhbz"),p(c,"type","file"),p(c,"webkitdirectory",""),p(c,"directory",""),c.multiple=!0,Ie(c,"display","none"),p(c,"class","svelte-8rkhbz"),p(h,"class","drop-hint svelte-8rkhbz"),p(f,"class","folder-actions svelte-8rkhbz"),p(r,"class","folder-drop-zone svelte-8rkhbz"),Ce(r,"dragover",l[24]),p(g,"class","code-selection-info svelte-8rkhbz"),Ce(g,"success",l[21].some(Zo)),Ce(g,"warning",l[21].length>0&&!l[21].some(Xo)),p(z,"type","checkbox"),p(z,"class","svelte-8rkhbz"),p(k,"class","checkbox-label small-check svelte-8rkhbz"),p(t,"class","form-group svelte-8rkhbz"),p(e,"class","source-config svelte-8rkhbz")},m(M,G){w(M,e,G),a(e,t),a(t,n),a(t,s),a(t,r),O&&O.m(r,null),a(r,o),a(r,c),l[87](c),a(r,i),F&&F.m(r,null),a(r,u),a(r,f),Z(d,f,null),a(f,v),a(f,h),a(t,m),a(t,g),U.m(g,null),a(t,C),a(t,k),a(k,z),z.checked=l[23],a(k,D),a(k,T),a(e,E),A&&A.m(e,null),q=!0,j||(R=[se(c,"change",l[63]),se(r,"dragenter",l[64]),se(r,"dragleave",l[65]),se(r,"dragover",eu),se(r,"drop",l[66]),se(z,"change",l[90])],j=!0)},p(M,G){M[24]?O||(O=ro(),O.c(),O.m(r,o)):O&&(O.d(1),O=null),M[21].length>0?F?(F.p(M,G),G[0]&2097152&&P(F,1)):(F=io(M),F.c(),P(F,1),F.m(r,u)):F&&(we(),L(F,1,1,()=>{F=null}),ye());const N={};G[6]&4&&(N.$$scope={dirty:G,ctx:M}),d.$set(N),(!q||G[0]&16777216)&&Ce(r,"dragover",M[24]),J===(J=I(M,G))&&U?U.p(V(M,J),G):(U.d(1),U=J(V(M,J)),U&&(U.c(),U.m(g,null))),(!q||G[0]&2097152)&&Ce(g,"success",M[21].some(Zo)),(!q||G[0]&2097152)&&Ce(g,"warning",M[21].length>0&&!M[21].some(Xo)),G[0]&8388608&&(z.checked=M[23]),M[27]?A?(A.p(M,G),G[0]&134217728&&P(A,1)):(A=po(M),A.c(),P(A,1),A.m(e,null)):A&&(we(),L(A,1,1,()=>{A=null}),ye())},i(M){q||(P(F),P(d.$$.fragment,M),P(A),q=!0)},o(M){L(F),L(d.$$.fragment,M),L(A),q=!1},d(M){M&&$(e),O&&O.d(),l[87](null),F&&F.d(),X(d),U.d(),A&&A.d(),j=!1,Ue(R)}}}function ro(l){let e;return{c(){e=_("div"),e.innerHTML='<span class="drop-icon svelte-8rkhbz">📂</span> <span>Drop folder here</span>',p(e,"class","drop-overlay svelte-8rkhbz")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function io(l){let e,t,n=de(l[21]),s=[];for(let o=0;o<n.length;o+=1)s[o]=co(eo(l,n,o));const r=o=>L(s[o],1,1,()=>{s[o]=null});return{c(){e=_("div");for(let o=0;o<s.length;o+=1)s[o].c();p(e,"class","folder-list svelte-8rkhbz")},m(o,c){w(o,e,c);for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(e,null);t=!0},p(o,c){if(c[0]&2097152|c[2]&96){n=de(o[21]);let i;for(i=0;i<n.length;i+=1){const u=eo(o,n,i);s[i]?(s[i].p(u,c),P(s[i],1)):(s[i]=co(u),s[i].c(),P(s[i],1),s[i].m(e,null))}for(we(),i=n.length;i<s.length;i+=1)r(i);ye()}},i(o){if(!t){for(let c=0;c<n.length;c+=1)P(s[c]);t=!0}},o(o){s=s.filter(On);for(let c=0;c<s.length;c+=1)L(s[c]);t=!1},d(o){o&&$(e),Me(s,o)}}}function bf(l){let e=l[179].isMain?"MAIN":"dependency",t;return{c(){t=S(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&2097152&&e!==(e=n[179].isMain?"MAIN":"dependency")&&B(t,e)},d(n){n&&$(t)}}}function ao(l){let e,t,n;function s(){return l[88](l[181])}return{c(){e=_("button"),e.textContent="⭐",p(e,"type","button"),p(e,"class","set-main-btn svelte-8rkhbz"),p(e,"title","Set as main")},m(r,o){w(r,e,o),t||(n=se(e,"click",s),t=!0)},p(r,o){l=r},d(r){r&&$(e),t=!1,n()}}}function co(l){let e,t,n=l[179].isMain?"📁":"📂",s,r,o,c=l[179].name+"",i,u,f,d,v,h,m=l[179].fileCount+"",g,y,C,k,z,D,T,E,q;d=new Re({props:{variant:l[179].isMain?"success":"secondary",$$slots:{default:[bf]},$$scope:{ctx:l}}});let j=!l[179].isMain&&ao(l);function R(){return l[89](l[181])}return{c(){e=_("div"),t=_("span"),s=S(n),r=b(),o=_("strong"),i=S(c),u=S("/"),f=b(),x(d.$$.fragment),v=b(),h=_("span"),g=S(m),y=S(" files"),C=b(),j&&j.c(),k=b(),z=_("button"),z.textContent="✕",D=b(),p(t,"class","folder-icon svelte-8rkhbz"),p(o,"class","svelte-8rkhbz"),p(h,"class","file-count svelte-8rkhbz"),p(z,"type","button"),p(z,"class","remove-btn svelte-8rkhbz"),p(e,"class","folder-item svelte-8rkhbz")},m(O,F){w(O,e,F),a(e,t),a(t,s),a(e,r),a(e,o),a(o,i),a(o,u),a(e,f),Z(d,e,null),a(e,v),a(e,h),a(h,g),a(h,y),a(e,C),j&&j.m(e,null),a(e,k),a(e,z),a(e,D),T=!0,E||(q=se(z,"click",R),E=!0)},p(O,F){l=O,(!T||F[0]&2097152)&&n!==(n=l[179].isMain?"📁":"📂")&&B(s,n),(!T||F[0]&2097152)&&c!==(c=l[179].name+"")&&B(i,c);const I={};F[0]&2097152&&(I.variant=l[179].isMain?"success":"secondary"),F[0]&2097152|F[6]&4&&(I.$$scope={dirty:F,ctx:l}),d.$set(I),(!T||F[0]&2097152)&&m!==(m=l[179].fileCount+"")&&B(g,m),l[179].isMain?j&&(j.d(1),j=null):j?j.p(l,F):(j=ao(l),j.c(),j.m(e,k))},i(O){T||(P(d.$$.fragment,O),T=!0)},o(O){L(d.$$.fragment,O),T=!1},d(O){O&&$(e),X(d),j&&j.d(),E=!1,q()}}}function kf(l){let e;return{c(){e=S("➕ Add Folder")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function fo(l){let e,t,n=l[182].name+"",s,r,o,c,i=l[183]>0&&uo(l);return{c(){e=S("✓ Main: "),t=_("strong"),s=S(n),r=S("/"),o=b(),i&&i.c(),c=Ne()},m(u,f){w(u,e,f),w(u,t,f),a(t,s),a(t,r),w(u,o,f),i&&i.m(u,f),w(u,c,f)},p(u,f){f[0]&2097152&&n!==(n=u[182].name+"")&&B(s,n),u[183]>0?i?i.p(u,f):(i=uo(u),i.c(),i.m(c.parentNode,c)):i&&(i.d(1),i=null)},d(u){u&&($(e),$(t),$(o),$(c)),i&&i.d(u)}}}function $f(l){let e;return{c(){e=S("⚠️ No main folder selected. Click ⭐ to set one as main.")},m(t,n){w(t,e,n)},p:ie,d(t){t&&$(e)}}}function wf(l){let e;return{c(){e=S("No folders selected. Add your main service folder and any dependencies.")},m(t,n){w(t,e,n)},p:ie,d(t){t&&$(e)}}}function uo(l){let e,t=l[183]+"",n,s,r=l[183]===1?"y":"ies",o;return{c(){e=S("+ "),n=S(t),s=S(" dependenc"),o=S(r)},m(c,i){w(c,e,i),w(c,n,i),w(c,s,i),w(c,o,i)},p(c,i){i[0]&2097152&&t!==(t=c[183]+"")&&B(n,t),i[0]&2097152&&r!==(r=c[183]===1?"y":"ies")&&B(o,r)},d(c){c&&($(e),$(n),$(s),$(o))}}}function po(l){let e,t,n,s,r,o,c,i,u,f,d,v,h,m,g,y,C,k,z,D,T,E;return r=new Re({props:{variant:l[26]==="from folder"?"success":l[26]==="multi-folder"?"info":"warning",$$slots:{default:[yf]},$$scope:{ctx:l}}}),{c(){e=_("div"),t=_("div"),n=_("label"),s=S(`🐳 Dockerfile
                    `),x(r.$$.fragment),o=b(),c=_("textarea"),i=b(),u=_("div"),f=_("select"),d=_("option"),d.textContent="FROM...",v=_("option"),v.textContent="python:3.11-slim",h=_("option"),h.textContent="python:3.12-slim",m=_("option"),m.textContent="node:20-alpine",g=_("option"),g.textContent="node:18-alpine",y=_("option"),y.textContent="golang:1.21-alpine",C=_("option"),C.textContent="nginx:alpine",k=b(),z=_("input"),p(n,"class","svelte-8rkhbz"),p(t,"class","dockerfile-header svelte-8rkhbz"),p(c,"rows","8"),p(c,"class","dockerfile-editor svelte-8rkhbz"),p(c,"spellcheck","false"),d.__value="",ne(d,d.__value),v.__value="python:3.11-slim",ne(v,v.__value),h.__value="python:3.12-slim",ne(h,h.__value),m.__value="node:20-alpine",ne(m,m.__value),g.__value="node:18-alpine",ne(g,g.__value),y.__value="golang:1.21-alpine",ne(y,y.__value),C.__value="nginx:alpine",ne(C,C.__value),p(f,"class","svelte-8rkhbz"),l[28]===void 0&&Ve(()=>l[92].call(f)),p(z,"type","text"),p(z,"placeholder","CMD (e.g. uvicorn main:app ...)"),p(z,"class","svelte-8rkhbz"),p(u,"class","dockerfile-quick-fields svelte-8rkhbz"),p(e,"class","dockerfile-preview svelte-8rkhbz")},m(q,j){w(q,e,j),a(e,t),a(t,n),a(n,s),Z(r,n,null),a(e,o),a(e,c),ne(c,l[25]),a(e,i),a(e,u),a(u,f),a(f,d),a(f,v),a(f,h),a(f,m),a(f,g),a(f,y),a(f,C),Le(f,l[28],!0),a(u,k),a(u,z),ne(z,l[29]),D=!0,T||(E=[se(c,"input",l[91]),se(f,"change",l[92]),se(f,"change",l[93]),se(z,"input",l[94]),se(z,"change",l[95])],T=!0)},p(q,j){const R={};j[0]&67108864&&(R.variant=q[26]==="from folder"?"success":q[26]==="multi-folder"?"info":"warning"),j[0]&67108864|j[6]&4&&(R.$$scope={dirty:j,ctx:q}),r.$set(R),j[0]&33554432&&ne(c,q[25]),j[0]&268435456&&Le(f,q[28]),j[0]&536870912&&z.value!==q[29]&&ne(z,q[29])},i(q){D||(P(r.$$.fragment,q),D=!0)},o(q){L(r.$$.fragment,q),D=!1},d(q){q&&$(e),X(r),T=!1,Ue(E)}}}function yf(l){let e;return{c(){e=S(l[26])},m(t,n){w(t,e,n)},p(t,n){n[0]&67108864&&B(e,t[26])},d(t){t&&$(e)}}}function _o(l){let e,t,n,s,r,o,c,i,u,f,d,v,h,m,g,y,C,k,z,D,T,E,q,j,R,O,F,I,V,J,U,A,M,G,N,H,ee,Q,te=l[14].length>0&&vo(l);return T=new qe({props:{size:"sm",$$slots:{default:[Sf]},$$scope:{ctx:l}}}),T.$on("click",l[100]),q=new qe({props:{variant:"ghost",size:"sm",$$slots:{default:[zf]},$$scope:{ctx:l}}}),q.$on("click",l[101]),{c(){e=_("div"),t=_("div"),n=_("label"),n.textContent="Git Repository URL *",s=b(),r=_("input"),o=b(),c=_("small"),c.textContent="HTTPS URL (SSH not supported)",i=b(),u=_("div"),f=_("label"),f.textContent="Branch",d=b(),v=_("input"),h=b(),m=_("div"),g=_("label"),g.textContent="Folders to Include",y=b(),te&&te.c(),C=b(),k=_("div"),z=_("input"),D=b(),x(T.$$.fragment),E=b(),x(q.$$.fragment),j=b(),R=_("small"),R.textContent="Leave empty to use entire repo. Add paths for multi-folder builds (main folder contains Dockerfile).",O=b(),F=_("details"),I=_("summary"),I.textContent="🔐 Private repository?",V=b(),J=_("div"),U=_("label"),U.textContent="Personal Access Token",A=b(),M=_("input"),G=b(),N=_("small"),N.innerHTML="Needs <code>repo</code> scope for private repos",p(n,"for","git-url"),p(n,"class","svelte-8rkhbz"),p(r,"id","git-url"),p(r,"type","url"),p(r,"placeholder","https://github.com/user/repo"),p(r,"class","svelte-8rkhbz"),p(c,"class","svelte-8rkhbz"),p(t,"class","form-group svelte-8rkhbz"),p(f,"for","git-branch"),p(f,"class","svelte-8rkhbz"),p(v,"id","git-branch"),p(v,"type","text"),p(v,"placeholder","main"),p(v,"class","svelte-8rkhbz"),p(u,"class","form-group svelte-8rkhbz"),p(g,"class","svelte-8rkhbz"),p(z,"type","text"),p(z,"placeholder","e.g. services/my_api"),p(z,"class","svelte-8rkhbz"),p(k,"class","folder-input svelte-8rkhbz"),p(R,"class","svelte-8rkhbz"),p(m,"class","form-group svelte-8rkhbz"),p(I,"class","svelte-8rkhbz"),p(U,"for","git-token"),p(U,"class","svelte-8rkhbz"),p(M,"id","git-token"),p(M,"type","password"),p(M,"placeholder","ghp_xxxxxxxxxxxx"),p(M,"class","svelte-8rkhbz"),p(N,"class","svelte-8rkhbz"),p(J,"class","form-group svelte-8rkhbz"),p(F,"class","private-repo svelte-8rkhbz"),p(e,"class","source-config svelte-8rkhbz")},m(W,le){w(W,e,le),a(e,t),a(t,n),a(t,s),a(t,r),ne(r,l[11]),a(t,o),a(t,c),a(e,i),a(e,u),a(u,f),a(u,d),a(u,v),ne(v,l[12]),a(e,h),a(e,m),a(m,g),a(m,y),te&&te.m(m,null),a(m,C),a(m,k),a(k,z),ne(z,l[15]),a(k,D),Z(T,k,null),a(k,E),Z(q,k,null),a(m,j),a(m,R),a(e,O),a(e,F),a(F,I),a(F,V),a(F,J),a(J,U),a(J,A),a(J,M),ne(M,l[13]),a(J,G),a(J,N),H=!0,ee||(Q=[se(r,"input",l[96]),se(v,"input",l[97]),se(z,"input",l[99]),se(M,"input",l[102])],ee=!0)},p(W,le){le[0]&2048&&r.value!==W[11]&&ne(r,W[11]),le[0]&4096&&v.value!==W[12]&&ne(v,W[12]),W[14].length>0?te?(te.p(W,le),le[0]&16384&&P(te,1)):(te=vo(W),te.c(),P(te,1),te.m(m,C)):te&&(we(),L(te,1,1,()=>{te=null}),ye()),le[0]&32768&&z.value!==W[15]&&ne(z,W[15]);const K={};le[6]&4&&(K.$$scope={dirty:le,ctx:W}),T.$set(K);const oe={};le[6]&4&&(oe.$$scope={dirty:le,ctx:W}),q.$set(oe),le[0]&8192&&M.value!==W[13]&&ne(M,W[13])},i(W){H||(P(te),P(T.$$.fragment,W),P(q.$$.fragment,W),H=!0)},o(W){L(te),L(T.$$.fragment,W),L(q.$$.fragment,W),H=!1},d(W){W&&$(e),te&&te.d(),X(T),X(q),ee=!1,Ue(Q)}}}function vo(l){let e,t,n=de(l[14]),s=[];for(let o=0;o<n.length;o+=1)s[o]=mo(xs(l,n,o));const r=o=>L(s[o],1,1,()=>{s[o]=null});return{c(){e=_("div");for(let o=0;o<s.length;o+=1)s[o].c();p(e,"class","folder-list svelte-8rkhbz")},m(o,c){w(o,e,c);for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(e,null);t=!0},p(o,c){if(c[0]&16384|c[2]&512){n=de(o[14]);let i;for(i=0;i<n.length;i+=1){const u=xs(o,n,i);s[i]?(s[i].p(u,c),P(s[i],1)):(s[i]=mo(u),s[i].c(),P(s[i],1),s[i].m(e,null))}for(we(),i=n.length;i<s.length;i+=1)r(i);ye()}},i(o){if(!t){for(let c=0;c<n.length;c+=1)P(s[c]);t=!0}},o(o){s=s.filter(On);for(let c=0;c<s.length;c+=1)L(s[c]);t=!1},d(o){o&&$(e),Me(s,o)}}}function Cf(l){let e=l[179].isMain?"MAIN":"dependency",t;return{c(){t=S(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&16384&&e!==(e=n[179].isMain?"MAIN":"dependency")&&B(t,e)},d(n){n&&$(t)}}}function mo(l){let e,t,n=l[179].isMain?"📁":"📂",s,r,o,c=l[179].path+"",i,u,f,d,v,h,m,g,y;f=new Re({props:{variant:l[179].isMain?"success":"secondary",$$slots:{default:[Cf]},$$scope:{ctx:l}}});function C(){return l[98](l[181])}return{c(){e=_("div"),t=_("span"),s=S(n),r=b(),o=_("strong"),i=S(c),u=b(),x(f.$$.fragment),d=b(),v=_("button"),v.textContent="✕",h=b(),p(o,"class","svelte-8rkhbz"),p(v,"type","button"),p(v,"class","remove-btn svelte-8rkhbz"),p(e,"class","folder-item svelte-8rkhbz")},m(k,z){w(k,e,z),a(e,t),a(t,s),a(e,r),a(e,o),a(o,i),a(e,u),Z(f,e,null),a(e,d),a(e,v),a(e,h),m=!0,g||(y=se(v,"click",C),g=!0)},p(k,z){l=k,(!m||z[0]&16384)&&n!==(n=l[179].isMain?"📁":"📂")&&B(s,n),(!m||z[0]&16384)&&c!==(c=l[179].path+"")&&B(i,c);const D={};z[0]&16384&&(D.variant=l[179].isMain?"success":"secondary"),z[0]&16384|z[6]&4&&(D.$$scope={dirty:z,ctx:l}),f.$set(D)},i(k){m||(P(f.$$.fragment,k),m=!0)},o(k){L(f.$$.fragment,k),m=!1},d(k){k&&$(e),X(f),g=!1,y()}}}function Sf(l){let e;return{c(){e=S("+ Main")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function zf(l){let e;return{c(){e=S("+ Dep")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function ho(l){let e,t,n,s,r,o,c,i,u;return{c(){e=_("div"),t=_("div"),n=_("label"),n.textContent="Docker Image *",s=b(),r=_("input"),o=b(),c=_("small"),c.textContent="Full image URL from DO Registry or Docker Hub",p(n,"for","image-url"),p(n,"class","svelte-8rkhbz"),p(r,"id","image-url"),p(r,"type","text"),p(r,"placeholder","registry.digitalocean.com/my-registry/app:latest"),p(r,"class","svelte-8rkhbz"),p(c,"class","svelte-8rkhbz"),p(t,"class","form-group svelte-8rkhbz"),p(e,"class","source-config svelte-8rkhbz")},m(f,d){w(f,e,d),a(e,t),a(t,n),a(t,s),a(t,r),ne(r,l[16]),a(t,o),a(t,c),i||(u=se(r,"input",l[103]),i=!0)},p(f,d){d[0]&65536&&r.value!==f[16]&&ne(r,f[16])},d(f){f&&$(e),i=!1,u()}}}function go(l){let e,t,n,s,r,o,c,i,u,f,d,v,h,m,g,y,C,k,z,D,T,E,q,j,R,O,F,I,V=l[17]&&bo(l);return{c(){e=_("div"),t=_("div"),n=_("label"),n.textContent="Docker Image File (.tar) *",s=b(),r=_("input"),o=b(),V&&V.c(),c=b(),i=_("small"),i.innerHTML="Export from Docker with: <code>docker save myimage:latest -o image.tar</code>",u=b(),f=_("div"),d=_("label"),d.textContent="Image Name *",v=b(),h=_("input"),m=b(),g=_("small"),g.textContent="The image name/tag as it appears in the tar file",y=b(),C=_("div"),k=_("div"),z=_("label"),z.textContent="Container Port",D=b(),T=_("input"),E=b(),q=_("div"),j=_("label"),j.textContent="Host Port",R=b(),O=_("input"),p(n,"for","image-file"),p(n,"class","svelte-8rkhbz"),p(r,"id","image-file"),p(r,"type","file"),p(r,"accept",".tar,.tar.gz"),p(r,"class","svelte-8rkhbz"),p(i,"class","svelte-8rkhbz"),p(t,"class","form-group svelte-8rkhbz"),p(d,"for","image-name"),p(d,"class","svelte-8rkhbz"),p(h,"id","image-name"),p(h,"type","text"),p(h,"placeholder","myapp:latest"),p(h,"class","svelte-8rkhbz"),p(g,"class","svelte-8rkhbz"),p(f,"class","form-group svelte-8rkhbz"),p(z,"for","container-port"),p(z,"class","svelte-8rkhbz"),p(T,"id","container-port"),p(T,"type","number"),p(T,"placeholder",l[9]),p(T,"class","svelte-8rkhbz"),p(k,"class","form-group svelte-8rkhbz"),p(j,"for","host-port"),p(j,"class","svelte-8rkhbz"),p(O,"id","host-port"),p(O,"type","number"),p(O,"placeholder",l[9]),p(O,"class","svelte-8rkhbz"),p(q,"class","form-group svelte-8rkhbz"),p(C,"class","form-row svelte-8rkhbz"),p(e,"class","source-config svelte-8rkhbz")},m(J,U){w(J,e,U),a(e,t),a(t,n),a(t,s),a(t,r),a(t,o),V&&V.m(t,null),a(t,c),a(t,i),a(e,u),a(e,f),a(f,d),a(f,v),a(f,h),ne(h,l[18]),a(f,m),a(f,g),a(e,y),a(e,C),a(C,k),a(k,z),a(k,D),a(k,T),ne(T,l[19]),a(C,E),a(C,q),a(q,j),a(q,R),a(q,O),ne(O,l[20]),F||(I=[se(r,"change",l[72]),se(h,"input",l[104]),se(T,"input",l[105]),se(O,"input",l[106])],F=!0)},p(J,U){J[17]?V?V.p(J,U):(V=bo(J),V.c(),V.m(t,c)):V&&(V.d(1),V=null),U[0]&262144&&h.value!==J[18]&&ne(h,J[18]),U[0]&512&&p(T,"placeholder",J[9]),U[0]&524288&&Ot(T.value)!==J[19]&&ne(T,J[19]),U[0]&512&&p(O,"placeholder",J[9]),U[0]&1048576&&Ot(O.value)!==J[20]&&ne(O,J[20])},d(J){J&&$(e),V&&V.d(),F=!1,Ue(I)}}}function bo(l){let e,t,n=l[17].name+"",s,r,o=(l[17].size/1024/1024).toFixed(2)+"",c,i;return{c(){e=_("div"),t=S("📦 "),s=S(n),r=S(" ("),c=S(o),i=S(" MB)"),p(e,"class","file-selected svelte-8rkhbz")},m(u,f){w(u,e,f),a(e,t),a(e,s),a(e,r),a(e,c),a(e,i)},p(u,f){f[0]&131072&&n!==(n=u[17].name+"")&&B(s,n),f[0]&131072&&o!==(o=(u[17].size/1024/1024).toFixed(2)+"")&&B(c,o)},d(u){u&&$(e)}}}function ko(l){let e,t;return e=new Re({props:{variant:"info",$$slots:{default:[qf]},$$scope:{ctx:l}}}),{c(){x(e.$$.fragment)},m(n,s){Z(e,n,s),t=!0},p(n,s){const r={};s[0]&1024|s[6]&4&&(r.$$scope={dirty:s,ctx:n}),e.$set(r)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){X(e,n)}}}function qf(l){let e=l[10].trim().split(`
`).filter(xo).length+"",t,n;return{c(){t=S(e),n=S(" vars")},m(s,r){w(s,t,r),w(s,n,r)},p(s,r){r[0]&1024&&e!==(e=s[10].trim().split(`
`).filter(xo).length+"")&&B(t,e)},d(s){s&&($(t),$(n))}}}function $o(l){let e,t,n,s,r,o;return{c(){e=_("div"),t=_("textarea"),n=b(),s=_("small"),s.textContent="One per line: KEY=value",p(t,"id","deploy-envvars"),p(t,"rows","3"),p(t,"placeholder","KEY=value ANOTHER_KEY=value"),p(t,"class","svelte-8rkhbz"),p(s,"class","svelte-8rkhbz"),p(e,"class","section-content svelte-8rkhbz")},m(c,i){w(c,e,i),a(e,t),ne(t,l[10]),a(e,n),a(e,s),r||(o=se(t,"input",l[109]),r=!0)},p(c,i){i[0]&1024&&ne(t,c[10])},d(c){c&&$(e),r=!1,o()}}}function wo(l){let e,t;return e=new Re({props:{variant:"info",$$slots:{default:[Df]},$$scope:{ctx:l}}}),{c(){x(e.$$.fragment)},m(n,s){Z(e,n,s),t=!0},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){X(e,n)}}}function Df(l){let e;return{c(){e=S("configured")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function yo(l){let e,t,n,s,r,o,c,i,u,f,d,v,h,m,g,y,C,k,z,D,T,E,q,j,R,O,F,I,V,J=l[43]&&Co(l),U=l[46]&&So(l);return{c(){e=_("div"),t=_("label"),n=_("input"),s=b(),r=_("span"),r.textContent="Auto-inject service discovery",o=b(),c=_("small"),c.textContent="Injects DATABASE_URL, REDIS_URL, etc. based on dependencies",i=b(),J&&J.c(),u=b(),f=_("div"),d=b(),v=_("label"),h=_("input"),m=b(),g=_("span"),g.textContent="💾 Persist data (mount volume)",y=b(),C=_("small"),C.textContent="Mounts /data volume for databases and stateful services",k=b(),z=_("div"),D=b(),T=_("label"),E=_("input"),q=b(),j=_("span"),j.textContent="🌐 Setup domain (Cloudflare)",R=b(),O=_("small"),O.textContent="Auto-provision subdomain with SSL via Cloudflare",F=b(),U&&U.c(),p(n,"type","checkbox"),p(n,"class","svelte-8rkhbz"),p(t,"class","checkbox-label svelte-8rkhbz"),p(c,"class","svelte-8rkhbz"),p(f,"class","config-divider svelte-8rkhbz"),p(h,"type","checkbox"),p(h,"class","svelte-8rkhbz"),p(v,"class","checkbox-label svelte-8rkhbz"),p(C,"class","svelte-8rkhbz"),p(z,"class","config-divider svelte-8rkhbz"),p(E,"type","checkbox"),p(E,"class","svelte-8rkhbz"),p(T,"class","checkbox-label svelte-8rkhbz"),p(O,"class","svelte-8rkhbz"),p(e,"class","section-content service-config svelte-8rkhbz")},m(A,M){w(A,e,M),a(e,t),a(t,n),n.checked=l[43],a(t,s),a(t,r),a(e,o),a(e,c),a(e,i),J&&J.m(e,null),a(e,u),a(e,f),a(e,d),a(e,v),a(v,h),h.checked=l[44],a(v,m),a(v,g),a(e,y),a(e,C),a(e,k),a(e,z),a(e,D),a(e,T),a(T,E),E.checked=l[46],a(T,q),a(T,j),a(e,R),a(e,O),a(e,F),U&&U.m(e,null),I||(V=[se(n,"change",l[111]),se(h,"change",l[116]),se(E,"change",l[117])],I=!0)},p(A,M){M[1]&4096&&(n.checked=A[43]),A[43]?J?J.p(A,M):(J=Co(A),J.c(),J.m(e,u)):J&&(J.d(1),J=null),M[1]&8192&&(h.checked=A[44]),M[1]&32768&&(E.checked=A[46]),A[46]?U?U.p(A,M):(U=So(A),U.c(),U.m(e,null)):U&&(U.d(1),U=null)},d(A){A&&$(e),J&&J.d(),U&&U.d(),I=!1,Ue(V)}}}function Co(l){let e,t,n,s,r,o,c,i,u,f,d,v,h,m,g,y,C,k,z,D,T;return{c(){e=_("div"),t=_("label"),t.textContent="Dependencies:",n=b(),s=_("div"),r=_("label"),o=_("input"),c=S(`
                      🐘 PostgreSQL`),i=b(),u=_("label"),f=_("input"),d=S(`
                      ⚡ Redis`),v=b(),h=_("label"),m=_("input"),g=S(`
                      🐬 MySQL`),y=b(),C=_("label"),k=_("input"),z=S(`
                      🍃 MongoDB`),p(o,"type","checkbox"),p(o,"class","svelte-8rkhbz"),p(r,"class","dep-item svelte-8rkhbz"),p(f,"type","checkbox"),p(f,"class","svelte-8rkhbz"),p(u,"class","dep-item svelte-8rkhbz"),p(m,"type","checkbox"),p(m,"class","svelte-8rkhbz"),p(h,"class","dep-item svelte-8rkhbz"),p(k,"type","checkbox"),p(k,"class","svelte-8rkhbz"),p(C,"class","dep-item svelte-8rkhbz"),p(s,"class","dep-list svelte-8rkhbz"),p(e,"class","dependencies svelte-8rkhbz")},m(E,q){w(E,e,q),a(e,t),a(e,n),a(e,s),a(s,r),a(r,o),o.checked=l[45].postgres,a(r,c),a(s,i),a(s,u),a(u,f),f.checked=l[45].redis,a(u,d),a(s,v),a(s,h),a(h,m),m.checked=l[45].mysql,a(h,g),a(s,y),a(s,C),a(C,k),k.checked=l[45].mongo,a(C,z),D||(T=[se(o,"change",l[112]),se(f,"change",l[113]),se(m,"change",l[114]),se(k,"change",l[115])],D=!0)},p(E,q){q[1]&16384&&(o.checked=E[45].postgres),q[1]&16384&&(f.checked=E[45].redis),q[1]&16384&&(m.checked=E[45].mysql),q[1]&16384&&(k.checked=E[45].mongo)},d(E){E&&$(e),D=!1,Ue(T)}}}function So(l){let e,t,n,s,r,o=(l[54]||"app-project-env.domain.com")+"",c,i,u,f,d,v,h,m,g,y,C,k,z,D,T;return{c(){e=_("div"),t=_("div"),n=_("label"),n.textContent="Domain Preview:",s=b(),r=_("code"),c=S(o),i=b(),u=_("div"),f=_("label"),f.textContent="Base Domain",d=b(),v=_("input"),h=b(),m=_("div"),g=_("label"),g.innerHTML='Custom Aliases <small class="svelte-8rkhbz">(optional)</small>',y=b(),C=_("input"),k=b(),z=_("small"),z.textContent="Comma-separated custom domains (requires DNS setup)",p(n,"class","svelte-8rkhbz"),p(r,"class","svelte-8rkhbz"),p(t,"class","domain-preview svelte-8rkhbz"),p(f,"for","base-domain"),p(f,"class","svelte-8rkhbz"),p(v,"id","base-domain"),p(v,"type","text"),p(v,"placeholder","example.com"),p(v,"class","svelte-8rkhbz"),p(u,"class","form-group svelte-8rkhbz"),p(g,"for","domain-aliases"),p(g,"class","svelte-8rkhbz"),p(C,"id","domain-aliases"),p(C,"type","text"),p(C,"placeholder","api.myclient.com, app.example.com"),p(C,"class","svelte-8rkhbz"),p(z,"class","svelte-8rkhbz"),p(m,"class","form-group svelte-8rkhbz"),p(e,"class","domain-config svelte-8rkhbz")},m(E,q){w(E,e,q),a(e,t),a(t,n),a(t,s),a(t,r),a(r,c),a(e,i),a(e,u),a(u,f),a(u,d),a(u,v),ne(v,l[5]),a(e,h),a(e,m),a(m,g),a(m,y),a(m,C),ne(C,l[47]),a(m,k),a(m,z),D||(T=[se(v,"input",l[118]),se(C,"input",l[119])],D=!0)},p(E,q){q[1]&8388608&&o!==(o=(E[54]||"app-project-env.domain.com")+"")&&B(c,o),q[0]&32&&v.value!==E[5]&&ne(v,E[5]),q[1]&65536&&C.value!==E[47]&&ne(C,E[47])},d(E){E&&$(e),D=!1,Ue(T)}}}function Tf(l){let e=l[37].size+"",t,n;return{c(){t=S(e),n=S(" selected")},m(s,r){w(s,t,r),w(s,n,r)},p(s,r){r[1]&64&&e!==(e=s[37].size+"")&&B(t,e)},d(s){s&&($(t),$(n))}}}function Pf(l){let e;return{c(){e=S("✓ All")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Ef(l){let e;return{c(){e=S("✕ None")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Lf(l){let e,t,n=de(l[33]),s=[];for(let o=0;o<n.length;o+=1)s[o]=Do(Xs(l,n,o));const r=o=>L(s[o],1,1,()=>{s[o]=null});return{c(){for(let o=0;o<s.length;o+=1)s[o].c();e=Ne()},m(o,c){for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(o,c);w(o,e,c),t=!0},p(o,c){if(c[1]&536870980){n=de(o[33]);let i;for(i=0;i<n.length;i+=1){const u=Xs(o,n,i);s[i]?(s[i].p(u,c),P(s[i],1)):(s[i]=Do(u),s[i].c(),P(s[i],1),s[i].m(e.parentNode,e))}for(we(),i=n.length;i<s.length;i+=1)r(i);ye()}},i(o){if(!t){for(let c=0;c<n.length;c+=1)P(s[c]);t=!0}},o(o){s=s.filter(On);for(let c=0;c<s.length;c+=1)L(s[c]);t=!1},d(o){o&&$(e),Me(s,o)}}}function Mf(l){let e,t,n=(l[4]||"any region")+"",s;return{c(){e=_("div"),t=S("No servers in "),s=S(n),p(e,"class","empty svelte-8rkhbz")},m(r,o){w(r,e,o),a(e,t),a(e,s)},p(r,o){o[0]&16&&n!==(n=(r[4]||"any region")+"")&&B(s,n)},i:ie,o:ie,d(r){r&&$(e)}}}function zo(l){let e,t,n,s,r,o=(l[156].name||"unnamed")+"",c,i,u,f=l[176]+"",d,v,h,m,g,y;function C(){return l[122](l[176])}let k=l[156].project&&qo(l);return{c(){e=_("label"),t=_("input"),s=b(),r=_("span"),c=S(o),i=b(),u=_("code"),d=S(f),v=b(),k&&k.c(),h=b(),p(t,"type","checkbox"),t.checked=n=l[37].has(l[176]),p(t,"class","svelte-8rkhbz"),p(r,"class","server-name svelte-8rkhbz"),p(u,"class","server-ip svelte-8rkhbz"),p(e,"class","server-item svelte-8rkhbz"),Ce(e,"selected",l[37].has(l[176]))},m(z,D){w(z,e,D),a(e,t),a(e,s),a(e,r),a(r,c),a(e,i),a(e,u),a(u,d),a(e,v),k&&k.m(e,null),a(e,h),m=!0,g||(y=se(t,"change",C),g=!0)},p(z,D){l=z,(!m||D[1]&68&&n!==(n=l[37].has(l[176])))&&(t.checked=n),(!m||D[1]&4)&&o!==(o=(l[156].name||"unnamed")+"")&&B(c,o),(!m||D[1]&4)&&f!==(f=l[176]+"")&&B(d,f),l[156].project?k?(k.p(l,D),D[1]&4&&P(k,1)):(k=qo(l),k.c(),P(k,1),k.m(e,h)):k&&(we(),L(k,1,1,()=>{k=null}),ye()),(!m||D[1]&68)&&Ce(e,"selected",l[37].has(l[176]))},i(z){m||(P(k),m=!0)},o(z){L(k),m=!1},d(z){z&&$(e),k&&k.d(),g=!1,y()}}}function qo(l){let e,t;return e=new Re({props:{variant:"info",$$slots:{default:[jf]},$$scope:{ctx:l}}}),{c(){x(e.$$.fragment)},m(n,s){Z(e,n,s),t=!0},p(n,s){const r={};s[1]&4|s[6]&4&&(r.$$scope={dirty:s,ctx:n}),e.$set(r)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){X(e,n)}}}function jf(l){let e=l[156].project+"",t;return{c(){t=S(e)},m(n,s){w(n,t,s)},p(n,s){s[1]&4&&e!==(e=n[156].project+"")&&B(t,e)},d(n){n&&$(t)}}}function Do(l){let e,t,n=l[176]&&zo(l);return{c(){n&&n.c(),e=Ne()},m(s,r){n&&n.m(s,r),w(s,e,r),t=!0},p(s,r){s[176]?n?(n.p(s,r),r[1]&4&&P(n,1)):(n=zo(s),n.c(),P(n,1),n.m(e.parentNode,e)):n&&(we(),L(n,1,1,()=>{n=null}),ye())},i(s){t||(P(n),t=!0)},o(s){L(n),t=!1},d(s){s&&$(e),n&&n.d(s)}}}function To(l){let e,t;return e=new Re({props:{variant:"warning",$$slots:{default:[Nf]},$$scope:{ctx:l}}}),{c(){x(e.$$.fragment)},m(n,s){Z(e,n,s),t=!0},p(n,s){const r={};s[1]&128|s[6]&4&&(r.$$scope={dirty:s,ctx:n}),e.$set(r)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){X(e,n)}}}function Nf(l){let e,t;return{c(){e=S(l[38]),t=S(" new")},m(n,s){w(n,e,s),w(n,t,s)},p(n,s){s[1]&128&&B(e,n[38])},d(n){n&&($(e),$(t))}}}function Po(l){let e,t,n,s,r,o,c,i,u,f,d,v,h,m,g,y,C,k,z,D,T,E,q,j,R,O,F,I,V,J,U,A=l[38]>0&&Eo(),M=de(l[6]||[]),G=[];for(let W=0;W<M.length;W+=1)G[W]=Lo(Zs(l,M,W));let N=de(l[31]||[]),H=[];for(let W=0;W<N.length;W+=1)H[W]=Mo(Qs(l,N,W));let ee=de(l[32]||[]),Q=[];for(let W=0;W<ee.length;W+=1)Q[W]=jo(Ks(l,ee,W));let te=l[38]>0&&!l[3]&&No();return{c(){e=_("div"),t=_("div"),n=_("div"),s=_("label"),r=S("Snapshot "),A&&A.c(),o=b(),c=_("select"),i=_("option"),i.textContent="Select snapshot...";for(let W=0;W<G.length;W+=1)G[W].c();u=b(),f=_("div"),d=_("label"),d.textContent="Region",v=b(),h=_("select");for(let W=0;W<H.length;W+=1)H[W].c();m=b(),g=_("div"),y=_("label"),y.textContent="Size",C=b(),k=_("select");for(let W=0;W<Q.length;W+=1)Q[W].c();z=b(),D=_("div"),T=_("span"),T.textContent="New servers to provision:",E=b(),q=_("div"),j=_("button"),j.textContent="−",R=b(),O=_("input"),F=b(),I=_("button"),I.textContent="+",V=b(),te&&te.c(),p(s,"for","snapshot-select"),p(s,"class","svelte-8rkhbz"),i.__value="",ne(i,i.__value),p(c,"id","snapshot-select"),p(c,"class","svelte-8rkhbz"),l[3]===void 0&&Ve(()=>l[124].call(c)),p(n,"class","form-group svelte-8rkhbz"),p(d,"for","region-select"),p(d,"class","svelte-8rkhbz"),p(h,"id","region-select"),p(h,"class","svelte-8rkhbz"),l[4]===void 0&&Ve(()=>l[125].call(h)),p(f,"class","form-group svelte-8rkhbz"),p(y,"for","size-select"),p(y,"class","svelte-8rkhbz"),p(k,"id","size-select"),p(k,"class","svelte-8rkhbz"),l[30]===void 0&&Ve(()=>l[126].call(k)),p(g,"class","form-group svelte-8rkhbz"),p(t,"class","form-row three-col svelte-8rkhbz"),p(j,"type","button"),p(j,"class","svelte-8rkhbz"),p(O,"type","number"),p(O,"min","0"),p(O,"max","10"),p(O,"class","svelte-8rkhbz"),p(I,"type","button"),p(I,"class","svelte-8rkhbz"),p(q,"class","number-spinner svelte-8rkhbz"),p(D,"class","new-servers svelte-8rkhbz"),p(e,"class","section-content provisioning-config svelte-8rkhbz")},m(W,le){w(W,e,le),a(e,t),a(t,n),a(n,s),a(s,r),A&&A.m(s,null),a(n,o),a(n,c),a(c,i);for(let K=0;K<G.length;K+=1)G[K]&&G[K].m(c,null);Le(c,l[3],!0),a(t,u),a(t,f),a(f,d),a(f,v),a(f,h);for(let K=0;K<H.length;K+=1)H[K]&&H[K].m(h,null);Le(h,l[4],!0),a(t,m),a(t,g),a(g,y),a(g,C),a(g,k);for(let K=0;K<Q.length;K+=1)Q[K]&&Q[K].m(k,null);Le(k,l[30],!0),a(e,z),a(e,D),a(D,T),a(D,E),a(D,q),a(q,j),a(q,R),a(q,O),ne(O,l[38]),a(q,F),a(q,I),a(D,V),te&&te.m(D,null),J||(U=[se(c,"change",l[124]),se(h,"change",l[125]),se(k,"change",l[126]),se(j,"click",l[127]),se(O,"input",l[128]),se(I,"click",l[129])],J=!0)},p(W,le){if(W[38]>0?A||(A=Eo(),A.c(),A.m(s,null)):A&&(A.d(1),A=null),le[0]&64){M=de(W[6]||[]);let K;for(K=0;K<M.length;K+=1){const oe=Zs(W,M,K);G[K]?G[K].p(oe,le):(G[K]=Lo(oe),G[K].c(),G[K].m(c,null))}for(;K<G.length;K+=1)G[K].d(1);G.length=M.length}if(le[0]&72&&Le(c,W[3]),le[1]&1){N=de(W[31]||[]);let K;for(K=0;K<N.length;K+=1){const oe=Qs(W,N,K);H[K]?H[K].p(oe,le):(H[K]=Mo(oe),H[K].c(),H[K].m(h,null))}for(;K<H.length;K+=1)H[K].d(1);H.length=N.length}if(le[0]&16|le[1]&1&&Le(h,W[4]),le[1]&2){ee=de(W[32]||[]);let K;for(K=0;K<ee.length;K+=1){const oe=Ks(W,ee,K);Q[K]?Q[K].p(oe,le):(Q[K]=jo(oe),Q[K].c(),Q[K].m(k,null))}for(;K<Q.length;K+=1)Q[K].d(1);Q.length=ee.length}le[0]&1073741824|le[1]&2&&Le(k,W[30]),le[1]&128&&Ot(O.value)!==W[38]&&ne(O,W[38]),W[38]>0&&!W[3]?te||(te=No(),te.c(),te.m(D,null)):te&&(te.d(1),te=null)},d(W){W&&$(e),A&&A.d(),Me(G,W),Me(H,W),Me(Q,W),te&&te.d(),J=!1,Ue(U)}}}function Eo(l){let e;return{c(){e=S("*")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Lo(l){let e,t=l[173].name+"",n,s;return{c(){e=_("option"),n=S(t),e.__value=s=l[173].id,ne(e,e.__value)},m(r,o){w(r,e,o),a(e,n)},p(r,o){o[0]&64&&t!==(t=r[173].name+"")&&B(n,t),o[0]&64&&s!==(s=r[173].id)&&(e.__value=s,ne(e,e.__value))},d(r){r&&$(e)}}}function Mo(l){let e,t=(l[170].name||l[170].slug)+"",n,s;return{c(){e=_("option"),n=S(t),e.__value=s=l[170].slug,ne(e,e.__value)},m(r,o){w(r,e,o),a(e,n)},p(r,o){o[1]&1&&t!==(t=(r[170].name||r[170].slug)+"")&&B(n,t),o[1]&1&&s!==(s=r[170].slug)&&(e.__value=s,ne(e,e.__value))},d(r){r&&$(e)}}}function jo(l){let e,t=(l[167].description||l[167].slug)+"",n,s;return{c(){e=_("option"),n=S(t),e.__value=s=l[167].slug,ne(e,e.__value)},m(r,o){w(r,e,o),a(e,n)},p(r,o){o[1]&2&&t!==(t=(r[167].description||r[167].slug)+"")&&B(n,t),o[1]&2&&s!==(s=r[167].slug)&&(e.__value=s,ne(e,e.__value))},d(r){r&&$(e)}}}function No(l){let e;return{c(){e=_("small"),e.textContent="⚠️ Select a snapshot for new servers",p(e,"class","warning svelte-8rkhbz")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Rf(l){let e;return{c(){e=S("🚀 Deploy")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Af(l){let e;return{c(){e=S("Deploying...")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Of(l){let e;function t(r,o){return r[34]?Af:Rf}let n=t(l),s=n(l);return{c(){s.c(),e=Ne()},m(r,o){s.m(r,o),w(r,e,o)},p(r,o){n!==(n=t(r))&&(s.d(1),s=n(r),s&&(s.c(),s.m(e.parentNode,e)))},d(r){r&&$(e),s.d(r)}}}function Ff(l){let e,t,n,s,r,o,c,i,u,f,d,v,h,m,g,y,C,k,z,D,T,E,q,j,R,O,F,I,V,J,U,A,M,G,N,H,ee,Q,te,W,le,K,oe,$e,_e,re,he,be,ue,pe,ce,De,ke,Ae,$t,ot,ze,ve,Oe,We,He,nt,Ge,Qt,qt,at,It,wt=l[51]?"▼":"▶",Pl,El,cl,fl,Ll=l[10].trim(),Vl,Yl,Dt,yt,ul,pl=l[52]?"▼":"▶",Ml,jl,_l,dl,Nl=l[46]||Object.values(l[45]).some(Qo),vl,Kl,Et,Zt,Lt,ml,hl,Mt,Ql,rt,jt,Zl,Tt,Xl,sl,bt,Ct,xl,Pt,St,gl,bl=l[53]?"▼":"▶",Rl,en,Al,tn,ln,nn,Ut,ct,Ol,Fl,sn,Xt=de(l[55]),it=[];for(let fe=0;fe<Xt.length;fe+=1)it[fe]=lo(to(l,Xt,fe));T=new qe({props:{variant:"ghost",size:"sm",title:"Load saved config",$$slots:{default:[vf]},$$scope:{ctx:l}}}),T.$on("click",l[56]),q=new qe({props:{variant:"ghost",size:"sm",title:"Save current settings",$$slots:{default:[mf]},$$scope:{ctx:l}}}),q.$on("click",l[57]),R=new qe({props:{variant:"ghost",size:"sm",title:"Edit exclusion patterns",$$slots:{default:[hf]},$$scope:{ctx:l}}}),R.$on("click",l[58]);let ft=l[48]&&no(l),Ke=l[49]&&so(l),Qe=l[8]==="code"&&oo(l),Ze=l[8]==="git"&&_o(l),ut=l[8]==="image"&&ho(l),pt=l[8]==="image_file"&&go(l),Xe=Ll&&ko(l),_t=l[51]&&$o(l),lt=Nl&&wo(l),dt=l[52]&&yo(l);Mt=new Re({props:{variant:"info",$$slots:{default:[Tf]},$$scope:{ctx:l}}}),jt=new qe({props:{variant:"ghost",size:"sm",$$slots:{default:[Pf]},$$scope:{ctx:l}}}),jt.$on("click",l[120]),Tt=new qe({props:{variant:"ghost",size:"sm",$$slots:{default:[Ef]},$$scope:{ctx:l}}}),Tt.$on("click",l[121]);const on=[Mf,Lf],Nt=[];function rn(fe,Se){return!fe[33]||fe[33].length===0?0:1}bt=rn(l),Ct=Nt[bt]=on[bt](l);let xe=l[38]>0&&To(l),vt=l[53]&&Po(l);return Ut=new qe({props:{variant:"primary",type:"submit",disabled:l[34],$$slots:{default:[Of]},$$scope:{ctx:l}}}),Ol=Ki(l[83][0]),{c(){e=_("form"),t=_("div"),n=_("div"),s=_("label"),s.textContent="App Name *",r=b(),o=_("input"),c=b(),i=_("div"),u=_("label"),u.textContent="Project",f=b(),d=_("input"),v=b(),h=_("div"),m=_("label"),m.textContent="Environment",g=b(),y=_("select");for(let fe=0;fe<it.length;fe+=1)it[fe].c();C=b(),k=_("div"),z=_("span"),z.textContent="Config:",D=b(),x(T.$$.fragment),E=b(),x(q.$$.fragment),j=b(),x(R.$$.fragment),O=b(),ft&&ft.c(),F=b(),Ke&&Ke.c(),I=b(),V=_("div"),J=_("label"),J.innerHTML='Tags <small class="svelte-8rkhbz">(comma-separated)</small>',U=b(),A=_("input"),M=b(),G=_("div"),N=_("label"),N.textContent="Source Type *",H=b(),ee=_("div"),Q=_("label"),te=_("input"),W=S(`
              📁 Local Code`),le=b(),K=_("label"),oe=_("input"),$e=S(`
              📦 Git Repo`),_e=b(),re=_("label"),he=_("input"),be=S(`
              🐳 Registry`),ue=b(),pe=_("label"),ce=_("input"),De=S(`
              📦 Local Image`),ke=b(),Qe&&Qe.c(),Ae=b(),Ze&&Ze.c(),$t=b(),ut&&ut.c(),ot=b(),pt&&pt.c(),ze=b(),ve=_("div"),Oe=_("label"),Oe.textContent="App Port",We=b(),He=_("input"),nt=b(),Ge=_("small"),Ge.textContent="Port your app listens on inside the container",Qt=b(),qt=_("div"),at=_("button"),It=_("span"),Pl=S(wt),El=b(),cl=_("span"),cl.textContent="Environment Variables",fl=b(),Xe&&Xe.c(),Vl=b(),_t&&_t.c(),Yl=b(),Dt=_("div"),yt=_("button"),ul=_("span"),Ml=S(pl),jl=b(),_l=_("span"),_l.textContent="🔧 Service Configuration",dl=b(),lt&&lt.c(),vl=b(),dt&&dt.c(),Kl=b(),Et=_("div"),Zt=_("div"),Lt=_("div"),ml=_("span"),ml.textContent="🖥️ Servers",hl=b(),x(Mt.$$.fragment),Ql=b(),rt=_("div"),x(jt.$$.fragment),Zl=b(),x(Tt.$$.fragment),Xl=b(),sl=_("div"),Ct.c(),xl=b(),Pt=_("div"),St=_("button"),gl=_("span"),Rl=S(bl),en=b(),Al=_("span"),Al.textContent="➕ New Server Provisioning",tn=b(),xe&&xe.c(),ln=b(),vt&&vt.c(),nn=b(),x(Ut.$$.fragment),p(s,"for","deploy-name"),p(s,"class","svelte-8rkhbz"),p(o,"id","deploy-name"),p(o,"type","text"),p(o,"placeholder","my-app"),o.required=!0,p(o,"pattern","[-a-z0-9]+"),p(o,"title","Lowercase letters, numbers, hyphens only"),p(o,"class","svelte-8rkhbz"),p(n,"class","form-group svelte-8rkhbz"),p(u,"for","deploy-project"),p(u,"class","svelte-8rkhbz"),p(d,"id","deploy-project"),p(d,"type","text"),p(d,"placeholder","my-project"),p(d,"pattern","[-a-z0-9]*"),p(d,"class","svelte-8rkhbz"),p(i,"class","form-group svelte-8rkhbz"),p(m,"for","deploy-env"),p(m,"class","svelte-8rkhbz"),p(y,"id","deploy-env"),p(y,"class","svelte-8rkhbz"),l[2]===void 0&&Ve(()=>l[79].call(y)),p(h,"class","form-group svelte-8rkhbz"),p(t,"class","form-row three-col svelte-8rkhbz"),p(z,"class","config-label svelte-8rkhbz"),p(k,"class","config-bar svelte-8rkhbz"),p(J,"for","deploy-tags"),p(J,"class","svelte-8rkhbz"),p(A,"id","deploy-tags"),p(A,"type","text"),p(A,"placeholder","api, backend, v2"),p(A,"class","svelte-8rkhbz"),p(V,"class","form-group svelte-8rkhbz"),p(N,"class","svelte-8rkhbz"),p(te,"type","radio"),te.__value="code",ne(te,te.__value),p(te,"class","svelte-8rkhbz"),p(Q,"class","source-option svelte-8rkhbz"),Ce(Q,"active",l[8]==="code"),p(oe,"type","radio"),oe.__value="git",ne(oe,oe.__value),p(oe,"class","svelte-8rkhbz"),p(K,"class","source-option svelte-8rkhbz"),Ce(K,"active",l[8]==="git"),p(he,"type","radio"),he.__value="image",ne(he,he.__value),p(he,"class","svelte-8rkhbz"),p(re,"class","source-option svelte-8rkhbz"),Ce(re,"active",l[8]==="image"),p(ce,"type","radio"),ce.__value="image_file",ne(ce,ce.__value),p(ce,"class","svelte-8rkhbz"),p(pe,"class","source-option svelte-8rkhbz"),Ce(pe,"active",l[8]==="image_file"),p(ee,"class","source-radio-group svelte-8rkhbz"),p(G,"class","form-group svelte-8rkhbz"),p(Oe,"for","deploy-port"),p(Oe,"class","svelte-8rkhbz"),p(He,"id","deploy-port"),p(He,"type","number"),p(He,"min","1"),p(He,"max","65535"),p(He,"class","svelte-8rkhbz"),p(Ge,"class","svelte-8rkhbz"),p(ve,"class","form-group svelte-8rkhbz"),p(It,"class","toggle-icon svelte-8rkhbz"),p(at,"type","button"),p(at,"class","section-toggle svelte-8rkhbz"),p(qt,"class","collapsible-section svelte-8rkhbz"),Ce(qt,"expanded",l[51]),p(ul,"class","toggle-icon svelte-8rkhbz"),p(yt,"type","button"),p(yt,"class","section-toggle svelte-8rkhbz"),p(Dt,"class","collapsible-section svelte-8rkhbz"),Ce(Dt,"expanded",l[52]),p(Lt,"class","server-title svelte-8rkhbz"),p(rt,"class","server-actions svelte-8rkhbz"),p(Zt,"class","server-header svelte-8rkhbz"),p(sl,"class","server-list svelte-8rkhbz"),p(gl,"class","toggle-icon svelte-8rkhbz"),p(St,"type","button"),p(St,"class","section-toggle svelte-8rkhbz"),p(Pt,"class","collapsible-section svelte-8rkhbz"),Ce(Pt,"expanded",l[53]),p(Et,"class","server-selection svelte-8rkhbz"),Ol.p(te,oe,he,ce)},m(fe,Se){w(fe,e,Se),a(e,t),a(t,n),a(n,s),a(n,r),a(n,o),ne(o,l[0]),a(t,c),a(t,i),a(i,u),a(i,f),a(i,d),ne(d,l[1]),a(t,v),a(t,h),a(h,m),a(h,g),a(h,y);for(let Ht=0;Ht<it.length;Ht+=1)it[Ht]&&it[Ht].m(y,null);Le(y,l[2],!0),a(e,C),a(e,k),a(k,z),a(k,D),Z(T,k,null),a(k,E),Z(q,k,null),a(k,j),Z(R,k,null),a(k,O),ft&&ft.m(k,null),a(e,F),Ke&&Ke.m(e,null),a(e,I),a(e,V),a(V,J),a(V,U),a(V,A),ne(A,l[7]),a(e,M),a(e,G),a(G,N),a(G,H),a(G,ee),a(ee,Q),a(Q,te),te.checked=te.__value===l[8],a(Q,W),a(ee,le),a(ee,K),a(K,oe),oe.checked=oe.__value===l[8],a(K,$e),a(ee,_e),a(ee,re),a(re,he),he.checked=he.__value===l[8],a(re,be),a(ee,ue),a(ee,pe),a(pe,ce),ce.checked=ce.__value===l[8],a(pe,De),a(e,ke),Qe&&Qe.m(e,null),a(e,Ae),Ze&&Ze.m(e,null),a(e,$t),ut&&ut.m(e,null),a(e,ot),pt&&pt.m(e,null),a(e,ze),a(e,ve),a(ve,Oe),a(ve,We),a(ve,He),ne(He,l[9]),a(ve,nt),a(ve,Ge),a(e,Qt),a(e,qt),a(qt,at),a(at,It),a(It,Pl),a(at,El),a(at,cl),a(at,fl),Xe&&Xe.m(at,null),a(qt,Vl),_t&&_t.m(qt,null),a(e,Yl),a(e,Dt),a(Dt,yt),a(yt,ul),a(ul,Ml),a(yt,jl),a(yt,_l),a(yt,dl),lt&&lt.m(yt,null),a(Dt,vl),dt&&dt.m(Dt,null),a(e,Kl),a(e,Et),a(Et,Zt),a(Zt,Lt),a(Lt,ml),a(Lt,hl),Z(Mt,Lt,null),a(Zt,Ql),a(Zt,rt),Z(jt,rt,null),a(rt,Zl),Z(Tt,rt,null),a(Et,Xl),a(Et,sl),Nt[bt].m(sl,null),a(Et,xl),a(Et,Pt),a(Pt,St),a(St,gl),a(gl,Rl),a(St,en),a(St,Al),a(St,tn),xe&&xe.m(St,null),a(Pt,ln),vt&&vt.m(Pt,null),a(e,nn),Z(Ut,e,null),ct=!0,Fl||(sn=[se(o,"input",l[77]),se(d,"input",l[78]),se(y,"change",l[79]),se(A,"input",l[81]),se(te,"change",l[82]),se(oe,"change",l[84]),se(he,"change",l[85]),se(ce,"change",l[86]),se(He,"input",l[107]),se(at,"click",l[108]),se(yt,"click",l[110]),se(St,"click",l[123]),se(e,"submit",l[73])],Fl=!0)},p(fe,Se){if(Se[0]&1&&o.value!==fe[0]&&ne(o,fe[0]),Se[0]&2&&d.value!==fe[1]&&ne(d,fe[1]),Se[1]&16777216){Xt=de(fe[55]);let kt;for(kt=0;kt<Xt.length;kt+=1){const _n=to(fe,Xt,kt);it[kt]?it[kt].p(_n,Se):(it[kt]=lo(_n),it[kt].c(),it[kt].m(y,null))}for(;kt<it.length;kt+=1)it[kt].d(1);it.length=Xt.length}Se[0]&4|Se[1]&16777216&&Le(y,fe[2]);const Ht={};Se[6]&4&&(Ht.$$scope={dirty:Se,ctx:fe}),T.$set(Ht);const an={};Se[6]&4&&(an.$$scope={dirty:Se,ctx:fe}),q.$set(an);const cn={};Se[6]&4&&(cn.$$scope={dirty:Se,ctx:fe}),R.$set(cn),fe[48]?ft?ft.p(fe,Se):(ft=no(fe),ft.c(),ft.m(k,null)):ft&&(ft.d(1),ft=null),fe[49]?Ke?(Ke.p(fe,Se),Se[1]&262144&&P(Ke,1)):(Ke=so(fe),Ke.c(),P(Ke,1),Ke.m(e,I)):Ke&&(we(),L(Ke,1,1,()=>{Ke=null}),ye()),Se[0]&128&&A.value!==fe[7]&&ne(A,fe[7]),Se[0]&256&&(te.checked=te.__value===fe[8]),(!ct||Se[0]&256)&&Ce(Q,"active",fe[8]==="code"),Se[0]&256&&(oe.checked=oe.__value===fe[8]),(!ct||Se[0]&256)&&Ce(K,"active",fe[8]==="git"),Se[0]&256&&(he.checked=he.__value===fe[8]),(!ct||Se[0]&256)&&Ce(re,"active",fe[8]==="image"),Se[0]&256&&(ce.checked=ce.__value===fe[8]),(!ct||Se[0]&256)&&Ce(pe,"active",fe[8]==="image_file"),fe[8]==="code"?Qe?(Qe.p(fe,Se),Se[0]&256&&P(Qe,1)):(Qe=oo(fe),Qe.c(),P(Qe,1),Qe.m(e,Ae)):Qe&&(we(),L(Qe,1,1,()=>{Qe=null}),ye()),fe[8]==="git"?Ze?(Ze.p(fe,Se),Se[0]&256&&P(Ze,1)):(Ze=_o(fe),Ze.c(),P(Ze,1),Ze.m(e,$t)):Ze&&(we(),L(Ze,1,1,()=>{Ze=null}),ye()),fe[8]==="image"?ut?ut.p(fe,Se):(ut=ho(fe),ut.c(),ut.m(e,ot)):ut&&(ut.d(1),ut=null),fe[8]==="image_file"?pt?pt.p(fe,Se):(pt=go(fe),pt.c(),pt.m(e,ze)):pt&&(pt.d(1),pt=null),Se[0]&512&&Ot(He.value)!==fe[9]&&ne(He,fe[9]),(!ct||Se[1]&1048576)&&wt!==(wt=fe[51]?"▼":"▶")&&B(Pl,wt),Se[0]&1024&&(Ll=fe[10].trim()),Ll?Xe?(Xe.p(fe,Se),Se[0]&1024&&P(Xe,1)):(Xe=ko(fe),Xe.c(),P(Xe,1),Xe.m(at,null)):Xe&&(we(),L(Xe,1,1,()=>{Xe=null}),ye()),fe[51]?_t?_t.p(fe,Se):(_t=$o(fe),_t.c(),_t.m(qt,null)):_t&&(_t.d(1),_t=null),(!ct||Se[1]&1048576)&&Ce(qt,"expanded",fe[51]),(!ct||Se[1]&2097152)&&pl!==(pl=fe[52]?"▼":"▶")&&B(Ml,pl),Se[1]&49152&&(Nl=fe[46]||Object.values(fe[45]).some(Qo)),Nl?lt?Se[1]&49152&&P(lt,1):(lt=wo(fe),lt.c(),P(lt,1),lt.m(yt,null)):lt&&(we(),L(lt,1,1,()=>{lt=null}),ye()),fe[52]?dt?dt.p(fe,Se):(dt=yo(fe),dt.c(),dt.m(Dt,null)):dt&&(dt.d(1),dt=null),(!ct||Se[1]&2097152)&&Ce(Dt,"expanded",fe[52]);const fn={};Se[1]&64|Se[6]&4&&(fn.$$scope={dirty:Se,ctx:fe}),Mt.$set(fn);const un={};Se[6]&4&&(un.$$scope={dirty:Se,ctx:fe}),jt.$set(un);const pn={};Se[6]&4&&(pn.$$scope={dirty:Se,ctx:fe}),Tt.$set(pn);let Bl=bt;bt=rn(fe),bt===Bl?Nt[bt].p(fe,Se):(we(),L(Nt[Bl],1,1,()=>{Nt[Bl]=null}),ye(),Ct=Nt[bt],Ct?Ct.p(fe,Se):(Ct=Nt[bt]=on[bt](fe),Ct.c()),P(Ct,1),Ct.m(sl,null)),(!ct||Se[1]&4194304)&&bl!==(bl=fe[53]?"▼":"▶")&&B(Rl,bl),fe[38]>0?xe?(xe.p(fe,Se),Se[1]&128&&P(xe,1)):(xe=To(fe),xe.c(),P(xe,1),xe.m(St,null)):xe&&(we(),L(xe,1,1,()=>{xe=null}),ye()),fe[53]?vt?vt.p(fe,Se):(vt=Po(fe),vt.c(),vt.m(Pt,null)):vt&&(vt.d(1),vt=null),(!ct||Se[1]&4194304)&&Ce(Pt,"expanded",fe[53]);const Il={};Se[1]&8&&(Il.disabled=fe[34]),Se[1]&8|Se[6]&4&&(Il.$$scope={dirty:Se,ctx:fe}),Ut.$set(Il)},i(fe){ct||(P(T.$$.fragment,fe),P(q.$$.fragment,fe),P(R.$$.fragment,fe),P(Ke),P(Qe),P(Ze),P(Xe),P(lt),P(Mt.$$.fragment,fe),P(jt.$$.fragment,fe),P(Tt.$$.fragment,fe),P(Ct),P(xe),P(Ut.$$.fragment,fe),ct=!0)},o(fe){L(T.$$.fragment,fe),L(q.$$.fragment,fe),L(R.$$.fragment,fe),L(Ke),L(Qe),L(Ze),L(Xe),L(lt),L(Mt.$$.fragment,fe),L(jt.$$.fragment,fe),L(Tt.$$.fragment,fe),L(Ct),L(xe),L(Ut.$$.fragment,fe),ct=!1},d(fe){fe&&$(e),Me(it,fe),X(T),X(q),X(R),ft&&ft.d(),Ke&&Ke.d(),Qe&&Qe.d(),Ze&&Ze.d(),ut&&ut.d(),pt&&pt.d(),Xe&&Xe.d(),_t&&_t.d(),lt&&lt.d(),dt&&dt.d(),X(Mt),X(jt),X(Tt),Nt[bt].d(),xe&&xe.d(),vt&&vt.d(),X(Ut),Ol.r(),Fl=!1,Ue(sn)}}}function Bf(l){let e;return{c(){e=_("div"),e.innerHTML='<p>No deployment in progress</p> <p class="hint svelte-8rkhbz">Fill in the form and click Deploy to start</p>',p(e,"class","empty-state svelte-8rkhbz")},m(t,n){w(t,e,n)},p:ie,d(t){t&&$(e)}}}function If(l){let e,t,n,s,r,o,c=de(l[36]),i=[];for(let v=0;v<c.length;v+=1)i[v]=Ro(Ys(l,c,v));function u(v,h){if(v[39]&&v[39].success)return Hf;if(v[39]&&!v[39].success)return Uf}let f=u(l),d=f&&f(l);return{c(){e=_("div"),t=_("div"),n=_("div"),s=b(),r=_("div");for(let v=0;v<i.length;v+=1)i[v].c();o=b(),d&&d.c(),p(n,"class","progress-fill svelte-8rkhbz"),Ie(n,"width",l[35]+"%"),p(t,"class","progress-bar svelte-8rkhbz"),p(r,"class","log-output svelte-8rkhbz"),p(e,"class","progress-section svelte-8rkhbz")},m(v,h){w(v,e,h),a(e,t),a(t,n),a(e,s),a(e,r);for(let m=0;m<i.length;m+=1)i[m]&&i[m].m(r,null);a(e,o),d&&d.m(e,null)},p(v,h){if(h[1]&16&&Ie(n,"width",v[35]+"%"),h[1]&32){c=de(v[36]);let m;for(m=0;m<c.length;m+=1){const g=Ys(v,c,m);i[m]?i[m].p(g,h):(i[m]=Ro(g),i[m].c(),i[m].m(r,null))}for(;m<i.length;m+=1)i[m].d(1);i.length=c.length}f===(f=u(v))&&d?d.p(v,h):(d&&d.d(1),d=f&&f(v),d&&(d.c(),d.m(e,null)))},d(v){v&&$(e),Me(i,v),d&&d.d()}}}function Ro(l){let e,t,n=l[75].time.toLocaleTimeString()+"",s,r,o,c=Yo(l[75].message)+"",i,u;return{c(){e=_("div"),t=_("span"),s=S(n),r=b(),o=new Pa(!1),i=b(),p(t,"class","log-time svelte-8rkhbz"),o.a=i,p(e,"class",u="log-line "+l[75].type+" svelte-8rkhbz")},m(f,d){w(f,e,d),a(e,t),a(t,s),a(e,r),o.m(c,e),a(e,i)},p(f,d){d[1]&32&&n!==(n=f[75].time.toLocaleTimeString()+"")&&B(s,n),d[1]&32&&c!==(c=Yo(f[75].message)+"")&&o.p(c),d[1]&32&&u!==(u="log-line "+f[75].type+" svelte-8rkhbz")&&p(e,"class",u)},d(f){f&&$(e)}}}function Uf(l){let e,t,n,s,r,o=l[2].toUpperCase()+"",c,i,u,f=l[39].error&&Ao(l);function d(m,g){return m[39].servers&&m[39].servers.length>0?Wf:Gf}let v=d(l),h=v(l);return{c(){e=_("div"),t=_("div"),n=_("h4"),n.textContent="❌ Deployment Failed",s=b(),r=_("span"),c=S(o),i=b(),f&&f.c(),u=b(),h.c(),p(n,"class","svelte-8rkhbz"),p(r,"class","env-badge svelte-8rkhbz"),p(t,"class","result-header svelte-8rkhbz"),p(e,"class","deploy-failure-box svelte-8rkhbz")},m(m,g){w(m,e,g),a(e,t),a(t,n),a(t,s),a(t,r),a(r,c),a(e,i),f&&f.m(e,null),a(e,u),h.m(e,null)},p(m,g){g[0]&4&&o!==(o=m[2].toUpperCase()+"")&&B(c,o),m[39].error?f?f.p(m,g):(f=Ao(m),f.c(),f.m(e,u)):f&&(f.d(1),f=null),v===(v=d(m))&&h?h.p(m,g):(h.d(1),h=v(m),h&&(h.c(),h.m(e,null)))},d(m){m&&$(e),f&&f.d(),h.d()}}}function Hf(l){let e,t,n,s,r,o=l[2].toUpperCase()+"",c,i,u,f=l[39].domain&&Bo(l),d=l[39].servers&&l[39].servers.length>0&&Io(l);return{c(){e=_("div"),t=_("div"),n=_("h4"),n.textContent="✅ Deployment Complete",s=b(),r=_("span"),c=S(o),i=b(),f&&f.c(),u=b(),d&&d.c(),p(n,"class","svelte-8rkhbz"),p(r,"class","env-badge svelte-8rkhbz"),p(t,"class","result-header svelte-8rkhbz"),p(e,"class","deploy-success-box svelte-8rkhbz")},m(v,h){w(v,e,h),a(e,t),a(t,n),a(t,s),a(t,r),a(r,c),a(e,i),f&&f.m(e,null),a(e,u),d&&d.m(e,null)},p(v,h){h[0]&4&&o!==(o=v[2].toUpperCase()+"")&&B(c,o),v[39].domain?f?f.p(v,h):(f=Bo(v),f.c(),f.m(e,u)):f&&(f.d(1),f=null),v[39].servers&&v[39].servers.length>0?d?d.p(v,h):(d=Io(v),d.c(),d.m(e,null)):d&&(d.d(1),d=null)},d(v){v&&$(e),f&&f.d(),d&&d.d()}}}function Ao(l){let e,t=l[39].error+"",n;return{c(){e=_("p"),n=S(t)},m(s,r){w(s,e,r),a(e,n)},p(s,r){r[1]&256&&t!==(t=s[39].error+"")&&B(n,t)},d(s){s&&$(e)}}}function Gf(l){let e;return{c(){e=_("p"),e.textContent="No server details available",Ie(e,"margin-top","8px"),Ie(e,"opacity","0.8")},m(t,n){w(t,e,n)},p:ie,d(t){t&&$(e)}}}function Wf(l){let e,t,n,s,r=de(l[39].servers),o=[];for(let c=0;c<r.length;c+=1)o[c]=Fo(Ws(l,r,c));return{c(){e=_("div"),t=_("span"),t.textContent="Server Status:",n=b(),s=_("div");for(let c=0;c<o.length;c+=1)o[c].c();p(t,"class","result-label svelte-8rkhbz"),p(s,"class","server-links svelte-8rkhbz"),p(e,"class","result-section svelte-8rkhbz"),Ie(e,"margin-top","12px")},m(c,i){w(c,e,i),a(e,t),a(e,n),a(e,s);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(s,null)},p(c,i){if(i[0]&1|i[1]&256){r=de(c[39].servers);let u;for(u=0;u<r.length;u+=1){const f=Ws(c,r,u);o[u]?o[u].p(f,i):(o[u]=Fo(f),o[u].c(),o[u].m(s,null))}for(;u<o.length;u+=1)o[u].d(1);o.length=r.length}},d(c){c&&$(e),Me(o,c)}}}function Jf(l){let e,t=l[156].ip+"",n,s,r=l[156].error&&Oo(l);return{c(){e=S("❌ "),n=S(t),r&&r.c(),s=Ne()},m(o,c){w(o,e,c),w(o,n,c),r&&r.m(o,c),w(o,s,c)},p(o,c){c[1]&256&&t!==(t=o[156].ip+"")&&B(n,t),o[156].error?r?r.p(o,c):(r=Oo(o),r.c(),r.m(s.parentNode,s)):r&&(r.d(1),r=null)},d(o){o&&($(e),$(n),$(s)),r&&r.d(o)}}}function Vf(l){let e,t=l[156].ip+"",n;return{c(){e=S("✅ "),n=S(t)},m(s,r){w(s,e,r),w(s,n,r)},p(s,r){r[1]&256&&t!==(t=s[156].ip+"")&&B(n,t)},d(s){s&&($(e),$(n))}}}function Oo(l){let e,t=l[156].error+"",n;return{c(){e=S(": "),n=S(t)},m(s,r){w(s,e,r),w(s,n,r)},p(s,r){r[1]&256&&t!==(t=s[156].error+"")&&B(n,t)},d(s){s&&($(e),$(n))}}}function Fo(l){let e,t,n,s,r,o,c;function i(v,h){return v[156].success?Vf:Jf}let u=i(l),f=u(l);function d(){return l[132](l[156])}return{c(){e=_("div"),t=_("span"),f.c(),n=b(),s=_("button"),s.textContent="📋 Logs",r=b(),p(s,"class","log-btn svelte-8rkhbz"),p(e,"class","server-link-row svelte-8rkhbz")},m(v,h){w(v,e,h),a(e,t),f.m(t,null),a(e,n),a(e,s),a(e,r),o||(c=se(s,"click",d),o=!0)},p(v,h){l=v,u===(u=i(l))&&f?f.p(l,h):(f.d(1),f=u(l),f&&(f.c(),f.m(t,null)))},d(v){v&&$(e),f.d(),o=!1,c()}}}function Bo(l){let e,t,n,s,r,o=l[39].domain+"",c,i;return{c(){e=_("div"),t=_("span"),t.textContent="Domain:",n=b(),s=_("a"),r=S("https://"),c=S(o),p(t,"class","result-label svelte-8rkhbz"),p(s,"href",i="https://"+l[39].domain),p(s,"target","_blank"),p(s,"class","result-link svelte-8rkhbz"),p(e,"class","result-section svelte-8rkhbz")},m(u,f){w(u,e,f),a(e,t),a(e,n),a(e,s),a(s,r),a(s,c)},p(u,f){f[1]&256&&o!==(o=u[39].domain+"")&&B(c,o),f[1]&256&&i!==(i="https://"+u[39].domain)&&p(s,"href",i)},d(u){u&&$(e)}}}function Io(l){let e,t,n,s,r,o=l[39].servers.some(Ko),c,i=de(l[39].servers.filter(er)),u=[];for(let d=0;d<i.length;d+=1)u[d]=Uo(Vs(l,i,d));let f=o&&Ho(l);return{c(){e=_("div"),t=_("span"),t.textContent="Servers:",n=b(),s=_("div");for(let d=0;d<u.length;d+=1)u[d].c();r=b(),f&&f.c(),c=Ne(),p(t,"class","result-label svelte-8rkhbz"),p(s,"class","server-links svelte-8rkhbz"),p(e,"class","result-section svelte-8rkhbz")},m(d,v){w(d,e,v),a(e,t),a(e,n),a(e,s);for(let h=0;h<u.length;h+=1)u[h]&&u[h].m(s,null);w(d,r,v),f&&f.m(d,v),w(d,c,v)},p(d,v){if(v[0]&1|v[1]&256){i=de(d[39].servers.filter(er));let h;for(h=0;h<i.length;h+=1){const m=Vs(d,i,h);u[h]?u[h].p(m,v):(u[h]=Uo(m),u[h].c(),u[h].m(s,null))}for(;h<u.length;h+=1)u[h].d(1);u.length=i.length}v[1]&256&&(o=d[39].servers.some(Ko)),o?f?f.p(d,v):(f=Ho(d),f.c(),f.m(c.parentNode,c)):f&&(f.d(1),f=null)},d(d){d&&($(e),$(r),$(c)),Me(u,d),f&&f.d(d)}}}function Uo(l){let e,t,n=l[156].url+"",s,r,o,c,i,u,f;function d(){return l[130](l[156])}return{c(){e=_("div"),t=_("a"),s=S(n),o=b(),c=_("button"),c.textContent="📋 Logs",i=b(),p(t,"href",r=l[156].url),p(t,"target","_blank"),p(t,"class","result-link svelte-8rkhbz"),p(c,"class","log-btn svelte-8rkhbz"),p(e,"class","server-link-row svelte-8rkhbz")},m(v,h){w(v,e,h),a(e,t),a(t,s),a(e,o),a(e,c),a(e,i),u||(f=se(c,"click",d),u=!0)},p(v,h){l=v,h[1]&256&&n!==(n=l[156].url+"")&&B(s,n),h[1]&256&&r!==(r=l[156].url)&&p(t,"href",r)},d(v){v&&$(e),u=!1,f()}}}function Ho(l){let e,t,n,s=de(l[39].servers.filter(tr)),r=[];for(let o=0;o<s.length;o+=1)r[o]=Go(Js(l,s,o));return{c(){e=_("div"),t=_("span"),t.textContent="Failed Servers:",n=b();for(let o=0;o<r.length;o+=1)r[o].c();p(t,"class","result-label svelte-8rkhbz"),Ie(t,"color","#fef3c7"),p(e,"class","failed-servers-section svelte-8rkhbz")},m(o,c){w(o,e,c),a(e,t),a(e,n);for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(e,null)},p(o,c){if(c[0]&1|c[1]&256){s=de(o[39].servers.filter(tr));let i;for(i=0;i<s.length;i+=1){const u=Js(o,s,i);r[i]?r[i].p(u,c):(r[i]=Go(u),r[i].c(),r[i].m(e,null))}for(;i<r.length;i+=1)r[i].d(1);r.length=s.length}},d(o){o&&$(e),Me(r,o)}}}function Go(l){let e,t,n,s=l[156].ip+"",r,o,c=(l[156].error||"Unknown error")+"",i,u,f,d,v,h;function m(){return l[131](l[156])}return{c(){e=_("div"),t=_("span"),n=S("❌ "),r=S(s),o=S(": "),i=S(c),u=b(),f=_("button"),f.textContent="📋 Logs",d=b(),Ie(t,"color","#fef3c7"),p(f,"class","log-btn svelte-8rkhbz"),p(e,"class","server-link-row svelte-8rkhbz")},m(g,y){w(g,e,y),a(e,t),a(t,n),a(t,r),a(t,o),a(t,i),a(e,u),a(e,f),a(e,d),v||(h=se(f,"click",m),v=!0)},p(g,y){l=g,y[1]&256&&s!==(s=l[156].ip+"")&&B(r,s),y[1]&256&&c!==(c=(l[156].error||"Unknown error")+"")&&B(i,c)},d(g){g&&$(e),v=!1,h()}}}function Yf(l){let e;function t(r,o){return r[34]||r[36].length>0?If:Bf}let n=t(l),s=n(l);return{c(){s.c(),e=Ne()},m(r,o){s.m(r,o),w(r,e,o)},p(r,o){n===(n=t(r))&&s?s.p(r,o):(s.d(1),s=n(r),s&&(s.c(),s.m(e.parentNode,e)))},d(r){r&&$(e),s.d(r)}}}function Wo(l){let e,t,n=(l[156].name||l[156].ip)+"",s,r,o,c=l[156].ip+"",i,u;return{c(){e=_("div"),t=_("span"),s=S(n),r=b(),o=_("span"),i=S(c),u=b(),p(t,"class","server-name svelte-8rkhbz"),p(o,"class","server-ip svelte-8rkhbz"),p(e,"class","cleanup-server-item svelte-8rkhbz")},m(f,d){w(f,e,d),a(e,t),a(t,s),a(e,r),a(e,o),a(o,i),a(e,u)},p(f,d){d[1]&1024&&n!==(n=(f[156].name||f[156].ip)+"")&&B(s,n),d[1]&1024&&c!==(c=f[156].ip+"")&&B(i,c)},d(f){f&&$(e)}}}function Kf(l){let e,t,n,s,r=l[41].length+[...l[37]].length+"",o,c,i,u=[...l[37]].length+"",f,d,v,h,m,g,y=de(l[41]),C=[];for(let k=0;k<y.length;k+=1)C[k]=Wo(Gs(l,y,k));return{c(){e=_("div"),t=_("p"),n=S("This service is currently running on "),s=_("strong"),o=S(r),c=S(` servers.
      You're deploying to `),i=_("strong"),f=S(u),d=S(" servers."),v=b(),h=_("p"),h.textContent="Stop containers on the following servers?",m=b(),g=_("div");for(let k=0;k<C.length;k+=1)C[k].c();p(t,"class","svelte-8rkhbz"),p(h,"class","svelte-8rkhbz"),p(g,"class","cleanup-server-list svelte-8rkhbz"),p(e,"class","cleanup-confirm-content svelte-8rkhbz")},m(k,z){w(k,e,z),a(e,t),a(t,n),a(t,s),a(s,o),a(t,c),a(t,i),a(i,f),a(t,d),a(e,v),a(e,h),a(e,m),a(e,g);for(let D=0;D<C.length;D+=1)C[D]&&C[D].m(g,null)},p(k,z){if(z[1]&1088&&r!==(r=k[41].length+[...k[37]].length+"")&&B(o,r),z[1]&64&&u!==(u=[...k[37]].length+"")&&B(f,u),z[1]&1024){y=de(k[41]);let D;for(D=0;D<y.length;D+=1){const T=Gs(k,y,D);C[D]?C[D].p(T,z):(C[D]=Wo(T),C[D].c(),C[D].m(g,null))}for(;D<C.length;D+=1)C[D].d(1);C.length=y.length}},d(k){k&&$(e),Me(C,k)}}}function Qf(l){let e;return{c(){e=S("Proceed")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Zf(l){let e;return{c(){e=S("Cancel")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Xf(l){let e,t,n,s,r;return t=new qe({props:{variant:"primary",$$slots:{default:[Qf]},$$scope:{ctx:l}}}),t.$on("click",l[74]),s=new qe({props:{variant:"ghost",$$slots:{default:[Zf]},$$scope:{ctx:l}}}),s.$on("click",l[133]),{c(){e=_("div"),x(t.$$.fragment),n=b(),x(s.$$.fragment),p(e,"slot","footer")},m(o,c){w(o,e,c),Z(t,e,null),a(e,n),Z(s,e,null),r=!0},p(o,c){const i={};c[6]&4&&(i.$$scope={dirty:c,ctx:o}),t.$set(i);const u={};c[6]&4&&(u.$$scope={dirty:c,ctx:o}),s.$set(u)},i(o){r||(P(t.$$.fragment,o),P(s.$$.fragment,o),r=!0)},o(o){L(t.$$.fragment,o),L(s.$$.fragment,o),r=!1},d(o){o&&$(e),X(t),X(s)}}}function xf(l){let e,t,n,s,r,o,c,i,u;n=new Be({props:{title:"🚀 Deploy Application",$$slots:{default:[Ff]},$$scope:{ctx:l}}}),r=new Be({props:{title:"📋 Deployment Progress",$$slots:{default:[Yf]},$$scope:{ctx:l}}});function f(v){l[134](v)}let d={title:"⚠️ Service Already Running",width:"500px",$$slots:{footer:[Xf],default:[Kf]},$$scope:{ctx:l}};return l[40]!==void 0&&(d.open=l[40]),c=new al({props:d}),gt.push(()=>rl(c,"open",f)),c.$on("close",l[135]),{c(){e=_("div"),t=_("div"),x(n.$$.fragment),s=b(),x(r.$$.fragment),o=b(),x(c.$$.fragment),p(t,"class","deploy-grid svelte-8rkhbz"),p(e,"class","deploy-page svelte-8rkhbz")},m(v,h){w(v,e,h),a(e,t),Z(n,t,null),a(t,s),Z(r,t,null),w(v,o,h),Z(c,v,h),u=!0},p(v,h){const m={};h[0]&2147483647|h[1]&16773327|h[6]&4&&(m.$$scope={dirty:h,ctx:v}),n.$set(m);const g={};h[0]&5|h[1]&312|h[6]&4&&(g.$$scope={dirty:h,ctx:v}),r.$set(g);const y={};h[1]&3648|h[6]&4&&(y.$$scope={dirty:h,ctx:v}),!i&&h[1]&512&&(i=!0,y.open=v[40],ol(()=>i=!1)),c.$set(y)},i(v){u||(P(n.$$.fragment,v),P(r.$$.fragment,v),P(c.$$.fragment,v),u=!0)},o(v){L(n.$$.fragment,v),L(r.$$.fragment,v),L(c.$$.fragment,v),u=!1},d(v){v&&($(e),$(o)),X(n),X(r),X(c,v)}}}function eu(l){l.preventDefault(),l.stopPropagation()}async function ia(l,e){const t=[],n=l.createReader();let s=[],r;do r=await new Promise((o,c)=>{n.readEntries(o,c)}),s=s.concat(r);while(r.length>0);for(const o of s){const c=e?`${e}/${o.name}`:o.name;if(o.isFile){const i=await new Promise((u,f)=>{o.file(u,f)});i._relativePath=c,t.push(i)}else if(o.isDirectory){const i=await ia(o,c);t.push(...i)}}return t}function Jo(l){return new Promise((e,t)=>{const n=new FileReader;n.onload=()=>e(new Uint8Array(n.result)),n.onerror=t,n.readAsArrayBuffer(l)})}function Vo(l){return new Promise((e,t)=>{const n=new FileReader;n.onload=()=>e(n.result),n.onerror=t,n.readAsText(l)})}function Yo(l){const e=/(https?:\/\/[^\s]+)/g;return l.replace(e,'<a href="$1" target="_blank" class="log-link">$1</a>')}const Ko=l=>!l.success,Qo=l=>l,tu=l=>l.isMain,Zo=l=>l.isMain,Xo=l=>l.isMain,xo=l=>l.trim(),er=l=>l.success,tr=l=>!l.success;function lu(l,e,t){let n,s,r;Je(l,oa,Y=>t(6,s=Y)),Je(l,ql,Y=>t(76,r=Y));let o="",c="",i="prod",u="",f="code",d=8e3,v="",h="",m="main",g="",y=[],C="",k="",z=null,D="",T="",E="",q=[],j=null,R=null,O=!0,F=!1,I="",V="",J=!1,U="",A="",M="",G="lon1",N="s-1vcpu-2gb",H=[],ee=[],Q=[],te=!1,W=0,le=[],K=new Set,oe=0,$e=null,_e=!1,re=[],he=null,be=!0,ue=!0,pe={postgres:!1,redis:!1,mysql:!1,mongo:!1},ce=!0,De="digitalpixo.com",ke="",Ae="",$t=!1,ot=["node_modules/","__pycache__/","*.pyc",".git/",".venv/","venv/",".env",".DS_Store",".idea/",".vscode/","dist/","build/",".pytest_cache/",".mypy_cache/"],ze=ot.join(`
`),ve=!1,Oe=!1,We=!1;const He=[...ot],nt=["dev","test","staging","uat","prod"];ll(()=>{At.refresh().catch(()=>{}),zl.refresh().catch(()=>{}),Ge()});async function Ge(){try{try{const Y=await Fe("GET","/infra/regions");t(31,H=Y.regions||Y||[])}catch{t(31,H=[{slug:"nyc1",name:"New York 1"},{slug:"nyc3",name:"New York 3"},{slug:"sfo3",name:"San Francisco 3"},{slug:"ams3",name:"Amsterdam 3"},{slug:"sgp1",name:"Singapore 1"},{slug:"lon1",name:"London 1"},{slug:"fra1",name:"Frankfurt 1"}])}try{const Y=await Fe("GET","/infra/sizes");t(32,ee=Y.sizes||Y||[])}catch{t(32,ee=[{slug:"s-1vcpu-512mb-10gb",description:"512MB / 1 vCPU"},{slug:"s-1vcpu-1gb",description:"1GB / 1 vCPU"},{slug:"s-1vcpu-2gb",description:"2GB / 1 vCPU"},{slug:"s-2vcpu-2gb",description:"2GB / 2 vCPU"},{slug:"s-2vcpu-4gb",description:"4GB / 2 vCPU"},{slug:"s-4vcpu-8gb",description:"8GB / 4 vCPU"}])}}catch(Y){console.error("Failed to load regions/sizes:",Y)}}async function Qt(){var Y;if(!o){ge.warning("Enter app name first");return}t(48,Ae="Loading...");try{const me=await Fe("GET",`/infra/deploy-configs/${c||"default"}/${o}/${i}`);at(me),t(48,Ae="✓ Loaded"),ge.success("Config loaded")}catch(ae){(Y=ae.message)!=null&&Y.includes("404")?(t(48,Ae="No saved config"),ge.info("No saved config found")):(t(48,Ae="Load failed"),ge.error("Failed to load config"))}}async function qt(){try{const ae=await Fe("GET",`/infra/deploy-configs/${c||"default"}/${o}/${i}`);at(ae),t(48,Ae="✓ Auto-loaded")}catch{t(48,Ae="")}}function at(Y){var ae,me;Y.source_type&&t(8,f={folder:"code",git:"git",image:"image"}[Y.source_type]||Y.source_type),Y.git_url&&t(11,h=Y.git_url),Y.git_branch&&t(12,m=Y.git_branch),Y.port&&t(9,d=Y.port),Y.env_vars&&Object.keys(Y.env_vars).length>0&&t(10,v=Object.entries(Y.env_vars).map(([Te,Pe])=>`${Te}=${Pe}`).join(`
`)),((ae=Y.exclude_patterns)==null?void 0:ae.length)>0&&(ot=Y.exclude_patterns,t(50,ze=ot.join(`
`))),((me=Y.server_ips)==null?void 0:me.length)>0&&t(37,K=new Set(Y.server_ips))}async function It(){if(!o){ge.warning("Enter app name first");return}t(48,Ae="Saving...");const Y={};for(const Te of v.split(`
`)){const Pe=Te.trim();if(Pe&&Pe.includes("=")){const[je,...Ee]=Pe.split("=");Y[je.trim()]=Ee.join("=").trim()}}const ae=ze.split(`
`).map(Te=>Te.trim()).filter(Boolean),me={project_name:c||"default",service_name:o,env:i,source_type:f==="code"?"folder":f,git_url:h||null,git_branch:m||"main",exclude_patterns:ae.length>0?ae:He,port:d,env_vars:Y,server_ips:Array.from(K)};try{await Fe("POST","/infra/deploy-configs",me),t(48,Ae="✓ Saved"),ge.success("Config saved")}catch{t(48,Ae="Save failed"),ge.error("Failed to save config")}}function wt(){t(49,$t=!$t),$t||(ot=ze.split(`
`).map(Y=>Y.trim()).filter(Boolean))}function Pl(){ot=[...He],t(50,ze=He.join(`
`)),ge.info("Reset to default patterns")}function El(Y){for(const ae of ot)if(ae.endsWith("/")){const me=ae.slice(0,-1);if(Y.startsWith(me+"/")||Y.includes("/"+me+"/"))return!0}else if(ae.startsWith("*")){const me=ae.slice(1);if(Y.endsWith(me))return!0}else if(Y===ae||Y.endsWith("/"+ae))return!0;return!1}function cl(Y){K.has(Y)?K.delete(Y):K.add(Y),t(37,K)}function fl(Y){Y?(Q||[]).forEach(ae=>{var Te,Pe,je;const me=ae.ip||((je=(Pe=(Te=ae.networks)==null?void 0:Te.v4)==null?void 0:Pe[0])==null?void 0:je.ip_address);me&&K.add(me)}):K.clear(),t(37,K)}function Ll(){R=async(Y,ae)=>{await Ml(Y,ae,q.length===0)},j==null||j.click()}async function Vl(Y){const ae=Array.from(Y.target.files||[]);if(!ae.length||!R)return;console.log(`[Deploy] Browser returned ${ae.length} files`),ae.length<50?console.log("[Deploy] Files:",ae.map(Pe=>Pe.webkitRelativePath)):console.log("[Deploy] First 20 files:",ae.slice(0,20).map(Pe=>Pe.webkitRelativePath));const Te=ae[0].webkitRelativePath.split("/")[0];await R(ae,Te),R=null,Y.target.value=""}function Yl(Y){Y.preventDefault(),Y.stopPropagation(),t(24,F=!0)}function Dt(Y){Y.preventDefault(),Y.stopPropagation(),Y.currentTarget.contains(Y.relatedTarget)||t(24,F=!1)}async function yt(Y){var me,Te;Y.preventDefault(),Y.stopPropagation(),t(24,F=!1);const ae=(me=Y.dataTransfer)==null?void 0:me.items;if(!(!ae||ae.length===0)){for(const Pe of ae)if(Pe.kind==="file"){const je=(Te=Pe.webkitGetAsEntry)==null?void 0:Te.call(Pe);je!=null&&je.isDirectory&&await ul(je)}}}async function ul(Y){const ae=Y.name;if(q.some(Pe=>Pe.name===ae)){ge.error(`Folder "${ae}" is already added`);return}ge.info(`Reading ${ae}/...`);const me=await ia(Y,"");if(me.length===0){ge.error(`No files found in ${ae}/`);return}const Te=q.length===0;await pl(me,ae,Te)}async function pl(Y,ae,me){me&&q.some(Ee=>Ee.isMain)&&t(21,q=q.map(Ee=>({...Ee,isMain:!1})));const Te=[];let Pe=null,je=0;for(const Ee of Y){const ht=Ee._relativePath||Ee.name;if(El(ht)){je++;continue}const Rt=await Jo(Ee);Te.push({path:ht,content:Rt}),me&&ht==="Dockerfile"&&(Pe=await Vo(Ee))}console.log(`[Deploy] Dropped ${ae}/: ${Y.length} total, ${je} skipped, ${Te.length} included`),t(21,q=[...q,{name:ae,fileContents:Te,isMain:me,fileCount:Te.length}]),dl(),q.some(Ee=>Ee.isMain)&&vl(Pe),O&&c&&o&&ml(),ge.success(`Added ${ae}/ (${Te.length} files)`)}async function Ml(Y,ae,me){if(q.some(Ee=>Ee.name===ae)){ge.error(`Folder "${ae}" is already added`);return}me&&q.some(Ee=>Ee.isMain)&&t(21,q=q.map(Ee=>({...Ee,isMain:!1})));const Te=[];let Pe=null,je=0;for(const Ee of Y){const ht=Ee.webkitRelativePath.replace(`${ae}/`,"");if(El(ht)){je++;continue}const Rt=await Jo(Ee);Te.push({path:ht,content:Rt}),me&&ht==="Dockerfile"&&(Pe=await Vo(Ee))}console.log(`[Deploy] Processed ${ae}/: ${Y.length} total, ${je} skipped, ${Te.length} included`),t(21,q=[...q,{name:ae,fileContents:Te,isMain:me,fileCount:Te.length}]),dl(),q.some(Ee=>Ee.isMain)&&vl(Pe),O&&c&&o&&ml(),ge.success(`Added ${ae}/ (${Te.length} files)`)}function jl(Y){t(21,q=q.filter((ae,me)=>me!==Y)),dl(),q.length>0&&!q.some(ae=>ae.isMain)&&t(21,q=q.map((ae,me)=>({...ae,isMain:me===0})))}function _l(Y){t(21,q=q.map((ae,me)=>({...ae,isMain:me===Y}))),vl()}function dl(){const Y=q.some(ae=>ae.isMain);q.length&&Y&&Nl()}async function Nl(){if(!q.length)return;const{default:Y}=await Hs(async()=>{const{default:me}=await import("https://cdn.jsdelivr.net/npm/jszip@3.10.1/+esm");return{default:me}},[]),ae=new Y;for(const me of q)for(const{path:Te,content:Pe}of me.fileContents)ae.file(`${me.name}/${Te}`,Pe);q.length>1&&I&&ae.file("Dockerfile",I),await ae.generateAsync({type:"blob"})}function vl(Y=null){if(t(27,J=!0),Y)t(25,I=Y),t(26,V="from folder");else if(q.length>1)t(25,I=Kl()),t(26,V="multi-folder");else if(q.length===1){const ae=q[0];t(25,I=Et(ae.fileContents.map(me=>me.path))),t(26,V="generated")}Zt()}function Kl(){const Y=q.find(Pe=>Pe.isMain);if(!Y)return"";const ae=q.filter(Pe=>!Pe.isMain),me=Y.fileContents.some(Pe=>Pe.path==="requirements.txt");Y.fileContents.some(Pe=>Pe.path==="package.json");let Te=`FROM python:3.11-slim

WORKDIR /app

`;for(const Pe of ae)Te+=`# Copy ${Pe.name}
COPY ${Pe.name}/ ./${Pe.name}/

`;return Te+=`# Copy main service
COPY ${Y.name}/ ./${Y.name}/

`,me&&(Te+=`# Install dependencies
RUN pip install --no-cache-dir -r ${Y.name}/requirements.txt

`),Te+=`EXPOSE ${d}

`,Te+=`CMD ["uvicorn", "${Y.name}.main:app", "--host", "0.0.0.0", "--port", "${d}"]
`,Te}function Et(Y){const ae=Y.includes("requirements.txt"),me=Y.includes("package.json"),Te=Y.includes("pyproject.toml");return ae||Te?`FROM python:3.11-slim

WORKDIR /app

COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

COPY . .

EXPOSE ${d}

CMD ["uvicorn", "main:app", "--host", "0.0.0.0", "--port", "${d}"]
`:me?`FROM node:20-alpine

WORKDIR /app

COPY package*.json ./
RUN npm ci --only=production

COPY . .

EXPOSE ${d}

CMD ["node", "index.js"]
`:`FROM python:3.11-slim

WORKDIR /app

COPY . .

EXPOSE ${d}

CMD ["python", "main.py"]
`}function Zt(){const Y=I.match(/^FROM\s+(\S+)/m),ae=I.match(/^CMD\s+(.+)$/m);t(28,U=Y?Y[1]:""),t(29,A=ae?ae[1]:"")}function Lt(Y){Y==="from"&&U?t(25,I=I.replace(/^FROM\s+\S+/m,`FROM ${U}`)):Y==="cmd"&&A&&(I.includes("CMD ")?t(25,I=I.replace(/^CMD\s+.+$/m,`CMD ${A}`)):t(25,I+=`
CMD ${A}
`)),t(26,V="edited")}function ml(){if(!c||!o)return;const Y=`build_folders_${c}_${o}`,ae=q.map(me=>({name:me.name,isMain:me.isMain}));localStorage.setItem(Y,JSON.stringify(ae))}function hl(Y){if(!C.trim()){ge.error("Please enter a folder path");return}const ae=C.trim();if(Y&&y.some(me=>me.isMain)&&t(14,y=y.map(me=>({...me,isMain:!1}))),y.some(me=>me.path===ae)){ge.error("This folder is already added");return}t(14,y=[...y,{path:ae,isMain:Y}]),t(15,C="")}function Mt(Y){t(14,y=y.filter((ae,me)=>me!==Y))}function Ql(Y){var me;const ae=(me=Y.target.files)==null?void 0:me[0];if(ae){if(!ae.name.endsWith(".tar")&&!ae.name.endsWith(".tar.gz")){ge.error("Only .tar or .tar.gz image files are supported");return}t(17,z=ae),ge.success(`Selected: ${ae.name}`)}}function rt(Y,ae="info"){t(36,le=[...le,{message:Y,type:ae,time:new Date}])}async function jt(Y){if(Y.preventDefault(),!o){ge.error("App name is required");return}if(f==="code"&&!q.some(me=>me.isMain)){ge.error("Add a main folder with your code");return}if(f==="git"&&!h){ge.error("Git URL is required");return}if(f==="image"&&!k){ge.error("Docker image URL is required");return}if(f==="image_file"&&!z){ge.error("Upload a Docker image file (.tar)");return}if(f==="image_file"&&!D){ge.error("Image name is required for local images");return}if(K.size===0&&oe===0){ge.error("Select at least one server or add new servers");return}if(oe>0&&!M){ge.error("Select a snapshot for new servers");return}if(!tl()){ge.error("Configure your DO Token in Settings first");return}if(ce&&!Dn()){ge.error("Configure your Cloudflare Token in Settings first (required for domain setup)");return}const ae=[...K];if(c&&o&&i)try{const me=new URLSearchParams({project:c,environment:i,service_name:o}),Te=await Fe("GET",`/infra/services/state?${me}`);if(Te.server_ips&&Te.server_ips.length>0){const Pe=Te.servers.filter(je=>!ae.includes(je.ip));if(Pe.length>0){t(41,re=Pe),t(42,he=()=>Tt(Y)),t(40,_e=!0);return}}}catch(me){console.log("Service state check:",me.message||me)}await Tt()}async function Zl(){t(40,_e=!1);const Y=`${c}_${o}_${i}`.replace(/[^a-zA-Z0-9_]/g,"_");if(re.length>0){const ae=re.map(me=>me.ip);rt(`Stopping containers on ${re.length} server(s)...`);try{const me=await Fe("POST",`/infra/services/cleanup?do_token=${tl()}`,{server_ips:ae,container_name:Y});rt(`Cleanup complete: ${me.cleaned} stopped, ${me.failed} failed`)}catch(me){rt(`Cleanup warning: ${me.message||me}`,"warning")}}t(41,re=[]),he&&(await he(),t(42,he=null))}async function Tt(Y){t(34,te=!0),t(35,W=0),t(36,le=[]),t(39,$e=null);try{rt(`Starting deployment of ${o}...`),t(35,W=10);let ae=null;if(f==="code"){rt("Creating code archive...");const{default:Ee}=await Hs(async()=>{const{default:Rt}=await import("https://cdn.jsdelivr.net/npm/jszip@3.10.1/+esm");return{default:Rt}},[]),ht=new Ee;for(const Rt of q)for(const{path:ga,content:ba}of Rt.fileContents)ht.file(`${Rt.name}/${ga}`,ba);q.length>1&&I&&ht.file("Dockerfile",I),ae=await ht.generateAsync({type:"blob"})}rt("Sending deployment request... server provisioning may take 30-60s"),t(35,W=20);const me=tl(),Te=Dn(),Pe=new URLSearchParams({do_token:me,snapshot_id:M||"",new_server_count:String(oe),region:G,size:N,project:c||"",environment:i,setup_domain:String(ce),base_domain:De,domain_aliases:JSON.stringify(ke.split(",").map(Ee=>Ee.trim()).filter(Boolean))});ce&&Te&&Pe.set("cf_token",Te);const je=new FormData;je.append("name",o),je.append("port",String(d)),je.append("source_type",f),je.append("env_vars",v),je.append("tags",u),je.append("server_ips",JSON.stringify(Array.from(K))),je.append("depends_on",JSON.stringify(Object.entries(pe).filter(([Ee,ht])=>ht).map(([Ee])=>Ee))),je.append("exclude_patterns",JSON.stringify(ot)),I&&je.append("dockerfile",I),h&&je.append("git_url",h),m&&je.append("git_branch",m),g&&je.append("git_token",g),y.length&&je.append("git_folders",JSON.stringify(y)),k&&je.append("image",k),ae&&je.append("code_tar",ae,"code.zip"),f==="image_file"&&(z&&je.append("image_tar",z),D&&je.append("image",D),T&&je.append("container_port",String(T)),E&&je.append("host_port",String(E))),await Ya(`/infra/deploy/multipart?${Pe}`,je,Ee=>{if(Ee.type==="log")rt(Ee.message);else if(Ee.type==="progress")t(35,W=Math.min(20+(Ee.percent||0)*.8,95));else if(Ee.type==="done"){if(t(39,$e=Ee),t(35,W=100),!Ee.success){const ht=Ee.failed_count||0,Rt=Ee.error||`Deployment failed: ${ht} server(s) failed`;throw new Error(Rt)}}else if(Ee.type==="error")throw new Error(Ee.message||"Deployment failed")}),rt("✅ Deployment complete!","success"),ge.success("Deployment successful!"),await loadServersForDeploy()}catch(ae){let me="Unknown error";if(typeof ae=="string")me=ae;else if(ae!=null&&ae.message)me=ae.message;else if(ae!=null&&ae.detail)me=ae.detail;else if(ae!=null&&ae.error)me=ae.error;else try{me=JSON.stringify(ae)}catch{me=String(ae)}rt(`❌ Error: ${me}`,"error"),ge.error(me)}finally{t(34,te=!1)}}const Xl=[[]];function sl(){o=this.value,t(0,o)}function bt(){c=this.value,t(1,c)}function Ct(){i=mt(this),t(2,i),t(55,nt)}function xl(){ze=this.value,t(50,ze)}function Pt(){u=this.value,t(7,u)}function St(){f=this.__value,t(8,f)}function gl(){f=this.__value,t(8,f)}function bl(){f=this.__value,t(8,f)}function Rl(){f=this.__value,t(8,f)}function en(Y){gt[Y?"unshift":"push"](()=>{j=Y,t(22,j)})}const Al=Y=>_l(Y),tn=Y=>jl(Y);function ln(){O=this.checked,t(23,O)}function nn(){I=this.value,t(25,I)}function Ut(){U=mt(this),t(28,U)}const ct=()=>Lt("from");function Ol(){A=this.value,t(29,A)}const Fl=()=>Lt("cmd");function sn(){h=this.value,t(11,h)}function Xt(){m=this.value,t(12,m)}const it=Y=>Mt(Y);function ft(){C=this.value,t(15,C)}const Ke=()=>hl(!0),Qe=()=>hl(!1);function Ze(){g=this.value,t(13,g)}function ut(){k=this.value,t(16,k)}function pt(){D=this.value,t(18,D)}function Xe(){T=Ot(this.value),t(19,T)}function _t(){E=Ot(this.value),t(20,E)}function lt(){d=Ot(this.value),t(9,d)}const dt=()=>t(51,ve=!ve);function on(){v=this.value,t(10,v)}const Nt=()=>t(52,Oe=!Oe);function rn(){be=this.checked,t(43,be)}function xe(){pe.postgres=this.checked,t(45,pe)}function vt(){pe.redis=this.checked,t(45,pe)}function fe(){pe.mysql=this.checked,t(45,pe)}function Se(){pe.mongo=this.checked,t(45,pe)}function Ht(){ue=this.checked,t(44,ue)}function an(){ce=this.checked,t(46,ce)}function cn(){De=this.value,t(5,De)}function fn(){ke=this.value,t(47,ke)}const un=()=>fl(!0),pn=()=>fl(!1),Bl=Y=>cl(Y),Il=()=>t(53,We=!We);function kt(){M=mt(this),t(3,M),t(6,s)}function _n(){G=mt(this),t(4,G),t(31,H)}function aa(){N=mt(this),t(30,N),t(32,ee)}const ca=()=>t(38,oe=Math.max(0,oe-1));function fa(){oe=Ot(this.value),t(38,oe)}const ua=()=>t(38,oe=Math.min(10,oe+1)),pa=Y=>window.open(`/api/v1/infra/logs/${Y.ip}/${Y.container_name||$e.container_name||o}`,"_blank"),_a=Y=>window.open(`/api/v1/infra/logs/${Y.ip}/${Y.container_name||$e.container_name||o}`,"_blank"),da=Y=>window.open(`/api/v1/infra/logs/${Y.ip}/${Y.container_name||$e.container_name||o}`,"_blank"),va=()=>{t(40,_e=!1),t(42,he=null)};function ma(Y){_e=Y,t(40,_e)}const ha=()=>{t(40,_e=!1),t(42,he=null)};return l.$$.update=()=>{if(l.$$.dirty[0]&16|l.$$.dirty[2]&16384&&t(33,Q=(r||[]).filter(Y=>!G||Y.region===G)),l.$$.dirty[0]&39&&t(54,n=o&&c&&i?`${o}-${c}-${i}.${De}`:""),l.$$.dirty[0]&3&&o&&c&&qt(),l.$$.dirty[0]&72&&(s==null?void 0:s.length)>0&&!M){const Y=s.find(ae=>(ae.name||"").toLowerCase().includes("base"));t(3,M=(Y==null?void 0:Y.id)||(Y==null?void 0:Y.name)||s[0].id||s[0].name)}},[o,c,i,M,G,De,s,u,f,d,v,h,m,g,y,C,k,z,D,T,E,q,j,O,F,I,V,J,U,A,N,H,ee,Q,te,W,le,K,oe,$e,_e,re,he,be,ue,pe,ce,ke,Ae,$t,ze,ve,Oe,We,n,nt,Qt,It,wt,Pl,cl,fl,Ll,Vl,Yl,Dt,yt,jl,_l,Lt,hl,Mt,Ql,jt,Zl,rt,r,sl,bt,Ct,xl,Pt,St,Xl,gl,bl,Rl,en,Al,tn,ln,nn,Ut,ct,Ol,Fl,sn,Xt,it,ft,Ke,Qe,Ze,ut,pt,Xe,_t,lt,dt,on,Nt,rn,xe,vt,fe,Se,Ht,an,cn,fn,un,pn,Bl,Il,kt,_n,aa,ca,fa,ua,pa,_a,da,va,ma,ha]}class nu extends tt{constructor(e){super(),et(this,e,lu,xf,Ye,{},null,[-1,-1,-1,-1,-1,-1,-1])}}function lr(l,e,t){const n=l.slice();return n[55]=e[t],n}function nr(l,e,t){const n=l.slice();return n[55]=e[t],n}function sr(l,e,t){const n=l.slice();return n[55]=e[t],n}function or(l,e,t){const n=l.slice();return n[62]=e[t],n}function rr(l,e,t){const n=l.slice();return n[66]=e[t],n}function ir(l,e,t){const n=l.slice();return n[69]=e[t][0],n[70]=e[t][1],n}function su(l){const e=l.slice(),t=e[14].config_snapshot;return e[65]=t,e}function ar(l,e,t){const n=l.slice();return n[62]=e[t],n}function cr(l,e,t){const n=l.slice();return n[75]=e[t],n}function fr(l,e,t){const n=l.slice();n[78]=e[t];const s=Wt(n[78]);return n[79]=s,n}function ur(l){let e,t,n=Wr(l[20])+"",s;return{c(){e=_("span"),t=S("Updated "),s=S(n),p(e,"class","last-updated svelte-cuxyqu")},m(r,o){w(r,e,o),a(e,t),a(e,s)},p(r,o){o[0]&1048576&&n!==(n=Wr(r[20])+"")&&B(s,n)},d(r){r&&$(e)}}}function ou(l){let e;return{c(){e=S("↻ Refresh")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function ru(l){let e,t,n=de(l[19]),s=[];for(let o=0;o<n.length;o+=1)s[o]=vr(fr(l,n,o));const r=o=>L(s[o],1,1,()=>{s[o]=null});return{c(){for(let o=0;o<s.length;o+=1)s[o].c();e=Ne()},m(o,c){for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(o,c);w(o,e,c),t=!0},p(o,c){if(c[0]&27787264){n=de(o[19]);let i;for(i=0;i<n.length;i+=1){const u=fr(o,n,i);s[i]?(s[i].p(u,c),P(s[i],1)):(s[i]=vr(u),s[i].c(),P(s[i],1),s[i].m(e.parentNode,e))}for(we(),i=n.length;i<s.length;i+=1)r(i);ye()}},i(o){if(!t){for(let c=0;c<n.length;c+=1)P(s[c]);t=!0}},o(o){s=s.filter(Boolean);for(let c=0;c<s.length;c+=1)L(s[c]);t=!1},d(o){o&&$(e),Me(s,o)}}}function iu(l){let e;return{c(){e=_("tr"),e.innerHTML='<td colspan="12" class="empty-cell svelte-cuxyqu">No deployments found</td>',p(e,"class","svelte-cuxyqu")},m(t,n){w(t,e,n)},p:ie,i:ie,o:ie,d(t){t&&$(e)}}}function au(l){let e;return{c(){e=_("tr"),e.innerHTML='<td colspan="12" class="loading-cell svelte-cuxyqu">Loading deployment history...</td>',p(e,"class","svelte-cuxyqu")},m(t,n){w(t,e,n)},p:ie,i:ie,o:ie,d(t){t&&$(e)}}}function cu(l){let e=(l[78].environment||"-")+"",t;return{c(){t=S(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&524288&&e!==(e=(n[78].environment||"-")+"")&&B(t,e)},d(n){n&&$(t)}}}function fu(l){let e;return{c(){e=_("span"),e.textContent="-",p(e,"class","version-none svelte-cuxyqu")},m(t,n){w(t,e,n)},p:ie,d(t){t&&$(e)}}}function uu(l){let e,t,n=l[78].version+"",s;return{c(){e=_("span"),t=S("v"),s=S(n),p(e,"class","version-badge svelte-cuxyqu")},m(r,o){w(r,e,o),a(e,t),a(e,s)},p(r,o){o[0]&524288&&n!==(n=r[78].version+"")&&B(s,n)},d(r){r&&$(e)}}}function pu(l){let e=l[78].is_rollback?"rollback":"deploy",t;return{c(){t=S(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&524288&&e!==(e=n[78].is_rollback?"rollback":"deploy")&&B(t,e)},d(n){n&&$(t)}}}function _u(l){let e=l[79]+"",t;return{c(){t=S(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&524288&&e!==(e=n[79]+"")&&B(t,e)},d(n){n&&$(t)}}}function pr(l){let e,t,n;function s(){return l[34](l[78])}return{c(){e=_("button"),e.textContent="⚙️",p(e,"class","icon-btn svelte-cuxyqu"),p(e,"title","View config")},m(r,o){w(r,e,o),t||(n=se(e,"click",s),t=!0)},p(r,o){l=r},d(r){r&&$(e),t=!1,n()}}}function _r(l){let e,t,n;function s(){return l[35](l[78])}return{c(){e=_("button"),e.textContent="📋",p(e,"class","icon-btn svelte-cuxyqu"),p(e,"title","View logs")},m(r,o){w(r,e,o),t||(n=se(e,"click",s),t=!0)},p(r,o){l=r},d(r){r&&$(e),t=!1,n()}}}function dr(l){let e,t,n;function s(){return l[36](l[78])}return{c(){e=_("button"),e.textContent="⏪",p(e,"class","icon-btn rollback-icon-btn svelte-cuxyqu"),p(e,"title","Rollback")},m(r,o){w(r,e,o),t||(n=se(e,"click",s),t=!0)},p(r,o){l=r},d(r){r&&$(e),t=!1,n()}}}function vr(l){let e,t,n,s=(l[78].project||"-")+"",r,o,c,i,u=(l[78].service||l[78].name)+"",f,d,v,h,m,g,y,C,k=Bt(l[78].deployed_at||l[78].created_at)+"",z,D,T,E=(l[78].deployed_by||l[78].user||"-")+"",q,j,R,O,F,I,V,J,U,A,M=(l[78].comment||"-")+"",G,N,H,ee,Q,te,W,le,K;h=new Re({props:{variant:l[78].environment==="prod"?"purple":l[78].environment==="staging"?"warning":"info",$$slots:{default:[cu]},$$scope:{ctx:l}}});function oe(ue,pe){return ue[78].version?uu:fu}let $e=oe(l),_e=$e(l);F=new Re({props:{variant:l[78].is_rollback?"warning":"info",$$slots:{default:[pu]},$$scope:{ctx:l}}}),J=new Re({props:{variant:Dl(l[79]),$$slots:{default:[_u]},$$scope:{ctx:l}}});let re=l[78].config_snapshot&&pr(l),he=l[78].has_logs&&_r(l),be=l[78].is_current_active&&dr(l);return{c(){e=_("tr"),t=_("td"),n=_("span"),r=S(s),o=b(),c=_("td"),i=_("span"),f=S(u),d=b(),v=_("td"),x(h.$$.fragment),m=b(),g=_("td"),_e.c(),y=b(),C=_("td"),z=S(k),D=b(),T=_("td"),q=S(E),R=b(),O=_("td"),x(F.$$.fragment),I=b(),V=_("td"),x(J.$$.fragment),U=b(),A=_("td"),G=S(M),N=b(),H=_("td"),re&&re.c(),ee=b(),Q=_("td"),he&&he.c(),te=b(),W=_("td"),be&&be.c(),le=b(),p(n,"class","project-name svelte-cuxyqu"),p(t,"class","svelte-cuxyqu"),p(i,"class","service-name svelte-cuxyqu"),p(c,"class","svelte-cuxyqu"),p(v,"class","svelte-cuxyqu"),p(g,"class","version-cell svelte-cuxyqu"),p(C,"class","date-cell svelte-cuxyqu"),p(T,"class","by-cell svelte-cuxyqu"),p(T,"title",j=l[78].deployed_by||l[78].user||"-"),p(O,"class","svelte-cuxyqu"),p(V,"class","svelte-cuxyqu"),p(A,"class","comment-cell svelte-cuxyqu"),p(H,"class","config-cell svelte-cuxyqu"),p(Q,"class","logs-cell svelte-cuxyqu"),p(W,"class","rollback-cell svelte-cuxyqu"),p(e,"class","svelte-cuxyqu")},m(ue,pe){w(ue,e,pe),a(e,t),a(t,n),a(n,r),a(e,o),a(e,c),a(c,i),a(i,f),a(e,d),a(e,v),Z(h,v,null),a(e,m),a(e,g),_e.m(g,null),a(e,y),a(e,C),a(C,z),a(e,D),a(e,T),a(T,q),a(e,R),a(e,O),Z(F,O,null),a(e,I),a(e,V),Z(J,V,null),a(e,U),a(e,A),a(A,G),a(e,N),a(e,H),re&&re.m(H,null),a(e,ee),a(e,Q),he&&he.m(Q,null),a(e,te),a(e,W),be&&be.m(W,null),a(e,le),K=!0},p(ue,pe){(!K||pe[0]&524288)&&s!==(s=(ue[78].project||"-")+"")&&B(r,s),(!K||pe[0]&524288)&&u!==(u=(ue[78].service||ue[78].name)+"")&&B(f,u);const ce={};pe[0]&524288&&(ce.variant=ue[78].environment==="prod"?"purple":ue[78].environment==="staging"?"warning":"info"),pe[0]&524288|pe[2]&1048576&&(ce.$$scope={dirty:pe,ctx:ue}),h.$set(ce),$e===($e=oe(ue))&&_e?_e.p(ue,pe):(_e.d(1),_e=$e(ue),_e&&(_e.c(),_e.m(g,null))),(!K||pe[0]&524288)&&k!==(k=Bt(ue[78].deployed_at||ue[78].created_at)+"")&&B(z,k),(!K||pe[0]&524288)&&E!==(E=(ue[78].deployed_by||ue[78].user||"-")+"")&&B(q,E),(!K||pe[0]&524288&&j!==(j=ue[78].deployed_by||ue[78].user||"-"))&&p(T,"title",j);const De={};pe[0]&524288&&(De.variant=ue[78].is_rollback?"warning":"info"),pe[0]&524288|pe[2]&1048576&&(De.$$scope={dirty:pe,ctx:ue}),F.$set(De);const ke={};pe[0]&524288&&(ke.variant=Dl(ue[79])),pe[0]&524288|pe[2]&1048576&&(ke.$$scope={dirty:pe,ctx:ue}),J.$set(ke),(!K||pe[0]&524288)&&M!==(M=(ue[78].comment||"-")+"")&&B(G,M),ue[78].config_snapshot?re?re.p(ue,pe):(re=pr(ue),re.c(),re.m(H,null)):re&&(re.d(1),re=null),ue[78].has_logs?he?he.p(ue,pe):(he=_r(ue),he.c(),he.m(Q,null)):he&&(he.d(1),he=null),ue[78].is_current_active?be?be.p(ue,pe):(be=dr(ue),be.c(),be.m(W,null)):be&&(be.d(1),be=null)},i(ue){K||(P(h.$$.fragment,ue),P(F.$$.fragment,ue),P(J.$$.fragment,ue),K=!0)},o(ue){L(h.$$.fragment,ue),L(F.$$.fragment,ue),L(J.$$.fragment,ue),K=!1},d(ue){ue&&$(e),X(h),_e.d(),X(F),X(J),re&&re.d(),he&&he.d(),be&&be.d()}}}function du(l){let e,t,n,s,r,o,c,i;const u=[au,iu,ru],f=[];function d(v,h){return v[0]&&v[19].length===0?0:v[19].length===0?1:2}return o=d(l),c=f[o]=u[o](l),{c(){e=_("div"),t=_("table"),n=_("thead"),n.innerHTML='<tr class="svelte-cuxyqu"><th class="svelte-cuxyqu">Project</th> <th class="svelte-cuxyqu">Service</th> <th class="svelte-cuxyqu">Environment</th> <th class="version-col svelte-cuxyqu">v</th> <th class="svelte-cuxyqu">Deployed</th> <th class="svelte-cuxyqu">By</th> <th class="svelte-cuxyqu">Type</th> <th class="svelte-cuxyqu">Status</th> <th class="svelte-cuxyqu">Comment</th> <th class="config-col svelte-cuxyqu"></th> <th class="logs-col svelte-cuxyqu"></th> <th class="rollback-col svelte-cuxyqu"></th></tr>',s=b(),r=_("tbody"),c.c(),p(t,"class","table svelte-cuxyqu"),p(e,"class","table-container svelte-cuxyqu")},m(v,h){w(v,e,h),a(e,t),a(t,n),a(t,s),a(t,r),f[o].m(r,null),i=!0},p(v,h){let m=o;o=d(v),o===m?f[o].p(v,h):(we(),L(f[m],1,1,()=>{f[m]=null}),ye(),c=f[o],c?c.p(v,h):(c=f[o]=u[o](v),c.c()),P(c,1),c.m(r,null))},i(v){i||(P(c),i=!0)},o(v){L(c),i=!1},d(v){v&&$(e),f[o].d()}}}function mr(l){let e,t,n,s=(l[2].service||l[2].name)+"",r,o,c,i=l[2].project+"",u,f,d=l[2].environment+"",v,h,m,g,y,C,k,z=Bt(l[2].deployed_at||l[2].created_at)+"",D,T,E,q,j=(l[2].deployed_by||l[2].user||"unknown")+"",R,O,F,I,V,J,U,A,M,G,N=l[2].comment&&hr(l);const H=[mu,vu],ee=[];function Q(W,le){return W[3].length===0?0:1}U=Q(l),A=ee[U]=H[U](l);let te=l[6].length>0&&br(l);return{c(){e=_("div"),t=_("div"),n=_("div"),r=S(s),o=b(),c=_("div"),u=S(i),f=S(" / "),v=S(d),h=b(),m=_("div"),g=_("label"),g.textContent="📍 Current Deployment",y=b(),C=_("div"),k=_("div"),D=S(z),T=b(),E=_("div"),q=S("by "),R=S(j),O=b(),N&&N.c(),F=b(),I=_("div"),V=_("label"),V.textContent="🎯 Rollback to",J=b(),A.c(),M=b(),te&&te.c(),p(n,"class","service-name svelte-cuxyqu"),p(c,"class","service-coords svelte-cuxyqu"),p(t,"class","service-info svelte-cuxyqu"),p(g,"class","svelte-cuxyqu"),p(k,"class","deploy-date svelte-cuxyqu"),p(E,"class","deploy-by svelte-cuxyqu"),p(C,"class","deployment-card current svelte-cuxyqu"),p(m,"class","section svelte-cuxyqu"),p(V,"class","svelte-cuxyqu"),p(I,"class","section svelte-cuxyqu"),p(e,"class","rollback-content svelte-cuxyqu")},m(W,le){w(W,e,le),a(e,t),a(t,n),a(n,r),a(t,o),a(t,c),a(c,u),a(c,f),a(c,v),a(e,h),a(e,m),a(m,g),a(m,y),a(m,C),a(C,k),a(k,D),a(C,T),a(C,E),a(E,q),a(E,R),a(C,O),N&&N.m(C,null),a(e,F),a(e,I),a(I,V),a(I,J),ee[U].m(I,null),a(e,M),te&&te.m(e,null),G=!0},p(W,le){(!G||le[0]&4)&&s!==(s=(W[2].service||W[2].name)+"")&&B(r,s),(!G||le[0]&4)&&i!==(i=W[2].project+"")&&B(u,i),(!G||le[0]&4)&&d!==(d=W[2].environment+"")&&B(v,d),(!G||le[0]&4)&&z!==(z=Bt(W[2].deployed_at||W[2].created_at)+"")&&B(D,z),(!G||le[0]&4)&&j!==(j=(W[2].deployed_by||W[2].user||"unknown")+"")&&B(R,j),W[2].comment?N?N.p(W,le):(N=hr(W),N.c(),N.m(C,null)):N&&(N.d(1),N=null);let K=U;U=Q(W),U===K?ee[U].p(W,le):(we(),L(ee[K],1,1,()=>{ee[K]=null}),ye(),A=ee[U],A?A.p(W,le):(A=ee[U]=H[U](W),A.c()),P(A,1),A.m(I,null)),W[6].length>0?te?te.p(W,le):(te=br(W),te.c(),te.m(e,null)):te&&(te.d(1),te=null)},i(W){G||(P(A),G=!0)},o(W){L(A),G=!1},d(W){W&&$(e),N&&N.d(),ee[U].d(),te&&te.d()}}}function hr(l){let e,t=l[2].comment+"",n;return{c(){e=_("div"),n=S(t),p(e,"class","deploy-comment svelte-cuxyqu")},m(s,r){w(s,e,r),a(e,n)},p(s,r){r[0]&4&&t!==(t=s[2].comment+"")&&B(n,t)},d(s){s&&$(e)}}}function vu(l){let e,t,n=de(l[3]),s=[];for(let o=0;o<n.length;o+=1)s[o]=gr(cr(l,n,o));const r=o=>L(s[o],1,1,()=>{s[o]=null});return{c(){e=_("div");for(let o=0;o<s.length;o+=1)s[o].c();p(e,"class","deployment-list svelte-cuxyqu")},m(o,c){w(o,e,c);for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(e,null);t=!0},p(o,c){if(c[0]&56){n=de(o[3]);let i;for(i=0;i<n.length;i+=1){const u=cr(o,n,i);s[i]?(s[i].p(u,c),P(s[i],1)):(s[i]=gr(u),s[i].c(),P(s[i],1),s[i].m(e,null))}for(we(),i=n.length;i<s.length;i+=1)r(i);ye()}},i(o){if(!t){for(let c=0;c<n.length;c+=1)P(s[c]);t=!0}},o(o){s=s.filter(Boolean);for(let c=0;c<s.length;c+=1)L(s[c]);t=!1},d(o){o&&$(e),Me(s,o)}}}function mu(l){let e;return{c(){e=_("div"),e.textContent="No previous deployments found",p(e,"class","no-deployments svelte-cuxyqu")},m(t,n){w(t,e,n)},p:ie,i:ie,o:ie,d(t){t&&$(e)}}}function hu(l){let e,t=l[75].id.substring(0,8)+"",n;return{c(){e=_("span"),n=S(t),p(e,"class","version-badge muted svelte-cuxyqu")},m(s,r){w(s,e,r),a(e,n)},p(s,r){r[0]&8&&t!==(t=s[75].id.substring(0,8)+"")&&B(n,t)},d(s){s&&$(e)}}}function gu(l){let e,t,n=l[75].version+"",s;return{c(){e=_("span"),t=S("v"),s=S(n),p(e,"class","version-badge svelte-cuxyqu")},m(r,o){w(r,e,o),a(e,t),a(e,s)},p(r,o){o[0]&8&&n!==(n=r[75].version+"")&&B(s,n)},d(r){r&&$(e)}}}function bu(l){let e=Wt(l[75])+"",t;return{c(){t=S(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&8&&e!==(e=Wt(n[75])+"")&&B(t,e)},d(n){n&&$(t)}}}function gr(l){let e,t,n,s=!1,r,o,c,i,u,f=Bt(l[75].deployed_at||l[75].created_at)+"",d,v,h,m,g=(l[75].deployed_by||l[75].user||"unknown")+"",y,C,k,z,D,T,E,q;function j(F,I){return F[75].version?gu:hu}let R=j(l),O=R(l);return k=new Re({props:{variant:Dl(Wt(l[75])),$$slots:{default:[bu]},$$scope:{ctx:l}}}),T=Ki(l[39][0]),{c(){e=_("label"),t=_("input"),r=b(),o=_("div"),O.c(),c=b(),i=_("div"),u=_("div"),d=S(f),v=b(),h=_("div"),m=S("by "),y=S(g),C=b(),x(k.$$.fragment),z=b(),p(t,"type","radio"),t.__value=n=l[75].id,ne(t,t.__value),t.disabled=l[5],p(t,"class","svelte-cuxyqu"),p(o,"class","deploy-version svelte-cuxyqu"),p(u,"class","deploy-date svelte-cuxyqu"),p(h,"class","deploy-by svelte-cuxyqu"),p(i,"class","deploy-info svelte-cuxyqu"),p(e,"class","deployment-option svelte-cuxyqu"),Ce(e,"selected",l[4]===l[75].id),T.p(t)},m(F,I){w(F,e,I),a(e,t),t.checked=t.__value===l[4],a(e,r),a(e,o),O.m(o,null),a(e,c),a(e,i),a(i,u),a(u,d),a(i,v),a(i,h),a(h,m),a(h,y),a(e,C),Z(k,e,null),a(e,z),D=!0,E||(q=se(t,"change",l[38]),E=!0)},p(F,I){(!D||I[0]&8&&n!==(n=F[75].id))&&(t.__value=n,ne(t,t.__value),s=!0),(!D||I[0]&32)&&(t.disabled=F[5]),(s||I[0]&24)&&(t.checked=t.__value===F[4]),R===(R=j(F))&&O?O.p(F,I):(O.d(1),O=R(F),O&&(O.c(),O.m(o,null))),(!D||I[0]&8)&&f!==(f=Bt(F[75].deployed_at||F[75].created_at)+"")&&B(d,f),(!D||I[0]&8)&&g!==(g=(F[75].deployed_by||F[75].user||"unknown")+"")&&B(y,g);const V={};I[0]&8&&(V.variant=Dl(Wt(F[75]))),I[0]&8|I[2]&1048576&&(V.$$scope={dirty:I,ctx:F}),k.$set(V),(!D||I[0]&24)&&Ce(e,"selected",F[4]===F[75].id)},i(F){D||(P(k.$$.fragment,F),D=!0)},o(F){L(k.$$.fragment,F),D=!1},d(F){F&&$(e),O.d(),X(k),T.r(),E=!1,q()}}}function br(l){let e,t,n,s,r,o=de(l[6]),c=[];for(let u=0;u<o.length;u+=1)c[u]=kr(ar(l,o,u));let i=l[5]&&$r();return{c(){e=_("div"),t=_("label"),t.textContent="📋 Progress",n=b(),s=_("div");for(let u=0;u<c.length;u+=1)c[u].c();r=b(),i&&i.c(),p(t,"class","svelte-cuxyqu"),p(s,"class","rollback-logs svelte-cuxyqu"),p(e,"class","section rollback-logs-section svelte-cuxyqu")},m(u,f){w(u,e,f),a(e,t),a(e,n),a(e,s);for(let d=0;d<c.length;d+=1)c[d]&&c[d].m(s,null);a(s,r),i&&i.m(s,null)},p(u,f){if(f[0]&64){o=de(u[6]);let d;for(d=0;d<o.length;d+=1){const v=ar(u,o,d);c[d]?c[d].p(v,f):(c[d]=kr(v),c[d].c(),c[d].m(s,r))}for(;d<c.length;d+=1)c[d].d(1);c.length=o.length}u[5]?i||(i=$r(),i.c(),i.m(s,null)):i&&(i.d(1),i=null)},d(u){u&&$(e),Me(c,u),i&&i.d()}}}function kr(l){let e,t=l[62].message+"",n,s;return{c(){e=_("div"),n=S(t),p(e,"class",s="log-entry log-"+l[62].type+" svelte-cuxyqu")},m(r,o){w(r,e,o),a(e,n)},p(r,o){o[0]&64&&t!==(t=r[62].message+"")&&B(n,t),o[0]&64&&s!==(s="log-entry log-"+r[62].type+" svelte-cuxyqu")&&p(e,"class",s)},d(r){r&&$(e)}}}function $r(l){let e;return{c(){e=_("div"),e.innerHTML='<span class="spinner svelte-cuxyqu">⏳</span> Working...',p(e,"class","log-entry log-info svelte-cuxyqu")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function ku(l){let e,t,n=l[2]&&mr(l);return{c(){n&&n.c(),e=Ne()},m(s,r){n&&n.m(s,r),w(s,e,r),t=!0},p(s,r){s[2]?n?(n.p(s,r),r[0]&4&&P(n,1)):(n=mr(s),n.c(),P(n,1),n.m(e.parentNode,e)):n&&(we(),L(n,1,1,()=>{n=null}),ye())},i(s){t||(P(n),t=!0)},o(s){L(n),t=!1},d(s){s&&$(e),n&&n.d(s)}}}function $u(l){let e=l[6].length>0?"Close":"Cancel",t;return{c(){t=S(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&64&&e!==(e=n[6].length>0?"Close":"Cancel")&&B(t,e)},d(n){n&&$(t)}}}function wu(l){let e;return{c(){e=S("⏪ Execute Rollback")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function yu(l){let e;return{c(){e=S("⏳ Rolling back...")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Cu(l){let e;function t(r,o){return r[5]?yu:wu}let n=t(l),s=n(l);return{c(){s.c(),e=Ne()},m(r,o){s.m(r,o),w(r,e,o)},p(r,o){n!==(n=t(r))&&(s.d(1),s=n(r),s&&(s.c(),s.m(e.parentNode,e)))},d(r){r&&$(e),s.d(r)}}}function Su(l){let e,t,n,s,r;return t=new qe({props:{variant:"ghost",$$slots:{default:[$u]},$$scope:{ctx:l}}}),t.$on("click",l[37]),s=new qe({props:{variant:"warning",disabled:!l[4]||l[5],$$slots:{default:[Cu]},$$scope:{ctx:l}}}),s.$on("click",l[25]),{c(){e=_("div"),x(t.$$.fragment),n=b(),x(s.$$.fragment),p(e,"slot","footer")},m(o,c){w(o,e,c),Z(t,e,null),a(e,n),Z(s,e,null),r=!0},p(o,c){const i={};c[0]&64|c[2]&1048576&&(i.$$scope={dirty:c,ctx:o}),t.$set(i);const u={};c[0]&48&&(u.disabled=!o[4]||o[5]),c[0]&32|c[2]&1048576&&(u.$$scope={dirty:c,ctx:o}),s.$set(u)},i(o){r||(P(t.$$.fragment,o),P(s.$$.fragment,o),r=!0)},o(o){L(t.$$.fragment,o),L(s.$$.fragment,o),r=!1},d(o){o&&$(e),X(t),X(s)}}}function wr(l){let e,t,n,s=(l[14].service_name||l[14].service)+"",r,o,c,i=l[14].environment+"",u,f,d=Bt(l[14].deployed_at)+"",v,h,m,g,y;const C=[qu,zu],k=[];function z(T,E){return T[14].config_snapshot?0:1}function D(T,E){return E===0?su(T):T}return m=z(l),g=k[m]=C[m](D(l,m)),{c(){e=_("div"),t=_("div"),n=_("span"),r=S(s),o=b(),c=_("span"),u=S(i),f=S(" • "),v=S(d),h=b(),g.c(),p(n,"class","service-name svelte-cuxyqu"),p(c,"class","meta svelte-cuxyqu"),p(t,"class","config-header-info svelte-cuxyqu"),p(e,"class","config-content svelte-cuxyqu")},m(T,E){w(T,e,E),a(e,t),a(t,n),a(n,r),a(t,o),a(t,c),a(c,u),a(c,f),a(c,v),a(e,h),k[m].m(e,null),y=!0},p(T,E){(!y||E[0]&16384)&&s!==(s=(T[14].service_name||T[14].service)+"")&&B(r,s),(!y||E[0]&16384)&&i!==(i=T[14].environment+"")&&B(u,i),(!y||E[0]&16384)&&d!==(d=Bt(T[14].deployed_at)+"")&&B(v,d);let q=m;m=z(T),m===q?k[m].p(D(T,m),E):(we(),L(k[q],1,1,()=>{k[q]=null}),ye(),g=k[m],g?g.p(D(T,m),E):(g=k[m]=C[m](D(T,m)),g.c()),P(g,1),g.m(e,null))},i(T){y||(P(g),y=!0)},o(T){L(g),y=!1},d(T){T&&$(e),k[m].d()}}}function zu(l){let e;return{c(){e=_("div"),e.textContent="No config snapshot available",p(e,"class","no-config svelte-cuxyqu")},m(t,n){w(t,e,n)},p:ie,i:ie,o:ie,d(t){t&&$(e)}}}function qu(l){var $e,_e;let e,t,n,s,r,o,c=(l[65].source_type||"-")+"",i,u,f,d,v,h,m,g,y=(l[65].port||"-")+"",C,k,z,D,T,E,q,j,R,O,F=l[65].env_vars&&Object.keys(l[65].env_vars).length>0,I,V,J,U=l[65].git_url&&yr(l),A=l[65].git_branch&&Cr(l),M=l[65].image&&Sr(l),G=l[65].container_port&&zr(l),N=l[65].host_port&&qr(l),H=l[65].snapshot_id&&Dr(l),ee=l[65].region&&Tr(l),Q=l[65].size&&Pr(l),te=(($e=l[65].server_ips)==null?void 0:$e.length)&&Er(l),W=l[65].setup_domain&&Lr(),le=l[65].base_domain&&Mr(l),K=F&&jr(l),oe=((_e=l[65].tags)==null?void 0:_e.length)&&Rr(l);return{c(){e=_("table"),t=_("tbody"),n=_("tr"),s=_("td"),s.textContent="Source Type",r=_("td"),o=_("strong"),i=S(c),u=b(),U&&U.c(),f=b(),A&&A.c(),d=b(),M&&M.c(),v=b(),h=_("tr"),m=_("td"),m.textContent="Port",g=_("td"),C=S(y),k=b(),G&&G.c(),z=b(),N&&N.c(),D=b(),H&&H.c(),T=b(),ee&&ee.c(),E=b(),Q&&Q.c(),q=b(),te&&te.c(),j=b(),W&&W.c(),R=b(),le&&le.c(),O=b(),K&&K.c(),I=b(),oe&&oe.c(),V=Ne(),p(s,"class","label svelte-cuxyqu"),p(r,"class","svelte-cuxyqu"),p(m,"class","label svelte-cuxyqu"),p(g,"class","svelte-cuxyqu"),p(t,"class","svelte-cuxyqu"),p(e,"class","config-table svelte-cuxyqu")},m(re,he){w(re,e,he),a(e,t),a(t,n),a(n,s),a(n,r),a(r,o),a(o,i),a(t,u),U&&U.m(t,null),a(t,f),A&&A.m(t,null),a(t,d),M&&M.m(t,null),a(t,v),a(t,h),a(h,m),a(h,g),a(g,C),a(t,k),G&&G.m(t,null),a(t,z),N&&N.m(t,null),a(t,D),H&&H.m(t,null),a(t,T),ee&&ee.m(t,null),a(t,E),Q&&Q.m(t,null),a(t,q),te&&te.m(t,null),a(t,j),W&&W.m(t,null),a(t,R),le&&le.m(t,null),w(re,O,he),K&&K.m(re,he),w(re,I,he),oe&&oe.m(re,he),w(re,V,he),J=!0},p(re,he){var be,ue;(!J||he[0]&16384)&&c!==(c=(re[65].source_type||"-")+"")&&B(i,c),re[65].git_url?U?U.p(re,he):(U=yr(re),U.c(),U.m(t,f)):U&&(U.d(1),U=null),re[65].git_branch?A?A.p(re,he):(A=Cr(re),A.c(),A.m(t,d)):A&&(A.d(1),A=null),re[65].image?M?M.p(re,he):(M=Sr(re),M.c(),M.m(t,v)):M&&(M.d(1),M=null),(!J||he[0]&16384)&&y!==(y=(re[65].port||"-")+"")&&B(C,y),re[65].container_port?G?G.p(re,he):(G=zr(re),G.c(),G.m(t,z)):G&&(G.d(1),G=null),re[65].host_port?N?N.p(re,he):(N=qr(re),N.c(),N.m(t,D)):N&&(N.d(1),N=null),re[65].snapshot_id?H?H.p(re,he):(H=Dr(re),H.c(),H.m(t,T)):H&&(H.d(1),H=null),re[65].region?ee?ee.p(re,he):(ee=Tr(re),ee.c(),ee.m(t,E)):ee&&(ee.d(1),ee=null),re[65].size?Q?Q.p(re,he):(Q=Pr(re),Q.c(),Q.m(t,q)):Q&&(Q.d(1),Q=null),(be=re[65].server_ips)!=null&&be.length?te?te.p(re,he):(te=Er(re),te.c(),te.m(t,j)):te&&(te.d(1),te=null),re[65].setup_domain?W||(W=Lr(),W.c(),W.m(t,R)):W&&(W.d(1),W=null),re[65].base_domain?le?le.p(re,he):(le=Mr(re),le.c(),le.m(t,null)):le&&(le.d(1),le=null),he[0]&16384&&(F=re[65].env_vars&&Object.keys(re[65].env_vars).length>0),F?K?K.p(re,he):(K=jr(re),K.c(),K.m(I.parentNode,I)):K&&(K.d(1),K=null),(ue=re[65].tags)!=null&&ue.length?oe?(oe.p(re,he),he[0]&16384&&P(oe,1)):(oe=Rr(re),oe.c(),P(oe,1),oe.m(V.parentNode,V)):oe&&(we(),L(oe,1,1,()=>{oe=null}),ye())},i(re){J||(P(oe),J=!0)},o(re){L(oe),J=!1},d(re){re&&($(e),$(O),$(I),$(V)),U&&U.d(),A&&A.d(),M&&M.d(),G&&G.d(),N&&N.d(),H&&H.d(),ee&&ee.d(),Q&&Q.d(),te&&te.d(),W&&W.d(),le&&le.d(),K&&K.d(re),oe&&oe.d(re)}}}function yr(l){let e,t,n,s=l[65].git_url+"",r;return{c(){e=_("tr"),t=_("td"),t.textContent="Git URL",n=_("td"),r=S(s),p(t,"class","label svelte-cuxyqu"),p(n,"class","svelte-cuxyqu")},m(o,c){w(o,e,c),a(e,t),a(e,n),a(n,r)},p(o,c){c[0]&16384&&s!==(s=o[65].git_url+"")&&B(r,s)},d(o){o&&$(e)}}}function Cr(l){let e,t,n,s=l[65].git_branch+"",r;return{c(){e=_("tr"),t=_("td"),t.textContent="Git Branch",n=_("td"),r=S(s),p(t,"class","label svelte-cuxyqu"),p(n,"class","svelte-cuxyqu")},m(o,c){w(o,e,c),a(e,t),a(e,n),a(n,r)},p(o,c){c[0]&16384&&s!==(s=o[65].git_branch+"")&&B(r,s)},d(o){o&&$(e)}}}function Sr(l){let e,t,n,s=l[65].image+"",r;return{c(){e=_("tr"),t=_("td"),t.textContent="Image",n=_("td"),r=S(s),p(t,"class","label svelte-cuxyqu"),p(n,"class","svelte-cuxyqu")},m(o,c){w(o,e,c),a(e,t),a(e,n),a(n,r)},p(o,c){c[0]&16384&&s!==(s=o[65].image+"")&&B(r,s)},d(o){o&&$(e)}}}function zr(l){let e,t,n,s=l[65].container_port+"",r;return{c(){e=_("tr"),t=_("td"),t.textContent="Container Port",n=_("td"),r=S(s),p(t,"class","label svelte-cuxyqu"),p(n,"class","svelte-cuxyqu")},m(o,c){w(o,e,c),a(e,t),a(e,n),a(n,r)},p(o,c){c[0]&16384&&s!==(s=o[65].container_port+"")&&B(r,s)},d(o){o&&$(e)}}}function qr(l){let e,t,n,s=l[65].host_port+"",r;return{c(){e=_("tr"),t=_("td"),t.textContent="Host Port",n=_("td"),r=S(s),p(t,"class","label svelte-cuxyqu"),p(n,"class","svelte-cuxyqu")},m(o,c){w(o,e,c),a(e,t),a(e,n),a(n,r)},p(o,c){c[0]&16384&&s!==(s=o[65].host_port+"")&&B(r,s)},d(o){o&&$(e)}}}function Dr(l){let e,t,n,s=l[65].snapshot_id+"",r;return{c(){e=_("tr"),t=_("td"),t.textContent="Snapshot ID",n=_("td"),r=S(s),p(t,"class","label svelte-cuxyqu"),p(n,"class","svelte-cuxyqu")},m(o,c){w(o,e,c),a(e,t),a(e,n),a(n,r)},p(o,c){c[0]&16384&&s!==(s=o[65].snapshot_id+"")&&B(r,s)},d(o){o&&$(e)}}}function Tr(l){let e,t,n,s=l[65].region+"",r;return{c(){e=_("tr"),t=_("td"),t.textContent="Region",n=_("td"),r=S(s),p(t,"class","label svelte-cuxyqu"),p(n,"class","svelte-cuxyqu")},m(o,c){w(o,e,c),a(e,t),a(e,n),a(n,r)},p(o,c){c[0]&16384&&s!==(s=o[65].region+"")&&B(r,s)},d(o){o&&$(e)}}}function Pr(l){let e,t,n,s=l[65].size+"",r;return{c(){e=_("tr"),t=_("td"),t.textContent="Size",n=_("td"),r=S(s),p(t,"class","label svelte-cuxyqu"),p(n,"class","svelte-cuxyqu")},m(o,c){w(o,e,c),a(e,t),a(e,n),a(n,r)},p(o,c){c[0]&16384&&s!==(s=o[65].size+"")&&B(r,s)},d(o){o&&$(e)}}}function Er(l){let e,t,n,s=l[65].server_ips.join(", ")+"",r;return{c(){e=_("tr"),t=_("td"),t.textContent="Servers",n=_("td"),r=S(s),p(t,"class","label svelte-cuxyqu"),p(n,"class","svelte-cuxyqu")},m(o,c){w(o,e,c),a(e,t),a(e,n),a(n,r)},p(o,c){c[0]&16384&&s!==(s=o[65].server_ips.join(", ")+"")&&B(r,s)},d(o){o&&$(e)}}}function Lr(l){let e;return{c(){e=_("tr"),e.innerHTML='<td class="label svelte-cuxyqu">Setup Domain</td><td class="svelte-cuxyqu">Yes</td>'},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Mr(l){let e,t,n,s=l[65].base_domain+"",r;return{c(){e=_("tr"),t=_("td"),t.textContent="Base Domain",n=_("td"),r=S(s),p(t,"class","label svelte-cuxyqu"),p(n,"class","svelte-cuxyqu")},m(o,c){w(o,e,c),a(e,t),a(e,n),a(n,r)},p(o,c){c[0]&16384&&s!==(s=o[65].base_domain+"")&&B(r,s)},d(o){o&&$(e)}}}function jr(l){let e,t,n,s,r=de(Object.entries(l[65].env_vars)),o=[];for(let c=0;c<r.length;c+=1)o[c]=Nr(ir(l,r,c));return{c(){e=_("div"),t=_("div"),t.textContent="Environment Variables",n=b(),s=_("div");for(let c=0;c<o.length;c+=1)o[c].c();p(t,"class","section-title svelte-cuxyqu"),p(s,"class","env-list svelte-cuxyqu"),p(e,"class","env-section svelte-cuxyqu")},m(c,i){w(c,e,i),a(e,t),a(e,n),a(e,s);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(s,null)},p(c,i){if(i[0]&16384){r=de(Object.entries(c[65].env_vars));let u;for(u=0;u<r.length;u+=1){const f=ir(c,r,u);o[u]?o[u].p(f,i):(o[u]=Nr(f),o[u].c(),o[u].m(s,null))}for(;u<o.length;u+=1)o[u].d(1);o.length=r.length}},d(c){c&&$(e),Me(o,c)}}}function Nr(l){let e,t=l[69]+"",n,s,r=(l[70].length>20?l[70].substring(0,20)+"...":l[70])+"",o;return{c(){e=_("div"),n=S(t),s=S("="),o=S(r),p(e,"class","env-item svelte-cuxyqu")},m(c,i){w(c,e,i),a(e,n),a(e,s),a(e,o)},p(c,i){i[0]&16384&&t!==(t=c[69]+"")&&B(n,t),i[0]&16384&&r!==(r=(c[70].length>20?c[70].substring(0,20)+"...":c[70])+"")&&B(o,r)},d(c){c&&$(e)}}}function Rr(l){let e,t,n,s,r,o=de(l[65].tags),c=[];for(let u=0;u<o.length;u+=1)c[u]=Ar(rr(l,o,u));const i=u=>L(c[u],1,1,()=>{c[u]=null});return{c(){e=_("div"),t=_("div"),t.textContent="Tags",n=b(),s=_("div");for(let u=0;u<c.length;u+=1)c[u].c();p(t,"class","section-title svelte-cuxyqu"),p(s,"class","tags-list svelte-cuxyqu"),p(e,"class","tags-section svelte-cuxyqu")},m(u,f){w(u,e,f),a(e,t),a(e,n),a(e,s);for(let d=0;d<c.length;d+=1)c[d]&&c[d].m(s,null);r=!0},p(u,f){if(f[0]&16384){o=de(u[65].tags);let d;for(d=0;d<o.length;d+=1){const v=rr(u,o,d);c[d]?(c[d].p(v,f),P(c[d],1)):(c[d]=Ar(v),c[d].c(),P(c[d],1),c[d].m(s,null))}for(we(),d=o.length;d<c.length;d+=1)i(d);ye()}},i(u){if(!r){for(let f=0;f<o.length;f+=1)P(c[f]);r=!0}},o(u){c=c.filter(Boolean);for(let f=0;f<c.length;f+=1)L(c[f]);r=!1},d(u){u&&$(e),Me(c,u)}}}function Du(l){let e=l[66]+"",t;return{c(){t=S(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&16384&&e!==(e=n[66]+"")&&B(t,e)},d(n){n&&$(t)}}}function Ar(l){let e,t;return e=new Re({props:{$$slots:{default:[Du]},$$scope:{ctx:l}}}),{c(){x(e.$$.fragment)},m(n,s){Z(e,n,s),t=!0},p(n,s){const r={};s[0]&16384|s[2]&1048576&&(r.$$scope={dirty:s,ctx:n}),e.$set(r)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){X(e,n)}}}function Tu(l){let e,t,n=l[14]&&wr(l);return{c(){n&&n.c(),e=Ne()},m(s,r){n&&n.m(s,r),w(s,e,r),t=!0},p(s,r){s[14]?n?(n.p(s,r),r[0]&16384&&P(n,1)):(n=wr(s),n.c(),P(n,1),n.m(e.parentNode,e)):n&&(we(),L(n,1,1,()=>{n=null}),ye())},i(s){t||(P(n),t=!0)},o(s){L(n),t=!1},d(s){s&&$(e),n&&n.d(s)}}}function Pu(l){let e;return{c(){e=S("🚀 Redeploy with this config")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Eu(l){let e;return{c(){e=S("Close")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Lu(l){let e,t,n,s,r;return t=new qe({props:{variant:"primary",$$slots:{default:[Pu]},$$scope:{ctx:l}}}),t.$on("click",l[22]),s=new qe({props:{variant:"ghost",$$slots:{default:[Eu]},$$scope:{ctx:l}}}),s.$on("click",l[42]),{c(){e=_("div"),x(t.$$.fragment),n=b(),x(s.$$.fragment),p(e,"slot","footer")},m(o,c){w(o,e,c),Z(t,e,null),a(e,n),Z(s,e,null),r=!0},p(o,c){const i={};c[2]&1048576&&(i.$$scope={dirty:c,ctx:o}),t.$set(i);const u={};c[2]&1048576&&(u.$$scope={dirty:c,ctx:o}),s.$set(u)},i(o){r||(P(t.$$.fragment,o),P(s.$$.fragment,o),r=!0)},o(o){L(t.$$.fragment,o),L(s.$$.fragment,o),r=!1},d(o){o&&$(e),X(t),X(s)}}}function Or(l){let e,t,n,s=(l[16].service||l[16].name)+"",r,o,c,i=l[16].environment+"",u,f,d=Bt(l[16].deployed_at)+"",v,h,m,g,y,C,k=l[16].version&&Fr(l);g=new Re({props:{variant:Dl(Wt(l[16])),$$slots:{default:[ju]},$$scope:{ctx:l}}});function z(E,q){return E[18]?Au:E[17].length===0?Ru:Nu}let D=z(l),T=D(l);return{c(){e=_("div"),t=_("div"),n=_("span"),r=S(s),o=b(),c=_("span"),u=S(i),f=S(" • "),v=S(d),h=b(),k&&k.c(),m=b(),x(g.$$.fragment),y=b(),T.c(),p(n,"class","service-name svelte-cuxyqu"),p(c,"class","meta svelte-cuxyqu"),p(t,"class","logs-header-info svelte-cuxyqu"),p(e,"class","logs-modal-content svelte-cuxyqu")},m(E,q){w(E,e,q),a(e,t),a(t,n),a(n,r),a(t,o),a(t,c),a(c,u),a(c,f),a(c,v),a(t,h),k&&k.m(t,null),a(t,m),Z(g,t,null),a(e,y),T.m(e,null),C=!0},p(E,q){(!C||q[0]&65536)&&s!==(s=(E[16].service||E[16].name)+"")&&B(r,s),(!C||q[0]&65536)&&i!==(i=E[16].environment+"")&&B(u,i),(!C||q[0]&65536)&&d!==(d=Bt(E[16].deployed_at)+"")&&B(v,d),E[16].version?k?(k.p(E,q),q[0]&65536&&P(k,1)):(k=Fr(E),k.c(),P(k,1),k.m(t,m)):k&&(we(),L(k,1,1,()=>{k=null}),ye());const j={};q[0]&65536&&(j.variant=Dl(Wt(E[16]))),q[0]&65536|q[2]&1048576&&(j.$$scope={dirty:q,ctx:E}),g.$set(j),D===(D=z(E))&&T?T.p(E,q):(T.d(1),T=D(E),T&&(T.c(),T.m(e,null)))},i(E){C||(P(k),P(g.$$.fragment,E),C=!0)},o(E){L(k),L(g.$$.fragment,E),C=!1},d(E){E&&$(e),k&&k.d(),X(g),T.d()}}}function Fr(l){let e,t;return e=new Re({props:{variant:"purple",$$slots:{default:[Mu]},$$scope:{ctx:l}}}),{c(){x(e.$$.fragment)},m(n,s){Z(e,n,s),t=!0},p(n,s){const r={};s[0]&65536|s[2]&1048576&&(r.$$scope={dirty:s,ctx:n}),e.$set(r)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){X(e,n)}}}function Mu(l){let e,t=l[16].version+"",n;return{c(){e=S("v"),n=S(t)},m(s,r){w(s,e,r),w(s,n,r)},p(s,r){r[0]&65536&&t!==(t=s[16].version+"")&&B(n,t)},d(s){s&&($(e),$(n))}}}function ju(l){let e=Wt(l[16])+"",t;return{c(){t=S(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&65536&&e!==(e=Wt(n[16])+"")&&B(t,e)},d(n){n&&$(t)}}}function Nu(l){let e,t=de(l[17]),n=[];for(let s=0;s<t.length;s+=1)n[s]=Br(or(l,t,s));return{c(){e=_("div");for(let s=0;s<n.length;s+=1)n[s].c();p(e,"class","logs-container svelte-cuxyqu")},m(s,r){w(s,e,r);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null)},p(s,r){if(r[0]&131072){t=de(s[17]);let o;for(o=0;o<t.length;o+=1){const c=or(s,t,o);n[o]?n[o].p(c,r):(n[o]=Br(c),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=t.length}},d(s){s&&$(e),Me(n,s)}}}function Ru(l){let e;return{c(){e=_("div"),e.textContent="No logs available for this deployment",p(e,"class","no-logs svelte-cuxyqu")},m(t,n){w(t,e,n)},p:ie,d(t){t&&$(e)}}}function Au(l){let e;return{c(){e=_("div"),e.textContent="Loading logs...",p(e,"class","logs-loading svelte-cuxyqu")},m(t,n){w(t,e,n)},p:ie,d(t){t&&$(e)}}}function Br(l){let e,t,n=(l[62].timestamp?new Date(l[62].timestamp).toLocaleTimeString():"")+"",s,r,o,c=l[62].message+"",i,u;return{c(){e=_("div"),t=_("span"),s=S(n),r=b(),o=_("span"),i=S(c),u=b(),p(t,"class","log-time svelte-cuxyqu"),p(o,"class","log-message svelte-cuxyqu"),p(e,"class","log-line svelte-cuxyqu")},m(f,d){w(f,e,d),a(e,t),a(t,s),a(e,r),a(e,o),a(o,i),a(e,u)},p(f,d){d[0]&131072&&n!==(n=(f[62].timestamp?new Date(f[62].timestamp).toLocaleTimeString():"")+"")&&B(s,n),d[0]&131072&&c!==(c=f[62].message+"")&&B(i,c)},d(f){f&&$(e)}}}function Ou(l){let e,t,n=l[16]&&Or(l);return{c(){n&&n.c(),e=Ne()},m(s,r){n&&n.m(s,r),w(s,e,r),t=!0},p(s,r){s[16]?n?(n.p(s,r),r[0]&65536&&P(n,1)):(n=Or(s),n.c(),P(n,1),n.m(e.parentNode,e)):n&&(we(),L(n,1,1,()=>{n=null}),ye())},i(s){t||(P(n),t=!0)},o(s){L(n),t=!1},d(s){s&&$(e),n&&n.d(s)}}}function Fu(l){let e;return{c(){e=S("Close")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Bu(l){let e,t,n;return t=new qe({props:{variant:"ghost",$$slots:{default:[Fu]},$$scope:{ctx:l}}}),t.$on("click",l[45]),{c(){e=_("div"),x(t.$$.fragment),p(e,"slot","footer")},m(s,r){w(s,e,r),Z(t,e,null),n=!0},p(s,r){const o={};r[2]&1048576&&(o.$$scope={dirty:r,ctx:s}),t.$set(o)},i(s){n||(P(t.$$.fragment,s),n=!0)},o(s){L(t.$$.fragment,s),n=!1},d(s){s&&$(e),X(t)}}}function Iu(l){let e,t,n,s=l[10].length+"",r,o,c,i,u,f,d=de(l[10]),v=[];for(let g=0;g<d.length;g+=1)v[g]=Ir(nr(l,d,g));const h=g=>L(v[g],1,1,()=>{v[g]=null});let m=l[11].length>0&&Ur(l);return{c(){e=_("div"),t=_("p"),n=_("strong"),r=S(s),o=S(" server(s) from the original deployment are unavailable:"),c=b(),i=_("div");for(let g=0;g<v.length;g+=1)v[g].c();u=b(),m&&m.c(),p(t,"class","svelte-cuxyqu"),p(i,"class","confirm-server-list unavailable svelte-cuxyqu"),p(e,"class","rollback-confirm-content svelte-cuxyqu")},m(g,y){w(g,e,y),a(e,t),a(t,n),a(n,r),a(t,o),a(e,c),a(e,i);for(let C=0;C<v.length;C+=1)v[C]&&v[C].m(i,null);a(e,u),m&&m.m(e,null),f=!0},p(g,y){if((!f||y[0]&1024)&&s!==(s=g[10].length+"")&&B(r,s),y[0]&1024){d=de(g[10]);let C;for(C=0;C<d.length;C+=1){const k=nr(g,d,C);v[C]?(v[C].p(k,y),P(v[C],1)):(v[C]=Ir(k),v[C].c(),P(v[C],1),v[C].m(i,null))}for(we(),C=d.length;C<v.length;C+=1)h(C);ye()}g[11].length>0?m?(m.p(g,y),y[0]&2048&&P(m,1)):(m=Ur(g),m.c(),P(m,1),m.m(e,null)):m&&(we(),L(m,1,1,()=>{m=null}),ye())},i(g){if(!f){for(let y=0;y<d.length;y+=1)P(v[y]);P(m),f=!0}},o(g){v=v.filter(Boolean);for(let y=0;y<v.length;y+=1)L(v[y]);L(m),f=!1},d(g){g&&$(e),Me(v,g),m&&m.d()}}}function Uu(l){let e,t,n,s,r=l[11].length+"",o,c,i,u=l[11].length+l[9].length+"",f,d,v,h,m,g,y=de(l[9]),C=[];for(let k=0;k<y.length;k+=1)C[k]=Gr(sr(l,y,k));return{c(){e=_("div"),t=_("p"),n=S("Rolling back will restore to "),s=_("strong"),o=S(r),c=S(` servers.
        Service currently runs on `),i=_("strong"),f=S(u),d=S(" servers."),v=b(),h=_("p"),h.textContent="Stop containers on the following servers?",m=b(),g=_("div");for(let k=0;k<C.length;k+=1)C[k].c();p(t,"class","svelte-cuxyqu"),p(h,"class","svelte-cuxyqu"),p(g,"class","confirm-server-list svelte-cuxyqu"),p(e,"class","rollback-confirm-content svelte-cuxyqu")},m(k,z){w(k,e,z),a(e,t),a(t,n),a(t,s),a(s,o),a(t,c),a(t,i),a(i,f),a(t,d),a(e,v),a(e,h),a(e,m),a(e,g);for(let D=0;D<C.length;D+=1)C[D]&&C[D].m(g,null)},p(k,z){if(z[0]&2048&&r!==(r=k[11].length+"")&&B(o,r),z[0]&2560&&u!==(u=k[11].length+k[9].length+"")&&B(f,u),z[0]&512){y=de(k[9]);let D;for(D=0;D<y.length;D+=1){const T=sr(k,y,D);C[D]?C[D].p(T,z):(C[D]=Gr(T),C[D].c(),C[D].m(g,null))}for(;D<C.length;D+=1)C[D].d(1);C.length=y.length}},i:ie,o:ie,d(k){k&&$(e),Me(C,k)}}}function Hu(l){let e;return{c(){e=S("offline")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Ir(l){let e,t,n=(l[55].name||l[55].ip)+"",s,r,o,c=l[55].ip+"",i,u,f,d,v;return f=new Re({props:{variant:"error",$$slots:{default:[Hu]},$$scope:{ctx:l}}}),{c(){e=_("div"),t=_("span"),s=S(n),r=b(),o=_("span"),i=S(c),u=b(),x(f.$$.fragment),d=b(),p(t,"class","server-name svelte-cuxyqu"),p(o,"class","server-ip svelte-cuxyqu"),p(e,"class","confirm-server-item svelte-cuxyqu")},m(h,m){w(h,e,m),a(e,t),a(t,s),a(e,r),a(e,o),a(o,i),a(e,u),Z(f,e,null),a(e,d),v=!0},p(h,m){(!v||m[0]&1024)&&n!==(n=(h[55].name||h[55].ip)+"")&&B(s,n),(!v||m[0]&1024)&&c!==(c=h[55].ip+"")&&B(i,c);const g={};m[2]&1048576&&(g.$$scope={dirty:m,ctx:h}),f.$set(g)},i(h){v||(P(f.$$.fragment,h),v=!0)},o(h){L(f.$$.fragment,h),v=!1},d(h){h&&$(e),X(f)}}}function Ur(l){let e,t,n=l[11].length+"",s,r,o,c,i,u=de(l[11]),f=[];for(let v=0;v<u.length;v+=1)f[v]=Hr(lr(l,u,v));const d=v=>L(f[v],1,1,()=>{f[v]=null});return{c(){e=_("p"),t=S("Available servers ("),s=S(n),r=S("):"),o=b(),c=_("div");for(let v=0;v<f.length;v+=1)f[v].c();p(e,"class","svelte-cuxyqu"),p(c,"class","confirm-server-list available svelte-cuxyqu")},m(v,h){w(v,e,h),a(e,t),a(e,s),a(e,r),w(v,o,h),w(v,c,h);for(let m=0;m<f.length;m+=1)f[m]&&f[m].m(c,null);i=!0},p(v,h){if((!i||h[0]&2048)&&n!==(n=v[11].length+"")&&B(s,n),h[0]&2048){u=de(v[11]);let m;for(m=0;m<u.length;m+=1){const g=lr(v,u,m);f[m]?(f[m].p(g,h),P(f[m],1)):(f[m]=Hr(g),f[m].c(),P(f[m],1),f[m].m(c,null))}for(we(),m=u.length;m<f.length;m+=1)d(m);ye()}},i(v){if(!i){for(let h=0;h<u.length;h+=1)P(f[h]);i=!0}},o(v){f=f.filter(Boolean);for(let h=0;h<f.length;h+=1)L(f[h]);i=!1},d(v){v&&($(e),$(o),$(c)),Me(f,v)}}}function Gu(l){let e;return{c(){e=S("online")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Hr(l){let e,t,n=(l[55].name||l[55].ip)+"",s,r,o,c=l[55].ip+"",i,u,f,d,v;return f=new Re({props:{variant:"success",$$slots:{default:[Gu]},$$scope:{ctx:l}}}),{c(){e=_("div"),t=_("span"),s=S(n),r=b(),o=_("span"),i=S(c),u=b(),x(f.$$.fragment),d=b(),p(t,"class","server-name svelte-cuxyqu"),p(o,"class","server-ip svelte-cuxyqu"),p(e,"class","confirm-server-item svelte-cuxyqu")},m(h,m){w(h,e,m),a(e,t),a(t,s),a(e,r),a(e,o),a(o,i),a(e,u),Z(f,e,null),a(e,d),v=!0},p(h,m){(!v||m[0]&2048)&&n!==(n=(h[55].name||h[55].ip)+"")&&B(s,n),(!v||m[0]&2048)&&c!==(c=h[55].ip+"")&&B(i,c);const g={};m[2]&1048576&&(g.$$scope={dirty:m,ctx:h}),f.$set(g)},i(h){v||(P(f.$$.fragment,h),v=!0)},o(h){L(f.$$.fragment,h),v=!1},d(h){h&&$(e),X(f)}}}function Gr(l){let e,t,n=(l[55].name||l[55].ip)+"",s,r,o,c=l[55].ip+"",i,u;return{c(){e=_("div"),t=_("span"),s=S(n),r=b(),o=_("span"),i=S(c),u=b(),p(t,"class","server-name svelte-cuxyqu"),p(o,"class","server-ip svelte-cuxyqu"),p(e,"class","confirm-server-item svelte-cuxyqu")},m(f,d){w(f,e,d),a(e,t),a(t,s),a(e,r),a(e,o),a(o,i),a(e,u)},p(f,d){d[0]&512&&n!==(n=(f[55].name||f[55].ip)+"")&&B(s,n),d[0]&512&&c!==(c=f[55].ip+"")&&B(i,c)},d(f){f&&$(e)}}}function Wu(l){let e,t,n,s;const r=[Uu,Iu],o=[];function c(i,u){return i[8]==="cleanup"?0:i[8]==="missing"?1:-1}return~(e=c(l))&&(t=o[e]=r[e](l)),{c(){t&&t.c(),n=Ne()},m(i,u){~e&&o[e].m(i,u),w(i,n,u),s=!0},p(i,u){let f=e;e=c(i),e===f?~e&&o[e].p(i,u):(t&&(we(),L(o[f],1,1,()=>{o[f]=null}),ye()),~e?(t=o[e],t?t.p(i,u):(t=o[e]=r[e](i),t.c()),P(t,1),t.m(n.parentNode,n)):t=null)},i(i){s||(P(t),s=!0)},o(i){L(t),s=!1},d(i){i&&$(n),~e&&o[e].d(i)}}}function Ju(l){let e,t;return e=new qe({props:{variant:"primary",$$slots:{default:[Yu]},$$scope:{ctx:l}}}),e.$on("click",l[27]),{c(){x(e.$$.fragment)},m(n,s){Z(e,n,s),t=!0},p(n,s){const r={};s[2]&1048576&&(r.$$scope={dirty:s,ctx:n}),e.$set(r)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){X(e,n)}}}function Vu(l){let e,t;return e=new qe({props:{variant:"primary",$$slots:{default:[Ku]},$$scope:{ctx:l}}}),e.$on("click",l[26]),{c(){x(e.$$.fragment)},m(n,s){Z(e,n,s),t=!0},p(n,s){const r={};s[2]&1048576&&(r.$$scope={dirty:s,ctx:n}),e.$set(r)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){X(e,n)}}}function Yu(l){let e;return{c(){e=S("Proceed with available only")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Ku(l){let e;return{c(){e=S("Proceed")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Qu(l){let e;return{c(){e=S("Cancel")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Zu(l){let e,t,n,s,r,o;const c=[Vu,Ju],i=[];function u(f,d){return f[8]==="cleanup"?0:f[8]==="missing"&&f[11].length>0?1:-1}return~(t=u(l))&&(n=i[t]=c[t](l)),r=new qe({props:{variant:"ghost",$$slots:{default:[Qu]},$$scope:{ctx:l}}}),r.$on("click",l[48]),{c(){e=_("div"),n&&n.c(),s=b(),x(r.$$.fragment),p(e,"slot","footer")},m(f,d){w(f,e,d),~t&&i[t].m(e,null),a(e,s),Z(r,e,null),o=!0},p(f,d){let v=t;t=u(f),t===v?~t&&i[t].p(f,d):(n&&(we(),L(i[v],1,1,()=>{i[v]=null}),ye()),~t?(n=i[t],n?n.p(f,d):(n=i[t]=c[t](f),n.c()),P(n,1),n.m(e,s)):n=null);const h={};d[2]&1048576&&(h.$$scope={dirty:d,ctx:f}),r.$set(h)},i(f){o||(P(n),P(r.$$.fragment,f),o=!0)},o(f){L(n),L(r.$$.fragment,f),o=!1},d(f){f&&$(e),~t&&i[t].d(),X(r)}}}function Xu(l){let e,t,n,s,r,o,c,i,u,f,d,v,h,m,g,y,C,k,z,D,T,E,q=l[20]&&ur(l);c=new qe({props:{variant:"ghost",$$slots:{default:[ou]},$$scope:{ctx:l}}}),c.$on("click",l[33]),u=new Be({props:{padding:!1,$$slots:{default:[du]},$$scope:{ctx:l}}});function j(A){l[40](A)}let R={title:"⏪ Rollback",width:"600px",$$slots:{footer:[Su],default:[ku]},$$scope:{ctx:l}};l[1]!==void 0&&(R.open=l[1]),d=new al({props:R}),gt.push(()=>rl(d,"open",j)),d.$on("close",l[41]);function O(A){l[43](A)}let F={title:"⚙️ Deployment Config",width:"500px",$$slots:{footer:[Lu],default:[Tu]},$$scope:{ctx:l}};l[13]!==void 0&&(F.open=l[13]),m=new al({props:F}),gt.push(()=>rl(m,"open",O)),m.$on("close",l[44]);function I(A){l[46](A)}let V={title:"📋 Deployment Logs",width:"700px",$$slots:{footer:[Bu],default:[Ou]},$$scope:{ctx:l}};l[15]!==void 0&&(V.open=l[15]),C=new al({props:V}),gt.push(()=>rl(C,"open",I)),C.$on("close",l[47]);function J(A){l[49](A)}let U={title:l[8]==="cleanup"?"⚠️ Stop Orphan Containers":"⚠️ Servers Unavailable",width:"500px",$$slots:{footer:[Zu],default:[Wu]},$$scope:{ctx:l}};return l[7]!==void 0&&(U.open=l[7]),D=new al({props:U}),gt.push(()=>rl(D,"open",J)),D.$on("close",l[50]),{c(){e=_("div"),t=_("div"),n=_("h1"),n.textContent="Deployment History",s=b(),r=_("div"),q&&q.c(),o=b(),x(c.$$.fragment),i=b(),x(u.$$.fragment),f=b(),x(d.$$.fragment),h=b(),x(m.$$.fragment),y=b(),x(C.$$.fragment),z=b(),x(D.$$.fragment),p(n,"class","svelte-cuxyqu"),p(r,"class","header-actions svelte-cuxyqu"),p(t,"class","page-header svelte-cuxyqu"),p(e,"class","deployments-page svelte-cuxyqu")},m(A,M){w(A,e,M),a(e,t),a(t,n),a(t,s),a(t,r),q&&q.m(r,null),a(r,o),Z(c,r,null),a(e,i),Z(u,e,null),w(A,f,M),Z(d,A,M),w(A,h,M),Z(m,A,M),w(A,y,M),Z(C,A,M),w(A,z,M),Z(D,A,M),E=!0},p(A,M){A[20]?q?q.p(A,M):(q=ur(A),q.c(),q.m(r,o)):q&&(q.d(1),q=null);const G={};M[2]&1048576&&(G.$$scope={dirty:M,ctx:A}),c.$set(G);const N={};M[0]&524289|M[2]&1048576&&(N.$$scope={dirty:M,ctx:A}),u.$set(N);const H={};M[0]&126|M[2]&1048576&&(H.$$scope={dirty:M,ctx:A}),!v&&M[0]&2&&(v=!0,H.open=A[1],ol(()=>v=!1)),d.$set(H);const ee={};M[0]&24576|M[2]&1048576&&(ee.$$scope={dirty:M,ctx:A}),!g&&M[0]&8192&&(g=!0,ee.open=A[13],ol(()=>g=!1)),m.$set(ee);const Q={};M[0]&491520|M[2]&1048576&&(Q.$$scope={dirty:M,ctx:A}),!k&&M[0]&32768&&(k=!0,Q.open=A[15],ol(()=>k=!1)),C.$set(Q);const te={};M[0]&256&&(te.title=A[8]==="cleanup"?"⚠️ Stop Orphan Containers":"⚠️ Servers Unavailable"),M[0]&8064|M[2]&1048576&&(te.$$scope={dirty:M,ctx:A}),!T&&M[0]&128&&(T=!0,te.open=A[7],ol(()=>T=!1)),D.$set(te)},i(A){E||(P(c.$$.fragment,A),P(u.$$.fragment,A),P(d.$$.fragment,A),P(m.$$.fragment,A),P(C.$$.fragment,A),P(D.$$.fragment,A),E=!0)},o(A){L(c.$$.fragment,A),L(u.$$.fragment,A),L(d.$$.fragment,A),L(m.$$.fragment,A),L(C.$$.fragment,A),L(D.$$.fragment,A),E=!1},d(A){A&&($(e),$(f),$(h),$(y),$(z)),q&&q.d(),X(c),X(u),X(d,A),X(m,A),X(C,A),X(D,A)}}}function Wr(l){return l?l.toLocaleTimeString():""}function xu(l,e){return l?l.filter(t=>!(e.project&&t.project!==e.project||e.env&&t.environment!==e.env)):[]}function ep(l){const e=[...l],t=new Set;for(const n of e){const s=`${n.project}/${n.service||n.name}/${n.environment}`;n.status==="success"&&n.can_rollback&&!t.has(s)?(n.is_current_active=!0,t.add(s)):n.is_current_active=!1}return e}function Bt(l){return l?new Date(l).toLocaleString():"-"}function Dl(l){switch(l){case"success":case"active":return"success";case"failed":case"error":return"danger";case"pending":case"deploying":return"warning";case"superseded":return"secondary";default:return"info"}}function Wt(l){const e=l.status||"unknown";return e==="rolled_back"?l.is_rollback?"failed":"superseded":e}function tp(l,e,t){let n,s,r,o;Je(l,el,ve=>t(31,r=ve)),Je(l,il,ve=>t(32,o=ve));let c=!1,i=!1,u=null,f=[],d=null,v=!1,h=[],m=!1,g="",y=[],C=[],k=[],z=null,D=!1,T=null,E=!1,q=null,j=[],R=!1,O=[],F=[];function I(ve){t(14,T=ve),t(13,D=!0)}function V(){if(!(T!=null&&T.config_snapshot))return;const ve=new CustomEvent("redeploy",{detail:{deployment:T,config:T.config_snapshot},bubbles:!0});document.dispatchEvent(ve),t(13,D=!1),ge.info("Config loaded - switch to Deploy tab")}async function J(ve){t(16,q=ve),t(15,E=!0),t(18,R=!0),t(17,j=[]);try{const Oe=await Fe("GET",`/infra/deployments/history/${ve.id}/logs`);t(17,j=Oe.logs||[])}catch(Oe){ge.error("Failed to load logs: "+(Oe.message||Oe))}finally{t(18,R=!1)}}async function U(ve){t(2,u=ve);try{const Oe=new URLSearchParams({project:ve.project||"",environment:ve.environment||"",service_name:ve.service_name||ve.service||""}),We=await Fe("GET",`/infra/deployments/rollback/preview?${Oe}`);t(3,f=(We.recent_deployments||[]).filter(He=>He.id!==ve.id&&He.status==="success"))}catch{t(3,f=[])}t(1,i=!0)}async function A(){if(!u||!d){ge.error("Select a deployment to rollback to");return}const ve=f.find(nt=>nt.id===d);if(!ve){ge.error("Target deployment not found");return}const Oe=u.project||"",We=u.environment||"",He=u.service_name||u.service||"";try{const nt=new URLSearchParams({project:Oe,environment:We,service_name:He}),Ge=await Fe("GET",`/infra/services/state?${nt}`),Qt=ve.server_ips||[],at=(Ge.server_ips||[]).filter(wt=>!Qt.includes(wt)),It=(Ge.servers||[]).filter(wt=>at.includes(wt.ip));if(Qt.length>0){const wt=await Fe("POST",`/infra/services/check-servers?do_token=${tl()}&server_ips=${Qt.join(",")}`,null);if(t(10,C=wt.unavailable||[]),t(11,k=wt.available||[]),C.length>0){t(8,g="missing"),t(12,z=ve),t(7,m=!0);return}}if(It.length>0){t(9,y=It),t(8,g="cleanup"),t(12,z=ve),t(7,m=!0);return}}catch(nt){console.log("Rollback pre-check:",nt.message||nt)}await ee()}async function M(){if(t(7,m=!1),g==="cleanup"&&y.length>0){const ve=`${u.project}_${u.service||u.service_name}_${u.environment}`.replace(/[^a-zA-Z0-9_]/g,"_"),Oe=y.map(We=>We.ip);try{const We=await Fe("POST",`/infra/services/cleanup?do_token=${tl()}`,{server_ips:Oe,container_name:ve});t(6,h=[...h,{message:`Cleanup: ${We.cleaned} stopped`,type:"info",time:new Date}])}catch(We){t(6,h=[...h,{message:`Cleanup warning: ${We.message}`,type:"warning",time:new Date}])}}t(9,y=[]),t(10,C=[]),t(12,z=null),await ee()}let G=!1,N=[];async function H(){t(7,m=!1),G=!0,N=k.map(ve=>ve.ip),t(10,C=[]),t(12,z=null),await ee()}async function ee(){t(6,h=[]),t(5,v=!0);const ve=(Oe,We="info")=>{t(6,h=[...h,{message:Oe,type:We,time:new Date}])};try{const Oe=new URLSearchParams({project:u.project||"",environment:u.environment||"",service_name:u.service_name||u.service||""}).toString();ve("Starting rollback...");let We=!1,He="";const nt={deployment_id:d};if(G&&N.length>0&&(nt.server_ips=N,ve(`Partial rollback to ${N.length} available server(s)`)),await na("POST",`/infra/deployments/rollback?${Oe}`,nt,Ge=>{Ge.type==="progress"||Ge.type==="start"?ve(Ge.message,"info"):Ge.type==="server_complete"?ve(`✅ ${Ge.ip}: Success`,"success"):Ge.type==="error"?(ve(`❌ ${Ge.message||Ge.error}`,"error"),He=Ge.message||Ge.error||"Unknown error"):Ge.type==="complete"&&(We=Ge.success,We?ve(`✅ ${Ge.message}`,"success"):(He=Ge.message||"Rollback failed",ve(`❌ ${He}`,"error")))}),We)ge.success("Rollback completed successfully"),await Q();else throw new Error(He||"Rollback failed")}catch(Oe){ve(`❌ Error: ${Oe.message||String(Oe)}`,"error"),ge.error("Rollback failed: "+(Oe.message||String(Oe)))}finally{t(5,v=!1),G=!1,N=[]}}function Q(){il.refresh()}function te(){il.refresh()}const W=[[]],le=()=>il.refresh(),K=ve=>I(ve),oe=ve=>J(ve),$e=ve=>U(ve),_e=()=>{t(1,i=!1),t(6,h=[])};function re(){d=this.__value,t(4,d)}function he(ve){i=ve,t(1,i)}const be=()=>t(1,i=!1),ue=()=>t(13,D=!1);function pe(ve){D=ve,t(13,D)}const ce=()=>t(13,D=!1),De=()=>t(15,E=!1);function ke(ve){E=ve,t(15,E)}const Ae=()=>t(15,E=!1),$t=()=>{t(7,m=!1),t(12,z=null)};function ot(ve){m=ve,t(7,m)}const ze=()=>{t(7,m=!1),t(12,z=null)};return l.$$.update=()=>{l.$$.dirty[1]&2&&t(30,n=o||{loading:!1}),l.$$.dirty[0]&1073741824&&t(0,c=n.loading),l.$$.dirty[0]&1073741824&&t(20,s=n.lastFetched),l.$$.dirty[0]&1073741824&&n.data&&t(29,O=ep(n.data)),l.$$.dirty[0]&536870912|l.$$.dirty[1]&1&&t(19,F=xu(O,r))},[c,i,u,f,d,v,h,m,g,y,C,k,z,D,T,E,q,j,R,F,s,I,V,J,U,A,M,H,te,O,n,r,o,le,K,oe,$e,_e,re,W,he,be,ue,pe,ce,De,ke,Ae,$t,ot,ze]}class lp extends tt{constructor(e){super(),et(this,e,tp,Xu,Ye,{refresh:28},null,[-1,-1,-1])}get refresh(){return this.$$.ctx[28]}}function np(l){let e;return{c(){e=S("📋 Copy")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function sp(l){let e;return{c(){e=S("⬇ Download")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Jr(l){let e;return{c(){e=_("div"),e.textContent="Loading logs...",p(e,"class","loading-overlay svelte-vo5055")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function op(l){let e;return{c(){e=_("span"),e.textContent="Select a server and container from the scope bar above to view logs.",p(e,"class","placeholder svelte-vo5055")},m(t,n){w(t,e,n)},p:ie,d(t){t&&$(e)}}}function rp(l){let e;return{c(){e=S(l[0])},m(t,n){w(t,e,n)},p(t,n){n&1&&B(e,t[0])},d(t){t&&$(e)}}}function ip(l){let e,t,n,s,r,o,c,i,u,f,d,v,h,m,g,y,C,k,z,D,T,E,q;m=new qe({props:{variant:"ghost",size:"sm",$$slots:{default:[np]},$$scope:{ctx:l}}}),m.$on("click",l[6]),y=new qe({props:{variant:"ghost",size:"sm",$$slots:{default:[sp]},$$scope:{ctx:l}}}),y.$on("click",l[7]);let j=l[1]&&Jr();function R(I,V){return I[0]?rp:op}let O=R(l),F=O(l);return{c(){e=_("div"),t=_("div"),n=_("span"),n.textContent="🔍",s=b(),r=_("input"),o=b(),c=_("select"),i=_("option"),i.textContent="All Levels",u=_("option"),u.textContent="ERROR",f=_("option"),f.textContent="WARN",d=_("option"),d.textContent="INFO",v=_("option"),v.textContent="DEBUG",h=b(),x(m.$$.fragment),g=b(),x(y.$$.fragment),C=b(),k=_("div"),j&&j.c(),z=b(),D=_("pre"),F.c(),p(n,"class","search-icon svelte-vo5055"),p(r,"type","text"),p(r,"placeholder","Search logs..."),p(r,"class","svelte-vo5055"),p(t,"class","search-box svelte-vo5055"),i.__value="",ne(i,i.__value),u.__value="ERROR",ne(u,u.__value),f.__value="WARN",ne(f,f.__value),d.__value="INFO",ne(d,d.__value),v.__value="DEBUG",ne(v,v.__value),p(c,"class","svelte-vo5055"),l[3]===void 0&&Ve(()=>l[11].call(c)),p(e,"class","toolbar svelte-vo5055"),p(D,"class","log-content svelte-vo5055"),p(k,"class","log-viewer svelte-vo5055")},m(I,V){w(I,e,V),a(e,t),a(t,n),a(t,s),a(t,r),ne(r,l[2]),a(e,o),a(e,c),a(c,i),a(c,u),a(c,f),a(c,d),a(c,v),Le(c,l[3],!0),a(e,h),Z(m,e,null),a(e,g),Z(y,e,null),w(I,C,V),w(I,k,V),j&&j.m(k,null),a(k,z),a(k,D),F.m(D,null),T=!0,E||(q=[se(r,"input",l[10]),se(r,"input",l[5]),se(c,"change",l[11]),se(c,"change",l[5])],E=!0)},p(I,V){V&4&&r.value!==I[2]&&ne(r,I[2]),V&8&&Le(c,I[3]);const J={};V&131072&&(J.$$scope={dirty:V,ctx:I}),m.$set(J);const U={};V&131072&&(U.$$scope={dirty:V,ctx:I}),y.$set(U),I[1]?j||(j=Jr(),j.c(),j.m(k,z)):j&&(j.d(1),j=null),O===(O=R(I))&&F?F.p(I,V):(F.d(1),F=O(I),F&&(F.c(),F.m(D,null)))},i(I){T||(P(m.$$.fragment,I),P(y.$$.fragment,I),T=!0)},o(I){L(m.$$.fragment,I),L(y.$$.fragment,I),T=!1},d(I){I&&($(e),$(C),$(k)),X(m),X(y),j&&j.d(),F.d(),E=!1,Ue(q)}}}function ap(l){let e,t,n,s,r,o,c,i;return c=new Be({props:{padding:!1,$$slots:{default:[ip]},$$scope:{ctx:l}}}),{c(){e=_("div"),t=_("h2"),n=S("Logs · "),s=_("span"),r=S(l[4]),o=b(),x(c.$$.fragment),p(s,"class","context svelte-vo5055"),p(t,"class","page-title svelte-vo5055"),p(e,"class","logs-page svelte-vo5055")},m(u,f){w(u,e,f),a(e,t),a(t,n),a(t,s),a(s,r),a(e,o),Z(c,e,null),i=!0},p(u,[f]){(!i||f&16)&&B(r,u[4]);const d={};f&131087&&(d.$$scope={dirty:f,ctx:u}),c.$set(d)},i(u){i||(P(c.$$.fragment,u),i=!0)},o(u){L(c.$$.fragment,u),i=!1},d(u){u&&$(e),X(c)}}}function cp(l,e,t){let n,s;Je(l,el,D=>t(9,s=D));let r="",o="",c=!1,i="",u="",f=null;ll(()=>{s.server&&d()}),Mn(()=>{m()});async function d(){if(!s.server){r="Select a server and container from the scope bar above to view logs.",t(0,o=r);return}t(1,c=!0);try{const D=s.server,T=s.container;if(!D){r="Select a server to view logs",t(0,o=r);return}if(!T||T==="all"){r=`Select a specific container from the scope bar above to view logs.

Tip: Use the Server dropdown to pick a server, then select a container.`,t(0,o=r),t(1,c=!1);return}const E=new URLSearchParams;E.set("lines","500");const q=`/infra/agent/${D}/containers/${T}/logs?${E}`,j=await Fe("GET",q);j.data&&j.data.logs!==void 0?r=j.data.logs:j.logs!==void 0?r=j.logs:typeof j=="string"?r=j:r=JSON.stringify(j,null,2),v()}catch(D){r=`Error loading logs: ${D.message}`,t(0,o=r),ge.error("Failed to load logs: "+D.message)}finally{t(1,c=!1)}}function v(){let D=r;i&&(D=D.split(`
`).filter(E=>E.toLowerCase().includes(i.toLowerCase())).join(`
`)),u&&(D=D.split(`
`).filter(E=>E.toUpperCase().includes(u)).join(`
`)),t(0,o=D)}function h(){f||(f=setInterval(d,5e3),ge.info("Tailing logs..."))}function m(){f&&(clearInterval(f),f=null)}function g(){navigator.clipboard.writeText(o),ge.success("Logs copied to clipboard")}function y(){const D=new Blob([o],{type:"text/plain"}),T=URL.createObjectURL(D),E=document.createElement("a");E.href=T,E.download=`logs-${s.server||"unknown"}-${new Date().toISOString()}.txt`,E.click(),URL.revokeObjectURL(T)}function C(){d()}function k(){i=this.value,t(2,i)}function z(){u=mt(this),t(3,u)}return l.$$.update=()=>{l.$$.dirty&512&&t(4,n=s.server?s.container?`${s.server} / ${s.container}`:s.server:"Select a server"),l.$$.dirty&512&&(s.server||s.container||s.range)&&d(),l.$$.dirty&512&&(s.tail?h():m())},v(),[o,c,i,u,n,v,g,y,C,s,k,z]}class fp extends tt{constructor(e){super(),et(this,e,cp,ap,Ye,{refresh:8})}get refresh(){return this.$$.ctx[8]}}function Vr(l,e,t){const n=l.slice();return n[23]=e[t],n}function Yr(l,e,t){const n=l.slice();n[18]=e[t];const s=n[18].status==="online";n[19]=s;const r=n[18].containers>0?Math.round(n[18].healthy/n[18].containers*100):100;return n[20]=r,n}function up(l){var D;let e,t,n,s,r=(((D=l[11])==null?void 0:D.name)||l[2].server)+"",o,c,i,u,f,d,v,h,m,g,y=l[4]&&Kr(l);f=new qe({props:{variant:"ghost",size:"sm",$$slots:{default:[_p]},$$scope:{ctx:l}}}),f.$on("click",l[0]);const C=[vp,dp],k=[];function z(T,E){return T[5]?0:1}return v=z(l),h=k[v]=C[v](l),{c(){e=_("div"),t=_("h2"),n=S("Metrics · "),s=_("span"),o=S(r),c=b(),i=_("div"),y&&y.c(),u=b(),x(f.$$.fragment),d=b(),h.c(),m=Ne(),p(s,"class","server-name svelte-9h3o9i"),p(t,"class","page-title svelte-9h3o9i"),p(i,"class","header-actions svelte-9h3o9i"),p(e,"class","page-header svelte-9h3o9i")},m(T,E){w(T,e,E),a(e,t),a(t,n),a(t,s),a(s,o),a(e,c),a(e,i),y&&y.m(i,null),a(i,u),Z(f,i,null),w(T,d,E),k[v].m(T,E),w(T,m,E),g=!0},p(T,E){var R;(!g||E&2052)&&r!==(r=(((R=T[11])==null?void 0:R.name)||T[2].server)+"")&&B(o,r),T[4]?y?y.p(T,E):(y=Kr(T),y.c(),y.m(i,u)):y&&(y.d(1),y=null);const q={};E&67108864&&(q.$$scope={dirty:E,ctx:T}),f.$set(q);let j=v;v=z(T),v===j?k[v].p(T,E):(we(),L(k[j],1,1,()=>{k[j]=null}),ye(),h=k[v],h?h.p(T,E):(h=k[v]=C[v](T),h.c()),P(h,1),h.m(m.parentNode,m))},i(T){g||(P(f.$$.fragment,T),P(h),g=!0)},o(T){L(f.$$.fragment,T),L(h),g=!1},d(T){T&&($(e),$(d),$(m)),y&&y.d(),X(f),k[v].d(T)}}}function pp(l){let e,t,n,s,r,o,c,i,u,f,d,v=l[4]&&Zr(l);o=new qe({props:{variant:"ghost",size:"sm",$$slots:{default:[Sp]},$$scope:{ctx:l}}}),o.$on("click",l[0]);const h=[qp,zp],m=[];function g(y,C){return y[5]?0:1}return i=g(l),u=m[i]=h[i](l),{c(){e=_("div"),t=_("h2"),t.textContent="Metrics · Fleet",n=b(),s=_("div"),v&&v.c(),r=b(),x(o.$$.fragment),c=b(),u.c(),f=Ne(),p(t,"class","page-title svelte-9h3o9i"),p(s,"class","header-actions svelte-9h3o9i"),p(e,"class","page-header svelte-9h3o9i")},m(y,C){w(y,e,C),a(e,t),a(e,n),a(e,s),v&&v.m(s,null),a(s,r),Z(o,s,null),w(y,c,C),m[i].m(y,C),w(y,f,C),d=!0},p(y,C){y[4]?v?v.p(y,C):(v=Zr(y),v.c(),v.m(s,r)):v&&(v.d(1),v=null);const k={};C&67108864&&(k.$$scope={dirty:C,ctx:y}),o.$set(k);let z=i;i=g(y),i===z?m[i].p(y,C):(we(),L(m[z],1,1,()=>{m[z]=null}),ye(),u=m[i],u?u.p(y,C):(u=m[i]=h[i](y),u.c()),P(u,1),u.m(f.parentNode,f))},i(y){d||(P(o.$$.fragment,y),P(u),d=!0)},o(y){L(o.$$.fragment,y),L(u),d=!1},d(y){y&&($(e),$(c),$(f)),v&&v.d(),X(o),m[i].d(y)}}}function Kr(l){let e,t,n=hn(l[4])+"",s;return{c(){e=_("span"),t=S("Updated "),s=S(n),p(e,"class","last-updated svelte-9h3o9i")},m(r,o){w(r,e,o),a(e,t),a(e,s)},p(r,o){o&16&&n!==(n=hn(r[4])+"")&&B(s,n)},d(r){r&&$(e)}}}function _p(l){let e;return{c(){e=S("↻ Refresh")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function dp(l){let e,t,n,s,r,o,c,i,u,f,d;return t=new Be({props:{$$slots:{default:[mp]},$$scope:{ctx:l}}}),s=new Be({props:{$$slots:{default:[hp]},$$scope:{ctx:l}}}),o=new Be({props:{$$slots:{default:[gp]},$$scope:{ctx:l}}}),i=new Be({props:{$$slots:{default:[bp]},$$scope:{ctx:l}}}),f=new Be({props:{title:"🐳 Containers",$$slots:{default:[Cp]},$$scope:{ctx:l}}}),{c(){e=_("div"),x(t.$$.fragment),n=b(),x(s.$$.fragment),r=b(),x(o.$$.fragment),c=b(),x(i.$$.fragment),u=b(),x(f.$$.fragment),p(e,"class","metrics-grid svelte-9h3o9i")},m(v,h){w(v,e,h),Z(t,e,null),a(e,n),Z(s,e,null),a(e,r),Z(o,e,null),a(e,c),Z(i,e,null),w(v,u,h),Z(f,v,h),d=!0},p(v,h){const m={};h&67109120&&(m.$$scope={dirty:h,ctx:v}),t.$set(m);const g={};h&67109120&&(g.$$scope={dirty:h,ctx:v}),s.$set(g);const y={};h&67109120&&(y.$$scope={dirty:h,ctx:v}),o.$set(y);const C={};h&67109120&&(C.$$scope={dirty:h,ctx:v}),i.$set(C);const k={};h&67109e3&&(k.$$scope={dirty:h,ctx:v}),f.$set(k)},i(v){d||(P(t.$$.fragment,v),P(s.$$.fragment,v),P(o.$$.fragment,v),P(i.$$.fragment,v),P(f.$$.fragment,v),d=!0)},o(v){L(t.$$.fragment,v),L(s.$$.fragment,v),L(o.$$.fragment,v),L(i.$$.fragment,v),L(f.$$.fragment,v),d=!1},d(v){v&&($(e),$(u)),X(t),X(s),X(o),X(i),X(f,v)}}}function vp(l){let e,t,n,s;return{c(){e=_("div"),t=_("p"),n=S("Failed to load: "),s=S(l[5]),p(e,"class","empty-state svelte-9h3o9i")},m(r,o){w(r,e,o),a(e,t),a(t,n),a(t,s)},p(r,o){o&32&&B(s,r[5])},i:ie,o:ie,d(r){r&&$(e)}}}function mp(l){var i;let e,t,n,s,r=(((i=l[8])==null?void 0:i.cpu)||0)+"",o,c;return{c(){var u;e=_("div"),t=_("div"),t.textContent="CPU",n=b(),s=_("div"),o=S(r),c=S("%"),p(t,"class","metric-label svelte-9h3o9i"),p(s,"class","metric-value svelte-9h3o9i"),Ie(s,"color",Ft(((u=l[8])==null?void 0:u.cpu)||0)),p(e,"class","metric-card svelte-9h3o9i")},m(u,f){w(u,e,f),a(e,t),a(e,n),a(e,s),a(s,o),a(s,c)},p(u,f){var d,v;f&256&&r!==(r=(((d=u[8])==null?void 0:d.cpu)||0)+"")&&B(o,r),f&256&&Ie(s,"color",Ft(((v=u[8])==null?void 0:v.cpu)||0))},d(u){u&&$(e)}}}function hp(l){var g,y,C;let e,t,n,s,r=(((g=l[8])==null?void 0:g.memory)||0)+"",o,c,i,u,f=st((y=l[8])==null?void 0:y.memoryUsed)+"",d,v,h=st((C=l[8])==null?void 0:C.memoryTotal)+"",m;return{c(){var k;e=_("div"),t=_("div"),t.textContent="Memory",n=b(),s=_("div"),o=S(r),c=S("%"),i=b(),u=_("div"),d=S(f),v=S(" / "),m=S(h),p(t,"class","metric-label svelte-9h3o9i"),p(s,"class","metric-value svelte-9h3o9i"),Ie(s,"color",Ft(((k=l[8])==null?void 0:k.memory)||0)),p(u,"class","metric-detail svelte-9h3o9i"),p(e,"class","metric-card svelte-9h3o9i")},m(k,z){w(k,e,z),a(e,t),a(e,n),a(e,s),a(s,o),a(s,c),a(e,i),a(e,u),a(u,d),a(u,v),a(u,m)},p(k,z){var D,T,E,q;z&256&&r!==(r=(((D=k[8])==null?void 0:D.memory)||0)+"")&&B(o,r),z&256&&Ie(s,"color",Ft(((T=k[8])==null?void 0:T.memory)||0)),z&256&&f!==(f=st((E=k[8])==null?void 0:E.memoryUsed)+"")&&B(d,f),z&256&&h!==(h=st((q=k[8])==null?void 0:q.memoryTotal)+"")&&B(m,h)},d(k){k&&$(e)}}}function gp(l){var g,y,C;let e,t,n,s,r=(((g=l[8])==null?void 0:g.disk)||0)+"",o,c,i,u,f=st((y=l[8])==null?void 0:y.diskUsed)+"",d,v,h=st((C=l[8])==null?void 0:C.diskTotal)+"",m;return{c(){var k;e=_("div"),t=_("div"),t.textContent="Disk",n=b(),s=_("div"),o=S(r),c=S("%"),i=b(),u=_("div"),d=S(f),v=S(" / "),m=S(h),p(t,"class","metric-label svelte-9h3o9i"),p(s,"class","metric-value svelte-9h3o9i"),Ie(s,"color",Ft(((k=l[8])==null?void 0:k.disk)||0)),p(u,"class","metric-detail svelte-9h3o9i"),p(e,"class","metric-card svelte-9h3o9i")},m(k,z){w(k,e,z),a(e,t),a(e,n),a(e,s),a(s,o),a(s,c),a(e,i),a(e,u),a(u,d),a(u,v),a(u,m)},p(k,z){var D,T,E,q;z&256&&r!==(r=(((D=k[8])==null?void 0:D.disk)||0)+"")&&B(o,r),z&256&&Ie(s,"color",Ft(((T=k[8])==null?void 0:T.disk)||0)),z&256&&f!==(f=st((E=k[8])==null?void 0:E.diskUsed)+"")&&B(d,f),z&256&&h!==(h=st((q=k[8])==null?void 0:q.diskTotal)+"")&&B(m,h)},d(k){k&&$(e)}}}function bp(l){var g,y,C,k;let e,t,n,s,r,o=st(((y=(g=l[8])==null?void 0:g.network)==null?void 0:y.in)||0)+"",c,i,u,f,d,v=st(((k=(C=l[8])==null?void 0:C.network)==null?void 0:k.out)||0)+"",h,m;return{c(){e=_("div"),t=_("div"),t.textContent="Network",n=b(),s=_("div"),r=S("↓ "),c=S(o),i=S("/s"),u=b(),f=_("div"),d=S("↑ "),h=S(v),m=S("/s"),p(t,"class","metric-label svelte-9h3o9i"),p(s,"class","metric-value small svelte-9h3o9i"),p(f,"class","metric-detail svelte-9h3o9i"),p(e,"class","metric-card svelte-9h3o9i")},m(z,D){w(z,e,D),a(e,t),a(e,n),a(e,s),a(s,r),a(s,c),a(s,i),a(e,u),a(e,f),a(f,d),a(f,h),a(f,m)},p(z,D){var T,E,q,j;D&256&&o!==(o=st(((E=(T=z[8])==null?void 0:T.network)==null?void 0:E.in)||0)+"")&&B(c,o),D&256&&v!==(v=st(((j=(q=z[8])==null?void 0:q.network)==null?void 0:j.out)||0)+"")&&B(h,v)},d(z){z&&$(e)}}}function kp(l){let e,t,n,s,r,o,c=de(l[7]),i=[];for(let f=0;f<c.length;f+=1)i[f]=Qr(Vr(l,c,f));const u=f=>L(i[f],1,1,()=>{i[f]=null});return{c(){e=_("div"),t=_("table"),n=_("thead"),n.innerHTML='<tr><th class="svelte-9h3o9i">Container</th> <th class="svelte-9h3o9i">Status</th> <th class="svelte-9h3o9i">CPU</th> <th class="svelte-9h3o9i">Memory</th> <th class="svelte-9h3o9i">Network I/O</th></tr>',s=b(),r=_("tbody");for(let f=0;f<i.length;f+=1)i[f].c();p(t,"class","table svelte-9h3o9i"),p(e,"class","table-container svelte-9h3o9i")},m(f,d){w(f,e,d),a(e,t),a(t,n),a(t,s),a(t,r);for(let v=0;v<i.length;v+=1)i[v]&&i[v].m(r,null);o=!0},p(f,d){if(d&128){c=de(f[7]);let v;for(v=0;v<c.length;v+=1){const h=Vr(f,c,v);i[v]?(i[v].p(h,d),P(i[v],1)):(i[v]=Qr(h),i[v].c(),P(i[v],1),i[v].m(r,null))}for(we(),v=c.length;v<i.length;v+=1)u(v);ye()}},i(f){if(!o){for(let d=0;d<c.length;d+=1)P(i[d]);o=!0}},o(f){i=i.filter(Boolean);for(let d=0;d<i.length;d+=1)L(i[d]);o=!1},d(f){f&&$(e),Me(i,f)}}}function $p(l){let e;return{c(){e=_("div"),e.textContent="No containers found",p(e,"class","empty-state svelte-9h3o9i")},m(t,n){w(t,e,n)},p:ie,i:ie,o:ie,d(t){t&&$(e)}}}function wp(l){let e;return{c(){e=_("div"),e.textContent="Loading containers...",p(e,"class","empty-state svelte-9h3o9i")},m(t,n){w(t,e,n)},p:ie,i:ie,o:ie,d(t){t&&$(e)}}}function yp(l){let e=l[23].status+"",t;return{c(){t=S(e)},m(n,s){w(n,t,s)},p(n,s){s&128&&e!==(e=n[23].status+"")&&B(t,e)},d(n){n&&$(t)}}}function Qr(l){let e,t,n=l[23].name+"",s,r,o,c,i,u,f=l[23].cpu.toFixed(2)+"",d,v,h,m,g,y=l[23].memory_percent.toFixed(2)+"",C,k,z,D,T,E=st(l[23].memory_used)+"",q,j,R,O,F,I=st(l[23].net_in)+"",V,J,U=st(l[23].net_out)+"",A,M,G;return c=new Re({props:{variant:l[23].status==="running"?"success":"warning",$$slots:{default:[yp]},$$scope:{ctx:l}}}),{c(){e=_("tr"),t=_("td"),s=S(n),r=b(),o=_("td"),x(c.$$.fragment),i=b(),u=_("td"),d=S(f),v=S("%"),h=b(),m=_("td"),g=_("span"),C=S(y),k=S("%"),z=b(),D=_("span"),T=S("("),q=S(E),j=S(")"),R=b(),O=_("td"),F=S("↓"),V=S(I),J=S(" / ↑"),A=S(U),M=b(),p(t,"class","container-name svelte-9h3o9i"),p(o,"class","svelte-9h3o9i"),Ie(u,"color",Ft(l[23].cpu)),p(u,"class","svelte-9h3o9i"),Ie(g,"color",Ft(l[23].memory_percent)),p(D,"class","detail svelte-9h3o9i"),p(m,"class","svelte-9h3o9i"),p(O,"class","network-io svelte-9h3o9i")},m(N,H){w(N,e,H),a(e,t),a(t,s),a(e,r),a(e,o),Z(c,o,null),a(e,i),a(e,u),a(u,d),a(u,v),a(e,h),a(e,m),a(m,g),a(g,C),a(g,k),a(m,z),a(m,D),a(D,T),a(D,q),a(D,j),a(e,R),a(e,O),a(O,F),a(O,V),a(O,J),a(O,A),a(e,M),G=!0},p(N,H){(!G||H&128)&&n!==(n=N[23].name+"")&&B(s,n);const ee={};H&128&&(ee.variant=N[23].status==="running"?"success":"warning"),H&67108992&&(ee.$$scope={dirty:H,ctx:N}),c.$set(ee),(!G||H&128)&&f!==(f=N[23].cpu.toFixed(2)+"")&&B(d,f),(!G||H&128)&&Ie(u,"color",Ft(N[23].cpu)),(!G||H&128)&&y!==(y=N[23].memory_percent.toFixed(2)+"")&&B(C,y),(!G||H&128)&&Ie(g,"color",Ft(N[23].memory_percent)),(!G||H&128)&&E!==(E=st(N[23].memory_used)+"")&&B(q,E),(!G||H&128)&&I!==(I=st(N[23].net_in)+"")&&B(V,I),(!G||H&128)&&U!==(U=st(N[23].net_out)+"")&&B(A,U)},i(N){G||(P(c.$$.fragment,N),G=!0)},o(N){L(c.$$.fragment,N),G=!1},d(N){N&&$(e),X(c)}}}function Cp(l){let e,t,n,s;const r=[wp,$p,kp],o=[];function c(i,u){return i[3]?0:i[7].length===0?1:2}return e=c(l),t=o[e]=r[e](l),{c(){t.c(),n=Ne()},m(i,u){o[e].m(i,u),w(i,n,u),s=!0},p(i,u){let f=e;e=c(i),e===f?o[e].p(i,u):(we(),L(o[f],1,1,()=>{o[f]=null}),ye(),t=o[e],t?t.p(i,u):(t=o[e]=r[e](i),t.c()),P(t,1),t.m(n.parentNode,n))},i(i){s||(P(t),s=!0)},o(i){L(t),s=!1},d(i){i&&$(n),o[e].d(i)}}}function Zr(l){let e,t,n=hn(l[4])+"",s;return{c(){e=_("span"),t=S("Updated "),s=S(n),p(e,"class","last-updated svelte-9h3o9i")},m(r,o){w(r,e,o),a(e,t),a(e,s)},p(r,o){o&16&&n!==(n=hn(r[4])+"")&&B(s,n)},d(r){r&&$(e)}}}function Sp(l){let e;return{c(){e=S("↻ Refresh")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function zp(l){let e,t,n,s,r,o,c,i,u,f,d;return t=new Be({props:{$$slots:{default:[Dp]},$$scope:{ctx:l}}}),s=new Be({props:{$$slots:{default:[Tp]},$$scope:{ctx:l}}}),o=new Be({props:{$$slots:{default:[Pp]},$$scope:{ctx:l}}}),i=new Be({props:{$$slots:{default:[Lp]},$$scope:{ctx:l}}}),f=new Be({props:{title:"Server Health",$$slots:{default:[Fp]},$$scope:{ctx:l}}}),{c(){e=_("div"),x(t.$$.fragment),n=b(),x(s.$$.fragment),r=b(),x(o.$$.fragment),c=b(),x(i.$$.fragment),u=b(),x(f.$$.fragment),p(e,"class","metrics-grid svelte-9h3o9i")},m(v,h){w(v,e,h),Z(t,e,null),a(e,n),Z(s,e,null),a(e,r),Z(o,e,null),a(e,c),Z(i,e,null),w(v,u,h),Z(f,v,h),d=!0},p(v,h){const m={};h&67109888&&(m.$$scope={dirty:h,ctx:v}),t.$set(m);const g={};h&67109888&&(g.$$scope={dirty:h,ctx:v}),s.$set(g);const y={};h&67109888&&(y.$$scope={dirty:h,ctx:v}),o.$set(y);const C={};h&67109888&&(C.$$scope={dirty:h,ctx:v}),i.$set(C);const k={};h&67109386&&(k.$$scope={dirty:h,ctx:v}),f.$set(k)},i(v){d||(P(t.$$.fragment,v),P(s.$$.fragment,v),P(o.$$.fragment,v),P(i.$$.fragment,v),P(f.$$.fragment,v),d=!0)},o(v){L(t.$$.fragment,v),L(s.$$.fragment,v),L(o.$$.fragment,v),L(i.$$.fragment,v),L(f.$$.fragment,v),d=!1},d(v){v&&($(e),$(u)),X(t),X(s),X(o),X(i),X(f,v)}}}function qp(l){let e,t,n,s;return{c(){e=_("div"),t=_("p"),n=S("Failed to load: "),s=S(l[5]),p(e,"class","empty-state svelte-9h3o9i")},m(r,o){w(r,e,o),a(e,t),a(t,n),a(t,s)},p(r,o){o&32&&B(s,r[5])},i:ie,o:ie,d(r){r&&$(e)}}}function Dp(l){let e,t,n,s,r=l[10].serverCount+"",o;return{c(){e=_("div"),t=_("div"),t.textContent="Servers",n=b(),s=_("div"),o=S(r),p(t,"class","metric-label svelte-9h3o9i"),p(s,"class","metric-value svelte-9h3o9i"),p(e,"class","metric-card svelte-9h3o9i")},m(c,i){w(c,e,i),a(e,t),a(e,n),a(e,s),a(s,o)},p(c,i){i&1024&&r!==(r=c[10].serverCount+"")&&B(o,r)},d(c){c&&$(e)}}}function Tp(l){let e,t,n,s,r=l[10].containerCount+"",o;return{c(){e=_("div"),t=_("div"),t.textContent="Containers",n=b(),s=_("div"),o=S(r),p(t,"class","metric-label svelte-9h3o9i"),p(s,"class","metric-value svelte-9h3o9i"),p(e,"class","metric-card svelte-9h3o9i")},m(c,i){w(c,e,i),a(e,t),a(e,n),a(e,s),a(s,o)},p(c,i){i&1024&&r!==(r=c[10].containerCount+"")&&B(o,r)},d(c){c&&$(e)}}}function Pp(l){let e,t,n,s,r=li(l[10].monthlyCost)+"",o;return{c(){e=_("div"),t=_("div"),t.textContent="Monthly Cost",n=b(),s=_("div"),o=S(r),p(t,"class","metric-label svelte-9h3o9i"),p(s,"class","metric-value svelte-9h3o9i"),p(e,"class","metric-card svelte-9h3o9i")},m(c,i){w(c,e,i),a(e,t),a(e,n),a(e,s),a(s,o)},p(c,i){i&1024&&r!==(r=li(c[10].monthlyCost)+"")&&B(o,r)},d(c){c&&$(e)}}}function Ep(l){let e=l[10].health+"",t;return{c(){t=S(e)},m(n,s){w(n,t,s)},p(n,s){s&1024&&e!==(e=n[10].health+"")&&B(t,e)},d(n){n&&$(t)}}}function Lp(l){let e,t,n,s,r,o;return r=new Re({props:{variant:ni(l[10].health),$$slots:{default:[Ep]},$$scope:{ctx:l}}}),{c(){e=_("div"),t=_("div"),t.textContent="Health",n=b(),s=_("div"),x(r.$$.fragment),p(t,"class","metric-label svelte-9h3o9i"),p(s,"class","metric-value svelte-9h3o9i"),p(e,"class","metric-card svelte-9h3o9i")},m(c,i){w(c,e,i),a(e,t),a(e,n),a(e,s),Z(r,s,null),o=!0},p(c,i){const u={};i&1024&&(u.variant=ni(c[10].health)),i&67109888&&(u.$$scope={dirty:i,ctx:c}),r.$set(u)},i(c){o||(P(r.$$.fragment,c),o=!0)},o(c){L(r.$$.fragment,c),o=!1},d(c){c&&$(e),X(r)}}}function Mp(l){let e,t=de(l[9]),n=[];for(let s=0;s<t.length;s+=1)n[s]=ei(Yr(l,t,s));return{c(){e=_("div");for(let s=0;s<n.length;s+=1)n[s].c();p(e,"class","usage-list svelte-9h3o9i")},m(s,r){w(s,e,r);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null)},p(s,r){if(r&512){t=de(s[9]);let o;for(o=0;o<t.length;o+=1){const c=Yr(s,t,o);n[o]?n[o].p(c,r):(n[o]=ei(c),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=t.length}},d(s){s&&$(e),Me(n,s)}}}function jp(l){let e;return{c(){e=_("div"),e.textContent="No servers found",p(e,"class","empty-state svelte-9h3o9i")},m(t,n){w(t,e,n)},p:ie,d(t){t&&$(e)}}}function Np(l){let e;return{c(){e=_("div"),e.textContent="Unable to load fleet health. Check your DO token.",p(e,"class","empty-state svelte-9h3o9i")},m(t,n){w(t,e,n)},p:ie,d(t){t&&$(e)}}}function Rp(l){let e;return{c(){e=_("div"),e.textContent="Loading fleet health...",p(e,"class","empty-state svelte-9h3o9i")},m(t,n){w(t,e,n)},p:ie,d(t){t&&$(e)}}}function Ap(l){let e,t=l[18].status+"",n;return{c(){e=_("span"),n=S(t),p(e,"class","usage-value svelte-9h3o9i"),Ie(e,"color","var(--text-muted)")},m(s,r){w(s,e,r),a(e,n)},p(s,r){r&512&&t!==(t=s[18].status+"")&&B(n,t)},d(s){s&&$(e)}}}function Op(l){let e,t=l[18].healthy+"",n,s,r=l[18].containers+"",o;return{c(){e=_("span"),n=S(t),s=S("/"),o=S(r),p(e,"class","usage-value svelte-9h3o9i"),Ie(e,"color",l[18].unhealthy>0?"var(--danger)":"var(--success)")},m(c,i){w(c,e,i),a(e,n),a(e,s),a(e,o)},p(c,i){i&512&&t!==(t=c[18].healthy+"")&&B(n,t),i&512&&r!==(r=c[18].containers+"")&&B(o,r),i&512&&Ie(e,"color",c[18].unhealthy>0?"var(--danger)":"var(--success)")},d(c){c&&$(e)}}}function Xr(l){let e,t,n,s,r,o,c=l[18].containers+"",i,u,f,d,v=l[18].healthy+"",h,m,g=l[18].unhealthy>0&&xr(l);return{c(){e=_("div"),t=_("div"),n=b(),s=_("div"),r=_("span"),o=S("Containers: "),i=S(c),u=b(),f=_("span"),d=S("Healthy: "),h=S(v),m=b(),g&&g.c(),p(t,"class","usage-fill svelte-9h3o9i"),Ie(t,"width",l[20]+"%"),Ie(t,"background",l[18].unhealthy>0?"var(--warning)":"var(--success)"),p(e,"class","usage-bar svelte-9h3o9i"),p(s,"class","usage-details svelte-9h3o9i")},m(y,C){w(y,e,C),a(e,t),w(y,n,C),w(y,s,C),a(s,r),a(r,o),a(r,i),a(s,u),a(s,f),a(f,d),a(f,h),a(s,m),g&&g.m(s,null)},p(y,C){C&512&&Ie(t,"width",y[20]+"%"),C&512&&Ie(t,"background",y[18].unhealthy>0?"var(--warning)":"var(--success)"),C&512&&c!==(c=y[18].containers+"")&&B(i,c),C&512&&v!==(v=y[18].healthy+"")&&B(h,v),y[18].unhealthy>0?g?g.p(y,C):(g=xr(y),g.c(),g.m(s,null)):g&&(g.d(1),g=null)},d(y){y&&($(e),$(n),$(s)),g&&g.d()}}}function xr(l){let e,t,n=l[18].unhealthy+"",s;return{c(){e=_("span"),t=S("Unhealthy: "),s=S(n),Ie(e,"color","var(--danger)")},m(r,o){w(r,e,o),a(e,t),a(e,s)},p(r,o){o&512&&n!==(n=r[18].unhealthy+"")&&B(s,n)},d(r){r&&$(e)}}}function ei(l){let e,t,n,s,r,o=l[18].name+"",c,i,u,f;function d(g,y){return g[19]?Op:Ap}let v=d(l),h=v(l),m=l[19]&&Xr(l);return{c(){e=_("div"),t=_("div"),n=_("span"),s=_("span"),r=b(),c=S(o),i=b(),h.c(),u=b(),m&&m.c(),f=b(),p(s,"class","status-dot svelte-9h3o9i"),Ce(s,"online",l[19]),Ce(s,"offline",!l[19]),p(n,"class","usage-name svelte-9h3o9i"),p(t,"class","usage-header svelte-9h3o9i"),p(e,"class","usage-item svelte-9h3o9i")},m(g,y){w(g,e,y),a(e,t),a(t,n),a(n,s),a(n,r),a(n,c),a(t,i),h.m(t,null),a(e,u),m&&m.m(e,null),a(e,f)},p(g,y){y&512&&Ce(s,"online",g[19]),y&512&&Ce(s,"offline",!g[19]),y&512&&o!==(o=g[18].name+"")&&B(c,o),v===(v=d(g))&&h?h.p(g,y):(h.d(1),h=v(g),h&&(h.c(),h.m(t,null))),g[19]?m?m.p(g,y):(m=Xr(g),m.c(),m.m(e,f)):m&&(m.d(1),m=null)},d(g){g&&$(e),h.d(),m&&m.d()}}}function Fp(l){let e;function t(r,o){return r[3]&&!r[1]?Rp:r[1]?r[9].length===0?jp:Mp:Np}let n=t(l),s=n(l);return{c(){s.c(),e=Ne()},m(r,o){s.m(r,o),w(r,e,o)},p(r,o){n===(n=t(r))&&s?s.p(r,o):(s.d(1),s=n(r),s&&(s.c(),s.m(e.parentNode,e)))},d(r){r&&$(e),s.d(r)}}}function Bp(l){let e,t,n,s;const r=[pp,up],o=[];function c(i,u){return i[6]?0:1}return t=c(l),n=o[t]=r[t](l),{c(){e=_("div"),n.c(),p(e,"class","metrics-page svelte-9h3o9i")},m(i,u){w(i,e,u),o[t].m(e,null),s=!0},p(i,[u]){let f=t;t=c(i),t===f?o[t].p(i,u):(we(),L(o[f],1,1,()=>{o[f]=null}),ye(),n=o[t],n?n.p(i,u):(n=o[t]=r[t](i),n.c()),P(n,1),n.m(e,null))},i(i){s||(P(n),s=!0)},o(i){L(n),s=!1},d(i){i&&$(e),o[t].d()}}}function hn(l){return l?l.toLocaleTimeString():""}function ti(l){if(!l)return 0;const e=l.match(/([\d.]+)\s*(B|KB|KiB|MB|MiB|GB|GiB|TB|TiB)?/i);if(!e)return 0;const t=parseFloat(e[1]),n=(e[2]||"B").toLowerCase(),s={b:1,kb:1024,kib:1024,mb:1024**2,mib:1024**2,gb:1024**3,gib:1024**3,tb:1024**4,tib:1024**4};return t*(s[n]||1)}function st(l){if(!l)return"0 B";const e=["B","KB","MB","GB","TB"];let t=0;for(;l>=1024&&t<e.length-1;)l/=1024,t++;return`${l.toFixed(1)} ${e[t]}`}function li(l){return`$${(l||0).toFixed(2)}`}function ni(l){switch(l){case"healthy":return"success";case"degraded":return"warning";case"unhealthy":return"danger";default:return"info"}}function Ft(l){return l>=90?"var(--danger)":l>=70?"var(--warning)":"var(--success)"}function Ip(l,e,t){let n,s,r,o,c,i,u,f;Je(l,el,T=>t(2,u=T)),Je(l,ql,T=>t(15,f=T));let d=!1,v=null,h=null,m=!1,g=null,y=null,C=null;ll(()=>{z(),t(12,g=setInterval(z,n?3e4:15e3))}),Mn(()=>{g&&clearInterval(g)});let k=null;async function z(){m||t(3,d=!0),t(5,h=null);try{n?t(1,y=await Fe("GET","/infra/fleet/health")):t(13,C=await Fe("GET",`/infra/agent/${u.server}/metrics`)),t(4,v=new Date),m=!0}catch(T){t(5,h=T.message)}finally{t(3,d=!1)}}function D(){z()}return l.$$.update=()=>{var T,E,q,j,R,O,F,I,V,J,U,A;if(l.$$.dirty&4&&t(6,n=!u.server),l.$$.dirty&32772&&t(11,s=(f||[]).find(M=>{var G,N,H;return(M.ip||((H=(N=(G=M.networks)==null?void 0:G.v4)==null?void 0:N[0])==null?void 0:H.ip_address))===u.server})),l.$$.dirty&32770&&t(10,r=y?{serverCount:((T=y.summary)==null?void 0:T.total)||(f||[]).length,containerCount:((E=y.servers)==null?void 0:E.reduce((M,G)=>{var N;return M+(((N=G.containers)==null?void 0:N.length)||0)},0))||0,monthlyCost:(((q=y.summary)==null?void 0:q.total)||0)*12,health:((j=y.summary)==null?void 0:j.healthy)===((R=y.summary)==null?void 0:R.total)?"healthy":"degraded"}:{serverCount:(f||[]).length,containerCount:0,monthlyCost:0,health:"unknown"}),l.$$.dirty&2&&t(9,o=((y==null?void 0:y.servers)||[]).map(M=>({name:M.name||M.ip||"Unknown",ip:M.ip,status:M.status||"unknown",containers:M.containers??0,healthy:M.healthy??0,unhealthy:M.unhealthy??0,healthStatus:M.health_status||"unknown"}))),l.$$.dirty&8192&&t(8,c=C?{cpu:((O=C.system)==null?void 0:O.load_1m)||0,memory:((F=C.system)==null?void 0:F.mem_percent)||0,memoryUsed:((I=C.system)==null?void 0:I.mem_used)||0,memoryTotal:((V=C.system)==null?void 0:V.mem_total)||0,disk:((J=C.system)==null?void 0:J.disk_percent)||0,diskUsed:((U=C.system)==null?void 0:U.disk_used)||0,diskTotal:((A=C.system)==null?void 0:A.disk_total)||0,network:{in:0,out:0}}:null),l.$$.dirty&8192&&t(7,i=((C==null?void 0:C.containers)||[]).map(M=>{var Q;const G=M.cpu||"0%",N=M.memory||"0B / 0B",H=M.mem_perc||"0%",ee=N.split("/");return{name:M.name||"unknown",cpu:parseFloat(G.replace("%",""))||0,memory_percent:parseFloat(H.replace("%",""))||0,memory_used:ti((Q=ee[0])==null?void 0:Q.trim()),memory_total:ee[1]?ti(ee[1].trim()):0,net_in:M.net_in||0,net_out:M.net_out||0,status:M.state||"running"}})),l.$$.dirty&20484){const M=u.server;M!==k&&k!==null&&(g&&clearInterval(g),m=!1,z(),t(12,g=setInterval(z,M?15e3:3e4))),t(14,k=M)}},[D,y,u,d,v,h,n,i,c,o,r,s,g,C,k,f]}class Up extends tt{constructor(e){super(),et(this,e,Ip,Bp,Ye,{refresh:0})}get refresh(){return this.$$.ctx[0]}}function si(l,e,t){const n=l.slice();return n[32]=e[t],n}function oi(l,e,t){const n=l.slice();return n[35]=e[t],n}function ri(l,e,t){const n=l.slice();return n[38]=e[t],n}function Hp(l){let e,t,n=de(l[12]),s=[];for(let o=0;o<n.length;o+=1)s[o]=ii(ri(l,n,o));const r=o=>L(s[o],1,1,()=>{s[o]=null});return{c(){e=_("div");for(let o=0;o<s.length;o+=1)s[o].c();p(e,"class","snapshot-list svelte-m8qcvw")},m(o,c){w(o,e,c);for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(e,null);t=!0},p(o,c){if(c[0]&135168){n=de(o[12]);let i;for(i=0;i<n.length;i+=1){const u=ri(o,n,i);s[i]?(s[i].p(u,c),P(s[i],1)):(s[i]=ii(u),s[i].c(),P(s[i],1),s[i].m(e,null))}for(we(),i=n.length;i<s.length;i+=1)r(i);ye()}},i(o){if(!t){for(let c=0;c<n.length;c+=1)P(s[c]);t=!0}},o(o){s=s.filter(Boolean);for(let c=0;c<s.length;c+=1)L(s[c]);t=!1},d(o){o&&$(e),Me(s,o)}}}function Gp(l){let e;return{c(){e=_("div"),e.textContent="No snapshots found",p(e,"class","empty-state svelte-m8qcvw")},m(t,n){w(t,e,n)},p:ie,i:ie,o:ie,d(t){t&&$(e)}}}function Wp(l){let e;return{c(){e=_("div"),e.textContent="Loading...",p(e,"class","empty-state svelte-m8qcvw")},m(t,n){w(t,e,n)},p:ie,i:ie,o:ie,d(t){t&&$(e)}}}function Jp(l){let e;return{c(){e=S("🗑️")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function ii(l){var V;let e,t,n,s=l[38].name+"",r,o,c,i,u=gn(l[38].created_at)+"",f,d,v,h,m,g=ui(l[38].size_gigabytes)+"",y,C,k,z,D,T=(((V=l[38].regions)==null?void 0:V.join(", "))||"-")+"",E,q,j,R,O,F;function I(){return l[21](l[38])}return R=new qe({props:{variant:"danger",size:"sm",$$slots:{default:[Jp]},$$scope:{ctx:l}}}),R.$on("click",I),{c(){e=_("div"),t=_("div"),n=_("div"),r=S(s),o=b(),c=_("div"),i=_("span"),f=S(u),d=b(),v=_("span"),v.textContent="•",h=b(),m=_("span"),y=S(g),C=b(),k=_("span"),k.textContent="•",z=b(),D=_("span"),E=S(T),q=b(),j=_("div"),x(R.$$.fragment),O=b(),p(n,"class","snapshot-name svelte-m8qcvw"),p(c,"class","snapshot-meta svelte-m8qcvw"),p(t,"class","snapshot-info"),p(j,"class","snapshot-actions"),p(e,"class","snapshot-item svelte-m8qcvw")},m(J,U){w(J,e,U),a(e,t),a(t,n),a(n,r),a(t,o),a(t,c),a(c,i),a(i,f),a(c,d),a(c,v),a(c,h),a(c,m),a(m,y),a(c,C),a(c,k),a(c,z),a(c,D),a(D,E),a(e,q),a(e,j),Z(R,j,null),a(e,O),F=!0},p(J,U){var M;l=J,(!F||U[0]&4096)&&s!==(s=l[38].name+"")&&B(r,s),(!F||U[0]&4096)&&u!==(u=gn(l[38].created_at)+"")&&B(f,u),(!F||U[0]&4096)&&g!==(g=ui(l[38].size_gigabytes)+"")&&B(y,g),(!F||U[0]&4096)&&T!==(T=(((M=l[38].regions)==null?void 0:M.join(", "))||"-")+"")&&B(E,T);const A={};U[1]&1024&&(A.$$scope={dirty:U,ctx:l}),R.$set(A)},i(J){F||(P(R.$$.fragment,J),F=!0)},o(J){L(R.$$.fragment,J),F=!1},d(J){J&&$(e),X(R)}}}function Vp(l){let e;return{c(){e=S("↻ Refresh")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Yp(l){let e,t,n,s,r,o;const c=[Wp,Gp,Hp],i=[];function u(f,d){return f[0]?0:!f[12]||f[12].length===0?1:2}return e=u(l),t=i[e]=c[e](l),r=new qe({props:{variant:"ghost",size:"sm",$$slots:{default:[Vp]},$$scope:{ctx:l}}}),r.$on("click",l[14]),{c(){t.c(),n=b(),s=_("div"),x(r.$$.fragment),p(s,"class","card-footer svelte-m8qcvw")},m(f,d){i[e].m(f,d),w(f,n,d),w(f,s,d),Z(r,s,null),o=!0},p(f,d){let v=e;e=u(f),e===v?i[e].p(f,d):(we(),L(i[v],1,1,()=>{i[v]=null}),ye(),t=i[e],t?t.p(f,d):(t=i[e]=c[e](f),t.c()),P(t,1),t.m(n.parentNode,n));const h={};d[1]&1024&&(h.$$scope={dirty:d,ctx:f}),r.$set(h)},i(f){o||(P(t),P(r.$$.fragment,f),o=!0)},o(f){L(t),L(r.$$.fragment,f),o=!1},d(f){f&&($(n),$(s)),i[e].d(f),X(r)}}}function Kp(l){let e;return{c(){e=S("+ Custom")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Qp(l){let e,t;return e=new qe({props:{slot:"header",variant:"success",size:"sm",$$slots:{default:[Kp]},$$scope:{ctx:l}}}),e.$on("click",l[20]),{c(){x(e.$$.fragment)},m(n,s){Z(e,n,s),t=!0},p(n,s){const r={};s[1]&1024&&(r.$$scope={dirty:s,ctx:n}),e.$set(r)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){X(e,n)}}}function Zp(l){let e,t,n,s,r,o,c;return t=new Re({props:{variant:"warning",$$slots:{default:[e_]},$$scope:{ctx:l}}}),o=new qe({props:{variant:"primary",$$slots:{default:[t_]},$$scope:{ctx:l}}}),o.$on("click",l[15]),{c(){e=_("div"),x(t.$$.fragment),n=b(),s=_("p"),s.textContent="Base snapshot is required for provisioning new servers.",r=b(),x(o.$$.fragment),p(s,"class","svelte-m8qcvw"),p(e,"class","status-missing svelte-m8qcvw")},m(i,u){w(i,e,u),Z(t,e,null),a(e,n),a(e,s),a(e,r),Z(o,e,null),c=!0},p(i,u){const f={};u[1]&1024&&(f.$$scope={dirty:u,ctx:i}),t.$set(f);const d={};u[1]&1024&&(d.$$scope={dirty:u,ctx:i}),o.$set(d)},i(i){c||(P(t.$$.fragment,i),P(o.$$.fragment,i),c=!0)},o(i){L(t.$$.fragment,i),L(o.$$.fragment,i),c=!1},d(i){i&&$(e),X(t),X(o)}}}function Xp(l){let e,t,n,s,r,o,c=l[1].name+"",i,u,f,d,v=gn(l[1].created_at)+"",h,m;return t=new Re({props:{variant:"success",$$slots:{default:[l_]},$$scope:{ctx:l}}}),{c(){e=_("div"),x(t.$$.fragment),n=b(),s=_("div"),r=_("div"),o=S("Name: "),i=S(c),u=b(),f=_("div"),d=S("Created: "),h=S(v),p(s,"class","status-details svelte-m8qcvw"),p(e,"class","status-ok svelte-m8qcvw")},m(g,y){w(g,e,y),Z(t,e,null),a(e,n),a(e,s),a(s,r),a(r,o),a(r,i),a(s,u),a(s,f),a(f,d),a(f,h),m=!0},p(g,y){const C={};y[1]&1024&&(C.$$scope={dirty:y,ctx:g}),t.$set(C),(!m||y[0]&2)&&c!==(c=g[1].name+"")&&B(i,c),(!m||y[0]&2)&&v!==(v=gn(g[1].created_at)+"")&&B(h,v)},i(g){m||(P(t.$$.fragment,g),m=!0)},o(g){L(t.$$.fragment,g),m=!1},d(g){g&&$(e),X(t)}}}function xp(l){let e;return{c(){e=_("div"),e.textContent="Checking...",p(e,"class","status-checking svelte-m8qcvw")},m(t,n){w(t,e,n)},p:ie,i:ie,o:ie,d(t){t&&$(e)}}}function e_(l){let e;return{c(){e=S("Not found")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function t_(l){let e;return{c(){e=S("Create Base Snapshot")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function l_(l){let e;return{c(){e=S("✓ Ready")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function n_(l){let e,t,n,s;const r=[xp,Xp,Zp],o=[];function c(i,u){return i[1]===null?0:i[1].exists?1:2}return e=c(l),t=o[e]=r[e](l),{c(){t.c(),n=Ne()},m(i,u){o[e].m(i,u),w(i,n,u),s=!0},p(i,u){let f=e;e=c(i),e===f?o[e].p(i,u):(we(),L(o[f],1,1,()=>{o[f]=null}),ye(),t=o[e],t?t.p(i,u):(t=o[e]=r[e](i),t.c()),P(t,1),t.m(n.parentNode,n))},i(i){s||(P(t),s=!0)},o(i){L(t),s=!1},d(i){i&&$(n),o[e].d(i)}}}function s_(l){let e,t,n,s,r;return t=new Re({props:{variant:"info",$$slots:{default:[i_]},$$scope:{ctx:l}}}),{c(){e=_("div"),x(t.$$.fragment),n=b(),s=_("p"),s.textContent="Optional: Use DO Container Registry for private images.",p(s,"class","svelte-m8qcvw"),p(e,"class","status-missing svelte-m8qcvw")},m(o,c){w(o,e,c),Z(t,e,null),a(e,n),a(e,s),r=!0},p(o,c){const i={};c[1]&1024&&(i.$$scope={dirty:c,ctx:o}),t.$set(i)},i(o){r||(P(t.$$.fragment,o),r=!0)},o(o){L(t.$$.fragment,o),r=!1},d(o){o&&$(e),X(t)}}}function o_(l){let e,t,n,s,r,o,c=l[2].name+"",i,u,f,d,v=l[2].region+"",h,m;return t=new Re({props:{variant:"success",$$slots:{default:[a_]},$$scope:{ctx:l}}}),{c(){e=_("div"),x(t.$$.fragment),n=b(),s=_("div"),r=_("div"),o=S("Name: "),i=S(c),u=b(),f=_("div"),d=S("Region: "),h=S(v),p(s,"class","status-details svelte-m8qcvw"),p(e,"class","status-ok svelte-m8qcvw")},m(g,y){w(g,e,y),Z(t,e,null),a(e,n),a(e,s),a(s,r),a(r,o),a(r,i),a(s,u),a(s,f),a(f,d),a(f,h),m=!0},p(g,y){const C={};y[1]&1024&&(C.$$scope={dirty:y,ctx:g}),t.$set(C),(!m||y[0]&4)&&c!==(c=g[2].name+"")&&B(i,c),(!m||y[0]&4)&&v!==(v=g[2].region+"")&&B(h,v)},i(g){m||(P(t.$$.fragment,g),m=!0)},o(g){L(t.$$.fragment,g),m=!1},d(g){g&&$(e),X(t)}}}function r_(l){let e;return{c(){e=_("div"),e.textContent="Checking...",p(e,"class","status-checking svelte-m8qcvw")},m(t,n){w(t,e,n)},p:ie,i:ie,o:ie,d(t){t&&$(e)}}}function i_(l){let e;return{c(){e=S("Not configured")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function a_(l){let e;return{c(){e=S("✓ Connected")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function c_(l){let e,t,n,s;const r=[r_,o_,s_],o=[];function c(i,u){return i[2]===null?0:i[2].exists?1:2}return e=c(l),t=o[e]=r[e](l),{c(){t.c(),n=Ne()},m(i,u){o[e].m(i,u),w(i,n,u),s=!0},p(i,u){let f=e;e=c(i),e===f?o[e].p(i,u):(we(),L(o[f],1,1,()=>{o[f]=null}),ye(),t=o[e],t?t.p(i,u):(t=o[e]=r[e](i),t.c()),P(t,1),t.m(n.parentNode,n))},i(i){s||(P(t),s=!0)},o(i){L(t),s=!1},d(i){i&&$(n),o[e].d(i)}}}function ai(l){let e,t;return e=new Be({props:{title:"📋 Progress",$$slots:{default:[f_]},$$scope:{ctx:l}}}),{c(){x(e.$$.fragment)},m(n,s){Z(e,n,s),t=!0},p(n,s){const r={};s[0]&48|s[1]&1024&&(r.$$scope={dirty:s,ctx:n}),e.$set(r)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){X(e,n)}}}function ci(l){let e,t=l[35].message+"",n,s;return{c(){e=_("div"),n=S(t),p(e,"class",s="log-line "+l[35].type+" svelte-m8qcvw")},m(r,o){w(r,e,o),a(e,n)},p(r,o){o[0]&32&&t!==(t=r[35].message+"")&&B(n,t),o[0]&32&&s!==(s="log-line "+r[35].type+" svelte-m8qcvw")&&p(e,"class",s)},d(r){r&&$(e)}}}function f_(l){let e,t,n,s,r=de(l[5]),o=[];for(let c=0;c<r.length;c+=1)o[c]=ci(oi(l,r,c));return{c(){e=_("div"),t=_("div"),n=b(),s=_("div");for(let c=0;c<o.length;c+=1)o[c].c();p(t,"class","progress-fill svelte-m8qcvw"),Ie(t,"width",l[4]+"%"),p(e,"class","progress-bar svelte-m8qcvw"),p(s,"class","log-container svelte-m8qcvw")},m(c,i){w(c,e,i),a(e,t),w(c,n,i),w(c,s,i);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(s,null)},p(c,i){if(i[0]&16&&Ie(t,"width",c[4]+"%"),i[0]&32){r=de(c[5]);let u;for(u=0;u<r.length;u+=1){const f=oi(c,r,u);o[u]?o[u].p(f,i):(o[u]=ci(f),o[u].c(),o[u].m(s,null))}for(;u<o.length;u+=1)o[u].d(1);o.length=r.length}},d(c){c&&($(e),$(n),$(s)),Me(o,c)}}}function fi(l){let e,t=l[32].label+"",n;return{c(){e=_("option"),n=S(t),e.__value=l[32].value,ne(e,e.__value)},m(s,r){w(s,e,r),a(e,n)},p:ie,d(s){s&&$(e)}}}function u_(l){let e,t,n,s,r,o,c,i,u,f,d,v,h,m,g,y,C,k,z,D,T,E,q,j,R,O,F,I,V=de(l[13]),J=[];for(let U=0;U<V.length;U+=1)J[U]=fi(si(l,V,U));return{c(){e=_("form"),t=_("div"),n=_("label"),n.textContent="Snapshot Name *",s=b(),r=_("input"),o=b(),c=_("div"),i=_("label"),i.textContent="Base Image",u=b(),f=_("select");for(let U=0;U<J.length;U+=1)J[U].c();d=b(),v=_("div"),h=_("label"),h.textContent="Pre-install",m=b(),g=_("div"),y=_("label"),C=_("input"),k=S(`
          Docker`),z=b(),D=_("label"),T=_("input"),E=S(`
          Nginx`),q=b(),j=_("label"),R=_("input"),O=S(`
          Certbot (SSL)`),p(n,"for","snap-name"),p(n,"class","svelte-m8qcvw"),p(r,"id","snap-name"),p(r,"type","text"),p(r,"placeholder","my-base-snapshot"),r.required=!0,p(r,"class","svelte-m8qcvw"),p(t,"class","form-group svelte-m8qcvw"),p(i,"for","base-image"),p(i,"class","svelte-m8qcvw"),p(f,"id","base-image"),p(f,"class","svelte-m8qcvw"),l[8]===void 0&&Ve(()=>l[24].call(f)),p(c,"class","form-group svelte-m8qcvw"),p(h,"class","svelte-m8qcvw"),p(C,"type","checkbox"),p(C,"class","svelte-m8qcvw"),p(y,"class","checkbox-item svelte-m8qcvw"),p(T,"type","checkbox"),p(T,"class","svelte-m8qcvw"),p(D,"class","checkbox-item svelte-m8qcvw"),p(R,"type","checkbox"),p(R,"class","svelte-m8qcvw"),p(j,"class","checkbox-item svelte-m8qcvw"),p(g,"class","checkbox-list svelte-m8qcvw"),p(v,"class","form-group svelte-m8qcvw")},m(U,A){w(U,e,A),a(e,t),a(t,n),a(t,s),a(t,r),ne(r,l[7]),a(e,o),a(e,c),a(c,i),a(c,u),a(c,f);for(let M=0;M<J.length;M+=1)J[M]&&J[M].m(f,null);Le(f,l[8],!0),a(e,d),a(e,v),a(v,h),a(v,m),a(v,g),a(g,y),a(y,C),C.checked=l[9],a(y,k),a(g,z),a(g,D),a(D,T),T.checked=l[10],a(D,E),a(g,q),a(g,j),a(j,R),R.checked=l[11],a(j,O),F||(I=[se(r,"input",l[23]),se(f,"change",l[24]),se(C,"change",l[25]),se(T,"change",l[26]),se(R,"change",l[27]),se(e,"submit",Yi(l[16]))],F=!0)},p(U,A){if(A[0]&128&&r.value!==U[7]&&ne(r,U[7]),A[0]&8192){V=de(U[13]);let M;for(M=0;M<V.length;M+=1){const G=si(U,V,M);J[M]?J[M].p(G,A):(J[M]=fi(G),J[M].c(),J[M].m(f,null))}for(;M<J.length;M+=1)J[M].d(1);J.length=V.length}A[0]&8448&&Le(f,U[8]),A[0]&512&&(C.checked=U[9]),A[0]&1024&&(T.checked=U[10]),A[0]&2048&&(R.checked=U[11])},d(U){U&&$(e),Me(J,U),F=!1,Ue(I)}}}function p_(l){let e;return{c(){e=S("Cancel")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function __(l){let e;return{c(){e=S("🔨 Build Snapshot")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function d_(l){let e;return{c(){e=S("Building...")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function v_(l){let e;function t(r,o){return r[6]?d_:__}let n=t(l),s=n(l);return{c(){s.c(),e=Ne()},m(r,o){s.m(r,o),w(r,e,o)},p(r,o){n!==(n=t(r))&&(s.d(1),s=n(r),s&&(s.c(),s.m(e.parentNode,e)))},d(r){r&&$(e),s.d(r)}}}function m_(l){let e,t,n,s,r;return t=new qe({props:{variant:"ghost",$$slots:{default:[p_]},$$scope:{ctx:l}}}),t.$on("click",l[22]),s=new qe({props:{variant:"primary",disabled:l[6],$$slots:{default:[v_]},$$scope:{ctx:l}}}),s.$on("click",l[16]),{c(){e=_("div"),x(t.$$.fragment),n=b(),x(s.$$.fragment),p(e,"slot","footer")},m(o,c){w(o,e,c),Z(t,e,null),a(e,n),Z(s,e,null),r=!0},p(o,c){const i={};c[1]&1024&&(i.$$scope={dirty:c,ctx:o}),t.$set(i);const u={};c[0]&64&&(u.disabled=o[6]),c[0]&64|c[1]&1024&&(u.$$scope={dirty:c,ctx:o}),s.$set(u)},i(o){r||(P(t.$$.fragment,o),P(s.$$.fragment,o),r=!0)},o(o){L(t.$$.fragment,o),L(s.$$.fragment,o),r=!1},d(o){o&&$(e),X(t),X(s)}}}function h_(l){let e,t,n,s,r,o,c,i,u,f,d,v,h;n=new Be({props:{title:"📸 Your Snapshots",$$slots:{header:[Qp],default:[Yp]},$$scope:{ctx:l}}}),o=new Be({props:{title:"🏗️ Base Snapshot",$$slots:{default:[n_]},$$scope:{ctx:l}}}),i=new Be({props:{title:"📦 App Registry (DO)",$$slots:{default:[c_]},$$scope:{ctx:l}}});let m=l[5].length>0&&ai(l);function g(C){l[28](C)}let y={title:"Build Custom Snapshot",width:"500px",$$slots:{footer:[m_],default:[u_]},$$scope:{ctx:l}};return l[3]!==void 0&&(y.open=l[3]),d=new al({props:y}),gt.push(()=>rl(d,"open",g)),d.$on("close",l[29]),{c(){e=_("div"),t=_("div"),x(n.$$.fragment),s=b(),r=_("div"),x(o.$$.fragment),c=b(),x(i.$$.fragment),u=b(),m&&m.c(),f=b(),x(d.$$.fragment),p(r,"class","right-column svelte-m8qcvw"),p(t,"class","snapshots-grid svelte-m8qcvw"),p(e,"class","snapshots-page svelte-m8qcvw")},m(C,k){w(C,e,k),a(e,t),Z(n,t,null),a(t,s),a(t,r),Z(o,r,null),a(r,c),Z(i,r,null),a(r,u),m&&m.m(r,null),w(C,f,k),Z(d,C,k),h=!0},p(C,k){const z={};k[0]&4105|k[1]&1024&&(z.$$scope={dirty:k,ctx:C}),n.$set(z);const D={};k[0]&2|k[1]&1024&&(D.$$scope={dirty:k,ctx:C}),o.$set(D);const T={};k[0]&4|k[1]&1024&&(T.$$scope={dirty:k,ctx:C}),i.$set(T),C[5].length>0?m?(m.p(C,k),k[0]&32&&P(m,1)):(m=ai(C),m.c(),P(m,1),m.m(r,null)):m&&(we(),L(m,1,1,()=>{m=null}),ye());const E={};k[0]&4040|k[1]&1024&&(E.$$scope={dirty:k,ctx:C}),!v&&k[0]&8&&(v=!0,E.open=C[3],ol(()=>v=!1)),d.$set(E)},i(C){h||(P(n.$$.fragment,C),P(o.$$.fragment,C),P(i.$$.fragment,C),P(m),P(d.$$.fragment,C),h=!0)},o(C){L(n.$$.fragment,C),L(o.$$.fragment,C),L(i.$$.fragment,C),L(m),L(d.$$.fragment,C),h=!1},d(C){C&&($(e),$(f)),X(n),X(o),X(i),m&&m.d(),X(d,C)}}}function gn(l){return l?new Date(l).toLocaleDateString():"-"}function ui(l){return l?`${l} GB`:"-"}function g_(l,e,t){let n,s,r;Je(l,zl,N=>t(19,s=N)),Je(l,oa,N=>t(12,r=N));let o=!1,c=null,i=null,u=!1,f=0,d=[],v=!1,h="",m="ubuntu-22-04-x64",g=!0,y=!0,C=!0;const k=[{value:"ubuntu-22-04-x64",label:"Ubuntu 22.04 LTS"},{value:"ubuntu-20-04-x64",label:"Ubuntu 20.04 LTS"},{value:"debian-11-x64",label:"Debian 11"},{value:"debian-12-x64",label:"Debian 12"}];ll(()=>{D(),T()});function z(){zl.refresh()}async function D(){try{const N=await Fe("GET","/infra/setup/status");t(1,c=N)}catch(N){t(1,c={exists:!1,error:N.message})}}async function T(){try{const N=await Fe("GET","/infra/registry");t(2,i=N)}catch(N){t(2,i={exists:!1,error:N.message})}}async function E(){t(6,v=!0),t(4,f=0),t(5,d=[]);try{d.push({message:"🚀 Creating base snapshot...",type:"info"}),t(4,f=5),await na("POST","/infra/setup/init/stream",{},N=>{N.message&&(d.push({message:N.message,type:N.type||"info"}),t(5,d)),N.progress&&t(4,f=N.progress),(N.type==="done"||N.type==="complete")&&t(4,f=100)}),d.push({message:"✅ Base snapshot created successfully",type:"success"}),ge.success("Base snapshot created!"),await D(),await z()}catch(N){d.push({message:`❌ Error: ${N.message}`,type:"error"}),ge.error("Failed to create base snapshot: "+N.message)}finally{t(6,v=!1)}}async function q(){if(!h){ge.error("Snapshot name is required");return}t(6,v=!0),t(4,f=0),t(5,d=[]);try{d.push({message:`Building snapshot: ${h}`,type:"info"}),t(4,f=10);const N=await Fe("POST","/infra/snapshots/build",{name:h,base_image:m,install_docker:g,install_nginx:y,install_certbot:C});t(4,f=100),d.push({message:"✅ Snapshot created successfully",type:"success"}),ge.success("Snapshot created!"),await z(),t(3,u=!1)}catch(N){d.push({message:`❌ Error: ${N.message}`,type:"error"}),ge.error(N.message)}finally{t(6,v=!1)}}async function j(N,H){if(confirm(`Delete snapshot "${H}"? This cannot be undone.`))try{await Fe("DELETE",`/infra/snapshots/${N}`),ge.success("Snapshot deleted"),await z()}catch(ee){ge.error("Failed to delete snapshot: "+ee.message)}}const R=()=>t(3,u=!0),O=N=>j(N.id,N.name),F=()=>t(3,u=!1);function I(){h=this.value,t(7,h)}function V(){m=mt(this),t(8,m),t(13,k)}function J(){g=this.checked,t(9,g)}function U(){y=this.checked,t(10,y)}function A(){C=this.checked,t(11,C)}function M(N){u=N,t(3,u)}const G=()=>t(3,u=!1);return l.$$.update=()=>{l.$$.dirty[0]&524288&&t(18,n=s||{loading:!1}),l.$$.dirty[0]&262144&&t(0,o=n.loading)},[o,c,i,u,f,d,v,h,m,g,y,C,r,k,z,E,q,j,n,s,R,O,F,I,V,J,U,A,M,G]}class b_ extends tt{constructor(e){super(),et(this,e,g_,h_,Ye,{},null,[-1,-1])}}function pi(l,e,t){var r,o,c;const n=l.slice();n[22]=e[t];const s=n[22].ip||((c=(o=(r=n[22].networks)==null?void 0:r.v4)==null?void 0:o[0])==null?void 0:c.ip_address);return n[23]=s,n}function _i(l,e,t){const n=l.slice();return n[26]=e[t],n}function di(l,e,t){const n=l.slice();return n[29]=e[t],n}function vi(l){let e,t=l[29].label+"",n;return{c(){e=_("option"),n=S(t),e.__value=l[29].value,ne(e,e.__value)},m(s,r){w(s,e,r),a(e,n)},p:ie,d(s){s&&$(e)}}}function mi(l){let e,t=l[26].charAt(0).toUpperCase()+l[26].slice(1)+"",n;return{c(){e=_("option"),n=S(t),e.__value=l[26],ne(e,e.__value)},m(s,r){w(s,e,r),a(e,n)},p:ie,d(s){s&&$(e)}}}function hi(l){let e,t=(l[22].name||"unnamed")+"",n,s,r=l[23]+"",o,c,i;return{c(){e=_("option"),n=S(t),s=S(" ("),o=S(r),c=S(")"),e.__value=i=l[23],ne(e,e.__value)},m(u,f){w(u,e,f),a(e,n),a(e,s),a(e,o),a(e,c)},p(u,f){f[0]&64&&t!==(t=(u[22].name||"unnamed")+"")&&B(n,t),f[0]&64&&r!==(r=u[23]+"")&&B(o,r),f[0]&64&&i!==(i=u[23])&&(e.__value=i,ne(e,e.__value))},d(u){u&&$(e)}}}function gi(l){let e,t=l[23]&&hi(l);return{c(){t&&t.c(),e=Ne()},m(n,s){t&&t.m(n,s),w(n,e,s)},p(n,s){n[23]?t?t.p(n,s):(t=hi(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(n){n&&$(e),t&&t.d(n)}}}function k_(l){let e;return{c(){e=S("🚀 Deploy Service")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function $_(l){let e;return{c(){e=S("Deploying...")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function w_(l){let e;function t(r,o){return r[4]?$_:k_}let n=t(l),s=n(l);return{c(){s.c(),e=Ne()},m(r,o){s.m(r,o),w(r,e,o)},p(r,o){n!==(n=t(r))&&(s.d(1),s=n(r),s&&(s.c(),s.m(e.parentNode,e)))},d(r){r&&$(e),s.d(r)}}}function y_(l){let e,t,n,s,r,o,c,i,u,f,d,v,h,m,g,y,C,k,z,D,T,E,q,j,R,O,F,I,V,J,U,A=de(l[7]),M=[];for(let Q=0;Q<A.length;Q+=1)M[Q]=vi(di(l,A,Q));let G=de(l[8]),N=[];for(let Q=0;Q<G.length;Q+=1)N[Q]=mi(_i(l,G,Q));let H=de(l[6]||[]),ee=[];for(let Q=0;Q<H.length;Q+=1)ee[Q]=gi(pi(l,H,Q));return I=new qe({props:{variant:"primary",type:"submit",disabled:l[4],$$slots:{default:[w_]},$$scope:{ctx:l}}}),{c(){e=_("p"),e.textContent="Deploy stateful services with automatic configuration, persistence, and service mesh.",t=b(),n=_("form"),s=_("div"),r=_("label"),r.textContent="Service Type *",o=b(),c=_("select"),i=_("option"),i.textContent="Select service...";for(let Q=0;Q<M.length;Q+=1)M[Q].c();u=b(),f=_("div"),d=_("label"),d.textContent="Project *",v=b(),h=_("input"),m=b(),g=_("div"),y=_("label"),y.textContent="Environment",C=b(),k=_("select");for(let Q=0;Q<N.length;Q+=1)N[Q].c();z=b(),D=_("div"),T=_("label"),T.textContent="Target Server *",E=b(),q=_("select"),j=_("option"),j.textContent="Select server...";for(let Q=0;Q<ee.length;Q+=1)ee[Q].c();R=b(),O=_("small"),O.textContent="Servers from Infrastructure tab",F=b(),x(I.$$.fragment),p(e,"class","description svelte-2vlpp7"),p(r,"for","svc-type"),p(r,"class","svelte-2vlpp7"),i.__value="",ne(i,i.__value),p(c,"id","svc-type"),c.required=!0,p(c,"class","svelte-2vlpp7"),l[0]===void 0&&Ve(()=>l[11].call(c)),p(s,"class","form-group svelte-2vlpp7"),p(d,"for","svc-project"),p(d,"class","svelte-2vlpp7"),p(h,"id","svc-project"),p(h,"type","text"),p(h,"placeholder","myapp"),h.required=!0,p(h,"class","svelte-2vlpp7"),p(f,"class","form-group svelte-2vlpp7"),p(y,"for","svc-env"),p(y,"class","svelte-2vlpp7"),p(k,"id","svc-env"),p(k,"class","svelte-2vlpp7"),l[2]===void 0&&Ve(()=>l[13].call(k)),p(g,"class","form-group svelte-2vlpp7"),p(T,"for","svc-server"),p(T,"class","svelte-2vlpp7"),j.__value="",ne(j,j.__value),p(q,"id","svc-server"),q.required=!0,p(q,"class","svelte-2vlpp7"),l[3]===void 0&&Ve(()=>l[14].call(q)),p(O,"class","svelte-2vlpp7"),p(D,"class","form-group svelte-2vlpp7")},m(Q,te){w(Q,e,te),w(Q,t,te),w(Q,n,te),a(n,s),a(s,r),a(s,o),a(s,c),a(c,i);for(let W=0;W<M.length;W+=1)M[W]&&M[W].m(c,null);Le(c,l[0],!0),a(n,u),a(n,f),a(f,d),a(f,v),a(f,h),ne(h,l[1]),a(n,m),a(n,g),a(g,y),a(g,C),a(g,k);for(let W=0;W<N.length;W+=1)N[W]&&N[W].m(k,null);Le(k,l[2],!0),a(n,z),a(n,D),a(D,T),a(D,E),a(D,q),a(q,j);for(let W=0;W<ee.length;W+=1)ee[W]&&ee[W].m(q,null);Le(q,l[3],!0),a(D,R),a(D,O),a(n,F),Z(I,n,null),V=!0,J||(U=[se(c,"change",l[11]),se(h,"input",l[12]),se(k,"change",l[13]),se(q,"change",l[14]),se(n,"submit",l[9])],J=!0)},p(Q,te){if(te[0]&128){A=de(Q[7]);let le;for(le=0;le<A.length;le+=1){const K=di(Q,A,le);M[le]?M[le].p(K,te):(M[le]=vi(K),M[le].c(),M[le].m(c,null))}for(;le<M.length;le+=1)M[le].d(1);M.length=A.length}if(te[0]&129&&Le(c,Q[0]),te[0]&2&&h.value!==Q[1]&&ne(h,Q[1]),te[0]&256){G=de(Q[8]);let le;for(le=0;le<G.length;le+=1){const K=_i(Q,G,le);N[le]?N[le].p(K,te):(N[le]=mi(K),N[le].c(),N[le].m(k,null))}for(;le<N.length;le+=1)N[le].d(1);N.length=G.length}if(te[0]&260&&Le(k,Q[2]),te[0]&64){H=de(Q[6]||[]);let le;for(le=0;le<H.length;le+=1){const K=pi(Q,H,le);ee[le]?ee[le].p(K,te):(ee[le]=gi(K),ee[le].c(),ee[le].m(q,null))}for(;le<ee.length;le+=1)ee[le].d(1);ee.length=H.length}te[0]&72&&Le(q,Q[3]);const W={};te[0]&16&&(W.disabled=Q[4]),te[0]&16|te[1]&2&&(W.$$scope={dirty:te,ctx:Q}),I.$set(W)},i(Q){V||(P(I.$$.fragment,Q),V=!0)},o(Q){L(I.$$.fragment,Q),V=!1},d(Q){Q&&($(e),$(t),$(n)),Me(M,Q),Me(N,Q),Me(ee,Q),X(I),J=!1,Ue(U)}}}function C_(l){let e;return{c(){e=_("div"),e.innerHTML='<div class="empty-icon svelte-2vlpp7">🗄️</div> <div>Deploy a service to see connection details</div>',p(e,"class","empty-result svelte-2vlpp7")},m(t,n){w(t,e,n)},p:ie,d(t){t&&$(e)}}}function S_(l){let e,t,n,s,r,o=l[5].service_type+"",c,i,u,f,d,v,h,m,g=(l[5].host||"localhost")+"",y,C,k,z,D,T,E=l[5].port+"",q,j,R,O,F,I,V,J,U,A=l[5].database&&bi(l),M=l[5].username&&ki(l),G=l[5].password&&$i(l),N=l[5].connection_url&&wi(l);return{c(){e=_("div"),t=_("div"),n=_("span"),n.textContent="✅",s=b(),r=_("span"),c=S(o),i=S(" deployed"),u=b(),f=_("div"),d=_("div"),v=_("span"),v.textContent="Host:",h=b(),m=_("code"),y=S(g),C=b(),k=_("div"),z=_("span"),z.textContent="Port:",D=b(),T=_("code"),q=S(E),j=b(),A&&A.c(),R=b(),M&&M.c(),O=b(),G&&G.c(),F=b(),N&&N.c(),I=b(),V=_("small"),V.textContent="Click any value to copy",p(n,"class","result-icon svelte-2vlpp7"),p(r,"class","result-title svelte-2vlpp7"),p(t,"class","result-header svelte-2vlpp7"),p(v,"class","label svelte-2vlpp7"),p(m,"class","value clickable svelte-2vlpp7"),p(d,"class","info-row svelte-2vlpp7"),p(z,"class","label svelte-2vlpp7"),p(T,"class","value clickable svelte-2vlpp7"),p(k,"class","info-row svelte-2vlpp7"),p(f,"class","connection-info svelte-2vlpp7"),p(V,"class","copy-hint svelte-2vlpp7"),p(e,"class","result-content svelte-2vlpp7")},m(H,ee){w(H,e,ee),a(e,t),a(t,n),a(t,s),a(t,r),a(r,c),a(r,i),a(e,u),a(e,f),a(f,d),a(d,v),a(d,h),a(d,m),a(m,y),a(f,C),a(f,k),a(k,z),a(k,D),a(k,T),a(T,q),a(f,j),A&&A.m(f,null),a(f,R),M&&M.m(f,null),a(f,O),G&&G.m(f,null),a(f,F),N&&N.m(f,null),a(e,I),a(e,V),J||(U=[se(m,"click",l[15]),se(T,"click",l[16])],J=!0)},p(H,ee){ee[0]&32&&o!==(o=H[5].service_type+"")&&B(c,o),ee[0]&32&&g!==(g=(H[5].host||"localhost")+"")&&B(y,g),ee[0]&32&&E!==(E=H[5].port+"")&&B(q,E),H[5].database?A?A.p(H,ee):(A=bi(H),A.c(),A.m(f,R)):A&&(A.d(1),A=null),H[5].username?M?M.p(H,ee):(M=ki(H),M.c(),M.m(f,O)):M&&(M.d(1),M=null),H[5].password?G?G.p(H,ee):(G=$i(H),G.c(),G.m(f,F)):G&&(G.d(1),G=null),H[5].connection_url?N?N.p(H,ee):(N=wi(H),N.c(),N.m(f,null)):N&&(N.d(1),N=null)},d(H){H&&$(e),A&&A.d(),M&&M.d(),G&&G.d(),N&&N.d(),J=!1,Ue(U)}}}function bi(l){let e,t,n,s,r=l[5].database+"",o,c,i;return{c(){e=_("div"),t=_("span"),t.textContent="Database:",n=b(),s=_("code"),o=S(r),p(t,"class","label svelte-2vlpp7"),p(s,"class","value clickable svelte-2vlpp7"),p(e,"class","info-row svelte-2vlpp7")},m(u,f){w(u,e,f),a(e,t),a(e,n),a(e,s),a(s,o),c||(i=se(s,"click",l[17]),c=!0)},p(u,f){f[0]&32&&r!==(r=u[5].database+"")&&B(o,r)},d(u){u&&$(e),c=!1,i()}}}function ki(l){let e,t,n,s,r=l[5].username+"",o,c,i;return{c(){e=_("div"),t=_("span"),t.textContent="Username:",n=b(),s=_("code"),o=S(r),p(t,"class","label svelte-2vlpp7"),p(s,"class","value clickable svelte-2vlpp7"),p(e,"class","info-row svelte-2vlpp7")},m(u,f){w(u,e,f),a(e,t),a(e,n),a(e,s),a(s,o),c||(i=se(s,"click",l[18]),c=!0)},p(u,f){f[0]&32&&r!==(r=u[5].username+"")&&B(o,r)},d(u){u&&$(e),c=!1,i()}}}function $i(l){let e,t,n,s,r=l[5].password+"",o,c,i;return{c(){e=_("div"),t=_("span"),t.textContent="Password:",n=b(),s=_("code"),o=S(r),p(t,"class","label svelte-2vlpp7"),p(s,"class","value clickable svelte-2vlpp7"),p(e,"class","info-row svelte-2vlpp7")},m(u,f){w(u,e,f),a(e,t),a(e,n),a(e,s),a(s,o),c||(i=se(s,"click",l[19]),c=!0)},p(u,f){f[0]&32&&r!==(r=u[5].password+"")&&B(o,r)},d(u){u&&$(e),c=!1,i()}}}function wi(l){let e,t,n,s,r=l[5].connection_url+"",o,c,i;return{c(){e=_("div"),t=_("span"),t.textContent="Connection URL:",n=b(),s=_("code"),o=S(r),p(t,"class","label svelte-2vlpp7"),p(s,"class","value url clickable svelte-2vlpp7"),p(e,"class","info-row full-width svelte-2vlpp7")},m(u,f){w(u,e,f),a(e,t),a(e,n),a(e,s),a(s,o),c||(i=se(s,"click",l[20]),c=!0)},p(u,f){f[0]&32&&r!==(r=u[5].connection_url+"")&&B(o,r)},d(u){u&&$(e),c=!1,i()}}}function z_(l){let e;function t(r,o){return r[5]?S_:C_}let n=t(l),s=n(l);return{c(){s.c(),e=Ne()},m(r,o){s.m(r,o),w(r,e,o)},p(r,o){n===(n=t(r))&&s?s.p(r,o):(s.d(1),s=n(r),s&&(s.c(),s.m(e.parentNode,e)))},d(r){r&&$(e),s.d(r)}}}function q_(l){let e;return{c(){e=_("div"),e.innerHTML='<div class="feature svelte-2vlpp7"><strong class="svelte-2vlpp7">🔐 Auto Credentials</strong> <p class="svelte-2vlpp7">Deterministic passwords generated from project/env. Same inputs = same password.</p></div> <div class="feature svelte-2vlpp7"><strong class="svelte-2vlpp7">💾 Persistent Storage</strong> <p class="svelte-2vlpp7">Data volumes mounted at /data. Survives container restarts and redeploys.</p></div> <div class="feature svelte-2vlpp7"><strong class="svelte-2vlpp7">🔀 Service Mesh</strong> <p class="svelte-2vlpp7">Nginx proxy on internal ports. Apps connect to localhost:PORT.</p></div> <div class="feature svelte-2vlpp7"><strong class="svelte-2vlpp7">🔧 Auto-Inject</strong> <p class="svelte-2vlpp7">Enable &quot;Auto-inject&quot; in Deploy tab to get DATABASE_URL automatically.</p></div>',p(e,"class","features-grid svelte-2vlpp7")},m(t,n){w(t,e,n)},p:ie,d(t){t&&$(e)}}}function D_(l){let e,t,n,s,r,o,c,i;return n=new Be({props:{title:"🗄️ Deploy Database/Cache",$$slots:{default:[y_]},$$scope:{ctx:l}}}),r=new Be({props:{title:"📋 Deployment Result",$$slots:{default:[z_]},$$scope:{ctx:l}}}),c=new Be({props:{title:"ℹ️ How It Works",$$slots:{default:[q_]},$$scope:{ctx:l}}}),{c(){e=_("div"),t=_("div"),x(n.$$.fragment),s=b(),x(r.$$.fragment),o=b(),x(c.$$.fragment),p(t,"class","services-grid svelte-2vlpp7"),p(e,"class","services-page svelte-2vlpp7")},m(u,f){w(u,e,f),a(e,t),Z(n,t,null),a(t,s),Z(r,t,null),a(e,o),Z(c,e,null),i=!0},p(u,f){const d={};f[0]&95|f[1]&2&&(d.$$scope={dirty:f,ctx:u}),n.$set(d);const v={};f[0]&32|f[1]&2&&(v.$$scope={dirty:f,ctx:u}),r.$set(v);const h={};f[1]&2&&(h.$$scope={dirty:f,ctx:u}),c.$set(h)},i(u){i||(P(n.$$.fragment,u),P(r.$$.fragment,u),P(c.$$.fragment,u),i=!0)},o(u){L(n.$$.fragment,u),L(r.$$.fragment,u),L(c.$$.fragment,u),i=!1},d(u){u&&$(e),X(n),X(r),X(c)}}}function T_(l,e,t){let n;Je(l,ql,R=>t(6,n=R));let s="",r="",o="prod",c="",i=!1,u=null;const f=[{value:"postgres",label:"🐘 PostgreSQL",port:5432},{value:"redis",label:"⚡ Redis",port:6379},{value:"mysql",label:"🐬 MySQL",port:3306},{value:"mongo",label:"🍃 MongoDB",port:27017}],d=["prod","staging","dev"];ll(()=>{v()});async function v(){try{const R=await Fe("GET","/infra/servers");ql.set(R.servers||R||[])}catch(R){console.error("Failed to load servers:",R)}}async function h(R){if(R.preventDefault(),!s||!r||!c){ge.error("Please fill in all required fields");return}t(4,i=!0),t(5,u=null);try{ge.error("Service deployment not yet implemented. Use Deploy tab instead.");return}catch(O){ge.error("Deployment failed: "+O.message)}finally{t(4,i=!1)}}function m(R){navigator.clipboard.writeText(R),ge.success("Copied to clipboard")}function g(){s=mt(this),t(0,s),t(7,f)}function y(){r=this.value,t(1,r)}function C(){o=mt(this),t(2,o),t(8,d)}function k(){c=mt(this),t(3,c)}return[s,r,o,c,i,u,n,f,d,h,m,g,y,C,k,()=>m(u.host||"localhost"),()=>m(String(u.port)),()=>m(u.database),()=>m(u.username),()=>m(u.password),()=>m(u.connection_url)]}class P_ extends tt{constructor(e){super(),et(this,e,T_,D_,Ye,{},null,[-1,-1])}}const{Boolean:E_}=Ji;function yi(l,e,t){const n=l.slice();return n[32]=e[t],n}function L_(l){let e,t,n,s,r,o,c,i,u,f;return{c(){e=_("div"),t=_("label"),t.textContent="Theme",n=b(),s=_("select"),r=_("option"),r.textContent="🌙 Dark (Space)",o=_("option"),o.textContent="☀️ Light",c=b(),i=_("p"),i.textContent="Theme preference is saved to your browser.",p(t,"for","theme-select"),p(t,"class","svelte-16vnl3x"),r.__value="dark",ne(r,r.__value),o.__value="light",ne(o,o.__value),p(s,"id","theme-select"),p(s,"class","svelte-16vnl3x"),l[14]===void 0&&Ve(()=>l[21].call(s)),p(e,"class","form-group svelte-16vnl3x"),p(i,"class","hint svelte-16vnl3x")},m(d,v){w(d,e,v),a(e,t),a(e,n),a(e,s),a(s,r),a(s,o),Le(s,l[14],!0),w(d,c,v),w(d,i,v),u||(f=[se(s,"change",l[21]),se(s,"change",l[22])],u=!0)},p(d,v){v[0]&16384&&Le(s,d[14])},d(d){d&&($(e),$(c),$(i)),u=!1,Ue(f)}}}function M_(l){let e;return{c(){e=S("Save Token")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function j_(l){let e,t;return e=new Re({props:{variant:"danger",$$slots:{default:[A_]},$$scope:{ctx:l}}}),{c(){x(e.$$.fragment)},m(n,s){Z(e,n,s),t=!0},p(n,s){const r={};s[1]&16&&(r.$$scope={dirty:s,ctx:n}),e.$set(r)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){X(e,n)}}}function N_(l){let e,t;return e=new Re({props:{variant:"warning",$$slots:{default:[O_]},$$scope:{ctx:l}}}),{c(){x(e.$$.fragment)},m(n,s){Z(e,n,s),t=!0},p(n,s){const r={};s[1]&16&&(r.$$scope={dirty:s,ctx:n}),e.$set(r)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){X(e,n)}}}function R_(l){let e,t,n,s,r;return e=new Re({props:{variant:"success",$$slots:{default:[F_]},$$scope:{ctx:l}}}),{c(){x(e.$$.fragment),t=b(),n=_("span"),s=S(l[0]),p(n,"class","token-preview svelte-16vnl3x")},m(o,c){Z(e,o,c),w(o,t,c),w(o,n,c),a(n,s),r=!0},p(o,c){const i={};c[1]&16&&(i.$$scope={dirty:c,ctx:o}),e.$set(i),(!r||c[0]&1)&&B(s,o[0])},i(o){r||(P(e.$$.fragment,o),r=!0)},o(o){L(e.$$.fragment,o),r=!1},d(o){o&&($(t),$(n)),X(e,o)}}}function A_(l){let e;return{c(){e=S("Invalid token")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function O_(l){let e;return{c(){e=S("Not configured")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function F_(l){let e;return{c(){e=S("✓ Connected")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function B_(l){let e,t,n,s,r,o,c,i,u,f,d,v,h,m,g;i=new qe({props:{variant:"primary",type:"submit",$$slots:{default:[M_]},$$scope:{ctx:l}}});const y=[R_,N_,j_],C=[];function k(z,D){var T,E;return(T=z[1])!=null&&T.valid?0:(E=z[1])!=null&&E.missing?1:2}return d=k(l),v=C[d]=y[d](l),{c(){e=_("p"),e.innerHTML=`Get your token from 
      <a href="https://cloud.digitalocean.com/account/api/tokens" target="_blank" class="svelte-16vnl3x">DO Control Panel</a>.`,t=b(),n=_("div"),n.innerHTML='<div class="info-title svelte-16vnl3x">🔒 Browser Storage</div> <div class="info-text svelte-16vnl3x">Token stored in browser cookie. Passed with each API request. Never stored on server.</div>',s=b(),r=_("form"),o=_("div"),o.innerHTML='<label for="do-token" class="svelte-16vnl3x">DigitalOcean API Token</label> <input id="do-token" type="password" placeholder="dop_v1_xxxxx" class="svelte-16vnl3x"/>',c=b(),x(i.$$.fragment),u=b(),f=_("div"),v.c(),p(e,"class","description svelte-16vnl3x"),p(n,"class","info-box svelte-16vnl3x"),p(o,"class","form-group svelte-16vnl3x"),p(f,"class","token-status svelte-16vnl3x")},m(z,D){w(z,e,D),w(z,t,D),w(z,n,D),w(z,s,D),w(z,r,D),a(r,o),a(r,c),Z(i,r,null),w(z,u,D),w(z,f,D),C[d].m(f,null),h=!0,m||(g=se(r,"submit",l[15]),m=!0)},p(z,D){const T={};D[1]&16&&(T.$$scope={dirty:D,ctx:z}),i.$set(T);let E=d;d=k(z),d===E?C[d].p(z,D):(we(),L(C[E],1,1,()=>{C[E]=null}),ye(),v=C[d],v?v.p(z,D):(v=C[d]=y[d](z),v.c()),P(v,1),v.m(f,null))},i(z){h||(P(i.$$.fragment,z),P(v),h=!0)},o(z){L(i.$$.fragment,z),L(v),h=!1},d(z){z&&($(e),$(t),$(n),$(s),$(r),$(u),$(f)),X(i),C[d].d(),m=!1,g()}}}function I_(l){let e;return{c(){e=S("Save Token")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function U_(l){let e,t;return e=new Re({props:{variant:"warning",$$slots:{default:[G_]},$$scope:{ctx:l}}}),{c(){x(e.$$.fragment)},m(n,s){Z(e,n,s),t=!0},p(n,s){const r={};s[1]&16&&(r.$$scope={dirty:s,ctx:n}),e.$set(r)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){X(e,n)}}}function H_(l){let e,t,n,s,r;return e=new Re({props:{variant:"success",$$slots:{default:[W_]},$$scope:{ctx:l}}}),{c(){x(e.$$.fragment),t=b(),n=_("span"),s=S(l[2]),p(n,"class","token-preview svelte-16vnl3x")},m(o,c){Z(e,o,c),w(o,t,c),w(o,n,c),a(n,s),r=!0},p(o,c){const i={};c[1]&16&&(i.$$scope={dirty:c,ctx:o}),e.$set(i),(!r||c[0]&4)&&B(s,o[2])},i(o){r||(P(e.$$.fragment,o),r=!0)},o(o){L(e.$$.fragment,o),r=!1},d(o){o&&($(t),$(n)),X(e,o)}}}function G_(l){let e;return{c(){e=S("Not configured")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function W_(l){let e;return{c(){e=S("✓ Connected")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function J_(l){let e,t,n,s,r,o,c,i,u,f,d,v,h;o=new qe({props:{variant:"primary",type:"submit",$$slots:{default:[I_]},$$scope:{ctx:l}}});const m=[H_,U_],g=[];function y(C,k){var z;return(z=C[3])!=null&&z.valid?0:1}return u=y(l),f=g[u]=m[u](l),{c(){e=_("p"),e.innerHTML=`Get your token from 
      <a href="https://dash.cloudflare.com/profile/api-tokens" target="_blank" class="svelte-16vnl3x">Cloudflare Dashboard</a>.`,t=b(),n=_("form"),s=_("div"),s.innerHTML='<label for="cf-token" class="svelte-16vnl3x">Cloudflare API Token</label> <input id="cf-token" type="password" placeholder="xxxxx" class="svelte-16vnl3x"/>',r=b(),x(o.$$.fragment),c=b(),i=_("div"),f.c(),p(e,"class","description svelte-16vnl3x"),p(s,"class","form-group svelte-16vnl3x"),p(i,"class","token-status svelte-16vnl3x")},m(C,k){w(C,e,k),w(C,t,k),w(C,n,k),a(n,s),a(n,r),Z(o,n,null),w(C,c,k),w(C,i,k),g[u].m(i,null),d=!0,v||(h=se(n,"submit",l[16]),v=!0)},p(C,k){const z={};k[1]&16&&(z.$$scope={dirty:k,ctx:C}),o.$set(z);let D=u;u=y(C),u===D?g[u].p(C,k):(we(),L(g[D],1,1,()=>{g[D]=null}),ye(),f=g[u],f?f.p(C,k):(f=g[u]=m[u](C),f.c()),P(f,1),f.m(i,null))},i(C){d||(P(o.$$.fragment,C),P(f),d=!0)},o(C){L(o.$$.fragment,C),L(f),d=!1},d(C){C&&($(e),$(t),$(n),$(c),$(i)),X(o),g[u].d(),v=!1,h()}}}function V_(l){let e;return{c(){e=S("Setup Domain")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Ci(l){let e,t=l[7].message+"",n;return{c(){e=_("div"),n=S(t),p(e,"class","result svelte-16vnl3x"),Ce(e,"success",l[7].success),Ce(e,"error",!l[7].success)},m(s,r){w(s,e,r),a(e,n)},p(s,r){r[0]&128&&t!==(t=s[7].message+"")&&B(n,t),r[0]&128&&Ce(e,"success",s[7].success),r[0]&128&&Ce(e,"error",!s[7].success)},d(s){s&&$(e)}}}function Y_(l){let e,t,n,s,r,o,c,i,u,f,d,v,h,m,g,y,C,k,z,D,T,E,q,j;z=new qe({props:{variant:"primary",type:"submit",$$slots:{default:[V_]},$$scope:{ctx:l}}});let R=l[7]&&Ci(l);return{c(){e=_("p"),e.textContent='Point a domain to your server. With "Proxied" enabled, HTTPS works automatically.',t=b(),n=_("form"),s=_("div"),r=_("label"),r.textContent="Domain",o=b(),c=_("input"),i=b(),u=_("div"),f=_("label"),f.textContent="Server IP",d=b(),v=_("input"),h=b(),m=_("label"),g=_("input"),y=S(`
        Proxied (Cloudflare handles SSL)`),C=b(),k=_("div"),x(z.$$.fragment),D=b(),R&&R.c(),T=Ne(),p(e,"class","description svelte-16vnl3x"),p(r,"for","domain-name"),p(r,"class","svelte-16vnl3x"),p(c,"id","domain-name"),p(c,"type","text"),p(c,"placeholder","api.example.com"),c.required=!0,p(c,"class","svelte-16vnl3x"),p(s,"class","form-group svelte-16vnl3x"),p(f,"for","domain-ip"),p(f,"class","svelte-16vnl3x"),p(v,"id","domain-ip"),p(v,"type","text"),p(v,"placeholder","1.2.3.4"),v.required=!0,p(v,"class","svelte-16vnl3x"),p(u,"class","form-group svelte-16vnl3x"),p(g,"type","checkbox"),p(g,"class","svelte-16vnl3x"),p(m,"class","checkbox-label svelte-16vnl3x"),p(k,"class","form-actions svelte-16vnl3x")},m(O,F){w(O,e,F),w(O,t,F),w(O,n,F),a(n,s),a(s,r),a(s,o),a(s,c),ne(c,l[4]),a(n,i),a(n,u),a(u,f),a(u,d),a(u,v),ne(v,l[5]),a(n,h),a(n,m),a(m,g),g.checked=l[6],a(m,y),a(n,C),a(n,k),Z(z,k,null),w(O,D,F),R&&R.m(O,F),w(O,T,F),E=!0,q||(j=[se(c,"input",l[23]),se(v,"input",l[24]),se(g,"change",l[25]),se(n,"submit",l[17])],q=!0)},p(O,F){F[0]&16&&c.value!==O[4]&&ne(c,O[4]),F[0]&32&&v.value!==O[5]&&ne(v,O[5]),F[0]&64&&(g.checked=O[6]);const I={};F[1]&16&&(I.$$scope={dirty:F,ctx:O}),z.$set(I),O[7]?R?R.p(O,F):(R=Ci(O),R.c(),R.m(T.parentNode,T)):R&&(R.d(1),R=null)},i(O){E||(P(z.$$.fragment,O),E=!0)},o(O){L(z.$$.fragment,O),E=!1},d(O){O&&($(e),$(t),$(n),$(D),$(T)),X(z),R&&R.d(O),q=!1,Ue(j)}}}function K_(l){let e;return{c(){e=S("Setup DNS Round-Robin")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Si(l){let e,t=l[11].message+"",n;return{c(){e=_("div"),n=S(t),p(e,"class","result svelte-16vnl3x"),Ce(e,"success",l[11].success),Ce(e,"error",!l[11].success)},m(s,r){w(s,e,r),a(e,n)},p(s,r){r[0]&2048&&t!==(t=s[11].message+"")&&B(n,t),r[0]&2048&&Ce(e,"success",s[11].success),r[0]&2048&&Ce(e,"error",!s[11].success)},d(s){s&&$(e)}}}function Q_(l){let e,t,n,s,r,o,c,i,u,f,d,v,h,m,g,y,C,k,z,D,T,E,q,j;z=new qe({props:{variant:"primary",type:"submit",$$slots:{default:[K_]},$$scope:{ctx:l}}});let R=l[11]&&Si(l);return{c(){e=_("p"),e.innerHTML=`Simple load distribution via multiple A records. Cloudflare rotates between IPs at DNS level.
      <strong>FREE</strong>, but no health checks.`,t=b(),n=_("form"),s=_("div"),r=_("label"),r.textContent="Domain",o=b(),c=_("input"),i=b(),u=_("div"),f=_("label"),f.textContent="Server IPs (comma-separated)",d=b(),v=_("input"),h=b(),m=_("label"),g=_("input"),y=S(`
        Proxied (SSL + CDN)`),C=b(),k=_("div"),x(z.$$.fragment),D=b(),R&&R.c(),T=Ne(),p(e,"class","description svelte-16vnl3x"),p(r,"for","lb-domain"),p(r,"class","svelte-16vnl3x"),p(c,"id","lb-domain"),p(c,"type","text"),p(c,"placeholder","api.example.com"),c.required=!0,p(c,"class","svelte-16vnl3x"),p(s,"class","form-group svelte-16vnl3x"),p(f,"for","lb-ips"),p(f,"class","svelte-16vnl3x"),p(v,"id","lb-ips"),p(v,"type","text"),p(v,"placeholder","1.2.3.4, 5.6.7.8"),v.required=!0,p(v,"class","svelte-16vnl3x"),p(u,"class","form-group svelte-16vnl3x"),p(g,"type","checkbox"),p(g,"class","svelte-16vnl3x"),p(m,"class","checkbox-label svelte-16vnl3x"),p(k,"class","form-actions svelte-16vnl3x")},m(O,F){w(O,e,F),w(O,t,F),w(O,n,F),a(n,s),a(s,r),a(s,o),a(s,c),ne(c,l[8]),a(n,i),a(n,u),a(u,f),a(u,d),a(u,v),ne(v,l[9]),a(n,h),a(n,m),a(m,g),g.checked=l[10],a(m,y),a(n,C),a(n,k),Z(z,k,null),w(O,D,F),R&&R.m(O,F),w(O,T,F),E=!0,q||(j=[se(c,"input",l[26]),se(v,"input",l[27]),se(g,"change",l[28]),se(n,"submit",l[18])],q=!0)},p(O,F){F[0]&256&&c.value!==O[8]&&ne(c,O[8]),F[0]&512&&v.value!==O[9]&&ne(v,O[9]),F[0]&1024&&(g.checked=O[10]);const I={};F[1]&16&&(I.$$scope={dirty:F,ctx:O}),z.$set(I),O[11]?R?R.p(O,F):(R=Si(O),R.c(),R.m(T.parentNode,T)):R&&(R.d(1),R=null)},i(O){E||(P(z.$$.fragment,O),E=!0)},o(O){L(z.$$.fragment,O),E=!1},d(O){O&&($(e),$(t),$(n),$(D),$(T)),X(z),R&&R.d(O),q=!1,Ue(j)}}}function Z_(l){let e,t,n=de(l[12]),s=[];for(let o=0;o<n.length;o+=1)s[o]=zi(yi(l,n,o));const r=o=>L(s[o],1,1,()=>{s[o]=null});return{c(){e=_("div");for(let o=0;o<s.length;o+=1)s[o].c();p(e,"class","task-list svelte-16vnl3x")},m(o,c){w(o,e,c);for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(e,null);t=!0},p(o,c){if(c[0]&1052672){n=de(o[12]);let i;for(i=0;i<n.length;i+=1){const u=yi(o,n,i);s[i]?(s[i].p(u,c),P(s[i],1)):(s[i]=zi(u),s[i].c(),P(s[i],1),s[i].m(e,null))}for(we(),i=n.length;i<s.length;i+=1)r(i);ye()}},i(o){if(!t){for(let c=0;c<n.length;c+=1)P(s[c]);t=!0}},o(o){s=s.filter(E_);for(let c=0;c<s.length;c+=1)L(s[c]);t=!1},d(o){o&&$(e),Me(s,o)}}}function X_(l){let e;return{c(){e=_("div"),e.textContent="No scheduled tasks",p(e,"class","empty-state svelte-16vnl3x")},m(t,n){w(t,e,n)},p:ie,i:ie,o:ie,d(t){t&&$(e)}}}function x_(l){let e;return{c(){e=_("div"),e.textContent="Loading tasks...",p(e,"class","empty-state svelte-16vnl3x")},m(t,n){w(t,e,n)},p:ie,i:ie,o:ie,d(t){t&&$(e)}}}function ed(l){let e=l[32].type+"",t;return{c(){t=S(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&4096&&e!==(e=n[32].type+"")&&B(t,e)},d(n){n&&$(t)}}}function td(l){let e;return{c(){e=S("🗑️")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function zi(l){let e,t,n,s=l[32].name+"",r,o,c,i,u,f,d,v=l[32].interval+"",h,m,g,y,C,k;i=new Re({props:{variant:"info",$$slots:{default:[ed]},$$scope:{ctx:l}}});function z(){return l[29](l[32])}return y=new qe({props:{variant:"danger",size:"sm",$$slots:{default:[td]},$$scope:{ctx:l}}}),y.$on("click",z),{c(){e=_("div"),t=_("div"),n=_("div"),r=S(s),o=b(),c=_("div"),x(i.$$.fragment),u=b(),f=_("span"),d=S("Every "),h=S(v),m=S(" min"),g=b(),x(y.$$.fragment),C=b(),p(n,"class","task-name svelte-16vnl3x"),p(c,"class","task-meta svelte-16vnl3x"),p(t,"class","task-info"),p(e,"class","task-item svelte-16vnl3x")},m(D,T){w(D,e,T),a(e,t),a(t,n),a(n,r),a(t,o),a(t,c),Z(i,c,null),a(c,u),a(c,f),a(f,d),a(f,h),a(f,m),a(e,g),Z(y,e,null),a(e,C),k=!0},p(D,T){l=D,(!k||T[0]&4096)&&s!==(s=l[32].name+"")&&B(r,s);const E={};T[0]&4096|T[1]&16&&(E.$$scope={dirty:T,ctx:l}),i.$set(E),(!k||T[0]&4096)&&v!==(v=l[32].interval+"")&&B(h,v);const q={};T[1]&16&&(q.$$scope={dirty:T,ctx:l}),y.$set(q)},i(D){k||(P(i.$$.fragment,D),P(y.$$.fragment,D),k=!0)},o(D){L(i.$$.fragment,D),L(y.$$.fragment,D),k=!1},d(D){D&&$(e),X(i),X(y)}}}function ld(l){let e,t,n,s,r,o;const c=[x_,X_,Z_],i=[];function u(f,d){return f[13]?0:f[12].length===0?1:2}return n=u(l),s=i[n]=c[n](l),{c(){e=_("p"),e.textContent="Schedule recurring tasks like health checks, auto-restart, and backups.",t=b(),s.c(),r=Ne(),p(e,"class","description svelte-16vnl3x")},m(f,d){w(f,e,d),w(f,t,d),i[n].m(f,d),w(f,r,d),o=!0},p(f,d){let v=n;n=u(f),n===v?i[n].p(f,d):(we(),L(i[v],1,1,()=>{i[v]=null}),ye(),s=i[n],s?s.p(f,d):(s=i[n]=c[n](f),s.c()),P(s,1),s.m(r.parentNode,r))},i(f){o||(P(s),o=!0)},o(f){L(s),o=!1},d(f){f&&($(e),$(t),$(r)),i[n].d(f)}}}function nd(l){let e;return{c(){e=S("↻ Refresh")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function sd(l){let e,t;return e=new qe({props:{slot:"header",variant:"ghost",size:"sm",$$slots:{default:[nd]},$$scope:{ctx:l}}}),e.$on("click",l[19]),{c(){x(e.$$.fragment)},m(n,s){Z(e,n,s),t=!0},p(n,s){const r={};s[1]&16&&(r.$$scope={dirty:s,ctx:n}),e.$set(r)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){X(e,n)}}}function od(l){let e,t,n,s,r,o,c,i,u,f,d,v,h;return t=new Be({props:{title:"🎨 Appearance",$$slots:{default:[L_]},$$scope:{ctx:l}}}),s=new Be({props:{title:"⚙️ DigitalOcean Credentials",$$slots:{default:[B_]},$$scope:{ctx:l}}}),o=new Be({props:{title:"☁️ Cloudflare Credentials",$$slots:{default:[J_]},$$scope:{ctx:l}}}),i=new Be({props:{title:"🌐 Domain Setup",$$slots:{default:[Y_]},$$scope:{ctx:l}}}),f=new Be({props:{title:"🌐 DNS Round-Robin (Cloudflare)",$$slots:{default:[Q_]},$$scope:{ctx:l}}}),v=new Be({props:{title:"⏰ Task Scheduler",$$slots:{header:[sd],default:[ld]},$$scope:{ctx:l}}}),{c(){e=_("div"),x(t.$$.fragment),n=b(),x(s.$$.fragment),r=b(),x(o.$$.fragment),c=b(),x(i.$$.fragment),u=b(),x(f.$$.fragment),d=b(),x(v.$$.fragment),p(e,"class","settings-page svelte-16vnl3x")},m(m,g){w(m,e,g),Z(t,e,null),a(e,n),Z(s,e,null),a(e,r),Z(o,e,null),a(e,c),Z(i,e,null),a(e,u),Z(f,e,null),a(e,d),Z(v,e,null),h=!0},p(m,g){const y={};g[0]&16384|g[1]&16&&(y.$$scope={dirty:g,ctx:m}),t.$set(y);const C={};g[0]&3|g[1]&16&&(C.$$scope={dirty:g,ctx:m}),s.$set(C);const k={};g[0]&12|g[1]&16&&(k.$$scope={dirty:g,ctx:m}),o.$set(k);const z={};g[0]&240|g[1]&16&&(z.$$scope={dirty:g,ctx:m}),i.$set(z);const D={};g[0]&3840|g[1]&16&&(D.$$scope={dirty:g,ctx:m}),f.$set(D);const T={};g[0]&12288|g[1]&16&&(T.$$scope={dirty:g,ctx:m}),v.$set(T)},i(m){h||(P(t.$$.fragment,m),P(s.$$.fragment,m),P(o.$$.fragment,m),P(i.$$.fragment,m),P(f.$$.fragment,m),P(v.$$.fragment,m),h=!0)},o(m){L(t.$$.fragment,m),L(s.$$.fragment,m),L(o.$$.fragment,m),L(i.$$.fragment,m),L(f.$$.fragment,m),L(v.$$.fragment,m),h=!1},d(m){m&&$(e),X(t),X(s),X(o),X(i),X(f),X(v)}}}function rd(l,e,t){let n;Je(l,Sn,N=>t(14,n=N));let s="",r=null,o="",c=null,i="",u="",f=!0,d=null,v="",h="",m=!0,g=null,y=[],C=!1;ll(()=>{k(),z(),j()});async function k(){const N=tl();if(N){t(0,s=N.substring(0,10)+"...");try{await Fe("GET","/infra/snapshots"),t(1,r={valid:!0})}catch{t(1,r={valid:!1})}}else t(1,r={valid:!1,missing:!0})}async function z(){const N=Dn();N?(t(2,o=N.substring(0,10)+"..."),t(3,c={valid:!0})):t(3,c={valid:!1,missing:!0})}async function D(N){N.preventDefault();const H=N.target.querySelector("input"),ee=H.value;if(!ee){ge.error("Token is required");return}Wa(ee),H.value="",ge.success("DigitalOcean token saved"),await k(),At.refresh(),An.refresh(),zl.refresh(),il.refresh()}async function T(N){N.preventDefault();const H=N.target.querySelector("input"),ee=H.value;if(!ee){ge.error("Token is required");return}Ja(ee),H.value="",ge.success("Cloudflare token saved"),await z()}async function E(N){N.preventDefault();try{const H=await Fe("POST","/infra/cloudflare/domain",{domain:i,ip:u,proxied:f});t(7,d={success:!0,message:"Domain configured successfully"}),ge.success("Domain setup complete")}catch(H){t(7,d={success:!1,message:H.message}),ge.error(H.message)}}async function q(N){N.preventDefault();try{const H=h.split(",").map(Q=>Q.trim()).filter(Boolean),ee=await Fe("POST","/infra/cloudflare/lb",{domain:v,server_ips:H,proxied:m});t(11,g={success:!0,message:`Created load balancer with ${H.length} servers`}),ge.success("Load balancer configured")}catch(H){t(11,g={success:!1,message:H.message}),ge.error(H.message)}}async function j(){t(13,C=!0);try{const N=await Fe("GET","/infra/scheduler/tasks");t(12,y=N.tasks||N||[])}catch{t(12,y=[])}finally{t(13,C=!1)}}async function R(N){if(confirm("Delete this scheduled task?"))try{await Fe("DELETE",`/infra/scheduler/tasks/${N}`),ge.success("Task deleted"),await j()}catch(H){ge.error(H.message)}}function O(){n=mt(this),Sn.set(n)}const F=()=>Sn.set(n);function I(){i=this.value,t(4,i)}function V(){u=this.value,t(5,u)}function J(){f=this.checked,t(6,f)}function U(){v=this.value,t(8,v)}function A(){h=this.value,t(9,h)}function M(){m=this.checked,t(10,m)}return[s,r,o,c,i,u,f,d,v,h,m,g,y,C,n,D,T,E,q,j,R,O,F,I,V,J,U,A,M,N=>R(N.id)]}class id extends tt{constructor(e){super(),et(this,e,rd,od,Ye,{},null,[-1,-1])}}function qi(l,e,t){const n=l.slice();n[21]=e[t];const s=n[1].filter(function(...i){return l[17](n[21],...i)});n[22]=s;const r=n[21].domain;n[23]=r;const o=n[22].length>1;return n[24]=o,n}function Di(l,e,t){const n=l.slice();return n[27]=e[t],n}function Ti(l,e,t){const n=l.slice();return n[21]=e[t],n}function Pi(l,e,t){const n=l.slice();return n[32]=e[t],n}function ad(l){let e,t,n,s,r,o,c,i,u,f,d,v,h,m,g,y,C,k,z=l[1].length+"",D,T,E,q,j,R,O,F,I=l[7].length+"",V,J,U,A;const M=[_d,pd],G=[];function N(H,ee){return H[11]?1:0}return v=N(l),h=G[v]=M[v](l),{c(){e=_("div"),t=_("div"),n=_("div"),n.innerHTML='<span class="summary-icon svelte-odhywp">🔀</span> <span>Nginx Sidecar</span>',s=b(),r=_("div"),o=S(l[3]),c=S("/"),i=S(l[2]),u=b(),f=_("div"),f.textContent="servers with nginx",d=b(),h.c(),m=b(),g=_("div"),y=_("div"),y.innerHTML='<span class="summary-icon svelte-odhywp">🤖</span> <span>Node Agents</span>',C=b(),k=_("div"),D=S(z),T=b(),E=_("div"),E.textContent="servers monitored",q=b(),j=_("div"),R=_("div"),R.innerHTML='<span class="summary-icon svelte-odhywp">📦</span> <span>Services</span>',O=b(),F=_("div"),V=S(I),J=b(),U=_("div"),U.textContent="deployed services",p(n,"class","summary-header svelte-odhywp"),p(r,"class","summary-value svelte-odhywp"),p(f,"class","summary-label svelte-odhywp"),p(t,"class","summary-card svelte-odhywp"),Ce(t,"ok",l[11]),Ce(t,"warn",!l[11]),p(y,"class","summary-header svelte-odhywp"),p(k,"class","summary-value svelte-odhywp"),p(E,"class","summary-label svelte-odhywp"),p(g,"class","summary-card info svelte-odhywp"),p(R,"class","summary-header svelte-odhywp"),p(F,"class","summary-value svelte-odhywp"),p(U,"class","summary-label svelte-odhywp"),p(j,"class","summary-card info svelte-odhywp"),p(e,"class","summary-grid svelte-odhywp")},m(H,ee){w(H,e,ee),a(e,t),a(t,n),a(t,s),a(t,r),a(r,o),a(r,c),a(r,i),a(t,u),a(t,f),a(t,d),G[v].m(t,null),a(e,m),a(e,g),a(g,y),a(g,C),a(g,k),a(k,D),a(g,T),a(g,E),a(e,q),a(e,j),a(j,R),a(j,O),a(j,F),a(F,V),a(j,J),a(j,U),A=!0},p(H,ee){(!A||ee[0]&8)&&B(o,H[3]),(!A||ee[0]&4)&&B(i,H[2]);let Q=v;v=N(H),v===Q?G[v].p(H,ee):(we(),L(G[Q],1,1,()=>{G[Q]=null}),ye(),h=G[v],h?h.p(H,ee):(h=G[v]=M[v](H),h.c()),P(h,1),h.m(t,null)),(!A||ee[0]&2048)&&Ce(t,"ok",H[11]),(!A||ee[0]&2048)&&Ce(t,"warn",!H[11]),(!A||ee[0]&2)&&z!==(z=H[1].length+"")&&B(D,z),(!A||ee[0]&128)&&I!==(I=H[7].length+"")&&B(V,I)},i(H){A||(P(h),A=!0)},o(H){L(h),A=!1},d(H){H&&$(e),G[v].d()}}}function cd(l){let e;return{c(){e=_("div"),e.innerHTML='<p>No services deployed yet</p> <p class="hint svelte-odhywp">Deploy your first service to see the architecture</p>',p(e,"class","empty-state svelte-odhywp")},m(t,n){w(t,e,n)},p:ie,i:ie,o:ie,d(t){t&&$(e)}}}function fd(l){let e,t,n,s,r,o;return{c(){e=_("div"),t=_("p"),n=S("Failed to load: "),s=S(l[9]),r=b(),o=_("p"),o.textContent="Check your connection and try refreshing",p(o,"class","hint svelte-odhywp"),p(e,"class","empty-state svelte-odhywp")},m(c,i){w(c,e,i),a(e,t),a(t,n),a(t,s),a(e,r),a(e,o)},p(c,i){i[0]&512&&B(s,c[9])},i:ie,o:ie,d(c){c&&$(e)}}}function ud(l){let e;return{c(){e=_("div"),e.textContent="Loading architecture...",p(e,"class","empty-state svelte-odhywp")},m(t,n){w(t,e,n)},p:ie,i:ie,o:ie,d(t){t&&$(e)}}}function pd(l){let e;return{c(){e=_("div"),e.textContent="✅ All servers OK",p(e,"class","summary-ok svelte-odhywp")},m(t,n){w(t,e,n)},p:ie,i:ie,o:ie,d(t){t&&$(e)}}}function _d(l){let e,t;return e=new qe({props:{variant:"warning",size:"sm",$$slots:{default:[dd]},$$scope:{ctx:l}}}),e.$on("click",l[13]),{c(){x(e.$$.fragment)},m(n,s){Z(e,n,s),t=!0},p(n,s){const r={};s[0]&12|s[1]&16&&(r.$$scope={dirty:s,ctx:n}),e.$set(r)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){X(e,n)}}}function dd(l){let e,t=l[2]-l[3]+"",n,s;return{c(){e=S("🔧 Fix "),n=S(t),s=S(" server(s)")},m(r,o){w(r,e,o),w(r,n,o),w(r,s,o)},p(r,o){o[0]&12&&t!==(t=r[2]-r[3]+"")&&B(n,t)},d(r){r&&($(e),$(n),$(s))}}}function vd(l){let e,t,n,s;const r=[ud,fd,cd,ad],o=[];function c(i,u){return i[6]&&!i[10]?0:i[9]?1:i[7].length===0&&i[1].length===0?2:3}return e=c(l),t=o[e]=r[e](l),{c(){t.c(),n=Ne()},m(i,u){o[e].m(i,u),w(i,n,u),s=!0},p(i,u){let f=e;e=c(i),e===f?o[e].p(i,u):(we(),L(o[f],1,1,()=>{o[f]=null}),ye(),t=o[e],t?t.p(i,u):(t=o[e]=r[e](i),t.c()),P(t,1),t.m(n.parentNode,n))},i(i){s||(P(t),s=!0)},o(i){L(t),s=!1},d(i){i&&$(n),o[e].d(i)}}}function Ei(l){let e,t=l[32]+"",n,s;return{c(){e=_("option"),n=S(t),e.__value=s=l[32],ne(e,e.__value)},m(r,o){w(r,e,o),a(e,n)},p(r,o){o[0]&4096&&t!==(t=r[32]+"")&&B(n,t),o[0]&4096&&s!==(s=r[32])&&(e.__value=s,ne(e,e.__value))},d(r){r&&$(e)}}}function Li(l){let e,t,n=Oi(l[8])+"",s;return{c(){e=_("span"),t=S("Updated "),s=S(n),p(e,"class","last-updated svelte-odhywp")},m(r,o){w(r,e,o),a(e,t),a(e,s)},p(r,o){o[0]&256&&n!==(n=Oi(r[8])+"")&&B(s,n)},d(r){r&&$(e)}}}function md(l){let e;return{c(){e=S("↻ Refresh")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function hd(l){let e,t,n,s,r,o,c,i,u,f,d,v,h,m,g,y=de(l[12]||[]),C=[];for(let z=0;z<y.length;z+=1)C[z]=Ei(Pi(l,y,z));let k=l[8]&&Li(l);return v=new qe({props:{variant:"ghost",size:"sm",$$slots:{default:[md]},$$scope:{ctx:l}}}),v.$on("click",l[0]),{c(){e=_("div"),t=_("select"),n=_("option"),n.textContent="All Projects";for(let z=0;z<C.length;z+=1)C[z].c();s=b(),r=_("select"),o=_("option"),o.textContent="All Envs",c=_("option"),c.textContent="prod",i=_("option"),i.textContent="staging",u=_("option"),u.textContent="dev",f=b(),k&&k.c(),d=b(),x(v.$$.fragment),n.__value="",ne(n,n.__value),p(t,"class","svelte-odhywp"),l[4]===void 0&&Ve(()=>l[15].call(t)),o.__value="",ne(o,o.__value),c.__value="prod",ne(c,c.__value),i.__value="staging",ne(i,i.__value),u.__value="dev",ne(u,u.__value),p(r,"class","svelte-odhywp"),l[5]===void 0&&Ve(()=>l[16].call(r)),p(e,"slot","header"),p(e,"class","filters svelte-odhywp")},m(z,D){w(z,e,D),a(e,t),a(t,n);for(let T=0;T<C.length;T+=1)C[T]&&C[T].m(t,null);Le(t,l[4],!0),a(e,s),a(e,r),a(r,o),a(r,c),a(r,i),a(r,u),Le(r,l[5],!0),a(e,f),k&&k.m(e,null),a(e,d),Z(v,e,null),h=!0,m||(g=[se(t,"change",l[15]),se(t,"change",l[14]),se(r,"change",l[16]),se(r,"change",l[14])],m=!0)},p(z,D){if(D[0]&4096){y=de(z[12]||[]);let E;for(E=0;E<y.length;E+=1){const q=Pi(z,y,E);C[E]?C[E].p(q,D):(C[E]=Ei(q),C[E].c(),C[E].m(t,null))}for(;E<C.length;E+=1)C[E].d(1);C.length=y.length}D[0]&4112&&Le(t,z[4]),D[0]&32&&Le(r,z[5]),z[8]?k?k.p(z,D):(k=Li(z),k.c(),k.m(e,d)):k&&(k.d(1),k=null);const T={};D[1]&16&&(T.$$scope={dirty:D,ctx:z}),v.$set(T)},i(z){h||(P(v.$$.fragment,z),h=!0)},o(z){L(v.$$.fragment,z),h=!1},d(z){z&&$(e),Me(C,z),k&&k.d(),X(v),m=!1,Ue(g)}}}function gd(l){let e,t,n=de(l[7]),s=[];for(let o=0;o<n.length;o+=1)s[o]=Mi(Ti(l,n,o));const r=o=>L(s[o],1,1,()=>{s[o]=null});return{c(){e=_("div");for(let o=0;o<s.length;o+=1)s[o].c();p(e,"class","list svelte-odhywp")},m(o,c){w(o,e,c);for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(e,null);t=!0},p(o,c){if(c[0]&128){n=de(o[7]);let i;for(i=0;i<n.length;i+=1){const u=Ti(o,n,i);s[i]?(s[i].p(u,c),P(s[i],1)):(s[i]=Mi(u),s[i].c(),P(s[i],1),s[i].m(e,null))}for(we(),i=n.length;i<s.length;i+=1)r(i);ye()}},i(o){if(!t){for(let c=0;c<n.length;c+=1)P(s[c]);t=!0}},o(o){s=s.filter(Boolean);for(let c=0;c<s.length;c+=1)L(s[c]);t=!1},d(o){o&&$(e),Me(s,o)}}}function bd(l){let e;return{c(){e=_("div"),e.textContent="No services found",p(e,"class","empty-panel svelte-odhywp")},m(t,n){w(t,e,n)},p:ie,i:ie,o:ie,d(t){t&&$(e)}}}function kd(l){let e=l[21].type+"",t;return{c(){t=S(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&128&&e!==(e=n[21].type+"")&&B(t,e)},d(n){n&&$(t)}}}function Mi(l){var U,A;let e,t,n=bn(l[21])+"",s,r,o,c,i=l[21].service+"",u,f,d,v=l[21].project+"",h,m,g=l[21].env+"",y,C,k,z,D=(((U=l[21].servers)==null?void 0:U.length)||0)+"",T,E,q,j,R=(((A=l[21].ports)==null?void 0:A.join(", "))||"-")+"",O,F,I,V,J;return I=new Re({props:{variant:l[21].type==="stateful"?"warning":"info",$$slots:{default:[kd]},$$scope:{ctx:l}}}),{c(){e=_("div"),t=_("div"),s=S(n),r=b(),o=_("div"),c=_("div"),u=S(i),f=b(),d=_("div"),h=S(v),m=S(" / "),y=S(g),C=b(),k=_("div"),z=_("div"),T=S(D),E=S(" server(s)"),q=b(),j=_("div"),O=S(R),F=b(),x(I.$$.fragment),V=b(),p(t,"class","item-icon svelte-odhywp"),p(c,"class","item-name svelte-odhywp"),p(d,"class","item-meta svelte-odhywp"),p(o,"class","item-info svelte-odhywp"),p(j,"class","ports svelte-odhywp"),p(k,"class","item-stats svelte-odhywp"),p(e,"class","list-item svelte-odhywp")},m(M,G){w(M,e,G),a(e,t),a(t,s),a(e,r),a(e,o),a(o,c),a(c,u),a(o,f),a(o,d),a(d,h),a(d,m),a(d,y),a(e,C),a(e,k),a(k,z),a(z,T),a(z,E),a(k,q),a(k,j),a(j,O),a(e,F),Z(I,e,null),a(e,V),J=!0},p(M,G){var H,ee;(!J||G[0]&128)&&n!==(n=bn(M[21])+"")&&B(s,n),(!J||G[0]&128)&&i!==(i=M[21].service+"")&&B(u,i),(!J||G[0]&128)&&v!==(v=M[21].project+"")&&B(h,v),(!J||G[0]&128)&&g!==(g=M[21].env+"")&&B(y,g),(!J||G[0]&128)&&D!==(D=(((H=M[21].servers)==null?void 0:H.length)||0)+"")&&B(T,D),(!J||G[0]&128)&&R!==(R=(((ee=M[21].ports)==null?void 0:ee.join(", "))||"-")+"")&&B(O,R);const N={};G[0]&128&&(N.variant=M[21].type==="stateful"?"warning":"info"),G[0]&128|G[1]&16&&(N.$$scope={dirty:G,ctx:M}),I.$set(N)},i(M){J||(P(I.$$.fragment,M),J=!0)},o(M){L(I.$$.fragment,M),J=!1},d(M){M&&$(e),X(I)}}}function $d(l){let e,t,n,s;const r=[bd,gd],o=[];function c(i,u){return i[7].length===0?0:1}return e=c(l),t=o[e]=r[e](l),{c(){t.c(),n=Ne()},m(i,u){o[e].m(i,u),w(i,n,u),s=!0},p(i,u){let f=e;e=c(i),e===f?o[e].p(i,u):(we(),L(o[f],1,1,()=>{o[f]=null}),ye(),t=o[e],t?t.p(i,u):(t=o[e]=r[e](i),t.c()),P(t,1),t.m(n.parentNode,n))},i(i){s||(P(t),s=!0)},o(i){L(t),s=!1},d(i){i&&$(n),o[e].d(i)}}}function wd(l){let e,t,n=de(l[1]),s=[];for(let o=0;o<n.length;o+=1)s[o]=ji(Di(l,n,o));const r=o=>L(s[o],1,1,()=>{s[o]=null});return{c(){e=_("div");for(let o=0;o<s.length;o+=1)s[o].c();p(e,"class","list svelte-odhywp")},m(o,c){w(o,e,c);for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(e,null);t=!0},p(o,c){if(c[0]&2){n=de(o[1]);let i;for(i=0;i<n.length;i+=1){const u=Di(o,n,i);s[i]?(s[i].p(u,c),P(s[i],1)):(s[i]=ji(u),s[i].c(),P(s[i],1),s[i].m(e,null))}for(we(),i=n.length;i<s.length;i+=1)r(i);ye()}},i(o){if(!t){for(let c=0;c<n.length;c+=1)P(s[c]);t=!0}},o(o){s=s.filter(Boolean);for(let c=0;c<s.length;c+=1)L(s[c]);t=!1},d(o){o&&$(e),Me(s,o)}}}function yd(l){let e;return{c(){e=_("div"),e.textContent="No servers found",p(e,"class","empty-panel svelte-odhywp")},m(t,n){w(t,e,n)},p:ie,i:ie,o:ie,d(t){t&&$(e)}}}function Cd(l){let e=kn(l[27])?"🔀 nginx":"⚠️ no nginx",t;return{c(){t=S(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&2&&e!==(e=kn(n[27])?"🔀 nginx":"⚠️ no nginx")&&B(t,e)},d(n){n&&$(t)}}}function Sd(l){let e,t=(l[27].agent_version||"?")+"",n;return{c(){e=S("🤖 v"),n=S(t)},m(s,r){w(s,e,r),w(s,n,r)},p(s,r){r[0]&2&&t!==(t=(s[27].agent_version||"?")+"")&&B(n,t)},d(s){s&&($(e),$(n))}}}function ji(l){let e,t,n=l[27].status==="online"?"🟢":"🔴",s,r,o,c,i=l[27].ip+"",u,f,d,v=(l[27].containers||0)+"",h,m,g,y,C,k,z,D,T;return C=new Re({props:{variant:kn(l[27])?"success":"warning",$$slots:{default:[Cd]},$$scope:{ctx:l}}}),z=new Re({props:{variant:"info",$$slots:{default:[Sd]},$$scope:{ctx:l}}}),{c(){e=_("div"),t=_("div"),s=S(n),r=b(),o=_("div"),c=_("code"),u=S(i),f=b(),d=_("div"),h=S(v),m=S(" container(s)"),g=b(),y=_("div"),x(C.$$.fragment),k=b(),x(z.$$.fragment),D=b(),p(t,"class","item-icon svelte-odhywp"),p(c,"class","server-ip svelte-odhywp"),p(d,"class","item-meta svelte-odhywp"),p(o,"class","item-info svelte-odhywp"),p(y,"class","item-badges svelte-odhywp"),p(e,"class","list-item svelte-odhywp")},m(E,q){w(E,e,q),a(e,t),a(t,s),a(e,r),a(e,o),a(o,c),a(c,u),a(o,f),a(o,d),a(d,h),a(d,m),a(e,g),a(e,y),Z(C,y,null),a(y,k),Z(z,y,null),a(e,D),T=!0},p(E,q){(!T||q[0]&2)&&n!==(n=E[27].status==="online"?"🟢":"🔴")&&B(s,n),(!T||q[0]&2)&&i!==(i=E[27].ip+"")&&B(u,i),(!T||q[0]&2)&&v!==(v=(E[27].containers||0)+"")&&B(h,v);const j={};q[0]&2&&(j.variant=kn(E[27])?"success":"warning"),q[0]&2|q[1]&16&&(j.$$scope={dirty:q,ctx:E}),C.$set(j);const R={};q[0]&2|q[1]&16&&(R.$$scope={dirty:q,ctx:E}),z.$set(R)},i(E){T||(P(C.$$.fragment,E),P(z.$$.fragment,E),T=!0)},o(E){L(C.$$.fragment,E),L(z.$$.fragment,E),T=!1},d(E){E&&$(e),X(C),X(z)}}}function zd(l){let e,t,n,s;const r=[yd,wd],o=[];function c(i,u){return i[1].length===0?0:1}return e=c(l),t=o[e]=r[e](l),{c(){t.c(),n=Ne()},m(i,u){o[e].m(i,u),w(i,n,u),s=!0},p(i,u){let f=e;e=c(i),e===f?o[e].p(i,u):(we(),L(o[f],1,1,()=>{o[f]=null}),ye(),t=o[e],t?t.p(i,u):(t=o[e]=r[e](i),t.c()),P(t,1),t.m(n.parentNode,n))},i(i){s||(P(t),s=!0)},o(i){L(t),s=!1},d(i){i&&$(n),o[e].d(i)}}}function qd(l){let e,t,n=de(l[7]),s=[];for(let o=0;o<n.length;o+=1)s[o]=Ai(qi(l,n,o));const r=o=>L(s[o],1,1,()=>{s[o]=null});return{c(){e=_("div");for(let o=0;o<s.length;o+=1)s[o].c();p(e,"class","traffic-flow svelte-odhywp")},m(o,c){w(o,e,c);for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(e,null);t=!0},p(o,c){if(c[0]&130){n=de(o[7]);let i;for(i=0;i<n.length;i+=1){const u=qi(o,n,i);s[i]?(s[i].p(u,c),P(s[i],1)):(s[i]=Ai(u),s[i].c(),P(s[i],1),s[i].m(e,null))}for(we(),i=n.length;i<s.length;i+=1)r(i);ye()}},i(o){if(!t){for(let c=0;c<n.length;c+=1)P(s[c]);t=!0}},o(o){s=s.filter(Boolean);for(let c=0;c<s.length;c+=1)L(s[c]);t=!1},d(o){o&&$(e),Me(s,o)}}}function Dd(l){let e;return{c(){e=_("div"),e.textContent="Deploy services to see traffic flow",p(e,"class","empty-panel svelte-odhywp")},m(t,n){w(t,e,n)},p:ie,i:ie,o:ie,d(t){t&&$(e)}}}function Td(l){let e=l[21].env+"",t;return{c(){t=S(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&128&&e!==(e=n[21].env+"")&&B(t,e)},d(n){n&&$(t)}}}function Ni(l){let e,t,n,s,r,o,c=l[21].domain+"",i,u,f;return{c(){e=_("div"),t=_("span"),t.textContent="☁️",n=b(),s=_("span"),s.textContent="Cloudflare",r=b(),o=_("span"),i=S(c),u=b(),f=_("div"),f.textContent="→",p(t,"class","svelte-odhywp"),p(s,"class","node-label svelte-odhywp"),p(o,"class","node-detail svelte-odhywp"),p(e,"class","flow-node cloudflare svelte-odhywp"),p(f,"class","flow-arrow svelte-odhywp")},m(d,v){w(d,e,v),a(e,t),a(e,n),a(e,s),a(e,r),a(e,o),a(o,i),w(d,u,v),w(d,f,v)},p(d,v){v[0]&128&&c!==(c=d[21].domain+"")&&B(i,c)},d(d){d&&($(e),$(u),$(f))}}}function Pd(l){let e;return{c(){e=S("Server")},m(t,n){w(t,e,n)},p:ie,d(t){t&&$(e)}}}function Ed(l){let e,t=l[22].length+"",n,s;return{c(){e=S("⚖️ Load Balanced ("),n=S(t),s=S(")")},m(r,o){w(r,e,o),w(r,n,o),w(r,s,o)},p(r,o){o[0]&130&&t!==(t=r[22].length+"")&&B(n,t)},d(r){r&&($(e),$(n),$(s))}}}function Ri(l){let e,t,n,s=l[21].domain+"",r,o;return{c(){e=_("span"),t=S("Domain: "),n=_("a"),r=S(s),p(n,"href",o="https://"+l[21].domain),p(n,"target","_blank"),p(n,"class","svelte-odhywp")},m(c,i){w(c,e,i),a(e,t),a(e,n),a(n,r)},p(c,i){i[0]&128&&s!==(s=c[21].domain+"")&&B(r,s),i[0]&128&&o!==(o="https://"+c[21].domain)&&p(n,"href",o)},d(c){c&&$(e)}}}function Ai(l){let e,t,n,s=bn(l[21])+"",r,o,c,i=l[21].service+"",u,f,d,v,h,m,g,y,C,k,z,D,T,E,q,j,R,O,F,I,V,J,U,A,M=(l[21].host_port||"8000")+"",G,N,H,ee,Q,te,W,le=(l[21].container_name||l[21].id)+"",K,oe,$e;d=new Re({props:{variant:l[21].env==="prod"?"danger":"info",$$slots:{default:[Td]},$$scope:{ctx:l}}});let _e=l[23]&&Ni(l);function re(pe,ce){return pe[24]?Ed:Pd}let he=re(l),be=he(l),ue=l[23]&&Ri(l);return{c(){e=_("div"),t=_("div"),n=_("span"),r=S(s),o=b(),c=_("span"),u=S(i),f=b(),x(d.$$.fragment),v=b(),h=_("div"),_e&&_e.c(),m=b(),g=_("div"),y=_("span"),y.textContent="🖥️",C=b(),k=_("span"),be.c(),z=b(),D=_("div"),D.textContent="→",T=b(),E=_("div"),E.innerHTML='<span class="svelte-odhywp">🔀</span> <span class="node-label svelte-odhywp">nginx</span> <span class="node-detail svelte-odhywp">:443</span>',q=b(),j=_("div"),j.textContent="→",R=b(),O=_("div"),F=_("span"),F.textContent="🐳",I=b(),V=_("span"),V.textContent="Container",J=b(),U=_("span"),A=S(":"),G=S(M),N=b(),H=_("div"),ue&&ue.c(),ee=b(),Q=_("span"),te=S("Container: "),W=_("code"),K=S(le),oe=b(),p(n,"class","flow-icon svelte-odhywp"),p(c,"class","flow-name svelte-odhywp"),p(t,"class","flow-header svelte-odhywp"),p(y,"class","svelte-odhywp"),p(k,"class","node-label svelte-odhywp"),p(g,"class","flow-node server svelte-odhywp"),p(D,"class","flow-arrow svelte-odhywp"),p(E,"class","flow-node nginx svelte-odhywp"),p(j,"class","flow-arrow svelte-odhywp"),p(F,"class","svelte-odhywp"),p(V,"class","node-label svelte-odhywp"),p(U,"class","node-detail svelte-odhywp"),p(O,"class","flow-node container svelte-odhywp"),p(h,"class","flow-path svelte-odhywp"),p(W,"class","svelte-odhywp"),p(H,"class","flow-details svelte-odhywp"),p(e,"class","flow-card svelte-odhywp")},m(pe,ce){w(pe,e,ce),a(e,t),a(t,n),a(n,r),a(t,o),a(t,c),a(c,u),a(t,f),Z(d,t,null),a(e,v),a(e,h),_e&&_e.m(h,null),a(h,m),a(h,g),a(g,y),a(g,C),a(g,k),be.m(k,null),a(h,z),a(h,D),a(h,T),a(h,E),a(h,q),a(h,j),a(h,R),a(h,O),a(O,F),a(O,I),a(O,V),a(O,J),a(O,U),a(U,A),a(U,G),a(e,N),a(e,H),ue&&ue.m(H,null),a(H,ee),a(H,Q),a(Q,te),a(Q,W),a(W,K),a(e,oe),$e=!0},p(pe,ce){(!$e||ce[0]&128)&&s!==(s=bn(pe[21])+"")&&B(r,s),(!$e||ce[0]&128)&&i!==(i=pe[21].service+"")&&B(u,i);const De={};ce[0]&128&&(De.variant=pe[21].env==="prod"?"danger":"info"),ce[0]&128|ce[1]&16&&(De.$$scope={dirty:ce,ctx:pe}),d.$set(De),pe[23]?_e?_e.p(pe,ce):(_e=Ni(pe),_e.c(),_e.m(h,m)):_e&&(_e.d(1),_e=null),he===(he=re(pe))&&be?be.p(pe,ce):(be.d(1),be=he(pe),be&&(be.c(),be.m(k,null))),(!$e||ce[0]&128)&&M!==(M=(pe[21].host_port||"8000")+"")&&B(G,M),pe[23]?ue?ue.p(pe,ce):(ue=Ri(pe),ue.c(),ue.m(H,ee)):ue&&(ue.d(1),ue=null),(!$e||ce[0]&128)&&le!==(le=(pe[21].container_name||pe[21].id)+"")&&B(K,le)},i(pe){$e||(P(d.$$.fragment,pe),$e=!0)},o(pe){L(d.$$.fragment,pe),$e=!1},d(pe){pe&&$(e),X(d),_e&&_e.d(),be.d(),ue&&ue.d()}}}function Ld(l){let e,t,n,s;const r=[Dd,qd],o=[];function c(i,u){return i[7].length===0?0:1}return e=c(l),t=o[e]=r[e](l),{c(){t.c(),n=Ne()},m(i,u){o[e].m(i,u),w(i,n,u),s=!0},p(i,u){let f=e;e=c(i),e===f?o[e].p(i,u):(we(),L(o[f],1,1,()=>{o[f]=null}),ye(),t=o[e],t?t.p(i,u):(t=o[e]=r[e](i),t.c()),P(t,1),t.m(n.parentNode,n))},i(i){s||(P(t),s=!0)},o(i){L(t),s=!1},d(i){i&&$(n),o[e].d(i)}}}function Md(l){let e;return{c(){e=_("span"),e.textContent="Request path from client to container",p(e,"slot","header"),p(e,"class","subtitle svelte-odhywp")},m(t,n){w(t,e,n)},p:ie,d(t){t&&$(e)}}}function jd(l){let e,t,n,s,r,o,c,i,u,f;return t=new Be({props:{title:"🏗️ Architecture View",$$slots:{header:[hd],default:[vd]},$$scope:{ctx:l}}}),r=new Be({props:{title:"📦 Services",padding:!1,$$slots:{default:[$d]},$$scope:{ctx:l}}}),c=new Be({props:{title:"🖥️ Servers",padding:!1,$$slots:{default:[zd]},$$scope:{ctx:l}}}),u=new Be({props:{title:"🚦 Traffic Flow",$$slots:{header:[Md],default:[Ld]},$$scope:{ctx:l}}}),{c(){e=_("div"),x(t.$$.fragment),n=b(),s=_("div"),x(r.$$.fragment),o=b(),x(c.$$.fragment),i=b(),x(u.$$.fragment),p(s,"class","panels-grid svelte-odhywp"),p(e,"class","architecture-page svelte-odhywp")},m(d,v){w(d,e,v),Z(t,e,null),a(e,n),a(e,s),Z(r,s,null),a(s,o),Z(c,s,null),a(e,i),Z(u,e,null),f=!0},p(d,v){const h={};v[0]&8190|v[1]&16&&(h.$$scope={dirty:v,ctx:d}),t.$set(h);const m={};v[0]&128|v[1]&16&&(m.$$scope={dirty:v,ctx:d}),r.$set(m);const g={};v[0]&2|v[1]&16&&(g.$$scope={dirty:v,ctx:d}),c.$set(g);const y={};v[0]&130|v[1]&16&&(y.$$scope={dirty:v,ctx:d}),u.$set(y)},i(d){f||(P(t.$$.fragment,d),P(r.$$.fragment,d),P(c.$$.fragment,d),P(u.$$.fragment,d),f=!0)},o(d){L(t.$$.fragment,d),L(r.$$.fragment,d),L(c.$$.fragment,d),L(u.$$.fragment,d),f=!1},d(d){d&&$(e),X(t),X(r),X(c),X(u)}}}function Oi(l){return l?l.toLocaleTimeString():""}function bn(l){switch(l.type){case"stateful":return"🗄️";case"frontend":return"🌐";case"api":return"⚡";case"worker":return"⚙️";default:return"📦"}}function kn(l){return l.nginx_status==="running"}function Nd(l,e,t){let n,s,r,o;Je(l,sa,j=>t(12,o=j));let c="",i="",u=!1,f=[],d=[],v=[],h=null,m=null,g=!1,y=null;ll(()=>{g||(C(),y=setInterval(C,6e4))}),Mn(()=>{y&&clearInterval(y)});async function C(){g||t(6,u=!0),t(9,m=null);try{const j=await Fe("POST","/infra/architecture",{project:c||null,environment:i||null});t(7,f=j.nodes||[]),t(1,d=j.servers||[]),v=j.infrastructure||[],t(8,h=new Date),t(10,g=!0)}catch(j){t(9,m=j.message),g||ge.error("Failed to load architecture: "+j.message)}finally{t(6,u=!1)}}async function k(){const j=d.filter(R=>R.nginx_status!=="running").map(R=>R.ip);if(j.length===0){ge.info("All servers already have nginx running");return}ge.info(`Fixing ${j.length} server(s)...`);try{await Fe("POST","/infra/nginx/ensure",{server_ips:j}),ge.success("Nginx sidecar installed"),architectureStore.refresh()}catch(R){ge.error(R.message)}}function z(){C()}function D(){C()}function T(){c=mt(this),t(4,c)}function E(){i=mt(this),t(5,i)}const q=(j,R)=>{var O;return(O=j.servers)==null?void 0:O.includes(R.ip)};return l.$$.update=()=>{l.$$.dirty[0]&2&&t(3,n=d.filter(j=>j.nginx_status==="running").length),l.$$.dirty[0]&2&&t(2,s=d.length),l.$$.dirty[0]&12&&t(11,r=n===s)},[D,d,s,n,c,i,u,f,h,m,g,r,o,k,z,T,E,q]}class Rd extends tt{constructor(e){super(),et(this,e,Nd,jd,Ye,{refresh:0},null,[-1,-1])}get refresh(){return this.$$.ctx[0]}}function Ad(l){let e,t,n,s,r,o,c,i,u,f,d,v,h,m,g,y,C,k,z,D,T,E,q,j,R,O;n=new wc({}),r=new Sc({props:{tabs:l[11],active:l[0],scrollable:!0}}),r.$on("change",l[13]);let F=l[9]&&Fi(l),I={};f=new uf({props:I}),l[16](f),h=new nu({});let V={};y=new lp({props:V}),l[17](y);let J={};z=new Rd({props:J}),l[18](z);let U={};E=new Up({props:U}),l[19](E);const A=[Hd,Ud,Id,Bd],M=[];function G(N,H){return N[0]==="logs"?0:N[0]==="snapshots"?1:N[0]==="services"?2:N[0]==="settings"?3:-1}return~(j=G(l))&&(R=M[j]=A[j](l)),{c(){e=_("div"),t=_("div"),x(n.$$.fragment),s=b(),x(r.$$.fragment),o=b(),F&&F.c(),c=b(),i=_("main"),u=_("div"),x(f.$$.fragment),d=b(),v=_("div"),x(h.$$.fragment),m=b(),g=_("div"),x(y.$$.fragment),C=b(),k=_("div"),x(z.$$.fragment),D=b(),T=_("div"),x(E.$$.fragment),q=b(),R&&R.c(),p(u,"class","svelte-p7g5el"),Ce(u,"hidden",l[0]!=="infra"),p(v,"class","svelte-p7g5el"),Ce(v,"hidden",l[0]!=="deploy"),p(g,"class","svelte-p7g5el"),Ce(g,"hidden",l[0]!=="deployments"),p(k,"class","svelte-p7g5el"),Ce(k,"hidden",l[0]!=="architecture"),p(T,"class","svelte-p7g5el"),Ce(T,"hidden",l[0]!=="metrics"),p(i,"class","content glass svelte-p7g5el"),p(t,"class","container svelte-p7g5el"),p(e,"class","app svelte-p7g5el")},m(N,H){w(N,e,H),a(e,t),Z(n,t,null),a(t,s),Z(r,t,null),a(t,o),F&&F.m(t,null),a(t,c),a(t,i),a(i,u),Z(f,u,null),a(i,d),a(i,v),Z(h,v,null),a(i,m),a(i,g),Z(y,g,null),a(i,C),a(i,k),Z(z,k,null),a(i,D),a(i,T),Z(E,T,null),a(i,q),~j&&M[j].m(i,null),O=!0},p(N,H){const ee={};H&1&&(ee.active=N[0]),r.$set(ee),N[9]?F?(F.p(N,H),H&512&&P(F,1)):(F=Fi(N),F.c(),P(F,1),F.m(t,c)):F&&(we(),L(F,1,1,()=>{F=null}),ye());const Q={};f.$set(Q),(!O||H&1)&&Ce(u,"hidden",N[0]!=="infra"),(!O||H&1)&&Ce(v,"hidden",N[0]!=="deploy");const te={};y.$set(te),(!O||H&1)&&Ce(g,"hidden",N[0]!=="deployments");const W={};z.$set(W),(!O||H&1)&&Ce(k,"hidden",N[0]!=="architecture");const le={};E.$set(le),(!O||H&1)&&Ce(T,"hidden",N[0]!=="metrics");let K=j;j=G(N),j===K?~j&&M[j].p(N,H):(R&&(we(),L(M[K],1,1,()=>{M[K]=null}),ye()),~j?(R=M[j],R?R.p(N,H):(R=M[j]=A[j](N),R.c()),P(R,1),R.m(i,null)):R=null)},i(N){O||(P(n.$$.fragment,N),P(r.$$.fragment,N),P(F),P(f.$$.fragment,N),P(h.$$.fragment,N),P(y.$$.fragment,N),P(z.$$.fragment,N),P(E.$$.fragment,N),P(R),O=!0)},o(N){L(n.$$.fragment,N),L(r.$$.fragment,N),L(F),L(f.$$.fragment,N),L(h.$$.fragment,N),L(y.$$.fragment,N),L(z.$$.fragment,N),L(E.$$.fragment,N),L(R),O=!1},d(N){N&&$(e),X(n),X(r),F&&F.d(),l[16](null),X(f),X(h),l[17](null),X(y),l[18](null),X(z),l[19](null),X(E),~j&&M[j].d()}}}function Od(l){let e,t;return e=new uc({props:{title:"Deploy Dashboard",subtitle:"Sign in to manage your infrastructure"}}),e.$on("success",l[12]),{c(){x(e.$$.fragment)},m(n,s){Z(e,n,s),t=!0},p:ie,i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){X(e,n)}}}function Fd(l){let e;return{c(){e=_("div"),e.innerHTML='<div class="spinner svelte-p7g5el"></div>',p(e,"class","loading-screen svelte-p7g5el")},m(t,n){w(t,e,n)},p:ie,i:ie,o:ie,d(t){t&&$(e)}}}function Fi(l){let e,t;return e=new Dc({props:{showTail:l[8],showContainer:l[7]}}),e.$on("change",l[14]),e.$on("refresh",l[15]),{c(){x(e.$$.fragment)},m(n,s){Z(e,n,s),t=!0},p(n,s){const r={};s&256&&(r.showTail=n[8]),s&128&&(r.showContainer=n[7]),e.$set(r)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){X(e,n)}}}function Bd(l){let e,t;return e=new id({}),{c(){x(e.$$.fragment)},m(n,s){Z(e,n,s),t=!0},p:ie,i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){X(e,n)}}}function Id(l){let e,t;return e=new P_({}),{c(){x(e.$$.fragment)},m(n,s){Z(e,n,s),t=!0},p:ie,i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){X(e,n)}}}function Ud(l){let e,t;return e=new b_({}),{c(){x(e.$$.fragment)},m(n,s){Z(e,n,s),t=!0},p:ie,i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){X(e,n)}}}function Hd(l){let e,t,n={};return e=new fp({props:n}),l[20](e),{c(){x(e.$$.fragment)},m(s,r){Z(e,s,r),t=!0},p(s,r){const o={};e.$set(o)},i(s){t||(P(e.$$.fragment,s),t=!0)},o(s){L(e.$$.fragment,s),t=!1},d(s){l[20](null),X(e,s)}}}function Gd(l){let e,t,n,s,r,o;e=new dc({});const c=[Fd,Od,Ad],i=[];function u(f,d){return f[1]?!f[10].token||!f[10].user?1:2:0}return n=u(l),s=i[n]=c[n](l),{c(){x(e.$$.fragment),t=b(),s.c(),r=Ne()},m(f,d){Z(e,f,d),w(f,t,d),i[n].m(f,d),w(f,r,d),o=!0},p(f,[d]){let v=n;n=u(f),n===v?i[n].p(f,d):(we(),L(i[v],1,1,()=>{i[v]=null}),ye(),s=i[n],s?s.p(f,d):(s=i[n]=c[n](f),s.c()),P(s,1),s.m(r.parentNode,r))},i(f){o||(P(e.$$.fragment,f),P(s),o=!0)},o(f){L(e.$$.fragment,f),L(s),o=!1},d(f){f&&($(t),$(r)),X(e,f),i[n].d(f)}}}function Wd(l,e,t){let n,s,r,o,c;Je(l,Gn,R=>t(0,o=R)),Je(l,zt,R=>t(10,c=R));let i=!1,u,f,d,v,h;const m=[{id:"infra",label:"Infrastructure"},{id:"deploy",label:"Deploy"},{id:"deployments",label:"Deployments"},{id:"architecture",label:"Architecture"},{id:"logs",label:"Logs"},{id:"metrics",label:"Metrics"},{id:"snapshots",label:"Snapshots"},{id:"services",label:"Services"},{id:"settings",label:"Settings"}];ll(async()=>{const R=await Ka();t(1,i=!0),R&&g()});function g(){At.refresh(),An.refresh(),zl.refresh(),il.refresh()}async function y(R){const{user:O,token:F}=R.detail;zt.setToken(F),zt.setUser(O),g()}function C(R){Gn.set(R.detail)}function k(){z()}function z(){switch(o){case"infra":u==null||u.refresh(),At.refresh();break;case"deployments":f==null||f.refresh();break;case"logs":d==null||d.refresh();break;case"metrics":v==null||v.refresh();break;case"architecture":h==null||h.refresh();break}}function D(R){gt[R?"unshift":"push"](()=>{u=R,t(2,u)})}function T(R){gt[R?"unshift":"push"](()=>{f=R,t(3,f)})}function E(R){gt[R?"unshift":"push"](()=>{h=R,t(6,h)})}function q(R){gt[R?"unshift":"push"](()=>{v=R,t(5,v)})}function j(R){gt[R?"unshift":"push"](()=>{d=R,t(4,d)})}return l.$$.update=()=>{l.$$.dirty&1&&t(9,n=Xa.includes(o)),l.$$.dirty&1&&t(8,s=o==="logs"),l.$$.dirty&1&&t(7,r=o==="logs")},[o,i,u,f,d,v,h,r,s,n,c,m,y,C,k,z,D,T,E,q,j]}class Jd extends tt{constructor(e){super(),et(this,e,Wd,Gd,Ye,{})}}new Jd({target:document.getElementById("app")});
