var Wf=Object.defineProperty;var Vf=(l,e,t)=>e in l?Wf(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t;var _l=(l,e,t)=>Vf(l,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();function be(){}const gu=l=>l;function bu(l,e){for(const t in e)l[t]=e[t];return l}function ku(l){return l()}function In(){return Object.create(null)}function Ve(l){l.forEach(ku)}function _n(l){return typeof l=="function"}function wt(l,e){return l!=l?e==e:l!==e||l&&typeof l=="object"||typeof l=="function"}let Ql;function nn(l,e){return l===e?!0:(Ql||(Ql=document.createElement("a")),Ql.href=e,l===Ql.href)}function Jf(l){return Object.keys(l).length===0}function En(l,...e){if(l==null){for(const n of e)n(void 0);return be}const t=l.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function Al(l){let e;return En(l,t=>e=t)(),e}function pt(l,e,t){l.$$.on_destroy.push(En(e,t))}function Mt(l,e,t,n){if(l){const s=wu(l,e,t,n);return l[0](s)}}function wu(l,e,t,n){return l[1]&&n?bu(t.ctx.slice(),l[1](n(e))):t.ctx}function At(l,e,t,n){if(l[2]&&n){const s=l[2](n(t));if(e.dirty===void 0)return s;if(typeof s=="object"){const o=[],i=Math.max(e.dirty.length,s.length);for(let u=0;u<i;u+=1)o[u]=e.dirty[u]|s[u];return o}return e.dirty|s}return e.dirty}function jt(l,e,t,n,s,o){if(s){const i=wu(e,t,n,o);l.p(i,s)}}function Ot(l){if(l.ctx.length>32){const e=[],t=l.ctx.length/32;for(let n=0;n<t;n++)e[n]=-1;return e}return-1}function $u(l){const e={};for(const t in l)e[t]=!0;return e}function Fn(l){const e=typeof l=="string"&&l.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[l,"px"]}const Cu=typeof window<"u";let Kf=Cu?()=>window.performance.now():()=>Date.now(),qn=Cu?l=>requestAnimationFrame(l):be;const Pl=new Set;function yu(l){Pl.forEach(e=>{e.c(l)||(Pl.delete(e),e.f())}),Pl.size!==0&&qn(yu)}function Yf(l){let e;return Pl.size===0&&qn(yu),{promise:new Promise(t=>{Pl.add(e={c:l,f:t})}),abort(){Pl.delete(e)}}}const Su=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function r(l,e){l.appendChild(e)}function Tu(l){if(!l)return document;const e=l.getRootNode?l.getRootNode():l.ownerDocument;return e&&e.host?e:l.ownerDocument}function Qf(l){const e=d("style");return e.textContent="/* empty */",Zf(Tu(l),e),e.sheet}function Zf(l,e){return r(l.head||l,e),e.sheet}function w(l,e,t){l.insertBefore(e,t||null)}function k(l){l.parentNode&&l.parentNode.removeChild(l)}function Me(l,e){for(let t=0;t<l.length;t+=1)l[t]&&l[t].d(e)}function d(l){return document.createElement(l)}function Nl(l){return document.createElementNS("http://www.w3.org/2000/svg",l)}function T(l){return document.createTextNode(l)}function b(){return T(" ")}function Ie(){return T("")}function ee(l,e,t,n){return l.addEventListener(e,t,n),()=>l.removeEventListener(e,t,n)}function Xf(l){return function(e){return e.preventDefault(),l.call(this,e)}}function Bn(l){return function(e){return e.stopPropagation(),l.call(this,e)}}function f(l,e,t){t==null?l.removeAttribute(e):l.getAttribute(e)!==t&&l.setAttribute(e,t)}function Ln(l){let e;return{p(...t){e=t,e.forEach(n=>l.push(n))},r(){e.forEach(t=>l.splice(l.indexOf(t),1))}}}function Kt(l){return l===""?null:+l}function xf(l){return Array.from(l.childNodes)}function B(l,e){e=""+e,l.data!==e&&(l.data=e)}function ne(l,e){l.value=e??""}function qt(l,e,t,n){t==null?l.style.removeProperty(e):l.style.setProperty(e,t,"")}function Re(l,e,t){for(let n=0;n<l.options.length;n+=1){const s=l.options[n];if(s.__value===e){s.selected=!0;return}}(!t||e!==void 0)&&(l.selectedIndex=-1)}function dt(l){const e=l.querySelector(":checked");return e&&e.__value}function ke(l,e,t){l.classList.toggle(e,!!t)}function zu(l,e,{bubbles:t=!1,cancelable:n=!1}={}){return new CustomEvent(l,{detail:e,bubbles:t,cancelable:n})}class ec{constructor(e=!1){_l(this,"is_svg",!1);_l(this,"e");_l(this,"n");_l(this,"t");_l(this,"a");this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,n=null){this.e||(this.is_svg?this.e=Nl(t.nodeName):this.e=d(t.nodeType===11?"TEMPLATE":t.nodeName),this.t=t.tagName!=="TEMPLATE"?t:t.content,this.c(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)w(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(k)}}const sn=new Map;let on=0;function tc(l){let e=5381,t=l.length;for(;t--;)e=(e<<5)-e^l.charCodeAt(t);return e>>>0}function lc(l,e){const t={stylesheet:Qf(e),rules:{}};return sn.set(l,t),t}function Un(l,e,t,n,s,o,i,u=0){const a=16.666/n;let c=`{
`;for(let S=0;S<=1;S+=a){const C=e+(t-e)*o(S);c+=S*100+`%{${i(C,1-C)}}
`}const _=c+`100% {${i(t,1-t)}}
}`,p=`__svelte_${tc(_)}_${u}`,m=Tu(l),{stylesheet:h,rules:v}=sn.get(m)||lc(m,l);v[p]||(v[p]=!0,h.insertRule(`@keyframes ${p} ${_}`,h.cssRules.length));const g=l.style.animation||"";return l.style.animation=`${g?`${g}, `:""}${p} ${n}ms linear ${s}ms 1 both`,on+=1,p}function nc(l,e){const t=(l.style.animation||"").split(", "),n=t.filter(e?o=>o.indexOf(e)<0:o=>o.indexOf("__svelte")===-1),s=t.length-n.length;s&&(l.style.animation=n.join(", "),on-=s,on||sc())}function sc(){qn(()=>{on||(sn.forEach(l=>{const{ownerNode:e}=l.stylesheet;e&&k(e)}),sn.clear())})}let Wl;function Gl(l){Wl=l}function Pn(){if(!Wl)throw new Error("Function called outside component initialization");return Wl}function kl(l){Pn().$$.on_mount.push(l)}function oc(l){Pn().$$.on_destroy.push(l)}function jl(){const l=Pn();return(e,t,{cancelable:n=!1}={})=>{const s=l.$$.callbacks[e];if(s){const o=zu(e,t,{cancelable:n});return s.slice().forEach(i=>{i.call(l,o)}),!o.defaultPrevented}return!0}}function rn(l,e){const t=l.$$.callbacks[e.type];t&&t.slice().forEach(n=>n.call(this,e))}const Dl=[],It=[];let Rl=[];const Cn=[],ic=Promise.resolve();let yn=!1;function rc(){yn||(yn=!0,ic.then(Du))}function xe(l){Rl.push(l)}function dl(l){Cn.push(l)}const kn=new Set;let Sl=0;function Du(){if(Sl!==0)return;const l=Wl;do{try{for(;Sl<Dl.length;){const e=Dl[Sl];Sl++,Gl(e),ac(e.$$)}}catch(e){throw Dl.length=0,Sl=0,e}for(Gl(null),Dl.length=0,Sl=0;It.length;)It.pop()();for(let e=0;e<Rl.length;e+=1){const t=Rl[e];kn.has(t)||(kn.add(t),t())}Rl.length=0}while(Dl.length);for(;Cn.length;)Cn.pop()();yn=!1,kn.clear(),Gl(l)}function ac(l){if(l.fragment!==null){l.update(),Ve(l.before_update);const e=l.dirty;l.dirty=[-1],l.fragment&&l.fragment.p(l.ctx,e),l.after_update.forEach(xe)}}function uc(l){const e=[],t=[];Rl.forEach(n=>l.indexOf(n)===-1?e.push(n):t.push(n)),t.forEach(n=>n()),Rl=e}let Hl;function fc(){return Hl||(Hl=Promise.resolve(),Hl.then(()=>{Hl=null})),Hl}function wn(l,e,t){l.dispatchEvent(zu(`${e?"intro":"outro"}${t}`))}const xl=new Set;let sl;function Se(){sl={r:0,c:[],p:sl}}function Te(){sl.r||Ve(sl.c),sl=sl.p}function P(l,e){l&&l.i&&(xl.delete(l),l.i(e))}function j(l,e,t,n){if(l&&l.o){if(xl.has(l))return;xl.add(l),sl.c.push(()=>{xl.delete(l),n&&(t&&l.d(1),n())}),l.o(e)}else n&&n()}const cc={duration:0};function Ll(l,e,t,n){let o=e(l,t,{direction:"both"}),i=n?0:1,u=null,a=null,c=null,_;function p(){c&&nc(l,c)}function m(v,g){const S=v.b-i;return g*=Math.abs(S),{a:i,b:v.b,d:S,duration:g,start:v.start,end:v.start+g,group:v.group}}function h(v){const{delay:g=0,duration:S=300,easing:C=gu,tick:$=be,css:y}=o||cc,D={start:Kf()+g,b:v};v||(D.group=sl,sl.r+=1),"inert"in l&&(v?_!==void 0&&(l.inert=_):(_=l.inert,l.inert=!0)),u||a?a=D:(y&&(p(),c=Un(l,i,v,S,g,C,y)),v&&$(0,1),u=m(D,S),xe(()=>wn(l,v,"start")),Yf(E=>{if(a&&E>a.start&&(u=m(a,S),a=null,wn(l,u.b,"start"),y&&(p(),c=Un(l,i,u.b,u.duration,0,C,o.css))),u){if(E>=u.end)$(i=u.b,1-i),wn(l,u.b,"end"),a||(u.b?p():--u.group.r||Ve(u.group.c)),u=null;else if(E>=u.start){const L=E-u.start;i=u.a+u.d*C(L/u.duration),$(i,1-i)}}return!!(u||a)}))}return{run(v){_n(o)?fc().then(()=>{o=o({direction:v?"in":"out"}),h(v)}):h(v)},end(){p(),u=a=null}}}function pe(l){return(l==null?void 0:l.length)!==void 0?l:Array.from(l)}function Eu(l,e){j(l,1,1,()=>{e.delete(l.key)})}function qu(l,e,t,n,s,o,i,u,a,c,_,p){let m=l.length,h=o.length,v=m;const g={};for(;v--;)g[l[v].key]=v;const S=[],C=new Map,$=new Map,y=[];for(v=h;v--;){const z=p(s,o,v),q=t(z);let O=i.get(q);O?y.push(()=>O.p(z,e)):(O=c(q,z),O.c()),C.set(q,S[v]=O),q in g&&$.set(q,Math.abs(v-g[q]))}const D=new Set,E=new Set;function L(z){P(z,1),z.m(u,_),i.set(z.key,z),_=z.first,h--}for(;m&&h;){const z=S[h-1],q=l[m-1],O=z.key,N=q.key;z===q?(_=z.first,m--,h--):C.has(N)?!i.has(O)||D.has(O)?L(z):E.has(N)?m--:$.get(O)>$.get(N)?(E.add(O),L(z)):(D.add(N),m--):(a(q,i),m--)}for(;m--;){const z=l[m];C.has(z.key)||a(z,i)}for(;h;)L(S[h-1]);return Ve(y),S}function pl(l,e,t){const n=l.$$.props[e];n!==void 0&&(l.$$.bound[n]=t,t(l.$$.ctx[n]))}function _e(l){l&&l.c()}function fe(l,e,t){const{fragment:n,after_update:s}=l.$$;n&&n.m(e,t),xe(()=>{const o=l.$$.on_mount.map(ku).filter(_n);l.$$.on_destroy?l.$$.on_destroy.push(...o):Ve(o),l.$$.on_mount=[]}),s.forEach(xe)}function ce(l,e){const t=l.$$;t.fragment!==null&&(uc(t.after_update),Ve(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function _c(l,e){l.$$.dirty[0]===-1&&(Dl.push(l),rc(),l.$$.dirty.fill(0)),l.$$.dirty[e/31|0]|=1<<e%31}function $t(l,e,t,n,s,o,i=null,u=[-1]){const a=Wl;Gl(l);const c=l.$$={fragment:null,ctx:[],props:o,update:be,not_equal:s,bound:In(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:In(),dirty:u,skip_bound:!1,root:e.target||a.$$.root};i&&i(c.root);let _=!1;if(c.ctx=t?t(l,e.props||{},(p,m,...h)=>{const v=h.length?h[0]:m;return c.ctx&&s(c.ctx[p],c.ctx[p]=v)&&(!c.skip_bound&&c.bound[p]&&c.bound[p](v),_&&_c(l,p)),m}):[],c.update(),_=!0,Ve(c.before_update),c.fragment=n?n(c.ctx):!1,e.target){if(e.hydrate){const p=xf(e.target);c.fragment&&c.fragment.l(p),p.forEach(k)}else c.fragment&&c.fragment.c();e.intro&&P(l.$$.fragment),fe(l,e.target,e.anchor),Du()}Gl(a)}class Ct{constructor(){_l(this,"$$");_l(this,"$$set")}$destroy(){ce(this,1),this.$destroy=be}$on(e,t){if(!_n(t))return be;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const s=n.indexOf(t);s!==-1&&n.splice(s,1)}}$set(e){this.$$set&&!Jf(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const dc="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(dc);const Tl=[];function pc(l,e){return{subscribe:ll(l,e).subscribe}}function ll(l,e=be){let t;const n=new Set;function s(u){if(wt(l,u)&&(l=u,t)){const a=!Tl.length;for(const c of n)c[1](),Tl.push(c,l);if(a){for(let c=0;c<Tl.length;c+=2)Tl[c][0](Tl[c+1]);Tl.length=0}}}function o(u){s(u(l))}function i(u,a=be){const c=[u,a];return n.add(c),n.size===1&&(t=e(s,o)||be),u(l),()=>{n.delete(c),n.size===0&&t&&(t(),t=null)}}return{set:s,update:o,subscribe:i}}function ml(l,e,t){const n=!Array.isArray(l),s=n?[l]:l;if(!s.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const o=e.length<2;return pc(t,(i,u)=>{let a=!1;const c=[];let _=0,p=be;const m=()=>{if(_)return;p();const v=e(n?c[0]:c,i,u);o?i(v):p=_n(v)?v:be},h=s.map((v,g)=>En(v,S=>{c[g]=S,_&=~(1<<g),a&&m()},()=>{_|=1<<g}));return a=!0,m(),function(){Ve(h),p(),a=!1}})}function Lu(l,e,t=7){if(typeof document>"u")return;const n=new Date(Date.now()+t*864e5).toUTCString();document.cookie=`${l}=${encodeURIComponent(e)}; expires=${n}; path=/; SameSite=Strict`}function Nn(l){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(^| )"+l+"=([^;]+)"));return e?decodeURIComponent(e[2]):null}function mc(l){typeof document>"u"||(document.cookie=`${l}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; SameSite=Strict`)}const en="jwt_token";function vc(){const l=Nn(en),{subscribe:e,set:t,update:n}=ll({token:l,user:null,loading:!1,error:null});return{subscribe:e,setToken(s){Lu(en,s,7),n(o=>({...o,token:s,error:null}))},setUser(s){n(o=>({...o,user:s}))},setError(s){n(o=>({...o,error:s,loading:!1}))},setLoading(s){n(o=>({...o,loading:s}))},logout(){mc(en),t({token:null,user:null,loading:!1,error:null})},clearError(){n(s=>({...s,error:null}))}}}const ht=vc();ml(ht,l=>!!l.token&&!!l.user);ml(ht,l=>l.user);let Pu=[];function hc(l){Pu=l.map(e=>e.toLowerCase())}const gc=ml(ht,l=>{var e;return(e=l.user)!=null&&e.email?l.user.role==="admin"?!0:Pu.includes(l.user.email.toLowerCase()):!1});function Hn(){return Nn(en)}function Sn(l){ht.setToken(l)}function bc(){ht.logout()}function Nu(l){return Nn(l)}function Ru(l,e,t=30){Lu(l,e,t)}let Mu={baseUrl:"/api/v1",onUnauthorized:null};function kc(l,e={}){const t=e.config||Mu,n=Al(ht),s={"Content-Type":"application/json"},o=l.startsWith("/auth/login")||l.startsWith("/auth/register");return n.token&&!o&&!e.skipAuth&&(s.Authorization=`Bearer ${n.token}`),e.headers&&Object.assign(s,e.headers),{url:t.baseUrl+l,headers:s}}async function wc(l,e={}){const t=e.config||Mu;if(l.status===401){let n="Authentication failed";try{const o=await l.json();n=o.detail||o.error||o.message||n}catch{}throw Al(ht).token&&(ht.logout(),n="Session expired - please login again"),t.onUnauthorized&&t.onUnauthorized(n),new Error(n)}if(!l.ok){const n=await l.json().catch(()=>({detail:"Request failed"}));throw new Error(n.detail||n.error||n.message||"Request failed")}}async function $c(l,e,t=null,n={}){const{url:s,headers:o}=kc(e,n),i={method:l,headers:o};t&&(i.body=JSON.stringify(t));const u=await fetch(s,i);if(await wc(u,n),u.status===204)return null;const a=await u.json();return a&&a.success===!0&&a.data!==void 0?a.data:a}async function El(l,e,t=null,n={}){return $c(l,e,t,n)}function Cc(l){let e,t,n,s,o,i,u=l[3]&&Gn();const a=l[9].default,c=Mt(a,l,l[8],null);return{c(){e=d("button"),u&&u.c(),t=b(),c&&c.c(),f(e,"type",l[4]),f(e,"title",l[6]),f(e,"aria-label",l[7]),f(e,"class",n="btn btn-"+l[0]+" btn-"+l[1]+" svelte-1umzi1p"),e.disabled=l[2]},m(_,p){w(_,e,p),u&&u.m(e,null),r(e,t),c&&c.m(e,null),s=!0,o||(i=ee(e,"click",l[11]),o=!0)},p(_,p){_[3]?u||(u=Gn(),u.c(),u.m(e,t)):u&&(u.d(1),u=null),c&&c.p&&(!s||p&256)&&jt(c,a,_,_[8],s?At(a,_[8],p,null):Ot(_[8]),null),(!s||p&16)&&f(e,"type",_[4]),(!s||p&64)&&f(e,"title",_[6]),(!s||p&128)&&f(e,"aria-label",_[7]),(!s||p&3&&n!==(n="btn btn-"+_[0]+" btn-"+_[1]+" svelte-1umzi1p"))&&f(e,"class",n),(!s||p&4)&&(e.disabled=_[2])},i(_){s||(P(c,_),s=!0)},o(_){j(c,_),s=!1},d(_){_&&k(e),u&&u.d(),c&&c.d(_),o=!1,i()}}}function yc(l){let e,t,n,s,o,i,u=l[3]&&Wn();const a=l[9].default,c=Mt(a,l,l[8],null);return{c(){e=d("a"),u&&u.c(),t=b(),c&&c.c(),f(e,"href",l[5]),f(e,"title",l[6]),f(e,"aria-label",l[7]),f(e,"class",n="btn btn-"+l[0]+" btn-"+l[1]+" svelte-1umzi1p"),ke(e,"disabled",l[2])},m(_,p){w(_,e,p),u&&u.m(e,null),r(e,t),c&&c.m(e,null),s=!0,o||(i=ee(e,"click",l[10]),o=!0)},p(_,p){_[3]?u||(u=Wn(),u.c(),u.m(e,t)):u&&(u.d(1),u=null),c&&c.p&&(!s||p&256)&&jt(c,a,_,_[8],s?At(a,_[8],p,null):Ot(_[8]),null),(!s||p&32)&&f(e,"href",_[5]),(!s||p&64)&&f(e,"title",_[6]),(!s||p&128)&&f(e,"aria-label",_[7]),(!s||p&3&&n!==(n="btn btn-"+_[0]+" btn-"+_[1]+" svelte-1umzi1p"))&&f(e,"class",n),(!s||p&7)&&ke(e,"disabled",_[2])},i(_){s||(P(c,_),s=!0)},o(_){j(c,_),s=!1},d(_){_&&k(e),u&&u.d(),c&&c.d(_),o=!1,i()}}}function Gn(l){let e;return{c(){e=d("span"),f(e,"class","spinner svelte-1umzi1p")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function Wn(l){let e;return{c(){e=d("span"),f(e,"class","spinner svelte-1umzi1p")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function Sc(l){let e,t,n,s;const o=[yc,Cc],i=[];function u(a,c){return a[5]?0:1}return e=u(l),t=i[e]=o[e](l),{c(){t.c(),n=Ie()},m(a,c){i[e].m(a,c),w(a,n,c),s=!0},p(a,[c]){let _=e;e=u(a),e===_?i[e].p(a,c):(Se(),j(i[_],1,1,()=>{i[_]=null}),Te(),t=i[e],t?t.p(a,c):(t=i[e]=o[e](a),t.c()),P(t,1),t.m(n.parentNode,n))},i(a){s||(P(t),s=!0)},o(a){j(t),s=!1},d(a){a&&k(n),i[e].d(a)}}}function Tc(l,e,t){let{$$slots:n={},$$scope:s}=e,{variant:o="default"}=e,{size:i="md"}=e,{disabled:u=!1}=e,{loading:a=!1}=e,{type:c="button"}=e,{href:_=null}=e,{title:p=void 0}=e,{ariaLabel:m=void 0}=e;function h(g){rn.call(this,l,g)}function v(g){rn.call(this,l,g)}return l.$$set=g=>{"variant"in g&&t(0,o=g.variant),"size"in g&&t(1,i=g.size),"disabled"in g&&t(2,u=g.disabled),"loading"in g&&t(3,a=g.loading),"type"in g&&t(4,c=g.type),"href"in g&&t(5,_=g.href),"title"in g&&t(6,p=g.title),"ariaLabel"in g&&t(7,m=g.ariaLabel),"$$scope"in g&&t(8,s=g.$$scope)},[o,i,u,a,c,_,p,m,s,n,h,v]}class Be extends Ct{constructor(e){super(),$t(this,e,Tc,Sc,wt,{variant:0,size:1,disabled:2,loading:3,type:4,href:5,title:6,ariaLabel:7})}}const zc=l=>({}),Vn=l=>({}),Dc=l=>({}),Jn=l=>({});function Kn(l,e,t){const n=l.slice();return n[57]=e[t],n[58]=e,n[59]=t,n}function Yn(l,e,t){const n=l.slice();return n[60]=e[t],n}function Qn(l,e,t){const n=l.slice();return n[63]=e[t],n}const Ec=l=>({}),Zn=l=>({}),qc=l=>({}),Xn=l=>({});function xn(l){let e;function t(o,i){return o[2]?Pc:Lc}let n=t(l),s=n(l);return{c(){s.c(),e=Ie()},m(o,i){s.m(o,i),w(o,e,i)},p(o,i){n===(n=t(o))&&s?s.p(o,i):(s.d(1),s=n(o),s&&(s.c(),s.m(e.parentNode,e)))},d(o){o&&k(e),s.d(o)}}}function Lc(l){let e;return{c(){e=d("span"),f(e,"class","brand-dot svelte-18o6zjb")},m(t,n){w(t,e,n)},p:be,d(t){t&&k(e)}}}function Pc(l){let e,t;return{c(){e=d("img"),nn(e.src,t=l[2])||f(e,"src",t),f(e,"alt",l[0]),f(e,"class","auth-logo svelte-18o6zjb")},m(n,s){w(n,e,s)},p(n,s){s[0]&4&&!nn(e.src,t=n[2])&&f(e,"src",t),s[0]&1&&f(e,"alt",n[0])},d(n){n&&k(e)}}}function Nc(l){let e,t,n,s,o,i,u,a=l[3]&&xn(l);return{c(){e=d("div"),a&&a.c(),t=b(),n=d("h1"),s=T(l[0]),o=b(),i=d("p"),u=T(l[1]),f(n,"class","svelte-18o6zjb"),f(i,"class","subtitle svelte-18o6zjb"),f(e,"class","auth-header svelte-18o6zjb")},m(c,_){w(c,e,_),a&&a.m(e,null),r(e,t),r(e,n),r(n,s),r(e,o),r(e,i),r(i,u)},p(c,_){c[3]?a?a.p(c,_):(a=xn(c),a.c(),a.m(e,t)):a&&(a.d(1),a=null),_[0]&1&&B(s,c[0]),_[0]&2&&B(u,c[1])},d(c){c&&k(e),a&&a.d()}}}function es(l){let e,t,n,s=pe(l[6]),o=[];for(let u=0;u<s.length;u+=1)o[u]=ts(Qn(l,s,u));let i=!l[7]&&ls();return{c(){e=d("div");for(let u=0;u<o.length;u+=1)o[u].c();t=b(),i&&i.c(),n=Ie(),f(e,"class","social-login svelte-18o6zjb")},m(u,a){w(u,e,a);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(e,null);w(u,t,a),i&&i.m(u,a),w(u,n,a)},p(u,a){if(a[0]&67371072|a[1]&1){s=pe(u[6]);let c;for(c=0;c<s.length;c+=1){const _=Qn(u,s,c);o[c]?o[c].p(_,a):(o[c]=ts(_),o[c].c(),o[c].m(e,null))}for(;c<o.length;c+=1)o[c].d(1);o.length=s.length}u[7]?i&&(i.d(1),i=null):i||(i=ls(),i.c(),i.m(n.parentNode,n))},d(u){u&&(k(e),k(t),k(n)),Me(o,u),i&&i.d(u)}}}function ts(l){let e,t,n=(l[26][l[63]]||"")+"",s,o=l[63].charAt(0).toUpperCase()+l[63].slice(1)+"",i,u,a,c,_;function p(){return l[43](l[63])}return{c(){e=d("button"),t=d("span"),s=T(`
            Continue with `),i=T(o),u=b(),f(t,"class","social-icon svelte-18o6zjb"),f(e,"class",a="btn-social btn-social-"+l[63]+" svelte-18o6zjb"),e.disabled=l[18]},m(m,h){w(m,e,h),r(e,t),t.innerHTML=n,r(e,s),r(e,i),r(e,u),c||(_=ee(e,"click",p),c=!0)},p(m,h){l=m,h[0]&64&&n!==(n=(l[26][l[63]]||"")+"")&&(t.innerHTML=n),h[0]&64&&o!==(o=l[63].charAt(0).toUpperCase()+l[63].slice(1)+"")&&B(i,o),h[0]&64&&a!==(a="btn-social btn-social-"+l[63]+" svelte-18o6zjb")&&f(e,"class",a),h[0]&262144&&(e.disabled=l[18])},d(m){m&&k(e),c=!1,_()}}}function ls(l){let e;return{c(){e=d("div"),e.innerHTML='<span class="svelte-18o6zjb">or</span>',f(e,"class","divider svelte-18o6zjb")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function ns(l){let e,t,n,s,o,i,u,a=l[10]&&l[27][l[10]]&&ss(l),c=!l[7]&&os();return{c(){e=d("button"),a&&a.c(),t=b(),n=T(l[9]),s=b(),c&&c.c(),o=Ie(),f(e,"class","btn-sso svelte-18o6zjb"),e.disabled=l[18]},m(_,p){w(_,e,p),a&&a.m(e,null),r(e,t),r(e,n),w(_,s,p),c&&c.m(_,p),w(_,o,p),i||(u=ee(e,"click",l[32]),i=!0)},p(_,p){_[10]&&_[27][_[10]]?a?a.p(_,p):(a=ss(_),a.c(),a.m(e,t)):a&&(a.d(1),a=null),p[0]&512&&B(n,_[9]),p[0]&262144&&(e.disabled=_[18]),_[7]?c&&(c.d(1),c=null):c||(c=os(),c.c(),c.m(o.parentNode,o))},d(_){_&&(k(e),k(s),k(o)),a&&a.d(),c&&c.d(_),i=!1,u()}}}function ss(l){let e,t=l[27][l[10]]+"";return{c(){e=d("span"),f(e,"class","sso-icon svelte-18o6zjb")},m(n,s){w(n,e,s),e.innerHTML=t},p(n,s){s[0]&1024&&t!==(t=n[27][n[10]]+"")&&(e.innerHTML=t)},d(n){n&&k(e)}}}function os(l){let e;return{c(){e=d("div"),e.innerHTML='<span class="svelte-18o6zjb">or use email</span>',f(e,"class","divider svelte-18o6zjb")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function is(l){let e,t,n,s,o,i=l[4]&&rs(l);const u=[Mc,Rc],a=[];function c(_,p){return _[17]==="login"?0:1}return t=c(l),n=a[t]=u[t](l),{c(){i&&i.c(),e=b(),n.c(),s=Ie()},m(_,p){i&&i.m(_,p),w(_,e,p),a[t].m(_,p),w(_,s,p),o=!0},p(_,p){_[4]?i?i.p(_,p):(i=rs(_),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null);let m=t;t=c(_),t===m?a[t].p(_,p):(Se(),j(a[m],1,1,()=>{a[m]=null}),Te(),n=a[t],n?n.p(_,p):(n=a[t]=u[t](_),n.c()),P(n,1),n.m(s.parentNode,s))},i(_){o||(P(n),o=!0)},o(_){j(n),o=!1},d(_){_&&(k(e),k(s)),i&&i.d(_),a[t].d(_)}}}function rs(l){let e,t,n,s,o,i;return{c(){e=d("div"),t=d("button"),t.textContent="Sign In",n=b(),s=d("button"),s.textContent="Sign Up",f(t,"class","tab svelte-18o6zjb"),ke(t,"active",l[17]==="login"),f(s,"class","tab svelte-18o6zjb"),ke(s,"active",l[17]==="signup"),f(e,"class","tabs svelte-18o6zjb")},m(u,a){w(u,e,a),r(e,t),r(e,n),r(e,s),o||(i=[ee(t,"click",l[44]),ee(s,"click",l[45])],o=!0)},p(u,a){a[0]&131072&&ke(t,"active",u[17]==="login"),a[0]&131072&&ke(s,"active",u[17]==="signup")},d(u){u&&k(e),o=!1,Ve(i)}}}function Rc(l){let e,t,n,s,o,i,u,a,c,_,p,m,h,v,g,S,C,$,y,D,E,L,z=pe(l[15]),q=[];for(let N=0;N<z.length;N+=1)q[N]=us(Kn(l,z,N));let O=l[11]&&fs(l);return y=new Be({props:{type:"submit",variant:"primary",loading:l[18],disabled:l[18],$$slots:{default:[Ic]},$$scope:{ctx:l}}}),{c(){e=d("form"),t=d("div"),n=d("label"),n.textContent="Email",s=b(),o=d("input"),i=b(),u=d("div"),a=d("label"),a.textContent="Password",c=b(),_=d("input"),p=b(),m=d("div"),h=d("label"),h.textContent="Confirm Password",v=b(),g=d("input"),S=b();for(let N=0;N<q.length;N+=1)q[N].c();C=b(),O&&O.c(),$=b(),_e(y.$$.fragment),f(n,"for","signup-email"),f(n,"class","svelte-18o6zjb"),f(o,"type","email"),f(o,"id","signup-email"),f(o,"placeholder","you@example.com"),o.required=!0,o.disabled=l[18],f(o,"autocomplete","email"),f(o,"class","svelte-18o6zjb"),f(t,"class","form-group svelte-18o6zjb"),f(a,"for","signup-password"),f(a,"class","svelte-18o6zjb"),f(_,"type","password"),f(_,"id","signup-password"),f(_,"placeholder","••••••••"),_.required=!0,_.disabled=l[18],f(_,"autocomplete","new-password"),f(_,"class","svelte-18o6zjb"),f(u,"class","form-group svelte-18o6zjb"),f(h,"for","signup-confirm"),f(h,"class","svelte-18o6zjb"),f(g,"type","password"),f(g,"id","signup-confirm"),f(g,"placeholder","••••••••"),g.required=!0,g.disabled=l[18],f(g,"autocomplete","new-password"),f(g,"class","svelte-18o6zjb"),f(m,"class","form-group svelte-18o6zjb"),f(e,"class","svelte-18o6zjb")},m(N,M){w(N,e,M),r(e,t),r(t,n),r(t,s),r(t,o),ne(o,l[22]),r(e,i),r(e,u),r(u,a),r(u,c),r(u,_),ne(_,l[23]),r(e,p),r(e,m),r(m,h),r(m,v),r(m,g),ne(g,l[24]),r(e,S);for(let G=0;G<q.length;G+=1)q[G]&&q[G].m(e,null);r(e,C),O&&O.m(e,null),r(e,$),fe(y,e,null),D=!0,E||(L=[ee(o,"input",l[48]),ee(_,"input",l[49]),ee(g,"input",l[50]),ee(e,"submit",l[30])],E=!0)},p(N,M){if((!D||M[0]&262144)&&(o.disabled=N[18]),M[0]&4194304&&o.value!==N[22]&&ne(o,N[22]),(!D||M[0]&262144)&&(_.disabled=N[18]),M[0]&8388608&&_.value!==N[23]&&ne(_,N[23]),(!D||M[0]&262144)&&(g.disabled=N[18]),M[0]&16777216&&g.value!==N[24]&&ne(g,N[24]),M[0]&360448){z=pe(N[15]);let F;for(F=0;F<z.length;F+=1){const A=Kn(N,z,F);q[F]?q[F].p(A,M):(q[F]=us(A),q[F].c(),q[F].m(e,C))}for(;F<q.length;F+=1)q[F].d(1);q.length=z.length}N[11]?O?O.p(N,M):(O=fs(N),O.c(),O.m(e,$)):O&&(O.d(1),O=null);const G={};M[0]&262144&&(G.loading=N[18]),M[0]&262144&&(G.disabled=N[18]),M[1]&16777216&&(G.$$scope={dirty:M,ctx:N}),y.$set(G)},i(N){D||(P(y.$$.fragment,N),D=!0)},o(N){j(y.$$.fragment,N),D=!1},d(N){N&&k(e),Me(q,N),O&&O.d(),ce(y),E=!1,Ve(L)}}}function Mc(l){let e,t,n,s,o,i,u,a,c,_,p,m,h,v,g,S,C=l[5]&&cs(l);return h=new Be({props:{type:"submit",variant:"primary",loading:l[18],disabled:l[18],$$slots:{default:[Fc]},$$scope:{ctx:l}}}),{c(){e=d("form"),t=d("div"),n=d("label"),n.textContent="Email",s=b(),o=d("input"),i=b(),u=d("div"),a=d("label"),a.textContent="Password",c=b(),_=d("input"),p=b(),C&&C.c(),m=b(),_e(h.$$.fragment),f(n,"for","login-email"),f(n,"class","svelte-18o6zjb"),f(o,"type","email"),f(o,"id","login-email"),f(o,"placeholder","you@example.com"),o.required=!0,o.disabled=l[18],f(o,"autocomplete","email"),f(o,"class","svelte-18o6zjb"),f(t,"class","form-group svelte-18o6zjb"),f(a,"for","login-password"),f(a,"class","svelte-18o6zjb"),f(_,"type","password"),f(_,"id","login-password"),f(_,"placeholder","••••••••"),_.required=!0,_.disabled=l[18],f(_,"autocomplete","current-password"),f(_,"class","svelte-18o6zjb"),f(u,"class","form-group svelte-18o6zjb"),f(e,"class","svelte-18o6zjb")},m($,y){w($,e,y),r(e,t),r(t,n),r(t,s),r(t,o),ne(o,l[20]),r(e,i),r(e,u),r(u,a),r(u,c),r(u,_),ne(_,l[21]),r(e,p),C&&C.m(e,null),r(e,m),fe(h,e,null),v=!0,g||(S=[ee(o,"input",l[46]),ee(_,"input",l[47]),ee(e,"submit",l[29])],g=!0)},p($,y){(!v||y[0]&262144)&&(o.disabled=$[18]),y[0]&1048576&&o.value!==$[20]&&ne(o,$[20]),(!v||y[0]&262144)&&(_.disabled=$[18]),y[0]&2097152&&_.value!==$[21]&&ne(_,$[21]),$[5]?C?C.p($,y):(C=cs($),C.c(),C.m(e,m)):C&&(C.d(1),C=null);const D={};y[0]&262144&&(D.loading=$[18]),y[0]&262144&&(D.disabled=$[18]),y[1]&16777216&&(D.$$scope={dirty:y,ctx:$}),h.$set(D)},i($){v||(P(h.$$.fragment,$),v=!0)},o($){j(h.$$.fragment,$),v=!1},d($){$&&k(e),C&&C.d(),ce(h),g=!1,Ve(S)}}}function Ac(l){let e,t,n,s,o,i;function u(){l[53].call(e,l[57])}return{c(){e=d("input"),f(e,"type","text"),f(e,"id",t="signup-"+l[57].name),f(e,"placeholder",n=l[57].placeholder||""),e.required=s=l[57].required,e.disabled=l[18],f(e,"class","svelte-18o6zjb")},m(a,c){w(a,e,c),ne(e,l[16][l[57].name]),o||(i=ee(e,"input",u),o=!0)},p(a,c){l=a,c[0]&32768&&t!==(t="signup-"+l[57].name)&&f(e,"id",t),c[0]&32768&&n!==(n=l[57].placeholder||"")&&f(e,"placeholder",n),c[0]&32768&&s!==(s=l[57].required)&&(e.required=s),c[0]&262144&&(e.disabled=l[18]),c[0]&98304&&e.value!==l[16][l[57].name]&&ne(e,l[16][l[57].name])},d(a){a&&k(e),o=!1,i()}}}function jc(l){let e,t,n,s,o,i;function u(){l[52].call(e,l[57])}return{c(){e=d("textarea"),f(e,"id",t="signup-"+l[57].name),f(e,"placeholder",n=l[57].placeholder||""),e.required=s=l[57].required,e.disabled=l[18],f(e,"rows","3"),f(e,"class","svelte-18o6zjb")},m(a,c){w(a,e,c),ne(e,l[16][l[57].name]),o||(i=ee(e,"input",u),o=!0)},p(a,c){l=a,c[0]&32768&&t!==(t="signup-"+l[57].name)&&f(e,"id",t),c[0]&32768&&n!==(n=l[57].placeholder||"")&&f(e,"placeholder",n),c[0]&32768&&s!==(s=l[57].required)&&(e.required=s),c[0]&262144&&(e.disabled=l[18]),c[0]&98304&&ne(e,l[16][l[57].name])},d(a){a&&k(e),o=!1,i()}}}function Oc(l){let e,t,n,s,o,i,u=pe(l[57].options),a=[];for(let _=0;_<u.length;_+=1)a[_]=as(Yn(l,u,_));function c(){l[51].call(e,l[57])}return{c(){e=d("select"),t=d("option"),t.textContent="Select...";for(let _=0;_<a.length;_+=1)a[_].c();t.__value="",ne(t,t.__value),f(e,"id",n="signup-"+l[57].name),e.required=s=l[57].required,e.disabled=l[18],f(e,"class","svelte-18o6zjb"),l[16][l[57].name]===void 0&&xe(c)},m(_,p){w(_,e,p),r(e,t);for(let m=0;m<a.length;m+=1)a[m]&&a[m].m(e,null);Re(e,l[16][l[57].name],!0),o||(i=ee(e,"change",c),o=!0)},p(_,p){if(l=_,p[0]&32768){u=pe(l[57].options);let m;for(m=0;m<u.length;m+=1){const h=Yn(l,u,m);a[m]?a[m].p(h,p):(a[m]=as(h),a[m].c(),a[m].m(e,null))}for(;m<a.length;m+=1)a[m].d(1);a.length=u.length}p[0]&32768&&n!==(n="signup-"+l[57].name)&&f(e,"id",n),p[0]&32768&&s!==(s=l[57].required)&&(e.required=s),p[0]&262144&&(e.disabled=l[18]),p[0]&98304&&Re(e,l[16][l[57].name])},d(_){_&&k(e),Me(a,_),o=!1,i()}}}function as(l){let e,t=l[60]+"",n,s;return{c(){e=d("option"),n=T(t),e.__value=s=l[60],ne(e,e.__value)},m(o,i){w(o,e,i),r(e,n)},p(o,i){i[0]&32768&&t!==(t=o[60]+"")&&B(n,t),i[0]&32768&&s!==(s=o[60])&&(e.__value=s,ne(e,e.__value))},d(o){o&&k(e)}}}function us(l){let e,t,n=l[57].label+"",s,o,i,u;function a(p,m){return p[57].type==="select"&&p[57].options?Oc:p[57].type==="textarea"?jc:Ac}let c=a(l),_=c(l);return{c(){e=d("div"),t=d("label"),s=T(n),i=b(),_.c(),u=b(),f(t,"for",o="signup-"+l[57].name),f(t,"class","svelte-18o6zjb"),f(e,"class","form-group svelte-18o6zjb")},m(p,m){w(p,e,m),r(e,t),r(t,s),r(e,i),_.m(e,null),r(e,u)},p(p,m){m[0]&32768&&n!==(n=p[57].label+"")&&B(s,n),m[0]&32768&&o!==(o="signup-"+p[57].name)&&f(t,"for",o),c===(c=a(p))&&_?_.p(p,m):(_.d(1),_=c(p),_&&(_.c(),_.m(e,u)))},d(p){p&&k(e),_.d()}}}function fs(l){let e,t,n,s,o,i,u,a,c,_,p,m,h;return{c(){e=d("label"),t=d("input"),n=b(),s=d("span"),o=T(l[14]),i=b(),u=d("a"),a=T("Terms"),c=T(` and 
                `),_=d("a"),p=T("Privacy Policy"),f(t,"type","checkbox"),t.disabled=l[18],f(t,"class","svelte-18o6zjb"),f(u,"href",l[12]),f(u,"target","_blank"),f(u,"class","svelte-18o6zjb"),f(_,"href",l[13]),f(_,"target","_blank"),f(_,"class","svelte-18o6zjb"),f(e,"class","terms-checkbox svelte-18o6zjb")},m(v,g){w(v,e,g),r(e,t),t.checked=l[25],r(e,n),r(e,s),r(s,o),r(s,i),r(s,u),r(u,a),r(s,c),r(s,_),r(_,p),m||(h=ee(t,"change",l[54]),m=!0)},p(v,g){g[0]&262144&&(t.disabled=v[18]),g[0]&33554432&&(t.checked=v[25]),g[0]&16384&&B(o,v[14]),g[0]&4096&&f(u,"href",v[12]),g[0]&8192&&f(_,"href",v[13])},d(v){v&&k(e),m=!1,h()}}}function Ic(l){let e;return{c(){e=T("Create Account")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function cs(l){let e,t,n;return{c(){e=d("button"),e.textContent="Forgot password?",f(e,"type","button"),f(e,"class","link-btn forgot-link svelte-18o6zjb")},m(s,o){w(s,e,o),t||(n=ee(e,"click",l[33]),t=!0)},p:be,d(s){s&&k(e),t=!1,n()}}}function Fc(l){let e;return{c(){e=T("Sign In")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function _s(l){let e,t;return{c(){e=d("p"),t=T(l[19]),f(e,"class","error-message svelte-18o6zjb")},m(n,s){w(n,e,s),r(e,t)},p(n,s){s[0]&524288&&B(t,n[19])},d(n){n&&k(e)}}}function Bc(l){let e,t,n,s,o,i,u,a,c,_;const p=l[42].header,m=Mt(p,l,l[55],Xn),h=m||Nc(l),v=l[42]["before-form"],g=Mt(v,l,l[55],Zn);let S=l[6].length>0&&es(l),C=l[8]&&ns(l),$=!l[7]&&is(l),y=l[19]&&_s(l);const D=l[42]["after-form"],E=Mt(D,l,l[55],Jn),L=l[42].footer,z=Mt(L,l,l[55],Vn);return{c(){e=d("div"),t=d("div"),h&&h.c(),n=b(),g&&g.c(),s=b(),S&&S.c(),o=b(),C&&C.c(),i=b(),$&&$.c(),u=b(),y&&y.c(),a=b(),E&&E.c(),c=b(),z&&z.c(),f(t,"class","auth-card glass svelte-18o6zjb"),f(e,"class","auth-container svelte-18o6zjb")},m(q,O){w(q,e,O),r(e,t),h&&h.m(t,null),r(t,n),g&&g.m(t,null),r(t,s),S&&S.m(t,null),r(t,o),C&&C.m(t,null),r(t,i),$&&$.m(t,null),r(t,u),y&&y.m(t,null),r(t,a),E&&E.m(t,null),r(t,c),z&&z.m(t,null),_=!0},p(q,O){m?m.p&&(!_||O[1]&16777216)&&jt(m,p,q,q[55],_?At(p,q[55],O,qc):Ot(q[55]),Xn):h&&h.p&&(!_||O[0]&15)&&h.p(q,_?O:[-1,-1,-1]),g&&g.p&&(!_||O[1]&16777216)&&jt(g,v,q,q[55],_?At(v,q[55],O,Ec):Ot(q[55]),Zn),q[6].length>0?S?S.p(q,O):(S=es(q),S.c(),S.m(t,o)):S&&(S.d(1),S=null),q[8]?C?C.p(q,O):(C=ns(q),C.c(),C.m(t,i)):C&&(C.d(1),C=null),q[7]?$&&(Se(),j($,1,1,()=>{$=null}),Te()):$?($.p(q,O),O[0]&128&&P($,1)):($=is(q),$.c(),P($,1),$.m(t,u)),q[19]?y?y.p(q,O):(y=_s(q),y.c(),y.m(t,a)):y&&(y.d(1),y=null),E&&E.p&&(!_||O[1]&16777216)&&jt(E,D,q,q[55],_?At(D,q[55],O,Dc):Ot(q[55]),Jn),z&&z.p&&(!_||O[1]&16777216)&&jt(z,L,q,q[55],_?At(L,q[55],O,zc):Ot(q[55]),Vn)},i(q){_||(P(h,q),P(g,q),P($),P(E,q),P(z,q),_=!0)},o(q){j(h,q),j(g,q),j($),j(E,q),j(z,q),_=!1},d(q){q&&k(e),h&&h.d(q),g&&g.d(q),S&&S.d(),C&&C.d(),$&&$.d(),y&&y.d(),E&&E.d(q),z&&z.d(q)}}}function Uc(l,e,t){let{$$slots:n={},$$scope:s}=e,{title:o="Welcome"}=e,{subtitle:i="Sign in to your account"}=e,{logo:u=null}=e,{showLogo:a=!0}=e,{allowSignup:c=!0}=e,{allowPasswordReset:_=!0}=e,{requireEmailVerification:p=!1}=e,{socialProviders:m=[]}=e,{socialOnly:h=!1}=e,{ssoEnabled:v=!1}=e,{ssoButtonText:g="Sign in with SSO"}=e,{ssoProvider:S=null}=e,{ssoUrl:C="/api/v1/auth/sso"}=e,{showTerms:$=!1}=e,{termsUrl:y="/terms"}=e,{privacyUrl:D="/privacy"}=e,{termsText:E="I agree to the"}=e,{signupFields:L=[]}=e,{apiBase:z="/api/v1"}=e,{loginEndpoint:q="/auth/login"}=e,{registerEndpoint:O="/auth/register"}=e,{meEndpoint:N="/auth/me"}=e,{onSuccess:M=null}=e,{onError:G=null}=e;const F=jl();let A="login",U=!1,R=null,I="",H="",Y="",Q="",X="",oe=!1,x={};const V={google:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4"/><path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"/><path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" fill="#FBBC05"/><path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"/></svg>',github:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z"/></svg>',microsoft:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M11.4 11.4H0V0h11.4v11.4z" fill="#F25022"/><path d="M24 11.4H12.6V0H24v11.4z" fill="#7FBA00"/><path d="M11.4 24H0V12.6h11.4V24z" fill="#00A4EF"/><path d="M24 24H12.6V12.6H24V24z" fill="#FFB900"/></svg>',apple:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z"/></svg>',facebook:'<svg viewBox="0 0 24 24" fill="#1877F2"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>'},J={okta:'<svg viewBox="0 0 24 24" fill="currentColor"><circle cx="12" cy="12" r="10" fill="#007DC1"/><path d="M12 6a6 6 0 100 12 6 6 0 000-12zm0 9a3 3 0 110-6 3 3 0 010 6z" fill="white"/></svg>',azure:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M13.05 4.24L6.56 18.05l2.97.01 1.42-3.22h5.09l-.96 3.21h3.03L13.05 4.24z" fill="#0078D4"/></svg>'};function ae(ve){t(17,A=ve),t(19,R=null)}async function W(ve){ve.preventDefault(),t(18,U=!0),t(19,R=null);try{const Pe=await El("POST",q,{username:I,password:H},{skipAuth:!0}),Ne=(Pe==null?void 0:Pe.access_token)||(Pe==null?void 0:Pe.token);if(!Ne)throw new Error("Login failed - no token returned");Sn(Ne);let Le=Pe==null?void 0:Pe.user;if(Le||(Le=await El("GET",N)),!Le)throw new Error("Login failed - no user info");ht.setUser(Le);const Ue={user:Le,token:Ne};F("success",Ue),M&&M(Ue)}catch(Pe){t(19,R=Pe.message),F("error",{error:Pe.message,type:"login"}),G&&G({error:Pe.message,type:"login"})}finally{t(18,U=!1)}}async function ie(ve){if(ve.preventDefault(),Q!==X){t(19,R="Passwords do not match");return}if($&&!oe){t(19,R="Please accept the terms and conditions");return}t(18,U=!0),t(19,R=null);try{const Pe={username:Y,email:Y,password:Q,...x};await El("POST",O,Pe,{skipAuth:!0});const Ne=await El("POST",q,{username:Y,password:Q},{skipAuth:!0}),Le=(Ne==null?void 0:Ne.access_token)||(Ne==null?void 0:Ne.token);if(!Le)throw new Error("Signup failed - no token returned");Sn(Le);let Ue=Ne==null?void 0:Ne.user;if(Ue||(Ue=await El("GET",N)),!Ue)throw new Error("Signup failed - no user info");ht.setUser(Ue);const lt={user:Ue,token:Le};F("success",lt),M&&M(lt)}catch(Pe){t(19,R=Pe.message),F("error",{error:Pe.message,type:"signup"}),G&&G({error:Pe.message,type:"signup"})}finally{t(18,U=!1)}}async function ue(ve){window.location.href=`${z}/auth/oauth/${ve}`}async function te(){window.location.href=C}function me(){F("passwordReset",{email:I})}const re=ve=>ue(ve),le=()=>ae("login"),Z=()=>ae("signup");function K(){I=this.value,t(20,I)}function ge(){H=this.value,t(21,H)}function we(){Y=this.value,t(22,Y)}function Ge(){Q=this.value,t(23,Q)}function at(){X=this.value,t(24,X)}function qe(ve){x[ve.name]=dt(this),t(16,x),t(15,L),t(15,L)}function Je(ve){x[ve.name]=this.value,t(16,x),t(15,L),t(15,L)}function Ee(ve){x[ve.name]=this.value,t(16,x),t(15,L),t(15,L)}function je(){oe=this.checked,t(25,oe)}return l.$$set=ve=>{"title"in ve&&t(0,o=ve.title),"subtitle"in ve&&t(1,i=ve.subtitle),"logo"in ve&&t(2,u=ve.logo),"showLogo"in ve&&t(3,a=ve.showLogo),"allowSignup"in ve&&t(4,c=ve.allowSignup),"allowPasswordReset"in ve&&t(5,_=ve.allowPasswordReset),"requireEmailVerification"in ve&&t(34,p=ve.requireEmailVerification),"socialProviders"in ve&&t(6,m=ve.socialProviders),"socialOnly"in ve&&t(7,h=ve.socialOnly),"ssoEnabled"in ve&&t(8,v=ve.ssoEnabled),"ssoButtonText"in ve&&t(9,g=ve.ssoButtonText),"ssoProvider"in ve&&t(10,S=ve.ssoProvider),"ssoUrl"in ve&&t(35,C=ve.ssoUrl),"showTerms"in ve&&t(11,$=ve.showTerms),"termsUrl"in ve&&t(12,y=ve.termsUrl),"privacyUrl"in ve&&t(13,D=ve.privacyUrl),"termsText"in ve&&t(14,E=ve.termsText),"signupFields"in ve&&t(15,L=ve.signupFields),"apiBase"in ve&&t(36,z=ve.apiBase),"loginEndpoint"in ve&&t(37,q=ve.loginEndpoint),"registerEndpoint"in ve&&t(38,O=ve.registerEndpoint),"meEndpoint"in ve&&t(39,N=ve.meEndpoint),"onSuccess"in ve&&t(40,M=ve.onSuccess),"onError"in ve&&t(41,G=ve.onError),"$$scope"in ve&&t(55,s=ve.$$scope)},l.$$.update=()=>{l.$$.dirty[0]&98304&&L.forEach(ve=>{ve.name in x||t(16,x[ve.name]=ve.default||"",x)})},[o,i,u,a,c,_,m,h,v,g,S,$,y,D,E,L,x,A,U,R,I,H,Y,Q,X,oe,V,J,ae,W,ie,ue,te,me,p,C,z,q,O,N,M,G,n,re,le,Z,K,ge,we,Ge,at,qe,Je,Ee,je,s]}class Hc extends Ct{constructor(e){super(),$t(this,e,Uc,Bc,wt,{title:0,subtitle:1,logo:2,showLogo:3,allowSignup:4,allowPasswordReset:5,requireEmailVerification:34,socialProviders:6,socialOnly:7,ssoEnabled:8,ssoButtonText:9,ssoProvider:10,ssoUrl:35,showTerms:11,termsUrl:12,privacyUrl:13,termsText:14,signupFields:15,apiBase:36,loginEndpoint:37,registerEndpoint:38,meEndpoint:39,onSuccess:40,onError:41},null,[-1,-1,-1])}}const Rn="theme",ds="dark";function Gc(){return typeof localStorage>"u"?ds:localStorage.getItem(Rn)||ds}function Tn(l){typeof document<"u"&&document.documentElement.setAttribute("data-theme",l)}function Wc(){const l=Gc(),{subscribe:e,set:t}=ll(l);return Tn(l),{subscribe:e,set(n){typeof localStorage<"u"&&localStorage.setItem(Rn,n),Tn(n),t(n)}}}const Au=Wc();function Vc(){Au.update(l=>{const e=l==="dark"?"light":"dark";return typeof localStorage<"u"&&localStorage.setItem(Rn,e),Tn(e),e})}function Jc(l){let e,t;return{c(){e=Nl("svg"),t=Nl("path"),f(t,"d","M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"),f(e,"viewBox","0 0 24 24"),f(e,"fill","none"),f(e,"stroke","currentColor"),f(e,"stroke-width","2"),f(e,"class","svelte-8jsmst")},m(n,s){w(n,e,s),r(e,t)},d(n){n&&k(e)}}}function Kc(l){let e,t,n;return{c(){e=Nl("svg"),t=Nl("circle"),n=Nl("path"),f(t,"cx","12"),f(t,"cy","12"),f(t,"r","5"),f(n,"d","M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"),f(e,"viewBox","0 0 24 24"),f(e,"fill","none"),f(e,"stroke","currentColor"),f(e,"stroke-width","2"),f(e,"class","svelte-8jsmst")},m(s,o){w(s,e,o),r(e,t),r(e,n)},d(s){s&&k(e)}}}function Yc(l){let e,t,n,s;function o(a,c){return a[0]==="dark"?Kc:Jc}let i=o(l),u=i(l);return{c(){e=d("button"),u.c(),f(e,"class","theme-toggle svelte-8jsmst"),f(e,"title",t=l[0]==="dark"?"Switch to light mode":"Switch to dark mode"),f(e,"aria-label","Toggle theme")},m(a,c){w(a,e,c),u.m(e,null),n||(s=ee(e,"click",Vc),n=!0)},p(a,[c]){i!==(i=o(a))&&(u.d(1),u=i(a),u&&(u.c(),u.m(e,null))),c&1&&t!==(t=a[0]==="dark"?"Switch to light mode":"Switch to dark mode")&&f(e,"title",t)},i:be,o:be,d(a){a&&k(e),u.d(),n=!1,s()}}}function Qc(l,e,t){let n;return pt(l,Au,s=>t(0,n=s)),[n]}class Zc extends Ct{constructor(e){super(),$t(this,e,Qc,Yc,wt,{})}}const Xc=l=>({}),ps=l=>({}),xc=l=>({}),ms=l=>({});function vs(l){let e;function t(o,i){return o[1]?t1:e1}let n=t(l),s=n(l);return{c(){s.c(),e=Ie()},m(o,i){s.m(o,i),w(o,e,i)},p(o,i){n===(n=t(o))&&s?s.p(o,i):(s.d(1),s=n(o),s&&(s.c(),s.m(e.parentNode,e)))},d(o){o&&k(e),s.d(o)}}}function e1(l){let e;return{c(){e=d("span"),f(e,"class","brand-dot svelte-x14ysc")},m(t,n){w(t,e,n)},p:be,d(t){t&&k(e)}}}function t1(l){let e,t;return{c(){e=d("img"),nn(e.src,t=l[1])||f(e,"src",t),f(e,"alt",l[0]),f(e,"class","header-logo svelte-x14ysc")},m(n,s){w(n,e,s)},p(n,s){s&2&&!nn(e.src,t=n[1])&&f(e,"src",t),s&1&&f(e,"alt",n[0])},d(n){n&&k(e)}}}function hs(l){let e;return{c(){e=d("span"),e.textContent="MOCK",f(e,"class","mock-badge svelte-x14ysc")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function gs(l){let e,t;return e=new Zc({}),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){j(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function bs(l){let e,t=(l[8].user.email||l[8].user.username)+"",n;return{c(){e=d("span"),n=T(t),f(e,"class","user-email svelte-x14ysc")},m(s,o){w(s,e,o),r(e,n)},p(s,o){o&256&&t!==(t=(s[8].user.email||s[8].user.username)+"")&&B(n,t)},d(s){s&&k(e)}}}function ks(l){let e,t;return e=new Be({props:{variant:"ghost",size:"sm",$$slots:{default:[l1]},$$scope:{ctx:l}}}),e.$on("click",l[9]),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const o={};s&4160&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){j(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function l1(l){let e;return{c(){e=T(l[6])},m(t,n){w(t,e,n)},p(t,n){n&64&&B(e,t[6])},d(t){t&&k(e)}}}function n1(l){let e,t,n,s,o,i,u,a,c,_,p,m,h,v=l[2]&&vs(l);const g=l[11]["after-title"],S=Mt(g,l,l[12],ms),C=l[11].actions,$=Mt(C,l,l[12],ps);let y=l[7]&&hs(),D=l[4]&&gs(),E=l[3]&&l[8].user&&bs(l),L=l[5]&&l[8].token&&ks(l);return{c(){e=d("header"),t=d("div"),v&&v.c(),n=b(),s=d("h1"),o=T(l[0]),i=b(),S&&S.c(),u=b(),a=d("div"),$&&$.c(),c=b(),y&&y.c(),_=b(),D&&D.c(),p=b(),E&&E.c(),m=b(),L&&L.c(),f(s,"class","svelte-x14ysc"),f(t,"class","header-brand svelte-x14ysc"),f(a,"class","header-actions svelte-x14ysc"),f(e,"class","header glass svelte-x14ysc")},m(z,q){w(z,e,q),r(e,t),v&&v.m(t,null),r(t,n),r(t,s),r(s,o),r(t,i),S&&S.m(t,null),r(e,u),r(e,a),$&&$.m(a,null),r(a,c),y&&y.m(a,null),r(a,_),D&&D.m(a,null),r(a,p),E&&E.m(a,null),r(a,m),L&&L.m(a,null),h=!0},p(z,[q]){z[2]?v?v.p(z,q):(v=vs(z),v.c(),v.m(t,n)):v&&(v.d(1),v=null),(!h||q&1)&&B(o,z[0]),S&&S.p&&(!h||q&4096)&&jt(S,g,z,z[12],h?At(g,z[12],q,xc):Ot(z[12]),ms),$&&$.p&&(!h||q&4096)&&jt($,C,z,z[12],h?At(C,z[12],q,Xc):Ot(z[12]),ps),z[7]?y||(y=hs(),y.c(),y.m(a,_)):y&&(y.d(1),y=null),z[4]?D?q&16&&P(D,1):(D=gs(),D.c(),P(D,1),D.m(a,p)):D&&(Se(),j(D,1,1,()=>{D=null}),Te()),z[3]&&z[8].user?E?E.p(z,q):(E=bs(z),E.c(),E.m(a,m)):E&&(E.d(1),E=null),z[5]&&z[8].token?L?(L.p(z,q),q&288&&P(L,1)):(L=ks(z),L.c(),P(L,1),L.m(a,null)):L&&(Se(),j(L,1,1,()=>{L=null}),Te())},i(z){h||(P(S,z),P($,z),P(D),P(L),h=!0)},o(z){j(S,z),j($,z),j(D),j(L),h=!1},d(z){z&&k(e),v&&v.d(),S&&S.d(z),$&&$.d(z),y&&y.d(),D&&D.d(),E&&E.d(),L&&L.d()}}}function s1(l,e,t){var C,$;let n;pt(l,ht,y=>t(8,n=y));let{$$slots:s={},$$scope:o}=e,{title:i="Dashboard"}=e,{logo:u=null}=e,{showLogo:a=!0}=e,{showUser:c=!0}=e,{showThemeToggle:_=!1}=e,{showLogout:p=!0}=e,{logoutText:m="Logout"}=e,{showMockBadge:h=!1}=e;const v=jl();let g=h;try{typeof window<"u"&&(g=h||(($=(C=import.meta)==null?void 0:C.env)==null?void 0:$.VITE_MOCK_API)==="1"||localStorage.getItem("mockApi")==="1")}catch{g=h}function S(){bc(),v("logout")}return l.$$set=y=>{"title"in y&&t(0,i=y.title),"logo"in y&&t(1,u=y.logo),"showLogo"in y&&t(2,a=y.showLogo),"showUser"in y&&t(3,c=y.showUser),"showThemeToggle"in y&&t(4,_=y.showThemeToggle),"showLogout"in y&&t(5,p=y.showLogout),"logoutText"in y&&t(6,m=y.logoutText),"showMockBadge"in y&&t(10,h=y.showMockBadge),"$$scope"in y&&t(12,o=y.$$scope)},[i,u,a,c,_,p,m,g,n,S,h,s,o]}class o1 extends Ct{constructor(e){super(),$t(this,e,s1,n1,wt,{title:0,logo:1,showLogo:2,showUser:3,showThemeToggle:4,showLogout:5,logoutText:6,showMockBadge:10})}}function i1(l){let e,t,n;const s=l[2].default,o=Mt(s,l,l[1],null);return{c(){e=d("span"),o&&o.c(),f(e,"class",t="badge badge-"+l[0]+" svelte-1d0la3i")},m(i,u){w(i,e,u),o&&o.m(e,null),n=!0},p(i,[u]){o&&o.p&&(!n||u&2)&&jt(o,s,i,i[1],n?At(s,i[1],u,null):Ot(i[1]),null),(!n||u&1&&t!==(t="badge badge-"+i[0]+" svelte-1d0la3i"))&&f(e,"class",t)},i(i){n||(P(o,i),n=!0)},o(i){j(o,i),n=!1},d(i){i&&k(e),o&&o.d(i)}}}function r1(l,e,t){let{$$slots:n={},$$scope:s}=e,{variant:o="info"}=e;return l.$$set=i=>{"variant"in i&&t(0,o=i.variant),"$$scope"in i&&t(1,s=i.$$scope)},[o,s,n]}class Xe extends Ct{constructor(e){super(),$t(this,e,r1,i1,wt,{variant:0})}}const a1=l=>({}),ws=l=>({}),u1=l=>({}),$s=l=>({});function Cs(l){let e,t,n,s=l[0]&&ys(l);const o=l[5].header,i=Mt(o,l,l[4],$s);return{c(){e=d("div"),s&&s.c(),t=b(),i&&i.c(),f(e,"class","card-header svelte-1qbuf8h")},m(u,a){w(u,e,a),s&&s.m(e,null),r(e,t),i&&i.m(e,null),n=!0},p(u,a){u[0]?s?s.p(u,a):(s=ys(u),s.c(),s.m(e,t)):s&&(s.d(1),s=null),i&&i.p&&(!n||a&16)&&jt(i,o,u,u[4],n?At(o,u[4],a,u1):Ot(u[4]),$s)},i(u){n||(P(i,u),n=!0)},o(u){j(i,u),n=!1},d(u){u&&k(e),s&&s.d(),i&&i.d(u)}}}function ys(l){let e,t;return{c(){e=d("span"),t=T(l[0]),f(e,"class","card-title svelte-1qbuf8h")},m(n,s){w(n,e,s),r(e,t)},p(n,s){s&1&&B(t,n[0])},d(n){n&&k(e)}}}function Ss(l){let e,t;const n=l[5].footer,s=Mt(n,l,l[4],ws);return{c(){e=d("div"),s&&s.c(),f(e,"class","card-footer svelte-1qbuf8h")},m(o,i){w(o,e,i),s&&s.m(e,null),t=!0},p(o,i){s&&s.p&&(!t||i&16)&&jt(s,n,o,o[4],t?At(n,o[4],i,a1):Ot(o[4]),ws)},i(o){t||(P(s,o),t=!0)},o(o){j(s,o),t=!1},d(o){o&&k(e),s&&s.d(o)}}}function f1(l){let e,t,n,s,o,i=(l[0]||l[3].header)&&Cs(l);const u=l[5].default,a=Mt(u,l,l[4],null);let c=l[3].footer&&Ss(l);return{c(){e=d("div"),i&&i.c(),t=b(),n=d("div"),a&&a.c(),s=b(),c&&c.c(),f(n,"class","card-body svelte-1qbuf8h"),f(e,"class","card svelte-1qbuf8h"),ke(e,"glass",l[1]),ke(e,"no-padding",!l[2])},m(_,p){w(_,e,p),i&&i.m(e,null),r(e,t),r(e,n),a&&a.m(n,null),r(e,s),c&&c.m(e,null),o=!0},p(_,[p]){_[0]||_[3].header?i?(i.p(_,p),p&9&&P(i,1)):(i=Cs(_),i.c(),P(i,1),i.m(e,t)):i&&(Se(),j(i,1,1,()=>{i=null}),Te()),a&&a.p&&(!o||p&16)&&jt(a,u,_,_[4],o?At(u,_[4],p,null):Ot(_[4]),null),_[3].footer?c?(c.p(_,p),p&8&&P(c,1)):(c=Ss(_),c.c(),P(c,1),c.m(e,null)):c&&(Se(),j(c,1,1,()=>{c=null}),Te()),(!o||p&2)&&ke(e,"glass",_[1]),(!o||p&4)&&ke(e,"no-padding",!_[2])},i(_){o||(P(i),P(a,_),P(c),o=!0)},o(_){j(i),j(a,_),j(c),o=!1},d(_){_&&k(e),i&&i.d(),a&&a.d(_),c&&c.d()}}}function c1(l,e,t){let{$$slots:n={},$$scope:s}=e;const o=$u(n);let{title:i=""}=e,{glass:u=!1}=e,{padding:a=!0}=e;return l.$$set=c=>{"title"in c&&t(0,i=c.title),"glass"in c&&t(1,u=c.glass),"padding"in c&&t(2,a=c.padding),"$$scope"in c&&t(4,s=c.$$scope)},[i,u,a,o,s,n]}class ft extends Ct{constructor(e){super(),$t(this,e,c1,f1,wt,{title:0,glass:1,padding:2})}}function ju(l){const e=l-1;return e*e*e+1}function Ts(l,{delay:e=0,duration:t=400,easing:n=gu}={}){const s=+getComputedStyle(l).opacity;return{delay:e,duration:t,easing:n,css:o=>`opacity: ${o*s}`}}function zs(l,{delay:e=0,duration:t=400,easing:n=ju,x:s=0,y:o=0,opacity:i=0}={}){const u=getComputedStyle(l),a=+u.opacity,c=u.transform==="none"?"":u.transform,_=a*(1-i),[p,m]=Fn(s),[h,v]=Fn(o);return{delay:e,duration:t,easing:n,css:(g,S)=>`
			transform: ${c} translate(${(1-g)*p}${m}, ${(1-g)*h}${v});
			opacity: ${a-_*S}`}}function Ds(l,{delay:e=0,duration:t=400,easing:n=ju,start:s=0,opacity:o=0}={}){const i=getComputedStyle(l),u=+i.opacity,a=i.transform==="none"?"":i.transform,c=1-s,_=u*(1-o);return{delay:e,duration:t,easing:n,css:(p,m)=>`
			transform: ${a} scale(${1-c*m});
			opacity: ${u-_*m}
		`}}const _1=l=>({}),Es=l=>({}),d1=l=>({}),qs=l=>({});function Ls(l){let e,t,n,s,o,i,u,a,c,_,p=(l[1]||l[6].header)&&Ps(l);const m=l[9].default,h=Mt(m,l,l[8],null);let v=l[6].footer&&Rs(l);return{c(){e=d("div"),t=d("div"),p&&p.c(),n=b(),s=d("div"),h&&h.c(),o=b(),v&&v.c(),f(s,"class","modal-body svelte-f0wwwf"),f(t,"class","modal svelte-f0wwwf"),qt(t,"max-width",l[2]),f(e,"class","modal-overlay svelte-f0wwwf"),f(e,"role","dialog"),f(e,"aria-modal","true")},m(g,S){w(g,e,S),r(e,t),p&&p.m(t,null),r(t,n),r(t,s),h&&h.m(s,null),r(t,o),v&&v.m(t,null),a=!0,c||(_=ee(e,"click",l[4]),c=!0)},p(g,S){g[1]||g[6].header?p?(p.p(g,S),S&66&&P(p,1)):(p=Ps(g),p.c(),P(p,1),p.m(t,n)):p&&(Se(),j(p,1,1,()=>{p=null}),Te()),h&&h.p&&(!a||S&256)&&jt(h,m,g,g[8],a?At(m,g[8],S,null):Ot(g[8]),null),g[6].footer?v?(v.p(g,S),S&64&&P(v,1)):(v=Rs(g),v.c(),P(v,1),v.m(t,null)):v&&(Se(),j(v,1,1,()=>{v=null}),Te()),(!a||S&4)&&qt(t,"max-width",g[2])},i(g){a||(P(p),P(h,g),P(v),g&&xe(()=>{a&&(i||(i=Ll(t,Ds,{duration:200,start:.95},!0)),i.run(1))}),g&&xe(()=>{a&&(u||(u=Ll(e,Ts,{duration:150},!0)),u.run(1))}),a=!0)},o(g){j(p),j(h,g),j(v),g&&(i||(i=Ll(t,Ds,{duration:200,start:.95},!1)),i.run(0)),g&&(u||(u=Ll(e,Ts,{duration:150},!1)),u.run(0)),a=!1},d(g){g&&k(e),p&&p.d(),h&&h.d(g),v&&v.d(),g&&i&&i.end(),g&&u&&u.end(),c=!1,_()}}}function Ps(l){let e,t,n,s,o,i,u,a=l[1]&&Ns(l);const c=l[9].header,_=Mt(c,l,l[8],qs);return{c(){e=d("div"),a&&a.c(),t=b(),_&&_.c(),n=b(),s=d("button"),s.innerHTML='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-f0wwwf"><path d="M18 6L6 18M6 6l12 12"></path></svg>',f(s,"class","modal-close svelte-f0wwwf"),f(s,"aria-label","Close"),f(e,"class","modal-header svelte-f0wwwf")},m(p,m){w(p,e,m),a&&a.m(e,null),r(e,t),_&&_.m(e,null),r(e,n),r(e,s),o=!0,i||(u=ee(s,"click",l[3]),i=!0)},p(p,m){p[1]?a?a.p(p,m):(a=Ns(p),a.c(),a.m(e,t)):a&&(a.d(1),a=null),_&&_.p&&(!o||m&256)&&jt(_,c,p,p[8],o?At(c,p[8],m,d1):Ot(p[8]),qs)},i(p){o||(P(_,p),o=!0)},o(p){j(_,p),o=!1},d(p){p&&k(e),a&&a.d(),_&&_.d(p),i=!1,u()}}}function Ns(l){let e,t;return{c(){e=d("h3"),t=T(l[1]),f(e,"class","svelte-f0wwwf")},m(n,s){w(n,e,s),r(e,t)},p(n,s){s&2&&B(t,n[1])},d(n){n&&k(e)}}}function Rs(l){let e,t;const n=l[9].footer,s=Mt(n,l,l[8],Es);return{c(){e=d("div"),s&&s.c(),f(e,"class","modal-footer svelte-f0wwwf")},m(o,i){w(o,e,i),s&&s.m(e,null),t=!0},p(o,i){s&&s.p&&(!t||i&256)&&jt(s,n,o,o[8],t?At(n,o[8],i,_1):Ot(o[8]),Es)},i(o){t||(P(s,o),t=!0)},o(o){j(s,o),t=!1},d(o){o&&k(e),s&&s.d(o)}}}function p1(l){let e,t,n,s,o=l[0]&&Ls(l);return{c(){o&&o.c(),e=Ie()},m(i,u){o&&o.m(i,u),w(i,e,u),t=!0,n||(s=ee(window,"keydown",l[5]),n=!0)},p(i,[u]){i[0]?o?(o.p(i,u),u&1&&P(o,1)):(o=Ls(i),o.c(),P(o,1),o.m(e.parentNode,e)):o&&(Se(),j(o,1,1,()=>{o=null}),Te())},i(i){t||(P(o),t=!0)},o(i){j(o),t=!1},d(i){i&&k(e),o&&o.d(i),n=!1,s()}}}function m1(l,e,t){let{$$slots:n={},$$scope:s}=e;const o=$u(n);let{open:i=!1}=e,{title:u=""}=e,{width:a="500px"}=e,{closeOnOverlay:c=!0}=e;const _=jl();function p(){t(0,i=!1),_("close")}function m(v){c&&v.target===v.currentTarget&&p()}function h(v){v.key==="Escape"&&p()}return l.$$set=v=>{"open"in v&&t(0,i=v.open),"title"in v&&t(1,u=v.title),"width"in v&&t(2,a=v.width),"closeOnOverlay"in v&&t(7,c=v.closeOnOverlay),"$$scope"in v&&t(8,s=v.$$scope)},[i,u,a,p,m,h,o,c,s,n]}class ol extends Ct{constructor(e){super(),$t(this,e,m1,p1,wt,{open:0,title:1,width:2,closeOnOverlay:7})}}function Ms(l,e,t){const n=l.slice();return n[6]=e[t],n}function As(l){let e,t=l[6].icon+"",n;return{c(){e=d("span"),n=T(t),f(e,"class","tab-icon svelte-1po08a6")},m(s,o){w(s,e,o),r(e,n)},p(s,o){o&2&&t!==(t=s[6].icon+"")&&B(n,t)},d(s){s&&k(e)}}}function js(l){let e,t,n=l[6].label+"",s,o,i,u,a=l[6].icon&&As(l);function c(){return l[4](l[6])}return{c(){e=d("button"),a&&a.c(),t=b(),s=T(n),o=b(),f(e,"class","tab svelte-1po08a6"),ke(e,"active",l[0]===l[6].id)},m(_,p){w(_,e,p),a&&a.m(e,null),r(e,t),r(e,s),r(e,o),i||(u=ee(e,"click",c),i=!0)},p(_,p){l=_,l[6].icon?a?a.p(l,p):(a=As(l),a.c(),a.m(e,t)):a&&(a.d(1),a=null),p&2&&n!==(n=l[6].label+"")&&B(s,n),p&3&&ke(e,"active",l[0]===l[6].id)},d(_){_&&k(e),a&&a.d(),i=!1,u()}}}function v1(l){let e,t=pe(l[1]),n=[];for(let s=0;s<t.length;s+=1)n[s]=js(Ms(l,t,s));return{c(){e=d("div");for(let s=0;s<n.length;s+=1)n[s].c();f(e,"class","tabs svelte-1po08a6"),ke(e,"scrollable",l[2])},m(s,o){w(s,e,o);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(e,null)},p(s,[o]){if(o&11){t=pe(s[1]);let i;for(i=0;i<t.length;i+=1){const u=Ms(s,t,i);n[i]?n[i].p(u,o):(n[i]=js(u),n[i].c(),n[i].m(e,null))}for(;i<n.length;i+=1)n[i].d(1);n.length=t.length}o&4&&ke(e,"scrollable",s[2])},i:be,o:be,d(s){s&&k(e),Me(n,s)}}}function h1(l,e,t){let{tabs:n=[]}=e,{active:s=""}=e,{scrollable:o=!0}=e;const i=jl();function u(c){t(0,s=c),i("change",c)}const a=c=>u(c.id);return l.$$set=c=>{"tabs"in c&&t(1,n=c.tabs),"active"in c&&t(0,s=c.active),"scrollable"in c&&t(2,o=c.scrollable)},[s,n,o,u,a]}class g1 extends Ct{constructor(e){super(),$t(this,e,h1,v1,wt,{tabs:1,active:0,scrollable:2})}}function b1(){const{subscribe:l,update:e}=ll([]);let t=0;function n(o,i="info",u=3e3){const a={id:++t,message:o,type:i};return e(c=>[...c,a]),u>0&&setTimeout(()=>s(a.id),u),a.id}function s(o){e(i=>i.filter(u=>u.id!==o))}return{subscribe:l,success:(o,i)=>n(o,"success",i),error:(o,i)=>n(o,"error",i??5e3),warning:(o,i)=>n(o,"warning",i),info:(o,i)=>n(o,"info",i),add:n,remove:s}}const $e=b1();function Os(l,e,t){const n=l.slice();return n[2]=e[t],n}function Is(l,e){let t,n,s=e[2].message+"",o,i,u,a,c,_,p,m,h;function v(){return e[1](e[2])}return{key:l,first:null,c(){t=d("div"),n=d("span"),o=T(s),i=b(),u=d("button"),u.textContent="×",a=b(),f(n,"class","toast-message svelte-1l5lsfn"),f(u,"class","toast-close svelte-1l5lsfn"),f(t,"class",c="toast toast-"+e[2].type+" svelte-1l5lsfn"),this.first=t},m(g,S){w(g,t,S),r(t,n),r(n,o),r(t,i),r(t,u),r(t,a),p=!0,m||(h=ee(u,"click",v),m=!0)},p(g,S){e=g,(!p||S&1)&&s!==(s=e[2].message+"")&&B(o,s),(!p||S&1&&c!==(c="toast toast-"+e[2].type+" svelte-1l5lsfn"))&&f(t,"class",c)},i(g){p||(g&&xe(()=>{p&&(_||(_=Ll(t,zs,{x:100,duration:200},!0)),_.run(1))}),p=!0)},o(g){g&&(_||(_=Ll(t,zs,{x:100,duration:200},!1)),_.run(0)),p=!1},d(g){g&&k(t),g&&_&&_.end(),m=!1,h()}}}function k1(l){let e,t=[],n=new Map,s,o=pe(l[0]);const i=u=>u[2].id;for(let u=0;u<o.length;u+=1){let a=Os(l,o,u),c=i(a);n.set(c,t[u]=Is(c,a))}return{c(){e=d("div");for(let u=0;u<t.length;u+=1)t[u].c();f(e,"class","toast-container svelte-1l5lsfn")},m(u,a){w(u,e,a);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null);s=!0},p(u,[a]){a&1&&(o=pe(u[0]),Se(),t=qu(t,a,i,1,u,o,n,e,Eu,Is,null,Os),Te())},i(u){if(!s){for(let a=0;a<o.length;a+=1)P(t[a]);s=!0}},o(u){for(let a=0;a<t.length;a+=1)j(t[a]);s=!1},d(u){u&&k(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function w1(l,e,t){let n;return pt(l,$e,o=>t(0,n=o)),[n,o=>$e.remove(o.id)]}class $1 extends Ct{constructor(e){super(),$t(this,e,w1,k1,wt,{})}}const C1={internal:{allowSignup:!1,allowPasswordReset:!1,socialProviders:[],ssoEnabled:!1,showTerms:!1,subtitle:"Sign in to continue"}};hc(["vergnetp@yahoo.fr"]);function Ft(){return Nu("do_token_local")}function y1(l){Ru("do_token_local",l,30)}function zn(){return Nu("cf_token_local")}function S1(l){Ru("cf_token_local",l,30)}const Ou="/api/v1",Iu=["/infra/servers","/infra/snapshots","/infra/setup","/infra/deploy","/infra/registry","/infra/agent","/infra/architecture","/infra/fleet","/infra/projects","/infra/containers","/infra/services","/infra/deployments"];function Fu(l){return!l||typeof l!="string"?!1:l.split(".").length===3}function Bu(l,e={}){const t=Al(ht),n={"Content-Type":"application/json"},s=l.startsWith("/auth/login")||l.startsWith("/auth/register");if(t.token&&t.token.trim()!==""&&!s&&!e.skipAuth){if(!Fu(t.token))return console.error("Invalid JWT format detected - token may be corrupted"),ht.logout(),{error:"Session corrupted - please login again",url:null,headers:null};n.Authorization=`Bearer ${t.token}`}let o=Ou+l;if(!e.skipDoToken&&(l.startsWith("/infra/")||Iu.some(u=>l.startsWith(u)))){const u=Ft();if(!u)return{error:"DO token not set",url:null,headers:null};const a=o.includes("?")?"&":"?";o+=`${a}do_token=${encodeURIComponent(u)}`}return{url:o,headers:n,error:null}}async function Mn(l){if(l.status===401){let e="Authentication failed";try{const n=await l.json();e=n.detail||n.error||n.message||e}catch{}throw Al(ht).token&&(ht.logout(),e="Session expired - please login again"),new Error(e)}if(!l.ok){const e=await l.json().catch(()=>({detail:"Request failed"}));throw new Error(e.detail||e.error||e.message||"Request failed")}}async function He(l,e,t=null,n={}){const{url:s,headers:o,error:i}=Bu(e,n);if(i)return console.debug(`Skipping ${e} - ${i}`),null;const u={method:l,headers:o};t&&(u.body=JSON.stringify(t));const a=await fetch(s,u);if(await Mn(a),a.status===204)return null;const c=await a.json();return c&&c.success===!0&&c.data!==void 0?c.data:c}async function tn(l,e,t=null,n,s={}){const{url:o,headers:i,error:u}=Bu(e,s);if(u)throw new Error(u);const a={method:l,headers:i};t&&(a.body=JSON.stringify(t));const c=await fetch(o,a);await Mn(c);const _=c.body.getReader(),p=new TextDecoder;let m="";for(;;){const{done:h,value:v}=await _.read();if(h)break;m+=p.decode(v,{stream:!0});const g=m.split(`
`);m=g.pop()||"";for(const S of g)if(S.startsWith("data: "))try{const C=JSON.parse(S.slice(6));n(C)}catch{}}}async function T1(l,e,t,n={}){const s=Al(ht);if(s.token&&!Fu(s.token))throw console.error("Invalid JWT format detected - token may be corrupted"),ht.logout(),new Error("Session corrupted - please login again");let o=Ou+l;if(!n.skipDoToken&&Iu.some(m=>l.startsWith(m))){const m=Ft();if(!m)throw new Error("DO token not set");const h=o.includes("?")?"&":"?";o+=`${h}do_token=${encodeURIComponent(m)}`}const u={};s.token&&(u.Authorization=`Bearer ${s.token}`);const a=await fetch(o,{method:"POST",headers:u,body:e});await Mn(a);const c=a.body.getReader(),_=new TextDecoder;let p="";for(;;){const{done:m,value:h}=await c.read();if(m)break;p+=_.decode(h,{stream:!0});const v=p.split(`
`);p=v.pop()||"";for(const g of v)if(g.startsWith("data: "))try{const S=JSON.parse(g.slice(6));t(S)}catch{}}}function z1(l,e,t={}){const{refreshInterval:n=0,revalidateOnFocus:s=!0,revalidateOnMount:o=!0,dedupingInterval:i=2e3,initialData:u=null}=t,a=ll({data:u,error:null,loading:!1,lastFetched:null});let c=0,_=null,p=null,m=0;async function h(y=!1){const D=Date.now();return!y&&_&&D-c<i||(c=D,a.update(E=>{var L;return{...E,loading:E.data===null||((L=E.data)==null?void 0:L.length)===0}}),_=(async()=>{try{const E=await e();return a.set({data:E,error:null,loading:!1,lastFetched:new Date}),E}catch(E){throw a.update(L=>({...L,error:E.message||"Fetch failed",loading:!1})),E}finally{_=null}})()),_}function v(){document.visibilityState==="visible"&&s&&h()}function g(){n>0&&!p&&(p=setInterval(()=>h(),n))}function S(){p&&(clearInterval(p),p=null)}const{subscribe:C}=a;function $(y){m++,m===1&&(s&&typeof document<"u"&&document.addEventListener("visibilitychange",v),o&&h(),g());const D=C(y);return()=>{D(),m--,m===0&&(typeof document<"u"&&document.removeEventListener("visibilitychange",v),S())}}return{subscribe:$,refresh:()=>h(!0),mutate:y=>a.update(D=>({...D,data:y})),get:()=>Al(a)}}function dn(l,e={}){const{transform:t=s=>s,...n}=e;return z1(l,async()=>{const s=await He("GET",l);return t(s)},n)}function D1(l,e={}){const{transform:t=a=>a,...n}=e,s=ll({data:null,error:null,loading:!1,lastFetched:null});let o=null,i=null;async function u(a){const c=l(a);if(!c){s.set({data:null,error:null,loading:!1,lastFetched:null});return}return i&&JSON.stringify(a)===JSON.stringify(o)||(o=a,s.update(_=>({..._,loading:!0})),i=(async()=>{try{const _=await He("GET",c),p=t(_);return s.set({data:p,error:null,loading:!1,lastFetched:new Date}),p}catch(_){throw s.update(p=>({...p,error:_.message||"Fetch failed",loading:!1})),_}finally{i=null}})()),i}return{subscribe:s.subscribe,fetch:u,refresh:()=>o&&u(o),clear:()=>{o=null,s.set({data:null,error:null,loading:!1,lastFetched:null})}}}const Fs=ll("infra");function E1(){const{subscribe:l,set:e}=ll(null);return typeof window<"u"&&e(Ft()),{subscribe:l,refresh(){e(Ft())},set(t){e(t)}}}const An=E1(),ql=ll({project:"",env:"",server:"",container:"",range:"30d",tail:!1}),Xt=dn("/infra/servers",{transform:l=>(l==null?void 0:l.servers)||l||[],refreshInterval:6e4,revalidateOnFocus:!0,initialData:[]}),jn=dn("/infra/projects",{transform:l=>(l==null?void 0:l.projects)||[],refreshInterval:12e4,initialData:[]}),pn=dn("/infra/snapshots",{transform:l=>(l==null?void 0:l.snapshots)||[],refreshInterval:6e4,initialData:[]}),bl=dn("/infra/deployments/history",{transform:l=>(l==null?void 0:l.deployments)||[],refreshInterval:3e4,initialData:[]}),Dn=D1(l=>l!=null&&l.server?`/infra/agent/${l.server}/containers`:null,{transform:l=>{const e=(l==null?void 0:l.containers)||l||[];return(Array.isArray(e)?e:[]).map(t=>({id:t.ID||t.Id||t.id,name:t.Names||t.Name||t.name||"unknown",image:t.Image||t.image,status:t.Status||t.State||t.status,state:t.State||t.state}))}}),mn=ml(Xt,l=>(l==null?void 0:l.data)||[]),On=ml(jn,l=>(l==null?void 0:l.data)||[]),q1=ml(pn,l=>(l==null?void 0:l.data)||[]),Uu=ml(bl,l=>(l==null?void 0:l.data)||[]),L1=ml(Dn,l=>(l==null?void 0:l.data)||[]),P1="2.6.1";function N1(){const l=typeof localStorage<"u"&&localStorage.getItem("theme")||"dark",{subscribe:e,set:t}=ll(l);return typeof document<"u"&&document.documentElement.setAttribute("data-theme",l),{subscribe:e,set(n){typeof localStorage<"u"&&localStorage.setItem("theme",n),typeof document<"u"&&document.documentElement.setAttribute("data-theme",n),t(n)}}}const $n=N1();function Bs(l,e,t){const n=l.slice();return n[20]=e[t],n}function Us(l,e,t){var o,i,u;const n=l.slice();n[23]=e[t];const s=n[23].ip||((u=(i=(o=n[23].networks)==null?void 0:o.v4)==null?void 0:i[0])==null?void 0:u.ip_address);return n[24]=s,n}function Hs(l,e,t){const n=l.slice();return n[27]=e[t],n}function Gs(l,e,t){const n=l.slice();return n[30]=e[t],n}function Ws(l){let e,t=l[30]+"",n,s;return{c(){e=d("option"),n=T(t),e.__value=s=l[30],ne(e,e.__value)},m(o,i){w(o,e,i),r(e,n)},p(o,i){i[0]&16&&t!==(t=o[30]+"")&&B(n,t),i[0]&16&&s!==(s=o[30])&&(e.__value=s,ne(e,e.__value))},d(o){o&&k(e)}}}function Vs(l){let e,t=l[27]+"",n,s;return{c(){e=d("option"),n=T(t),e.__value=s=l[27],ne(e,e.__value)},m(o,i){w(o,e,i),r(e,n)},p(o,i){i[0]&8&&t!==(t=o[27]+"")&&B(n,t),i[0]&8&&s!==(s=o[27])&&(e.__value=s,ne(e,e.__value))},d(o){o&&k(e)}}}function Js(l){let e,t=(l[23].name||"unnamed")+"",n,s,o=l[24]+"",i,u,a;return{c(){e=d("option"),n=T(t),s=T(" ("),i=T(o),u=T(")"),e.__value=a=l[23].id,ne(e,e.__value)},m(c,_){w(c,e,_),r(e,n),r(e,s),r(e,i),r(e,u)},p(c,_){_[0]&32&&t!==(t=(c[23].name||"unnamed")+"")&&B(n,t),_[0]&32&&o!==(o=c[24]+"")&&B(i,o),_[0]&32&&a!==(a=c[23].id)&&(e.__value=a,ne(e,e.__value))},d(c){c&&k(e)}}}function Ks(l){let e,t=l[24]&&l[23].id&&Js(l);return{c(){t&&t.c(),e=Ie()},m(n,s){t&&t.m(n,s),w(n,e,s)},p(n,s){n[24]&&n[23].id?t?t.p(n,s):(t=Js(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(n){n&&k(e),t&&t.d(n)}}}function Ys(l){let e,t,n,s,o,i,u,a,c=pe(l[6]||[]),_=[];for(let p=0;p<c.length;p+=1)_[p]=Qs(Bs(l,c,p));return{c(){e=d("div"),t=d("label"),t.textContent="Container:",n=b(),s=d("select"),o=d("option"),o.textContent="(All)";for(let p=0;p<_.length;p+=1)_[p].c();f(t,"class","svelte-1wvrz0m"),o.__value="",ne(o,o.__value),f(s,"class","svelte-1wvrz0m"),f(e,"class","scope-field svelte-1wvrz0m")},m(p,m){w(p,e,m),r(e,t),r(e,n),r(e,s),r(s,o);for(let h=0;h<_.length;h+=1)_[h]&&_[h].m(s,null);Re(s,l[2].container),u||(a=ee(s,"change",l[16]),u=!0)},p(p,m){if(m[0]&64){c=pe(p[6]||[]);let h;for(h=0;h<c.length;h+=1){const v=Bs(p,c,h);_[h]?_[h].p(v,m):(_[h]=Qs(v),_[h].c(),_[h].m(s,null))}for(;h<_.length;h+=1)_[h].d(1);_.length=c.length}m[0]&20&&i!==(i=p[2].container)&&Re(s,p[2].container)},d(p){p&&k(e),Me(_,p),u=!1,a()}}}function Qs(l){let e,t=l[20].name+"",n,s;return{c(){e=d("option"),n=T(t),e.__value=s=l[20].name,ne(e,e.__value)},m(o,i){w(o,e,i),r(e,n)},p(o,i){i[0]&64&&t!==(t=o[20].name+"")&&B(n,t),i[0]&64&&s!==(s=o[20].name)&&(e.__value=s,ne(e,e.__value))},d(o){o&&k(e)}}}function Zs(l){let e,t,n,s,o,i;return{c(){e=d("label"),t=d("input"),s=T(`
      Tail`),f(t,"type","checkbox"),t.checked=n=l[2].tail,f(t,"class","svelte-1wvrz0m"),f(e,"class","tail-toggle svelte-1wvrz0m")},m(u,a){w(u,e,a),r(e,t),r(e,s),o||(i=ee(t,"change",l[18]),o=!0)},p(u,a){a[0]&20&&n!==(n=u[2].tail)&&(t.checked=n)},d(u){u&&k(e),o=!1,i()}}}function R1(l){let e,t,n,s,o,i,u,a,c,_,p,m,h,v,g,S,C,$,y,D,E,L,z,q,O,N,M,G,F,A,U,R,I,H,Y,Q,X,oe,x,V,J,ae,W=pe(l[4]),ie=[];for(let K=0;K<W.length;K+=1)ie[K]=Ws(Gs(l,W,K));let ue=pe(l[3]),te=[];for(let K=0;K<ue.length;K+=1)te[K]=Vs(Hs(l,ue,K));let me=pe(l[5]||[]),re=[];for(let K=0;K<me.length;K+=1)re[K]=Ks(Us(l,me,K));let le=l[1]&&l[2].server&&Ys(l),Z=l[0]&&Zs(l);return{c(){e=d("div"),t=d("div"),n=d("div"),n.innerHTML='<span class="brand-dot svelte-1wvrz0m"></span> <span>cc</span>',s=b(),o=d("div"),i=d("label"),i.textContent="Project:",u=b(),a=d("select"),c=d("option"),c.textContent="All";for(let K=0;K<ie.length;K+=1)ie[K].c();p=b(),m=d("div"),h=d("label"),h.textContent="Env:",v=b(),g=d("select"),S=d("option"),S.textContent="All";for(let K=0;K<te.length;K+=1)te[K].c();$=b(),y=d("div"),D=d("label"),D.textContent="Server:",E=b(),L=d("select"),z=d("option"),z.textContent="(Fleet)";for(let K=0;K<re.length;K+=1)re[K].c();O=b(),le&&le.c(),N=b(),M=d("div"),G=d("label"),G.textContent="Last",F=b(),A=d("select"),U=d("option"),U.textContent="15m",R=d("option"),R.textContent="1h",I=d("option"),I.textContent="6h",H=d("option"),H.textContent="24h",Y=d("option"),Y.textContent="7d",Q=d("option"),Q.textContent="30d",oe=b(),x=d("button"),x.innerHTML='<svg viewBox="0 0 24 24" fill="none" class="svelte-1wvrz0m"><path d="M20 12a8 8 0 1 1-2.34-5.66" stroke="currentColor" stroke-width="2" stroke-linecap="round"></path><path d="M20 4v6h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg>',V=b(),Z&&Z.c(),f(n,"class","scope-brand svelte-1wvrz0m"),f(i,"class","svelte-1wvrz0m"),c.__value="",ne(c,c.__value),f(a,"class","svelte-1wvrz0m"),f(o,"class","scope-field svelte-1wvrz0m"),f(h,"class","svelte-1wvrz0m"),S.__value="",ne(S,S.__value),f(g,"class","svelte-1wvrz0m"),f(m,"class","scope-field svelte-1wvrz0m"),f(D,"class","svelte-1wvrz0m"),z.__value="",ne(z,z.__value),f(L,"class","svelte-1wvrz0m"),f(y,"class","scope-field svelte-1wvrz0m"),f(G,"class","svelte-1wvrz0m"),U.__value="15m",ne(U,U.__value),R.__value="1h",ne(R,R.__value),I.__value="6h",ne(I,I.__value),H.__value="24h",ne(H,H.__value),Y.__value="7d",ne(Y,Y.__value),Q.__value="30d",ne(Q,Q.__value),f(A,"class","svelte-1wvrz0m"),f(M,"class","scope-field svelte-1wvrz0m"),f(x,"class","iconbtn svelte-1wvrz0m"),f(x,"title","Refresh"),f(t,"class","scope-bar-inner svelte-1wvrz0m"),f(e,"class","scope-bar glass svelte-1wvrz0m")},m(K,ge){w(K,e,ge),r(e,t),r(t,n),r(t,s),r(t,o),r(o,i),r(o,u),r(o,a),r(a,c);for(let we=0;we<ie.length;we+=1)ie[we]&&ie[we].m(a,null);Re(a,l[2].project),r(t,p),r(t,m),r(m,h),r(m,v),r(m,g),r(g,S);for(let we=0;we<te.length;we+=1)te[we]&&te[we].m(g,null);Re(g,l[2].env),r(t,$),r(t,y),r(y,D),r(y,E),r(y,L),r(L,z);for(let we=0;we<re.length;we+=1)re[we]&&re[we].m(L,null);Re(L,l[2].server),r(t,O),le&&le.m(t,null),r(t,N),r(t,M),r(M,G),r(M,F),r(M,A),r(A,U),r(A,R),r(A,I),r(A,H),r(A,Y),r(A,Q),Re(A,l[2].range),r(t,oe),r(t,x),r(e,V),Z&&Z.m(e,null),J||(ae=[ee(a,"change",l[13]),ee(g,"change",l[14]),ee(L,"change",l[15]),ee(A,"change",l[17]),ee(x,"click",l[10])],J=!0)},p(K,ge){if(ge[0]&16){W=pe(K[4]);let we;for(we=0;we<W.length;we+=1){const Ge=Gs(K,W,we);ie[we]?ie[we].p(Ge,ge):(ie[we]=Ws(Ge),ie[we].c(),ie[we].m(a,null))}for(;we<ie.length;we+=1)ie[we].d(1);ie.length=W.length}if(ge[0]&20&&_!==(_=K[2].project)&&Re(a,K[2].project),ge[0]&8){ue=pe(K[3]);let we;for(we=0;we<ue.length;we+=1){const Ge=Hs(K,ue,we);te[we]?te[we].p(Ge,ge):(te[we]=Vs(Ge),te[we].c(),te[we].m(g,null))}for(;we<te.length;we+=1)te[we].d(1);te.length=ue.length}if(ge[0]&20&&C!==(C=K[2].env)&&Re(g,K[2].env),ge[0]&32){me=pe(K[5]||[]);let we;for(we=0;we<me.length;we+=1){const Ge=Us(K,me,we);re[we]?re[we].p(Ge,ge):(re[we]=Ks(Ge),re[we].c(),re[we].m(L,null))}for(;we<re.length;we+=1)re[we].d(1);re.length=me.length}ge[0]&20&&q!==(q=K[2].server)&&Re(L,K[2].server),K[1]&&K[2].server?le?le.p(K,ge):(le=Ys(K),le.c(),le.m(t,N)):le&&(le.d(1),le=null),ge[0]&20&&X!==(X=K[2].range)&&Re(A,K[2].range),K[0]?Z?Z.p(K,ge):(Z=Zs(K),Z.c(),Z.m(e,null)):Z&&(Z.d(1),Z=null)},i:be,o:be,d(K){K&&k(e),Me(ie,K),Me(te,K),Me(re,K),le&&le.d(),Z&&Z.d(),J=!1,Ve(ae)}}}function M1(l,e,t){let n,s,o,i,u,a,c;pt(l,ql,z=>t(2,o=z)),pt(l,Uu,z=>t(11,i=z)),pt(l,On,z=>t(12,u=z)),pt(l,mn,z=>t(5,a=z)),pt(l,L1,z=>t(6,c=z));let{showTail:_=!1}=e,{showContainer:p=!1}=e;const m=jl();function h(z,q){ql.update(O=>({...O,[z]:q})),m("change")}function v(z){ql.update(q=>({...q,server:z,container:""})),m("change")}function g(z){ql.update(q=>({...q,tail:z})),m("change")}function S(){m("refresh")}const C=z=>h("project",z.target.value),$=z=>h("env",z.target.value),y=z=>v(z.target.value),D=z=>h("container",z.target.value),E=z=>h("range",z.target.value),L=z=>g(z.target.checked);return l.$$set=z=>{"showTail"in z&&t(0,_=z.showTail),"showContainer"in z&&t(1,p=z.showContainer)},l.$$.update=()=>{l.$$.dirty[0]&6144&&t(4,n=[...new Set([...u||[],...(i||[]).map(z=>z.project).filter(Boolean)])].sort()),l.$$.dirty[0]&2048&&t(3,s=[...new Set(["prod","staging","uat","test","dev",...(i||[]).map(z=>z.environment).filter(Boolean)])].sort()),l.$$.dirty[0]&4&&(o.server?Dn.fetch({server:o.server}):(Dn.clear(),o.container&&ql.update(z=>({...z,container:""}))))},[_,p,o,s,n,a,c,h,v,g,S,i,u,C,$,y,D,E,L]}class A1 extends Ct{constructor(e){super(),$t(this,e,M1,R1,wt,{showTail:0,showContainer:1},null,[-1,-1])}}function Xs(l,e,t){const n=l.slice();n[29]=e[t];const s=V1(n[29]);n[30]=s;const o=ln(n[30]);n[31]=o;const i=J1(n[29]);n[32]=i;const u=n[8][n[30]];return n[33]=u,n}function xs(l){let e;return{c(){e=d("span"),e.textContent="⚠",f(e,"class","health-warn svelte-3mbtsx"),f(e,"title","High resource usage")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function eo(l){let e;return{c(){e=d("span"),e.textContent="⚠️",f(e,"class","agent-warn svelte-3mbtsx"),f(e,"title","Agent outdated")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function j1(l){let e;return{c(){e=d("span"),e.textContent="offline",f(e,"class","metric-inline offline svelte-3mbtsx")},m(t,n){w(t,e,n)},p:be,d(t){t&&k(e)}}}function O1(l){let e,t,n,s,o;return{c(){e=d("span"),t=b(),n=d("span"),s=b(),o=d("span"),f(e,"class","metric-skeleton svelte-3mbtsx"),f(n,"class","metric-skeleton svelte-3mbtsx"),f(o,"class","metric-skeleton svelte-3mbtsx")},m(i,u){w(i,e,u),w(i,t,u),w(i,n,u),w(i,s,u),w(i,o,u)},p:be,d(i){i&&(k(e),k(t),k(n),k(s),k(o))}}}function I1(l){let e,t,n=l[3].cpu.toFixed(0)+"",s,o,i,u,a,c,_=l[3].mem.toFixed(0)+"",p,m,h,v,g,S,C=l[3].disk.toFixed(0)+"",$,y,D,E,L,z=(l[3].netIn||l[3].netOut)&&to(l);return{c(){e=d("span"),t=T("CPU "),s=T(n),o=T("%"),u=b(),a=d("span"),c=T("MEM "),p=T(_),m=T("%"),v=b(),g=d("span"),S=T("DISK "),$=T(C),y=T("%"),E=b(),z&&z.c(),L=Ie(),f(e,"class",i="metric-inline "+zl(l[3].cpu)+" svelte-3mbtsx"),f(a,"class",h="metric-inline "+zl(l[3].mem)+" svelte-3mbtsx"),f(g,"class",D="metric-inline "+zl(l[3].disk)+" svelte-3mbtsx")},m(q,O){w(q,e,O),r(e,t),r(e,s),r(e,o),w(q,u,O),w(q,a,O),r(a,c),r(a,p),r(a,m),w(q,v,O),w(q,g,O),r(g,S),r(g,$),r(g,y),w(q,E,O),z&&z.m(q,O),w(q,L,O)},p(q,O){O[0]&8&&n!==(n=q[3].cpu.toFixed(0)+"")&&B(s,n),O[0]&8&&i!==(i="metric-inline "+zl(q[3].cpu)+" svelte-3mbtsx")&&f(e,"class",i),O[0]&8&&_!==(_=q[3].mem.toFixed(0)+"")&&B(p,_),O[0]&8&&h!==(h="metric-inline "+zl(q[3].mem)+" svelte-3mbtsx")&&f(a,"class",h),O[0]&8&&C!==(C=q[3].disk.toFixed(0)+"")&&B($,C),O[0]&8&&D!==(D="metric-inline "+zl(q[3].disk)+" svelte-3mbtsx")&&f(g,"class",D),q[3].netIn||q[3].netOut?z?z.p(q,O):(z=to(q),z.c(),z.m(L.parentNode,L)):z&&(z.d(1),z=null)},d(q){q&&(k(e),k(u),k(a),k(v),k(g),k(E),k(L)),z&&z.d(q)}}}function to(l){let e,t,n=Zl(l[3].netIn)+"",s,o,i=Zl(l[3].netOut)+"",u;return{c(){e=d("span"),t=T("↓"),s=T(n),o=T(" ↑"),u=T(i),f(e,"class","metric-inline net svelte-3mbtsx")},m(a,c){w(a,e,c),r(e,t),r(e,s),r(e,o),r(e,u)},p(a,c){c[0]&8&&n!==(n=Zl(a[3].netIn)+"")&&B(s,n),c[0]&8&&i!==(i=Zl(a[3].netOut)+"")&&B(u,i)},d(a){a&&k(e)}}}function lo(l){let e,t;return e=new Xe({props:{variant:"info",$$slots:{default:[F1]},$$scope:{ctx:l}}}),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const o={};s[0]&1|s[1]&32&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){j(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function F1(l){let e=l[0].project+"",t;return{c(){t=T(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&1&&e!==(e=n[0].project+"")&&B(t,e)},d(n){n&&k(t)}}}function B1(l){let e,t=pe(l[6]),n=[];for(let s=0;s<t.length;s+=1)n[s]=no(Xs(l,t,s));return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=Ie()},m(s,o){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(s,o);w(s,e,o)},p(s,o){if(o[0]&459072){t=pe(s[6]);let i;for(i=0;i<t.length;i+=1){const u=Xs(s,t,i);n[i]?n[i].p(u,o):(n[i]=no(u),n[i].c(),n[i].m(e.parentNode,e))}for(;i<n.length;i+=1)n[i].d(1);n.length=t.length}},d(s){s&&k(e),Me(n,s)}}}function U1(l){let e;return{c(){e=d("span"),e.textContent="No containers",f(e,"class","empty-text svelte-3mbtsx")},m(t,n){w(t,e,n)},p:be,d(t){t&&k(e)}}}function H1(l){let e;return{c(){e=d("span"),e.textContent="Loading...",f(e,"class","loading-text svelte-3mbtsx")},m(t,n){w(t,e,n)},p:be,d(t){t&&k(e)}}}function no(l){let e,t,n,s,o,i=l[31]+"",u,a,c,_,p=l[33]==="restart"?"...":"↻",m,h,v,g,S,C,$,y,D,E,L,z;function q(){return l[23](l[30])}function O(){return l[24](l[30])}function N(){return l[25](l[30])}return{c(){e=d("div"),t=d("span"),s=b(),o=d("span"),u=T(i),a=b(),c=d("div"),_=d("button"),m=T(p),v=b(),g=d("button"),g.textContent="📋",S=b(),C=d("button"),$=T("×"),D=b(),f(t,"class",n="container-status "+so(l[32])+" svelte-3mbtsx"),f(o,"class","container-name svelte-3mbtsx"),f(_,"class","pill-btn svelte-3mbtsx"),f(_,"title","Restart"),_.disabled=h=l[33],f(g,"class","pill-btn svelte-3mbtsx"),f(g,"title","Logs"),f(C,"class","pill-btn danger svelte-3mbtsx"),f(C,"title","Remove"),C.disabled=y=l[33],f(c,"class","container-actions svelte-3mbtsx"),f(e,"class","container-pill svelte-3mbtsx"),f(e,"title",E=l[30]),ke(e,"busy",l[33])},m(M,G){w(M,e,G),r(e,t),r(e,s),r(e,o),r(o,u),r(e,a),r(e,c),r(c,_),r(_,m),r(c,v),r(c,g),r(c,S),r(c,C),r(C,$),r(e,D),L||(z=[ee(_,"click",q),ee(g,"click",O),ee(C,"click",N)],L=!0)},p(M,G){l=M,G[0]&64&&n!==(n="container-status "+so(l[32])+" svelte-3mbtsx")&&f(t,"class",n),G[0]&64&&i!==(i=l[31]+"")&&B(u,i),G[0]&320&&p!==(p=l[33]==="restart"?"...":"↻")&&B(m,p),G[0]&320&&h!==(h=l[33])&&(_.disabled=h),G[0]&320&&y!==(y=l[33])&&(C.disabled=y),G[0]&64&&E!==(E=l[30])&&f(e,"title",E),G[0]&320&&ke(e,"busy",l[33])},d(M){M&&k(e),L=!1,Ve(z)}}}function G1(l){var le;let e,t,n,s,o,i,u,a=(l[0].name||"Unnamed")+"",c,_,p,m,h,v,g,S=(((le=l[0].region)==null?void 0:le.slug)||l[0].region||"")+"",C,$,y,D,E,L,z,q,O,N,M,G,F,A=l[7]||l[9]?"...":"↻",U,R,I,H,Y,Q,X,oe,x,V=l[11]&&xs(),J=l[12]&&eo();function ae(Z,K){if(Z[4]&&Z[3])return I1;if(Z[4]&&Z[9])return O1;if(!Z[4])return j1}let W=ae(l),ie=W&&W(l),ue=l[1]&&l[0].project&&lo(l);function te(Z,K){return Z[7]&&Z[6].length===0?H1:Z[6].length===0&&Z[2]?U1:B1}let me=te(l),re=me(l);return{c(){e=d("div"),t=d("div"),n=d("div"),s=d("span"),i=b(),u=d("span"),c=T(a),_=b(),V&&V.c(),p=b(),m=d("code"),h=T(l[13]),v=b(),g=d("span"),C=T(S),$=b(),J&&J.c(),y=b(),D=d("div"),ie&&ie.c(),E=b(),L=d("span"),z=T("£"),q=T(l[10]),O=T("/mo"),N=b(),M=d("div"),ue&&ue.c(),G=b(),F=d("button"),U=T(A),I=b(),H=d("button"),H.textContent="🗑️",Y=b(),Q=d("div"),re.c(),f(s,"class",o="status-dot "+l[14](l[5])+" svelte-3mbtsx"),f(u,"class","server-name svelte-3mbtsx"),f(m,"class","server-ip svelte-3mbtsx"),f(g,"class","server-meta svelte-3mbtsx"),f(n,"class","server-info svelte-3mbtsx"),f(L,"class","metric-inline cost svelte-3mbtsx"),f(D,"class","server-metrics-inline svelte-3mbtsx"),f(F,"class","icon-btn svelte-3mbtsx"),f(F,"title","Refresh"),F.disabled=R=l[7]||l[9],f(H,"class","icon-btn danger svelte-3mbtsx"),f(H,"title","Destroy"),f(M,"class","server-actions svelte-3mbtsx"),f(t,"class","server-header svelte-3mbtsx"),f(Q,"class","containers svelte-3mbtsx"),f(e,"class","server-card svelte-3mbtsx")},m(Z,K){w(Z,e,K),r(e,t),r(t,n),r(n,s),r(n,i),r(n,u),r(u,c),r(n,_),V&&V.m(n,null),r(n,p),r(n,m),r(m,h),r(n,v),r(n,g),r(g,C),r(n,$),J&&J.m(n,null),r(t,y),r(t,D),ie&&ie.m(D,null),r(D,E),r(D,L),r(L,z),r(L,q),r(L,O),r(t,N),r(t,M),ue&&ue.m(M,null),r(M,G),r(M,F),r(F,U),r(M,I),r(M,H),r(e,Y),r(e,Q),re.m(Q,null),X=!0,oe||(x=[ee(F,"click",l[19]),ee(H,"click",l[22])],oe=!0)},p(Z,K){var ge;(!X||K[0]&32&&o!==(o="status-dot "+Z[14](Z[5])+" svelte-3mbtsx"))&&f(s,"class",o),(!X||K[0]&1)&&a!==(a=(Z[0].name||"Unnamed")+"")&&B(c,a),Z[11]?V||(V=xs(),V.c(),V.m(n,p)):V&&(V.d(1),V=null),(!X||K[0]&8192)&&B(h,Z[13]),(!X||K[0]&1)&&S!==(S=(((ge=Z[0].region)==null?void 0:ge.slug)||Z[0].region||"")+"")&&B(C,S),Z[12]?J||(J=eo(),J.c(),J.m(n,null)):J&&(J.d(1),J=null),W===(W=ae(Z))&&ie?ie.p(Z,K):(ie&&ie.d(1),ie=W&&W(Z),ie&&(ie.c(),ie.m(D,E))),(!X||K[0]&1024)&&B(q,Z[10]),Z[1]&&Z[0].project?ue?(ue.p(Z,K),K[0]&3&&P(ue,1)):(ue=lo(Z),ue.c(),P(ue,1),ue.m(M,G)):ue&&(Se(),j(ue,1,1,()=>{ue=null}),Te()),(!X||K[0]&640)&&A!==(A=Z[7]||Z[9]?"...":"↻")&&B(U,A),(!X||K[0]&640&&R!==(R=Z[7]||Z[9]))&&(F.disabled=R),me===(me=te(Z))&&re?re.p(Z,K):(re.d(1),re=me(Z),re&&(re.c(),re.m(Q,null)))},i(Z){X||(P(ue),X=!0)},o(Z){j(ue),X=!1},d(Z){Z&&k(e),V&&V.d(),J&&J.d(),ie&&ie.d(),ue&&ue.d(),re.d(),oe=!1,Ve(x)}}}function W1(l){return l.includes("4gb")?24:l.includes("2gb")?12:l.includes("1gb")?6:l.includes("512mb")?4:6}function so(l){if(!l)return"gray";const e=l.toLowerCase();return e==="running"?"green":e==="exited"||e==="stopped"?"yellow":e==="restarting"?"blue":"red"}function zl(l){return l>=90?"danger":l>=70?"warning":"ok"}function V1(l){return l.Names&&typeof l.Names=="string"?l.Names.replace(/^\//,""):Array.isArray(l.Names)&&l.Names.length>0?l.Names[0].replace(/^\//,""):l.Name?l.Name.replace(/^\//,""):l.name?l.name:l.ID?l.ID.substring(0,12):l.Id?l.Id.substring(0,12):"unknown"}function J1(l){return l.State||l.state||l.Status||"unknown"}function ln(l){if(!l)return"unknown";const e=l.split("-");return e.length>=3&&e[0].length<=10?e.slice(2).join("-"):l}function Zl(l){return l?l<1024?`${l}B`:l<1048576?`${(l/1024).toFixed(0)}K`:l<1073741824?`${(l/1048576).toFixed(1)}M`:`${(l/1073741824).toFixed(1)}G`:"0"}function K1(l,e,t){let n,s,o,i,u,a,c,_;pt(l,An,R=>t(21,_=R));let{server:p}=e,{showProject:m=!1}=e;const h=jl();let v=[],g=!1,S=!1,C={},$=null,y=!1;function D(R){switch(R){case"active":case"online":return"green";case"new":case"starting":return"blue";case"off":case"stopped":return"yellow";default:return"red"}}function E(R){h(R,{server:p})}async function L(){if(!(!o||!_||!p.id)){t(7,g=!0);try{const R=await He("GET",`/infra/agent/${p.id}/containers?do_token=${_}`);t(6,v=R.containers||[]),t(2,S=!0)}catch(R){console.error("Failed to load containers:",R),t(6,v=[])}finally{t(7,g=!1)}}}async function z(){var R,I,H,Y,Q;if(!(!o||!_||!p.id)){t(9,y=!0);try{const X=await He("GET",`/infra/agent/${p.id}/metrics?do_token=${_}`);t(3,$={cpu:((R=X.system)==null?void 0:R.load_1m)||0,mem:((I=X.system)==null?void 0:I.mem_percent)||0,disk:((H=X.system)==null?void 0:H.disk_percent)||0,netIn:((Y=X.system)==null?void 0:Y.net_in_bytes)||0,netOut:((Q=X.system)==null?void 0:Q.net_out_bytes)||0})}catch(X){console.error("Failed to load metrics:",X)}finally{t(9,y=!1)}}}async function q(R){if(!(!_||!p.id)){t(8,C[R]="restart",C);try{await He("POST",`/infra/agent/${p.id}/containers/${R}/restart?do_token=${_}`),$e.success(`Restarted ${ln(R)}`),await L()}catch(I){$e.error(`Failed: ${I.message}`)}finally{t(8,C[R]=null,C)}}}async function O(R){if(!(!_||!p.id)&&confirm(`Remove "${ln(R)}"?`)){t(8,C[R]="remove",C);try{await He("POST",`/infra/agent/${p.id}/containers/${R}/stop?do_token=${_}`).catch(()=>{}),await He("POST",`/infra/agent/${p.id}/containers/${R}/remove?do_token=${_}`),$e.success(`Removed ${ln(R)}`),await L()}catch(I){$e.error(`Failed: ${I.message}`)}finally{t(8,C[R]=null,C)}}}function N(R){h("viewLogs",{server:p,containerName:R})}async function M(){await Promise.all([L(),z()])}const G=()=>E("destroy"),F=R=>q(R),A=R=>N(R),U=R=>O(R);return l.$$set=R=>{"server"in R&&t(0,p=R.server),"showProject"in R&&t(1,m=R.showProject)},l.$$.update=()=>{var R,I,H;l.$$.dirty[0]&1&&t(13,n=p.ip||((H=(I=(R=p.networks)==null?void 0:R.v4)==null?void 0:I[0])==null?void 0:H.ip_address)||"N/A"),l.$$.dirty[0]&1&&t(5,s=p.status||"unknown"),l.$$.dirty[0]&32&&t(4,o=s==="active"||s==="online"),l.$$.dirty[0]&1&&t(20,i=p.agent_version),l.$$.dirty[0]&1048576&&t(12,u=i&&i!==P1),l.$$.dirty[0]&8&&t(11,a=$&&($.cpu>80||$.mem>80||$.disk>80)),l.$$.dirty[0]&1&&t(10,c=W1(p.size_slug||p.size||"")),l.$$.dirty[0]&2097172&&o&&!S&&_&&(L(),z())},[p,m,S,$,o,s,v,g,C,y,c,a,u,n,D,E,q,O,N,M,i,_,G,F,A,U]}class Y1 extends Ct{constructor(e){super(),$t(this,e,K1,G1,wt,{server:0,showProject:1},null,[-1,-1])}}function oo(l,e,t){const n=l.slice();return n[92]=e[t],n}function io(l,e,t){const n=l.slice();return n[95]=e[t],n}function ro(l,e,t){const n=l.slice();return n[92]=e[t],n}function ao(l,e,t){const n=l.slice();return n[100]=e[t],n}function uo(l,e,t){const n=l.slice();return n[103]=e[t],n}function fo(l,e,t){const n=l.slice();return n[106]=e[t],n}function co(l,e,t){const n=l.slice();return n[106]=e[t],n}function _o(l,e,t){const n=l.slice();return n[111]=e[t],n}function po(l,e,t){const n=l.slice();return n[114]=e[t],n}function mo(l,e,t){const n=l.slice();return n[117]=e[t],n}function vo(l){let e,t=l[117]+"",n,s;return{c(){e=d("option"),n=T(t),e.__value=s=l[117],ne(e,e.__value)},m(o,i){w(o,e,i),r(e,n)},p(o,i){i[1]&8&&t!==(t=o[117]+"")&&B(n,t),i[1]&8&&s!==(s=o[117])&&(e.__value=s,ne(e,e.__value))},d(o){o&&k(e)}}}function ho(l){let e,t=l[114]+"",n,s;return{c(){e=d("option"),n=T(t),e.__value=s=l[114],ne(e,e.__value)},m(o,i){w(o,e,i),r(e,n)},p(o,i){i[1]&4&&t!==(t=o[114]+"")&&B(n,t),i[1]&4&&s!==(s=o[114])&&(e.__value=s,ne(e,e.__value))},d(o){o&&k(e)}}}function go(l){let e,t,n,s;const o=[X1,Z1,Q1],i=[];function u(a,c){return a[29]?0:a[32].length?2:1}return t=u(l),n=i[t]=o[t](l),{c(){e=d("div"),n.c(),f(e,"class","section-content svelte-kvdz4s")},m(a,c){w(a,e,c),i[t].m(e,null),s=!0},p(a,c){let _=t;t=u(a),t===_?i[t].p(a,c):(Se(),j(i[_],1,1,()=>{i[_]=null}),Te(),n=i[t],n?n.p(a,c):(n=i[t]=o[t](a),n.c()),P(n,1),n.m(e,null))},i(a){s||(P(n),s=!0)},o(a){j(n),s=!1},d(a){a&&k(e),i[t].d()}}}function Q1(l){let e=[],t=new Map,n,s,o=pe(l[32]);const i=u=>u[111].id;for(let u=0;u<o.length;u+=1){let a=_o(l,o,u),c=i(a);t.set(c,e[u]=bo(c,a))}return{c(){for(let u=0;u<e.length;u+=1)e[u].c();n=Ie()},m(u,a){for(let c=0;c<e.length;c+=1)e[c]&&e[c].m(u,a);w(u,n,a),s=!0},p(u,a){a[1]&6146&&(o=pe(u[32]),Se(),e=qu(e,a,i,1,u,o,t,n.parentNode,Eu,bo,n,_o),Te())},i(u){if(!s){for(let a=0;a<o.length;a+=1)P(e[a]);s=!0}},o(u){for(let a=0;a<e.length;a+=1)j(e[a]);s=!1},d(u){u&&k(n);for(let a=0;a<e.length;a+=1)e[a].d(u)}}}function Z1(l){let e;function t(o,i){return o[1]||o[2]?e_:x1}let n=t(l),s=n(l);return{c(){e=d("div"),s.c(),f(e,"class","empty-msg svelte-kvdz4s")},m(o,i){w(o,e,i),s.m(e,null)},p(o,i){n!==(n=t(o))&&(s.d(1),s=n(o),s&&(s.c(),s.m(e,null)))},i:be,o:be,d(o){o&&k(e),s.d()}}}function X1(l){let e;return{c(){e=d("div"),e.innerHTML='<div class="skeleton-card svelte-kvdz4s"></div> <div class="skeleton-card svelte-kvdz4s"></div>',f(e,"class","loading-skeleton svelte-kvdz4s")},m(t,n){w(t,e,n)},p:be,i:be,o:be,d(t){t&&k(e)}}}function bo(l,e){let t,n,s;return n=new Y1({props:{server:e[111]}}),n.$on("destroy",e[42]),n.$on("viewLogs",e[43]),{key:l,first:null,c(){t=Ie(),_e(n.$$.fragment),this.first=t},m(o,i){w(o,t,i),fe(n,o,i),s=!0},p(o,i){e=o;const u={};i[1]&2&&(u.server=e[111]),n.$set(u)},i(o){s||(P(n.$$.fragment,o),s=!0)},o(o){j(n.$$.fragment,o),s=!1},d(o){o&&k(t),ce(n,o)}}}function x1(l){let e;return{c(){e=T('No servers. Click "+ Add" to provision.')},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function e_(l){let e;return{c(){e=T("No servers match filters")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function ko(l){let e,t,n,s,o,i,u,a;const c=[n_,l_,t_],_=[];function p(g,S){return g[20]===null?0:g[20].exists?1:2}o=p(l),i=_[o]=c[o](l);function m(g,S){return g[5]?a_:g[4].length?i_:r_}let h=m(l),v=h(l);return{c(){e=d("div"),t=d("div"),n=d("span"),n.textContent="Base Snapshot:",s=b(),i.c(),u=b(),v.c(),f(n,"class","base-label svelte-kvdz4s"),f(t,"class","base-snapshot-row svelte-kvdz4s"),f(e,"class","section-content svelte-kvdz4s")},m(g,S){w(g,e,S),r(e,t),r(t,n),r(t,s),_[o].m(t,null),r(e,u),v.m(e,null),a=!0},p(g,S){let C=o;o=p(g),o===C?_[o].p(g,S):(Se(),j(_[C],1,1,()=>{_[C]=null}),Te(),i=_[o],i?i.p(g,S):(i=_[o]=c[o](g),i.c()),P(i,1),i.m(t,null)),h===(h=m(g))&&v?v.p(g,S):(v.d(1),v=h(g),v&&(v.c(),v.m(e,null)))},i(g){a||(P(i),a=!0)},o(g){j(i),a=!1},d(g){g&&k(e),_[o].d(),v.d()}}}function t_(l){let e,t,n,s;return e=new Xe({props:{variant:"warning",$$slots:{default:[s_]},$$scope:{ctx:l}}}),{c(){_e(e.$$.fragment),t=b(),n=d("span"),n.textContent='Use "+ Build" to create',f(n,"class","base-hint svelte-kvdz4s")},m(o,i){fe(e,o,i),w(o,t,i),w(o,n,i),s=!0},p(o,i){const u={};i[3]&134217728&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){s||(P(e.$$.fragment,o),s=!0)},o(o){j(e.$$.fragment,o),s=!1},d(o){o&&(k(t),k(n)),ce(e,o)}}}function l_(l){let e,t;return e=new Xe({props:{variant:"success",$$slots:{default:[o_]},$$scope:{ctx:l}}}),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const o={};s[0]&1048576|s[3]&134217728&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){j(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function n_(l){let e;return{c(){e=d("span"),e.textContent="checking...",f(e,"class","base-status checking svelte-kvdz4s")},m(t,n){w(t,e,n)},p:be,i:be,o:be,d(t){t&&k(e)}}}function s_(l){let e;return{c(){e=T("Not found")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function o_(l){let e,t=l[20].name+"",n;return{c(){e=T("✓ "),n=T(t)},m(s,o){w(s,e,o),w(s,n,o)},p(s,o){o[0]&1048576&&t!==(t=s[20].name+"")&&B(n,t)},d(s){s&&(k(e),k(n))}}}function i_(l){let e,t=pe(l[4]),n=[];for(let s=0;s<t.length;s+=1)n[s]=wo(co(l,t,s));return{c(){e=d("div");for(let s=0;s<n.length;s+=1)n[s].c();f(e,"class","snapshots-grid svelte-kvdz4s")},m(s,o){w(s,e,o);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(e,null)},p(s,o){if(o[0]&16|o[1]&256){t=pe(s[4]);let i;for(i=0;i<t.length;i+=1){const u=co(s,t,i);n[i]?n[i].p(u,o):(n[i]=wo(u),n[i].c(),n[i].m(e,null))}for(;i<n.length;i+=1)n[i].d(1);n.length=t.length}},d(s){s&&k(e),Me(n,s)}}}function r_(l){let e;return{c(){e=d("div"),e.textContent="No custom snapshots",f(e,"class","empty-msg svelte-kvdz4s")},m(t,n){w(t,e,n)},p:be,d(t){t&&k(e)}}}function a_(l){let e;return{c(){e=d("div"),e.textContent="Loading...",f(e,"class","empty-msg svelte-kvdz4s")},m(t,n){w(t,e,n)},p:be,d(t){t&&k(e)}}}function wo(l){let e,t,n=l[106].name+"",s,o,i,u=Mo(l[106].size_gigabytes*1024*1024*1024)+"",a,c,_=Ao(l[106].created_at)+"",p,m,h,v,g,S;function C(){return l[62](l[106])}return{c(){e=d("div"),t=d("span"),s=T(n),o=b(),i=d("span"),a=T(u),c=T(" • "),p=T(_),m=b(),h=d("button"),h.textContent="×",v=b(),f(t,"class","snap-name svelte-kvdz4s"),f(i,"class","snap-meta svelte-kvdz4s"),f(h,"class","pill-del svelte-kvdz4s"),f(h,"title","Delete"),f(e,"class","snapshot-pill svelte-kvdz4s")},m($,y){w($,e,y),r(e,t),r(t,s),r(e,o),r(e,i),r(i,a),r(i,c),r(i,p),r(e,m),r(e,h),r(e,v),g||(S=ee(h,"click",C),g=!0)},p($,y){l=$,y[0]&16&&n!==(n=l[106].name+"")&&B(s,n),y[0]&16&&u!==(u=Mo(l[106].size_gigabytes*1024*1024*1024)+"")&&B(a,u),y[0]&16&&_!==(_=Ao(l[106].created_at)+"")&&B(p,_)},d($){$&&k(e),g=!1,S()}}}function $o(l){let e,t=l[106].name+"",n,s;return{c(){e=d("option"),n=T(t),e.__value=s=l[106].id,ne(e,e.__value)},m(o,i){w(o,e,i),r(e,n)},p(o,i){i[0]&16&&t!==(t=o[106].name+"")&&B(n,t),i[0]&16&&s!==(s=o[106].id)&&(e.__value=s,ne(e,e.__value))},d(o){o&&k(e)}}}function Co(l){let e;return{c(){e=d("option"),e.textContent="No base snapshot - create one first",e.__value="",ne(e,e.__value)},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function yo(l){let e,t=l[103].label+"",n;return{c(){e=d("option"),n=T(t),e.__value=l[103].value,ne(e,e.__value)},m(s,o){w(s,e,o),r(e,n)},p:be,d(s){s&&k(e)}}}function So(l){let e,t=(l[100].description||l[100].slug)+"",n,s;return{c(){e=d("option"),n=T(t),e.__value=s=l[100].slug,ne(e,e.__value)},m(o,i){w(o,e,i),r(e,n)},p(o,i){i[0]&268435456&&t!==(t=(o[100].description||o[100].slug)+"")&&B(n,t),i[0]&268435456&&s!==(s=o[100].slug)&&(e.__value=s,ne(e,e.__value))},d(o){o&&k(e)}}}function To(l){let e,t,n,s,o,i=pe(l[9]),u=[];for(let c=0;c<i.length;c+=1)u[c]=zo(ro(l,i,c));let a=l[10]&&Do();return{c(){e=d("div"),t=d("label"),t.textContent="📋 Progress",n=b(),s=d("div");for(let c=0;c<u.length;c+=1)u[c].c();o=b(),a&&a.c(),f(t,"class","svelte-kvdz4s"),f(s,"class","operation-logs svelte-kvdz4s"),f(e,"class","operation-logs-section svelte-kvdz4s")},m(c,_){w(c,e,_),r(e,t),r(e,n),r(e,s);for(let p=0;p<u.length;p+=1)u[p]&&u[p].m(s,null);r(s,o),a&&a.m(s,null)},p(c,_){if(_[0]&512){i=pe(c[9]);let p;for(p=0;p<i.length;p+=1){const m=ro(c,i,p);u[p]?u[p].p(m,_):(u[p]=zo(m),u[p].c(),u[p].m(s,o))}for(;p<u.length;p+=1)u[p].d(1);u.length=i.length}c[10]?a||(a=Do(),a.c(),a.m(s,null)):a&&(a.d(1),a=null)},d(c){c&&k(e),Me(u,c),a&&a.d()}}}function zo(l){let e,t=l[92].message+"",n,s;return{c(){e=d("div"),n=T(t),f(e,"class",s="log-entry log-"+l[92].type+" svelte-kvdz4s")},m(o,i){w(o,e,i),r(e,n)},p(o,i){i[0]&512&&t!==(t=o[92].message+"")&&B(n,t),i[0]&512&&s!==(s="log-entry log-"+o[92].type+" svelte-kvdz4s")&&f(e,"class",s)},d(o){o&&k(e)}}}function Do(l){let e;return{c(){e=d("div"),e.innerHTML='<span class="spinner svelte-kvdz4s">⏳</span> Provisioning...',f(e,"class","log-entry log-info svelte-kvdz4s")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function u_(l){let e,t,n,s,o,i,u=l[4].filter(Oo).length===0,a,c,_,p,m,h,v,g,S,C,$,y,D,E,L=pe(l[4].filter(Io)),z=[];for(let A=0;A<L.length;A+=1)z[A]=$o(fo(l,L,A));let q=u&&Co(),O=pe(l[37]),N=[];for(let A=0;A<O.length;A+=1)N[A]=yo(uo(l,O,A));let M=pe(l[28]),G=[];for(let A=0;A<M.length;A+=1)G[A]=So(ao(l,M,A));let F=(l[9].length>0||l[10])&&To(l);return{c(){e=d("div"),t=d("div"),n=d("label"),n.textContent="Snapshot",s=b(),o=d("select");for(let A=0;A<z.length;A+=1)z[A].c();i=Ie(),q&&q.c(),a=b(),c=d("div"),_=d("label"),_.textContent="Region",p=b(),m=d("select");for(let A=0;A<N.length;A+=1)N[A].c();h=b(),v=d("div"),g=d("label"),g.textContent="Size",S=b(),C=d("select");for(let A=0;A<G.length;A+=1)G[A].c();$=b(),F&&F.c(),y=Ie(),f(n,"class","svelte-kvdz4s"),o.disabled=l[10],f(o,"class","svelte-kvdz4s"),l[27].snapshot_id===void 0&&xe(()=>l[64].call(o)),f(t,"class","form-group full svelte-kvdz4s"),f(_,"class","svelte-kvdz4s"),m.disabled=l[10],f(m,"class","svelte-kvdz4s"),l[27].region===void 0&&xe(()=>l[65].call(m)),f(c,"class","form-group svelte-kvdz4s"),f(g,"class","svelte-kvdz4s"),C.disabled=l[10],f(C,"class","svelte-kvdz4s"),l[27].size===void 0&&xe(()=>l[66].call(C)),f(v,"class","form-group svelte-kvdz4s"),f(e,"class","form-grid svelte-kvdz4s")},m(A,U){w(A,e,U),r(e,t),r(t,n),r(t,s),r(t,o);for(let R=0;R<z.length;R+=1)z[R]&&z[R].m(o,null);r(o,i),q&&q.m(o,null),Re(o,l[27].snapshot_id,!0),r(e,a),r(e,c),r(c,_),r(c,p),r(c,m);for(let R=0;R<N.length;R+=1)N[R]&&N[R].m(m,null);Re(m,l[27].region,!0),r(e,h),r(e,v),r(v,g),r(v,S),r(v,C);for(let R=0;R<G.length;R+=1)G[R]&&G[R].m(C,null);Re(C,l[27].size,!0),w(A,$,U),F&&F.m(A,U),w(A,y,U),D||(E=[ee(o,"change",l[64]),ee(m,"change",l[65]),ee(C,"change",l[66])],D=!0)},p(A,U){if(U[0]&16){L=pe(A[4].filter(Io));let R;for(R=0;R<L.length;R+=1){const I=fo(A,L,R);z[R]?z[R].p(I,U):(z[R]=$o(I),z[R].c(),z[R].m(o,i))}for(;R<z.length;R+=1)z[R].d(1);z.length=L.length}if(U[0]&16&&(u=A[4].filter(Oo).length===0),u?q||(q=Co(),q.c(),q.m(o,null)):q&&(q.d(1),q=null),U[0]&1024&&(o.disabled=A[10]),U[0]&134217744&&Re(o,A[27].snapshot_id),U[1]&64){O=pe(A[37]);let R;for(R=0;R<O.length;R+=1){const I=uo(A,O,R);N[R]?N[R].p(I,U):(N[R]=yo(I),N[R].c(),N[R].m(m,null))}for(;R<N.length;R+=1)N[R].d(1);N.length=O.length}if(U[0]&1024&&(m.disabled=A[10]),U[0]&134217744&&Re(m,A[27].region),U[0]&268435456){M=pe(A[28]);let R;for(R=0;R<M.length;R+=1){const I=ao(A,M,R);G[R]?G[R].p(I,U):(G[R]=So(I),G[R].c(),G[R].m(C,null))}for(;R<G.length;R+=1)G[R].d(1);G.length=M.length}U[0]&1024&&(C.disabled=A[10]),U[0]&134217744&&Re(C,A[27].size),A[9].length>0||A[10]?F?F.p(A,U):(F=To(A),F.c(),F.m(y.parentNode,y)):F&&(F.d(1),F=null)},d(A){A&&(k(e),k($),k(y)),Me(z,A),q&&q.d(),Me(N,A),Me(G,A),F&&F.d(A),D=!1,Ve(E)}}}function f_(l){let e=l[9].length>0?"Close":"Cancel",t;return{c(){t=T(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&512&&e!==(e=n[9].length>0?"Close":"Cancel")&&B(t,e)},d(n){n&&k(t)}}}function c_(l){let e;return{c(){e=T("🚀 Provision")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function __(l){let e;return{c(){e=T("⏳ Provisioning...")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function d_(l){let e;function t(o,i){return o[10]?__:c_}let n=t(l),s=n(l);return{c(){s.c(),e=Ie()},m(o,i){s.m(o,i),w(o,e,i)},p(o,i){n!==(n=t(o))&&(s.d(1),s=n(o),s&&(s.c(),s.m(e.parentNode,e)))},d(o){o&&k(e),s.d(o)}}}function p_(l){let e,t,n,s,o;return t=new Be({props:{variant:"ghost",$$slots:{default:[f_]},$$scope:{ctx:l}}}),t.$on("click",l[63]),s=new Be({props:{variant:"primary",disabled:l[10]||!l[27].snapshot_id,$$slots:{default:[d_]},$$scope:{ctx:l}}}),s.$on("click",l[41]),{c(){e=d("div"),_e(t.$$.fragment),n=b(),_e(s.$$.fragment),f(e,"slot","footer")},m(i,u){w(i,e,u),fe(t,e,null),r(e,n),fe(s,e,null),o=!0},p(i,u){const a={};u[0]&512|u[3]&134217728&&(a.$$scope={dirty:u,ctx:i}),t.$set(a);const c={};u[0]&134218752&&(c.disabled=i[10]||!i[27].snapshot_id),u[0]&1024|u[3]&134217728&&(c.$$scope={dirty:u,ctx:i}),s.$set(c)},i(i){o||(P(t.$$.fragment,i),P(s.$$.fragment,i),o=!0)},o(i){j(t.$$.fragment,i),j(s.$$.fragment,i),o=!1},d(i){i&&k(e),ce(t),ce(s)}}}function m_(l){let e=l[23]?"...":"↻",t;return{c(){t=T(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&8388608&&e!==(e=n[23]?"...":"↻")&&B(t,e)},d(n){n&&k(t)}}}function v_(l){let e,t,n,s,o,i,u,a,c,_,p,m,h,v,g,S,C,$,y,D,E=(l[30]||"No logs")+"",L,z,q,O;return $=new Be({props:{variant:"ghost",size:"sm",disabled:l[23],$$slots:{default:[m_]},$$scope:{ctx:l}}}),$.$on("click",l[44]),{c(){e=d("div"),t=d("div"),n=d("input"),s=b(),o=d("div"),i=d("label"),i.textContent="Lines:",u=b(),a=d("select"),c=d("option"),c.textContent="100",_=d("option"),_.textContent="200",p=d("option"),p.textContent="500",m=d("option"),m.textContent="1000",h=b(),v=d("label"),g=d("input"),S=T(`
      Auto-refresh`),C=b(),_e($.$$.fragment),y=b(),D=d("pre"),L=T(E),f(n,"type","text"),f(n,"placeholder","Search logs..."),f(n,"class","svelte-kvdz4s"),f(t,"class","logs-search svelte-kvdz4s"),f(i,"class","svelte-kvdz4s"),c.__value=100,ne(c,c.__value),_.__value=200,ne(_,_.__value),p.__value=500,ne(p,p.__value),m.__value=1e3,ne(m,m.__value),f(a,"class","svelte-kvdz4s"),l[24]===void 0&&xe(()=>l[71].call(a)),f(o,"class","logs-tail svelte-kvdz4s"),f(g,"type","checkbox"),f(g,"class","svelte-kvdz4s"),f(v,"class","logs-auto svelte-kvdz4s"),f(e,"class","logs-toolbar svelte-kvdz4s"),f(D,"class","logs-content large svelte-kvdz4s")},m(N,M){w(N,e,M),r(e,t),r(t,n),ne(n,l[6]),r(e,s),r(e,o),r(o,i),r(o,u),r(o,a),r(a,c),r(a,_),r(a,p),r(a,m),Re(a,l[24],!0),r(e,h),r(e,v),r(v,g),g.checked=l[25],r(v,S),r(e,C),fe($,e,null),w(N,y,M),w(N,D,M),r(D,L),z=!0,q||(O=[ee(n,"input",l[70]),ee(a,"change",l[71]),ee(a,"change",l[44]),ee(g,"change",l[72]),ee(g,"change",l[45])],q=!0)},p(N,M){M[0]&64&&n.value!==N[6]&&ne(n,N[6]),M[0]&16777216&&Re(a,N[24]),M[0]&33554432&&(g.checked=N[25]);const G={};M[0]&8388608&&(G.disabled=N[23]),M[0]&8388608|M[3]&134217728&&(G.$$scope={dirty:M,ctx:N}),$.$set(G),(!z||M[0]&1073741824)&&E!==(E=(N[30]||"No logs")+"")&&B(L,E)},i(N){z||(P($.$$.fragment,N),z=!0)},o(N){j($.$$.fragment,N),z=!1},d(N){N&&(k(e),k(y),k(D)),ce($),q=!1,Ve(O)}}}function h_(l){let e;return{c(){e=T("Close")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function g_(l){var c;let e,t,n=(((c=l[30])==null?void 0:c.split(`
`).length)||0)+"",s,o,i,u,a;return u=new Be({props:{variant:"ghost",$$slots:{default:[h_]},$$scope:{ctx:l}}}),u.$on("click",l[69]),{c(){e=d("div"),t=d("span"),s=T(n),o=T(" lines"),i=b(),_e(u.$$.fragment),f(t,"class","logs-count svelte-kvdz4s"),f(e,"slot","footer")},m(_,p){w(_,e,p),r(e,t),r(t,s),r(t,o),r(e,i),fe(u,e,null),a=!0},p(_,p){var h;(!a||p[0]&1073741824)&&n!==(n=(((h=_[30])==null?void 0:h.split(`
`).length)||0)+"")&&B(s,n);const m={};p[3]&134217728&&(m.$$scope={dirty:p,ctx:_}),u.$set(m)},i(_){a||(P(u.$$.fragment,_),a=!0)},o(_){j(u.$$.fragment,_),a=!1},d(_){_&&k(e),ce(u)}}}function b_(l){let e,t,n,s,o,i,u,a,c,_,p,m,h,v,g,S,C,$,y,D,E,L,z,q,O,N,M,G,F=pe(l[35]),A=[];for(let U=0;U<F.length;U+=1)A[U]=Eo(io(l,F,U));return{c(){e=d("form"),t=d("div"),n=d("label"),n.textContent="Snapshot Name *",s=b(),o=d("input"),i=b(),u=d("div"),a=d("label"),a.textContent="Base Image",c=b(),_=d("select");for(let U=0;U<A.length;U+=1)A[U].c();p=b(),m=d("div"),h=d("label"),h.textContent="Pre-install",v=b(),g=d("div"),S=d("label"),C=d("input"),$=T(" Docker"),y=b(),D=d("label"),E=d("input"),L=T(" Nginx"),z=b(),q=d("label"),O=d("input"),N=T(" Certbot"),f(n,"for","snap-name"),f(n,"class","svelte-kvdz4s"),f(o,"id","snap-name"),f(o,"type","text"),f(o,"placeholder","my-custom-snapshot"),o.disabled=l[13],f(o,"class","svelte-kvdz4s"),f(t,"class","form-group svelte-kvdz4s"),f(a,"for","base-image"),f(a,"class","svelte-kvdz4s"),f(_,"id","base-image"),_.disabled=l[13],f(_,"class","svelte-kvdz4s"),l[16]===void 0&&xe(()=>l[78].call(_)),f(u,"class","form-group svelte-kvdz4s"),f(h,"class","svelte-kvdz4s"),f(C,"type","checkbox"),C.disabled=l[13],f(C,"class","svelte-kvdz4s"),f(S,"class","checkbox-item svelte-kvdz4s"),f(E,"type","checkbox"),E.disabled=l[13],f(E,"class","svelte-kvdz4s"),f(D,"class","checkbox-item svelte-kvdz4s"),f(O,"type","checkbox"),O.disabled=l[13],f(O,"class","svelte-kvdz4s"),f(q,"class","checkbox-item svelte-kvdz4s"),f(g,"class","checkbox-list svelte-kvdz4s"),f(m,"class","form-group svelte-kvdz4s")},m(U,R){w(U,e,R),r(e,t),r(t,n),r(t,s),r(t,o),ne(o,l[15]),r(e,i),r(e,u),r(u,a),r(u,c),r(u,_);for(let I=0;I<A.length;I+=1)A[I]&&A[I].m(_,null);Re(_,l[16],!0),r(e,p),r(e,m),r(m,h),r(m,v),r(m,g),r(g,S),r(S,C),C.checked=l[17],r(S,$),r(g,y),r(g,D),r(D,E),E.checked=l[18],r(D,L),r(g,z),r(g,q),r(q,O),O.checked=l[19],r(q,N),M||(G=[ee(o,"input",l[77]),ee(_,"change",l[78]),ee(C,"change",l[79]),ee(E,"change",l[80]),ee(O,"change",l[81]),ee(e,"submit",Xf(l[40]))],M=!0)},p(U,R){if(R[0]&8192&&(o.disabled=U[13]),R[0]&32768&&o.value!==U[15]&&ne(o,U[15]),R[1]&16){F=pe(U[35]);let I;for(I=0;I<F.length;I+=1){const H=io(U,F,I);A[I]?A[I].p(H,R):(A[I]=Eo(H),A[I].c(),A[I].m(_,null))}for(;I<A.length;I+=1)A[I].d(1);A.length=F.length}R[0]&8192&&(_.disabled=U[13]),R[0]&65536|R[1]&16&&Re(_,U[16]),R[0]&8192&&(C.disabled=U[13]),R[0]&131072&&(C.checked=U[17]),R[0]&8192&&(E.disabled=U[13]),R[0]&262144&&(E.checked=U[18]),R[0]&8192&&(O.disabled=U[13]),R[0]&524288&&(O.checked=U[19])},i:be,o:be,d(U){U&&k(e),Me(A,U),M=!1,Ve(G)}}}function k_(l){var i;let e,t,n,s,o=((i=l[20])==null?void 0:i.exists)&&qo(l);return{c(){e=d("div"),t=d("p"),t.textContent="Creates the default base snapshot with Docker, Nginx, Certbot pre-installed. Required for provisioning new servers.",n=b(),o&&o.c(),f(t,"class","svelte-kvdz4s"),f(e,"class","snap-type-info svelte-kvdz4s")},m(u,a){w(u,e,a),r(e,t),r(e,n),o&&o.m(e,null),s=!0},p(u,a){var c;(c=u[20])!=null&&c.exists?o?(o.p(u,a),a[0]&1048576&&P(o,1)):(o=qo(u),o.c(),P(o,1),o.m(e,null)):o&&(Se(),j(o,1,1,()=>{o=null}),Te())},i(u){s||(P(o),s=!0)},o(u){j(o),s=!1},d(u){u&&k(e),o&&o.d()}}}function Eo(l){let e,t=l[95].label+"",n;return{c(){e=d("option"),n=T(t),e.__value=l[95].value,ne(e,e.__value)},m(s,o){w(s,e,o),r(e,n)},p:be,d(s){s&&k(e)}}}function qo(l){let e,t;return e=new Xe({props:{variant:"warning",$$slots:{default:[w_]},$$scope:{ctx:l}}}),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const o={};s[0]&1048576|s[3]&134217728&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){j(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function w_(l){let e,t=l[20].name+"",n;return{c(){e=T("⚠️ Base snapshot already exists: "),n=T(t)},m(s,o){w(s,e,o),w(s,n,o)},p(s,o){o[0]&1048576&&t!==(t=s[20].name+"")&&B(n,t)},d(s){s&&(k(e),k(n))}}}function Lo(l){let e,t,n,s,o,i=pe(l[8]),u=[];for(let c=0;c<i.length;c+=1)u[c]=Po(oo(l,i,c));let a=l[13]&&No();return{c(){e=d("div"),t=d("label"),t.textContent="📋 Progress",n=b(),s=d("div");for(let c=0;c<u.length;c+=1)u[c].c();o=b(),a&&a.c(),f(t,"class","svelte-kvdz4s"),f(s,"class","operation-logs svelte-kvdz4s"),f(e,"class","operation-logs-section svelte-kvdz4s")},m(c,_){w(c,e,_),r(e,t),r(e,n),r(e,s);for(let p=0;p<u.length;p+=1)u[p]&&u[p].m(s,null);r(s,o),a&&a.m(s,null)},p(c,_){if(_[0]&256){i=pe(c[8]);let p;for(p=0;p<i.length;p+=1){const m=oo(c,i,p);u[p]?u[p].p(m,_):(u[p]=Po(m),u[p].c(),u[p].m(s,o))}for(;p<u.length;p+=1)u[p].d(1);u.length=i.length}c[13]?a||(a=No(),a.c(),a.m(s,null)):a&&(a.d(1),a=null)},d(c){c&&k(e),Me(u,c),a&&a.d()}}}function Po(l){let e,t=l[92].message+"",n,s;return{c(){e=d("div"),n=T(t),f(e,"class",s="log-entry log-"+l[92].type+" svelte-kvdz4s")},m(o,i){w(o,e,i),r(e,n)},p(o,i){i[0]&256&&t!==(t=o[92].message+"")&&B(n,t),i[0]&256&&s!==(s="log-entry log-"+o[92].type+" svelte-kvdz4s")&&f(e,"class",s)},d(o){o&&k(e)}}}function No(l){let e;return{c(){e=d("div"),e.innerHTML='<span class="spinner svelte-kvdz4s">⏳</span> Working...',f(e,"class","log-entry log-info svelte-kvdz4s")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function $_(l){let e,t,n,s,o,i,u,a,c,_,p,m,h,v;const g=[k_,b_],S=[];function C(y,D){return y[14]==="base"?0:1}a=C(l),c=S[a]=g[a](l);let $=(l[8].length>0||l[13])&&Lo(l);return{c(){e=d("div"),t=d("button"),n=T("🏗️ Base Snapshot"),s=b(),o=d("button"),i=T("📸 Custom Snapshot"),u=b(),c.c(),_=b(),$&&$.c(),p=Ie(),f(t,"class","snap-type-btn svelte-kvdz4s"),t.disabled=l[13],ke(t,"active",l[14]==="base"),f(o,"class","snap-type-btn svelte-kvdz4s"),o.disabled=l[13],ke(o,"active",l[14]==="custom"),f(e,"class","snap-type-selector svelte-kvdz4s")},m(y,D){w(y,e,D),r(e,t),r(t,n),r(e,s),r(e,o),r(o,i),w(y,u,D),S[a].m(y,D),w(y,_,D),$&&$.m(y,D),w(y,p,D),m=!0,h||(v=[ee(t,"click",l[75]),ee(o,"click",l[76])],h=!0)},p(y,D){(!m||D[0]&8192)&&(t.disabled=y[13]),(!m||D[0]&16384)&&ke(t,"active",y[14]==="base"),(!m||D[0]&8192)&&(o.disabled=y[13]),(!m||D[0]&16384)&&ke(o,"active",y[14]==="custom");let E=a;a=C(y),a===E?S[a].p(y,D):(Se(),j(S[E],1,1,()=>{S[E]=null}),Te(),c=S[a],c?c.p(y,D):(c=S[a]=g[a](y),c.c()),P(c,1),c.m(_.parentNode,_)),y[8].length>0||y[13]?$?$.p(y,D):($=Lo(y),$.c(),$.m(p.parentNode,p)):$&&($.d(1),$=null)},i(y){m||(P(c),m=!0)},o(y){j(c),m=!1},d(y){y&&(k(e),k(u),k(_),k(p)),S[a].d(y),$&&$.d(y),h=!1,Ve(v)}}}function C_(l){let e=l[8].length>0?"Close":"Cancel",t;return{c(){t=T(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&256&&e!==(e=n[8].length>0?"Close":"Cancel")&&B(t,e)},d(n){n&&k(t)}}}function y_(l){let e;return{c(){e=T("🔨 Build")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function S_(l){let e;return{c(){e=T("⏳ Building...")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function T_(l){let e;function t(o,i){return o[13]?S_:y_}let n=t(l),s=n(l);return{c(){s.c(),e=Ie()},m(o,i){s.m(o,i),w(o,e,i)},p(o,i){n!==(n=t(o))&&(s.d(1),s=n(o),s&&(s.c(),s.m(e.parentNode,e)))},d(o){o&&k(e),s.d(o)}}}function z_(l){let e,t,n,s,o;return t=new Be({props:{variant:"ghost",$$slots:{default:[C_]},$$scope:{ctx:l}}}),t.$on("click",l[74]),s=new Be({props:{variant:"primary",disabled:l[13],$$slots:{default:[T_]},$$scope:{ctx:l}}}),s.$on("click",l[40]),{c(){e=d("div"),_e(t.$$.fragment),n=b(),_e(s.$$.fragment),f(e,"slot","footer")},m(i,u){w(i,e,u),fe(t,e,null),r(e,n),fe(s,e,null),o=!0},p(i,u){const a={};u[0]&256|u[3]&134217728&&(a.$$scope={dirty:u,ctx:i}),t.$set(a);const c={};u[0]&8192&&(c.disabled=i[13]),u[0]&8192|u[3]&134217728&&(c.$$scope={dirty:u,ctx:i}),s.$set(c)},i(i){o||(P(t.$$.fragment,i),P(s.$$.fragment,i),o=!0)},o(i){j(t.$$.fragment,i),j(s.$$.fragment,i),o=!1},d(i){i&&k(e),ce(t),ce(s)}}}function D_(l){let e,t,n,s,o,i,u,a,c,_,p,m,h,v,g,S,C,$,y=jo(l[7])+"",D,E,L,z,q,O,N,M=l[32].length+"",G,F,A,U=l[32].length===1?"SERVER":"SERVERS",R,I,H,Y,Q=l[31].containerCount+"",X,oe,x,V=l[31].containerCount===1?"CONTAINER":"CONTAINERS",J,ae,W,ie,ue,te=l[31].monthlyCost+"",me,re,le,Z,K,ge,we=l[31].healthyContainers+"",Ge,at,qe=l[31].containerCount+"",Je,Ee,je,ve,Pe,Ne,Le,Ue,lt,st=l[11]?"▼":"▶",ot,Ke,it,St=Xl(l[32].length,"Server")+"",Et,nl,tt,Bt,Pt,Ht,ct,mt,he,Oe,_t,Gt,Wt=l[3]?"▼":"▶",Ye,Vt,vl,rl=Xl(l[4].length,"Snapshot")+"",hl,wl,Jt,xt,al,ze,ye,Qe,yt,Yt,Ut,Ze,Tt,$l,Qt,Nt,vt,Ol,Il,ul=pe(l[34]),zt=[];for(let De=0;De<ul.length;De+=1)zt[De]=vo(mo(l,ul,De));let fl=pe(l[33]),Dt=[];for(let De=0;De<fl.length;De+=1)Dt[De]=ho(po(l,fl,De));let gt=l[11]&&go(l),bt=l[3]&&ko(l);function hn(De){l[67](De)}let Vl={title:"Provision Server",width:"500px",$$slots:{footer:[p_],default:[u_]},$$scope:{ctx:l}};l[26]!==void 0&&(Vl.open=l[26]),yt=new ol({props:Vl}),It.push(()=>pl(yt,"open",hn)),yt.$on("close",l[68]);function gn(De){l[73](De)}let Jl={title:l[22],width:"1000px",$$slots:{footer:[g_],default:[v_]},$$scope:{ctx:l}};l[21]!==void 0&&(Jl.open=l[21]),Ze=new ol({props:Jl}),It.push(()=>pl(Ze,"open",gn));function bn(De){l[82](De)}let Kl={title:"Build Snapshot",width:"600px",$$slots:{footer:[z_],default:[$_]},$$scope:{ctx:l}};return l[12]!==void 0&&(Kl.open=l[12]),Qt=new ol({props:Kl}),It.push(()=>pl(Qt,"open",bn)),Qt.$on("close",l[83]),{c(){e=d("div"),t=d("div"),n=d("div"),s=d("label"),s.textContent="Project",o=b(),i=d("select"),u=d("option"),u.textContent="All";for(let De=0;De<zt.length;De+=1)zt[De].c();a=b(),c=d("div"),_=d("label"),_.textContent="Env",p=b(),m=d("select"),h=d("option"),h.textContent="All";for(let De=0;De<Dt.length;De+=1)Dt[De].c();v=b(),g=d("div"),S=b(),C=d("span"),$=T("Updated "),D=T(y),E=b(),L=d("button"),L.textContent="↻",z=b(),q=d("div"),O=d("div"),N=d("span"),G=T(M),F=b(),A=d("span"),R=T(U),I=b(),H=d("div"),Y=d("span"),X=T(Q),oe=b(),x=d("span"),J=T(V),ae=b(),W=d("div"),ie=d("span"),ue=T("£"),me=T(te),re=b(),le=d("span"),le.textContent="/MONTH",Z=b(),K=d("div"),ge=d("span"),Ge=T(we),at=T("/"),Je=T(qe),je=b(),ve=d("span"),ve.textContent="HEALTHY",Pe=b(),Ne=d("div"),Le=d("div"),Ue=d("div"),lt=d("span"),ot=T(st),Ke=b(),it=d("span"),Et=T(St),nl=b(),tt=d("div"),Bt=d("button"),Bt.textContent="↻",Pt=b(),Ht=d("button"),Ht.textContent="+ Add",ct=b(),gt&&gt.c(),mt=b(),he=d("div"),Oe=d("div"),_t=d("div"),Gt=d("span"),Ye=T(Wt),Vt=b(),vl=d("span"),hl=T(rl),wl=b(),Jt=d("div"),xt=d("button"),xt.textContent="↻",al=b(),ze=d("button"),ze.textContent="+ Build",ye=b(),bt&&bt.c(),Qe=b(),_e(yt.$$.fragment),Ut=b(),_e(Ze.$$.fragment),$l=b(),_e(Qt.$$.fragment),f(s,"class","svelte-kvdz4s"),u.__value="",ne(u,u.__value),f(i,"class","svelte-kvdz4s"),l[1]===void 0&&xe(()=>l[57].call(i)),f(n,"class","filter-group svelte-kvdz4s"),f(_,"class","svelte-kvdz4s"),h.__value="",ne(h,h.__value),f(m,"class","svelte-kvdz4s"),l[2]===void 0&&xe(()=>l[58].call(m)),f(c,"class","filter-group svelte-kvdz4s"),f(g,"class","filter-spacer svelte-kvdz4s"),f(C,"class","last-updated svelte-kvdz4s"),f(L,"class","filter-refresh svelte-kvdz4s"),f(L,"title","Refresh"),f(t,"class","filter-bar svelte-kvdz4s"),f(N,"class","banner-value svelte-kvdz4s"),f(A,"class","banner-label svelte-kvdz4s"),f(O,"class","banner-metric svelte-kvdz4s"),f(Y,"class","banner-value svelte-kvdz4s"),f(x,"class","banner-label svelte-kvdz4s"),f(H,"class","banner-metric svelte-kvdz4s"),f(ie,"class","banner-value svelte-kvdz4s"),f(le,"class","banner-label svelte-kvdz4s"),f(W,"class","banner-metric svelte-kvdz4s"),f(ge,"class",Ee="banner-value "+(l[31].unhealthyContainers>0?"warning":"success")+" svelte-kvdz4s"),f(ve,"class","banner-label svelte-kvdz4s"),f(K,"class","banner-metric svelte-kvdz4s"),f(q,"class","summary-banner svelte-kvdz4s"),f(lt,"class","expand-icon svelte-kvdz4s"),f(Ue,"class","section-title svelte-kvdz4s"),f(Bt,"class","section-btn svelte-kvdz4s"),f(Ht,"class","section-btn primary svelte-kvdz4s"),f(tt,"class","section-actions svelte-kvdz4s"),f(Le,"class","section-header svelte-kvdz4s"),f(Ne,"class","section svelte-kvdz4s"),ke(Ne,"expanded",l[11]),f(Gt,"class","expand-icon svelte-kvdz4s"),f(_t,"class","section-title svelte-kvdz4s"),f(xt,"class","section-btn svelte-kvdz4s"),f(ze,"class","section-btn primary svelte-kvdz4s"),f(Jt,"class","section-actions svelte-kvdz4s"),f(Oe,"class","section-header svelte-kvdz4s"),f(he,"class","section svelte-kvdz4s"),ke(he,"expanded",l[3]),f(e,"class","infrastructure svelte-kvdz4s")},m(De,Fe){w(De,e,Fe),r(e,t),r(t,n),r(n,s),r(n,o),r(n,i),r(i,u);for(let Rt=0;Rt<zt.length;Rt+=1)zt[Rt]&&zt[Rt].m(i,null);Re(i,l[1],!0),r(t,a),r(t,c),r(c,_),r(c,p),r(c,m),r(m,h);for(let Rt=0;Rt<Dt.length;Rt+=1)Dt[Rt]&&Dt[Rt].m(m,null);Re(m,l[2],!0),r(t,v),r(t,g),r(t,S),r(t,C),r(C,$),r(C,D),r(t,E),r(t,L),r(e,z),r(e,q),r(q,O),r(O,N),r(N,G),r(O,F),r(O,A),r(A,R),r(q,I),r(q,H),r(H,Y),r(Y,X),r(H,oe),r(H,x),r(x,J),r(q,ae),r(q,W),r(W,ie),r(ie,ue),r(ie,me),r(W,re),r(W,le),r(q,Z),r(q,K),r(K,ge),r(ge,Ge),r(ge,at),r(ge,Je),r(K,je),r(K,ve),r(e,Pe),r(e,Ne),r(Ne,Le),r(Le,Ue),r(Ue,lt),r(lt,ot),r(Ue,Ke),r(Ue,it),r(it,Et),r(Le,nl),r(Le,tt),r(tt,Bt),r(tt,Pt),r(tt,Ht),r(Ne,ct),gt&&gt.m(Ne,null),r(e,mt),r(e,he),r(he,Oe),r(Oe,_t),r(_t,Gt),r(Gt,Ye),r(_t,Vt),r(_t,vl),r(vl,hl),r(Oe,wl),r(Oe,Jt),r(Jt,xt),r(Jt,al),r(Jt,ze),r(he,ye),bt&&bt.m(he,null),w(De,Qe,Fe),fe(yt,De,Fe),w(De,Ut,Fe),fe(Ze,De,Fe),w(De,$l,Fe),fe(Qt,De,Fe),vt=!0,Ol||(Il=[ee(i,"change",l[57]),ee(m,"change",l[58]),ee(L,"click",l[0]),ee(Bt,"click",l[0]),ee(Ht,"click",l[59]),ee(tt,"click",Bn(l[56])),ee(Le,"click",l[60]),ee(xt,"click",l[38]),ee(ze,"click",l[36]),ee(Jt,"click",Bn(l[55])),ee(Oe,"click",l[61])],Ol=!0)},p(De,Fe){if(Fe[1]&8){ul=pe(De[34]);let rt;for(rt=0;rt<ul.length;rt+=1){const gl=mo(De,ul,rt);zt[rt]?zt[rt].p(gl,Fe):(zt[rt]=vo(gl),zt[rt].c(),zt[rt].m(i,null))}for(;rt<zt.length;rt+=1)zt[rt].d(1);zt.length=ul.length}if(Fe[0]&2|Fe[1]&8&&Re(i,De[1]),Fe[1]&4){fl=pe(De[33]);let rt;for(rt=0;rt<fl.length;rt+=1){const gl=po(De,fl,rt);Dt[rt]?Dt[rt].p(gl,Fe):(Dt[rt]=ho(gl),Dt[rt].c(),Dt[rt].m(m,null))}for(;rt<Dt.length;rt+=1)Dt[rt].d(1);Dt.length=fl.length}Fe[0]&4|Fe[1]&4&&Re(m,De[2]),(!vt||Fe[0]&128)&&y!==(y=jo(De[7])+"")&&B(D,y),(!vt||Fe[1]&2)&&M!==(M=De[32].length+"")&&B(G,M),(!vt||Fe[1]&2)&&U!==(U=De[32].length===1?"SERVER":"SERVERS")&&B(R,U),(!vt||Fe[1]&1)&&Q!==(Q=De[31].containerCount+"")&&B(X,Q),(!vt||Fe[1]&1)&&V!==(V=De[31].containerCount===1?"CONTAINER":"CONTAINERS")&&B(J,V),(!vt||Fe[1]&1)&&te!==(te=De[31].monthlyCost+"")&&B(me,te),(!vt||Fe[1]&1)&&we!==(we=De[31].healthyContainers+"")&&B(Ge,we),(!vt||Fe[1]&1)&&qe!==(qe=De[31].containerCount+"")&&B(Je,qe),(!vt||Fe[1]&1&&Ee!==(Ee="banner-value "+(De[31].unhealthyContainers>0?"warning":"success")+" svelte-kvdz4s"))&&f(ge,"class",Ee),(!vt||Fe[0]&2048)&&st!==(st=De[11]?"▼":"▶")&&B(ot,st),(!vt||Fe[1]&2)&&St!==(St=Xl(De[32].length,"Server")+"")&&B(Et,St),De[11]?gt?(gt.p(De,Fe),Fe[0]&2048&&P(gt,1)):(gt=go(De),gt.c(),P(gt,1),gt.m(Ne,null)):gt&&(Se(),j(gt,1,1,()=>{gt=null}),Te()),(!vt||Fe[0]&2048)&&ke(Ne,"expanded",De[11]),(!vt||Fe[0]&8)&&Wt!==(Wt=De[3]?"▼":"▶")&&B(Ye,Wt),(!vt||Fe[0]&16)&&rl!==(rl=Xl(De[4].length,"Snapshot")+"")&&B(hl,rl),De[3]?bt?(bt.p(De,Fe),Fe[0]&8&&P(bt,1)):(bt=ko(De),bt.c(),P(bt,1),bt.m(he,null)):bt&&(Se(),j(bt,1,1,()=>{bt=null}),Te()),(!vt||Fe[0]&8)&&ke(he,"expanded",De[3]);const Rt={};Fe[0]&469763600|Fe[3]&134217728&&(Rt.$$scope={dirty:Fe,ctx:De}),!Yt&&Fe[0]&67108864&&(Yt=!0,Rt.open=De[26],dl(()=>Yt=!1)),yt.$set(Rt);const Cl={};Fe[0]&4194304&&(Cl.title=De[22]),Fe[0]&1134559296|Fe[3]&134217728&&(Cl.$$scope={dirty:Fe,ctx:De}),!Tt&&Fe[0]&2097152&&(Tt=!0,Cl.open=De[21],dl(()=>Tt=!1)),Ze.$set(Cl);const Fl={};Fe[0]&2093312|Fe[3]&134217728&&(Fl.$$scope={dirty:Fe,ctx:De}),!Nt&&Fe[0]&4096&&(Nt=!0,Fl.open=De[12],dl(()=>Nt=!1)),Qt.$set(Fl)},i(De){vt||(P(gt),P(bt),P(yt.$$.fragment,De),P(Ze.$$.fragment,De),P(Qt.$$.fragment,De),vt=!0)},o(De){j(gt),j(bt),j(yt.$$.fragment,De),j(Ze.$$.fragment,De),j(Qt.$$.fragment,De),vt=!1},d(De){De&&(k(e),k(Qe),k(Ut),k($l)),Me(zt,De),Me(Dt,De),gt&&gt.d(),bt&&bt.d(),ce(yt,De),ce(Ze,De),ce(Qt,De),Ol=!1,Ve(Il)}}}function Ro(l){return l!=null&&l.length?l.reduce((e,t)=>{const n=t.size_slug||t.size||"";return n.includes("4gb")?e+24:n.includes("2gb")?e+12:n.includes("1gb")?e+6:n.includes("512mb")?e+4:e+6},0):0}function Xl(l,e,t=null){return l===1?`${l} ${e}`:`${l} ${t||e+"s"}`}function Mo(l){if(!l)return"0 B";const e=1024,t=["B","KB","MB","GB"],n=Math.floor(Math.log(l)/Math.log(e));return parseFloat((l/Math.pow(e,n)).toFixed(1))+" "+t[n]}function Ao(l){return l?new Date(l).toLocaleDateString("en-GB",{day:"2-digit",month:"short"}):""}function jo(l){if(!l)return"never";const t=Math.floor((new Date-l)/1e3);return t<5?"just now":t<60?`${t}s ago`:t<3600?`${Math.floor(t/60)}m ago`:l.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"})}const Oo=l=>{var e;return(e=l.name)==null?void 0:e.startsWith("base-")},Io=l=>{var e;return(e=l.name)==null?void 0:e.startsWith("base-")};function E_(l,e,t){let n,s,o,i,u,a,c,_,p,m,h,v;pt(l,mn,ze=>t(50,_=ze)),pt(l,An,ze=>t(51,p=ze)),pt(l,Xt,ze=>t(52,m=ze)),pt(l,Uu,ze=>t(53,h=ze)),pt(l,On,ze=>t(54,v=ze));let g="",S="",C=null,$=[],y=[],D=!1,E=!0,L=!1,z=[],q=!1,O=!1,N=!1,M="custom",G="",F="ubuntu-22-04-x64",A=!0,U=!0,R=!0,I=null;const H=[{value:"ubuntu-22-04-x64",label:"Ubuntu 22.04 LTS"},{value:"ubuntu-20-04-x64",label:"Ubuntu 20.04 LTS"},{value:"debian-11-x64",label:"Debian 11"},{value:"debian-12-x64",label:"Debian 12"}];function Y(){t(14,M=I!=null&&I.exists?"custom":"base"),t(12,O=!0)}let Q=null;async function X(){if(p)try{t(47,Q=await He("GET",`/infra/fleet/health?do_token=${p}`))}catch(ze){console.error("Failed to load fleet health:",ze)}finally{}}let oe=!1,x="",V="",J=!1,ae=null,W=null,ie="",ue=200,te=!1,me=null,re=!1,le={region:"lon1",size:"s-2vcpu-2gb",snapshot_id:""};const Z=[{value:"lon1",label:"London 1"},{value:"fra1",label:"Frankfurt 1"},{value:"ams3",label:"Amsterdam 3"},{value:"nyc1",label:"New York 1"},{value:"nyc3",label:"New York 3"},{value:"sfo3",label:"San Francisco 3"},{value:"sgp1",label:"Singapore 1"},{value:"blr1",label:"Bangalore 1"},{value:"tor1",label:"Toronto 1"},{value:"syd1",label:"Sydney 1"}];let K=[{slug:"s-1vcpu-512mb-10gb",memory:512,vcpus:1,price_monthly:4,description:"$4/mo - 512MB / 1 vCPU"},{slug:"s-1vcpu-1gb",memory:1024,vcpus:1,price_monthly:6,description:"$6/mo - 1GB / 1 vCPU"},{slug:"s-2vcpu-2gb",memory:2048,vcpus:2,price_monthly:18,description:"$18/mo - 2GB / 2 vCPU"},{slug:"s-2vcpu-4gb",memory:4096,vcpus:2,price_monthly:24,description:"$24/mo - 4GB / 2 vCPU"},{slug:"s-4vcpu-8gb",memory:8192,vcpus:4,price_monthly:48,description:"$48/mo - 8GB / 4 vCPU"}];async function ge(){var ze;try{const ye=await He("GET","/infra/sizes");((ze=ye.sizes)==null?void 0:ze.length)>0&&t(28,K=ye.sizes)}catch{console.warn("Using fallback sizes")}}kl(()=>{ge()});async function we(){t(5,q=!0);try{const ze=await He("GET",`/infra/snapshots?do_token=${p}`);t(4,z=ze.snapshots||[]),Ge()}catch(ze){console.error("Failed to load snapshots:",ze)}finally{t(5,q=!1)}}function Ge(){const ze=z.find(ye=>{var Qe;return(Qe=ye.name)==null?void 0:Qe.toLowerCase().startsWith("base-")});ze?t(20,I={exists:!0,name:ze.name,created_at:ze.created_at}):t(20,I={exists:!1})}async function at(ze,ye){if(confirm(`Delete snapshot "${ye}"?`))try{await He("DELETE",`/infra/snapshots/${ze}?do_token=${p}`),$e.success(`Deleted ${ye}`),t(4,z=z.filter(Qe=>Qe.id!==ze))}catch(Qe){$e.error(`Failed: ${Qe.message}`)}}async function qe(){t(13,N=!0),t(8,$=[]);const ze=(ye,Qe="info")=>{t(8,$=[...$,{message:ye,type:Qe,time:new Date}])};try{if(M==="base")ze("Starting base snapshot creation..."),await tn("POST",`/infra/setup/init/stream?do_token=${p}`,{},ye=>{var Qe;ye.type==="log"?ze(ye.message||((Qe=ye.data)==null?void 0:Qe.message),"info"):ye.type==="progress"?ye.message&&ze(ye.message,"info"):ye.type==="error"?ze(ye.message||ye.error,"error"):ye.type==="done"||ye.type==="complete"?ye.success?ze("✅ Base snapshot created successfully!","success"):ze(`❌ ${ye.message||ye.error||"Failed"}`,"error"):ye.message&&ze(ye.message,"info")}),await Ge(),await we(),$e.success("Base snapshot created!");else{if(!G){$e.error("Snapshot name required"),t(13,N=!1);return}if(G.toLowerCase().startsWith("base-")){$e.error('Custom snapshots cannot start with "base-"'),t(13,N=!1);return}ze(`Starting custom snapshot "${G}"...`),await tn("POST",`/infra/snapshots/ensure/stream?do_token=${p}`,{name:G,base_image:F,install_docker:A,install_nginx:U,install_certbot:R},ye=>{var Qe;ye.type==="log"?ze(ye.message||((Qe=ye.data)==null?void 0:Qe.message),"info"):ye.type==="progress"?ye.message&&ze(ye.message,"info"):ye.type==="error"?ze(ye.message||ye.error,"error"):ye.type==="done"||ye.type==="complete"?ye.success?ze("✅ Snapshot created successfully!","success"):ze(`❌ ${ye.message||ye.error||"Failed"}`,"error"):ye.message&&ze(ye.message,"info")}),await we(),$e.success("Custom snapshot created!"),t(15,G="")}}catch(ye){ze(`❌ Error: ${ye.message}`,"error"),$e.error(ye.message)}finally{t(13,N=!1)}}async function Je(){t(10,D=!0),t(9,y=[]);const ze=(ye,Qe="info")=>{t(9,y=[...y,{message:ye,type:Qe,time:new Date}])};try{ze("Starting provisioning..."),await tn("POST",`/infra/servers/provision/stream?do_token=${p}`,{snapshot_id:le.snapshot_id||null,region:le.region,size:le.size},ye=>{var Qe;ye.type==="log"?ze(ye.message||((Qe=ye.data)==null?void 0:Qe.message),"info"):ye.type==="progress"?ze(ye.message||`Progress: ${ye.percent||""}%`,"info"):ye.type==="error"?ze(ye.message||ye.error,"error"):ye.type==="done"||ye.type==="complete"?ye.success?ze(`✅ Server provisioned! IP: ${ye.ip||"pending"}`,"success"):ze(`❌ ${ye.message||ye.error||"Failed"}`,"error"):ye.message&&ze(ye.message,"info")}),$e.success("Server provisioned"),Xt.refresh()}catch(ye){ze(`❌ Error: ${ye.message}`,"error"),$e.error("Failed: "+ye.message)}finally{t(10,D=!1)}}async function Ee(ze){const{server:ye}=ze.detail;if(ze.type==="destroy"&&confirm(`Destroy ${ye.name}? This cannot be undone.`))try{await He("DELETE",`/infra/servers/${ye.id}?do_token=${p}`),$e.success(`Destroyed ${ye.name}`),Xt.refresh()}catch(yt){$e.error(`Failed: ${yt.message}`)}}async function je(ze){var Yt,Ut,Ze;const{server:ye,containerName:Qe}=ze.detail,yt=ye.ip||((Ze=(Ut=(Yt=ye.networks)==null?void 0:Yt.v4)==null?void 0:Ut[0])==null?void 0:Ze.ip_address)||"unknown";ae=ye.id,W=Qe,t(22,x=`📋 ${Qe} @ ${yt}`),t(48,V=""),t(6,ie=""),t(21,oe=!0),t(23,J=!0);try{const Tt=await He("GET",`/infra/agent/${ye.id}/containers/${Qe}/logs?do_token=${p}&tail=${ue}`);t(48,V=Tt.logs||"No logs available")}catch(Tt){t(48,V=`Error: ${Tt.message}`)}finally{t(23,J=!1)}}async function ve(){if(!(!ae||!W)){t(23,J=!0);try{const ze=await He("GET",`/infra/agent/${ae}/containers/${W}/logs?do_token=${p}&tail=${ue}`);t(48,V=ze.logs||"No logs available")}catch(ze){t(48,V=`Error: ${ze.message}`)}finally{t(23,J=!1)}}}function Pe(){te?me=setInterval(ve,3e3):Ne()}function Ne(){me&&(clearInterval(me),me=null),t(25,te=!1)}function Le(){Xt.refresh(),t(7,C=new Date)}function Ue(ze){rn.call(this,l,ze)}function lt(ze){rn.call(this,l,ze)}function st(){g=dt(this),t(1,g),t(34,n),t(50,_),t(54,v),t(53,h)}function ot(){S=dt(this),t(2,S),t(33,s),t(50,_)}const Ke=()=>t(26,re=!0),it=()=>t(11,E=!E),St=()=>t(3,L=!L),Et=ze=>at(ze.id,ze.name),nl=()=>{t(26,re=!1),t(9,y=[])};function tt(){le.snapshot_id=dt(this),t(27,le),t(4,z)}function Bt(){le.region=dt(this),t(27,le),t(4,z)}function Pt(){le.size=dt(this),t(27,le),t(4,z)}function Ht(ze){re=ze,t(26,re)}const ct=()=>{t(26,re=!1),t(9,y=[])},mt=()=>{t(21,oe=!1),Ne()};function he(){ie=this.value,t(6,ie)}function Oe(){ue=dt(this),t(24,ue)}function _t(){te=this.checked,t(25,te)}function Gt(ze){oe=ze,t(21,oe)}const Wt=()=>{t(12,O=!1),t(8,$=[])},Ye=()=>t(14,M="base"),Vt=()=>t(14,M="custom");function vl(){G=this.value,t(15,G)}function rl(){F=dt(this),t(16,F),t(35,H)}function hl(){A=this.checked,t(17,A)}function wl(){U=this.checked,t(18,U)}function Jt(){R=this.checked,t(19,R)}function xt(ze){O=ze,t(12,O)}const al=()=>{t(12,O=!1),t(8,$=[])};return l.$$.update=()=>{var ze,ye,Qe,yt,Yt,Ut;l.$$.dirty[1]&13107200&&t(34,n=[...new Set([...(_||[]).map(Ze=>Ze.project).filter(Boolean),...v||[],...(h||[]).map(Ze=>Ze.project).filter(Boolean)])].sort()),l.$$.dirty[1]&524288&&t(33,s=[...new Set([...(_||[]).map(Ze=>Ze.env||Ze.environment).filter(Boolean),"prod","staging","dev"])].sort()),l.$$.dirty[0]&6|l.$$.dirty[1]&524288&&t(32,o=(_||[]).filter(Ze=>!(g&&Ze.project!==g||S&&(Ze.env||Ze.environment)!==S))),l.$$.dirty[0]&56&&L&&z.length===0&&!q&&we(),l.$$.dirty[1]&589824&&t(31,i=Q?{serverCount:((ze=Q.summary)==null?void 0:ze.total)||(_==null?void 0:_.length)||0,containerCount:((ye=Q.servers)==null?void 0:ye.reduce((Ze,Tt)=>Ze+(Tt.containers||0),0))||0,healthyContainers:((Qe=Q.servers)==null?void 0:Qe.reduce((Ze,Tt)=>Ze+(Tt.healthy||0),0))||0,unhealthyContainers:((yt=Q.servers)==null?void 0:yt.reduce((Ze,Tt)=>Ze+(Tt.unhealthy||0),0))||0,monthlyCost:Ro(_),health:((Yt=Q.summary)==null?void 0:Yt.healthy)===((Ut=Q.summary)==null?void 0:Ut.total)?"healthy":"degraded"}:{serverCount:(_==null?void 0:_.length)||0,containerCount:0,healthyContainers:0,unhealthyContainers:0,monthlyCost:Ro(_),health:"unknown"}),l.$$.dirty[1]&1114112&&!Q&&p&&X(),l.$$.dirty[0]&64|l.$$.dirty[1]&131072&&t(30,u=ie?V.split(`
`).filter(Ze=>Ze.toLowerCase().includes(ie.toLowerCase())).join(`
`):V),l.$$.dirty[1]&2097152&&t(49,a=m||{loading:!1}),l.$$.dirty[1]&262144&&t(29,c=a.loading),l.$$.dirty[1]&524288&&_&&t(7,C=new Date)},[Le,g,S,L,z,q,ie,C,$,y,D,E,O,N,M,G,F,A,U,R,I,oe,x,J,ue,te,re,le,K,c,u,i,o,s,n,H,Y,Z,we,at,qe,Je,Ee,je,ve,Pe,Ne,Q,V,a,_,p,m,h,v,Ue,lt,st,ot,Ke,it,St,Et,nl,tt,Bt,Pt,Ht,ct,mt,he,Oe,_t,Gt,Wt,Ye,Vt,vl,rl,hl,wl,Jt,xt,al]}class q_ extends Ct{constructor(e){super(),$t(this,e,E_,D_,wt,{refresh:0},null,[-1,-1,-1,-1])}get refresh(){return this.$$.ctx[0]}}const L_="modulepreload",P_=function(l){return"/static/"+l},Fo={},Bo=function(e,t,n){let s=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),u=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));s=Promise.allSettled(t.map(a=>{if(a=P_(a),a in Fo)return;Fo[a]=!0;const c=a.endsWith(".css"),_=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${_}`))return;const p=document.createElement("link");if(p.rel=c?"stylesheet":L_,c||(p.as="script"),p.crossOrigin="",p.href=a,u&&p.setAttribute("nonce",u),document.head.appendChild(p),c)return new Promise((m,h)=>{p.addEventListener("load",m),p.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${a}`)))})}))}function o(i){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=i,window.dispatchEvent(u),!u.defaultPrevented)throw i}return s.then(i=>{for(const u of i||[])u.status==="rejected"&&o(u.reason);return e().catch(o)})},{Boolean:vn}=Su;function Uo(l,e,t){const n=l.slice();return n[179]=e[t],n}function Ho(l,e,t){const n=l.slice();return n[179]=e[t],n}function Go(l,e,t){const n=l.slice();return n[179]=e[t],n}function Wo(l,e,t){const n=l.slice();return n[179]=e[t],n}function Vo(l,e,t){const n=l.slice();return n[83]=e[t],n}function Jo(l,e,t){const n=l.slice();return n[190]=e[t],n}function Ko(l,e,t){const n=l.slice();return n[193]=e[t],n}function Yo(l,e,t){const n=l.slice();return n[196]=e[t],n}function Qo(l,e,t){var o,i,u;const n=l.slice();n[179]=e[t];const s=n[179].ip||((u=(i=(o=n[179].networks)==null?void 0:o.v4)==null?void 0:i[0])==null?void 0:u.ip_address);return n[199]=s,n}function Zo(l,e,t){var o,i,u;const n=l.slice();n[179]=e[t];const s=n[179].ip||((u=(i=(o=n[179].networks)==null?void 0:o.v4)==null?void 0:i[0])==null?void 0:u.ip_address);return n[199]=s,n}function Xo(l,e,t){const n=l.slice();return n[204]=e[t],n[206]=t,n}function N_(l){const e=l.slice(),t=e[28].find(s=>s.isMain);e[207]=t;const n=e[28].filter(s=>!s.isMain).length;return e[208]=n,e}function xo(l,e,t){const n=l.slice();return n[204]=e[t],n[206]=t,n}function ei(l,e,t){const n=l.slice();return n[210]=e[t],n}function ti(l,e,t){const n=l.slice();return n[213]=e[t],n}function li(l,e,t){const n=l.slice();return n[216]=e[t],n}function ni(l){let e,t,n,s,o,i,u,a,c,_;function p(){return l[86](l[216])}return{c(){e=d("label"),t=d("input"),s=b(),o=d("span"),o.textContent=`${l[216].label}`,i=b(),u=d("span"),u.textContent=`${l[216].description}`,a=b(),f(t,"type","radio"),f(t,"name","deployType"),t.checked=n=l[0]===l[216].value,f(t,"class","svelte-1hrwlue"),f(o,"class","dt-label svelte-1hrwlue"),f(u,"class","dt-desc svelte-1hrwlue"),f(e,"class","deploy-type-option svelte-1hrwlue"),ke(e,"active",l[0]===l[216].value)},m(m,h){w(m,e,h),r(e,t),r(e,s),r(e,o),r(e,i),r(e,u),r(e,a),c||(_=ee(t,"change",p),c=!0)},p(m,h){l=m,h[0]&1&&n!==(n=l[0]===l[216].value)&&(t.checked=n),h[0]&1|h[1]&536870912&&ke(e,"active",l[0]===l[216].value)},d(m){m&&k(e),c=!1,_()}}}function si(l){let e,t,n;return{c(){e=d("small"),t=T("Usually same as type: "),n=T(l[1]),f(e,"class","svelte-1hrwlue")},m(s,o){w(s,e,o),r(e,t),r(e,n)},p(s,o){o[0]&2&&B(n,s[1])},d(s){s&&k(e)}}}function oi(l){let e,t=l[213]+"",n;return{c(){e=d("option"),n=T(t),e.__value=l[213],ne(e,e.__value)},m(s,o){w(s,e,o),r(e,n)},p:be,d(s){s&&k(e)}}}function ii(l){var h;let e,t,n,s,o,i,u,a=((h=l[2].find(l[92]))==null?void 0:h.image)+"",c,_,p=pe(l[2]),m=[];for(let v=0;v<p.length;v+=1)m[v]=ri(ei(l,p,v));return{c(){e=d("div"),t=d("label"),t.textContent="Service Type *",n=b(),s=d("div");for(let v=0;v<m.length;v+=1)m[v].c();o=b(),i=d("small"),u=T("Image: "),c=T(a),_=T(" • Data persisted to /data"),f(t,"class","svelte-1hrwlue"),f(s,"class","stateful-type-selector svelte-1hrwlue"),f(i,"class","svelte-1hrwlue"),f(e,"class","form-group svelte-1hrwlue")},m(v,g){w(v,e,g),r(e,t),r(e,n),r(e,s);for(let S=0;S<m.length;S+=1)m[S]&&m[S].m(s,null);r(e,o),r(e,i),r(i,u),r(i,c),r(i,_)},p(v,g){var S;if(g[0]&6){p=pe(v[2]);let C;for(C=0;C<p.length;C+=1){const $=ei(v,p,C);m[C]?m[C].p($,g):(m[C]=ri($),m[C].c(),m[C].m(s,null))}for(;C<m.length;C+=1)m[C].d(1);m.length=p.length}g[0]&6&&a!==(a=((S=v[2].find(v[92]))==null?void 0:S.image)+"")&&B(c,a)},d(v){v&&k(e),Me(m,v)}}}function ri(l){let e,t,n,s=!1,o,i,u=l[210].label+"",a,c,_,p,m=l[210].port+"",h,v,g,S,C;return g=Ln(l[91][1]),{c(){e=d("label"),t=d("input"),o=b(),i=d("span"),a=T(u),c=b(),_=d("span"),p=T("Port "),h=T(m),v=b(),f(t,"type","radio"),t.__value=n=l[210].value,ne(t,t.__value),f(t,"class","svelte-1hrwlue"),f(i,"class","st-label svelte-1hrwlue"),f(_,"class","st-port svelte-1hrwlue"),f(e,"class","stateful-option svelte-1hrwlue"),ke(e,"active",l[1]===l[210].value),g.p(t)},m($,y){w($,e,y),r(e,t),t.checked=t.__value===l[1],r(e,o),r(e,i),r(i,a),r(e,c),r(e,_),r(_,p),r(_,h),r(e,v),S||(C=ee(t,"change",l[90]),S=!0)},p($,y){y[0]&4&&n!==(n=$[210].value)&&(t.__value=n,ne(t,t.__value),s=!0),(s||y[0]&6)&&(t.checked=t.__value===$[1]),y[0]&4&&u!==(u=$[210].label+"")&&B(a,u),y[0]&4&&m!==(m=$[210].port+"")&&B(h,m),y[0]&6&&ke(e,"active",$[1]===$[210].value)},d($){$&&k(e),g.r(),S=!1,C()}}}function ai(l){let e,t,n,s,o,i,u,a,c,_,p,m,h,v,g,S,C,$,y,D,E,L,z,q,O,N,M,G,F,A,U,R,I,H,Y,Q,X,oe,x,V,J,ae,W,ie;s=new Be({props:{variant:"ghost",size:"sm",title:"Load saved config",$$slots:{default:[R_]},$$scope:{ctx:l}}}),s.$on("click",l[63]),i=new Be({props:{variant:"ghost",size:"sm",title:"Save current settings",$$slots:{default:[M_]},$$scope:{ctx:l}}}),i.$on("click",l[64]),a=new Be({props:{variant:"ghost",size:"sm",title:"Edit exclusion patterns",$$slots:{default:[A_]},$$scope:{ctx:l}}}),a.$on("click",l[65]);let ue=l[53]&&ui(l),te=l[54]&&fi(l),me=l[15]==="code"&&ci(l),re=l[15]==="git"&&bi(l),le=l[15]==="image"&&$i(l),Z=l[15]==="image_file"&&Ci(l);return ae=Ln(l[91][0]),{c(){e=d("div"),t=d("span"),t.textContent="Config:",n=b(),_e(s.$$.fragment),o=b(),_e(i.$$.fragment),u=b(),_e(a.$$.fragment),c=b(),ue&&ue.c(),_=b(),te&&te.c(),p=b(),m=d("div"),h=d("label"),h.innerHTML='Tags <small class="svelte-1hrwlue">(comma-separated)</small>',v=b(),g=d("input"),S=b(),C=d("div"),$=d("label"),$.textContent="Source Type *",y=b(),D=d("div"),E=d("label"),L=d("input"),z=T(`
              📁 Local Code`),q=b(),O=d("label"),N=d("input"),M=T(`
              📦 Git Repo`),G=b(),F=d("label"),A=d("input"),U=T(`
              🐳 Registry`),R=b(),I=d("label"),H=d("input"),Y=T(`
              📦 Local Image`),Q=b(),me&&me.c(),X=b(),re&&re.c(),oe=b(),le&&le.c(),x=b(),Z&&Z.c(),V=Ie(),f(t,"class","config-label svelte-1hrwlue"),f(e,"class","config-bar svelte-1hrwlue"),f(h,"for","deploy-tags"),f(h,"class","svelte-1hrwlue"),f(g,"id","deploy-tags"),f(g,"type","text"),f(g,"placeholder","api, backend, v2"),f(g,"class","svelte-1hrwlue"),f(m,"class","form-group svelte-1hrwlue"),f($,"class","svelte-1hrwlue"),f(L,"type","radio"),L.__value="code",ne(L,L.__value),f(L,"class","svelte-1hrwlue"),f(E,"class","source-option svelte-1hrwlue"),ke(E,"active",l[15]==="code"),f(N,"type","radio"),N.__value="git",ne(N,N.__value),f(N,"class","svelte-1hrwlue"),f(O,"class","source-option svelte-1hrwlue"),ke(O,"active",l[15]==="git"),f(A,"type","radio"),A.__value="image",ne(A,A.__value),f(A,"class","svelte-1hrwlue"),f(F,"class","source-option svelte-1hrwlue"),ke(F,"active",l[15]==="image"),f(H,"type","radio"),H.__value="image_file",ne(H,H.__value),f(H,"class","svelte-1hrwlue"),f(I,"class","source-option svelte-1hrwlue"),ke(I,"active",l[15]==="image_file"),f(D,"class","source-radio-group svelte-1hrwlue"),f(C,"class","form-group svelte-1hrwlue"),ae.p(L,N,A,H)},m(K,ge){w(K,e,ge),r(e,t),r(e,n),fe(s,e,null),r(e,o),fe(i,e,null),r(e,u),fe(a,e,null),r(e,c),ue&&ue.m(e,null),w(K,_,ge),te&&te.m(K,ge),w(K,p,ge),w(K,m,ge),r(m,h),r(m,v),r(m,g),ne(g,l[14]),w(K,S,ge),w(K,C,ge),r(C,$),r(C,y),r(C,D),r(D,E),r(E,L),L.checked=L.__value===l[15],r(E,z),r(D,q),r(D,O),r(O,N),N.checked=N.__value===l[15],r(O,M),r(D,G),r(D,F),r(F,A),A.checked=A.__value===l[15],r(F,U),r(D,R),r(D,I),r(I,H),H.checked=H.__value===l[15],r(I,Y),w(K,Q,ge),me&&me.m(K,ge),w(K,X,ge),re&&re.m(K,ge),w(K,oe,ge),le&&le.m(K,ge),w(K,x,ge),Z&&Z.m(K,ge),w(K,V,ge),J=!0,W||(ie=[ee(g,"input",l[94]),ee(L,"change",l[95]),ee(N,"change",l[96]),ee(A,"change",l[97]),ee(H,"change",l[98])],W=!0)},p(K,ge){const we={};ge[7]&4&&(we.$$scope={dirty:ge,ctx:K}),s.$set(we);const Ge={};ge[7]&4&&(Ge.$$scope={dirty:ge,ctx:K}),i.$set(Ge);const at={};ge[7]&4&&(at.$$scope={dirty:ge,ctx:K}),a.$set(at),K[53]?ue?ue.p(K,ge):(ue=ui(K),ue.c(),ue.m(e,null)):ue&&(ue.d(1),ue=null),K[54]?te?(te.p(K,ge),ge[1]&8388608&&P(te,1)):(te=fi(K),te.c(),P(te,1),te.m(p.parentNode,p)):te&&(Se(),j(te,1,1,()=>{te=null}),Te()),ge[0]&16384&&g.value!==K[14]&&ne(g,K[14]),ge[0]&32768&&(L.checked=L.__value===K[15]),(!J||ge[0]&32768)&&ke(E,"active",K[15]==="code"),ge[0]&32768&&(N.checked=N.__value===K[15]),(!J||ge[0]&32768)&&ke(O,"active",K[15]==="git"),ge[0]&32768&&(A.checked=A.__value===K[15]),(!J||ge[0]&32768)&&ke(F,"active",K[15]==="image"),ge[0]&32768&&(H.checked=H.__value===K[15]),(!J||ge[0]&32768)&&ke(I,"active",K[15]==="image_file"),K[15]==="code"?me?(me.p(K,ge),ge[0]&32768&&P(me,1)):(me=ci(K),me.c(),P(me,1),me.m(X.parentNode,X)):me&&(Se(),j(me,1,1,()=>{me=null}),Te()),K[15]==="git"?re?(re.p(K,ge),ge[0]&32768&&P(re,1)):(re=bi(K),re.c(),P(re,1),re.m(oe.parentNode,oe)):re&&(Se(),j(re,1,1,()=>{re=null}),Te()),K[15]==="image"?le?le.p(K,ge):(le=$i(K),le.c(),le.m(x.parentNode,x)):le&&(le.d(1),le=null),K[15]==="image_file"?Z?Z.p(K,ge):(Z=Ci(K),Z.c(),Z.m(V.parentNode,V)):Z&&(Z.d(1),Z=null)},i(K){J||(P(s.$$.fragment,K),P(i.$$.fragment,K),P(a.$$.fragment,K),P(te),P(me),P(re),J=!0)},o(K){j(s.$$.fragment,K),j(i.$$.fragment,K),j(a.$$.fragment,K),j(te),j(me),j(re),J=!1},d(K){K&&(k(e),k(_),k(p),k(m),k(S),k(C),k(Q),k(X),k(oe),k(x),k(V)),ce(s),ce(i),ce(a),ue&&ue.d(),te&&te.d(K),me&&me.d(K),re&&re.d(K),le&&le.d(K),Z&&Z.d(K),ae.r(),W=!1,Ve(ie)}}}function R_(l){let e;return{c(){e=T("📥 Load")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function M_(l){let e;return{c(){e=T("💾 Save")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function A_(l){let e;return{c(){e=T("🚫 Exclusions")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function ui(l){let e,t;return{c(){e=d("span"),t=T(l[53]),f(e,"class","config-status svelte-1hrwlue")},m(n,s){w(n,e,s),r(e,t)},p(n,s){s[1]&4194304&&B(t,n[53])},d(n){n&&k(e)}}}function fi(l){let e,t,n,s,o,i,u,a,c,_,p,m;return o=new Be({props:{variant:"ghost",size:"sm",$$slots:{default:[j_]},$$scope:{ctx:l}}}),o.$on("click",l[66]),{c(){e=d("div"),t=d("div"),n=d("label"),n.textContent="Exclusion Patterns",s=b(),_e(o.$$.fragment),i=b(),u=d("textarea"),a=b(),c=d("small"),c.textContent="One pattern per line. Applied to folder uploads and git clones.",f(n,"class","svelte-1hrwlue"),f(t,"class","exclude-header svelte-1hrwlue"),f(u,"rows","6"),f(u,"placeholder","node_modules/ __pycache__/ *.pyc .git/"),f(u,"class","svelte-1hrwlue"),f(c,"class","svelte-1hrwlue"),f(e,"class","exclude-editor svelte-1hrwlue")},m(h,v){w(h,e,v),r(e,t),r(t,n),r(t,s),fe(o,t,null),r(e,i),r(e,u),ne(u,l[55]),r(e,a),r(e,c),_=!0,p||(m=ee(u,"input",l[93]),p=!0)},p(h,v){const g={};v[7]&4&&(g.$$scope={dirty:v,ctx:h}),o.$set(g),v[1]&16777216&&ne(u,h[55])},i(h){_||(P(o.$$.fragment,h),_=!0)},o(h){j(o.$$.fragment,h),_=!1},d(h){h&&k(e),ce(o),p=!1,m()}}}function j_(l){let e;return{c(){e=T("Reset to Defaults")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function ci(l){let e,t,n,s,o,i,u,a,c,_,p,m,h,v,g,S,C,$,y,D,E,L,z,q,O,N=l[31]&&_i(),M=l[28].length>0&&di(l);p=new Be({props:{size:"sm",$$slots:{default:[I_]},$$scope:{ctx:l}}}),p.$on("click",l[70]);function G(I,H){return H[0]&268435456&&(S=null),I[28].length===0?B_:(S==null&&(S=!I[28].some(Rd)),S?F_:vi)}function F(I,H){return H===vi?N_(I):I}let A=G(l,[-1,-1,-1,-1,-1,-1,-1,-1]),U=A(F(l,A)),R=l[34]&&gi(l);return{c(){e=d("div"),t=d("div"),n=d("label"),n.textContent="Build Folders",s=b(),o=d("div"),N&&N.c(),i=b(),u=d("input"),a=b(),M&&M.c(),c=b(),_=d("div"),_e(p.$$.fragment),m=b(),h=d("span"),h.textContent="or drag & drop folders here",v=b(),g=d("div"),U.c(),C=b(),$=d("label"),y=d("input"),D=b(),E=d("span"),E.textContent="Remember folder configuration for this service",L=b(),R&&R.c(),f(n,"class","svelte-1hrwlue"),f(u,"type","file"),f(u,"webkitdirectory",""),f(u,"directory",""),u.multiple=!0,qt(u,"display","none"),f(u,"class","svelte-1hrwlue"),f(h,"class","drop-hint svelte-1hrwlue"),f(_,"class","folder-actions svelte-1hrwlue"),f(o,"class","folder-drop-zone svelte-1hrwlue"),ke(o,"dragover",l[31]),f(g,"class","code-selection-info svelte-1hrwlue"),ke(g,"success",l[28].some(dr)),ke(g,"warning",l[28].length>0&&!l[28].some(pr)),f(y,"type","checkbox"),f(y,"class","svelte-1hrwlue"),f($,"class","checkbox-label small-check svelte-1hrwlue"),f(t,"class","form-group svelte-1hrwlue"),f(e,"class","source-config svelte-1hrwlue")},m(I,H){w(I,e,H),r(e,t),r(t,n),r(t,s),r(t,o),N&&N.m(o,null),r(o,i),r(o,u),l[99](u),r(o,a),M&&M.m(o,null),r(o,c),r(o,_),fe(p,_,null),r(_,m),r(_,h),r(t,v),r(t,g),U.m(g,null),r(t,C),r(t,$),r($,y),y.checked=l[30],r($,D),r($,E),r(e,L),R&&R.m(e,null),z=!0,q||(O=[ee(u,"change",l[71]),ee(o,"dragenter",l[72]),ee(o,"dragleave",l[73]),ee(o,"dragover",Nd),ee(o,"drop",l[74]),ee(y,"change",l[102])],q=!0)},p(I,H){I[31]?N||(N=_i(),N.c(),N.m(o,i)):N&&(N.d(1),N=null),I[28].length>0?M?(M.p(I,H),H[0]&268435456&&P(M,1)):(M=di(I),M.c(),P(M,1),M.m(o,c)):M&&(Se(),j(M,1,1,()=>{M=null}),Te());const Y={};H[7]&4&&(Y.$$scope={dirty:H,ctx:I}),p.$set(Y),(!z||H[1]&1)&&ke(o,"dragover",I[31]),A===(A=G(I,H))&&U?U.p(F(I,A),H):(U.d(1),U=A(F(I,A)),U&&(U.c(),U.m(g,null))),(!z||H[0]&268435456)&&ke(g,"success",I[28].some(dr)),(!z||H[0]&268435456)&&ke(g,"warning",I[28].length>0&&!I[28].some(pr)),H[0]&1073741824&&(y.checked=I[30]),I[34]?R?(R.p(I,H),H[1]&8&&P(R,1)):(R=gi(I),R.c(),P(R,1),R.m(e,null)):R&&(Se(),j(R,1,1,()=>{R=null}),Te())},i(I){z||(P(M),P(p.$$.fragment,I),P(R),z=!0)},o(I){j(M),j(p.$$.fragment,I),j(R),z=!1},d(I){I&&k(e),N&&N.d(),l[99](null),M&&M.d(),ce(p),U.d(),R&&R.d(),q=!1,Ve(O)}}}function _i(l){let e;return{c(){e=d("div"),e.innerHTML='<span class="drop-icon svelte-1hrwlue">📂</span> <span>Drop folder here</span>',f(e,"class","drop-overlay svelte-1hrwlue")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function di(l){let e,t,n=pe(l[28]),s=[];for(let i=0;i<n.length;i+=1)s[i]=mi(xo(l,n,i));const o=i=>j(s[i],1,1,()=>{s[i]=null});return{c(){e=d("div");for(let i=0;i<s.length;i+=1)s[i].c();f(e,"class","folder-list svelte-1hrwlue")},m(i,u){w(i,e,u);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(e,null);t=!0},p(i,u){if(u[0]&268435456|u[2]&24576){n=pe(i[28]);let a;for(a=0;a<n.length;a+=1){const c=xo(i,n,a);s[a]?(s[a].p(c,u),P(s[a],1)):(s[a]=mi(c),s[a].c(),P(s[a],1),s[a].m(e,null))}for(Se(),a=n.length;a<s.length;a+=1)o(a);Te()}},i(i){if(!t){for(let u=0;u<n.length;u+=1)P(s[u]);t=!0}},o(i){s=s.filter(vn);for(let u=0;u<s.length;u+=1)j(s[u]);t=!1},d(i){i&&k(e),Me(s,i)}}}function O_(l){let e=l[204].isMain?"MAIN":"dependency",t;return{c(){t=T(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&268435456&&e!==(e=n[204].isMain?"MAIN":"dependency")&&B(t,e)},d(n){n&&k(t)}}}function pi(l){let e,t,n;function s(){return l[100](l[206])}return{c(){e=d("button"),e.textContent="⭐",f(e,"type","button"),f(e,"class","set-main-btn svelte-1hrwlue"),f(e,"title","Set as main")},m(o,i){w(o,e,i),t||(n=ee(e,"click",s),t=!0)},p(o,i){l=o},d(o){o&&k(e),t=!1,n()}}}function mi(l){let e,t,n=l[204].isMain?"📁":"📂",s,o,i,u=l[204].name+"",a,c,_,p,m,h,v=l[204].fileCount+"",g,S,C,$,y,D,E,L,z;p=new Xe({props:{variant:l[204].isMain?"success":"secondary",$$slots:{default:[O_]},$$scope:{ctx:l}}});let q=!l[204].isMain&&pi(l);function O(){return l[101](l[206])}return{c(){e=d("div"),t=d("span"),s=T(n),o=b(),i=d("strong"),a=T(u),c=T("/"),_=b(),_e(p.$$.fragment),m=b(),h=d("span"),g=T(v),S=T(" files"),C=b(),q&&q.c(),$=b(),y=d("button"),y.textContent="✕",D=b(),f(t,"class","folder-icon svelte-1hrwlue"),f(i,"class","svelte-1hrwlue"),f(h,"class","file-count svelte-1hrwlue"),f(y,"type","button"),f(y,"class","remove-btn svelte-1hrwlue"),f(e,"class","folder-item svelte-1hrwlue")},m(N,M){w(N,e,M),r(e,t),r(t,s),r(e,o),r(e,i),r(i,a),r(i,c),r(e,_),fe(p,e,null),r(e,m),r(e,h),r(h,g),r(h,S),r(e,C),q&&q.m(e,null),r(e,$),r(e,y),r(e,D),E=!0,L||(z=ee(y,"click",O),L=!0)},p(N,M){l=N,(!E||M[0]&268435456)&&n!==(n=l[204].isMain?"📁":"📂")&&B(s,n),(!E||M[0]&268435456)&&u!==(u=l[204].name+"")&&B(a,u);const G={};M[0]&268435456&&(G.variant=l[204].isMain?"success":"secondary"),M[0]&268435456|M[7]&4&&(G.$$scope={dirty:M,ctx:l}),p.$set(G),(!E||M[0]&268435456)&&v!==(v=l[204].fileCount+"")&&B(g,v),l[204].isMain?q&&(q.d(1),q=null):q?q.p(l,M):(q=pi(l),q.c(),q.m(e,$))},i(N){E||(P(p.$$.fragment,N),E=!0)},o(N){j(p.$$.fragment,N),E=!1},d(N){N&&k(e),ce(p),q&&q.d(),L=!1,z()}}}function I_(l){let e;return{c(){e=T("➕ Add Folder")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function vi(l){let e,t,n=l[207].name+"",s,o,i,u,a=l[208]>0&&hi(l);return{c(){e=T("✓ Main: "),t=d("strong"),s=T(n),o=T("/"),i=b(),a&&a.c(),u=Ie()},m(c,_){w(c,e,_),w(c,t,_),r(t,s),r(t,o),w(c,i,_),a&&a.m(c,_),w(c,u,_)},p(c,_){_[0]&268435456&&n!==(n=c[207].name+"")&&B(s,n),c[208]>0?a?a.p(c,_):(a=hi(c),a.c(),a.m(u.parentNode,u)):a&&(a.d(1),a=null)},d(c){c&&(k(e),k(t),k(i),k(u)),a&&a.d(c)}}}function F_(l){let e;return{c(){e=T("⚠️ No main folder selected. Click ⭐ to set one as main.")},m(t,n){w(t,e,n)},p:be,d(t){t&&k(e)}}}function B_(l){let e;return{c(){e=T("No folders selected. Add your main service folder and any dependencies.")},m(t,n){w(t,e,n)},p:be,d(t){t&&k(e)}}}function hi(l){let e,t=l[208]+"",n,s,o=l[208]===1?"y":"ies",i;return{c(){e=T("+ "),n=T(t),s=T(" dependenc"),i=T(o)},m(u,a){w(u,e,a),w(u,n,a),w(u,s,a),w(u,i,a)},p(u,a){a[0]&268435456&&t!==(t=u[208]+"")&&B(n,t),a[0]&268435456&&o!==(o=u[208]===1?"y":"ies")&&B(i,o)},d(u){u&&(k(e),k(n),k(s),k(i))}}}function gi(l){let e,t,n,s,o,i,u,a,c,_,p,m,h,v,g,S,C,$,y,D,E,L;return o=new Xe({props:{variant:l[33]==="from folder"?"success":l[33]==="multi-folder"?"info":"warning",$$slots:{default:[U_]},$$scope:{ctx:l}}}),{c(){e=d("div"),t=d("div"),n=d("label"),s=T(`🐳 Dockerfile
                    `),_e(o.$$.fragment),i=b(),u=d("textarea"),a=b(),c=d("div"),_=d("select"),p=d("option"),p.textContent="FROM...",m=d("option"),m.textContent="python:3.11-slim",h=d("option"),h.textContent="python:3.12-slim",v=d("option"),v.textContent="node:20-alpine",g=d("option"),g.textContent="node:18-alpine",S=d("option"),S.textContent="golang:1.21-alpine",C=d("option"),C.textContent="nginx:alpine",$=b(),y=d("input"),f(n,"class","svelte-1hrwlue"),f(t,"class","dockerfile-header svelte-1hrwlue"),f(u,"rows","8"),f(u,"class","dockerfile-editor svelte-1hrwlue"),f(u,"spellcheck","false"),p.__value="",ne(p,p.__value),m.__value="python:3.11-slim",ne(m,m.__value),h.__value="python:3.12-slim",ne(h,h.__value),v.__value="node:20-alpine",ne(v,v.__value),g.__value="node:18-alpine",ne(g,g.__value),S.__value="golang:1.21-alpine",ne(S,S.__value),C.__value="nginx:alpine",ne(C,C.__value),f(_,"class","svelte-1hrwlue"),l[35]===void 0&&xe(()=>l[104].call(_)),f(y,"type","text"),f(y,"placeholder","CMD (e.g. uvicorn main:app ...)"),f(y,"class","svelte-1hrwlue"),f(c,"class","dockerfile-quick-fields svelte-1hrwlue"),f(e,"class","dockerfile-preview svelte-1hrwlue")},m(z,q){w(z,e,q),r(e,t),r(t,n),r(n,s),fe(o,n,null),r(e,i),r(e,u),ne(u,l[32]),r(e,a),r(e,c),r(c,_),r(_,p),r(_,m),r(_,h),r(_,v),r(_,g),r(_,S),r(_,C),Re(_,l[35],!0),r(c,$),r(c,y),ne(y,l[36]),D=!0,E||(L=[ee(u,"input",l[103]),ee(_,"change",l[104]),ee(_,"change",l[105]),ee(y,"input",l[106]),ee(y,"change",l[107])],E=!0)},p(z,q){const O={};q[1]&4&&(O.variant=z[33]==="from folder"?"success":z[33]==="multi-folder"?"info":"warning"),q[1]&4|q[7]&4&&(O.$$scope={dirty:q,ctx:z}),o.$set(O),q[1]&2&&ne(u,z[32]),q[1]&16&&Re(_,z[35]),q[1]&32&&y.value!==z[36]&&ne(y,z[36])},i(z){D||(P(o.$$.fragment,z),D=!0)},o(z){j(o.$$.fragment,z),D=!1},d(z){z&&k(e),ce(o),E=!1,Ve(L)}}}function U_(l){let e;return{c(){e=T(l[33])},m(t,n){w(t,e,n)},p(t,n){n[1]&4&&B(e,t[33])},d(t){t&&k(e)}}}function bi(l){let e,t,n,s,o,i,u,a,c,_,p,m,h,v,g,S,C,$,y,D,E,L,z,q,O,N,M,G,F,A,U,R,I,H,Y,Q,X,oe,x=l[21].length>0&&ki(l);return E=new Be({props:{size:"sm",$$slots:{default:[G_]},$$scope:{ctx:l}}}),E.$on("click",l[112]),z=new Be({props:{variant:"ghost",size:"sm",$$slots:{default:[W_]},$$scope:{ctx:l}}}),z.$on("click",l[113]),{c(){e=d("div"),t=d("div"),n=d("label"),n.textContent="Git Repository URL *",s=b(),o=d("input"),i=b(),u=d("small"),u.textContent="HTTPS URL (SSH not supported)",a=b(),c=d("div"),_=d("label"),_.textContent="Branch",p=b(),m=d("input"),h=b(),v=d("div"),g=d("label"),g.textContent="Folders to Include",S=b(),x&&x.c(),C=b(),$=d("div"),y=d("input"),D=b(),_e(E.$$.fragment),L=b(),_e(z.$$.fragment),q=b(),O=d("small"),O.textContent="Leave empty to use entire repo. Add paths for multi-folder builds (main folder contains Dockerfile).",N=b(),M=d("details"),G=d("summary"),G.textContent="🔐 Private repository?",F=b(),A=d("div"),U=d("label"),U.textContent="Personal Access Token",R=b(),I=d("input"),H=b(),Y=d("small"),Y.innerHTML="Needs <code>repo</code> scope for private repos",f(n,"for","git-url"),f(n,"class","svelte-1hrwlue"),f(o,"id","git-url"),f(o,"type","url"),f(o,"placeholder","https://github.com/user/repo"),f(o,"class","svelte-1hrwlue"),f(u,"class","svelte-1hrwlue"),f(t,"class","form-group svelte-1hrwlue"),f(_,"for","git-branch"),f(_,"class","svelte-1hrwlue"),f(m,"id","git-branch"),f(m,"type","text"),f(m,"placeholder","main"),f(m,"class","svelte-1hrwlue"),f(c,"class","form-group svelte-1hrwlue"),f(g,"class","svelte-1hrwlue"),f(y,"type","text"),f(y,"placeholder","e.g. services/my_api"),f(y,"class","svelte-1hrwlue"),f($,"class","folder-input svelte-1hrwlue"),f(O,"class","svelte-1hrwlue"),f(v,"class","form-group svelte-1hrwlue"),f(G,"class","svelte-1hrwlue"),f(U,"for","git-token"),f(U,"class","svelte-1hrwlue"),f(I,"id","git-token"),f(I,"type","password"),f(I,"placeholder","ghp_xxxxxxxxxxxx"),f(I,"class","svelte-1hrwlue"),f(Y,"class","svelte-1hrwlue"),f(A,"class","form-group svelte-1hrwlue"),f(M,"class","private-repo svelte-1hrwlue"),f(e,"class","source-config svelte-1hrwlue")},m(V,J){w(V,e,J),r(e,t),r(t,n),r(t,s),r(t,o),ne(o,l[18]),r(t,i),r(t,u),r(e,a),r(e,c),r(c,_),r(c,p),r(c,m),ne(m,l[19]),r(e,h),r(e,v),r(v,g),r(v,S),x&&x.m(v,null),r(v,C),r(v,$),r($,y),ne(y,l[22]),r($,D),fe(E,$,null),r($,L),fe(z,$,null),r(v,q),r(v,O),r(e,N),r(e,M),r(M,G),r(M,F),r(M,A),r(A,U),r(A,R),r(A,I),ne(I,l[20]),r(A,H),r(A,Y),Q=!0,X||(oe=[ee(o,"input",l[108]),ee(m,"input",l[109]),ee(y,"input",l[111]),ee(I,"input",l[114])],X=!0)},p(V,J){J[0]&262144&&o.value!==V[18]&&ne(o,V[18]),J[0]&524288&&m.value!==V[19]&&ne(m,V[19]),V[21].length>0?x?(x.p(V,J),J[0]&2097152&&P(x,1)):(x=ki(V),x.c(),P(x,1),x.m(v,C)):x&&(Se(),j(x,1,1,()=>{x=null}),Te()),J[0]&4194304&&y.value!==V[22]&&ne(y,V[22]);const ae={};J[7]&4&&(ae.$$scope={dirty:J,ctx:V}),E.$set(ae);const W={};J[7]&4&&(W.$$scope={dirty:J,ctx:V}),z.$set(W),J[0]&1048576&&I.value!==V[20]&&ne(I,V[20])},i(V){Q||(P(x),P(E.$$.fragment,V),P(z.$$.fragment,V),Q=!0)},o(V){j(x),j(E.$$.fragment,V),j(z.$$.fragment,V),Q=!1},d(V){V&&k(e),x&&x.d(),ce(E),ce(z),X=!1,Ve(oe)}}}function ki(l){let e,t,n=pe(l[21]),s=[];for(let i=0;i<n.length;i+=1)s[i]=wi(Xo(l,n,i));const o=i=>j(s[i],1,1,()=>{s[i]=null});return{c(){e=d("div");for(let i=0;i<s.length;i+=1)s[i].c();f(e,"class","folder-list svelte-1hrwlue")},m(i,u){w(i,e,u);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(e,null);t=!0},p(i,u){if(u[0]&2097152|u[2]&131072){n=pe(i[21]);let a;for(a=0;a<n.length;a+=1){const c=Xo(i,n,a);s[a]?(s[a].p(c,u),P(s[a],1)):(s[a]=wi(c),s[a].c(),P(s[a],1),s[a].m(e,null))}for(Se(),a=n.length;a<s.length;a+=1)o(a);Te()}},i(i){if(!t){for(let u=0;u<n.length;u+=1)P(s[u]);t=!0}},o(i){s=s.filter(vn);for(let u=0;u<s.length;u+=1)j(s[u]);t=!1},d(i){i&&k(e),Me(s,i)}}}function H_(l){let e=l[204].isMain?"MAIN":"dependency",t;return{c(){t=T(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&2097152&&e!==(e=n[204].isMain?"MAIN":"dependency")&&B(t,e)},d(n){n&&k(t)}}}function wi(l){let e,t,n=l[204].isMain?"📁":"📂",s,o,i,u=l[204].path+"",a,c,_,p,m,h,v,g,S;_=new Xe({props:{variant:l[204].isMain?"success":"secondary",$$slots:{default:[H_]},$$scope:{ctx:l}}});function C(){return l[110](l[206])}return{c(){e=d("div"),t=d("span"),s=T(n),o=b(),i=d("strong"),a=T(u),c=b(),_e(_.$$.fragment),p=b(),m=d("button"),m.textContent="✕",h=b(),f(i,"class","svelte-1hrwlue"),f(m,"type","button"),f(m,"class","remove-btn svelte-1hrwlue"),f(e,"class","folder-item svelte-1hrwlue")},m($,y){w($,e,y),r(e,t),r(t,s),r(e,o),r(e,i),r(i,a),r(e,c),fe(_,e,null),r(e,p),r(e,m),r(e,h),v=!0,g||(S=ee(m,"click",C),g=!0)},p($,y){l=$,(!v||y[0]&2097152)&&n!==(n=l[204].isMain?"📁":"📂")&&B(s,n),(!v||y[0]&2097152)&&u!==(u=l[204].path+"")&&B(a,u);const D={};y[0]&2097152&&(D.variant=l[204].isMain?"success":"secondary"),y[0]&2097152|y[7]&4&&(D.$$scope={dirty:y,ctx:l}),_.$set(D)},i($){v||(P(_.$$.fragment,$),v=!0)},o($){j(_.$$.fragment,$),v=!1},d($){$&&k(e),ce(_),g=!1,S()}}}function G_(l){let e;return{c(){e=T("+ Main")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function W_(l){let e;return{c(){e=T("+ Dep")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function $i(l){let e,t,n,s,o,i,u,a,c;return{c(){e=d("div"),t=d("div"),n=d("label"),n.textContent="Docker Image *",s=b(),o=d("input"),i=b(),u=d("small"),u.textContent="Full image URL from DO Registry or Docker Hub",f(n,"for","image-url"),f(n,"class","svelte-1hrwlue"),f(o,"id","image-url"),f(o,"type","text"),f(o,"placeholder","registry.digitalocean.com/my-registry/app:latest"),f(o,"class","svelte-1hrwlue"),f(u,"class","svelte-1hrwlue"),f(t,"class","form-group svelte-1hrwlue"),f(e,"class","source-config svelte-1hrwlue")},m(_,p){w(_,e,p),r(e,t),r(t,n),r(t,s),r(t,o),ne(o,l[23]),r(t,i),r(t,u),a||(c=ee(o,"input",l[115]),a=!0)},p(_,p){p[0]&8388608&&o.value!==_[23]&&ne(o,_[23])},d(_){_&&k(e),a=!1,c()}}}function Ci(l){let e,t,n,s,o,i,u,a,c,_,p,m,h,v,g,S,C,$,y,D,E,L,z,q,O,N,M,G,F=l[24]&&yi(l);return{c(){e=d("div"),t=d("div"),n=d("label"),n.textContent="Docker Image File (.tar) *",s=b(),o=d("input"),i=b(),F&&F.c(),u=b(),a=d("small"),a.innerHTML="Export from Docker with: <code>docker save myimage:latest -o image.tar</code>",c=b(),_=d("div"),p=d("label"),p.textContent="Image Name *",m=b(),h=d("input"),v=b(),g=d("small"),g.textContent="The image name/tag as it appears in the tar file",S=b(),C=d("div"),$=d("div"),y=d("label"),y.textContent="Container Port",D=b(),E=d("input"),L=b(),z=d("div"),q=d("label"),q.textContent="Host Port",O=b(),N=d("input"),f(n,"for","image-file"),f(n,"class","svelte-1hrwlue"),f(o,"id","image-file"),f(o,"type","file"),f(o,"accept",".tar,.tar.gz"),f(o,"class","svelte-1hrwlue"),f(a,"class","svelte-1hrwlue"),f(t,"class","form-group svelte-1hrwlue"),f(p,"for","image-name"),f(p,"class","svelte-1hrwlue"),f(h,"id","image-name"),f(h,"type","text"),f(h,"placeholder","myapp:latest"),f(h,"class","svelte-1hrwlue"),f(g,"class","svelte-1hrwlue"),f(_,"class","form-group svelte-1hrwlue"),f(y,"for","container-port"),f(y,"class","svelte-1hrwlue"),f(E,"id","container-port"),f(E,"type","number"),f(E,"placeholder",l[16]),f(E,"class","svelte-1hrwlue"),f($,"class","form-group svelte-1hrwlue"),f(q,"for","host-port"),f(q,"class","svelte-1hrwlue"),f(N,"id","host-port"),f(N,"type","number"),f(N,"placeholder",l[16]),f(N,"class","svelte-1hrwlue"),f(z,"class","form-group svelte-1hrwlue"),f(C,"class","form-row svelte-1hrwlue"),f(e,"class","source-config svelte-1hrwlue")},m(A,U){w(A,e,U),r(e,t),r(t,n),r(t,s),r(t,o),r(t,i),F&&F.m(t,null),r(t,u),r(t,a),r(e,c),r(e,_),r(_,p),r(_,m),r(_,h),ne(h,l[25]),r(_,v),r(_,g),r(e,S),r(e,C),r(C,$),r($,y),r($,D),r($,E),ne(E,l[26]),r(C,L),r(C,z),r(z,q),r(z,O),r(z,N),ne(N,l[27]),M||(G=[ee(o,"change",l[80]),ee(h,"input",l[116]),ee(E,"input",l[117]),ee(N,"input",l[118])],M=!0)},p(A,U){A[24]?F?F.p(A,U):(F=yi(A),F.c(),F.m(t,u)):F&&(F.d(1),F=null),U[0]&33554432&&h.value!==A[25]&&ne(h,A[25]),U[0]&65536&&f(E,"placeholder",A[16]),U[0]&67108864&&Kt(E.value)!==A[26]&&ne(E,A[26]),U[0]&65536&&f(N,"placeholder",A[16]),U[0]&134217728&&Kt(N.value)!==A[27]&&ne(N,A[27])},d(A){A&&k(e),F&&F.d(),M=!1,Ve(G)}}}function yi(l){let e,t,n=l[24].name+"",s,o,i=(l[24].size/1024/1024).toFixed(2)+"",u,a;return{c(){e=d("div"),t=T("📦 "),s=T(n),o=T(" ("),u=T(i),a=T(" MB)"),f(e,"class","file-selected svelte-1hrwlue")},m(c,_){w(c,e,_),r(e,t),r(e,s),r(e,o),r(e,u),r(e,a)},p(c,_){_[0]&16777216&&n!==(n=c[24].name+"")&&B(s,n),_[0]&16777216&&i!==(i=(c[24].size/1024/1024).toFixed(2)+"")&&B(u,i)},d(c){c&&k(e)}}}function Si(l){let e,t,n,s,o,i,u,a;return{c(){e=d("div"),t=d("label"),t.textContent="App Port",n=b(),s=d("input"),o=b(),i=d("small"),i.textContent="Port your app listens on inside the container",f(t,"for","deploy-port"),f(t,"class","svelte-1hrwlue"),f(s,"id","deploy-port"),f(s,"type","number"),f(s,"min","1"),f(s,"max","65535"),f(s,"class","svelte-1hrwlue"),f(i,"class","svelte-1hrwlue"),f(e,"class","form-group svelte-1hrwlue")},m(c,_){w(c,e,_),r(e,t),r(e,n),r(e,s),ne(s,l[16]),r(e,o),r(e,i),u||(a=ee(s,"input",l[119]),u=!0)},p(c,_){_[0]&65536&&Kt(s.value)!==c[16]&&ne(s,c[16])},d(c){c&&k(e),u=!1,a()}}}function Ti(l){let e,t,n,s,o,i,u,a;return{c(){e=d("div"),t=d("label"),t.textContent="Command Override",n=b(),s=d("input"),o=b(),i=d("small"),i.textContent="Override Dockerfile CMD (e.g., different entrypoint for worker vs webservice)",f(t,"for","custom-cmd"),f(t,"class","svelte-1hrwlue"),f(s,"id","custom-cmd"),f(s,"type","text"),f(s,"placeholder","python worker.py"),f(s,"class","svelte-1hrwlue"),f(i,"class","svelte-1hrwlue"),f(e,"class","form-group svelte-1hrwlue")},m(c,_){w(c,e,_),r(e,t),r(e,n),r(e,s),ne(s,l[12]),r(e,o),r(e,i),u||(a=ee(s,"input",l[120]),u=!0)},p(c,_){_[0]&4096&&s.value!==c[12]&&ne(s,c[12])},d(c){c&&k(e),u=!1,a()}}}function zi(l){let e,t,n,s,o,i,u,a,c,_,p,m,h,v,g,S,C;return{c(){e=d("div"),t=d("label"),t.textContent="Cron Schedule *",n=b(),s=d("input"),o=b(),i=d("small"),i.textContent='Standard cron format: minute hour day month weekday (e.g., "0 */6 * * *" = every 6 hours)',u=b(),a=d("div"),c=d("button"),c.textContent="Every min",_=b(),p=d("button"),p.textContent="Hourly",m=b(),h=d("button"),h.textContent="Daily",v=b(),g=d("button"),g.textContent="Weekly",f(t,"for","cron-schedule"),f(t,"class","svelte-1hrwlue"),f(s,"id","cron-schedule"),f(s,"type","text"),f(s,"placeholder","0 * * * *"),s.required=!0,f(s,"class","svelte-1hrwlue"),f(i,"class","svelte-1hrwlue"),f(c,"type","button"),f(c,"class","preset-btn svelte-1hrwlue"),f(p,"type","button"),f(p,"class","preset-btn svelte-1hrwlue"),f(h,"type","button"),f(h,"class","preset-btn svelte-1hrwlue"),f(g,"type","button"),f(g,"class","preset-btn svelte-1hrwlue"),f(a,"class","cron-presets svelte-1hrwlue"),f(e,"class","form-group svelte-1hrwlue")},m($,y){w($,e,y),r(e,t),r(e,n),r(e,s),ne(s,l[13]),r(e,o),r(e,i),r(e,u),r(e,a),r(a,c),r(a,_),r(a,p),r(a,m),r(a,h),r(a,v),r(a,g),S||(C=[ee(s,"input",l[121]),ee(c,"click",l[122]),ee(p,"click",l[123]),ee(h,"click",l[124]),ee(g,"click",l[125])],S=!0)},p($,y){y[0]&8192&&s.value!==$[13]&&ne(s,$[13])},d($){$&&k(e),S=!1,Ve(C)}}}function Di(l){let e,t,n,s=l[56]?"▼":"▶",o,i,u,a,c=l[17].trim(),_,p,m,h,v=c&&Ei(l),g=l[56]&&qi(l);return{c(){e=d("div"),t=d("button"),n=d("span"),o=T(s),i=b(),u=d("span"),u.textContent="Environment Variables",a=b(),v&&v.c(),_=b(),g&&g.c(),f(n,"class","toggle-icon svelte-1hrwlue"),f(t,"type","button"),f(t,"class","section-toggle svelte-1hrwlue"),f(e,"class","collapsible-section svelte-1hrwlue"),ke(e,"expanded",l[56])},m(S,C){w(S,e,C),r(e,t),r(t,n),r(n,o),r(t,i),r(t,u),r(t,a),v&&v.m(t,null),r(e,_),g&&g.m(e,null),p=!0,m||(h=ee(t,"click",l[126]),m=!0)},p(S,C){(!p||C[1]&33554432)&&s!==(s=S[56]?"▼":"▶")&&B(o,s),C[0]&131072&&(c=S[17].trim()),c?v?(v.p(S,C),C[0]&131072&&P(v,1)):(v=Ei(S),v.c(),P(v,1),v.m(t,null)):v&&(Se(),j(v,1,1,()=>{v=null}),Te()),S[56]?g?g.p(S,C):(g=qi(S),g.c(),g.m(e,null)):g&&(g.d(1),g=null),(!p||C[1]&33554432)&&ke(e,"expanded",S[56])},i(S){p||(P(v),p=!0)},o(S){j(v),p=!1},d(S){S&&k(e),v&&v.d(),g&&g.d(),m=!1,h()}}}function Ei(l){let e,t;return e=new Xe({props:{variant:"info",$$slots:{default:[V_]},$$scope:{ctx:l}}}),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const o={};s[0]&131072|s[7]&4&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){j(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function V_(l){let e=l[17].trim().split(`
`).filter(mr).length+"",t,n;return{c(){t=T(e),n=T(" vars")},m(s,o){w(s,t,o),w(s,n,o)},p(s,o){o[0]&131072&&e!==(e=s[17].trim().split(`
`).filter(mr).length+"")&&B(t,e)},d(s){s&&(k(t),k(n))}}}function qi(l){let e,t,n,s,o,i;return{c(){e=d("div"),t=d("textarea"),n=b(),s=d("small"),s.textContent="One per line: KEY=value",f(t,"id","deploy-envvars"),f(t,"rows","3"),f(t,"placeholder","KEY=value ANOTHER_KEY=value"),f(t,"class","svelte-1hrwlue"),f(s,"class","svelte-1hrwlue"),f(e,"class","section-content svelte-1hrwlue")},m(u,a){w(u,e,a),r(e,t),ne(t,l[17]),r(e,n),r(e,s),o||(i=ee(t,"input",l[127]),o=!0)},p(u,a){a[0]&131072&&ne(t,u[17])},d(u){u&&k(e),o=!1,i()}}}function Li(l){let e,t,n,s=l[57]?"▼":"▶",o,i,u,a,c=l[0]==="service"&&l[51]||Object.values(l[50]).some(_r),_,p,m,h,v=c&&Pi(l),g=l[57]&&Ni(l);return{c(){e=d("div"),t=d("button"),n=d("span"),o=T(s),i=b(),u=d("span"),u.textContent="🔧 Service Configuration",a=b(),v&&v.c(),_=b(),g&&g.c(),f(n,"class","toggle-icon svelte-1hrwlue"),f(t,"type","button"),f(t,"class","section-toggle svelte-1hrwlue"),f(e,"class","collapsible-section svelte-1hrwlue"),ke(e,"expanded",l[57])},m(S,C){w(S,e,C),r(e,t),r(t,n),r(n,o),r(t,i),r(t,u),r(t,a),v&&v.m(t,null),r(e,_),g&&g.m(e,null),p=!0,m||(h=ee(t,"click",l[128]),m=!0)},p(S,C){(!p||C[1]&67108864)&&s!==(s=S[57]?"▼":"▶")&&B(o,s),C[0]&1|C[1]&1572864&&(c=S[0]==="service"&&S[51]||Object.values(S[50]).some(_r)),c?v?C[0]&1|C[1]&1572864&&P(v,1):(v=Pi(S),v.c(),P(v,1),v.m(t,null)):v&&(Se(),j(v,1,1,()=>{v=null}),Te()),S[57]?g?g.p(S,C):(g=Ni(S),g.c(),g.m(e,null)):g&&(g.d(1),g=null),(!p||C[1]&67108864)&&ke(e,"expanded",S[57])},i(S){p||(P(v),p=!0)},o(S){j(v),p=!1},d(S){S&&k(e),v&&v.d(),g&&g.d(),m=!1,h()}}}function Pi(l){let e,t;return e=new Xe({props:{variant:"info",$$slots:{default:[J_]},$$scope:{ctx:l}}}),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){j(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function J_(l){let e;return{c(){e=T("configured")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function Ni(l){let e,t,n,s,o,i,u,a,c,_,p,m,h,v,g,S,C,$,y,D,E=l[48]&&Ri(l),L=l[0]==="service"&&Mi(l);return{c(){e=d("div"),t=d("label"),n=d("input"),s=b(),o=d("span"),o.textContent="Auto-inject service discovery",i=b(),u=d("small"),u.textContent="Injects DATABASE_URL, REDIS_URL, etc. based on dependencies",a=b(),E&&E.c(),c=b(),_=d("div"),p=b(),m=d("label"),h=d("input"),v=b(),g=d("span"),g.textContent="💾 Persist data (mount volume)",S=b(),C=d("small"),C.textContent="Mounts /data volume for databases and stateful services",$=b(),L&&L.c(),f(n,"type","checkbox"),f(n,"class","svelte-1hrwlue"),f(t,"class","checkbox-label svelte-1hrwlue"),f(u,"class","svelte-1hrwlue"),f(_,"class","config-divider svelte-1hrwlue"),f(h,"type","checkbox"),f(h,"class","svelte-1hrwlue"),f(m,"class","checkbox-label svelte-1hrwlue"),f(C,"class","svelte-1hrwlue"),f(e,"class","section-content service-config svelte-1hrwlue")},m(z,q){w(z,e,q),r(e,t),r(t,n),n.checked=l[48],r(t,s),r(t,o),r(e,i),r(e,u),r(e,a),E&&E.m(e,null),r(e,c),r(e,_),r(e,p),r(e,m),r(m,h),h.checked=l[49],r(m,v),r(m,g),r(e,S),r(e,C),r(e,$),L&&L.m(e,null),y||(D=[ee(n,"change",l[129]),ee(h,"change",l[134])],y=!0)},p(z,q){q[1]&131072&&(n.checked=z[48]),z[48]?E?E.p(z,q):(E=Ri(z),E.c(),E.m(e,c)):E&&(E.d(1),E=null),q[1]&262144&&(h.checked=z[49]),z[0]==="service"?L?L.p(z,q):(L=Mi(z),L.c(),L.m(e,null)):L&&(L.d(1),L=null)},d(z){z&&k(e),E&&E.d(),L&&L.d(),y=!1,Ve(D)}}}function Ri(l){let e,t,n,s,o,i,u,a,c,_,p,m,h,v,g,S,C,$,y,D,E;return{c(){e=d("div"),t=d("label"),t.textContent="Dependencies:",n=b(),s=d("div"),o=d("label"),i=d("input"),u=T(`
                      🐘 PostgreSQL`),a=b(),c=d("label"),_=d("input"),p=T(`
                      ⚡ Redis`),m=b(),h=d("label"),v=d("input"),g=T(`
                      🐬 MySQL`),S=b(),C=d("label"),$=d("input"),y=T(`
                      🍃 MongoDB`),f(i,"type","checkbox"),f(i,"class","svelte-1hrwlue"),f(o,"class","dep-item svelte-1hrwlue"),f(_,"type","checkbox"),f(_,"class","svelte-1hrwlue"),f(c,"class","dep-item svelte-1hrwlue"),f(v,"type","checkbox"),f(v,"class","svelte-1hrwlue"),f(h,"class","dep-item svelte-1hrwlue"),f($,"type","checkbox"),f($,"class","svelte-1hrwlue"),f(C,"class","dep-item svelte-1hrwlue"),f(s,"class","dep-list svelte-1hrwlue"),f(e,"class","dependencies svelte-1hrwlue")},m(L,z){w(L,e,z),r(e,t),r(e,n),r(e,s),r(s,o),r(o,i),i.checked=l[50].postgres,r(o,u),r(s,a),r(s,c),r(c,_),_.checked=l[50].redis,r(c,p),r(s,m),r(s,h),r(h,v),v.checked=l[50].mysql,r(h,g),r(s,S),r(s,C),r(C,$),$.checked=l[50].mongo,r(C,y),D||(E=[ee(i,"change",l[130]),ee(_,"change",l[131]),ee(v,"change",l[132]),ee($,"change",l[133])],D=!0)},p(L,z){z[1]&524288&&(i.checked=L[50].postgres),z[1]&524288&&(_.checked=L[50].redis),z[1]&524288&&(v.checked=L[50].mysql),z[1]&524288&&($.checked=L[50].mongo)},d(L){L&&k(e),D=!1,Ve(E)}}}function Mi(l){let e,t,n,s,o,i,u,a,c,_,p,m,h=l[51]&&Ai(l);return{c(){e=d("div"),t=b(),n=d("label"),s=d("input"),o=b(),i=d("span"),i.textContent="🌐 Setup domain (Cloudflare)",u=b(),a=d("small"),a.textContent="Auto-provision subdomain with SSL via Cloudflare",c=b(),h&&h.c(),_=Ie(),f(e,"class","config-divider svelte-1hrwlue"),f(s,"type","checkbox"),f(s,"class","svelte-1hrwlue"),f(n,"class","checkbox-label svelte-1hrwlue"),f(a,"class","svelte-1hrwlue")},m(v,g){w(v,e,g),w(v,t,g),w(v,n,g),r(n,s),s.checked=l[51],r(n,o),r(n,i),w(v,u,g),w(v,a,g),w(v,c,g),h&&h.m(v,g),w(v,_,g),p||(m=ee(s,"change",l[135]),p=!0)},p(v,g){g[1]&1048576&&(s.checked=v[51]),v[51]?h?h.p(v,g):(h=Ai(v),h.c(),h.m(_.parentNode,_)):h&&(h.d(1),h=null)},d(v){v&&(k(e),k(t),k(n),k(u),k(a),k(c),k(_)),h&&h.d(v),p=!1,m()}}}function Ai(l){let e,t,n,s,o,i=(l[59]||"app-project-env.domain.com")+"",u,a,c,_,p,m,h,v,g,S,C,$,y,D,E;return{c(){e=d("div"),t=d("div"),n=d("label"),n.textContent="Domain Preview:",s=b(),o=d("code"),u=T(i),a=b(),c=d("div"),_=d("label"),_.textContent="Base Domain",p=b(),m=d("input"),h=b(),v=d("div"),g=d("label"),g.innerHTML='Custom Aliases <small class="svelte-1hrwlue">(optional)</small>',S=b(),C=d("input"),$=b(),y=d("small"),y.textContent="Comma-separated custom domains (requires DNS setup)",f(n,"class","svelte-1hrwlue"),f(o,"class","svelte-1hrwlue"),f(t,"class","domain-preview svelte-1hrwlue"),f(_,"for","base-domain"),f(_,"class","svelte-1hrwlue"),f(m,"id","base-domain"),f(m,"type","text"),f(m,"placeholder","example.com"),f(m,"class","svelte-1hrwlue"),f(c,"class","form-group svelte-1hrwlue"),f(g,"for","domain-aliases"),f(g,"class","svelte-1hrwlue"),f(C,"id","domain-aliases"),f(C,"type","text"),f(C,"placeholder","api.myclient.com, app.example.com"),f(C,"class","svelte-1hrwlue"),f(y,"class","svelte-1hrwlue"),f(v,"class","form-group svelte-1hrwlue"),f(e,"class","domain-config svelte-1hrwlue")},m(L,z){w(L,e,z),r(e,t),r(t,n),r(t,s),r(t,o),r(o,u),r(e,a),r(e,c),r(c,_),r(c,p),r(c,m),ne(m,l[10]),r(e,h),r(e,v),r(v,g),r(v,S),r(v,C),ne(C,l[52]),r(v,$),r(v,y),D||(E=[ee(m,"input",l[136]),ee(C,"input",l[137])],D=!0)},p(L,z){z[1]&268435456&&i!==(i=(L[59]||"app-project-env.domain.com")+"")&&B(u,i),z[0]&1024&&m.value!==L[10]&&ne(m,L[10]),z[1]&2097152&&C.value!==L[52]&&ne(C,L[52])},d(L){L&&k(e),D=!1,Ve(E)}}}function K_(l){let e,t;return e=new Xe({props:{variant:"info",$$slots:{default:[Q_]},$$scope:{ctx:l}}}),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const o={};s[0]&256|s[7]&4&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){j(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function Y_(l){let e,t;return e=new Xe({props:{variant:"info",$$slots:{default:[Z_]},$$scope:{ctx:l}}}),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const o={};s[0]&256|s[7]&4&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){j(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function Q_(l){let e=l[8].size+"",t,n;return{c(){t=T(e),n=T(" selected")},m(s,o){w(s,t,o),w(s,n,o)},p(s,o){o[0]&256&&e!==(e=s[8].size+"")&&B(t,e)},d(s){s&&(k(t),k(n))}}}function Z_(l){let e=l[8].size===1?"1 selected":"select 1",t;return{c(){t=T(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&256&&e!==(e=n[8].size===1?"1 selected":"select 1")&&B(t,e)},d(n){n&&k(t)}}}function ji(l){let e,t,n,s,o;return t=new Be({props:{variant:"ghost",size:"sm",$$slots:{default:[X_]},$$scope:{ctx:l}}}),t.$on("click",l[138]),s=new Be({props:{variant:"ghost",size:"sm",$$slots:{default:[x_]},$$scope:{ctx:l}}}),s.$on("click",l[139]),{c(){e=d("div"),_e(t.$$.fragment),n=b(),_e(s.$$.fragment),f(e,"class","server-actions svelte-1hrwlue")},m(i,u){w(i,e,u),fe(t,e,null),r(e,n),fe(s,e,null),o=!0},p(i,u){const a={};u[7]&4&&(a.$$scope={dirty:u,ctx:i}),t.$set(a);const c={};u[7]&4&&(c.$$scope={dirty:u,ctx:i}),s.$set(c)},i(i){o||(P(t.$$.fragment,i),P(s.$$.fragment,i),o=!0)},o(i){j(t.$$.fragment,i),j(s.$$.fragment,i),o=!1},d(i){i&&k(e),ce(t),ce(s)}}}function X_(l){let e;return{c(){e=T("✓ All")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function x_(l){let e;return{c(){e=T("✕ None")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function ed(l){let e,t,n,s;const o=[nd,ld],i=[];function u(a,c){return!a[40]||a[40].length===0?0:1}return t=u(l),n=i[t]=o[t](l),{c(){e=d("div"),n.c(),f(e,"class","server-list svelte-1hrwlue")},m(a,c){w(a,e,c),i[t].m(e,null),s=!0},p(a,c){let _=t;t=u(a),t===_?i[t].p(a,c):(Se(),j(i[_],1,1,()=>{i[_]=null}),Te(),n=i[t],n?n.p(a,c):(n=i[t]=o[t](a),n.c()),P(n,1),n.m(e,null))},i(a){s||(P(n),s=!0)},o(a){j(n),s=!1},d(a){a&&k(e),i[t].d()}}}function td(l){let e,t,n,s,o,i;function u(h,v){return h[0]==="stateful"?id:od}let a=u(l),c=a(l);const _=[ad,rd],p=[];function m(h,v){return!h[40]||h[40].length===0?0:1}return s=m(l),o=p[s]=_[s](l),{c(){e=d("div"),t=d("small"),c.c(),n=b(),o.c(),f(t,"class","select-hint svelte-1hrwlue"),f(e,"class","server-list single-select svelte-1hrwlue")},m(h,v){w(h,e,v),r(e,t),c.m(t,null),r(e,n),p[s].m(e,null),i=!0},p(h,v){a!==(a=u(h))&&(c.d(1),c=a(h),c&&(c.c(),c.m(t,null)));let g=s;s=m(h),s===g?p[s].p(h,v):(Se(),j(p[g],1,1,()=>{p[g]=null}),Te(),o=p[s],o?o.p(h,v):(o=p[s]=_[s](h),o.c()),P(o,1),o.m(e,null))},i(h){i||(P(o),i=!0)},o(h){j(o),i=!1},d(h){h&&k(e),c.d(),p[s].d()}}}function ld(l){let e,t,n=pe(l[40]),s=[];for(let i=0;i<n.length;i+=1)s[i]=Fi(Qo(l,n,i));const o=i=>j(s[i],1,1,()=>{s[i]=null});return{c(){for(let i=0;i<s.length;i+=1)s[i].c();e=Ie()},m(i,u){for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(i,u);w(i,e,u),t=!0},p(i,u){if(u[0]&256|u[1]&512|u[2]&32){n=pe(i[40]);let a;for(a=0;a<n.length;a+=1){const c=Qo(i,n,a);s[a]?(s[a].p(c,u),P(s[a],1)):(s[a]=Fi(c),s[a].c(),P(s[a],1),s[a].m(e.parentNode,e))}for(Se(),a=n.length;a<s.length;a+=1)o(a);Te()}},i(i){if(!t){for(let u=0;u<n.length;u+=1)P(s[u]);t=!0}},o(i){s=s.filter(vn);for(let u=0;u<s.length;u+=1)j(s[u]);t=!1},d(i){i&&k(e),Me(s,i)}}}function nd(l){let e,t,n=(l[7]||"any region")+"",s;return{c(){e=d("div"),t=T("No servers in "),s=T(n),f(e,"class","empty svelte-1hrwlue")},m(o,i){w(o,e,i),r(e,t),r(e,s)},p(o,i){i[0]&128&&n!==(n=(o[7]||"any region")+"")&&B(s,n)},i:be,o:be,d(o){o&&k(e)}}}function Oi(l){let e,t,n,s,o,i=(l[179].name||"unnamed")+"",u,a,c,_=l[199]+"",p,m,h,v,g,S;function C(){return l[141](l[199])}let $=l[179].project&&Ii(l);return{c(){e=d("label"),t=d("input"),s=b(),o=d("span"),u=T(i),a=b(),c=d("code"),p=T(_),m=b(),$&&$.c(),h=b(),f(t,"type","checkbox"),t.checked=n=l[8].has(l[199]),f(t,"class","svelte-1hrwlue"),f(o,"class","server-name svelte-1hrwlue"),f(c,"class","server-ip svelte-1hrwlue"),f(e,"class","server-item svelte-1hrwlue"),ke(e,"selected",l[8].has(l[199]))},m(y,D){w(y,e,D),r(e,t),r(e,s),r(e,o),r(o,u),r(e,a),r(e,c),r(c,p),r(e,m),$&&$.m(e,null),r(e,h),v=!0,g||(S=ee(t,"change",C),g=!0)},p(y,D){l=y,(!v||D[0]&256|D[1]&512&&n!==(n=l[8].has(l[199])))&&(t.checked=n),(!v||D[1]&512)&&i!==(i=(l[179].name||"unnamed")+"")&&B(u,i),(!v||D[1]&512)&&_!==(_=l[199]+"")&&B(p,_),l[179].project?$?($.p(l,D),D[1]&512&&P($,1)):($=Ii(l),$.c(),P($,1),$.m(e,h)):$&&(Se(),j($,1,1,()=>{$=null}),Te()),(!v||D[0]&256|D[1]&512)&&ke(e,"selected",l[8].has(l[199]))},i(y){v||(P($),v=!0)},o(y){j($),v=!1},d(y){y&&k(e),$&&$.d(),g=!1,S()}}}function Ii(l){let e,t;return e=new Xe({props:{variant:"info",$$slots:{default:[sd]},$$scope:{ctx:l}}}),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const o={};s[1]&512|s[7]&4&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){j(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function sd(l){let e=l[179].project+"",t;return{c(){t=T(e)},m(n,s){w(n,t,s)},p(n,s){s[1]&512&&e!==(e=n[179].project+"")&&B(t,e)},d(n){n&&k(t)}}}function Fi(l){let e,t,n=l[199]&&Oi(l);return{c(){n&&n.c(),e=Ie()},m(s,o){n&&n.m(s,o),w(s,e,o),t=!0},p(s,o){s[199]?n?(n.p(s,o),o[1]&512&&P(n,1)):(n=Oi(s),n.c(),P(n,1),n.m(e.parentNode,e)):n&&(Se(),j(n,1,1,()=>{n=null}),Te())},i(s){t||(P(n),t=!0)},o(s){j(n),t=!1},d(s){s&&k(e),n&&n.d(s)}}}function od(l){let e;return{c(){e=T("ℹ️ Scheduled jobs run on one server to avoid duplicate execution.")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function id(l){let e;return{c(){e=T("ℹ️ Stateful services run on a single server. For replication, deploy multiple named services.")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function rd(l){let e,t,n=pe(l[40]),s=[];for(let i=0;i<n.length;i+=1)s[i]=Hi(Zo(l,n,i));const o=i=>j(s[i],1,1,()=>{s[i]=null});return{c(){for(let i=0;i<s.length;i+=1)s[i].c();e=Ie()},m(i,u){for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(i,u);w(i,e,u),t=!0},p(i,u){if(u[0]&256|u[1]&512|u[2]&128){n=pe(i[40]);let a;for(a=0;a<n.length;a+=1){const c=Zo(i,n,a);s[a]?(s[a].p(c,u),P(s[a],1)):(s[a]=Hi(c),s[a].c(),P(s[a],1),s[a].m(e.parentNode,e))}for(Se(),a=n.length;a<s.length;a+=1)o(a);Te()}},i(i){if(!t){for(let u=0;u<n.length;u+=1)P(s[u]);t=!0}},o(i){s=s.filter(vn);for(let u=0;u<s.length;u+=1)j(s[u]);t=!1},d(i){i&&k(e),Me(s,i)}}}function ad(l){let e,t,n=(l[7]||"any region")+"",s;return{c(){e=d("div"),t=T("No servers in "),s=T(n),f(e,"class","empty svelte-1hrwlue")},m(o,i){w(o,e,i),r(e,t),r(e,s)},p(o,i){i[0]&128&&n!==(n=(o[7]||"any region")+"")&&B(s,n)},i:be,o:be,d(o){o&&k(e)}}}function Bi(l){let e,t,n,s,o,i=(l[179].name||"unnamed")+"",u,a,c,_=l[199]+"",p,m,h,v,g,S;function C(){return l[140](l[199])}let $=l[179].project&&Ui(l);return{c(){e=d("label"),t=d("input"),s=b(),o=d("span"),u=T(i),a=b(),c=d("code"),p=T(_),m=b(),$&&$.c(),h=b(),f(t,"type","radio"),f(t,"name","single-server"),t.checked=n=l[8].has(l[199]),f(t,"class","svelte-1hrwlue"),f(o,"class","server-name svelte-1hrwlue"),f(c,"class","server-ip svelte-1hrwlue"),f(e,"class","server-item svelte-1hrwlue"),ke(e,"selected",l[8].has(l[199]))},m(y,D){w(y,e,D),r(e,t),r(e,s),r(e,o),r(o,u),r(e,a),r(e,c),r(c,p),r(e,m),$&&$.m(e,null),r(e,h),v=!0,g||(S=ee(t,"change",C),g=!0)},p(y,D){l=y,(!v||D[0]&256|D[1]&512&&n!==(n=l[8].has(l[199])))&&(t.checked=n),(!v||D[1]&512)&&i!==(i=(l[179].name||"unnamed")+"")&&B(u,i),(!v||D[1]&512)&&_!==(_=l[199]+"")&&B(p,_),l[179].project?$?($.p(l,D),D[1]&512&&P($,1)):($=Ui(l),$.c(),P($,1),$.m(e,h)):$&&(Se(),j($,1,1,()=>{$=null}),Te()),(!v||D[0]&256|D[1]&512)&&ke(e,"selected",l[8].has(l[199]))},i(y){v||(P($),v=!0)},o(y){j($),v=!1},d(y){y&&k(e),$&&$.d(),g=!1,S()}}}function Ui(l){let e,t;return e=new Xe({props:{variant:"info",$$slots:{default:[ud]},$$scope:{ctx:l}}}),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const o={};s[1]&512|s[7]&4&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){j(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function ud(l){let e=l[179].project+"",t;return{c(){t=T(e)},m(n,s){w(n,t,s)},p(n,s){s[1]&512&&e!==(e=n[179].project+"")&&B(t,e)},d(n){n&&k(t)}}}function Hi(l){let e,t,n=l[199]&&Bi(l);return{c(){n&&n.c(),e=Ie()},m(s,o){n&&n.m(s,o),w(s,e,o),t=!0},p(s,o){s[199]?n?(n.p(s,o),o[1]&512&&P(n,1)):(n=Bi(s),n.c(),P(n,1),n.m(e.parentNode,e)):n&&(Se(),j(n,1,1,()=>{n=null}),Te())},i(s){t||(P(n),t=!0)},o(s){j(n),t=!1},d(s){s&&k(e),n&&n.d(s)}}}function Gi(l){let e,t;return e=new Xe({props:{variant:"warning",$$slots:{default:[fd]},$$scope:{ctx:l}}}),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const o={};s[0]&512|s[7]&4&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){j(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function fd(l){let e,t;return{c(){e=T(l[9]),t=T(" new")},m(n,s){w(n,e,s),w(n,t,s)},p(n,s){s[0]&512&&B(e,n[9])},d(n){n&&(k(e),k(t))}}}function Wi(l){let e,t,n,s,o,i,u,a,c,_,p,m,h,v,g,S,C,$,y,D,E,L,z=l[0]==="service"||l[0]==="worker"?"s":"",q,O,N,M,G,F,A=l[9]>0&&Vi(),U=pe(l[11]||[]),R=[];for(let J=0;J<U.length;J+=1)R[J]=Ji(Yo(l,U,J));let I=pe(l[38]||[]),H=[];for(let J=0;J<I.length;J+=1)H[J]=Ki(Ko(l,I,J));let Y=pe(l[39]||[]),Q=[];for(let J=0;J<Y.length;J+=1)Q[J]=Yi(Jo(l,Y,J));function X(J,ae){return J[0]==="stateful"||J[0]==="scheduled"?_d:cd}let oe=X(l),x=oe(l),V=l[9]>0&&!l[6]&&Qi();return{c(){e=d("div"),t=d("div"),n=d("div"),s=d("label"),o=T("Snapshot "),A&&A.c(),i=b(),u=d("select"),a=d("option"),a.textContent="Select snapshot...";for(let J=0;J<R.length;J+=1)R[J].c();c=b(),_=d("div"),p=d("label"),p.textContent="Region",m=b(),h=d("select");for(let J=0;J<H.length;J+=1)H[J].c();v=b(),g=d("div"),S=d("label"),S.textContent="Size",C=b(),$=d("select");for(let J=0;J<Q.length;J+=1)Q[J].c();y=b(),D=d("div"),E=d("span"),L=T("New server"),q=T(z),O=T(" to provision:"),N=b(),x.c(),M=b(),V&&V.c(),f(s,"for","snapshot-select"),f(s,"class","svelte-1hrwlue"),a.__value="",ne(a,a.__value),f(u,"id","snapshot-select"),f(u,"class","svelte-1hrwlue"),l[6]===void 0&&xe(()=>l[143].call(u)),f(n,"class","form-group svelte-1hrwlue"),f(p,"for","region-select"),f(p,"class","svelte-1hrwlue"),f(h,"id","region-select"),f(h,"class","svelte-1hrwlue"),l[7]===void 0&&xe(()=>l[144].call(h)),f(_,"class","form-group svelte-1hrwlue"),f(S,"for","size-select"),f(S,"class","svelte-1hrwlue"),f($,"id","size-select"),f($,"class","svelte-1hrwlue"),l[37]===void 0&&xe(()=>l[145].call($)),f(g,"class","form-group svelte-1hrwlue"),f(t,"class","form-row three-col svelte-1hrwlue"),f(D,"class","new-servers svelte-1hrwlue"),f(e,"class","section-content provisioning-config svelte-1hrwlue")},m(J,ae){w(J,e,ae),r(e,t),r(t,n),r(n,s),r(s,o),A&&A.m(s,null),r(n,i),r(n,u),r(u,a);for(let W=0;W<R.length;W+=1)R[W]&&R[W].m(u,null);Re(u,l[6],!0),r(t,c),r(t,_),r(_,p),r(_,m),r(_,h);for(let W=0;W<H.length;W+=1)H[W]&&H[W].m(h,null);Re(h,l[7],!0),r(t,v),r(t,g),r(g,S),r(g,C),r(g,$);for(let W=0;W<Q.length;W+=1)Q[W]&&Q[W].m($,null);Re($,l[37],!0),r(e,y),r(e,D),r(D,E),r(E,L),r(E,q),r(E,O),r(D,N),x.m(D,null),r(D,M),V&&V.m(D,null),G||(F=[ee(u,"change",l[143]),ee(h,"change",l[144]),ee($,"change",l[145])],G=!0)},p(J,ae){if(J[9]>0?A||(A=Vi(),A.c(),A.m(s,null)):A&&(A.d(1),A=null),ae[0]&2048){U=pe(J[11]||[]);let W;for(W=0;W<U.length;W+=1){const ie=Yo(J,U,W);R[W]?R[W].p(ie,ae):(R[W]=Ji(ie),R[W].c(),R[W].m(u,null))}for(;W<R.length;W+=1)R[W].d(1);R.length=U.length}if(ae[0]&2112&&Re(u,J[6]),ae[1]&128){I=pe(J[38]||[]);let W;for(W=0;W<I.length;W+=1){const ie=Ko(J,I,W);H[W]?H[W].p(ie,ae):(H[W]=Ki(ie),H[W].c(),H[W].m(h,null))}for(;W<H.length;W+=1)H[W].d(1);H.length=I.length}if(ae[0]&128|ae[1]&128&&Re(h,J[7]),ae[1]&256){Y=pe(J[39]||[]);let W;for(W=0;W<Y.length;W+=1){const ie=Jo(J,Y,W);Q[W]?Q[W].p(ie,ae):(Q[W]=Yi(ie),Q[W].c(),Q[W].m($,null))}for(;W<Q.length;W+=1)Q[W].d(1);Q.length=Y.length}ae[1]&320&&Re($,J[37]),ae[0]&1&&z!==(z=J[0]==="service"||J[0]==="worker"?"s":"")&&B(q,z),oe===(oe=X(J))&&x?x.p(J,ae):(x.d(1),x=oe(J),x&&(x.c(),x.m(D,M))),J[9]>0&&!J[6]?V||(V=Qi(),V.c(),V.m(D,null)):V&&(V.d(1),V=null)},d(J){J&&k(e),A&&A.d(),Me(R,J),Me(H,J),Me(Q,J),x.d(),V&&V.d(),G=!1,Ve(F)}}}function Vi(l){let e;return{c(){e=T("*")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function Ji(l){let e,t=l[196].name+"",n,s;return{c(){e=d("option"),n=T(t),e.__value=s=l[196].id,ne(e,e.__value)},m(o,i){w(o,e,i),r(e,n)},p(o,i){i[0]&2048&&t!==(t=o[196].name+"")&&B(n,t),i[0]&2048&&s!==(s=o[196].id)&&(e.__value=s,ne(e,e.__value))},d(o){o&&k(e)}}}function Ki(l){let e,t=(l[193].name||l[193].slug)+"",n,s;return{c(){e=d("option"),n=T(t),e.__value=s=l[193].slug,ne(e,e.__value)},m(o,i){w(o,e,i),r(e,n)},p(o,i){i[1]&128&&t!==(t=(o[193].name||o[193].slug)+"")&&B(n,t),i[1]&128&&s!==(s=o[193].slug)&&(e.__value=s,ne(e,e.__value))},d(o){o&&k(e)}}}function Yi(l){let e,t=(l[190].description||l[190].slug)+"",n,s;return{c(){e=d("option"),n=T(t),e.__value=s=l[190].slug,ne(e,e.__value)},m(o,i){w(o,e,i),r(e,n)},p(o,i){i[1]&256&&t!==(t=(o[190].description||o[190].slug)+"")&&B(n,t),i[1]&256&&s!==(s=o[190].slug)&&(e.__value=s,ne(e,e.__value))},d(o){o&&k(e)}}}function cd(l){let e,t,n,s,o,i,u,a;return{c(){e=d("div"),t=d("button"),t.textContent="−",n=b(),s=d("input"),o=b(),i=d("button"),i.textContent="+",f(t,"type","button"),f(t,"class","svelte-1hrwlue"),f(s,"type","number"),f(s,"min","0"),f(s,"max","10"),f(s,"class","svelte-1hrwlue"),f(i,"type","button"),f(i,"class","svelte-1hrwlue"),f(e,"class","number-spinner svelte-1hrwlue")},m(c,_){w(c,e,_),r(e,t),r(e,n),r(e,s),ne(s,l[9]),r(e,o),r(e,i),u||(a=[ee(t,"click",l[147]),ee(s,"input",l[148]),ee(i,"click",l[149])],u=!0)},p(c,_){_[0]&512&&Kt(s.value)!==c[9]&&ne(s,c[9])},d(c){c&&k(e),u=!1,Ve(a)}}}function _d(l){let e,t,n,s,o,i,u;return{c(){e=d("label"),t=d("input"),s=b(),o=d("span"),o.textContent="Provision 1 new server",f(t,"type","checkbox"),t.checked=n=l[9]===1,f(t,"class","svelte-1hrwlue"),f(e,"class","checkbox-label svelte-1hrwlue")},m(a,c){w(a,e,c),r(e,t),r(e,s),r(e,o),i||(u=ee(t,"change",l[146]),i=!0)},p(a,c){c[0]&512&&n!==(n=a[9]===1)&&(t.checked=n)},d(a){a&&k(e),i=!1,u()}}}function Qi(l){let e;return{c(){e=d("small"),e.textContent="⚠️ Select a snapshot for new servers",f(e,"class","warning svelte-1hrwlue")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function dd(l){let e;return{c(){e=T("🚀 Deploy")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function pd(l){let e;return{c(){e=T("Deploying...")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function md(l){let e;function t(o,i){return o[41]?pd:dd}let n=t(l),s=n(l);return{c(){s.c(),e=Ie()},m(o,i){s.m(o,i),w(o,e,i)},p(o,i){n!==(n=t(o))&&(s.d(1),s=n(o),s&&(s.c(),s.m(e.parentNode,e)))},d(o){o&&k(e),s.d(o)}}}function vd(l){let e,t,n,s,o,i,u,a,c,_,p,m,h,v,g,S,C,$,y,D,E,L,z,q,O,N,M,G,F,A,U,R,I,H=l[0]==="service"||l[0]==="worker"?"s":"",Y,Q,X,oe,x,V,J,ae,W,ie,ue,te,me=l[58]?"▼":"▶",re,le,Z,K,ge,we,Ge,at,qe,Je,Ee=pe(l[60]),je=[];for(let he=0;he<Ee.length;he+=1)je[he]=ni(li(l,Ee,he));let ve=l[0]==="stateful"&&si(l),Pe=pe(l[62]),Ne=[];for(let he=0;he<Pe.length;he+=1)Ne[he]=oi(ti(l,Pe,he));let Le=l[0]==="stateful"&&ii(l),Ue=l[0]!=="stateful"&&ai(l),lt=l[0]==="service"&&Si(l),st=(l[0]==="worker"||l[0]==="scheduled")&&Ti(l),ot=l[0]==="scheduled"&&zi(l),Ke=l[0]!=="stateful"&&Di(l),it=l[0]!=="stateful"&&Li(l);const St=[Y_,K_],Et=[];function nl(he,Oe){return he[0]==="stateful"||he[0]==="scheduled"?0:1}X=nl(l),oe=Et[X]=St[X](l);let tt=(l[0]==="service"||l[0]==="worker")&&ji(l);const Bt=[td,ed],Pt=[];function Ht(he,Oe){return he[0]==="stateful"||he[0]==="scheduled"?0:1}J=Ht(l),ae=Pt[J]=Bt[J](l);let ct=l[9]>0&&Gi(l),mt=l[58]&&Wi(l);return Ge=new Be({props:{variant:"primary",type:"submit",disabled:l[41],$$slots:{default:[md]},$$scope:{ctx:l}}}),{c(){e=d("form"),t=d("div");for(let he=0;he<je.length;he+=1)je[he].c();n=b(),s=d("div"),o=d("div"),i=d("label"),i.textContent="Project *",u=b(),a=d("input"),c=b(),_=d("div"),p=d("label"),p.textContent="Service Name *",m=b(),h=d("input"),g=b(),ve&&ve.c(),S=b(),C=d("div"),$=d("label"),$.textContent="Environment",y=b(),D=d("select");for(let he=0;he<Ne.length;he+=1)Ne[he].c();E=b(),Le&&Le.c(),L=b(),Ue&&Ue.c(),z=b(),lt&&lt.c(),q=b(),st&&st.c(),O=b(),ot&&ot.c(),N=b(),Ke&&Ke.c(),M=b(),it&&it.c(),G=b(),F=d("div"),A=d("div"),U=d("div"),R=d("span"),I=T("🖥️ Server"),Y=T(H),Q=b(),oe.c(),x=b(),tt&&tt.c(),V=b(),ae.c(),W=b(),ie=d("div"),ue=d("button"),te=d("span"),re=T(me),le=b(),Z=d("span"),Z.textContent="➕ New Server Provisioning",K=b(),ct&&ct.c(),ge=b(),mt&&mt.c(),we=b(),_e(Ge.$$.fragment),f(t,"class","deploy-type-selector svelte-1hrwlue"),f(i,"for","deploy-project"),f(i,"class","svelte-1hrwlue"),f(a,"id","deploy-project"),f(a,"type","text"),f(a,"placeholder","my-project"),a.required=!0,f(a,"pattern","[-a-z0-9]*"),f(a,"class","svelte-1hrwlue"),f(o,"class","form-group svelte-1hrwlue"),f(p,"for","deploy-name"),f(p,"class","svelte-1hrwlue"),f(h,"id","deploy-name"),f(h,"type","text"),f(h,"placeholder",v=l[0]==="stateful"?l[1]:"api"),h.required=!0,f(h,"pattern","[-a-z0-9]+"),f(h,"title","Lowercase letters, numbers, hyphens only"),f(h,"class","svelte-1hrwlue"),f(_,"class","form-group svelte-1hrwlue"),f($,"for","deploy-env"),f($,"class","svelte-1hrwlue"),f(D,"id","deploy-env"),f(D,"class","svelte-1hrwlue"),l[5]===void 0&&xe(()=>l[89].call(D)),f(C,"class","form-group svelte-1hrwlue"),f(s,"class","form-row three-col svelte-1hrwlue"),f(U,"class","server-title svelte-1hrwlue"),f(A,"class","server-header svelte-1hrwlue"),f(te,"class","toggle-icon svelte-1hrwlue"),f(ue,"type","button"),f(ue,"class","section-toggle svelte-1hrwlue"),f(ie,"class","collapsible-section svelte-1hrwlue"),ke(ie,"expanded",l[58]),f(F,"class","server-selection svelte-1hrwlue")},m(he,Oe){w(he,e,Oe),r(e,t);for(let _t=0;_t<je.length;_t+=1)je[_t]&&je[_t].m(t,null);r(e,n),r(e,s),r(s,o),r(o,i),r(o,u),r(o,a),ne(a,l[4]),r(s,c),r(s,_),r(_,p),r(_,m),r(_,h),ne(h,l[3]),r(_,g),ve&&ve.m(_,null),r(s,S),r(s,C),r(C,$),r(C,y),r(C,D);for(let _t=0;_t<Ne.length;_t+=1)Ne[_t]&&Ne[_t].m(D,null);Re(D,l[5],!0),r(e,E),Le&&Le.m(e,null),r(e,L),Ue&&Ue.m(e,null),r(e,z),lt&&lt.m(e,null),r(e,q),st&&st.m(e,null),r(e,O),ot&&ot.m(e,null),r(e,N),Ke&&Ke.m(e,null),r(e,M),it&&it.m(e,null),r(e,G),r(e,F),r(F,A),r(A,U),r(U,R),r(R,I),r(R,Y),r(U,Q),Et[X].m(U,null),r(A,x),tt&&tt.m(A,null),r(F,V),Pt[J].m(F,null),r(F,W),r(F,ie),r(ie,ue),r(ue,te),r(te,re),r(ue,le),r(ue,Z),r(ue,K),ct&&ct.m(ue,null),r(ie,ge),mt&&mt.m(ie,null),r(e,we),fe(Ge,e,null),at=!0,qe||(Je=[ee(a,"input",l[87]),ee(h,"input",l[88]),ee(D,"change",l[89]),ee(ue,"click",l[142]),ee(e,"submit",l[81])],qe=!0)},p(he,Oe){if(Oe[0]&1|Oe[1]&1610612736){Ee=pe(he[60]);let Ye;for(Ye=0;Ye<Ee.length;Ye+=1){const Vt=li(he,Ee,Ye);je[Ye]?je[Ye].p(Vt,Oe):(je[Ye]=ni(Vt),je[Ye].c(),je[Ye].m(t,null))}for(;Ye<je.length;Ye+=1)je[Ye].d(1);je.length=Ee.length}if(Oe[0]&16&&a.value!==he[4]&&ne(a,he[4]),(!at||Oe[0]&3&&v!==(v=he[0]==="stateful"?he[1]:"api"))&&f(h,"placeholder",v),Oe[0]&8&&h.value!==he[3]&&ne(h,he[3]),he[0]==="stateful"?ve?ve.p(he,Oe):(ve=si(he),ve.c(),ve.m(_,null)):ve&&(ve.d(1),ve=null),Oe[2]&1){Pe=pe(he[62]);let Ye;for(Ye=0;Ye<Pe.length;Ye+=1){const Vt=ti(he,Pe,Ye);Ne[Ye]?Ne[Ye].p(Vt,Oe):(Ne[Ye]=oi(Vt),Ne[Ye].c(),Ne[Ye].m(D,null))}for(;Ye<Ne.length;Ye+=1)Ne[Ye].d(1);Ne.length=Pe.length}Oe[0]&32|Oe[2]&1&&Re(D,he[5]),he[0]==="stateful"?Le?Le.p(he,Oe):(Le=ii(he),Le.c(),Le.m(e,L)):Le&&(Le.d(1),Le=null),he[0]!=="stateful"?Ue?(Ue.p(he,Oe),Oe[0]&1&&P(Ue,1)):(Ue=ai(he),Ue.c(),P(Ue,1),Ue.m(e,z)):Ue&&(Se(),j(Ue,1,1,()=>{Ue=null}),Te()),he[0]==="service"?lt?lt.p(he,Oe):(lt=Si(he),lt.c(),lt.m(e,q)):lt&&(lt.d(1),lt=null),he[0]==="worker"||he[0]==="scheduled"?st?st.p(he,Oe):(st=Ti(he),st.c(),st.m(e,O)):st&&(st.d(1),st=null),he[0]==="scheduled"?ot?ot.p(he,Oe):(ot=zi(he),ot.c(),ot.m(e,N)):ot&&(ot.d(1),ot=null),he[0]!=="stateful"?Ke?(Ke.p(he,Oe),Oe[0]&1&&P(Ke,1)):(Ke=Di(he),Ke.c(),P(Ke,1),Ke.m(e,M)):Ke&&(Se(),j(Ke,1,1,()=>{Ke=null}),Te()),he[0]!=="stateful"?it?(it.p(he,Oe),Oe[0]&1&&P(it,1)):(it=Li(he),it.c(),P(it,1),it.m(e,G)):it&&(Se(),j(it,1,1,()=>{it=null}),Te()),(!at||Oe[0]&1)&&H!==(H=he[0]==="service"||he[0]==="worker"?"s":"")&&B(Y,H);let _t=X;X=nl(he),X===_t?Et[X].p(he,Oe):(Se(),j(Et[_t],1,1,()=>{Et[_t]=null}),Te(),oe=Et[X],oe?oe.p(he,Oe):(oe=Et[X]=St[X](he),oe.c()),P(oe,1),oe.m(U,null)),he[0]==="service"||he[0]==="worker"?tt?(tt.p(he,Oe),Oe[0]&1&&P(tt,1)):(tt=ji(he),tt.c(),P(tt,1),tt.m(A,null)):tt&&(Se(),j(tt,1,1,()=>{tt=null}),Te());let Gt=J;J=Ht(he),J===Gt?Pt[J].p(he,Oe):(Se(),j(Pt[Gt],1,1,()=>{Pt[Gt]=null}),Te(),ae=Pt[J],ae?ae.p(he,Oe):(ae=Pt[J]=Bt[J](he),ae.c()),P(ae,1),ae.m(F,W)),(!at||Oe[1]&134217728)&&me!==(me=he[58]?"▼":"▶")&&B(re,me),he[9]>0?ct?(ct.p(he,Oe),Oe[0]&512&&P(ct,1)):(ct=Gi(he),ct.c(),P(ct,1),ct.m(ue,null)):ct&&(Se(),j(ct,1,1,()=>{ct=null}),Te()),he[58]?mt?mt.p(he,Oe):(mt=Wi(he),mt.c(),mt.m(ie,null)):mt&&(mt.d(1),mt=null),(!at||Oe[1]&134217728)&&ke(ie,"expanded",he[58]);const Wt={};Oe[1]&1024&&(Wt.disabled=he[41]),Oe[1]&1024|Oe[7]&4&&(Wt.$$scope={dirty:Oe,ctx:he}),Ge.$set(Wt)},i(he){at||(P(Ue),P(Ke),P(it),P(oe),P(tt),P(ae),P(ct),P(Ge.$$.fragment,he),at=!0)},o(he){j(Ue),j(Ke),j(it),j(oe),j(tt),j(ae),j(ct),j(Ge.$$.fragment,he),at=!1},d(he){he&&k(e),Me(je,he),ve&&ve.d(),Me(Ne,he),Le&&Le.d(),Ue&&Ue.d(),lt&&lt.d(),st&&st.d(),ot&&ot.d(),Ke&&Ke.d(),it&&it.d(),Et[X].d(),tt&&tt.d(),Pt[J].d(),ct&&ct.d(),mt&&mt.d(),ce(Ge),qe=!1,Ve(Je)}}}function hd(l){let e;return{c(){e=d("div"),e.innerHTML='<p>No deployment in progress</p> <p class="hint svelte-1hrwlue">Fill in the form and click Deploy to start</p>',f(e,"class","empty-state svelte-1hrwlue")},m(t,n){w(t,e,n)},p:be,d(t){t&&k(e)}}}function gd(l){let e,t,n,s,o,i,u=pe(l[43]),a=[];for(let m=0;m<u.length;m+=1)a[m]=Zi(Vo(l,u,m));function c(m,h){if(m[44]&&m[44].success)return kd;if(m[44]&&!m[44].success)return bd}let _=c(l),p=_&&_(l);return{c(){e=d("div"),t=d("div"),n=d("div"),s=b(),o=d("div");for(let m=0;m<a.length;m+=1)a[m].c();i=b(),p&&p.c(),f(n,"class","progress-fill svelte-1hrwlue"),qt(n,"width",l[42]+"%"),f(t,"class","progress-bar svelte-1hrwlue"),f(o,"class","log-output svelte-1hrwlue"),f(e,"class","progress-section svelte-1hrwlue")},m(m,h){w(m,e,h),r(e,t),r(t,n),r(e,s),r(e,o);for(let v=0;v<a.length;v+=1)a[v]&&a[v].m(o,null);r(e,i),p&&p.m(e,null)},p(m,h){if(h[1]&2048&&qt(n,"width",m[42]+"%"),h[1]&4096){u=pe(m[43]);let v;for(v=0;v<u.length;v+=1){const g=Vo(m,u,v);a[v]?a[v].p(g,h):(a[v]=Zi(g),a[v].c(),a[v].m(o,null))}for(;v<a.length;v+=1)a[v].d(1);a.length=u.length}_===(_=c(m))&&p?p.p(m,h):(p&&p.d(1),p=_&&_(m),p&&(p.c(),p.m(e,null)))},d(m){m&&k(e),Me(a,m),p&&p.d()}}}function Zi(l){let e,t,n=l[83].time.toLocaleTimeString()+"",s,o,i,u=fr(l[83].message)+"",a,c;return{c(){e=d("div"),t=d("span"),s=T(n),o=b(),i=new ec(!1),a=b(),f(t,"class","log-time svelte-1hrwlue"),i.a=a,f(e,"class",c="log-line "+l[83].type+" svelte-1hrwlue")},m(_,p){w(_,e,p),r(e,t),r(t,s),r(e,o),i.m(u,e),r(e,a)},p(_,p){p[1]&4096&&n!==(n=_[83].time.toLocaleTimeString()+"")&&B(s,n),p[1]&4096&&u!==(u=fr(_[83].message)+"")&&i.p(u),p[1]&4096&&c!==(c="log-line "+_[83].type+" svelte-1hrwlue")&&f(e,"class",c)},d(_){_&&k(e)}}}function bd(l){let e,t,n,s,o,i=l[5].toUpperCase()+"",u,a,c,_=l[44].error&&Xi(l);function p(v,g){return v[44].servers&&v[44].servers.length>0?$d:wd}let m=p(l),h=m(l);return{c(){e=d("div"),t=d("div"),n=d("h4"),n.textContent="❌ Deployment Failed",s=b(),o=d("span"),u=T(i),a=b(),_&&_.c(),c=b(),h.c(),f(n,"class","svelte-1hrwlue"),f(o,"class","env-badge svelte-1hrwlue"),f(t,"class","result-header svelte-1hrwlue"),f(e,"class","deploy-failure-box svelte-1hrwlue")},m(v,g){w(v,e,g),r(e,t),r(t,n),r(t,s),r(t,o),r(o,u),r(e,a),_&&_.m(e,null),r(e,c),h.m(e,null)},p(v,g){g[0]&32&&i!==(i=v[5].toUpperCase()+"")&&B(u,i),v[44].error?_?_.p(v,g):(_=Xi(v),_.c(),_.m(e,c)):_&&(_.d(1),_=null),m===(m=p(v))&&h?h.p(v,g):(h.d(1),h=m(v),h&&(h.c(),h.m(e,null)))},d(v){v&&k(e),_&&_.d(),h.d()}}}function kd(l){let e,t,n,s,o,i=l[5].toUpperCase()+"",u,a,c,_,p=l[44].domain&&tr(l),m=l[44].connection_url&&lr(l),h=l[44].servers&&l[44].servers.length>0&&nr(l);return{c(){e=d("div"),t=d("div"),n=d("h4"),n.textContent="✅ Deployment Complete",s=b(),o=d("span"),u=T(i),a=b(),p&&p.c(),c=b(),m&&m.c(),_=b(),h&&h.c(),f(n,"class","svelte-1hrwlue"),f(o,"class","env-badge svelte-1hrwlue"),f(t,"class","result-header svelte-1hrwlue"),f(e,"class","deploy-success-box svelte-1hrwlue")},m(v,g){w(v,e,g),r(e,t),r(t,n),r(t,s),r(t,o),r(o,u),r(e,a),p&&p.m(e,null),r(e,c),m&&m.m(e,null),r(e,_),h&&h.m(e,null)},p(v,g){g[0]&32&&i!==(i=v[5].toUpperCase()+"")&&B(u,i),v[44].domain?p?p.p(v,g):(p=tr(v),p.c(),p.m(e,c)):p&&(p.d(1),p=null),v[44].connection_url?m?m.p(v,g):(m=lr(v),m.c(),m.m(e,_)):m&&(m.d(1),m=null),v[44].servers&&v[44].servers.length>0?h?h.p(v,g):(h=nr(v),h.c(),h.m(e,null)):h&&(h.d(1),h=null)},d(v){v&&k(e),p&&p.d(),m&&m.d(),h&&h.d()}}}function Xi(l){let e,t=l[44].error+"",n;return{c(){e=d("p"),n=T(t)},m(s,o){w(s,e,o),r(e,n)},p(s,o){o[1]&8192&&t!==(t=s[44].error+"")&&B(n,t)},d(s){s&&k(e)}}}function wd(l){let e;return{c(){e=d("p"),e.textContent="No server details available",qt(e,"margin-top","8px"),qt(e,"opacity","0.8")},m(t,n){w(t,e,n)},p:be,d(t){t&&k(e)}}}function $d(l){let e,t,n,s,o=pe(l[44].servers),i=[];for(let u=0;u<o.length;u+=1)i[u]=er(Ho(l,o,u));return{c(){e=d("div"),t=d("span"),t.textContent="Server Status:",n=b(),s=d("div");for(let u=0;u<i.length;u+=1)i[u].c();f(t,"class","result-label svelte-1hrwlue"),f(s,"class","server-links svelte-1hrwlue"),f(e,"class","result-section svelte-1hrwlue"),qt(e,"margin-top","12px")},m(u,a){w(u,e,a),r(e,t),r(e,n),r(e,s);for(let c=0;c<i.length;c+=1)i[c]&&i[c].m(s,null)},p(u,a){if(a[0]&8|a[1]&8192){o=pe(u[44].servers);let c;for(c=0;c<o.length;c+=1){const _=Ho(u,o,c);i[c]?i[c].p(_,a):(i[c]=er(_),i[c].c(),i[c].m(s,null))}for(;c<i.length;c+=1)i[c].d(1);i.length=o.length}},d(u){u&&k(e),Me(i,u)}}}function Cd(l){let e,t=l[179].ip+"",n,s,o=l[179].error&&xi(l);return{c(){e=T("❌ "),n=T(t),o&&o.c(),s=Ie()},m(i,u){w(i,e,u),w(i,n,u),o&&o.m(i,u),w(i,s,u)},p(i,u){u[1]&8192&&t!==(t=i[179].ip+"")&&B(n,t),i[179].error?o?o.p(i,u):(o=xi(i),o.c(),o.m(s.parentNode,s)):o&&(o.d(1),o=null)},d(i){i&&(k(e),k(n),k(s)),o&&o.d(i)}}}function yd(l){let e,t=l[179].ip+"",n;return{c(){e=T("✅ "),n=T(t)},m(s,o){w(s,e,o),w(s,n,o)},p(s,o){o[1]&8192&&t!==(t=s[179].ip+"")&&B(n,t)},d(s){s&&(k(e),k(n))}}}function xi(l){let e,t=l[179].error+"",n;return{c(){e=T(": "),n=T(t)},m(s,o){w(s,e,o),w(s,n,o)},p(s,o){o[1]&8192&&t!==(t=s[179].error+"")&&B(n,t)},d(s){s&&(k(e),k(n))}}}function er(l){let e,t,n,s,o,i,u;function a(m,h){return m[179].success?yd:Cd}let c=a(l),_=c(l);function p(){return l[153](l[179])}return{c(){e=d("div"),t=d("span"),_.c(),n=b(),s=d("button"),s.textContent="📋 Logs",o=b(),f(s,"class","log-btn svelte-1hrwlue"),f(e,"class","server-link-row svelte-1hrwlue")},m(m,h){w(m,e,h),r(e,t),_.m(t,null),r(e,n),r(e,s),r(e,o),i||(u=ee(s,"click",p),i=!0)},p(m,h){l=m,c===(c=a(l))&&_?_.p(l,h):(_.d(1),_=c(l),_&&(_.c(),_.m(t,null)))},d(m){m&&k(e),_.d(),i=!1,u()}}}function tr(l){let e,t,n,s,o,i=l[44].domain+"",u,a;return{c(){e=d("div"),t=d("span"),t.textContent="🌐 Domain:",n=b(),s=d("a"),o=T("https://"),u=T(i),f(t,"class","result-label svelte-1hrwlue"),f(s,"href",a="https://"+l[44].domain),f(s,"target","_blank"),f(s,"class","result-link svelte-1hrwlue"),f(e,"class","result-section svelte-1hrwlue")},m(c,_){w(c,e,_),r(e,t),r(e,n),r(e,s),r(s,o),r(s,u)},p(c,_){_[1]&8192&&i!==(i=c[44].domain+"")&&B(u,i),_[1]&8192&&a!==(a="https://"+c[44].domain)&&f(s,"href",a)},d(c){c&&k(e)}}}function lr(l){let e,t,n,s,o,i=(l[44].env_var_name||"URL")+"",u,a,c=l[44].connection_url+"",_,p,m,h,v;return{c(){e=d("div"),t=d("span"),t.textContent="Connection:",n=b(),s=d("div"),o=d("code"),u=T(i),a=T("="),_=T(c),p=b(),m=d("button"),m.textContent="📋 Copy",f(t,"class","result-label svelte-1hrwlue"),f(o,"class","connection-url svelte-1hrwlue"),f(m,"class","copy-btn svelte-1hrwlue"),f(s,"class","connection-info svelte-1hrwlue"),f(e,"class","result-section svelte-1hrwlue")},m(g,S){w(g,e,S),r(e,t),r(e,n),r(e,s),r(s,o),r(o,u),r(o,a),r(o,_),r(s,p),r(s,m),h||(v=ee(m,"click",l[150]),h=!0)},p(g,S){S[1]&8192&&i!==(i=(g[44].env_var_name||"URL")+"")&&B(u,i),S[1]&8192&&c!==(c=g[44].connection_url+"")&&B(_,c)},d(g){g&&k(e),h=!1,v()}}}function nr(l){let e,t,n=l[0]==="stateful"?"TCP Endpoint:":"Servers:",s,o,i,u,a=l[44].servers.some(cr),c,_=pe(l[44].servers.filter(vr)),p=[];for(let h=0;h<_.length;h+=1)p[h]=sr(Wo(l,_,h));let m=a&&or(l);return{c(){e=d("div"),t=d("span"),s=T(n),o=b(),i=d("div");for(let h=0;h<p.length;h+=1)p[h].c();u=b(),m&&m.c(),c=Ie(),f(t,"class","result-label svelte-1hrwlue"),f(i,"class","server-links svelte-1hrwlue"),f(e,"class","result-section svelte-1hrwlue")},m(h,v){w(h,e,v),r(e,t),r(t,s),r(e,o),r(e,i);for(let g=0;g<p.length;g+=1)p[g]&&p[g].m(i,null);w(h,u,v),m&&m.m(h,v),w(h,c,v)},p(h,v){if(v[0]&1&&n!==(n=h[0]==="stateful"?"TCP Endpoint:":"Servers:")&&B(s,n),v[0]&9|v[1]&8192){_=pe(h[44].servers.filter(vr));let g;for(g=0;g<_.length;g+=1){const S=Wo(h,_,g);p[g]?p[g].p(S,v):(p[g]=sr(S),p[g].c(),p[g].m(i,null))}for(;g<p.length;g+=1)p[g].d(1);p.length=_.length}v[1]&8192&&(a=h[44].servers.some(cr)),a?m?m.p(h,v):(m=or(h),m.c(),m.m(c.parentNode,c)):m&&(m.d(1),m=null)},d(h){h&&(k(e),k(u),k(c)),Me(p,h),m&&m.d(h)}}}function Sd(l){let e,t=l[179].url+"",n,s;return{c(){e=d("a"),n=T(t),f(e,"href",s=l[179].url),f(e,"target","_blank"),f(e,"class","result-link svelte-1hrwlue")},m(o,i){w(o,e,i),r(e,n)},p(o,i){i[1]&8192&&t!==(t=o[179].url+"")&&B(n,t),i[1]&8192&&s!==(s=o[179].url)&&f(e,"href",s)},d(o){o&&k(e)}}}function Td(l){var s;let e,t=(((s=l[179].url)==null?void 0:s.replace("http://",""))||`${l[179].ip}:${l[44].host_port||l[179].host_port}`)+"",n;return{c(){e=d("code"),n=T(t),f(e,"class","tcp-endpoint svelte-1hrwlue")},m(o,i){w(o,e,i),r(e,n)},p(o,i){var u;i[1]&8192&&t!==(t=(((u=o[179].url)==null?void 0:u.replace("http://",""))||`${o[179].ip}:${o[44].host_port||o[179].host_port}`)+"")&&B(n,t)},d(o){o&&k(e)}}}function sr(l){let e,t,n,s,o,i;function u(p,m){return p[0]==="stateful"?Td:Sd}let a=u(l),c=a(l);function _(){return l[151](l[179])}return{c(){e=d("div"),c.c(),t=b(),n=d("button"),n.textContent="📋 Logs",s=b(),f(n,"class","log-btn svelte-1hrwlue"),f(e,"class","server-link-row svelte-1hrwlue")},m(p,m){w(p,e,m),c.m(e,null),r(e,t),r(e,n),r(e,s),o||(i=ee(n,"click",_),o=!0)},p(p,m){l=p,a===(a=u(l))&&c?c.p(l,m):(c.d(1),c=a(l),c&&(c.c(),c.m(e,t)))},d(p){p&&k(e),c.d(),o=!1,i()}}}function or(l){let e,t,n,s=pe(l[44].servers.filter(hr)),o=[];for(let i=0;i<s.length;i+=1)o[i]=ir(Go(l,s,i));return{c(){e=d("div"),t=d("span"),t.textContent="Failed Servers:",n=b();for(let i=0;i<o.length;i+=1)o[i].c();f(t,"class","result-label svelte-1hrwlue"),qt(t,"color","#fef3c7"),f(e,"class","failed-servers-section svelte-1hrwlue")},m(i,u){w(i,e,u),r(e,t),r(e,n);for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(e,null)},p(i,u){if(u[0]&8|u[1]&8192){s=pe(i[44].servers.filter(hr));let a;for(a=0;a<s.length;a+=1){const c=Go(i,s,a);o[a]?o[a].p(c,u):(o[a]=ir(c),o[a].c(),o[a].m(e,null))}for(;a<o.length;a+=1)o[a].d(1);o.length=s.length}},d(i){i&&k(e),Me(o,i)}}}function ir(l){let e,t,n,s=l[179].ip+"",o,i,u=(l[179].error||"Unknown error")+"",a,c,_,p,m,h;function v(){return l[152](l[179])}return{c(){e=d("div"),t=d("span"),n=T("❌ "),o=T(s),i=T(": "),a=T(u),c=b(),_=d("button"),_.textContent="📋 Logs",p=b(),qt(t,"color","#fef3c7"),f(_,"class","log-btn svelte-1hrwlue"),f(e,"class","server-link-row svelte-1hrwlue")},m(g,S){w(g,e,S),r(e,t),r(t,n),r(t,o),r(t,i),r(t,a),r(e,c),r(e,_),r(e,p),m||(h=ee(_,"click",v),m=!0)},p(g,S){l=g,S[1]&8192&&s!==(s=l[179].ip+"")&&B(o,s),S[1]&8192&&u!==(u=(l[179].error||"Unknown error")+"")&&B(a,u)},d(g){g&&k(e),m=!1,h()}}}function zd(l){let e;function t(o,i){return o[41]||o[43].length>0?gd:hd}let n=t(l),s=n(l);return{c(){s.c(),e=Ie()},m(o,i){s.m(o,i),w(o,e,i)},p(o,i){n===(n=t(o))&&s?s.p(o,i):(s.d(1),s=n(o),s&&(s.c(),s.m(e.parentNode,e)))},d(o){o&&k(e),s.d(o)}}}function rr(l){let e,t,n=(l[179].name||l[179].ip)+"",s,o,i,u=l[179].ip+"",a,c;return{c(){e=d("div"),t=d("span"),s=T(n),o=b(),i=d("span"),a=T(u),c=b(),f(t,"class","server-name svelte-1hrwlue"),f(i,"class","server-ip svelte-1hrwlue"),f(e,"class","cleanup-server-item svelte-1hrwlue")},m(_,p){w(_,e,p),r(e,t),r(t,s),r(e,o),r(e,i),r(i,a),r(e,c)},p(_,p){p[1]&32768&&n!==(n=(_[179].name||_[179].ip)+"")&&B(s,n),p[1]&32768&&u!==(u=_[179].ip+"")&&B(a,u)},d(_){_&&k(e)}}}function Dd(l){let e,t,n,s,o=l[46].length+[...l[8]].length+"",i,u,a,c=[...l[8]].length+"",_,p,m,h,v,g,S=pe(l[46]),C=[];for(let $=0;$<S.length;$+=1)C[$]=rr(Uo(l,S,$));return{c(){e=d("div"),t=d("p"),n=T("This service is currently running on "),s=d("strong"),i=T(o),u=T(` servers.
      You're deploying to `),a=d("strong"),_=T(c),p=T(" servers."),m=b(),h=d("p"),h.textContent="Stop containers on the following servers?",v=b(),g=d("div");for(let $=0;$<C.length;$+=1)C[$].c();f(t,"class","svelte-1hrwlue"),f(h,"class","svelte-1hrwlue"),f(g,"class","cleanup-server-list svelte-1hrwlue"),f(e,"class","cleanup-confirm-content svelte-1hrwlue")},m($,y){w($,e,y),r(e,t),r(t,n),r(t,s),r(s,i),r(t,u),r(t,a),r(a,_),r(t,p),r(e,m),r(e,h),r(e,v),r(e,g);for(let D=0;D<C.length;D+=1)C[D]&&C[D].m(g,null)},p($,y){if(y[0]&256|y[1]&32768&&o!==(o=$[46].length+[...$[8]].length+"")&&B(i,o),y[0]&256&&c!==(c=[...$[8]].length+"")&&B(_,c),y[1]&32768){S=pe($[46]);let D;for(D=0;D<S.length;D+=1){const E=Uo($,S,D);C[D]?C[D].p(E,y):(C[D]=rr(E),C[D].c(),C[D].m(g,null))}for(;D<C.length;D+=1)C[D].d(1);C.length=S.length}},d($){$&&k(e),Me(C,$)}}}function Ed(l){let e;return{c(){e=T("Proceed")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function qd(l){let e;return{c(){e=T("Cancel")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function Ld(l){let e,t,n,s,o;return t=new Be({props:{variant:"primary",$$slots:{default:[Ed]},$$scope:{ctx:l}}}),t.$on("click",l[82]),s=new Be({props:{variant:"ghost",$$slots:{default:[qd]},$$scope:{ctx:l}}}),s.$on("click",l[154]),{c(){e=d("div"),_e(t.$$.fragment),n=b(),_e(s.$$.fragment),f(e,"slot","footer")},m(i,u){w(i,e,u),fe(t,e,null),r(e,n),fe(s,e,null),o=!0},p(i,u){const a={};u[7]&4&&(a.$$scope={dirty:u,ctx:i}),t.$set(a);const c={};u[7]&4&&(c.$$scope={dirty:u,ctx:i}),s.$set(c)},i(i){o||(P(t.$$.fragment,i),P(s.$$.fragment,i),o=!0)},o(i){j(t.$$.fragment,i),j(s.$$.fragment,i),o=!1},d(i){i&&k(e),ce(t),ce(s)}}}function Pd(l){let e,t,n,s,o,i,u,a,c;n=new ft({props:{title:"🚀 Deploy",$$slots:{default:[vd]},$$scope:{ctx:l}}}),o=new ft({props:{title:"📋 Deployment Progress",$$slots:{default:[zd]},$$scope:{ctx:l}}});function _(m){l[155](m)}let p={title:"⚠️ Service Already Running",width:"500px",$$slots:{footer:[Ld],default:[Dd]},$$scope:{ctx:l}};return l[45]!==void 0&&(p.open=l[45]),u=new ol({props:p}),It.push(()=>pl(u,"open",_)),u.$on("close",l[156]),{c(){e=d("div"),t=d("div"),_e(n.$$.fragment),s=b(),_e(o.$$.fragment),i=b(),_e(u.$$.fragment),f(t,"class","deploy-grid svelte-1hrwlue"),f(e,"class","deploy-page svelte-1hrwlue")},m(m,h){w(m,e,h),r(e,t),fe(n,t,null),r(t,s),fe(o,t,null),w(m,i,h),fe(u,m,h),c=!0},p(m,h){const v={};h[0]&2147483647|h[1]&536741887|h[7]&4&&(v.$$scope={dirty:h,ctx:m}),n.$set(v);const g={};h[0]&41|h[1]&15360|h[7]&4&&(g.$$scope={dirty:h,ctx:m}),o.$set(g);const S={};h[0]&256|h[1]&114688|h[7]&4&&(S.$$scope={dirty:h,ctx:m}),!a&&h[1]&16384&&(a=!0,S.open=m[45],dl(()=>a=!1)),u.$set(S)},i(m){c||(P(n.$$.fragment,m),P(o.$$.fragment,m),P(u.$$.fragment,m),c=!0)},o(m){j(n.$$.fragment,m),j(o.$$.fragment,m),j(u.$$.fragment,m),c=!1},d(m){m&&(k(e),k(i)),ce(n),ce(o),ce(u,m)}}}function Nd(l){l.preventDefault(),l.stopPropagation()}async function Hu(l,e){const t=[],n=l.createReader();let s=[],o;do o=await new Promise((i,u)=>{n.readEntries(i,u)}),s=s.concat(o);while(o.length>0);for(const i of s){const u=e?`${e}/${i.name}`:i.name;if(i.isFile){const a=await new Promise((c,_)=>{i.file(c,_)});a._relativePath=u,t.push(a)}else if(i.isDirectory){const a=await Hu(i,u);t.push(...a)}}return t}function ar(l){return new Promise((e,t)=>{const n=new FileReader;n.onload=()=>e(new Uint8Array(n.result)),n.onerror=t,n.readAsArrayBuffer(l)})}function ur(l){return new Promise((e,t)=>{const n=new FileReader;n.onload=()=>e(n.result),n.onerror=t,n.readAsText(l)})}function fr(l){if(!l)return"";const e=/(https?:\/\/[^\s]+)/g;return l.replace(e,'<a href="$1" target="_blank" class="log-link">$1</a>')}const cr=l=>!l.success,_r=l=>l,Rd=l=>l.isMain,dr=l=>l.isMain,pr=l=>l.isMain,mr=l=>l.trim(),vr=l=>l.success,hr=l=>!l.success;function Md(l,e,t){let n,s,o;pt(l,q1,se=>t(11,s=se)),pt(l,mn,se=>t(85,o=se));let i="service";const u=[{value:"stateful",label:"🗄️ Stateful",description:"Database or cache (postgres, redis...)"},{value:"service",label:"🌐 Service",description:"Web app with HTTP port & domain"},{value:"worker",label:"⚙️ Worker",description:"Background job processor"},{value:"scheduled",label:"⏰ Scheduled",description:"Cron job / periodic task"}];let a="redis",c=[{value:"redis",label:"⚡ Redis",port:6379,image:"redis:7-alpine",description:"In-memory cache & pub/sub"},{value:"postgres",label:"🐘 PostgreSQL",port:5432,image:"postgres:16-alpine",description:"Relational database"},{value:"mysql",label:"🐬 MySQL",port:3306,image:"mysql:8",description:"Relational database"},{value:"mongo",label:"🍃 MongoDB",port:27017,image:"mongo:7",description:"Document database"},{value:"opensearch",label:"🔍 OpenSearch",port:9200,image:"opensearchproject/opensearch:2",description:"Search & analytics"},{value:"qdrant",label:"🧠 Qdrant",port:6333,image:"qdrant/qdrant:latest",description:"Vector database for AI"}],_="",p="",m="",h="",v="prod",g="",S="code",C=8e3,$="",y="",D="main",E="",L=[],z="",q="",O=null,N="",M="",G="",F=[],A=null,U=null,R=!0,I=!1,H="",Y="",Q=!1,X="",oe="",x="",V="lon1",J="s-1vcpu-2gb",ae=[],W=[],ie=[],ue=!1,te=0,me=[],re=new Set,le=0,Z=null;function K(se){i!==se&&(t(0,i=se),t(3,m=""),t(4,h=""),t(5,v="prod"),re.clear(),t(8,re),t(0,i),t(9,le),t(9,le=0),se==="stateful"&&t(9,le=1))}let ge=!1,we=[],Ge=null,at=!0,qe=!0,Je={postgres:!1,redis:!1,mysql:!1,mongo:!1},Ee=!0,je="digitalpixo.com",ve="",Pe="",Ne=!1,Le=["node_modules/","__pycache__/","*.pyc",".git/",".venv/","venv/",".env",".DS_Store",".idea/",".vscode/","dist/","build/",".pytest_cache/",".mypy_cache/"],Ue=Le.join(`
`),lt=!1,st=!1,ot=!1;const Ke=[...Le],it=["dev","test","staging","uat","prod"];kl(()=>{Xt.refresh().catch(()=>{}),pn.refresh().catch(()=>{}),Et()});let St=null;async function Et(){var se;try{try{const de=await He("GET","/infra/regions");t(38,ae=de.regions||de||[])}catch{t(38,ae=[{slug:"nyc1",name:"New York 1"},{slug:"nyc3",name:"New York 3"},{slug:"sfo3",name:"San Francisco 3"},{slug:"ams3",name:"Amsterdam 3"},{slug:"sgp1",name:"Singapore 1"},{slug:"lon1",name:"London 1"},{slug:"fra1",name:"Frankfurt 1"}])}try{const de=await He("GET","/infra/sizes");t(39,W=de.sizes||de||[])}catch{t(39,W=[{slug:"s-1vcpu-512mb-10gb",description:"$4/mo - 512MB / 1 vCPU"},{slug:"s-1vcpu-1gb",description:"$6/mo - 1GB / 1 vCPU"},{slug:"s-1vcpu-2gb",description:"$12/mo - 2GB / 1 vCPU"},{slug:"s-2vcpu-2gb",description:"$18/mo - 2GB / 2 vCPU"},{slug:"s-2vcpu-4gb",description:"$24/mo - 4GB / 2 vCPU"},{slug:"s-4vcpu-8gb",description:"$48/mo - 8GB / 4 vCPU"}])}try{const de=await He("GET","/infra/stateful-types");((se=de.types)==null?void 0:se.length)>0&&t(2,c=de.types)}catch{console.warn("Using fallback stateful types")}}catch(de){console.error("Failed to load regions/sizes:",de)}}async function nl(){var se;if(!m){$e.warning("Enter app name first");return}t(53,Pe="Loading...");try{const Ce=await He("GET",`/infra/deploy-configs/${h||"default"}/${m}/${v}`);Bt(Ce),t(53,Pe="✓ Loaded"),$e.success("Config loaded")}catch(de){(se=de.message)!=null&&se.includes("404")?(t(53,Pe="No saved config"),$e.info("No saved config found")):(t(53,Pe="Load failed"),$e.error("Failed to load config"))}}async function tt(){try{const de=await He("GET",`/infra/deploy-configs/${h||"default"}/${m}/${v}`);Bt(de),t(53,Pe="✓ Auto-loaded")}catch{t(53,Pe="")}}function Bt(se){var de,Ce;se.source_type&&t(15,S={folder:"code",git:"git",image:"image"}[se.source_type]||se.source_type),se.git_url&&t(18,y=se.git_url),se.git_branch&&t(19,D=se.git_branch),se.port&&t(16,C=se.port),se.env_vars&&Object.keys(se.env_vars).length>0&&t(17,$=Object.entries(se.env_vars).map(([Ae,We])=>`${Ae}=${We}`).join(`
`)),((de=se.exclude_patterns)==null?void 0:de.length)>0&&(Le=se.exclude_patterns,t(55,Ue=Le.join(`
`))),((Ce=se.server_ips)==null?void 0:Ce.length)>0&&t(8,re=new Set(se.server_ips))}async function Pt(){if(!m){$e.warning("Enter app name first");return}t(53,Pe="Saving...");const se={};for(const Ae of $.split(`
`)){const We=Ae.trim();if(We&&We.includes("=")){const[kt,...ut]=We.split("=");se[kt.trim()]=ut.join("=").trim()}}const de=Ue.split(`
`).map(Ae=>Ae.trim()).filter(Boolean),Ce={project_name:h||"default",service_name:m,env:v,source_type:S==="code"?"folder":S,git_url:y||null,git_branch:D||"main",exclude_patterns:de.length>0?de:Ke,port:C,env_vars:se,server_ips:Array.from(re)};try{await He("POST","/infra/deploy-configs",Ce),t(53,Pe="✓ Saved"),$e.success("Config saved")}catch{t(53,Pe="Save failed"),$e.error("Failed to save config")}}function Ht(){t(54,Ne=!Ne),Ne||(Le=Ue.split(`
`).map(se=>se.trim()).filter(Boolean))}function ct(){Le=[...Ke],t(55,Ue=Ke.join(`
`)),$e.info("Reset to default patterns")}function mt(se){for(const de of Le)if(de.endsWith("/")){const Ce=de.slice(0,-1);if(se.startsWith(Ce+"/")||se.includes("/"+Ce+"/"))return!0}else if(de.startsWith("*")){const Ce=de.slice(1);if(se.endsWith(Ce))return!0}else if(se===de||se.endsWith("/"+de))return!0;return!1}function he(se){re.has(se)?re.delete(se):re.add(se),t(8,re),t(0,i),t(9,le)}function Oe(se){se?(ie||[]).forEach(de=>{var Ae,We,kt;const Ce=de.ip||((kt=(We=(Ae=de.networks)==null?void 0:Ae.v4)==null?void 0:We[0])==null?void 0:kt.ip_address);Ce&&re.add(Ce)}):re.clear(),t(8,re),t(0,i),t(9,le)}function _t(se){re.clear(),re.add(se),t(8,re),t(0,i),t(9,le),(i==="stateful"||i==="scheduled")&&t(9,le=0)}function Gt(){U=async(se,de)=>{await wl(se,de,F.length===0)},A==null||A.click()}async function Wt(se){const de=Array.from(se.target.files||[]);if(!de.length||!U)return;console.log(`[Deploy] Browser returned ${de.length} files`),de.length<50?console.log("[Deploy] Files:",de.map(We=>We.webkitRelativePath)):console.log("[Deploy] First 20 files:",de.slice(0,20).map(We=>We.webkitRelativePath));const Ae=de[0].webkitRelativePath.split("/")[0];await U(de,Ae),U=null,se.target.value=""}function Ye(se){se.preventDefault(),se.stopPropagation(),t(31,I=!0)}function Vt(se){se.preventDefault(),se.stopPropagation(),se.currentTarget.contains(se.relatedTarget)||t(31,I=!1)}async function vl(se){var Ce,Ae;se.preventDefault(),se.stopPropagation(),t(31,I=!1);const de=(Ce=se.dataTransfer)==null?void 0:Ce.items;if(!(!de||de.length===0)){for(const We of de)if(We.kind==="file"){const kt=(Ae=We.webkitGetAsEntry)==null?void 0:Ae.call(We);kt!=null&&kt.isDirectory&&await rl(kt)}}}async function rl(se){const de=se.name;if(F.some(We=>We.name===de)){$e.error(`Folder "${de}" is already added`);return}$e.info(`Reading ${de}/...`);const Ce=await Hu(se,"");if(Ce.length===0){$e.error(`No files found in ${de}/`);return}const Ae=F.length===0;await hl(Ce,de,Ae)}async function hl(se,de,Ce){Ce&&F.some(ut=>ut.isMain)&&t(28,F=F.map(ut=>({...ut,isMain:!1})));const Ae=[];let We=null,kt=0;for(const ut of se){const el=ut._relativePath||ut.name;if(mt(el)){kt++;continue}const yl=await ar(ut);Ae.push({path:el,content:yl}),Ce&&el==="Dockerfile"&&(We=await ur(ut))}console.log(`[Deploy] Dropped ${de}/: ${se.length} total, ${kt} skipped, ${Ae.length} included`),t(28,F=[...F,{name:de,fileContents:Ae,isMain:Ce,fileCount:Ae.length}]),al(),F.some(ut=>ut.isMain)&&await ye(We),R&&h&&m&&Ze(),$e.success(`Added ${de}/ (${Ae.length} files)`)}async function wl(se,de,Ce){if(F.some(ut=>ut.name===de)){$e.error(`Folder "${de}" is already added`);return}Ce&&F.some(ut=>ut.isMain)&&t(28,F=F.map(ut=>({...ut,isMain:!1})));const Ae=[];let We=null,kt=0;for(const ut of se){const el=ut.webkitRelativePath.replace(`${de}/`,"");if(mt(el)){kt++;continue}const yl=await ar(ut);Ae.push({path:el,content:yl}),Ce&&el==="Dockerfile"&&(We=await ur(ut))}console.log(`[Deploy] Processed ${de}/: ${se.length} total, ${kt} skipped, ${Ae.length} included`),t(28,F=[...F,{name:de,fileContents:Ae,isMain:Ce,fileCount:Ae.length}]),al(),F.some(ut=>ut.isMain)&&await ye(We),R&&h&&m&&Ze(),$e.success(`Added ${de}/ (${Ae.length} files)`)}function Jt(se){t(28,F=F.filter((de,Ce)=>Ce!==se)),al(),F.length>0&&!F.some(de=>de.isMain)&&t(28,F=F.map((de,Ce)=>({...de,isMain:Ce===0})))}async function xt(se){t(28,F=F.map((de,Ce)=>({...de,isMain:Ce===se}))),await ye()}function al(){const se=F.some(de=>de.isMain);F.length&&se&&ze()}async function ze(){if(!F.length)return;const{default:se}=await Bo(async()=>{const{default:Ce}=await import("https://cdn.jsdelivr.net/npm/jszip@3.10.1/+esm");return{default:Ce}},[]),de=new se;for(const Ce of F)for(const{path:Ae,content:We}of Ce.fileContents)de.file(`${Ce.name}/${Ae}`,We);F.length>1&&H&&de.file("Dockerfile",H),await de.generateAsync({type:"blob"})}async function ye(se=null){t(34,Q=!0),se?(t(32,H=se),t(33,Y="from folder")):(t(32,H=await Qe()),t(33,Y=F.length>1?"multi-folder":"generated")),Yt()}async function Qe(){const se=F.find(Ae=>Ae.isMain);if(!se)return"";const de=F.filter(Ae=>!Ae.isMain).map(Ae=>Ae.name),Ce=[];for(const Ae of F)for(const We of Ae.fileContents)Ce.push(`${Ae.name}/${We.path}`);try{return(await He.post("/infra/dockerfile/generate",{files:Ce,main_folder:se.name,dep_folders:de,port:parseInt(C)||8e3})).dockerfile||""}catch(Ae){return console.error("[Deploy] Failed to generate Dockerfile via API:",Ae),yt(se)}}function yt(se){const de=se.fileContents.some(We=>We.path==="requirements.txt"),Ce=F.filter(We=>!We.isMain);let Ae=`FROM python:3.11-slim

WORKDIR /app

`;for(const We of Ce)Ae+=`COPY ${We.name}/ ./${We.name}/
`;return Ae+=`COPY ${se.name}/ ./${se.name}/

`,de&&(Ae+=`RUN pip install --no-cache-dir -r ${se.name}/requirements.txt

`),Ae+=`EXPOSE ${C}

`,Ae+=`CMD ["uvicorn", "${se.name}.main:app", "--host", "0.0.0.0", "--port", "${C}"]
`,Ae}function Yt(){const se=H.match(/^FROM\s+(\S+)/m),de=H.match(/^CMD\s+(.+)$/m);t(35,X=se?se[1]:""),t(36,oe=de?de[1]:"")}function Ut(se){H&&(se==="from"&&X?t(32,H=H.replace(/^FROM\s+\S+/m,`FROM ${X}`)):se==="cmd"&&oe&&(H.includes("CMD ")?t(32,H=H.replace(/^CMD\s+.+$/m,`CMD ${oe}`)):t(32,H+=`
CMD ${oe}
`)),t(33,Y="edited"))}function Ze(){if(!h||!m)return;const se=`build_folders_${h}_${m}`,de=F.map(Ce=>({name:Ce.name,isMain:Ce.isMain}));localStorage.setItem(se,JSON.stringify(de))}function Tt(se){if(!z.trim()){$e.error("Please enter a folder path");return}const de=z.trim();if(se&&L.some(Ce=>Ce.isMain)&&t(21,L=L.map(Ce=>({...Ce,isMain:!1}))),L.some(Ce=>Ce.path===de)){$e.error("This folder is already added");return}t(21,L=[...L,{path:de,isMain:se}]),t(22,z="")}function $l(se){t(21,L=L.filter((de,Ce)=>Ce!==se))}function Qt(se){var Ce;const de=(Ce=se.target.files)==null?void 0:Ce[0];if(de){if(!de.name.endsWith(".tar")&&!de.name.endsWith(".tar.gz")){$e.error("Only .tar or .tar.gz image files are supported");return}t(24,O=de),$e.success(`Selected: ${de.name}`)}}function Nt(se,de="info"){t(43,me=[...me,{message:se,type:de,time:new Date}])}async function vt(se){if(se.preventDefault(),St&&(clearTimeout(St),t(84,St=null)),!m){$e.error("Service name is required");return}if(!h){$e.error("Project name is required");return}if(i!=="stateful"){if(S==="code"&&!F.some(Ce=>Ce.isMain)){$e.error("Add a main folder with your code");return}if(S==="code"){const Ce=F.find(Ae=>Ae.isMain);if(!(Ce!=null&&Ce.fileContents)||Ce.fileContents.length===0){$e.error("Please re-upload your folders. File contents are not loaded from previous sessions.");return}}if(S==="git"&&!y){$e.error("Git URL is required");return}if(S==="image"&&!q){$e.error("Docker image URL is required");return}if(S==="image_file"&&!O){$e.error("Upload a Docker image file (.tar)");return}if(S==="image_file"&&!N){$e.error("Image name is required for local images");return}}if(i==="scheduled"&&!p){$e.error("Cron schedule is required for scheduled jobs");return}if(re.size===0&&le===0){$e.error("Select at least one server or add new servers");return}if(le>0&&!x){$e.error("Select a snapshot for new servers");return}if(!Ft()){$e.error("Configure your DO Token in Settings first");return}if(i==="service"&&Ee&&!zn()){$e.error("Configure your Cloudflare Token in Settings first (required for domain setup)");return}const de=[...re];if(h&&m&&v)try{const Ce=new URLSearchParams({project:h,environment:v,service_name:m}),Ae=await He("GET",`/infra/services/state?${Ce}`);if(Ae.server_ips&&Ae.server_ips.length>0){const We=Ae.servers.filter(kt=>!de.includes(kt.ip));if(We.length>0){t(46,we=We),t(47,Ge=()=>Il(se)),t(45,ge=!0);return}}}catch(Ce){console.log("Service state check:",Ce.message||Ce)}await Il()}async function Ol(){t(45,ge=!1);const se=`${h}_${m}_${v}`.replace(/[^a-zA-Z0-9_]/g,"_");if(we.length>0){const de=we.map(Ce=>Ce.ip);Nt(`Stopping containers on ${we.length} server(s)...`);try{const Ce=await He("POST",`/infra/services/cleanup?do_token=${Ft()}`,{server_ips:de,container_name:se});Nt(`Cleanup complete: ${Ce.cleaned} stopped, ${Ce.failed} failed`)}catch(Ce){Nt(`Cleanup warning: ${Ce.message||Ce}`,"warning")}}t(46,we=[]),Ge&&(await Ge(),t(47,Ge=null))}async function Il(se){t(41,ue=!0),t(42,te=0),t(43,me=[]),t(44,Z=null);try{Nt(`Starting ${i} deployment of ${m}...`),t(42,te=10);let de=S,Ce=q,Ae=C;if(i==="stateful"){de="image";const et=c.find(cl=>cl.value===a);Ce=(et==null?void 0:et.image)||`${a}:latest`,Ae=(et==null?void 0:et.port)||5432}let We=null;if(i!=="stateful"&&S==="code"){Nt("Creating code archive..."),console.log("[Deploy] buildFolders:",F.map(Zt=>{var Yl;return{name:Zt.name,isMain:Zt.isMain,fileCount:Zt.fileCount,hasContents:((Yl=Zt.fileContents)==null?void 0:Yl.length)||0}}));const et=F.find(Zt=>Zt.isMain);if(!(et!=null&&et.fileContents)||et.fileContents.length===0)throw new Error("No file contents in main folder. Please re-upload your folders.");const{default:cl}=await Bo(async()=>{const{default:Zt}=await import("https://cdn.jsdelivr.net/npm/jszip@3.10.1/+esm");return{default:Zt}},[]),Bl=new cl;let Ul=0;for(const Zt of F){const Yl=Zt.fileContents||[];for(const{path:Hf,content:Gf}of Yl)Bl.file(`${Zt.name}/${Hf}`,Gf),Ul++}if(console.log("[Deploy] Total files in zip:",Ul),Ul===0)throw new Error("No files to deploy. Please re-upload your folders.");F.length>1&&H&&Bl.file("Dockerfile",H),We=await Bl.generateAsync({type:"blob"})}Nt("Sending deployment request... server provisioning may take 30-60s"),t(42,te=20);const kt=i==="service"&&Ee,ut=Ft(),el=zn(),yl=new URLSearchParams({do_token:ut,snapshot_id:x||"",new_server_count:String(le),region:V,size:J,project:h||"",environment:v,setup_domain:String(kt),base_domain:je,domain_aliases:JSON.stringify(ve.split(",").map(et=>et.trim()).filter(Boolean))});kt&&el&&yl.set("cf_token",el);const nt=new FormData;nt.append("name",m),nt.append("port",String(Ae)),nt.append("source_type",de),nt.append("env_vars",$),nt.append("tags",g),nt.append("server_ips",JSON.stringify(Array.from(re))),nt.append("depends_on",JSON.stringify(Object.entries(Je).filter(([et,cl])=>cl).map(([et])=>et))),nt.append("exclude_patterns",JSON.stringify(Le)),nt.append("deploy_type",i),i==="stateful"?(nt.append("is_stateful","true"),nt.append("persist_data","true"),nt.append("image",Ce)):(nt.append("is_stateful","false"),nt.append("persist_data",String(qe))),(i==="worker"||i==="scheduled")&&_&&nt.append("custom_cmd",_),i==="scheduled"&&p&&nt.append("cron_schedule",p),H&&nt.append("dockerfile",H),y&&nt.append("git_url",y),D&&nt.append("git_branch",D),E&&nt.append("git_token",E),L.length&&nt.append("git_folders",JSON.stringify(L)),Ce&&i!=="stateful"&&nt.append("image",Ce),We&&nt.append("code_tar",We,"code.zip"),S==="image_file"&&(O&&nt.append("image_tar",O),N&&nt.append("image",N),M&&nt.append("container_port",String(M)),G&&nt.append("host_port",String(G))),await T1(`/infra/deploy/multipart?${yl}`,nt,et=>{var cl;if(et.type==="log")Nt(et.message);else if(et.type==="warning")Nt(et.message||((cl=et.data)==null?void 0:cl.message),"warning");else if(et.type==="progress")t(42,te=Math.min(20+(et.percent||0)*.8,95));else if(et.type==="done"){if(t(44,Z=et),t(42,te=100),!et.success){const Bl=et.failed_count||0,Ul=et.error||`Deployment failed: ${Bl} server(s) failed`;throw new Error(Ul)}}else if(et.type==="error")throw new Error(et.message||"Deployment failed")}),Nt("✅ Deployment complete!","success"),$e.success("Deployment successful!"),await Xt.refresh().catch(()=>{})}catch(de){let Ce="Unknown error";if(typeof de=="string")Ce=de;else if(de!=null&&de.message)Ce=de.message;else if(de!=null&&de.detail)Ce=de.detail;else if(de!=null&&de.error)Ce=de.error;else try{Ce=JSON.stringify(de)}catch{Ce=String(de)}Nt(`❌ Error: ${Ce}`,"error"),$e.error(Ce)}finally{t(41,ue=!1),t(9,le=0)}}const ul=[[],[]],zt=se=>K(se.value);function fl(){h=this.value,t(4,h)}function Dt(){m=this.value,t(3,m),t(0,i),t(2,c),t(1,a)}function gt(){v=dt(this),t(5,v),t(62,it)}function bt(){a=this.__value,t(1,a)}const hn=se=>se.value===a;function Vl(){Ue=this.value,t(55,Ue)}function gn(){g=this.value,t(14,g)}function Jl(){S=this.__value,t(15,S)}function bn(){S=this.__value,t(15,S)}function Kl(){S=this.__value,t(15,S)}function De(){S=this.__value,t(15,S)}function Fe(se){It[se?"unshift":"push"](()=>{A=se,t(29,A)})}const Rt=se=>xt(se),Cl=se=>Jt(se);function Fl(){R=this.checked,t(30,R)}function rt(){H=this.value,t(32,H)}function gl(){X=dt(this),t(35,X)}const Gu=()=>Ut("from");function Wu(){oe=this.value,t(36,oe)}const Vu=()=>Ut("cmd");function Ju(){y=this.value,t(18,y)}function Ku(){D=this.value,t(19,D)}const Yu=se=>$l(se);function Qu(){z=this.value,t(22,z)}const Zu=()=>Tt(!0),Xu=()=>Tt(!1);function xu(){E=this.value,t(20,E)}function ef(){q=this.value,t(23,q)}function tf(){N=this.value,t(25,N)}function lf(){M=Kt(this.value),t(26,M)}function nf(){G=Kt(this.value),t(27,G)}function sf(){C=Kt(this.value),t(16,C)}function of(){_=this.value,t(12,_)}function rf(){p=this.value,t(13,p)}const af=()=>t(13,p="* * * * *"),uf=()=>t(13,p="0 * * * *"),ff=()=>t(13,p="0 0 * * *"),cf=()=>t(13,p="0 0 * * 0"),_f=()=>t(56,lt=!lt);function df(){$=this.value,t(17,$)}const pf=()=>t(57,st=!st);function mf(){at=this.checked,t(48,at)}function vf(){Je.postgres=this.checked,t(50,Je)}function hf(){Je.redis=this.checked,t(50,Je)}function gf(){Je.mysql=this.checked,t(50,Je)}function bf(){Je.mongo=this.checked,t(50,Je)}function kf(){qe=this.checked,t(49,qe)}function wf(){Ee=this.checked,t(51,Ee)}function $f(){je=this.value,t(10,je)}function Cf(){ve=this.value,t(52,ve)}const yf=()=>Oe(!0),Sf=()=>Oe(!1),Tf=se=>_t(se),zf=se=>he(se),Df=()=>t(58,ot=!ot);function Ef(){x=dt(this),t(6,x),t(11,s)}function qf(){V=dt(this),t(7,V),t(38,ae)}function Lf(){J=dt(this),t(37,J),t(39,W)}const Pf=se=>t(9,le=se.target.checked?1:0),Nf=()=>t(9,le=Math.max(0,le-1));function Rf(){le=Kt(this.value),t(9,le),t(0,i)}const Mf=()=>t(9,le=Math.min(10,le+1)),Af=()=>{navigator.clipboard.writeText(Z.connection_url),$e.success("Copied to clipboard!")},jf=se=>window.open(`/api/v1/infra/agent/${se.droplet_id||se.ip}/containers/${se.container_name||Z.container_name||m}/logs?do_token=${Ft()}`,"_blank"),Of=se=>window.open(`/api/v1/infra/agent/${se.droplet_id||se.ip}/containers/${se.container_name||Z.container_name||m}/logs?do_token=${Ft()}`,"_blank"),If=se=>window.open(`/api/v1/infra/agent/${se.droplet_id||se.ip}/containers/${se.container_name||Z.container_name||m}/logs?do_token=${Ft()}`,"_blank"),Ff=()=>{t(45,ge=!1),t(47,Ge=null)};function Bf(se){ge=se,t(45,ge)}const Uf=()=>{t(45,ge=!1),t(47,Ge=null)};return l.$$.update=()=>{if(l.$$.dirty[0]&15&&i==="stateful"&&(!m||c.some(se=>se.value===m))&&t(3,m=a),l.$$.dirty[0]&128|l.$$.dirty[2]&8388608&&t(40,ie=(o||[]).filter(se=>!V||se.region===V)),l.$$.dirty[0]&257&&(i==="stateful"||i==="scheduled")&&re.size>1){const se=[...re][0];re.clear(),se&&re.add(se),t(8,re),t(0,i),t(9,le)}if(l.$$.dirty[0]&513&&(i==="stateful"||i==="scheduled")&&le>1&&t(9,le=1),l.$$.dirty[0]&769&&(i==="stateful"||i==="scheduled")&&le>0&&re.size>0&&(re.clear(),t(8,re),t(0,i),t(9,le)),l.$$.dirty[0]&1080&&t(59,n=m&&h&&v?`${m}-${h}-${v}.${je}`:""),l.$$.dirty[0]&25|l.$$.dirty[2]&4194304&&m&&h&&i!=="stateful"&&(St&&clearTimeout(St),t(84,St=setTimeout(()=>{tt()},500))),l.$$.dirty[0]&2112&&(s==null?void 0:s.length)>0&&!x){const se=s.find(de=>(de.name||"").toLowerCase().includes("base"));t(6,x=(se==null?void 0:se.id)||(se==null?void 0:se.name)||s[0].id||s[0].name)}},[i,a,c,m,h,v,x,V,re,le,je,s,_,p,g,S,C,$,y,D,E,L,z,q,O,N,M,G,F,A,R,I,H,Y,Q,X,oe,J,ae,W,ie,ue,te,me,Z,ge,we,Ge,at,qe,Je,Ee,ve,Pe,Ne,Ue,lt,st,ot,n,u,K,it,nl,Pt,Ht,ct,he,Oe,_t,Gt,Wt,Ye,Vt,vl,Jt,xt,Ut,Tt,$l,Qt,vt,Ol,Nt,St,o,zt,fl,Dt,gt,bt,ul,hn,Vl,gn,Jl,bn,Kl,De,Fe,Rt,Cl,Fl,rt,gl,Gu,Wu,Vu,Ju,Ku,Yu,Qu,Zu,Xu,xu,ef,tf,lf,nf,sf,of,rf,af,uf,ff,cf,_f,df,pf,mf,vf,hf,gf,bf,kf,wf,$f,Cf,yf,Sf,Tf,zf,Df,Ef,qf,Lf,Pf,Nf,Rf,Mf,Af,jf,Of,If,Ff,Bf,Uf]}class Ad extends Ct{constructor(e){super(),$t(this,e,Md,Pd,wt,{},null,[-1,-1,-1,-1,-1,-1,-1,-1])}}function gr(l,e,t){const n=l.slice();return n[55]=e[t],n}function br(l,e,t){const n=l.slice();return n[55]=e[t],n}function kr(l,e,t){const n=l.slice();return n[55]=e[t],n}function wr(l,e,t){const n=l.slice();return n[62]=e[t],n}function $r(l,e,t){const n=l.slice();return n[66]=e[t],n}function Cr(l,e,t){const n=l.slice();return n[69]=e[t][0],n[70]=e[t][1],n}function jd(l){const e=l.slice(),t=e[14].config_snapshot;return e[65]=t,e}function yr(l,e,t){const n=l.slice();return n[62]=e[t],n}function Sr(l,e,t){const n=l.slice();return n[75]=e[t],n}function Tr(l,e,t){const n=l.slice();n[78]=e[t];const s=il(n[78]);return n[79]=s,n}function zr(l){let e,t,n=ra(l[20])+"",s;return{c(){e=d("span"),t=T("Updated "),s=T(n),f(e,"class","last-updated svelte-cuxyqu")},m(o,i){w(o,e,i),r(e,t),r(e,s)},p(o,i){i[0]&1048576&&n!==(n=ra(o[20])+"")&&B(s,n)},d(o){o&&k(e)}}}function Od(l){let e;return{c(){e=T("↻ Refresh")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function Id(l){let e,t,n=pe(l[19]),s=[];for(let i=0;i<n.length;i+=1)s[i]=Lr(Tr(l,n,i));const o=i=>j(s[i],1,1,()=>{s[i]=null});return{c(){for(let i=0;i<s.length;i+=1)s[i].c();e=Ie()},m(i,u){for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(i,u);w(i,e,u),t=!0},p(i,u){if(u[0]&27787264){n=pe(i[19]);let a;for(a=0;a<n.length;a+=1){const c=Tr(i,n,a);s[a]?(s[a].p(c,u),P(s[a],1)):(s[a]=Lr(c),s[a].c(),P(s[a],1),s[a].m(e.parentNode,e))}for(Se(),a=n.length;a<s.length;a+=1)o(a);Te()}},i(i){if(!t){for(let u=0;u<n.length;u+=1)P(s[u]);t=!0}},o(i){s=s.filter(Boolean);for(let u=0;u<s.length;u+=1)j(s[u]);t=!1},d(i){i&&k(e),Me(s,i)}}}function Fd(l){let e;return{c(){e=d("tr"),e.innerHTML='<td colspan="12" class="empty-cell svelte-cuxyqu">No deployments found</td>',f(e,"class","svelte-cuxyqu")},m(t,n){w(t,e,n)},p:be,i:be,o:be,d(t){t&&k(e)}}}function Bd(l){let e;return{c(){e=d("tr"),e.innerHTML='<td colspan="12" class="loading-cell svelte-cuxyqu">Loading deployment history...</td>',f(e,"class","svelte-cuxyqu")},m(t,n){w(t,e,n)},p:be,i:be,o:be,d(t){t&&k(e)}}}function Ud(l){let e=(l[78].environment||"-")+"",t;return{c(){t=T(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&524288&&e!==(e=(n[78].environment||"-")+"")&&B(t,e)},d(n){n&&k(t)}}}function Hd(l){let e;return{c(){e=d("span"),e.textContent="-",f(e,"class","version-none svelte-cuxyqu")},m(t,n){w(t,e,n)},p:be,d(t){t&&k(e)}}}function Gd(l){let e,t,n=l[78].version+"",s;return{c(){e=d("span"),t=T("v"),s=T(n),f(e,"class","version-badge svelte-cuxyqu")},m(o,i){w(o,e,i),r(e,t),r(e,s)},p(o,i){i[0]&524288&&n!==(n=o[78].version+"")&&B(s,n)},d(o){o&&k(e)}}}function Wd(l){let e=l[78].is_rollback?"rollback":"deploy",t;return{c(){t=T(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&524288&&e!==(e=n[78].is_rollback?"rollback":"deploy")&&B(t,e)},d(n){n&&k(t)}}}function Vd(l){let e=l[79]+"",t;return{c(){t=T(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&524288&&e!==(e=n[79]+"")&&B(t,e)},d(n){n&&k(t)}}}function Dr(l){let e,t,n;function s(){return l[34](l[78])}return{c(){e=d("button"),e.textContent="⚙️",f(e,"class","icon-btn svelte-cuxyqu"),f(e,"title","View config")},m(o,i){w(o,e,i),t||(n=ee(e,"click",s),t=!0)},p(o,i){l=o},d(o){o&&k(e),t=!1,n()}}}function Er(l){let e,t,n;function s(){return l[35](l[78])}return{c(){e=d("button"),e.textContent="📋",f(e,"class","icon-btn svelte-cuxyqu"),f(e,"title","View logs")},m(o,i){w(o,e,i),t||(n=ee(e,"click",s),t=!0)},p(o,i){l=o},d(o){o&&k(e),t=!1,n()}}}function qr(l){let e,t,n;function s(){return l[36](l[78])}return{c(){e=d("button"),e.textContent="⏪",f(e,"class","icon-btn rollback-icon-btn svelte-cuxyqu"),f(e,"title","Rollback")},m(o,i){w(o,e,i),t||(n=ee(e,"click",s),t=!0)},p(o,i){l=o},d(o){o&&k(e),t=!1,n()}}}function Lr(l){let e,t,n,s=(l[78].project||"-")+"",o,i,u,a,c=(l[78].service||l[78].name)+"",_,p,m,h,v,g,S,C,$=tl(l[78].deployed_at||l[78].created_at)+"",y,D,E,L=(l[78].deployed_by||l[78].user||"-")+"",z,q,O,N,M,G,F,A,U,R,I=(l[78].comment||"-")+"",H,Y,Q,X,oe,x,V,J,ae;h=new Xe({props:{variant:l[78].environment==="prod"?"purple":l[78].environment==="staging"?"warning":"info",$$slots:{default:[Ud]},$$scope:{ctx:l}}});function W(le,Z){return le[78].version?Gd:Hd}let ie=W(l),ue=ie(l);M=new Xe({props:{variant:l[78].is_rollback?"warning":"info",$$slots:{default:[Wd]},$$scope:{ctx:l}}}),A=new Xe({props:{variant:Ml(l[79]),$$slots:{default:[Vd]},$$scope:{ctx:l}}});let te=l[78].config_snapshot&&Dr(l),me=l[78].has_logs&&Er(l),re=l[78].is_current_active&&qr(l);return{c(){e=d("tr"),t=d("td"),n=d("span"),o=T(s),i=b(),u=d("td"),a=d("span"),_=T(c),p=b(),m=d("td"),_e(h.$$.fragment),v=b(),g=d("td"),ue.c(),S=b(),C=d("td"),y=T($),D=b(),E=d("td"),z=T(L),O=b(),N=d("td"),_e(M.$$.fragment),G=b(),F=d("td"),_e(A.$$.fragment),U=b(),R=d("td"),H=T(I),Y=b(),Q=d("td"),te&&te.c(),X=b(),oe=d("td"),me&&me.c(),x=b(),V=d("td"),re&&re.c(),J=b(),f(n,"class","project-name svelte-cuxyqu"),f(t,"class","svelte-cuxyqu"),f(a,"class","service-name svelte-cuxyqu"),f(u,"class","svelte-cuxyqu"),f(m,"class","svelte-cuxyqu"),f(g,"class","version-cell svelte-cuxyqu"),f(C,"class","date-cell svelte-cuxyqu"),f(E,"class","by-cell svelte-cuxyqu"),f(E,"title",q=l[78].deployed_by||l[78].user||"-"),f(N,"class","svelte-cuxyqu"),f(F,"class","svelte-cuxyqu"),f(R,"class","comment-cell svelte-cuxyqu"),f(Q,"class","config-cell svelte-cuxyqu"),f(oe,"class","logs-cell svelte-cuxyqu"),f(V,"class","rollback-cell svelte-cuxyqu"),f(e,"class","svelte-cuxyqu")},m(le,Z){w(le,e,Z),r(e,t),r(t,n),r(n,o),r(e,i),r(e,u),r(u,a),r(a,_),r(e,p),r(e,m),fe(h,m,null),r(e,v),r(e,g),ue.m(g,null),r(e,S),r(e,C),r(C,y),r(e,D),r(e,E),r(E,z),r(e,O),r(e,N),fe(M,N,null),r(e,G),r(e,F),fe(A,F,null),r(e,U),r(e,R),r(R,H),r(e,Y),r(e,Q),te&&te.m(Q,null),r(e,X),r(e,oe),me&&me.m(oe,null),r(e,x),r(e,V),re&&re.m(V,null),r(e,J),ae=!0},p(le,Z){(!ae||Z[0]&524288)&&s!==(s=(le[78].project||"-")+"")&&B(o,s),(!ae||Z[0]&524288)&&c!==(c=(le[78].service||le[78].name)+"")&&B(_,c);const K={};Z[0]&524288&&(K.variant=le[78].environment==="prod"?"purple":le[78].environment==="staging"?"warning":"info"),Z[0]&524288|Z[2]&1048576&&(K.$$scope={dirty:Z,ctx:le}),h.$set(K),ie===(ie=W(le))&&ue?ue.p(le,Z):(ue.d(1),ue=ie(le),ue&&(ue.c(),ue.m(g,null))),(!ae||Z[0]&524288)&&$!==($=tl(le[78].deployed_at||le[78].created_at)+"")&&B(y,$),(!ae||Z[0]&524288)&&L!==(L=(le[78].deployed_by||le[78].user||"-")+"")&&B(z,L),(!ae||Z[0]&524288&&q!==(q=le[78].deployed_by||le[78].user||"-"))&&f(E,"title",q);const ge={};Z[0]&524288&&(ge.variant=le[78].is_rollback?"warning":"info"),Z[0]&524288|Z[2]&1048576&&(ge.$$scope={dirty:Z,ctx:le}),M.$set(ge);const we={};Z[0]&524288&&(we.variant=Ml(le[79])),Z[0]&524288|Z[2]&1048576&&(we.$$scope={dirty:Z,ctx:le}),A.$set(we),(!ae||Z[0]&524288)&&I!==(I=(le[78].comment||"-")+"")&&B(H,I),le[78].config_snapshot?te?te.p(le,Z):(te=Dr(le),te.c(),te.m(Q,null)):te&&(te.d(1),te=null),le[78].has_logs?me?me.p(le,Z):(me=Er(le),me.c(),me.m(oe,null)):me&&(me.d(1),me=null),le[78].is_current_active?re?re.p(le,Z):(re=qr(le),re.c(),re.m(V,null)):re&&(re.d(1),re=null)},i(le){ae||(P(h.$$.fragment,le),P(M.$$.fragment,le),P(A.$$.fragment,le),ae=!0)},o(le){j(h.$$.fragment,le),j(M.$$.fragment,le),j(A.$$.fragment,le),ae=!1},d(le){le&&k(e),ce(h),ue.d(),ce(M),ce(A),te&&te.d(),me&&me.d(),re&&re.d()}}}function Jd(l){let e,t,n,s,o,i,u,a;const c=[Bd,Fd,Id],_=[];function p(m,h){return m[0]&&m[19].length===0?0:m[19].length===0?1:2}return i=p(l),u=_[i]=c[i](l),{c(){e=d("div"),t=d("table"),n=d("thead"),n.innerHTML='<tr class="svelte-cuxyqu"><th class="svelte-cuxyqu">Project</th> <th class="svelte-cuxyqu">Service</th> <th class="svelte-cuxyqu">Environment</th> <th class="version-col svelte-cuxyqu">v</th> <th class="svelte-cuxyqu">Deployed</th> <th class="svelte-cuxyqu">By</th> <th class="svelte-cuxyqu">Type</th> <th class="svelte-cuxyqu">Status</th> <th class="svelte-cuxyqu">Comment</th> <th class="config-col svelte-cuxyqu"></th> <th class="logs-col svelte-cuxyqu"></th> <th class="rollback-col svelte-cuxyqu"></th></tr>',s=b(),o=d("tbody"),u.c(),f(t,"class","table svelte-cuxyqu"),f(e,"class","table-container svelte-cuxyqu")},m(m,h){w(m,e,h),r(e,t),r(t,n),r(t,s),r(t,o),_[i].m(o,null),a=!0},p(m,h){let v=i;i=p(m),i===v?_[i].p(m,h):(Se(),j(_[v],1,1,()=>{_[v]=null}),Te(),u=_[i],u?u.p(m,h):(u=_[i]=c[i](m),u.c()),P(u,1),u.m(o,null))},i(m){a||(P(u),a=!0)},o(m){j(u),a=!1},d(m){m&&k(e),_[i].d()}}}function Pr(l){let e,t,n,s=(l[2].service||l[2].name)+"",o,i,u,a=l[2].project+"",c,_,p=l[2].environment+"",m,h,v,g,S,C,$,y=tl(l[2].deployed_at||l[2].created_at)+"",D,E,L,z,q=(l[2].deployed_by||l[2].user||"unknown")+"",O,N,M,G,F,A,U,R,I,H,Y=l[2].comment&&Nr(l);const Q=[Yd,Kd],X=[];function oe(V,J){return V[3].length===0?0:1}U=oe(l),R=X[U]=Q[U](l);let x=l[6].length>0&&Mr(l);return{c(){e=d("div"),t=d("div"),n=d("div"),o=T(s),i=b(),u=d("div"),c=T(a),_=T(" / "),m=T(p),h=b(),v=d("div"),g=d("label"),g.textContent="📍 Current Deployment",S=b(),C=d("div"),$=d("div"),D=T(y),E=b(),L=d("div"),z=T("by "),O=T(q),N=b(),Y&&Y.c(),M=b(),G=d("div"),F=d("label"),F.textContent="🎯 Rollback to",A=b(),R.c(),I=b(),x&&x.c(),f(n,"class","service-name svelte-cuxyqu"),f(u,"class","service-coords svelte-cuxyqu"),f(t,"class","service-info svelte-cuxyqu"),f(g,"class","svelte-cuxyqu"),f($,"class","deploy-date svelte-cuxyqu"),f(L,"class","deploy-by svelte-cuxyqu"),f(C,"class","deployment-card current svelte-cuxyqu"),f(v,"class","section svelte-cuxyqu"),f(F,"class","svelte-cuxyqu"),f(G,"class","section svelte-cuxyqu"),f(e,"class","rollback-content svelte-cuxyqu")},m(V,J){w(V,e,J),r(e,t),r(t,n),r(n,o),r(t,i),r(t,u),r(u,c),r(u,_),r(u,m),r(e,h),r(e,v),r(v,g),r(v,S),r(v,C),r(C,$),r($,D),r(C,E),r(C,L),r(L,z),r(L,O),r(C,N),Y&&Y.m(C,null),r(e,M),r(e,G),r(G,F),r(G,A),X[U].m(G,null),r(e,I),x&&x.m(e,null),H=!0},p(V,J){(!H||J[0]&4)&&s!==(s=(V[2].service||V[2].name)+"")&&B(o,s),(!H||J[0]&4)&&a!==(a=V[2].project+"")&&B(c,a),(!H||J[0]&4)&&p!==(p=V[2].environment+"")&&B(m,p),(!H||J[0]&4)&&y!==(y=tl(V[2].deployed_at||V[2].created_at)+"")&&B(D,y),(!H||J[0]&4)&&q!==(q=(V[2].deployed_by||V[2].user||"unknown")+"")&&B(O,q),V[2].comment?Y?Y.p(V,J):(Y=Nr(V),Y.c(),Y.m(C,null)):Y&&(Y.d(1),Y=null);let ae=U;U=oe(V),U===ae?X[U].p(V,J):(Se(),j(X[ae],1,1,()=>{X[ae]=null}),Te(),R=X[U],R?R.p(V,J):(R=X[U]=Q[U](V),R.c()),P(R,1),R.m(G,null)),V[6].length>0?x?x.p(V,J):(x=Mr(V),x.c(),x.m(e,null)):x&&(x.d(1),x=null)},i(V){H||(P(R),H=!0)},o(V){j(R),H=!1},d(V){V&&k(e),Y&&Y.d(),X[U].d(),x&&x.d()}}}function Nr(l){let e,t=l[2].comment+"",n;return{c(){e=d("div"),n=T(t),f(e,"class","deploy-comment svelte-cuxyqu")},m(s,o){w(s,e,o),r(e,n)},p(s,o){o[0]&4&&t!==(t=s[2].comment+"")&&B(n,t)},d(s){s&&k(e)}}}function Kd(l){let e,t,n=pe(l[3]),s=[];for(let i=0;i<n.length;i+=1)s[i]=Rr(Sr(l,n,i));const o=i=>j(s[i],1,1,()=>{s[i]=null});return{c(){e=d("div");for(let i=0;i<s.length;i+=1)s[i].c();f(e,"class","deployment-list svelte-cuxyqu")},m(i,u){w(i,e,u);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(e,null);t=!0},p(i,u){if(u[0]&56){n=pe(i[3]);let a;for(a=0;a<n.length;a+=1){const c=Sr(i,n,a);s[a]?(s[a].p(c,u),P(s[a],1)):(s[a]=Rr(c),s[a].c(),P(s[a],1),s[a].m(e,null))}for(Se(),a=n.length;a<s.length;a+=1)o(a);Te()}},i(i){if(!t){for(let u=0;u<n.length;u+=1)P(s[u]);t=!0}},o(i){s=s.filter(Boolean);for(let u=0;u<s.length;u+=1)j(s[u]);t=!1},d(i){i&&k(e),Me(s,i)}}}function Yd(l){let e;return{c(){e=d("div"),e.textContent="No previous deployments found",f(e,"class","no-deployments svelte-cuxyqu")},m(t,n){w(t,e,n)},p:be,i:be,o:be,d(t){t&&k(e)}}}function Qd(l){let e,t=l[75].id.substring(0,8)+"",n;return{c(){e=d("span"),n=T(t),f(e,"class","version-badge muted svelte-cuxyqu")},m(s,o){w(s,e,o),r(e,n)},p(s,o){o[0]&8&&t!==(t=s[75].id.substring(0,8)+"")&&B(n,t)},d(s){s&&k(e)}}}function Zd(l){let e,t,n=l[75].version+"",s;return{c(){e=d("span"),t=T("v"),s=T(n),f(e,"class","version-badge svelte-cuxyqu")},m(o,i){w(o,e,i),r(e,t),r(e,s)},p(o,i){i[0]&8&&n!==(n=o[75].version+"")&&B(s,n)},d(o){o&&k(e)}}}function Xd(l){let e=il(l[75])+"",t;return{c(){t=T(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&8&&e!==(e=il(n[75])+"")&&B(t,e)},d(n){n&&k(t)}}}function Rr(l){let e,t,n,s=!1,o,i,u,a,c,_=tl(l[75].deployed_at||l[75].created_at)+"",p,m,h,v,g=(l[75].deployed_by||l[75].user||"unknown")+"",S,C,$,y,D,E,L,z;function q(M,G){return M[75].version?Zd:Qd}let O=q(l),N=O(l);return $=new Xe({props:{variant:Ml(il(l[75])),$$slots:{default:[Xd]},$$scope:{ctx:l}}}),E=Ln(l[39][0]),{c(){e=d("label"),t=d("input"),o=b(),i=d("div"),N.c(),u=b(),a=d("div"),c=d("div"),p=T(_),m=b(),h=d("div"),v=T("by "),S=T(g),C=b(),_e($.$$.fragment),y=b(),f(t,"type","radio"),t.__value=n=l[75].id,ne(t,t.__value),t.disabled=l[5],f(t,"class","svelte-cuxyqu"),f(i,"class","deploy-version svelte-cuxyqu"),f(c,"class","deploy-date svelte-cuxyqu"),f(h,"class","deploy-by svelte-cuxyqu"),f(a,"class","deploy-info svelte-cuxyqu"),f(e,"class","deployment-option svelte-cuxyqu"),ke(e,"selected",l[4]===l[75].id),E.p(t)},m(M,G){w(M,e,G),r(e,t),t.checked=t.__value===l[4],r(e,o),r(e,i),N.m(i,null),r(e,u),r(e,a),r(a,c),r(c,p),r(a,m),r(a,h),r(h,v),r(h,S),r(e,C),fe($,e,null),r(e,y),D=!0,L||(z=ee(t,"change",l[38]),L=!0)},p(M,G){(!D||G[0]&8&&n!==(n=M[75].id))&&(t.__value=n,ne(t,t.__value),s=!0),(!D||G[0]&32)&&(t.disabled=M[5]),(s||G[0]&24)&&(t.checked=t.__value===M[4]),O===(O=q(M))&&N?N.p(M,G):(N.d(1),N=O(M),N&&(N.c(),N.m(i,null))),(!D||G[0]&8)&&_!==(_=tl(M[75].deployed_at||M[75].created_at)+"")&&B(p,_),(!D||G[0]&8)&&g!==(g=(M[75].deployed_by||M[75].user||"unknown")+"")&&B(S,g);const F={};G[0]&8&&(F.variant=Ml(il(M[75]))),G[0]&8|G[2]&1048576&&(F.$$scope={dirty:G,ctx:M}),$.$set(F),(!D||G[0]&24)&&ke(e,"selected",M[4]===M[75].id)},i(M){D||(P($.$$.fragment,M),D=!0)},o(M){j($.$$.fragment,M),D=!1},d(M){M&&k(e),N.d(),ce($),E.r(),L=!1,z()}}}function Mr(l){let e,t,n,s,o,i=pe(l[6]),u=[];for(let c=0;c<i.length;c+=1)u[c]=Ar(yr(l,i,c));let a=l[5]&&jr();return{c(){e=d("div"),t=d("label"),t.textContent="📋 Progress",n=b(),s=d("div");for(let c=0;c<u.length;c+=1)u[c].c();o=b(),a&&a.c(),f(t,"class","svelte-cuxyqu"),f(s,"class","rollback-logs svelte-cuxyqu"),f(e,"class","section rollback-logs-section svelte-cuxyqu")},m(c,_){w(c,e,_),r(e,t),r(e,n),r(e,s);for(let p=0;p<u.length;p+=1)u[p]&&u[p].m(s,null);r(s,o),a&&a.m(s,null)},p(c,_){if(_[0]&64){i=pe(c[6]);let p;for(p=0;p<i.length;p+=1){const m=yr(c,i,p);u[p]?u[p].p(m,_):(u[p]=Ar(m),u[p].c(),u[p].m(s,o))}for(;p<u.length;p+=1)u[p].d(1);u.length=i.length}c[5]?a||(a=jr(),a.c(),a.m(s,null)):a&&(a.d(1),a=null)},d(c){c&&k(e),Me(u,c),a&&a.d()}}}function Ar(l){let e,t=l[62].message+"",n,s;return{c(){e=d("div"),n=T(t),f(e,"class",s="log-entry log-"+l[62].type+" svelte-cuxyqu")},m(o,i){w(o,e,i),r(e,n)},p(o,i){i[0]&64&&t!==(t=o[62].message+"")&&B(n,t),i[0]&64&&s!==(s="log-entry log-"+o[62].type+" svelte-cuxyqu")&&f(e,"class",s)},d(o){o&&k(e)}}}function jr(l){let e;return{c(){e=d("div"),e.innerHTML='<span class="spinner svelte-cuxyqu">⏳</span> Working...',f(e,"class","log-entry log-info svelte-cuxyqu")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function xd(l){let e,t,n=l[2]&&Pr(l);return{c(){n&&n.c(),e=Ie()},m(s,o){n&&n.m(s,o),w(s,e,o),t=!0},p(s,o){s[2]?n?(n.p(s,o),o[0]&4&&P(n,1)):(n=Pr(s),n.c(),P(n,1),n.m(e.parentNode,e)):n&&(Se(),j(n,1,1,()=>{n=null}),Te())},i(s){t||(P(n),t=!0)},o(s){j(n),t=!1},d(s){s&&k(e),n&&n.d(s)}}}function ep(l){let e=l[6].length>0?"Close":"Cancel",t;return{c(){t=T(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&64&&e!==(e=n[6].length>0?"Close":"Cancel")&&B(t,e)},d(n){n&&k(t)}}}function tp(l){let e;return{c(){e=T("⏪ Execute Rollback")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function lp(l){let e;return{c(){e=T("⏳ Rolling back...")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function np(l){let e;function t(o,i){return o[5]?lp:tp}let n=t(l),s=n(l);return{c(){s.c(),e=Ie()},m(o,i){s.m(o,i),w(o,e,i)},p(o,i){n!==(n=t(o))&&(s.d(1),s=n(o),s&&(s.c(),s.m(e.parentNode,e)))},d(o){o&&k(e),s.d(o)}}}function sp(l){let e,t,n,s,o;return t=new Be({props:{variant:"ghost",$$slots:{default:[ep]},$$scope:{ctx:l}}}),t.$on("click",l[37]),s=new Be({props:{variant:"warning",disabled:!l[4]||l[5],$$slots:{default:[np]},$$scope:{ctx:l}}}),s.$on("click",l[25]),{c(){e=d("div"),_e(t.$$.fragment),n=b(),_e(s.$$.fragment),f(e,"slot","footer")},m(i,u){w(i,e,u),fe(t,e,null),r(e,n),fe(s,e,null),o=!0},p(i,u){const a={};u[0]&64|u[2]&1048576&&(a.$$scope={dirty:u,ctx:i}),t.$set(a);const c={};u[0]&48&&(c.disabled=!i[4]||i[5]),u[0]&32|u[2]&1048576&&(c.$$scope={dirty:u,ctx:i}),s.$set(c)},i(i){o||(P(t.$$.fragment,i),P(s.$$.fragment,i),o=!0)},o(i){j(t.$$.fragment,i),j(s.$$.fragment,i),o=!1},d(i){i&&k(e),ce(t),ce(s)}}}function Or(l){let e,t,n,s=(l[14].service_name||l[14].service)+"",o,i,u,a=l[14].environment+"",c,_,p=tl(l[14].deployed_at)+"",m,h,v,g,S;const C=[ip,op],$=[];function y(E,L){return E[14].config_snapshot?0:1}function D(E,L){return L===0?jd(E):E}return v=y(l),g=$[v]=C[v](D(l,v)),{c(){e=d("div"),t=d("div"),n=d("span"),o=T(s),i=b(),u=d("span"),c=T(a),_=T(" • "),m=T(p),h=b(),g.c(),f(n,"class","service-name svelte-cuxyqu"),f(u,"class","meta svelte-cuxyqu"),f(t,"class","config-header-info svelte-cuxyqu"),f(e,"class","config-content svelte-cuxyqu")},m(E,L){w(E,e,L),r(e,t),r(t,n),r(n,o),r(t,i),r(t,u),r(u,c),r(u,_),r(u,m),r(e,h),$[v].m(e,null),S=!0},p(E,L){(!S||L[0]&16384)&&s!==(s=(E[14].service_name||E[14].service)+"")&&B(o,s),(!S||L[0]&16384)&&a!==(a=E[14].environment+"")&&B(c,a),(!S||L[0]&16384)&&p!==(p=tl(E[14].deployed_at)+"")&&B(m,p);let z=v;v=y(E),v===z?$[v].p(D(E,v),L):(Se(),j($[z],1,1,()=>{$[z]=null}),Te(),g=$[v],g?g.p(D(E,v),L):(g=$[v]=C[v](D(E,v)),g.c()),P(g,1),g.m(e,null))},i(E){S||(P(g),S=!0)},o(E){j(g),S=!1},d(E){E&&k(e),$[v].d()}}}function op(l){let e;return{c(){e=d("div"),e.textContent="No config snapshot available",f(e,"class","no-config svelte-cuxyqu")},m(t,n){w(t,e,n)},p:be,i:be,o:be,d(t){t&&k(e)}}}function ip(l){var ie,ue;let e,t,n,s,o,i,u=(l[65].source_type||"-")+"",a,c,_,p,m,h,v,g,S=(l[65].port||"-")+"",C,$,y,D,E,L,z,q,O,N,M=l[65].env_vars&&Object.keys(l[65].env_vars).length>0,G,F,A,U=l[65].git_url&&Ir(l),R=l[65].git_branch&&Fr(l),I=l[65].image&&Br(l),H=l[65].container_port&&Ur(l),Y=l[65].host_port&&Hr(l),Q=l[65].snapshot_id&&Gr(l),X=l[65].region&&Wr(l),oe=l[65].size&&Vr(l),x=((ie=l[65].server_ips)==null?void 0:ie.length)&&Jr(l),V=l[65].setup_domain&&Kr(),J=l[65].base_domain&&Yr(l),ae=M&&Qr(l),W=((ue=l[65].tags)==null?void 0:ue.length)&&Xr(l);return{c(){e=d("table"),t=d("tbody"),n=d("tr"),s=d("td"),s.textContent="Source Type",o=d("td"),i=d("strong"),a=T(u),c=b(),U&&U.c(),_=b(),R&&R.c(),p=b(),I&&I.c(),m=b(),h=d("tr"),v=d("td"),v.textContent="Port",g=d("td"),C=T(S),$=b(),H&&H.c(),y=b(),Y&&Y.c(),D=b(),Q&&Q.c(),E=b(),X&&X.c(),L=b(),oe&&oe.c(),z=b(),x&&x.c(),q=b(),V&&V.c(),O=b(),J&&J.c(),N=b(),ae&&ae.c(),G=b(),W&&W.c(),F=Ie(),f(s,"class","label svelte-cuxyqu"),f(o,"class","svelte-cuxyqu"),f(v,"class","label svelte-cuxyqu"),f(g,"class","svelte-cuxyqu"),f(t,"class","svelte-cuxyqu"),f(e,"class","config-table svelte-cuxyqu")},m(te,me){w(te,e,me),r(e,t),r(t,n),r(n,s),r(n,o),r(o,i),r(i,a),r(t,c),U&&U.m(t,null),r(t,_),R&&R.m(t,null),r(t,p),I&&I.m(t,null),r(t,m),r(t,h),r(h,v),r(h,g),r(g,C),r(t,$),H&&H.m(t,null),r(t,y),Y&&Y.m(t,null),r(t,D),Q&&Q.m(t,null),r(t,E),X&&X.m(t,null),r(t,L),oe&&oe.m(t,null),r(t,z),x&&x.m(t,null),r(t,q),V&&V.m(t,null),r(t,O),J&&J.m(t,null),w(te,N,me),ae&&ae.m(te,me),w(te,G,me),W&&W.m(te,me),w(te,F,me),A=!0},p(te,me){var re,le;(!A||me[0]&16384)&&u!==(u=(te[65].source_type||"-")+"")&&B(a,u),te[65].git_url?U?U.p(te,me):(U=Ir(te),U.c(),U.m(t,_)):U&&(U.d(1),U=null),te[65].git_branch?R?R.p(te,me):(R=Fr(te),R.c(),R.m(t,p)):R&&(R.d(1),R=null),te[65].image?I?I.p(te,me):(I=Br(te),I.c(),I.m(t,m)):I&&(I.d(1),I=null),(!A||me[0]&16384)&&S!==(S=(te[65].port||"-")+"")&&B(C,S),te[65].container_port?H?H.p(te,me):(H=Ur(te),H.c(),H.m(t,y)):H&&(H.d(1),H=null),te[65].host_port?Y?Y.p(te,me):(Y=Hr(te),Y.c(),Y.m(t,D)):Y&&(Y.d(1),Y=null),te[65].snapshot_id?Q?Q.p(te,me):(Q=Gr(te),Q.c(),Q.m(t,E)):Q&&(Q.d(1),Q=null),te[65].region?X?X.p(te,me):(X=Wr(te),X.c(),X.m(t,L)):X&&(X.d(1),X=null),te[65].size?oe?oe.p(te,me):(oe=Vr(te),oe.c(),oe.m(t,z)):oe&&(oe.d(1),oe=null),(re=te[65].server_ips)!=null&&re.length?x?x.p(te,me):(x=Jr(te),x.c(),x.m(t,q)):x&&(x.d(1),x=null),te[65].setup_domain?V||(V=Kr(),V.c(),V.m(t,O)):V&&(V.d(1),V=null),te[65].base_domain?J?J.p(te,me):(J=Yr(te),J.c(),J.m(t,null)):J&&(J.d(1),J=null),me[0]&16384&&(M=te[65].env_vars&&Object.keys(te[65].env_vars).length>0),M?ae?ae.p(te,me):(ae=Qr(te),ae.c(),ae.m(G.parentNode,G)):ae&&(ae.d(1),ae=null),(le=te[65].tags)!=null&&le.length?W?(W.p(te,me),me[0]&16384&&P(W,1)):(W=Xr(te),W.c(),P(W,1),W.m(F.parentNode,F)):W&&(Se(),j(W,1,1,()=>{W=null}),Te())},i(te){A||(P(W),A=!0)},o(te){j(W),A=!1},d(te){te&&(k(e),k(N),k(G),k(F)),U&&U.d(),R&&R.d(),I&&I.d(),H&&H.d(),Y&&Y.d(),Q&&Q.d(),X&&X.d(),oe&&oe.d(),x&&x.d(),V&&V.d(),J&&J.d(),ae&&ae.d(te),W&&W.d(te)}}}function Ir(l){let e,t,n,s=l[65].git_url+"",o;return{c(){e=d("tr"),t=d("td"),t.textContent="Git URL",n=d("td"),o=T(s),f(t,"class","label svelte-cuxyqu"),f(n,"class","svelte-cuxyqu")},m(i,u){w(i,e,u),r(e,t),r(e,n),r(n,o)},p(i,u){u[0]&16384&&s!==(s=i[65].git_url+"")&&B(o,s)},d(i){i&&k(e)}}}function Fr(l){let e,t,n,s=l[65].git_branch+"",o;return{c(){e=d("tr"),t=d("td"),t.textContent="Git Branch",n=d("td"),o=T(s),f(t,"class","label svelte-cuxyqu"),f(n,"class","svelte-cuxyqu")},m(i,u){w(i,e,u),r(e,t),r(e,n),r(n,o)},p(i,u){u[0]&16384&&s!==(s=i[65].git_branch+"")&&B(o,s)},d(i){i&&k(e)}}}function Br(l){let e,t,n,s=l[65].image+"",o;return{c(){e=d("tr"),t=d("td"),t.textContent="Image",n=d("td"),o=T(s),f(t,"class","label svelte-cuxyqu"),f(n,"class","svelte-cuxyqu")},m(i,u){w(i,e,u),r(e,t),r(e,n),r(n,o)},p(i,u){u[0]&16384&&s!==(s=i[65].image+"")&&B(o,s)},d(i){i&&k(e)}}}function Ur(l){let e,t,n,s=l[65].container_port+"",o;return{c(){e=d("tr"),t=d("td"),t.textContent="Container Port",n=d("td"),o=T(s),f(t,"class","label svelte-cuxyqu"),f(n,"class","svelte-cuxyqu")},m(i,u){w(i,e,u),r(e,t),r(e,n),r(n,o)},p(i,u){u[0]&16384&&s!==(s=i[65].container_port+"")&&B(o,s)},d(i){i&&k(e)}}}function Hr(l){let e,t,n,s=l[65].host_port+"",o;return{c(){e=d("tr"),t=d("td"),t.textContent="Host Port",n=d("td"),o=T(s),f(t,"class","label svelte-cuxyqu"),f(n,"class","svelte-cuxyqu")},m(i,u){w(i,e,u),r(e,t),r(e,n),r(n,o)},p(i,u){u[0]&16384&&s!==(s=i[65].host_port+"")&&B(o,s)},d(i){i&&k(e)}}}function Gr(l){let e,t,n,s=l[65].snapshot_id+"",o;return{c(){e=d("tr"),t=d("td"),t.textContent="Snapshot ID",n=d("td"),o=T(s),f(t,"class","label svelte-cuxyqu"),f(n,"class","svelte-cuxyqu")},m(i,u){w(i,e,u),r(e,t),r(e,n),r(n,o)},p(i,u){u[0]&16384&&s!==(s=i[65].snapshot_id+"")&&B(o,s)},d(i){i&&k(e)}}}function Wr(l){let e,t,n,s=l[65].region+"",o;return{c(){e=d("tr"),t=d("td"),t.textContent="Region",n=d("td"),o=T(s),f(t,"class","label svelte-cuxyqu"),f(n,"class","svelte-cuxyqu")},m(i,u){w(i,e,u),r(e,t),r(e,n),r(n,o)},p(i,u){u[0]&16384&&s!==(s=i[65].region+"")&&B(o,s)},d(i){i&&k(e)}}}function Vr(l){let e,t,n,s=l[65].size+"",o;return{c(){e=d("tr"),t=d("td"),t.textContent="Size",n=d("td"),o=T(s),f(t,"class","label svelte-cuxyqu"),f(n,"class","svelte-cuxyqu")},m(i,u){w(i,e,u),r(e,t),r(e,n),r(n,o)},p(i,u){u[0]&16384&&s!==(s=i[65].size+"")&&B(o,s)},d(i){i&&k(e)}}}function Jr(l){let e,t,n,s=l[65].server_ips.join(", ")+"",o;return{c(){e=d("tr"),t=d("td"),t.textContent="Servers",n=d("td"),o=T(s),f(t,"class","label svelte-cuxyqu"),f(n,"class","svelte-cuxyqu")},m(i,u){w(i,e,u),r(e,t),r(e,n),r(n,o)},p(i,u){u[0]&16384&&s!==(s=i[65].server_ips.join(", ")+"")&&B(o,s)},d(i){i&&k(e)}}}function Kr(l){let e;return{c(){e=d("tr"),e.innerHTML='<td class="label svelte-cuxyqu">Setup Domain</td><td class="svelte-cuxyqu">Yes</td>'},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function Yr(l){let e,t,n,s=l[65].base_domain+"",o;return{c(){e=d("tr"),t=d("td"),t.textContent="Base Domain",n=d("td"),o=T(s),f(t,"class","label svelte-cuxyqu"),f(n,"class","svelte-cuxyqu")},m(i,u){w(i,e,u),r(e,t),r(e,n),r(n,o)},p(i,u){u[0]&16384&&s!==(s=i[65].base_domain+"")&&B(o,s)},d(i){i&&k(e)}}}function Qr(l){let e,t,n,s,o=pe(Object.entries(l[65].env_vars)),i=[];for(let u=0;u<o.length;u+=1)i[u]=Zr(Cr(l,o,u));return{c(){e=d("div"),t=d("div"),t.textContent="Environment Variables",n=b(),s=d("div");for(let u=0;u<i.length;u+=1)i[u].c();f(t,"class","section-title svelte-cuxyqu"),f(s,"class","env-list svelte-cuxyqu"),f(e,"class","env-section svelte-cuxyqu")},m(u,a){w(u,e,a),r(e,t),r(e,n),r(e,s);for(let c=0;c<i.length;c+=1)i[c]&&i[c].m(s,null)},p(u,a){if(a[0]&16384){o=pe(Object.entries(u[65].env_vars));let c;for(c=0;c<o.length;c+=1){const _=Cr(u,o,c);i[c]?i[c].p(_,a):(i[c]=Zr(_),i[c].c(),i[c].m(s,null))}for(;c<i.length;c+=1)i[c].d(1);i.length=o.length}},d(u){u&&k(e),Me(i,u)}}}function Zr(l){let e,t=l[69]+"",n,s,o=(l[70].length>20?l[70].substring(0,20)+"...":l[70])+"",i;return{c(){e=d("div"),n=T(t),s=T("="),i=T(o),f(e,"class","env-item svelte-cuxyqu")},m(u,a){w(u,e,a),r(e,n),r(e,s),r(e,i)},p(u,a){a[0]&16384&&t!==(t=u[69]+"")&&B(n,t),a[0]&16384&&o!==(o=(u[70].length>20?u[70].substring(0,20)+"...":u[70])+"")&&B(i,o)},d(u){u&&k(e)}}}function Xr(l){let e,t,n,s,o,i=pe(l[65].tags),u=[];for(let c=0;c<i.length;c+=1)u[c]=xr($r(l,i,c));const a=c=>j(u[c],1,1,()=>{u[c]=null});return{c(){e=d("div"),t=d("div"),t.textContent="Tags",n=b(),s=d("div");for(let c=0;c<u.length;c+=1)u[c].c();f(t,"class","section-title svelte-cuxyqu"),f(s,"class","tags-list svelte-cuxyqu"),f(e,"class","tags-section svelte-cuxyqu")},m(c,_){w(c,e,_),r(e,t),r(e,n),r(e,s);for(let p=0;p<u.length;p+=1)u[p]&&u[p].m(s,null);o=!0},p(c,_){if(_[0]&16384){i=pe(c[65].tags);let p;for(p=0;p<i.length;p+=1){const m=$r(c,i,p);u[p]?(u[p].p(m,_),P(u[p],1)):(u[p]=xr(m),u[p].c(),P(u[p],1),u[p].m(s,null))}for(Se(),p=i.length;p<u.length;p+=1)a(p);Te()}},i(c){if(!o){for(let _=0;_<i.length;_+=1)P(u[_]);o=!0}},o(c){u=u.filter(Boolean);for(let _=0;_<u.length;_+=1)j(u[_]);o=!1},d(c){c&&k(e),Me(u,c)}}}function rp(l){let e=l[66]+"",t;return{c(){t=T(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&16384&&e!==(e=n[66]+"")&&B(t,e)},d(n){n&&k(t)}}}function xr(l){let e,t;return e=new Xe({props:{$$slots:{default:[rp]},$$scope:{ctx:l}}}),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const o={};s[0]&16384|s[2]&1048576&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){j(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function ap(l){let e,t,n=l[14]&&Or(l);return{c(){n&&n.c(),e=Ie()},m(s,o){n&&n.m(s,o),w(s,e,o),t=!0},p(s,o){s[14]?n?(n.p(s,o),o[0]&16384&&P(n,1)):(n=Or(s),n.c(),P(n,1),n.m(e.parentNode,e)):n&&(Se(),j(n,1,1,()=>{n=null}),Te())},i(s){t||(P(n),t=!0)},o(s){j(n),t=!1},d(s){s&&k(e),n&&n.d(s)}}}function up(l){let e;return{c(){e=T("🚀 Redeploy with this config")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function fp(l){let e;return{c(){e=T("Close")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function cp(l){let e,t,n,s,o;return t=new Be({props:{variant:"primary",$$slots:{default:[up]},$$scope:{ctx:l}}}),t.$on("click",l[22]),s=new Be({props:{variant:"ghost",$$slots:{default:[fp]},$$scope:{ctx:l}}}),s.$on("click",l[42]),{c(){e=d("div"),_e(t.$$.fragment),n=b(),_e(s.$$.fragment),f(e,"slot","footer")},m(i,u){w(i,e,u),fe(t,e,null),r(e,n),fe(s,e,null),o=!0},p(i,u){const a={};u[2]&1048576&&(a.$$scope={dirty:u,ctx:i}),t.$set(a);const c={};u[2]&1048576&&(c.$$scope={dirty:u,ctx:i}),s.$set(c)},i(i){o||(P(t.$$.fragment,i),P(s.$$.fragment,i),o=!0)},o(i){j(t.$$.fragment,i),j(s.$$.fragment,i),o=!1},d(i){i&&k(e),ce(t),ce(s)}}}function ea(l){let e,t,n,s=(l[16].service||l[16].name)+"",o,i,u,a=l[16].environment+"",c,_,p=tl(l[16].deployed_at)+"",m,h,v,g,S,C,$=l[16].version&&ta(l);g=new Xe({props:{variant:Ml(il(l[16])),$$slots:{default:[dp]},$$scope:{ctx:l}}});function y(L,z){return L[18]?vp:L[17].length===0?mp:pp}let D=y(l),E=D(l);return{c(){e=d("div"),t=d("div"),n=d("span"),o=T(s),i=b(),u=d("span"),c=T(a),_=T(" • "),m=T(p),h=b(),$&&$.c(),v=b(),_e(g.$$.fragment),S=b(),E.c(),f(n,"class","service-name svelte-cuxyqu"),f(u,"class","meta svelte-cuxyqu"),f(t,"class","logs-header-info svelte-cuxyqu"),f(e,"class","logs-modal-content svelte-cuxyqu")},m(L,z){w(L,e,z),r(e,t),r(t,n),r(n,o),r(t,i),r(t,u),r(u,c),r(u,_),r(u,m),r(t,h),$&&$.m(t,null),r(t,v),fe(g,t,null),r(e,S),E.m(e,null),C=!0},p(L,z){(!C||z[0]&65536)&&s!==(s=(L[16].service||L[16].name)+"")&&B(o,s),(!C||z[0]&65536)&&a!==(a=L[16].environment+"")&&B(c,a),(!C||z[0]&65536)&&p!==(p=tl(L[16].deployed_at)+"")&&B(m,p),L[16].version?$?($.p(L,z),z[0]&65536&&P($,1)):($=ta(L),$.c(),P($,1),$.m(t,v)):$&&(Se(),j($,1,1,()=>{$=null}),Te());const q={};z[0]&65536&&(q.variant=Ml(il(L[16]))),z[0]&65536|z[2]&1048576&&(q.$$scope={dirty:z,ctx:L}),g.$set(q),D===(D=y(L))&&E?E.p(L,z):(E.d(1),E=D(L),E&&(E.c(),E.m(e,null)))},i(L){C||(P($),P(g.$$.fragment,L),C=!0)},o(L){j($),j(g.$$.fragment,L),C=!1},d(L){L&&k(e),$&&$.d(),ce(g),E.d()}}}function ta(l){let e,t;return e=new Xe({props:{variant:"purple",$$slots:{default:[_p]},$$scope:{ctx:l}}}),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const o={};s[0]&65536|s[2]&1048576&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){j(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function _p(l){let e,t=l[16].version+"",n;return{c(){e=T("v"),n=T(t)},m(s,o){w(s,e,o),w(s,n,o)},p(s,o){o[0]&65536&&t!==(t=s[16].version+"")&&B(n,t)},d(s){s&&(k(e),k(n))}}}function dp(l){let e=il(l[16])+"",t;return{c(){t=T(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&65536&&e!==(e=il(n[16])+"")&&B(t,e)},d(n){n&&k(t)}}}function pp(l){let e,t=pe(l[17]),n=[];for(let s=0;s<t.length;s+=1)n[s]=la(wr(l,t,s));return{c(){e=d("div");for(let s=0;s<n.length;s+=1)n[s].c();f(e,"class","logs-container svelte-cuxyqu")},m(s,o){w(s,e,o);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(e,null)},p(s,o){if(o[0]&131072){t=pe(s[17]);let i;for(i=0;i<t.length;i+=1){const u=wr(s,t,i);n[i]?n[i].p(u,o):(n[i]=la(u),n[i].c(),n[i].m(e,null))}for(;i<n.length;i+=1)n[i].d(1);n.length=t.length}},d(s){s&&k(e),Me(n,s)}}}function mp(l){let e;return{c(){e=d("div"),e.textContent="No logs available for this deployment",f(e,"class","no-logs svelte-cuxyqu")},m(t,n){w(t,e,n)},p:be,d(t){t&&k(e)}}}function vp(l){let e;return{c(){e=d("div"),e.textContent="Loading logs...",f(e,"class","logs-loading svelte-cuxyqu")},m(t,n){w(t,e,n)},p:be,d(t){t&&k(e)}}}function la(l){let e,t,n=(l[62].timestamp?new Date(l[62].timestamp).toLocaleTimeString():"")+"",s,o,i,u=l[62].message+"",a,c;return{c(){e=d("div"),t=d("span"),s=T(n),o=b(),i=d("span"),a=T(u),c=b(),f(t,"class","log-time svelte-cuxyqu"),f(i,"class","log-message svelte-cuxyqu"),f(e,"class","log-line svelte-cuxyqu")},m(_,p){w(_,e,p),r(e,t),r(t,s),r(e,o),r(e,i),r(i,a),r(e,c)},p(_,p){p[0]&131072&&n!==(n=(_[62].timestamp?new Date(_[62].timestamp).toLocaleTimeString():"")+"")&&B(s,n),p[0]&131072&&u!==(u=_[62].message+"")&&B(a,u)},d(_){_&&k(e)}}}function hp(l){let e,t,n=l[16]&&ea(l);return{c(){n&&n.c(),e=Ie()},m(s,o){n&&n.m(s,o),w(s,e,o),t=!0},p(s,o){s[16]?n?(n.p(s,o),o[0]&65536&&P(n,1)):(n=ea(s),n.c(),P(n,1),n.m(e.parentNode,e)):n&&(Se(),j(n,1,1,()=>{n=null}),Te())},i(s){t||(P(n),t=!0)},o(s){j(n),t=!1},d(s){s&&k(e),n&&n.d(s)}}}function gp(l){let e;return{c(){e=T("Close")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function bp(l){let e,t,n;return t=new Be({props:{variant:"ghost",$$slots:{default:[gp]},$$scope:{ctx:l}}}),t.$on("click",l[45]),{c(){e=d("div"),_e(t.$$.fragment),f(e,"slot","footer")},m(s,o){w(s,e,o),fe(t,e,null),n=!0},p(s,o){const i={};o[2]&1048576&&(i.$$scope={dirty:o,ctx:s}),t.$set(i)},i(s){n||(P(t.$$.fragment,s),n=!0)},o(s){j(t.$$.fragment,s),n=!1},d(s){s&&k(e),ce(t)}}}function kp(l){let e,t,n,s=l[10].length+"",o,i,u,a,c,_,p=pe(l[10]),m=[];for(let g=0;g<p.length;g+=1)m[g]=na(br(l,p,g));const h=g=>j(m[g],1,1,()=>{m[g]=null});let v=l[11].length>0&&sa(l);return{c(){e=d("div"),t=d("p"),n=d("strong"),o=T(s),i=T(" server(s) from the original deployment are unavailable:"),u=b(),a=d("div");for(let g=0;g<m.length;g+=1)m[g].c();c=b(),v&&v.c(),f(t,"class","svelte-cuxyqu"),f(a,"class","confirm-server-list unavailable svelte-cuxyqu"),f(e,"class","rollback-confirm-content svelte-cuxyqu")},m(g,S){w(g,e,S),r(e,t),r(t,n),r(n,o),r(t,i),r(e,u),r(e,a);for(let C=0;C<m.length;C+=1)m[C]&&m[C].m(a,null);r(e,c),v&&v.m(e,null),_=!0},p(g,S){if((!_||S[0]&1024)&&s!==(s=g[10].length+"")&&B(o,s),S[0]&1024){p=pe(g[10]);let C;for(C=0;C<p.length;C+=1){const $=br(g,p,C);m[C]?(m[C].p($,S),P(m[C],1)):(m[C]=na($),m[C].c(),P(m[C],1),m[C].m(a,null))}for(Se(),C=p.length;C<m.length;C+=1)h(C);Te()}g[11].length>0?v?(v.p(g,S),S[0]&2048&&P(v,1)):(v=sa(g),v.c(),P(v,1),v.m(e,null)):v&&(Se(),j(v,1,1,()=>{v=null}),Te())},i(g){if(!_){for(let S=0;S<p.length;S+=1)P(m[S]);P(v),_=!0}},o(g){m=m.filter(Boolean);for(let S=0;S<m.length;S+=1)j(m[S]);j(v),_=!1},d(g){g&&k(e),Me(m,g),v&&v.d()}}}function wp(l){let e,t,n,s,o=l[11].length+"",i,u,a,c=l[11].length+l[9].length+"",_,p,m,h,v,g,S=pe(l[9]),C=[];for(let $=0;$<S.length;$+=1)C[$]=ia(kr(l,S,$));return{c(){e=d("div"),t=d("p"),n=T("Rolling back will restore to "),s=d("strong"),i=T(o),u=T(` servers.
        Service currently runs on `),a=d("strong"),_=T(c),p=T(" servers."),m=b(),h=d("p"),h.textContent="Stop containers on the following servers?",v=b(),g=d("div");for(let $=0;$<C.length;$+=1)C[$].c();f(t,"class","svelte-cuxyqu"),f(h,"class","svelte-cuxyqu"),f(g,"class","confirm-server-list svelte-cuxyqu"),f(e,"class","rollback-confirm-content svelte-cuxyqu")},m($,y){w($,e,y),r(e,t),r(t,n),r(t,s),r(s,i),r(t,u),r(t,a),r(a,_),r(t,p),r(e,m),r(e,h),r(e,v),r(e,g);for(let D=0;D<C.length;D+=1)C[D]&&C[D].m(g,null)},p($,y){if(y[0]&2048&&o!==(o=$[11].length+"")&&B(i,o),y[0]&2560&&c!==(c=$[11].length+$[9].length+"")&&B(_,c),y[0]&512){S=pe($[9]);let D;for(D=0;D<S.length;D+=1){const E=kr($,S,D);C[D]?C[D].p(E,y):(C[D]=ia(E),C[D].c(),C[D].m(g,null))}for(;D<C.length;D+=1)C[D].d(1);C.length=S.length}},i:be,o:be,d($){$&&k(e),Me(C,$)}}}function $p(l){let e;return{c(){e=T("offline")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function na(l){let e,t,n=(l[55].name||l[55].ip)+"",s,o,i,u=l[55].ip+"",a,c,_,p,m;return _=new Xe({props:{variant:"error",$$slots:{default:[$p]},$$scope:{ctx:l}}}),{c(){e=d("div"),t=d("span"),s=T(n),o=b(),i=d("span"),a=T(u),c=b(),_e(_.$$.fragment),p=b(),f(t,"class","server-name svelte-cuxyqu"),f(i,"class","server-ip svelte-cuxyqu"),f(e,"class","confirm-server-item svelte-cuxyqu")},m(h,v){w(h,e,v),r(e,t),r(t,s),r(e,o),r(e,i),r(i,a),r(e,c),fe(_,e,null),r(e,p),m=!0},p(h,v){(!m||v[0]&1024)&&n!==(n=(h[55].name||h[55].ip)+"")&&B(s,n),(!m||v[0]&1024)&&u!==(u=h[55].ip+"")&&B(a,u);const g={};v[2]&1048576&&(g.$$scope={dirty:v,ctx:h}),_.$set(g)},i(h){m||(P(_.$$.fragment,h),m=!0)},o(h){j(_.$$.fragment,h),m=!1},d(h){h&&k(e),ce(_)}}}function sa(l){let e,t,n=l[11].length+"",s,o,i,u,a,c=pe(l[11]),_=[];for(let m=0;m<c.length;m+=1)_[m]=oa(gr(l,c,m));const p=m=>j(_[m],1,1,()=>{_[m]=null});return{c(){e=d("p"),t=T("Available servers ("),s=T(n),o=T("):"),i=b(),u=d("div");for(let m=0;m<_.length;m+=1)_[m].c();f(e,"class","svelte-cuxyqu"),f(u,"class","confirm-server-list available svelte-cuxyqu")},m(m,h){w(m,e,h),r(e,t),r(e,s),r(e,o),w(m,i,h),w(m,u,h);for(let v=0;v<_.length;v+=1)_[v]&&_[v].m(u,null);a=!0},p(m,h){if((!a||h[0]&2048)&&n!==(n=m[11].length+"")&&B(s,n),h[0]&2048){c=pe(m[11]);let v;for(v=0;v<c.length;v+=1){const g=gr(m,c,v);_[v]?(_[v].p(g,h),P(_[v],1)):(_[v]=oa(g),_[v].c(),P(_[v],1),_[v].m(u,null))}for(Se(),v=c.length;v<_.length;v+=1)p(v);Te()}},i(m){if(!a){for(let h=0;h<c.length;h+=1)P(_[h]);a=!0}},o(m){_=_.filter(Boolean);for(let h=0;h<_.length;h+=1)j(_[h]);a=!1},d(m){m&&(k(e),k(i),k(u)),Me(_,m)}}}function Cp(l){let e;return{c(){e=T("online")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function oa(l){let e,t,n=(l[55].name||l[55].ip)+"",s,o,i,u=l[55].ip+"",a,c,_,p,m;return _=new Xe({props:{variant:"success",$$slots:{default:[Cp]},$$scope:{ctx:l}}}),{c(){e=d("div"),t=d("span"),s=T(n),o=b(),i=d("span"),a=T(u),c=b(),_e(_.$$.fragment),p=b(),f(t,"class","server-name svelte-cuxyqu"),f(i,"class","server-ip svelte-cuxyqu"),f(e,"class","confirm-server-item svelte-cuxyqu")},m(h,v){w(h,e,v),r(e,t),r(t,s),r(e,o),r(e,i),r(i,a),r(e,c),fe(_,e,null),r(e,p),m=!0},p(h,v){(!m||v[0]&2048)&&n!==(n=(h[55].name||h[55].ip)+"")&&B(s,n),(!m||v[0]&2048)&&u!==(u=h[55].ip+"")&&B(a,u);const g={};v[2]&1048576&&(g.$$scope={dirty:v,ctx:h}),_.$set(g)},i(h){m||(P(_.$$.fragment,h),m=!0)},o(h){j(_.$$.fragment,h),m=!1},d(h){h&&k(e),ce(_)}}}function ia(l){let e,t,n=(l[55].name||l[55].ip)+"",s,o,i,u=l[55].ip+"",a,c;return{c(){e=d("div"),t=d("span"),s=T(n),o=b(),i=d("span"),a=T(u),c=b(),f(t,"class","server-name svelte-cuxyqu"),f(i,"class","server-ip svelte-cuxyqu"),f(e,"class","confirm-server-item svelte-cuxyqu")},m(_,p){w(_,e,p),r(e,t),r(t,s),r(e,o),r(e,i),r(i,a),r(e,c)},p(_,p){p[0]&512&&n!==(n=(_[55].name||_[55].ip)+"")&&B(s,n),p[0]&512&&u!==(u=_[55].ip+"")&&B(a,u)},d(_){_&&k(e)}}}function yp(l){let e,t,n,s;const o=[wp,kp],i=[];function u(a,c){return a[8]==="cleanup"?0:a[8]==="missing"?1:-1}return~(e=u(l))&&(t=i[e]=o[e](l)),{c(){t&&t.c(),n=Ie()},m(a,c){~e&&i[e].m(a,c),w(a,n,c),s=!0},p(a,c){let _=e;e=u(a),e===_?~e&&i[e].p(a,c):(t&&(Se(),j(i[_],1,1,()=>{i[_]=null}),Te()),~e?(t=i[e],t?t.p(a,c):(t=i[e]=o[e](a),t.c()),P(t,1),t.m(n.parentNode,n)):t=null)},i(a){s||(P(t),s=!0)},o(a){j(t),s=!1},d(a){a&&k(n),~e&&i[e].d(a)}}}function Sp(l){let e,t;return e=new Be({props:{variant:"primary",$$slots:{default:[zp]},$$scope:{ctx:l}}}),e.$on("click",l[27]),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const o={};s[2]&1048576&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){j(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function Tp(l){let e,t;return e=new Be({props:{variant:"primary",$$slots:{default:[Dp]},$$scope:{ctx:l}}}),e.$on("click",l[26]),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const o={};s[2]&1048576&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){j(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function zp(l){let e;return{c(){e=T("Proceed with available only")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function Dp(l){let e;return{c(){e=T("Proceed")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function Ep(l){let e;return{c(){e=T("Cancel")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function qp(l){let e,t,n,s,o,i;const u=[Tp,Sp],a=[];function c(_,p){return _[8]==="cleanup"?0:_[8]==="missing"&&_[11].length>0?1:-1}return~(t=c(l))&&(n=a[t]=u[t](l)),o=new Be({props:{variant:"ghost",$$slots:{default:[Ep]},$$scope:{ctx:l}}}),o.$on("click",l[48]),{c(){e=d("div"),n&&n.c(),s=b(),_e(o.$$.fragment),f(e,"slot","footer")},m(_,p){w(_,e,p),~t&&a[t].m(e,null),r(e,s),fe(o,e,null),i=!0},p(_,p){let m=t;t=c(_),t===m?~t&&a[t].p(_,p):(n&&(Se(),j(a[m],1,1,()=>{a[m]=null}),Te()),~t?(n=a[t],n?n.p(_,p):(n=a[t]=u[t](_),n.c()),P(n,1),n.m(e,s)):n=null);const h={};p[2]&1048576&&(h.$$scope={dirty:p,ctx:_}),o.$set(h)},i(_){i||(P(n),P(o.$$.fragment,_),i=!0)},o(_){j(n),j(o.$$.fragment,_),i=!1},d(_){_&&k(e),~t&&a[t].d(),ce(o)}}}function Lp(l){let e,t,n,s,o,i,u,a,c,_,p,m,h,v,g,S,C,$,y,D,E,L,z=l[20]&&zr(l);u=new Be({props:{variant:"ghost",$$slots:{default:[Od]},$$scope:{ctx:l}}}),u.$on("click",l[33]),c=new ft({props:{padding:!1,$$slots:{default:[Jd]},$$scope:{ctx:l}}});function q(R){l[40](R)}let O={title:"⏪ Rollback",width:"600px",$$slots:{footer:[sp],default:[xd]},$$scope:{ctx:l}};l[1]!==void 0&&(O.open=l[1]),p=new ol({props:O}),It.push(()=>pl(p,"open",q)),p.$on("close",l[41]);function N(R){l[43](R)}let M={title:"⚙️ Deployment Config",width:"500px",$$slots:{footer:[cp],default:[ap]},$$scope:{ctx:l}};l[13]!==void 0&&(M.open=l[13]),v=new ol({props:M}),It.push(()=>pl(v,"open",N)),v.$on("close",l[44]);function G(R){l[46](R)}let F={title:"📋 Deployment Logs",width:"700px",$$slots:{footer:[bp],default:[hp]},$$scope:{ctx:l}};l[15]!==void 0&&(F.open=l[15]),C=new ol({props:F}),It.push(()=>pl(C,"open",G)),C.$on("close",l[47]);function A(R){l[49](R)}let U={title:l[8]==="cleanup"?"⚠️ Stop Orphan Containers":"⚠️ Servers Unavailable",width:"500px",$$slots:{footer:[qp],default:[yp]},$$scope:{ctx:l}};return l[7]!==void 0&&(U.open=l[7]),D=new ol({props:U}),It.push(()=>pl(D,"open",A)),D.$on("close",l[50]),{c(){e=d("div"),t=d("div"),n=d("h1"),n.textContent="Deployment History",s=b(),o=d("div"),z&&z.c(),i=b(),_e(u.$$.fragment),a=b(),_e(c.$$.fragment),_=b(),_e(p.$$.fragment),h=b(),_e(v.$$.fragment),S=b(),_e(C.$$.fragment),y=b(),_e(D.$$.fragment),f(n,"class","svelte-cuxyqu"),f(o,"class","header-actions svelte-cuxyqu"),f(t,"class","page-header svelte-cuxyqu"),f(e,"class","deployments-page svelte-cuxyqu")},m(R,I){w(R,e,I),r(e,t),r(t,n),r(t,s),r(t,o),z&&z.m(o,null),r(o,i),fe(u,o,null),r(e,a),fe(c,e,null),w(R,_,I),fe(p,R,I),w(R,h,I),fe(v,R,I),w(R,S,I),fe(C,R,I),w(R,y,I),fe(D,R,I),L=!0},p(R,I){R[20]?z?z.p(R,I):(z=zr(R),z.c(),z.m(o,i)):z&&(z.d(1),z=null);const H={};I[2]&1048576&&(H.$$scope={dirty:I,ctx:R}),u.$set(H);const Y={};I[0]&524289|I[2]&1048576&&(Y.$$scope={dirty:I,ctx:R}),c.$set(Y);const Q={};I[0]&126|I[2]&1048576&&(Q.$$scope={dirty:I,ctx:R}),!m&&I[0]&2&&(m=!0,Q.open=R[1],dl(()=>m=!1)),p.$set(Q);const X={};I[0]&24576|I[2]&1048576&&(X.$$scope={dirty:I,ctx:R}),!g&&I[0]&8192&&(g=!0,X.open=R[13],dl(()=>g=!1)),v.$set(X);const oe={};I[0]&491520|I[2]&1048576&&(oe.$$scope={dirty:I,ctx:R}),!$&&I[0]&32768&&($=!0,oe.open=R[15],dl(()=>$=!1)),C.$set(oe);const x={};I[0]&256&&(x.title=R[8]==="cleanup"?"⚠️ Stop Orphan Containers":"⚠️ Servers Unavailable"),I[0]&8064|I[2]&1048576&&(x.$$scope={dirty:I,ctx:R}),!E&&I[0]&128&&(E=!0,x.open=R[7],dl(()=>E=!1)),D.$set(x)},i(R){L||(P(u.$$.fragment,R),P(c.$$.fragment,R),P(p.$$.fragment,R),P(v.$$.fragment,R),P(C.$$.fragment,R),P(D.$$.fragment,R),L=!0)},o(R){j(u.$$.fragment,R),j(c.$$.fragment,R),j(p.$$.fragment,R),j(v.$$.fragment,R),j(C.$$.fragment,R),j(D.$$.fragment,R),L=!1},d(R){R&&(k(e),k(_),k(h),k(S),k(y)),z&&z.d(),ce(u),ce(c),ce(p,R),ce(v,R),ce(C,R),ce(D,R)}}}function ra(l){return l?l.toLocaleTimeString():""}function Pp(l,e){return l?l.filter(t=>!(e.project&&t.project!==e.project||e.env&&t.environment!==e.env)):[]}function Np(l){const e=[...l],t=new Set;for(const n of e){const s=`${n.project}/${n.service||n.name}/${n.environment}`;n.status==="success"&&n.can_rollback&&!t.has(s)?(n.is_current_active=!0,t.add(s)):n.is_current_active=!1}return e}function tl(l){return l?new Date(l).toLocaleString():"-"}function Ml(l){switch(l){case"success":case"active":return"success";case"failed":case"error":return"danger";case"pending":case"deploying":return"warning";case"superseded":return"secondary";default:return"info"}}function il(l){const e=l.status||"unknown";return e==="rolled_back"?l.is_rollback?"failed":"superseded":e}function Rp(l,e,t){let n,s,o,i;pt(l,ql,Ee=>t(31,o=Ee)),pt(l,bl,Ee=>t(32,i=Ee));let u=!1,a=!1,c=null,_=[],p=null,m=!1,h=[],v=!1,g="",S=[],C=[],$=[],y=null,D=!1,E=null,L=!1,z=null,q=[],O=!1,N=[],M=[];function G(Ee){t(14,E=Ee),t(13,D=!0)}function F(){if(!(E!=null&&E.config_snapshot))return;const Ee=new CustomEvent("redeploy",{detail:{deployment:E,config:E.config_snapshot},bubbles:!0});document.dispatchEvent(Ee),t(13,D=!1),$e.info("Config loaded - switch to Deploy tab")}async function A(Ee){t(16,z=Ee),t(15,L=!0),t(18,O=!0),t(17,q=[]);try{const je=await He("GET",`/infra/deployments/history/${Ee.id}/logs`);t(17,q=je.logs||[])}catch(je){$e.error("Failed to load logs: "+(je.message||je))}finally{t(18,O=!1)}}async function U(Ee){t(2,c=Ee);try{const je=new URLSearchParams({project:Ee.project||"",environment:Ee.environment||"",service_name:Ee.service_name||Ee.service||""}),ve=await He("GET",`/infra/deployments/rollback/preview?${je}`);t(3,_=(ve.recent_deployments||[]).filter(Pe=>Pe.id!==Ee.id&&Pe.status==="success"))}catch{t(3,_=[])}t(1,a=!0)}async function R(){if(!c||!p){$e.error("Select a deployment to rollback to");return}const Ee=_.find(Ne=>Ne.id===p);if(!Ee){$e.error("Target deployment not found");return}const je=c.project||"",ve=c.environment||"",Pe=c.service_name||c.service||"";try{const Ne=new URLSearchParams({project:je,environment:ve,service_name:Pe}),Le=await He("GET",`/infra/services/state?${Ne}`),Ue=Ee.server_ips||[],st=(Le.server_ips||[]).filter(Ke=>!Ue.includes(Ke)),ot=(Le.servers||[]).filter(Ke=>st.includes(Ke.ip));if(Ue.length>0){const Ke=await He("POST",`/infra/services/check-servers?do_token=${Ft()}&server_ips=${Ue.join(",")}`,null);if(t(10,C=Ke.unavailable||[]),t(11,$=Ke.available||[]),C.length>0){t(8,g="missing"),t(12,y=Ee),t(7,v=!0);return}}if(ot.length>0){t(9,S=ot),t(8,g="cleanup"),t(12,y=Ee),t(7,v=!0);return}}catch(Ne){console.log("Rollback pre-check:",Ne.message||Ne)}await X()}async function I(){if(t(7,v=!1),g==="cleanup"&&S.length>0){const Ee=`${c.project}_${c.service||c.service_name}_${c.environment}`.replace(/[^a-zA-Z0-9_]/g,"_"),je=S.map(ve=>ve.ip);try{const ve=await He("POST",`/infra/services/cleanup?do_token=${Ft()}`,{server_ips:je,container_name:Ee});t(6,h=[...h,{message:`Cleanup: ${ve.cleaned} stopped`,type:"info",time:new Date}])}catch(ve){t(6,h=[...h,{message:`Cleanup warning: ${ve.message}`,type:"warning",time:new Date}])}}t(9,S=[]),t(10,C=[]),t(12,y=null),await X()}let H=!1,Y=[];async function Q(){t(7,v=!1),H=!0,Y=$.map(Ee=>Ee.ip),t(10,C=[]),t(12,y=null),await X()}async function X(){t(6,h=[]),t(5,m=!0);const Ee=(je,ve="info")=>{t(6,h=[...h,{message:je,type:ve,time:new Date}])};try{const je=new URLSearchParams({project:c.project||"",environment:c.environment||"",service_name:c.service_name||c.service||""}).toString();Ee("Starting rollback...");let ve=!1,Pe="";const Ne={deployment_id:p};if(H&&Y.length>0&&(Ne.server_ips=Y,Ee(`Partial rollback to ${Y.length} available server(s)`)),await tn("POST",`/infra/deployments/rollback?${je}`,Ne,Le=>{Le.type==="progress"||Le.type==="start"?Ee(Le.message,"info"):Le.type==="server_complete"?Ee(`✅ ${Le.ip}: Success`,"success"):Le.type==="error"?(Ee(`❌ ${Le.message||Le.error}`,"error"),Pe=Le.message||Le.error||"Unknown error"):Le.type==="complete"&&(ve=Le.success,ve?Ee(`✅ ${Le.message}`,"success"):(Pe=Le.message||"Rollback failed",Ee(`❌ ${Pe}`,"error")))}),ve)$e.success("Rollback completed successfully"),await oe();else throw new Error(Pe||"Rollback failed")}catch(je){Ee(`❌ Error: ${je.message||String(je)}`,"error"),$e.error("Rollback failed: "+(je.message||String(je)))}finally{t(5,m=!1),H=!1,Y=[]}}function oe(){bl.refresh()}function x(){bl.refresh()}const V=[[]],J=()=>bl.refresh(),ae=Ee=>G(Ee),W=Ee=>A(Ee),ie=Ee=>U(Ee),ue=()=>{t(1,a=!1),t(6,h=[])};function te(){p=this.__value,t(4,p)}function me(Ee){a=Ee,t(1,a)}const re=()=>t(1,a=!1),le=()=>t(13,D=!1);function Z(Ee){D=Ee,t(13,D)}const K=()=>t(13,D=!1),ge=()=>t(15,L=!1);function we(Ee){L=Ee,t(15,L)}const Ge=()=>t(15,L=!1),at=()=>{t(7,v=!1),t(12,y=null)};function qe(Ee){v=Ee,t(7,v)}const Je=()=>{t(7,v=!1),t(12,y=null)};return l.$$.update=()=>{l.$$.dirty[1]&2&&t(30,n=i||{loading:!1}),l.$$.dirty[0]&1073741824&&t(0,u=n.loading),l.$$.dirty[0]&1073741824&&t(20,s=n.lastFetched),l.$$.dirty[0]&1073741824&&n.data&&t(29,N=Np(n.data)),l.$$.dirty[0]&536870912|l.$$.dirty[1]&1&&t(19,M=Pp(N,o))},[u,a,c,_,p,m,h,v,g,S,C,$,y,D,E,L,z,q,O,M,s,G,F,A,U,R,I,Q,x,N,n,o,i,J,ae,W,ie,ue,te,V,me,re,le,Z,K,ge,we,Ge,at,qe,Je]}class Mp extends Ct{constructor(e){super(),$t(this,e,Rp,Lp,wt,{refresh:28},null,[-1,-1,-1])}get refresh(){return this.$$.ctx[28]}}function aa(l,e,t){var o,i,u;const n=l.slice();n[33]=e[t];const s=n[33].ip||((u=(i=(o=n[33].networks)==null?void 0:o.v4)==null?void 0:i[0])==null?void 0:u.ip_address);return n[34]=s,n}function ua(l,e,t){const n=l.slice();return n[37]=e[t],n}function fa(l,e,t){const n=l.slice();return n[40]=e[t],n}function ca(l,e,t){const n=l.slice();return n[37]=e[t],n}function _a(l,e,t){const n=l.slice();return n[40]=e[t],n}function da(l){let e,t=l[40].label+"",n;return{c(){e=d("option"),n=T(t),e.__value=l[40].value,ne(e,e.__value)},m(s,o){w(s,e,o),r(e,n)},p:be,d(s){s&&k(e)}}}function pa(l){let e,t=l[37].charAt(0).toUpperCase()+l[37].slice(1)+"",n;return{c(){e=d("option"),n=T(t),e.__value=l[37],ne(e,e.__value)},m(s,o){w(s,e,o),r(e,n)},p:be,d(s){s&&k(e)}}}function Ap(l){let e;return{c(){e=T("🔍 Get Credentials")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function jp(l){let e;return{c(){e=T("Looking up...")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function Op(l){let e;function t(o,i){return o[11]?jp:Ap}let n=t(l),s=n(l);return{c(){s.c(),e=Ie()},m(o,i){s.m(o,i),w(o,e,i)},p(o,i){n!==(n=t(o))&&(s.d(1),s=n(o),s&&(s.c(),s.m(e.parentNode,e)))},d(o){o&&k(e),s.d(o)}}}function ma(l){let e,t,n,s,o,i=l[10].service+"",u,a,c,_,p,m,h=l[10].env_var_name+"",v,g,S,C,$=l[10].connection_url+"",y,D,E,L,z,q,O,N,M,G,F,A,U,R=l[10].user&&va(l),I=l[10].password&&ha(l),H=l[10].database&&ga(l);function Y(oe,x){if(x[0]&1024&&(M=null),x[0]&1024&&(G=null),x[0]&1024&&(F=null),M==null&&(M=!!oe[10].service.toLowerCase().includes("redis")),M)return Bp;if(G==null&&(G=!!oe[10].service.toLowerCase().includes("postgres")),G)return Fp;if(F==null&&(F=!!oe[10].service.toLowerCase().includes("mongo")),F)return Ip}let Q=Y(l,[-1,-1]),X=Q&&Q(l);return{c(){e=d("div"),t=d("div"),n=d("span"),n.textContent="✅",s=b(),o=d("span"),u=T(i),a=T(" credentials"),c=b(),_=d("div"),p=d("div"),m=d("span"),v=T(h),g=T(":"),S=b(),C=d("code"),y=T($),D=b(),R&&R.c(),E=b(),I&&I.c(),L=b(),H&&H.c(),z=b(),q=d("small"),q.textContent="Click any value to copy",O=b(),N=d("div"),X&&X.c(),f(n,"class","result-icon svelte-14omwo7"),f(o,"class","result-title svelte-14omwo7"),f(t,"class","result-header svelte-14omwo7"),f(m,"class","label svelte-14omwo7"),f(C,"class","value url clickable svelte-14omwo7"),f(p,"class","info-row full-width svelte-14omwo7"),f(_,"class","connection-info svelte-14omwo7"),f(q,"class","copy-hint svelte-14omwo7"),f(N,"class","cli-examples svelte-14omwo7"),f(e,"class","lookup-result svelte-14omwo7")},m(oe,x){w(oe,e,x),r(e,t),r(t,n),r(t,s),r(t,o),r(o,u),r(o,a),r(e,c),r(e,_),r(_,p),r(p,m),r(m,v),r(m,g),r(p,S),r(p,C),r(C,y),r(_,D),R&&R.m(_,null),r(_,E),I&&I.m(_,null),r(_,L),H&&H.m(_,null),r(e,z),r(e,q),r(e,O),r(e,N),X&&X.m(N,null),A||(U=ee(C,"click",l[23]),A=!0)},p(oe,x){x[0]&1024&&i!==(i=oe[10].service+"")&&B(u,i),x[0]&1024&&h!==(h=oe[10].env_var_name+"")&&B(v,h),x[0]&1024&&$!==($=oe[10].connection_url+"")&&B(y,$),oe[10].user?R?R.p(oe,x):(R=va(oe),R.c(),R.m(_,E)):R&&(R.d(1),R=null),oe[10].password?I?I.p(oe,x):(I=ha(oe),I.c(),I.m(_,L)):I&&(I.d(1),I=null),oe[10].database?H?H.p(oe,x):(H=ga(oe),H.c(),H.m(_,null)):H&&(H.d(1),H=null),Q===(Q=Y(oe,x))&&X?X.p(oe,x):(X&&X.d(1),X=Q&&Q(oe),X&&(X.c(),X.m(N,null)))},d(oe){oe&&k(e),R&&R.d(),I&&I.d(),H&&H.d(),X&&X.d(),A=!1,U()}}}function va(l){let e,t,n,s,o=l[10].user+"",i,u,a;return{c(){e=d("div"),t=d("span"),t.textContent="User:",n=b(),s=d("code"),i=T(o),f(t,"class","label svelte-14omwo7"),f(s,"class","value clickable svelte-14omwo7"),f(e,"class","info-row svelte-14omwo7")},m(c,_){w(c,e,_),r(e,t),r(e,n),r(e,s),r(s,i),u||(a=ee(s,"click",l[24]),u=!0)},p(c,_){_[0]&1024&&o!==(o=c[10].user+"")&&B(i,o)},d(c){c&&k(e),u=!1,a()}}}function ha(l){let e,t,n,s,o=l[10].password+"",i,u,a;return{c(){e=d("div"),t=d("span"),t.textContent="Password:",n=b(),s=d("code"),i=T(o),f(t,"class","label svelte-14omwo7"),f(s,"class","value clickable svelte-14omwo7"),f(e,"class","info-row svelte-14omwo7")},m(c,_){w(c,e,_),r(e,t),r(e,n),r(e,s),r(s,i),u||(a=ee(s,"click",l[25]),u=!0)},p(c,_){_[0]&1024&&o!==(o=c[10].password+"")&&B(i,o)},d(c){c&&k(e),u=!1,a()}}}function ga(l){let e,t,n,s,o=l[10].database+"",i,u,a;return{c(){e=d("div"),t=d("span"),t.textContent="Database:",n=b(),s=d("code"),i=T(o),f(t,"class","label svelte-14omwo7"),f(s,"class","value clickable svelte-14omwo7"),f(e,"class","info-row svelte-14omwo7")},m(c,_){w(c,e,_),r(e,t),r(e,n),r(e,s),r(s,i),u||(a=ee(s,"click",l[26]),u=!0)},p(c,_){_[0]&1024&&o!==(o=c[10].database+"")&&B(i,o)},d(c){c&&k(e),u=!1,a()}}}function Ip(l){let e,t,n=l[10].connection_url+"",s,o;return{c(){e=d("code"),t=T('mongosh "'),s=T(n),o=T('"'),f(e,"class","svelte-14omwo7")},m(i,u){w(i,e,u),r(e,t),r(e,s),r(e,o)},p(i,u){u[0]&1024&&n!==(n=i[10].connection_url+"")&&B(s,n)},d(i){i&&k(e)}}}function Fp(l){let e,t,n=l[10].connection_url+"",s,o;return{c(){e=d("code"),t=T('psql "'),s=T(n),o=T('"'),f(e,"class","svelte-14omwo7")},m(i,u){w(i,e,u),r(e,t),r(e,s),r(e,o)},p(i,u){u[0]&1024&&n!==(n=i[10].connection_url+"")&&B(s,n)},d(i){i&&k(e)}}}function Bp(l){let e,t,n=l[10].host+"",s,o,i=l[10].port+"",u,a,c=l[10].password+"",_;return{c(){e=d("code"),t=T("redis-cli -h "),s=T(n),o=T(" -p "),u=T(i),a=T(" -a "),_=T(c),f(e,"class","svelte-14omwo7")},m(p,m){w(p,e,m),r(e,t),r(e,s),r(e,o),r(e,u),r(e,a),r(e,_)},p(p,m){m[0]&1024&&n!==(n=p[10].host+"")&&B(s,n),m[0]&1024&&i!==(i=p[10].port+"")&&B(u,i),m[0]&1024&&c!==(c=p[10].password+"")&&B(_,c)},d(p){p&&k(e)}}}function Up(l){let e,t,n,s,o,i,u,a,c,_,p,m,h,v,g,S,C,$,y,D,E,L,z,q,O,N,M,G,F,A,U,R,I,H,Y,Q,X,oe=pe(l[13]),x=[];for(let W=0;W<oe.length;W+=1)x[W]=da(_a(l,oe,W));let V=pe(l[14]),J=[];for(let W=0;W<V.length;W+=1)J[W]=pa(ca(l,V,W));R=new Be({props:{variant:"primary",type:"submit",disabled:l[11],$$slots:{default:[Op]},$$scope:{ctx:l}}});let ae=l[10]&&ma(l);return{c(){e=d("p"),e.innerHTML="For CLI tools, DB admin apps, or local dev. <strong>Apps get URLs auto-injected</strong> when you enable dependencies in Deploy tab.",t=b(),n=d("form"),s=d("div"),o=d("label"),o.textContent="Service Type *",i=b(),u=d("select"),a=d("option"),a.textContent="Select service...";for(let W=0;W<x.length;W+=1)x[W].c();c=b(),_=d("div"),p=d("div"),m=d("label"),m.textContent="Project *",h=b(),v=d("input"),g=b(),S=d("div"),C=d("label"),C.textContent="Environment",$=b(),y=d("select");for(let W=0;W<J.length;W+=1)J[W].c();D=b(),E=d("div"),L=d("div"),z=d("label"),z.textContent="Server IP *",q=b(),O=d("input"),N=b(),M=d("div"),G=d("label"),G.textContent="Port *",F=b(),A=d("input"),U=b(),_e(R.$$.fragment),I=b(),ae&&ae.c(),H=Ie(),f(e,"class","description svelte-14omwo7"),f(o,"for","lookup-type"),f(o,"class","svelte-14omwo7"),a.__value="",ne(a,a.__value),f(u,"id","lookup-type"),u.required=!0,f(u,"class","svelte-14omwo7"),l[0]===void 0&&xe(()=>l[18].call(u)),f(s,"class","form-group svelte-14omwo7"),f(m,"for","lookup-project"),f(m,"class","svelte-14omwo7"),f(v,"id","lookup-project"),f(v,"type","text"),f(v,"placeholder","myapp"),v.required=!0,f(v,"class","svelte-14omwo7"),f(p,"class","form-group svelte-14omwo7"),f(C,"for","lookup-env"),f(C,"class","svelte-14omwo7"),f(y,"id","lookup-env"),f(y,"class","svelte-14omwo7"),l[8]===void 0&&xe(()=>l[20].call(y)),f(S,"class","form-group svelte-14omwo7"),f(_,"class","form-row svelte-14omwo7"),f(z,"for","lookup-host"),f(z,"class","svelte-14omwo7"),f(O,"id","lookup-host"),f(O,"type","text"),f(O,"placeholder","206.189.18.79"),O.required=!0,f(O,"class","svelte-14omwo7"),f(L,"class","form-group svelte-14omwo7"),f(G,"for","lookup-port"),f(G,"class","svelte-14omwo7"),f(A,"id","lookup-port"),f(A,"type","number"),f(A,"placeholder","8453"),A.required=!0,f(A,"class","svelte-14omwo7"),f(M,"class","form-group svelte-14omwo7"),f(E,"class","form-row svelte-14omwo7")},m(W,ie){w(W,e,ie),w(W,t,ie),w(W,n,ie),r(n,s),r(s,o),r(s,i),r(s,u),r(u,a);for(let ue=0;ue<x.length;ue+=1)x[ue]&&x[ue].m(u,null);Re(u,l[0],!0),r(n,c),r(n,_),r(_,p),r(p,m),r(p,h),r(p,v),ne(v,l[7]),r(_,g),r(_,S),r(S,C),r(S,$),r(S,y);for(let ue=0;ue<J.length;ue+=1)J[ue]&&J[ue].m(y,null);Re(y,l[8],!0),r(n,D),r(n,E),r(E,L),r(L,z),r(L,q),r(L,O),ne(O,l[9]),r(E,N),r(E,M),r(M,G),r(M,F),r(M,A),ne(A,l[1]),r(n,U),fe(R,n,null),w(W,I,ie),ae&&ae.m(W,ie),w(W,H,ie),Y=!0,Q||(X=[ee(u,"change",l[18]),ee(v,"input",l[19]),ee(y,"change",l[20]),ee(O,"input",l[21]),ee(A,"input",l[22]),ee(n,"submit",l[16])],Q=!0)},p(W,ie){if(ie[0]&8192){oe=pe(W[13]);let te;for(te=0;te<oe.length;te+=1){const me=_a(W,oe,te);x[te]?x[te].p(me,ie):(x[te]=da(me),x[te].c(),x[te].m(u,null))}for(;te<x.length;te+=1)x[te].d(1);x.length=oe.length}if(ie[0]&8193&&Re(u,W[0]),ie[0]&128&&v.value!==W[7]&&ne(v,W[7]),ie[0]&16384){V=pe(W[14]);let te;for(te=0;te<V.length;te+=1){const me=ca(W,V,te);J[te]?J[te].p(me,ie):(J[te]=pa(me),J[te].c(),J[te].m(y,null))}for(;te<J.length;te+=1)J[te].d(1);J.length=V.length}ie[0]&16640&&Re(y,W[8]),ie[0]&512&&O.value!==W[9]&&ne(O,W[9]),ie[0]&2&&Kt(A.value)!==W[1]&&ne(A,W[1]);const ue={};ie[0]&2048&&(ue.disabled=W[11]),ie[0]&2048|ie[1]&65536&&(ue.$$scope={dirty:ie,ctx:W}),R.$set(ue),W[10]?ae?ae.p(W,ie):(ae=ma(W),ae.c(),ae.m(H.parentNode,H)):ae&&(ae.d(1),ae=null)},i(W){Y||(P(R.$$.fragment,W),Y=!0)},o(W){j(R.$$.fragment,W),Y=!1},d(W){W&&(k(e),k(t),k(n),k(I),k(H)),Me(x,W),Me(J,W),ce(R),ae&&ae.d(W),Q=!1,Ve(X)}}}function ba(l){let e,t=l[40].label+"",n;return{c(){e=d("option"),n=T(t),e.__value=l[40].value,ne(e,e.__value)},m(s,o){w(s,e,o),r(e,n)},p:be,d(s){s&&k(e)}}}function ka(l){let e,t=l[37].charAt(0).toUpperCase()+l[37].slice(1)+"",n;return{c(){e=d("option"),n=T(t),e.__value=l[37],ne(e,e.__value)},m(s,o){w(s,e,o),r(e,n)},p:be,d(s){s&&k(e)}}}function wa(l){let e,t=(l[33].name||"unnamed")+"",n,s,o=l[34]+"",i,u,a;return{c(){e=d("option"),n=T(t),s=T(" ("),i=T(o),u=T(")"),e.__value=a=l[34],ne(e,e.__value)},m(c,_){w(c,e,_),r(e,n),r(e,s),r(e,i),r(e,u)},p(c,_){_[0]&4096&&t!==(t=(c[33].name||"unnamed")+"")&&B(n,t),_[0]&4096&&o!==(o=c[34]+"")&&B(i,o),_[0]&4096&&a!==(a=c[34])&&(e.__value=a,ne(e,e.__value))},d(c){c&&k(e)}}}function $a(l){let e,t=l[34]&&wa(l);return{c(){t&&t.c(),e=Ie()},m(n,s){t&&t.m(n,s),w(n,e,s)},p(n,s){n[34]?t?t.p(n,s):(t=wa(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(n){n&&k(e),t&&t.d(n)}}}function Hp(l){let e;return{c(){e=T("Use Deploy Tab Instead →")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function Gp(l){let e;return{c(){e=T("Deploying...")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function Wp(l){let e;function t(o,i){return o[6]?Gp:Hp}let n=t(l),s=n(l);return{c(){s.c(),e=Ie()},m(o,i){s.m(o,i),w(o,e,i)},p(o,i){n!==(n=t(o))&&(s.d(1),s=n(o),s&&(s.c(),s.m(e.parentNode,e)))},d(o){o&&k(e),s.d(o)}}}function Vp(l){let e,t,n,s,o,i,u,a,c,_,p,m,h,v,g,S,C,$,y,D,E,L,z,q,O,N,M,G,F,A,U,R,I,H=pe(l[13]),Y=[];for(let V=0;V<H.length;V+=1)Y[V]=ba(fa(l,H,V));let Q=pe(l[14]),X=[];for(let V=0;V<Q.length;V+=1)X[V]=ka(ua(l,Q,V));let oe=pe(l[12]||[]),x=[];for(let V=0;V<oe.length;V+=1)x[V]=$a(aa(l,oe,V));return G=new Be({props:{variant:"secondary",type:"submit",disabled:l[6],$$slots:{default:[Wp]},$$scope:{ctx:l}}}),{c(){e=d("p"),e.textContent="Deploy stateful services with automatic configuration, persistence, and service mesh.",t=b(),n=d("form"),s=d("div"),o=d("label"),o.textContent="Service Type *",i=b(),u=d("select"),a=d("option"),a.textContent="Select service...";for(let V=0;V<Y.length;V+=1)Y[V].c();c=b(),_=d("div"),p=d("label"),p.textContent="Project *",m=b(),h=d("input"),v=b(),g=d("div"),S=d("label"),S.textContent="Environment",C=b(),$=d("select");for(let V=0;V<X.length;V+=1)X[V].c();y=b(),D=d("div"),E=d("label"),E.textContent="Target Server *",L=b(),z=d("select"),q=d("option"),q.textContent="Select server...";for(let V=0;V<x.length;V+=1)x[V].c();O=b(),N=d("small"),N.textContent="Servers from Infrastructure tab",M=b(),_e(G.$$.fragment),F=b(),A=d("small"),A.textContent='Stateful deploys work via Deploy tab with "Stateful Service" type',f(e,"class","description svelte-14omwo7"),f(o,"for","svc-type"),f(o,"class","svelte-14omwo7"),a.__value="",ne(a,a.__value),f(u,"id","svc-type"),u.required=!0,f(u,"class","svelte-14omwo7"),l[2]===void 0&&xe(()=>l[27].call(u)),f(s,"class","form-group svelte-14omwo7"),f(p,"for","svc-project"),f(p,"class","svelte-14omwo7"),f(h,"id","svc-project"),f(h,"type","text"),f(h,"placeholder","myapp"),h.required=!0,f(h,"class","svelte-14omwo7"),f(_,"class","form-group svelte-14omwo7"),f(S,"for","svc-env"),f(S,"class","svelte-14omwo7"),f($,"id","svc-env"),f($,"class","svelte-14omwo7"),l[4]===void 0&&xe(()=>l[29].call($)),f(g,"class","form-group svelte-14omwo7"),f(E,"for","svc-server"),f(E,"class","svelte-14omwo7"),q.__value="",ne(q,q.__value),f(z,"id","svc-server"),z.required=!0,f(z,"class","svelte-14omwo7"),l[5]===void 0&&xe(()=>l[30].call(z)),f(N,"class","svelte-14omwo7"),f(D,"class","form-group svelte-14omwo7"),f(A,"class","hint svelte-14omwo7")},m(V,J){w(V,e,J),w(V,t,J),w(V,n,J),r(n,s),r(s,o),r(s,i),r(s,u),r(u,a);for(let ae=0;ae<Y.length;ae+=1)Y[ae]&&Y[ae].m(u,null);Re(u,l[2],!0),r(n,c),r(n,_),r(_,p),r(_,m),r(_,h),ne(h,l[3]),r(n,v),r(n,g),r(g,S),r(g,C),r(g,$);for(let ae=0;ae<X.length;ae+=1)X[ae]&&X[ae].m($,null);Re($,l[4],!0),r(n,y),r(n,D),r(D,E),r(D,L),r(D,z),r(z,q);for(let ae=0;ae<x.length;ae+=1)x[ae]&&x[ae].m(z,null);Re(z,l[5],!0),r(D,O),r(D,N),r(n,M),fe(G,n,null),r(n,F),r(n,A),U=!0,R||(I=[ee(u,"change",l[27]),ee(h,"input",l[28]),ee($,"change",l[29]),ee(z,"change",l[30]),ee(n,"submit",l[15])],R=!0)},p(V,J){if(J[0]&8192){H=pe(V[13]);let W;for(W=0;W<H.length;W+=1){const ie=fa(V,H,W);Y[W]?Y[W].p(ie,J):(Y[W]=ba(ie),Y[W].c(),Y[W].m(u,null))}for(;W<Y.length;W+=1)Y[W].d(1);Y.length=H.length}if(J[0]&8196&&Re(u,V[2]),J[0]&8&&h.value!==V[3]&&ne(h,V[3]),J[0]&16384){Q=pe(V[14]);let W;for(W=0;W<Q.length;W+=1){const ie=ua(V,Q,W);X[W]?X[W].p(ie,J):(X[W]=ka(ie),X[W].c(),X[W].m($,null))}for(;W<X.length;W+=1)X[W].d(1);X.length=Q.length}if(J[0]&16400&&Re($,V[4]),J[0]&4096){oe=pe(V[12]||[]);let W;for(W=0;W<oe.length;W+=1){const ie=aa(V,oe,W);x[W]?x[W].p(ie,J):(x[W]=$a(ie),x[W].c(),x[W].m(z,null))}for(;W<x.length;W+=1)x[W].d(1);x.length=oe.length}J[0]&4128&&Re(z,V[5]);const ae={};J[0]&64&&(ae.disabled=V[6]),J[0]&64|J[1]&65536&&(ae.$$scope={dirty:J,ctx:V}),G.$set(ae)},i(V){U||(P(G.$$.fragment,V),U=!0)},o(V){j(G.$$.fragment,V),U=!1},d(V){V&&(k(e),k(t),k(n)),Me(Y,V),Me(X,V),Me(x,V),ce(G),R=!1,Ve(I)}}}function Jp(l){let e;return{c(){e=d("div"),e.innerHTML='<div class="feature svelte-14omwo7"><strong class="svelte-14omwo7">🔐 Auto Credentials</strong> <p class="svelte-14omwo7">Deterministic passwords generated from project/env. Same inputs = same password.</p></div> <div class="feature svelte-14omwo7"><strong class="svelte-14omwo7">💾 Persistent Storage</strong> <p class="svelte-14omwo7">Data volumes mounted at /data. Survives container restarts and redeploys.</p></div> <div class="feature svelte-14omwo7"><strong class="svelte-14omwo7">🔀 Service Mesh</strong> <p class="svelte-14omwo7">Nginx proxy on internal ports. Apps connect to localhost:PORT.</p></div> <div class="feature svelte-14omwo7"><strong class="svelte-14omwo7">🔧 Auto-Inject</strong> <p class="svelte-14omwo7">Enable &quot;Auto-inject&quot; in Deploy tab to get DATABASE_URL automatically.</p></div>',f(e,"class","features-grid svelte-14omwo7")},m(t,n){w(t,e,n)},p:be,d(t){t&&k(e)}}}function Kp(l){let e,t,n,s,o,i,u,a;return n=new ft({props:{title:"🔑 Direct Access Credentials",$$slots:{default:[Up]},$$scope:{ctx:l}}}),o=new ft({props:{title:"🗄️ Deploy Database/Cache",$$slots:{default:[Vp]},$$scope:{ctx:l}}}),u=new ft({props:{title:"ℹ️ How It Works",$$slots:{default:[Jp]},$$scope:{ctx:l}}}),{c(){e=d("div"),t=d("div"),_e(n.$$.fragment),s=b(),_e(o.$$.fragment),i=b(),_e(u.$$.fragment),f(t,"class","services-grid svelte-14omwo7"),f(e,"class","services-page svelte-14omwo7")},m(c,_){w(c,e,_),r(e,t),fe(n,t,null),r(t,s),fe(o,t,null),r(e,i),fe(u,e,null),a=!0},p(c,_){const p={};_[0]&3971|_[1]&65536&&(p.$$scope={dirty:_,ctx:c}),n.$set(p);const m={};_[0]&4220|_[1]&65536&&(m.$$scope={dirty:_,ctx:c}),o.$set(m);const h={};_[1]&65536&&(h.$$scope={dirty:_,ctx:c}),u.$set(h)},i(c){a||(P(n.$$.fragment,c),P(o.$$.fragment,c),P(u.$$.fragment,c),a=!0)},o(c){j(n.$$.fragment,c),j(o.$$.fragment,c),j(u.$$.fragment,c),a=!1},d(c){c&&k(e),ce(n),ce(o),ce(u)}}}function Yp(l,e,t){let n;pt(l,mn,Y=>t(12,n=Y));let s="",o="",i="prod",u="",a=!1,c="",_="",p="prod",m="",h="",v=null,g=!1;const S=[{value:"postgres",label:"🐘 PostgreSQL",port:5432},{value:"redis",label:"⚡ Redis",port:6379},{value:"mysql",label:"🐬 MySQL",port:3306},{value:"mongo",label:"🍃 MongoDB",port:27017}],C=["prod","staging","dev"];kl(()=>{$()});async function $(){try{await Xt.refresh()}catch(Y){console.error("Failed to load servers:",Y)}}async function y(Y){if(Y.preventDefault(),!s||!o||!u){$e.error("Please fill in all required fields");return}t(6,a=!0);try{$e.error("Service deployment not yet implemented. Use Deploy tab instead.");return}catch(Q){$e.error("Deployment failed: "+Q.message)}finally{t(6,a=!1)}}async function D(Y){if(Y.preventDefault(),!c||!_||!m||!h){$e.error("Please fill in all required fields");return}t(11,g=!0),t(10,v=null);try{const Q=await He("GET",`/infra/services/${c}/connection?project=${encodeURIComponent(_)}&environment=${p}&host=${encodeURIComponent(m)}&port=${h}`);t(10,v=Q),$e.success("Connection info retrieved!")}catch(Q){$e.error("Lookup failed: "+Q.message)}finally{t(11,g=!1)}}function E(Y){navigator.clipboard.writeText(Y),$e.success("Copied to clipboard")}function L(){c=dt(this),t(0,c),t(13,S)}function z(){_=this.value,t(7,_)}function q(){p=dt(this),t(8,p),t(14,C)}function O(){m=this.value,t(9,m)}function N(){h=Kt(this.value),t(1,h)}const M=()=>E(v.connection_url),G=()=>E(v.user),F=()=>E(v.password),A=()=>E(v.database);function U(){s=dt(this),t(2,s),t(13,S)}function R(){o=this.value,t(3,o)}function I(){i=dt(this),t(4,i),t(14,C)}function H(){u=dt(this),t(5,u)}return l.$$.update=()=>{l.$$.dirty[0]&3&&c&&S.find(Y=>Y.value===c)},[c,h,s,o,i,u,a,_,p,m,v,g,n,S,C,y,D,E,L,z,q,O,N,M,G,F,A,U,R,I,H]}class Qp extends Ct{constructor(e){super(),$t(this,e,Yp,Kp,wt,{},null,[-1,-1])}}const{Boolean:Zp}=Su;function Ca(l,e,t){const n=l.slice();return n[32]=e[t],n}function Xp(l){let e,t,n,s,o,i,u,a,c,_;return{c(){e=d("div"),t=d("label"),t.textContent="Theme",n=b(),s=d("select"),o=d("option"),o.textContent="🌙 Dark (Space)",i=d("option"),i.textContent="☀️ Light",u=b(),a=d("p"),a.textContent="Theme preference is saved to your browser.",f(t,"for","theme-select"),f(t,"class","svelte-16vnl3x"),o.__value="dark",ne(o,o.__value),i.__value="light",ne(i,i.__value),f(s,"id","theme-select"),f(s,"class","svelte-16vnl3x"),l[14]===void 0&&xe(()=>l[21].call(s)),f(e,"class","form-group svelte-16vnl3x"),f(a,"class","hint svelte-16vnl3x")},m(p,m){w(p,e,m),r(e,t),r(e,n),r(e,s),r(s,o),r(s,i),Re(s,l[14],!0),w(p,u,m),w(p,a,m),c||(_=[ee(s,"change",l[21]),ee(s,"change",l[22])],c=!0)},p(p,m){m[0]&16384&&Re(s,p[14])},d(p){p&&(k(e),k(u),k(a)),c=!1,Ve(_)}}}function xp(l){let e;return{c(){e=T("Save Token")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function em(l){let e,t;return e=new Xe({props:{variant:"danger",$$slots:{default:[nm]},$$scope:{ctx:l}}}),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const o={};s[1]&16&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){j(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function tm(l){let e,t;return e=new Xe({props:{variant:"warning",$$slots:{default:[sm]},$$scope:{ctx:l}}}),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const o={};s[1]&16&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){j(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function lm(l){let e,t,n,s,o;return e=new Xe({props:{variant:"success",$$slots:{default:[om]},$$scope:{ctx:l}}}),{c(){_e(e.$$.fragment),t=b(),n=d("span"),s=T(l[0]),f(n,"class","token-preview svelte-16vnl3x")},m(i,u){fe(e,i,u),w(i,t,u),w(i,n,u),r(n,s),o=!0},p(i,u){const a={};u[1]&16&&(a.$$scope={dirty:u,ctx:i}),e.$set(a),(!o||u[0]&1)&&B(s,i[0])},i(i){o||(P(e.$$.fragment,i),o=!0)},o(i){j(e.$$.fragment,i),o=!1},d(i){i&&(k(t),k(n)),ce(e,i)}}}function nm(l){let e;return{c(){e=T("Invalid token")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function sm(l){let e;return{c(){e=T("Not configured")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function om(l){let e;return{c(){e=T("✓ Connected")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function im(l){let e,t,n,s,o,i,u,a,c,_,p,m,h,v,g;a=new Be({props:{variant:"primary",type:"submit",$$slots:{default:[xp]},$$scope:{ctx:l}}});const S=[lm,tm,em],C=[];function $(y,D){var E,L;return(E=y[1])!=null&&E.valid?0:(L=y[1])!=null&&L.missing?1:2}return p=$(l),m=C[p]=S[p](l),{c(){e=d("p"),e.innerHTML=`Get your token from 
      <a href="https://cloud.digitalocean.com/account/api/tokens" target="_blank" class="svelte-16vnl3x">DO Control Panel</a>.`,t=b(),n=d("div"),n.innerHTML='<div class="info-title svelte-16vnl3x">🔒 Browser Storage</div> <div class="info-text svelte-16vnl3x">Token stored in browser cookie. Passed with each API request. Never stored on server.</div>',s=b(),o=d("form"),i=d("div"),i.innerHTML='<label for="do-token" class="svelte-16vnl3x">DigitalOcean API Token</label> <input id="do-token" type="password" placeholder="dop_v1_xxxxx" class="svelte-16vnl3x"/>',u=b(),_e(a.$$.fragment),c=b(),_=d("div"),m.c(),f(e,"class","description svelte-16vnl3x"),f(n,"class","info-box svelte-16vnl3x"),f(i,"class","form-group svelte-16vnl3x"),f(_,"class","token-status svelte-16vnl3x")},m(y,D){w(y,e,D),w(y,t,D),w(y,n,D),w(y,s,D),w(y,o,D),r(o,i),r(o,u),fe(a,o,null),w(y,c,D),w(y,_,D),C[p].m(_,null),h=!0,v||(g=ee(o,"submit",l[15]),v=!0)},p(y,D){const E={};D[1]&16&&(E.$$scope={dirty:D,ctx:y}),a.$set(E);let L=p;p=$(y),p===L?C[p].p(y,D):(Se(),j(C[L],1,1,()=>{C[L]=null}),Te(),m=C[p],m?m.p(y,D):(m=C[p]=S[p](y),m.c()),P(m,1),m.m(_,null))},i(y){h||(P(a.$$.fragment,y),P(m),h=!0)},o(y){j(a.$$.fragment,y),j(m),h=!1},d(y){y&&(k(e),k(t),k(n),k(s),k(o),k(c),k(_)),ce(a),C[p].d(),v=!1,g()}}}function rm(l){let e;return{c(){e=T("Save Token")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function am(l){let e,t;return e=new Xe({props:{variant:"warning",$$slots:{default:[fm]},$$scope:{ctx:l}}}),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const o={};s[1]&16&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){j(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function um(l){let e,t,n,s,o;return e=new Xe({props:{variant:"success",$$slots:{default:[cm]},$$scope:{ctx:l}}}),{c(){_e(e.$$.fragment),t=b(),n=d("span"),s=T(l[2]),f(n,"class","token-preview svelte-16vnl3x")},m(i,u){fe(e,i,u),w(i,t,u),w(i,n,u),r(n,s),o=!0},p(i,u){const a={};u[1]&16&&(a.$$scope={dirty:u,ctx:i}),e.$set(a),(!o||u[0]&4)&&B(s,i[2])},i(i){o||(P(e.$$.fragment,i),o=!0)},o(i){j(e.$$.fragment,i),o=!1},d(i){i&&(k(t),k(n)),ce(e,i)}}}function fm(l){let e;return{c(){e=T("Not configured")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function cm(l){let e;return{c(){e=T("✓ Connected")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function _m(l){let e,t,n,s,o,i,u,a,c,_,p,m,h;i=new Be({props:{variant:"primary",type:"submit",$$slots:{default:[rm]},$$scope:{ctx:l}}});const v=[um,am],g=[];function S(C,$){var y;return(y=C[3])!=null&&y.valid?0:1}return c=S(l),_=g[c]=v[c](l),{c(){e=d("p"),e.innerHTML=`Get your token from 
      <a href="https://dash.cloudflare.com/profile/api-tokens" target="_blank" class="svelte-16vnl3x">Cloudflare Dashboard</a>.`,t=b(),n=d("form"),s=d("div"),s.innerHTML='<label for="cf-token" class="svelte-16vnl3x">Cloudflare API Token</label> <input id="cf-token" type="password" placeholder="xxxxx" class="svelte-16vnl3x"/>',o=b(),_e(i.$$.fragment),u=b(),a=d("div"),_.c(),f(e,"class","description svelte-16vnl3x"),f(s,"class","form-group svelte-16vnl3x"),f(a,"class","token-status svelte-16vnl3x")},m(C,$){w(C,e,$),w(C,t,$),w(C,n,$),r(n,s),r(n,o),fe(i,n,null),w(C,u,$),w(C,a,$),g[c].m(a,null),p=!0,m||(h=ee(n,"submit",l[16]),m=!0)},p(C,$){const y={};$[1]&16&&(y.$$scope={dirty:$,ctx:C}),i.$set(y);let D=c;c=S(C),c===D?g[c].p(C,$):(Se(),j(g[D],1,1,()=>{g[D]=null}),Te(),_=g[c],_?_.p(C,$):(_=g[c]=v[c](C),_.c()),P(_,1),_.m(a,null))},i(C){p||(P(i.$$.fragment,C),P(_),p=!0)},o(C){j(i.$$.fragment,C),j(_),p=!1},d(C){C&&(k(e),k(t),k(n),k(u),k(a)),ce(i),g[c].d(),m=!1,h()}}}function dm(l){let e;return{c(){e=T("Setup Domain")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function ya(l){let e,t=l[7].message+"",n;return{c(){e=d("div"),n=T(t),f(e,"class","result svelte-16vnl3x"),ke(e,"success",l[7].success),ke(e,"error",!l[7].success)},m(s,o){w(s,e,o),r(e,n)},p(s,o){o[0]&128&&t!==(t=s[7].message+"")&&B(n,t),o[0]&128&&ke(e,"success",s[7].success),o[0]&128&&ke(e,"error",!s[7].success)},d(s){s&&k(e)}}}function pm(l){let e,t,n,s,o,i,u,a,c,_,p,m,h,v,g,S,C,$,y,D,E,L,z,q;y=new Be({props:{variant:"primary",type:"submit",$$slots:{default:[dm]},$$scope:{ctx:l}}});let O=l[7]&&ya(l);return{c(){e=d("p"),e.textContent='Point a domain to your server. With "Proxied" enabled, HTTPS works automatically.',t=b(),n=d("form"),s=d("div"),o=d("label"),o.textContent="Domain",i=b(),u=d("input"),a=b(),c=d("div"),_=d("label"),_.textContent="Server IP",p=b(),m=d("input"),h=b(),v=d("label"),g=d("input"),S=T(`
        Proxied (Cloudflare handles SSL)`),C=b(),$=d("div"),_e(y.$$.fragment),D=b(),O&&O.c(),E=Ie(),f(e,"class","description svelte-16vnl3x"),f(o,"for","domain-name"),f(o,"class","svelte-16vnl3x"),f(u,"id","domain-name"),f(u,"type","text"),f(u,"placeholder","api.example.com"),u.required=!0,f(u,"class","svelte-16vnl3x"),f(s,"class","form-group svelte-16vnl3x"),f(_,"for","domain-ip"),f(_,"class","svelte-16vnl3x"),f(m,"id","domain-ip"),f(m,"type","text"),f(m,"placeholder","1.2.3.4"),m.required=!0,f(m,"class","svelte-16vnl3x"),f(c,"class","form-group svelte-16vnl3x"),f(g,"type","checkbox"),f(g,"class","svelte-16vnl3x"),f(v,"class","checkbox-label svelte-16vnl3x"),f($,"class","form-actions svelte-16vnl3x")},m(N,M){w(N,e,M),w(N,t,M),w(N,n,M),r(n,s),r(s,o),r(s,i),r(s,u),ne(u,l[4]),r(n,a),r(n,c),r(c,_),r(c,p),r(c,m),ne(m,l[5]),r(n,h),r(n,v),r(v,g),g.checked=l[6],r(v,S),r(n,C),r(n,$),fe(y,$,null),w(N,D,M),O&&O.m(N,M),w(N,E,M),L=!0,z||(q=[ee(u,"input",l[23]),ee(m,"input",l[24]),ee(g,"change",l[25]),ee(n,"submit",l[17])],z=!0)},p(N,M){M[0]&16&&u.value!==N[4]&&ne(u,N[4]),M[0]&32&&m.value!==N[5]&&ne(m,N[5]),M[0]&64&&(g.checked=N[6]);const G={};M[1]&16&&(G.$$scope={dirty:M,ctx:N}),y.$set(G),N[7]?O?O.p(N,M):(O=ya(N),O.c(),O.m(E.parentNode,E)):O&&(O.d(1),O=null)},i(N){L||(P(y.$$.fragment,N),L=!0)},o(N){j(y.$$.fragment,N),L=!1},d(N){N&&(k(e),k(t),k(n),k(D),k(E)),ce(y),O&&O.d(N),z=!1,Ve(q)}}}function mm(l){let e;return{c(){e=T("Setup DNS Round-Robin")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function Sa(l){let e,t=l[11].message+"",n;return{c(){e=d("div"),n=T(t),f(e,"class","result svelte-16vnl3x"),ke(e,"success",l[11].success),ke(e,"error",!l[11].success)},m(s,o){w(s,e,o),r(e,n)},p(s,o){o[0]&2048&&t!==(t=s[11].message+"")&&B(n,t),o[0]&2048&&ke(e,"success",s[11].success),o[0]&2048&&ke(e,"error",!s[11].success)},d(s){s&&k(e)}}}function vm(l){let e,t,n,s,o,i,u,a,c,_,p,m,h,v,g,S,C,$,y,D,E,L,z,q;y=new Be({props:{variant:"primary",type:"submit",$$slots:{default:[mm]},$$scope:{ctx:l}}});let O=l[11]&&Sa(l);return{c(){e=d("p"),e.innerHTML=`Simple load distribution via multiple A records. Cloudflare rotates between IPs at DNS level.
      <strong>FREE</strong>, but no health checks.`,t=b(),n=d("form"),s=d("div"),o=d("label"),o.textContent="Domain",i=b(),u=d("input"),a=b(),c=d("div"),_=d("label"),_.textContent="Server IPs (comma-separated)",p=b(),m=d("input"),h=b(),v=d("label"),g=d("input"),S=T(`
        Proxied (SSL + CDN)`),C=b(),$=d("div"),_e(y.$$.fragment),D=b(),O&&O.c(),E=Ie(),f(e,"class","description svelte-16vnl3x"),f(o,"for","lb-domain"),f(o,"class","svelte-16vnl3x"),f(u,"id","lb-domain"),f(u,"type","text"),f(u,"placeholder","api.example.com"),u.required=!0,f(u,"class","svelte-16vnl3x"),f(s,"class","form-group svelte-16vnl3x"),f(_,"for","lb-ips"),f(_,"class","svelte-16vnl3x"),f(m,"id","lb-ips"),f(m,"type","text"),f(m,"placeholder","1.2.3.4, 5.6.7.8"),m.required=!0,f(m,"class","svelte-16vnl3x"),f(c,"class","form-group svelte-16vnl3x"),f(g,"type","checkbox"),f(g,"class","svelte-16vnl3x"),f(v,"class","checkbox-label svelte-16vnl3x"),f($,"class","form-actions svelte-16vnl3x")},m(N,M){w(N,e,M),w(N,t,M),w(N,n,M),r(n,s),r(s,o),r(s,i),r(s,u),ne(u,l[8]),r(n,a),r(n,c),r(c,_),r(c,p),r(c,m),ne(m,l[9]),r(n,h),r(n,v),r(v,g),g.checked=l[10],r(v,S),r(n,C),r(n,$),fe(y,$,null),w(N,D,M),O&&O.m(N,M),w(N,E,M),L=!0,z||(q=[ee(u,"input",l[26]),ee(m,"input",l[27]),ee(g,"change",l[28]),ee(n,"submit",l[18])],z=!0)},p(N,M){M[0]&256&&u.value!==N[8]&&ne(u,N[8]),M[0]&512&&m.value!==N[9]&&ne(m,N[9]),M[0]&1024&&(g.checked=N[10]);const G={};M[1]&16&&(G.$$scope={dirty:M,ctx:N}),y.$set(G),N[11]?O?O.p(N,M):(O=Sa(N),O.c(),O.m(E.parentNode,E)):O&&(O.d(1),O=null)},i(N){L||(P(y.$$.fragment,N),L=!0)},o(N){j(y.$$.fragment,N),L=!1},d(N){N&&(k(e),k(t),k(n),k(D),k(E)),ce(y),O&&O.d(N),z=!1,Ve(q)}}}function hm(l){let e,t,n=pe(l[12]),s=[];for(let i=0;i<n.length;i+=1)s[i]=Ta(Ca(l,n,i));const o=i=>j(s[i],1,1,()=>{s[i]=null});return{c(){e=d("div");for(let i=0;i<s.length;i+=1)s[i].c();f(e,"class","task-list svelte-16vnl3x")},m(i,u){w(i,e,u);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(e,null);t=!0},p(i,u){if(u[0]&1052672){n=pe(i[12]);let a;for(a=0;a<n.length;a+=1){const c=Ca(i,n,a);s[a]?(s[a].p(c,u),P(s[a],1)):(s[a]=Ta(c),s[a].c(),P(s[a],1),s[a].m(e,null))}for(Se(),a=n.length;a<s.length;a+=1)o(a);Te()}},i(i){if(!t){for(let u=0;u<n.length;u+=1)P(s[u]);t=!0}},o(i){s=s.filter(Zp);for(let u=0;u<s.length;u+=1)j(s[u]);t=!1},d(i){i&&k(e),Me(s,i)}}}function gm(l){let e;return{c(){e=d("div"),e.textContent="No scheduled tasks",f(e,"class","empty-state svelte-16vnl3x")},m(t,n){w(t,e,n)},p:be,i:be,o:be,d(t){t&&k(e)}}}function bm(l){let e;return{c(){e=d("div"),e.textContent="Loading tasks...",f(e,"class","empty-state svelte-16vnl3x")},m(t,n){w(t,e,n)},p:be,i:be,o:be,d(t){t&&k(e)}}}function km(l){let e=l[32].type+"",t;return{c(){t=T(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&4096&&e!==(e=n[32].type+"")&&B(t,e)},d(n){n&&k(t)}}}function wm(l){let e;return{c(){e=T("🗑️")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function Ta(l){let e,t,n,s=l[32].name+"",o,i,u,a,c,_,p,m=l[32].interval+"",h,v,g,S,C,$;a=new Xe({props:{variant:"info",$$slots:{default:[km]},$$scope:{ctx:l}}});function y(){return l[29](l[32])}return S=new Be({props:{variant:"danger",size:"sm",$$slots:{default:[wm]},$$scope:{ctx:l}}}),S.$on("click",y),{c(){e=d("div"),t=d("div"),n=d("div"),o=T(s),i=b(),u=d("div"),_e(a.$$.fragment),c=b(),_=d("span"),p=T("Every "),h=T(m),v=T(" min"),g=b(),_e(S.$$.fragment),C=b(),f(n,"class","task-name svelte-16vnl3x"),f(u,"class","task-meta svelte-16vnl3x"),f(t,"class","task-info"),f(e,"class","task-item svelte-16vnl3x")},m(D,E){w(D,e,E),r(e,t),r(t,n),r(n,o),r(t,i),r(t,u),fe(a,u,null),r(u,c),r(u,_),r(_,p),r(_,h),r(_,v),r(e,g),fe(S,e,null),r(e,C),$=!0},p(D,E){l=D,(!$||E[0]&4096)&&s!==(s=l[32].name+"")&&B(o,s);const L={};E[0]&4096|E[1]&16&&(L.$$scope={dirty:E,ctx:l}),a.$set(L),(!$||E[0]&4096)&&m!==(m=l[32].interval+"")&&B(h,m);const z={};E[1]&16&&(z.$$scope={dirty:E,ctx:l}),S.$set(z)},i(D){$||(P(a.$$.fragment,D),P(S.$$.fragment,D),$=!0)},o(D){j(a.$$.fragment,D),j(S.$$.fragment,D),$=!1},d(D){D&&k(e),ce(a),ce(S)}}}function $m(l){let e,t,n,s,o,i;const u=[bm,gm,hm],a=[];function c(_,p){return _[13]?0:_[12].length===0?1:2}return n=c(l),s=a[n]=u[n](l),{c(){e=d("p"),e.textContent="Schedule recurring tasks like health checks, auto-restart, and backups.",t=b(),s.c(),o=Ie(),f(e,"class","description svelte-16vnl3x")},m(_,p){w(_,e,p),w(_,t,p),a[n].m(_,p),w(_,o,p),i=!0},p(_,p){let m=n;n=c(_),n===m?a[n].p(_,p):(Se(),j(a[m],1,1,()=>{a[m]=null}),Te(),s=a[n],s?s.p(_,p):(s=a[n]=u[n](_),s.c()),P(s,1),s.m(o.parentNode,o))},i(_){i||(P(s),i=!0)},o(_){j(s),i=!1},d(_){_&&(k(e),k(t),k(o)),a[n].d(_)}}}function Cm(l){let e;return{c(){e=T("↻ Refresh")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function ym(l){let e,t;return e=new Be({props:{slot:"header",variant:"ghost",size:"sm",$$slots:{default:[Cm]},$$scope:{ctx:l}}}),e.$on("click",l[19]),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const o={};s[1]&16&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){j(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function Sm(l){let e,t,n,s,o,i,u,a,c,_,p,m,h;return t=new ft({props:{title:"🎨 Appearance",$$slots:{default:[Xp]},$$scope:{ctx:l}}}),s=new ft({props:{title:"⚙️ DigitalOcean Credentials",$$slots:{default:[im]},$$scope:{ctx:l}}}),i=new ft({props:{title:"☁️ Cloudflare Credentials",$$slots:{default:[_m]},$$scope:{ctx:l}}}),a=new ft({props:{title:"🌐 Domain Setup",$$slots:{default:[pm]},$$scope:{ctx:l}}}),_=new ft({props:{title:"🌐 DNS Round-Robin (Cloudflare)",$$slots:{default:[vm]},$$scope:{ctx:l}}}),m=new ft({props:{title:"⏰ Task Scheduler",$$slots:{header:[ym],default:[$m]},$$scope:{ctx:l}}}),{c(){e=d("div"),_e(t.$$.fragment),n=b(),_e(s.$$.fragment),o=b(),_e(i.$$.fragment),u=b(),_e(a.$$.fragment),c=b(),_e(_.$$.fragment),p=b(),_e(m.$$.fragment),f(e,"class","settings-page svelte-16vnl3x")},m(v,g){w(v,e,g),fe(t,e,null),r(e,n),fe(s,e,null),r(e,o),fe(i,e,null),r(e,u),fe(a,e,null),r(e,c),fe(_,e,null),r(e,p),fe(m,e,null),h=!0},p(v,g){const S={};g[0]&16384|g[1]&16&&(S.$$scope={dirty:g,ctx:v}),t.$set(S);const C={};g[0]&3|g[1]&16&&(C.$$scope={dirty:g,ctx:v}),s.$set(C);const $={};g[0]&12|g[1]&16&&($.$$scope={dirty:g,ctx:v}),i.$set($);const y={};g[0]&240|g[1]&16&&(y.$$scope={dirty:g,ctx:v}),a.$set(y);const D={};g[0]&3840|g[1]&16&&(D.$$scope={dirty:g,ctx:v}),_.$set(D);const E={};g[0]&12288|g[1]&16&&(E.$$scope={dirty:g,ctx:v}),m.$set(E)},i(v){h||(P(t.$$.fragment,v),P(s.$$.fragment,v),P(i.$$.fragment,v),P(a.$$.fragment,v),P(_.$$.fragment,v),P(m.$$.fragment,v),h=!0)},o(v){j(t.$$.fragment,v),j(s.$$.fragment,v),j(i.$$.fragment,v),j(a.$$.fragment,v),j(_.$$.fragment,v),j(m.$$.fragment,v),h=!1},d(v){v&&k(e),ce(t),ce(s),ce(i),ce(a),ce(_),ce(m)}}}function Tm(l,e,t){let n;pt(l,$n,Y=>t(14,n=Y));let s="",o=null,i="",u=null,a="",c="",_=!0,p=null,m="",h="",v=!0,g=null,S=[],C=!1;kl(()=>{$(),y(),q()});async function $(){const Y=Ft();if(Y){t(0,s=Y.substring(0,10)+"...");try{await He("GET","/infra/snapshots"),t(1,o={valid:!0})}catch{t(1,o={valid:!1})}}else t(1,o={valid:!1,missing:!0})}async function y(){const Y=zn();Y?(t(2,i=Y.substring(0,10)+"..."),t(3,u={valid:!0})):t(3,u={valid:!1,missing:!0})}async function D(Y){Y.preventDefault();const Q=Y.target.querySelector("input"),X=Q.value;if(!X){$e.error("Token is required");return}y1(X),Q.value="",$e.success("DigitalOcean token saved"),await $(),Xt.refresh(),jn.refresh(),pn.refresh(),bl.refresh()}async function E(Y){Y.preventDefault();const Q=Y.target.querySelector("input"),X=Q.value;if(!X){$e.error("Token is required");return}S1(X),Q.value="",$e.success("Cloudflare token saved"),await y()}async function L(Y){Y.preventDefault();try{const Q=await He("POST","/infra/cloudflare/domain",{domain:a,ip:c,proxied:_});t(7,p={success:!0,message:"Domain configured successfully"}),$e.success("Domain setup complete")}catch(Q){t(7,p={success:!1,message:Q.message}),$e.error(Q.message)}}async function z(Y){Y.preventDefault();try{const Q=h.split(",").map(oe=>oe.trim()).filter(Boolean),X=await He("POST","/infra/cloudflare/lb",{domain:m,server_ips:Q,proxied:v});t(11,g={success:!0,message:`Created load balancer with ${Q.length} servers`}),$e.success("Load balancer configured")}catch(Q){t(11,g={success:!1,message:Q.message}),$e.error(Q.message)}}async function q(){t(13,C=!0);try{const Y=await He("GET","/infra/scheduler/tasks");t(12,S=Y.tasks||Y||[])}catch{t(12,S=[])}finally{t(13,C=!1)}}async function O(Y){if(confirm("Delete this scheduled task?"))try{await He("DELETE",`/infra/scheduler/tasks/${Y}`),$e.success("Task deleted"),await q()}catch(Q){$e.error(Q.message)}}function N(){n=dt(this),$n.set(n)}const M=()=>$n.set(n);function G(){a=this.value,t(4,a)}function F(){c=this.value,t(5,c)}function A(){_=this.checked,t(6,_)}function U(){m=this.value,t(8,m)}function R(){h=this.value,t(9,h)}function I(){v=this.checked,t(10,v)}return[s,o,i,u,a,c,_,p,m,h,v,g,S,C,n,D,E,L,z,q,O,N,M,G,F,A,U,R,I,Y=>O(Y.id)]}class zm extends Ct{constructor(e){super(),$t(this,e,Tm,Sm,wt,{},null,[-1,-1])}}function za(l,e,t){const n=l.slice();n[21]=e[t];const s=n[1].filter(function(...a){return l[17](n[21],...a)});n[22]=s;const o=n[21].domain;n[23]=o;const i=n[22].length>1;return n[24]=i,n}function Da(l,e,t){const n=l.slice();return n[27]=e[t],n}function Ea(l,e,t){const n=l.slice();return n[21]=e[t],n}function qa(l,e,t){const n=l.slice();return n[32]=e[t],n}function Dm(l){let e,t,n,s,o,i,u,a,c,_,p,m,h,v,g,S,C,$,y=l[1].length+"",D,E,L,z,q,O,N,M,G=l[7].length+"",F,A,U,R;const I=[Nm,Pm],H=[];function Y(Q,X){return Q[11]?1:0}return m=Y(l),h=H[m]=I[m](l),{c(){e=d("div"),t=d("div"),n=d("div"),n.innerHTML='<span class="summary-icon svelte-odhywp">🔀</span> <span>Nginx Sidecar</span>',s=b(),o=d("div"),i=T(l[3]),u=T("/"),a=T(l[2]),c=b(),_=d("div"),_.textContent="servers with nginx",p=b(),h.c(),v=b(),g=d("div"),S=d("div"),S.innerHTML='<span class="summary-icon svelte-odhywp">🤖</span> <span>Node Agents</span>',C=b(),$=d("div"),D=T(y),E=b(),L=d("div"),L.textContent="servers monitored",z=b(),q=d("div"),O=d("div"),O.innerHTML='<span class="summary-icon svelte-odhywp">📦</span> <span>Services</span>',N=b(),M=d("div"),F=T(G),A=b(),U=d("div"),U.textContent="deployed services",f(n,"class","summary-header svelte-odhywp"),f(o,"class","summary-value svelte-odhywp"),f(_,"class","summary-label svelte-odhywp"),f(t,"class","summary-card svelte-odhywp"),ke(t,"ok",l[11]),ke(t,"warn",!l[11]),f(S,"class","summary-header svelte-odhywp"),f($,"class","summary-value svelte-odhywp"),f(L,"class","summary-label svelte-odhywp"),f(g,"class","summary-card info svelte-odhywp"),f(O,"class","summary-header svelte-odhywp"),f(M,"class","summary-value svelte-odhywp"),f(U,"class","summary-label svelte-odhywp"),f(q,"class","summary-card info svelte-odhywp"),f(e,"class","summary-grid svelte-odhywp")},m(Q,X){w(Q,e,X),r(e,t),r(t,n),r(t,s),r(t,o),r(o,i),r(o,u),r(o,a),r(t,c),r(t,_),r(t,p),H[m].m(t,null),r(e,v),r(e,g),r(g,S),r(g,C),r(g,$),r($,D),r(g,E),r(g,L),r(e,z),r(e,q),r(q,O),r(q,N),r(q,M),r(M,F),r(q,A),r(q,U),R=!0},p(Q,X){(!R||X[0]&8)&&B(i,Q[3]),(!R||X[0]&4)&&B(a,Q[2]);let oe=m;m=Y(Q),m===oe?H[m].p(Q,X):(Se(),j(H[oe],1,1,()=>{H[oe]=null}),Te(),h=H[m],h?h.p(Q,X):(h=H[m]=I[m](Q),h.c()),P(h,1),h.m(t,null)),(!R||X[0]&2048)&&ke(t,"ok",Q[11]),(!R||X[0]&2048)&&ke(t,"warn",!Q[11]),(!R||X[0]&2)&&y!==(y=Q[1].length+"")&&B(D,y),(!R||X[0]&128)&&G!==(G=Q[7].length+"")&&B(F,G)},i(Q){R||(P(h),R=!0)},o(Q){j(h),R=!1},d(Q){Q&&k(e),H[m].d()}}}function Em(l){let e;return{c(){e=d("div"),e.innerHTML='<p>No services deployed yet</p> <p class="hint svelte-odhywp">Deploy your first service to see the architecture</p>',f(e,"class","empty-state svelte-odhywp")},m(t,n){w(t,e,n)},p:be,i:be,o:be,d(t){t&&k(e)}}}function qm(l){let e,t,n,s,o,i;return{c(){e=d("div"),t=d("p"),n=T("Failed to load: "),s=T(l[9]),o=b(),i=d("p"),i.textContent="Check your connection and try refreshing",f(i,"class","hint svelte-odhywp"),f(e,"class","empty-state svelte-odhywp")},m(u,a){w(u,e,a),r(e,t),r(t,n),r(t,s),r(e,o),r(e,i)},p(u,a){a[0]&512&&B(s,u[9])},i:be,o:be,d(u){u&&k(e)}}}function Lm(l){let e;return{c(){e=d("div"),e.textContent="Loading architecture...",f(e,"class","empty-state svelte-odhywp")},m(t,n){w(t,e,n)},p:be,i:be,o:be,d(t){t&&k(e)}}}function Pm(l){let e;return{c(){e=d("div"),e.textContent="✅ All servers OK",f(e,"class","summary-ok svelte-odhywp")},m(t,n){w(t,e,n)},p:be,i:be,o:be,d(t){t&&k(e)}}}function Nm(l){let e,t;return e=new Be({props:{variant:"warning",size:"sm",$$slots:{default:[Rm]},$$scope:{ctx:l}}}),e.$on("click",l[13]),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const o={};s[0]&12|s[1]&16&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){j(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function Rm(l){let e,t=l[2]-l[3]+"",n,s;return{c(){e=T("🔧 Fix "),n=T(t),s=T(" server(s)")},m(o,i){w(o,e,i),w(o,n,i),w(o,s,i)},p(o,i){i[0]&12&&t!==(t=o[2]-o[3]+"")&&B(n,t)},d(o){o&&(k(e),k(n),k(s))}}}function Mm(l){let e,t,n,s;const o=[Lm,qm,Em,Dm],i=[];function u(a,c){return a[6]&&!a[10]?0:a[9]?1:a[7].length===0&&a[1].length===0?2:3}return e=u(l),t=i[e]=o[e](l),{c(){t.c(),n=Ie()},m(a,c){i[e].m(a,c),w(a,n,c),s=!0},p(a,c){let _=e;e=u(a),e===_?i[e].p(a,c):(Se(),j(i[_],1,1,()=>{i[_]=null}),Te(),t=i[e],t?t.p(a,c):(t=i[e]=o[e](a),t.c()),P(t,1),t.m(n.parentNode,n))},i(a){s||(P(t),s=!0)},o(a){j(t),s=!1},d(a){a&&k(n),i[e].d(a)}}}function La(l){let e,t=l[32]+"",n,s;return{c(){e=d("option"),n=T(t),e.__value=s=l[32],ne(e,e.__value)},m(o,i){w(o,e,i),r(e,n)},p(o,i){i[0]&4096&&t!==(t=o[32]+"")&&B(n,t),i[0]&4096&&s!==(s=o[32])&&(e.__value=s,ne(e,e.__value))},d(o){o&&k(e)}}}function Pa(l){let e,t,n=Oa(l[8])+"",s;return{c(){e=d("span"),t=T("Updated "),s=T(n),f(e,"class","last-updated svelte-odhywp")},m(o,i){w(o,e,i),r(e,t),r(e,s)},p(o,i){i[0]&256&&n!==(n=Oa(o[8])+"")&&B(s,n)},d(o){o&&k(e)}}}function Am(l){let e;return{c(){e=T("↻ Refresh")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function jm(l){let e,t,n,s,o,i,u,a,c,_,p,m,h,v,g,S=pe(l[12]||[]),C=[];for(let y=0;y<S.length;y+=1)C[y]=La(qa(l,S,y));let $=l[8]&&Pa(l);return m=new Be({props:{variant:"ghost",size:"sm",$$slots:{default:[Am]},$$scope:{ctx:l}}}),m.$on("click",l[0]),{c(){e=d("div"),t=d("select"),n=d("option"),n.textContent="All Projects";for(let y=0;y<C.length;y+=1)C[y].c();s=b(),o=d("select"),i=d("option"),i.textContent="All Envs",u=d("option"),u.textContent="prod",a=d("option"),a.textContent="staging",c=d("option"),c.textContent="dev",_=b(),$&&$.c(),p=b(),_e(m.$$.fragment),n.__value="",ne(n,n.__value),f(t,"class","svelte-odhywp"),l[4]===void 0&&xe(()=>l[15].call(t)),i.__value="",ne(i,i.__value),u.__value="prod",ne(u,u.__value),a.__value="staging",ne(a,a.__value),c.__value="dev",ne(c,c.__value),f(o,"class","svelte-odhywp"),l[5]===void 0&&xe(()=>l[16].call(o)),f(e,"slot","header"),f(e,"class","filters svelte-odhywp")},m(y,D){w(y,e,D),r(e,t),r(t,n);for(let E=0;E<C.length;E+=1)C[E]&&C[E].m(t,null);Re(t,l[4],!0),r(e,s),r(e,o),r(o,i),r(o,u),r(o,a),r(o,c),Re(o,l[5],!0),r(e,_),$&&$.m(e,null),r(e,p),fe(m,e,null),h=!0,v||(g=[ee(t,"change",l[15]),ee(t,"change",l[14]),ee(o,"change",l[16]),ee(o,"change",l[14])],v=!0)},p(y,D){if(D[0]&4096){S=pe(y[12]||[]);let L;for(L=0;L<S.length;L+=1){const z=qa(y,S,L);C[L]?C[L].p(z,D):(C[L]=La(z),C[L].c(),C[L].m(t,null))}for(;L<C.length;L+=1)C[L].d(1);C.length=S.length}D[0]&4112&&Re(t,y[4]),D[0]&32&&Re(o,y[5]),y[8]?$?$.p(y,D):($=Pa(y),$.c(),$.m(e,p)):$&&($.d(1),$=null);const E={};D[1]&16&&(E.$$scope={dirty:D,ctx:y}),m.$set(E)},i(y){h||(P(m.$$.fragment,y),h=!0)},o(y){j(m.$$.fragment,y),h=!1},d(y){y&&k(e),Me(C,y),$&&$.d(),ce(m),v=!1,Ve(g)}}}function Om(l){let e,t,n=pe(l[7]),s=[];for(let i=0;i<n.length;i+=1)s[i]=Na(Ea(l,n,i));const o=i=>j(s[i],1,1,()=>{s[i]=null});return{c(){e=d("div");for(let i=0;i<s.length;i+=1)s[i].c();f(e,"class","list svelte-odhywp")},m(i,u){w(i,e,u);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(e,null);t=!0},p(i,u){if(u[0]&128){n=pe(i[7]);let a;for(a=0;a<n.length;a+=1){const c=Ea(i,n,a);s[a]?(s[a].p(c,u),P(s[a],1)):(s[a]=Na(c),s[a].c(),P(s[a],1),s[a].m(e,null))}for(Se(),a=n.length;a<s.length;a+=1)o(a);Te()}},i(i){if(!t){for(let u=0;u<n.length;u+=1)P(s[u]);t=!0}},o(i){s=s.filter(Boolean);for(let u=0;u<s.length;u+=1)j(s[u]);t=!1},d(i){i&&k(e),Me(s,i)}}}function Im(l){let e;return{c(){e=d("div"),e.textContent="No services found",f(e,"class","empty-panel svelte-odhywp")},m(t,n){w(t,e,n)},p:be,i:be,o:be,d(t){t&&k(e)}}}function Fm(l){let e=l[21].type+"",t;return{c(){t=T(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&128&&e!==(e=n[21].type+"")&&B(t,e)},d(n){n&&k(t)}}}function Na(l){var U,R;let e,t,n=an(l[21])+"",s,o,i,u,a=l[21].service+"",c,_,p,m=l[21].project+"",h,v,g=l[21].env+"",S,C,$,y,D=(((U=l[21].servers)==null?void 0:U.length)||0)+"",E,L,z,q,O=(((R=l[21].ports)==null?void 0:R.join(", "))||"-")+"",N,M,G,F,A;return G=new Xe({props:{variant:l[21].type==="stateful"?"warning":"info",$$slots:{default:[Fm]},$$scope:{ctx:l}}}),{c(){e=d("div"),t=d("div"),s=T(n),o=b(),i=d("div"),u=d("div"),c=T(a),_=b(),p=d("div"),h=T(m),v=T(" / "),S=T(g),C=b(),$=d("div"),y=d("div"),E=T(D),L=T(" server(s)"),z=b(),q=d("div"),N=T(O),M=b(),_e(G.$$.fragment),F=b(),f(t,"class","item-icon svelte-odhywp"),f(u,"class","item-name svelte-odhywp"),f(p,"class","item-meta svelte-odhywp"),f(i,"class","item-info svelte-odhywp"),f(q,"class","ports svelte-odhywp"),f($,"class","item-stats svelte-odhywp"),f(e,"class","list-item svelte-odhywp")},m(I,H){w(I,e,H),r(e,t),r(t,s),r(e,o),r(e,i),r(i,u),r(u,c),r(i,_),r(i,p),r(p,h),r(p,v),r(p,S),r(e,C),r(e,$),r($,y),r(y,E),r(y,L),r($,z),r($,q),r(q,N),r(e,M),fe(G,e,null),r(e,F),A=!0},p(I,H){var Q,X;(!A||H[0]&128)&&n!==(n=an(I[21])+"")&&B(s,n),(!A||H[0]&128)&&a!==(a=I[21].service+"")&&B(c,a),(!A||H[0]&128)&&m!==(m=I[21].project+"")&&B(h,m),(!A||H[0]&128)&&g!==(g=I[21].env+"")&&B(S,g),(!A||H[0]&128)&&D!==(D=(((Q=I[21].servers)==null?void 0:Q.length)||0)+"")&&B(E,D),(!A||H[0]&128)&&O!==(O=(((X=I[21].ports)==null?void 0:X.join(", "))||"-")+"")&&B(N,O);const Y={};H[0]&128&&(Y.variant=I[21].type==="stateful"?"warning":"info"),H[0]&128|H[1]&16&&(Y.$$scope={dirty:H,ctx:I}),G.$set(Y)},i(I){A||(P(G.$$.fragment,I),A=!0)},o(I){j(G.$$.fragment,I),A=!1},d(I){I&&k(e),ce(G)}}}function Bm(l){let e,t,n,s;const o=[Im,Om],i=[];function u(a,c){return a[7].length===0?0:1}return e=u(l),t=i[e]=o[e](l),{c(){t.c(),n=Ie()},m(a,c){i[e].m(a,c),w(a,n,c),s=!0},p(a,c){let _=e;e=u(a),e===_?i[e].p(a,c):(Se(),j(i[_],1,1,()=>{i[_]=null}),Te(),t=i[e],t?t.p(a,c):(t=i[e]=o[e](a),t.c()),P(t,1),t.m(n.parentNode,n))},i(a){s||(P(t),s=!0)},o(a){j(t),s=!1},d(a){a&&k(n),i[e].d(a)}}}function Um(l){let e,t,n=pe(l[1]),s=[];for(let i=0;i<n.length;i+=1)s[i]=Ra(Da(l,n,i));const o=i=>j(s[i],1,1,()=>{s[i]=null});return{c(){e=d("div");for(let i=0;i<s.length;i+=1)s[i].c();f(e,"class","list svelte-odhywp")},m(i,u){w(i,e,u);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(e,null);t=!0},p(i,u){if(u[0]&2){n=pe(i[1]);let a;for(a=0;a<n.length;a+=1){const c=Da(i,n,a);s[a]?(s[a].p(c,u),P(s[a],1)):(s[a]=Ra(c),s[a].c(),P(s[a],1),s[a].m(e,null))}for(Se(),a=n.length;a<s.length;a+=1)o(a);Te()}},i(i){if(!t){for(let u=0;u<n.length;u+=1)P(s[u]);t=!0}},o(i){s=s.filter(Boolean);for(let u=0;u<s.length;u+=1)j(s[u]);t=!1},d(i){i&&k(e),Me(s,i)}}}function Hm(l){let e;return{c(){e=d("div"),e.textContent="No servers found",f(e,"class","empty-panel svelte-odhywp")},m(t,n){w(t,e,n)},p:be,i:be,o:be,d(t){t&&k(e)}}}function Gm(l){let e=un(l[27])?"🔀 nginx":"⚠️ no nginx",t;return{c(){t=T(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&2&&e!==(e=un(n[27])?"🔀 nginx":"⚠️ no nginx")&&B(t,e)},d(n){n&&k(t)}}}function Wm(l){let e,t=(l[27].agent_version||"?")+"",n;return{c(){e=T("🤖 v"),n=T(t)},m(s,o){w(s,e,o),w(s,n,o)},p(s,o){o[0]&2&&t!==(t=(s[27].agent_version||"?")+"")&&B(n,t)},d(s){s&&(k(e),k(n))}}}function Ra(l){let e,t,n=l[27].status==="online"?"🟢":"🔴",s,o,i,u,a=l[27].ip+"",c,_,p,m=(l[27].containers||0)+"",h,v,g,S,C,$,y,D,E;return C=new Xe({props:{variant:un(l[27])?"success":"warning",$$slots:{default:[Gm]},$$scope:{ctx:l}}}),y=new Xe({props:{variant:"info",$$slots:{default:[Wm]},$$scope:{ctx:l}}}),{c(){e=d("div"),t=d("div"),s=T(n),o=b(),i=d("div"),u=d("code"),c=T(a),_=b(),p=d("div"),h=T(m),v=T(" container(s)"),g=b(),S=d("div"),_e(C.$$.fragment),$=b(),_e(y.$$.fragment),D=b(),f(t,"class","item-icon svelte-odhywp"),f(u,"class","server-ip svelte-odhywp"),f(p,"class","item-meta svelte-odhywp"),f(i,"class","item-info svelte-odhywp"),f(S,"class","item-badges svelte-odhywp"),f(e,"class","list-item svelte-odhywp")},m(L,z){w(L,e,z),r(e,t),r(t,s),r(e,o),r(e,i),r(i,u),r(u,c),r(i,_),r(i,p),r(p,h),r(p,v),r(e,g),r(e,S),fe(C,S,null),r(S,$),fe(y,S,null),r(e,D),E=!0},p(L,z){(!E||z[0]&2)&&n!==(n=L[27].status==="online"?"🟢":"🔴")&&B(s,n),(!E||z[0]&2)&&a!==(a=L[27].ip+"")&&B(c,a),(!E||z[0]&2)&&m!==(m=(L[27].containers||0)+"")&&B(h,m);const q={};z[0]&2&&(q.variant=un(L[27])?"success":"warning"),z[0]&2|z[1]&16&&(q.$$scope={dirty:z,ctx:L}),C.$set(q);const O={};z[0]&2|z[1]&16&&(O.$$scope={dirty:z,ctx:L}),y.$set(O)},i(L){E||(P(C.$$.fragment,L),P(y.$$.fragment,L),E=!0)},o(L){j(C.$$.fragment,L),j(y.$$.fragment,L),E=!1},d(L){L&&k(e),ce(C),ce(y)}}}function Vm(l){let e,t,n,s;const o=[Hm,Um],i=[];function u(a,c){return a[1].length===0?0:1}return e=u(l),t=i[e]=o[e](l),{c(){t.c(),n=Ie()},m(a,c){i[e].m(a,c),w(a,n,c),s=!0},p(a,c){let _=e;e=u(a),e===_?i[e].p(a,c):(Se(),j(i[_],1,1,()=>{i[_]=null}),Te(),t=i[e],t?t.p(a,c):(t=i[e]=o[e](a),t.c()),P(t,1),t.m(n.parentNode,n))},i(a){s||(P(t),s=!0)},o(a){j(t),s=!1},d(a){a&&k(n),i[e].d(a)}}}function Jm(l){let e,t,n=pe(l[7]),s=[];for(let i=0;i<n.length;i+=1)s[i]=ja(za(l,n,i));const o=i=>j(s[i],1,1,()=>{s[i]=null});return{c(){e=d("div");for(let i=0;i<s.length;i+=1)s[i].c();f(e,"class","traffic-flow svelte-odhywp")},m(i,u){w(i,e,u);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(e,null);t=!0},p(i,u){if(u[0]&130){n=pe(i[7]);let a;for(a=0;a<n.length;a+=1){const c=za(i,n,a);s[a]?(s[a].p(c,u),P(s[a],1)):(s[a]=ja(c),s[a].c(),P(s[a],1),s[a].m(e,null))}for(Se(),a=n.length;a<s.length;a+=1)o(a);Te()}},i(i){if(!t){for(let u=0;u<n.length;u+=1)P(s[u]);t=!0}},o(i){s=s.filter(Boolean);for(let u=0;u<s.length;u+=1)j(s[u]);t=!1},d(i){i&&k(e),Me(s,i)}}}function Km(l){let e;return{c(){e=d("div"),e.textContent="Deploy services to see traffic flow",f(e,"class","empty-panel svelte-odhywp")},m(t,n){w(t,e,n)},p:be,i:be,o:be,d(t){t&&k(e)}}}function Ym(l){let e=l[21].env+"",t;return{c(){t=T(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&128&&e!==(e=n[21].env+"")&&B(t,e)},d(n){n&&k(t)}}}function Ma(l){let e,t,n,s,o,i,u=l[21].domain+"",a,c,_;return{c(){e=d("div"),t=d("span"),t.textContent="☁️",n=b(),s=d("span"),s.textContent="Cloudflare",o=b(),i=d("span"),a=T(u),c=b(),_=d("div"),_.textContent="→",f(t,"class","svelte-odhywp"),f(s,"class","node-label svelte-odhywp"),f(i,"class","node-detail svelte-odhywp"),f(e,"class","flow-node cloudflare svelte-odhywp"),f(_,"class","flow-arrow svelte-odhywp")},m(p,m){w(p,e,m),r(e,t),r(e,n),r(e,s),r(e,o),r(e,i),r(i,a),w(p,c,m),w(p,_,m)},p(p,m){m[0]&128&&u!==(u=p[21].domain+"")&&B(a,u)},d(p){p&&(k(e),k(c),k(_))}}}function Qm(l){let e;return{c(){e=T("Server")},m(t,n){w(t,e,n)},p:be,d(t){t&&k(e)}}}function Zm(l){let e,t=l[22].length+"",n,s;return{c(){e=T("⚖️ Load Balanced ("),n=T(t),s=T(")")},m(o,i){w(o,e,i),w(o,n,i),w(o,s,i)},p(o,i){i[0]&130&&t!==(t=o[22].length+"")&&B(n,t)},d(o){o&&(k(e),k(n),k(s))}}}function Aa(l){let e,t,n,s=l[21].domain+"",o,i;return{c(){e=d("span"),t=T("Domain: "),n=d("a"),o=T(s),f(n,"href",i="https://"+l[21].domain),f(n,"target","_blank"),f(n,"class","svelte-odhywp")},m(u,a){w(u,e,a),r(e,t),r(e,n),r(n,o)},p(u,a){a[0]&128&&s!==(s=u[21].domain+"")&&B(o,s),a[0]&128&&i!==(i="https://"+u[21].domain)&&f(n,"href",i)},d(u){u&&k(e)}}}function ja(l){let e,t,n,s=an(l[21])+"",o,i,u,a=l[21].service+"",c,_,p,m,h,v,g,S,C,$,y,D,E,L,z,q,O,N,M,G,F,A,U,R,I=(l[21].host_port||"8000")+"",H,Y,Q,X,oe,x,V,J=(l[21].container_name||l[21].id)+"",ae,W,ie;p=new Xe({props:{variant:l[21].env==="prod"?"danger":"info",$$slots:{default:[Ym]},$$scope:{ctx:l}}});let ue=l[23]&&Ma(l);function te(Z,K){return Z[24]?Zm:Qm}let me=te(l),re=me(l),le=l[23]&&Aa(l);return{c(){e=d("div"),t=d("div"),n=d("span"),o=T(s),i=b(),u=d("span"),c=T(a),_=b(),_e(p.$$.fragment),m=b(),h=d("div"),ue&&ue.c(),v=b(),g=d("div"),S=d("span"),S.textContent="🖥️",C=b(),$=d("span"),re.c(),y=b(),D=d("div"),D.textContent="→",E=b(),L=d("div"),L.innerHTML='<span class="svelte-odhywp">🔀</span> <span class="node-label svelte-odhywp">nginx</span> <span class="node-detail svelte-odhywp">:443</span>',z=b(),q=d("div"),q.textContent="→",O=b(),N=d("div"),M=d("span"),M.textContent="🐳",G=b(),F=d("span"),F.textContent="Container",A=b(),U=d("span"),R=T(":"),H=T(I),Y=b(),Q=d("div"),le&&le.c(),X=b(),oe=d("span"),x=T("Container: "),V=d("code"),ae=T(J),W=b(),f(n,"class","flow-icon svelte-odhywp"),f(u,"class","flow-name svelte-odhywp"),f(t,"class","flow-header svelte-odhywp"),f(S,"class","svelte-odhywp"),f($,"class","node-label svelte-odhywp"),f(g,"class","flow-node server svelte-odhywp"),f(D,"class","flow-arrow svelte-odhywp"),f(L,"class","flow-node nginx svelte-odhywp"),f(q,"class","flow-arrow svelte-odhywp"),f(M,"class","svelte-odhywp"),f(F,"class","node-label svelte-odhywp"),f(U,"class","node-detail svelte-odhywp"),f(N,"class","flow-node container svelte-odhywp"),f(h,"class","flow-path svelte-odhywp"),f(V,"class","svelte-odhywp"),f(Q,"class","flow-details svelte-odhywp"),f(e,"class","flow-card svelte-odhywp")},m(Z,K){w(Z,e,K),r(e,t),r(t,n),r(n,o),r(t,i),r(t,u),r(u,c),r(t,_),fe(p,t,null),r(e,m),r(e,h),ue&&ue.m(h,null),r(h,v),r(h,g),r(g,S),r(g,C),r(g,$),re.m($,null),r(h,y),r(h,D),r(h,E),r(h,L),r(h,z),r(h,q),r(h,O),r(h,N),r(N,M),r(N,G),r(N,F),r(N,A),r(N,U),r(U,R),r(U,H),r(e,Y),r(e,Q),le&&le.m(Q,null),r(Q,X),r(Q,oe),r(oe,x),r(oe,V),r(V,ae),r(e,W),ie=!0},p(Z,K){(!ie||K[0]&128)&&s!==(s=an(Z[21])+"")&&B(o,s),(!ie||K[0]&128)&&a!==(a=Z[21].service+"")&&B(c,a);const ge={};K[0]&128&&(ge.variant=Z[21].env==="prod"?"danger":"info"),K[0]&128|K[1]&16&&(ge.$$scope={dirty:K,ctx:Z}),p.$set(ge),Z[23]?ue?ue.p(Z,K):(ue=Ma(Z),ue.c(),ue.m(h,v)):ue&&(ue.d(1),ue=null),me===(me=te(Z))&&re?re.p(Z,K):(re.d(1),re=me(Z),re&&(re.c(),re.m($,null))),(!ie||K[0]&128)&&I!==(I=(Z[21].host_port||"8000")+"")&&B(H,I),Z[23]?le?le.p(Z,K):(le=Aa(Z),le.c(),le.m(Q,X)):le&&(le.d(1),le=null),(!ie||K[0]&128)&&J!==(J=(Z[21].container_name||Z[21].id)+"")&&B(ae,J)},i(Z){ie||(P(p.$$.fragment,Z),ie=!0)},o(Z){j(p.$$.fragment,Z),ie=!1},d(Z){Z&&k(e),ce(p),ue&&ue.d(),re.d(),le&&le.d()}}}function Xm(l){let e,t,n,s;const o=[Km,Jm],i=[];function u(a,c){return a[7].length===0?0:1}return e=u(l),t=i[e]=o[e](l),{c(){t.c(),n=Ie()},m(a,c){i[e].m(a,c),w(a,n,c),s=!0},p(a,c){let _=e;e=u(a),e===_?i[e].p(a,c):(Se(),j(i[_],1,1,()=>{i[_]=null}),Te(),t=i[e],t?t.p(a,c):(t=i[e]=o[e](a),t.c()),P(t,1),t.m(n.parentNode,n))},i(a){s||(P(t),s=!0)},o(a){j(t),s=!1},d(a){a&&k(n),i[e].d(a)}}}function xm(l){let e;return{c(){e=d("span"),e.textContent="Request path from client to container",f(e,"slot","header"),f(e,"class","subtitle svelte-odhywp")},m(t,n){w(t,e,n)},p:be,d(t){t&&k(e)}}}function ev(l){let e,t,n,s,o,i,u,a,c,_;return t=new ft({props:{title:"🏗️ Architecture View",$$slots:{header:[jm],default:[Mm]},$$scope:{ctx:l}}}),o=new ft({props:{title:"📦 Services",padding:!1,$$slots:{default:[Bm]},$$scope:{ctx:l}}}),u=new ft({props:{title:"🖥️ Servers",padding:!1,$$slots:{default:[Vm]},$$scope:{ctx:l}}}),c=new ft({props:{title:"🚦 Traffic Flow",$$slots:{header:[xm],default:[Xm]},$$scope:{ctx:l}}}),{c(){e=d("div"),_e(t.$$.fragment),n=b(),s=d("div"),_e(o.$$.fragment),i=b(),_e(u.$$.fragment),a=b(),_e(c.$$.fragment),f(s,"class","panels-grid svelte-odhywp"),f(e,"class","architecture-page svelte-odhywp")},m(p,m){w(p,e,m),fe(t,e,null),r(e,n),r(e,s),fe(o,s,null),r(s,i),fe(u,s,null),r(e,a),fe(c,e,null),_=!0},p(p,m){const h={};m[0]&8190|m[1]&16&&(h.$$scope={dirty:m,ctx:p}),t.$set(h);const v={};m[0]&128|m[1]&16&&(v.$$scope={dirty:m,ctx:p}),o.$set(v);const g={};m[0]&2|m[1]&16&&(g.$$scope={dirty:m,ctx:p}),u.$set(g);const S={};m[0]&130|m[1]&16&&(S.$$scope={dirty:m,ctx:p}),c.$set(S)},i(p){_||(P(t.$$.fragment,p),P(o.$$.fragment,p),P(u.$$.fragment,p),P(c.$$.fragment,p),_=!0)},o(p){j(t.$$.fragment,p),j(o.$$.fragment,p),j(u.$$.fragment,p),j(c.$$.fragment,p),_=!1},d(p){p&&k(e),ce(t),ce(o),ce(u),ce(c)}}}function Oa(l){return l?l.toLocaleTimeString():""}function an(l){switch(l.type){case"stateful":return"🗄️";case"frontend":return"🌐";case"api":return"⚡";case"worker":return"⚙️";default:return"📦"}}function un(l){return l.nginx_status==="running"}function tv(l,e,t){let n,s,o,i;pt(l,On,q=>t(12,i=q));let u="",a="",c=!1,_=[],p=[],m=[],h=null,v=null,g=!1,S=null;kl(()=>{g||(C(),S=setInterval(C,6e4))}),oc(()=>{S&&clearInterval(S)});async function C(){g||t(6,c=!0),t(9,v=null);try{const q=Ft();if(!q)throw new Error("DigitalOcean token required");const O=await He("POST","/infra/architecture",{project:u||null,environment:a||null,do_token:q});t(7,_=O.nodes||[]),t(1,p=O.servers||[]),m=O.infrastructure||[],t(8,h=new Date),t(10,g=!0)}catch(q){t(9,v=q.message),g||$e.error("Failed to load architecture: "+q.message)}finally{t(6,c=!1)}}async function $(){const q=p.filter(O=>O.nginx_status!=="running").map(O=>O.ip);if(q.length===0){$e.info("All servers already have nginx running");return}$e.info(`Fixing ${q.length} server(s)...`);try{await He("POST","/infra/nginx/ensure",{server_ips:q}),$e.success("Nginx sidecar installed"),architectureStore.refresh()}catch(O){$e.error(O.message)}}function y(){C()}function D(){C()}function E(){u=dt(this),t(4,u)}function L(){a=dt(this),t(5,a)}const z=(q,O)=>{var N;return(N=q.servers)==null?void 0:N.includes(O.ip)};return l.$$.update=()=>{l.$$.dirty[0]&2&&t(3,n=p.filter(q=>q.nginx_status==="running").length),l.$$.dirty[0]&2&&t(2,s=p.length),l.$$.dirty[0]&12&&t(11,o=n===s)},[D,p,s,n,u,a,c,_,h,v,g,o,i,$,y,E,L,z]}class lv extends Ct{constructor(e){super(),$t(this,e,tv,ev,wt,{refresh:0},null,[-1,-1])}get refresh(){return this.$$.ctx[0]}}function Ia(l,e,t){const n=l.slice();return n[53]=e[t],n}function Fa(l,e,t){const n=l.slice();return n[56]=e[t][0],n[57]=e[t][1],n}function Ba(l,e,t){const n=l.slice();return n[53]=e[t],n[61]=t,n}function Ua(l,e,t){const n=l.slice();return n[62]=e[t],n}function Ha(l,e,t){const n=l.slice();return n[65]=e[t],n}function Ga(l,e,t){const n=l.slice();return n[68]=e[t],n}function Wa(l,e,t){const n=l.slice();return n[71]=e[t],n}function Va(l,e,t){const n=l.slice();return n[74]=e[t],n}function nv(l){let e,t,n,s,o,i,u,a,c,_,p,m,h,v,g,S,C;return _=new Be({props:{disabled:l[14],$$slots:{default:[ov]},$$scope:{ctx:l}}}),_.$on("click",l[25]),m=new Be({props:{variant:l[17]?"primary":"secondary",$$slots:{default:[iv]},$$scope:{ctx:l}}}),m.$on("click",l[26]),v=new Be({props:{variant:"danger",$$slots:{default:[rv]},$$scope:{ctx:l}}}),v.$on("click",l[27]),{c(){e=d("select"),t=d("option"),t.textContent="All Levels",n=d("option"),n.textContent="DEBUG",s=d("option"),s.textContent="INFO",o=d("option"),o.textContent="WARNING",i=d("option"),i.textContent="ERROR",u=b(),a=d("input"),c=b(),_e(_.$$.fragment),p=b(),_e(m.$$.fragment),h=b(),_e(v.$$.fragment),t.__value="",ne(t,t.__value),n.__value="DEBUG",ne(n,n.__value),s.__value="INFO",ne(s,s.__value),o.__value="WARNING",ne(o,o.__value),i.__value="ERROR",ne(i,i.__value),f(e,"class","svelte-13li5w8"),l[15]===void 0&&xe(()=>l[38].call(e)),f(a,"type","text"),f(a,"placeholder","Search logs..."),f(a,"class","svelte-13li5w8")},m($,y){w($,e,y),r(e,t),r(e,n),r(e,s),r(e,o),r(e,i),Re(e,l[15],!0),w($,u,y),w($,a,y),ne(a,l[16]),w($,c,y),fe(_,$,y),w($,p,y),fe(m,$,y),w($,h,y),fe(v,$,y),g=!0,S||(C=[ee(e,"change",l[38]),ee(e,"change",l[25]),ee(a,"input",l[39]),ee(a,"keyup",l[40])],S=!0)},p($,y){y[0]&32768&&Re(e,$[15]),y[0]&65536&&a.value!==$[16]&&ne(a,$[16]);const D={};y[0]&16384&&(D.disabled=$[14]),y[0]&16384|y[2]&32768&&(D.$$scope={dirty:y,ctx:$}),_.$set(D);const E={};y[0]&131072&&(E.variant=$[17]?"primary":"secondary"),y[0]&131072|y[2]&32768&&(E.$$scope={dirty:y,ctx:$}),m.$set(E);const L={};y[2]&32768&&(L.$$scope={dirty:y,ctx:$}),v.$set(L)},i($){g||(P(_.$$.fragment,$),P(m.$$.fragment,$),P(v.$$.fragment,$),g=!0)},o($){j(_.$$.fragment,$),j(m.$$.fragment,$),j(v.$$.fragment,$),g=!1},d($){$&&(k(e),k(u),k(a),k(c),k(p),k(h)),ce(_,$),ce(m,$),ce(v,$),S=!1,Ve(C)}}}function sv(l){let e,t,n,s,o,i,u,a,c,_;return u=new Be({props:{disabled:l[1],$$slots:{default:[av]},$$scope:{ctx:l}}}),u.$on("click",l[30]),{c(){e=d("select"),t=d("option"),t.textContent="Last 1 hour",n=d("option"),n.textContent="Last 6 hours",s=d("option"),s.textContent="Last 24 hours",o=d("option"),o.textContent="Last 7 days",i=b(),_e(u.$$.fragment),t.__value=1,ne(t,t.__value),n.__value=6,ne(n,n.__value),s.__value=24,ne(s,s.__value),o.__value=168,ne(o,o.__value),f(e,"class","svelte-13li5w8"),l[9]===void 0&&xe(()=>l[37].call(e))},m(p,m){w(p,e,m),r(e,t),r(e,n),r(e,s),r(e,o),Re(e,l[9],!0),w(p,i,m),fe(u,p,m),a=!0,c||(_=[ee(e,"change",l[37]),ee(e,"change",l[30])],c=!0)},p(p,m){m[0]&512&&Re(e,p[9]);const h={};m[0]&2&&(h.disabled=p[1]),m[0]&2|m[2]&32768&&(h.$$scope={dirty:m,ctx:p}),u.$set(h)},i(p){a||(P(u.$$.fragment,p),a=!0)},o(p){j(u.$$.fragment,p),a=!1},d(p){p&&(k(e),k(i)),ce(u,p),c=!1,Ve(_)}}}function ov(l){let e=l[14]?"⏳":"🔄",t,n;return{c(){t=T(e),n=T(" Refresh")},m(s,o){w(s,t,o),w(s,n,o)},p(s,o){o[0]&16384&&e!==(e=s[14]?"⏳":"🔄")&&B(t,e)},d(s){s&&(k(t),k(n))}}}function iv(l){let e=l[17]?"⏸️ Stop":"▶️ Auto",t;return{c(){t=T(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&131072&&e!==(e=n[17]?"⏸️ Stop":"▶️ Auto")&&B(t,e)},d(n){n&&k(t)}}}function rv(l){let e;return{c(){e=T("🗑️ Clear")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function av(l){let e=l[1]?"⏳":"🔄",t,n;return{c(){t=T(e),n=T(" Refresh")},m(s,o){w(s,t,o),w(s,n,o)},p(s,o){o[0]&2&&e!==(e=s[1]?"⏳":"🔄")&&B(t,e)},d(s){s&&(k(t),k(n))}}}function Ja(l){var M,G;let e,t,n,s,o,i,u,a,c,_,p,m,h,v,g,S,C,$,y,D,E,L,z=l[2]&&Ka(l),q=((G=(M=l[2])==null?void 0:M.slow_endpoints)==null?void 0:G.length)>0&&Ya(l),O=pe(l[6]),N=[];for(let F=0;F<O.length;F+=1)N[F]=Za(Wa(l,O,F));return C=new Be({props:{size:"small",$$slots:{default:[vv]},$$scope:{ctx:l}}}),C.$on("click",l[28]),y=new ft({props:{$$slots:{default:[gv]},$$scope:{ctx:l}}}),{c(){z&&z.c(),e=b(),q&&q.c(),t=b(),n=d("div"),s=d("select"),o=d("option"),o.textContent="All services";for(let F=0;F<N.length;F+=1)N[F].c();i=b(),u=d("input"),a=b(),c=d("input"),_=b(),p=d("select"),m=d("option"),m.textContent="All status",h=d("option"),h.textContent="2xx Success",v=d("option"),v.textContent="4xx Client Error",g=d("option"),g.textContent="5xx Server Error",S=b(),_e(C.$$.fragment),$=b(),_e(y.$$.fragment),o.__value="",ne(o,o.__value),f(s,"title","Filter by service"),f(s,"class","svelte-13li5w8"),l[8]===void 0&&xe(()=>l[43].call(s)),f(u,"type","text"),f(u,"placeholder","Path prefix (e.g., /api/v1/infra)"),f(u,"class","svelte-13li5w8"),f(c,"type","number"),f(c,"placeholder","Min ms"),f(c,"class","svelte-13li5w8"),m.__value="",ne(m,m.__value),h.__value="2xx",ne(h,h.__value),v.__value="4xx",ne(v,v.__value),g.__value="5xx",ne(g,g.__value),f(p,"class","svelte-13li5w8"),l[12]===void 0&&xe(()=>l[46].call(p)),f(n,"class","filters svelte-13li5w8")},m(F,A){z&&z.m(F,A),w(F,e,A),q&&q.m(F,A),w(F,t,A),w(F,n,A),r(n,s),r(s,o);for(let U=0;U<N.length;U+=1)N[U]&&N[U].m(s,null);Re(s,l[8],!0),r(n,i),r(n,u),ne(u,l[10]),r(n,a),r(n,c),ne(c,l[11]),r(n,_),r(n,p),r(p,m),r(p,h),r(p,v),r(p,g),Re(p,l[12],!0),r(n,S),fe(C,n,null),w(F,$,A),fe(y,F,A),D=!0,E||(L=[ee(s,"change",l[43]),ee(s,"change",l[30]),ee(u,"input",l[44]),ee(u,"change",l[28]),ee(c,"input",l[45]),ee(c,"change",l[28]),ee(p,"change",l[46]),ee(p,"change",l[28])],E=!0)},p(F,A){var I,H;if(F[2]?z?(z.p(F,A),A[0]&4&&P(z,1)):(z=Ka(F),z.c(),P(z,1),z.m(e.parentNode,e)):z&&(Se(),j(z,1,1,()=>{z=null}),Te()),((H=(I=F[2])==null?void 0:I.slow_endpoints)==null?void 0:H.length)>0?q?(q.p(F,A),A[0]&4&&P(q,1)):(q=Ya(F),q.c(),P(q,1),q.m(t.parentNode,t)):q&&(Se(),j(q,1,1,()=>{q=null}),Te()),A[0]&192){O=pe(F[6]);let Y;for(Y=0;Y<O.length;Y+=1){const Q=Wa(F,O,Y);N[Y]?N[Y].p(Q,A):(N[Y]=Za(Q),N[Y].c(),N[Y].m(s,null))}for(;Y<N.length;Y+=1)N[Y].d(1);N.length=O.length}A[0]&320&&Re(s,F[8]),A[0]&1024&&u.value!==F[10]&&ne(u,F[10]),A[0]&2048&&Kt(c.value)!==F[11]&&ne(c,F[11]),A[0]&4096&&Re(p,F[12]);const U={};A[2]&32768&&(U.$$scope={dirty:A,ctx:F}),C.$set(U);const R={};A[0]&8|A[2]&32768&&(R.$$scope={dirty:A,ctx:F}),y.$set(R)},i(F){D||(P(z),P(q),P(C.$$.fragment,F),P(y.$$.fragment,F),D=!0)},o(F){j(z),j(q),j(C.$$.fragment,F),j(y.$$.fragment,F),D=!1},d(F){F&&(k(e),k(t),k(n),k($)),z&&z.d(F),q&&q.d(F),Me(N,F),ce(C),ce(y,F),E=!1,Ve(L)}}}function Ka(l){let e,t,n,s,o,i,u,a,c,_,p,m,h;return t=new ft({props:{$$slots:{default:[uv]},$$scope:{ctx:l}}}),s=new ft({props:{$$slots:{default:[fv]},$$scope:{ctx:l}}}),i=new ft({props:{$$slots:{default:[cv]},$$scope:{ctx:l}}}),a=new ft({props:{$$slots:{default:[_v]},$$scope:{ctx:l}}}),_=new ft({props:{$$slots:{default:[dv]},$$scope:{ctx:l}}}),m=new ft({props:{$$slots:{default:[pv]},$$scope:{ctx:l}}}),{c(){e=d("div"),_e(t.$$.fragment),n=b(),_e(s.$$.fragment),o=b(),_e(i.$$.fragment),u=b(),_e(a.$$.fragment),c=b(),_e(_.$$.fragment),p=b(),_e(m.$$.fragment),f(e,"class","overview-grid svelte-13li5w8")},m(v,g){w(v,e,g),fe(t,e,null),r(e,n),fe(s,e,null),r(e,o),fe(i,e,null),r(e,u),fe(a,e,null),r(e,c),fe(_,e,null),r(e,p),fe(m,e,null),h=!0},p(v,g){const S={};g[0]&4|g[2]&32768&&(S.$$scope={dirty:g,ctx:v}),t.$set(S);const C={};g[0]&4|g[2]&32768&&(C.$$scope={dirty:g,ctx:v}),s.$set(C);const $={};g[0]&4|g[2]&32768&&($.$$scope={dirty:g,ctx:v}),i.$set($);const y={};g[0]&4|g[2]&32768&&(y.$$scope={dirty:g,ctx:v}),a.$set(y);const D={};g[0]&4|g[2]&32768&&(D.$$scope={dirty:g,ctx:v}),_.$set(D);const E={};g[0]&4|g[2]&32768&&(E.$$scope={dirty:g,ctx:v}),m.$set(E)},i(v){h||(P(t.$$.fragment,v),P(s.$$.fragment,v),P(i.$$.fragment,v),P(a.$$.fragment,v),P(_.$$.fragment,v),P(m.$$.fragment,v),h=!0)},o(v){j(t.$$.fragment,v),j(s.$$.fragment,v),j(i.$$.fragment,v),j(a.$$.fragment,v),j(_.$$.fragment,v),j(m.$$.fragment,v),h=!1},d(v){v&&k(e),ce(t),ce(s),ce(i),ce(a),ce(_),ce(m)}}}function uv(l){let e,t,n,s,o=l[2].total_requests.toLocaleString()+"",i;return{c(){e=d("div"),t=d("span"),t.textContent="Total Requests",n=b(),s=d("span"),i=T(o),f(t,"class","label svelte-13li5w8"),f(s,"class","value svelte-13li5w8"),f(e,"class","stat svelte-13li5w8")},m(u,a){w(u,e,a),r(e,t),r(e,n),r(e,s),r(s,i)},p(u,a){a[0]&4&&o!==(o=u[2].total_requests.toLocaleString()+"")&&B(i,o)},d(u){u&&k(e)}}}function fv(l){let e,t,n,s,o=Lt(l[2].avg_latency_ms)+"",i;return{c(){e=d("div"),t=d("span"),t.textContent="Avg Latency",n=b(),s=d("span"),i=T(o),f(t,"class","label svelte-13li5w8"),f(s,"class","value svelte-13li5w8"),f(e,"class","stat svelte-13li5w8")},m(u,a){w(u,e,a),r(e,t),r(e,n),r(e,s),r(s,i)},p(u,a){a[0]&4&&o!==(o=Lt(u[2].avg_latency_ms)+"")&&B(i,o)},d(u){u&&k(e)}}}function cv(l){let e,t,n,s,o=Lt(l[2].p95_latency_ms)+"",i;return{c(){e=d("div"),t=d("span"),t.textContent="P95 Latency",n=b(),s=d("span"),i=T(o),f(t,"class","label svelte-13li5w8"),f(s,"class","value svelte-13li5w8"),f(e,"class","stat svelte-13li5w8")},m(u,a){w(u,e,a),r(e,t),r(e,n),r(e,s),r(s,i)},p(u,a){a[0]&4&&o!==(o=Lt(u[2].p95_latency_ms)+"")&&B(i,o)},d(u){u&&k(e)}}}function _v(l){let e,t,n,s,o=l[2].error_rate+"",i,u;return{c(){e=d("div"),t=d("span"),t.textContent="Error Rate",n=b(),s=d("span"),i=T(o),u=T("%"),f(t,"class","label svelte-13li5w8"),f(s,"class","value svelte-13li5w8"),f(e,"class","stat svelte-13li5w8"),ke(e,"error",l[2].error_rate>5)},m(a,c){w(a,e,c),r(e,t),r(e,n),r(e,s),r(s,i),r(s,u)},p(a,c){c[0]&4&&o!==(o=a[2].error_rate+"")&&B(i,o),c[0]&4&&ke(e,"error",a[2].error_rate>5)},d(a){a&&k(e)}}}function dv(l){let e,t,n,s,o=l[2].slow_count+"",i,u,a;return{c(){e=d("div"),t=d("span"),t.textContent="Slow Requests",n=b(),s=d("span"),i=T(o),f(t,"class","label svelte-13li5w8"),f(s,"class","value svelte-13li5w8"),f(e,"class","stat clickable svelte-13li5w8")},m(c,_){w(c,e,_),r(e,t),r(e,n),r(e,s),r(s,i),u||(a=[ee(e,"click",l[31]),ee(e,"keypress",l[31])],u=!0)},p(c,_){_[0]&4&&o!==(o=c[2].slow_count+"")&&B(i,o)},d(c){c&&k(e),u=!1,Ve(a)}}}function pv(l){let e,t,n,s,o=l[2].error_count+"",i,u,a;return{c(){e=d("div"),t=d("span"),t.textContent="5xx Errors",n=b(),s=d("span"),i=T(o),f(t,"class","label svelte-13li5w8"),f(s,"class","value svelte-13li5w8"),f(e,"class","stat clickable svelte-13li5w8")},m(c,_){w(c,e,_),r(e,t),r(e,n),r(e,s),r(s,i),u||(a=[ee(e,"click",l[41]),ee(e,"keypress",l[42])],u=!0)},p(c,_){_[0]&4&&o!==(o=c[2].error_count+"")&&B(i,o)},d(c){c&&k(e),u=!1,Ve(a)}}}function Ya(l){let e,t;return e=new ft({props:{$$slots:{default:[mv]},$$scope:{ctx:l}}}),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const o={};s[0]&4|s[2]&32768&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){j(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function Qa(l){let e,t,n=l[74].path+"",s,o,i,u=Lt(l[74].avg_ms)+"",a,c,_,p=l[74].count+"",m,h;return{c(){e=d("tr"),t=d("td"),s=T(n),o=b(),i=d("td"),a=T(u),c=b(),_=d("td"),m=T(p),h=b(),f(t,"class","path svelte-13li5w8"),f(i,"class","svelte-13li5w8"),f(_,"class","svelte-13li5w8"),f(e,"class","svelte-13li5w8")},m(v,g){w(v,e,g),r(e,t),r(t,s),r(e,o),r(e,i),r(i,a),r(e,c),r(e,_),r(_,m),r(e,h)},p(v,g){g[0]&4&&n!==(n=v[74].path+"")&&B(s,n),g[0]&4&&u!==(u=Lt(v[74].avg_ms)+"")&&B(a,u),g[0]&4&&p!==(p=v[74].count+"")&&B(m,p)},d(v){v&&k(e)}}}function mv(l){let e,t,n,s,o,i,u=pe(l[2].slow_endpoints.slice(0,5)),a=[];for(let c=0;c<u.length;c+=1)a[c]=Qa(Va(l,u,c));return{c(){e=d("h3"),e.textContent="🐢 Slowest Endpoints",t=b(),n=d("table"),s=d("thead"),s.innerHTML='<tr class="svelte-13li5w8"><th class="svelte-13li5w8">Path</th> <th class="svelte-13li5w8">Avg</th> <th class="svelte-13li5w8">Count</th></tr>',o=b(),i=d("tbody");for(let c=0;c<a.length;c+=1)a[c].c();f(e,"class","svelte-13li5w8"),f(n,"class","mini-table svelte-13li5w8")},m(c,_){w(c,e,_),w(c,t,_),w(c,n,_),r(n,s),r(n,o),r(n,i);for(let p=0;p<a.length;p+=1)a[p]&&a[p].m(i,null)},p(c,_){if(_[0]&4){u=pe(c[2].slow_endpoints.slice(0,5));let p;for(p=0;p<u.length;p+=1){const m=Va(c,u,p);a[p]?a[p].p(m,_):(a[p]=Qa(m),a[p].c(),a[p].m(i,null))}for(;p<a.length;p+=1)a[p].d(1);a.length=u.length}},d(c){c&&(k(e),k(t),k(n)),Me(a,c)}}}function Za(l){let e,t=l[71]+"",n,s,o=l[71]===l[7]?"(current)":"",i,u;return{c(){e=d("option"),n=T(t),s=b(),i=T(o),e.__value=u=l[71],ne(e,e.__value)},m(a,c){w(a,e,c),r(e,n),r(e,s),r(e,i)},p(a,c){c[0]&64&&t!==(t=a[71]+"")&&B(n,t),c[0]&192&&o!==(o=a[71]===a[7]?"(current)":"")&&B(i,o),c[0]&64&&u!==(u=a[71])&&(e.__value=u,ne(e,e.__value))},d(a){a&&k(e)}}}function vv(l){let e;return{c(){e=T("Apply")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function hv(l){let e;return{c(){e=T("View")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function Xa(l){var x;let e,t,n=vu(l[68].timestamp)+"",s,o,i,u=(l[68].service_name||"-")+"",a,c,_,p,m=l[68].method+"",h,v,g,S,C=(((x=l[68].path)==null?void 0:x.length)>40?l[68].path.slice(0,40)+"...":l[68].path)+"",$,y,D,E,L,z=(l[68].status_code||"-")+"",q,O,N,M,G=Lt(l[68].duration_ms)+"",F,A,U,R=l[68].span_count+"",I,H,Y,Q,X;function oe(){return l[47](l[68])}return Q=new Be({props:{size:"small",$$slots:{default:[hv]},$$scope:{ctx:l}}}),Q.$on("click",oe),{c(){var V;e=d("tr"),t=d("td"),s=T(n),o=b(),i=d("td"),a=T(u),c=b(),_=d("td"),p=d("span"),h=T(m),g=b(),S=d("td"),$=T(C),D=b(),E=d("td"),L=d("span"),q=T(z),N=b(),M=d("td"),F=T(G),A=b(),U=d("td"),I=T(R),H=b(),Y=d("td"),_e(Q.$$.fragment),f(t,"class","time svelte-13li5w8"),f(i,"class","service svelte-13li5w8"),f(p,"class",v="method "+((V=l[68].method)==null?void 0:V.toLowerCase())+" svelte-13li5w8"),f(_,"class","svelte-13li5w8"),f(S,"class","path svelte-13li5w8"),f(S,"title",y=l[68].path),f(L,"class",O="status status-"+fn(l[68].status_code)+" svelte-13li5w8"),f(E,"class","svelte-13li5w8"),f(M,"class","svelte-13li5w8"),ke(M,"slow",l[68].duration_ms>1e3),f(U,"class","svelte-13li5w8"),f(Y,"class","svelte-13li5w8"),f(e,"class","svelte-13li5w8"),ke(e,"error",l[68].status_code>=500),ke(e,"warning",l[68].status_code>=400&&l[68].status_code<500)},m(V,J){w(V,e,J),r(e,t),r(t,s),r(e,o),r(e,i),r(i,a),r(e,c),r(e,_),r(_,p),r(p,h),r(e,g),r(e,S),r(S,$),r(e,D),r(e,E),r(E,L),r(L,q),r(e,N),r(e,M),r(M,F),r(e,A),r(e,U),r(U,I),r(e,H),r(e,Y),fe(Q,Y,null),X=!0},p(V,J){var W,ie;l=V,(!X||J[0]&8)&&n!==(n=vu(l[68].timestamp)+"")&&B(s,n),(!X||J[0]&8)&&u!==(u=(l[68].service_name||"-")+"")&&B(a,u),(!X||J[0]&8)&&m!==(m=l[68].method+"")&&B(h,m),(!X||J[0]&8&&v!==(v="method "+((W=l[68].method)==null?void 0:W.toLowerCase())+" svelte-13li5w8"))&&f(p,"class",v),(!X||J[0]&8)&&C!==(C=(((ie=l[68].path)==null?void 0:ie.length)>40?l[68].path.slice(0,40)+"...":l[68].path)+"")&&B($,C),(!X||J[0]&8&&y!==(y=l[68].path))&&f(S,"title",y),(!X||J[0]&8)&&z!==(z=(l[68].status_code||"-")+"")&&B(q,z),(!X||J[0]&8&&O!==(O="status status-"+fn(l[68].status_code)+" svelte-13li5w8"))&&f(L,"class",O),(!X||J[0]&8)&&G!==(G=Lt(l[68].duration_ms)+"")&&B(F,G),(!X||J[0]&8)&&ke(M,"slow",l[68].duration_ms>1e3),(!X||J[0]&8)&&R!==(R=l[68].span_count+"")&&B(I,R);const ae={};J[2]&32768&&(ae.$$scope={dirty:J,ctx:l}),Q.$set(ae),(!X||J[0]&8)&&ke(e,"error",l[68].status_code>=500),(!X||J[0]&8)&&ke(e,"warning",l[68].status_code>=400&&l[68].status_code<500)},i(V){X||(P(Q.$$.fragment,V),X=!0)},o(V){j(Q.$$.fragment,V),X=!1},d(V){V&&k(e),ce(Q)}}}function xa(l){let e;return{c(){e=d("tr"),e.innerHTML='<td colspan="8" class="empty svelte-13li5w8">No requests found</td>',f(e,"class","svelte-13li5w8")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function gv(l){let e,t,n,s,o,i,u,a,c,_=pe(l[3]),p=[];for(let v=0;v<_.length;v+=1)p[v]=Xa(Ga(l,_,v));const m=v=>j(p[v],1,1,()=>{p[v]=null});let h=l[3].length===0&&xa();return{c(){e=d("h3"),e.textContent="📋 Recent Requests",t=b(),n=d("div"),s=d("table"),o=d("thead"),o.innerHTML='<tr class="svelte-13li5w8"><th class="svelte-13li5w8">Time</th> <th class="svelte-13li5w8">Service</th> <th class="svelte-13li5w8">Method</th> <th class="svelte-13li5w8">Path</th> <th class="svelte-13li5w8">Status</th> <th class="svelte-13li5w8">Duration</th> <th class="svelte-13li5w8">Spans</th> <th class="svelte-13li5w8">Actions</th></tr>',i=b(),u=d("tbody");for(let v=0;v<p.length;v+=1)p[v].c();a=b(),h&&h.c(),f(e,"class","svelte-13li5w8"),f(s,"class","svelte-13li5w8"),f(n,"class","table-container svelte-13li5w8")},m(v,g){w(v,e,g),w(v,t,g),w(v,n,g),r(n,s),r(s,o),r(s,i),r(s,u);for(let S=0;S<p.length;S+=1)p[S]&&p[S].m(u,null);r(u,a),h&&h.m(u,null),c=!0},p(v,g){if(g[0]&536870920){_=pe(v[3]);let S;for(S=0;S<_.length;S+=1){const C=Ga(v,_,S);p[S]?(p[S].p(C,g),P(p[S],1)):(p[S]=Xa(C),p[S].c(),P(p[S],1),p[S].m(u,a))}for(Se(),S=_.length;S<p.length;S+=1)m(S);Te()}v[3].length===0?h||(h=xa(),h.c(),h.m(u,null)):h&&(h.d(1),h=null)},i(v){if(!c){for(let g=0;g<_.length;g+=1)P(p[g]);c=!0}},o(v){p=p.filter(Boolean);for(let g=0;g<p.length;g+=1)j(p[g]);c=!1},d(v){v&&(k(e),k(t),k(n)),Me(p,v),h&&h.d()}}}function eu(l){let e,t;return e=new ft({props:{$$slots:{default:[$v]},$$scope:{ctx:l}}}),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const o={};s[0]&24576|s[2]&32768&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){j(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function bv(l){let e,t=pe(l[13]),n=[];for(let s=0;s<t.length;s+=1)n[s]=lu(Ha(l,t,s));return{c(){e=d("div");for(let s=0;s<n.length;s+=1)n[s].c();f(e,"class","logs-container svelte-13li5w8")},m(s,o){w(s,e,o);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(e,null)},p(s,o){if(o[0]&8192){t=pe(s[13]);let i;for(i=0;i<t.length;i+=1){const u=Ha(s,t,i);n[i]?n[i].p(u,o):(n[i]=lu(u),n[i].c(),n[i].m(e,null))}for(;i<n.length;i+=1)n[i].d(1);n.length=t.length}},d(s){s&&k(e),Me(n,s)}}}function kv(l){let e;return{c(){e=d("div"),e.innerHTML='<p>No logs found.</p> <p class="hint svelte-13li5w8">Logs are captured in memory. They reset when the server restarts.</p>',f(e,"class","empty-logs svelte-13li5w8")},m(t,n){w(t,e,n)},p:be,d(t){t&&k(e)}}}function wv(l){let e;return{c(){e=d("div"),e.textContent="Loading logs...",f(e,"class","loading-logs svelte-13li5w8")},m(t,n){w(t,e,n)},p:be,d(t){t&&k(e)}}}function tu(l){let e,t,n=l[65].module+"",s,o,i=l[65].funcName+"",u,a,c=l[65].lineno+"",_,p;return{c(){e=d("span"),t=T("("),s=T(n),o=T("."),u=T(i),a=T(":"),_=T(c),p=T(")"),f(e,"class","log-location svelte-13li5w8")},m(m,h){w(m,e,h),r(e,t),r(e,s),r(e,o),r(e,u),r(e,a),r(e,_),r(e,p)},p(m,h){h[0]&8192&&n!==(n=m[65].module+"")&&B(s,n),h[0]&8192&&i!==(i=m[65].funcName+"")&&B(u,i),h[0]&8192&&c!==(c=m[65].lineno+"")&&B(_,c)},d(m){m&&k(e)}}}function lu(l){var L,z;let e,t,n=(((z=(L=l[65].timestamp)==null?void 0:L.split("T")[1])==null?void 0:z.split(".")[0])||l[65].timestamp)+"",s,o,i,u,a=l[65].level+"",c,_,p,m,h=l[65].logger+"",v,g,S,C=l[65].message+"",$,y,D,E=l[65].module&&l[65].funcName&&tu(l);return{c(){e=d("div"),t=d("span"),s=T(n),o=b(),i=d("span"),u=T("["),c=T(a),_=T("]"),p=b(),m=d("span"),v=T(h),g=b(),S=d("span"),$=T(C),y=b(),E&&E.c(),D=b(),f(t,"class","log-time svelte-13li5w8"),f(i,"class","log-level svelte-13li5w8"),qt(i,"color",mu(l[65].level)),f(m,"class","log-logger svelte-13li5w8"),f(S,"class","log-message svelte-13li5w8"),f(e,"class","log-entry svelte-13li5w8"),ke(e,"error",l[65].level==="ERROR"||l[65].level==="CRITICAL"),ke(e,"warning",l[65].level==="WARNING")},m(q,O){w(q,e,O),r(e,t),r(t,s),r(e,o),r(e,i),r(i,u),r(i,c),r(i,_),r(e,p),r(e,m),r(m,v),r(e,g),r(e,S),r(S,$),r(e,y),E&&E.m(e,null),r(e,D)},p(q,O){var N,M;O[0]&8192&&n!==(n=(((M=(N=q[65].timestamp)==null?void 0:N.split("T")[1])==null?void 0:M.split(".")[0])||q[65].timestamp)+"")&&B(s,n),O[0]&8192&&a!==(a=q[65].level+"")&&B(c,a),O[0]&8192&&qt(i,"color",mu(q[65].level)),O[0]&8192&&h!==(h=q[65].logger+"")&&B(v,h),O[0]&8192&&C!==(C=q[65].message+"")&&B($,C),q[65].module&&q[65].funcName?E?E.p(q,O):(E=tu(q),E.c(),E.m(e,D)):E&&(E.d(1),E=null),O[0]&8192&&ke(e,"error",q[65].level==="ERROR"||q[65].level==="CRITICAL"),O[0]&8192&&ke(e,"warning",q[65].level==="WARNING")},d(q){q&&k(e),E&&E.d()}}}function $v(l){let e,t,n,s,o=l[13].length+"",i,u,a,c;function _(h,v){return h[14]?wv:h[13].length===0?kv:bv}let p=_(l),m=p(l);return{c(){e=d("div"),t=d("h3"),t.textContent="📝 Backend Logs",n=b(),s=d("span"),i=T(o),u=T(" entries"),a=b(),m.c(),c=Ie(),f(t,"class","svelte-13li5w8"),f(s,"class","log-count svelte-13li5w8"),f(e,"class","logs-header svelte-13li5w8")},m(h,v){w(h,e,v),r(e,t),r(e,n),r(e,s),r(s,i),r(s,u),w(h,a,v),m.m(h,v),w(h,c,v)},p(h,v){v[0]&8192&&o!==(o=h[13].length+"")&&B(i,o),p===(p=_(h))&&m?m.p(h,v):(m.d(1),m=p(h),m&&(m.c(),m.m(c.parentNode,c)))},d(h){h&&(k(e),k(a),k(c)),m.d(h)}}}function nu(l){let e,t;return e=new ft({props:{$$slots:{default:[qv]},$$scope:{ctx:l}}}),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const o={};s[0]&3932160|s[2]&32768&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){j(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function Cv(l){let e=l[19]?"Loading...":"🔄 Refresh",t;return{c(){t=T(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&524288&&e!==(e=n[19]?"Loading...":"🔄 Refresh")&&B(t,e)},d(n){n&&k(t)}}}function yv(l){let e,t,n,s,o;return s=new Be({props:{$$slots:{default:[zv]},$$scope:{ctx:l}}}),s.$on("click",l[22]),{c(){e=d("div"),t=d("p"),t.textContent="Could not load database info.",n=b(),_e(s.$$.fragment),f(e,"class","empty-db svelte-13li5w8")},m(i,u){w(i,e,u),r(e,t),r(e,n),fe(s,e,null),o=!0},p(i,u){const a={};u[2]&32768&&(a.$$scope={dirty:u,ctx:i}),s.$set(a)},i(i){o||(P(s.$$.fragment,i),o=!0)},o(i){j(s.$$.fragment,i),o=!1},d(i){i&&k(e),ce(s)}}}function Sv(l){let e,t,n,s,o,i,u=l[18].path+"",a,c,_,p,m,h,v=l[18].size_mb?l[18].size_mb.toFixed(2)+" MB":"N/A",g,S,C,$,y,D,E=(l[18].modified||"N/A")+"",L,z,q,O,N,M,G=l[18].exists?"✓ Exists":"✗ Not Found",F,A,U,R,I,H,Y,Q,X,oe,x,V,J,ae,W,ie,ue,te,me,re;return X=new Be({props:{variant:"secondary",$$slots:{default:[Dv]},$$scope:{ctx:l}}}),X.$on("click",l[23]),me=new Be({props:{variant:"danger",disabled:l[20],$$slots:{default:[Ev]},$$scope:{ctx:l}}}),me.$on("click",l[24]),{c(){e=d("div"),t=d("div"),n=d("div"),s=d("span"),s.textContent="Path:",o=b(),i=d("code"),a=T(u),c=b(),_=d("div"),p=d("span"),p.textContent="Size:",m=b(),h=d("span"),g=T(v),S=b(),C=d("div"),$=d("span"),$.textContent="Modified:",y=b(),D=d("span"),L=T(E),z=b(),q=d("div"),O=d("span"),O.textContent="Status:",N=b(),M=d("span"),F=T(G),A=b(),U=d("div"),R=d("div"),I=d("h4"),I.textContent="📥 Download",H=b(),Y=d("p"),Y.textContent="Download the SQLite database for backup or offline editing.",Q=b(),_e(X.$$.fragment),oe=b(),x=d("div"),V=d("h4"),V.textContent="📤 Upload & Replace",J=b(),ae=d("p"),ae.textContent="⚠️ This will REPLACE the entire database. A backup will be created automatically.",W=b(),ie=d("div"),ue=d("input"),te=b(),_e(me.$$.fragment),f(s,"class","label svelte-13li5w8"),f(i,"class","svelte-13li5w8"),f(n,"class","stat svelte-13li5w8"),f(p,"class","label svelte-13li5w8"),f(_,"class","stat svelte-13li5w8"),f($,"class","label svelte-13li5w8"),f(C,"class","stat svelte-13li5w8"),f(O,"class","label svelte-13li5w8"),f(M,"class","status-badge svelte-13li5w8"),ke(M,"success",l[18].exists),ke(M,"error",!l[18].exists),f(q,"class","stat svelte-13li5w8"),f(t,"class","db-stats svelte-13li5w8"),f(I,"class","svelte-13li5w8"),f(Y,"class","hint svelte-13li5w8"),f(R,"class","action-group svelte-13li5w8"),f(V,"class","svelte-13li5w8"),f(ae,"class","hint warning svelte-13li5w8"),f(ue,"type","file"),f(ue,"accept",".db"),f(ue,"class","file-input svelte-13li5w8"),f(ie,"class","upload-row svelte-13li5w8"),f(x,"class","action-group svelte-13li5w8"),f(U,"class","db-actions svelte-13li5w8"),f(e,"class","db-info svelte-13li5w8")},m(le,Z){w(le,e,Z),r(e,t),r(t,n),r(n,s),r(n,o),r(n,i),r(i,a),r(t,c),r(t,_),r(_,p),r(_,m),r(_,h),r(h,g),r(t,S),r(t,C),r(C,$),r(C,y),r(C,D),r(D,L),r(t,z),r(t,q),r(q,O),r(q,N),r(q,M),r(M,F),r(e,A),r(e,U),r(U,R),r(R,I),r(R,H),r(R,Y),r(R,Q),fe(X,R,null),r(U,oe),r(U,x),r(x,V),r(x,J),r(x,ae),r(x,W),r(x,ie),r(ie,ue),l[48](ue),r(ie,te),fe(me,ie,null),re=!0},p(le,Z){(!re||Z[0]&262144)&&u!==(u=le[18].path+"")&&B(a,u),(!re||Z[0]&262144)&&v!==(v=le[18].size_mb?le[18].size_mb.toFixed(2)+" MB":"N/A")&&B(g,v),(!re||Z[0]&262144)&&E!==(E=(le[18].modified||"N/A")+"")&&B(L,E),(!re||Z[0]&262144)&&G!==(G=le[18].exists?"✓ Exists":"✗ Not Found")&&B(F,G),(!re||Z[0]&262144)&&ke(M,"success",le[18].exists),(!re||Z[0]&262144)&&ke(M,"error",!le[18].exists);const K={};Z[2]&32768&&(K.$$scope={dirty:Z,ctx:le}),X.$set(K);const ge={};Z[0]&1048576&&(ge.disabled=le[20]),Z[0]&1048576|Z[2]&32768&&(ge.$$scope={dirty:Z,ctx:le}),me.$set(ge)},i(le){re||(P(X.$$.fragment,le),P(me.$$.fragment,le),re=!0)},o(le){j(X.$$.fragment,le),j(me.$$.fragment,le),re=!1},d(le){le&&k(e),ce(X),l[48](null),ce(me)}}}function Tv(l){let e;return{c(){e=d("div"),e.textContent="Loading database info...",f(e,"class","loading-db svelte-13li5w8")},m(t,n){w(t,e,n)},p:be,i:be,o:be,d(t){t&&k(e)}}}function zv(l){let e;return{c(){e=T("Try Again")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function Dv(l){let e;return{c(){e=T("Download Database")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function Ev(l){let e=l[20]?"Uploading...":"Upload & Replace",t;return{c(){t=T(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&1048576&&e!==(e=n[20]?"Uploading...":"Upload & Replace")&&B(t,e)},d(n){n&&k(t)}}}function qv(l){let e,t,n,s,o,i,u,a,c;s=new Be({props:{size:"small",disabled:l[19],$$slots:{default:[Cv]},$$scope:{ctx:l}}}),s.$on("click",l[22]);const _=[Tv,Sv,yv],p=[];function m(h,v){return h[19]&&!h[18]?0:h[18]?1:2}return i=m(l),u=p[i]=_[i](l),{c(){e=d("div"),t=d("h3"),t.textContent="🗄️ Database Management",n=b(),_e(s.$$.fragment),o=b(),u.c(),a=Ie(),f(t,"class","svelte-13li5w8"),f(e,"class","db-header svelte-13li5w8")},m(h,v){w(h,e,v),r(e,t),r(e,n),fe(s,e,null),w(h,o,v),p[i].m(h,v),w(h,a,v),c=!0},p(h,v){const g={};v[0]&524288&&(g.disabled=h[19]),v[0]&524288|v[2]&32768&&(g.$$scope={dirty:v,ctx:h}),s.$set(g);let S=i;i=m(h),i===S?p[i].p(h,v):(Se(),j(p[S],1,1,()=>{p[S]=null}),Te(),u=p[i],u?u.p(h,v):(u=p[i]=_[i](h),u.c()),P(u,1),u.m(a.parentNode,a))},i(h){c||(P(s.$$.fragment,h),P(u),c=!0)},o(h){j(s.$$.fragment,h),j(u),c=!1},d(h){h&&(k(e),k(o),k(a)),ce(s),p[i].d(h)}}}function su(l){let e,t;return e=new ol({props:{open:!0,title:"Request Detail",width:"800px",$$slots:{default:[Lv]},$$scope:{ctx:l}}}),e.$on("close",l[49]),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const o={};s[0]&16|s[2]&32768&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){j(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function ou(l){let e,t=l[4].service_name+"",n;return{c(){e=d("span"),n=T(t),f(e,"class","service-badge svelte-13li5w8")},m(s,o){w(s,e,o),r(e,n)},p(s,o){o[0]&16&&t!==(t=s[4].service_name+"")&&B(n,t)},d(s){s&&k(e)}}}function iu(l){let e,t,n=l[4].error+"",s;return{c(){e=d("div"),t=T("⚠️ "),s=T(n),f(e,"class","error-box svelte-13li5w8")},m(o,i){w(o,e,i),r(e,t),r(e,s)},p(o,i){i[0]&16&&n!==(n=o[4].error+"")&&B(s,n)},d(o){o&&k(e)}}}function ru(l){let e,t,n=l[4].user_id+"",s;return{c(){e=d("span"),t=T("User: "),s=T(n)},m(o,i){w(o,e,i),r(e,t),r(e,s)},p(o,i){i[0]&16&&n!==(n=o[4].user_id+"")&&B(s,n)},d(o){o&&k(e)}}}function au(l){let e,t,n,s=l[62].name+"",o,i,u,a,c,_=Lt(l[62].duration_ms)+"",p,m;return{c(){e=d("div"),t=d("div"),n=T("└─ "),o=T(s),u=b(),a=d("div"),c=d("div"),p=T(_),m=b(),f(t,"class","span-name svelte-13li5w8"),f(t,"title",i=l[62].name),f(c,"class","span-bar child-bar svelte-13li5w8"),qt(c,"width",cn(l[62],l[4].total_ms)+"%"),ke(c,"error",l[62].error),f(a,"class","span-bar-container svelte-13li5w8"),f(e,"class","span-row child svelte-13li5w8")},m(h,v){w(h,e,v),r(e,t),r(t,n),r(t,o),r(e,u),r(e,a),r(a,c),r(c,p),r(e,m)},p(h,v){v[0]&16&&s!==(s=h[62].name+"")&&B(o,s),v[0]&16&&i!==(i=h[62].name)&&f(t,"title",i),v[0]&16&&_!==(_=Lt(h[62].duration_ms)+"")&&B(p,_),v[0]&16&&qt(c,"width",cn(h[62],h[4].total_ms)+"%"),v[0]&16&&ke(c,"error",h[62].error)},d(h){h&&k(e)}}}function uu(l){let e,t,n=l[53].name+"",s,o,i,u,a,c=Lt(l[53].duration_ms)+"",_,p,m,h=pe(l[53].children||[]),v=[];for(let g=0;g<h.length;g+=1)v[g]=au(Ua(l,h,g));return{c(){e=d("div"),t=d("div"),s=T(n),i=b(),u=d("div"),a=d("div"),_=T(c),p=b();for(let g=0;g<v.length;g+=1)v[g].c();m=Ie(),f(t,"class","span-name svelte-13li5w8"),f(t,"title",o=l[53].name),f(a,"class","span-bar svelte-13li5w8"),qt(a,"width",cn(l[53],l[4].total_ms)+"%"),ke(a,"error",l[53].error),f(u,"class","span-bar-container svelte-13li5w8"),f(e,"class","span-row svelte-13li5w8")},m(g,S){w(g,e,S),r(e,t),r(t,s),r(e,i),r(e,u),r(u,a),r(a,_),w(g,p,S);for(let C=0;C<v.length;C+=1)v[C]&&v[C].m(g,S);w(g,m,S)},p(g,S){if(S[0]&16&&n!==(n=g[53].name+"")&&B(s,n),S[0]&16&&o!==(o=g[53].name)&&f(t,"title",o),S[0]&16&&c!==(c=Lt(g[53].duration_ms)+"")&&B(_,c),S[0]&16&&qt(a,"width",cn(g[53],g[4].total_ms)+"%"),S[0]&16&&ke(a,"error",g[53].error),S[0]&16){h=pe(g[53].children||[]);let C;for(C=0;C<h.length;C+=1){const $=Ua(g,h,C);v[C]?v[C].p($,S):(v[C]=au($),v[C].c(),v[C].m(m.parentNode,m))}for(;C<v.length;C+=1)v[C].d(1);v.length=h.length}},d(g){g&&(k(e),k(p),k(m)),Me(v,g)}}}function fu(l){let e,t,n,s=pe(l[4].spans),o=[];for(let i=0;i<s.length;i+=1)o[i]=pu(Ia(l,s,i));return{c(){e=d("h4"),e.textContent="Span Details",t=b(),n=d("div");for(let i=0;i<o.length;i+=1)o[i].c();f(e,"class","svelte-13li5w8"),f(n,"class","spans-details svelte-13li5w8")},m(i,u){w(i,e,u),w(i,t,u),w(i,n,u);for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(n,null)},p(i,u){if(u[0]&16){s=pe(i[4].spans);let a;for(a=0;a<s.length;a+=1){const c=Ia(i,s,a);o[a]?o[a].p(c,u):(o[a]=pu(c),o[a].c(),o[a].m(n,null))}for(;a<o.length;a+=1)o[a].d(1);o.length=s.length}},d(i){i&&(k(e),k(t),k(n)),Me(o,i)}}}function cu(l){let e;return{c(){e=d("span"),e.textContent="ERROR",f(e,"class","error-badge svelte-13li5w8")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function _u(l){let e,t,n=l[56]+"",s,o,i,u,a=(typeof l[57]=="object"?JSON.stringify(l[57]):l[57])+"",c;return{c(){e=d("div"),t=d("span"),s=T(n),o=T(":"),i=b(),u=d("span"),c=T(a),f(t,"class","key svelte-13li5w8"),f(u,"class","value svelte-13li5w8"),f(e,"class","attr svelte-13li5w8")},m(_,p){w(_,e,p),r(e,t),r(t,s),r(t,o),r(e,i),r(e,u),r(u,c)},p(_,p){p[0]&16&&n!==(n=_[56]+"")&&B(s,n),p[0]&16&&a!==(a=(typeof _[57]=="object"?JSON.stringify(_[57]):_[57])+"")&&B(c,a)},d(_){_&&k(e)}}}function du(l){let e,t,n,s,o=l[53].error+"",i;return{c(){e=d("div"),t=d("span"),t.textContent="error:",n=b(),s=d("span"),i=T(o),f(t,"class","key svelte-13li5w8"),f(s,"class","value svelte-13li5w8"),f(e,"class","attr error svelte-13li5w8")},m(u,a){w(u,e,a),r(e,t),r(e,n),r(e,s),r(s,i)},p(u,a){a[0]&16&&o!==(o=u[53].error+"")&&B(i,o)},d(u){u&&k(e)}}}function pu(l){let e,t,n,s=l[53].kind+"",o,i,u=l[53].name+"",a,c,_=Lt(l[53].duration_ms)+"",p,m,h,v,g,S,C=l[53].error&&cu(),$=pe(Object.entries(l[53].attributes)),y=[];for(let E=0;E<$.length;E+=1)y[E]=_u(Fa(l,$,E));let D=l[53].error&&du(l);return{c(){e=d("details"),t=d("summary"),n=d("span"),o=T(s),i=b(),a=T(u),c=T(" - "),p=T(_),m=b(),C&&C.c(),h=b(),v=d("div");for(let E=0;E<y.length;E+=1)y[E].c();g=b(),D&&D.c(),S=b(),f(n,"class","span-kind svelte-13li5w8"),f(t,"class","svelte-13li5w8"),f(v,"class","span-attrs svelte-13li5w8"),f(e,"class","svelte-13li5w8")},m(E,L){w(E,e,L),r(e,t),r(t,n),r(n,o),r(t,i),r(t,a),r(t,c),r(t,p),r(t,m),C&&C.m(t,null),r(e,h),r(e,v);for(let z=0;z<y.length;z+=1)y[z]&&y[z].m(v,null);r(v,g),D&&D.m(v,null),r(e,S)},p(E,L){if(L[0]&16&&s!==(s=E[53].kind+"")&&B(o,s),L[0]&16&&u!==(u=E[53].name+"")&&B(a,u),L[0]&16&&_!==(_=Lt(E[53].duration_ms)+"")&&B(p,_),E[53].error?C||(C=cu(),C.c(),C.m(t,null)):C&&(C.d(1),C=null),L[0]&16){$=pe(Object.entries(E[53].attributes));let z;for(z=0;z<$.length;z+=1){const q=Fa(E,$,z);y[z]?y[z].p(q,L):(y[z]=_u(q),y[z].c(),y[z].m(v,g))}for(;z<y.length;z+=1)y[z].d(1);y.length=$.length}E[53].error?D?D.p(E,L):(D=du(E),D.c(),D.m(v,null)):D&&(D.d(1),D=null)},d(E){E&&k(e),C&&C.d(),Me(y,E),D&&D.d()}}}function Lv(l){let e,t,n,s,o=l[4].method+"",i,u,a,c,_=l[4].path+"",p,m,h,v=l[4].status_code+"",g,S,C,$,y=Lt(l[4].duration_ms)+"",D,E,L,z,q,O,N,M=l[4].request_id+"",G,F,A,U,R,I=l[4].timestamp+"",H,Y,Q,X,oe=l[4].spans.length+"",x,V,J,ae,W,ie=l[4].service_name&&ou(l),ue=l[4].error&&iu(l),te=l[4].user_id&&ru(l),me=pe(l[4].spans),re=[];for(let Z=0;Z<me.length;Z+=1)re[Z]=uu(Ba(l,me,Z));let le=l[4].spans.length>0&&fu(l);return{c(){var Z;e=d("div"),t=d("div"),ie&&ie.c(),n=b(),s=d("span"),i=T(o),a=b(),c=d("span"),p=T(_),m=b(),h=d("span"),g=T(v),C=b(),$=d("span"),D=T(y),E=b(),ue&&ue.c(),L=b(),z=d("div"),q=d("span"),O=T("Request ID: "),N=d("code"),G=T(M),F=b(),te&&te.c(),A=b(),U=d("span"),R=T("Time: "),H=T(I),Y=b(),Q=d("h4"),X=T("Timeline ("),x=T(oe),V=T(" spans)"),J=b(),ae=d("div");for(let K=0;K<re.length;K+=1)re[K].c();W=b(),le&&le.c(),f(s,"class",u="method "+((Z=l[4].method)==null?void 0:Z.toLowerCase())+" svelte-13li5w8"),f(c,"class","path svelte-13li5w8"),f(h,"class",S="status status-"+fn(l[4].status_code)+" svelte-13li5w8"),f($,"class","duration svelte-13li5w8"),f(t,"class","trace-header svelte-13li5w8"),f(N,"class","svelte-13li5w8"),f(z,"class","trace-meta svelte-13li5w8"),f(Q,"class","svelte-13li5w8"),f(ae,"class","spans-timeline svelte-13li5w8"),f(e,"class","trace-detail svelte-13li5w8")},m(Z,K){w(Z,e,K),r(e,t),ie&&ie.m(t,null),r(t,n),r(t,s),r(s,i),r(t,a),r(t,c),r(c,p),r(t,m),r(t,h),r(h,g),r(t,C),r(t,$),r($,D),r(e,E),ue&&ue.m(e,null),r(e,L),r(e,z),r(z,q),r(q,O),r(q,N),r(N,G),r(z,F),te&&te.m(z,null),r(z,A),r(z,U),r(U,R),r(U,H),r(e,Y),r(e,Q),r(Q,X),r(Q,x),r(Q,V),r(e,J),r(e,ae);for(let ge=0;ge<re.length;ge+=1)re[ge]&&re[ge].m(ae,null);r(e,W),le&&le.m(e,null)},p(Z,K){var ge;if(Z[4].service_name?ie?ie.p(Z,K):(ie=ou(Z),ie.c(),ie.m(t,n)):ie&&(ie.d(1),ie=null),K[0]&16&&o!==(o=Z[4].method+"")&&B(i,o),K[0]&16&&u!==(u="method "+((ge=Z[4].method)==null?void 0:ge.toLowerCase())+" svelte-13li5w8")&&f(s,"class",u),K[0]&16&&_!==(_=Z[4].path+"")&&B(p,_),K[0]&16&&v!==(v=Z[4].status_code+"")&&B(g,v),K[0]&16&&S!==(S="status status-"+fn(Z[4].status_code)+" svelte-13li5w8")&&f(h,"class",S),K[0]&16&&y!==(y=Lt(Z[4].duration_ms)+"")&&B(D,y),Z[4].error?ue?ue.p(Z,K):(ue=iu(Z),ue.c(),ue.m(e,L)):ue&&(ue.d(1),ue=null),K[0]&16&&M!==(M=Z[4].request_id+"")&&B(G,M),Z[4].user_id?te?te.p(Z,K):(te=ru(Z),te.c(),te.m(z,A)):te&&(te.d(1),te=null),K[0]&16&&I!==(I=Z[4].timestamp+"")&&B(H,I),K[0]&16&&oe!==(oe=Z[4].spans.length+"")&&B(x,oe),K[0]&16){me=pe(Z[4].spans);let we;for(we=0;we<me.length;we+=1){const Ge=Ba(Z,me,we);re[we]?re[we].p(Ge,K):(re[we]=uu(Ge),re[we].c(),re[we].m(ae,null))}for(;we<re.length;we+=1)re[we].d(1);re.length=me.length}Z[4].spans.length>0?le?le.p(Z,K):(le=fu(Z),le.c(),le.m(e,null)):le&&(le.d(1),le=null)},d(Z){Z&&k(e),ie&&ie.d(),ue&&ue.d(),te&&te.d(),Me(re,Z),le&&le.d()}}}function Pv(l){let e,t,n,s,o,i,u,a,c,_,p,m,h,v,g,S,C,$,y,D,E,L;const z=[sv,nv],q=[];function O(A,U){return A[0]==="tracing"?0:1}h=O(l),v=q[h]=z[h](l);let N=l[0]==="tracing"&&Ja(l),M=l[0]==="logs"&&eu(l),G=l[0]==="database"&&nu(l),F=l[5]&&l[4]&&su(l);return{c(){e=d("div"),t=d("div"),n=d("h2"),n.textContent="🔍 Telemetry Dashboard",s=b(),o=d("div"),i=d("button"),i.textContent="📊 Request Tracing",u=b(),a=d("button"),a.textContent="📝 Backend Logs",c=b(),_=d("button"),_.textContent="🗄️ Database",p=b(),m=d("div"),v.c(),g=b(),N&&N.c(),S=b(),M&&M.c(),C=b(),G&&G.c(),$=b(),F&&F.c(),y=Ie(),f(n,"class","svelte-13li5w8"),f(i,"class","tab svelte-13li5w8"),ke(i,"active",l[0]==="tracing"),f(a,"class","tab svelte-13li5w8"),ke(a,"active",l[0]==="logs"),f(_,"class","tab svelte-13li5w8"),ke(_,"active",l[0]==="database"),f(o,"class","tabs svelte-13li5w8"),f(m,"class","controls svelte-13li5w8"),f(t,"class","header svelte-13li5w8"),f(e,"class","telemetry svelte-13li5w8")},m(A,U){w(A,e,U),r(e,t),r(t,n),r(t,s),r(t,o),r(o,i),r(o,u),r(o,a),r(o,c),r(o,_),r(t,p),r(t,m),q[h].m(m,null),r(e,g),N&&N.m(e,null),r(e,S),M&&M.m(e,null),r(e,C),G&&G.m(e,null),w(A,$,U),F&&F.m(A,U),w(A,y,U),D=!0,E||(L=[ee(i,"click",l[34]),ee(a,"click",l[35]),ee(_,"click",l[36])],E=!0)},p(A,U){(!D||U[0]&1)&&ke(i,"active",A[0]==="tracing"),(!D||U[0]&1)&&ke(a,"active",A[0]==="logs"),(!D||U[0]&1)&&ke(_,"active",A[0]==="database");let R=h;h=O(A),h===R?q[h].p(A,U):(Se(),j(q[R],1,1,()=>{q[R]=null}),Te(),v=q[h],v?v.p(A,U):(v=q[h]=z[h](A),v.c()),P(v,1),v.m(m,null)),A[0]==="tracing"?N?(N.p(A,U),U[0]&1&&P(N,1)):(N=Ja(A),N.c(),P(N,1),N.m(e,S)):N&&(Se(),j(N,1,1,()=>{N=null}),Te()),A[0]==="logs"?M?(M.p(A,U),U[0]&1&&P(M,1)):(M=eu(A),M.c(),P(M,1),M.m(e,C)):M&&(Se(),j(M,1,1,()=>{M=null}),Te()),A[0]==="database"?G?(G.p(A,U),U[0]&1&&P(G,1)):(G=nu(A),G.c(),P(G,1),G.m(e,null)):G&&(Se(),j(G,1,1,()=>{G=null}),Te()),A[5]&&A[4]?F?(F.p(A,U),U[0]&48&&P(F,1)):(F=su(A),F.c(),P(F,1),F.m(y.parentNode,y)):F&&(Se(),j(F,1,1,()=>{F=null}),Te())},i(A){D||(P(v),P(N),P(M),P(G),P(F),D=!0)},o(A){j(v),j(N),j(M),j(G),j(F),D=!1},d(A){A&&(k(e),k($),k(y)),q[h].d(),N&&N.d(),M&&M.d(),G&&G.d(),F&&F.d(A),E=!1,Ve(L)}}}let Nv=50,Rv=200;function mu(l){switch(l){case"DEBUG":return"#888";case"INFO":return"#4CAF50";case"WARNING":return"#ff9800";case"ERROR":return"#f44336";case"CRITICAL":return"#9c27b0";default:return"#888"}}function Lt(l){return l?l<1e3?`${Math.round(l)}ms`:`${(l/1e3).toFixed(2)}s`:"-"}function vu(l){return l?new Date(l).toLocaleTimeString():"-"}function fn(l){return l?l<300?"green":l<400?"blue":l<500?"yellow":"red":"gray"}function cn(l,e){return!l.duration_ms||!e?0:Math.max(2,l.duration_ms/e*100)}function Mv(l,e,t){let n="tracing",s=!0,o=null,i=[],u=null,a=!1,c=[],_="",p="",m=24,h="",v="",g="",S=[],C=!1,$="",y="",D=!1,E=null,L=null,z=!1,q=!1,O;async function N(){t(19,z=!0);try{t(18,L=await He("GET","/admin/db/info"))}catch(qe){$e.error(`Failed to load DB info: ${qe.message}`),t(18,L=null)}t(19,z=!1)}async function M(){try{const qe=Hn();if(!qe)throw new Error("Not authenticated");if(qe.split(".").length!==3)throw console.error("Invalid token format - clearing and requiring re-login"),new Error("Session corrupted - please logout and login again");const Ee=await fetch("/api/v1/admin/db/download",{headers:{Authorization:`Bearer ${qe}`}});if(!Ee.ok)throw new Error("Download failed");const je=await Ee.blob(),ve=URL.createObjectURL(je),Pe=document.createElement("a");Pe.href=ve,Pe.download=`deploy_backup_${new Date().toISOString().slice(0,10)}.db`,document.body.appendChild(Pe),Pe.click(),document.body.removeChild(Pe),URL.revokeObjectURL(ve),$e.success("Database downloaded")}catch(qe){$e.error(`Download failed: ${qe.message}`)}}async function G(){var Je;if(!((Je=O==null?void 0:O.files)!=null&&Je[0])){$e.error("Please select a file first");return}const qe=O.files[0];if(!qe.name.endsWith(".db")){$e.error("File must have .db extension");return}if(confirm("⚠️ This will REPLACE the entire database! Are you sure?")){t(20,q=!0);try{const Ee=new FormData;Ee.append("file",qe);const je=Hn();if(!je)throw new Error("Not authenticated");if(je.split(".").length!==3)throw console.error("Invalid token format - clearing and requiring re-login"),new Error("Session corrupted - please logout and login again");const Pe=await fetch("/api/v1/admin/db/upload",{method:"POST",headers:{Authorization:`Bearer ${je}`},body:Ee});if(!Pe.ok){const Le=await Pe.json();throw new Error(Le.detail||"Upload failed")}const Ne=await Pe.json();$e.success(`Database replaced! Backup: ${Ne.backup_path||"none"}`),t(21,O.value="",O),await N()}catch(Ee){$e.error(`Upload failed: ${Ee.message}`)}t(20,q=!1)}}async function F(){t(14,C=!0);try{const qe=new URLSearchParams({limit:Rv.toString()});$&&qe.set("level",$),y&&qe.set("search",y),t(13,S=await He("GET",`/admin/logs?${qe}`))}catch(qe){$e.error(`Failed to load logs: ${qe.message}`),t(13,S=[])}t(14,C=!1)}function A(){t(17,D=!D),D?(E=setInterval(F,3e3),$e.info("Auto-refresh enabled (3s)")):(clearInterval(E),E=null,$e.info("Auto-refresh disabled"))}async function U(){try{await He("DELETE","/admin/logs"),t(13,S=[]),$e.info("Logs cleared")}catch(qe){$e.error(`Failed to clear logs: ${qe.message}`)}}async function R(){try{const qe=await He("GET","/admin/telemetry/services");t(6,c=qe.services||[]),t(7,_=qe.current||"unknown")}catch(qe){console.warn("Could not load services:",qe),t(6,c=[])}}async function I(){try{const qe=new URLSearchParams({hours:m.toString()});h&&qe.set("path_prefix",h),p&&qe.set("service_name",p),t(2,o=await He("GET",`/admin/telemetry/overview?${qe}`))}catch(qe){$e.error(`Failed to load overview: ${qe.message}`)}}async function H(){try{const qe=new URLSearchParams({hours:m.toString(),limit:Nv.toString()});h&&qe.set("path_prefix",h),v&&qe.set("min_duration_ms",v),g&&qe.set("status_class",g),p&&qe.set("service_name",p),t(3,i=await He("GET",`/admin/telemetry/requests?${qe}`))}catch(qe){$e.error(`Failed to load requests: ${qe.message}`)}}async function Y(qe){try{t(4,u=await He("GET",`/admin/telemetry/requests/${qe}`)),t(5,a=!0)}catch(Je){$e.error(`Failed to load trace: ${Je.message}`)}}async function Q(){t(1,s=!0),await Promise.all([R(),I(),H()]),t(1,s=!1)}async function X(){try{const qe=new URLSearchParams({hours:m.toString(),threshold_ms:"1000",limit:"50"});p&&qe.set("service_name",p),t(3,i=await He("GET",`/admin/telemetry/slow?${qe}`)),$e.info("Showing slow requests (>1s)")}catch(qe){$e.error(`Failed to load slow requests: ${qe.message}`)}}async function oe(qe="5xx"){try{const Je=new URLSearchParams({hours:m.toString(),status_class:qe,limit:"50"});p&&Je.set("service_name",p),t(3,i=await He("GET",`/admin/telemetry/errors?${Je}`)),$e.info(`Showing ${qe} errors`)}catch(Je){$e.error(`Failed to load errors: ${Je.message}`)}}kl(()=>(Q(),()=>{E&&clearInterval(E)}));function x(qe){t(0,n=qe),qe==="logs"&&S.length===0&&F(),qe==="database"&&!L&&N()}const V=()=>x("tracing"),J=()=>x("logs"),ae=()=>x("database");function W(){m=dt(this),t(9,m)}function ie(){$=dt(this),t(15,$)}function ue(){y=this.value,t(16,y)}const te=qe=>qe.key==="Enter"&&F(),me=()=>oe("5xx"),re=()=>oe("5xx");function le(){p=dt(this),t(8,p),t(6,c)}function Z(){h=this.value,t(10,h)}function K(){v=Kt(this.value),t(11,v)}function ge(){g=dt(this),t(12,g)}const we=qe=>Y(qe.request_id);function Ge(qe){It[qe?"unshift":"push"](()=>{O=qe,t(21,O)})}return[n,s,o,i,u,a,c,_,p,m,h,v,g,S,C,$,y,D,L,z,q,O,N,M,G,F,A,U,H,Y,Q,X,oe,x,V,J,ae,W,ie,ue,te,me,re,le,Z,K,ge,we,Ge,()=>t(5,a=!1)]}class Av extends Ct{constructor(e){super(),$t(this,e,Mv,Pv,wt,{},null,[-1,-1,-1])}}function jv(l){let e,t,n,s,o,i,u,a,c,_,p,m,h,v,g,S,C,$,y,D,E,L,z,q,O;n=new o1({props:{title:"Deploy Dashboard"}}),u=new g1({props:{tabs:l[10],active:l[1],scrollable:!0}}),u.$on("change",l[12]);let N=l[9]&&hu(l),M={};m=new q_({props:M}),l[17](m),g=new Ad({});let G={};$=new Mp({props:G}),l[18]($);let F={};E=new lv({props:F}),l[19](E);const A=[Uv,Bv,Fv],U=[];function R(I,H){return I[1]==="services"?0:I[1]==="settings"?1:I[1]==="telemetry"&&I[3]?2:-1}return~(z=R(l))&&(q=U[z]=A[z](l)),{c(){e=d("div"),t=d("div"),_e(n.$$.fragment),s=b(),o=d("div"),o.textContent=`${Gv}`,i=b(),_e(u.$$.fragment),a=b(),N&&N.c(),c=b(),_=d("main"),p=d("div"),_e(m.$$.fragment),h=b(),v=d("div"),_e(g.$$.fragment),S=b(),C=d("div"),_e($.$$.fragment),y=b(),D=d("div"),_e(E.$$.fragment),L=b(),q&&q.c(),f(o,"class","version-badge svelte-1jnwr0w"),f(o,"title","Build timestamp"),ke(p,"hidden",l[1]!=="infra"),ke(v,"hidden",l[1]!=="deploy"),ke(C,"hidden",l[1]!=="deployments"),ke(D,"hidden",l[1]!=="architecture"),f(_,"class","content glass"),f(t,"class","container"),f(e,"class","app")},m(I,H){w(I,e,H),r(e,t),fe(n,t,null),r(t,s),r(t,o),r(t,i),fe(u,t,null),r(t,a),N&&N.m(t,null),r(t,c),r(t,_),r(_,p),fe(m,p,null),r(_,h),r(_,v),fe(g,v,null),r(_,S),r(_,C),fe($,C,null),r(_,y),r(_,D),fe(E,D,null),r(_,L),~z&&U[z].m(_,null),O=!0},p(I,H){const Y={};H&1024&&(Y.tabs=I[10]),H&2&&(Y.active=I[1]),u.$set(Y),I[9]?N?(N.p(I,H),H&512&&P(N,1)):(N=hu(I),N.c(),P(N,1),N.m(t,c)):N&&(Se(),j(N,1,1,()=>{N=null}),Te());const Q={};m.$set(Q),(!O||H&2)&&ke(p,"hidden",I[1]!=="infra"),(!O||H&2)&&ke(v,"hidden",I[1]!=="deploy");const X={};$.$set(X),(!O||H&2)&&ke(C,"hidden",I[1]!=="deployments");const oe={};E.$set(oe),(!O||H&2)&&ke(D,"hidden",I[1]!=="architecture");let x=z;z=R(I),z!==x&&(q&&(Se(),j(U[x],1,1,()=>{U[x]=null}),Te()),~z?(q=U[z],q||(q=U[z]=A[z](I),q.c()),P(q,1),q.m(_,null)):q=null)},i(I){O||(P(n.$$.fragment,I),P(u.$$.fragment,I),P(N),P(m.$$.fragment,I),P(g.$$.fragment,I),P($.$$.fragment,I),P(E.$$.fragment,I),P(q),O=!0)},o(I){j(n.$$.fragment,I),j(u.$$.fragment,I),j(N),j(m.$$.fragment,I),j(g.$$.fragment,I),j($.$$.fragment,I),j(E.$$.fragment,I),j(q),O=!1},d(I){I&&k(e),ce(n),ce(u),N&&N.d(),l[17](null),ce(m),ce(g),l[18](null),ce($),l[19](null),ce(E),~z&&U[z].d()}}}function Ov(l){let e,t;const n=[{title:"Deploy Dashboard"},{subtitle:"Sign in to manage your infrastructure"},C1.internal,{allowSignup:!0}];let s={};for(let o=0;o<n.length;o+=1)s=bu(s,n[o]);return e=new Hc({props:s}),e.$on("success",l[11]),{c(){_e(e.$$.fragment)},m(o,i){fe(e,o,i),t=!0},p(o,i){const u={};e.$set(u)},i(o){t||(P(e.$$.fragment,o),t=!0)},o(o){j(e.$$.fragment,o),t=!1},d(o){ce(e,o)}}}function Iv(l){let e;return{c(){e=d("div"),e.innerHTML='<div class="spinner"></div>',f(e,"class","loading-screen")},m(t,n){w(t,e,n)},p:be,i:be,o:be,d(t){t&&k(e)}}}function hu(l){let e,t;return e=new A1({props:{showTail:l[8],showContainer:l[7]}}),e.$on("change",l[13]),e.$on("refresh",l[14]),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const o={};s&256&&(o.showTail=n[8]),s&128&&(o.showContainer=n[7]),e.$set(o)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){j(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function Fv(l){let e,t;return e=new Av({}),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){j(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function Bv(l){let e,t;return e=new zm({}),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){j(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function Uv(l){let e,t;return e=new Qp({}),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){j(e.$$.fragment,n),t=!1},d(n){ce(e,n)}}}function Hv(l){let e,t,n,s,o,i;e=new $1({});const u=[Iv,Ov,jv],a=[];function c(_,p){return _[0]?!_[2].token||!_[2].user?1:2:0}return n=c(l),s=a[n]=u[n](l),{c(){_e(e.$$.fragment),t=b(),s.c(),o=Ie()},m(_,p){fe(e,_,p),w(_,t,p),a[n].m(_,p),w(_,o,p),i=!0},p(_,[p]){let m=n;n=c(_),n===m?a[n].p(_,p):(Se(),j(a[m],1,1,()=>{a[m]=null}),Te(),s=a[n],s?s.p(_,p):(s=a[n]=u[n](_),s.c()),P(s,1),s.m(o.parentNode,o))},i(_){i||(P(e.$$.fragment,_),P(s),i=!0)},o(_){j(e.$$.fragment,_),j(s),i=!1},d(_){_&&(k(t),k(o)),ce(e,_),a[n].d(_)}}}const Gv="2026-01-22 06:52 UTC";function Wv(l,e,t){let n,s,o,i,u,a,c,_;pt(l,Fs,M=>t(1,u=M)),pt(l,An,M=>t(16,a=M)),pt(l,ht,M=>t(2,c=M)),pt(l,gc,M=>t(3,_=M));let p=!1,m,h,v,g=null;const S=[{id:"infra",label:"Infrastructure"},{id:"deploy",label:"Deploy"},{id:"deployments",label:"Deployments"},{id:"architecture",label:"Architecture"},{id:"services",label:"Services"},{id:"settings",label:"Settings"}],C=[{id:"telemetry",label:"🔍 Telemetry",admin:!0}];kl(async()=>{const M=await $();t(0,p=!0),M&&(t(15,g=a),y())});async function $(){const M=c;if(!M.token||M.token.trim()==="")return!1;try{const G=await El("GET","/auth/me");return ht.setUser(G),!0}catch{return ht.logout(),!1}}function y(){Xt.refresh(),jn.refresh(),pn.refresh(),bl.refresh()}async function D(M){const{user:G,token:F}=M.detail;Sn(F),ht.setUser(G),t(15,g=a),y()}function E(M){Fs.set(M.detail)}function L(){z()}function z(){switch(u){case"infra":m==null||m.refresh(),Xt.refresh();break;case"deployments":h==null||h.refresh();break;case"architecture":v==null||v.refresh();break}}function q(M){It[M?"unshift":"push"](()=>{m=M,t(4,m)})}function O(M){It[M?"unshift":"push"](()=>{h=M,t(5,h)})}function N(M){It[M?"unshift":"push"](()=>{v=M,t(6,v)})}return l.$$.update=()=>{l.$$.dirty&8&&t(10,n=_?[...S,...C]:S),l.$$.dirty&2&&t(9,s=u==="deployments"),l.$$.dirty&98309&&p&&c.user&&a&&a!==g&&(t(15,g=a),y())},t(8,o=!1),t(7,i=!1),[p,u,c,_,m,h,v,i,o,s,n,D,E,L,z,g,a,q,O,N]}class Vv extends Ct{constructor(e){super(),$t(this,e,Wv,Hv,wt,{})}}new Vv({target:document.getElementById("app")});
