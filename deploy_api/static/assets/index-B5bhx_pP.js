var Kc=Object.defineProperty;var Qc=(l,e,t)=>e in l?Kc(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t;var cl=(l,e,t)=>Qc(l,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();function be(){}const Pa=l=>l;function Zc(l,e){for(const t in e)l[t]=e[t];return l}function La(l){return l()}function zn(){return Object.create(null)}function Ue(l){l.forEach(La)}function sn(l){return typeof l=="function"}function $t(l,e){return l!=l?e==e:l!==e||l&&typeof l=="object"||typeof l=="function"}function Xc(l){return Object.keys(l).length===0}function kn(l,...e){if(l==null){for(const n of e)n(void 0);return be}const t=l.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function Il(l){let e;return kn(l,t=>e=t)(),e}function _t(l,e,t){l.$$.on_destroy.push(kn(e,t))}function tl(l,e,t,n){if(l){const s=Na(l,e,t,n);return l[0](s)}}function Na(l,e,t,n){return l[1]&&n?Zc(t.ctx.slice(),l[1](n(e))):t.ctx}function ll(l,e,t,n){if(l[2]&&n){const s=l[2](n(t));if(e.dirty===void 0)return s;if(typeof s=="object"){const i=[],o=Math.max(e.dirty.length,s.length);for(let a=0;a<o;a+=1)i[a]=e.dirty[a]|s[a];return i}return e.dirty|s}return e.dirty}function nl(l,e,t,n,s,i){if(s){const o=Na(e,t,n,i);l.p(o,s)}}function sl(l){if(l.ctx.length>32){const e=[],t=l.ctx.length/32;for(let n=0;n<t;n++)e[n]=-1;return e}return-1}function Ra(l){const e={};for(const t in l)e[t]=!0;return e}function En(l){const e=typeof l=="string"&&l.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[l,"px"]}const Ma=typeof window<"u";let xc=Ma?()=>window.performance.now():()=>Date.now(),$n=Ma?l=>requestAnimationFrame(l):be;const El=new Set;function Aa(l){El.forEach(e=>{e.c(l)||(El.delete(e),e.f())}),El.size!==0&&$n(Aa)}function eu(l){let e;return El.size===0&&$n(Aa),{promise:new Promise(t=>{El.add(e={c:l,f:t})}),abort(){El.delete(e)}}}const Oa=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function r(l,e){l.appendChild(e)}function ja(l){if(!l)return document;const e=l.getRootNode?l.getRootNode():l.ownerDocument;return e&&e.host?e:l.ownerDocument}function tu(l){const e=_("style");return e.textContent="/* empty */",lu(ja(l),e),e.sheet}function lu(l,e){return r(l.head||l,e),e.sheet}function w(l,e,t){l.insertBefore(e,t||null)}function $(l){l.parentNode&&l.parentNode.removeChild(l)}function Ee(l,e){for(let t=0;t<l.length;t+=1)l[t]&&l[t].d(e)}function _(l){return document.createElement(l)}function nu(l){return document.createElementNS("http://www.w3.org/2000/svg",l)}function T(l){return document.createTextNode(l)}function b(){return T(" ")}function Ie(){return T("")}function le(l,e,t,n){return l.addEventListener(e,t,n),()=>l.removeEventListener(e,t,n)}function su(l){return function(e){return e.preventDefault(),l.call(this,e)}}function Pn(l){return function(e){return e.stopPropagation(),l.call(this,e)}}function u(l,e,t){t==null?l.removeAttribute(e):l.getAttribute(e)!==t&&l.setAttribute(e,t)}function on(l){let e;return{p(...t){e=t,e.forEach(n=>l.push(n))},r(){e.forEach(t=>l.splice(l.indexOf(t),1))}}}function Ht(l){return l===""?null:+l}function ou(l){return Array.from(l.childNodes)}function j(l,e){e=""+e,l.data!==e&&(l.data=e)}function ne(l,e){l.value=e??""}function Rt(l,e,t,n){t==null?l.style.removeProperty(e):l.style.setProperty(e,t,"")}function ze(l,e,t){for(let n=0;n<l.options.length;n+=1){const s=l.options[n];if(s.__value===e){s.selected=!0;return}}(!t||e!==void 0)&&(l.selectedIndex=-1)}function pt(l){const e=l.querySelector(":checked");return e&&e.__value}function $e(l,e,t){l.classList.toggle(e,!!t)}function Fa(l,e,{bubbles:t=!1,cancelable:n=!1}={}){return new CustomEvent(l,{detail:e,bubbles:t,cancelable:n})}class iu{constructor(e=!1){cl(this,"is_svg",!1);cl(this,"e");cl(this,"n");cl(this,"t");cl(this,"a");this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,n=null){this.e||(this.is_svg?this.e=nu(t.nodeName):this.e=_(t.nodeType===11?"TEMPLATE":t.nodeName),this.t=t.tagName!=="TEMPLATE"?t:t.content,this.c(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)w(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach($)}}const Zl=new Map;let Xl=0;function ru(l){let e=5381,t=l.length;for(;t--;)e=(e<<5)-e^l.charCodeAt(t);return e>>>0}function au(l,e){const t={stylesheet:tu(e),rules:{}};return Zl.set(l,t),t}function Ln(l,e,t,n,s,i,o,a=0){const c=16.666/n;let f=`{
`;for(let C=0;C<=1;C+=c){const k=e+(t-e)*i(C);f+=C*100+`%{${o(k,1-k)}}
`}const p=f+`100% {${o(t,1-t)}}
}`,d=`__svelte_${ru(p)}_${a}`,v=ja(l),{stylesheet:h,rules:m}=Zl.get(v)||au(v,l);m[d]||(m[d]=!0,h.insertRule(`@keyframes ${d} ${p}`,h.cssRules.length));const g=l.style.animation||"";return l.style.animation=`${g?`${g}, `:""}${d} ${n}ms linear ${s}ms 1 both`,Xl+=1,d}function cu(l,e){const t=(l.style.animation||"").split(", "),n=t.filter(e?i=>i.indexOf(e)<0:i=>i.indexOf("__svelte")===-1),s=t.length-n.length;s&&(l.style.animation=n.join(", "),Xl-=s,Xl||uu())}function uu(){$n(()=>{Xl||(Zl.forEach(l=>{const{ownerNode:e}=l.stylesheet;e&&$(e)}),Zl.clear())})}let jl;function Ol(l){jl=l}function wn(){if(!jl)throw new Error("Function called outside component initialization");return jl}function hl(l){wn().$$.on_mount.push(l)}function fu(l){wn().$$.on_destroy.push(l)}function Bl(){const l=wn();return(e,t,{cancelable:n=!1}={})=>{const s=l.$$.callbacks[e];if(s){const i=Fa(e,t,{cancelable:n});return s.slice().forEach(o=>{o.call(l,i)}),!i.defaultPrevented}return!0}}function xl(l,e){const t=l.$$.callbacks[e.type];t&&t.slice().forEach(n=>n.call(this,e))}const Dl=[],Lt=[];let Pl=[];const mn=[],pu=Promise.resolve();let hn=!1;function _u(){hn||(hn=!0,pu.then(Ia))}function Xe(l){Pl.push(l)}function ul(l){mn.push(l)}const _n=new Set;let Cl=0;function Ia(){if(Cl!==0)return;const l=jl;do{try{for(;Cl<Dl.length;){const e=Dl[Cl];Cl++,Ol(e),du(e.$$)}}catch(e){throw Dl.length=0,Cl=0,e}for(Ol(null),Dl.length=0,Cl=0;Lt.length;)Lt.pop()();for(let e=0;e<Pl.length;e+=1){const t=Pl[e];_n.has(t)||(_n.add(t),t())}Pl.length=0}while(Dl.length);for(;mn.length;)mn.pop()();hn=!1,_n.clear(),Ol(l)}function du(l){if(l.fragment!==null){l.update(),Ue(l.before_update);const e=l.dirty;l.dirty=[-1],l.fragment&&l.fragment.p(l.ctx,e),l.after_update.forEach(Xe)}}function vu(l){const e=[],t=[];Pl.forEach(n=>l.indexOf(n)===-1?e.push(n):t.push(n)),t.forEach(n=>n()),Pl=e}let Al;function mu(){return Al||(Al=Promise.resolve(),Al.then(()=>{Al=null})),Al}function dn(l,e,t){l.dispatchEvent(Fa(`${e?"intro":"outro"}${t}`))}const Yl=new Set;let Xt;function Te(){Xt={r:0,c:[],p:Xt}}function De(){Xt.r||Ue(Xt.c),Xt=Xt.p}function L(l,e){l&&l.i&&(Yl.delete(l),l.i(e))}function R(l,e,t,n){if(l&&l.o){if(Yl.has(l))return;Yl.add(l),Xt.c.push(()=>{Yl.delete(l),n&&(t&&l.d(1),n())}),l.o(e)}else n&&n()}const hu={duration:0};function zl(l,e,t,n){let i=e(l,t,{direction:"both"}),o=n?0:1,a=null,c=null,f=null,p;function d(){f&&cu(l,f)}function v(m,g){const C=m.b-o;return g*=Math.abs(C),{a:o,b:m.b,d:C,duration:g,start:m.start,end:m.start+g,group:m.group}}function h(m){const{delay:g=0,duration:C=300,easing:k=Pa,tick:y=be,css:S}=i||hu,D={start:xc()+g,b:m};m||(D.group=Xt,Xt.r+=1),"inert"in l&&(m?p!==void 0&&(l.inert=p):(p=l.inert,l.inert=!0)),a||c?c=D:(S&&(d(),f=Ln(l,o,m,C,g,k,S)),m&&y(0,1),a=v(D,C),Xe(()=>dn(l,m,"start")),eu(z=>{if(c&&z>c.start&&(a=v(c,C),c=null,dn(l,a.b,"start"),S&&(d(),f=Ln(l,o,a.b,a.duration,0,k,i.css))),a){if(z>=a.end)y(o=a.b,1-o),dn(l,a.b,"end"),c||(a.b?d():--a.group.r||Ue(a.group.c)),a=null;else if(z>=a.start){const E=z-a.start;o=a.a+a.d*k(E/a.duration),y(o,1-o)}}return!!(a||c)}))}return{run(m){sn(i)?mu().then(()=>{i=i({direction:m?"in":"out"}),h(m)}):h(m)},end(){d(),a=c=null}}}function ve(l){return(l==null?void 0:l.length)!==void 0?l:Array.from(l)}function Ba(l,e){R(l,1,1,()=>{e.delete(l.key)})}function Ua(l,e,t,n,s,i,o,a,c,f,p,d){let v=l.length,h=i.length,m=v;const g={};for(;m--;)g[l[m].key]=m;const C=[],k=new Map,y=new Map,S=[];for(m=h;m--;){const q=d(s,i,m),N=t(q);let B=o.get(N);B?S.push(()=>B.p(q,e)):(B=f(N,q),B.c()),k.set(N,C[m]=B),N in g&&y.set(N,Math.abs(m-g[N]))}const D=new Set,z=new Set;function E(q){L(q,1),q.m(a,p),o.set(q.key,q),p=q.first,h--}for(;v&&h;){const q=C[h-1],N=l[v-1],B=q.key,O=N.key;q===N?(p=q.first,v--,h--):k.has(O)?!o.has(B)||D.has(B)?E(q):z.has(O)?v--:y.get(B)>y.get(O)?(z.add(B),E(q)):(D.add(O),v--):(c(N,o),v--)}for(;v--;){const q=l[v];k.has(q.key)||c(q,o)}for(;h;)E(C[h-1]);return Ue(S),C}function fl(l,e,t){const n=l.$$.props[e];n!==void 0&&(l.$$.bound[n]=t,t(l.$$.ctx[n]))}function _e(l){l&&l.c()}function fe(l,e,t){const{fragment:n,after_update:s}=l.$$;n&&n.m(e,t),Xe(()=>{const i=l.$$.on_mount.map(La).filter(sn);l.$$.on_destroy?l.$$.on_destroy.push(...i):Ue(i),l.$$.on_mount=[]}),s.forEach(Xe)}function pe(l,e){const t=l.$$;t.fragment!==null&&(vu(t.after_update),Ue(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function gu(l,e){l.$$.dirty[0]===-1&&(Dl.push(l),_u(),l.$$.dirty.fill(0)),l.$$.dirty[e/31|0]|=1<<e%31}function wt(l,e,t,n,s,i,o=null,a=[-1]){const c=jl;Ol(l);const f=l.$$={fragment:null,ctx:[],props:i,update:be,not_equal:s,bound:zn(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:zn(),dirty:a,skip_bound:!1,root:e.target||c.$$.root};o&&o(f.root);let p=!1;if(f.ctx=t?t(l,e.props||{},(d,v,...h)=>{const m=h.length?h[0]:v;return f.ctx&&s(f.ctx[d],f.ctx[d]=m)&&(!f.skip_bound&&f.bound[d]&&f.bound[d](m),p&&gu(l,d)),v}):[],f.update(),p=!0,Ue(f.before_update),f.fragment=n?n(f.ctx):!1,e.target){if(e.hydrate){const d=ou(e.target);f.fragment&&f.fragment.l(d),d.forEach($)}else f.fragment&&f.fragment.c();e.intro&&L(l.$$.fragment),fe(l,e.target,e.anchor),Ia()}Ol(c)}class yt{constructor(){cl(this,"$$");cl(this,"$$set")}$destroy(){pe(this,1),this.$destroy=be}$on(e,t){if(!sn(t))return be;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const s=n.indexOf(t);s!==-1&&n.splice(s,1)}}$set(e){this.$$set&&!Xc(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const bu="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(bu);const Sl=[];function ku(l,e){return{subscribe:ol(l,e).subscribe}}function ol(l,e=be){let t;const n=new Set;function s(a){if($t(l,a)&&(l=a,t)){const c=!Sl.length;for(const f of n)f[1](),Sl.push(f,l);if(c){for(let f=0;f<Sl.length;f+=2)Sl[f][0](Sl[f+1]);Sl.length=0}}}function i(a){s(a(l))}function o(a,c=be){const f=[a,c];return n.add(f),n.size===1&&(t=e(s,i)||be),a(l),()=>{n.delete(f),n.size===0&&t&&(t(),t=null)}}return{set:s,update:i,subscribe:o}}function gl(l,e,t){const n=!Array.isArray(l),s=n?[l]:l;if(!s.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const i=e.length<2;return ku(t,(o,a)=>{let c=!1;const f=[];let p=0,d=be;const v=()=>{if(p)return;d();const m=e(n?f[0]:f,o,a);i?o(m):d=sn(m)?m:be},h=s.map((m,g)=>kn(m,C=>{f[g]=C,p&=~(1<<g),c&&v()},()=>{p|=1<<g}));return c=!0,v(),function(){Ue(h),d(),c=!1}})}function yn(l,e,t=7){const n=new Date(Date.now()+t*864e5).toUTCString();document.cookie=`${l}=${encodeURIComponent(e)}; expires=${n}; path=/; SameSite=Strict`}function Cn(l){const e=document.cookie.match(new RegExp("(^| )"+l+"=([^;]+)"));return e?decodeURIComponent(e[2]):null}function Nn(l){document.cookie=`${l}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; SameSite=Strict`}function $u(){const l=Cn("jwt_token"),{subscribe:e,set:t,update:n}=ol({token:l,user:null,loading:!1,error:null});return{subscribe:e,setToken(s){yn("jwt_token",s,7),n(i=>({...i,token:s,error:null}))},setUser(s){n(i=>({...i,user:s}))},setError(s){n(i=>({...i,error:s,loading:!1}))},setLoading(s){n(i=>({...i,loading:s}))},logout(){Nn("jwt_token"),Nn("do_token_local"),t({token:null,user:null,loading:!1,error:null})},clearError(){n(s=>({...s,error:null}))}}}const Nt=$u();gl(Nt,l=>!!l.token&&!!l.user);const wu=["vergnetp@yahoo.fr"],yu=gl(Nt,l=>{var e;return(e=l.user)!=null&&e.email?wu.includes(l.user.email.toLowerCase()):!1});function Gt(){return Cn("do_token_local")}function Cu(l){yn("do_token_local",l,30)}function gn(){return Cn("cf_token_local")}function Su(l){yn("cf_token_local",l,30)}function Tu(){const{subscribe:l,update:e}=ol([]);let t=0;function n(i,o="info",a=3e3){const c={id:++t,message:i,type:o};return e(f=>[...f,c]),a>0&&setTimeout(()=>s(c.id),a),c.id}function s(i){e(o=>o.filter(a=>a.id!==i))}return{subscribe:l,success:(i,o)=>n(i,"success",o),error:(i,o)=>n(i,"error",o),warning:(i,o)=>n(i,"warning",o),info:(i,o)=>n(i,"info",o),remove:s}}const Ce=Tu(),Ha="/api/v1",Ga=["/infra/servers","/infra/snapshots","/infra/setup","/infra/deploy","/infra/registry","/infra/agent","/infra/architecture","/infra/fleet","/infra/projects","/infra/containers","/infra/services","/infra/deployments"];function Wa(l,e={}){const t=Il(Nt),n={"Content-Type":"application/json"},s=l.startsWith("/auth/login")||l.startsWith("/auth/register");t.token&&t.token.trim()!==""&&!s&&!e.skipAuth&&(n.Authorization=`Bearer ${t.token}`);let i=Ha+l;if(!e.skipDoToken&&(l.startsWith("/infra/")||Ga.some(a=>l.startsWith(a)))){const a=Gt();if(!a)return{error:"DO token not set",url:null,headers:null};const c=i.includes("?")?"&":"?";i+=`${c}do_token=${encodeURIComponent(a)}`}return{url:i,headers:n,error:null}}async function Sn(l){if(l.status===401){let e="Authentication failed";try{const n=await l.json();e=n.detail||n.error||n.message||e}catch{}throw Il(Nt).token&&(Nt.logout(),e="Session expired - please login again"),new Error(e)}if(!l.ok){const e=await l.json().catch(()=>({detail:"Request failed"}));throw new Error(e.detail||e.error||e.message||"Request failed")}}async function Fe(l,e,t=null,n={}){const{url:s,headers:i,error:o}=Wa(e,n);if(o)return console.debug(`Skipping ${e} - ${o}`),null;const a={method:l,headers:i};t&&(a.body=JSON.stringify(t));const c=await fetch(s,a);if(await Sn(c),c.status===204)return null;const f=await c.json();return f&&f.success===!0&&f.data!==void 0?f.data:f}async function Kl(l,e,t=null,n,s={}){const{url:i,headers:o,error:a}=Wa(e,s);if(a)throw new Error(a);const c={method:l,headers:o};t&&(c.body=JSON.stringify(t));const f=await fetch(i,c);await Sn(f);const p=f.body.getReader(),d=new TextDecoder;let v="";for(;;){const{done:h,value:m}=await p.read();if(h)break;v+=d.decode(m,{stream:!0});const g=v.split(`
`);v=g.pop()||"";for(const C of g)if(C.startsWith("data: "))try{const k=JSON.parse(C.slice(6));n(k)}catch{}}}async function Du(l,e,t,n={}){const s=Il(Nt);let i=Ha+l;if(!n.skipDoToken&&Ga.some(v=>l.startsWith(v))){const v=Gt();if(!v)throw new Error("DO token not set");const h=i.includes("?")?"&":"?";i+=`${h}do_token=${encodeURIComponent(v)}`}const a={};s.token&&(a.Authorization=`Bearer ${s.token}`);const c=await fetch(i,{method:"POST",headers:a,body:e});await Sn(c);const f=c.body.getReader(),p=new TextDecoder;let d="";for(;;){const{done:v,value:h}=await f.read();if(v)break;d+=p.decode(h,{stream:!0});const m=d.split(`
`);d=m.pop()||"";for(const g of m)if(g.startsWith("data: "))try{const C=JSON.parse(g.slice(6));t(C)}catch{}}}async function qu(){const l=Il(Nt);if(!l.token||l.token.trim()==="")return!1;try{const e=await Fe("GET","/auth/me");return Nt.setUser(e),!0}catch{return Nt.logout(),!1}}function Va(l,e,t={}){const{refreshInterval:n=0,revalidateOnFocus:s=!0,revalidateOnMount:i=!0,dedupingInterval:o=2e3,initialData:a=null}=t,c=ol({data:a,error:null,loading:!1,lastFetched:null});let f=0,p=null,d=null,v=0;async function h(S=!1){const D=Date.now();return!S&&p&&D-f<o||(f=D,c.update(z=>{var E;return{...z,loading:z.data===null||((E=z.data)==null?void 0:E.length)===0}}),p=(async()=>{try{const z=await e();return c.set({data:z,error:null,loading:!1,lastFetched:new Date}),z}catch(z){throw c.update(E=>({...E,error:z.message||"Fetch failed",loading:!1})),z}finally{p=null}})()),p}function m(){document.visibilityState==="visible"&&s&&h()}function g(){n>0&&!d&&(d=setInterval(()=>h(),n))}function C(){d&&(clearInterval(d),d=null)}const{subscribe:k}=c;function y(S){v++,v===1&&(s&&typeof document<"u"&&document.addEventListener("visibilitychange",m),i&&h(),g());const D=k(S);return()=>{D(),v--,v===0&&(typeof document<"u"&&document.removeEventListener("visibilitychange",m),C())}}return{subscribe:y,refresh:()=>h(!0),mutate:S=>c.update(D=>({...D,data:S})),get:()=>Il(c)}}function Tn(l,e={}){const{transform:t=s=>s,...n}=e;return Va(l,async()=>{const s=await Fe("GET",l);return t(s)},n)}function zu(l,e={}){const{transform:t=c=>c,...n}=e,s=ol({data:null,error:null,loading:!1,lastFetched:null});let i=null,o=null;async function a(c){const f=l(c);if(!f){s.set({data:null,error:null,loading:!1,lastFetched:null});return}return o&&JSON.stringify(c)===JSON.stringify(i)||(i=c,s.update(p=>({...p,loading:!0})),o=(async()=>{try{const p=await Fe("GET",f),d=t(p);return s.set({data:d,error:null,loading:!1,lastFetched:new Date}),d}catch(p){throw s.update(d=>({...d,error:p.message||"Fetch failed",loading:!1})),p}finally{o=null}})()),o}return{subscribe:s.subscribe,fetch:a,refresh:()=>i&&a(i),clear:()=>{i=null,s.set({data:null,error:null,loading:!1,lastFetched:null})}}}const Rn=ol("infra");function Eu(){const{subscribe:l,set:e}=ol(null);return typeof window<"u"&&e(Gt()),{subscribe:l,refresh(){e(Gt())},set(t){e(t)}}}const Ja=Eu(),ql=ol({project:"",env:"",server:"",container:"",range:"30d",tail:!1}),Kt=Tn("/infra/servers",{transform:l=>(l==null?void 0:l.servers)||l||[],refreshInterval:6e4,revalidateOnFocus:!0,initialData:[]}),Dn=Va("/infra/projects",async()=>{const l=Gt();if(!l)return[];const e=await Fe("GET",`/infra/projects?do_token=${l}`);return(e==null?void 0:e.projects)||[]},{refreshInterval:12e4,initialData:[]}),rn=Tn("/infra/snapshots",{transform:l=>(l==null?void 0:l.snapshots)||[],refreshInterval:6e4,initialData:[]}),ml=Tn("/infra/deployments/history",{transform:l=>(l==null?void 0:l.deployments)||[],refreshInterval:3e4,initialData:[]}),bn=zu(l=>l!=null&&l.server?`/infra/agent/${l.server}/containers`:null,{transform:l=>{const e=(l==null?void 0:l.containers)||l||[];return(Array.isArray(e)?e:[]).map(t=>({id:t.ID||t.Id||t.id,name:t.Names||t.Name||t.name||"unknown",image:t.Image||t.image,status:t.Status||t.State||t.status,state:t.State||t.state}))}}),Fl=gl(Kt,l=>(l==null?void 0:l.data)||[]),qn=gl(Dn,l=>(l==null?void 0:l.data)||[]),Pu=gl(rn,l=>(l==null?void 0:l.data)||[]),Ya=gl(ml,l=>(l==null?void 0:l.data)||[]),Lu=gl(bn,l=>(l==null?void 0:l.data)||[]),Nu="1.9.7";function Ru(){const l=typeof localStorage<"u"&&localStorage.getItem("theme")||"dark",{subscribe:e,set:t}=ol(l);return typeof document<"u"&&document.documentElement.setAttribute("data-theme",l),{subscribe:e,set(n){typeof localStorage<"u"&&localStorage.setItem("theme",n),typeof document<"u"&&document.documentElement.setAttribute("data-theme",n),t(n)}}}const vn=Ru();function Mn(l){let e;return{c(){e=_("span"),u(e,"class","brand-dot svelte-16ksbsk")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function An(l){let e,t,n,s,i,o;return{c(){e=_("div"),t=_("button"),t.textContent="Sign In",n=b(),s=_("button"),s.textContent="Sign Up",u(t,"class","tab svelte-16ksbsk"),$e(t,"active",l[4]==="login"),u(s,"class","tab svelte-16ksbsk"),$e(s,"active",l[4]==="signup"),u(e,"class","tabs svelte-16ksbsk")},m(a,c){w(a,e,c),r(e,t),r(e,n),r(e,s),i||(o=[le(t,"click",l[16]),le(s,"click",l[17])],i=!0)},p(a,c){c&16&&$e(t,"active",a[4]==="login"),c&16&&$e(s,"active",a[4]==="signup")},d(a){a&&$(e),i=!1,Ue(o)}}}function Mu(l){let e,t,n,s,i,o,a,c,f,p,d,v,h,m,g,C,k,y,S;function D(q,N){return q[5]?ju:Ou}let z=D(l),E=z(l);return{c(){e=_("form"),t=_("div"),n=_("label"),n.textContent="Email",s=b(),i=_("input"),o=b(),a=_("div"),c=_("label"),c.textContent="Password",f=b(),p=_("input"),d=b(),v=_("div"),h=_("label"),h.textContent="Confirm Password",m=b(),g=_("input"),C=b(),k=_("button"),E.c(),u(n,"for","signup-email"),u(n,"class","svelte-16ksbsk"),u(i,"type","email"),u(i,"id","signup-email"),u(i,"placeholder","you@example.com"),i.required=!0,i.disabled=l[5],u(i,"class","svelte-16ksbsk"),u(t,"class","form-group svelte-16ksbsk"),u(c,"for","signup-password"),u(c,"class","svelte-16ksbsk"),u(p,"type","password"),u(p,"id","signup-password"),u(p,"placeholder","••••••••"),p.required=!0,p.disabled=l[5],u(p,"class","svelte-16ksbsk"),u(a,"class","form-group svelte-16ksbsk"),u(h,"for","signup-confirm"),u(h,"class","svelte-16ksbsk"),u(g,"type","password"),u(g,"id","signup-confirm"),u(g,"placeholder","••••••••"),g.required=!0,g.disabled=l[5],u(g,"class","svelte-16ksbsk"),u(v,"class","form-group svelte-16ksbsk"),u(k,"type","submit"),u(k,"class","btn btn-primary btn-full svelte-16ksbsk"),k.disabled=l[5]},m(q,N){w(q,e,N),r(e,t),r(t,n),r(t,s),r(t,i),ne(i,l[9]),r(e,o),r(e,a),r(a,c),r(a,f),r(a,p),ne(p,l[10]),r(e,d),r(e,v),r(v,h),r(v,m),r(v,g),ne(g,l[11]),r(e,C),r(e,k),E.m(k,null),y||(S=[le(i,"input",l[20]),le(p,"input",l[21]),le(g,"input",l[22]),le(e,"submit",l[14])],y=!0)},p(q,N){N&32&&(i.disabled=q[5]),N&512&&i.value!==q[9]&&ne(i,q[9]),N&32&&(p.disabled=q[5]),N&1024&&p.value!==q[10]&&ne(p,q[10]),N&32&&(g.disabled=q[5]),N&2048&&g.value!==q[11]&&ne(g,q[11]),z!==(z=D(q))&&(E.d(1),E=z(q),E&&(E.c(),E.m(k,null))),N&32&&(k.disabled=q[5])},d(q){q&&$(e),E.d(),y=!1,Ue(S)}}}function Au(l){let e,t,n,s,i,o,a,c,f,p,d,v,h,m;function g(y,S){return y[5]?Iu:Fu}let C=g(l),k=C(l);return{c(){e=_("form"),t=_("div"),n=_("label"),n.textContent="Email",s=b(),i=_("input"),o=b(),a=_("div"),c=_("label"),c.textContent="Password",f=b(),p=_("input"),d=b(),v=_("button"),k.c(),u(n,"for","login-email"),u(n,"class","svelte-16ksbsk"),u(i,"type","email"),u(i,"id","login-email"),u(i,"placeholder","you@example.com"),i.required=!0,i.disabled=l[5],u(i,"class","svelte-16ksbsk"),u(t,"class","form-group svelte-16ksbsk"),u(c,"for","login-password"),u(c,"class","svelte-16ksbsk"),u(p,"type","password"),u(p,"id","login-password"),u(p,"placeholder","••••••••"),p.required=!0,p.disabled=l[5],u(p,"class","svelte-16ksbsk"),u(a,"class","form-group svelte-16ksbsk"),u(v,"type","submit"),u(v,"class","btn btn-primary btn-full svelte-16ksbsk"),v.disabled=l[5]},m(y,S){w(y,e,S),r(e,t),r(t,n),r(t,s),r(t,i),ne(i,l[7]),r(e,o),r(e,a),r(a,c),r(a,f),r(a,p),ne(p,l[8]),r(e,d),r(e,v),k.m(v,null),h||(m=[le(i,"input",l[18]),le(p,"input",l[19]),le(e,"submit",l[13])],h=!0)},p(y,S){S&32&&(i.disabled=y[5]),S&128&&i.value!==y[7]&&ne(i,y[7]),S&32&&(p.disabled=y[5]),S&256&&p.value!==y[8]&&ne(p,y[8]),C!==(C=g(y))&&(k.d(1),k=C(y),k&&(k.c(),k.m(v,null))),S&32&&(v.disabled=y[5])},d(y){y&&$(e),k.d(),h=!1,Ue(m)}}}function Ou(l){let e;return{c(){e=T("Create Account")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function ju(l){let e;return{c(){e=_("span"),u(e,"class","spinner svelte-16ksbsk")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Fu(l){let e;return{c(){e=T("Sign In")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Iu(l){let e;return{c(){e=_("span"),u(e,"class","spinner svelte-16ksbsk")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function On(l){let e,t;return{c(){e=_("p"),t=T(l[6]),u(e,"class","error-message svelte-16ksbsk")},m(n,s){w(n,e,s),r(e,t)},p(n,s){s&64&&j(t,n[6])},d(n){n&&$(e)}}}function Bu(l){let e,t,n,s,i,o,a,c,f,p,d,v,h=l[2]&&Mn(),m=l[3]&&An(l);function g(S,D){return S[4]==="login"?Au:Mu}let C=g(l),k=C(l),y=l[6]&&On(l);return{c(){e=_("div"),t=_("div"),n=_("div"),s=_("h1"),h&&h.c(),i=b(),o=T(l[0]),a=b(),c=_("p"),f=T(l[1]),p=b(),m&&m.c(),d=b(),k.c(),v=b(),y&&y.c(),u(s,"class","svelte-16ksbsk"),u(c,"class","svelte-16ksbsk"),u(n,"class","auth-title svelte-16ksbsk"),u(t,"class","auth-card glass svelte-16ksbsk"),u(e,"class","auth-container svelte-16ksbsk")},m(S,D){w(S,e,D),r(e,t),r(t,n),r(n,s),h&&h.m(s,null),r(s,i),r(s,o),r(n,a),r(n,c),r(c,f),r(t,p),m&&m.m(t,null),r(t,d),k.m(t,null),r(t,v),y&&y.m(t,null)},p(S,[D]){S[2]?h||(h=Mn(),h.c(),h.m(s,i)):h&&(h.d(1),h=null),D&1&&j(o,S[0]),D&2&&j(f,S[1]),S[3]?m?m.p(S,D):(m=An(S),m.c(),m.m(t,d)):m&&(m.d(1),m=null),C===(C=g(S))&&k?k.p(S,D):(k.d(1),k=C(S),k&&(k.c(),k.m(t,v))),S[6]?y?y.p(S,D):(y=On(S),y.c(),y.m(t,null)):y&&(y.d(1),y=null)},i:be,o:be,d(S){S&&$(e),h&&h.d(),m&&m.d(),k.d(),y&&y.d()}}}function Uu(l,e,t){let{title:n="Welcome"}=e,{subtitle:s="Sign in to your account"}=e,{apiBase:i="/api/v1"}=e,{showLogo:o=!0}=e,{allowSignup:a=!0}=e;const c=Bl();let f="login",p=!1,d=null,v="",h="",m="",g="",C="";function k(J){t(4,f=J),t(6,d=null)}async function y(J,H,A){return await Fe(J,H,A,{skipDoToken:!0})}async function S(J){J.preventDefault(),t(5,p=!0),t(6,d=null);try{const H=await y("POST","/auth/login",{username:v,password:h}),A=(H==null?void 0:H.access_token)||(H==null?void 0:H.token);if(!A)throw new Error("Login failed - no token returned");let M=H==null?void 0:H.user;if(!M){const P=await fetch("/api/v1/auth/me",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${A}`}});if(!P.ok)throw new Error("Failed to get user info");M=await P.json()}if(!M)throw new Error("Login failed - no user info");c("success",{user:M,token:A})}catch(H){t(6,d=H.message),c("error",{error:H.message,type:"login"})}finally{t(5,p=!1)}}async function D(J){if(J.preventDefault(),g!==C){t(6,d="Passwords do not match");return}t(5,p=!0),t(6,d=null);try{await y("POST","/auth/register",{username:m,email:m,password:g});const H=await y("POST","/auth/login",{username:m,password:g}),A=(H==null?void 0:H.access_token)||(H==null?void 0:H.token);if(!A)throw new Error("Signup failed - no token returned");let M=H==null?void 0:H.user;if(!M){const P=await fetch("/api/v1/auth/me",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${A}`}});if(!P.ok)throw new Error("Failed to get user info");M=await P.json()}if(!M)throw new Error("Signup failed - no user info");c("success",{user:M,token:A})}catch(H){t(6,d=H.message),c("error",{error:H.message,type:"signup"})}finally{t(5,p=!1)}}const z=()=>k("login"),E=()=>k("signup");function q(){v=this.value,t(7,v)}function N(){h=this.value,t(8,h)}function B(){m=this.value,t(9,m)}function O(){g=this.value,t(10,g)}function F(){C=this.value,t(11,C)}return l.$$set=J=>{"title"in J&&t(0,n=J.title),"subtitle"in J&&t(1,s=J.subtitle),"apiBase"in J&&t(15,i=J.apiBase),"showLogo"in J&&t(2,o=J.showLogo),"allowSignup"in J&&t(3,a=J.allowSignup)},[n,s,o,a,f,p,d,v,h,m,g,C,k,S,D,i,z,E,q,N,B,O,F]}class Hu extends yt{constructor(e){super(),wt(this,e,Uu,Bu,$t,{title:0,subtitle:1,apiBase:15,showLogo:2,allowSignup:3})}}function Ka(l){const e=l-1;return e*e*e+1}function jn(l,{delay:e=0,duration:t=400,easing:n=Pa}={}){const s=+getComputedStyle(l).opacity;return{delay:e,duration:t,easing:n,css:i=>`opacity: ${i*s}`}}function Fn(l,{delay:e=0,duration:t=400,easing:n=Ka,x:s=0,y:i=0,opacity:o=0}={}){const a=getComputedStyle(l),c=+a.opacity,f=a.transform==="none"?"":a.transform,p=c*(1-o),[d,v]=En(s),[h,m]=En(i);return{delay:e,duration:t,easing:n,css:(g,C)=>`
			transform: ${f} translate(${(1-g)*d}${v}, ${(1-g)*h}${m});
			opacity: ${c-p*C}`}}function In(l,{delay:e=0,duration:t=400,easing:n=Ka,start:s=0,opacity:i=0}={}){const o=getComputedStyle(l),a=+o.opacity,c=o.transform==="none"?"":o.transform,f=1-s,p=a*(1-i);return{delay:e,duration:t,easing:n,css:(d,v)=>`
			transform: ${c} scale(${1-f*v});
			opacity: ${a-p*v}
		`}}function Bn(l,e,t){const n=l.slice();return n[2]=e[t],n}function Un(l,e){let t,n,s=e[2].message+"",i,o,a,c,f,p,d,v,h;function m(){return e[1](e[2])}return{key:l,first:null,c(){t=_("div"),n=_("span"),i=T(s),o=b(),a=_("button"),a.textContent="×",c=b(),u(n,"class","toast-message svelte-1l5lsfn"),u(a,"class","toast-close svelte-1l5lsfn"),u(t,"class",f="toast toast-"+e[2].type+" svelte-1l5lsfn"),this.first=t},m(g,C){w(g,t,C),r(t,n),r(n,i),r(t,o),r(t,a),r(t,c),d=!0,v||(h=le(a,"click",m),v=!0)},p(g,C){e=g,(!d||C&1)&&s!==(s=e[2].message+"")&&j(i,s),(!d||C&1&&f!==(f="toast toast-"+e[2].type+" svelte-1l5lsfn"))&&u(t,"class",f)},i(g){d||(g&&Xe(()=>{d&&(p||(p=zl(t,Fn,{x:100,duration:200},!0)),p.run(1))}),d=!0)},o(g){g&&(p||(p=zl(t,Fn,{x:100,duration:200},!1)),p.run(0)),d=!1},d(g){g&&$(t),g&&p&&p.end(),v=!1,h()}}}function Gu(l){let e,t=[],n=new Map,s,i=ve(l[0]);const o=a=>a[2].id;for(let a=0;a<i.length;a+=1){let c=Bn(l,i,a),f=o(c);n.set(f,t[a]=Un(f,c))}return{c(){e=_("div");for(let a=0;a<t.length;a+=1)t[a].c();u(e,"class","toast-container svelte-1l5lsfn")},m(a,c){w(a,e,c);for(let f=0;f<t.length;f+=1)t[f]&&t[f].m(e,null);s=!0},p(a,[c]){c&1&&(i=ve(a[0]),Te(),t=Ua(t,c,o,1,a,i,n,e,Ba,Un,null,Bn),De())},i(a){if(!s){for(let c=0;c<i.length;c+=1)L(t[c]);s=!0}},o(a){for(let c=0;c<t.length;c+=1)R(t[c]);s=!1},d(a){a&&$(e);for(let c=0;c<t.length;c+=1)t[c].d()}}}function Wu(l,e,t){let n;return _t(l,Ce,i=>t(0,n=i)),[n,i=>Ce.remove(i.id)]}class Vu extends yt{constructor(e){super(),wt(this,e,Wu,Gu,$t,{})}}function Ju(l){let e,t,n,s,i,o,a=l[3]&&Hn();const c=l[9].default,f=tl(c,l,l[8],null);return{c(){e=_("button"),a&&a.c(),t=b(),f&&f.c(),u(e,"type",l[4]),u(e,"title",l[6]),u(e,"aria-label",l[7]),u(e,"class",n="btn btn-"+l[0]+" btn-"+l[1]+" svelte-1vvc8tv"),e.disabled=l[2]},m(p,d){w(p,e,d),a&&a.m(e,null),r(e,t),f&&f.m(e,null),s=!0,i||(o=le(e,"click",l[11]),i=!0)},p(p,d){p[3]?a||(a=Hn(),a.c(),a.m(e,t)):a&&(a.d(1),a=null),f&&f.p&&(!s||d&256)&&nl(f,c,p,p[8],s?ll(c,p[8],d,null):sl(p[8]),null),(!s||d&16)&&u(e,"type",p[4]),(!s||d&64)&&u(e,"title",p[6]),(!s||d&128)&&u(e,"aria-label",p[7]),(!s||d&3&&n!==(n="btn btn-"+p[0]+" btn-"+p[1]+" svelte-1vvc8tv"))&&u(e,"class",n),(!s||d&4)&&(e.disabled=p[2])},i(p){s||(L(f,p),s=!0)},o(p){R(f,p),s=!1},d(p){p&&$(e),a&&a.d(),f&&f.d(p),i=!1,o()}}}function Yu(l){let e,t,n,s,i,o,a=l[3]&&Gn();const c=l[9].default,f=tl(c,l,l[8],null);return{c(){e=_("a"),a&&a.c(),t=b(),f&&f.c(),u(e,"href",l[5]),u(e,"title",l[6]),u(e,"aria-label",l[7]),u(e,"class",n="btn btn-"+l[0]+" btn-"+l[1]+" svelte-1vvc8tv"),$e(e,"disabled",l[2])},m(p,d){w(p,e,d),a&&a.m(e,null),r(e,t),f&&f.m(e,null),s=!0,i||(o=le(e,"click",l[10]),i=!0)},p(p,d){p[3]?a||(a=Gn(),a.c(),a.m(e,t)):a&&(a.d(1),a=null),f&&f.p&&(!s||d&256)&&nl(f,c,p,p[8],s?ll(c,p[8],d,null):sl(p[8]),null),(!s||d&32)&&u(e,"href",p[5]),(!s||d&64)&&u(e,"title",p[6]),(!s||d&128)&&u(e,"aria-label",p[7]),(!s||d&3&&n!==(n="btn btn-"+p[0]+" btn-"+p[1]+" svelte-1vvc8tv"))&&u(e,"class",n),(!s||d&7)&&$e(e,"disabled",p[2])},i(p){s||(L(f,p),s=!0)},o(p){R(f,p),s=!1},d(p){p&&$(e),a&&a.d(),f&&f.d(p),i=!1,o()}}}function Hn(l){let e;return{c(){e=_("span"),u(e,"class","spinner svelte-1vvc8tv")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Gn(l){let e;return{c(){e=_("span"),u(e,"class","spinner svelte-1vvc8tv")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Ku(l){let e,t,n,s;const i=[Yu,Ju],o=[];function a(c,f){return c[5]?0:1}return e=a(l),t=o[e]=i[e](l),{c(){t.c(),n=Ie()},m(c,f){o[e].m(c,f),w(c,n,f),s=!0},p(c,[f]){let p=e;e=a(c),e===p?o[e].p(c,f):(Te(),R(o[p],1,1,()=>{o[p]=null}),De(),t=o[e],t?t.p(c,f):(t=o[e]=i[e](c),t.c()),L(t,1),t.m(n.parentNode,n))},i(c){s||(L(t),s=!0)},o(c){R(t),s=!1},d(c){c&&$(n),o[e].d(c)}}}function Qu(l,e,t){let{$$slots:n={},$$scope:s}=e,{variant:i="default"}=e,{size:o="md"}=e,{disabled:a=!1}=e,{loading:c=!1}=e,{type:f="button"}=e,{href:p=null}=e,{title:d=void 0}=e,{ariaLabel:v=void 0}=e;function h(g){xl.call(this,l,g)}function m(g){xl.call(this,l,g)}return l.$$set=g=>{"variant"in g&&t(0,i=g.variant),"size"in g&&t(1,o=g.size),"disabled"in g&&t(2,a=g.disabled),"loading"in g&&t(3,c=g.loading),"type"in g&&t(4,f=g.type),"href"in g&&t(5,p=g.href),"title"in g&&t(6,d=g.title),"ariaLabel"in g&&t(7,v=g.ariaLabel),"$$scope"in g&&t(8,s=g.$$scope)},[i,o,a,c,f,p,d,v,s,n,h,m]}class Be extends yt{constructor(e){super(),wt(this,e,Qu,Ku,$t,{variant:0,size:1,disabled:2,loading:3,type:4,href:5,title:6,ariaLabel:7})}}function Wn(l){let e;return{c(){e=_("span"),e.textContent="MOCK",u(e,"class","badge svelte-12krgw5")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Vn(l){let e,t=l[2].user.email+"",n;return{c(){e=_("span"),n=T(t),u(e,"class","user-email svelte-12krgw5")},m(s,i){w(s,e,i),r(e,n)},p(s,i){i&4&&t!==(t=s[2].user.email+"")&&j(n,t)},d(s){s&&$(e)}}}function Zu(l){let e;return{c(){e=T("Logout")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Xu(l){let e,t,n,s,i,o,a,c,f,p,d,v=l[1]&&Wn(),h=l[2].user&&Vn(l);return p=new Be({props:{variant:"ghost",size:"sm",$$slots:{default:[Zu]},$$scope:{ctx:l}}}),p.$on("click",l[3]),{c(){e=_("header"),t=_("h1"),n=_("span"),s=b(),i=T(l[0]),o=b(),a=_("div"),v&&v.c(),c=b(),h&&h.c(),f=b(),_e(p.$$.fragment),u(n,"class","brand-dot svelte-12krgw5"),u(t,"class","svelte-12krgw5"),u(a,"class","header-actions svelte-12krgw5"),u(e,"class","header glass svelte-12krgw5")},m(m,g){w(m,e,g),r(e,t),r(t,n),r(t,s),r(t,i),r(e,o),r(e,a),v&&v.m(a,null),r(a,c),h&&h.m(a,null),r(a,f),fe(p,a,null),d=!0},p(m,[g]){(!d||g&1)&&j(i,m[0]),m[1]?v||(v=Wn(),v.c(),v.m(a,c)):v&&(v.d(1),v=null),m[2].user?h?h.p(m,g):(h=Vn(m),h.c(),h.m(a,f)):h&&(h.d(1),h=null);const C={};g&16&&(C.$$scope={dirty:g,ctx:m}),p.$set(C)},i(m){d||(L(p.$$.fragment,m),d=!0)},o(m){R(p.$$.fragment,m),d=!1},d(m){m&&$(e),v&&v.d(),h&&h.d(),pe(p)}}}function xu(l,e,t){var a,c;let n;_t(l,Nt,f=>t(2,n=f));let s=!1;try{s=((c=(a=import.meta)==null?void 0:a.env)==null?void 0:c.VITE_MOCK_API)==="1"||typeof localStorage<"u"&&localStorage.getItem("mockApi")==="1"}catch{s=!1}let{title:i="Deploy Dashboard"}=e;function o(){Nt.logout()}return l.$$set=f=>{"title"in f&&t(0,i=f.title)},[i,s,n,o]}class ef extends yt{constructor(e){super(),wt(this,e,xu,Xu,$t,{title:0})}}function Jn(l,e,t){const n=l.slice();return n[6]=e[t],n}function Yn(l){let e,t=l[6].icon+"",n;return{c(){e=_("span"),n=T(t),u(e,"class","tab-icon svelte-1po08a6")},m(s,i){w(s,e,i),r(e,n)},p(s,i){i&2&&t!==(t=s[6].icon+"")&&j(n,t)},d(s){s&&$(e)}}}function Kn(l){let e,t,n=l[6].label+"",s,i,o,a,c=l[6].icon&&Yn(l);function f(){return l[4](l[6])}return{c(){e=_("button"),c&&c.c(),t=b(),s=T(n),i=b(),u(e,"class","tab svelte-1po08a6"),$e(e,"active",l[0]===l[6].id)},m(p,d){w(p,e,d),c&&c.m(e,null),r(e,t),r(e,s),r(e,i),o||(a=le(e,"click",f),o=!0)},p(p,d){l=p,l[6].icon?c?c.p(l,d):(c=Yn(l),c.c(),c.m(e,t)):c&&(c.d(1),c=null),d&2&&n!==(n=l[6].label+"")&&j(s,n),d&3&&$e(e,"active",l[0]===l[6].id)},d(p){p&&$(e),c&&c.d(),o=!1,a()}}}function tf(l){let e,t=ve(l[1]),n=[];for(let s=0;s<t.length;s+=1)n[s]=Kn(Jn(l,t,s));return{c(){e=_("div");for(let s=0;s<n.length;s+=1)n[s].c();u(e,"class","tabs svelte-1po08a6"),$e(e,"scrollable",l[2])},m(s,i){w(s,e,i);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null)},p(s,[i]){if(i&11){t=ve(s[1]);let o;for(o=0;o<t.length;o+=1){const a=Jn(s,t,o);n[o]?n[o].p(a,i):(n[o]=Kn(a),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=t.length}i&4&&$e(e,"scrollable",s[2])},i:be,o:be,d(s){s&&$(e),Ee(n,s)}}}function lf(l,e,t){let{tabs:n=[]}=e,{active:s=""}=e,{scrollable:i=!0}=e;const o=Bl();function a(f){t(0,s=f),o("change",f)}const c=f=>a(f.id);return l.$$set=f=>{"tabs"in f&&t(1,n=f.tabs),"active"in f&&t(0,s=f.active),"scrollable"in f&&t(2,i=f.scrollable)},[s,n,i,a,c]}class nf extends yt{constructor(e){super(),wt(this,e,lf,tf,$t,{tabs:1,active:0,scrollable:2})}}function Qn(l,e,t){const n=l.slice();return n[20]=e[t],n}function Zn(l,e,t){var i,o,a;const n=l.slice();n[23]=e[t];const s=n[23].ip||((a=(o=(i=n[23].networks)==null?void 0:i.v4)==null?void 0:o[0])==null?void 0:a.ip_address);return n[24]=s,n}function Xn(l,e,t){const n=l.slice();return n[27]=e[t],n}function xn(l,e,t){const n=l.slice();return n[30]=e[t],n}function es(l){let e,t=l[30]+"",n,s;return{c(){e=_("option"),n=T(t),e.__value=s=l[30],ne(e,e.__value)},m(i,o){w(i,e,o),r(e,n)},p(i,o){o[0]&16&&t!==(t=i[30]+"")&&j(n,t),o[0]&16&&s!==(s=i[30])&&(e.__value=s,ne(e,e.__value))},d(i){i&&$(e)}}}function ts(l){let e,t=l[27]+"",n,s;return{c(){e=_("option"),n=T(t),e.__value=s=l[27],ne(e,e.__value)},m(i,o){w(i,e,o),r(e,n)},p(i,o){o[0]&8&&t!==(t=i[27]+"")&&j(n,t),o[0]&8&&s!==(s=i[27])&&(e.__value=s,ne(e,e.__value))},d(i){i&&$(e)}}}function ls(l){let e,t=(l[23].name||"unnamed")+"",n,s,i=l[24]+"",o,a,c;return{c(){e=_("option"),n=T(t),s=T(" ("),o=T(i),a=T(")"),e.__value=c=l[24],ne(e,e.__value)},m(f,p){w(f,e,p),r(e,n),r(e,s),r(e,o),r(e,a)},p(f,p){p[0]&32&&t!==(t=(f[23].name||"unnamed")+"")&&j(n,t),p[0]&32&&i!==(i=f[24]+"")&&j(o,i),p[0]&32&&c!==(c=f[24])&&(e.__value=c,ne(e,e.__value))},d(f){f&&$(e)}}}function ns(l){let e,t=l[24]&&ls(l);return{c(){t&&t.c(),e=Ie()},m(n,s){t&&t.m(n,s),w(n,e,s)},p(n,s){n[24]?t?t.p(n,s):(t=ls(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(n){n&&$(e),t&&t.d(n)}}}function ss(l){let e,t,n,s,i,o,a,c,f=ve(l[6]||[]),p=[];for(let d=0;d<f.length;d+=1)p[d]=os(Qn(l,f,d));return{c(){e=_("div"),t=_("label"),t.textContent="Container:",n=b(),s=_("select"),i=_("option"),i.textContent="(All)";for(let d=0;d<p.length;d+=1)p[d].c();u(t,"class","svelte-1wvrz0m"),i.__value="",ne(i,i.__value),u(s,"class","svelte-1wvrz0m"),u(e,"class","scope-field svelte-1wvrz0m")},m(d,v){w(d,e,v),r(e,t),r(e,n),r(e,s),r(s,i);for(let h=0;h<p.length;h+=1)p[h]&&p[h].m(s,null);ze(s,l[2].container),a||(c=le(s,"change",l[16]),a=!0)},p(d,v){if(v[0]&64){f=ve(d[6]||[]);let h;for(h=0;h<f.length;h+=1){const m=Qn(d,f,h);p[h]?p[h].p(m,v):(p[h]=os(m),p[h].c(),p[h].m(s,null))}for(;h<p.length;h+=1)p[h].d(1);p.length=f.length}v[0]&20&&o!==(o=d[2].container)&&ze(s,d[2].container)},d(d){d&&$(e),Ee(p,d),a=!1,c()}}}function os(l){let e,t=l[20].name+"",n,s;return{c(){e=_("option"),n=T(t),e.__value=s=l[20].name,ne(e,e.__value)},m(i,o){w(i,e,o),r(e,n)},p(i,o){o[0]&64&&t!==(t=i[20].name+"")&&j(n,t),o[0]&64&&s!==(s=i[20].name)&&(e.__value=s,ne(e,e.__value))},d(i){i&&$(e)}}}function is(l){let e,t,n,s,i,o;return{c(){e=_("label"),t=_("input"),s=T(`
      Tail`),u(t,"type","checkbox"),t.checked=n=l[2].tail,u(t,"class","svelte-1wvrz0m"),u(e,"class","tail-toggle svelte-1wvrz0m")},m(a,c){w(a,e,c),r(e,t),r(e,s),i||(o=le(t,"change",l[18]),i=!0)},p(a,c){c[0]&20&&n!==(n=a[2].tail)&&(t.checked=n)},d(a){a&&$(e),i=!1,o()}}}function sf(l){let e,t,n,s,i,o,a,c,f,p,d,v,h,m,g,C,k,y,S,D,z,E,q,N,B,O,F,J,H,A,M,P,I,V,ee,Q,Z,oe,x,G,U,re,W=ve(l[4]),ae=[];for(let K=0;K<W.length;K+=1)ae[K]=es(xn(l,W,K));let te=ve(l[3]),Y=[];for(let K=0;K<te.length;K+=1)Y[K]=ts(Xn(l,te,K));let de=ve(l[5]||[]),ce=[];for(let K=0;K<de.length;K+=1)ce[K]=ns(Zn(l,de,K));let ie=l[1]&&l[2].server&&ss(l),X=l[0]&&is(l);return{c(){e=_("div"),t=_("div"),n=_("div"),n.innerHTML='<span class="brand-dot svelte-1wvrz0m"></span> <span>cc</span>',s=b(),i=_("div"),o=_("label"),o.textContent="Project:",a=b(),c=_("select"),f=_("option"),f.textContent="All";for(let K=0;K<ae.length;K+=1)ae[K].c();d=b(),v=_("div"),h=_("label"),h.textContent="Env:",m=b(),g=_("select"),C=_("option"),C.textContent="All";for(let K=0;K<Y.length;K+=1)Y[K].c();y=b(),S=_("div"),D=_("label"),D.textContent="Server:",z=b(),E=_("select"),q=_("option"),q.textContent="(Fleet)";for(let K=0;K<ce.length;K+=1)ce[K].c();B=b(),ie&&ie.c(),O=b(),F=_("div"),J=_("label"),J.textContent="Last",H=b(),A=_("select"),M=_("option"),M.textContent="15m",P=_("option"),P.textContent="1h",I=_("option"),I.textContent="6h",V=_("option"),V.textContent="24h",ee=_("option"),ee.textContent="7d",Q=_("option"),Q.textContent="30d",oe=b(),x=_("button"),x.innerHTML='<svg viewBox="0 0 24 24" fill="none" class="svelte-1wvrz0m"><path d="M20 12a8 8 0 1 1-2.34-5.66" stroke="currentColor" stroke-width="2" stroke-linecap="round"></path><path d="M20 4v6h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg>',G=b(),X&&X.c(),u(n,"class","scope-brand svelte-1wvrz0m"),u(o,"class","svelte-1wvrz0m"),f.__value="",ne(f,f.__value),u(c,"class","svelte-1wvrz0m"),u(i,"class","scope-field svelte-1wvrz0m"),u(h,"class","svelte-1wvrz0m"),C.__value="",ne(C,C.__value),u(g,"class","svelte-1wvrz0m"),u(v,"class","scope-field svelte-1wvrz0m"),u(D,"class","svelte-1wvrz0m"),q.__value="",ne(q,q.__value),u(E,"class","svelte-1wvrz0m"),u(S,"class","scope-field svelte-1wvrz0m"),u(J,"class","svelte-1wvrz0m"),M.__value="15m",ne(M,M.__value),P.__value="1h",ne(P,P.__value),I.__value="6h",ne(I,I.__value),V.__value="24h",ne(V,V.__value),ee.__value="7d",ne(ee,ee.__value),Q.__value="30d",ne(Q,Q.__value),u(A,"class","svelte-1wvrz0m"),u(F,"class","scope-field svelte-1wvrz0m"),u(x,"class","iconbtn svelte-1wvrz0m"),u(x,"title","Refresh"),u(t,"class","scope-bar-inner svelte-1wvrz0m"),u(e,"class","scope-bar glass svelte-1wvrz0m")},m(K,me){w(K,e,me),r(e,t),r(t,n),r(t,s),r(t,i),r(i,o),r(i,a),r(i,c),r(c,f);for(let ge=0;ge<ae.length;ge+=1)ae[ge]&&ae[ge].m(c,null);ze(c,l[2].project),r(t,d),r(t,v),r(v,h),r(v,m),r(v,g),r(g,C);for(let ge=0;ge<Y.length;ge+=1)Y[ge]&&Y[ge].m(g,null);ze(g,l[2].env),r(t,y),r(t,S),r(S,D),r(S,z),r(S,E),r(E,q);for(let ge=0;ge<ce.length;ge+=1)ce[ge]&&ce[ge].m(E,null);ze(E,l[2].server),r(t,B),ie&&ie.m(t,null),r(t,O),r(t,F),r(F,J),r(F,H),r(F,A),r(A,M),r(A,P),r(A,I),r(A,V),r(A,ee),r(A,Q),ze(A,l[2].range),r(t,oe),r(t,x),r(e,G),X&&X.m(e,null),U||(re=[le(c,"change",l[13]),le(g,"change",l[14]),le(E,"change",l[15]),le(A,"change",l[17]),le(x,"click",l[10])],U=!0)},p(K,me){if(me[0]&16){W=ve(K[4]);let ge;for(ge=0;ge<W.length;ge+=1){const He=xn(K,W,ge);ae[ge]?ae[ge].p(He,me):(ae[ge]=es(He),ae[ge].c(),ae[ge].m(c,null))}for(;ge<ae.length;ge+=1)ae[ge].d(1);ae.length=W.length}if(me[0]&20&&p!==(p=K[2].project)&&ze(c,K[2].project),me[0]&8){te=ve(K[3]);let ge;for(ge=0;ge<te.length;ge+=1){const He=Xn(K,te,ge);Y[ge]?Y[ge].p(He,me):(Y[ge]=ts(He),Y[ge].c(),Y[ge].m(g,null))}for(;ge<Y.length;ge+=1)Y[ge].d(1);Y.length=te.length}if(me[0]&20&&k!==(k=K[2].env)&&ze(g,K[2].env),me[0]&32){de=ve(K[5]||[]);let ge;for(ge=0;ge<de.length;ge+=1){const He=Zn(K,de,ge);ce[ge]?ce[ge].p(He,me):(ce[ge]=ns(He),ce[ge].c(),ce[ge].m(E,null))}for(;ge<ce.length;ge+=1)ce[ge].d(1);ce.length=de.length}me[0]&20&&N!==(N=K[2].server)&&ze(E,K[2].server),K[1]&&K[2].server?ie?ie.p(K,me):(ie=ss(K),ie.c(),ie.m(t,O)):ie&&(ie.d(1),ie=null),me[0]&20&&Z!==(Z=K[2].range)&&ze(A,K[2].range),K[0]?X?X.p(K,me):(X=is(K),X.c(),X.m(e,null)):X&&(X.d(1),X=null)},i:be,o:be,d(K){K&&$(e),Ee(ae,K),Ee(Y,K),Ee(ce,K),ie&&ie.d(),X&&X.d(),U=!1,Ue(re)}}}function of(l,e,t){let n,s,i,o,a,c,f;_t(l,ql,q=>t(2,i=q)),_t(l,Ya,q=>t(11,o=q)),_t(l,qn,q=>t(12,a=q)),_t(l,Fl,q=>t(5,c=q)),_t(l,Lu,q=>t(6,f=q));let{showTail:p=!1}=e,{showContainer:d=!1}=e;const v=Bl();function h(q,N){ql.update(B=>({...B,[q]:N})),v("change")}function m(q){ql.update(N=>({...N,server:q,container:""})),v("change")}function g(q){ql.update(N=>({...N,tail:q})),v("change")}function C(){v("refresh")}const k=q=>h("project",q.target.value),y=q=>h("env",q.target.value),S=q=>m(q.target.value),D=q=>h("container",q.target.value),z=q=>h("range",q.target.value),E=q=>g(q.target.checked);return l.$$set=q=>{"showTail"in q&&t(0,p=q.showTail),"showContainer"in q&&t(1,d=q.showContainer)},l.$$.update=()=>{l.$$.dirty[0]&6144&&t(4,n=[...new Set([...a||[],...(o||[]).map(q=>q.project).filter(Boolean)])].sort()),l.$$.dirty[0]&2048&&t(3,s=[...new Set(["prod","staging","uat","test","dev",...(o||[]).map(q=>q.environment).filter(Boolean)])].sort()),l.$$.dirty[0]&4&&(i.server?bn.fetch({server:i.server}):(bn.clear(),i.container&&ql.update(q=>({...q,container:""}))))},[p,d,i,s,n,c,f,h,m,g,C,o,a,k,y,S,D,z,E]}class rf extends yt{constructor(e){super(),wt(this,e,of,sf,$t,{showTail:0,showContainer:1},null,[-1,-1])}}function af(l){let e,t,n;const s=l[2].default,i=tl(s,l,l[1],null);return{c(){e=_("span"),i&&i.c(),u(e,"class",t="badge badge-"+l[0]+" svelte-1d0la3i")},m(o,a){w(o,e,a),i&&i.m(e,null),n=!0},p(o,[a]){i&&i.p&&(!n||a&2)&&nl(i,s,o,o[1],n?ll(s,o[1],a,null):sl(o[1]),null),(!n||a&1&&t!==(t="badge badge-"+o[0]+" svelte-1d0la3i"))&&u(e,"class",t)},i(o){n||(L(i,o),n=!0)},o(o){R(i,o),n=!1},d(o){o&&$(e),i&&i.d(o)}}}function cf(l,e,t){let{$$slots:n={},$$scope:s}=e,{variant:i="info"}=e;return l.$$set=o=>{"variant"in o&&t(0,i=o.variant),"$$scope"in o&&t(1,s=o.$$scope)},[i,s,n]}class Ke extends yt{constructor(e){super(),wt(this,e,cf,af,$t,{variant:0})}}const uf=l=>({}),rs=l=>({}),ff=l=>({}),as=l=>({});function cs(l){let e,t,n,s,i,o,a,c,f,p,d=(l[1]||l[6].header)&&us(l);const v=l[9].default,h=tl(v,l,l[8],null);let m=l[6].footer&&ps(l);return{c(){e=_("div"),t=_("div"),d&&d.c(),n=b(),s=_("div"),h&&h.c(),i=b(),m&&m.c(),u(s,"class","modal-body svelte-kno8vc"),u(t,"class","modal svelte-kno8vc"),Rt(t,"max-width",l[2]),u(e,"class","modal-overlay svelte-kno8vc"),u(e,"role","dialog"),u(e,"aria-modal","true")},m(g,C){w(g,e,C),r(e,t),d&&d.m(t,null),r(t,n),r(t,s),h&&h.m(s,null),r(t,i),m&&m.m(t,null),c=!0,f||(p=le(e,"click",l[4]),f=!0)},p(g,C){g[1]||g[6].header?d?(d.p(g,C),C&66&&L(d,1)):(d=us(g),d.c(),L(d,1),d.m(t,n)):d&&(Te(),R(d,1,1,()=>{d=null}),De()),h&&h.p&&(!c||C&256)&&nl(h,v,g,g[8],c?ll(v,g[8],C,null):sl(g[8]),null),g[6].footer?m?(m.p(g,C),C&64&&L(m,1)):(m=ps(g),m.c(),L(m,1),m.m(t,null)):m&&(Te(),R(m,1,1,()=>{m=null}),De()),(!c||C&4)&&Rt(t,"max-width",g[2])},i(g){c||(L(d),L(h,g),L(m),g&&Xe(()=>{c&&(o||(o=zl(t,In,{duration:200,start:.95},!0)),o.run(1))}),g&&Xe(()=>{c&&(a||(a=zl(e,jn,{duration:150},!0)),a.run(1))}),c=!0)},o(g){R(d),R(h,g),R(m),g&&(o||(o=zl(t,In,{duration:200,start:.95},!1)),o.run(0)),g&&(a||(a=zl(e,jn,{duration:150},!1)),a.run(0)),c=!1},d(g){g&&$(e),d&&d.d(),h&&h.d(g),m&&m.d(),g&&o&&o.end(),g&&a&&a.end(),f=!1,p()}}}function us(l){let e,t,n,s,i,o,a,c=l[1]&&fs(l);const f=l[9].header,p=tl(f,l,l[8],as);return{c(){e=_("div"),c&&c.c(),t=b(),p&&p.c(),n=b(),s=_("button"),s.innerHTML='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-kno8vc"><path d="M18 6L6 18M6 6l12 12"></path></svg>',u(s,"class","modal-close svelte-kno8vc"),u(s,"aria-label","Close"),u(e,"class","modal-header svelte-kno8vc")},m(d,v){w(d,e,v),c&&c.m(e,null),r(e,t),p&&p.m(e,null),r(e,n),r(e,s),i=!0,o||(a=le(s,"click",l[3]),o=!0)},p(d,v){d[1]?c?c.p(d,v):(c=fs(d),c.c(),c.m(e,t)):c&&(c.d(1),c=null),p&&p.p&&(!i||v&256)&&nl(p,f,d,d[8],i?ll(f,d[8],v,ff):sl(d[8]),as)},i(d){i||(L(p,d),i=!0)},o(d){R(p,d),i=!1},d(d){d&&$(e),c&&c.d(),p&&p.d(d),o=!1,a()}}}function fs(l){let e,t;return{c(){e=_("h3"),t=T(l[1]),u(e,"class","svelte-kno8vc")},m(n,s){w(n,e,s),r(e,t)},p(n,s){s&2&&j(t,n[1])},d(n){n&&$(e)}}}function ps(l){let e,t;const n=l[9].footer,s=tl(n,l,l[8],rs);return{c(){e=_("div"),s&&s.c(),u(e,"class","modal-footer svelte-kno8vc")},m(i,o){w(i,e,o),s&&s.m(e,null),t=!0},p(i,o){s&&s.p&&(!t||o&256)&&nl(s,n,i,i[8],t?ll(n,i[8],o,uf):sl(i[8]),rs)},i(i){t||(L(s,i),t=!0)},o(i){R(s,i),t=!1},d(i){i&&$(e),s&&s.d(i)}}}function pf(l){let e,t,n,s,i=l[0]&&cs(l);return{c(){i&&i.c(),e=Ie()},m(o,a){i&&i.m(o,a),w(o,e,a),t=!0,n||(s=le(window,"keydown",l[5]),n=!0)},p(o,[a]){o[0]?i?(i.p(o,a),a&1&&L(i,1)):(i=cs(o),i.c(),L(i,1),i.m(e.parentNode,e)):i&&(Te(),R(i,1,1,()=>{i=null}),De())},i(o){t||(L(i),t=!0)},o(o){R(i),t=!1},d(o){o&&$(e),i&&i.d(o),n=!1,s()}}}function _f(l,e,t){let{$$slots:n={},$$scope:s}=e;const i=Ra(n);let{open:o=!1}=e,{title:a=""}=e,{width:c="500px"}=e,{closeOnOverlay:f=!0}=e;const p=Bl();function d(){p("close")}function v(m){f&&m.target===m.currentTarget&&d()}function h(m){m.key==="Escape"&&d()}return l.$$set=m=>{"open"in m&&t(0,o=m.open),"title"in m&&t(1,a=m.title),"width"in m&&t(2,c=m.width),"closeOnOverlay"in m&&t(7,f=m.closeOnOverlay),"$$scope"in m&&t(8,s=m.$$scope)},[o,a,c,d,v,h,i,f,s,n]}class xt extends yt{constructor(e){super(),wt(this,e,_f,pf,$t,{open:0,title:1,width:2,closeOnOverlay:7})}}function _s(l,e,t){const n=l.slice();n[29]=e[t];const s=yf(n[29]);n[30]=s;const i=Ql(n[30]);n[31]=i;const o=Cf(n[29]);n[32]=o;const a=n[8][n[30]];return n[33]=a,n}function ds(l){let e;return{c(){e=_("span"),e.textContent="⚠",u(e,"class","health-warn svelte-3mbtsx"),u(e,"title","High resource usage")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function vs(l){let e;return{c(){e=_("span"),e.textContent="⚠️",u(e,"class","agent-warn svelte-3mbtsx"),u(e,"title","Agent outdated")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function df(l){let e;return{c(){e=_("span"),e.textContent="offline",u(e,"class","metric-inline offline svelte-3mbtsx")},m(t,n){w(t,e,n)},p:be,d(t){t&&$(e)}}}function vf(l){let e,t,n,s,i;return{c(){e=_("span"),t=b(),n=_("span"),s=b(),i=_("span"),u(e,"class","metric-skeleton svelte-3mbtsx"),u(n,"class","metric-skeleton svelte-3mbtsx"),u(i,"class","metric-skeleton svelte-3mbtsx")},m(o,a){w(o,e,a),w(o,t,a),w(o,n,a),w(o,s,a),w(o,i,a)},p:be,d(o){o&&($(e),$(t),$(n),$(s),$(i))}}}function mf(l){let e,t,n=l[3].cpu.toFixed(0)+"",s,i,o,a,c,f,p=l[3].mem.toFixed(0)+"",d,v,h,m,g,C,k=l[3].disk.toFixed(0)+"",y,S,D,z,E,q=(l[3].netIn||l[3].netOut)&&ms(l);return{c(){e=_("span"),t=T("CPU "),s=T(n),i=T("%"),a=b(),c=_("span"),f=T("MEM "),d=T(p),v=T("%"),m=b(),g=_("span"),C=T("DISK "),y=T(k),S=T("%"),z=b(),q&&q.c(),E=Ie(),u(e,"class",o="metric-inline "+Tl(l[3].cpu)+" svelte-3mbtsx"),u(c,"class",h="metric-inline "+Tl(l[3].mem)+" svelte-3mbtsx"),u(g,"class",D="metric-inline "+Tl(l[3].disk)+" svelte-3mbtsx")},m(N,B){w(N,e,B),r(e,t),r(e,s),r(e,i),w(N,a,B),w(N,c,B),r(c,f),r(c,d),r(c,v),w(N,m,B),w(N,g,B),r(g,C),r(g,y),r(g,S),w(N,z,B),q&&q.m(N,B),w(N,E,B)},p(N,B){B[0]&8&&n!==(n=N[3].cpu.toFixed(0)+"")&&j(s,n),B[0]&8&&o!==(o="metric-inline "+Tl(N[3].cpu)+" svelte-3mbtsx")&&u(e,"class",o),B[0]&8&&p!==(p=N[3].mem.toFixed(0)+"")&&j(d,p),B[0]&8&&h!==(h="metric-inline "+Tl(N[3].mem)+" svelte-3mbtsx")&&u(c,"class",h),B[0]&8&&k!==(k=N[3].disk.toFixed(0)+"")&&j(y,k),B[0]&8&&D!==(D="metric-inline "+Tl(N[3].disk)+" svelte-3mbtsx")&&u(g,"class",D),N[3].netIn||N[3].netOut?q?q.p(N,B):(q=ms(N),q.c(),q.m(E.parentNode,E)):q&&(q.d(1),q=null)},d(N){N&&($(e),$(a),$(c),$(m),$(g),$(z),$(E)),q&&q.d(N)}}}function ms(l){let e,t,n=Vl(l[3].netIn)+"",s,i,o=Vl(l[3].netOut)+"",a;return{c(){e=_("span"),t=T("↓"),s=T(n),i=T(" ↑"),a=T(o),u(e,"class","metric-inline net svelte-3mbtsx")},m(c,f){w(c,e,f),r(e,t),r(e,s),r(e,i),r(e,a)},p(c,f){f[0]&8&&n!==(n=Vl(c[3].netIn)+"")&&j(s,n),f[0]&8&&o!==(o=Vl(c[3].netOut)+"")&&j(a,o)},d(c){c&&$(e)}}}function hs(l){let e,t;return e=new Ke({props:{variant:"info",$$slots:{default:[hf]},$$scope:{ctx:l}}}),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const i={};s[0]&1|s[1]&32&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(L(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){pe(e,n)}}}function hf(l){let e=l[0].project+"",t;return{c(){t=T(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&1&&e!==(e=n[0].project+"")&&j(t,e)},d(n){n&&$(t)}}}function gf(l){let e,t=ve(l[6]),n=[];for(let s=0;s<t.length;s+=1)n[s]=gs(_s(l,t,s));return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=Ie()},m(s,i){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(s,i);w(s,e,i)},p(s,i){if(i[0]&459072){t=ve(s[6]);let o;for(o=0;o<t.length;o+=1){const a=_s(s,t,o);n[o]?n[o].p(a,i):(n[o]=gs(a),n[o].c(),n[o].m(e.parentNode,e))}for(;o<n.length;o+=1)n[o].d(1);n.length=t.length}},d(s){s&&$(e),Ee(n,s)}}}function bf(l){let e;return{c(){e=_("span"),e.textContent="No containers",u(e,"class","empty-text svelte-3mbtsx")},m(t,n){w(t,e,n)},p:be,d(t){t&&$(e)}}}function kf(l){let e;return{c(){e=_("span"),e.textContent="Loading...",u(e,"class","loading-text svelte-3mbtsx")},m(t,n){w(t,e,n)},p:be,d(t){t&&$(e)}}}function gs(l){let e,t,n,s,i,o=l[31]+"",a,c,f,p,d=l[33]==="restart"?"...":"↻",v,h,m,g,C,k,y,S,D,z,E,q;function N(){return l[23](l[30])}function B(){return l[24](l[30])}function O(){return l[25](l[30])}return{c(){e=_("div"),t=_("span"),s=b(),i=_("span"),a=T(o),c=b(),f=_("div"),p=_("button"),v=T(d),m=b(),g=_("button"),g.textContent="📋",C=b(),k=_("button"),y=T("×"),D=b(),u(t,"class",n="container-status "+bs(l[32])+" svelte-3mbtsx"),u(i,"class","container-name svelte-3mbtsx"),u(p,"class","pill-btn svelte-3mbtsx"),u(p,"title","Restart"),p.disabled=h=l[33],u(g,"class","pill-btn svelte-3mbtsx"),u(g,"title","Logs"),u(k,"class","pill-btn danger svelte-3mbtsx"),u(k,"title","Remove"),k.disabled=S=l[33],u(f,"class","container-actions svelte-3mbtsx"),u(e,"class","container-pill svelte-3mbtsx"),u(e,"title",z=l[30]),$e(e,"busy",l[33])},m(F,J){w(F,e,J),r(e,t),r(e,s),r(e,i),r(i,a),r(e,c),r(e,f),r(f,p),r(p,v),r(f,m),r(f,g),r(f,C),r(f,k),r(k,y),r(e,D),E||(q=[le(p,"click",N),le(g,"click",B),le(k,"click",O)],E=!0)},p(F,J){l=F,J[0]&64&&n!==(n="container-status "+bs(l[32])+" svelte-3mbtsx")&&u(t,"class",n),J[0]&64&&o!==(o=l[31]+"")&&j(a,o),J[0]&320&&d!==(d=l[33]==="restart"?"...":"↻")&&j(v,d),J[0]&320&&h!==(h=l[33])&&(p.disabled=h),J[0]&320&&S!==(S=l[33])&&(k.disabled=S),J[0]&64&&z!==(z=l[30])&&u(e,"title",z),J[0]&320&&$e(e,"busy",l[33])},d(F){F&&$(e),E=!1,Ue(q)}}}function $f(l){var ie;let e,t,n,s,i,o,a,c=(l[0].name||"Unnamed")+"",f,p,d,v,h,m,g,C=(((ie=l[0].region)==null?void 0:ie.slug)||l[0].region||"")+"",k,y,S,D,z,E,q,N,B,O,F,J,H,A=l[7]||l[9]?"...":"↻",M,P,I,V,ee,Q,Z,oe,x,G=l[12]&&ds(),U=l[13]&&vs();function re(X,K){if(X[4]&&X[3])return mf;if(X[4]&&X[9])return vf;if(!X[4])return df}let W=re(l),ae=W&&W(l),te=l[1]&&l[0].project&&hs(l);function Y(X,K){return X[7]&&X[6].length===0?kf:X[6].length===0&&X[2]?bf:gf}let de=Y(l),ce=de(l);return{c(){e=_("div"),t=_("div"),n=_("div"),s=_("span"),o=b(),a=_("span"),f=T(c),p=b(),G&&G.c(),d=b(),v=_("code"),h=T(l[10]),m=b(),g=_("span"),k=T(C),y=b(),U&&U.c(),S=b(),D=_("div"),ae&&ae.c(),z=b(),E=_("span"),q=T("£"),N=T(l[11]),B=T("/mo"),O=b(),F=_("div"),te&&te.c(),J=b(),H=_("button"),M=T(A),I=b(),V=_("button"),V.textContent="🗑️",ee=b(),Q=_("div"),ce.c(),u(s,"class",i="status-dot "+l[14](l[5])+" svelte-3mbtsx"),u(a,"class","server-name svelte-3mbtsx"),u(v,"class","server-ip svelte-3mbtsx"),u(g,"class","server-meta svelte-3mbtsx"),u(n,"class","server-info svelte-3mbtsx"),u(E,"class","metric-inline cost svelte-3mbtsx"),u(D,"class","server-metrics-inline svelte-3mbtsx"),u(H,"class","icon-btn svelte-3mbtsx"),u(H,"title","Refresh"),H.disabled=P=l[7]||l[9],u(V,"class","icon-btn danger svelte-3mbtsx"),u(V,"title","Destroy"),u(F,"class","server-actions svelte-3mbtsx"),u(t,"class","server-header svelte-3mbtsx"),u(Q,"class","containers svelte-3mbtsx"),u(e,"class","server-card svelte-3mbtsx")},m(X,K){w(X,e,K),r(e,t),r(t,n),r(n,s),r(n,o),r(n,a),r(a,f),r(n,p),G&&G.m(n,null),r(n,d),r(n,v),r(v,h),r(n,m),r(n,g),r(g,k),r(n,y),U&&U.m(n,null),r(t,S),r(t,D),ae&&ae.m(D,null),r(D,z),r(D,E),r(E,q),r(E,N),r(E,B),r(t,O),r(t,F),te&&te.m(F,null),r(F,J),r(F,H),r(H,M),r(F,I),r(F,V),r(e,ee),r(e,Q),ce.m(Q,null),Z=!0,oe||(x=[le(H,"click",l[19]),le(V,"click",l[22])],oe=!0)},p(X,K){var me;(!Z||K[0]&32&&i!==(i="status-dot "+X[14](X[5])+" svelte-3mbtsx"))&&u(s,"class",i),(!Z||K[0]&1)&&c!==(c=(X[0].name||"Unnamed")+"")&&j(f,c),X[12]?G||(G=ds(),G.c(),G.m(n,d)):G&&(G.d(1),G=null),(!Z||K[0]&1024)&&j(h,X[10]),(!Z||K[0]&1)&&C!==(C=(((me=X[0].region)==null?void 0:me.slug)||X[0].region||"")+"")&&j(k,C),X[13]?U||(U=vs(),U.c(),U.m(n,null)):U&&(U.d(1),U=null),W===(W=re(X))&&ae?ae.p(X,K):(ae&&ae.d(1),ae=W&&W(X),ae&&(ae.c(),ae.m(D,z))),(!Z||K[0]&2048)&&j(N,X[11]),X[1]&&X[0].project?te?(te.p(X,K),K[0]&3&&L(te,1)):(te=hs(X),te.c(),L(te,1),te.m(F,J)):te&&(Te(),R(te,1,1,()=>{te=null}),De()),(!Z||K[0]&640)&&A!==(A=X[7]||X[9]?"...":"↻")&&j(M,A),(!Z||K[0]&640&&P!==(P=X[7]||X[9]))&&(H.disabled=P),de===(de=Y(X))&&ce?ce.p(X,K):(ce.d(1),ce=de(X),ce&&(ce.c(),ce.m(Q,null)))},i(X){Z||(L(te),Z=!0)},o(X){R(te),Z=!1},d(X){X&&$(e),G&&G.d(),U&&U.d(),ae&&ae.d(),te&&te.d(),ce.d(),oe=!1,Ue(x)}}}function wf(l){return l.includes("4gb")?24:l.includes("2gb")?12:l.includes("1gb")?6:l.includes("512mb")?4:6}function bs(l){if(!l)return"gray";const e=l.toLowerCase();return e==="running"?"green":e==="exited"||e==="stopped"?"yellow":e==="restarting"?"blue":"red"}function Tl(l){return l>=90?"danger":l>=70?"warning":"ok"}function yf(l){return l.Names&&typeof l.Names=="string"?l.Names.replace(/^\//,""):Array.isArray(l.Names)&&l.Names.length>0?l.Names[0].replace(/^\//,""):l.Name?l.Name.replace(/^\//,""):l.name?l.name:l.ID?l.ID.substring(0,12):l.Id?l.Id.substring(0,12):"unknown"}function Cf(l){return l.State||l.state||l.Status||"unknown"}function Ql(l){if(!l)return"unknown";const e=l.split("-");return e.length>=3&&e[0].length<=10?e.slice(2).join("-"):l}function Vl(l){return l?l<1024?`${l}B`:l<1048576?`${(l/1024).toFixed(0)}K`:l<1073741824?`${(l/1048576).toFixed(1)}M`:`${(l/1073741824).toFixed(1)}G`:"0"}function Sf(l,e,t){let n,s,i,o,a,c,f,p;_t(l,Ja,P=>t(21,p=P));let{server:d}=e,{showProject:v=!1}=e;const h=Bl();let m=[],g=!1,C=!1,k={},y=null,S=!1;function D(P){switch(P){case"active":case"online":return"green";case"new":case"starting":return"blue";case"off":case"stopped":return"yellow";default:return"red"}}function z(P){h(P,{server:d})}async function E(){if(!(!i||!p)){t(7,g=!0);try{const P=await Fe("GET",`/infra/agent/${n}/containers?do_token=${p}`);t(6,m=P.containers||[]),t(2,C=!0)}catch(P){console.error("Failed to load containers:",P),t(6,m=[])}finally{t(7,g=!1)}}}async function q(){var P,I,V,ee,Q;if(!(!i||!p)){t(9,S=!0);try{const Z=await Fe("GET",`/infra/agent/${n}/metrics?do_token=${p}`);t(3,y={cpu:((P=Z.system)==null?void 0:P.load_1m)||0,mem:((I=Z.system)==null?void 0:I.mem_percent)||0,disk:((V=Z.system)==null?void 0:V.disk_percent)||0,netIn:((ee=Z.system)==null?void 0:ee.net_in_bytes)||0,netOut:((Q=Z.system)==null?void 0:Q.net_out_bytes)||0})}catch(Z){console.error("Failed to load metrics:",Z)}finally{t(9,S=!1)}}}async function N(P){if(p){t(8,k[P]="restart",k);try{await Fe("POST",`/infra/agent/${n}/containers/${P}/restart?do_token=${p}`),Ce.success(`Restarted ${Ql(P)}`),await E()}catch(I){Ce.error(`Failed: ${I.message}`)}finally{t(8,k[P]=null,k)}}}async function B(P){if(p&&confirm(`Remove "${Ql(P)}"?`)){t(8,k[P]="remove",k);try{await Fe("POST",`/infra/agent/${n}/containers/${P}/stop?do_token=${p}`).catch(()=>{}),await Fe("POST",`/infra/agent/${n}/containers/${P}/remove?do_token=${p}`),Ce.success(`Removed ${Ql(P)}`),await E()}catch(I){Ce.error(`Failed: ${I.message}`)}finally{t(8,k[P]=null,k)}}}function O(P){h("viewLogs",{server:d,containerName:P})}async function F(){await Promise.all([E(),q()])}const J=()=>z("destroy"),H=P=>N(P),A=P=>O(P),M=P=>B(P);return l.$$set=P=>{"server"in P&&t(0,d=P.server),"showProject"in P&&t(1,v=P.showProject)},l.$$.update=()=>{var P,I,V;l.$$.dirty[0]&1&&t(10,n=d.ip||((V=(I=(P=d.networks)==null?void 0:P.v4)==null?void 0:I[0])==null?void 0:V.ip_address)||"N/A"),l.$$.dirty[0]&1&&t(5,s=d.status||"unknown"),l.$$.dirty[0]&32&&t(4,i=s==="active"||s==="online"),l.$$.dirty[0]&1&&t(20,o=d.agent_version),l.$$.dirty[0]&1048576&&t(13,a=o&&o!==Nu),l.$$.dirty[0]&8&&t(12,c=y&&(y.cpu>80||y.mem>80||y.disk>80)),l.$$.dirty[0]&1&&t(11,f=wf(d.size_slug||d.size||"")),l.$$.dirty[0]&2097172&&i&&!C&&p&&(E(),q())},[d,v,C,y,i,s,m,g,k,S,n,f,c,a,D,z,N,B,O,F,o,p,J,H,A,M]}class Tf extends yt{constructor(e){super(),wt(this,e,Sf,$f,$t,{server:0,showProject:1},null,[-1,-1])}}function ks(l,e,t){const n=l.slice();return n[92]=e[t],n}function $s(l,e,t){const n=l.slice();return n[95]=e[t],n}function ws(l,e,t){const n=l.slice();return n[92]=e[t],n}function ys(l,e,t){const n=l.slice();return n[100]=e[t],n}function Cs(l,e,t){const n=l.slice();return n[103]=e[t],n}function Ss(l,e,t){const n=l.slice();return n[106]=e[t],n}function Ts(l,e,t){const n=l.slice();return n[106]=e[t],n}function Ds(l,e,t){const n=l.slice();return n[111]=e[t],n}function qs(l,e,t){const n=l.slice();return n[114]=e[t],n}function zs(l,e,t){const n=l.slice();return n[117]=e[t],n}function Es(l){let e,t=l[117]+"",n,s;return{c(){e=_("option"),n=T(t),e.__value=s=l[117],ne(e,e.__value)},m(i,o){w(i,e,o),r(e,n)},p(i,o){o[1]&8&&t!==(t=i[117]+"")&&j(n,t),o[1]&8&&s!==(s=i[117])&&(e.__value=s,ne(e,e.__value))},d(i){i&&$(e)}}}function Ps(l){let e,t=l[114]+"",n,s;return{c(){e=_("option"),n=T(t),e.__value=s=l[114],ne(e,e.__value)},m(i,o){w(i,e,o),r(e,n)},p(i,o){o[1]&4&&t!==(t=i[114]+"")&&j(n,t),o[1]&4&&s!==(s=i[114])&&(e.__value=s,ne(e,e.__value))},d(i){i&&$(e)}}}function Ls(l){let e,t,n,s;const i=[zf,qf,Df],o=[];function a(c,f){return c[29]?0:c[32].length?2:1}return t=a(l),n=o[t]=i[t](l),{c(){e=_("div"),n.c(),u(e,"class","section-content svelte-kvdz4s")},m(c,f){w(c,e,f),o[t].m(e,null),s=!0},p(c,f){let p=t;t=a(c),t===p?o[t].p(c,f):(Te(),R(o[p],1,1,()=>{o[p]=null}),De(),n=o[t],n?n.p(c,f):(n=o[t]=i[t](c),n.c()),L(n,1),n.m(e,null))},i(c){s||(L(n),s=!0)},o(c){R(n),s=!1},d(c){c&&$(e),o[t].d()}}}function Df(l){let e=[],t=new Map,n,s,i=ve(l[32]);const o=a=>a[111].id;for(let a=0;a<i.length;a+=1){let c=Ds(l,i,a),f=o(c);t.set(f,e[a]=Ns(f,c))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();n=Ie()},m(a,c){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(a,c);w(a,n,c),s=!0},p(a,c){c[1]&6146&&(i=ve(a[32]),Te(),e=Ua(e,c,o,1,a,i,t,n.parentNode,Ba,Ns,n,Ds),De())},i(a){if(!s){for(let c=0;c<i.length;c+=1)L(e[c]);s=!0}},o(a){for(let c=0;c<e.length;c+=1)R(e[c]);s=!1},d(a){a&&$(n);for(let c=0;c<e.length;c+=1)e[c].d(a)}}}function qf(l){let e;function t(i,o){return i[1]||i[2]?Pf:Ef}let n=t(l),s=n(l);return{c(){e=_("div"),s.c(),u(e,"class","empty-msg svelte-kvdz4s")},m(i,o){w(i,e,o),s.m(e,null)},p(i,o){n!==(n=t(i))&&(s.d(1),s=n(i),s&&(s.c(),s.m(e,null)))},i:be,o:be,d(i){i&&$(e),s.d()}}}function zf(l){let e;return{c(){e=_("div"),e.innerHTML='<div class="skeleton-card svelte-kvdz4s"></div> <div class="skeleton-card svelte-kvdz4s"></div>',u(e,"class","loading-skeleton svelte-kvdz4s")},m(t,n){w(t,e,n)},p:be,i:be,o:be,d(t){t&&$(e)}}}function Ns(l,e){let t,n,s;return n=new Tf({props:{server:e[111]}}),n.$on("destroy",e[42]),n.$on("viewLogs",e[43]),{key:l,first:null,c(){t=Ie(),_e(n.$$.fragment),this.first=t},m(i,o){w(i,t,o),fe(n,i,o),s=!0},p(i,o){e=i;const a={};o[1]&2&&(a.server=e[111]),n.$set(a)},i(i){s||(L(n.$$.fragment,i),s=!0)},o(i){R(n.$$.fragment,i),s=!1},d(i){i&&$(t),pe(n,i)}}}function Ef(l){let e;return{c(){e=T('No servers. Click "+ Add" to provision.')},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Pf(l){let e;return{c(){e=T("No servers match filters")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Rs(l){let e,t,n,s,i,o,a,c;const f=[Rf,Nf,Lf],p=[];function d(g,C){return g[20]===null?0:g[20].exists?1:2}i=d(l),o=p[i]=f[i](l);function v(g,C){return g[5]?Ff:g[4].length?Of:jf}let h=v(l),m=h(l);return{c(){e=_("div"),t=_("div"),n=_("span"),n.textContent="Base Snapshot:",s=b(),o.c(),a=b(),m.c(),u(n,"class","base-label svelte-kvdz4s"),u(t,"class","base-snapshot-row svelte-kvdz4s"),u(e,"class","section-content svelte-kvdz4s")},m(g,C){w(g,e,C),r(e,t),r(t,n),r(t,s),p[i].m(t,null),r(e,a),m.m(e,null),c=!0},p(g,C){let k=i;i=d(g),i===k?p[i].p(g,C):(Te(),R(p[k],1,1,()=>{p[k]=null}),De(),o=p[i],o?o.p(g,C):(o=p[i]=f[i](g),o.c()),L(o,1),o.m(t,null)),h===(h=v(g))&&m?m.p(g,C):(m.d(1),m=h(g),m&&(m.c(),m.m(e,null)))},i(g){c||(L(o),c=!0)},o(g){R(o),c=!1},d(g){g&&$(e),p[i].d(),m.d()}}}function Lf(l){let e,t,n,s;return e=new Ke({props:{variant:"warning",$$slots:{default:[Mf]},$$scope:{ctx:l}}}),{c(){_e(e.$$.fragment),t=b(),n=_("span"),n.textContent='Use "+ Build" to create',u(n,"class","base-hint svelte-kvdz4s")},m(i,o){fe(e,i,o),w(i,t,o),w(i,n,o),s=!0},p(i,o){const a={};o[3]&134217728&&(a.$$scope={dirty:o,ctx:i}),e.$set(a)},i(i){s||(L(e.$$.fragment,i),s=!0)},o(i){R(e.$$.fragment,i),s=!1},d(i){i&&($(t),$(n)),pe(e,i)}}}function Nf(l){let e,t;return e=new Ke({props:{variant:"success",$$slots:{default:[Af]},$$scope:{ctx:l}}}),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const i={};s[0]&1048576|s[3]&134217728&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(L(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){pe(e,n)}}}function Rf(l){let e;return{c(){e=_("span"),e.textContent="checking...",u(e,"class","base-status checking svelte-kvdz4s")},m(t,n){w(t,e,n)},p:be,i:be,o:be,d(t){t&&$(e)}}}function Mf(l){let e;return{c(){e=T("Not found")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Af(l){let e,t=l[20].name+"",n;return{c(){e=T("✓ "),n=T(t)},m(s,i){w(s,e,i),w(s,n,i)},p(s,i){i[0]&1048576&&t!==(t=s[20].name+"")&&j(n,t)},d(s){s&&($(e),$(n))}}}function Of(l){let e,t=ve(l[4]),n=[];for(let s=0;s<t.length;s+=1)n[s]=Ms(Ts(l,t,s));return{c(){e=_("div");for(let s=0;s<n.length;s+=1)n[s].c();u(e,"class","snapshots-grid svelte-kvdz4s")},m(s,i){w(s,e,i);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null)},p(s,i){if(i[0]&16|i[1]&256){t=ve(s[4]);let o;for(o=0;o<t.length;o+=1){const a=Ts(s,t,o);n[o]?n[o].p(a,i):(n[o]=Ms(a),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=t.length}},d(s){s&&$(e),Ee(n,s)}}}function jf(l){let e;return{c(){e=_("div"),e.textContent="No custom snapshots",u(e,"class","empty-msg svelte-kvdz4s")},m(t,n){w(t,e,n)},p:be,d(t){t&&$(e)}}}function Ff(l){let e;return{c(){e=_("div"),e.textContent="Loading...",u(e,"class","empty-msg svelte-kvdz4s")},m(t,n){w(t,e,n)},p:be,d(t){t&&$(e)}}}function Ms(l){let e,t,n=l[106].name+"",s,i,o,a=Ks(l[106].size_gigabytes*1024*1024*1024)+"",c,f,p=Qs(l[106].created_at)+"",d,v,h,m,g,C;function k(){return l[62](l[106])}return{c(){e=_("div"),t=_("span"),s=T(n),i=b(),o=_("span"),c=T(a),f=T(" • "),d=T(p),v=b(),h=_("button"),h.textContent="×",m=b(),u(t,"class","snap-name svelte-kvdz4s"),u(o,"class","snap-meta svelte-kvdz4s"),u(h,"class","pill-del svelte-kvdz4s"),u(h,"title","Delete"),u(e,"class","snapshot-pill svelte-kvdz4s")},m(y,S){w(y,e,S),r(e,t),r(t,s),r(e,i),r(e,o),r(o,c),r(o,f),r(o,d),r(e,v),r(e,h),r(e,m),g||(C=le(h,"click",k),g=!0)},p(y,S){l=y,S[0]&16&&n!==(n=l[106].name+"")&&j(s,n),S[0]&16&&a!==(a=Ks(l[106].size_gigabytes*1024*1024*1024)+"")&&j(c,a),S[0]&16&&p!==(p=Qs(l[106].created_at)+"")&&j(d,p)},d(y){y&&$(e),g=!1,C()}}}function As(l){let e,t=l[106].name+"",n,s;return{c(){e=_("option"),n=T(t),e.__value=s=l[106].id,ne(e,e.__value)},m(i,o){w(i,e,o),r(e,n)},p(i,o){o[0]&16&&t!==(t=i[106].name+"")&&j(n,t),o[0]&16&&s!==(s=i[106].id)&&(e.__value=s,ne(e,e.__value))},d(i){i&&$(e)}}}function Os(l){let e;return{c(){e=_("option"),e.textContent="No base snapshot - create one first",e.__value="",ne(e,e.__value)},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function js(l){let e,t=l[103].label+"",n;return{c(){e=_("option"),n=T(t),e.__value=l[103].value,ne(e,e.__value)},m(s,i){w(s,e,i),r(e,n)},p:be,d(s){s&&$(e)}}}function Fs(l){let e,t=(l[100].description||l[100].slug)+"",n,s;return{c(){e=_("option"),n=T(t),e.__value=s=l[100].slug,ne(e,e.__value)},m(i,o){w(i,e,o),r(e,n)},p(i,o){o[0]&268435456&&t!==(t=(i[100].description||i[100].slug)+"")&&j(n,t),o[0]&268435456&&s!==(s=i[100].slug)&&(e.__value=s,ne(e,e.__value))},d(i){i&&$(e)}}}function Is(l){let e,t,n,s,i,o=ve(l[9]),a=[];for(let f=0;f<o.length;f+=1)a[f]=Bs(ws(l,o,f));let c=l[10]&&Us();return{c(){e=_("div"),t=_("label"),t.textContent="📋 Progress",n=b(),s=_("div");for(let f=0;f<a.length;f+=1)a[f].c();i=b(),c&&c.c(),u(t,"class","svelte-kvdz4s"),u(s,"class","operation-logs svelte-kvdz4s"),u(e,"class","operation-logs-section svelte-kvdz4s")},m(f,p){w(f,e,p),r(e,t),r(e,n),r(e,s);for(let d=0;d<a.length;d+=1)a[d]&&a[d].m(s,null);r(s,i),c&&c.m(s,null)},p(f,p){if(p[0]&512){o=ve(f[9]);let d;for(d=0;d<o.length;d+=1){const v=ws(f,o,d);a[d]?a[d].p(v,p):(a[d]=Bs(v),a[d].c(),a[d].m(s,i))}for(;d<a.length;d+=1)a[d].d(1);a.length=o.length}f[10]?c||(c=Us(),c.c(),c.m(s,null)):c&&(c.d(1),c=null)},d(f){f&&$(e),Ee(a,f),c&&c.d()}}}function Bs(l){let e,t=l[92].message+"",n,s;return{c(){e=_("div"),n=T(t),u(e,"class",s="log-entry log-"+l[92].type+" svelte-kvdz4s")},m(i,o){w(i,e,o),r(e,n)},p(i,o){o[0]&512&&t!==(t=i[92].message+"")&&j(n,t),o[0]&512&&s!==(s="log-entry log-"+i[92].type+" svelte-kvdz4s")&&u(e,"class",s)},d(i){i&&$(e)}}}function Us(l){let e;return{c(){e=_("div"),e.innerHTML='<span class="spinner svelte-kvdz4s">⏳</span> Provisioning...',u(e,"class","log-entry log-info svelte-kvdz4s")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function If(l){let e,t,n,s,i,o,a=l[4].filter(Xs).length===0,c,f,p,d,v,h,m,g,C,k,y,S,D,z,E=ve(l[4].filter(xs)),q=[];for(let A=0;A<E.length;A+=1)q[A]=As(Ss(l,E,A));let N=a&&Os(),B=ve(l[37]),O=[];for(let A=0;A<B.length;A+=1)O[A]=js(Cs(l,B,A));let F=ve(l[28]),J=[];for(let A=0;A<F.length;A+=1)J[A]=Fs(ys(l,F,A));let H=(l[9].length>0||l[10])&&Is(l);return{c(){e=_("div"),t=_("div"),n=_("label"),n.textContent="Snapshot",s=b(),i=_("select");for(let A=0;A<q.length;A+=1)q[A].c();o=Ie(),N&&N.c(),c=b(),f=_("div"),p=_("label"),p.textContent="Region",d=b(),v=_("select");for(let A=0;A<O.length;A+=1)O[A].c();h=b(),m=_("div"),g=_("label"),g.textContent="Size",C=b(),k=_("select");for(let A=0;A<J.length;A+=1)J[A].c();y=b(),H&&H.c(),S=Ie(),u(n,"class","svelte-kvdz4s"),i.disabled=l[10],u(i,"class","svelte-kvdz4s"),l[27].snapshot_id===void 0&&Xe(()=>l[64].call(i)),u(t,"class","form-group full svelte-kvdz4s"),u(p,"class","svelte-kvdz4s"),v.disabled=l[10],u(v,"class","svelte-kvdz4s"),l[27].region===void 0&&Xe(()=>l[65].call(v)),u(f,"class","form-group svelte-kvdz4s"),u(g,"class","svelte-kvdz4s"),k.disabled=l[10],u(k,"class","svelte-kvdz4s"),l[27].size===void 0&&Xe(()=>l[66].call(k)),u(m,"class","form-group svelte-kvdz4s"),u(e,"class","form-grid svelte-kvdz4s")},m(A,M){w(A,e,M),r(e,t),r(t,n),r(t,s),r(t,i);for(let P=0;P<q.length;P+=1)q[P]&&q[P].m(i,null);r(i,o),N&&N.m(i,null),ze(i,l[27].snapshot_id,!0),r(e,c),r(e,f),r(f,p),r(f,d),r(f,v);for(let P=0;P<O.length;P+=1)O[P]&&O[P].m(v,null);ze(v,l[27].region,!0),r(e,h),r(e,m),r(m,g),r(m,C),r(m,k);for(let P=0;P<J.length;P+=1)J[P]&&J[P].m(k,null);ze(k,l[27].size,!0),w(A,y,M),H&&H.m(A,M),w(A,S,M),D||(z=[le(i,"change",l[64]),le(v,"change",l[65]),le(k,"change",l[66])],D=!0)},p(A,M){if(M[0]&16){E=ve(A[4].filter(xs));let P;for(P=0;P<E.length;P+=1){const I=Ss(A,E,P);q[P]?q[P].p(I,M):(q[P]=As(I),q[P].c(),q[P].m(i,o))}for(;P<q.length;P+=1)q[P].d(1);q.length=E.length}if(M[0]&16&&(a=A[4].filter(Xs).length===0),a?N||(N=Os(),N.c(),N.m(i,null)):N&&(N.d(1),N=null),M[0]&1024&&(i.disabled=A[10]),M[0]&134217744&&ze(i,A[27].snapshot_id),M[1]&64){B=ve(A[37]);let P;for(P=0;P<B.length;P+=1){const I=Cs(A,B,P);O[P]?O[P].p(I,M):(O[P]=js(I),O[P].c(),O[P].m(v,null))}for(;P<O.length;P+=1)O[P].d(1);O.length=B.length}if(M[0]&1024&&(v.disabled=A[10]),M[0]&134217744&&ze(v,A[27].region),M[0]&268435456){F=ve(A[28]);let P;for(P=0;P<F.length;P+=1){const I=ys(A,F,P);J[P]?J[P].p(I,M):(J[P]=Fs(I),J[P].c(),J[P].m(k,null))}for(;P<J.length;P+=1)J[P].d(1);J.length=F.length}M[0]&1024&&(k.disabled=A[10]),M[0]&134217744&&ze(k,A[27].size),A[9].length>0||A[10]?H?H.p(A,M):(H=Is(A),H.c(),H.m(S.parentNode,S)):H&&(H.d(1),H=null)},d(A){A&&($(e),$(y),$(S)),Ee(q,A),N&&N.d(),Ee(O,A),Ee(J,A),H&&H.d(A),D=!1,Ue(z)}}}function Bf(l){let e=l[9].length>0?"Close":"Cancel",t;return{c(){t=T(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&512&&e!==(e=n[9].length>0?"Close":"Cancel")&&j(t,e)},d(n){n&&$(t)}}}function Uf(l){let e;return{c(){e=T("🚀 Provision")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Hf(l){let e;return{c(){e=T("⏳ Provisioning...")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Gf(l){let e;function t(i,o){return i[10]?Hf:Uf}let n=t(l),s=n(l);return{c(){s.c(),e=Ie()},m(i,o){s.m(i,o),w(i,e,o)},p(i,o){n!==(n=t(i))&&(s.d(1),s=n(i),s&&(s.c(),s.m(e.parentNode,e)))},d(i){i&&$(e),s.d(i)}}}function Wf(l){let e,t,n,s,i;return t=new Be({props:{variant:"ghost",$$slots:{default:[Bf]},$$scope:{ctx:l}}}),t.$on("click",l[63]),s=new Be({props:{variant:"primary",disabled:l[10]||!l[27].snapshot_id,$$slots:{default:[Gf]},$$scope:{ctx:l}}}),s.$on("click",l[41]),{c(){e=_("div"),_e(t.$$.fragment),n=b(),_e(s.$$.fragment),u(e,"slot","footer")},m(o,a){w(o,e,a),fe(t,e,null),r(e,n),fe(s,e,null),i=!0},p(o,a){const c={};a[0]&512|a[3]&134217728&&(c.$$scope={dirty:a,ctx:o}),t.$set(c);const f={};a[0]&134218752&&(f.disabled=o[10]||!o[27].snapshot_id),a[0]&1024|a[3]&134217728&&(f.$$scope={dirty:a,ctx:o}),s.$set(f)},i(o){i||(L(t.$$.fragment,o),L(s.$$.fragment,o),i=!0)},o(o){R(t.$$.fragment,o),R(s.$$.fragment,o),i=!1},d(o){o&&$(e),pe(t),pe(s)}}}function Vf(l){let e=l[23]?"...":"↻",t;return{c(){t=T(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&8388608&&e!==(e=n[23]?"...":"↻")&&j(t,e)},d(n){n&&$(t)}}}function Jf(l){let e,t,n,s,i,o,a,c,f,p,d,v,h,m,g,C,k,y,S,D,z=(l[30]||"No logs")+"",E,q,N,B;return y=new Be({props:{variant:"ghost",size:"sm",disabled:l[23],$$slots:{default:[Vf]},$$scope:{ctx:l}}}),y.$on("click",l[44]),{c(){e=_("div"),t=_("div"),n=_("input"),s=b(),i=_("div"),o=_("label"),o.textContent="Lines:",a=b(),c=_("select"),f=_("option"),f.textContent="100",p=_("option"),p.textContent="200",d=_("option"),d.textContent="500",v=_("option"),v.textContent="1000",h=b(),m=_("label"),g=_("input"),C=T(`
      Auto-refresh`),k=b(),_e(y.$$.fragment),S=b(),D=_("pre"),E=T(z),u(n,"type","text"),u(n,"placeholder","Search logs..."),u(n,"class","svelte-kvdz4s"),u(t,"class","logs-search svelte-kvdz4s"),u(o,"class","svelte-kvdz4s"),f.__value=100,ne(f,f.__value),p.__value=200,ne(p,p.__value),d.__value=500,ne(d,d.__value),v.__value=1e3,ne(v,v.__value),u(c,"class","svelte-kvdz4s"),l[24]===void 0&&Xe(()=>l[71].call(c)),u(i,"class","logs-tail svelte-kvdz4s"),u(g,"type","checkbox"),u(g,"class","svelte-kvdz4s"),u(m,"class","logs-auto svelte-kvdz4s"),u(e,"class","logs-toolbar svelte-kvdz4s"),u(D,"class","logs-content large svelte-kvdz4s")},m(O,F){w(O,e,F),r(e,t),r(t,n),ne(n,l[6]),r(e,s),r(e,i),r(i,o),r(i,a),r(i,c),r(c,f),r(c,p),r(c,d),r(c,v),ze(c,l[24],!0),r(e,h),r(e,m),r(m,g),g.checked=l[25],r(m,C),r(e,k),fe(y,e,null),w(O,S,F),w(O,D,F),r(D,E),q=!0,N||(B=[le(n,"input",l[70]),le(c,"change",l[71]),le(c,"change",l[44]),le(g,"change",l[72]),le(g,"change",l[45])],N=!0)},p(O,F){F[0]&64&&n.value!==O[6]&&ne(n,O[6]),F[0]&16777216&&ze(c,O[24]),F[0]&33554432&&(g.checked=O[25]);const J={};F[0]&8388608&&(J.disabled=O[23]),F[0]&8388608|F[3]&134217728&&(J.$$scope={dirty:F,ctx:O}),y.$set(J),(!q||F[0]&1073741824)&&z!==(z=(O[30]||"No logs")+"")&&j(E,z)},i(O){q||(L(y.$$.fragment,O),q=!0)},o(O){R(y.$$.fragment,O),q=!1},d(O){O&&($(e),$(S),$(D)),pe(y),N=!1,Ue(B)}}}function Yf(l){let e;return{c(){e=T("Close")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Kf(l){var f;let e,t,n=(((f=l[30])==null?void 0:f.split(`
`).length)||0)+"",s,i,o,a,c;return a=new Be({props:{variant:"ghost",$$slots:{default:[Yf]},$$scope:{ctx:l}}}),a.$on("click",l[69]),{c(){e=_("div"),t=_("span"),s=T(n),i=T(" lines"),o=b(),_e(a.$$.fragment),u(t,"class","logs-count svelte-kvdz4s"),u(e,"slot","footer")},m(p,d){w(p,e,d),r(e,t),r(t,s),r(t,i),r(e,o),fe(a,e,null),c=!0},p(p,d){var h;(!c||d[0]&1073741824)&&n!==(n=(((h=p[30])==null?void 0:h.split(`
`).length)||0)+"")&&j(s,n);const v={};d[3]&134217728&&(v.$$scope={dirty:d,ctx:p}),a.$set(v)},i(p){c||(L(a.$$.fragment,p),c=!0)},o(p){R(a.$$.fragment,p),c=!1},d(p){p&&$(e),pe(a)}}}function Qf(l){let e,t,n,s,i,o,a,c,f,p,d,v,h,m,g,C,k,y,S,D,z,E,q,N,B,O,F,J,H=ve(l[35]),A=[];for(let M=0;M<H.length;M+=1)A[M]=Hs($s(l,H,M));return{c(){e=_("form"),t=_("div"),n=_("label"),n.textContent="Snapshot Name *",s=b(),i=_("input"),o=b(),a=_("div"),c=_("label"),c.textContent="Base Image",f=b(),p=_("select");for(let M=0;M<A.length;M+=1)A[M].c();d=b(),v=_("div"),h=_("label"),h.textContent="Pre-install",m=b(),g=_("div"),C=_("label"),k=_("input"),y=T(" Docker"),S=b(),D=_("label"),z=_("input"),E=T(" Nginx"),q=b(),N=_("label"),B=_("input"),O=T(" Certbot"),u(n,"for","snap-name"),u(n,"class","svelte-kvdz4s"),u(i,"id","snap-name"),u(i,"type","text"),u(i,"placeholder","my-custom-snapshot"),i.disabled=l[13],u(i,"class","svelte-kvdz4s"),u(t,"class","form-group svelte-kvdz4s"),u(c,"for","base-image"),u(c,"class","svelte-kvdz4s"),u(p,"id","base-image"),p.disabled=l[13],u(p,"class","svelte-kvdz4s"),l[16]===void 0&&Xe(()=>l[78].call(p)),u(a,"class","form-group svelte-kvdz4s"),u(h,"class","svelte-kvdz4s"),u(k,"type","checkbox"),k.disabled=l[13],u(k,"class","svelte-kvdz4s"),u(C,"class","checkbox-item svelte-kvdz4s"),u(z,"type","checkbox"),z.disabled=l[13],u(z,"class","svelte-kvdz4s"),u(D,"class","checkbox-item svelte-kvdz4s"),u(B,"type","checkbox"),B.disabled=l[13],u(B,"class","svelte-kvdz4s"),u(N,"class","checkbox-item svelte-kvdz4s"),u(g,"class","checkbox-list svelte-kvdz4s"),u(v,"class","form-group svelte-kvdz4s")},m(M,P){w(M,e,P),r(e,t),r(t,n),r(t,s),r(t,i),ne(i,l[15]),r(e,o),r(e,a),r(a,c),r(a,f),r(a,p);for(let I=0;I<A.length;I+=1)A[I]&&A[I].m(p,null);ze(p,l[16],!0),r(e,d),r(e,v),r(v,h),r(v,m),r(v,g),r(g,C),r(C,k),k.checked=l[17],r(C,y),r(g,S),r(g,D),r(D,z),z.checked=l[18],r(D,E),r(g,q),r(g,N),r(N,B),B.checked=l[19],r(N,O),F||(J=[le(i,"input",l[77]),le(p,"change",l[78]),le(k,"change",l[79]),le(z,"change",l[80]),le(B,"change",l[81]),le(e,"submit",su(l[40]))],F=!0)},p(M,P){if(P[0]&8192&&(i.disabled=M[13]),P[0]&32768&&i.value!==M[15]&&ne(i,M[15]),P[1]&16){H=ve(M[35]);let I;for(I=0;I<H.length;I+=1){const V=$s(M,H,I);A[I]?A[I].p(V,P):(A[I]=Hs(V),A[I].c(),A[I].m(p,null))}for(;I<A.length;I+=1)A[I].d(1);A.length=H.length}P[0]&8192&&(p.disabled=M[13]),P[0]&65536|P[1]&16&&ze(p,M[16]),P[0]&8192&&(k.disabled=M[13]),P[0]&131072&&(k.checked=M[17]),P[0]&8192&&(z.disabled=M[13]),P[0]&262144&&(z.checked=M[18]),P[0]&8192&&(B.disabled=M[13]),P[0]&524288&&(B.checked=M[19])},i:be,o:be,d(M){M&&$(e),Ee(A,M),F=!1,Ue(J)}}}function Zf(l){var o;let e,t,n,s,i=((o=l[20])==null?void 0:o.exists)&&Gs(l);return{c(){e=_("div"),t=_("p"),t.textContent="Creates the default base snapshot with Docker, Nginx, Certbot pre-installed. Required for provisioning new servers.",n=b(),i&&i.c(),u(t,"class","svelte-kvdz4s"),u(e,"class","snap-type-info svelte-kvdz4s")},m(a,c){w(a,e,c),r(e,t),r(e,n),i&&i.m(e,null),s=!0},p(a,c){var f;(f=a[20])!=null&&f.exists?i?(i.p(a,c),c[0]&1048576&&L(i,1)):(i=Gs(a),i.c(),L(i,1),i.m(e,null)):i&&(Te(),R(i,1,1,()=>{i=null}),De())},i(a){s||(L(i),s=!0)},o(a){R(i),s=!1},d(a){a&&$(e),i&&i.d()}}}function Hs(l){let e,t=l[95].label+"",n;return{c(){e=_("option"),n=T(t),e.__value=l[95].value,ne(e,e.__value)},m(s,i){w(s,e,i),r(e,n)},p:be,d(s){s&&$(e)}}}function Gs(l){let e,t;return e=new Ke({props:{variant:"warning",$$slots:{default:[Xf]},$$scope:{ctx:l}}}),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const i={};s[0]&1048576|s[3]&134217728&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(L(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){pe(e,n)}}}function Xf(l){let e,t=l[20].name+"",n;return{c(){e=T("⚠️ Base snapshot already exists: "),n=T(t)},m(s,i){w(s,e,i),w(s,n,i)},p(s,i){i[0]&1048576&&t!==(t=s[20].name+"")&&j(n,t)},d(s){s&&($(e),$(n))}}}function Ws(l){let e,t,n,s,i,o=ve(l[8]),a=[];for(let f=0;f<o.length;f+=1)a[f]=Vs(ks(l,o,f));let c=l[13]&&Js();return{c(){e=_("div"),t=_("label"),t.textContent="📋 Progress",n=b(),s=_("div");for(let f=0;f<a.length;f+=1)a[f].c();i=b(),c&&c.c(),u(t,"class","svelte-kvdz4s"),u(s,"class","operation-logs svelte-kvdz4s"),u(e,"class","operation-logs-section svelte-kvdz4s")},m(f,p){w(f,e,p),r(e,t),r(e,n),r(e,s);for(let d=0;d<a.length;d+=1)a[d]&&a[d].m(s,null);r(s,i),c&&c.m(s,null)},p(f,p){if(p[0]&256){o=ve(f[8]);let d;for(d=0;d<o.length;d+=1){const v=ks(f,o,d);a[d]?a[d].p(v,p):(a[d]=Vs(v),a[d].c(),a[d].m(s,i))}for(;d<a.length;d+=1)a[d].d(1);a.length=o.length}f[13]?c||(c=Js(),c.c(),c.m(s,null)):c&&(c.d(1),c=null)},d(f){f&&$(e),Ee(a,f),c&&c.d()}}}function Vs(l){let e,t=l[92].message+"",n,s;return{c(){e=_("div"),n=T(t),u(e,"class",s="log-entry log-"+l[92].type+" svelte-kvdz4s")},m(i,o){w(i,e,o),r(e,n)},p(i,o){o[0]&256&&t!==(t=i[92].message+"")&&j(n,t),o[0]&256&&s!==(s="log-entry log-"+i[92].type+" svelte-kvdz4s")&&u(e,"class",s)},d(i){i&&$(e)}}}function Js(l){let e;return{c(){e=_("div"),e.innerHTML='<span class="spinner svelte-kvdz4s">⏳</span> Working...',u(e,"class","log-entry log-info svelte-kvdz4s")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function xf(l){let e,t,n,s,i,o,a,c,f,p,d,v,h,m;const g=[Zf,Qf],C=[];function k(S,D){return S[14]==="base"?0:1}c=k(l),f=C[c]=g[c](l);let y=(l[8].length>0||l[13])&&Ws(l);return{c(){e=_("div"),t=_("button"),n=T("🏗️ Base Snapshot"),s=b(),i=_("button"),o=T("📸 Custom Snapshot"),a=b(),f.c(),p=b(),y&&y.c(),d=Ie(),u(t,"class","snap-type-btn svelte-kvdz4s"),t.disabled=l[13],$e(t,"active",l[14]==="base"),u(i,"class","snap-type-btn svelte-kvdz4s"),i.disabled=l[13],$e(i,"active",l[14]==="custom"),u(e,"class","snap-type-selector svelte-kvdz4s")},m(S,D){w(S,e,D),r(e,t),r(t,n),r(e,s),r(e,i),r(i,o),w(S,a,D),C[c].m(S,D),w(S,p,D),y&&y.m(S,D),w(S,d,D),v=!0,h||(m=[le(t,"click",l[75]),le(i,"click",l[76])],h=!0)},p(S,D){(!v||D[0]&8192)&&(t.disabled=S[13]),(!v||D[0]&16384)&&$e(t,"active",S[14]==="base"),(!v||D[0]&8192)&&(i.disabled=S[13]),(!v||D[0]&16384)&&$e(i,"active",S[14]==="custom");let z=c;c=k(S),c===z?C[c].p(S,D):(Te(),R(C[z],1,1,()=>{C[z]=null}),De(),f=C[c],f?f.p(S,D):(f=C[c]=g[c](S),f.c()),L(f,1),f.m(p.parentNode,p)),S[8].length>0||S[13]?y?y.p(S,D):(y=Ws(S),y.c(),y.m(d.parentNode,d)):y&&(y.d(1),y=null)},i(S){v||(L(f),v=!0)},o(S){R(f),v=!1},d(S){S&&($(e),$(a),$(p),$(d)),C[c].d(S),y&&y.d(S),h=!1,Ue(m)}}}function ep(l){let e=l[8].length>0?"Close":"Cancel",t;return{c(){t=T(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&256&&e!==(e=n[8].length>0?"Close":"Cancel")&&j(t,e)},d(n){n&&$(t)}}}function tp(l){let e;return{c(){e=T("🔨 Build")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function lp(l){let e;return{c(){e=T("⏳ Building...")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function np(l){let e;function t(i,o){return i[13]?lp:tp}let n=t(l),s=n(l);return{c(){s.c(),e=Ie()},m(i,o){s.m(i,o),w(i,e,o)},p(i,o){n!==(n=t(i))&&(s.d(1),s=n(i),s&&(s.c(),s.m(e.parentNode,e)))},d(i){i&&$(e),s.d(i)}}}function sp(l){let e,t,n,s,i;return t=new Be({props:{variant:"ghost",$$slots:{default:[ep]},$$scope:{ctx:l}}}),t.$on("click",l[74]),s=new Be({props:{variant:"primary",disabled:l[13],$$slots:{default:[np]},$$scope:{ctx:l}}}),s.$on("click",l[40]),{c(){e=_("div"),_e(t.$$.fragment),n=b(),_e(s.$$.fragment),u(e,"slot","footer")},m(o,a){w(o,e,a),fe(t,e,null),r(e,n),fe(s,e,null),i=!0},p(o,a){const c={};a[0]&256|a[3]&134217728&&(c.$$scope={dirty:a,ctx:o}),t.$set(c);const f={};a[0]&8192&&(f.disabled=o[13]),a[0]&8192|a[3]&134217728&&(f.$$scope={dirty:a,ctx:o}),s.$set(f)},i(o){i||(L(t.$$.fragment,o),L(s.$$.fragment,o),i=!0)},o(o){R(t.$$.fragment,o),R(s.$$.fragment,o),i=!1},d(o){o&&$(e),pe(t),pe(s)}}}function op(l){let e,t,n,s,i,o,a,c,f,p,d,v,h,m,g,C,k,y,S=Zs(l[7])+"",D,z,E,q,N,B,O,F=l[32].length+"",J,H,A,M=l[32].length===1?"SERVER":"SERVERS",P,I,V,ee,Q=l[31].containerCount+"",Z,oe,x,G=l[31].containerCount===1?"CONTAINER":"CONTAINERS",U,re,W,ae,te,Y=l[31].monthlyCost+"",de,ce,ie,X,K,me,ge=l[31].healthyContainers+"",He,at,ft=l[31].containerCount+"",Tt,qe,Oe,Re,st,Me,Le,Ge,ot,tt=l[11]?"▼":"▶",lt,Ve,Qe,Wt=Jl(l[32].length,"Server")+"",Dt,Zt,Ze,At,Et,Ot,it,dt,he,Pe,ct,jt,Ft=l[3]?"▼":"▶",Je,It,pl,il=Jl(l[4].length,"Snapshot")+"",_l,dl,Bt,Vt,bl,we,ye,Ye,ht,Mt,Ut,We,qt,Nl,vt,Rl,mt,kl,Ul,rl=ve(l[34]),Ct=[];for(let Se=0;Se<rl.length;Se+=1)Ct[Se]=Es(zs(l,rl,Se));let al=ve(l[33]),St=[];for(let Se=0;Se<al.length;Se+=1)St[Se]=Ps(qs(l,al,Se));let gt=l[11]&&Ls(l),bt=l[3]&&Rs(l);function cn(Se){l[67](Se)}let Hl={title:"Provision Server",width:"500px",$$slots:{footer:[Wf],default:[If]},$$scope:{ctx:l}};l[26]!==void 0&&(Hl.open=l[26]),ht=new xt({props:Hl}),Lt.push(()=>fl(ht,"open",cn)),ht.$on("close",l[68]);function un(Se){l[73](Se)}let Gl={title:l[22],width:"1000px",$$slots:{footer:[Kf],default:[Jf]},$$scope:{ctx:l}};l[21]!==void 0&&(Gl.open=l[21]),We=new xt({props:Gl}),Lt.push(()=>fl(We,"open",un));function fn(Se){l[82](Se)}let Wl={title:"Build Snapshot",width:"600px",$$slots:{footer:[sp],default:[xf]},$$scope:{ctx:l}};return l[12]!==void 0&&(Wl.open=l[12]),vt=new xt({props:Wl}),Lt.push(()=>fl(vt,"open",fn)),vt.$on("close",l[83]),{c(){e=_("div"),t=_("div"),n=_("div"),s=_("label"),s.textContent="Project",i=b(),o=_("select"),a=_("option"),a.textContent="All";for(let Se=0;Se<Ct.length;Se+=1)Ct[Se].c();c=b(),f=_("div"),p=_("label"),p.textContent="Env",d=b(),v=_("select"),h=_("option"),h.textContent="All";for(let Se=0;Se<St.length;Se+=1)St[Se].c();m=b(),g=_("div"),C=b(),k=_("span"),y=T("Updated "),D=T(S),z=b(),E=_("button"),E.textContent="↻",q=b(),N=_("div"),B=_("div"),O=_("span"),J=T(F),H=b(),A=_("span"),P=T(M),I=b(),V=_("div"),ee=_("span"),Z=T(Q),oe=b(),x=_("span"),U=T(G),re=b(),W=_("div"),ae=_("span"),te=T("£"),de=T(Y),ce=b(),ie=_("span"),ie.textContent="/MONTH",X=b(),K=_("div"),me=_("span"),He=T(ge),at=T("/"),Tt=T(ft),Oe=b(),Re=_("span"),Re.textContent="HEALTHY",st=b(),Me=_("div"),Le=_("div"),Ge=_("div"),ot=_("span"),lt=T(tt),Ve=b(),Qe=_("span"),Dt=T(Wt),Zt=b(),Ze=_("div"),At=_("button"),At.textContent="↻",Et=b(),Ot=_("button"),Ot.textContent="+ Add",it=b(),gt&&gt.c(),dt=b(),he=_("div"),Pe=_("div"),ct=_("div"),jt=_("span"),Je=T(Ft),It=b(),pl=_("span"),_l=T(il),dl=b(),Bt=_("div"),Vt=_("button"),Vt.textContent="↻",bl=b(),we=_("button"),we.textContent="+ Build",ye=b(),bt&&bt.c(),Ye=b(),_e(ht.$$.fragment),Ut=b(),_e(We.$$.fragment),Nl=b(),_e(vt.$$.fragment),u(s,"class","svelte-kvdz4s"),a.__value="",ne(a,a.__value),u(o,"class","svelte-kvdz4s"),l[1]===void 0&&Xe(()=>l[57].call(o)),u(n,"class","filter-group svelte-kvdz4s"),u(p,"class","svelte-kvdz4s"),h.__value="",ne(h,h.__value),u(v,"class","svelte-kvdz4s"),l[2]===void 0&&Xe(()=>l[58].call(v)),u(f,"class","filter-group svelte-kvdz4s"),u(g,"class","filter-spacer svelte-kvdz4s"),u(k,"class","last-updated svelte-kvdz4s"),u(E,"class","filter-refresh svelte-kvdz4s"),u(E,"title","Refresh"),u(t,"class","filter-bar svelte-kvdz4s"),u(O,"class","banner-value svelte-kvdz4s"),u(A,"class","banner-label svelte-kvdz4s"),u(B,"class","banner-metric svelte-kvdz4s"),u(ee,"class","banner-value svelte-kvdz4s"),u(x,"class","banner-label svelte-kvdz4s"),u(V,"class","banner-metric svelte-kvdz4s"),u(ae,"class","banner-value svelte-kvdz4s"),u(ie,"class","banner-label svelte-kvdz4s"),u(W,"class","banner-metric svelte-kvdz4s"),u(me,"class",qe="banner-value "+(l[31].unhealthyContainers>0?"warning":"success")+" svelte-kvdz4s"),u(Re,"class","banner-label svelte-kvdz4s"),u(K,"class","banner-metric svelte-kvdz4s"),u(N,"class","summary-banner svelte-kvdz4s"),u(ot,"class","expand-icon svelte-kvdz4s"),u(Ge,"class","section-title svelte-kvdz4s"),u(At,"class","section-btn svelte-kvdz4s"),u(Ot,"class","section-btn primary svelte-kvdz4s"),u(Ze,"class","section-actions svelte-kvdz4s"),u(Le,"class","section-header svelte-kvdz4s"),u(Me,"class","section svelte-kvdz4s"),$e(Me,"expanded",l[11]),u(jt,"class","expand-icon svelte-kvdz4s"),u(ct,"class","section-title svelte-kvdz4s"),u(Vt,"class","section-btn svelte-kvdz4s"),u(we,"class","section-btn primary svelte-kvdz4s"),u(Bt,"class","section-actions svelte-kvdz4s"),u(Pe,"class","section-header svelte-kvdz4s"),u(he,"class","section svelte-kvdz4s"),$e(he,"expanded",l[3]),u(e,"class","infrastructure svelte-kvdz4s")},m(Se,Ne){w(Se,e,Ne),r(e,t),r(t,n),r(n,s),r(n,i),r(n,o),r(o,a);for(let Pt=0;Pt<Ct.length;Pt+=1)Ct[Pt]&&Ct[Pt].m(o,null);ze(o,l[1],!0),r(t,c),r(t,f),r(f,p),r(f,d),r(f,v),r(v,h);for(let Pt=0;Pt<St.length;Pt+=1)St[Pt]&&St[Pt].m(v,null);ze(v,l[2],!0),r(t,m),r(t,g),r(t,C),r(t,k),r(k,y),r(k,D),r(t,z),r(t,E),r(e,q),r(e,N),r(N,B),r(B,O),r(O,J),r(B,H),r(B,A),r(A,P),r(N,I),r(N,V),r(V,ee),r(ee,Z),r(V,oe),r(V,x),r(x,U),r(N,re),r(N,W),r(W,ae),r(ae,te),r(ae,de),r(W,ce),r(W,ie),r(N,X),r(N,K),r(K,me),r(me,He),r(me,at),r(me,Tt),r(K,Oe),r(K,Re),r(e,st),r(e,Me),r(Me,Le),r(Le,Ge),r(Ge,ot),r(ot,lt),r(Ge,Ve),r(Ge,Qe),r(Qe,Dt),r(Le,Zt),r(Le,Ze),r(Ze,At),r(Ze,Et),r(Ze,Ot),r(Me,it),gt&&gt.m(Me,null),r(e,dt),r(e,he),r(he,Pe),r(Pe,ct),r(ct,jt),r(jt,Je),r(ct,It),r(ct,pl),r(pl,_l),r(Pe,dl),r(Pe,Bt),r(Bt,Vt),r(Bt,bl),r(Bt,we),r(he,ye),bt&&bt.m(he,null),w(Se,Ye,Ne),fe(ht,Se,Ne),w(Se,Ut,Ne),fe(We,Se,Ne),w(Se,Nl,Ne),fe(vt,Se,Ne),mt=!0,kl||(Ul=[le(o,"change",l[57]),le(v,"change",l[58]),le(E,"click",l[0]),le(At,"click",l[0]),le(Ot,"click",l[59]),le(Ze,"click",Pn(l[56])),le(Le,"click",l[60]),le(Vt,"click",l[38]),le(we,"click",l[36]),le(Bt,"click",Pn(l[55])),le(Pe,"click",l[61])],kl=!0)},p(Se,Ne){if(Ne[1]&8){rl=ve(Se[34]);let nt;for(nt=0;nt<rl.length;nt+=1){const vl=zs(Se,rl,nt);Ct[nt]?Ct[nt].p(vl,Ne):(Ct[nt]=Es(vl),Ct[nt].c(),Ct[nt].m(o,null))}for(;nt<Ct.length;nt+=1)Ct[nt].d(1);Ct.length=rl.length}if(Ne[0]&2|Ne[1]&8&&ze(o,Se[1]),Ne[1]&4){al=ve(Se[33]);let nt;for(nt=0;nt<al.length;nt+=1){const vl=qs(Se,al,nt);St[nt]?St[nt].p(vl,Ne):(St[nt]=Ps(vl),St[nt].c(),St[nt].m(v,null))}for(;nt<St.length;nt+=1)St[nt].d(1);St.length=al.length}Ne[0]&4|Ne[1]&4&&ze(v,Se[2]),(!mt||Ne[0]&128)&&S!==(S=Zs(Se[7])+"")&&j(D,S),(!mt||Ne[1]&2)&&F!==(F=Se[32].length+"")&&j(J,F),(!mt||Ne[1]&2)&&M!==(M=Se[32].length===1?"SERVER":"SERVERS")&&j(P,M),(!mt||Ne[1]&1)&&Q!==(Q=Se[31].containerCount+"")&&j(Z,Q),(!mt||Ne[1]&1)&&G!==(G=Se[31].containerCount===1?"CONTAINER":"CONTAINERS")&&j(U,G),(!mt||Ne[1]&1)&&Y!==(Y=Se[31].monthlyCost+"")&&j(de,Y),(!mt||Ne[1]&1)&&ge!==(ge=Se[31].healthyContainers+"")&&j(He,ge),(!mt||Ne[1]&1)&&ft!==(ft=Se[31].containerCount+"")&&j(Tt,ft),(!mt||Ne[1]&1&&qe!==(qe="banner-value "+(Se[31].unhealthyContainers>0?"warning":"success")+" svelte-kvdz4s"))&&u(me,"class",qe),(!mt||Ne[0]&2048)&&tt!==(tt=Se[11]?"▼":"▶")&&j(lt,tt),(!mt||Ne[1]&2)&&Wt!==(Wt=Jl(Se[32].length,"Server")+"")&&j(Dt,Wt),Se[11]?gt?(gt.p(Se,Ne),Ne[0]&2048&&L(gt,1)):(gt=Ls(Se),gt.c(),L(gt,1),gt.m(Me,null)):gt&&(Te(),R(gt,1,1,()=>{gt=null}),De()),(!mt||Ne[0]&2048)&&$e(Me,"expanded",Se[11]),(!mt||Ne[0]&8)&&Ft!==(Ft=Se[3]?"▼":"▶")&&j(Je,Ft),(!mt||Ne[0]&16)&&il!==(il=Jl(Se[4].length,"Snapshot")+"")&&j(_l,il),Se[3]?bt?(bt.p(Se,Ne),Ne[0]&8&&L(bt,1)):(bt=Rs(Se),bt.c(),L(bt,1),bt.m(he,null)):bt&&(Te(),R(bt,1,1,()=>{bt=null}),De()),(!mt||Ne[0]&8)&&$e(he,"expanded",Se[3]);const Pt={};Ne[0]&469763600|Ne[3]&134217728&&(Pt.$$scope={dirty:Ne,ctx:Se}),!Mt&&Ne[0]&67108864&&(Mt=!0,Pt.open=Se[26],ul(()=>Mt=!1)),ht.$set(Pt);const $l={};Ne[0]&4194304&&($l.title=Se[22]),Ne[0]&1134559296|Ne[3]&134217728&&($l.$$scope={dirty:Ne,ctx:Se}),!qt&&Ne[0]&2097152&&(qt=!0,$l.open=Se[21],ul(()=>qt=!1)),We.$set($l);const Ml={};Ne[0]&2093312|Ne[3]&134217728&&(Ml.$$scope={dirty:Ne,ctx:Se}),!Rl&&Ne[0]&4096&&(Rl=!0,Ml.open=Se[12],ul(()=>Rl=!1)),vt.$set(Ml)},i(Se){mt||(L(gt),L(bt),L(ht.$$.fragment,Se),L(We.$$.fragment,Se),L(vt.$$.fragment,Se),mt=!0)},o(Se){R(gt),R(bt),R(ht.$$.fragment,Se),R(We.$$.fragment,Se),R(vt.$$.fragment,Se),mt=!1},d(Se){Se&&($(e),$(Ye),$(Ut),$(Nl)),Ee(Ct,Se),Ee(St,Se),gt&&gt.d(),bt&&bt.d(),pe(ht,Se),pe(We,Se),pe(vt,Se),kl=!1,Ue(Ul)}}}function Ys(l){return l!=null&&l.length?l.reduce((e,t)=>{const n=t.size_slug||t.size||"";return n.includes("4gb")?e+24:n.includes("2gb")?e+12:n.includes("1gb")?e+6:n.includes("512mb")?e+4:e+6},0):0}function Jl(l,e,t=null){return l===1?`${l} ${e}`:`${l} ${t||e+"s"}`}function Ks(l){if(!l)return"0 B";const e=1024,t=["B","KB","MB","GB"],n=Math.floor(Math.log(l)/Math.log(e));return parseFloat((l/Math.pow(e,n)).toFixed(1))+" "+t[n]}function Qs(l){return l?new Date(l).toLocaleDateString("en-GB",{day:"2-digit",month:"short"}):""}function Zs(l){if(!l)return"never";const t=Math.floor((new Date-l)/1e3);return t<5?"just now":t<60?`${t}s ago`:t<3600?`${Math.floor(t/60)}m ago`:l.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"})}const Xs=l=>{var e;return(e=l.name)==null?void 0:e.startsWith("base-")},xs=l=>{var e;return(e=l.name)==null?void 0:e.startsWith("base-")};function ip(l,e,t){let n,s,i,o,a,c,f,p,d,v,h,m;_t(l,Fl,we=>t(50,p=we)),_t(l,Ja,we=>t(51,d=we)),_t(l,Kt,we=>t(52,v=we)),_t(l,Ya,we=>t(53,h=we)),_t(l,qn,we=>t(54,m=we));let g="",C="",k=null,y=[],S=[],D=!1,z=!0,E=!1,q=[],N=!1,B=!1,O=!1,F="custom",J="",H="ubuntu-22-04-x64",A=!0,M=!0,P=!0,I=null;const V=[{value:"ubuntu-22-04-x64",label:"Ubuntu 22.04 LTS"},{value:"ubuntu-20-04-x64",label:"Ubuntu 20.04 LTS"},{value:"debian-11-x64",label:"Debian 11"},{value:"debian-12-x64",label:"Debian 12"}];function ee(){t(14,F=I!=null&&I.exists?"custom":"base"),t(12,B=!0)}let Q=null;async function Z(){if(d)try{t(47,Q=await Fe("GET",`/infra/fleet/health?do_token=${d}`))}catch(we){console.error("Failed to load fleet health:",we)}finally{}}let oe=!1,x="",G="",U=!1,re=null,W=null,ae="",te=200,Y=!1,de=null,ce=!1,ie={region:"lon1",size:"s-2vcpu-2gb",snapshot_id:""};const X=[{value:"lon1",label:"London 1"},{value:"fra1",label:"Frankfurt 1"},{value:"ams3",label:"Amsterdam 3"},{value:"nyc1",label:"New York 1"},{value:"nyc3",label:"New York 3"},{value:"sfo3",label:"San Francisco 3"},{value:"sgp1",label:"Singapore 1"},{value:"blr1",label:"Bangalore 1"},{value:"tor1",label:"Toronto 1"},{value:"syd1",label:"Sydney 1"}];let K=[{slug:"s-1vcpu-512mb-10gb",memory:512,vcpus:1,price_monthly:4,description:"$4/mo - 512MB / 1 vCPU"},{slug:"s-1vcpu-1gb",memory:1024,vcpus:1,price_monthly:6,description:"$6/mo - 1GB / 1 vCPU"},{slug:"s-2vcpu-2gb",memory:2048,vcpus:2,price_monthly:18,description:"$18/mo - 2GB / 2 vCPU"},{slug:"s-2vcpu-4gb",memory:4096,vcpus:2,price_monthly:24,description:"$24/mo - 4GB / 2 vCPU"},{slug:"s-4vcpu-8gb",memory:8192,vcpus:4,price_monthly:48,description:"$48/mo - 8GB / 4 vCPU"}];async function me(){var we;try{const ye=await Fe("GET","/infra/sizes");((we=ye.sizes)==null?void 0:we.length)>0&&t(28,K=ye.sizes)}catch{console.warn("Using fallback sizes")}}hl(()=>{me()});async function ge(){t(5,N=!0);try{const we=await Fe("GET",`/infra/snapshots?do_token=${d}`);t(4,q=we.snapshots||[]),He()}catch(we){console.error("Failed to load snapshots:",we)}finally{t(5,N=!1)}}function He(){const we=q.find(ye=>{var Ye;return(Ye=ye.name)==null?void 0:Ye.toLowerCase().startsWith("base-")});we?t(20,I={exists:!0,name:we.name,created_at:we.created_at}):t(20,I={exists:!1})}async function at(we,ye){if(confirm(`Delete snapshot "${ye}"?`))try{await Fe("DELETE",`/infra/snapshots/${we}?do_token=${d}`),Ce.success(`Deleted ${ye}`),t(4,q=q.filter(Ye=>Ye.id!==we))}catch(Ye){Ce.error(`Failed: ${Ye.message}`)}}async function ft(){t(13,O=!0),t(8,y=[]);const we=(ye,Ye="info")=>{t(8,y=[...y,{message:ye,type:Ye,time:new Date}])};try{if(F==="base")we("Starting base snapshot creation..."),await Kl("POST",`/infra/setup/init/stream?do_token=${d}`,{},ye=>{var Ye;ye.type==="log"?we(ye.message||((Ye=ye.data)==null?void 0:Ye.message),"info"):ye.type==="progress"?ye.message&&we(ye.message,"info"):ye.type==="error"?we(ye.message||ye.error,"error"):ye.type==="done"||ye.type==="complete"?ye.success?we("✅ Base snapshot created successfully!","success"):we(`❌ ${ye.message||ye.error||"Failed"}`,"error"):ye.message&&we(ye.message,"info")}),await He(),await ge(),Ce.success("Base snapshot created!");else{if(!J){Ce.error("Snapshot name required"),t(13,O=!1);return}if(J.toLowerCase().startsWith("base-")){Ce.error('Custom snapshots cannot start with "base-"'),t(13,O=!1);return}we(`Starting custom snapshot "${J}"...`),await Kl("POST",`/infra/snapshots/ensure/stream?do_token=${d}`,{name:J,base_image:H,install_docker:A,install_nginx:M,install_certbot:P},ye=>{var Ye;ye.type==="log"?we(ye.message||((Ye=ye.data)==null?void 0:Ye.message),"info"):ye.type==="progress"?ye.message&&we(ye.message,"info"):ye.type==="error"?we(ye.message||ye.error,"error"):ye.type==="done"||ye.type==="complete"?ye.success?we("✅ Snapshot created successfully!","success"):we(`❌ ${ye.message||ye.error||"Failed"}`,"error"):ye.message&&we(ye.message,"info")}),await ge(),Ce.success("Custom snapshot created!"),t(15,J="")}}catch(ye){we(`❌ Error: ${ye.message}`,"error"),Ce.error(ye.message)}finally{t(13,O=!1)}}async function Tt(){t(10,D=!0),t(9,S=[]);const we=(ye,Ye="info")=>{t(9,S=[...S,{message:ye,type:Ye,time:new Date}])};try{we("Starting provisioning..."),await Kl("POST",`/infra/servers/provision/stream?do_token=${d}`,{snapshot_id:ie.snapshot_id||null,region:ie.region,size:ie.size},ye=>{var Ye;ye.type==="log"?we(ye.message||((Ye=ye.data)==null?void 0:Ye.message),"info"):ye.type==="progress"?we(ye.message||`Progress: ${ye.percent||""}%`,"info"):ye.type==="error"?we(ye.message||ye.error,"error"):ye.type==="done"||ye.type==="complete"?ye.success?we(`✅ Server provisioned! IP: ${ye.ip||"pending"}`,"success"):we(`❌ ${ye.message||ye.error||"Failed"}`,"error"):ye.message&&we(ye.message,"info")}),Ce.success("Server provisioned"),Kt.refresh()}catch(ye){we(`❌ Error: ${ye.message}`,"error"),Ce.error("Failed: "+ye.message)}finally{t(10,D=!1)}}async function qe(we){const{server:ye}=we.detail;if(we.type==="destroy"&&confirm(`Destroy ${ye.name}? This cannot be undone.`))try{await Fe("DELETE",`/infra/servers/${ye.id}?do_token=${d}`),Ce.success(`Destroyed ${ye.name}`),Kt.refresh()}catch(ht){Ce.error(`Failed: ${ht.message}`)}}async function Oe(we){var Mt,Ut,We;const{server:ye,containerName:Ye}=we.detail,ht=ye.ip||((We=(Ut=(Mt=ye.networks)==null?void 0:Mt.v4)==null?void 0:Ut[0])==null?void 0:We.ip_address);re=ht,W=Ye,t(22,x=`📋 ${Ye} @ ${ht}`),t(48,G=""),t(6,ae=""),t(21,oe=!0),t(23,U=!0);try{const qt=await Fe("GET",`/infra/agent/${ht}/containers/${Ye}/logs?do_token=${d}&tail=${te}`);t(48,G=qt.logs||"No logs available")}catch(qt){t(48,G=`Error: ${qt.message}`)}finally{t(23,U=!1)}}async function Re(){if(!(!re||!W)){t(23,U=!0);try{const we=await Fe("GET",`/infra/agent/${re}/containers/${W}/logs?do_token=${d}&tail=${te}`);t(48,G=we.logs||"No logs available")}catch(we){t(48,G=`Error: ${we.message}`)}finally{t(23,U=!1)}}}function st(){Y?de=setInterval(Re,3e3):Me()}function Me(){de&&(clearInterval(de),de=null),t(25,Y=!1)}function Le(){Kt.refresh(),t(7,k=new Date)}function Ge(we){xl.call(this,l,we)}function ot(we){xl.call(this,l,we)}function tt(){g=pt(this),t(1,g),t(34,n),t(50,p),t(54,m),t(53,h)}function lt(){C=pt(this),t(2,C),t(33,s),t(50,p)}const Ve=()=>t(26,ce=!0),Qe=()=>t(11,z=!z),Wt=()=>t(3,E=!E),Dt=we=>at(we.id,we.name),Zt=()=>{t(26,ce=!1),t(9,S=[])};function Ze(){ie.snapshot_id=pt(this),t(27,ie),t(4,q)}function At(){ie.region=pt(this),t(27,ie),t(4,q)}function Et(){ie.size=pt(this),t(27,ie),t(4,q)}function Ot(we){ce=we,t(26,ce)}const it=()=>{t(26,ce=!1),t(9,S=[])},dt=()=>{t(21,oe=!1),Me()};function he(){ae=this.value,t(6,ae)}function Pe(){te=pt(this),t(24,te)}function ct(){Y=this.checked,t(25,Y)}function jt(we){oe=we,t(21,oe)}const Ft=()=>{t(12,B=!1),t(8,y=[])},Je=()=>t(14,F="base"),It=()=>t(14,F="custom");function pl(){J=this.value,t(15,J)}function il(){H=pt(this),t(16,H),t(35,V)}function _l(){A=this.checked,t(17,A)}function dl(){M=this.checked,t(18,M)}function Bt(){P=this.checked,t(19,P)}function Vt(we){B=we,t(12,B)}const bl=()=>{t(12,B=!1),t(8,y=[])};return l.$$.update=()=>{var we,ye,Ye,ht,Mt,Ut;l.$$.dirty[1]&13107200&&t(34,n=[...new Set([...(p||[]).map(We=>We.project).filter(Boolean),...m||[],...(h||[]).map(We=>We.project).filter(Boolean)])].sort()),l.$$.dirty[1]&524288&&t(33,s=[...new Set([...(p||[]).map(We=>We.env||We.environment).filter(Boolean),"prod","staging","dev"])].sort()),l.$$.dirty[0]&6|l.$$.dirty[1]&524288&&t(32,i=(p||[]).filter(We=>!(g&&We.project!==g||C&&(We.env||We.environment)!==C))),l.$$.dirty[0]&56&&E&&q.length===0&&!N&&ge(),l.$$.dirty[1]&589824&&t(31,o=Q?{serverCount:((we=Q.summary)==null?void 0:we.total)||(p==null?void 0:p.length)||0,containerCount:((ye=Q.servers)==null?void 0:ye.reduce((We,qt)=>We+(qt.containers||0),0))||0,healthyContainers:((Ye=Q.servers)==null?void 0:Ye.reduce((We,qt)=>We+(qt.healthy||0),0))||0,unhealthyContainers:((ht=Q.servers)==null?void 0:ht.reduce((We,qt)=>We+(qt.unhealthy||0),0))||0,monthlyCost:Ys(p),health:((Mt=Q.summary)==null?void 0:Mt.healthy)===((Ut=Q.summary)==null?void 0:Ut.total)?"healthy":"degraded"}:{serverCount:(p==null?void 0:p.length)||0,containerCount:0,healthyContainers:0,unhealthyContainers:0,monthlyCost:Ys(p),health:"unknown"}),l.$$.dirty[1]&1114112&&!Q&&d&&Z(),l.$$.dirty[0]&64|l.$$.dirty[1]&131072&&t(30,a=ae?G.split(`
`).filter(We=>We.toLowerCase().includes(ae.toLowerCase())).join(`
`):G),l.$$.dirty[1]&2097152&&t(49,c=v||{loading:!1}),l.$$.dirty[1]&262144&&t(29,f=c.loading),l.$$.dirty[1]&524288&&p&&t(7,k=new Date)},[Le,g,C,E,q,N,ae,k,y,S,D,z,B,O,F,J,H,A,M,P,I,oe,x,U,te,Y,ce,ie,K,f,a,o,i,s,n,V,ee,X,ge,at,ft,Tt,qe,Oe,Re,st,Me,Q,G,c,p,d,v,h,m,Ge,ot,tt,lt,Ve,Qe,Wt,Dt,Zt,Ze,At,Et,Ot,it,dt,he,Pe,ct,jt,Ft,Je,It,pl,il,_l,dl,Bt,Vt,bl]}class rp extends yt{constructor(e){super(),wt(this,e,ip,op,$t,{refresh:0},null,[-1,-1,-1,-1])}get refresh(){return this.$$.ctx[0]}}const ap="modulepreload",cp=function(l){return"/static/"+l},eo={},to=function(e,t,n){let s=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(t.map(c=>{if(c=cp(c),c in eo)return;eo[c]=!0;const f=c.endsWith(".css"),p=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${p}`))return;const d=document.createElement("link");if(d.rel=f?"stylesheet":ap,f||(d.as="script"),d.crossOrigin="",d.href=c,a&&d.setAttribute("nonce",a),document.head.appendChild(d),f)return new Promise((v,h)=>{d.addEventListener("load",v),d.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},up=l=>({}),lo=l=>({}),fp=l=>({}),no=l=>({});function so(l){let e,t,n,s=l[0]&&oo(l);const i=l[5].header,o=tl(i,l,l[4],no);return{c(){e=_("div"),s&&s.c(),t=b(),o&&o.c(),u(e,"class","card-header svelte-1qbuf8h")},m(a,c){w(a,e,c),s&&s.m(e,null),r(e,t),o&&o.m(e,null),n=!0},p(a,c){a[0]?s?s.p(a,c):(s=oo(a),s.c(),s.m(e,t)):s&&(s.d(1),s=null),o&&o.p&&(!n||c&16)&&nl(o,i,a,a[4],n?ll(i,a[4],c,fp):sl(a[4]),no)},i(a){n||(L(o,a),n=!0)},o(a){R(o,a),n=!1},d(a){a&&$(e),s&&s.d(),o&&o.d(a)}}}function oo(l){let e,t;return{c(){e=_("span"),t=T(l[0]),u(e,"class","card-title svelte-1qbuf8h")},m(n,s){w(n,e,s),r(e,t)},p(n,s){s&1&&j(t,n[0])},d(n){n&&$(e)}}}function io(l){let e,t;const n=l[5].footer,s=tl(n,l,l[4],lo);return{c(){e=_("div"),s&&s.c(),u(e,"class","card-footer svelte-1qbuf8h")},m(i,o){w(i,e,o),s&&s.m(e,null),t=!0},p(i,o){s&&s.p&&(!t||o&16)&&nl(s,n,i,i[4],t?ll(n,i[4],o,up):sl(i[4]),lo)},i(i){t||(L(s,i),t=!0)},o(i){R(s,i),t=!1},d(i){i&&$(e),s&&s.d(i)}}}function pp(l){let e,t,n,s,i,o=(l[0]||l[3].header)&&so(l);const a=l[5].default,c=tl(a,l,l[4],null);let f=l[3].footer&&io(l);return{c(){e=_("div"),o&&o.c(),t=b(),n=_("div"),c&&c.c(),s=b(),f&&f.c(),u(n,"class","card-body svelte-1qbuf8h"),u(e,"class","card svelte-1qbuf8h"),$e(e,"glass",l[1]),$e(e,"no-padding",!l[2])},m(p,d){w(p,e,d),o&&o.m(e,null),r(e,t),r(e,n),c&&c.m(n,null),r(e,s),f&&f.m(e,null),i=!0},p(p,[d]){p[0]||p[3].header?o?(o.p(p,d),d&9&&L(o,1)):(o=so(p),o.c(),L(o,1),o.m(e,t)):o&&(Te(),R(o,1,1,()=>{o=null}),De()),c&&c.p&&(!i||d&16)&&nl(c,a,p,p[4],i?ll(a,p[4],d,null):sl(p[4]),null),p[3].footer?f?(f.p(p,d),d&8&&L(f,1)):(f=io(p),f.c(),L(f,1),f.m(e,null)):f&&(Te(),R(f,1,1,()=>{f=null}),De()),(!i||d&2)&&$e(e,"glass",p[1]),(!i||d&4)&&$e(e,"no-padding",!p[2])},i(p){i||(L(o),L(c,p),L(f),i=!0)},o(p){R(o),R(c,p),R(f),i=!1},d(p){p&&$(e),o&&o.d(),c&&c.d(p),f&&f.d()}}}function _p(l,e,t){let{$$slots:n={},$$scope:s}=e;const i=Ra(n);let{title:o=""}=e,{glass:a=!1}=e,{padding:c=!0}=e;return l.$$set=f=>{"title"in f&&t(0,o=f.title),"glass"in f&&t(1,a=f.glass),"padding"in f&&t(2,c=f.padding),"$$scope"in f&&t(4,s=f.$$scope)},[o,a,c,i,s,n]}class ut extends yt{constructor(e){super(),wt(this,e,_p,pp,$t,{title:0,glass:1,padding:2})}}const{Boolean:an}=Oa;function ro(l,e,t){const n=l.slice();return n[176]=e[t],n}function ao(l,e,t){const n=l.slice();return n[176]=e[t],n}function co(l,e,t){const n=l.slice();return n[176]=e[t],n}function uo(l,e,t){const n=l.slice();return n[176]=e[t],n}function fo(l,e,t){const n=l.slice();return n[82]=e[t],n}function po(l,e,t){const n=l.slice();return n[187]=e[t],n}function _o(l,e,t){const n=l.slice();return n[190]=e[t],n}function vo(l,e,t){const n=l.slice();return n[193]=e[t],n}function mo(l,e,t){var i,o,a;const n=l.slice();n[176]=e[t];const s=n[176].ip||((a=(o=(i=n[176].networks)==null?void 0:i.v4)==null?void 0:o[0])==null?void 0:a.ip_address);return n[196]=s,n}function ho(l,e,t){var i,o,a;const n=l.slice();n[176]=e[t];const s=n[176].ip||((a=(o=(i=n[176].networks)==null?void 0:i.v4)==null?void 0:o[0])==null?void 0:a.ip_address);return n[196]=s,n}function go(l,e,t){const n=l.slice();return n[201]=e[t],n[203]=t,n}function dp(l){const e=l.slice(),t=e[28].find(s=>s.isMain);e[204]=t;const n=e[28].filter(s=>!s.isMain).length;return e[205]=n,e}function bo(l,e,t){const n=l.slice();return n[201]=e[t],n[203]=t,n}function ko(l,e,t){const n=l.slice();return n[207]=e[t],n}function $o(l,e,t){const n=l.slice();return n[210]=e[t],n}function wo(l,e,t){const n=l.slice();return n[213]=e[t],n}function yo(l){let e,t,n,s,i,o,a,c,f,p;return c=on(l[86][2]),{c(){e=_("label"),t=_("input"),n=b(),s=_("span"),s.textContent=`${l[213].label}`,i=b(),o=_("span"),o.textContent=`${l[213].description}`,a=b(),u(t,"type","radio"),t.__value=l[213].value,ne(t,t.__value),u(t,"class","svelte-hocrpi"),u(s,"class","dt-label svelte-hocrpi"),u(o,"class","dt-desc svelte-hocrpi"),u(e,"class","deploy-type-option svelte-hocrpi"),$e(e,"active",l[0]===l[213].value),c.p(t)},m(d,v){w(d,e,v),r(e,t),t.checked=t.__value===l[0],r(e,n),r(e,s),r(e,i),r(e,o),r(e,a),f||(p=le(t,"change",l[85]),f=!0)},p(d,v){v[0]&1&&(t.checked=t.__value===d[0]),v[0]&1|v[1]&536870912&&$e(e,"active",d[0]===d[213].value)},d(d){d&&$(e),c.r(),f=!1,p()}}}function Co(l){let e,t,n;return{c(){e=_("small"),t=T("Usually same as type: "),n=T(l[1]),u(e,"class","svelte-hocrpi")},m(s,i){w(s,e,i),r(e,t),r(e,n)},p(s,i){i[0]&2&&j(n,s[1])},d(s){s&&$(e)}}}function So(l){let e,t=l[210]+"",n;return{c(){e=_("option"),n=T(t),e.__value=l[210],ne(e,e.__value)},m(s,i){w(s,e,i),r(e,n)},p:be,d(s){s&&$(e)}}}function To(l){var h;let e,t,n,s,i,o,a,c=((h=l[2].find(l[91]))==null?void 0:h.image)+"",f,p,d=ve(l[2]),v=[];for(let m=0;m<d.length;m+=1)v[m]=Do(ko(l,d,m));return{c(){e=_("div"),t=_("label"),t.textContent="Service Type *",n=b(),s=_("div");for(let m=0;m<v.length;m+=1)v[m].c();i=b(),o=_("small"),a=T("Image: "),f=T(c),p=T(" • Data persisted to /data"),u(t,"class","svelte-hocrpi"),u(s,"class","stateful-type-selector svelte-hocrpi"),u(o,"class","svelte-hocrpi"),u(e,"class","form-group svelte-hocrpi")},m(m,g){w(m,e,g),r(e,t),r(e,n),r(e,s);for(let C=0;C<v.length;C+=1)v[C]&&v[C].m(s,null);r(e,i),r(e,o),r(o,a),r(o,f),r(o,p)},p(m,g){var C;if(g[0]&6){d=ve(m[2]);let k;for(k=0;k<d.length;k+=1){const y=ko(m,d,k);v[k]?v[k].p(y,g):(v[k]=Do(y),v[k].c(),v[k].m(s,null))}for(;k<v.length;k+=1)v[k].d(1);v.length=d.length}g[0]&6&&c!==(c=((C=m[2].find(m[91]))==null?void 0:C.image)+"")&&j(f,c)},d(m){m&&$(e),Ee(v,m)}}}function Do(l){let e,t,n,s=!1,i,o,a=l[207].label+"",c,f,p,d,v=l[207].port+"",h,m,g,C,k;return g=on(l[86][1]),{c(){e=_("label"),t=_("input"),i=b(),o=_("span"),c=T(a),f=b(),p=_("span"),d=T("Port "),h=T(v),m=b(),u(t,"type","radio"),t.__value=n=l[207].value,ne(t,t.__value),u(t,"class","svelte-hocrpi"),u(o,"class","st-label svelte-hocrpi"),u(p,"class","st-port svelte-hocrpi"),u(e,"class","stateful-option svelte-hocrpi"),$e(e,"active",l[1]===l[207].value),g.p(t)},m(y,S){w(y,e,S),r(e,t),t.checked=t.__value===l[1],r(e,i),r(e,o),r(o,c),r(e,f),r(e,p),r(p,d),r(p,h),r(e,m),C||(k=le(t,"change",l[90]),C=!0)},p(y,S){S[0]&4&&n!==(n=y[207].value)&&(t.__value=n,ne(t,t.__value),s=!0),(s||S[0]&6)&&(t.checked=t.__value===y[1]),S[0]&4&&a!==(a=y[207].label+"")&&j(c,a),S[0]&4&&v!==(v=y[207].port+"")&&j(h,v),S[0]&6&&$e(e,"active",y[1]===y[207].value)},d(y){y&&$(e),g.r(),C=!1,k()}}}function qo(l){let e,t,n,s,i,o,a,c,f,p,d,v,h,m,g,C,k,y,S,D,z,E,q,N,B,O,F,J,H,A,M,P,I,V,ee,Q,Z,oe,x,G,U,re,W,ae;s=new Be({props:{variant:"ghost",size:"sm",title:"Load saved config",$$slots:{default:[vp]},$$scope:{ctx:l}}}),s.$on("click",l[62]),o=new Be({props:{variant:"ghost",size:"sm",title:"Save current settings",$$slots:{default:[mp]},$$scope:{ctx:l}}}),o.$on("click",l[63]),c=new Be({props:{variant:"ghost",size:"sm",title:"Edit exclusion patterns",$$slots:{default:[hp]},$$scope:{ctx:l}}}),c.$on("click",l[64]);let te=l[53]&&zo(l),Y=l[54]&&Eo(l),de=l[15]==="code"&&Po(l),ce=l[15]==="git"&&Fo(l),ie=l[15]==="image"&&Uo(l),X=l[15]==="image_file"&&Ho(l);return re=on(l[86][0]),{c(){e=_("div"),t=_("span"),t.textContent="Config:",n=b(),_e(s.$$.fragment),i=b(),_e(o.$$.fragment),a=b(),_e(c.$$.fragment),f=b(),te&&te.c(),p=b(),Y&&Y.c(),d=b(),v=_("div"),h=_("label"),h.innerHTML='Tags <small class="svelte-hocrpi">(comma-separated)</small>',m=b(),g=_("input"),C=b(),k=_("div"),y=_("label"),y.textContent="Source Type *",S=b(),D=_("div"),z=_("label"),E=_("input"),q=T(`
              📁 Local Code`),N=b(),B=_("label"),O=_("input"),F=T(`
              📦 Git Repo`),J=b(),H=_("label"),A=_("input"),M=T(`
              🐳 Registry`),P=b(),I=_("label"),V=_("input"),ee=T(`
              📦 Local Image`),Q=b(),de&&de.c(),Z=b(),ce&&ce.c(),oe=b(),ie&&ie.c(),x=b(),X&&X.c(),G=Ie(),u(t,"class","config-label svelte-hocrpi"),u(e,"class","config-bar svelte-hocrpi"),u(h,"for","deploy-tags"),u(h,"class","svelte-hocrpi"),u(g,"id","deploy-tags"),u(g,"type","text"),u(g,"placeholder","api, backend, v2"),u(g,"class","svelte-hocrpi"),u(v,"class","form-group svelte-hocrpi"),u(y,"class","svelte-hocrpi"),u(E,"type","radio"),E.__value="code",ne(E,E.__value),u(E,"class","svelte-hocrpi"),u(z,"class","source-option svelte-hocrpi"),$e(z,"active",l[15]==="code"),u(O,"type","radio"),O.__value="git",ne(O,O.__value),u(O,"class","svelte-hocrpi"),u(B,"class","source-option svelte-hocrpi"),$e(B,"active",l[15]==="git"),u(A,"type","radio"),A.__value="image",ne(A,A.__value),u(A,"class","svelte-hocrpi"),u(H,"class","source-option svelte-hocrpi"),$e(H,"active",l[15]==="image"),u(V,"type","radio"),V.__value="image_file",ne(V,V.__value),u(V,"class","svelte-hocrpi"),u(I,"class","source-option svelte-hocrpi"),$e(I,"active",l[15]==="image_file"),u(D,"class","source-radio-group svelte-hocrpi"),u(k,"class","form-group svelte-hocrpi"),re.p(E,O,A,V)},m(K,me){w(K,e,me),r(e,t),r(e,n),fe(s,e,null),r(e,i),fe(o,e,null),r(e,a),fe(c,e,null),r(e,f),te&&te.m(e,null),w(K,p,me),Y&&Y.m(K,me),w(K,d,me),w(K,v,me),r(v,h),r(v,m),r(v,g),ne(g,l[14]),w(K,C,me),w(K,k,me),r(k,y),r(k,S),r(k,D),r(D,z),r(z,E),E.checked=E.__value===l[15],r(z,q),r(D,N),r(D,B),r(B,O),O.checked=O.__value===l[15],r(B,F),r(D,J),r(D,H),r(H,A),A.checked=A.__value===l[15],r(H,M),r(D,P),r(D,I),r(I,V),V.checked=V.__value===l[15],r(I,ee),w(K,Q,me),de&&de.m(K,me),w(K,Z,me),ce&&ce.m(K,me),w(K,oe,me),ie&&ie.m(K,me),w(K,x,me),X&&X.m(K,me),w(K,G,me),U=!0,W||(ae=[le(g,"input",l[93]),le(E,"change",l[94]),le(O,"change",l[95]),le(A,"change",l[96]),le(V,"change",l[97])],W=!0)},p(K,me){const ge={};me[6]&1073741824&&(ge.$$scope={dirty:me,ctx:K}),s.$set(ge);const He={};me[6]&1073741824&&(He.$$scope={dirty:me,ctx:K}),o.$set(He);const at={};me[6]&1073741824&&(at.$$scope={dirty:me,ctx:K}),c.$set(at),K[53]?te?te.p(K,me):(te=zo(K),te.c(),te.m(e,null)):te&&(te.d(1),te=null),K[54]?Y?(Y.p(K,me),me[1]&8388608&&L(Y,1)):(Y=Eo(K),Y.c(),L(Y,1),Y.m(d.parentNode,d)):Y&&(Te(),R(Y,1,1,()=>{Y=null}),De()),me[0]&16384&&g.value!==K[14]&&ne(g,K[14]),me[0]&32768&&(E.checked=E.__value===K[15]),(!U||me[0]&32768)&&$e(z,"active",K[15]==="code"),me[0]&32768&&(O.checked=O.__value===K[15]),(!U||me[0]&32768)&&$e(B,"active",K[15]==="git"),me[0]&32768&&(A.checked=A.__value===K[15]),(!U||me[0]&32768)&&$e(H,"active",K[15]==="image"),me[0]&32768&&(V.checked=V.__value===K[15]),(!U||me[0]&32768)&&$e(I,"active",K[15]==="image_file"),K[15]==="code"?de?(de.p(K,me),me[0]&32768&&L(de,1)):(de=Po(K),de.c(),L(de,1),de.m(Z.parentNode,Z)):de&&(Te(),R(de,1,1,()=>{de=null}),De()),K[15]==="git"?ce?(ce.p(K,me),me[0]&32768&&L(ce,1)):(ce=Fo(K),ce.c(),L(ce,1),ce.m(oe.parentNode,oe)):ce&&(Te(),R(ce,1,1,()=>{ce=null}),De()),K[15]==="image"?ie?ie.p(K,me):(ie=Uo(K),ie.c(),ie.m(x.parentNode,x)):ie&&(ie.d(1),ie=null),K[15]==="image_file"?X?X.p(K,me):(X=Ho(K),X.c(),X.m(G.parentNode,G)):X&&(X.d(1),X=null)},i(K){U||(L(s.$$.fragment,K),L(o.$$.fragment,K),L(c.$$.fragment,K),L(Y),L(de),L(ce),U=!0)},o(K){R(s.$$.fragment,K),R(o.$$.fragment,K),R(c.$$.fragment,K),R(Y),R(de),R(ce),U=!1},d(K){K&&($(e),$(p),$(d),$(v),$(C),$(k),$(Q),$(Z),$(oe),$(x),$(G)),pe(s),pe(o),pe(c),te&&te.d(),Y&&Y.d(K),de&&de.d(K),ce&&ce.d(K),ie&&ie.d(K),X&&X.d(K),re.r(),W=!1,Ue(ae)}}}function vp(l){let e;return{c(){e=T("📥 Load")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function mp(l){let e;return{c(){e=T("💾 Save")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function hp(l){let e;return{c(){e=T("🚫 Exclusions")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function zo(l){let e,t;return{c(){e=_("span"),t=T(l[53]),u(e,"class","config-status svelte-hocrpi")},m(n,s){w(n,e,s),r(e,t)},p(n,s){s[1]&4194304&&j(t,n[53])},d(n){n&&$(e)}}}function Eo(l){let e,t,n,s,i,o,a,c,f,p,d,v;return i=new Be({props:{variant:"ghost",size:"sm",$$slots:{default:[gp]},$$scope:{ctx:l}}}),i.$on("click",l[65]),{c(){e=_("div"),t=_("div"),n=_("label"),n.textContent="Exclusion Patterns",s=b(),_e(i.$$.fragment),o=b(),a=_("textarea"),c=b(),f=_("small"),f.textContent="One pattern per line. Applied to folder uploads and git clones.",u(n,"class","svelte-hocrpi"),u(t,"class","exclude-header svelte-hocrpi"),u(a,"rows","6"),u(a,"placeholder","node_modules/ __pycache__/ *.pyc .git/"),u(a,"class","svelte-hocrpi"),u(f,"class","svelte-hocrpi"),u(e,"class","exclude-editor svelte-hocrpi")},m(h,m){w(h,e,m),r(e,t),r(t,n),r(t,s),fe(i,t,null),r(e,o),r(e,a),ne(a,l[55]),r(e,c),r(e,f),p=!0,d||(v=le(a,"input",l[92]),d=!0)},p(h,m){const g={};m[6]&1073741824&&(g.$$scope={dirty:m,ctx:h}),i.$set(g),m[1]&16777216&&ne(a,h[55])},i(h){p||(L(i.$$.fragment,h),p=!0)},o(h){R(i.$$.fragment,h),p=!1},d(h){h&&$(e),pe(i),d=!1,v()}}}function gp(l){let e;return{c(){e=T("Reset to Defaults")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Po(l){let e,t,n,s,i,o,a,c,f,p,d,v,h,m,g,C,k,y,S,D,z,E,q,N,B,O=l[31]&&Lo(),F=l[28].length>0&&No(l);d=new Be({props:{size:"sm",$$slots:{default:[kp]},$$scope:{ctx:l}}}),d.$on("click",l[69]);function J(I,V){return V[0]&268435456&&(C=null),I[28].length===0?wp:(C==null&&(C=!I[28].some(__)),C?$p:Ao)}function H(I,V){return V===Ao?dp(I):I}let A=J(l,[-1,-1,-1,-1,-1,-1,-1]),M=A(H(l,A)),P=l[34]&&jo(l);return{c(){e=_("div"),t=_("div"),n=_("label"),n.textContent="Build Folders",s=b(),i=_("div"),O&&O.c(),o=b(),a=_("input"),c=b(),F&&F.c(),f=b(),p=_("div"),_e(d.$$.fragment),v=b(),h=_("span"),h.textContent="or drag & drop folders here",m=b(),g=_("div"),M.c(),k=b(),y=_("label"),S=_("input"),D=b(),z=_("span"),z.textContent="Remember folder configuration for this service",E=b(),P&&P.c(),u(n,"class","svelte-hocrpi"),u(a,"type","file"),u(a,"webkitdirectory",""),u(a,"directory",""),a.multiple=!0,Rt(a,"display","none"),u(a,"class","svelte-hocrpi"),u(h,"class","drop-hint svelte-hocrpi"),u(p,"class","folder-actions svelte-hocrpi"),u(i,"class","folder-drop-zone svelte-hocrpi"),$e(i,"dragover",l[31]),u(g,"class","code-selection-info svelte-hocrpi"),$e(g,"success",l[28].some(Ni)),$e(g,"warning",l[28].length>0&&!l[28].some(Ri)),u(S,"type","checkbox"),u(S,"class","svelte-hocrpi"),u(y,"class","checkbox-label small-check svelte-hocrpi"),u(t,"class","form-group svelte-hocrpi"),u(e,"class","source-config svelte-hocrpi")},m(I,V){w(I,e,V),r(e,t),r(t,n),r(t,s),r(t,i),O&&O.m(i,null),r(i,o),r(i,a),l[98](a),r(i,c),F&&F.m(i,null),r(i,f),r(i,p),fe(d,p,null),r(p,v),r(p,h),r(t,m),r(t,g),M.m(g,null),r(t,k),r(t,y),r(y,S),S.checked=l[30],r(y,D),r(y,z),r(e,E),P&&P.m(e,null),q=!0,N||(B=[le(a,"change",l[70]),le(i,"dragenter",l[71]),le(i,"dragleave",l[72]),le(i,"dragover",p_),le(i,"drop",l[73]),le(S,"change",l[101])],N=!0)},p(I,V){I[31]?O||(O=Lo(),O.c(),O.m(i,o)):O&&(O.d(1),O=null),I[28].length>0?F?(F.p(I,V),V[0]&268435456&&L(F,1)):(F=No(I),F.c(),L(F,1),F.m(i,f)):F&&(Te(),R(F,1,1,()=>{F=null}),De());const ee={};V[6]&1073741824&&(ee.$$scope={dirty:V,ctx:I}),d.$set(ee),(!q||V[1]&1)&&$e(i,"dragover",I[31]),A===(A=J(I,V))&&M?M.p(H(I,A),V):(M.d(1),M=A(H(I,A)),M&&(M.c(),M.m(g,null))),(!q||V[0]&268435456)&&$e(g,"success",I[28].some(Ni)),(!q||V[0]&268435456)&&$e(g,"warning",I[28].length>0&&!I[28].some(Ri)),V[0]&1073741824&&(S.checked=I[30]),I[34]?P?(P.p(I,V),V[1]&8&&L(P,1)):(P=jo(I),P.c(),L(P,1),P.m(e,null)):P&&(Te(),R(P,1,1,()=>{P=null}),De())},i(I){q||(L(F),L(d.$$.fragment,I),L(P),q=!0)},o(I){R(F),R(d.$$.fragment,I),R(P),q=!1},d(I){I&&$(e),O&&O.d(),l[98](null),F&&F.d(),pe(d),M.d(),P&&P.d(),N=!1,Ue(B)}}}function Lo(l){let e;return{c(){e=_("div"),e.innerHTML='<span class="drop-icon svelte-hocrpi">📂</span> <span>Drop folder here</span>',u(e,"class","drop-overlay svelte-hocrpi")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function No(l){let e,t,n=ve(l[28]),s=[];for(let o=0;o<n.length;o+=1)s[o]=Mo(bo(l,n,o));const i=o=>R(s[o],1,1,()=>{s[o]=null});return{c(){e=_("div");for(let o=0;o<s.length;o+=1)s[o].c();u(e,"class","folder-list svelte-hocrpi")},m(o,a){w(o,e,a);for(let c=0;c<s.length;c+=1)s[c]&&s[c].m(e,null);t=!0},p(o,a){if(a[0]&268435456|a[2]&12288){n=ve(o[28]);let c;for(c=0;c<n.length;c+=1){const f=bo(o,n,c);s[c]?(s[c].p(f,a),L(s[c],1)):(s[c]=Mo(f),s[c].c(),L(s[c],1),s[c].m(e,null))}for(Te(),c=n.length;c<s.length;c+=1)i(c);De()}},i(o){if(!t){for(let a=0;a<n.length;a+=1)L(s[a]);t=!0}},o(o){s=s.filter(an);for(let a=0;a<s.length;a+=1)R(s[a]);t=!1},d(o){o&&$(e),Ee(s,o)}}}function bp(l){let e=l[201].isMain?"MAIN":"dependency",t;return{c(){t=T(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&268435456&&e!==(e=n[201].isMain?"MAIN":"dependency")&&j(t,e)},d(n){n&&$(t)}}}function Ro(l){let e,t,n;function s(){return l[99](l[203])}return{c(){e=_("button"),e.textContent="⭐",u(e,"type","button"),u(e,"class","set-main-btn svelte-hocrpi"),u(e,"title","Set as main")},m(i,o){w(i,e,o),t||(n=le(e,"click",s),t=!0)},p(i,o){l=i},d(i){i&&$(e),t=!1,n()}}}function Mo(l){let e,t,n=l[201].isMain?"📁":"📂",s,i,o,a=l[201].name+"",c,f,p,d,v,h,m=l[201].fileCount+"",g,C,k,y,S,D,z,E,q;d=new Ke({props:{variant:l[201].isMain?"success":"secondary",$$slots:{default:[bp]},$$scope:{ctx:l}}});let N=!l[201].isMain&&Ro(l);function B(){return l[100](l[203])}return{c(){e=_("div"),t=_("span"),s=T(n),i=b(),o=_("strong"),c=T(a),f=T("/"),p=b(),_e(d.$$.fragment),v=b(),h=_("span"),g=T(m),C=T(" files"),k=b(),N&&N.c(),y=b(),S=_("button"),S.textContent="✕",D=b(),u(t,"class","folder-icon svelte-hocrpi"),u(o,"class","svelte-hocrpi"),u(h,"class","file-count svelte-hocrpi"),u(S,"type","button"),u(S,"class","remove-btn svelte-hocrpi"),u(e,"class","folder-item svelte-hocrpi")},m(O,F){w(O,e,F),r(e,t),r(t,s),r(e,i),r(e,o),r(o,c),r(o,f),r(e,p),fe(d,e,null),r(e,v),r(e,h),r(h,g),r(h,C),r(e,k),N&&N.m(e,null),r(e,y),r(e,S),r(e,D),z=!0,E||(q=le(S,"click",B),E=!0)},p(O,F){l=O,(!z||F[0]&268435456)&&n!==(n=l[201].isMain?"📁":"📂")&&j(s,n),(!z||F[0]&268435456)&&a!==(a=l[201].name+"")&&j(c,a);const J={};F[0]&268435456&&(J.variant=l[201].isMain?"success":"secondary"),F[0]&268435456|F[6]&1073741824&&(J.$$scope={dirty:F,ctx:l}),d.$set(J),(!z||F[0]&268435456)&&m!==(m=l[201].fileCount+"")&&j(g,m),l[201].isMain?N&&(N.d(1),N=null):N?N.p(l,F):(N=Ro(l),N.c(),N.m(e,y))},i(O){z||(L(d.$$.fragment,O),z=!0)},o(O){R(d.$$.fragment,O),z=!1},d(O){O&&$(e),pe(d),N&&N.d(),E=!1,q()}}}function kp(l){let e;return{c(){e=T("➕ Add Folder")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Ao(l){let e,t,n=l[204].name+"",s,i,o,a,c=l[205]>0&&Oo(l);return{c(){e=T("✓ Main: "),t=_("strong"),s=T(n),i=T("/"),o=b(),c&&c.c(),a=Ie()},m(f,p){w(f,e,p),w(f,t,p),r(t,s),r(t,i),w(f,o,p),c&&c.m(f,p),w(f,a,p)},p(f,p){p[0]&268435456&&n!==(n=f[204].name+"")&&j(s,n),f[205]>0?c?c.p(f,p):(c=Oo(f),c.c(),c.m(a.parentNode,a)):c&&(c.d(1),c=null)},d(f){f&&($(e),$(t),$(o),$(a)),c&&c.d(f)}}}function $p(l){let e;return{c(){e=T("⚠️ No main folder selected. Click ⭐ to set one as main.")},m(t,n){w(t,e,n)},p:be,d(t){t&&$(e)}}}function wp(l){let e;return{c(){e=T("No folders selected. Add your main service folder and any dependencies.")},m(t,n){w(t,e,n)},p:be,d(t){t&&$(e)}}}function Oo(l){let e,t=l[205]+"",n,s,i=l[205]===1?"y":"ies",o;return{c(){e=T("+ "),n=T(t),s=T(" dependenc"),o=T(i)},m(a,c){w(a,e,c),w(a,n,c),w(a,s,c),w(a,o,c)},p(a,c){c[0]&268435456&&t!==(t=a[205]+"")&&j(n,t),c[0]&268435456&&i!==(i=a[205]===1?"y":"ies")&&j(o,i)},d(a){a&&($(e),$(n),$(s),$(o))}}}function jo(l){let e,t,n,s,i,o,a,c,f,p,d,v,h,m,g,C,k,y,S,D,z,E;return i=new Ke({props:{variant:l[33]==="from folder"?"success":l[33]==="multi-folder"?"info":"warning",$$slots:{default:[yp]},$$scope:{ctx:l}}}),{c(){e=_("div"),t=_("div"),n=_("label"),s=T(`🐳 Dockerfile
                    `),_e(i.$$.fragment),o=b(),a=_("textarea"),c=b(),f=_("div"),p=_("select"),d=_("option"),d.textContent="FROM...",v=_("option"),v.textContent="python:3.11-slim",h=_("option"),h.textContent="python:3.12-slim",m=_("option"),m.textContent="node:20-alpine",g=_("option"),g.textContent="node:18-alpine",C=_("option"),C.textContent="golang:1.21-alpine",k=_("option"),k.textContent="nginx:alpine",y=b(),S=_("input"),u(n,"class","svelte-hocrpi"),u(t,"class","dockerfile-header svelte-hocrpi"),u(a,"rows","8"),u(a,"class","dockerfile-editor svelte-hocrpi"),u(a,"spellcheck","false"),d.__value="",ne(d,d.__value),v.__value="python:3.11-slim",ne(v,v.__value),h.__value="python:3.12-slim",ne(h,h.__value),m.__value="node:20-alpine",ne(m,m.__value),g.__value="node:18-alpine",ne(g,g.__value),C.__value="golang:1.21-alpine",ne(C,C.__value),k.__value="nginx:alpine",ne(k,k.__value),u(p,"class","svelte-hocrpi"),l[35]===void 0&&Xe(()=>l[103].call(p)),u(S,"type","text"),u(S,"placeholder","CMD (e.g. uvicorn main:app ...)"),u(S,"class","svelte-hocrpi"),u(f,"class","dockerfile-quick-fields svelte-hocrpi"),u(e,"class","dockerfile-preview svelte-hocrpi")},m(q,N){w(q,e,N),r(e,t),r(t,n),r(n,s),fe(i,n,null),r(e,o),r(e,a),ne(a,l[32]),r(e,c),r(e,f),r(f,p),r(p,d),r(p,v),r(p,h),r(p,m),r(p,g),r(p,C),r(p,k),ze(p,l[35],!0),r(f,y),r(f,S),ne(S,l[36]),D=!0,z||(E=[le(a,"input",l[102]),le(p,"change",l[103]),le(p,"change",l[104]),le(S,"input",l[105]),le(S,"change",l[106])],z=!0)},p(q,N){const B={};N[1]&4&&(B.variant=q[33]==="from folder"?"success":q[33]==="multi-folder"?"info":"warning"),N[1]&4|N[6]&1073741824&&(B.$$scope={dirty:N,ctx:q}),i.$set(B),N[1]&2&&ne(a,q[32]),N[1]&16&&ze(p,q[35]),N[1]&32&&S.value!==q[36]&&ne(S,q[36])},i(q){D||(L(i.$$.fragment,q),D=!0)},o(q){R(i.$$.fragment,q),D=!1},d(q){q&&$(e),pe(i),z=!1,Ue(E)}}}function yp(l){let e;return{c(){e=T(l[33])},m(t,n){w(t,e,n)},p(t,n){n[1]&4&&j(e,t[33])},d(t){t&&$(e)}}}function Fo(l){let e,t,n,s,i,o,a,c,f,p,d,v,h,m,g,C,k,y,S,D,z,E,q,N,B,O,F,J,H,A,M,P,I,V,ee,Q,Z,oe,x=l[21].length>0&&Io(l);return z=new Be({props:{size:"sm",$$slots:{default:[Sp]},$$scope:{ctx:l}}}),z.$on("click",l[111]),q=new Be({props:{variant:"ghost",size:"sm",$$slots:{default:[Tp]},$$scope:{ctx:l}}}),q.$on("click",l[112]),{c(){e=_("div"),t=_("div"),n=_("label"),n.textContent="Git Repository URL *",s=b(),i=_("input"),o=b(),a=_("small"),a.textContent="HTTPS URL (SSH not supported)",c=b(),f=_("div"),p=_("label"),p.textContent="Branch",d=b(),v=_("input"),h=b(),m=_("div"),g=_("label"),g.textContent="Folders to Include",C=b(),x&&x.c(),k=b(),y=_("div"),S=_("input"),D=b(),_e(z.$$.fragment),E=b(),_e(q.$$.fragment),N=b(),B=_("small"),B.textContent="Leave empty to use entire repo. Add paths for multi-folder builds (main folder contains Dockerfile).",O=b(),F=_("details"),J=_("summary"),J.textContent="🔐 Private repository?",H=b(),A=_("div"),M=_("label"),M.textContent="Personal Access Token",P=b(),I=_("input"),V=b(),ee=_("small"),ee.innerHTML="Needs <code>repo</code> scope for private repos",u(n,"for","git-url"),u(n,"class","svelte-hocrpi"),u(i,"id","git-url"),u(i,"type","url"),u(i,"placeholder","https://github.com/user/repo"),u(i,"class","svelte-hocrpi"),u(a,"class","svelte-hocrpi"),u(t,"class","form-group svelte-hocrpi"),u(p,"for","git-branch"),u(p,"class","svelte-hocrpi"),u(v,"id","git-branch"),u(v,"type","text"),u(v,"placeholder","main"),u(v,"class","svelte-hocrpi"),u(f,"class","form-group svelte-hocrpi"),u(g,"class","svelte-hocrpi"),u(S,"type","text"),u(S,"placeholder","e.g. services/my_api"),u(S,"class","svelte-hocrpi"),u(y,"class","folder-input svelte-hocrpi"),u(B,"class","svelte-hocrpi"),u(m,"class","form-group svelte-hocrpi"),u(J,"class","svelte-hocrpi"),u(M,"for","git-token"),u(M,"class","svelte-hocrpi"),u(I,"id","git-token"),u(I,"type","password"),u(I,"placeholder","ghp_xxxxxxxxxxxx"),u(I,"class","svelte-hocrpi"),u(ee,"class","svelte-hocrpi"),u(A,"class","form-group svelte-hocrpi"),u(F,"class","private-repo svelte-hocrpi"),u(e,"class","source-config svelte-hocrpi")},m(G,U){w(G,e,U),r(e,t),r(t,n),r(t,s),r(t,i),ne(i,l[18]),r(t,o),r(t,a),r(e,c),r(e,f),r(f,p),r(f,d),r(f,v),ne(v,l[19]),r(e,h),r(e,m),r(m,g),r(m,C),x&&x.m(m,null),r(m,k),r(m,y),r(y,S),ne(S,l[22]),r(y,D),fe(z,y,null),r(y,E),fe(q,y,null),r(m,N),r(m,B),r(e,O),r(e,F),r(F,J),r(F,H),r(F,A),r(A,M),r(A,P),r(A,I),ne(I,l[20]),r(A,V),r(A,ee),Q=!0,Z||(oe=[le(i,"input",l[107]),le(v,"input",l[108]),le(S,"input",l[110]),le(I,"input",l[113])],Z=!0)},p(G,U){U[0]&262144&&i.value!==G[18]&&ne(i,G[18]),U[0]&524288&&v.value!==G[19]&&ne(v,G[19]),G[21].length>0?x?(x.p(G,U),U[0]&2097152&&L(x,1)):(x=Io(G),x.c(),L(x,1),x.m(m,k)):x&&(Te(),R(x,1,1,()=>{x=null}),De()),U[0]&4194304&&S.value!==G[22]&&ne(S,G[22]);const re={};U[6]&1073741824&&(re.$$scope={dirty:U,ctx:G}),z.$set(re);const W={};U[6]&1073741824&&(W.$$scope={dirty:U,ctx:G}),q.$set(W),U[0]&1048576&&I.value!==G[20]&&ne(I,G[20])},i(G){Q||(L(x),L(z.$$.fragment,G),L(q.$$.fragment,G),Q=!0)},o(G){R(x),R(z.$$.fragment,G),R(q.$$.fragment,G),Q=!1},d(G){G&&$(e),x&&x.d(),pe(z),pe(q),Z=!1,Ue(oe)}}}function Io(l){let e,t,n=ve(l[21]),s=[];for(let o=0;o<n.length;o+=1)s[o]=Bo(go(l,n,o));const i=o=>R(s[o],1,1,()=>{s[o]=null});return{c(){e=_("div");for(let o=0;o<s.length;o+=1)s[o].c();u(e,"class","folder-list svelte-hocrpi")},m(o,a){w(o,e,a);for(let c=0;c<s.length;c+=1)s[c]&&s[c].m(e,null);t=!0},p(o,a){if(a[0]&2097152|a[2]&65536){n=ve(o[21]);let c;for(c=0;c<n.length;c+=1){const f=go(o,n,c);s[c]?(s[c].p(f,a),L(s[c],1)):(s[c]=Bo(f),s[c].c(),L(s[c],1),s[c].m(e,null))}for(Te(),c=n.length;c<s.length;c+=1)i(c);De()}},i(o){if(!t){for(let a=0;a<n.length;a+=1)L(s[a]);t=!0}},o(o){s=s.filter(an);for(let a=0;a<s.length;a+=1)R(s[a]);t=!1},d(o){o&&$(e),Ee(s,o)}}}function Cp(l){let e=l[201].isMain?"MAIN":"dependency",t;return{c(){t=T(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&2097152&&e!==(e=n[201].isMain?"MAIN":"dependency")&&j(t,e)},d(n){n&&$(t)}}}function Bo(l){let e,t,n=l[201].isMain?"📁":"📂",s,i,o,a=l[201].path+"",c,f,p,d,v,h,m,g,C;p=new Ke({props:{variant:l[201].isMain?"success":"secondary",$$slots:{default:[Cp]},$$scope:{ctx:l}}});function k(){return l[109](l[203])}return{c(){e=_("div"),t=_("span"),s=T(n),i=b(),o=_("strong"),c=T(a),f=b(),_e(p.$$.fragment),d=b(),v=_("button"),v.textContent="✕",h=b(),u(o,"class","svelte-hocrpi"),u(v,"type","button"),u(v,"class","remove-btn svelte-hocrpi"),u(e,"class","folder-item svelte-hocrpi")},m(y,S){w(y,e,S),r(e,t),r(t,s),r(e,i),r(e,o),r(o,c),r(e,f),fe(p,e,null),r(e,d),r(e,v),r(e,h),m=!0,g||(C=le(v,"click",k),g=!0)},p(y,S){l=y,(!m||S[0]&2097152)&&n!==(n=l[201].isMain?"📁":"📂")&&j(s,n),(!m||S[0]&2097152)&&a!==(a=l[201].path+"")&&j(c,a);const D={};S[0]&2097152&&(D.variant=l[201].isMain?"success":"secondary"),S[0]&2097152|S[6]&1073741824&&(D.$$scope={dirty:S,ctx:l}),p.$set(D)},i(y){m||(L(p.$$.fragment,y),m=!0)},o(y){R(p.$$.fragment,y),m=!1},d(y){y&&$(e),pe(p),g=!1,C()}}}function Sp(l){let e;return{c(){e=T("+ Main")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Tp(l){let e;return{c(){e=T("+ Dep")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Uo(l){let e,t,n,s,i,o,a,c,f;return{c(){e=_("div"),t=_("div"),n=_("label"),n.textContent="Docker Image *",s=b(),i=_("input"),o=b(),a=_("small"),a.textContent="Full image URL from DO Registry or Docker Hub",u(n,"for","image-url"),u(n,"class","svelte-hocrpi"),u(i,"id","image-url"),u(i,"type","text"),u(i,"placeholder","registry.digitalocean.com/my-registry/app:latest"),u(i,"class","svelte-hocrpi"),u(a,"class","svelte-hocrpi"),u(t,"class","form-group svelte-hocrpi"),u(e,"class","source-config svelte-hocrpi")},m(p,d){w(p,e,d),r(e,t),r(t,n),r(t,s),r(t,i),ne(i,l[23]),r(t,o),r(t,a),c||(f=le(i,"input",l[114]),c=!0)},p(p,d){d[0]&8388608&&i.value!==p[23]&&ne(i,p[23])},d(p){p&&$(e),c=!1,f()}}}function Ho(l){let e,t,n,s,i,o,a,c,f,p,d,v,h,m,g,C,k,y,S,D,z,E,q,N,B,O,F,J,H=l[24]&&Go(l);return{c(){e=_("div"),t=_("div"),n=_("label"),n.textContent="Docker Image File (.tar) *",s=b(),i=_("input"),o=b(),H&&H.c(),a=b(),c=_("small"),c.innerHTML="Export from Docker with: <code>docker save myimage:latest -o image.tar</code>",f=b(),p=_("div"),d=_("label"),d.textContent="Image Name *",v=b(),h=_("input"),m=b(),g=_("small"),g.textContent="The image name/tag as it appears in the tar file",C=b(),k=_("div"),y=_("div"),S=_("label"),S.textContent="Container Port",D=b(),z=_("input"),E=b(),q=_("div"),N=_("label"),N.textContent="Host Port",B=b(),O=_("input"),u(n,"for","image-file"),u(n,"class","svelte-hocrpi"),u(i,"id","image-file"),u(i,"type","file"),u(i,"accept",".tar,.tar.gz"),u(i,"class","svelte-hocrpi"),u(c,"class","svelte-hocrpi"),u(t,"class","form-group svelte-hocrpi"),u(d,"for","image-name"),u(d,"class","svelte-hocrpi"),u(h,"id","image-name"),u(h,"type","text"),u(h,"placeholder","myapp:latest"),u(h,"class","svelte-hocrpi"),u(g,"class","svelte-hocrpi"),u(p,"class","form-group svelte-hocrpi"),u(S,"for","container-port"),u(S,"class","svelte-hocrpi"),u(z,"id","container-port"),u(z,"type","number"),u(z,"placeholder",l[16]),u(z,"class","svelte-hocrpi"),u(y,"class","form-group svelte-hocrpi"),u(N,"for","host-port"),u(N,"class","svelte-hocrpi"),u(O,"id","host-port"),u(O,"type","number"),u(O,"placeholder",l[16]),u(O,"class","svelte-hocrpi"),u(q,"class","form-group svelte-hocrpi"),u(k,"class","form-row svelte-hocrpi"),u(e,"class","source-config svelte-hocrpi")},m(A,M){w(A,e,M),r(e,t),r(t,n),r(t,s),r(t,i),r(t,o),H&&H.m(t,null),r(t,a),r(t,c),r(e,f),r(e,p),r(p,d),r(p,v),r(p,h),ne(h,l[25]),r(p,m),r(p,g),r(e,C),r(e,k),r(k,y),r(y,S),r(y,D),r(y,z),ne(z,l[26]),r(k,E),r(k,q),r(q,N),r(q,B),r(q,O),ne(O,l[27]),F||(J=[le(i,"change",l[79]),le(h,"input",l[115]),le(z,"input",l[116]),le(O,"input",l[117])],F=!0)},p(A,M){A[24]?H?H.p(A,M):(H=Go(A),H.c(),H.m(t,a)):H&&(H.d(1),H=null),M[0]&33554432&&h.value!==A[25]&&ne(h,A[25]),M[0]&65536&&u(z,"placeholder",A[16]),M[0]&67108864&&Ht(z.value)!==A[26]&&ne(z,A[26]),M[0]&65536&&u(O,"placeholder",A[16]),M[0]&134217728&&Ht(O.value)!==A[27]&&ne(O,A[27])},d(A){A&&$(e),H&&H.d(),F=!1,Ue(J)}}}function Go(l){let e,t,n=l[24].name+"",s,i,o=(l[24].size/1024/1024).toFixed(2)+"",a,c;return{c(){e=_("div"),t=T("📦 "),s=T(n),i=T(" ("),a=T(o),c=T(" MB)"),u(e,"class","file-selected svelte-hocrpi")},m(f,p){w(f,e,p),r(e,t),r(e,s),r(e,i),r(e,a),r(e,c)},p(f,p){p[0]&16777216&&n!==(n=f[24].name+"")&&j(s,n),p[0]&16777216&&o!==(o=(f[24].size/1024/1024).toFixed(2)+"")&&j(a,o)},d(f){f&&$(e)}}}function Wo(l){let e,t,n,s,i,o,a,c;return{c(){e=_("div"),t=_("label"),t.textContent="App Port",n=b(),s=_("input"),i=b(),o=_("small"),o.textContent="Port your app listens on inside the container",u(t,"for","deploy-port"),u(t,"class","svelte-hocrpi"),u(s,"id","deploy-port"),u(s,"type","number"),u(s,"min","1"),u(s,"max","65535"),u(s,"class","svelte-hocrpi"),u(o,"class","svelte-hocrpi"),u(e,"class","form-group svelte-hocrpi")},m(f,p){w(f,e,p),r(e,t),r(e,n),r(e,s),ne(s,l[16]),r(e,i),r(e,o),a||(c=le(s,"input",l[118]),a=!0)},p(f,p){p[0]&65536&&Ht(s.value)!==f[16]&&ne(s,f[16])},d(f){f&&$(e),a=!1,c()}}}function Vo(l){let e,t,n,s,i,o,a,c;return{c(){e=_("div"),t=_("label"),t.textContent="Command Override",n=b(),s=_("input"),i=b(),o=_("small"),o.textContent="Override Dockerfile CMD (e.g., different entrypoint for worker vs webservice)",u(t,"for","custom-cmd"),u(t,"class","svelte-hocrpi"),u(s,"id","custom-cmd"),u(s,"type","text"),u(s,"placeholder","python worker.py"),u(s,"class","svelte-hocrpi"),u(o,"class","svelte-hocrpi"),u(e,"class","form-group svelte-hocrpi")},m(f,p){w(f,e,p),r(e,t),r(e,n),r(e,s),ne(s,l[12]),r(e,i),r(e,o),a||(c=le(s,"input",l[119]),a=!0)},p(f,p){p[0]&4096&&s.value!==f[12]&&ne(s,f[12])},d(f){f&&$(e),a=!1,c()}}}function Jo(l){let e,t,n,s,i,o,a,c,f,p,d,v,h,m,g,C,k;return{c(){e=_("div"),t=_("label"),t.textContent="Cron Schedule *",n=b(),s=_("input"),i=b(),o=_("small"),o.textContent='Standard cron format: minute hour day month weekday (e.g., "0 */6 * * *" = every 6 hours)',a=b(),c=_("div"),f=_("button"),f.textContent="Every min",p=b(),d=_("button"),d.textContent="Hourly",v=b(),h=_("button"),h.textContent="Daily",m=b(),g=_("button"),g.textContent="Weekly",u(t,"for","cron-schedule"),u(t,"class","svelte-hocrpi"),u(s,"id","cron-schedule"),u(s,"type","text"),u(s,"placeholder","0 * * * *"),s.required=!0,u(s,"class","svelte-hocrpi"),u(o,"class","svelte-hocrpi"),u(f,"type","button"),u(f,"class","preset-btn svelte-hocrpi"),u(d,"type","button"),u(d,"class","preset-btn svelte-hocrpi"),u(h,"type","button"),u(h,"class","preset-btn svelte-hocrpi"),u(g,"type","button"),u(g,"class","preset-btn svelte-hocrpi"),u(c,"class","cron-presets svelte-hocrpi"),u(e,"class","form-group svelte-hocrpi")},m(y,S){w(y,e,S),r(e,t),r(e,n),r(e,s),ne(s,l[13]),r(e,i),r(e,o),r(e,a),r(e,c),r(c,f),r(c,p),r(c,d),r(c,v),r(c,h),r(c,m),r(c,g),C||(k=[le(s,"input",l[120]),le(f,"click",l[121]),le(d,"click",l[122]),le(h,"click",l[123]),le(g,"click",l[124])],C=!0)},p(y,S){S[0]&8192&&s.value!==y[13]&&ne(s,y[13])},d(y){y&&$(e),C=!1,Ue(k)}}}function Yo(l){let e,t,n,s=l[56]?"▼":"▶",i,o,a,c,f=l[17].trim(),p,d,v,h,m=f&&Ko(l),g=l[56]&&Qo(l);return{c(){e=_("div"),t=_("button"),n=_("span"),i=T(s),o=b(),a=_("span"),a.textContent="Environment Variables",c=b(),m&&m.c(),p=b(),g&&g.c(),u(n,"class","toggle-icon svelte-hocrpi"),u(t,"type","button"),u(t,"class","section-toggle svelte-hocrpi"),u(e,"class","collapsible-section svelte-hocrpi"),$e(e,"expanded",l[56])},m(C,k){w(C,e,k),r(e,t),r(t,n),r(n,i),r(t,o),r(t,a),r(t,c),m&&m.m(t,null),r(e,p),g&&g.m(e,null),d=!0,v||(h=le(t,"click",l[125]),v=!0)},p(C,k){(!d||k[1]&33554432)&&s!==(s=C[56]?"▼":"▶")&&j(i,s),k[0]&131072&&(f=C[17].trim()),f?m?(m.p(C,k),k[0]&131072&&L(m,1)):(m=Ko(C),m.c(),L(m,1),m.m(t,null)):m&&(Te(),R(m,1,1,()=>{m=null}),De()),C[56]?g?g.p(C,k):(g=Qo(C),g.c(),g.m(e,null)):g&&(g.d(1),g=null),(!d||k[1]&33554432)&&$e(e,"expanded",C[56])},i(C){d||(L(m),d=!0)},o(C){R(m),d=!1},d(C){C&&$(e),m&&m.d(),g&&g.d(),v=!1,h()}}}function Ko(l){let e,t;return e=new Ke({props:{variant:"info",$$slots:{default:[Dp]},$$scope:{ctx:l}}}),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const i={};s[0]&131072|s[6]&1073741824&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(L(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){pe(e,n)}}}function Dp(l){let e=l[17].trim().split(`
`).filter(Mi).length+"",t,n;return{c(){t=T(e),n=T(" vars")},m(s,i){w(s,t,i),w(s,n,i)},p(s,i){i[0]&131072&&e!==(e=s[17].trim().split(`
`).filter(Mi).length+"")&&j(t,e)},d(s){s&&($(t),$(n))}}}function Qo(l){let e,t,n,s,i,o;return{c(){e=_("div"),t=_("textarea"),n=b(),s=_("small"),s.textContent="One per line: KEY=value",u(t,"id","deploy-envvars"),u(t,"rows","3"),u(t,"placeholder","KEY=value ANOTHER_KEY=value"),u(t,"class","svelte-hocrpi"),u(s,"class","svelte-hocrpi"),u(e,"class","section-content svelte-hocrpi")},m(a,c){w(a,e,c),r(e,t),ne(t,l[17]),r(e,n),r(e,s),i||(o=le(t,"input",l[126]),i=!0)},p(a,c){c[0]&131072&&ne(t,a[17])},d(a){a&&$(e),i=!1,o()}}}function Zo(l){let e,t,n,s=l[57]?"▼":"▶",i,o,a,c,f=l[0]==="service"&&l[51]||Object.values(l[50]).some(Li),p,d,v,h,m=f&&Xo(l),g=l[57]&&xo(l);return{c(){e=_("div"),t=_("button"),n=_("span"),i=T(s),o=b(),a=_("span"),a.textContent="🔧 Service Configuration",c=b(),m&&m.c(),p=b(),g&&g.c(),u(n,"class","toggle-icon svelte-hocrpi"),u(t,"type","button"),u(t,"class","section-toggle svelte-hocrpi"),u(e,"class","collapsible-section svelte-hocrpi"),$e(e,"expanded",l[57])},m(C,k){w(C,e,k),r(e,t),r(t,n),r(n,i),r(t,o),r(t,a),r(t,c),m&&m.m(t,null),r(e,p),g&&g.m(e,null),d=!0,v||(h=le(t,"click",l[127]),v=!0)},p(C,k){(!d||k[1]&67108864)&&s!==(s=C[57]?"▼":"▶")&&j(i,s),k[0]&1|k[1]&1572864&&(f=C[0]==="service"&&C[51]||Object.values(C[50]).some(Li)),f?m?k[0]&1|k[1]&1572864&&L(m,1):(m=Xo(C),m.c(),L(m,1),m.m(t,null)):m&&(Te(),R(m,1,1,()=>{m=null}),De()),C[57]?g?g.p(C,k):(g=xo(C),g.c(),g.m(e,null)):g&&(g.d(1),g=null),(!d||k[1]&67108864)&&$e(e,"expanded",C[57])},i(C){d||(L(m),d=!0)},o(C){R(m),d=!1},d(C){C&&$(e),m&&m.d(),g&&g.d(),v=!1,h()}}}function Xo(l){let e,t;return e=new Ke({props:{variant:"info",$$slots:{default:[qp]},$$scope:{ctx:l}}}),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},i(n){t||(L(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){pe(e,n)}}}function qp(l){let e;return{c(){e=T("configured")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function xo(l){let e,t,n,s,i,o,a,c,f,p,d,v,h,m,g,C,k,y,S,D,z=l[48]&&ei(l),E=l[0]==="service"&&ti(l);return{c(){e=_("div"),t=_("label"),n=_("input"),s=b(),i=_("span"),i.textContent="Auto-inject service discovery",o=b(),a=_("small"),a.textContent="Injects DATABASE_URL, REDIS_URL, etc. based on dependencies",c=b(),z&&z.c(),f=b(),p=_("div"),d=b(),v=_("label"),h=_("input"),m=b(),g=_("span"),g.textContent="💾 Persist data (mount volume)",C=b(),k=_("small"),k.textContent="Mounts /data volume for databases and stateful services",y=b(),E&&E.c(),u(n,"type","checkbox"),u(n,"class","svelte-hocrpi"),u(t,"class","checkbox-label svelte-hocrpi"),u(a,"class","svelte-hocrpi"),u(p,"class","config-divider svelte-hocrpi"),u(h,"type","checkbox"),u(h,"class","svelte-hocrpi"),u(v,"class","checkbox-label svelte-hocrpi"),u(k,"class","svelte-hocrpi"),u(e,"class","section-content service-config svelte-hocrpi")},m(q,N){w(q,e,N),r(e,t),r(t,n),n.checked=l[48],r(t,s),r(t,i),r(e,o),r(e,a),r(e,c),z&&z.m(e,null),r(e,f),r(e,p),r(e,d),r(e,v),r(v,h),h.checked=l[49],r(v,m),r(v,g),r(e,C),r(e,k),r(e,y),E&&E.m(e,null),S||(D=[le(n,"change",l[128]),le(h,"change",l[133])],S=!0)},p(q,N){N[1]&131072&&(n.checked=q[48]),q[48]?z?z.p(q,N):(z=ei(q),z.c(),z.m(e,f)):z&&(z.d(1),z=null),N[1]&262144&&(h.checked=q[49]),q[0]==="service"?E?E.p(q,N):(E=ti(q),E.c(),E.m(e,null)):E&&(E.d(1),E=null)},d(q){q&&$(e),z&&z.d(),E&&E.d(),S=!1,Ue(D)}}}function ei(l){let e,t,n,s,i,o,a,c,f,p,d,v,h,m,g,C,k,y,S,D,z;return{c(){e=_("div"),t=_("label"),t.textContent="Dependencies:",n=b(),s=_("div"),i=_("label"),o=_("input"),a=T(`
                      🐘 PostgreSQL`),c=b(),f=_("label"),p=_("input"),d=T(`
                      ⚡ Redis`),v=b(),h=_("label"),m=_("input"),g=T(`
                      🐬 MySQL`),C=b(),k=_("label"),y=_("input"),S=T(`
                      🍃 MongoDB`),u(o,"type","checkbox"),u(o,"class","svelte-hocrpi"),u(i,"class","dep-item svelte-hocrpi"),u(p,"type","checkbox"),u(p,"class","svelte-hocrpi"),u(f,"class","dep-item svelte-hocrpi"),u(m,"type","checkbox"),u(m,"class","svelte-hocrpi"),u(h,"class","dep-item svelte-hocrpi"),u(y,"type","checkbox"),u(y,"class","svelte-hocrpi"),u(k,"class","dep-item svelte-hocrpi"),u(s,"class","dep-list svelte-hocrpi"),u(e,"class","dependencies svelte-hocrpi")},m(E,q){w(E,e,q),r(e,t),r(e,n),r(e,s),r(s,i),r(i,o),o.checked=l[50].postgres,r(i,a),r(s,c),r(s,f),r(f,p),p.checked=l[50].redis,r(f,d),r(s,v),r(s,h),r(h,m),m.checked=l[50].mysql,r(h,g),r(s,C),r(s,k),r(k,y),y.checked=l[50].mongo,r(k,S),D||(z=[le(o,"change",l[129]),le(p,"change",l[130]),le(m,"change",l[131]),le(y,"change",l[132])],D=!0)},p(E,q){q[1]&524288&&(o.checked=E[50].postgres),q[1]&524288&&(p.checked=E[50].redis),q[1]&524288&&(m.checked=E[50].mysql),q[1]&524288&&(y.checked=E[50].mongo)},d(E){E&&$(e),D=!1,Ue(z)}}}function ti(l){let e,t,n,s,i,o,a,c,f,p,d,v,h=l[51]&&li(l);return{c(){e=_("div"),t=b(),n=_("label"),s=_("input"),i=b(),o=_("span"),o.textContent="🌐 Setup domain (Cloudflare)",a=b(),c=_("small"),c.textContent="Auto-provision subdomain with SSL via Cloudflare",f=b(),h&&h.c(),p=Ie(),u(e,"class","config-divider svelte-hocrpi"),u(s,"type","checkbox"),u(s,"class","svelte-hocrpi"),u(n,"class","checkbox-label svelte-hocrpi"),u(c,"class","svelte-hocrpi")},m(m,g){w(m,e,g),w(m,t,g),w(m,n,g),r(n,s),s.checked=l[51],r(n,i),r(n,o),w(m,a,g),w(m,c,g),w(m,f,g),h&&h.m(m,g),w(m,p,g),d||(v=le(s,"change",l[134]),d=!0)},p(m,g){g[1]&1048576&&(s.checked=m[51]),m[51]?h?h.p(m,g):(h=li(m),h.c(),h.m(p.parentNode,p)):h&&(h.d(1),h=null)},d(m){m&&($(e),$(t),$(n),$(a),$(c),$(f),$(p)),h&&h.d(m),d=!1,v()}}}function li(l){let e,t,n,s,i,o=(l[59]||"app-project-env.domain.com")+"",a,c,f,p,d,v,h,m,g,C,k,y,S,D,z;return{c(){e=_("div"),t=_("div"),n=_("label"),n.textContent="Domain Preview:",s=b(),i=_("code"),a=T(o),c=b(),f=_("div"),p=_("label"),p.textContent="Base Domain",d=b(),v=_("input"),h=b(),m=_("div"),g=_("label"),g.innerHTML='Custom Aliases <small class="svelte-hocrpi">(optional)</small>',C=b(),k=_("input"),y=b(),S=_("small"),S.textContent="Comma-separated custom domains (requires DNS setup)",u(n,"class","svelte-hocrpi"),u(i,"class","svelte-hocrpi"),u(t,"class","domain-preview svelte-hocrpi"),u(p,"for","base-domain"),u(p,"class","svelte-hocrpi"),u(v,"id","base-domain"),u(v,"type","text"),u(v,"placeholder","example.com"),u(v,"class","svelte-hocrpi"),u(f,"class","form-group svelte-hocrpi"),u(g,"for","domain-aliases"),u(g,"class","svelte-hocrpi"),u(k,"id","domain-aliases"),u(k,"type","text"),u(k,"placeholder","api.myclient.com, app.example.com"),u(k,"class","svelte-hocrpi"),u(S,"class","svelte-hocrpi"),u(m,"class","form-group svelte-hocrpi"),u(e,"class","domain-config svelte-hocrpi")},m(E,q){w(E,e,q),r(e,t),r(t,n),r(t,s),r(t,i),r(i,a),r(e,c),r(e,f),r(f,p),r(f,d),r(f,v),ne(v,l[10]),r(e,h),r(e,m),r(m,g),r(m,C),r(m,k),ne(k,l[52]),r(m,y),r(m,S),D||(z=[le(v,"input",l[135]),le(k,"input",l[136])],D=!0)},p(E,q){q[1]&268435456&&o!==(o=(E[59]||"app-project-env.domain.com")+"")&&j(a,o),q[0]&1024&&v.value!==E[10]&&ne(v,E[10]),q[1]&2097152&&k.value!==E[52]&&ne(k,E[52])},d(E){E&&$(e),D=!1,Ue(z)}}}function zp(l){let e,t;return e=new Ke({props:{variant:"info",$$slots:{default:[Pp]},$$scope:{ctx:l}}}),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const i={};s[0]&256|s[6]&1073741824&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(L(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){pe(e,n)}}}function Ep(l){let e,t;return e=new Ke({props:{variant:"info",$$slots:{default:[Lp]},$$scope:{ctx:l}}}),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const i={};s[0]&256|s[6]&1073741824&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(L(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){pe(e,n)}}}function Pp(l){let e=l[8].size+"",t,n;return{c(){t=T(e),n=T(" selected")},m(s,i){w(s,t,i),w(s,n,i)},p(s,i){i[0]&256&&e!==(e=s[8].size+"")&&j(t,e)},d(s){s&&($(t),$(n))}}}function Lp(l){let e=l[8].size===1?"1 selected":"select 1",t;return{c(){t=T(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&256&&e!==(e=n[8].size===1?"1 selected":"select 1")&&j(t,e)},d(n){n&&$(t)}}}function ni(l){let e,t,n,s,i;return t=new Be({props:{variant:"ghost",size:"sm",$$slots:{default:[Np]},$$scope:{ctx:l}}}),t.$on("click",l[137]),s=new Be({props:{variant:"ghost",size:"sm",$$slots:{default:[Rp]},$$scope:{ctx:l}}}),s.$on("click",l[138]),{c(){e=_("div"),_e(t.$$.fragment),n=b(),_e(s.$$.fragment),u(e,"class","server-actions svelte-hocrpi")},m(o,a){w(o,e,a),fe(t,e,null),r(e,n),fe(s,e,null),i=!0},p(o,a){const c={};a[6]&1073741824&&(c.$$scope={dirty:a,ctx:o}),t.$set(c);const f={};a[6]&1073741824&&(f.$$scope={dirty:a,ctx:o}),s.$set(f)},i(o){i||(L(t.$$.fragment,o),L(s.$$.fragment,o),i=!0)},o(o){R(t.$$.fragment,o),R(s.$$.fragment,o),i=!1},d(o){o&&$(e),pe(t),pe(s)}}}function Np(l){let e;return{c(){e=T("✓ All")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Rp(l){let e;return{c(){e=T("✕ None")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Mp(l){let e,t,n,s;const i=[jp,Op],o=[];function a(c,f){return!c[40]||c[40].length===0?0:1}return t=a(l),n=o[t]=i[t](l),{c(){e=_("div"),n.c(),u(e,"class","server-list svelte-hocrpi")},m(c,f){w(c,e,f),o[t].m(e,null),s=!0},p(c,f){let p=t;t=a(c),t===p?o[t].p(c,f):(Te(),R(o[p],1,1,()=>{o[p]=null}),De(),n=o[t],n?n.p(c,f):(n=o[t]=i[t](c),n.c()),L(n,1),n.m(e,null))},i(c){s||(L(n),s=!0)},o(c){R(n),s=!1},d(c){c&&$(e),o[t].d()}}}function Ap(l){let e,t,n,s,i,o;function a(h,m){return h[0]==="stateful"?Bp:Ip}let c=a(l),f=c(l);const p=[Hp,Up],d=[];function v(h,m){return!h[40]||h[40].length===0?0:1}return s=v(l),i=d[s]=p[s](l),{c(){e=_("div"),t=_("small"),f.c(),n=b(),i.c(),u(t,"class","select-hint svelte-hocrpi"),u(e,"class","server-list single-select svelte-hocrpi")},m(h,m){w(h,e,m),r(e,t),f.m(t,null),r(e,n),d[s].m(e,null),o=!0},p(h,m){c!==(c=a(h))&&(f.d(1),f=c(h),f&&(f.c(),f.m(t,null)));let g=s;s=v(h),s===g?d[s].p(h,m):(Te(),R(d[g],1,1,()=>{d[g]=null}),De(),i=d[s],i?i.p(h,m):(i=d[s]=p[s](h),i.c()),L(i,1),i.m(e,null))},i(h){o||(L(i),o=!0)},o(h){R(i),o=!1},d(h){h&&$(e),f.d(),d[s].d()}}}function Op(l){let e,t,n=ve(l[40]),s=[];for(let o=0;o<n.length;o+=1)s[o]=ii(mo(l,n,o));const i=o=>R(s[o],1,1,()=>{s[o]=null});return{c(){for(let o=0;o<s.length;o+=1)s[o].c();e=Ie()},m(o,a){for(let c=0;c<s.length;c+=1)s[c]&&s[c].m(o,a);w(o,e,a),t=!0},p(o,a){if(a[0]&256|a[1]&512|a[2]&16){n=ve(o[40]);let c;for(c=0;c<n.length;c+=1){const f=mo(o,n,c);s[c]?(s[c].p(f,a),L(s[c],1)):(s[c]=ii(f),s[c].c(),L(s[c],1),s[c].m(e.parentNode,e))}for(Te(),c=n.length;c<s.length;c+=1)i(c);De()}},i(o){if(!t){for(let a=0;a<n.length;a+=1)L(s[a]);t=!0}},o(o){s=s.filter(an);for(let a=0;a<s.length;a+=1)R(s[a]);t=!1},d(o){o&&$(e),Ee(s,o)}}}function jp(l){let e,t,n=(l[7]||"any region")+"",s;return{c(){e=_("div"),t=T("No servers in "),s=T(n),u(e,"class","empty svelte-hocrpi")},m(i,o){w(i,e,o),r(e,t),r(e,s)},p(i,o){o[0]&128&&n!==(n=(i[7]||"any region")+"")&&j(s,n)},i:be,o:be,d(i){i&&$(e)}}}function si(l){let e,t,n,s,i,o=(l[176].name||"unnamed")+"",a,c,f,p=l[196]+"",d,v,h,m,g,C;function k(){return l[140](l[196])}let y=l[176].project&&oi(l);return{c(){e=_("label"),t=_("input"),s=b(),i=_("span"),a=T(o),c=b(),f=_("code"),d=T(p),v=b(),y&&y.c(),h=b(),u(t,"type","checkbox"),t.checked=n=l[8].has(l[196]),u(t,"class","svelte-hocrpi"),u(i,"class","server-name svelte-hocrpi"),u(f,"class","server-ip svelte-hocrpi"),u(e,"class","server-item svelte-hocrpi"),$e(e,"selected",l[8].has(l[196]))},m(S,D){w(S,e,D),r(e,t),r(e,s),r(e,i),r(i,a),r(e,c),r(e,f),r(f,d),r(e,v),y&&y.m(e,null),r(e,h),m=!0,g||(C=le(t,"change",k),g=!0)},p(S,D){l=S,(!m||D[0]&256|D[1]&512&&n!==(n=l[8].has(l[196])))&&(t.checked=n),(!m||D[1]&512)&&o!==(o=(l[176].name||"unnamed")+"")&&j(a,o),(!m||D[1]&512)&&p!==(p=l[196]+"")&&j(d,p),l[176].project?y?(y.p(l,D),D[1]&512&&L(y,1)):(y=oi(l),y.c(),L(y,1),y.m(e,h)):y&&(Te(),R(y,1,1,()=>{y=null}),De()),(!m||D[0]&256|D[1]&512)&&$e(e,"selected",l[8].has(l[196]))},i(S){m||(L(y),m=!0)},o(S){R(y),m=!1},d(S){S&&$(e),y&&y.d(),g=!1,C()}}}function oi(l){let e,t;return e=new Ke({props:{variant:"info",$$slots:{default:[Fp]},$$scope:{ctx:l}}}),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const i={};s[1]&512|s[6]&1073741824&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(L(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){pe(e,n)}}}function Fp(l){let e=l[176].project+"",t;return{c(){t=T(e)},m(n,s){w(n,t,s)},p(n,s){s[1]&512&&e!==(e=n[176].project+"")&&j(t,e)},d(n){n&&$(t)}}}function ii(l){let e,t,n=l[196]&&si(l);return{c(){n&&n.c(),e=Ie()},m(s,i){n&&n.m(s,i),w(s,e,i),t=!0},p(s,i){s[196]?n?(n.p(s,i),i[1]&512&&L(n,1)):(n=si(s),n.c(),L(n,1),n.m(e.parentNode,e)):n&&(Te(),R(n,1,1,()=>{n=null}),De())},i(s){t||(L(n),t=!0)},o(s){R(n),t=!1},d(s){s&&$(e),n&&n.d(s)}}}function Ip(l){let e;return{c(){e=T("ℹ️ Scheduled jobs run on one server to avoid duplicate execution.")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Bp(l){let e;return{c(){e=T("ℹ️ Stateful services run on a single server. For replication, deploy multiple named services.")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Up(l){let e,t,n=ve(l[40]),s=[];for(let o=0;o<n.length;o+=1)s[o]=ci(ho(l,n,o));const i=o=>R(s[o],1,1,()=>{s[o]=null});return{c(){for(let o=0;o<s.length;o+=1)s[o].c();e=Ie()},m(o,a){for(let c=0;c<s.length;c+=1)s[c]&&s[c].m(o,a);w(o,e,a),t=!0},p(o,a){if(a[0]&256|a[1]&512|a[2]&64){n=ve(o[40]);let c;for(c=0;c<n.length;c+=1){const f=ho(o,n,c);s[c]?(s[c].p(f,a),L(s[c],1)):(s[c]=ci(f),s[c].c(),L(s[c],1),s[c].m(e.parentNode,e))}for(Te(),c=n.length;c<s.length;c+=1)i(c);De()}},i(o){if(!t){for(let a=0;a<n.length;a+=1)L(s[a]);t=!0}},o(o){s=s.filter(an);for(let a=0;a<s.length;a+=1)R(s[a]);t=!1},d(o){o&&$(e),Ee(s,o)}}}function Hp(l){let e,t,n=(l[7]||"any region")+"",s;return{c(){e=_("div"),t=T("No servers in "),s=T(n),u(e,"class","empty svelte-hocrpi")},m(i,o){w(i,e,o),r(e,t),r(e,s)},p(i,o){o[0]&128&&n!==(n=(i[7]||"any region")+"")&&j(s,n)},i:be,o:be,d(i){i&&$(e)}}}function ri(l){let e,t,n,s,i,o=(l[176].name||"unnamed")+"",a,c,f,p=l[196]+"",d,v,h,m,g,C;function k(){return l[139](l[196])}let y=l[176].project&&ai(l);return{c(){e=_("label"),t=_("input"),s=b(),i=_("span"),a=T(o),c=b(),f=_("code"),d=T(p),v=b(),y&&y.c(),h=b(),u(t,"type","radio"),u(t,"name","single-server"),t.checked=n=l[8].has(l[196]),u(t,"class","svelte-hocrpi"),u(i,"class","server-name svelte-hocrpi"),u(f,"class","server-ip svelte-hocrpi"),u(e,"class","server-item svelte-hocrpi"),$e(e,"selected",l[8].has(l[196]))},m(S,D){w(S,e,D),r(e,t),r(e,s),r(e,i),r(i,a),r(e,c),r(e,f),r(f,d),r(e,v),y&&y.m(e,null),r(e,h),m=!0,g||(C=le(t,"change",k),g=!0)},p(S,D){l=S,(!m||D[0]&256|D[1]&512&&n!==(n=l[8].has(l[196])))&&(t.checked=n),(!m||D[1]&512)&&o!==(o=(l[176].name||"unnamed")+"")&&j(a,o),(!m||D[1]&512)&&p!==(p=l[196]+"")&&j(d,p),l[176].project?y?(y.p(l,D),D[1]&512&&L(y,1)):(y=ai(l),y.c(),L(y,1),y.m(e,h)):y&&(Te(),R(y,1,1,()=>{y=null}),De()),(!m||D[0]&256|D[1]&512)&&$e(e,"selected",l[8].has(l[196]))},i(S){m||(L(y),m=!0)},o(S){R(y),m=!1},d(S){S&&$(e),y&&y.d(),g=!1,C()}}}function ai(l){let e,t;return e=new Ke({props:{variant:"info",$$slots:{default:[Gp]},$$scope:{ctx:l}}}),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const i={};s[1]&512|s[6]&1073741824&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(L(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){pe(e,n)}}}function Gp(l){let e=l[176].project+"",t;return{c(){t=T(e)},m(n,s){w(n,t,s)},p(n,s){s[1]&512&&e!==(e=n[176].project+"")&&j(t,e)},d(n){n&&$(t)}}}function ci(l){let e,t,n=l[196]&&ri(l);return{c(){n&&n.c(),e=Ie()},m(s,i){n&&n.m(s,i),w(s,e,i),t=!0},p(s,i){s[196]?n?(n.p(s,i),i[1]&512&&L(n,1)):(n=ri(s),n.c(),L(n,1),n.m(e.parentNode,e)):n&&(Te(),R(n,1,1,()=>{n=null}),De())},i(s){t||(L(n),t=!0)},o(s){R(n),t=!1},d(s){s&&$(e),n&&n.d(s)}}}function ui(l){let e,t;return e=new Ke({props:{variant:"warning",$$slots:{default:[Wp]},$$scope:{ctx:l}}}),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const i={};s[0]&512|s[6]&1073741824&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(L(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){pe(e,n)}}}function Wp(l){let e,t;return{c(){e=T(l[9]),t=T(" new")},m(n,s){w(n,e,s),w(n,t,s)},p(n,s){s[0]&512&&j(e,n[9])},d(n){n&&($(e),$(t))}}}function fi(l){let e,t,n,s,i,o,a,c,f,p,d,v,h,m,g,C,k,y,S,D,z,E,q=l[0]==="service"||l[0]==="worker"?"s":"",N,B,O,F,J,H,A=l[9]>0&&pi(),M=ve(l[11]||[]),P=[];for(let U=0;U<M.length;U+=1)P[U]=_i(vo(l,M,U));let I=ve(l[38]||[]),V=[];for(let U=0;U<I.length;U+=1)V[U]=di(_o(l,I,U));let ee=ve(l[39]||[]),Q=[];for(let U=0;U<ee.length;U+=1)Q[U]=vi(po(l,ee,U));function Z(U,re){return U[0]==="stateful"||U[0]==="scheduled"?Jp:Vp}let oe=Z(l),x=oe(l),G=l[9]>0&&!l[6]&&mi();return{c(){e=_("div"),t=_("div"),n=_("div"),s=_("label"),i=T("Snapshot "),A&&A.c(),o=b(),a=_("select"),c=_("option"),c.textContent="Select snapshot...";for(let U=0;U<P.length;U+=1)P[U].c();f=b(),p=_("div"),d=_("label"),d.textContent="Region",v=b(),h=_("select");for(let U=0;U<V.length;U+=1)V[U].c();m=b(),g=_("div"),C=_("label"),C.textContent="Size",k=b(),y=_("select");for(let U=0;U<Q.length;U+=1)Q[U].c();S=b(),D=_("div"),z=_("span"),E=T("New server"),N=T(q),B=T(" to provision:"),O=b(),x.c(),F=b(),G&&G.c(),u(s,"for","snapshot-select"),u(s,"class","svelte-hocrpi"),c.__value="",ne(c,c.__value),u(a,"id","snapshot-select"),u(a,"class","svelte-hocrpi"),l[6]===void 0&&Xe(()=>l[142].call(a)),u(n,"class","form-group svelte-hocrpi"),u(d,"for","region-select"),u(d,"class","svelte-hocrpi"),u(h,"id","region-select"),u(h,"class","svelte-hocrpi"),l[7]===void 0&&Xe(()=>l[143].call(h)),u(p,"class","form-group svelte-hocrpi"),u(C,"for","size-select"),u(C,"class","svelte-hocrpi"),u(y,"id","size-select"),u(y,"class","svelte-hocrpi"),l[37]===void 0&&Xe(()=>l[144].call(y)),u(g,"class","form-group svelte-hocrpi"),u(t,"class","form-row three-col svelte-hocrpi"),u(D,"class","new-servers svelte-hocrpi"),u(e,"class","section-content provisioning-config svelte-hocrpi")},m(U,re){w(U,e,re),r(e,t),r(t,n),r(n,s),r(s,i),A&&A.m(s,null),r(n,o),r(n,a),r(a,c);for(let W=0;W<P.length;W+=1)P[W]&&P[W].m(a,null);ze(a,l[6],!0),r(t,f),r(t,p),r(p,d),r(p,v),r(p,h);for(let W=0;W<V.length;W+=1)V[W]&&V[W].m(h,null);ze(h,l[7],!0),r(t,m),r(t,g),r(g,C),r(g,k),r(g,y);for(let W=0;W<Q.length;W+=1)Q[W]&&Q[W].m(y,null);ze(y,l[37],!0),r(e,S),r(e,D),r(D,z),r(z,E),r(z,N),r(z,B),r(D,O),x.m(D,null),r(D,F),G&&G.m(D,null),J||(H=[le(a,"change",l[142]),le(h,"change",l[143]),le(y,"change",l[144])],J=!0)},p(U,re){if(U[9]>0?A||(A=pi(),A.c(),A.m(s,null)):A&&(A.d(1),A=null),re[0]&2048){M=ve(U[11]||[]);let W;for(W=0;W<M.length;W+=1){const ae=vo(U,M,W);P[W]?P[W].p(ae,re):(P[W]=_i(ae),P[W].c(),P[W].m(a,null))}for(;W<P.length;W+=1)P[W].d(1);P.length=M.length}if(re[0]&2112&&ze(a,U[6]),re[1]&128){I=ve(U[38]||[]);let W;for(W=0;W<I.length;W+=1){const ae=_o(U,I,W);V[W]?V[W].p(ae,re):(V[W]=di(ae),V[W].c(),V[W].m(h,null))}for(;W<V.length;W+=1)V[W].d(1);V.length=I.length}if(re[0]&128|re[1]&128&&ze(h,U[7]),re[1]&256){ee=ve(U[39]||[]);let W;for(W=0;W<ee.length;W+=1){const ae=po(U,ee,W);Q[W]?Q[W].p(ae,re):(Q[W]=vi(ae),Q[W].c(),Q[W].m(y,null))}for(;W<Q.length;W+=1)Q[W].d(1);Q.length=ee.length}re[1]&320&&ze(y,U[37]),re[0]&1&&q!==(q=U[0]==="service"||U[0]==="worker"?"s":"")&&j(N,q),oe===(oe=Z(U))&&x?x.p(U,re):(x.d(1),x=oe(U),x&&(x.c(),x.m(D,F))),U[9]>0&&!U[6]?G||(G=mi(),G.c(),G.m(D,null)):G&&(G.d(1),G=null)},d(U){U&&$(e),A&&A.d(),Ee(P,U),Ee(V,U),Ee(Q,U),x.d(),G&&G.d(),J=!1,Ue(H)}}}function pi(l){let e;return{c(){e=T("*")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function _i(l){let e,t=l[193].name+"",n,s;return{c(){e=_("option"),n=T(t),e.__value=s=l[193].id,ne(e,e.__value)},m(i,o){w(i,e,o),r(e,n)},p(i,o){o[0]&2048&&t!==(t=i[193].name+"")&&j(n,t),o[0]&2048&&s!==(s=i[193].id)&&(e.__value=s,ne(e,e.__value))},d(i){i&&$(e)}}}function di(l){let e,t=(l[190].name||l[190].slug)+"",n,s;return{c(){e=_("option"),n=T(t),e.__value=s=l[190].slug,ne(e,e.__value)},m(i,o){w(i,e,o),r(e,n)},p(i,o){o[1]&128&&t!==(t=(i[190].name||i[190].slug)+"")&&j(n,t),o[1]&128&&s!==(s=i[190].slug)&&(e.__value=s,ne(e,e.__value))},d(i){i&&$(e)}}}function vi(l){let e,t=(l[187].description||l[187].slug)+"",n,s;return{c(){e=_("option"),n=T(t),e.__value=s=l[187].slug,ne(e,e.__value)},m(i,o){w(i,e,o),r(e,n)},p(i,o){o[1]&256&&t!==(t=(i[187].description||i[187].slug)+"")&&j(n,t),o[1]&256&&s!==(s=i[187].slug)&&(e.__value=s,ne(e,e.__value))},d(i){i&&$(e)}}}function Vp(l){let e,t,n,s,i,o,a,c;return{c(){e=_("div"),t=_("button"),t.textContent="−",n=b(),s=_("input"),i=b(),o=_("button"),o.textContent="+",u(t,"type","button"),u(t,"class","svelte-hocrpi"),u(s,"type","number"),u(s,"min","0"),u(s,"max","10"),u(s,"class","svelte-hocrpi"),u(o,"type","button"),u(o,"class","svelte-hocrpi"),u(e,"class","number-spinner svelte-hocrpi")},m(f,p){w(f,e,p),r(e,t),r(e,n),r(e,s),ne(s,l[9]),r(e,i),r(e,o),a||(c=[le(t,"click",l[146]),le(s,"input",l[147]),le(o,"click",l[148])],a=!0)},p(f,p){p[0]&512&&Ht(s.value)!==f[9]&&ne(s,f[9])},d(f){f&&$(e),a=!1,Ue(c)}}}function Jp(l){let e,t,n,s,i,o,a;return{c(){e=_("label"),t=_("input"),s=b(),i=_("span"),i.textContent="Provision 1 new server",u(t,"type","checkbox"),t.checked=n=l[9]===1,u(t,"class","svelte-hocrpi"),u(e,"class","checkbox-label svelte-hocrpi")},m(c,f){w(c,e,f),r(e,t),r(e,s),r(e,i),o||(a=le(t,"change",l[145]),o=!0)},p(c,f){f[0]&512&&n!==(n=c[9]===1)&&(t.checked=n)},d(c){c&&$(e),o=!1,a()}}}function mi(l){let e;return{c(){e=_("small"),e.textContent="⚠️ Select a snapshot for new servers",u(e,"class","warning svelte-hocrpi")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Yp(l){let e;return{c(){e=T("🚀 Deploy")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Kp(l){let e;return{c(){e=T("Deploying...")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Qp(l){let e;function t(i,o){return i[41]?Kp:Yp}let n=t(l),s=n(l);return{c(){s.c(),e=Ie()},m(i,o){s.m(i,o),w(i,e,o)},p(i,o){n!==(n=t(i))&&(s.d(1),s=n(i),s&&(s.c(),s.m(e.parentNode,e)))},d(i){i&&$(e),s.d(i)}}}function Zp(l){let e,t,n,s,i,o,a,c,f,p,d,v,h,m,g,C,k,y,S,D,z,E,q,N,B,O,F,J,H,A,M,P,I,V=l[0]==="service"||l[0]==="worker"?"s":"",ee,Q,Z,oe,x,G,U,re,W,ae,te,Y,de=l[58]?"▼":"▶",ce,ie,X,K,me,ge,He,at,ft,Tt,qe=ve(l[60]),Oe=[];for(let he=0;he<qe.length;he+=1)Oe[he]=yo(wo(l,qe,he));let Re=l[0]==="stateful"&&Co(l),st=ve(l[61]),Me=[];for(let he=0;he<st.length;he+=1)Me[he]=So($o(l,st,he));let Le=l[0]==="stateful"&&To(l),Ge=l[0]!=="stateful"&&qo(l),ot=l[0]==="service"&&Wo(l),tt=(l[0]==="worker"||l[0]==="scheduled")&&Vo(l),lt=l[0]==="scheduled"&&Jo(l),Ve=l[0]!=="stateful"&&Yo(l),Qe=l[0]!=="stateful"&&Zo(l);const Wt=[Ep,zp],Dt=[];function Zt(he,Pe){return he[0]==="stateful"||he[0]==="scheduled"?0:1}Z=Zt(l),oe=Dt[Z]=Wt[Z](l);let Ze=(l[0]==="service"||l[0]==="worker")&&ni(l);const At=[Ap,Mp],Et=[];function Ot(he,Pe){return he[0]==="stateful"||he[0]==="scheduled"?0:1}U=Ot(l),re=Et[U]=At[U](l);let it=l[9]>0&&ui(l),dt=l[58]&&fi(l);return He=new Be({props:{variant:"primary",type:"submit",disabled:l[41],$$slots:{default:[Qp]},$$scope:{ctx:l}}}),{c(){e=_("form"),t=_("div");for(let he=0;he<Oe.length;he+=1)Oe[he].c();n=b(),s=_("div"),i=_("div"),o=_("label"),o.textContent="Project *",a=b(),c=_("input"),f=b(),p=_("div"),d=_("label"),d.textContent="Service Name *",v=b(),h=_("input"),g=b(),Re&&Re.c(),C=b(),k=_("div"),y=_("label"),y.textContent="Environment",S=b(),D=_("select");for(let he=0;he<Me.length;he+=1)Me[he].c();z=b(),Le&&Le.c(),E=b(),Ge&&Ge.c(),q=b(),ot&&ot.c(),N=b(),tt&&tt.c(),B=b(),lt&&lt.c(),O=b(),Ve&&Ve.c(),F=b(),Qe&&Qe.c(),J=b(),H=_("div"),A=_("div"),M=_("div"),P=_("span"),I=T("🖥️ Server"),ee=T(V),Q=b(),oe.c(),x=b(),Ze&&Ze.c(),G=b(),re.c(),W=b(),ae=_("div"),te=_("button"),Y=_("span"),ce=T(de),ie=b(),X=_("span"),X.textContent="➕ New Server Provisioning",K=b(),it&&it.c(),me=b(),dt&&dt.c(),ge=b(),_e(He.$$.fragment),u(t,"class","deploy-type-selector svelte-hocrpi"),u(o,"for","deploy-project"),u(o,"class","svelte-hocrpi"),u(c,"id","deploy-project"),u(c,"type","text"),u(c,"placeholder","my-project"),c.required=!0,u(c,"pattern","[-a-z0-9]*"),u(c,"class","svelte-hocrpi"),u(i,"class","form-group svelte-hocrpi"),u(d,"for","deploy-name"),u(d,"class","svelte-hocrpi"),u(h,"id","deploy-name"),u(h,"type","text"),u(h,"placeholder",m=l[0]==="stateful"?l[1]:"api"),h.required=!0,u(h,"pattern","[-a-z0-9]+"),u(h,"title","Lowercase letters, numbers, hyphens only"),u(h,"class","svelte-hocrpi"),u(p,"class","form-group svelte-hocrpi"),u(y,"for","deploy-env"),u(y,"class","svelte-hocrpi"),u(D,"id","deploy-env"),u(D,"class","svelte-hocrpi"),l[5]===void 0&&Xe(()=>l[89].call(D)),u(k,"class","form-group svelte-hocrpi"),u(s,"class","form-row three-col svelte-hocrpi"),u(M,"class","server-title svelte-hocrpi"),u(A,"class","server-header svelte-hocrpi"),u(Y,"class","toggle-icon svelte-hocrpi"),u(te,"type","button"),u(te,"class","section-toggle svelte-hocrpi"),u(ae,"class","collapsible-section svelte-hocrpi"),$e(ae,"expanded",l[58]),u(H,"class","server-selection svelte-hocrpi")},m(he,Pe){w(he,e,Pe),r(e,t);for(let ct=0;ct<Oe.length;ct+=1)Oe[ct]&&Oe[ct].m(t,null);r(e,n),r(e,s),r(s,i),r(i,o),r(i,a),r(i,c),ne(c,l[4]),r(s,f),r(s,p),r(p,d),r(p,v),r(p,h),ne(h,l[3]),r(p,g),Re&&Re.m(p,null),r(s,C),r(s,k),r(k,y),r(k,S),r(k,D);for(let ct=0;ct<Me.length;ct+=1)Me[ct]&&Me[ct].m(D,null);ze(D,l[5],!0),r(e,z),Le&&Le.m(e,null),r(e,E),Ge&&Ge.m(e,null),r(e,q),ot&&ot.m(e,null),r(e,N),tt&&tt.m(e,null),r(e,B),lt&&lt.m(e,null),r(e,O),Ve&&Ve.m(e,null),r(e,F),Qe&&Qe.m(e,null),r(e,J),r(e,H),r(H,A),r(A,M),r(M,P),r(P,I),r(P,ee),r(M,Q),Dt[Z].m(M,null),r(A,x),Ze&&Ze.m(A,null),r(H,G),Et[U].m(H,null),r(H,W),r(H,ae),r(ae,te),r(te,Y),r(Y,ce),r(te,ie),r(te,X),r(te,K),it&&it.m(te,null),r(ae,me),dt&&dt.m(ae,null),r(e,ge),fe(He,e,null),at=!0,ft||(Tt=[le(c,"input",l[87]),le(h,"input",l[88]),le(D,"change",l[89]),le(te,"click",l[141]),le(e,"submit",l[80])],ft=!0)},p(he,Pe){if(Pe[0]&1|Pe[1]&536870912){qe=ve(he[60]);let Je;for(Je=0;Je<qe.length;Je+=1){const It=wo(he,qe,Je);Oe[Je]?Oe[Je].p(It,Pe):(Oe[Je]=yo(It),Oe[Je].c(),Oe[Je].m(t,null))}for(;Je<Oe.length;Je+=1)Oe[Je].d(1);Oe.length=qe.length}if(Pe[0]&16&&c.value!==he[4]&&ne(c,he[4]),(!at||Pe[0]&3&&m!==(m=he[0]==="stateful"?he[1]:"api"))&&u(h,"placeholder",m),Pe[0]&8&&h.value!==he[3]&&ne(h,he[3]),he[0]==="stateful"?Re?Re.p(he,Pe):(Re=Co(he),Re.c(),Re.m(p,null)):Re&&(Re.d(1),Re=null),Pe[1]&1073741824){st=ve(he[61]);let Je;for(Je=0;Je<st.length;Je+=1){const It=$o(he,st,Je);Me[Je]?Me[Je].p(It,Pe):(Me[Je]=So(It),Me[Je].c(),Me[Je].m(D,null))}for(;Je<Me.length;Je+=1)Me[Je].d(1);Me.length=st.length}Pe[0]&32|Pe[1]&1073741824&&ze(D,he[5]),he[0]==="stateful"?Le?Le.p(he,Pe):(Le=To(he),Le.c(),Le.m(e,E)):Le&&(Le.d(1),Le=null),he[0]!=="stateful"?Ge?(Ge.p(he,Pe),Pe[0]&1&&L(Ge,1)):(Ge=qo(he),Ge.c(),L(Ge,1),Ge.m(e,q)):Ge&&(Te(),R(Ge,1,1,()=>{Ge=null}),De()),he[0]==="service"?ot?ot.p(he,Pe):(ot=Wo(he),ot.c(),ot.m(e,N)):ot&&(ot.d(1),ot=null),he[0]==="worker"||he[0]==="scheduled"?tt?tt.p(he,Pe):(tt=Vo(he),tt.c(),tt.m(e,B)):tt&&(tt.d(1),tt=null),he[0]==="scheduled"?lt?lt.p(he,Pe):(lt=Jo(he),lt.c(),lt.m(e,O)):lt&&(lt.d(1),lt=null),he[0]!=="stateful"?Ve?(Ve.p(he,Pe),Pe[0]&1&&L(Ve,1)):(Ve=Yo(he),Ve.c(),L(Ve,1),Ve.m(e,F)):Ve&&(Te(),R(Ve,1,1,()=>{Ve=null}),De()),he[0]!=="stateful"?Qe?(Qe.p(he,Pe),Pe[0]&1&&L(Qe,1)):(Qe=Zo(he),Qe.c(),L(Qe,1),Qe.m(e,J)):Qe&&(Te(),R(Qe,1,1,()=>{Qe=null}),De()),(!at||Pe[0]&1)&&V!==(V=he[0]==="service"||he[0]==="worker"?"s":"")&&j(ee,V);let ct=Z;Z=Zt(he),Z===ct?Dt[Z].p(he,Pe):(Te(),R(Dt[ct],1,1,()=>{Dt[ct]=null}),De(),oe=Dt[Z],oe?oe.p(he,Pe):(oe=Dt[Z]=Wt[Z](he),oe.c()),L(oe,1),oe.m(M,null)),he[0]==="service"||he[0]==="worker"?Ze?(Ze.p(he,Pe),Pe[0]&1&&L(Ze,1)):(Ze=ni(he),Ze.c(),L(Ze,1),Ze.m(A,null)):Ze&&(Te(),R(Ze,1,1,()=>{Ze=null}),De());let jt=U;U=Ot(he),U===jt?Et[U].p(he,Pe):(Te(),R(Et[jt],1,1,()=>{Et[jt]=null}),De(),re=Et[U],re?re.p(he,Pe):(re=Et[U]=At[U](he),re.c()),L(re,1),re.m(H,W)),(!at||Pe[1]&134217728)&&de!==(de=he[58]?"▼":"▶")&&j(ce,de),he[9]>0?it?(it.p(he,Pe),Pe[0]&512&&L(it,1)):(it=ui(he),it.c(),L(it,1),it.m(te,null)):it&&(Te(),R(it,1,1,()=>{it=null}),De()),he[58]?dt?dt.p(he,Pe):(dt=fi(he),dt.c(),dt.m(ae,null)):dt&&(dt.d(1),dt=null),(!at||Pe[1]&134217728)&&$e(ae,"expanded",he[58]);const Ft={};Pe[1]&1024&&(Ft.disabled=he[41]),Pe[1]&1024|Pe[6]&1073741824&&(Ft.$$scope={dirty:Pe,ctx:he}),He.$set(Ft)},i(he){at||(L(Ge),L(Ve),L(Qe),L(oe),L(Ze),L(re),L(it),L(He.$$.fragment,he),at=!0)},o(he){R(Ge),R(Ve),R(Qe),R(oe),R(Ze),R(re),R(it),R(He.$$.fragment,he),at=!1},d(he){he&&$(e),Ee(Oe,he),Re&&Re.d(),Ee(Me,he),Le&&Le.d(),Ge&&Ge.d(),ot&&ot.d(),tt&&tt.d(),lt&&lt.d(),Ve&&Ve.d(),Qe&&Qe.d(),Dt[Z].d(),Ze&&Ze.d(),Et[U].d(),it&&it.d(),dt&&dt.d(),pe(He),ft=!1,Ue(Tt)}}}function Xp(l){let e;return{c(){e=_("div"),e.innerHTML='<p>No deployment in progress</p> <p class="hint svelte-hocrpi">Fill in the form and click Deploy to start</p>',u(e,"class","empty-state svelte-hocrpi")},m(t,n){w(t,e,n)},p:be,d(t){t&&$(e)}}}function xp(l){let e,t,n,s,i,o,a=ve(l[43]),c=[];for(let v=0;v<a.length;v+=1)c[v]=hi(fo(l,a,v));function f(v,h){if(v[44]&&v[44].success)return t_;if(v[44]&&!v[44].success)return e_}let p=f(l),d=p&&p(l);return{c(){e=_("div"),t=_("div"),n=_("div"),s=b(),i=_("div");for(let v=0;v<c.length;v+=1)c[v].c();o=b(),d&&d.c(),u(n,"class","progress-fill svelte-hocrpi"),Rt(n,"width",l[42]+"%"),u(t,"class","progress-bar svelte-hocrpi"),u(i,"class","log-output svelte-hocrpi"),u(e,"class","progress-section svelte-hocrpi")},m(v,h){w(v,e,h),r(e,t),r(t,n),r(e,s),r(e,i);for(let m=0;m<c.length;m+=1)c[m]&&c[m].m(i,null);r(e,o),d&&d.m(e,null)},p(v,h){if(h[1]&2048&&Rt(n,"width",v[42]+"%"),h[1]&4096){a=ve(v[43]);let m;for(m=0;m<a.length;m+=1){const g=fo(v,a,m);c[m]?c[m].p(g,h):(c[m]=hi(g),c[m].c(),c[m].m(i,null))}for(;m<c.length;m+=1)c[m].d(1);c.length=a.length}p===(p=f(v))&&d?d.p(v,h):(d&&d.d(1),d=p&&p(v),d&&(d.c(),d.m(e,null)))},d(v){v&&$(e),Ee(c,v),d&&d.d()}}}function hi(l){let e,t,n=l[82].time.toLocaleTimeString()+"",s,i,o,a=Ei(l[82].message)+"",c,f;return{c(){e=_("div"),t=_("span"),s=T(n),i=b(),o=new iu(!1),c=b(),u(t,"class","log-time svelte-hocrpi"),o.a=c,u(e,"class",f="log-line "+l[82].type+" svelte-hocrpi")},m(p,d){w(p,e,d),r(e,t),r(t,s),r(e,i),o.m(a,e),r(e,c)},p(p,d){d[1]&4096&&n!==(n=p[82].time.toLocaleTimeString()+"")&&j(s,n),d[1]&4096&&a!==(a=Ei(p[82].message)+"")&&o.p(a),d[1]&4096&&f!==(f="log-line "+p[82].type+" svelte-hocrpi")&&u(e,"class",f)},d(p){p&&$(e)}}}function e_(l){let e,t,n,s,i,o=l[5].toUpperCase()+"",a,c,f,p=l[44].error&&gi(l);function d(m,g){return m[44].servers&&m[44].servers.length>0?n_:l_}let v=d(l),h=v(l);return{c(){e=_("div"),t=_("div"),n=_("h4"),n.textContent="❌ Deployment Failed",s=b(),i=_("span"),a=T(o),c=b(),p&&p.c(),f=b(),h.c(),u(n,"class","svelte-hocrpi"),u(i,"class","env-badge svelte-hocrpi"),u(t,"class","result-header svelte-hocrpi"),u(e,"class","deploy-failure-box svelte-hocrpi")},m(m,g){w(m,e,g),r(e,t),r(t,n),r(t,s),r(t,i),r(i,a),r(e,c),p&&p.m(e,null),r(e,f),h.m(e,null)},p(m,g){g[0]&32&&o!==(o=m[5].toUpperCase()+"")&&j(a,o),m[44].error?p?p.p(m,g):(p=gi(m),p.c(),p.m(e,f)):p&&(p.d(1),p=null),v===(v=d(m))&&h?h.p(m,g):(h.d(1),h=v(m),h&&(h.c(),h.m(e,null)))},d(m){m&&$(e),p&&p.d(),h.d()}}}function t_(l){let e,t,n,s,i,o=l[5].toUpperCase()+"",a,c,f,p,d=l[44].domain&&$i(l),v=l[44].connection_url&&wi(l),h=l[44].servers&&l[44].servers.length>0&&yi(l);return{c(){e=_("div"),t=_("div"),n=_("h4"),n.textContent="✅ Deployment Complete",s=b(),i=_("span"),a=T(o),c=b(),d&&d.c(),f=b(),v&&v.c(),p=b(),h&&h.c(),u(n,"class","svelte-hocrpi"),u(i,"class","env-badge svelte-hocrpi"),u(t,"class","result-header svelte-hocrpi"),u(e,"class","deploy-success-box svelte-hocrpi")},m(m,g){w(m,e,g),r(e,t),r(t,n),r(t,s),r(t,i),r(i,a),r(e,c),d&&d.m(e,null),r(e,f),v&&v.m(e,null),r(e,p),h&&h.m(e,null)},p(m,g){g[0]&32&&o!==(o=m[5].toUpperCase()+"")&&j(a,o),m[44].domain?d?d.p(m,g):(d=$i(m),d.c(),d.m(e,f)):d&&(d.d(1),d=null),m[44].connection_url?v?v.p(m,g):(v=wi(m),v.c(),v.m(e,p)):v&&(v.d(1),v=null),m[44].servers&&m[44].servers.length>0?h?h.p(m,g):(h=yi(m),h.c(),h.m(e,null)):h&&(h.d(1),h=null)},d(m){m&&$(e),d&&d.d(),v&&v.d(),h&&h.d()}}}function gi(l){let e,t=l[44].error+"",n;return{c(){e=_("p"),n=T(t)},m(s,i){w(s,e,i),r(e,n)},p(s,i){i[1]&8192&&t!==(t=s[44].error+"")&&j(n,t)},d(s){s&&$(e)}}}function l_(l){let e;return{c(){e=_("p"),e.textContent="No server details available",Rt(e,"margin-top","8px"),Rt(e,"opacity","0.8")},m(t,n){w(t,e,n)},p:be,d(t){t&&$(e)}}}function n_(l){let e,t,n,s,i=ve(l[44].servers),o=[];for(let a=0;a<i.length;a+=1)o[a]=ki(ao(l,i,a));return{c(){e=_("div"),t=_("span"),t.textContent="Server Status:",n=b(),s=_("div");for(let a=0;a<o.length;a+=1)o[a].c();u(t,"class","result-label svelte-hocrpi"),u(s,"class","server-links svelte-hocrpi"),u(e,"class","result-section svelte-hocrpi"),Rt(e,"margin-top","12px")},m(a,c){w(a,e,c),r(e,t),r(e,n),r(e,s);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(s,null)},p(a,c){if(c[0]&8|c[1]&8192){i=ve(a[44].servers);let f;for(f=0;f<i.length;f+=1){const p=ao(a,i,f);o[f]?o[f].p(p,c):(o[f]=ki(p),o[f].c(),o[f].m(s,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=i.length}},d(a){a&&$(e),Ee(o,a)}}}function s_(l){let e,t=l[176].ip+"",n,s,i=l[176].error&&bi(l);return{c(){e=T("❌ "),n=T(t),i&&i.c(),s=Ie()},m(o,a){w(o,e,a),w(o,n,a),i&&i.m(o,a),w(o,s,a)},p(o,a){a[1]&8192&&t!==(t=o[176].ip+"")&&j(n,t),o[176].error?i?i.p(o,a):(i=bi(o),i.c(),i.m(s.parentNode,s)):i&&(i.d(1),i=null)},d(o){o&&($(e),$(n),$(s)),i&&i.d(o)}}}function o_(l){let e,t=l[176].ip+"",n;return{c(){e=T("✅ "),n=T(t)},m(s,i){w(s,e,i),w(s,n,i)},p(s,i){i[1]&8192&&t!==(t=s[176].ip+"")&&j(n,t)},d(s){s&&($(e),$(n))}}}function bi(l){let e,t=l[176].error+"",n;return{c(){e=T(": "),n=T(t)},m(s,i){w(s,e,i),w(s,n,i)},p(s,i){i[1]&8192&&t!==(t=s[176].error+"")&&j(n,t)},d(s){s&&($(e),$(n))}}}function ki(l){let e,t,n,s,i,o,a;function c(v,h){return v[176].success?o_:s_}let f=c(l),p=f(l);function d(){return l[152](l[176])}return{c(){e=_("div"),t=_("span"),p.c(),n=b(),s=_("button"),s.textContent="📋 Logs",i=b(),u(s,"class","log-btn svelte-hocrpi"),u(e,"class","server-link-row svelte-hocrpi")},m(v,h){w(v,e,h),r(e,t),p.m(t,null),r(e,n),r(e,s),r(e,i),o||(a=le(s,"click",d),o=!0)},p(v,h){l=v,f===(f=c(l))&&p?p.p(l,h):(p.d(1),p=f(l),p&&(p.c(),p.m(t,null)))},d(v){v&&$(e),p.d(),o=!1,a()}}}function $i(l){let e,t,n,s,i,o=l[44].domain+"",a,c;return{c(){e=_("div"),t=_("span"),t.textContent="Domain:",n=b(),s=_("a"),i=T("https://"),a=T(o),u(t,"class","result-label svelte-hocrpi"),u(s,"href",c="https://"+l[44].domain),u(s,"target","_blank"),u(s,"class","result-link svelte-hocrpi"),u(e,"class","result-section svelte-hocrpi")},m(f,p){w(f,e,p),r(e,t),r(e,n),r(e,s),r(s,i),r(s,a)},p(f,p){p[1]&8192&&o!==(o=f[44].domain+"")&&j(a,o),p[1]&8192&&c!==(c="https://"+f[44].domain)&&u(s,"href",c)},d(f){f&&$(e)}}}function wi(l){let e,t,n,s,i,o=(l[44].env_var_name||"URL")+"",a,c,f=l[44].connection_url+"",p,d,v,h,m;return{c(){e=_("div"),t=_("span"),t.textContent="Connection:",n=b(),s=_("div"),i=_("code"),a=T(o),c=T("="),p=T(f),d=b(),v=_("button"),v.textContent="📋 Copy",u(t,"class","result-label svelte-hocrpi"),u(i,"class","connection-url svelte-hocrpi"),u(v,"class","copy-btn svelte-hocrpi"),u(s,"class","connection-info svelte-hocrpi"),u(e,"class","result-section svelte-hocrpi")},m(g,C){w(g,e,C),r(e,t),r(e,n),r(e,s),r(s,i),r(i,a),r(i,c),r(i,p),r(s,d),r(s,v),h||(m=le(v,"click",l[149]),h=!0)},p(g,C){C[1]&8192&&o!==(o=(g[44].env_var_name||"URL")+"")&&j(a,o),C[1]&8192&&f!==(f=g[44].connection_url+"")&&j(p,f)},d(g){g&&$(e),h=!1,m()}}}function yi(l){let e,t,n,s,i,o=l[44].servers.some(Pi),a,c=ve(l[44].servers.filter(Ai)),f=[];for(let d=0;d<c.length;d+=1)f[d]=Ci(uo(l,c,d));let p=o&&Si(l);return{c(){e=_("div"),t=_("span"),t.textContent="Servers:",n=b(),s=_("div");for(let d=0;d<f.length;d+=1)f[d].c();i=b(),p&&p.c(),a=Ie(),u(t,"class","result-label svelte-hocrpi"),u(s,"class","server-links svelte-hocrpi"),u(e,"class","result-section svelte-hocrpi")},m(d,v){w(d,e,v),r(e,t),r(e,n),r(e,s);for(let h=0;h<f.length;h+=1)f[h]&&f[h].m(s,null);w(d,i,v),p&&p.m(d,v),w(d,a,v)},p(d,v){if(v[0]&8|v[1]&8192){c=ve(d[44].servers.filter(Ai));let h;for(h=0;h<c.length;h+=1){const m=uo(d,c,h);f[h]?f[h].p(m,v):(f[h]=Ci(m),f[h].c(),f[h].m(s,null))}for(;h<f.length;h+=1)f[h].d(1);f.length=c.length}v[1]&8192&&(o=d[44].servers.some(Pi)),o?p?p.p(d,v):(p=Si(d),p.c(),p.m(a.parentNode,a)):p&&(p.d(1),p=null)},d(d){d&&($(e),$(i),$(a)),Ee(f,d),p&&p.d(d)}}}function Ci(l){let e,t,n=l[176].url+"",s,i,o,a,c,f,p;function d(){return l[150](l[176])}return{c(){e=_("div"),t=_("a"),s=T(n),o=b(),a=_("button"),a.textContent="📋 Logs",c=b(),u(t,"href",i=l[176].url),u(t,"target","_blank"),u(t,"class","result-link svelte-hocrpi"),u(a,"class","log-btn svelte-hocrpi"),u(e,"class","server-link-row svelte-hocrpi")},m(v,h){w(v,e,h),r(e,t),r(t,s),r(e,o),r(e,a),r(e,c),f||(p=le(a,"click",d),f=!0)},p(v,h){l=v,h[1]&8192&&n!==(n=l[176].url+"")&&j(s,n),h[1]&8192&&i!==(i=l[176].url)&&u(t,"href",i)},d(v){v&&$(e),f=!1,p()}}}function Si(l){let e,t,n,s=ve(l[44].servers.filter(Oi)),i=[];for(let o=0;o<s.length;o+=1)i[o]=Ti(co(l,s,o));return{c(){e=_("div"),t=_("span"),t.textContent="Failed Servers:",n=b();for(let o=0;o<i.length;o+=1)i[o].c();u(t,"class","result-label svelte-hocrpi"),Rt(t,"color","#fef3c7"),u(e,"class","failed-servers-section svelte-hocrpi")},m(o,a){w(o,e,a),r(e,t),r(e,n);for(let c=0;c<i.length;c+=1)i[c]&&i[c].m(e,null)},p(o,a){if(a[0]&8|a[1]&8192){s=ve(o[44].servers.filter(Oi));let c;for(c=0;c<s.length;c+=1){const f=co(o,s,c);i[c]?i[c].p(f,a):(i[c]=Ti(f),i[c].c(),i[c].m(e,null))}for(;c<i.length;c+=1)i[c].d(1);i.length=s.length}},d(o){o&&$(e),Ee(i,o)}}}function Ti(l){let e,t,n,s=l[176].ip+"",i,o,a=(l[176].error||"Unknown error")+"",c,f,p,d,v,h;function m(){return l[151](l[176])}return{c(){e=_("div"),t=_("span"),n=T("❌ "),i=T(s),o=T(": "),c=T(a),f=b(),p=_("button"),p.textContent="📋 Logs",d=b(),Rt(t,"color","#fef3c7"),u(p,"class","log-btn svelte-hocrpi"),u(e,"class","server-link-row svelte-hocrpi")},m(g,C){w(g,e,C),r(e,t),r(t,n),r(t,i),r(t,o),r(t,c),r(e,f),r(e,p),r(e,d),v||(h=le(p,"click",m),v=!0)},p(g,C){l=g,C[1]&8192&&s!==(s=l[176].ip+"")&&j(i,s),C[1]&8192&&a!==(a=(l[176].error||"Unknown error")+"")&&j(c,a)},d(g){g&&$(e),v=!1,h()}}}function i_(l){let e;function t(i,o){return i[41]||i[43].length>0?xp:Xp}let n=t(l),s=n(l);return{c(){s.c(),e=Ie()},m(i,o){s.m(i,o),w(i,e,o)},p(i,o){n===(n=t(i))&&s?s.p(i,o):(s.d(1),s=n(i),s&&(s.c(),s.m(e.parentNode,e)))},d(i){i&&$(e),s.d(i)}}}function Di(l){let e,t,n=(l[176].name||l[176].ip)+"",s,i,o,a=l[176].ip+"",c,f;return{c(){e=_("div"),t=_("span"),s=T(n),i=b(),o=_("span"),c=T(a),f=b(),u(t,"class","server-name svelte-hocrpi"),u(o,"class","server-ip svelte-hocrpi"),u(e,"class","cleanup-server-item svelte-hocrpi")},m(p,d){w(p,e,d),r(e,t),r(t,s),r(e,i),r(e,o),r(o,c),r(e,f)},p(p,d){d[1]&32768&&n!==(n=(p[176].name||p[176].ip)+"")&&j(s,n),d[1]&32768&&a!==(a=p[176].ip+"")&&j(c,a)},d(p){p&&$(e)}}}function r_(l){let e,t,n,s,i=l[46].length+[...l[8]].length+"",o,a,c,f=[...l[8]].length+"",p,d,v,h,m,g,C=ve(l[46]),k=[];for(let y=0;y<C.length;y+=1)k[y]=Di(ro(l,C,y));return{c(){e=_("div"),t=_("p"),n=T("This service is currently running on "),s=_("strong"),o=T(i),a=T(` servers.
      You're deploying to `),c=_("strong"),p=T(f),d=T(" servers."),v=b(),h=_("p"),h.textContent="Stop containers on the following servers?",m=b(),g=_("div");for(let y=0;y<k.length;y+=1)k[y].c();u(t,"class","svelte-hocrpi"),u(h,"class","svelte-hocrpi"),u(g,"class","cleanup-server-list svelte-hocrpi"),u(e,"class","cleanup-confirm-content svelte-hocrpi")},m(y,S){w(y,e,S),r(e,t),r(t,n),r(t,s),r(s,o),r(t,a),r(t,c),r(c,p),r(t,d),r(e,v),r(e,h),r(e,m),r(e,g);for(let D=0;D<k.length;D+=1)k[D]&&k[D].m(g,null)},p(y,S){if(S[0]&256|S[1]&32768&&i!==(i=y[46].length+[...y[8]].length+"")&&j(o,i),S[0]&256&&f!==(f=[...y[8]].length+"")&&j(p,f),S[1]&32768){C=ve(y[46]);let D;for(D=0;D<C.length;D+=1){const z=ro(y,C,D);k[D]?k[D].p(z,S):(k[D]=Di(z),k[D].c(),k[D].m(g,null))}for(;D<k.length;D+=1)k[D].d(1);k.length=C.length}},d(y){y&&$(e),Ee(k,y)}}}function a_(l){let e;return{c(){e=T("Proceed")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function c_(l){let e;return{c(){e=T("Cancel")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function u_(l){let e,t,n,s,i;return t=new Be({props:{variant:"primary",$$slots:{default:[a_]},$$scope:{ctx:l}}}),t.$on("click",l[81]),s=new Be({props:{variant:"ghost",$$slots:{default:[c_]},$$scope:{ctx:l}}}),s.$on("click",l[153]),{c(){e=_("div"),_e(t.$$.fragment),n=b(),_e(s.$$.fragment),u(e,"slot","footer")},m(o,a){w(o,e,a),fe(t,e,null),r(e,n),fe(s,e,null),i=!0},p(o,a){const c={};a[6]&1073741824&&(c.$$scope={dirty:a,ctx:o}),t.$set(c);const f={};a[6]&1073741824&&(f.$$scope={dirty:a,ctx:o}),s.$set(f)},i(o){i||(L(t.$$.fragment,o),L(s.$$.fragment,o),i=!0)},o(o){R(t.$$.fragment,o),R(s.$$.fragment,o),i=!1},d(o){o&&$(e),pe(t),pe(s)}}}function f_(l){let e,t,n,s,i,o,a,c,f;n=new ut({props:{title:"🚀 Deploy",$$slots:{default:[Zp]},$$scope:{ctx:l}}}),i=new ut({props:{title:"📋 Deployment Progress",$$slots:{default:[i_]},$$scope:{ctx:l}}});function p(v){l[154](v)}let d={title:"⚠️ Service Already Running",width:"500px",$$slots:{footer:[u_],default:[r_]},$$scope:{ctx:l}};return l[45]!==void 0&&(d.open=l[45]),a=new xt({props:d}),Lt.push(()=>fl(a,"open",p)),a.$on("close",l[155]),{c(){e=_("div"),t=_("div"),_e(n.$$.fragment),s=b(),_e(i.$$.fragment),o=b(),_e(a.$$.fragment),u(t,"class","deploy-grid svelte-hocrpi"),u(e,"class","deploy-page svelte-hocrpi")},m(v,h){w(v,e,h),r(e,t),fe(n,t,null),r(t,s),fe(i,t,null),w(v,o,h),fe(a,v,h),f=!0},p(v,h){const m={};h[0]&2147483647|h[1]&536741887|h[6]&1073741824&&(m.$$scope={dirty:h,ctx:v}),n.$set(m);const g={};h[0]&40|h[1]&15360|h[6]&1073741824&&(g.$$scope={dirty:h,ctx:v}),i.$set(g);const C={};h[0]&256|h[1]&114688|h[6]&1073741824&&(C.$$scope={dirty:h,ctx:v}),!c&&h[1]&16384&&(c=!0,C.open=v[45],ul(()=>c=!1)),a.$set(C)},i(v){f||(L(n.$$.fragment,v),L(i.$$.fragment,v),L(a.$$.fragment,v),f=!0)},o(v){R(n.$$.fragment,v),R(i.$$.fragment,v),R(a.$$.fragment,v),f=!1},d(v){v&&($(e),$(o)),pe(n),pe(i),pe(a,v)}}}function p_(l){l.preventDefault(),l.stopPropagation()}async function Qa(l,e){const t=[],n=l.createReader();let s=[],i;do i=await new Promise((o,a)=>{n.readEntries(o,a)}),s=s.concat(i);while(i.length>0);for(const o of s){const a=e?`${e}/${o.name}`:o.name;if(o.isFile){const c=await new Promise((f,p)=>{o.file(f,p)});c._relativePath=a,t.push(c)}else if(o.isDirectory){const c=await Qa(o,a);t.push(...c)}}return t}function qi(l){return new Promise((e,t)=>{const n=new FileReader;n.onload=()=>e(new Uint8Array(n.result)),n.onerror=t,n.readAsArrayBuffer(l)})}function zi(l){return new Promise((e,t)=>{const n=new FileReader;n.onload=()=>e(n.result),n.onerror=t,n.readAsText(l)})}function Ei(l){const e=/(https?:\/\/[^\s]+)/g;return l.replace(e,'<a href="$1" target="_blank" class="log-link">$1</a>')}const Pi=l=>!l.success,Li=l=>l,__=l=>l.isMain,Ni=l=>l.isMain,Ri=l=>l.isMain,Mi=l=>l.trim(),Ai=l=>l.success,Oi=l=>!l.success;function d_(l,e,t){let n,s,i;_t(l,Pu,se=>t(11,s=se)),_t(l,Fl,se=>t(84,i=se));let o="service";const a=[{value:"stateful",label:"🗄️ Stateful",description:"Database or cache (postgres, redis...)"},{value:"service",label:"🌐 Service",description:"Web app with HTTP port & domain"},{value:"worker",label:"⚙️ Worker",description:"Background job processor"},{value:"scheduled",label:"⏰ Scheduled",description:"Cron job / periodic task"}];let c="redis",f=[{value:"redis",label:"⚡ Redis",port:6379,image:"redis:7-alpine",description:"In-memory cache & pub/sub"},{value:"postgres",label:"🐘 PostgreSQL",port:5432,image:"postgres:16-alpine",description:"Relational database"},{value:"mysql",label:"🐬 MySQL",port:3306,image:"mysql:8",description:"Relational database"},{value:"mongo",label:"🍃 MongoDB",port:27017,image:"mongo:7",description:"Document database"},{value:"opensearch",label:"🔍 OpenSearch",port:9200,image:"opensearchproject/opensearch:2",description:"Search & analytics"},{value:"qdrant",label:"🧠 Qdrant",port:6333,image:"qdrant/qdrant:latest",description:"Vector database for AI"}],p="",d="",v="",h="",m="prod",g="",C="code",k=8e3,y="",S="",D="main",z="",E=[],q="",N="",B=null,O="",F="",J="",H=[],A=null,M=null,P=!0,I=!1,V="",ee="",Q=!1,Z="",oe="",x="",G="lon1",U="s-1vcpu-2gb",re=[],W=[],ae=[],te=!1,Y=0,de=[],ce=new Set,ie=0,X=null,K=!1,me=[],ge=null,He=!0,at=!0,ft={postgres:!1,redis:!1,mysql:!1,mongo:!1},Tt=!0,qe="digitalpixo.com",Oe="",Re="",st=!1,Me=["node_modules/","__pycache__/","*.pyc",".git/",".venv/","venv/",".env",".DS_Store",".idea/",".vscode/","dist/","build/",".pytest_cache/",".mypy_cache/"],Le=Me.join(`
`),Ge=!1,ot=!1,tt=!1;const lt=[...Me],Ve=["dev","test","staging","uat","prod"];hl(()=>{Kt.refresh().catch(()=>{}),rn.refresh().catch(()=>{}),Wt()});let Qe=null;async function Wt(){var se;try{try{const ue=await Fe("GET","/infra/regions");t(38,re=ue.regions||ue||[])}catch{t(38,re=[{slug:"nyc1",name:"New York 1"},{slug:"nyc3",name:"New York 3"},{slug:"sfo3",name:"San Francisco 3"},{slug:"ams3",name:"Amsterdam 3"},{slug:"sgp1",name:"Singapore 1"},{slug:"lon1",name:"London 1"},{slug:"fra1",name:"Frankfurt 1"}])}try{const ue=await Fe("GET","/infra/sizes");t(39,W=ue.sizes||ue||[])}catch{t(39,W=[{slug:"s-1vcpu-512mb-10gb",description:"$4/mo - 512MB / 1 vCPU"},{slug:"s-1vcpu-1gb",description:"$6/mo - 1GB / 1 vCPU"},{slug:"s-1vcpu-2gb",description:"$12/mo - 2GB / 1 vCPU"},{slug:"s-2vcpu-2gb",description:"$18/mo - 2GB / 2 vCPU"},{slug:"s-2vcpu-4gb",description:"$24/mo - 4GB / 2 vCPU"},{slug:"s-4vcpu-8gb",description:"$48/mo - 8GB / 4 vCPU"}])}try{const ue=await Fe("GET","/infra/stateful-types");((se=ue.types)==null?void 0:se.length)>0&&t(2,f=ue.types)}catch{console.warn("Using fallback stateful types")}}catch(ue){console.error("Failed to load regions/sizes:",ue)}}async function Dt(){var se;if(!v){Ce.warning("Enter app name first");return}t(53,Re="Loading...");try{const ke=await Fe("GET",`/infra/deploy-configs/${h||"default"}/${v}/${m}`);Ze(ke),t(53,Re="✓ Loaded"),Ce.success("Config loaded")}catch(ue){(se=ue.message)!=null&&se.includes("404")?(t(53,Re="No saved config"),Ce.info("No saved config found")):(t(53,Re="Load failed"),Ce.error("Failed to load config"))}}async function Zt(){try{const ue=await Fe("GET",`/infra/deploy-configs/${h||"default"}/${v}/${m}`);Ze(ue),t(53,Re="✓ Auto-loaded")}catch{t(53,Re="")}}function Ze(se){var ue,ke;se.source_type&&t(15,C={folder:"code",git:"git",image:"image"}[se.source_type]||se.source_type),se.git_url&&t(18,S=se.git_url),se.git_branch&&t(19,D=se.git_branch),se.port&&t(16,k=se.port),se.env_vars&&Object.keys(se.env_vars).length>0&&t(17,y=Object.entries(se.env_vars).map(([Ae,je])=>`${Ae}=${je}`).join(`
`)),((ue=se.exclude_patterns)==null?void 0:ue.length)>0&&(Me=se.exclude_patterns,t(55,Le=Me.join(`
`))),((ke=se.server_ips)==null?void 0:ke.length)>0&&t(8,ce=new Set(se.server_ips))}async function At(){if(!v){Ce.warning("Enter app name first");return}t(53,Re="Saving...");const se={};for(const Ae of y.split(`
`)){const je=Ae.trim();if(je&&je.includes("=")){const[kt,...rt]=je.split("=");se[kt.trim()]=rt.join("=").trim()}}const ue=Le.split(`
`).map(Ae=>Ae.trim()).filter(Boolean),ke={project_name:h||"default",service_name:v,env:m,source_type:C==="code"?"folder":C,git_url:S||null,git_branch:D||"main",exclude_patterns:ue.length>0?ue:lt,port:k,env_vars:se,server_ips:Array.from(ce)};try{await Fe("POST","/infra/deploy-configs",ke),t(53,Re="✓ Saved"),Ce.success("Config saved")}catch{t(53,Re="Save failed"),Ce.error("Failed to save config")}}function Et(){t(54,st=!st),st||(Me=Le.split(`
`).map(se=>se.trim()).filter(Boolean))}function Ot(){Me=[...lt],t(55,Le=lt.join(`
`)),Ce.info("Reset to default patterns")}function it(se){for(const ue of Me)if(ue.endsWith("/")){const ke=ue.slice(0,-1);if(se.startsWith(ke+"/")||se.includes("/"+ke+"/"))return!0}else if(ue.startsWith("*")){const ke=ue.slice(1);if(se.endsWith(ke))return!0}else if(se===ue||se.endsWith("/"+ue))return!0;return!1}function dt(se){ce.has(se)?ce.delete(se):ce.add(se),t(8,ce),t(0,o),t(9,ie)}function he(se){se?(ae||[]).forEach(ue=>{var Ae,je,kt;const ke=ue.ip||((kt=(je=(Ae=ue.networks)==null?void 0:Ae.v4)==null?void 0:je[0])==null?void 0:kt.ip_address);ke&&ce.add(ke)}):ce.clear(),t(8,ce),t(0,o),t(9,ie)}function Pe(se){ce.clear(),ce.add(se),t(8,ce),t(0,o),t(9,ie),(o==="stateful"||o==="scheduled")&&t(9,ie=0)}function ct(){M=async(se,ue)=>{await _l(se,ue,H.length===0)},A==null||A.click()}async function jt(se){const ue=Array.from(se.target.files||[]);if(!ue.length||!M)return;console.log(`[Deploy] Browser returned ${ue.length} files`),ue.length<50?console.log("[Deploy] Files:",ue.map(je=>je.webkitRelativePath)):console.log("[Deploy] First 20 files:",ue.slice(0,20).map(je=>je.webkitRelativePath));const Ae=ue[0].webkitRelativePath.split("/")[0];await M(ue,Ae),M=null,se.target.value=""}function Ft(se){se.preventDefault(),se.stopPropagation(),t(31,I=!0)}function Je(se){se.preventDefault(),se.stopPropagation(),se.currentTarget.contains(se.relatedTarget)||t(31,I=!1)}async function It(se){var ke,Ae;se.preventDefault(),se.stopPropagation(),t(31,I=!1);const ue=(ke=se.dataTransfer)==null?void 0:ke.items;if(!(!ue||ue.length===0)){for(const je of ue)if(je.kind==="file"){const kt=(Ae=je.webkitGetAsEntry)==null?void 0:Ae.call(je);kt!=null&&kt.isDirectory&&await pl(kt)}}}async function pl(se){const ue=se.name;if(H.some(je=>je.name===ue)){Ce.error(`Folder "${ue}" is already added`);return}Ce.info(`Reading ${ue}/...`);const ke=await Qa(se,"");if(ke.length===0){Ce.error(`No files found in ${ue}/`);return}const Ae=H.length===0;await il(ke,ue,Ae)}async function il(se,ue,ke){ke&&H.some(rt=>rt.isMain)&&t(28,H=H.map(rt=>({...rt,isMain:!1})));const Ae=[];let je=null,kt=0;for(const rt of se){const Jt=rt._relativePath||rt.name;if(it(Jt)){kt++;continue}const wl=await qi(rt);Ae.push({path:Jt,content:wl}),ke&&Jt==="Dockerfile"&&(je=await zi(rt))}console.log(`[Deploy] Dropped ${ue}/: ${se.length} total, ${kt} skipped, ${Ae.length} included`),t(28,H=[...H,{name:ue,fileContents:Ae,isMain:ke,fileCount:Ae.length}]),Vt(),H.some(rt=>rt.isMain)&&we(je),P&&h&&v&&Ut(),Ce.success(`Added ${ue}/ (${Ae.length} files)`)}async function _l(se,ue,ke){if(H.some(rt=>rt.name===ue)){Ce.error(`Folder "${ue}" is already added`);return}ke&&H.some(rt=>rt.isMain)&&t(28,H=H.map(rt=>({...rt,isMain:!1})));const Ae=[];let je=null,kt=0;for(const rt of se){const Jt=rt.webkitRelativePath.replace(`${ue}/`,"");if(it(Jt)){kt++;continue}const wl=await qi(rt);Ae.push({path:Jt,content:wl}),ke&&Jt==="Dockerfile"&&(je=await zi(rt))}console.log(`[Deploy] Processed ${ue}/: ${se.length} total, ${kt} skipped, ${Ae.length} included`),t(28,H=[...H,{name:ue,fileContents:Ae,isMain:ke,fileCount:Ae.length}]),Vt(),H.some(rt=>rt.isMain)&&we(je),P&&h&&v&&Ut(),Ce.success(`Added ${ue}/ (${Ae.length} files)`)}function dl(se){t(28,H=H.filter((ue,ke)=>ke!==se)),Vt(),H.length>0&&!H.some(ue=>ue.isMain)&&t(28,H=H.map((ue,ke)=>({...ue,isMain:ke===0})))}function Bt(se){t(28,H=H.map((ue,ke)=>({...ue,isMain:ke===se}))),we()}function Vt(){const se=H.some(ue=>ue.isMain);H.length&&se&&bl()}async function bl(){if(!H.length)return;const{default:se}=await to(async()=>{const{default:ke}=await import("https://cdn.jsdelivr.net/npm/jszip@3.10.1/+esm");return{default:ke}},[]),ue=new se;for(const ke of H)for(const{path:Ae,content:je}of ke.fileContents)ue.file(`${ke.name}/${Ae}`,je);H.length>1&&V&&ue.file("Dockerfile",V),await ue.generateAsync({type:"blob"})}function we(se=null){if(t(34,Q=!0),se)t(32,V=se),t(33,ee="from folder");else if(H.length>1)t(32,V=ye()),t(33,ee="multi-folder");else if(H.length===1){const ue=H[0];t(32,V=Ye(ue.fileContents.map(ke=>ke.path))),t(33,ee="generated")}ht()}function ye(){const se=H.find(je=>je.isMain);if(!se)return"";const ue=H.filter(je=>!je.isMain),ke=se.fileContents.some(je=>je.path==="requirements.txt");se.fileContents.some(je=>je.path==="package.json");let Ae=`FROM python:3.11-slim

WORKDIR /app

`;for(const je of ue)Ae+=`# Copy ${je.name}
COPY ${je.name}/ ./${je.name}/

`;return Ae+=`# Copy main service
COPY ${se.name}/ ./${se.name}/

`,ke&&(Ae+=`# Install dependencies
RUN pip install --no-cache-dir -r ${se.name}/requirements.txt

`),Ae+=`EXPOSE ${k}

`,Ae+=`CMD ["uvicorn", "${se.name}.main:app", "--host", "0.0.0.0", "--port", "${k}"]
`,Ae}function Ye(se){const ue=se.includes("requirements.txt"),ke=se.includes("package.json"),Ae=se.includes("pyproject.toml");return ue||Ae?`FROM python:3.11-slim

WORKDIR /app

COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

COPY . .

EXPOSE ${k}

CMD ["uvicorn", "main:app", "--host", "0.0.0.0", "--port", "${k}"]
`:ke?`FROM node:20-alpine

WORKDIR /app

COPY package*.json ./
RUN npm ci --only=production

COPY . .

EXPOSE ${k}

CMD ["node", "index.js"]
`:`FROM python:3.11-slim

WORKDIR /app

COPY . .

EXPOSE ${k}

CMD ["python", "main.py"]
`}function ht(){const se=V.match(/^FROM\s+(\S+)/m),ue=V.match(/^CMD\s+(.+)$/m);t(35,Z=se?se[1]:""),t(36,oe=ue?ue[1]:"")}function Mt(se){se==="from"&&Z?t(32,V=V.replace(/^FROM\s+\S+/m,`FROM ${Z}`)):se==="cmd"&&oe&&(V.includes("CMD ")?t(32,V=V.replace(/^CMD\s+.+$/m,`CMD ${oe}`)):t(32,V+=`
CMD ${oe}
`)),t(33,ee="edited")}function Ut(){if(!h||!v)return;const se=`build_folders_${h}_${v}`,ue=H.map(ke=>({name:ke.name,isMain:ke.isMain}));localStorage.setItem(se,JSON.stringify(ue))}function We(se){if(!q.trim()){Ce.error("Please enter a folder path");return}const ue=q.trim();if(se&&E.some(ke=>ke.isMain)&&t(21,E=E.map(ke=>({...ke,isMain:!1}))),E.some(ke=>ke.path===ue)){Ce.error("This folder is already added");return}t(21,E=[...E,{path:ue,isMain:se}]),t(22,q="")}function qt(se){t(21,E=E.filter((ue,ke)=>ke!==se))}function Nl(se){var ke;const ue=(ke=se.target.files)==null?void 0:ke[0];if(ue){if(!ue.name.endsWith(".tar")&&!ue.name.endsWith(".tar.gz")){Ce.error("Only .tar or .tar.gz image files are supported");return}t(24,B=ue),Ce.success(`Selected: ${ue.name}`)}}function vt(se,ue="info"){t(43,de=[...de,{message:se,type:ue,time:new Date}])}async function Rl(se){if(se.preventDefault(),Qe&&(clearTimeout(Qe),t(83,Qe=null)),!v){Ce.error("Service name is required");return}if(!h){Ce.error("Project name is required");return}if(o!=="stateful"){if(C==="code"&&!H.some(ke=>ke.isMain)){Ce.error("Add a main folder with your code");return}if(C==="git"&&!S){Ce.error("Git URL is required");return}if(C==="image"&&!N){Ce.error("Docker image URL is required");return}if(C==="image_file"&&!B){Ce.error("Upload a Docker image file (.tar)");return}if(C==="image_file"&&!O){Ce.error("Image name is required for local images");return}}if(o==="scheduled"&&!d){Ce.error("Cron schedule is required for scheduled jobs");return}if(ce.size===0&&ie===0){Ce.error("Select at least one server or add new servers");return}if(ie>0&&!x){Ce.error("Select a snapshot for new servers");return}if(!Gt()){Ce.error("Configure your DO Token in Settings first");return}if(o==="service"&&Tt&&!gn()){Ce.error("Configure your Cloudflare Token in Settings first (required for domain setup)");return}const ue=[...ce];if(h&&v&&m)try{const ke=new URLSearchParams({project:h,environment:m,service_name:v}),Ae=await Fe("GET",`/infra/services/state?${ke}`);if(Ae.server_ips&&Ae.server_ips.length>0){const je=Ae.servers.filter(kt=>!ue.includes(kt.ip));if(je.length>0){t(46,me=je),t(47,ge=()=>kl(se)),t(45,K=!0);return}}}catch(ke){console.log("Service state check:",ke.message||ke)}await kl()}async function mt(){t(45,K=!1);const se=`${h}_${v}_${m}`.replace(/[^a-zA-Z0-9_]/g,"_");if(me.length>0){const ue=me.map(ke=>ke.ip);vt(`Stopping containers on ${me.length} server(s)...`);try{const ke=await Fe("POST",`/infra/services/cleanup?do_token=${Gt()}`,{server_ips:ue,container_name:se});vt(`Cleanup complete: ${ke.cleaned} stopped, ${ke.failed} failed`)}catch(ke){vt(`Cleanup warning: ${ke.message||ke}`,"warning")}}t(46,me=[]),ge&&(await ge(),t(47,ge=null))}async function kl(se){t(41,te=!0),t(42,Y=0),t(43,de=[]),t(44,X=null);try{vt(`Starting ${o} deployment of ${v}...`),t(42,Y=10);let ue=C,ke=N,Ae=k;if(o==="stateful"){ue="image";const et=f.find(Yt=>Yt.value===c);ke=(et==null?void 0:et.image)||`${c}:latest`,Ae=(et==null?void 0:et.port)||5432}let je=null;if(o!=="stateful"&&C==="code"){vt("Creating code archive...");const{default:et}=await to(async()=>{const{default:yl}=await import("https://cdn.jsdelivr.net/npm/jszip@3.10.1/+esm");return{default:yl}},[]),Yt=new et;for(const yl of H)for(const{path:pn,content:Yc}of yl.fileContents)Yt.file(`${yl.name}/${pn}`,Yc);H.length>1&&V&&Yt.file("Dockerfile",V),je=await Yt.generateAsync({type:"blob"})}vt("Sending deployment request... server provisioning may take 30-60s"),t(42,Y=20);const kt=o==="service"&&Tt,rt=Gt(),Jt=gn(),wl=new URLSearchParams({do_token:rt,snapshot_id:x||"",new_server_count:String(ie),region:G,size:U,project:h||"",environment:m,setup_domain:String(kt),base_domain:qe,domain_aliases:JSON.stringify(Oe.split(",").map(et=>et.trim()).filter(Boolean))});kt&&Jt&&wl.set("cf_token",Jt);const xe=new FormData;xe.append("name",v),xe.append("port",String(Ae)),xe.append("source_type",ue),xe.append("env_vars",y),xe.append("tags",g),xe.append("server_ips",JSON.stringify(Array.from(ce))),xe.append("depends_on",JSON.stringify(Object.entries(ft).filter(([et,Yt])=>Yt).map(([et])=>et))),xe.append("exclude_patterns",JSON.stringify(Me)),xe.append("deploy_type",o),o==="stateful"?(xe.append("is_stateful","true"),xe.append("persist_data","true"),xe.append("image",ke)):(xe.append("is_stateful","false"),xe.append("persist_data",String(at))),(o==="worker"||o==="scheduled")&&p&&xe.append("custom_cmd",p),o==="scheduled"&&d&&xe.append("cron_schedule",d),V&&xe.append("dockerfile",V),S&&xe.append("git_url",S),D&&xe.append("git_branch",D),z&&xe.append("git_token",z),E.length&&xe.append("git_folders",JSON.stringify(E)),ke&&o!=="stateful"&&xe.append("image",ke),je&&xe.append("code_tar",je,"code.zip"),C==="image_file"&&(B&&xe.append("image_tar",B),O&&xe.append("image",O),F&&xe.append("container_port",String(F)),J&&xe.append("host_port",String(J))),await Du(`/infra/deploy/multipart?${wl}`,xe,et=>{var Yt;if(et.type==="log")vt(et.message);else if(et.type==="warning")vt(et.message||((Yt=et.data)==null?void 0:Yt.message),"warning");else if(et.type==="progress")t(42,Y=Math.min(20+(et.percent||0)*.8,95));else if(et.type==="done"){if(t(44,X=et),t(42,Y=100),!et.success){const yl=et.failed_count||0,pn=et.error||`Deployment failed: ${yl} server(s) failed`;throw new Error(pn)}}else if(et.type==="error")throw new Error(et.message||"Deployment failed")}),vt("✅ Deployment complete!","success"),Ce.success("Deployment successful!"),await Kt.refresh().catch(()=>{})}catch(ue){let ke="Unknown error";if(typeof ue=="string")ke=ue;else if(ue!=null&&ue.message)ke=ue.message;else if(ue!=null&&ue.detail)ke=ue.detail;else if(ue!=null&&ue.error)ke=ue.error;else try{ke=JSON.stringify(ue)}catch{ke=String(ue)}vt(`❌ Error: ${ke}`,"error"),Ce.error(ke)}finally{t(41,te=!1)}}const Ul=[[],[],[]];function rl(){o=this.__value,t(0,o)}function Ct(){h=this.value,t(4,h)}function al(){v=this.value,t(3,v),t(0,o),t(2,f),t(1,c)}function St(){m=pt(this),t(5,m),t(61,Ve)}function gt(){c=this.__value,t(1,c)}const bt=se=>se.value===c;function cn(){Le=this.value,t(55,Le)}function Hl(){g=this.value,t(14,g)}function un(){C=this.__value,t(15,C)}function Gl(){C=this.__value,t(15,C)}function fn(){C=this.__value,t(15,C)}function Wl(){C=this.__value,t(15,C)}function Se(se){Lt[se?"unshift":"push"](()=>{A=se,t(29,A)})}const Ne=se=>Bt(se),Pt=se=>dl(se);function $l(){P=this.checked,t(30,P)}function Ml(){V=this.value,t(32,V)}function nt(){Z=pt(this),t(35,Z)}const vl=()=>Mt("from");function Za(){oe=this.value,t(36,oe)}const Xa=()=>Mt("cmd");function xa(){S=this.value,t(18,S)}function ec(){D=this.value,t(19,D)}const tc=se=>qt(se);function lc(){q=this.value,t(22,q)}const nc=()=>We(!0),sc=()=>We(!1);function oc(){z=this.value,t(20,z)}function ic(){N=this.value,t(23,N)}function rc(){O=this.value,t(25,O)}function ac(){F=Ht(this.value),t(26,F)}function cc(){J=Ht(this.value),t(27,J)}function uc(){k=Ht(this.value),t(16,k)}function fc(){p=this.value,t(12,p)}function pc(){d=this.value,t(13,d)}const _c=()=>t(13,d="* * * * *"),dc=()=>t(13,d="0 * * * *"),vc=()=>t(13,d="0 0 * * *"),mc=()=>t(13,d="0 0 * * 0"),hc=()=>t(56,Ge=!Ge);function gc(){y=this.value,t(17,y)}const bc=()=>t(57,ot=!ot);function kc(){He=this.checked,t(48,He)}function $c(){ft.postgres=this.checked,t(50,ft)}function wc(){ft.redis=this.checked,t(50,ft)}function yc(){ft.mysql=this.checked,t(50,ft)}function Cc(){ft.mongo=this.checked,t(50,ft)}function Sc(){at=this.checked,t(49,at)}function Tc(){Tt=this.checked,t(51,Tt)}function Dc(){qe=this.value,t(10,qe)}function qc(){Oe=this.value,t(52,Oe)}const zc=()=>he(!0),Ec=()=>he(!1),Pc=se=>Pe(se),Lc=se=>dt(se),Nc=()=>t(58,tt=!tt);function Rc(){x=pt(this),t(6,x),t(11,s)}function Mc(){G=pt(this),t(7,G),t(38,re)}function Ac(){U=pt(this),t(37,U),t(39,W)}const Oc=se=>t(9,ie=se.target.checked?1:0),jc=()=>t(9,ie=Math.max(0,ie-1));function Fc(){ie=Ht(this.value),t(9,ie),t(0,o)}const Ic=()=>t(9,ie=Math.min(10,ie+1)),Bc=()=>{navigator.clipboard.writeText(X.connection_url),Ce.success("Copied to clipboard!")},Uc=se=>window.open(`/api/v1/infra/logs/${se.ip}/${se.container_name||X.container_name||v}`,"_blank"),Hc=se=>window.open(`/api/v1/infra/logs/${se.ip}/${se.container_name||X.container_name||v}`,"_blank"),Gc=se=>window.open(`/api/v1/infra/logs/${se.ip}/${se.container_name||X.container_name||v}`,"_blank"),Wc=()=>{t(45,K=!1),t(47,ge=null)};function Vc(se){K=se,t(45,K)}const Jc=()=>{t(45,K=!1),t(47,ge=null)};return l.$$.update=()=>{if(l.$$.dirty[0]&15&&o==="stateful"&&(!v||f.some(se=>se.value===v))&&t(3,v=c),l.$$.dirty[0]&128|l.$$.dirty[2]&4194304&&t(40,ae=(i||[]).filter(se=>!G||se.region===G)),l.$$.dirty[0]&257&&(o==="stateful"||o==="scheduled")&&ce.size>1){const se=[...ce][0];ce.clear(),se&&ce.add(se),t(8,ce),t(0,o),t(9,ie)}if(l.$$.dirty[0]&513&&(o==="stateful"||o==="scheduled")&&ie>1&&t(9,ie=1),l.$$.dirty[0]&769&&(o==="stateful"||o==="scheduled")&&ie>0&&ce.size>0&&(ce.clear(),t(8,ce),t(0,o),t(9,ie)),l.$$.dirty[0]&1080&&t(59,n=v&&h&&m?`${v}-${h}-${m}.${qe}`:""),l.$$.dirty[0]&25|l.$$.dirty[2]&2097152&&v&&h&&o!=="stateful"&&(Qe&&clearTimeout(Qe),t(83,Qe=setTimeout(()=>{Zt()},500))),l.$$.dirty[0]&2112&&(s==null?void 0:s.length)>0&&!x){const se=s.find(ue=>(ue.name||"").toLowerCase().includes("base"));t(6,x=(se==null?void 0:se.id)||(se==null?void 0:se.name)||s[0].id||s[0].name)}},[o,c,f,v,h,m,x,G,ce,ie,qe,s,p,d,g,C,k,y,S,D,z,E,q,N,B,O,F,J,H,A,P,I,V,ee,Q,Z,oe,U,re,W,ae,te,Y,de,X,K,me,ge,He,at,ft,Tt,Oe,Re,st,Le,Ge,ot,tt,n,a,Ve,Dt,At,Et,Ot,dt,he,Pe,ct,jt,Ft,Je,It,dl,Bt,Mt,We,qt,Nl,Rl,mt,vt,Qe,i,rl,Ul,Ct,al,St,gt,bt,cn,Hl,un,Gl,fn,Wl,Se,Ne,Pt,$l,Ml,nt,vl,Za,Xa,xa,ec,tc,lc,nc,sc,oc,ic,rc,ac,cc,uc,fc,pc,_c,dc,vc,mc,hc,gc,bc,kc,$c,wc,yc,Cc,Sc,Tc,Dc,qc,zc,Ec,Pc,Lc,Nc,Rc,Mc,Ac,Oc,jc,Fc,Ic,Bc,Uc,Hc,Gc,Wc,Vc,Jc]}class v_ extends yt{constructor(e){super(),wt(this,e,d_,f_,$t,{},null,[-1,-1,-1,-1,-1,-1,-1])}}function ji(l,e,t){const n=l.slice();return n[55]=e[t],n}function Fi(l,e,t){const n=l.slice();return n[55]=e[t],n}function Ii(l,e,t){const n=l.slice();return n[55]=e[t],n}function Bi(l,e,t){const n=l.slice();return n[62]=e[t],n}function Ui(l,e,t){const n=l.slice();return n[66]=e[t],n}function Hi(l,e,t){const n=l.slice();return n[69]=e[t][0],n[70]=e[t][1],n}function m_(l){const e=l.slice(),t=e[14].config_snapshot;return e[65]=t,e}function Gi(l,e,t){const n=l.slice();return n[62]=e[t],n}function Wi(l,e,t){const n=l.slice();return n[75]=e[t],n}function Vi(l,e,t){const n=l.slice();n[78]=e[t];const s=el(n[78]);return n[79]=s,n}function Ji(l){let e,t,n=Dr(l[20])+"",s;return{c(){e=_("span"),t=T("Updated "),s=T(n),u(e,"class","last-updated svelte-cuxyqu")},m(i,o){w(i,e,o),r(e,t),r(e,s)},p(i,o){o[0]&1048576&&n!==(n=Dr(i[20])+"")&&j(s,n)},d(i){i&&$(e)}}}function h_(l){let e;return{c(){e=T("↻ Refresh")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function g_(l){let e,t,n=ve(l[19]),s=[];for(let o=0;o<n.length;o+=1)s[o]=Zi(Vi(l,n,o));const i=o=>R(s[o],1,1,()=>{s[o]=null});return{c(){for(let o=0;o<s.length;o+=1)s[o].c();e=Ie()},m(o,a){for(let c=0;c<s.length;c+=1)s[c]&&s[c].m(o,a);w(o,e,a),t=!0},p(o,a){if(a[0]&27787264){n=ve(o[19]);let c;for(c=0;c<n.length;c+=1){const f=Vi(o,n,c);s[c]?(s[c].p(f,a),L(s[c],1)):(s[c]=Zi(f),s[c].c(),L(s[c],1),s[c].m(e.parentNode,e))}for(Te(),c=n.length;c<s.length;c+=1)i(c);De()}},i(o){if(!t){for(let a=0;a<n.length;a+=1)L(s[a]);t=!0}},o(o){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)R(s[a]);t=!1},d(o){o&&$(e),Ee(s,o)}}}function b_(l){let e;return{c(){e=_("tr"),e.innerHTML='<td colspan="12" class="empty-cell svelte-cuxyqu">No deployments found</td>',u(e,"class","svelte-cuxyqu")},m(t,n){w(t,e,n)},p:be,i:be,o:be,d(t){t&&$(e)}}}function k_(l){let e;return{c(){e=_("tr"),e.innerHTML='<td colspan="12" class="loading-cell svelte-cuxyqu">Loading deployment history...</td>',u(e,"class","svelte-cuxyqu")},m(t,n){w(t,e,n)},p:be,i:be,o:be,d(t){t&&$(e)}}}function $_(l){let e=(l[78].environment||"-")+"",t;return{c(){t=T(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&524288&&e!==(e=(n[78].environment||"-")+"")&&j(t,e)},d(n){n&&$(t)}}}function w_(l){let e;return{c(){e=_("span"),e.textContent="-",u(e,"class","version-none svelte-cuxyqu")},m(t,n){w(t,e,n)},p:be,d(t){t&&$(e)}}}function y_(l){let e,t,n=l[78].version+"",s;return{c(){e=_("span"),t=T("v"),s=T(n),u(e,"class","version-badge svelte-cuxyqu")},m(i,o){w(i,e,o),r(e,t),r(e,s)},p(i,o){o[0]&524288&&n!==(n=i[78].version+"")&&j(s,n)},d(i){i&&$(e)}}}function C_(l){let e=l[78].is_rollback?"rollback":"deploy",t;return{c(){t=T(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&524288&&e!==(e=n[78].is_rollback?"rollback":"deploy")&&j(t,e)},d(n){n&&$(t)}}}function S_(l){let e=l[79]+"",t;return{c(){t=T(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&524288&&e!==(e=n[79]+"")&&j(t,e)},d(n){n&&$(t)}}}function Yi(l){let e,t,n;function s(){return l[34](l[78])}return{c(){e=_("button"),e.textContent="⚙️",u(e,"class","icon-btn svelte-cuxyqu"),u(e,"title","View config")},m(i,o){w(i,e,o),t||(n=le(e,"click",s),t=!0)},p(i,o){l=i},d(i){i&&$(e),t=!1,n()}}}function Ki(l){let e,t,n;function s(){return l[35](l[78])}return{c(){e=_("button"),e.textContent="📋",u(e,"class","icon-btn svelte-cuxyqu"),u(e,"title","View logs")},m(i,o){w(i,e,o),t||(n=le(e,"click",s),t=!0)},p(i,o){l=i},d(i){i&&$(e),t=!1,n()}}}function Qi(l){let e,t,n;function s(){return l[36](l[78])}return{c(){e=_("button"),e.textContent="⏪",u(e,"class","icon-btn rollback-icon-btn svelte-cuxyqu"),u(e,"title","Rollback")},m(i,o){w(i,e,o),t||(n=le(e,"click",s),t=!0)},p(i,o){l=i},d(i){i&&$(e),t=!1,n()}}}function Zi(l){let e,t,n,s=(l[78].project||"-")+"",i,o,a,c,f=(l[78].service||l[78].name)+"",p,d,v,h,m,g,C,k,y=Qt(l[78].deployed_at||l[78].created_at)+"",S,D,z,E=(l[78].deployed_by||l[78].user||"-")+"",q,N,B,O,F,J,H,A,M,P,I=(l[78].comment||"-")+"",V,ee,Q,Z,oe,x,G,U,re;h=new Ke({props:{variant:l[78].environment==="prod"?"purple":l[78].environment==="staging"?"warning":"info",$$slots:{default:[$_]},$$scope:{ctx:l}}});function W(ie,X){return ie[78].version?y_:w_}let ae=W(l),te=ae(l);F=new Ke({props:{variant:l[78].is_rollback?"warning":"info",$$slots:{default:[C_]},$$scope:{ctx:l}}}),A=new Ke({props:{variant:Ll(l[79]),$$slots:{default:[S_]},$$scope:{ctx:l}}});let Y=l[78].config_snapshot&&Yi(l),de=l[78].has_logs&&Ki(l),ce=l[78].is_current_active&&Qi(l);return{c(){e=_("tr"),t=_("td"),n=_("span"),i=T(s),o=b(),a=_("td"),c=_("span"),p=T(f),d=b(),v=_("td"),_e(h.$$.fragment),m=b(),g=_("td"),te.c(),C=b(),k=_("td"),S=T(y),D=b(),z=_("td"),q=T(E),B=b(),O=_("td"),_e(F.$$.fragment),J=b(),H=_("td"),_e(A.$$.fragment),M=b(),P=_("td"),V=T(I),ee=b(),Q=_("td"),Y&&Y.c(),Z=b(),oe=_("td"),de&&de.c(),x=b(),G=_("td"),ce&&ce.c(),U=b(),u(n,"class","project-name svelte-cuxyqu"),u(t,"class","svelte-cuxyqu"),u(c,"class","service-name svelte-cuxyqu"),u(a,"class","svelte-cuxyqu"),u(v,"class","svelte-cuxyqu"),u(g,"class","version-cell svelte-cuxyqu"),u(k,"class","date-cell svelte-cuxyqu"),u(z,"class","by-cell svelte-cuxyqu"),u(z,"title",N=l[78].deployed_by||l[78].user||"-"),u(O,"class","svelte-cuxyqu"),u(H,"class","svelte-cuxyqu"),u(P,"class","comment-cell svelte-cuxyqu"),u(Q,"class","config-cell svelte-cuxyqu"),u(oe,"class","logs-cell svelte-cuxyqu"),u(G,"class","rollback-cell svelte-cuxyqu"),u(e,"class","svelte-cuxyqu")},m(ie,X){w(ie,e,X),r(e,t),r(t,n),r(n,i),r(e,o),r(e,a),r(a,c),r(c,p),r(e,d),r(e,v),fe(h,v,null),r(e,m),r(e,g),te.m(g,null),r(e,C),r(e,k),r(k,S),r(e,D),r(e,z),r(z,q),r(e,B),r(e,O),fe(F,O,null),r(e,J),r(e,H),fe(A,H,null),r(e,M),r(e,P),r(P,V),r(e,ee),r(e,Q),Y&&Y.m(Q,null),r(e,Z),r(e,oe),de&&de.m(oe,null),r(e,x),r(e,G),ce&&ce.m(G,null),r(e,U),re=!0},p(ie,X){(!re||X[0]&524288)&&s!==(s=(ie[78].project||"-")+"")&&j(i,s),(!re||X[0]&524288)&&f!==(f=(ie[78].service||ie[78].name)+"")&&j(p,f);const K={};X[0]&524288&&(K.variant=ie[78].environment==="prod"?"purple":ie[78].environment==="staging"?"warning":"info"),X[0]&524288|X[2]&1048576&&(K.$$scope={dirty:X,ctx:ie}),h.$set(K),ae===(ae=W(ie))&&te?te.p(ie,X):(te.d(1),te=ae(ie),te&&(te.c(),te.m(g,null))),(!re||X[0]&524288)&&y!==(y=Qt(ie[78].deployed_at||ie[78].created_at)+"")&&j(S,y),(!re||X[0]&524288)&&E!==(E=(ie[78].deployed_by||ie[78].user||"-")+"")&&j(q,E),(!re||X[0]&524288&&N!==(N=ie[78].deployed_by||ie[78].user||"-"))&&u(z,"title",N);const me={};X[0]&524288&&(me.variant=ie[78].is_rollback?"warning":"info"),X[0]&524288|X[2]&1048576&&(me.$$scope={dirty:X,ctx:ie}),F.$set(me);const ge={};X[0]&524288&&(ge.variant=Ll(ie[79])),X[0]&524288|X[2]&1048576&&(ge.$$scope={dirty:X,ctx:ie}),A.$set(ge),(!re||X[0]&524288)&&I!==(I=(ie[78].comment||"-")+"")&&j(V,I),ie[78].config_snapshot?Y?Y.p(ie,X):(Y=Yi(ie),Y.c(),Y.m(Q,null)):Y&&(Y.d(1),Y=null),ie[78].has_logs?de?de.p(ie,X):(de=Ki(ie),de.c(),de.m(oe,null)):de&&(de.d(1),de=null),ie[78].is_current_active?ce?ce.p(ie,X):(ce=Qi(ie),ce.c(),ce.m(G,null)):ce&&(ce.d(1),ce=null)},i(ie){re||(L(h.$$.fragment,ie),L(F.$$.fragment,ie),L(A.$$.fragment,ie),re=!0)},o(ie){R(h.$$.fragment,ie),R(F.$$.fragment,ie),R(A.$$.fragment,ie),re=!1},d(ie){ie&&$(e),pe(h),te.d(),pe(F),pe(A),Y&&Y.d(),de&&de.d(),ce&&ce.d()}}}function T_(l){let e,t,n,s,i,o,a,c;const f=[k_,b_,g_],p=[];function d(v,h){return v[0]&&v[19].length===0?0:v[19].length===0?1:2}return o=d(l),a=p[o]=f[o](l),{c(){e=_("div"),t=_("table"),n=_("thead"),n.innerHTML='<tr class="svelte-cuxyqu"><th class="svelte-cuxyqu">Project</th> <th class="svelte-cuxyqu">Service</th> <th class="svelte-cuxyqu">Environment</th> <th class="version-col svelte-cuxyqu">v</th> <th class="svelte-cuxyqu">Deployed</th> <th class="svelte-cuxyqu">By</th> <th class="svelte-cuxyqu">Type</th> <th class="svelte-cuxyqu">Status</th> <th class="svelte-cuxyqu">Comment</th> <th class="config-col svelte-cuxyqu"></th> <th class="logs-col svelte-cuxyqu"></th> <th class="rollback-col svelte-cuxyqu"></th></tr>',s=b(),i=_("tbody"),a.c(),u(t,"class","table svelte-cuxyqu"),u(e,"class","table-container svelte-cuxyqu")},m(v,h){w(v,e,h),r(e,t),r(t,n),r(t,s),r(t,i),p[o].m(i,null),c=!0},p(v,h){let m=o;o=d(v),o===m?p[o].p(v,h):(Te(),R(p[m],1,1,()=>{p[m]=null}),De(),a=p[o],a?a.p(v,h):(a=p[o]=f[o](v),a.c()),L(a,1),a.m(i,null))},i(v){c||(L(a),c=!0)},o(v){R(a),c=!1},d(v){v&&$(e),p[o].d()}}}function Xi(l){let e,t,n,s=(l[2].service||l[2].name)+"",i,o,a,c=l[2].project+"",f,p,d=l[2].environment+"",v,h,m,g,C,k,y,S=Qt(l[2].deployed_at||l[2].created_at)+"",D,z,E,q,N=(l[2].deployed_by||l[2].user||"unknown")+"",B,O,F,J,H,A,M,P,I,V,ee=l[2].comment&&xi(l);const Q=[q_,D_],Z=[];function oe(G,U){return G[3].length===0?0:1}M=oe(l),P=Z[M]=Q[M](l);let x=l[6].length>0&&tr(l);return{c(){e=_("div"),t=_("div"),n=_("div"),i=T(s),o=b(),a=_("div"),f=T(c),p=T(" / "),v=T(d),h=b(),m=_("div"),g=_("label"),g.textContent="📍 Current Deployment",C=b(),k=_("div"),y=_("div"),D=T(S),z=b(),E=_("div"),q=T("by "),B=T(N),O=b(),ee&&ee.c(),F=b(),J=_("div"),H=_("label"),H.textContent="🎯 Rollback to",A=b(),P.c(),I=b(),x&&x.c(),u(n,"class","service-name svelte-cuxyqu"),u(a,"class","service-coords svelte-cuxyqu"),u(t,"class","service-info svelte-cuxyqu"),u(g,"class","svelte-cuxyqu"),u(y,"class","deploy-date svelte-cuxyqu"),u(E,"class","deploy-by svelte-cuxyqu"),u(k,"class","deployment-card current svelte-cuxyqu"),u(m,"class","section svelte-cuxyqu"),u(H,"class","svelte-cuxyqu"),u(J,"class","section svelte-cuxyqu"),u(e,"class","rollback-content svelte-cuxyqu")},m(G,U){w(G,e,U),r(e,t),r(t,n),r(n,i),r(t,o),r(t,a),r(a,f),r(a,p),r(a,v),r(e,h),r(e,m),r(m,g),r(m,C),r(m,k),r(k,y),r(y,D),r(k,z),r(k,E),r(E,q),r(E,B),r(k,O),ee&&ee.m(k,null),r(e,F),r(e,J),r(J,H),r(J,A),Z[M].m(J,null),r(e,I),x&&x.m(e,null),V=!0},p(G,U){(!V||U[0]&4)&&s!==(s=(G[2].service||G[2].name)+"")&&j(i,s),(!V||U[0]&4)&&c!==(c=G[2].project+"")&&j(f,c),(!V||U[0]&4)&&d!==(d=G[2].environment+"")&&j(v,d),(!V||U[0]&4)&&S!==(S=Qt(G[2].deployed_at||G[2].created_at)+"")&&j(D,S),(!V||U[0]&4)&&N!==(N=(G[2].deployed_by||G[2].user||"unknown")+"")&&j(B,N),G[2].comment?ee?ee.p(G,U):(ee=xi(G),ee.c(),ee.m(k,null)):ee&&(ee.d(1),ee=null);let re=M;M=oe(G),M===re?Z[M].p(G,U):(Te(),R(Z[re],1,1,()=>{Z[re]=null}),De(),P=Z[M],P?P.p(G,U):(P=Z[M]=Q[M](G),P.c()),L(P,1),P.m(J,null)),G[6].length>0?x?x.p(G,U):(x=tr(G),x.c(),x.m(e,null)):x&&(x.d(1),x=null)},i(G){V||(L(P),V=!0)},o(G){R(P),V=!1},d(G){G&&$(e),ee&&ee.d(),Z[M].d(),x&&x.d()}}}function xi(l){let e,t=l[2].comment+"",n;return{c(){e=_("div"),n=T(t),u(e,"class","deploy-comment svelte-cuxyqu")},m(s,i){w(s,e,i),r(e,n)},p(s,i){i[0]&4&&t!==(t=s[2].comment+"")&&j(n,t)},d(s){s&&$(e)}}}function D_(l){let e,t,n=ve(l[3]),s=[];for(let o=0;o<n.length;o+=1)s[o]=er(Wi(l,n,o));const i=o=>R(s[o],1,1,()=>{s[o]=null});return{c(){e=_("div");for(let o=0;o<s.length;o+=1)s[o].c();u(e,"class","deployment-list svelte-cuxyqu")},m(o,a){w(o,e,a);for(let c=0;c<s.length;c+=1)s[c]&&s[c].m(e,null);t=!0},p(o,a){if(a[0]&56){n=ve(o[3]);let c;for(c=0;c<n.length;c+=1){const f=Wi(o,n,c);s[c]?(s[c].p(f,a),L(s[c],1)):(s[c]=er(f),s[c].c(),L(s[c],1),s[c].m(e,null))}for(Te(),c=n.length;c<s.length;c+=1)i(c);De()}},i(o){if(!t){for(let a=0;a<n.length;a+=1)L(s[a]);t=!0}},o(o){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)R(s[a]);t=!1},d(o){o&&$(e),Ee(s,o)}}}function q_(l){let e;return{c(){e=_("div"),e.textContent="No previous deployments found",u(e,"class","no-deployments svelte-cuxyqu")},m(t,n){w(t,e,n)},p:be,i:be,o:be,d(t){t&&$(e)}}}function z_(l){let e,t=l[75].id.substring(0,8)+"",n;return{c(){e=_("span"),n=T(t),u(e,"class","version-badge muted svelte-cuxyqu")},m(s,i){w(s,e,i),r(e,n)},p(s,i){i[0]&8&&t!==(t=s[75].id.substring(0,8)+"")&&j(n,t)},d(s){s&&$(e)}}}function E_(l){let e,t,n=l[75].version+"",s;return{c(){e=_("span"),t=T("v"),s=T(n),u(e,"class","version-badge svelte-cuxyqu")},m(i,o){w(i,e,o),r(e,t),r(e,s)},p(i,o){o[0]&8&&n!==(n=i[75].version+"")&&j(s,n)},d(i){i&&$(e)}}}function P_(l){let e=el(l[75])+"",t;return{c(){t=T(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&8&&e!==(e=el(n[75])+"")&&j(t,e)},d(n){n&&$(t)}}}function er(l){let e,t,n,s=!1,i,o,a,c,f,p=Qt(l[75].deployed_at||l[75].created_at)+"",d,v,h,m,g=(l[75].deployed_by||l[75].user||"unknown")+"",C,k,y,S,D,z,E,q;function N(F,J){return F[75].version?E_:z_}let B=N(l),O=B(l);return y=new Ke({props:{variant:Ll(el(l[75])),$$slots:{default:[P_]},$$scope:{ctx:l}}}),z=on(l[39][0]),{c(){e=_("label"),t=_("input"),i=b(),o=_("div"),O.c(),a=b(),c=_("div"),f=_("div"),d=T(p),v=b(),h=_("div"),m=T("by "),C=T(g),k=b(),_e(y.$$.fragment),S=b(),u(t,"type","radio"),t.__value=n=l[75].id,ne(t,t.__value),t.disabled=l[5],u(t,"class","svelte-cuxyqu"),u(o,"class","deploy-version svelte-cuxyqu"),u(f,"class","deploy-date svelte-cuxyqu"),u(h,"class","deploy-by svelte-cuxyqu"),u(c,"class","deploy-info svelte-cuxyqu"),u(e,"class","deployment-option svelte-cuxyqu"),$e(e,"selected",l[4]===l[75].id),z.p(t)},m(F,J){w(F,e,J),r(e,t),t.checked=t.__value===l[4],r(e,i),r(e,o),O.m(o,null),r(e,a),r(e,c),r(c,f),r(f,d),r(c,v),r(c,h),r(h,m),r(h,C),r(e,k),fe(y,e,null),r(e,S),D=!0,E||(q=le(t,"change",l[38]),E=!0)},p(F,J){(!D||J[0]&8&&n!==(n=F[75].id))&&(t.__value=n,ne(t,t.__value),s=!0),(!D||J[0]&32)&&(t.disabled=F[5]),(s||J[0]&24)&&(t.checked=t.__value===F[4]),B===(B=N(F))&&O?O.p(F,J):(O.d(1),O=B(F),O&&(O.c(),O.m(o,null))),(!D||J[0]&8)&&p!==(p=Qt(F[75].deployed_at||F[75].created_at)+"")&&j(d,p),(!D||J[0]&8)&&g!==(g=(F[75].deployed_by||F[75].user||"unknown")+"")&&j(C,g);const H={};J[0]&8&&(H.variant=Ll(el(F[75]))),J[0]&8|J[2]&1048576&&(H.$$scope={dirty:J,ctx:F}),y.$set(H),(!D||J[0]&24)&&$e(e,"selected",F[4]===F[75].id)},i(F){D||(L(y.$$.fragment,F),D=!0)},o(F){R(y.$$.fragment,F),D=!1},d(F){F&&$(e),O.d(),pe(y),z.r(),E=!1,q()}}}function tr(l){let e,t,n,s,i,o=ve(l[6]),a=[];for(let f=0;f<o.length;f+=1)a[f]=lr(Gi(l,o,f));let c=l[5]&&nr();return{c(){e=_("div"),t=_("label"),t.textContent="📋 Progress",n=b(),s=_("div");for(let f=0;f<a.length;f+=1)a[f].c();i=b(),c&&c.c(),u(t,"class","svelte-cuxyqu"),u(s,"class","rollback-logs svelte-cuxyqu"),u(e,"class","section rollback-logs-section svelte-cuxyqu")},m(f,p){w(f,e,p),r(e,t),r(e,n),r(e,s);for(let d=0;d<a.length;d+=1)a[d]&&a[d].m(s,null);r(s,i),c&&c.m(s,null)},p(f,p){if(p[0]&64){o=ve(f[6]);let d;for(d=0;d<o.length;d+=1){const v=Gi(f,o,d);a[d]?a[d].p(v,p):(a[d]=lr(v),a[d].c(),a[d].m(s,i))}for(;d<a.length;d+=1)a[d].d(1);a.length=o.length}f[5]?c||(c=nr(),c.c(),c.m(s,null)):c&&(c.d(1),c=null)},d(f){f&&$(e),Ee(a,f),c&&c.d()}}}function lr(l){let e,t=l[62].message+"",n,s;return{c(){e=_("div"),n=T(t),u(e,"class",s="log-entry log-"+l[62].type+" svelte-cuxyqu")},m(i,o){w(i,e,o),r(e,n)},p(i,o){o[0]&64&&t!==(t=i[62].message+"")&&j(n,t),o[0]&64&&s!==(s="log-entry log-"+i[62].type+" svelte-cuxyqu")&&u(e,"class",s)},d(i){i&&$(e)}}}function nr(l){let e;return{c(){e=_("div"),e.innerHTML='<span class="spinner svelte-cuxyqu">⏳</span> Working...',u(e,"class","log-entry log-info svelte-cuxyqu")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function L_(l){let e,t,n=l[2]&&Xi(l);return{c(){n&&n.c(),e=Ie()},m(s,i){n&&n.m(s,i),w(s,e,i),t=!0},p(s,i){s[2]?n?(n.p(s,i),i[0]&4&&L(n,1)):(n=Xi(s),n.c(),L(n,1),n.m(e.parentNode,e)):n&&(Te(),R(n,1,1,()=>{n=null}),De())},i(s){t||(L(n),t=!0)},o(s){R(n),t=!1},d(s){s&&$(e),n&&n.d(s)}}}function N_(l){let e=l[6].length>0?"Close":"Cancel",t;return{c(){t=T(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&64&&e!==(e=n[6].length>0?"Close":"Cancel")&&j(t,e)},d(n){n&&$(t)}}}function R_(l){let e;return{c(){e=T("⏪ Execute Rollback")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function M_(l){let e;return{c(){e=T("⏳ Rolling back...")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function A_(l){let e;function t(i,o){return i[5]?M_:R_}let n=t(l),s=n(l);return{c(){s.c(),e=Ie()},m(i,o){s.m(i,o),w(i,e,o)},p(i,o){n!==(n=t(i))&&(s.d(1),s=n(i),s&&(s.c(),s.m(e.parentNode,e)))},d(i){i&&$(e),s.d(i)}}}function O_(l){let e,t,n,s,i;return t=new Be({props:{variant:"ghost",$$slots:{default:[N_]},$$scope:{ctx:l}}}),t.$on("click",l[37]),s=new Be({props:{variant:"warning",disabled:!l[4]||l[5],$$slots:{default:[A_]},$$scope:{ctx:l}}}),s.$on("click",l[25]),{c(){e=_("div"),_e(t.$$.fragment),n=b(),_e(s.$$.fragment),u(e,"slot","footer")},m(o,a){w(o,e,a),fe(t,e,null),r(e,n),fe(s,e,null),i=!0},p(o,a){const c={};a[0]&64|a[2]&1048576&&(c.$$scope={dirty:a,ctx:o}),t.$set(c);const f={};a[0]&48&&(f.disabled=!o[4]||o[5]),a[0]&32|a[2]&1048576&&(f.$$scope={dirty:a,ctx:o}),s.$set(f)},i(o){i||(L(t.$$.fragment,o),L(s.$$.fragment,o),i=!0)},o(o){R(t.$$.fragment,o),R(s.$$.fragment,o),i=!1},d(o){o&&$(e),pe(t),pe(s)}}}function sr(l){let e,t,n,s=(l[14].service_name||l[14].service)+"",i,o,a,c=l[14].environment+"",f,p,d=Qt(l[14].deployed_at)+"",v,h,m,g,C;const k=[F_,j_],y=[];function S(z,E){return z[14].config_snapshot?0:1}function D(z,E){return E===0?m_(z):z}return m=S(l),g=y[m]=k[m](D(l,m)),{c(){e=_("div"),t=_("div"),n=_("span"),i=T(s),o=b(),a=_("span"),f=T(c),p=T(" • "),v=T(d),h=b(),g.c(),u(n,"class","service-name svelte-cuxyqu"),u(a,"class","meta svelte-cuxyqu"),u(t,"class","config-header-info svelte-cuxyqu"),u(e,"class","config-content svelte-cuxyqu")},m(z,E){w(z,e,E),r(e,t),r(t,n),r(n,i),r(t,o),r(t,a),r(a,f),r(a,p),r(a,v),r(e,h),y[m].m(e,null),C=!0},p(z,E){(!C||E[0]&16384)&&s!==(s=(z[14].service_name||z[14].service)+"")&&j(i,s),(!C||E[0]&16384)&&c!==(c=z[14].environment+"")&&j(f,c),(!C||E[0]&16384)&&d!==(d=Qt(z[14].deployed_at)+"")&&j(v,d);let q=m;m=S(z),m===q?y[m].p(D(z,m),E):(Te(),R(y[q],1,1,()=>{y[q]=null}),De(),g=y[m],g?g.p(D(z,m),E):(g=y[m]=k[m](D(z,m)),g.c()),L(g,1),g.m(e,null))},i(z){C||(L(g),C=!0)},o(z){R(g),C=!1},d(z){z&&$(e),y[m].d()}}}function j_(l){let e;return{c(){e=_("div"),e.textContent="No config snapshot available",u(e,"class","no-config svelte-cuxyqu")},m(t,n){w(t,e,n)},p:be,i:be,o:be,d(t){t&&$(e)}}}function F_(l){var ae,te;let e,t,n,s,i,o,a=(l[65].source_type||"-")+"",c,f,p,d,v,h,m,g,C=(l[65].port||"-")+"",k,y,S,D,z,E,q,N,B,O,F=l[65].env_vars&&Object.keys(l[65].env_vars).length>0,J,H,A,M=l[65].git_url&&or(l),P=l[65].git_branch&&ir(l),I=l[65].image&&rr(l),V=l[65].container_port&&ar(l),ee=l[65].host_port&&cr(l),Q=l[65].snapshot_id&&ur(l),Z=l[65].region&&fr(l),oe=l[65].size&&pr(l),x=((ae=l[65].server_ips)==null?void 0:ae.length)&&_r(l),G=l[65].setup_domain&&dr(),U=l[65].base_domain&&vr(l),re=F&&mr(l),W=((te=l[65].tags)==null?void 0:te.length)&&gr(l);return{c(){e=_("table"),t=_("tbody"),n=_("tr"),s=_("td"),s.textContent="Source Type",i=_("td"),o=_("strong"),c=T(a),f=b(),M&&M.c(),p=b(),P&&P.c(),d=b(),I&&I.c(),v=b(),h=_("tr"),m=_("td"),m.textContent="Port",g=_("td"),k=T(C),y=b(),V&&V.c(),S=b(),ee&&ee.c(),D=b(),Q&&Q.c(),z=b(),Z&&Z.c(),E=b(),oe&&oe.c(),q=b(),x&&x.c(),N=b(),G&&G.c(),B=b(),U&&U.c(),O=b(),re&&re.c(),J=b(),W&&W.c(),H=Ie(),u(s,"class","label svelte-cuxyqu"),u(i,"class","svelte-cuxyqu"),u(m,"class","label svelte-cuxyqu"),u(g,"class","svelte-cuxyqu"),u(t,"class","svelte-cuxyqu"),u(e,"class","config-table svelte-cuxyqu")},m(Y,de){w(Y,e,de),r(e,t),r(t,n),r(n,s),r(n,i),r(i,o),r(o,c),r(t,f),M&&M.m(t,null),r(t,p),P&&P.m(t,null),r(t,d),I&&I.m(t,null),r(t,v),r(t,h),r(h,m),r(h,g),r(g,k),r(t,y),V&&V.m(t,null),r(t,S),ee&&ee.m(t,null),r(t,D),Q&&Q.m(t,null),r(t,z),Z&&Z.m(t,null),r(t,E),oe&&oe.m(t,null),r(t,q),x&&x.m(t,null),r(t,N),G&&G.m(t,null),r(t,B),U&&U.m(t,null),w(Y,O,de),re&&re.m(Y,de),w(Y,J,de),W&&W.m(Y,de),w(Y,H,de),A=!0},p(Y,de){var ce,ie;(!A||de[0]&16384)&&a!==(a=(Y[65].source_type||"-")+"")&&j(c,a),Y[65].git_url?M?M.p(Y,de):(M=or(Y),M.c(),M.m(t,p)):M&&(M.d(1),M=null),Y[65].git_branch?P?P.p(Y,de):(P=ir(Y),P.c(),P.m(t,d)):P&&(P.d(1),P=null),Y[65].image?I?I.p(Y,de):(I=rr(Y),I.c(),I.m(t,v)):I&&(I.d(1),I=null),(!A||de[0]&16384)&&C!==(C=(Y[65].port||"-")+"")&&j(k,C),Y[65].container_port?V?V.p(Y,de):(V=ar(Y),V.c(),V.m(t,S)):V&&(V.d(1),V=null),Y[65].host_port?ee?ee.p(Y,de):(ee=cr(Y),ee.c(),ee.m(t,D)):ee&&(ee.d(1),ee=null),Y[65].snapshot_id?Q?Q.p(Y,de):(Q=ur(Y),Q.c(),Q.m(t,z)):Q&&(Q.d(1),Q=null),Y[65].region?Z?Z.p(Y,de):(Z=fr(Y),Z.c(),Z.m(t,E)):Z&&(Z.d(1),Z=null),Y[65].size?oe?oe.p(Y,de):(oe=pr(Y),oe.c(),oe.m(t,q)):oe&&(oe.d(1),oe=null),(ce=Y[65].server_ips)!=null&&ce.length?x?x.p(Y,de):(x=_r(Y),x.c(),x.m(t,N)):x&&(x.d(1),x=null),Y[65].setup_domain?G||(G=dr(),G.c(),G.m(t,B)):G&&(G.d(1),G=null),Y[65].base_domain?U?U.p(Y,de):(U=vr(Y),U.c(),U.m(t,null)):U&&(U.d(1),U=null),de[0]&16384&&(F=Y[65].env_vars&&Object.keys(Y[65].env_vars).length>0),F?re?re.p(Y,de):(re=mr(Y),re.c(),re.m(J.parentNode,J)):re&&(re.d(1),re=null),(ie=Y[65].tags)!=null&&ie.length?W?(W.p(Y,de),de[0]&16384&&L(W,1)):(W=gr(Y),W.c(),L(W,1),W.m(H.parentNode,H)):W&&(Te(),R(W,1,1,()=>{W=null}),De())},i(Y){A||(L(W),A=!0)},o(Y){R(W),A=!1},d(Y){Y&&($(e),$(O),$(J),$(H)),M&&M.d(),P&&P.d(),I&&I.d(),V&&V.d(),ee&&ee.d(),Q&&Q.d(),Z&&Z.d(),oe&&oe.d(),x&&x.d(),G&&G.d(),U&&U.d(),re&&re.d(Y),W&&W.d(Y)}}}function or(l){let e,t,n,s=l[65].git_url+"",i;return{c(){e=_("tr"),t=_("td"),t.textContent="Git URL",n=_("td"),i=T(s),u(t,"class","label svelte-cuxyqu"),u(n,"class","svelte-cuxyqu")},m(o,a){w(o,e,a),r(e,t),r(e,n),r(n,i)},p(o,a){a[0]&16384&&s!==(s=o[65].git_url+"")&&j(i,s)},d(o){o&&$(e)}}}function ir(l){let e,t,n,s=l[65].git_branch+"",i;return{c(){e=_("tr"),t=_("td"),t.textContent="Git Branch",n=_("td"),i=T(s),u(t,"class","label svelte-cuxyqu"),u(n,"class","svelte-cuxyqu")},m(o,a){w(o,e,a),r(e,t),r(e,n),r(n,i)},p(o,a){a[0]&16384&&s!==(s=o[65].git_branch+"")&&j(i,s)},d(o){o&&$(e)}}}function rr(l){let e,t,n,s=l[65].image+"",i;return{c(){e=_("tr"),t=_("td"),t.textContent="Image",n=_("td"),i=T(s),u(t,"class","label svelte-cuxyqu"),u(n,"class","svelte-cuxyqu")},m(o,a){w(o,e,a),r(e,t),r(e,n),r(n,i)},p(o,a){a[0]&16384&&s!==(s=o[65].image+"")&&j(i,s)},d(o){o&&$(e)}}}function ar(l){let e,t,n,s=l[65].container_port+"",i;return{c(){e=_("tr"),t=_("td"),t.textContent="Container Port",n=_("td"),i=T(s),u(t,"class","label svelte-cuxyqu"),u(n,"class","svelte-cuxyqu")},m(o,a){w(o,e,a),r(e,t),r(e,n),r(n,i)},p(o,a){a[0]&16384&&s!==(s=o[65].container_port+"")&&j(i,s)},d(o){o&&$(e)}}}function cr(l){let e,t,n,s=l[65].host_port+"",i;return{c(){e=_("tr"),t=_("td"),t.textContent="Host Port",n=_("td"),i=T(s),u(t,"class","label svelte-cuxyqu"),u(n,"class","svelte-cuxyqu")},m(o,a){w(o,e,a),r(e,t),r(e,n),r(n,i)},p(o,a){a[0]&16384&&s!==(s=o[65].host_port+"")&&j(i,s)},d(o){o&&$(e)}}}function ur(l){let e,t,n,s=l[65].snapshot_id+"",i;return{c(){e=_("tr"),t=_("td"),t.textContent="Snapshot ID",n=_("td"),i=T(s),u(t,"class","label svelte-cuxyqu"),u(n,"class","svelte-cuxyqu")},m(o,a){w(o,e,a),r(e,t),r(e,n),r(n,i)},p(o,a){a[0]&16384&&s!==(s=o[65].snapshot_id+"")&&j(i,s)},d(o){o&&$(e)}}}function fr(l){let e,t,n,s=l[65].region+"",i;return{c(){e=_("tr"),t=_("td"),t.textContent="Region",n=_("td"),i=T(s),u(t,"class","label svelte-cuxyqu"),u(n,"class","svelte-cuxyqu")},m(o,a){w(o,e,a),r(e,t),r(e,n),r(n,i)},p(o,a){a[0]&16384&&s!==(s=o[65].region+"")&&j(i,s)},d(o){o&&$(e)}}}function pr(l){let e,t,n,s=l[65].size+"",i;return{c(){e=_("tr"),t=_("td"),t.textContent="Size",n=_("td"),i=T(s),u(t,"class","label svelte-cuxyqu"),u(n,"class","svelte-cuxyqu")},m(o,a){w(o,e,a),r(e,t),r(e,n),r(n,i)},p(o,a){a[0]&16384&&s!==(s=o[65].size+"")&&j(i,s)},d(o){o&&$(e)}}}function _r(l){let e,t,n,s=l[65].server_ips.join(", ")+"",i;return{c(){e=_("tr"),t=_("td"),t.textContent="Servers",n=_("td"),i=T(s),u(t,"class","label svelte-cuxyqu"),u(n,"class","svelte-cuxyqu")},m(o,a){w(o,e,a),r(e,t),r(e,n),r(n,i)},p(o,a){a[0]&16384&&s!==(s=o[65].server_ips.join(", ")+"")&&j(i,s)},d(o){o&&$(e)}}}function dr(l){let e;return{c(){e=_("tr"),e.innerHTML='<td class="label svelte-cuxyqu">Setup Domain</td><td class="svelte-cuxyqu">Yes</td>'},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function vr(l){let e,t,n,s=l[65].base_domain+"",i;return{c(){e=_("tr"),t=_("td"),t.textContent="Base Domain",n=_("td"),i=T(s),u(t,"class","label svelte-cuxyqu"),u(n,"class","svelte-cuxyqu")},m(o,a){w(o,e,a),r(e,t),r(e,n),r(n,i)},p(o,a){a[0]&16384&&s!==(s=o[65].base_domain+"")&&j(i,s)},d(o){o&&$(e)}}}function mr(l){let e,t,n,s,i=ve(Object.entries(l[65].env_vars)),o=[];for(let a=0;a<i.length;a+=1)o[a]=hr(Hi(l,i,a));return{c(){e=_("div"),t=_("div"),t.textContent="Environment Variables",n=b(),s=_("div");for(let a=0;a<o.length;a+=1)o[a].c();u(t,"class","section-title svelte-cuxyqu"),u(s,"class","env-list svelte-cuxyqu"),u(e,"class","env-section svelte-cuxyqu")},m(a,c){w(a,e,c),r(e,t),r(e,n),r(e,s);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(s,null)},p(a,c){if(c[0]&16384){i=ve(Object.entries(a[65].env_vars));let f;for(f=0;f<i.length;f+=1){const p=Hi(a,i,f);o[f]?o[f].p(p,c):(o[f]=hr(p),o[f].c(),o[f].m(s,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=i.length}},d(a){a&&$(e),Ee(o,a)}}}function hr(l){let e,t=l[69]+"",n,s,i=(l[70].length>20?l[70].substring(0,20)+"...":l[70])+"",o;return{c(){e=_("div"),n=T(t),s=T("="),o=T(i),u(e,"class","env-item svelte-cuxyqu")},m(a,c){w(a,e,c),r(e,n),r(e,s),r(e,o)},p(a,c){c[0]&16384&&t!==(t=a[69]+"")&&j(n,t),c[0]&16384&&i!==(i=(a[70].length>20?a[70].substring(0,20)+"...":a[70])+"")&&j(o,i)},d(a){a&&$(e)}}}function gr(l){let e,t,n,s,i,o=ve(l[65].tags),a=[];for(let f=0;f<o.length;f+=1)a[f]=br(Ui(l,o,f));const c=f=>R(a[f],1,1,()=>{a[f]=null});return{c(){e=_("div"),t=_("div"),t.textContent="Tags",n=b(),s=_("div");for(let f=0;f<a.length;f+=1)a[f].c();u(t,"class","section-title svelte-cuxyqu"),u(s,"class","tags-list svelte-cuxyqu"),u(e,"class","tags-section svelte-cuxyqu")},m(f,p){w(f,e,p),r(e,t),r(e,n),r(e,s);for(let d=0;d<a.length;d+=1)a[d]&&a[d].m(s,null);i=!0},p(f,p){if(p[0]&16384){o=ve(f[65].tags);let d;for(d=0;d<o.length;d+=1){const v=Ui(f,o,d);a[d]?(a[d].p(v,p),L(a[d],1)):(a[d]=br(v),a[d].c(),L(a[d],1),a[d].m(s,null))}for(Te(),d=o.length;d<a.length;d+=1)c(d);De()}},i(f){if(!i){for(let p=0;p<o.length;p+=1)L(a[p]);i=!0}},o(f){a=a.filter(Boolean);for(let p=0;p<a.length;p+=1)R(a[p]);i=!1},d(f){f&&$(e),Ee(a,f)}}}function I_(l){let e=l[66]+"",t;return{c(){t=T(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&16384&&e!==(e=n[66]+"")&&j(t,e)},d(n){n&&$(t)}}}function br(l){let e,t;return e=new Ke({props:{$$slots:{default:[I_]},$$scope:{ctx:l}}}),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const i={};s[0]&16384|s[2]&1048576&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(L(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){pe(e,n)}}}function B_(l){let e,t,n=l[14]&&sr(l);return{c(){n&&n.c(),e=Ie()},m(s,i){n&&n.m(s,i),w(s,e,i),t=!0},p(s,i){s[14]?n?(n.p(s,i),i[0]&16384&&L(n,1)):(n=sr(s),n.c(),L(n,1),n.m(e.parentNode,e)):n&&(Te(),R(n,1,1,()=>{n=null}),De())},i(s){t||(L(n),t=!0)},o(s){R(n),t=!1},d(s){s&&$(e),n&&n.d(s)}}}function U_(l){let e;return{c(){e=T("🚀 Redeploy with this config")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function H_(l){let e;return{c(){e=T("Close")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function G_(l){let e,t,n,s,i;return t=new Be({props:{variant:"primary",$$slots:{default:[U_]},$$scope:{ctx:l}}}),t.$on("click",l[22]),s=new Be({props:{variant:"ghost",$$slots:{default:[H_]},$$scope:{ctx:l}}}),s.$on("click",l[42]),{c(){e=_("div"),_e(t.$$.fragment),n=b(),_e(s.$$.fragment),u(e,"slot","footer")},m(o,a){w(o,e,a),fe(t,e,null),r(e,n),fe(s,e,null),i=!0},p(o,a){const c={};a[2]&1048576&&(c.$$scope={dirty:a,ctx:o}),t.$set(c);const f={};a[2]&1048576&&(f.$$scope={dirty:a,ctx:o}),s.$set(f)},i(o){i||(L(t.$$.fragment,o),L(s.$$.fragment,o),i=!0)},o(o){R(t.$$.fragment,o),R(s.$$.fragment,o),i=!1},d(o){o&&$(e),pe(t),pe(s)}}}function kr(l){let e,t,n,s=(l[16].service||l[16].name)+"",i,o,a,c=l[16].environment+"",f,p,d=Qt(l[16].deployed_at)+"",v,h,m,g,C,k,y=l[16].version&&$r(l);g=new Ke({props:{variant:Ll(el(l[16])),$$slots:{default:[V_]},$$scope:{ctx:l}}});function S(E,q){return E[18]?K_:E[17].length===0?Y_:J_}let D=S(l),z=D(l);return{c(){e=_("div"),t=_("div"),n=_("span"),i=T(s),o=b(),a=_("span"),f=T(c),p=T(" • "),v=T(d),h=b(),y&&y.c(),m=b(),_e(g.$$.fragment),C=b(),z.c(),u(n,"class","service-name svelte-cuxyqu"),u(a,"class","meta svelte-cuxyqu"),u(t,"class","logs-header-info svelte-cuxyqu"),u(e,"class","logs-modal-content svelte-cuxyqu")},m(E,q){w(E,e,q),r(e,t),r(t,n),r(n,i),r(t,o),r(t,a),r(a,f),r(a,p),r(a,v),r(t,h),y&&y.m(t,null),r(t,m),fe(g,t,null),r(e,C),z.m(e,null),k=!0},p(E,q){(!k||q[0]&65536)&&s!==(s=(E[16].service||E[16].name)+"")&&j(i,s),(!k||q[0]&65536)&&c!==(c=E[16].environment+"")&&j(f,c),(!k||q[0]&65536)&&d!==(d=Qt(E[16].deployed_at)+"")&&j(v,d),E[16].version?y?(y.p(E,q),q[0]&65536&&L(y,1)):(y=$r(E),y.c(),L(y,1),y.m(t,m)):y&&(Te(),R(y,1,1,()=>{y=null}),De());const N={};q[0]&65536&&(N.variant=Ll(el(E[16]))),q[0]&65536|q[2]&1048576&&(N.$$scope={dirty:q,ctx:E}),g.$set(N),D===(D=S(E))&&z?z.p(E,q):(z.d(1),z=D(E),z&&(z.c(),z.m(e,null)))},i(E){k||(L(y),L(g.$$.fragment,E),k=!0)},o(E){R(y),R(g.$$.fragment,E),k=!1},d(E){E&&$(e),y&&y.d(),pe(g),z.d()}}}function $r(l){let e,t;return e=new Ke({props:{variant:"purple",$$slots:{default:[W_]},$$scope:{ctx:l}}}),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const i={};s[0]&65536|s[2]&1048576&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(L(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){pe(e,n)}}}function W_(l){let e,t=l[16].version+"",n;return{c(){e=T("v"),n=T(t)},m(s,i){w(s,e,i),w(s,n,i)},p(s,i){i[0]&65536&&t!==(t=s[16].version+"")&&j(n,t)},d(s){s&&($(e),$(n))}}}function V_(l){let e=el(l[16])+"",t;return{c(){t=T(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&65536&&e!==(e=el(n[16])+"")&&j(t,e)},d(n){n&&$(t)}}}function J_(l){let e,t=ve(l[17]),n=[];for(let s=0;s<t.length;s+=1)n[s]=wr(Bi(l,t,s));return{c(){e=_("div");for(let s=0;s<n.length;s+=1)n[s].c();u(e,"class","logs-container svelte-cuxyqu")},m(s,i){w(s,e,i);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null)},p(s,i){if(i[0]&131072){t=ve(s[17]);let o;for(o=0;o<t.length;o+=1){const a=Bi(s,t,o);n[o]?n[o].p(a,i):(n[o]=wr(a),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=t.length}},d(s){s&&$(e),Ee(n,s)}}}function Y_(l){let e;return{c(){e=_("div"),e.textContent="No logs available for this deployment",u(e,"class","no-logs svelte-cuxyqu")},m(t,n){w(t,e,n)},p:be,d(t){t&&$(e)}}}function K_(l){let e;return{c(){e=_("div"),e.textContent="Loading logs...",u(e,"class","logs-loading svelte-cuxyqu")},m(t,n){w(t,e,n)},p:be,d(t){t&&$(e)}}}function wr(l){let e,t,n=(l[62].timestamp?new Date(l[62].timestamp).toLocaleTimeString():"")+"",s,i,o,a=l[62].message+"",c,f;return{c(){e=_("div"),t=_("span"),s=T(n),i=b(),o=_("span"),c=T(a),f=b(),u(t,"class","log-time svelte-cuxyqu"),u(o,"class","log-message svelte-cuxyqu"),u(e,"class","log-line svelte-cuxyqu")},m(p,d){w(p,e,d),r(e,t),r(t,s),r(e,i),r(e,o),r(o,c),r(e,f)},p(p,d){d[0]&131072&&n!==(n=(p[62].timestamp?new Date(p[62].timestamp).toLocaleTimeString():"")+"")&&j(s,n),d[0]&131072&&a!==(a=p[62].message+"")&&j(c,a)},d(p){p&&$(e)}}}function Q_(l){let e,t,n=l[16]&&kr(l);return{c(){n&&n.c(),e=Ie()},m(s,i){n&&n.m(s,i),w(s,e,i),t=!0},p(s,i){s[16]?n?(n.p(s,i),i[0]&65536&&L(n,1)):(n=kr(s),n.c(),L(n,1),n.m(e.parentNode,e)):n&&(Te(),R(n,1,1,()=>{n=null}),De())},i(s){t||(L(n),t=!0)},o(s){R(n),t=!1},d(s){s&&$(e),n&&n.d(s)}}}function Z_(l){let e;return{c(){e=T("Close")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function X_(l){let e,t,n;return t=new Be({props:{variant:"ghost",$$slots:{default:[Z_]},$$scope:{ctx:l}}}),t.$on("click",l[45]),{c(){e=_("div"),_e(t.$$.fragment),u(e,"slot","footer")},m(s,i){w(s,e,i),fe(t,e,null),n=!0},p(s,i){const o={};i[2]&1048576&&(o.$$scope={dirty:i,ctx:s}),t.$set(o)},i(s){n||(L(t.$$.fragment,s),n=!0)},o(s){R(t.$$.fragment,s),n=!1},d(s){s&&$(e),pe(t)}}}function x_(l){let e,t,n,s=l[10].length+"",i,o,a,c,f,p,d=ve(l[10]),v=[];for(let g=0;g<d.length;g+=1)v[g]=yr(Fi(l,d,g));const h=g=>R(v[g],1,1,()=>{v[g]=null});let m=l[11].length>0&&Cr(l);return{c(){e=_("div"),t=_("p"),n=_("strong"),i=T(s),o=T(" server(s) from the original deployment are unavailable:"),a=b(),c=_("div");for(let g=0;g<v.length;g+=1)v[g].c();f=b(),m&&m.c(),u(t,"class","svelte-cuxyqu"),u(c,"class","confirm-server-list unavailable svelte-cuxyqu"),u(e,"class","rollback-confirm-content svelte-cuxyqu")},m(g,C){w(g,e,C),r(e,t),r(t,n),r(n,i),r(t,o),r(e,a),r(e,c);for(let k=0;k<v.length;k+=1)v[k]&&v[k].m(c,null);r(e,f),m&&m.m(e,null),p=!0},p(g,C){if((!p||C[0]&1024)&&s!==(s=g[10].length+"")&&j(i,s),C[0]&1024){d=ve(g[10]);let k;for(k=0;k<d.length;k+=1){const y=Fi(g,d,k);v[k]?(v[k].p(y,C),L(v[k],1)):(v[k]=yr(y),v[k].c(),L(v[k],1),v[k].m(c,null))}for(Te(),k=d.length;k<v.length;k+=1)h(k);De()}g[11].length>0?m?(m.p(g,C),C[0]&2048&&L(m,1)):(m=Cr(g),m.c(),L(m,1),m.m(e,null)):m&&(Te(),R(m,1,1,()=>{m=null}),De())},i(g){if(!p){for(let C=0;C<d.length;C+=1)L(v[C]);L(m),p=!0}},o(g){v=v.filter(Boolean);for(let C=0;C<v.length;C+=1)R(v[C]);R(m),p=!1},d(g){g&&$(e),Ee(v,g),m&&m.d()}}}function e1(l){let e,t,n,s,i=l[11].length+"",o,a,c,f=l[11].length+l[9].length+"",p,d,v,h,m,g,C=ve(l[9]),k=[];for(let y=0;y<C.length;y+=1)k[y]=Tr(Ii(l,C,y));return{c(){e=_("div"),t=_("p"),n=T("Rolling back will restore to "),s=_("strong"),o=T(i),a=T(` servers.
        Service currently runs on `),c=_("strong"),p=T(f),d=T(" servers."),v=b(),h=_("p"),h.textContent="Stop containers on the following servers?",m=b(),g=_("div");for(let y=0;y<k.length;y+=1)k[y].c();u(t,"class","svelte-cuxyqu"),u(h,"class","svelte-cuxyqu"),u(g,"class","confirm-server-list svelte-cuxyqu"),u(e,"class","rollback-confirm-content svelte-cuxyqu")},m(y,S){w(y,e,S),r(e,t),r(t,n),r(t,s),r(s,o),r(t,a),r(t,c),r(c,p),r(t,d),r(e,v),r(e,h),r(e,m),r(e,g);for(let D=0;D<k.length;D+=1)k[D]&&k[D].m(g,null)},p(y,S){if(S[0]&2048&&i!==(i=y[11].length+"")&&j(o,i),S[0]&2560&&f!==(f=y[11].length+y[9].length+"")&&j(p,f),S[0]&512){C=ve(y[9]);let D;for(D=0;D<C.length;D+=1){const z=Ii(y,C,D);k[D]?k[D].p(z,S):(k[D]=Tr(z),k[D].c(),k[D].m(g,null))}for(;D<k.length;D+=1)k[D].d(1);k.length=C.length}},i:be,o:be,d(y){y&&$(e),Ee(k,y)}}}function t1(l){let e;return{c(){e=T("offline")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function yr(l){let e,t,n=(l[55].name||l[55].ip)+"",s,i,o,a=l[55].ip+"",c,f,p,d,v;return p=new Ke({props:{variant:"error",$$slots:{default:[t1]},$$scope:{ctx:l}}}),{c(){e=_("div"),t=_("span"),s=T(n),i=b(),o=_("span"),c=T(a),f=b(),_e(p.$$.fragment),d=b(),u(t,"class","server-name svelte-cuxyqu"),u(o,"class","server-ip svelte-cuxyqu"),u(e,"class","confirm-server-item svelte-cuxyqu")},m(h,m){w(h,e,m),r(e,t),r(t,s),r(e,i),r(e,o),r(o,c),r(e,f),fe(p,e,null),r(e,d),v=!0},p(h,m){(!v||m[0]&1024)&&n!==(n=(h[55].name||h[55].ip)+"")&&j(s,n),(!v||m[0]&1024)&&a!==(a=h[55].ip+"")&&j(c,a);const g={};m[2]&1048576&&(g.$$scope={dirty:m,ctx:h}),p.$set(g)},i(h){v||(L(p.$$.fragment,h),v=!0)},o(h){R(p.$$.fragment,h),v=!1},d(h){h&&$(e),pe(p)}}}function Cr(l){let e,t,n=l[11].length+"",s,i,o,a,c,f=ve(l[11]),p=[];for(let v=0;v<f.length;v+=1)p[v]=Sr(ji(l,f,v));const d=v=>R(p[v],1,1,()=>{p[v]=null});return{c(){e=_("p"),t=T("Available servers ("),s=T(n),i=T("):"),o=b(),a=_("div");for(let v=0;v<p.length;v+=1)p[v].c();u(e,"class","svelte-cuxyqu"),u(a,"class","confirm-server-list available svelte-cuxyqu")},m(v,h){w(v,e,h),r(e,t),r(e,s),r(e,i),w(v,o,h),w(v,a,h);for(let m=0;m<p.length;m+=1)p[m]&&p[m].m(a,null);c=!0},p(v,h){if((!c||h[0]&2048)&&n!==(n=v[11].length+"")&&j(s,n),h[0]&2048){f=ve(v[11]);let m;for(m=0;m<f.length;m+=1){const g=ji(v,f,m);p[m]?(p[m].p(g,h),L(p[m],1)):(p[m]=Sr(g),p[m].c(),L(p[m],1),p[m].m(a,null))}for(Te(),m=f.length;m<p.length;m+=1)d(m);De()}},i(v){if(!c){for(let h=0;h<f.length;h+=1)L(p[h]);c=!0}},o(v){p=p.filter(Boolean);for(let h=0;h<p.length;h+=1)R(p[h]);c=!1},d(v){v&&($(e),$(o),$(a)),Ee(p,v)}}}function l1(l){let e;return{c(){e=T("online")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Sr(l){let e,t,n=(l[55].name||l[55].ip)+"",s,i,o,a=l[55].ip+"",c,f,p,d,v;return p=new Ke({props:{variant:"success",$$slots:{default:[l1]},$$scope:{ctx:l}}}),{c(){e=_("div"),t=_("span"),s=T(n),i=b(),o=_("span"),c=T(a),f=b(),_e(p.$$.fragment),d=b(),u(t,"class","server-name svelte-cuxyqu"),u(o,"class","server-ip svelte-cuxyqu"),u(e,"class","confirm-server-item svelte-cuxyqu")},m(h,m){w(h,e,m),r(e,t),r(t,s),r(e,i),r(e,o),r(o,c),r(e,f),fe(p,e,null),r(e,d),v=!0},p(h,m){(!v||m[0]&2048)&&n!==(n=(h[55].name||h[55].ip)+"")&&j(s,n),(!v||m[0]&2048)&&a!==(a=h[55].ip+"")&&j(c,a);const g={};m[2]&1048576&&(g.$$scope={dirty:m,ctx:h}),p.$set(g)},i(h){v||(L(p.$$.fragment,h),v=!0)},o(h){R(p.$$.fragment,h),v=!1},d(h){h&&$(e),pe(p)}}}function Tr(l){let e,t,n=(l[55].name||l[55].ip)+"",s,i,o,a=l[55].ip+"",c,f;return{c(){e=_("div"),t=_("span"),s=T(n),i=b(),o=_("span"),c=T(a),f=b(),u(t,"class","server-name svelte-cuxyqu"),u(o,"class","server-ip svelte-cuxyqu"),u(e,"class","confirm-server-item svelte-cuxyqu")},m(p,d){w(p,e,d),r(e,t),r(t,s),r(e,i),r(e,o),r(o,c),r(e,f)},p(p,d){d[0]&512&&n!==(n=(p[55].name||p[55].ip)+"")&&j(s,n),d[0]&512&&a!==(a=p[55].ip+"")&&j(c,a)},d(p){p&&$(e)}}}function n1(l){let e,t,n,s;const i=[e1,x_],o=[];function a(c,f){return c[8]==="cleanup"?0:c[8]==="missing"?1:-1}return~(e=a(l))&&(t=o[e]=i[e](l)),{c(){t&&t.c(),n=Ie()},m(c,f){~e&&o[e].m(c,f),w(c,n,f),s=!0},p(c,f){let p=e;e=a(c),e===p?~e&&o[e].p(c,f):(t&&(Te(),R(o[p],1,1,()=>{o[p]=null}),De()),~e?(t=o[e],t?t.p(c,f):(t=o[e]=i[e](c),t.c()),L(t,1),t.m(n.parentNode,n)):t=null)},i(c){s||(L(t),s=!0)},o(c){R(t),s=!1},d(c){c&&$(n),~e&&o[e].d(c)}}}function s1(l){let e,t;return e=new Be({props:{variant:"primary",$$slots:{default:[i1]},$$scope:{ctx:l}}}),e.$on("click",l[27]),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const i={};s[2]&1048576&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(L(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){pe(e,n)}}}function o1(l){let e,t;return e=new Be({props:{variant:"primary",$$slots:{default:[r1]},$$scope:{ctx:l}}}),e.$on("click",l[26]),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const i={};s[2]&1048576&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(L(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){pe(e,n)}}}function i1(l){let e;return{c(){e=T("Proceed with available only")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function r1(l){let e;return{c(){e=T("Proceed")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function a1(l){let e;return{c(){e=T("Cancel")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function c1(l){let e,t,n,s,i,o;const a=[o1,s1],c=[];function f(p,d){return p[8]==="cleanup"?0:p[8]==="missing"&&p[11].length>0?1:-1}return~(t=f(l))&&(n=c[t]=a[t](l)),i=new Be({props:{variant:"ghost",$$slots:{default:[a1]},$$scope:{ctx:l}}}),i.$on("click",l[48]),{c(){e=_("div"),n&&n.c(),s=b(),_e(i.$$.fragment),u(e,"slot","footer")},m(p,d){w(p,e,d),~t&&c[t].m(e,null),r(e,s),fe(i,e,null),o=!0},p(p,d){let v=t;t=f(p),t===v?~t&&c[t].p(p,d):(n&&(Te(),R(c[v],1,1,()=>{c[v]=null}),De()),~t?(n=c[t],n?n.p(p,d):(n=c[t]=a[t](p),n.c()),L(n,1),n.m(e,s)):n=null);const h={};d[2]&1048576&&(h.$$scope={dirty:d,ctx:p}),i.$set(h)},i(p){o||(L(n),L(i.$$.fragment,p),o=!0)},o(p){R(n),R(i.$$.fragment,p),o=!1},d(p){p&&$(e),~t&&c[t].d(),pe(i)}}}function u1(l){let e,t,n,s,i,o,a,c,f,p,d,v,h,m,g,C,k,y,S,D,z,E,q=l[20]&&Ji(l);a=new Be({props:{variant:"ghost",$$slots:{default:[h_]},$$scope:{ctx:l}}}),a.$on("click",l[33]),f=new ut({props:{padding:!1,$$slots:{default:[T_]},$$scope:{ctx:l}}});function N(P){l[40](P)}let B={title:"⏪ Rollback",width:"600px",$$slots:{footer:[O_],default:[L_]},$$scope:{ctx:l}};l[1]!==void 0&&(B.open=l[1]),d=new xt({props:B}),Lt.push(()=>fl(d,"open",N)),d.$on("close",l[41]);function O(P){l[43](P)}let F={title:"⚙️ Deployment Config",width:"500px",$$slots:{footer:[G_],default:[B_]},$$scope:{ctx:l}};l[13]!==void 0&&(F.open=l[13]),m=new xt({props:F}),Lt.push(()=>fl(m,"open",O)),m.$on("close",l[44]);function J(P){l[46](P)}let H={title:"📋 Deployment Logs",width:"700px",$$slots:{footer:[X_],default:[Q_]},$$scope:{ctx:l}};l[15]!==void 0&&(H.open=l[15]),k=new xt({props:H}),Lt.push(()=>fl(k,"open",J)),k.$on("close",l[47]);function A(P){l[49](P)}let M={title:l[8]==="cleanup"?"⚠️ Stop Orphan Containers":"⚠️ Servers Unavailable",width:"500px",$$slots:{footer:[c1],default:[n1]},$$scope:{ctx:l}};return l[7]!==void 0&&(M.open=l[7]),D=new xt({props:M}),Lt.push(()=>fl(D,"open",A)),D.$on("close",l[50]),{c(){e=_("div"),t=_("div"),n=_("h1"),n.textContent="Deployment History",s=b(),i=_("div"),q&&q.c(),o=b(),_e(a.$$.fragment),c=b(),_e(f.$$.fragment),p=b(),_e(d.$$.fragment),h=b(),_e(m.$$.fragment),C=b(),_e(k.$$.fragment),S=b(),_e(D.$$.fragment),u(n,"class","svelte-cuxyqu"),u(i,"class","header-actions svelte-cuxyqu"),u(t,"class","page-header svelte-cuxyqu"),u(e,"class","deployments-page svelte-cuxyqu")},m(P,I){w(P,e,I),r(e,t),r(t,n),r(t,s),r(t,i),q&&q.m(i,null),r(i,o),fe(a,i,null),r(e,c),fe(f,e,null),w(P,p,I),fe(d,P,I),w(P,h,I),fe(m,P,I),w(P,C,I),fe(k,P,I),w(P,S,I),fe(D,P,I),E=!0},p(P,I){P[20]?q?q.p(P,I):(q=Ji(P),q.c(),q.m(i,o)):q&&(q.d(1),q=null);const V={};I[2]&1048576&&(V.$$scope={dirty:I,ctx:P}),a.$set(V);const ee={};I[0]&524289|I[2]&1048576&&(ee.$$scope={dirty:I,ctx:P}),f.$set(ee);const Q={};I[0]&126|I[2]&1048576&&(Q.$$scope={dirty:I,ctx:P}),!v&&I[0]&2&&(v=!0,Q.open=P[1],ul(()=>v=!1)),d.$set(Q);const Z={};I[0]&24576|I[2]&1048576&&(Z.$$scope={dirty:I,ctx:P}),!g&&I[0]&8192&&(g=!0,Z.open=P[13],ul(()=>g=!1)),m.$set(Z);const oe={};I[0]&491520|I[2]&1048576&&(oe.$$scope={dirty:I,ctx:P}),!y&&I[0]&32768&&(y=!0,oe.open=P[15],ul(()=>y=!1)),k.$set(oe);const x={};I[0]&256&&(x.title=P[8]==="cleanup"?"⚠️ Stop Orphan Containers":"⚠️ Servers Unavailable"),I[0]&8064|I[2]&1048576&&(x.$$scope={dirty:I,ctx:P}),!z&&I[0]&128&&(z=!0,x.open=P[7],ul(()=>z=!1)),D.$set(x)},i(P){E||(L(a.$$.fragment,P),L(f.$$.fragment,P),L(d.$$.fragment,P),L(m.$$.fragment,P),L(k.$$.fragment,P),L(D.$$.fragment,P),E=!0)},o(P){R(a.$$.fragment,P),R(f.$$.fragment,P),R(d.$$.fragment,P),R(m.$$.fragment,P),R(k.$$.fragment,P),R(D.$$.fragment,P),E=!1},d(P){P&&($(e),$(p),$(h),$(C),$(S)),q&&q.d(),pe(a),pe(f),pe(d,P),pe(m,P),pe(k,P),pe(D,P)}}}function Dr(l){return l?l.toLocaleTimeString():""}function f1(l,e){return l?l.filter(t=>!(e.project&&t.project!==e.project||e.env&&t.environment!==e.env)):[]}function p1(l){const e=[...l],t=new Set;for(const n of e){const s=`${n.project}/${n.service||n.name}/${n.environment}`;n.status==="success"&&n.can_rollback&&!t.has(s)?(n.is_current_active=!0,t.add(s)):n.is_current_active=!1}return e}function Qt(l){return l?new Date(l).toLocaleString():"-"}function Ll(l){switch(l){case"success":case"active":return"success";case"failed":case"error":return"danger";case"pending":case"deploying":return"warning";case"superseded":return"secondary";default:return"info"}}function el(l){const e=l.status||"unknown";return e==="rolled_back"?l.is_rollback?"failed":"superseded":e}function _1(l,e,t){let n,s,i,o;_t(l,ql,qe=>t(31,i=qe)),_t(l,ml,qe=>t(32,o=qe));let a=!1,c=!1,f=null,p=[],d=null,v=!1,h=[],m=!1,g="",C=[],k=[],y=[],S=null,D=!1,z=null,E=!1,q=null,N=[],B=!1,O=[],F=[];function J(qe){t(14,z=qe),t(13,D=!0)}function H(){if(!(z!=null&&z.config_snapshot))return;const qe=new CustomEvent("redeploy",{detail:{deployment:z,config:z.config_snapshot},bubbles:!0});document.dispatchEvent(qe),t(13,D=!1),Ce.info("Config loaded - switch to Deploy tab")}async function A(qe){t(16,q=qe),t(15,E=!0),t(18,B=!0),t(17,N=[]);try{const Oe=await Fe("GET",`/infra/deployments/history/${qe.id}/logs`);t(17,N=Oe.logs||[])}catch(Oe){Ce.error("Failed to load logs: "+(Oe.message||Oe))}finally{t(18,B=!1)}}async function M(qe){t(2,f=qe);try{const Oe=new URLSearchParams({project:qe.project||"",environment:qe.environment||"",service_name:qe.service_name||qe.service||""}),Re=await Fe("GET",`/infra/deployments/rollback/preview?${Oe}`);t(3,p=(Re.recent_deployments||[]).filter(st=>st.id!==qe.id&&st.status==="success"))}catch{t(3,p=[])}t(1,c=!0)}async function P(){if(!f||!d){Ce.error("Select a deployment to rollback to");return}const qe=p.find(Me=>Me.id===d);if(!qe){Ce.error("Target deployment not found");return}const Oe=f.project||"",Re=f.environment||"",st=f.service_name||f.service||"";try{const Me=new URLSearchParams({project:Oe,environment:Re,service_name:st}),Le=await Fe("GET",`/infra/services/state?${Me}`),Ge=qe.server_ips||[],tt=(Le.server_ips||[]).filter(Ve=>!Ge.includes(Ve)),lt=(Le.servers||[]).filter(Ve=>tt.includes(Ve.ip));if(Ge.length>0){const Ve=await Fe("POST",`/infra/services/check-servers?do_token=${Gt()}&server_ips=${Ge.join(",")}`,null);if(t(10,k=Ve.unavailable||[]),t(11,y=Ve.available||[]),k.length>0){t(8,g="missing"),t(12,S=qe),t(7,m=!0);return}}if(lt.length>0){t(9,C=lt),t(8,g="cleanup"),t(12,S=qe),t(7,m=!0);return}}catch(Me){console.log("Rollback pre-check:",Me.message||Me)}await Z()}async function I(){if(t(7,m=!1),g==="cleanup"&&C.length>0){const qe=`${f.project}_${f.service||f.service_name}_${f.environment}`.replace(/[^a-zA-Z0-9_]/g,"_"),Oe=C.map(Re=>Re.ip);try{const Re=await Fe("POST",`/infra/services/cleanup?do_token=${Gt()}`,{server_ips:Oe,container_name:qe});t(6,h=[...h,{message:`Cleanup: ${Re.cleaned} stopped`,type:"info",time:new Date}])}catch(Re){t(6,h=[...h,{message:`Cleanup warning: ${Re.message}`,type:"warning",time:new Date}])}}t(9,C=[]),t(10,k=[]),t(12,S=null),await Z()}let V=!1,ee=[];async function Q(){t(7,m=!1),V=!0,ee=y.map(qe=>qe.ip),t(10,k=[]),t(12,S=null),await Z()}async function Z(){t(6,h=[]),t(5,v=!0);const qe=(Oe,Re="info")=>{t(6,h=[...h,{message:Oe,type:Re,time:new Date}])};try{const Oe=new URLSearchParams({project:f.project||"",environment:f.environment||"",service_name:f.service_name||f.service||""}).toString();qe("Starting rollback...");let Re=!1,st="";const Me={deployment_id:d};if(V&&ee.length>0&&(Me.server_ips=ee,qe(`Partial rollback to ${ee.length} available server(s)`)),await Kl("POST",`/infra/deployments/rollback?${Oe}`,Me,Le=>{Le.type==="progress"||Le.type==="start"?qe(Le.message,"info"):Le.type==="server_complete"?qe(`✅ ${Le.ip}: Success`,"success"):Le.type==="error"?(qe(`❌ ${Le.message||Le.error}`,"error"),st=Le.message||Le.error||"Unknown error"):Le.type==="complete"&&(Re=Le.success,Re?qe(`✅ ${Le.message}`,"success"):(st=Le.message||"Rollback failed",qe(`❌ ${st}`,"error")))}),Re)Ce.success("Rollback completed successfully"),await oe();else throw new Error(st||"Rollback failed")}catch(Oe){qe(`❌ Error: ${Oe.message||String(Oe)}`,"error"),Ce.error("Rollback failed: "+(Oe.message||String(Oe)))}finally{t(5,v=!1),V=!1,ee=[]}}function oe(){ml.refresh()}function x(){ml.refresh()}const G=[[]],U=()=>ml.refresh(),re=qe=>J(qe),W=qe=>A(qe),ae=qe=>M(qe),te=()=>{t(1,c=!1),t(6,h=[])};function Y(){d=this.__value,t(4,d)}function de(qe){c=qe,t(1,c)}const ce=()=>t(1,c=!1),ie=()=>t(13,D=!1);function X(qe){D=qe,t(13,D)}const K=()=>t(13,D=!1),me=()=>t(15,E=!1);function ge(qe){E=qe,t(15,E)}const He=()=>t(15,E=!1),at=()=>{t(7,m=!1),t(12,S=null)};function ft(qe){m=qe,t(7,m)}const Tt=()=>{t(7,m=!1),t(12,S=null)};return l.$$.update=()=>{l.$$.dirty[1]&2&&t(30,n=o||{loading:!1}),l.$$.dirty[0]&1073741824&&t(0,a=n.loading),l.$$.dirty[0]&1073741824&&t(20,s=n.lastFetched),l.$$.dirty[0]&1073741824&&n.data&&t(29,O=p1(n.data)),l.$$.dirty[0]&536870912|l.$$.dirty[1]&1&&t(19,F=f1(O,i))},[a,c,f,p,d,v,h,m,g,C,k,y,S,D,z,E,q,N,B,F,s,J,H,A,M,P,I,Q,x,O,n,i,o,U,re,W,ae,te,Y,G,de,ce,ie,X,K,me,ge,He,at,ft,Tt]}class d1 extends yt{constructor(e){super(),wt(this,e,_1,u1,$t,{refresh:28},null,[-1,-1,-1])}get refresh(){return this.$$.ctx[28]}}function qr(l,e,t){var i,o,a;const n=l.slice();n[33]=e[t];const s=n[33].ip||((a=(o=(i=n[33].networks)==null?void 0:i.v4)==null?void 0:o[0])==null?void 0:a.ip_address);return n[34]=s,n}function zr(l,e,t){const n=l.slice();return n[37]=e[t],n}function Er(l,e,t){const n=l.slice();return n[40]=e[t],n}function Pr(l,e,t){const n=l.slice();return n[37]=e[t],n}function Lr(l,e,t){const n=l.slice();return n[40]=e[t],n}function Nr(l){let e,t=l[40].label+"",n;return{c(){e=_("option"),n=T(t),e.__value=l[40].value,ne(e,e.__value)},m(s,i){w(s,e,i),r(e,n)},p:be,d(s){s&&$(e)}}}function Rr(l){let e,t=l[37].charAt(0).toUpperCase()+l[37].slice(1)+"",n;return{c(){e=_("option"),n=T(t),e.__value=l[37],ne(e,e.__value)},m(s,i){w(s,e,i),r(e,n)},p:be,d(s){s&&$(e)}}}function v1(l){let e;return{c(){e=T("🔍 Get Credentials")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function m1(l){let e;return{c(){e=T("Looking up...")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function h1(l){let e;function t(i,o){return i[11]?m1:v1}let n=t(l),s=n(l);return{c(){s.c(),e=Ie()},m(i,o){s.m(i,o),w(i,e,o)},p(i,o){n!==(n=t(i))&&(s.d(1),s=n(i),s&&(s.c(),s.m(e.parentNode,e)))},d(i){i&&$(e),s.d(i)}}}function Mr(l){let e,t,n,s,i,o=l[10].service+"",a,c,f,p,d,v,h=l[10].env_var_name+"",m,g,C,k,y=l[10].connection_url+"",S,D,z,E,q,N,B,O,F,J,H,A,M,P=l[10].user&&Ar(l),I=l[10].password&&Or(l),V=l[10].database&&jr(l);function ee(oe,x){if(x[0]&1024&&(F=null),x[0]&1024&&(J=null),x[0]&1024&&(H=null),F==null&&(F=!!oe[10].service.toLowerCase().includes("redis")),F)return k1;if(J==null&&(J=!!oe[10].service.toLowerCase().includes("postgres")),J)return b1;if(H==null&&(H=!!oe[10].service.toLowerCase().includes("mongo")),H)return g1}let Q=ee(l,[-1,-1]),Z=Q&&Q(l);return{c(){e=_("div"),t=_("div"),n=_("span"),n.textContent="✅",s=b(),i=_("span"),a=T(o),c=T(" credentials"),f=b(),p=_("div"),d=_("div"),v=_("span"),m=T(h),g=T(":"),C=b(),k=_("code"),S=T(y),D=b(),P&&P.c(),z=b(),I&&I.c(),E=b(),V&&V.c(),q=b(),N=_("small"),N.textContent="Click any value to copy",B=b(),O=_("div"),Z&&Z.c(),u(n,"class","result-icon svelte-14omwo7"),u(i,"class","result-title svelte-14omwo7"),u(t,"class","result-header svelte-14omwo7"),u(v,"class","label svelte-14omwo7"),u(k,"class","value url clickable svelte-14omwo7"),u(d,"class","info-row full-width svelte-14omwo7"),u(p,"class","connection-info svelte-14omwo7"),u(N,"class","copy-hint svelte-14omwo7"),u(O,"class","cli-examples svelte-14omwo7"),u(e,"class","lookup-result svelte-14omwo7")},m(oe,x){w(oe,e,x),r(e,t),r(t,n),r(t,s),r(t,i),r(i,a),r(i,c),r(e,f),r(e,p),r(p,d),r(d,v),r(v,m),r(v,g),r(d,C),r(d,k),r(k,S),r(p,D),P&&P.m(p,null),r(p,z),I&&I.m(p,null),r(p,E),V&&V.m(p,null),r(e,q),r(e,N),r(e,B),r(e,O),Z&&Z.m(O,null),A||(M=le(k,"click",l[23]),A=!0)},p(oe,x){x[0]&1024&&o!==(o=oe[10].service+"")&&j(a,o),x[0]&1024&&h!==(h=oe[10].env_var_name+"")&&j(m,h),x[0]&1024&&y!==(y=oe[10].connection_url+"")&&j(S,y),oe[10].user?P?P.p(oe,x):(P=Ar(oe),P.c(),P.m(p,z)):P&&(P.d(1),P=null),oe[10].password?I?I.p(oe,x):(I=Or(oe),I.c(),I.m(p,E)):I&&(I.d(1),I=null),oe[10].database?V?V.p(oe,x):(V=jr(oe),V.c(),V.m(p,null)):V&&(V.d(1),V=null),Q===(Q=ee(oe,x))&&Z?Z.p(oe,x):(Z&&Z.d(1),Z=Q&&Q(oe),Z&&(Z.c(),Z.m(O,null)))},d(oe){oe&&$(e),P&&P.d(),I&&I.d(),V&&V.d(),Z&&Z.d(),A=!1,M()}}}function Ar(l){let e,t,n,s,i=l[10].user+"",o,a,c;return{c(){e=_("div"),t=_("span"),t.textContent="User:",n=b(),s=_("code"),o=T(i),u(t,"class","label svelte-14omwo7"),u(s,"class","value clickable svelte-14omwo7"),u(e,"class","info-row svelte-14omwo7")},m(f,p){w(f,e,p),r(e,t),r(e,n),r(e,s),r(s,o),a||(c=le(s,"click",l[24]),a=!0)},p(f,p){p[0]&1024&&i!==(i=f[10].user+"")&&j(o,i)},d(f){f&&$(e),a=!1,c()}}}function Or(l){let e,t,n,s,i=l[10].password+"",o,a,c;return{c(){e=_("div"),t=_("span"),t.textContent="Password:",n=b(),s=_("code"),o=T(i),u(t,"class","label svelte-14omwo7"),u(s,"class","value clickable svelte-14omwo7"),u(e,"class","info-row svelte-14omwo7")},m(f,p){w(f,e,p),r(e,t),r(e,n),r(e,s),r(s,o),a||(c=le(s,"click",l[25]),a=!0)},p(f,p){p[0]&1024&&i!==(i=f[10].password+"")&&j(o,i)},d(f){f&&$(e),a=!1,c()}}}function jr(l){let e,t,n,s,i=l[10].database+"",o,a,c;return{c(){e=_("div"),t=_("span"),t.textContent="Database:",n=b(),s=_("code"),o=T(i),u(t,"class","label svelte-14omwo7"),u(s,"class","value clickable svelte-14omwo7"),u(e,"class","info-row svelte-14omwo7")},m(f,p){w(f,e,p),r(e,t),r(e,n),r(e,s),r(s,o),a||(c=le(s,"click",l[26]),a=!0)},p(f,p){p[0]&1024&&i!==(i=f[10].database+"")&&j(o,i)},d(f){f&&$(e),a=!1,c()}}}function g1(l){let e,t,n=l[10].connection_url+"",s,i;return{c(){e=_("code"),t=T('mongosh "'),s=T(n),i=T('"'),u(e,"class","svelte-14omwo7")},m(o,a){w(o,e,a),r(e,t),r(e,s),r(e,i)},p(o,a){a[0]&1024&&n!==(n=o[10].connection_url+"")&&j(s,n)},d(o){o&&$(e)}}}function b1(l){let e,t,n=l[10].connection_url+"",s,i;return{c(){e=_("code"),t=T('psql "'),s=T(n),i=T('"'),u(e,"class","svelte-14omwo7")},m(o,a){w(o,e,a),r(e,t),r(e,s),r(e,i)},p(o,a){a[0]&1024&&n!==(n=o[10].connection_url+"")&&j(s,n)},d(o){o&&$(e)}}}function k1(l){let e,t,n=l[10].host+"",s,i,o=l[10].port+"",a,c,f=l[10].password+"",p;return{c(){e=_("code"),t=T("redis-cli -h "),s=T(n),i=T(" -p "),a=T(o),c=T(" -a "),p=T(f),u(e,"class","svelte-14omwo7")},m(d,v){w(d,e,v),r(e,t),r(e,s),r(e,i),r(e,a),r(e,c),r(e,p)},p(d,v){v[0]&1024&&n!==(n=d[10].host+"")&&j(s,n),v[0]&1024&&o!==(o=d[10].port+"")&&j(a,o),v[0]&1024&&f!==(f=d[10].password+"")&&j(p,f)},d(d){d&&$(e)}}}function $1(l){let e,t,n,s,i,o,a,c,f,p,d,v,h,m,g,C,k,y,S,D,z,E,q,N,B,O,F,J,H,A,M,P,I,V,ee,Q,Z,oe=ve(l[13]),x=[];for(let W=0;W<oe.length;W+=1)x[W]=Nr(Lr(l,oe,W));let G=ve(l[14]),U=[];for(let W=0;W<G.length;W+=1)U[W]=Rr(Pr(l,G,W));P=new Be({props:{variant:"primary",type:"submit",disabled:l[11],$$slots:{default:[h1]},$$scope:{ctx:l}}});let re=l[10]&&Mr(l);return{c(){e=_("p"),e.innerHTML="For CLI tools, DB admin apps, or local dev. <strong>Apps get URLs auto-injected</strong> when you enable dependencies in Deploy tab.",t=b(),n=_("form"),s=_("div"),i=_("label"),i.textContent="Service Type *",o=b(),a=_("select"),c=_("option"),c.textContent="Select service...";for(let W=0;W<x.length;W+=1)x[W].c();f=b(),p=_("div"),d=_("div"),v=_("label"),v.textContent="Project *",h=b(),m=_("input"),g=b(),C=_("div"),k=_("label"),k.textContent="Environment",y=b(),S=_("select");for(let W=0;W<U.length;W+=1)U[W].c();D=b(),z=_("div"),E=_("div"),q=_("label"),q.textContent="Server IP *",N=b(),B=_("input"),O=b(),F=_("div"),J=_("label"),J.textContent="Port *",H=b(),A=_("input"),M=b(),_e(P.$$.fragment),I=b(),re&&re.c(),V=Ie(),u(e,"class","description svelte-14omwo7"),u(i,"for","lookup-type"),u(i,"class","svelte-14omwo7"),c.__value="",ne(c,c.__value),u(a,"id","lookup-type"),a.required=!0,u(a,"class","svelte-14omwo7"),l[0]===void 0&&Xe(()=>l[18].call(a)),u(s,"class","form-group svelte-14omwo7"),u(v,"for","lookup-project"),u(v,"class","svelte-14omwo7"),u(m,"id","lookup-project"),u(m,"type","text"),u(m,"placeholder","myapp"),m.required=!0,u(m,"class","svelte-14omwo7"),u(d,"class","form-group svelte-14omwo7"),u(k,"for","lookup-env"),u(k,"class","svelte-14omwo7"),u(S,"id","lookup-env"),u(S,"class","svelte-14omwo7"),l[8]===void 0&&Xe(()=>l[20].call(S)),u(C,"class","form-group svelte-14omwo7"),u(p,"class","form-row svelte-14omwo7"),u(q,"for","lookup-host"),u(q,"class","svelte-14omwo7"),u(B,"id","lookup-host"),u(B,"type","text"),u(B,"placeholder","206.189.18.79"),B.required=!0,u(B,"class","svelte-14omwo7"),u(E,"class","form-group svelte-14omwo7"),u(J,"for","lookup-port"),u(J,"class","svelte-14omwo7"),u(A,"id","lookup-port"),u(A,"type","number"),u(A,"placeholder","8453"),A.required=!0,u(A,"class","svelte-14omwo7"),u(F,"class","form-group svelte-14omwo7"),u(z,"class","form-row svelte-14omwo7")},m(W,ae){w(W,e,ae),w(W,t,ae),w(W,n,ae),r(n,s),r(s,i),r(s,o),r(s,a),r(a,c);for(let te=0;te<x.length;te+=1)x[te]&&x[te].m(a,null);ze(a,l[0],!0),r(n,f),r(n,p),r(p,d),r(d,v),r(d,h),r(d,m),ne(m,l[7]),r(p,g),r(p,C),r(C,k),r(C,y),r(C,S);for(let te=0;te<U.length;te+=1)U[te]&&U[te].m(S,null);ze(S,l[8],!0),r(n,D),r(n,z),r(z,E),r(E,q),r(E,N),r(E,B),ne(B,l[9]),r(z,O),r(z,F),r(F,J),r(F,H),r(F,A),ne(A,l[1]),r(n,M),fe(P,n,null),w(W,I,ae),re&&re.m(W,ae),w(W,V,ae),ee=!0,Q||(Z=[le(a,"change",l[18]),le(m,"input",l[19]),le(S,"change",l[20]),le(B,"input",l[21]),le(A,"input",l[22]),le(n,"submit",l[16])],Q=!0)},p(W,ae){if(ae[0]&8192){oe=ve(W[13]);let Y;for(Y=0;Y<oe.length;Y+=1){const de=Lr(W,oe,Y);x[Y]?x[Y].p(de,ae):(x[Y]=Nr(de),x[Y].c(),x[Y].m(a,null))}for(;Y<x.length;Y+=1)x[Y].d(1);x.length=oe.length}if(ae[0]&8193&&ze(a,W[0]),ae[0]&128&&m.value!==W[7]&&ne(m,W[7]),ae[0]&16384){G=ve(W[14]);let Y;for(Y=0;Y<G.length;Y+=1){const de=Pr(W,G,Y);U[Y]?U[Y].p(de,ae):(U[Y]=Rr(de),U[Y].c(),U[Y].m(S,null))}for(;Y<U.length;Y+=1)U[Y].d(1);U.length=G.length}ae[0]&16640&&ze(S,W[8]),ae[0]&512&&B.value!==W[9]&&ne(B,W[9]),ae[0]&2&&Ht(A.value)!==W[1]&&ne(A,W[1]);const te={};ae[0]&2048&&(te.disabled=W[11]),ae[0]&2048|ae[1]&65536&&(te.$$scope={dirty:ae,ctx:W}),P.$set(te),W[10]?re?re.p(W,ae):(re=Mr(W),re.c(),re.m(V.parentNode,V)):re&&(re.d(1),re=null)},i(W){ee||(L(P.$$.fragment,W),ee=!0)},o(W){R(P.$$.fragment,W),ee=!1},d(W){W&&($(e),$(t),$(n),$(I),$(V)),Ee(x,W),Ee(U,W),pe(P),re&&re.d(W),Q=!1,Ue(Z)}}}function Fr(l){let e,t=l[40].label+"",n;return{c(){e=_("option"),n=T(t),e.__value=l[40].value,ne(e,e.__value)},m(s,i){w(s,e,i),r(e,n)},p:be,d(s){s&&$(e)}}}function Ir(l){let e,t=l[37].charAt(0).toUpperCase()+l[37].slice(1)+"",n;return{c(){e=_("option"),n=T(t),e.__value=l[37],ne(e,e.__value)},m(s,i){w(s,e,i),r(e,n)},p:be,d(s){s&&$(e)}}}function Br(l){let e,t=(l[33].name||"unnamed")+"",n,s,i=l[34]+"",o,a,c;return{c(){e=_("option"),n=T(t),s=T(" ("),o=T(i),a=T(")"),e.__value=c=l[34],ne(e,e.__value)},m(f,p){w(f,e,p),r(e,n),r(e,s),r(e,o),r(e,a)},p(f,p){p[0]&4096&&t!==(t=(f[33].name||"unnamed")+"")&&j(n,t),p[0]&4096&&i!==(i=f[34]+"")&&j(o,i),p[0]&4096&&c!==(c=f[34])&&(e.__value=c,ne(e,e.__value))},d(f){f&&$(e)}}}function Ur(l){let e,t=l[34]&&Br(l);return{c(){t&&t.c(),e=Ie()},m(n,s){t&&t.m(n,s),w(n,e,s)},p(n,s){n[34]?t?t.p(n,s):(t=Br(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(n){n&&$(e),t&&t.d(n)}}}function w1(l){let e;return{c(){e=T("Use Deploy Tab Instead →")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function y1(l){let e;return{c(){e=T("Deploying...")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function C1(l){let e;function t(i,o){return i[6]?y1:w1}let n=t(l),s=n(l);return{c(){s.c(),e=Ie()},m(i,o){s.m(i,o),w(i,e,o)},p(i,o){n!==(n=t(i))&&(s.d(1),s=n(i),s&&(s.c(),s.m(e.parentNode,e)))},d(i){i&&$(e),s.d(i)}}}function S1(l){let e,t,n,s,i,o,a,c,f,p,d,v,h,m,g,C,k,y,S,D,z,E,q,N,B,O,F,J,H,A,M,P,I,V=ve(l[13]),ee=[];for(let G=0;G<V.length;G+=1)ee[G]=Fr(Er(l,V,G));let Q=ve(l[14]),Z=[];for(let G=0;G<Q.length;G+=1)Z[G]=Ir(zr(l,Q,G));let oe=ve(l[12]||[]),x=[];for(let G=0;G<oe.length;G+=1)x[G]=Ur(qr(l,oe,G));return J=new Be({props:{variant:"secondary",type:"submit",disabled:l[6],$$slots:{default:[C1]},$$scope:{ctx:l}}}),{c(){e=_("p"),e.textContent="Deploy stateful services with automatic configuration, persistence, and service mesh.",t=b(),n=_("form"),s=_("div"),i=_("label"),i.textContent="Service Type *",o=b(),a=_("select"),c=_("option"),c.textContent="Select service...";for(let G=0;G<ee.length;G+=1)ee[G].c();f=b(),p=_("div"),d=_("label"),d.textContent="Project *",v=b(),h=_("input"),m=b(),g=_("div"),C=_("label"),C.textContent="Environment",k=b(),y=_("select");for(let G=0;G<Z.length;G+=1)Z[G].c();S=b(),D=_("div"),z=_("label"),z.textContent="Target Server *",E=b(),q=_("select"),N=_("option"),N.textContent="Select server...";for(let G=0;G<x.length;G+=1)x[G].c();B=b(),O=_("small"),O.textContent="Servers from Infrastructure tab",F=b(),_e(J.$$.fragment),H=b(),A=_("small"),A.textContent='Stateful deploys work via Deploy tab with "Stateful Service" type',u(e,"class","description svelte-14omwo7"),u(i,"for","svc-type"),u(i,"class","svelte-14omwo7"),c.__value="",ne(c,c.__value),u(a,"id","svc-type"),a.required=!0,u(a,"class","svelte-14omwo7"),l[2]===void 0&&Xe(()=>l[27].call(a)),u(s,"class","form-group svelte-14omwo7"),u(d,"for","svc-project"),u(d,"class","svelte-14omwo7"),u(h,"id","svc-project"),u(h,"type","text"),u(h,"placeholder","myapp"),h.required=!0,u(h,"class","svelte-14omwo7"),u(p,"class","form-group svelte-14omwo7"),u(C,"for","svc-env"),u(C,"class","svelte-14omwo7"),u(y,"id","svc-env"),u(y,"class","svelte-14omwo7"),l[4]===void 0&&Xe(()=>l[29].call(y)),u(g,"class","form-group svelte-14omwo7"),u(z,"for","svc-server"),u(z,"class","svelte-14omwo7"),N.__value="",ne(N,N.__value),u(q,"id","svc-server"),q.required=!0,u(q,"class","svelte-14omwo7"),l[5]===void 0&&Xe(()=>l[30].call(q)),u(O,"class","svelte-14omwo7"),u(D,"class","form-group svelte-14omwo7"),u(A,"class","hint svelte-14omwo7")},m(G,U){w(G,e,U),w(G,t,U),w(G,n,U),r(n,s),r(s,i),r(s,o),r(s,a),r(a,c);for(let re=0;re<ee.length;re+=1)ee[re]&&ee[re].m(a,null);ze(a,l[2],!0),r(n,f),r(n,p),r(p,d),r(p,v),r(p,h),ne(h,l[3]),r(n,m),r(n,g),r(g,C),r(g,k),r(g,y);for(let re=0;re<Z.length;re+=1)Z[re]&&Z[re].m(y,null);ze(y,l[4],!0),r(n,S),r(n,D),r(D,z),r(D,E),r(D,q),r(q,N);for(let re=0;re<x.length;re+=1)x[re]&&x[re].m(q,null);ze(q,l[5],!0),r(D,B),r(D,O),r(n,F),fe(J,n,null),r(n,H),r(n,A),M=!0,P||(I=[le(a,"change",l[27]),le(h,"input",l[28]),le(y,"change",l[29]),le(q,"change",l[30]),le(n,"submit",l[15])],P=!0)},p(G,U){if(U[0]&8192){V=ve(G[13]);let W;for(W=0;W<V.length;W+=1){const ae=Er(G,V,W);ee[W]?ee[W].p(ae,U):(ee[W]=Fr(ae),ee[W].c(),ee[W].m(a,null))}for(;W<ee.length;W+=1)ee[W].d(1);ee.length=V.length}if(U[0]&8196&&ze(a,G[2]),U[0]&8&&h.value!==G[3]&&ne(h,G[3]),U[0]&16384){Q=ve(G[14]);let W;for(W=0;W<Q.length;W+=1){const ae=zr(G,Q,W);Z[W]?Z[W].p(ae,U):(Z[W]=Ir(ae),Z[W].c(),Z[W].m(y,null))}for(;W<Z.length;W+=1)Z[W].d(1);Z.length=Q.length}if(U[0]&16400&&ze(y,G[4]),U[0]&4096){oe=ve(G[12]||[]);let W;for(W=0;W<oe.length;W+=1){const ae=qr(G,oe,W);x[W]?x[W].p(ae,U):(x[W]=Ur(ae),x[W].c(),x[W].m(q,null))}for(;W<x.length;W+=1)x[W].d(1);x.length=oe.length}U[0]&4128&&ze(q,G[5]);const re={};U[0]&64&&(re.disabled=G[6]),U[0]&64|U[1]&65536&&(re.$$scope={dirty:U,ctx:G}),J.$set(re)},i(G){M||(L(J.$$.fragment,G),M=!0)},o(G){R(J.$$.fragment,G),M=!1},d(G){G&&($(e),$(t),$(n)),Ee(ee,G),Ee(Z,G),Ee(x,G),pe(J),P=!1,Ue(I)}}}function T1(l){let e;return{c(){e=_("div"),e.innerHTML='<div class="feature svelte-14omwo7"><strong class="svelte-14omwo7">🔐 Auto Credentials</strong> <p class="svelte-14omwo7">Deterministic passwords generated from project/env. Same inputs = same password.</p></div> <div class="feature svelte-14omwo7"><strong class="svelte-14omwo7">💾 Persistent Storage</strong> <p class="svelte-14omwo7">Data volumes mounted at /data. Survives container restarts and redeploys.</p></div> <div class="feature svelte-14omwo7"><strong class="svelte-14omwo7">🔀 Service Mesh</strong> <p class="svelte-14omwo7">Nginx proxy on internal ports. Apps connect to localhost:PORT.</p></div> <div class="feature svelte-14omwo7"><strong class="svelte-14omwo7">🔧 Auto-Inject</strong> <p class="svelte-14omwo7">Enable &quot;Auto-inject&quot; in Deploy tab to get DATABASE_URL automatically.</p></div>',u(e,"class","features-grid svelte-14omwo7")},m(t,n){w(t,e,n)},p:be,d(t){t&&$(e)}}}function D1(l){let e,t,n,s,i,o,a,c;return n=new ut({props:{title:"🔑 Direct Access Credentials",$$slots:{default:[$1]},$$scope:{ctx:l}}}),i=new ut({props:{title:"🗄️ Deploy Database/Cache",$$slots:{default:[S1]},$$scope:{ctx:l}}}),a=new ut({props:{title:"ℹ️ How It Works",$$slots:{default:[T1]},$$scope:{ctx:l}}}),{c(){e=_("div"),t=_("div"),_e(n.$$.fragment),s=b(),_e(i.$$.fragment),o=b(),_e(a.$$.fragment),u(t,"class","services-grid svelte-14omwo7"),u(e,"class","services-page svelte-14omwo7")},m(f,p){w(f,e,p),r(e,t),fe(n,t,null),r(t,s),fe(i,t,null),r(e,o),fe(a,e,null),c=!0},p(f,p){const d={};p[0]&3971|p[1]&65536&&(d.$$scope={dirty:p,ctx:f}),n.$set(d);const v={};p[0]&4220|p[1]&65536&&(v.$$scope={dirty:p,ctx:f}),i.$set(v);const h={};p[1]&65536&&(h.$$scope={dirty:p,ctx:f}),a.$set(h)},i(f){c||(L(n.$$.fragment,f),L(i.$$.fragment,f),L(a.$$.fragment,f),c=!0)},o(f){R(n.$$.fragment,f),R(i.$$.fragment,f),R(a.$$.fragment,f),c=!1},d(f){f&&$(e),pe(n),pe(i),pe(a)}}}function q1(l,e,t){let n;_t(l,Fl,ee=>t(12,n=ee));let s="",i="",o="prod",a="",c=!1,f="",p="",d="prod",v="",h="",m=null,g=!1;const C=[{value:"postgres",label:"🐘 PostgreSQL",port:5432},{value:"redis",label:"⚡ Redis",port:6379},{value:"mysql",label:"🐬 MySQL",port:3306},{value:"mongo",label:"🍃 MongoDB",port:27017}],k=["prod","staging","dev"];hl(()=>{y()});async function y(){try{const ee=await Fe("GET","/infra/servers");Fl.set(ee.servers||ee||[])}catch(ee){console.error("Failed to load servers:",ee)}}async function S(ee){if(ee.preventDefault(),!s||!i||!a){Ce.error("Please fill in all required fields");return}t(6,c=!0);try{Ce.error("Service deployment not yet implemented. Use Deploy tab instead.");return}catch(Q){Ce.error("Deployment failed: "+Q.message)}finally{t(6,c=!1)}}async function D(ee){if(ee.preventDefault(),!f||!p||!v||!h){Ce.error("Please fill in all required fields");return}t(11,g=!0),t(10,m=null);try{const Q=await Fe("GET",`/infra/services/${f}/connection?project=${encodeURIComponent(p)}&environment=${d}&host=${encodeURIComponent(v)}&port=${h}`);t(10,m=Q),Ce.success("Connection info retrieved!")}catch(Q){Ce.error("Lookup failed: "+Q.message)}finally{t(11,g=!1)}}function z(ee){navigator.clipboard.writeText(ee),Ce.success("Copied to clipboard")}function E(){f=pt(this),t(0,f),t(13,C)}function q(){p=this.value,t(7,p)}function N(){d=pt(this),t(8,d),t(14,k)}function B(){v=this.value,t(9,v)}function O(){h=Ht(this.value),t(1,h)}const F=()=>z(m.connection_url),J=()=>z(m.user),H=()=>z(m.password),A=()=>z(m.database);function M(){s=pt(this),t(2,s),t(13,C)}function P(){i=this.value,t(3,i)}function I(){o=pt(this),t(4,o),t(14,k)}function V(){a=pt(this),t(5,a)}return l.$$.update=()=>{l.$$.dirty[0]&3&&f&&C.find(ee=>ee.value===f)},[f,h,s,i,o,a,c,p,d,v,m,g,n,C,k,S,D,z,E,q,N,B,O,F,J,H,A,M,P,I,V]}class z1 extends yt{constructor(e){super(),wt(this,e,q1,D1,$t,{},null,[-1,-1])}}const{Boolean:E1}=Oa;function Hr(l,e,t){const n=l.slice();return n[32]=e[t],n}function P1(l){let e,t,n,s,i,o,a,c,f,p;return{c(){e=_("div"),t=_("label"),t.textContent="Theme",n=b(),s=_("select"),i=_("option"),i.textContent="🌙 Dark (Space)",o=_("option"),o.textContent="☀️ Light",a=b(),c=_("p"),c.textContent="Theme preference is saved to your browser.",u(t,"for","theme-select"),u(t,"class","svelte-16vnl3x"),i.__value="dark",ne(i,i.__value),o.__value="light",ne(o,o.__value),u(s,"id","theme-select"),u(s,"class","svelte-16vnl3x"),l[14]===void 0&&Xe(()=>l[21].call(s)),u(e,"class","form-group svelte-16vnl3x"),u(c,"class","hint svelte-16vnl3x")},m(d,v){w(d,e,v),r(e,t),r(e,n),r(e,s),r(s,i),r(s,o),ze(s,l[14],!0),w(d,a,v),w(d,c,v),f||(p=[le(s,"change",l[21]),le(s,"change",l[22])],f=!0)},p(d,v){v[0]&16384&&ze(s,d[14])},d(d){d&&($(e),$(a),$(c)),f=!1,Ue(p)}}}function L1(l){let e;return{c(){e=T("Save Token")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function N1(l){let e,t;return e=new Ke({props:{variant:"danger",$$slots:{default:[A1]},$$scope:{ctx:l}}}),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const i={};s[1]&16&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(L(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){pe(e,n)}}}function R1(l){let e,t;return e=new Ke({props:{variant:"warning",$$slots:{default:[O1]},$$scope:{ctx:l}}}),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const i={};s[1]&16&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(L(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){pe(e,n)}}}function M1(l){let e,t,n,s,i;return e=new Ke({props:{variant:"success",$$slots:{default:[j1]},$$scope:{ctx:l}}}),{c(){_e(e.$$.fragment),t=b(),n=_("span"),s=T(l[0]),u(n,"class","token-preview svelte-16vnl3x")},m(o,a){fe(e,o,a),w(o,t,a),w(o,n,a),r(n,s),i=!0},p(o,a){const c={};a[1]&16&&(c.$$scope={dirty:a,ctx:o}),e.$set(c),(!i||a[0]&1)&&j(s,o[0])},i(o){i||(L(e.$$.fragment,o),i=!0)},o(o){R(e.$$.fragment,o),i=!1},d(o){o&&($(t),$(n)),pe(e,o)}}}function A1(l){let e;return{c(){e=T("Invalid token")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function O1(l){let e;return{c(){e=T("Not configured")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function j1(l){let e;return{c(){e=T("✓ Connected")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function F1(l){let e,t,n,s,i,o,a,c,f,p,d,v,h,m,g;c=new Be({props:{variant:"primary",type:"submit",$$slots:{default:[L1]},$$scope:{ctx:l}}});const C=[M1,R1,N1],k=[];function y(S,D){var z,E;return(z=S[1])!=null&&z.valid?0:(E=S[1])!=null&&E.missing?1:2}return d=y(l),v=k[d]=C[d](l),{c(){e=_("p"),e.innerHTML=`Get your token from 
      <a href="https://cloud.digitalocean.com/account/api/tokens" target="_blank" class="svelte-16vnl3x">DO Control Panel</a>.`,t=b(),n=_("div"),n.innerHTML='<div class="info-title svelte-16vnl3x">🔒 Browser Storage</div> <div class="info-text svelte-16vnl3x">Token stored in browser cookie. Passed with each API request. Never stored on server.</div>',s=b(),i=_("form"),o=_("div"),o.innerHTML='<label for="do-token" class="svelte-16vnl3x">DigitalOcean API Token</label> <input id="do-token" type="password" placeholder="dop_v1_xxxxx" class="svelte-16vnl3x"/>',a=b(),_e(c.$$.fragment),f=b(),p=_("div"),v.c(),u(e,"class","description svelte-16vnl3x"),u(n,"class","info-box svelte-16vnl3x"),u(o,"class","form-group svelte-16vnl3x"),u(p,"class","token-status svelte-16vnl3x")},m(S,D){w(S,e,D),w(S,t,D),w(S,n,D),w(S,s,D),w(S,i,D),r(i,o),r(i,a),fe(c,i,null),w(S,f,D),w(S,p,D),k[d].m(p,null),h=!0,m||(g=le(i,"submit",l[15]),m=!0)},p(S,D){const z={};D[1]&16&&(z.$$scope={dirty:D,ctx:S}),c.$set(z);let E=d;d=y(S),d===E?k[d].p(S,D):(Te(),R(k[E],1,1,()=>{k[E]=null}),De(),v=k[d],v?v.p(S,D):(v=k[d]=C[d](S),v.c()),L(v,1),v.m(p,null))},i(S){h||(L(c.$$.fragment,S),L(v),h=!0)},o(S){R(c.$$.fragment,S),R(v),h=!1},d(S){S&&($(e),$(t),$(n),$(s),$(i),$(f),$(p)),pe(c),k[d].d(),m=!1,g()}}}function I1(l){let e;return{c(){e=T("Save Token")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function B1(l){let e,t;return e=new Ke({props:{variant:"warning",$$slots:{default:[H1]},$$scope:{ctx:l}}}),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const i={};s[1]&16&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(L(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){pe(e,n)}}}function U1(l){let e,t,n,s,i;return e=new Ke({props:{variant:"success",$$slots:{default:[G1]},$$scope:{ctx:l}}}),{c(){_e(e.$$.fragment),t=b(),n=_("span"),s=T(l[2]),u(n,"class","token-preview svelte-16vnl3x")},m(o,a){fe(e,o,a),w(o,t,a),w(o,n,a),r(n,s),i=!0},p(o,a){const c={};a[1]&16&&(c.$$scope={dirty:a,ctx:o}),e.$set(c),(!i||a[0]&4)&&j(s,o[2])},i(o){i||(L(e.$$.fragment,o),i=!0)},o(o){R(e.$$.fragment,o),i=!1},d(o){o&&($(t),$(n)),pe(e,o)}}}function H1(l){let e;return{c(){e=T("Not configured")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function G1(l){let e;return{c(){e=T("✓ Connected")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function W1(l){let e,t,n,s,i,o,a,c,f,p,d,v,h;o=new Be({props:{variant:"primary",type:"submit",$$slots:{default:[I1]},$$scope:{ctx:l}}});const m=[U1,B1],g=[];function C(k,y){var S;return(S=k[3])!=null&&S.valid?0:1}return f=C(l),p=g[f]=m[f](l),{c(){e=_("p"),e.innerHTML=`Get your token from 
      <a href="https://dash.cloudflare.com/profile/api-tokens" target="_blank" class="svelte-16vnl3x">Cloudflare Dashboard</a>.`,t=b(),n=_("form"),s=_("div"),s.innerHTML='<label for="cf-token" class="svelte-16vnl3x">Cloudflare API Token</label> <input id="cf-token" type="password" placeholder="xxxxx" class="svelte-16vnl3x"/>',i=b(),_e(o.$$.fragment),a=b(),c=_("div"),p.c(),u(e,"class","description svelte-16vnl3x"),u(s,"class","form-group svelte-16vnl3x"),u(c,"class","token-status svelte-16vnl3x")},m(k,y){w(k,e,y),w(k,t,y),w(k,n,y),r(n,s),r(n,i),fe(o,n,null),w(k,a,y),w(k,c,y),g[f].m(c,null),d=!0,v||(h=le(n,"submit",l[16]),v=!0)},p(k,y){const S={};y[1]&16&&(S.$$scope={dirty:y,ctx:k}),o.$set(S);let D=f;f=C(k),f===D?g[f].p(k,y):(Te(),R(g[D],1,1,()=>{g[D]=null}),De(),p=g[f],p?p.p(k,y):(p=g[f]=m[f](k),p.c()),L(p,1),p.m(c,null))},i(k){d||(L(o.$$.fragment,k),L(p),d=!0)},o(k){R(o.$$.fragment,k),R(p),d=!1},d(k){k&&($(e),$(t),$(n),$(a),$(c)),pe(o),g[f].d(),v=!1,h()}}}function V1(l){let e;return{c(){e=T("Setup Domain")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Gr(l){let e,t=l[7].message+"",n;return{c(){e=_("div"),n=T(t),u(e,"class","result svelte-16vnl3x"),$e(e,"success",l[7].success),$e(e,"error",!l[7].success)},m(s,i){w(s,e,i),r(e,n)},p(s,i){i[0]&128&&t!==(t=s[7].message+"")&&j(n,t),i[0]&128&&$e(e,"success",s[7].success),i[0]&128&&$e(e,"error",!s[7].success)},d(s){s&&$(e)}}}function J1(l){let e,t,n,s,i,o,a,c,f,p,d,v,h,m,g,C,k,y,S,D,z,E,q,N;S=new Be({props:{variant:"primary",type:"submit",$$slots:{default:[V1]},$$scope:{ctx:l}}});let B=l[7]&&Gr(l);return{c(){e=_("p"),e.textContent='Point a domain to your server. With "Proxied" enabled, HTTPS works automatically.',t=b(),n=_("form"),s=_("div"),i=_("label"),i.textContent="Domain",o=b(),a=_("input"),c=b(),f=_("div"),p=_("label"),p.textContent="Server IP",d=b(),v=_("input"),h=b(),m=_("label"),g=_("input"),C=T(`
        Proxied (Cloudflare handles SSL)`),k=b(),y=_("div"),_e(S.$$.fragment),D=b(),B&&B.c(),z=Ie(),u(e,"class","description svelte-16vnl3x"),u(i,"for","domain-name"),u(i,"class","svelte-16vnl3x"),u(a,"id","domain-name"),u(a,"type","text"),u(a,"placeholder","api.example.com"),a.required=!0,u(a,"class","svelte-16vnl3x"),u(s,"class","form-group svelte-16vnl3x"),u(p,"for","domain-ip"),u(p,"class","svelte-16vnl3x"),u(v,"id","domain-ip"),u(v,"type","text"),u(v,"placeholder","1.2.3.4"),v.required=!0,u(v,"class","svelte-16vnl3x"),u(f,"class","form-group svelte-16vnl3x"),u(g,"type","checkbox"),u(g,"class","svelte-16vnl3x"),u(m,"class","checkbox-label svelte-16vnl3x"),u(y,"class","form-actions svelte-16vnl3x")},m(O,F){w(O,e,F),w(O,t,F),w(O,n,F),r(n,s),r(s,i),r(s,o),r(s,a),ne(a,l[4]),r(n,c),r(n,f),r(f,p),r(f,d),r(f,v),ne(v,l[5]),r(n,h),r(n,m),r(m,g),g.checked=l[6],r(m,C),r(n,k),r(n,y),fe(S,y,null),w(O,D,F),B&&B.m(O,F),w(O,z,F),E=!0,q||(N=[le(a,"input",l[23]),le(v,"input",l[24]),le(g,"change",l[25]),le(n,"submit",l[17])],q=!0)},p(O,F){F[0]&16&&a.value!==O[4]&&ne(a,O[4]),F[0]&32&&v.value!==O[5]&&ne(v,O[5]),F[0]&64&&(g.checked=O[6]);const J={};F[1]&16&&(J.$$scope={dirty:F,ctx:O}),S.$set(J),O[7]?B?B.p(O,F):(B=Gr(O),B.c(),B.m(z.parentNode,z)):B&&(B.d(1),B=null)},i(O){E||(L(S.$$.fragment,O),E=!0)},o(O){R(S.$$.fragment,O),E=!1},d(O){O&&($(e),$(t),$(n),$(D),$(z)),pe(S),B&&B.d(O),q=!1,Ue(N)}}}function Y1(l){let e;return{c(){e=T("Setup DNS Round-Robin")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Wr(l){let e,t=l[11].message+"",n;return{c(){e=_("div"),n=T(t),u(e,"class","result svelte-16vnl3x"),$e(e,"success",l[11].success),$e(e,"error",!l[11].success)},m(s,i){w(s,e,i),r(e,n)},p(s,i){i[0]&2048&&t!==(t=s[11].message+"")&&j(n,t),i[0]&2048&&$e(e,"success",s[11].success),i[0]&2048&&$e(e,"error",!s[11].success)},d(s){s&&$(e)}}}function K1(l){let e,t,n,s,i,o,a,c,f,p,d,v,h,m,g,C,k,y,S,D,z,E,q,N;S=new Be({props:{variant:"primary",type:"submit",$$slots:{default:[Y1]},$$scope:{ctx:l}}});let B=l[11]&&Wr(l);return{c(){e=_("p"),e.innerHTML=`Simple load distribution via multiple A records. Cloudflare rotates between IPs at DNS level.
      <strong>FREE</strong>, but no health checks.`,t=b(),n=_("form"),s=_("div"),i=_("label"),i.textContent="Domain",o=b(),a=_("input"),c=b(),f=_("div"),p=_("label"),p.textContent="Server IPs (comma-separated)",d=b(),v=_("input"),h=b(),m=_("label"),g=_("input"),C=T(`
        Proxied (SSL + CDN)`),k=b(),y=_("div"),_e(S.$$.fragment),D=b(),B&&B.c(),z=Ie(),u(e,"class","description svelte-16vnl3x"),u(i,"for","lb-domain"),u(i,"class","svelte-16vnl3x"),u(a,"id","lb-domain"),u(a,"type","text"),u(a,"placeholder","api.example.com"),a.required=!0,u(a,"class","svelte-16vnl3x"),u(s,"class","form-group svelte-16vnl3x"),u(p,"for","lb-ips"),u(p,"class","svelte-16vnl3x"),u(v,"id","lb-ips"),u(v,"type","text"),u(v,"placeholder","1.2.3.4, 5.6.7.8"),v.required=!0,u(v,"class","svelte-16vnl3x"),u(f,"class","form-group svelte-16vnl3x"),u(g,"type","checkbox"),u(g,"class","svelte-16vnl3x"),u(m,"class","checkbox-label svelte-16vnl3x"),u(y,"class","form-actions svelte-16vnl3x")},m(O,F){w(O,e,F),w(O,t,F),w(O,n,F),r(n,s),r(s,i),r(s,o),r(s,a),ne(a,l[8]),r(n,c),r(n,f),r(f,p),r(f,d),r(f,v),ne(v,l[9]),r(n,h),r(n,m),r(m,g),g.checked=l[10],r(m,C),r(n,k),r(n,y),fe(S,y,null),w(O,D,F),B&&B.m(O,F),w(O,z,F),E=!0,q||(N=[le(a,"input",l[26]),le(v,"input",l[27]),le(g,"change",l[28]),le(n,"submit",l[18])],q=!0)},p(O,F){F[0]&256&&a.value!==O[8]&&ne(a,O[8]),F[0]&512&&v.value!==O[9]&&ne(v,O[9]),F[0]&1024&&(g.checked=O[10]);const J={};F[1]&16&&(J.$$scope={dirty:F,ctx:O}),S.$set(J),O[11]?B?B.p(O,F):(B=Wr(O),B.c(),B.m(z.parentNode,z)):B&&(B.d(1),B=null)},i(O){E||(L(S.$$.fragment,O),E=!0)},o(O){R(S.$$.fragment,O),E=!1},d(O){O&&($(e),$(t),$(n),$(D),$(z)),pe(S),B&&B.d(O),q=!1,Ue(N)}}}function Q1(l){let e,t,n=ve(l[12]),s=[];for(let o=0;o<n.length;o+=1)s[o]=Vr(Hr(l,n,o));const i=o=>R(s[o],1,1,()=>{s[o]=null});return{c(){e=_("div");for(let o=0;o<s.length;o+=1)s[o].c();u(e,"class","task-list svelte-16vnl3x")},m(o,a){w(o,e,a);for(let c=0;c<s.length;c+=1)s[c]&&s[c].m(e,null);t=!0},p(o,a){if(a[0]&1052672){n=ve(o[12]);let c;for(c=0;c<n.length;c+=1){const f=Hr(o,n,c);s[c]?(s[c].p(f,a),L(s[c],1)):(s[c]=Vr(f),s[c].c(),L(s[c],1),s[c].m(e,null))}for(Te(),c=n.length;c<s.length;c+=1)i(c);De()}},i(o){if(!t){for(let a=0;a<n.length;a+=1)L(s[a]);t=!0}},o(o){s=s.filter(E1);for(let a=0;a<s.length;a+=1)R(s[a]);t=!1},d(o){o&&$(e),Ee(s,o)}}}function Z1(l){let e;return{c(){e=_("div"),e.textContent="No scheduled tasks",u(e,"class","empty-state svelte-16vnl3x")},m(t,n){w(t,e,n)},p:be,i:be,o:be,d(t){t&&$(e)}}}function X1(l){let e;return{c(){e=_("div"),e.textContent="Loading tasks...",u(e,"class","empty-state svelte-16vnl3x")},m(t,n){w(t,e,n)},p:be,i:be,o:be,d(t){t&&$(e)}}}function x1(l){let e=l[32].type+"",t;return{c(){t=T(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&4096&&e!==(e=n[32].type+"")&&j(t,e)},d(n){n&&$(t)}}}function ed(l){let e;return{c(){e=T("🗑️")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Vr(l){let e,t,n,s=l[32].name+"",i,o,a,c,f,p,d,v=l[32].interval+"",h,m,g,C,k,y;c=new Ke({props:{variant:"info",$$slots:{default:[x1]},$$scope:{ctx:l}}});function S(){return l[29](l[32])}return C=new Be({props:{variant:"danger",size:"sm",$$slots:{default:[ed]},$$scope:{ctx:l}}}),C.$on("click",S),{c(){e=_("div"),t=_("div"),n=_("div"),i=T(s),o=b(),a=_("div"),_e(c.$$.fragment),f=b(),p=_("span"),d=T("Every "),h=T(v),m=T(" min"),g=b(),_e(C.$$.fragment),k=b(),u(n,"class","task-name svelte-16vnl3x"),u(a,"class","task-meta svelte-16vnl3x"),u(t,"class","task-info"),u(e,"class","task-item svelte-16vnl3x")},m(D,z){w(D,e,z),r(e,t),r(t,n),r(n,i),r(t,o),r(t,a),fe(c,a,null),r(a,f),r(a,p),r(p,d),r(p,h),r(p,m),r(e,g),fe(C,e,null),r(e,k),y=!0},p(D,z){l=D,(!y||z[0]&4096)&&s!==(s=l[32].name+"")&&j(i,s);const E={};z[0]&4096|z[1]&16&&(E.$$scope={dirty:z,ctx:l}),c.$set(E),(!y||z[0]&4096)&&v!==(v=l[32].interval+"")&&j(h,v);const q={};z[1]&16&&(q.$$scope={dirty:z,ctx:l}),C.$set(q)},i(D){y||(L(c.$$.fragment,D),L(C.$$.fragment,D),y=!0)},o(D){R(c.$$.fragment,D),R(C.$$.fragment,D),y=!1},d(D){D&&$(e),pe(c),pe(C)}}}function td(l){let e,t,n,s,i,o;const a=[X1,Z1,Q1],c=[];function f(p,d){return p[13]?0:p[12].length===0?1:2}return n=f(l),s=c[n]=a[n](l),{c(){e=_("p"),e.textContent="Schedule recurring tasks like health checks, auto-restart, and backups.",t=b(),s.c(),i=Ie(),u(e,"class","description svelte-16vnl3x")},m(p,d){w(p,e,d),w(p,t,d),c[n].m(p,d),w(p,i,d),o=!0},p(p,d){let v=n;n=f(p),n===v?c[n].p(p,d):(Te(),R(c[v],1,1,()=>{c[v]=null}),De(),s=c[n],s?s.p(p,d):(s=c[n]=a[n](p),s.c()),L(s,1),s.m(i.parentNode,i))},i(p){o||(L(s),o=!0)},o(p){R(s),o=!1},d(p){p&&($(e),$(t),$(i)),c[n].d(p)}}}function ld(l){let e;return{c(){e=T("↻ Refresh")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function nd(l){let e,t;return e=new Be({props:{slot:"header",variant:"ghost",size:"sm",$$slots:{default:[ld]},$$scope:{ctx:l}}}),e.$on("click",l[19]),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const i={};s[1]&16&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(L(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){pe(e,n)}}}function sd(l){let e,t,n,s,i,o,a,c,f,p,d,v,h;return t=new ut({props:{title:"🎨 Appearance",$$slots:{default:[P1]},$$scope:{ctx:l}}}),s=new ut({props:{title:"⚙️ DigitalOcean Credentials",$$slots:{default:[F1]},$$scope:{ctx:l}}}),o=new ut({props:{title:"☁️ Cloudflare Credentials",$$slots:{default:[W1]},$$scope:{ctx:l}}}),c=new ut({props:{title:"🌐 Domain Setup",$$slots:{default:[J1]},$$scope:{ctx:l}}}),p=new ut({props:{title:"🌐 DNS Round-Robin (Cloudflare)",$$slots:{default:[K1]},$$scope:{ctx:l}}}),v=new ut({props:{title:"⏰ Task Scheduler",$$slots:{header:[nd],default:[td]},$$scope:{ctx:l}}}),{c(){e=_("div"),_e(t.$$.fragment),n=b(),_e(s.$$.fragment),i=b(),_e(o.$$.fragment),a=b(),_e(c.$$.fragment),f=b(),_e(p.$$.fragment),d=b(),_e(v.$$.fragment),u(e,"class","settings-page svelte-16vnl3x")},m(m,g){w(m,e,g),fe(t,e,null),r(e,n),fe(s,e,null),r(e,i),fe(o,e,null),r(e,a),fe(c,e,null),r(e,f),fe(p,e,null),r(e,d),fe(v,e,null),h=!0},p(m,g){const C={};g[0]&16384|g[1]&16&&(C.$$scope={dirty:g,ctx:m}),t.$set(C);const k={};g[0]&3|g[1]&16&&(k.$$scope={dirty:g,ctx:m}),s.$set(k);const y={};g[0]&12|g[1]&16&&(y.$$scope={dirty:g,ctx:m}),o.$set(y);const S={};g[0]&240|g[1]&16&&(S.$$scope={dirty:g,ctx:m}),c.$set(S);const D={};g[0]&3840|g[1]&16&&(D.$$scope={dirty:g,ctx:m}),p.$set(D);const z={};g[0]&12288|g[1]&16&&(z.$$scope={dirty:g,ctx:m}),v.$set(z)},i(m){h||(L(t.$$.fragment,m),L(s.$$.fragment,m),L(o.$$.fragment,m),L(c.$$.fragment,m),L(p.$$.fragment,m),L(v.$$.fragment,m),h=!0)},o(m){R(t.$$.fragment,m),R(s.$$.fragment,m),R(o.$$.fragment,m),R(c.$$.fragment,m),R(p.$$.fragment,m),R(v.$$.fragment,m),h=!1},d(m){m&&$(e),pe(t),pe(s),pe(o),pe(c),pe(p),pe(v)}}}function od(l,e,t){let n;_t(l,vn,ee=>t(14,n=ee));let s="",i=null,o="",a=null,c="",f="",p=!0,d=null,v="",h="",m=!0,g=null,C=[],k=!1;hl(()=>{y(),S(),N()});async function y(){const ee=Gt();if(ee){t(0,s=ee.substring(0,10)+"...");try{await Fe("GET","/infra/snapshots"),t(1,i={valid:!0})}catch{t(1,i={valid:!1})}}else t(1,i={valid:!1,missing:!0})}async function S(){const ee=gn();ee?(t(2,o=ee.substring(0,10)+"..."),t(3,a={valid:!0})):t(3,a={valid:!1,missing:!0})}async function D(ee){ee.preventDefault();const Q=ee.target.querySelector("input"),Z=Q.value;if(!Z){Ce.error("Token is required");return}Cu(Z),Q.value="",Ce.success("DigitalOcean token saved"),await y(),Kt.refresh(),Dn.refresh(),rn.refresh(),ml.refresh()}async function z(ee){ee.preventDefault();const Q=ee.target.querySelector("input"),Z=Q.value;if(!Z){Ce.error("Token is required");return}Su(Z),Q.value="",Ce.success("Cloudflare token saved"),await S()}async function E(ee){ee.preventDefault();try{const Q=await Fe("POST","/infra/cloudflare/domain",{domain:c,ip:f,proxied:p});t(7,d={success:!0,message:"Domain configured successfully"}),Ce.success("Domain setup complete")}catch(Q){t(7,d={success:!1,message:Q.message}),Ce.error(Q.message)}}async function q(ee){ee.preventDefault();try{const Q=h.split(",").map(oe=>oe.trim()).filter(Boolean),Z=await Fe("POST","/infra/cloudflare/lb",{domain:v,server_ips:Q,proxied:m});t(11,g={success:!0,message:`Created load balancer with ${Q.length} servers`}),Ce.success("Load balancer configured")}catch(Q){t(11,g={success:!1,message:Q.message}),Ce.error(Q.message)}}async function N(){t(13,k=!0);try{const ee=await Fe("GET","/infra/scheduler/tasks");t(12,C=ee.tasks||ee||[])}catch{t(12,C=[])}finally{t(13,k=!1)}}async function B(ee){if(confirm("Delete this scheduled task?"))try{await Fe("DELETE",`/infra/scheduler/tasks/${ee}`),Ce.success("Task deleted"),await N()}catch(Q){Ce.error(Q.message)}}function O(){n=pt(this),vn.set(n)}const F=()=>vn.set(n);function J(){c=this.value,t(4,c)}function H(){f=this.value,t(5,f)}function A(){p=this.checked,t(6,p)}function M(){v=this.value,t(8,v)}function P(){h=this.value,t(9,h)}function I(){m=this.checked,t(10,m)}return[s,i,o,a,c,f,p,d,v,h,m,g,C,k,n,D,z,E,q,N,B,O,F,J,H,A,M,P,I,ee=>B(ee.id)]}class id extends yt{constructor(e){super(),wt(this,e,od,sd,$t,{},null,[-1,-1])}}function Jr(l,e,t){const n=l.slice();n[21]=e[t];const s=n[1].filter(function(...c){return l[17](n[21],...c)});n[22]=s;const i=n[21].domain;n[23]=i;const o=n[22].length>1;return n[24]=o,n}function Yr(l,e,t){const n=l.slice();return n[27]=e[t],n}function Kr(l,e,t){const n=l.slice();return n[21]=e[t],n}function Qr(l,e,t){const n=l.slice();return n[32]=e[t],n}function rd(l){let e,t,n,s,i,o,a,c,f,p,d,v,h,m,g,C,k,y,S=l[1].length+"",D,z,E,q,N,B,O,F,J=l[7].length+"",H,A,M,P;const I=[pd,fd],V=[];function ee(Q,Z){return Q[11]?1:0}return v=ee(l),h=V[v]=I[v](l),{c(){e=_("div"),t=_("div"),n=_("div"),n.innerHTML='<span class="summary-icon svelte-odhywp">🔀</span> <span>Nginx Sidecar</span>',s=b(),i=_("div"),o=T(l[3]),a=T("/"),c=T(l[2]),f=b(),p=_("div"),p.textContent="servers with nginx",d=b(),h.c(),m=b(),g=_("div"),C=_("div"),C.innerHTML='<span class="summary-icon svelte-odhywp">🤖</span> <span>Node Agents</span>',k=b(),y=_("div"),D=T(S),z=b(),E=_("div"),E.textContent="servers monitored",q=b(),N=_("div"),B=_("div"),B.innerHTML='<span class="summary-icon svelte-odhywp">📦</span> <span>Services</span>',O=b(),F=_("div"),H=T(J),A=b(),M=_("div"),M.textContent="deployed services",u(n,"class","summary-header svelte-odhywp"),u(i,"class","summary-value svelte-odhywp"),u(p,"class","summary-label svelte-odhywp"),u(t,"class","summary-card svelte-odhywp"),$e(t,"ok",l[11]),$e(t,"warn",!l[11]),u(C,"class","summary-header svelte-odhywp"),u(y,"class","summary-value svelte-odhywp"),u(E,"class","summary-label svelte-odhywp"),u(g,"class","summary-card info svelte-odhywp"),u(B,"class","summary-header svelte-odhywp"),u(F,"class","summary-value svelte-odhywp"),u(M,"class","summary-label svelte-odhywp"),u(N,"class","summary-card info svelte-odhywp"),u(e,"class","summary-grid svelte-odhywp")},m(Q,Z){w(Q,e,Z),r(e,t),r(t,n),r(t,s),r(t,i),r(i,o),r(i,a),r(i,c),r(t,f),r(t,p),r(t,d),V[v].m(t,null),r(e,m),r(e,g),r(g,C),r(g,k),r(g,y),r(y,D),r(g,z),r(g,E),r(e,q),r(e,N),r(N,B),r(N,O),r(N,F),r(F,H),r(N,A),r(N,M),P=!0},p(Q,Z){(!P||Z[0]&8)&&j(o,Q[3]),(!P||Z[0]&4)&&j(c,Q[2]);let oe=v;v=ee(Q),v===oe?V[v].p(Q,Z):(Te(),R(V[oe],1,1,()=>{V[oe]=null}),De(),h=V[v],h?h.p(Q,Z):(h=V[v]=I[v](Q),h.c()),L(h,1),h.m(t,null)),(!P||Z[0]&2048)&&$e(t,"ok",Q[11]),(!P||Z[0]&2048)&&$e(t,"warn",!Q[11]),(!P||Z[0]&2)&&S!==(S=Q[1].length+"")&&j(D,S),(!P||Z[0]&128)&&J!==(J=Q[7].length+"")&&j(H,J)},i(Q){P||(L(h),P=!0)},o(Q){R(h),P=!1},d(Q){Q&&$(e),V[v].d()}}}function ad(l){let e;return{c(){e=_("div"),e.innerHTML='<p>No services deployed yet</p> <p class="hint svelte-odhywp">Deploy your first service to see the architecture</p>',u(e,"class","empty-state svelte-odhywp")},m(t,n){w(t,e,n)},p:be,i:be,o:be,d(t){t&&$(e)}}}function cd(l){let e,t,n,s,i,o;return{c(){e=_("div"),t=_("p"),n=T("Failed to load: "),s=T(l[9]),i=b(),o=_("p"),o.textContent="Check your connection and try refreshing",u(o,"class","hint svelte-odhywp"),u(e,"class","empty-state svelte-odhywp")},m(a,c){w(a,e,c),r(e,t),r(t,n),r(t,s),r(e,i),r(e,o)},p(a,c){c[0]&512&&j(s,a[9])},i:be,o:be,d(a){a&&$(e)}}}function ud(l){let e;return{c(){e=_("div"),e.textContent="Loading architecture...",u(e,"class","empty-state svelte-odhywp")},m(t,n){w(t,e,n)},p:be,i:be,o:be,d(t){t&&$(e)}}}function fd(l){let e;return{c(){e=_("div"),e.textContent="✅ All servers OK",u(e,"class","summary-ok svelte-odhywp")},m(t,n){w(t,e,n)},p:be,i:be,o:be,d(t){t&&$(e)}}}function pd(l){let e,t;return e=new Be({props:{variant:"warning",size:"sm",$$slots:{default:[_d]},$$scope:{ctx:l}}}),e.$on("click",l[13]),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const i={};s[0]&12|s[1]&16&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(L(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){pe(e,n)}}}function _d(l){let e,t=l[2]-l[3]+"",n,s;return{c(){e=T("🔧 Fix "),n=T(t),s=T(" server(s)")},m(i,o){w(i,e,o),w(i,n,o),w(i,s,o)},p(i,o){o[0]&12&&t!==(t=i[2]-i[3]+"")&&j(n,t)},d(i){i&&($(e),$(n),$(s))}}}function dd(l){let e,t,n,s;const i=[ud,cd,ad,rd],o=[];function a(c,f){return c[6]&&!c[10]?0:c[9]?1:c[7].length===0&&c[1].length===0?2:3}return e=a(l),t=o[e]=i[e](l),{c(){t.c(),n=Ie()},m(c,f){o[e].m(c,f),w(c,n,f),s=!0},p(c,f){let p=e;e=a(c),e===p?o[e].p(c,f):(Te(),R(o[p],1,1,()=>{o[p]=null}),De(),t=o[e],t?t.p(c,f):(t=o[e]=i[e](c),t.c()),L(t,1),t.m(n.parentNode,n))},i(c){s||(L(t),s=!0)},o(c){R(t),s=!1},d(c){c&&$(n),o[e].d(c)}}}function Zr(l){let e,t=l[32]+"",n,s;return{c(){e=_("option"),n=T(t),e.__value=s=l[32],ne(e,e.__value)},m(i,o){w(i,e,o),r(e,n)},p(i,o){o[0]&4096&&t!==(t=i[32]+"")&&j(n,t),o[0]&4096&&s!==(s=i[32])&&(e.__value=s,ne(e,e.__value))},d(i){i&&$(e)}}}function Xr(l){let e,t,n=sa(l[8])+"",s;return{c(){e=_("span"),t=T("Updated "),s=T(n),u(e,"class","last-updated svelte-odhywp")},m(i,o){w(i,e,o),r(e,t),r(e,s)},p(i,o){o[0]&256&&n!==(n=sa(i[8])+"")&&j(s,n)},d(i){i&&$(e)}}}function vd(l){let e;return{c(){e=T("↻ Refresh")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function md(l){let e,t,n,s,i,o,a,c,f,p,d,v,h,m,g,C=ve(l[12]||[]),k=[];for(let S=0;S<C.length;S+=1)k[S]=Zr(Qr(l,C,S));let y=l[8]&&Xr(l);return v=new Be({props:{variant:"ghost",size:"sm",$$slots:{default:[vd]},$$scope:{ctx:l}}}),v.$on("click",l[0]),{c(){e=_("div"),t=_("select"),n=_("option"),n.textContent="All Projects";for(let S=0;S<k.length;S+=1)k[S].c();s=b(),i=_("select"),o=_("option"),o.textContent="All Envs",a=_("option"),a.textContent="prod",c=_("option"),c.textContent="staging",f=_("option"),f.textContent="dev",p=b(),y&&y.c(),d=b(),_e(v.$$.fragment),n.__value="",ne(n,n.__value),u(t,"class","svelte-odhywp"),l[4]===void 0&&Xe(()=>l[15].call(t)),o.__value="",ne(o,o.__value),a.__value="prod",ne(a,a.__value),c.__value="staging",ne(c,c.__value),f.__value="dev",ne(f,f.__value),u(i,"class","svelte-odhywp"),l[5]===void 0&&Xe(()=>l[16].call(i)),u(e,"slot","header"),u(e,"class","filters svelte-odhywp")},m(S,D){w(S,e,D),r(e,t),r(t,n);for(let z=0;z<k.length;z+=1)k[z]&&k[z].m(t,null);ze(t,l[4],!0),r(e,s),r(e,i),r(i,o),r(i,a),r(i,c),r(i,f),ze(i,l[5],!0),r(e,p),y&&y.m(e,null),r(e,d),fe(v,e,null),h=!0,m||(g=[le(t,"change",l[15]),le(t,"change",l[14]),le(i,"change",l[16]),le(i,"change",l[14])],m=!0)},p(S,D){if(D[0]&4096){C=ve(S[12]||[]);let E;for(E=0;E<C.length;E+=1){const q=Qr(S,C,E);k[E]?k[E].p(q,D):(k[E]=Zr(q),k[E].c(),k[E].m(t,null))}for(;E<k.length;E+=1)k[E].d(1);k.length=C.length}D[0]&4112&&ze(t,S[4]),D[0]&32&&ze(i,S[5]),S[8]?y?y.p(S,D):(y=Xr(S),y.c(),y.m(e,d)):y&&(y.d(1),y=null);const z={};D[1]&16&&(z.$$scope={dirty:D,ctx:S}),v.$set(z)},i(S){h||(L(v.$$.fragment,S),h=!0)},o(S){R(v.$$.fragment,S),h=!1},d(S){S&&$(e),Ee(k,S),y&&y.d(),pe(v),m=!1,Ue(g)}}}function hd(l){let e,t,n=ve(l[7]),s=[];for(let o=0;o<n.length;o+=1)s[o]=xr(Kr(l,n,o));const i=o=>R(s[o],1,1,()=>{s[o]=null});return{c(){e=_("div");for(let o=0;o<s.length;o+=1)s[o].c();u(e,"class","list svelte-odhywp")},m(o,a){w(o,e,a);for(let c=0;c<s.length;c+=1)s[c]&&s[c].m(e,null);t=!0},p(o,a){if(a[0]&128){n=ve(o[7]);let c;for(c=0;c<n.length;c+=1){const f=Kr(o,n,c);s[c]?(s[c].p(f,a),L(s[c],1)):(s[c]=xr(f),s[c].c(),L(s[c],1),s[c].m(e,null))}for(Te(),c=n.length;c<s.length;c+=1)i(c);De()}},i(o){if(!t){for(let a=0;a<n.length;a+=1)L(s[a]);t=!0}},o(o){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)R(s[a]);t=!1},d(o){o&&$(e),Ee(s,o)}}}function gd(l){let e;return{c(){e=_("div"),e.textContent="No services found",u(e,"class","empty-panel svelte-odhywp")},m(t,n){w(t,e,n)},p:be,i:be,o:be,d(t){t&&$(e)}}}function bd(l){let e=l[21].type+"",t;return{c(){t=T(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&128&&e!==(e=n[21].type+"")&&j(t,e)},d(n){n&&$(t)}}}function xr(l){var M,P;let e,t,n=en(l[21])+"",s,i,o,a,c=l[21].service+"",f,p,d,v=l[21].project+"",h,m,g=l[21].env+"",C,k,y,S,D=(((M=l[21].servers)==null?void 0:M.length)||0)+"",z,E,q,N,B=(((P=l[21].ports)==null?void 0:P.join(", "))||"-")+"",O,F,J,H,A;return J=new Ke({props:{variant:l[21].type==="stateful"?"warning":"info",$$slots:{default:[bd]},$$scope:{ctx:l}}}),{c(){e=_("div"),t=_("div"),s=T(n),i=b(),o=_("div"),a=_("div"),f=T(c),p=b(),d=_("div"),h=T(v),m=T(" / "),C=T(g),k=b(),y=_("div"),S=_("div"),z=T(D),E=T(" server(s)"),q=b(),N=_("div"),O=T(B),F=b(),_e(J.$$.fragment),H=b(),u(t,"class","item-icon svelte-odhywp"),u(a,"class","item-name svelte-odhywp"),u(d,"class","item-meta svelte-odhywp"),u(o,"class","item-info svelte-odhywp"),u(N,"class","ports svelte-odhywp"),u(y,"class","item-stats svelte-odhywp"),u(e,"class","list-item svelte-odhywp")},m(I,V){w(I,e,V),r(e,t),r(t,s),r(e,i),r(e,o),r(o,a),r(a,f),r(o,p),r(o,d),r(d,h),r(d,m),r(d,C),r(e,k),r(e,y),r(y,S),r(S,z),r(S,E),r(y,q),r(y,N),r(N,O),r(e,F),fe(J,e,null),r(e,H),A=!0},p(I,V){var Q,Z;(!A||V[0]&128)&&n!==(n=en(I[21])+"")&&j(s,n),(!A||V[0]&128)&&c!==(c=I[21].service+"")&&j(f,c),(!A||V[0]&128)&&v!==(v=I[21].project+"")&&j(h,v),(!A||V[0]&128)&&g!==(g=I[21].env+"")&&j(C,g),(!A||V[0]&128)&&D!==(D=(((Q=I[21].servers)==null?void 0:Q.length)||0)+"")&&j(z,D),(!A||V[0]&128)&&B!==(B=(((Z=I[21].ports)==null?void 0:Z.join(", "))||"-")+"")&&j(O,B);const ee={};V[0]&128&&(ee.variant=I[21].type==="stateful"?"warning":"info"),V[0]&128|V[1]&16&&(ee.$$scope={dirty:V,ctx:I}),J.$set(ee)},i(I){A||(L(J.$$.fragment,I),A=!0)},o(I){R(J.$$.fragment,I),A=!1},d(I){I&&$(e),pe(J)}}}function kd(l){let e,t,n,s;const i=[gd,hd],o=[];function a(c,f){return c[7].length===0?0:1}return e=a(l),t=o[e]=i[e](l),{c(){t.c(),n=Ie()},m(c,f){o[e].m(c,f),w(c,n,f),s=!0},p(c,f){let p=e;e=a(c),e===p?o[e].p(c,f):(Te(),R(o[p],1,1,()=>{o[p]=null}),De(),t=o[e],t?t.p(c,f):(t=o[e]=i[e](c),t.c()),L(t,1),t.m(n.parentNode,n))},i(c){s||(L(t),s=!0)},o(c){R(t),s=!1},d(c){c&&$(n),o[e].d(c)}}}function $d(l){let e,t,n=ve(l[1]),s=[];for(let o=0;o<n.length;o+=1)s[o]=ea(Yr(l,n,o));const i=o=>R(s[o],1,1,()=>{s[o]=null});return{c(){e=_("div");for(let o=0;o<s.length;o+=1)s[o].c();u(e,"class","list svelte-odhywp")},m(o,a){w(o,e,a);for(let c=0;c<s.length;c+=1)s[c]&&s[c].m(e,null);t=!0},p(o,a){if(a[0]&2){n=ve(o[1]);let c;for(c=0;c<n.length;c+=1){const f=Yr(o,n,c);s[c]?(s[c].p(f,a),L(s[c],1)):(s[c]=ea(f),s[c].c(),L(s[c],1),s[c].m(e,null))}for(Te(),c=n.length;c<s.length;c+=1)i(c);De()}},i(o){if(!t){for(let a=0;a<n.length;a+=1)L(s[a]);t=!0}},o(o){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)R(s[a]);t=!1},d(o){o&&$(e),Ee(s,o)}}}function wd(l){let e;return{c(){e=_("div"),e.textContent="No servers found",u(e,"class","empty-panel svelte-odhywp")},m(t,n){w(t,e,n)},p:be,i:be,o:be,d(t){t&&$(e)}}}function yd(l){let e=tn(l[27])?"🔀 nginx":"⚠️ no nginx",t;return{c(){t=T(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&2&&e!==(e=tn(n[27])?"🔀 nginx":"⚠️ no nginx")&&j(t,e)},d(n){n&&$(t)}}}function Cd(l){let e,t=(l[27].agent_version||"?")+"",n;return{c(){e=T("🤖 v"),n=T(t)},m(s,i){w(s,e,i),w(s,n,i)},p(s,i){i[0]&2&&t!==(t=(s[27].agent_version||"?")+"")&&j(n,t)},d(s){s&&($(e),$(n))}}}function ea(l){let e,t,n=l[27].status==="online"?"🟢":"🔴",s,i,o,a,c=l[27].ip+"",f,p,d,v=(l[27].containers||0)+"",h,m,g,C,k,y,S,D,z;return k=new Ke({props:{variant:tn(l[27])?"success":"warning",$$slots:{default:[yd]},$$scope:{ctx:l}}}),S=new Ke({props:{variant:"info",$$slots:{default:[Cd]},$$scope:{ctx:l}}}),{c(){e=_("div"),t=_("div"),s=T(n),i=b(),o=_("div"),a=_("code"),f=T(c),p=b(),d=_("div"),h=T(v),m=T(" container(s)"),g=b(),C=_("div"),_e(k.$$.fragment),y=b(),_e(S.$$.fragment),D=b(),u(t,"class","item-icon svelte-odhywp"),u(a,"class","server-ip svelte-odhywp"),u(d,"class","item-meta svelte-odhywp"),u(o,"class","item-info svelte-odhywp"),u(C,"class","item-badges svelte-odhywp"),u(e,"class","list-item svelte-odhywp")},m(E,q){w(E,e,q),r(e,t),r(t,s),r(e,i),r(e,o),r(o,a),r(a,f),r(o,p),r(o,d),r(d,h),r(d,m),r(e,g),r(e,C),fe(k,C,null),r(C,y),fe(S,C,null),r(e,D),z=!0},p(E,q){(!z||q[0]&2)&&n!==(n=E[27].status==="online"?"🟢":"🔴")&&j(s,n),(!z||q[0]&2)&&c!==(c=E[27].ip+"")&&j(f,c),(!z||q[0]&2)&&v!==(v=(E[27].containers||0)+"")&&j(h,v);const N={};q[0]&2&&(N.variant=tn(E[27])?"success":"warning"),q[0]&2|q[1]&16&&(N.$$scope={dirty:q,ctx:E}),k.$set(N);const B={};q[0]&2|q[1]&16&&(B.$$scope={dirty:q,ctx:E}),S.$set(B)},i(E){z||(L(k.$$.fragment,E),L(S.$$.fragment,E),z=!0)},o(E){R(k.$$.fragment,E),R(S.$$.fragment,E),z=!1},d(E){E&&$(e),pe(k),pe(S)}}}function Sd(l){let e,t,n,s;const i=[wd,$d],o=[];function a(c,f){return c[1].length===0?0:1}return e=a(l),t=o[e]=i[e](l),{c(){t.c(),n=Ie()},m(c,f){o[e].m(c,f),w(c,n,f),s=!0},p(c,f){let p=e;e=a(c),e===p?o[e].p(c,f):(Te(),R(o[p],1,1,()=>{o[p]=null}),De(),t=o[e],t?t.p(c,f):(t=o[e]=i[e](c),t.c()),L(t,1),t.m(n.parentNode,n))},i(c){s||(L(t),s=!0)},o(c){R(t),s=!1},d(c){c&&$(n),o[e].d(c)}}}function Td(l){let e,t,n=ve(l[7]),s=[];for(let o=0;o<n.length;o+=1)s[o]=na(Jr(l,n,o));const i=o=>R(s[o],1,1,()=>{s[o]=null});return{c(){e=_("div");for(let o=0;o<s.length;o+=1)s[o].c();u(e,"class","traffic-flow svelte-odhywp")},m(o,a){w(o,e,a);for(let c=0;c<s.length;c+=1)s[c]&&s[c].m(e,null);t=!0},p(o,a){if(a[0]&130){n=ve(o[7]);let c;for(c=0;c<n.length;c+=1){const f=Jr(o,n,c);s[c]?(s[c].p(f,a),L(s[c],1)):(s[c]=na(f),s[c].c(),L(s[c],1),s[c].m(e,null))}for(Te(),c=n.length;c<s.length;c+=1)i(c);De()}},i(o){if(!t){for(let a=0;a<n.length;a+=1)L(s[a]);t=!0}},o(o){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)R(s[a]);t=!1},d(o){o&&$(e),Ee(s,o)}}}function Dd(l){let e;return{c(){e=_("div"),e.textContent="Deploy services to see traffic flow",u(e,"class","empty-panel svelte-odhywp")},m(t,n){w(t,e,n)},p:be,i:be,o:be,d(t){t&&$(e)}}}function qd(l){let e=l[21].env+"",t;return{c(){t=T(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&128&&e!==(e=n[21].env+"")&&j(t,e)},d(n){n&&$(t)}}}function ta(l){let e,t,n,s,i,o,a=l[21].domain+"",c,f,p;return{c(){e=_("div"),t=_("span"),t.textContent="☁️",n=b(),s=_("span"),s.textContent="Cloudflare",i=b(),o=_("span"),c=T(a),f=b(),p=_("div"),p.textContent="→",u(t,"class","svelte-odhywp"),u(s,"class","node-label svelte-odhywp"),u(o,"class","node-detail svelte-odhywp"),u(e,"class","flow-node cloudflare svelte-odhywp"),u(p,"class","flow-arrow svelte-odhywp")},m(d,v){w(d,e,v),r(e,t),r(e,n),r(e,s),r(e,i),r(e,o),r(o,c),w(d,f,v),w(d,p,v)},p(d,v){v[0]&128&&a!==(a=d[21].domain+"")&&j(c,a)},d(d){d&&($(e),$(f),$(p))}}}function zd(l){let e;return{c(){e=T("Server")},m(t,n){w(t,e,n)},p:be,d(t){t&&$(e)}}}function Ed(l){let e,t=l[22].length+"",n,s;return{c(){e=T("⚖️ Load Balanced ("),n=T(t),s=T(")")},m(i,o){w(i,e,o),w(i,n,o),w(i,s,o)},p(i,o){o[0]&130&&t!==(t=i[22].length+"")&&j(n,t)},d(i){i&&($(e),$(n),$(s))}}}function la(l){let e,t,n,s=l[21].domain+"",i,o;return{c(){e=_("span"),t=T("Domain: "),n=_("a"),i=T(s),u(n,"href",o="https://"+l[21].domain),u(n,"target","_blank"),u(n,"class","svelte-odhywp")},m(a,c){w(a,e,c),r(e,t),r(e,n),r(n,i)},p(a,c){c[0]&128&&s!==(s=a[21].domain+"")&&j(i,s),c[0]&128&&o!==(o="https://"+a[21].domain)&&u(n,"href",o)},d(a){a&&$(e)}}}function na(l){let e,t,n,s=en(l[21])+"",i,o,a,c=l[21].service+"",f,p,d,v,h,m,g,C,k,y,S,D,z,E,q,N,B,O,F,J,H,A,M,P,I=(l[21].host_port||"8000")+"",V,ee,Q,Z,oe,x,G,U=(l[21].container_name||l[21].id)+"",re,W,ae;d=new Ke({props:{variant:l[21].env==="prod"?"danger":"info",$$slots:{default:[qd]},$$scope:{ctx:l}}});let te=l[23]&&ta(l);function Y(X,K){return X[24]?Ed:zd}let de=Y(l),ce=de(l),ie=l[23]&&la(l);return{c(){e=_("div"),t=_("div"),n=_("span"),i=T(s),o=b(),a=_("span"),f=T(c),p=b(),_e(d.$$.fragment),v=b(),h=_("div"),te&&te.c(),m=b(),g=_("div"),C=_("span"),C.textContent="🖥️",k=b(),y=_("span"),ce.c(),S=b(),D=_("div"),D.textContent="→",z=b(),E=_("div"),E.innerHTML='<span class="svelte-odhywp">🔀</span> <span class="node-label svelte-odhywp">nginx</span> <span class="node-detail svelte-odhywp">:443</span>',q=b(),N=_("div"),N.textContent="→",B=b(),O=_("div"),F=_("span"),F.textContent="🐳",J=b(),H=_("span"),H.textContent="Container",A=b(),M=_("span"),P=T(":"),V=T(I),ee=b(),Q=_("div"),ie&&ie.c(),Z=b(),oe=_("span"),x=T("Container: "),G=_("code"),re=T(U),W=b(),u(n,"class","flow-icon svelte-odhywp"),u(a,"class","flow-name svelte-odhywp"),u(t,"class","flow-header svelte-odhywp"),u(C,"class","svelte-odhywp"),u(y,"class","node-label svelte-odhywp"),u(g,"class","flow-node server svelte-odhywp"),u(D,"class","flow-arrow svelte-odhywp"),u(E,"class","flow-node nginx svelte-odhywp"),u(N,"class","flow-arrow svelte-odhywp"),u(F,"class","svelte-odhywp"),u(H,"class","node-label svelte-odhywp"),u(M,"class","node-detail svelte-odhywp"),u(O,"class","flow-node container svelte-odhywp"),u(h,"class","flow-path svelte-odhywp"),u(G,"class","svelte-odhywp"),u(Q,"class","flow-details svelte-odhywp"),u(e,"class","flow-card svelte-odhywp")},m(X,K){w(X,e,K),r(e,t),r(t,n),r(n,i),r(t,o),r(t,a),r(a,f),r(t,p),fe(d,t,null),r(e,v),r(e,h),te&&te.m(h,null),r(h,m),r(h,g),r(g,C),r(g,k),r(g,y),ce.m(y,null),r(h,S),r(h,D),r(h,z),r(h,E),r(h,q),r(h,N),r(h,B),r(h,O),r(O,F),r(O,J),r(O,H),r(O,A),r(O,M),r(M,P),r(M,V),r(e,ee),r(e,Q),ie&&ie.m(Q,null),r(Q,Z),r(Q,oe),r(oe,x),r(oe,G),r(G,re),r(e,W),ae=!0},p(X,K){(!ae||K[0]&128)&&s!==(s=en(X[21])+"")&&j(i,s),(!ae||K[0]&128)&&c!==(c=X[21].service+"")&&j(f,c);const me={};K[0]&128&&(me.variant=X[21].env==="prod"?"danger":"info"),K[0]&128|K[1]&16&&(me.$$scope={dirty:K,ctx:X}),d.$set(me),X[23]?te?te.p(X,K):(te=ta(X),te.c(),te.m(h,m)):te&&(te.d(1),te=null),de===(de=Y(X))&&ce?ce.p(X,K):(ce.d(1),ce=de(X),ce&&(ce.c(),ce.m(y,null))),(!ae||K[0]&128)&&I!==(I=(X[21].host_port||"8000")+"")&&j(V,I),X[23]?ie?ie.p(X,K):(ie=la(X),ie.c(),ie.m(Q,Z)):ie&&(ie.d(1),ie=null),(!ae||K[0]&128)&&U!==(U=(X[21].container_name||X[21].id)+"")&&j(re,U)},i(X){ae||(L(d.$$.fragment,X),ae=!0)},o(X){R(d.$$.fragment,X),ae=!1},d(X){X&&$(e),pe(d),te&&te.d(),ce.d(),ie&&ie.d()}}}function Pd(l){let e,t,n,s;const i=[Dd,Td],o=[];function a(c,f){return c[7].length===0?0:1}return e=a(l),t=o[e]=i[e](l),{c(){t.c(),n=Ie()},m(c,f){o[e].m(c,f),w(c,n,f),s=!0},p(c,f){let p=e;e=a(c),e===p?o[e].p(c,f):(Te(),R(o[p],1,1,()=>{o[p]=null}),De(),t=o[e],t?t.p(c,f):(t=o[e]=i[e](c),t.c()),L(t,1),t.m(n.parentNode,n))},i(c){s||(L(t),s=!0)},o(c){R(t),s=!1},d(c){c&&$(n),o[e].d(c)}}}function Ld(l){let e;return{c(){e=_("span"),e.textContent="Request path from client to container",u(e,"slot","header"),u(e,"class","subtitle svelte-odhywp")},m(t,n){w(t,e,n)},p:be,d(t){t&&$(e)}}}function Nd(l){let e,t,n,s,i,o,a,c,f,p;return t=new ut({props:{title:"🏗️ Architecture View",$$slots:{header:[md],default:[dd]},$$scope:{ctx:l}}}),i=new ut({props:{title:"📦 Services",padding:!1,$$slots:{default:[kd]},$$scope:{ctx:l}}}),a=new ut({props:{title:"🖥️ Servers",padding:!1,$$slots:{default:[Sd]},$$scope:{ctx:l}}}),f=new ut({props:{title:"🚦 Traffic Flow",$$slots:{header:[Ld],default:[Pd]},$$scope:{ctx:l}}}),{c(){e=_("div"),_e(t.$$.fragment),n=b(),s=_("div"),_e(i.$$.fragment),o=b(),_e(a.$$.fragment),c=b(),_e(f.$$.fragment),u(s,"class","panels-grid svelte-odhywp"),u(e,"class","architecture-page svelte-odhywp")},m(d,v){w(d,e,v),fe(t,e,null),r(e,n),r(e,s),fe(i,s,null),r(s,o),fe(a,s,null),r(e,c),fe(f,e,null),p=!0},p(d,v){const h={};v[0]&8190|v[1]&16&&(h.$$scope={dirty:v,ctx:d}),t.$set(h);const m={};v[0]&128|v[1]&16&&(m.$$scope={dirty:v,ctx:d}),i.$set(m);const g={};v[0]&2|v[1]&16&&(g.$$scope={dirty:v,ctx:d}),a.$set(g);const C={};v[0]&130|v[1]&16&&(C.$$scope={dirty:v,ctx:d}),f.$set(C)},i(d){p||(L(t.$$.fragment,d),L(i.$$.fragment,d),L(a.$$.fragment,d),L(f.$$.fragment,d),p=!0)},o(d){R(t.$$.fragment,d),R(i.$$.fragment,d),R(a.$$.fragment,d),R(f.$$.fragment,d),p=!1},d(d){d&&$(e),pe(t),pe(i),pe(a),pe(f)}}}function sa(l){return l?l.toLocaleTimeString():""}function en(l){switch(l.type){case"stateful":return"🗄️";case"frontend":return"🌐";case"api":return"⚡";case"worker":return"⚙️";default:return"📦"}}function tn(l){return l.nginx_status==="running"}function Rd(l,e,t){let n,s,i,o;_t(l,qn,N=>t(12,o=N));let a="",c="",f=!1,p=[],d=[],v=[],h=null,m=null,g=!1,C=null;hl(()=>{g||(k(),C=setInterval(k,6e4))}),fu(()=>{C&&clearInterval(C)});async function k(){g||t(6,f=!0),t(9,m=null);try{const N=Gt();if(!N)throw new Error("DigitalOcean token required");const B=await Fe("POST","/infra/architecture",{project:a||null,environment:c||null,do_token:N});t(7,p=B.nodes||[]),t(1,d=B.servers||[]),v=B.infrastructure||[],t(8,h=new Date),t(10,g=!0)}catch(N){t(9,m=N.message),g||Ce.error("Failed to load architecture: "+N.message)}finally{t(6,f=!1)}}async function y(){const N=d.filter(B=>B.nginx_status!=="running").map(B=>B.ip);if(N.length===0){Ce.info("All servers already have nginx running");return}Ce.info(`Fixing ${N.length} server(s)...`);try{await Fe("POST","/infra/nginx/ensure",{server_ips:N}),Ce.success("Nginx sidecar installed"),architectureStore.refresh()}catch(B){Ce.error(B.message)}}function S(){k()}function D(){k()}function z(){a=pt(this),t(4,a)}function E(){c=pt(this),t(5,c)}const q=(N,B)=>{var O;return(O=N.servers)==null?void 0:O.includes(B.ip)};return l.$$.update=()=>{l.$$.dirty[0]&2&&t(3,n=d.filter(N=>N.nginx_status==="running").length),l.$$.dirty[0]&2&&t(2,s=d.length),l.$$.dirty[0]&12&&t(11,i=n===s)},[D,d,s,n,a,c,f,p,h,m,g,i,o,y,S,z,E,q]}class Md extends yt{constructor(e){super(),wt(this,e,Rd,Nd,$t,{refresh:0},null,[-1,-1])}get refresh(){return this.$$.ctx[0]}}function oa(l,e,t){const n=l.slice();return n[28]=e[t],n}function ia(l,e,t){const n=l.slice();return n[31]=e[t][0],n[32]=e[t][1],n}function ra(l,e,t){const n=l.slice();return n[28]=e[t],n[36]=t,n}function aa(l,e,t){const n=l.slice();return n[37]=e[t],n}function ca(l,e,t){const n=l.slice();return n[40]=e[t],n}function ua(l,e,t){const n=l.slice();return n[43]=e[t],n}function fa(l,e,t){const n=l.slice();return n[46]=e[t],n}function Ad(l){let e=l[0]?"⏳":"🔄",t,n;return{c(){t=T(e),n=T(" Refresh")},m(s,i){w(s,t,i),w(s,n,i)},p(s,i){i[0]&1&&e!==(e=s[0]?"⏳":"🔄")&&j(t,e)},d(s){s&&($(t),$(n))}}}function pa(l){let e,t,n,s,i,o,a,c,f,p,d,v,h;return t=new ut({props:{$$slots:{default:[Od]},$$scope:{ctx:l}}}),s=new ut({props:{$$slots:{default:[jd]},$$scope:{ctx:l}}}),o=new ut({props:{$$slots:{default:[Fd]},$$scope:{ctx:l}}}),c=new ut({props:{$$slots:{default:[Id]},$$scope:{ctx:l}}}),p=new ut({props:{$$slots:{default:[Bd]},$$scope:{ctx:l}}}),v=new ut({props:{$$slots:{default:[Ud]},$$scope:{ctx:l}}}),{c(){e=_("div"),_e(t.$$.fragment),n=b(),_e(s.$$.fragment),i=b(),_e(o.$$.fragment),a=b(),_e(c.$$.fragment),f=b(),_e(p.$$.fragment),d=b(),_e(v.$$.fragment),u(e,"class","overview-grid svelte-1h2u9b7")},m(m,g){w(m,e,g),fe(t,e,null),r(e,n),fe(s,e,null),r(e,i),fe(o,e,null),r(e,a),fe(c,e,null),r(e,f),fe(p,e,null),r(e,d),fe(v,e,null),h=!0},p(m,g){const C={};g[0]&2|g[1]&262144&&(C.$$scope={dirty:g,ctx:m}),t.$set(C);const k={};g[0]&2|g[1]&262144&&(k.$$scope={dirty:g,ctx:m}),s.$set(k);const y={};g[0]&2|g[1]&262144&&(y.$$scope={dirty:g,ctx:m}),o.$set(y);const S={};g[0]&2|g[1]&262144&&(S.$$scope={dirty:g,ctx:m}),c.$set(S);const D={};g[0]&2|g[1]&262144&&(D.$$scope={dirty:g,ctx:m}),p.$set(D);const z={};g[0]&2|g[1]&262144&&(z.$$scope={dirty:g,ctx:m}),v.$set(z)},i(m){h||(L(t.$$.fragment,m),L(s.$$.fragment,m),L(o.$$.fragment,m),L(c.$$.fragment,m),L(p.$$.fragment,m),L(v.$$.fragment,m),h=!0)},o(m){R(t.$$.fragment,m),R(s.$$.fragment,m),R(o.$$.fragment,m),R(c.$$.fragment,m),R(p.$$.fragment,m),R(v.$$.fragment,m),h=!1},d(m){m&&$(e),pe(t),pe(s),pe(o),pe(c),pe(p),pe(v)}}}function Od(l){let e,t,n,s,i=l[1].total_requests.toLocaleString()+"",o;return{c(){e=_("div"),t=_("span"),t.textContent="Total Requests",n=b(),s=_("span"),o=T(i),u(t,"class","label svelte-1h2u9b7"),u(s,"class","value svelte-1h2u9b7"),u(e,"class","stat svelte-1h2u9b7")},m(a,c){w(a,e,c),r(e,t),r(e,n),r(e,s),r(s,o)},p(a,c){c[0]&2&&i!==(i=a[1].total_requests.toLocaleString()+"")&&j(o,i)},d(a){a&&$(e)}}}function jd(l){let e,t,n,s,i=zt(l[1].avg_latency_ms)+"",o;return{c(){e=_("div"),t=_("span"),t.textContent="Avg Latency",n=b(),s=_("span"),o=T(i),u(t,"class","label svelte-1h2u9b7"),u(s,"class","value svelte-1h2u9b7"),u(e,"class","stat svelte-1h2u9b7")},m(a,c){w(a,e,c),r(e,t),r(e,n),r(e,s),r(s,o)},p(a,c){c[0]&2&&i!==(i=zt(a[1].avg_latency_ms)+"")&&j(o,i)},d(a){a&&$(e)}}}function Fd(l){let e,t,n,s,i=zt(l[1].p95_latency_ms)+"",o;return{c(){e=_("div"),t=_("span"),t.textContent="P95 Latency",n=b(),s=_("span"),o=T(i),u(t,"class","label svelte-1h2u9b7"),u(s,"class","value svelte-1h2u9b7"),u(e,"class","stat svelte-1h2u9b7")},m(a,c){w(a,e,c),r(e,t),r(e,n),r(e,s),r(s,o)},p(a,c){c[0]&2&&i!==(i=zt(a[1].p95_latency_ms)+"")&&j(o,i)},d(a){a&&$(e)}}}function Id(l){let e,t,n,s,i=l[1].error_rate+"",o,a;return{c(){e=_("div"),t=_("span"),t.textContent="Error Rate",n=b(),s=_("span"),o=T(i),a=T("%"),u(t,"class","label svelte-1h2u9b7"),u(s,"class","value svelte-1h2u9b7"),u(e,"class","stat svelte-1h2u9b7"),$e(e,"error",l[1].error_rate>5)},m(c,f){w(c,e,f),r(e,t),r(e,n),r(e,s),r(s,o),r(s,a)},p(c,f){f[0]&2&&i!==(i=c[1].error_rate+"")&&j(o,i),f[0]&2&&$e(e,"error",c[1].error_rate>5)},d(c){c&&$(e)}}}function Bd(l){let e,t,n,s,i=l[1].slow_count+"",o,a,c;return{c(){e=_("div"),t=_("span"),t.textContent="Slow Requests",n=b(),s=_("span"),o=T(i),u(t,"class","label svelte-1h2u9b7"),u(s,"class","value svelte-1h2u9b7"),u(e,"class","stat clickable svelte-1h2u9b7")},m(f,p){w(f,e,p),r(e,t),r(e,n),r(e,s),r(s,o),a||(c=[le(e,"click",l[15]),le(e,"keypress",l[15])],a=!0)},p(f,p){p[0]&2&&i!==(i=f[1].slow_count+"")&&j(o,i)},d(f){f&&$(e),a=!1,Ue(c)}}}function Ud(l){let e,t,n,s,i=l[1].error_count+"",o,a,c;return{c(){e=_("div"),t=_("span"),t.textContent="5xx Errors",n=b(),s=_("span"),o=T(i),u(t,"class","label svelte-1h2u9b7"),u(s,"class","value svelte-1h2u9b7"),u(e,"class","stat clickable svelte-1h2u9b7")},m(f,p){w(f,e,p),r(e,t),r(e,n),r(e,s),r(s,o),a||(c=[le(e,"click",l[18]),le(e,"keypress",l[19])],a=!0)},p(f,p){p[0]&2&&i!==(i=f[1].error_count+"")&&j(o,i)},d(f){f&&$(e),a=!1,Ue(c)}}}function _a(l){let e,t;return e=new ut({props:{$$slots:{default:[Hd]},$$scope:{ctx:l}}}),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const i={};s[0]&2|s[1]&262144&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(L(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){pe(e,n)}}}function da(l){let e,t,n=l[46].path+"",s,i,o,a=zt(l[46].avg_ms)+"",c,f,p,d=l[46].count+"",v,h;return{c(){e=_("tr"),t=_("td"),s=T(n),i=b(),o=_("td"),c=T(a),f=b(),p=_("td"),v=T(d),h=b(),u(t,"class","path svelte-1h2u9b7"),u(o,"class","svelte-1h2u9b7"),u(p,"class","svelte-1h2u9b7"),u(e,"class","svelte-1h2u9b7")},m(m,g){w(m,e,g),r(e,t),r(t,s),r(e,i),r(e,o),r(o,c),r(e,f),r(e,p),r(p,v),r(e,h)},p(m,g){g[0]&2&&n!==(n=m[46].path+"")&&j(s,n),g[0]&2&&a!==(a=zt(m[46].avg_ms)+"")&&j(c,a),g[0]&2&&d!==(d=m[46].count+"")&&j(v,d)},d(m){m&&$(e)}}}function Hd(l){let e,t,n,s,i,o,a=ve(l[1].slow_endpoints.slice(0,5)),c=[];for(let f=0;f<a.length;f+=1)c[f]=da(fa(l,a,f));return{c(){e=_("h3"),e.textContent="🐢 Slowest Endpoints",t=b(),n=_("table"),s=_("thead"),s.innerHTML='<tr class="svelte-1h2u9b7"><th class="svelte-1h2u9b7">Path</th> <th class="svelte-1h2u9b7">Avg</th> <th class="svelte-1h2u9b7">Count</th></tr>',i=b(),o=_("tbody");for(let f=0;f<c.length;f+=1)c[f].c();u(e,"class","svelte-1h2u9b7"),u(n,"class","mini-table svelte-1h2u9b7")},m(f,p){w(f,e,p),w(f,t,p),w(f,n,p),r(n,s),r(n,i),r(n,o);for(let d=0;d<c.length;d+=1)c[d]&&c[d].m(o,null)},p(f,p){if(p[0]&2){a=ve(f[1].slow_endpoints.slice(0,5));let d;for(d=0;d<a.length;d+=1){const v=fa(f,a,d);c[d]?c[d].p(v,p):(c[d]=da(v),c[d].c(),c[d].m(o,null))}for(;d<c.length;d+=1)c[d].d(1);c.length=a.length}},d(f){f&&($(e),$(t),$(n)),Ee(c,f)}}}function va(l){let e,t=l[43]+"",n,s,i=l[43]===l[6]?"(current)":"",o,a;return{c(){e=_("option"),n=T(t),s=b(),o=T(i),e.__value=a=l[43],ne(e,e.__value)},m(c,f){w(c,e,f),r(e,n),r(e,s),r(e,o)},p(c,f){f[0]&32&&t!==(t=c[43]+"")&&j(n,t),f[0]&96&&i!==(i=c[43]===c[6]?"(current)":"")&&j(o,i),f[0]&32&&a!==(a=c[43])&&(e.__value=a,ne(e,e.__value))},d(c){c&&$(e)}}}function Gd(l){let e;return{c(){e=T("Apply")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Wd(l){let e;return{c(){e=T("View")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function ma(l){var x;let e,t,n=za(l[40].timestamp)+"",s,i,o,a=(l[40].service_name||"-")+"",c,f,p,d,v=l[40].method+"",h,m,g,C,k=(((x=l[40].path)==null?void 0:x.length)>40?l[40].path.slice(0,40)+"...":l[40].path)+"",y,S,D,z,E,q=(l[40].status_code||"-")+"",N,B,O,F,J=zt(l[40].duration_ms)+"",H,A,M,P=l[40].span_count+"",I,V,ee,Q,Z;function oe(){return l[24](l[40])}return Q=new Be({props:{size:"small",$$slots:{default:[Wd]},$$scope:{ctx:l}}}),Q.$on("click",oe),{c(){var G;e=_("tr"),t=_("td"),s=T(n),i=b(),o=_("td"),c=T(a),f=b(),p=_("td"),d=_("span"),h=T(v),g=b(),C=_("td"),y=T(k),D=b(),z=_("td"),E=_("span"),N=T(q),O=b(),F=_("td"),H=T(J),A=b(),M=_("td"),I=T(P),V=b(),ee=_("td"),_e(Q.$$.fragment),u(t,"class","time svelte-1h2u9b7"),u(o,"class","service svelte-1h2u9b7"),u(d,"class",m="method "+((G=l[40].method)==null?void 0:G.toLowerCase())+" svelte-1h2u9b7"),u(p,"class","svelte-1h2u9b7"),u(C,"class","path svelte-1h2u9b7"),u(C,"title",S=l[40].path),u(E,"class",B="status status-"+ln(l[40].status_code)+" svelte-1h2u9b7"),u(z,"class","svelte-1h2u9b7"),u(F,"class","svelte-1h2u9b7"),$e(F,"slow",l[40].duration_ms>1e3),u(M,"class","svelte-1h2u9b7"),u(ee,"class","svelte-1h2u9b7"),u(e,"class","svelte-1h2u9b7"),$e(e,"error",l[40].status_code>=500),$e(e,"warning",l[40].status_code>=400&&l[40].status_code<500)},m(G,U){w(G,e,U),r(e,t),r(t,s),r(e,i),r(e,o),r(o,c),r(e,f),r(e,p),r(p,d),r(d,h),r(e,g),r(e,C),r(C,y),r(e,D),r(e,z),r(z,E),r(E,N),r(e,O),r(e,F),r(F,H),r(e,A),r(e,M),r(M,I),r(e,V),r(e,ee),fe(Q,ee,null),Z=!0},p(G,U){var W,ae;l=G,(!Z||U[0]&4)&&n!==(n=za(l[40].timestamp)+"")&&j(s,n),(!Z||U[0]&4)&&a!==(a=(l[40].service_name||"-")+"")&&j(c,a),(!Z||U[0]&4)&&v!==(v=l[40].method+"")&&j(h,v),(!Z||U[0]&4&&m!==(m="method "+((W=l[40].method)==null?void 0:W.toLowerCase())+" svelte-1h2u9b7"))&&u(d,"class",m),(!Z||U[0]&4)&&k!==(k=(((ae=l[40].path)==null?void 0:ae.length)>40?l[40].path.slice(0,40)+"...":l[40].path)+"")&&j(y,k),(!Z||U[0]&4&&S!==(S=l[40].path))&&u(C,"title",S),(!Z||U[0]&4)&&q!==(q=(l[40].status_code||"-")+"")&&j(N,q),(!Z||U[0]&4&&B!==(B="status status-"+ln(l[40].status_code)+" svelte-1h2u9b7"))&&u(E,"class",B),(!Z||U[0]&4)&&J!==(J=zt(l[40].duration_ms)+"")&&j(H,J),(!Z||U[0]&4)&&$e(F,"slow",l[40].duration_ms>1e3),(!Z||U[0]&4)&&P!==(P=l[40].span_count+"")&&j(I,P);const re={};U[1]&262144&&(re.$$scope={dirty:U,ctx:l}),Q.$set(re),(!Z||U[0]&4)&&$e(e,"error",l[40].status_code>=500),(!Z||U[0]&4)&&$e(e,"warning",l[40].status_code>=400&&l[40].status_code<500)},i(G){Z||(L(Q.$$.fragment,G),Z=!0)},o(G){R(Q.$$.fragment,G),Z=!1},d(G){G&&$(e),pe(Q)}}}function ha(l){let e;return{c(){e=_("tr"),e.innerHTML='<td colspan="8" class="empty svelte-1h2u9b7">No requests found</td>',u(e,"class","svelte-1h2u9b7")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Vd(l){let e,t,n,s,i,o,a,c,f,p=ve(l[2]),d=[];for(let m=0;m<p.length;m+=1)d[m]=ma(ca(l,p,m));const v=m=>R(d[m],1,1,()=>{d[m]=null});let h=l[2].length===0&&ha();return{c(){e=_("h3"),e.textContent="📋 Recent Requests",t=b(),n=_("div"),s=_("table"),i=_("thead"),i.innerHTML='<tr class="svelte-1h2u9b7"><th class="svelte-1h2u9b7">Time</th> <th class="svelte-1h2u9b7">Service</th> <th class="svelte-1h2u9b7">Method</th> <th class="svelte-1h2u9b7">Path</th> <th class="svelte-1h2u9b7">Status</th> <th class="svelte-1h2u9b7">Duration</th> <th class="svelte-1h2u9b7">Spans</th> <th class="svelte-1h2u9b7">Actions</th></tr>',o=b(),a=_("tbody");for(let m=0;m<d.length;m+=1)d[m].c();c=b(),h&&h.c(),u(e,"class","svelte-1h2u9b7"),u(s,"class","svelte-1h2u9b7"),u(n,"class","table-container svelte-1h2u9b7")},m(m,g){w(m,e,g),w(m,t,g),w(m,n,g),r(n,s),r(s,i),r(s,o),r(s,a);for(let C=0;C<d.length;C+=1)d[C]&&d[C].m(a,null);r(a,c),h&&h.m(a,null),f=!0},p(m,g){if(g[0]&8196){p=ve(m[2]);let C;for(C=0;C<p.length;C+=1){const k=ca(m,p,C);d[C]?(d[C].p(k,g),L(d[C],1)):(d[C]=ma(k),d[C].c(),L(d[C],1),d[C].m(a,c))}for(Te(),C=p.length;C<d.length;C+=1)v(C);De()}m[2].length===0?h||(h=ha(),h.c(),h.m(a,null)):h&&(h.d(1),h=null)},i(m){if(!f){for(let g=0;g<p.length;g+=1)L(d[g]);f=!0}},o(m){d=d.filter(Boolean);for(let g=0;g<d.length;g+=1)R(d[g]);f=!1},d(m){m&&($(e),$(t),$(n)),Ee(d,m),h&&h.d()}}}function ga(l){let e,t;return e=new xt({props:{open:!0,title:"Request Detail",width:"800px",$$slots:{default:[Jd]},$$scope:{ctx:l}}}),e.$on("close",l[25]),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const i={};s[0]&8|s[1]&262144&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(L(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){pe(e,n)}}}function ba(l){let e,t=l[3].service_name+"",n;return{c(){e=_("span"),n=T(t),u(e,"class","service-badge svelte-1h2u9b7")},m(s,i){w(s,e,i),r(e,n)},p(s,i){i[0]&8&&t!==(t=s[3].service_name+"")&&j(n,t)},d(s){s&&$(e)}}}function ka(l){let e,t,n=l[3].error+"",s;return{c(){e=_("div"),t=T("⚠️ "),s=T(n),u(e,"class","error-box svelte-1h2u9b7")},m(i,o){w(i,e,o),r(e,t),r(e,s)},p(i,o){o[0]&8&&n!==(n=i[3].error+"")&&j(s,n)},d(i){i&&$(e)}}}function $a(l){let e,t,n=l[3].user_id+"",s;return{c(){e=_("span"),t=T("User: "),s=T(n)},m(i,o){w(i,e,o),r(e,t),r(e,s)},p(i,o){o[0]&8&&n!==(n=i[3].user_id+"")&&j(s,n)},d(i){i&&$(e)}}}function wa(l){let e,t,n,s=l[37].name+"",i,o,a,c,f,p=zt(l[37].duration_ms)+"",d,v;return{c(){e=_("div"),t=_("div"),n=T("└─ "),i=T(s),a=b(),c=_("div"),f=_("div"),d=T(p),v=b(),u(t,"class","span-name svelte-1h2u9b7"),u(t,"title",o=l[37].name),u(f,"class","span-bar child-bar svelte-1h2u9b7"),Rt(f,"width",nn(l[37],l[3].total_ms)+"%"),$e(f,"error",l[37].error),u(c,"class","span-bar-container svelte-1h2u9b7"),u(e,"class","span-row child svelte-1h2u9b7")},m(h,m){w(h,e,m),r(e,t),r(t,n),r(t,i),r(e,a),r(e,c),r(c,f),r(f,d),r(e,v)},p(h,m){m[0]&8&&s!==(s=h[37].name+"")&&j(i,s),m[0]&8&&o!==(o=h[37].name)&&u(t,"title",o),m[0]&8&&p!==(p=zt(h[37].duration_ms)+"")&&j(d,p),m[0]&8&&Rt(f,"width",nn(h[37],h[3].total_ms)+"%"),m[0]&8&&$e(f,"error",h[37].error)},d(h){h&&$(e)}}}function ya(l){let e,t,n=l[28].name+"",s,i,o,a,c,f=zt(l[28].duration_ms)+"",p,d,v,h=ve(l[28].children||[]),m=[];for(let g=0;g<h.length;g+=1)m[g]=wa(aa(l,h,g));return{c(){e=_("div"),t=_("div"),s=T(n),o=b(),a=_("div"),c=_("div"),p=T(f),d=b();for(let g=0;g<m.length;g+=1)m[g].c();v=Ie(),u(t,"class","span-name svelte-1h2u9b7"),u(t,"title",i=l[28].name),u(c,"class","span-bar svelte-1h2u9b7"),Rt(c,"width",nn(l[28],l[3].total_ms)+"%"),$e(c,"error",l[28].error),u(a,"class","span-bar-container svelte-1h2u9b7"),u(e,"class","span-row svelte-1h2u9b7")},m(g,C){w(g,e,C),r(e,t),r(t,s),r(e,o),r(e,a),r(a,c),r(c,p),w(g,d,C);for(let k=0;k<m.length;k+=1)m[k]&&m[k].m(g,C);w(g,v,C)},p(g,C){if(C[0]&8&&n!==(n=g[28].name+"")&&j(s,n),C[0]&8&&i!==(i=g[28].name)&&u(t,"title",i),C[0]&8&&f!==(f=zt(g[28].duration_ms)+"")&&j(p,f),C[0]&8&&Rt(c,"width",nn(g[28],g[3].total_ms)+"%"),C[0]&8&&$e(c,"error",g[28].error),C[0]&8){h=ve(g[28].children||[]);let k;for(k=0;k<h.length;k+=1){const y=aa(g,h,k);m[k]?m[k].p(y,C):(m[k]=wa(y),m[k].c(),m[k].m(v.parentNode,v))}for(;k<m.length;k+=1)m[k].d(1);m.length=h.length}},d(g){g&&($(e),$(d),$(v)),Ee(m,g)}}}function Ca(l){let e,t,n,s=ve(l[3].spans),i=[];for(let o=0;o<s.length;o+=1)i[o]=qa(oa(l,s,o));return{c(){e=_("h4"),e.textContent="Span Details",t=b(),n=_("div");for(let o=0;o<i.length;o+=1)i[o].c();u(e,"class","svelte-1h2u9b7"),u(n,"class","spans-details svelte-1h2u9b7")},m(o,a){w(o,e,a),w(o,t,a),w(o,n,a);for(let c=0;c<i.length;c+=1)i[c]&&i[c].m(n,null)},p(o,a){if(a[0]&8){s=ve(o[3].spans);let c;for(c=0;c<s.length;c+=1){const f=oa(o,s,c);i[c]?i[c].p(f,a):(i[c]=qa(f),i[c].c(),i[c].m(n,null))}for(;c<i.length;c+=1)i[c].d(1);i.length=s.length}},d(o){o&&($(e),$(t),$(n)),Ee(i,o)}}}function Sa(l){let e;return{c(){e=_("span"),e.textContent="ERROR",u(e,"class","error-badge svelte-1h2u9b7")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Ta(l){let e,t,n=l[31]+"",s,i,o,a,c=(typeof l[32]=="object"?JSON.stringify(l[32]):l[32])+"",f;return{c(){e=_("div"),t=_("span"),s=T(n),i=T(":"),o=b(),a=_("span"),f=T(c),u(t,"class","key svelte-1h2u9b7"),u(a,"class","value svelte-1h2u9b7"),u(e,"class","attr svelte-1h2u9b7")},m(p,d){w(p,e,d),r(e,t),r(t,s),r(t,i),r(e,o),r(e,a),r(a,f)},p(p,d){d[0]&8&&n!==(n=p[31]+"")&&j(s,n),d[0]&8&&c!==(c=(typeof p[32]=="object"?JSON.stringify(p[32]):p[32])+"")&&j(f,c)},d(p){p&&$(e)}}}function Da(l){let e,t,n,s,i=l[28].error+"",o;return{c(){e=_("div"),t=_("span"),t.textContent="error:",n=b(),s=_("span"),o=T(i),u(t,"class","key svelte-1h2u9b7"),u(s,"class","value svelte-1h2u9b7"),u(e,"class","attr error svelte-1h2u9b7")},m(a,c){w(a,e,c),r(e,t),r(e,n),r(e,s),r(s,o)},p(a,c){c[0]&8&&i!==(i=a[28].error+"")&&j(o,i)},d(a){a&&$(e)}}}function qa(l){let e,t,n,s=l[28].kind+"",i,o,a=l[28].name+"",c,f,p=zt(l[28].duration_ms)+"",d,v,h,m,g,C,k=l[28].error&&Sa(),y=ve(Object.entries(l[28].attributes)),S=[];for(let z=0;z<y.length;z+=1)S[z]=Ta(ia(l,y,z));let D=l[28].error&&Da(l);return{c(){e=_("details"),t=_("summary"),n=_("span"),i=T(s),o=b(),c=T(a),f=T(" - "),d=T(p),v=b(),k&&k.c(),h=b(),m=_("div");for(let z=0;z<S.length;z+=1)S[z].c();g=b(),D&&D.c(),C=b(),u(n,"class","span-kind svelte-1h2u9b7"),u(t,"class","svelte-1h2u9b7"),u(m,"class","span-attrs svelte-1h2u9b7"),u(e,"class","svelte-1h2u9b7")},m(z,E){w(z,e,E),r(e,t),r(t,n),r(n,i),r(t,o),r(t,c),r(t,f),r(t,d),r(t,v),k&&k.m(t,null),r(e,h),r(e,m);for(let q=0;q<S.length;q+=1)S[q]&&S[q].m(m,null);r(m,g),D&&D.m(m,null),r(e,C)},p(z,E){if(E[0]&8&&s!==(s=z[28].kind+"")&&j(i,s),E[0]&8&&a!==(a=z[28].name+"")&&j(c,a),E[0]&8&&p!==(p=zt(z[28].duration_ms)+"")&&j(d,p),z[28].error?k||(k=Sa(),k.c(),k.m(t,null)):k&&(k.d(1),k=null),E[0]&8){y=ve(Object.entries(z[28].attributes));let q;for(q=0;q<y.length;q+=1){const N=ia(z,y,q);S[q]?S[q].p(N,E):(S[q]=Ta(N),S[q].c(),S[q].m(m,g))}for(;q<S.length;q+=1)S[q].d(1);S.length=y.length}z[28].error?D?D.p(z,E):(D=Da(z),D.c(),D.m(m,null)):D&&(D.d(1),D=null)},d(z){z&&$(e),k&&k.d(),Ee(S,z),D&&D.d()}}}function Jd(l){let e,t,n,s,i=l[3].method+"",o,a,c,f,p=l[3].path+"",d,v,h,m=l[3].status_code+"",g,C,k,y,S=zt(l[3].duration_ms)+"",D,z,E,q,N,B,O,F=l[3].request_id+"",J,H,A,M,P,I=l[3].timestamp+"",V,ee,Q,Z,oe=l[3].spans.length+"",x,G,U,re,W,ae=l[3].service_name&&ba(l),te=l[3].error&&ka(l),Y=l[3].user_id&&$a(l),de=ve(l[3].spans),ce=[];for(let X=0;X<de.length;X+=1)ce[X]=ya(ra(l,de,X));let ie=l[3].spans.length>0&&Ca(l);return{c(){var X;e=_("div"),t=_("div"),ae&&ae.c(),n=b(),s=_("span"),o=T(i),c=b(),f=_("span"),d=T(p),v=b(),h=_("span"),g=T(m),k=b(),y=_("span"),D=T(S),z=b(),te&&te.c(),E=b(),q=_("div"),N=_("span"),B=T("Request ID: "),O=_("code"),J=T(F),H=b(),Y&&Y.c(),A=b(),M=_("span"),P=T("Time: "),V=T(I),ee=b(),Q=_("h4"),Z=T("Timeline ("),x=T(oe),G=T(" spans)"),U=b(),re=_("div");for(let K=0;K<ce.length;K+=1)ce[K].c();W=b(),ie&&ie.c(),u(s,"class",a="method "+((X=l[3].method)==null?void 0:X.toLowerCase())+" svelte-1h2u9b7"),u(f,"class","path svelte-1h2u9b7"),u(h,"class",C="status status-"+ln(l[3].status_code)+" svelte-1h2u9b7"),u(y,"class","duration svelte-1h2u9b7"),u(t,"class","trace-header svelte-1h2u9b7"),u(O,"class","svelte-1h2u9b7"),u(q,"class","trace-meta svelte-1h2u9b7"),u(Q,"class","svelte-1h2u9b7"),u(re,"class","spans-timeline svelte-1h2u9b7"),u(e,"class","trace-detail svelte-1h2u9b7")},m(X,K){w(X,e,K),r(e,t),ae&&ae.m(t,null),r(t,n),r(t,s),r(s,o),r(t,c),r(t,f),r(f,d),r(t,v),r(t,h),r(h,g),r(t,k),r(t,y),r(y,D),r(e,z),te&&te.m(e,null),r(e,E),r(e,q),r(q,N),r(N,B),r(N,O),r(O,J),r(q,H),Y&&Y.m(q,null),r(q,A),r(q,M),r(M,P),r(M,V),r(e,ee),r(e,Q),r(Q,Z),r(Q,x),r(Q,G),r(e,U),r(e,re);for(let me=0;me<ce.length;me+=1)ce[me]&&ce[me].m(re,null);r(e,W),ie&&ie.m(e,null)},p(X,K){var me;if(X[3].service_name?ae?ae.p(X,K):(ae=ba(X),ae.c(),ae.m(t,n)):ae&&(ae.d(1),ae=null),K[0]&8&&i!==(i=X[3].method+"")&&j(o,i),K[0]&8&&a!==(a="method "+((me=X[3].method)==null?void 0:me.toLowerCase())+" svelte-1h2u9b7")&&u(s,"class",a),K[0]&8&&p!==(p=X[3].path+"")&&j(d,p),K[0]&8&&m!==(m=X[3].status_code+"")&&j(g,m),K[0]&8&&C!==(C="status status-"+ln(X[3].status_code)+" svelte-1h2u9b7")&&u(h,"class",C),K[0]&8&&S!==(S=zt(X[3].duration_ms)+"")&&j(D,S),X[3].error?te?te.p(X,K):(te=ka(X),te.c(),te.m(e,E)):te&&(te.d(1),te=null),K[0]&8&&F!==(F=X[3].request_id+"")&&j(J,F),X[3].user_id?Y?Y.p(X,K):(Y=$a(X),Y.c(),Y.m(q,A)):Y&&(Y.d(1),Y=null),K[0]&8&&I!==(I=X[3].timestamp+"")&&j(V,I),K[0]&8&&oe!==(oe=X[3].spans.length+"")&&j(x,oe),K[0]&8){de=ve(X[3].spans);let ge;for(ge=0;ge<de.length;ge+=1){const He=ra(X,de,ge);ce[ge]?ce[ge].p(He,K):(ce[ge]=ya(He),ce[ge].c(),ce[ge].m(re,null))}for(;ge<ce.length;ge+=1)ce[ge].d(1);ce.length=de.length}X[3].spans.length>0?ie?ie.p(X,K):(ie=Ca(X),ie.c(),ie.m(e,null)):ie&&(ie.d(1),ie=null)},d(X){X&&$(e),ae&&ae.d(),te&&te.d(),Y&&Y.d(),Ee(ce,X),ie&&ie.d()}}}function Yd(l){var W,ae;let e,t,n,s,i,o,a,c,f,p,d,v,h,m,g,C,k,y,S,D,z,E,q,N,B,O,F,J,H,A,M,P,I,V,ee,Q,Z;v=new Be({props:{disabled:l[0],$$slots:{default:[Ad]},$$scope:{ctx:l}}}),v.$on("click",l[14]);let oe=l[1]&&pa(l),x=((ae=(W=l[1])==null?void 0:W.slow_endpoints)==null?void 0:ae.length)>0&&_a(l),G=ve(l[5]),U=[];for(let te=0;te<G.length;te+=1)U[te]=va(ua(l,G,te));A=new Be({props:{size:"small",$$slots:{default:[Gd]},$$scope:{ctx:l}}}),A.$on("click",l[12]),P=new ut({props:{$$slots:{default:[Vd]},$$scope:{ctx:l}}});let re=l[4]&&l[3]&&ga(l);return{c(){e=_("div"),t=_("div"),n=_("h2"),n.textContent="🔍 Telemetry Dashboard",s=b(),i=_("div"),o=_("select"),a=_("option"),a.textContent="Last 1 hour",c=_("option"),c.textContent="Last 6 hours",f=_("option"),f.textContent="Last 24 hours",p=_("option"),p.textContent="Last 7 days",d=b(),_e(v.$$.fragment),h=b(),oe&&oe.c(),m=b(),x&&x.c(),g=b(),C=_("div"),k=_("select"),y=_("option"),y.textContent="All services";for(let te=0;te<U.length;te+=1)U[te].c();S=b(),D=_("input"),z=b(),E=_("input"),q=b(),N=_("select"),B=_("option"),B.textContent="All status",O=_("option"),O.textContent="2xx Success",F=_("option"),F.textContent="4xx Client Error",J=_("option"),J.textContent="5xx Server Error",H=b(),_e(A.$$.fragment),M=b(),_e(P.$$.fragment),I=b(),re&&re.c(),V=Ie(),u(n,"class","svelte-1h2u9b7"),a.__value=1,ne(a,a.__value),c.__value=6,ne(c,c.__value),f.__value=24,ne(f,f.__value),p.__value=168,ne(p,p.__value),u(o,"class","svelte-1h2u9b7"),l[8]===void 0&&Xe(()=>l[17].call(o)),u(i,"class","controls svelte-1h2u9b7"),u(t,"class","header svelte-1h2u9b7"),y.__value="",ne(y,y.__value),u(k,"title","Filter by service"),u(k,"class","svelte-1h2u9b7"),l[7]===void 0&&Xe(()=>l[20].call(k)),u(D,"type","text"),u(D,"placeholder","Path prefix (e.g., /api/v1/infra)"),u(D,"class","svelte-1h2u9b7"),u(E,"type","number"),u(E,"placeholder","Min ms"),u(E,"class","svelte-1h2u9b7"),B.__value="",ne(B,B.__value),O.__value="2xx",ne(O,O.__value),F.__value="4xx",ne(F,F.__value),J.__value="5xx",ne(J,J.__value),u(N,"class","svelte-1h2u9b7"),l[11]===void 0&&Xe(()=>l[23].call(N)),u(C,"class","filters svelte-1h2u9b7"),u(e,"class","telemetry svelte-1h2u9b7")},m(te,Y){w(te,e,Y),r(e,t),r(t,n),r(t,s),r(t,i),r(i,o),r(o,a),r(o,c),r(o,f),r(o,p),ze(o,l[8],!0),r(i,d),fe(v,i,null),r(e,h),oe&&oe.m(e,null),r(e,m),x&&x.m(e,null),r(e,g),r(e,C),r(C,k),r(k,y);for(let de=0;de<U.length;de+=1)U[de]&&U[de].m(k,null);ze(k,l[7],!0),r(C,S),r(C,D),ne(D,l[9]),r(C,z),r(C,E),ne(E,l[10]),r(C,q),r(C,N),r(N,B),r(N,O),r(N,F),r(N,J),ze(N,l[11],!0),r(C,H),fe(A,C,null),r(e,M),fe(P,e,null),w(te,I,Y),re&&re.m(te,Y),w(te,V,Y),ee=!0,Q||(Z=[le(o,"change",l[17]),le(o,"change",l[14]),le(k,"change",l[20]),le(k,"change",l[14]),le(D,"input",l[21]),le(D,"change",l[12]),le(E,"input",l[22]),le(E,"change",l[12]),le(N,"change",l[23]),le(N,"change",l[12])],Q=!0)},p(te,Y){var X,K;Y[0]&256&&ze(o,te[8]);const de={};if(Y[0]&1&&(de.disabled=te[0]),Y[0]&1|Y[1]&262144&&(de.$$scope={dirty:Y,ctx:te}),v.$set(de),te[1]?oe?(oe.p(te,Y),Y[0]&2&&L(oe,1)):(oe=pa(te),oe.c(),L(oe,1),oe.m(e,m)):oe&&(Te(),R(oe,1,1,()=>{oe=null}),De()),((K=(X=te[1])==null?void 0:X.slow_endpoints)==null?void 0:K.length)>0?x?(x.p(te,Y),Y[0]&2&&L(x,1)):(x=_a(te),x.c(),L(x,1),x.m(e,g)):x&&(Te(),R(x,1,1,()=>{x=null}),De()),Y[0]&96){G=ve(te[5]);let me;for(me=0;me<G.length;me+=1){const ge=ua(te,G,me);U[me]?U[me].p(ge,Y):(U[me]=va(ge),U[me].c(),U[me].m(k,null))}for(;me<U.length;me+=1)U[me].d(1);U.length=G.length}Y[0]&160&&ze(k,te[7]),Y[0]&512&&D.value!==te[9]&&ne(D,te[9]),Y[0]&1024&&Ht(E.value)!==te[10]&&ne(E,te[10]),Y[0]&2048&&ze(N,te[11]);const ce={};Y[1]&262144&&(ce.$$scope={dirty:Y,ctx:te}),A.$set(ce);const ie={};Y[0]&4|Y[1]&262144&&(ie.$$scope={dirty:Y,ctx:te}),P.$set(ie),te[4]&&te[3]?re?(re.p(te,Y),Y[0]&24&&L(re,1)):(re=ga(te),re.c(),L(re,1),re.m(V.parentNode,V)):re&&(Te(),R(re,1,1,()=>{re=null}),De())},i(te){ee||(L(v.$$.fragment,te),L(oe),L(x),L(A.$$.fragment,te),L(P.$$.fragment,te),L(re),ee=!0)},o(te){R(v.$$.fragment,te),R(oe),R(x),R(A.$$.fragment,te),R(P.$$.fragment,te),R(re),ee=!1},d(te){te&&($(e),$(I),$(V)),pe(v),oe&&oe.d(),x&&x.d(),Ee(U,te),pe(A),pe(P),re&&re.d(te),Q=!1,Ue(Z)}}}let Kd=50;function zt(l){return l?l<1e3?`${Math.round(l)}ms`:`${(l/1e3).toFixed(2)}s`:"-"}function za(l){return l?new Date(l).toLocaleTimeString():"-"}function ln(l){return l?l<300?"green":l<400?"blue":l<500?"yellow":"red":"gray"}function nn(l,e){return!l.duration_ms||!e?0:Math.max(2,l.duration_ms/e*100)}function Qd(l,e,t){let n=!0,s=null,i=[],o=null,a=!1,c=[],f="",p="",d=24,v="",h="",m="";async function g(){try{const M=await Fe("GET","/admin/telemetry/services");t(5,c=M.services||[]),t(6,f=M.current||"unknown")}catch(M){console.warn("Could not load services:",M),t(5,c=[])}}async function C(){try{const M=new URLSearchParams({hours:d.toString()});v&&M.set("path_prefix",v),p&&M.set("service_name",p),t(1,s=await Fe("GET",`/admin/telemetry/overview?${M}`))}catch(M){Ce.error(`Failed to load overview: ${M.message}`)}}async function k(){try{const M=new URLSearchParams({hours:d.toString(),limit:Kd.toString()});v&&M.set("path_prefix",v),h&&M.set("min_duration_ms",h),m&&M.set("status_class",m),p&&M.set("service_name",p),t(2,i=await Fe("GET",`/admin/telemetry/requests?${M}`))}catch(M){Ce.error(`Failed to load requests: ${M.message}`)}}async function y(M){try{t(3,o=await Fe("GET",`/admin/telemetry/requests/${M}`)),t(4,a=!0)}catch(P){Ce.error(`Failed to load trace: ${P.message}`)}}async function S(){t(0,n=!0),await Promise.all([g(),C(),k()]),t(0,n=!1)}async function D(){try{const M=new URLSearchParams({hours:d.toString(),threshold_ms:"1000",limit:"50"});p&&M.set("service_name",p),t(2,i=await Fe("GET",`/admin/telemetry/slow?${M}`)),Ce.info("Showing slow requests (>1s)")}catch(M){Ce.error(`Failed to load slow requests: ${M.message}`)}}async function z(M="5xx"){try{const P=new URLSearchParams({hours:d.toString(),status_class:M,limit:"50"});p&&P.set("service_name",p),t(2,i=await Fe("GET",`/admin/telemetry/errors?${P}`)),Ce.info(`Showing ${M} errors`)}catch(P){Ce.error(`Failed to load errors: ${P.message}`)}}hl(()=>{S()});function E(){d=pt(this),t(8,d)}const q=()=>z("5xx"),N=()=>z("5xx");function B(){p=pt(this),t(7,p),t(5,c)}function O(){v=this.value,t(9,v)}function F(){h=Ht(this.value),t(10,h)}function J(){m=pt(this),t(11,m)}return[n,s,i,o,a,c,f,p,d,v,h,m,k,y,S,D,z,E,q,N,B,O,F,J,M=>y(M.request_id),()=>t(4,a=!1)]}class Zd extends yt{constructor(e){super(),wt(this,e,Qd,Yd,$t,{},null,[-1,-1])}}function Xd(l){let e,t,n,s,i,o,a,c,f,p,d,v,h,m,g,C,k,y,S,D,z,E,q;n=new ef({}),i=new nf({props:{tabs:l[9],active:l[0],scrollable:!0}}),i.$on("change",l[12]);let N=l[8]&&Ea(l),B={};p=new rp({props:B}),l[15](p),h=new v_({});let O={};C=new d1({props:O}),l[16](C);let F={};S=new Md({props:F}),l[17](S);const J=[nv,lv,tv],H=[];function A(M,P){return M[0]==="services"?0:M[0]==="settings"?1:M[0]==="telemetry"&&M[1]?2:-1}return~(z=A(l))&&(E=H[z]=J[z](l)),{c(){e=_("div"),t=_("div"),_e(n.$$.fragment),s=b(),_e(i.$$.fragment),o=b(),N&&N.c(),a=b(),c=_("main"),f=_("div"),_e(p.$$.fragment),d=b(),v=_("div"),_e(h.$$.fragment),m=b(),g=_("div"),_e(C.$$.fragment),k=b(),y=_("div"),_e(S.$$.fragment),D=b(),E&&E.c(),u(f,"class","svelte-p7g5el"),$e(f,"hidden",l[0]!=="infra"),u(v,"class","svelte-p7g5el"),$e(v,"hidden",l[0]!=="deploy"),u(g,"class","svelte-p7g5el"),$e(g,"hidden",l[0]!=="deployments"),u(y,"class","svelte-p7g5el"),$e(y,"hidden",l[0]!=="architecture"),u(c,"class","content glass svelte-p7g5el"),u(t,"class","container svelte-p7g5el"),u(e,"class","app svelte-p7g5el")},m(M,P){w(M,e,P),r(e,t),fe(n,t,null),r(t,s),fe(i,t,null),r(t,o),N&&N.m(t,null),r(t,a),r(t,c),r(c,f),fe(p,f,null),r(c,d),r(c,v),fe(h,v,null),r(c,m),r(c,g),fe(C,g,null),r(c,k),r(c,y),fe(S,y,null),r(c,D),~z&&H[z].m(c,null),q=!0},p(M,P){const I={};P&512&&(I.tabs=M[9]),P&1&&(I.active=M[0]),i.$set(I),M[8]?N?(N.p(M,P),P&256&&L(N,1)):(N=Ea(M),N.c(),L(N,1),N.m(t,a)):N&&(Te(),R(N,1,1,()=>{N=null}),De());const V={};p.$set(V),(!q||P&1)&&$e(f,"hidden",M[0]!=="infra"),(!q||P&1)&&$e(v,"hidden",M[0]!=="deploy");const ee={};C.$set(ee),(!q||P&1)&&$e(g,"hidden",M[0]!=="deployments");const Q={};S.$set(Q),(!q||P&1)&&$e(y,"hidden",M[0]!=="architecture");let Z=z;z=A(M),z!==Z&&(E&&(Te(),R(H[Z],1,1,()=>{H[Z]=null}),De()),~z?(E=H[z],E||(E=H[z]=J[z](M),E.c()),L(E,1),E.m(c,null)):E=null)},i(M){q||(L(n.$$.fragment,M),L(i.$$.fragment,M),L(N),L(p.$$.fragment,M),L(h.$$.fragment,M),L(C.$$.fragment,M),L(S.$$.fragment,M),L(E),q=!0)},o(M){R(n.$$.fragment,M),R(i.$$.fragment,M),R(N),R(p.$$.fragment,M),R(h.$$.fragment,M),R(C.$$.fragment,M),R(S.$$.fragment,M),R(E),q=!1},d(M){M&&$(e),pe(n),pe(i),N&&N.d(),l[15](null),pe(p),pe(h),l[16](null),pe(C),l[17](null),pe(S),~z&&H[z].d()}}}function xd(l){let e,t;return e=new Hu({props:{title:"Deploy Dashboard",subtitle:"Sign in to manage your infrastructure"}}),e.$on("success",l[11]),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p:be,i(n){t||(L(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){pe(e,n)}}}function ev(l){let e;return{c(){e=_("div"),e.innerHTML='<div class="spinner svelte-p7g5el"></div>',u(e,"class","loading-screen svelte-p7g5el")},m(t,n){w(t,e,n)},p:be,i:be,o:be,d(t){t&&$(e)}}}function Ea(l){let e,t;return e=new rf({props:{showTail:l[7],showContainer:l[6]}}),e.$on("change",l[13]),e.$on("refresh",l[14]),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const i={};s&128&&(i.showTail=n[7]),s&64&&(i.showContainer=n[6]),e.$set(i)},i(n){t||(L(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){pe(e,n)}}}function tv(l){let e,t;return e=new Zd({}),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},i(n){t||(L(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){pe(e,n)}}}function lv(l){let e,t;return e=new id({}),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},i(n){t||(L(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){pe(e,n)}}}function nv(l){let e,t;return e=new z1({}),{c(){_e(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},i(n){t||(L(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){pe(e,n)}}}function sv(l){let e,t,n,s,i,o;e=new Vu({});const a=[ev,xd,Xd],c=[];function f(p,d){return p[2]?!p[10].token||!p[10].user?1:2:0}return n=f(l),s=c[n]=a[n](l),{c(){_e(e.$$.fragment),t=b(),s.c(),i=Ie()},m(p,d){fe(e,p,d),w(p,t,d),c[n].m(p,d),w(p,i,d),o=!0},p(p,[d]){let v=n;n=f(p),n===v?c[n].p(p,d):(Te(),R(c[v],1,1,()=>{c[v]=null}),De(),s=c[n],s?s.p(p,d):(s=c[n]=a[n](p),s.c()),L(s,1),s.m(i.parentNode,i))},i(p){o||(L(e.$$.fragment,p),L(s),o=!0)},o(p){R(e.$$.fragment,p),R(s),o=!1},d(p){p&&($(t),$(i)),pe(e,p),c[n].d(p)}}}function ov(l,e,t){let n,s,i,o,a,c,f;_t(l,Rn,N=>t(0,a=N)),_t(l,yu,N=>t(1,c=N)),_t(l,Nt,N=>t(10,f=N));let p=!1,d,v,h;const m=[{id:"infra",label:"Infrastructure"},{id:"deploy",label:"Deploy"},{id:"deployments",label:"Deployments"},{id:"architecture",label:"Architecture"},{id:"services",label:"Services"},{id:"settings",label:"Settings"}],g=[{id:"telemetry",label:"🔍 Telemetry",admin:!0}];hl(async()=>{const N=await qu();t(2,p=!0),N&&C()});function C(){Kt.refresh(),Dn.refresh(),rn.refresh(),ml.refresh()}async function k(N){const{user:B,token:O}=N.detail;Nt.setToken(O),Nt.setUser(B),C()}function y(N){Rn.set(N.detail)}function S(){D()}function D(){switch(a){case"infra":d==null||d.refresh(),Kt.refresh();break;case"deployments":v==null||v.refresh();break;case"architecture":h==null||h.refresh();break}}function z(N){Lt[N?"unshift":"push"](()=>{d=N,t(3,d)})}function E(N){Lt[N?"unshift":"push"](()=>{v=N,t(4,v)})}function q(N){Lt[N?"unshift":"push"](()=>{h=N,t(5,h)})}return l.$$.update=()=>{l.$$.dirty&2&&t(9,n=c?[...m,...g]:m),l.$$.dirty&1&&t(8,s=a==="deployments")},t(7,i=!1),t(6,o=!1),[a,c,p,d,v,h,o,i,s,n,f,k,y,S,D,z,E,q]}class iv extends yt{constructor(e){super(),wt(this,e,ov,sv,$t,{})}}new iv({target:document.getElementById("app")});
