var _a=Object.defineProperty;var da=(l,e,t)=>e in l?_a(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t;var El=(l,e,t)=>da(l,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();function pe(){}const Rr=l=>l;function ma(l,e){for(const t in e)l[t]=e[t];return l}function Ar(l){return l()}function In(){return Object.create(null)}function He(l){l.forEach(Ar)}function $n(l){return typeof l=="function"}function zt(l,e){return l!=l?e==e:l!==e||l&&typeof l=="object"||typeof l=="function"}function va(l){return Object.keys(l).length===0}function Pn(l,...e){if(l==null){for(const n of e)n(void 0);return pe}const t=l.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function en(l){let e;return Pn(l,t=>e=t)(),e}function ct(l,e,t){l.$$.on_destroy.push(Pn(e,t))}function yl(l,e,t,n){if(l){const s=Or(l,e,t,n);return l[0](s)}}function Or(l,e,t,n){return l[1]&&n?ma(t.ctx.slice(),l[1](n(e))):t.ctx}function Cl(l,e,t,n){if(l[2]&&n){const s=l[2](n(t));if(e.dirty===void 0)return s;if(typeof s=="object"){const i=[],o=Math.max(e.dirty.length,s.length);for(let a=0;a<o;a+=1)i[a]=e.dirty[a]|s[a];return i}return e.dirty|s}return e.dirty}function Sl(l,e,t,n,s,i){if(s){const o=Or(e,t,n,i);l.p(o,s)}}function zl(l){if(l.ctx.length>32){const e=[],t=l.ctx.length/32;for(let n=0;n<t;n++)e[n]=-1;return e}return-1}function jr(l){const e={};for(const t in l)e[t]=!0;return e}function Bn(l){const e=typeof l=="string"&&l.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[l,"px"]}const Fr=typeof window<"u";let ha=Fr?()=>window.performance.now():()=>Date.now(),Nn=Fr?l=>requestAnimationFrame(l):pe;const Gl=new Set;function Ir(l){Gl.forEach(e=>{e.c(l)||(Gl.delete(e),e.f())}),Gl.size!==0&&Nn(Ir)}function ga(l){let e;return Gl.size===0&&Nn(Ir),{promise:new Promise(t=>{Gl.add(e={c:l,f:t})}),abort(){Gl.delete(e)}}}const Br=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function r(l,e){l.appendChild(e)}function Ur(l){if(!l)return document;const e=l.getRootNode?l.getRootNode():l.ownerDocument;return e&&e.host?e:l.ownerDocument}function ba(l){const e=_("style");return e.textContent="/* empty */",ka(Ur(l),e),e.sheet}function ka(l,e){return r(l.head||l,e),e.sheet}function w(l,e,t){l.insertBefore(e,t||null)}function $(l){l.parentNode&&l.parentNode.removeChild(l)}function Re(l,e){for(let t=0;t<l.length;t+=1)l[t]&&l[t].d(e)}function _(l){return document.createElement(l)}function $a(l){return document.createElementNS("http://www.w3.org/2000/svg",l)}function z(l){return document.createTextNode(l)}function b(){return z(" ")}function Ge(){return z("")}function Z(l,e,t,n){return l.addEventListener(e,t,n),()=>l.removeEventListener(e,t,n)}function wa(l){return function(e){return e.preventDefault(),l.call(this,e)}}function Un(l){return function(e){return e.stopPropagation(),l.call(this,e)}}function u(l,e,t){t==null?l.removeAttribute(e):l.getAttribute(e)!==t&&l.setAttribute(e,t)}function Hr(l){let e;return{p(...t){e=t,e.forEach(n=>l.push(n))},r(){e.forEach(t=>l.splice(l.indexOf(t),1))}}}function Pl(l){return l===""?null:+l}function ya(l){return Array.from(l.childNodes)}function B(l,e){e=""+e,l.data!==e&&(l.data=e)}function ee(l,e){l.value=e??""}function ml(l,e,t,n){t==null?l.style.removeProperty(e):l.style.setProperty(e,t,"")}function Pe(l,e,t){for(let n=0;n<l.options.length;n+=1){const s=l.options[n];if(s.__value===e){s.selected=!0;return}}(!t||e!==void 0)&&(l.selectedIndex=-1)}function St(l){const e=l.querySelector(":checked");return e&&e.__value}function Ce(l,e,t){l.classList.toggle(e,!!t)}function Gr(l,e,{bubbles:t=!1,cancelable:n=!1}={}){return new CustomEvent(l,{detail:e,bubbles:t,cancelable:n})}class Ca{constructor(e=!1){El(this,"is_svg",!1);El(this,"e");El(this,"n");El(this,"t");El(this,"a");this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,n=null){this.e||(this.is_svg?this.e=$a(t.nodeName):this.e=_(t.nodeType===11?"TEMPLATE":t.nodeName),this.t=t.tagName!=="TEMPLATE"?t:t.content,this.c(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)w(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach($)}}const vn=new Map;let hn=0;function Sa(l){let e=5381,t=l.length;for(;t--;)e=(e<<5)-e^l.charCodeAt(t);return e>>>0}function za(l,e){const t={stylesheet:ba(e),rules:{}};return vn.set(l,t),t}function Hn(l,e,t,n,s,i,o,a=0){const c=16.666/n;let p=`{
`;for(let S=0;S<=1;S+=c){const y=e+(t-e)*i(S);p+=S*100+`%{${o(y,1-y)}}
`}const f=p+`100% {${o(t,1-t)}}
}`,d=`__svelte_${Sa(f)}_${a}`,m=Ur(l),{stylesheet:v,rules:g}=vn.get(m)||za(m,l);g[d]||(g[d]=!0,v.insertRule(`@keyframes ${d} ${f}`,v.cssRules.length));const h=l.style.animation||"";return l.style.animation=`${h?`${h}, `:""}${d} ${n}ms linear ${s}ms 1 both`,hn+=1,d}function Da(l,e){const t=(l.style.animation||"").split(", "),n=t.filter(e?i=>i.indexOf(e)<0:i=>i.indexOf("__svelte")===-1),s=t.length-n.length;s&&(l.style.animation=n.join(", "),hn-=s,hn||Ta())}function Ta(){Nn(()=>{hn||(vn.forEach(l=>{const{ownerNode:e}=l.stylesheet;e&&$(e)}),vn.clear())})}let Xl;function Zl(l){Xl=l}function Ln(){if(!Xl)throw new Error("Function called outside component initialization");return Xl}function tn(l){Ln().$$.on_mount.push(l)}function qa(l){Ln().$$.on_destroy.push(l)}function ln(){const l=Ln();return(e,t,{cancelable:n=!1}={})=>{const s=l.$$.callbacks[e];if(s){const i=Gr(e,t,{cancelable:n});return s.slice().forEach(o=>{o.call(l,i)}),!i.defaultPrevented}return!0}}function gn(l,e){const t=l.$$.callbacks[e.type];t&&t.slice().forEach(n=>n.call(this,e))}const Bl=[],Kt=[];let Wl=[];const Dn=[],Ea=Promise.resolve();let Tn=!1;function Pa(){Tn||(Tn=!0,Ea.then(Wr))}function lt(l){Wl.push(l)}function Nl(l){Dn.push(l)}const Cn=new Set;let jl=0;function Wr(){if(jl!==0)return;const l=Xl;do{try{for(;jl<Bl.length;){const e=Bl[jl];jl++,Zl(e),Na(e.$$)}}catch(e){throw Bl.length=0,jl=0,e}for(Zl(null),Bl.length=0,jl=0;Kt.length;)Kt.pop()();for(let e=0;e<Wl.length;e+=1){const t=Wl[e];Cn.has(t)||(Cn.add(t),t())}Wl.length=0}while(Bl.length);for(;Dn.length;)Dn.pop()();Tn=!1,Cn.clear(),Zl(l)}function Na(l){if(l.fragment!==null){l.update(),He(l.before_update);const e=l.dirty;l.dirty=[-1],l.fragment&&l.fragment.p(l.ctx,e),l.after_update.forEach(lt)}}function La(l){const e=[],t=[];Wl.forEach(n=>l.indexOf(n)===-1?e.push(n):t.push(n)),t.forEach(n=>n()),Wl=e}let Ql;function Ma(){return Ql||(Ql=Promise.resolve(),Ql.then(()=>{Ql=null})),Ql}function Sn(l,e,t){l.dispatchEvent(Gr(`${e?"intro":"outro"}${t}`))}const dn=new Set;let kl;function De(){kl={r:0,c:[],p:kl}}function Te(){kl.r||He(kl.c),kl=kl.p}function N(l,e){l&&l.i&&(dn.delete(l),l.i(e))}function R(l,e,t,n){if(l&&l.o){if(dn.has(l))return;dn.add(l),kl.c.push(()=>{dn.delete(l),n&&(t&&l.d(1),n())}),l.o(e)}else n&&n()}const Ra={duration:0};function Hl(l,e,t,n){let i=e(l,t,{direction:"both"}),o=n?0:1,a=null,c=null,p=null,f;function d(){p&&Da(l,p)}function m(g,h){const S=g.b-o;return h*=Math.abs(S),{a:o,b:g.b,d:S,duration:h,start:g.start,end:g.start+h,group:g.group}}function v(g){const{delay:h=0,duration:S=300,easing:y=Rr,tick:k=pe,css:D}=i||Ra,T={start:ha()+h,b:g};g||(T.group=kl,kl.r+=1),"inert"in l&&(g?f!==void 0&&(l.inert=f):(f=l.inert,l.inert=!0)),a||c?c=T:(D&&(d(),p=Hn(l,o,g,S,h,y,D)),g&&k(0,1),a=m(T,S),lt(()=>Sn(l,g,"start")),ga(q=>{if(c&&q>c.start&&(a=m(c,S),c=null,Sn(l,a.b,"start"),D&&(d(),p=Hn(l,o,a.b,a.duration,0,y,i.css))),a){if(q>=a.end)k(o=a.b,1-o),Sn(l,a.b,"end"),c||(a.b?d():--a.group.r||He(a.group.c)),a=null;else if(q>=a.start){const P=q-a.start;o=a.a+a.d*y(P/a.duration),k(o,1-o)}}return!!(a||c)}))}return{run(g){$n(i)?Ma().then(()=>{i=i({direction:g?"in":"out"}),v(g)}):v(g)},end(){d(),a=c=null}}}function me(l){return(l==null?void 0:l.length)!==void 0?l:Array.from(l)}function Vr(l,e){R(l,1,1,()=>{e.delete(l.key)})}function Jr(l,e,t,n,s,i,o,a,c,p,f,d){let m=l.length,v=i.length,g=m;const h={};for(;g--;)h[l[g].key]=g;const S=[],y=new Map,k=new Map,D=[];for(g=v;g--;){const C=d(s,i,g),L=t(C);let O=o.get(L);O?D.push(()=>O.p(C,e)):(O=p(L,C),O.c()),y.set(L,S[g]=O),L in h&&k.set(L,Math.abs(g-h[L]))}const T=new Set,q=new Set;function P(C){N(C,1),C.m(a,f),o.set(C.key,C),f=C.first,v--}for(;m&&v;){const C=S[v-1],L=l[m-1],O=C.key,A=L.key;C===L?(f=C.first,m--,v--):y.has(A)?!o.has(O)||T.has(O)?P(C):q.has(A)?m--:k.get(O)>k.get(A)?(q.add(O),P(C)):(T.add(A),m--):(c(L,o),m--)}for(;m--;){const C=l[m];y.has(C.key)||c(C,o)}for(;v;)P(S[v-1]);return He(D),S}function Ll(l,e,t){const n=l.$$.props[e];n!==void 0&&(l.$$.bound[n]=t,t(l.$$.ctx[n]))}function ce(l){l&&l.c()}function re(l,e,t){const{fragment:n,after_update:s}=l.$$;n&&n.m(e,t),lt(()=>{const i=l.$$.on_mount.map(Ar).filter($n);l.$$.on_destroy?l.$$.on_destroy.push(...i):He(i),l.$$.on_mount=[]}),s.forEach(lt)}function ae(l,e){const t=l.$$;t.fragment!==null&&(La(t.after_update),He(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function Aa(l,e){l.$$.dirty[0]===-1&&(Bl.push(l),Pa(),l.$$.dirty.fill(0)),l.$$.dirty[e/31|0]|=1<<e%31}function Et(l,e,t,n,s,i,o=null,a=[-1]){const c=Xl;Zl(l);const p=l.$$={fragment:null,ctx:[],props:i,update:pe,not_equal:s,bound:In(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:In(),dirty:a,skip_bound:!1,root:e.target||c.$$.root};o&&o(p.root);let f=!1;if(p.ctx=t?t(l,e.props||{},(d,m,...v)=>{const g=v.length?v[0]:m;return p.ctx&&s(p.ctx[d],p.ctx[d]=g)&&(!p.skip_bound&&p.bound[d]&&p.bound[d](g),f&&Aa(l,d)),m}):[],p.update(),f=!0,He(p.before_update),p.fragment=n?n(p.ctx):!1,e.target){if(e.hydrate){const d=ya(e.target);p.fragment&&p.fragment.l(d),d.forEach($)}else p.fragment&&p.fragment.c();e.intro&&N(l.$$.fragment),re(l,e.target,e.anchor),Wr()}Zl(c)}class Pt{constructor(){El(this,"$$");El(this,"$$set")}$destroy(){ae(this,1),this.$destroy=pe}$on(e,t){if(!$n(t))return pe;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const s=n.indexOf(t);s!==-1&&n.splice(s,1)}}$set(e){this.$$set&&!va(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Oa="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Oa);const Fl=[];function ja(l,e){return{subscribe:Dl(l,e).subscribe}}function Dl(l,e=pe){let t;const n=new Set;function s(a){if(zt(l,a)&&(l=a,t)){const c=!Fl.length;for(const p of n)p[1](),Fl.push(p,l);if(c){for(let p=0;p<Fl.length;p+=2)Fl[p][0](Fl[p+1]);Fl.length=0}}}function i(a){s(a(l))}function o(a,c=pe){const p=[a,c];return n.add(p),n.size===1&&(t=e(s,i)||pe),a(l),()=>{n.delete(p),n.size===0&&t&&(t(),t=null)}}return{set:s,update:i,subscribe:o}}function Jl(l,e,t){const n=!Array.isArray(l),s=n?[l]:l;if(!s.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const i=e.length<2;return ja(t,(o,a)=>{let c=!1;const p=[];let f=0,d=pe;const m=()=>{if(f)return;d();const g=e(n?p[0]:p,o,a);i?o(g):d=$n(g)?g:pe},v=s.map((g,h)=>Pn(g,S=>{p[h]=S,f&=~(1<<h),c&&m()},()=>{f|=1<<h}));return c=!0,m(),function(){He(v),d(),c=!1}})}function Mn(l,e,t=7){const n=new Date(Date.now()+t*864e5).toUTCString();document.cookie=`${l}=${encodeURIComponent(e)}; expires=${n}; path=/; SameSite=Strict`}function Rn(l){const e=document.cookie.match(new RegExp("(^| )"+l+"=([^;]+)"));return e?decodeURIComponent(e[2]):null}function Gn(l){document.cookie=`${l}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; SameSite=Strict`}function Fa(){const l=Rn("jwt_token"),{subscribe:e,set:t,update:n}=Dl({token:l,user:null,loading:!1,error:null});return{subscribe:e,setToken(s){Mn("jwt_token",s,7),n(i=>({...i,token:s,error:null}))},setUser(s){n(i=>({...i,user:s}))},setError(s){n(i=>({...i,error:s,loading:!1}))},setLoading(s){n(i=>({...i,loading:s}))},logout(){Gn("jwt_token"),Gn("do_token_local"),t({token:null,user:null,loading:!1,error:null})},clearError(){n(s=>({...s,error:null}))}}}const Zt=Fa();Jl(Zt,l=>!!l.token&&!!l.user);function dl(){return Rn("do_token_local")}function Ia(l){Mn("do_token_local",l,30)}function qn(){return Rn("cf_token_local")}function Ba(l){Mn("cf_token_local",l,30)}function Ua(){const{subscribe:l,update:e}=Dl([]);let t=0;function n(i,o="info",a=3e3){const c={id:++t,message:i,type:o};return e(p=>[...p,c]),a>0&&setTimeout(()=>s(c.id),a),c.id}function s(i){e(o=>o.filter(a=>a.id!==i))}return{subscribe:l,success:(i,o)=>n(i,"success",o),error:(i,o)=>n(i,"error",o),warning:(i,o)=>n(i,"warning",o),info:(i,o)=>n(i,"info",o),remove:s}}const be=Ua(),Kr="/api/v1",Yr=["/infra/servers","/infra/snapshots","/infra/setup","/infra/deploy","/infra/registry","/infra/agent","/infra/architecture","/infra/fleet","/infra/projects","/infra/containers","/infra/services","/infra/deployments"];function Qr(l,e={}){const t=en(Zt),n={"Content-Type":"application/json"},s=l.startsWith("/auth/login")||l.startsWith("/auth/register");t.token&&t.token.trim()!==""&&!s&&!e.skipAuth&&(n.Authorization=`Bearer ${t.token}`);let i=Kr+l;if(!e.skipDoToken&&(l.startsWith("/infra/")||Yr.some(a=>l.startsWith(a)))){const a=dl();if(!a)return{error:"DO token not set",url:null,headers:null};const c=i.includes("?")?"&":"?";i+=`${c}do_token=${encodeURIComponent(a)}`}return{url:i,headers:n,error:null}}async function An(l){if(l.status===401){let e="Authentication failed";try{const n=await l.json();e=n.detail||n.error||n.message||e}catch{}throw en(Zt).token&&(Zt.logout(),e="Session expired - please login again"),new Error(e)}if(!l.ok){const e=await l.json().catch(()=>({detail:"Request failed"}));throw new Error(e.detail||e.error||e.message||"Request failed")}}async function Oe(l,e,t=null,n={}){const{url:s,headers:i,error:o}=Qr(e,n);if(o)return console.debug(`Skipping ${e} - ${o}`),null;const a={method:l,headers:i};t&&(a.body=JSON.stringify(t));const c=await fetch(s,a);if(await An(c),c.status===204)return null;const p=await c.json();return p&&p.success===!0&&p.data!==void 0?p.data:p}async function Ha(l,e,t=null,n,s={}){const{url:i,headers:o,error:a}=Qr(e,s);if(a)throw new Error(a);const c={method:l,headers:o};t&&(c.body=JSON.stringify(t));const p=await fetch(i,c);await An(p);const f=p.body.getReader(),d=new TextDecoder;let m="";for(;;){const{done:v,value:g}=await f.read();if(v)break;m+=d.decode(g,{stream:!0});const h=m.split(`
`);m=h.pop()||"";for(const S of h)if(S.startsWith("data: "))try{const y=JSON.parse(S.slice(6));n(y)}catch{}}}async function Ga(l,e,t,n={}){const s=en(Zt);let i=Kr+l;if(!n.skipDoToken&&Yr.some(m=>l.startsWith(m))){const m=dl();if(!m)throw new Error("DO token not set");const v=i.includes("?")?"&":"?";i+=`${v}do_token=${encodeURIComponent(m)}`}const a={};s.token&&(a.Authorization=`Bearer ${s.token}`);const c=await fetch(i,{method:"POST",headers:a,body:e});await An(c);const p=c.body.getReader(),f=new TextDecoder;let d="";for(;;){const{done:m,value:v}=await p.read();if(m)break;d+=f.decode(v,{stream:!0});const g=d.split(`
`);d=g.pop()||"";for(const h of g)if(h.startsWith("data: "))try{const S=JSON.parse(h.slice(6));t(S)}catch{}}}async function Wa(){const l=en(Zt);if(!l.token||l.token.trim()==="")return!1;try{const e=await Oe("GET","/auth/me");return Zt.setUser(e),!0}catch{return Zt.logout(),!1}}function Va(l,e,t={}){const{refreshInterval:n=0,revalidateOnFocus:s=!0,revalidateOnMount:i=!0,dedupingInterval:o=2e3,initialData:a=null}=t,c=Dl({data:a,error:null,loading:!1,lastFetched:null});let p=0,f=null,d=null,m=0;async function v(D=!1){const T=Date.now();return!D&&f&&T-p<o||(p=T,c.update(q=>{var P;return{...q,loading:q.data===null||((P=q.data)==null?void 0:P.length)===0}}),f=(async()=>{try{const q=await e();return c.set({data:q,error:null,loading:!1,lastFetched:new Date}),q}catch(q){throw c.update(P=>({...P,error:q.message||"Fetch failed",loading:!1})),q}finally{f=null}})()),f}function g(){document.visibilityState==="visible"&&s&&v()}function h(){n>0&&!d&&(d=setInterval(()=>v(),n))}function S(){d&&(clearInterval(d),d=null)}const{subscribe:y}=c;function k(D){m++,m===1&&(s&&typeof document<"u"&&document.addEventListener("visibilitychange",g),i&&v(),h());const T=y(D);return()=>{T(),m--,m===0&&(typeof document<"u"&&document.removeEventListener("visibilitychange",g),S())}}return{subscribe:k,refresh:()=>v(!0),mutate:D=>c.update(T=>({...T,data:D})),get:()=>en(c)}}function wn(l,e={}){const{transform:t=s=>s,...n}=e;return Va(l,async()=>{const s=await Oe("GET",l);return t(s)},n)}function Ja(l,e={}){const{transform:t=c=>c,...n}=e,s=Dl({data:null,error:null,loading:!1,lastFetched:null});let i=null,o=null;async function a(c){const p=l(c);if(!p){s.set({data:null,error:null,loading:!1,lastFetched:null});return}return o&&JSON.stringify(c)===JSON.stringify(i)||(i=c,s.update(f=>({...f,loading:!0})),o=(async()=>{try{const f=await Oe("GET",p),d=t(f);return s.set({data:d,error:null,loading:!1,lastFetched:new Date}),d}catch(f){throw s.update(d=>({...d,error:f.message||"Fetch failed",loading:!1})),f}finally{o=null}})()),o}return{subscribe:s.subscribe,fetch:a,refresh:()=>i&&a(i),clear:()=>{i=null,s.set({data:null,error:null,loading:!1,lastFetched:null})}}}const Wn=Dl("infra");function Ka(){const{subscribe:l,set:e}=Dl(null);return typeof window<"u"&&e(dl()),{subscribe:l,refresh(){e(dl())},set(t){e(t)}}}const Zr=Ka(),Ul=Dl({project:"",env:"",server:"",container:"",range:"30d",tail:!1}),$l=wn("/infra/servers",{transform:l=>(l==null?void 0:l.servers)||l||[],refreshInterval:6e4,revalidateOnFocus:!0,initialData:[]}),On=wn("/infra/projects",{transform:l=>(l==null?void 0:l.projects)||[],refreshInterval:12e4,initialData:[]}),yn=wn("/infra/snapshots",{transform:l=>(l==null?void 0:l.snapshots)||[],refreshInterval:6e4,initialData:[]}),Al=wn("/infra/deployments/history",{transform:l=>(l==null?void 0:l.deployments)||[],refreshInterval:3e4,initialData:[]}),En=Ja(l=>l!=null&&l.server?`/infra/agent/${l.server}/containers`:null,{transform:l=>{const e=(l==null?void 0:l.containers)||l||[];return(Array.isArray(e)?e:[]).map(t=>({id:t.ID||t.Id||t.id,name:t.Names||t.Name||t.name||"unknown",image:t.Image||t.image,status:t.Status||t.State||t.status,state:t.State||t.state}))}}),xl=Jl($l,l=>(l==null?void 0:l.data)||[]),jn=Jl(On,l=>(l==null?void 0:l.data)||[]),Ya=Jl(yn,l=>(l==null?void 0:l.data)||[]),Xr=Jl(Al,l=>(l==null?void 0:l.data)||[]),Qa=Jl(En,l=>(l==null?void 0:l.data)||[]),Za="1.9.7";function Xa(){const l=typeof localStorage<"u"&&localStorage.getItem("theme")||"dark",{subscribe:e,set:t}=Dl(l);return typeof document<"u"&&document.documentElement.setAttribute("data-theme",l),{subscribe:e,set(n){typeof localStorage<"u"&&localStorage.setItem("theme",n),typeof document<"u"&&document.documentElement.setAttribute("data-theme",n),t(n)}}}const zn=Xa();function Vn(l){let e;return{c(){e=_("span"),u(e,"class","brand-dot svelte-16ksbsk")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Jn(l){let e,t,n,s,i,o;return{c(){e=_("div"),t=_("button"),t.textContent="Sign In",n=b(),s=_("button"),s.textContent="Sign Up",u(t,"class","tab svelte-16ksbsk"),Ce(t,"active",l[4]==="login"),u(s,"class","tab svelte-16ksbsk"),Ce(s,"active",l[4]==="signup"),u(e,"class","tabs svelte-16ksbsk")},m(a,c){w(a,e,c),r(e,t),r(e,n),r(e,s),i||(o=[Z(t,"click",l[16]),Z(s,"click",l[17])],i=!0)},p(a,c){c&16&&Ce(t,"active",a[4]==="login"),c&16&&Ce(s,"active",a[4]==="signup")},d(a){a&&$(e),i=!1,He(o)}}}function xa(l){let e,t,n,s,i,o,a,c,p,f,d,m,v,g,h,S,y,k,D;function T(C,L){return C[5]?lc:tc}let q=T(l),P=q(l);return{c(){e=_("form"),t=_("div"),n=_("label"),n.textContent="Email",s=b(),i=_("input"),o=b(),a=_("div"),c=_("label"),c.textContent="Password",p=b(),f=_("input"),d=b(),m=_("div"),v=_("label"),v.textContent="Confirm Password",g=b(),h=_("input"),S=b(),y=_("button"),P.c(),u(n,"for","signup-email"),u(n,"class","svelte-16ksbsk"),u(i,"type","email"),u(i,"id","signup-email"),u(i,"placeholder","you@example.com"),i.required=!0,i.disabled=l[5],u(i,"class","svelte-16ksbsk"),u(t,"class","form-group svelte-16ksbsk"),u(c,"for","signup-password"),u(c,"class","svelte-16ksbsk"),u(f,"type","password"),u(f,"id","signup-password"),u(f,"placeholder","••••••••"),f.required=!0,f.disabled=l[5],u(f,"class","svelte-16ksbsk"),u(a,"class","form-group svelte-16ksbsk"),u(v,"for","signup-confirm"),u(v,"class","svelte-16ksbsk"),u(h,"type","password"),u(h,"id","signup-confirm"),u(h,"placeholder","••••••••"),h.required=!0,h.disabled=l[5],u(h,"class","svelte-16ksbsk"),u(m,"class","form-group svelte-16ksbsk"),u(y,"type","submit"),u(y,"class","btn btn-primary btn-full svelte-16ksbsk"),y.disabled=l[5]},m(C,L){w(C,e,L),r(e,t),r(t,n),r(t,s),r(t,i),ee(i,l[9]),r(e,o),r(e,a),r(a,c),r(a,p),r(a,f),ee(f,l[10]),r(e,d),r(e,m),r(m,v),r(m,g),r(m,h),ee(h,l[11]),r(e,S),r(e,y),P.m(y,null),k||(D=[Z(i,"input",l[20]),Z(f,"input",l[21]),Z(h,"input",l[22]),Z(e,"submit",l[14])],k=!0)},p(C,L){L&32&&(i.disabled=C[5]),L&512&&i.value!==C[9]&&ee(i,C[9]),L&32&&(f.disabled=C[5]),L&1024&&f.value!==C[10]&&ee(f,C[10]),L&32&&(h.disabled=C[5]),L&2048&&h.value!==C[11]&&ee(h,C[11]),q!==(q=T(C))&&(P.d(1),P=q(C),P&&(P.c(),P.m(y,null))),L&32&&(y.disabled=C[5])},d(C){C&&$(e),P.d(),k=!1,He(D)}}}function ec(l){let e,t,n,s,i,o,a,c,p,f,d,m,v,g;function h(k,D){return k[5]?sc:nc}let S=h(l),y=S(l);return{c(){e=_("form"),t=_("div"),n=_("label"),n.textContent="Email",s=b(),i=_("input"),o=b(),a=_("div"),c=_("label"),c.textContent="Password",p=b(),f=_("input"),d=b(),m=_("button"),y.c(),u(n,"for","login-email"),u(n,"class","svelte-16ksbsk"),u(i,"type","email"),u(i,"id","login-email"),u(i,"placeholder","you@example.com"),i.required=!0,i.disabled=l[5],u(i,"class","svelte-16ksbsk"),u(t,"class","form-group svelte-16ksbsk"),u(c,"for","login-password"),u(c,"class","svelte-16ksbsk"),u(f,"type","password"),u(f,"id","login-password"),u(f,"placeholder","••••••••"),f.required=!0,f.disabled=l[5],u(f,"class","svelte-16ksbsk"),u(a,"class","form-group svelte-16ksbsk"),u(m,"type","submit"),u(m,"class","btn btn-primary btn-full svelte-16ksbsk"),m.disabled=l[5]},m(k,D){w(k,e,D),r(e,t),r(t,n),r(t,s),r(t,i),ee(i,l[7]),r(e,o),r(e,a),r(a,c),r(a,p),r(a,f),ee(f,l[8]),r(e,d),r(e,m),y.m(m,null),v||(g=[Z(i,"input",l[18]),Z(f,"input",l[19]),Z(e,"submit",l[13])],v=!0)},p(k,D){D&32&&(i.disabled=k[5]),D&128&&i.value!==k[7]&&ee(i,k[7]),D&32&&(f.disabled=k[5]),D&256&&f.value!==k[8]&&ee(f,k[8]),S!==(S=h(k))&&(y.d(1),y=S(k),y&&(y.c(),y.m(m,null))),D&32&&(m.disabled=k[5])},d(k){k&&$(e),y.d(),v=!1,He(g)}}}function tc(l){let e;return{c(){e=z("Create Account")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function lc(l){let e;return{c(){e=_("span"),u(e,"class","spinner svelte-16ksbsk")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function nc(l){let e;return{c(){e=z("Sign In")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function sc(l){let e;return{c(){e=_("span"),u(e,"class","spinner svelte-16ksbsk")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Kn(l){let e,t;return{c(){e=_("p"),t=z(l[6]),u(e,"class","error-message svelte-16ksbsk")},m(n,s){w(n,e,s),r(e,t)},p(n,s){s&64&&B(t,n[6])},d(n){n&&$(e)}}}function oc(l){let e,t,n,s,i,o,a,c,p,f,d,m,v=l[2]&&Vn(),g=l[3]&&Jn(l);function h(D,T){return D[4]==="login"?ec:xa}let S=h(l),y=S(l),k=l[6]&&Kn(l);return{c(){e=_("div"),t=_("div"),n=_("div"),s=_("h1"),v&&v.c(),i=b(),o=z(l[0]),a=b(),c=_("p"),p=z(l[1]),f=b(),g&&g.c(),d=b(),y.c(),m=b(),k&&k.c(),u(s,"class","svelte-16ksbsk"),u(c,"class","svelte-16ksbsk"),u(n,"class","auth-title svelte-16ksbsk"),u(t,"class","auth-card glass svelte-16ksbsk"),u(e,"class","auth-container svelte-16ksbsk")},m(D,T){w(D,e,T),r(e,t),r(t,n),r(n,s),v&&v.m(s,null),r(s,i),r(s,o),r(n,a),r(n,c),r(c,p),r(t,f),g&&g.m(t,null),r(t,d),y.m(t,null),r(t,m),k&&k.m(t,null)},p(D,[T]){D[2]?v||(v=Vn(),v.c(),v.m(s,i)):v&&(v.d(1),v=null),T&1&&B(o,D[0]),T&2&&B(p,D[1]),D[3]?g?g.p(D,T):(g=Jn(D),g.c(),g.m(t,d)):g&&(g.d(1),g=null),S===(S=h(D))&&y?y.p(D,T):(y.d(1),y=S(D),y&&(y.c(),y.m(t,m))),D[6]?k?k.p(D,T):(k=Kn(D),k.c(),k.m(t,null)):k&&(k.d(1),k=null)},i:pe,o:pe,d(D){D&&$(e),v&&v.d(),g&&g.d(),y.d(),k&&k.d()}}}function ic(l,e,t){let{title:n="Welcome"}=e,{subtitle:s="Sign in to your account"}=e,{apiBase:i="/api/v1"}=e,{showLogo:o=!0}=e,{allowSignup:a=!0}=e;const c=ln();let p="login",f=!1,d=null,m="",v="",g="",h="",S="";function y(U){t(4,p=U),t(6,d=null)}async function k(U,K,V){return await Oe(U,K,V,{skipDoToken:!0})}async function D(U){U.preventDefault(),t(5,f=!0),t(6,d=null);try{const K=await k("POST","/auth/login",{username:m,password:v}),V=(K==null?void 0:K.access_token)||(K==null?void 0:K.token);if(!V)throw new Error("Login failed - no token returned");let F=K==null?void 0:K.user;if(!F){const E=await fetch("/api/v1/auth/me",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${V}`}});if(!E.ok)throw new Error("Failed to get user info");F=await E.json()}if(!F)throw new Error("Login failed - no user info");c("success",{user:F,token:V})}catch(K){t(6,d=K.message),c("error",{error:K.message,type:"login"})}finally{t(5,f=!1)}}async function T(U){if(U.preventDefault(),h!==S){t(6,d="Passwords do not match");return}t(5,f=!0),t(6,d=null);try{await k("POST","/auth/register",{username:g,email:g,password:h});const K=await k("POST","/auth/login",{username:g,password:h}),V=(K==null?void 0:K.access_token)||(K==null?void 0:K.token);if(!V)throw new Error("Signup failed - no token returned");let F=K==null?void 0:K.user;if(!F){const E=await fetch("/api/v1/auth/me",{headers:{"Content-Type":"application/json",Authorization:`Bearer ${V}`}});if(!E.ok)throw new Error("Failed to get user info");F=await E.json()}if(!F)throw new Error("Signup failed - no user info");c("success",{user:F,token:V})}catch(K){t(6,d=K.message),c("error",{error:K.message,type:"signup"})}finally{t(5,f=!1)}}const q=()=>y("login"),P=()=>y("signup");function C(){m=this.value,t(7,m)}function L(){v=this.value,t(8,v)}function O(){g=this.value,t(9,g)}function A(){h=this.value,t(10,h)}function j(){S=this.value,t(11,S)}return l.$$set=U=>{"title"in U&&t(0,n=U.title),"subtitle"in U&&t(1,s=U.subtitle),"apiBase"in U&&t(15,i=U.apiBase),"showLogo"in U&&t(2,o=U.showLogo),"allowSignup"in U&&t(3,a=U.allowSignup)},[n,s,o,a,p,f,d,m,v,g,h,S,y,D,T,i,q,P,C,L,O,A,j]}class rc extends Pt{constructor(e){super(),Et(this,e,ic,oc,zt,{title:0,subtitle:1,apiBase:15,showLogo:2,allowSignup:3})}}function xr(l){const e=l-1;return e*e*e+1}function Yn(l,{delay:e=0,duration:t=400,easing:n=Rr}={}){const s=+getComputedStyle(l).opacity;return{delay:e,duration:t,easing:n,css:i=>`opacity: ${i*s}`}}function Qn(l,{delay:e=0,duration:t=400,easing:n=xr,x:s=0,y:i=0,opacity:o=0}={}){const a=getComputedStyle(l),c=+a.opacity,p=a.transform==="none"?"":a.transform,f=c*(1-o),[d,m]=Bn(s),[v,g]=Bn(i);return{delay:e,duration:t,easing:n,css:(h,S)=>`
			transform: ${p} translate(${(1-h)*d}${m}, ${(1-h)*v}${g});
			opacity: ${c-f*S}`}}function Zn(l,{delay:e=0,duration:t=400,easing:n=xr,start:s=0,opacity:i=0}={}){const o=getComputedStyle(l),a=+o.opacity,c=o.transform==="none"?"":o.transform,p=1-s,f=a*(1-i);return{delay:e,duration:t,easing:n,css:(d,m)=>`
			transform: ${c} scale(${1-p*m});
			opacity: ${a-f*m}
		`}}function Xn(l,e,t){const n=l.slice();return n[2]=e[t],n}function xn(l,e){let t,n,s=e[2].message+"",i,o,a,c,p,f,d,m,v;function g(){return e[1](e[2])}return{key:l,first:null,c(){t=_("div"),n=_("span"),i=z(s),o=b(),a=_("button"),a.textContent="×",c=b(),u(n,"class","toast-message svelte-1l5lsfn"),u(a,"class","toast-close svelte-1l5lsfn"),u(t,"class",p="toast toast-"+e[2].type+" svelte-1l5lsfn"),this.first=t},m(h,S){w(h,t,S),r(t,n),r(n,i),r(t,o),r(t,a),r(t,c),d=!0,m||(v=Z(a,"click",g),m=!0)},p(h,S){e=h,(!d||S&1)&&s!==(s=e[2].message+"")&&B(i,s),(!d||S&1&&p!==(p="toast toast-"+e[2].type+" svelte-1l5lsfn"))&&u(t,"class",p)},i(h){d||(h&&lt(()=>{d&&(f||(f=Hl(t,Qn,{x:100,duration:200},!0)),f.run(1))}),d=!0)},o(h){h&&(f||(f=Hl(t,Qn,{x:100,duration:200},!1)),f.run(0)),d=!1},d(h){h&&$(t),h&&f&&f.end(),m=!1,v()}}}function ac(l){let e,t=[],n=new Map,s,i=me(l[0]);const o=a=>a[2].id;for(let a=0;a<i.length;a+=1){let c=Xn(l,i,a),p=o(c);n.set(p,t[a]=xn(p,c))}return{c(){e=_("div");for(let a=0;a<t.length;a+=1)t[a].c();u(e,"class","toast-container svelte-1l5lsfn")},m(a,c){w(a,e,c);for(let p=0;p<t.length;p+=1)t[p]&&t[p].m(e,null);s=!0},p(a,[c]){c&1&&(i=me(a[0]),De(),t=Jr(t,c,o,1,a,i,n,e,Vr,xn,null,Xn),Te())},i(a){if(!s){for(let c=0;c<i.length;c+=1)N(t[c]);s=!0}},o(a){for(let c=0;c<t.length;c+=1)R(t[c]);s=!1},d(a){a&&$(e);for(let c=0;c<t.length;c+=1)t[c].d()}}}function cc(l,e,t){let n;return ct(l,be,i=>t(0,n=i)),[n,i=>be.remove(i.id)]}class uc extends Pt{constructor(e){super(),Et(this,e,cc,ac,zt,{})}}function fc(l){let e,t,n,s,i,o,a=l[3]&&es();const c=l[9].default,p=yl(c,l,l[8],null);return{c(){e=_("button"),a&&a.c(),t=b(),p&&p.c(),u(e,"type",l[4]),u(e,"title",l[6]),u(e,"aria-label",l[7]),u(e,"class",n="btn btn-"+l[0]+" btn-"+l[1]+" svelte-1vvc8tv"),e.disabled=l[2]},m(f,d){w(f,e,d),a&&a.m(e,null),r(e,t),p&&p.m(e,null),s=!0,i||(o=Z(e,"click",l[11]),i=!0)},p(f,d){f[3]?a||(a=es(),a.c(),a.m(e,t)):a&&(a.d(1),a=null),p&&p.p&&(!s||d&256)&&Sl(p,c,f,f[8],s?Cl(c,f[8],d,null):zl(f[8]),null),(!s||d&16)&&u(e,"type",f[4]),(!s||d&64)&&u(e,"title",f[6]),(!s||d&128)&&u(e,"aria-label",f[7]),(!s||d&3&&n!==(n="btn btn-"+f[0]+" btn-"+f[1]+" svelte-1vvc8tv"))&&u(e,"class",n),(!s||d&4)&&(e.disabled=f[2])},i(f){s||(N(p,f),s=!0)},o(f){R(p,f),s=!1},d(f){f&&$(e),a&&a.d(),p&&p.d(f),i=!1,o()}}}function pc(l){let e,t,n,s,i,o,a=l[3]&&ts();const c=l[9].default,p=yl(c,l,l[8],null);return{c(){e=_("a"),a&&a.c(),t=b(),p&&p.c(),u(e,"href",l[5]),u(e,"title",l[6]),u(e,"aria-label",l[7]),u(e,"class",n="btn btn-"+l[0]+" btn-"+l[1]+" svelte-1vvc8tv"),Ce(e,"disabled",l[2])},m(f,d){w(f,e,d),a&&a.m(e,null),r(e,t),p&&p.m(e,null),s=!0,i||(o=Z(e,"click",l[10]),i=!0)},p(f,d){f[3]?a||(a=ts(),a.c(),a.m(e,t)):a&&(a.d(1),a=null),p&&p.p&&(!s||d&256)&&Sl(p,c,f,f[8],s?Cl(c,f[8],d,null):zl(f[8]),null),(!s||d&32)&&u(e,"href",f[5]),(!s||d&64)&&u(e,"title",f[6]),(!s||d&128)&&u(e,"aria-label",f[7]),(!s||d&3&&n!==(n="btn btn-"+f[0]+" btn-"+f[1]+" svelte-1vvc8tv"))&&u(e,"class",n),(!s||d&7)&&Ce(e,"disabled",f[2])},i(f){s||(N(p,f),s=!0)},o(f){R(p,f),s=!1},d(f){f&&$(e),a&&a.d(),p&&p.d(f),i=!1,o()}}}function es(l){let e;return{c(){e=_("span"),u(e,"class","spinner svelte-1vvc8tv")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function ts(l){let e;return{c(){e=_("span"),u(e,"class","spinner svelte-1vvc8tv")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function _c(l){let e,t,n,s;const i=[pc,fc],o=[];function a(c,p){return c[5]?0:1}return e=a(l),t=o[e]=i[e](l),{c(){t.c(),n=Ge()},m(c,p){o[e].m(c,p),w(c,n,p),s=!0},p(c,[p]){let f=e;e=a(c),e===f?o[e].p(c,p):(De(),R(o[f],1,1,()=>{o[f]=null}),Te(),t=o[e],t?t.p(c,p):(t=o[e]=i[e](c),t.c()),N(t,1),t.m(n.parentNode,n))},i(c){s||(N(t),s=!0)},o(c){R(t),s=!1},d(c){c&&$(n),o[e].d(c)}}}function dc(l,e,t){let{$$slots:n={},$$scope:s}=e,{variant:i="default"}=e,{size:o="md"}=e,{disabled:a=!1}=e,{loading:c=!1}=e,{type:p="button"}=e,{href:f=null}=e,{title:d=void 0}=e,{ariaLabel:m=void 0}=e;function v(h){gn.call(this,l,h)}function g(h){gn.call(this,l,h)}return l.$$set=h=>{"variant"in h&&t(0,i=h.variant),"size"in h&&t(1,o=h.size),"disabled"in h&&t(2,a=h.disabled),"loading"in h&&t(3,c=h.loading),"type"in h&&t(4,p=h.type),"href"in h&&t(5,f=h.href),"title"in h&&t(6,d=h.title),"ariaLabel"in h&&t(7,m=h.ariaLabel),"$$scope"in h&&t(8,s=h.$$scope)},[i,o,a,c,p,f,d,m,s,n,v,g]}class je extends Pt{constructor(e){super(),Et(this,e,dc,_c,zt,{variant:0,size:1,disabled:2,loading:3,type:4,href:5,title:6,ariaLabel:7})}}function ls(l){let e;return{c(){e=_("span"),e.textContent="MOCK",u(e,"class","badge svelte-12krgw5")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function ns(l){let e,t=l[2].user.email+"",n;return{c(){e=_("span"),n=z(t),u(e,"class","user-email svelte-12krgw5")},m(s,i){w(s,e,i),r(e,n)},p(s,i){i&4&&t!==(t=s[2].user.email+"")&&B(n,t)},d(s){s&&$(e)}}}function mc(l){let e;return{c(){e=z("Logout")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function vc(l){let e,t,n,s,i,o,a,c,p,f,d,m=l[1]&&ls(),v=l[2].user&&ns(l);return f=new je({props:{variant:"ghost",size:"sm",$$slots:{default:[mc]},$$scope:{ctx:l}}}),f.$on("click",l[3]),{c(){e=_("header"),t=_("h1"),n=_("span"),s=b(),i=z(l[0]),o=b(),a=_("div"),m&&m.c(),c=b(),v&&v.c(),p=b(),ce(f.$$.fragment),u(n,"class","brand-dot svelte-12krgw5"),u(t,"class","svelte-12krgw5"),u(a,"class","header-actions svelte-12krgw5"),u(e,"class","header glass svelte-12krgw5")},m(g,h){w(g,e,h),r(e,t),r(t,n),r(t,s),r(t,i),r(e,o),r(e,a),m&&m.m(a,null),r(a,c),v&&v.m(a,null),r(a,p),re(f,a,null),d=!0},p(g,[h]){(!d||h&1)&&B(i,g[0]),g[1]?m||(m=ls(),m.c(),m.m(a,c)):m&&(m.d(1),m=null),g[2].user?v?v.p(g,h):(v=ns(g),v.c(),v.m(a,p)):v&&(v.d(1),v=null);const S={};h&16&&(S.$$scope={dirty:h,ctx:g}),f.$set(S)},i(g){d||(N(f.$$.fragment,g),d=!0)},o(g){R(f.$$.fragment,g),d=!1},d(g){g&&$(e),m&&m.d(),v&&v.d(),ae(f)}}}function hc(l,e,t){var a,c;let n;ct(l,Zt,p=>t(2,n=p));let s=!1;try{s=((c=(a=import.meta)==null?void 0:a.env)==null?void 0:c.VITE_MOCK_API)==="1"||typeof localStorage<"u"&&localStorage.getItem("mockApi")==="1"}catch{s=!1}let{title:i="Deploy Dashboard"}=e;function o(){Zt.logout()}return l.$$set=p=>{"title"in p&&t(0,i=p.title)},[i,s,n,o]}class gc extends Pt{constructor(e){super(),Et(this,e,hc,vc,zt,{title:0})}}function ss(l,e,t){const n=l.slice();return n[6]=e[t],n}function os(l){let e,t=l[6].icon+"",n;return{c(){e=_("span"),n=z(t),u(e,"class","tab-icon svelte-1po08a6")},m(s,i){w(s,e,i),r(e,n)},p(s,i){i&2&&t!==(t=s[6].icon+"")&&B(n,t)},d(s){s&&$(e)}}}function is(l){let e,t,n=l[6].label+"",s,i,o,a,c=l[6].icon&&os(l);function p(){return l[4](l[6])}return{c(){e=_("button"),c&&c.c(),t=b(),s=z(n),i=b(),u(e,"class","tab svelte-1po08a6"),Ce(e,"active",l[0]===l[6].id)},m(f,d){w(f,e,d),c&&c.m(e,null),r(e,t),r(e,s),r(e,i),o||(a=Z(e,"click",p),o=!0)},p(f,d){l=f,l[6].icon?c?c.p(l,d):(c=os(l),c.c(),c.m(e,t)):c&&(c.d(1),c=null),d&2&&n!==(n=l[6].label+"")&&B(s,n),d&3&&Ce(e,"active",l[0]===l[6].id)},d(f){f&&$(e),c&&c.d(),o=!1,a()}}}function bc(l){let e,t=me(l[1]),n=[];for(let s=0;s<t.length;s+=1)n[s]=is(ss(l,t,s));return{c(){e=_("div");for(let s=0;s<n.length;s+=1)n[s].c();u(e,"class","tabs svelte-1po08a6"),Ce(e,"scrollable",l[2])},m(s,i){w(s,e,i);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null)},p(s,[i]){if(i&11){t=me(s[1]);let o;for(o=0;o<t.length;o+=1){const a=ss(s,t,o);n[o]?n[o].p(a,i):(n[o]=is(a),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=t.length}i&4&&Ce(e,"scrollable",s[2])},i:pe,o:pe,d(s){s&&$(e),Re(n,s)}}}function kc(l,e,t){let{tabs:n=[]}=e,{active:s=""}=e,{scrollable:i=!0}=e;const o=ln();function a(p){t(0,s=p),o("change",p)}const c=p=>a(p.id);return l.$$set=p=>{"tabs"in p&&t(1,n=p.tabs),"active"in p&&t(0,s=p.active),"scrollable"in p&&t(2,i=p.scrollable)},[s,n,i,a,c]}class $c extends Pt{constructor(e){super(),Et(this,e,kc,bc,zt,{tabs:1,active:0,scrollable:2})}}function rs(l,e,t){const n=l.slice();return n[20]=e[t],n}function as(l,e,t){var i,o,a;const n=l.slice();n[23]=e[t];const s=n[23].ip||((a=(o=(i=n[23].networks)==null?void 0:i.v4)==null?void 0:o[0])==null?void 0:a.ip_address);return n[24]=s,n}function cs(l,e,t){const n=l.slice();return n[27]=e[t],n}function us(l,e,t){const n=l.slice();return n[30]=e[t],n}function fs(l){let e,t=l[30]+"",n,s;return{c(){e=_("option"),n=z(t),e.__value=s=l[30],ee(e,e.__value)},m(i,o){w(i,e,o),r(e,n)},p(i,o){o[0]&16&&t!==(t=i[30]+"")&&B(n,t),o[0]&16&&s!==(s=i[30])&&(e.__value=s,ee(e,e.__value))},d(i){i&&$(e)}}}function ps(l){let e,t=l[27]+"",n,s;return{c(){e=_("option"),n=z(t),e.__value=s=l[27],ee(e,e.__value)},m(i,o){w(i,e,o),r(e,n)},p(i,o){o[0]&8&&t!==(t=i[27]+"")&&B(n,t),o[0]&8&&s!==(s=i[27])&&(e.__value=s,ee(e,e.__value))},d(i){i&&$(e)}}}function _s(l){let e,t=(l[23].name||"unnamed")+"",n,s,i=l[24]+"",o,a,c;return{c(){e=_("option"),n=z(t),s=z(" ("),o=z(i),a=z(")"),e.__value=c=l[24],ee(e,e.__value)},m(p,f){w(p,e,f),r(e,n),r(e,s),r(e,o),r(e,a)},p(p,f){f[0]&32&&t!==(t=(p[23].name||"unnamed")+"")&&B(n,t),f[0]&32&&i!==(i=p[24]+"")&&B(o,i),f[0]&32&&c!==(c=p[24])&&(e.__value=c,ee(e,e.__value))},d(p){p&&$(e)}}}function ds(l){let e,t=l[24]&&_s(l);return{c(){t&&t.c(),e=Ge()},m(n,s){t&&t.m(n,s),w(n,e,s)},p(n,s){n[24]?t?t.p(n,s):(t=_s(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(n){n&&$(e),t&&t.d(n)}}}function ms(l){let e,t,n,s,i,o,a,c,p=me(l[6]||[]),f=[];for(let d=0;d<p.length;d+=1)f[d]=vs(rs(l,p,d));return{c(){e=_("div"),t=_("label"),t.textContent="Container:",n=b(),s=_("select"),i=_("option"),i.textContent="(All)";for(let d=0;d<f.length;d+=1)f[d].c();u(t,"class","svelte-1wvrz0m"),i.__value="",ee(i,i.__value),u(s,"class","svelte-1wvrz0m"),u(e,"class","scope-field svelte-1wvrz0m")},m(d,m){w(d,e,m),r(e,t),r(e,n),r(e,s),r(s,i);for(let v=0;v<f.length;v+=1)f[v]&&f[v].m(s,null);Pe(s,l[2].container),a||(c=Z(s,"change",l[16]),a=!0)},p(d,m){if(m[0]&64){p=me(d[6]||[]);let v;for(v=0;v<p.length;v+=1){const g=rs(d,p,v);f[v]?f[v].p(g,m):(f[v]=vs(g),f[v].c(),f[v].m(s,null))}for(;v<f.length;v+=1)f[v].d(1);f.length=p.length}m[0]&20&&o!==(o=d[2].container)&&Pe(s,d[2].container)},d(d){d&&$(e),Re(f,d),a=!1,c()}}}function vs(l){let e,t=l[20].name+"",n,s;return{c(){e=_("option"),n=z(t),e.__value=s=l[20].name,ee(e,e.__value)},m(i,o){w(i,e,o),r(e,n)},p(i,o){o[0]&64&&t!==(t=i[20].name+"")&&B(n,t),o[0]&64&&s!==(s=i[20].name)&&(e.__value=s,ee(e,e.__value))},d(i){i&&$(e)}}}function hs(l){let e,t,n,s,i,o;return{c(){e=_("label"),t=_("input"),s=z(`
      Tail`),u(t,"type","checkbox"),t.checked=n=l[2].tail,u(t,"class","svelte-1wvrz0m"),u(e,"class","tail-toggle svelte-1wvrz0m")},m(a,c){w(a,e,c),r(e,t),r(e,s),i||(o=Z(t,"change",l[18]),i=!0)},p(a,c){c[0]&20&&n!==(n=a[2].tail)&&(t.checked=n)},d(a){a&&$(e),i=!1,o()}}}function wc(l){let e,t,n,s,i,o,a,c,p,f,d,m,v,g,h,S,y,k,D,T,q,P,C,L,O,A,j,U,K,V,F,E,M,G,I,J,H,Q,le,W,X,x,_e=me(l[4]),$e=[];for(let se=0;se<_e.length;se+=1)$e[se]=fs(us(l,_e,se));let he=me(l[3]),ne=[];for(let se=0;se<he.length;se+=1)ne[se]=ps(cs(l,he,se));let ve=me(l[5]||[]),we=[];for(let se=0;se<ve.length;se+=1)we[se]=ds(as(l,ve,se));let fe=l[1]&&l[2].server&&ms(l),te=l[0]&&hs(l);return{c(){e=_("div"),t=_("div"),n=_("div"),n.innerHTML='<span class="brand-dot svelte-1wvrz0m"></span> <span>cc</span>',s=b(),i=_("div"),o=_("label"),o.textContent="Project:",a=b(),c=_("select"),p=_("option"),p.textContent="All";for(let se=0;se<$e.length;se+=1)$e[se].c();d=b(),m=_("div"),v=_("label"),v.textContent="Env:",g=b(),h=_("select"),S=_("option"),S.textContent="All";for(let se=0;se<ne.length;se+=1)ne[se].c();k=b(),D=_("div"),T=_("label"),T.textContent="Server:",q=b(),P=_("select"),C=_("option"),C.textContent="(Fleet)";for(let se=0;se<we.length;se+=1)we[se].c();O=b(),fe&&fe.c(),A=b(),j=_("div"),U=_("label"),U.textContent="Last",K=b(),V=_("select"),F=_("option"),F.textContent="15m",E=_("option"),E.textContent="1h",M=_("option"),M.textContent="6h",G=_("option"),G.textContent="24h",I=_("option"),I.textContent="7d",J=_("option"),J.textContent="30d",Q=b(),le=_("button"),le.innerHTML='<svg viewBox="0 0 24 24" fill="none" class="svelte-1wvrz0m"><path d="M20 12a8 8 0 1 1-2.34-5.66" stroke="currentColor" stroke-width="2" stroke-linecap="round"></path><path d="M20 4v6h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg>',W=b(),te&&te.c(),u(n,"class","scope-brand svelte-1wvrz0m"),u(o,"class","svelte-1wvrz0m"),p.__value="",ee(p,p.__value),u(c,"class","svelte-1wvrz0m"),u(i,"class","scope-field svelte-1wvrz0m"),u(v,"class","svelte-1wvrz0m"),S.__value="",ee(S,S.__value),u(h,"class","svelte-1wvrz0m"),u(m,"class","scope-field svelte-1wvrz0m"),u(T,"class","svelte-1wvrz0m"),C.__value="",ee(C,C.__value),u(P,"class","svelte-1wvrz0m"),u(D,"class","scope-field svelte-1wvrz0m"),u(U,"class","svelte-1wvrz0m"),F.__value="15m",ee(F,F.__value),E.__value="1h",ee(E,E.__value),M.__value="6h",ee(M,M.__value),G.__value="24h",ee(G,G.__value),I.__value="7d",ee(I,I.__value),J.__value="30d",ee(J,J.__value),u(V,"class","svelte-1wvrz0m"),u(j,"class","scope-field svelte-1wvrz0m"),u(le,"class","iconbtn svelte-1wvrz0m"),u(le,"title","Refresh"),u(t,"class","scope-bar-inner svelte-1wvrz0m"),u(e,"class","scope-bar glass svelte-1wvrz0m")},m(se,Ee){w(se,e,Ee),r(e,t),r(t,n),r(t,s),r(t,i),r(i,o),r(i,a),r(i,c),r(c,p);for(let ge=0;ge<$e.length;ge+=1)$e[ge]&&$e[ge].m(c,null);Pe(c,l[2].project),r(t,d),r(t,m),r(m,v),r(m,g),r(m,h),r(h,S);for(let ge=0;ge<ne.length;ge+=1)ne[ge]&&ne[ge].m(h,null);Pe(h,l[2].env),r(t,k),r(t,D),r(D,T),r(D,q),r(D,P),r(P,C);for(let ge=0;ge<we.length;ge+=1)we[ge]&&we[ge].m(P,null);Pe(P,l[2].server),r(t,O),fe&&fe.m(t,null),r(t,A),r(t,j),r(j,U),r(j,K),r(j,V),r(V,F),r(V,E),r(V,M),r(V,G),r(V,I),r(V,J),Pe(V,l[2].range),r(t,Q),r(t,le),r(e,W),te&&te.m(e,null),X||(x=[Z(c,"change",l[13]),Z(h,"change",l[14]),Z(P,"change",l[15]),Z(V,"change",l[17]),Z(le,"click",l[10])],X=!0)},p(se,Ee){if(Ee[0]&16){_e=me(se[4]);let ge;for(ge=0;ge<_e.length;ge+=1){const Ve=us(se,_e,ge);$e[ge]?$e[ge].p(Ve,Ee):($e[ge]=fs(Ve),$e[ge].c(),$e[ge].m(c,null))}for(;ge<$e.length;ge+=1)$e[ge].d(1);$e.length=_e.length}if(Ee[0]&20&&f!==(f=se[2].project)&&Pe(c,se[2].project),Ee[0]&8){he=me(se[3]);let ge;for(ge=0;ge<he.length;ge+=1){const Ve=cs(se,he,ge);ne[ge]?ne[ge].p(Ve,Ee):(ne[ge]=ps(Ve),ne[ge].c(),ne[ge].m(h,null))}for(;ge<ne.length;ge+=1)ne[ge].d(1);ne.length=he.length}if(Ee[0]&20&&y!==(y=se[2].env)&&Pe(h,se[2].env),Ee[0]&32){ve=me(se[5]||[]);let ge;for(ge=0;ge<ve.length;ge+=1){const Ve=as(se,ve,ge);we[ge]?we[ge].p(Ve,Ee):(we[ge]=ds(Ve),we[ge].c(),we[ge].m(P,null))}for(;ge<we.length;ge+=1)we[ge].d(1);we.length=ve.length}Ee[0]&20&&L!==(L=se[2].server)&&Pe(P,se[2].server),se[1]&&se[2].server?fe?fe.p(se,Ee):(fe=ms(se),fe.c(),fe.m(t,A)):fe&&(fe.d(1),fe=null),Ee[0]&20&&H!==(H=se[2].range)&&Pe(V,se[2].range),se[0]?te?te.p(se,Ee):(te=hs(se),te.c(),te.m(e,null)):te&&(te.d(1),te=null)},i:pe,o:pe,d(se){se&&$(e),Re($e,se),Re(ne,se),Re(we,se),fe&&fe.d(),te&&te.d(),X=!1,He(x)}}}function yc(l,e,t){let n,s,i,o,a,c,p;ct(l,Ul,C=>t(2,i=C)),ct(l,Xr,C=>t(11,o=C)),ct(l,jn,C=>t(12,a=C)),ct(l,xl,C=>t(5,c=C)),ct(l,Qa,C=>t(6,p=C));let{showTail:f=!1}=e,{showContainer:d=!1}=e;const m=ln();function v(C,L){Ul.update(O=>({...O,[C]:L})),m("change")}function g(C){Ul.update(L=>({...L,server:C,container:""})),m("change")}function h(C){Ul.update(L=>({...L,tail:C})),m("change")}function S(){m("refresh")}const y=C=>v("project",C.target.value),k=C=>v("env",C.target.value),D=C=>g(C.target.value),T=C=>v("container",C.target.value),q=C=>v("range",C.target.value),P=C=>h(C.target.checked);return l.$$set=C=>{"showTail"in C&&t(0,f=C.showTail),"showContainer"in C&&t(1,d=C.showContainer)},l.$$.update=()=>{l.$$.dirty[0]&6144&&t(4,n=[...new Set([...a||[],...(o||[]).map(C=>C.project).filter(Boolean)])].sort()),l.$$.dirty[0]&2048&&t(3,s=[...new Set(["prod","staging","uat","test","dev",...(o||[]).map(C=>C.environment).filter(Boolean)])].sort()),l.$$.dirty[0]&4&&(i.server?En.fetch({server:i.server}):(En.clear(),i.container&&Ul.update(C=>({...C,container:""}))))},[f,d,i,s,n,c,p,v,g,h,S,o,a,y,k,D,T,q,P]}class Cc extends Pt{constructor(e){super(),Et(this,e,yc,wc,zt,{showTail:0,showContainer:1},null,[-1,-1])}}function Sc(l){let e,t,n;const s=l[2].default,i=yl(s,l,l[1],null);return{c(){e=_("span"),i&&i.c(),u(e,"class",t="badge badge-"+l[0]+" svelte-1d0la3i")},m(o,a){w(o,e,a),i&&i.m(e,null),n=!0},p(o,[a]){i&&i.p&&(!n||a&2)&&Sl(i,s,o,o[1],n?Cl(s,o[1],a,null):zl(o[1]),null),(!n||a&1&&t!==(t="badge badge-"+o[0]+" svelte-1d0la3i"))&&u(e,"class",t)},i(o){n||(N(i,o),n=!0)},o(o){R(i,o),n=!1},d(o){o&&$(e),i&&i.d(o)}}}function zc(l,e,t){let{$$slots:n={},$$scope:s}=e,{variant:i="info"}=e;return l.$$set=o=>{"variant"in o&&t(0,i=o.variant),"$$scope"in o&&t(1,s=o.$$scope)},[i,s,n]}class Je extends Pt{constructor(e){super(),Et(this,e,zc,Sc,zt,{variant:0})}}const Dc=l=>({}),gs=l=>({}),Tc=l=>({}),bs=l=>({});function ks(l){let e,t,n,s,i,o,a,c,p,f,d=(l[1]||l[6].header)&&$s(l);const m=l[9].default,v=yl(m,l,l[8],null);let g=l[6].footer&&ys(l);return{c(){e=_("div"),t=_("div"),d&&d.c(),n=b(),s=_("div"),v&&v.c(),i=b(),g&&g.c(),u(s,"class","modal-body svelte-kno8vc"),u(t,"class","modal svelte-kno8vc"),ml(t,"max-width",l[2]),u(e,"class","modal-overlay svelte-kno8vc"),u(e,"role","dialog"),u(e,"aria-modal","true")},m(h,S){w(h,e,S),r(e,t),d&&d.m(t,null),r(t,n),r(t,s),v&&v.m(s,null),r(t,i),g&&g.m(t,null),c=!0,p||(f=Z(e,"click",l[4]),p=!0)},p(h,S){h[1]||h[6].header?d?(d.p(h,S),S&66&&N(d,1)):(d=$s(h),d.c(),N(d,1),d.m(t,n)):d&&(De(),R(d,1,1,()=>{d=null}),Te()),v&&v.p&&(!c||S&256)&&Sl(v,m,h,h[8],c?Cl(m,h[8],S,null):zl(h[8]),null),h[6].footer?g?(g.p(h,S),S&64&&N(g,1)):(g=ys(h),g.c(),N(g,1),g.m(t,null)):g&&(De(),R(g,1,1,()=>{g=null}),Te()),(!c||S&4)&&ml(t,"max-width",h[2])},i(h){c||(N(d),N(v,h),N(g),h&&lt(()=>{c&&(o||(o=Hl(t,Zn,{duration:200,start:.95},!0)),o.run(1))}),h&&lt(()=>{c&&(a||(a=Hl(e,Yn,{duration:150},!0)),a.run(1))}),c=!0)},o(h){R(d),R(v,h),R(g),h&&(o||(o=Hl(t,Zn,{duration:200,start:.95},!1)),o.run(0)),h&&(a||(a=Hl(e,Yn,{duration:150},!1)),a.run(0)),c=!1},d(h){h&&$(e),d&&d.d(),v&&v.d(h),g&&g.d(),h&&o&&o.end(),h&&a&&a.end(),p=!1,f()}}}function $s(l){let e,t,n,s,i,o,a,c=l[1]&&ws(l);const p=l[9].header,f=yl(p,l,l[8],bs);return{c(){e=_("div"),c&&c.c(),t=b(),f&&f.c(),n=b(),s=_("button"),s.innerHTML='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-kno8vc"><path d="M18 6L6 18M6 6l12 12"></path></svg>',u(s,"class","modal-close svelte-kno8vc"),u(s,"aria-label","Close"),u(e,"class","modal-header svelte-kno8vc")},m(d,m){w(d,e,m),c&&c.m(e,null),r(e,t),f&&f.m(e,null),r(e,n),r(e,s),i=!0,o||(a=Z(s,"click",l[3]),o=!0)},p(d,m){d[1]?c?c.p(d,m):(c=ws(d),c.c(),c.m(e,t)):c&&(c.d(1),c=null),f&&f.p&&(!i||m&256)&&Sl(f,p,d,d[8],i?Cl(p,d[8],m,Tc):zl(d[8]),bs)},i(d){i||(N(f,d),i=!0)},o(d){R(f,d),i=!1},d(d){d&&$(e),c&&c.d(),f&&f.d(d),o=!1,a()}}}function ws(l){let e,t;return{c(){e=_("h3"),t=z(l[1]),u(e,"class","svelte-kno8vc")},m(n,s){w(n,e,s),r(e,t)},p(n,s){s&2&&B(t,n[1])},d(n){n&&$(e)}}}function ys(l){let e,t;const n=l[9].footer,s=yl(n,l,l[8],gs);return{c(){e=_("div"),s&&s.c(),u(e,"class","modal-footer svelte-kno8vc")},m(i,o){w(i,e,o),s&&s.m(e,null),t=!0},p(i,o){s&&s.p&&(!t||o&256)&&Sl(s,n,i,i[8],t?Cl(n,i[8],o,Dc):zl(i[8]),gs)},i(i){t||(N(s,i),t=!0)},o(i){R(s,i),t=!1},d(i){i&&$(e),s&&s.d(i)}}}function qc(l){let e,t,n,s,i=l[0]&&ks(l);return{c(){i&&i.c(),e=Ge()},m(o,a){i&&i.m(o,a),w(o,e,a),t=!0,n||(s=Z(window,"keydown",l[5]),n=!0)},p(o,[a]){o[0]?i?(i.p(o,a),a&1&&N(i,1)):(i=ks(o),i.c(),N(i,1),i.m(e.parentNode,e)):i&&(De(),R(i,1,1,()=>{i=null}),Te())},i(o){t||(N(i),t=!0)},o(o){R(i),t=!1},d(o){o&&$(e),i&&i.d(o),n=!1,s()}}}function Ec(l,e,t){let{$$slots:n={},$$scope:s}=e;const i=jr(n);let{open:o=!1}=e,{title:a=""}=e,{width:c="500px"}=e,{closeOnOverlay:p=!0}=e;const f=ln();function d(){f("close")}function m(g){p&&g.target===g.currentTarget&&d()}function v(g){g.key==="Escape"&&d()}return l.$$set=g=>{"open"in g&&t(0,o=g.open),"title"in g&&t(1,a=g.title),"width"in g&&t(2,c=g.width),"closeOnOverlay"in g&&t(7,p=g.closeOnOverlay),"$$scope"in g&&t(8,s=g.$$scope)},[o,a,c,d,m,v,i,p,s,n]}class Ml extends Pt{constructor(e){super(),Et(this,e,Ec,qc,zt,{open:0,title:1,width:2,closeOnOverlay:7})}}function Cs(l,e,t){const n=l.slice();n[29]=e[t];const s=Ic(n[29]);n[30]=s;const i=mn(n[30]);n[31]=i;const o=Bc(n[29]);n[32]=o;const a=n[8][n[30]];return n[33]=a,n}function Ss(l){let e;return{c(){e=_("span"),e.textContent="⚠",u(e,"class","health-warn svelte-3mbtsx"),u(e,"title","High resource usage")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function zs(l){let e;return{c(){e=_("span"),e.textContent="⚠️",u(e,"class","agent-warn svelte-3mbtsx"),u(e,"title","Agent outdated")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Pc(l){let e;return{c(){e=_("span"),e.textContent="offline",u(e,"class","metric-inline offline svelte-3mbtsx")},m(t,n){w(t,e,n)},p:pe,d(t){t&&$(e)}}}function Nc(l){let e,t,n,s,i;return{c(){e=_("span"),t=b(),n=_("span"),s=b(),i=_("span"),u(e,"class","metric-skeleton svelte-3mbtsx"),u(n,"class","metric-skeleton svelte-3mbtsx"),u(i,"class","metric-skeleton svelte-3mbtsx")},m(o,a){w(o,e,a),w(o,t,a),w(o,n,a),w(o,s,a),w(o,i,a)},p:pe,d(o){o&&($(e),$(t),$(n),$(s),$(i))}}}function Lc(l){let e,t,n=l[3].cpu.toFixed(0)+"",s,i,o,a,c,p,f=l[3].mem.toFixed(0)+"",d,m,v,g,h,S,y=l[3].disk.toFixed(0)+"",k,D,T,q,P,C=(l[3].netIn||l[3].netOut)&&Ds(l);return{c(){e=_("span"),t=z("CPU "),s=z(n),i=z("%"),a=b(),c=_("span"),p=z("MEM "),d=z(f),m=z("%"),g=b(),h=_("span"),S=z("DISK "),k=z(y),D=z("%"),q=b(),C&&C.c(),P=Ge(),u(e,"class",o="metric-inline "+Il(l[3].cpu)+" svelte-3mbtsx"),u(c,"class",v="metric-inline "+Il(l[3].mem)+" svelte-3mbtsx"),u(h,"class",T="metric-inline "+Il(l[3].disk)+" svelte-3mbtsx")},m(L,O){w(L,e,O),r(e,t),r(e,s),r(e,i),w(L,a,O),w(L,c,O),r(c,p),r(c,d),r(c,m),w(L,g,O),w(L,h,O),r(h,S),r(h,k),r(h,D),w(L,q,O),C&&C.m(L,O),w(L,P,O)},p(L,O){O[0]&8&&n!==(n=L[3].cpu.toFixed(0)+"")&&B(s,n),O[0]&8&&o!==(o="metric-inline "+Il(L[3].cpu)+" svelte-3mbtsx")&&u(e,"class",o),O[0]&8&&f!==(f=L[3].mem.toFixed(0)+"")&&B(d,f),O[0]&8&&v!==(v="metric-inline "+Il(L[3].mem)+" svelte-3mbtsx")&&u(c,"class",v),O[0]&8&&y!==(y=L[3].disk.toFixed(0)+"")&&B(k,y),O[0]&8&&T!==(T="metric-inline "+Il(L[3].disk)+" svelte-3mbtsx")&&u(h,"class",T),L[3].netIn||L[3].netOut?C?C.p(L,O):(C=Ds(L),C.c(),C.m(P.parentNode,P)):C&&(C.d(1),C=null)},d(L){L&&($(e),$(a),$(c),$(g),$(h),$(q),$(P)),C&&C.d(L)}}}function Ds(l){let e,t,n=pn(l[3].netIn)+"",s,i,o=pn(l[3].netOut)+"",a;return{c(){e=_("span"),t=z("↓"),s=z(n),i=z(" ↑"),a=z(o),u(e,"class","metric-inline net svelte-3mbtsx")},m(c,p){w(c,e,p),r(e,t),r(e,s),r(e,i),r(e,a)},p(c,p){p[0]&8&&n!==(n=pn(c[3].netIn)+"")&&B(s,n),p[0]&8&&o!==(o=pn(c[3].netOut)+"")&&B(a,o)},d(c){c&&$(e)}}}function Ts(l){let e,t;return e=new Je({props:{variant:"info",$$slots:{default:[Mc]},$$scope:{ctx:l}}}),{c(){ce(e.$$.fragment)},m(n,s){re(e,n,s),t=!0},p(n,s){const i={};s[0]&1|s[1]&32&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){ae(e,n)}}}function Mc(l){let e=l[0].project+"",t;return{c(){t=z(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&1&&e!==(e=n[0].project+"")&&B(t,e)},d(n){n&&$(t)}}}function Rc(l){let e,t=me(l[6]),n=[];for(let s=0;s<t.length;s+=1)n[s]=qs(Cs(l,t,s));return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=Ge()},m(s,i){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(s,i);w(s,e,i)},p(s,i){if(i[0]&459072){t=me(s[6]);let o;for(o=0;o<t.length;o+=1){const a=Cs(s,t,o);n[o]?n[o].p(a,i):(n[o]=qs(a),n[o].c(),n[o].m(e.parentNode,e))}for(;o<n.length;o+=1)n[o].d(1);n.length=t.length}},d(s){s&&$(e),Re(n,s)}}}function Ac(l){let e;return{c(){e=_("span"),e.textContent="No containers",u(e,"class","empty-text svelte-3mbtsx")},m(t,n){w(t,e,n)},p:pe,d(t){t&&$(e)}}}function Oc(l){let e;return{c(){e=_("span"),e.textContent="Loading...",u(e,"class","loading-text svelte-3mbtsx")},m(t,n){w(t,e,n)},p:pe,d(t){t&&$(e)}}}function qs(l){let e,t,n,s,i,o=l[31]+"",a,c,p,f,d=l[33]==="restart"?"...":"↻",m,v,g,h,S,y,k,D,T,q,P,C;function L(){return l[23](l[30])}function O(){return l[24](l[30])}function A(){return l[25](l[30])}return{c(){e=_("div"),t=_("span"),s=b(),i=_("span"),a=z(o),c=b(),p=_("div"),f=_("button"),m=z(d),g=b(),h=_("button"),h.textContent="📋",S=b(),y=_("button"),k=z("×"),T=b(),u(t,"class",n="container-status "+Es(l[32])+" svelte-3mbtsx"),u(i,"class","container-name svelte-3mbtsx"),u(f,"class","pill-btn svelte-3mbtsx"),u(f,"title","Restart"),f.disabled=v=l[33],u(h,"class","pill-btn svelte-3mbtsx"),u(h,"title","Logs"),u(y,"class","pill-btn danger svelte-3mbtsx"),u(y,"title","Remove"),y.disabled=D=l[33],u(p,"class","container-actions svelte-3mbtsx"),u(e,"class","container-pill svelte-3mbtsx"),u(e,"title",q=l[30]),Ce(e,"busy",l[33])},m(j,U){w(j,e,U),r(e,t),r(e,s),r(e,i),r(i,a),r(e,c),r(e,p),r(p,f),r(f,m),r(p,g),r(p,h),r(p,S),r(p,y),r(y,k),r(e,T),P||(C=[Z(f,"click",L),Z(h,"click",O),Z(y,"click",A)],P=!0)},p(j,U){l=j,U[0]&64&&n!==(n="container-status "+Es(l[32])+" svelte-3mbtsx")&&u(t,"class",n),U[0]&64&&o!==(o=l[31]+"")&&B(a,o),U[0]&320&&d!==(d=l[33]==="restart"?"...":"↻")&&B(m,d),U[0]&320&&v!==(v=l[33])&&(f.disabled=v),U[0]&320&&D!==(D=l[33])&&(y.disabled=D),U[0]&64&&q!==(q=l[30])&&u(e,"title",q),U[0]&320&&Ce(e,"busy",l[33])},d(j){j&&$(e),P=!1,He(C)}}}function jc(l){var fe;let e,t,n,s,i,o,a,c=(l[0].name||"Unnamed")+"",p,f,d,m,v,g,h,S=(((fe=l[0].region)==null?void 0:fe.slug)||l[0].region||"")+"",y,k,D,T,q,P,C,L,O,A,j,U,K,V=l[7]||l[9]?"...":"↻",F,E,M,G,I,J,H,Q,le,W=l[12]&&Ss(),X=l[13]&&zs();function x(te,se){if(te[4]&&te[3])return Lc;if(te[4]&&te[9])return Nc;if(!te[4])return Pc}let _e=x(l),$e=_e&&_e(l),he=l[1]&&l[0].project&&Ts(l);function ne(te,se){return te[7]&&te[6].length===0?Oc:te[6].length===0&&te[2]?Ac:Rc}let ve=ne(l),we=ve(l);return{c(){e=_("div"),t=_("div"),n=_("div"),s=_("span"),o=b(),a=_("span"),p=z(c),f=b(),W&&W.c(),d=b(),m=_("code"),v=z(l[10]),g=b(),h=_("span"),y=z(S),k=b(),X&&X.c(),D=b(),T=_("div"),$e&&$e.c(),q=b(),P=_("span"),C=z("£"),L=z(l[11]),O=z("/mo"),A=b(),j=_("div"),he&&he.c(),U=b(),K=_("button"),F=z(V),M=b(),G=_("button"),G.textContent="🗑️",I=b(),J=_("div"),we.c(),u(s,"class",i="status-dot "+l[14](l[5])+" svelte-3mbtsx"),u(a,"class","server-name svelte-3mbtsx"),u(m,"class","server-ip svelte-3mbtsx"),u(h,"class","server-meta svelte-3mbtsx"),u(n,"class","server-info svelte-3mbtsx"),u(P,"class","metric-inline cost svelte-3mbtsx"),u(T,"class","server-metrics-inline svelte-3mbtsx"),u(K,"class","icon-btn svelte-3mbtsx"),u(K,"title","Refresh"),K.disabled=E=l[7]||l[9],u(G,"class","icon-btn danger svelte-3mbtsx"),u(G,"title","Destroy"),u(j,"class","server-actions svelte-3mbtsx"),u(t,"class","server-header svelte-3mbtsx"),u(J,"class","containers svelte-3mbtsx"),u(e,"class","server-card svelte-3mbtsx")},m(te,se){w(te,e,se),r(e,t),r(t,n),r(n,s),r(n,o),r(n,a),r(a,p),r(n,f),W&&W.m(n,null),r(n,d),r(n,m),r(m,v),r(n,g),r(n,h),r(h,y),r(n,k),X&&X.m(n,null),r(t,D),r(t,T),$e&&$e.m(T,null),r(T,q),r(T,P),r(P,C),r(P,L),r(P,O),r(t,A),r(t,j),he&&he.m(j,null),r(j,U),r(j,K),r(K,F),r(j,M),r(j,G),r(e,I),r(e,J),we.m(J,null),H=!0,Q||(le=[Z(K,"click",l[19]),Z(G,"click",l[22])],Q=!0)},p(te,se){var Ee;(!H||se[0]&32&&i!==(i="status-dot "+te[14](te[5])+" svelte-3mbtsx"))&&u(s,"class",i),(!H||se[0]&1)&&c!==(c=(te[0].name||"Unnamed")+"")&&B(p,c),te[12]?W||(W=Ss(),W.c(),W.m(n,d)):W&&(W.d(1),W=null),(!H||se[0]&1024)&&B(v,te[10]),(!H||se[0]&1)&&S!==(S=(((Ee=te[0].region)==null?void 0:Ee.slug)||te[0].region||"")+"")&&B(y,S),te[13]?X||(X=zs(),X.c(),X.m(n,null)):X&&(X.d(1),X=null),_e===(_e=x(te))&&$e?$e.p(te,se):($e&&$e.d(1),$e=_e&&_e(te),$e&&($e.c(),$e.m(T,q))),(!H||se[0]&2048)&&B(L,te[11]),te[1]&&te[0].project?he?(he.p(te,se),se[0]&3&&N(he,1)):(he=Ts(te),he.c(),N(he,1),he.m(j,U)):he&&(De(),R(he,1,1,()=>{he=null}),Te()),(!H||se[0]&640)&&V!==(V=te[7]||te[9]?"...":"↻")&&B(F,V),(!H||se[0]&640&&E!==(E=te[7]||te[9]))&&(K.disabled=E),ve===(ve=ne(te))&&we?we.p(te,se):(we.d(1),we=ve(te),we&&(we.c(),we.m(J,null)))},i(te){H||(N(he),H=!0)},o(te){R(he),H=!1},d(te){te&&$(e),W&&W.d(),X&&X.d(),$e&&$e.d(),he&&he.d(),we.d(),Q=!1,He(le)}}}function Fc(l){return l.includes("4gb")?24:l.includes("2gb")?12:l.includes("1gb")?6:l.includes("512mb")?4:6}function Es(l){if(!l)return"gray";const e=l.toLowerCase();return e==="running"?"green":e==="exited"||e==="stopped"?"yellow":e==="restarting"?"blue":"red"}function Il(l){return l>=90?"danger":l>=70?"warning":"ok"}function Ic(l){return l.Names&&typeof l.Names=="string"?l.Names.replace(/^\//,""):Array.isArray(l.Names)&&l.Names.length>0?l.Names[0].replace(/^\//,""):l.Name?l.Name.replace(/^\//,""):l.name?l.name:l.ID?l.ID.substring(0,12):l.Id?l.Id.substring(0,12):"unknown"}function Bc(l){return l.State||l.state||l.Status||"unknown"}function mn(l){if(!l)return"unknown";const e=l.split("-");return e.length>=3&&e[0].length<=10?e.slice(2).join("-"):l}function pn(l){return l?l<1024?`${l}B`:l<1048576?`${(l/1024).toFixed(0)}K`:l<1073741824?`${(l/1048576).toFixed(1)}M`:`${(l/1073741824).toFixed(1)}G`:"0"}function Uc(l,e,t){let n,s,i,o,a,c,p,f;ct(l,Zr,E=>t(21,f=E));let{server:d}=e,{showProject:m=!1}=e;const v=ln();let g=[],h=!1,S=!1,y={},k=null,D=!1;function T(E){switch(E){case"active":case"online":return"green";case"new":case"starting":return"blue";case"off":case"stopped":return"yellow";default:return"red"}}function q(E){v(E,{server:d})}async function P(){if(!(!i||!f)){t(7,h=!0);try{const E=await Oe("GET",`/infra/agent/${n}/containers?do_token=${f}`);t(6,g=E.containers||[]),t(2,S=!0)}catch(E){console.error("Failed to load containers:",E),t(6,g=[])}finally{t(7,h=!1)}}}async function C(){var E,M,G,I,J;if(!(!i||!f)){t(9,D=!0);try{const H=await Oe("GET",`/infra/agent/${n}/metrics?do_token=${f}`);t(3,k={cpu:((E=H.system)==null?void 0:E.load_1m)||0,mem:((M=H.system)==null?void 0:M.mem_percent)||0,disk:((G=H.system)==null?void 0:G.disk_percent)||0,netIn:((I=H.system)==null?void 0:I.net_in_bytes)||0,netOut:((J=H.system)==null?void 0:J.net_out_bytes)||0})}catch(H){console.error("Failed to load metrics:",H)}finally{t(9,D=!1)}}}async function L(E){if(f){t(8,y[E]="restart",y);try{await Oe("POST",`/infra/agent/${n}/containers/${E}/restart?do_token=${f}`),be.success(`Restarted ${mn(E)}`),await P()}catch(M){be.error(`Failed: ${M.message}`)}finally{t(8,y[E]=null,y)}}}async function O(E){if(f&&confirm(`Remove "${mn(E)}"?`)){t(8,y[E]="remove",y);try{await Oe("POST",`/infra/agent/${n}/containers/${E}/stop?do_token=${f}`).catch(()=>{}),await Oe("POST",`/infra/agent/${n}/containers/${E}/remove?do_token=${f}`),be.success(`Removed ${mn(E)}`),await P()}catch(M){be.error(`Failed: ${M.message}`)}finally{t(8,y[E]=null,y)}}}function A(E){v("viewLogs",{server:d,containerName:E})}async function j(){await Promise.all([P(),C()])}const U=()=>q("destroy"),K=E=>L(E),V=E=>A(E),F=E=>O(E);return l.$$set=E=>{"server"in E&&t(0,d=E.server),"showProject"in E&&t(1,m=E.showProject)},l.$$.update=()=>{var E,M,G;l.$$.dirty[0]&1&&t(10,n=d.ip||((G=(M=(E=d.networks)==null?void 0:E.v4)==null?void 0:M[0])==null?void 0:G.ip_address)||"N/A"),l.$$.dirty[0]&1&&t(5,s=d.status||"unknown"),l.$$.dirty[0]&32&&t(4,i=s==="active"||s==="online"),l.$$.dirty[0]&1&&t(20,o=d.agent_version),l.$$.dirty[0]&1048576&&t(13,a=o&&o!==Za),l.$$.dirty[0]&8&&t(12,c=k&&(k.cpu>80||k.mem>80||k.disk>80)),l.$$.dirty[0]&1&&t(11,p=Fc(d.size_slug||d.size||"")),l.$$.dirty[0]&2097172&&i&&!S&&f&&(P(),C())},[d,m,S,k,i,s,g,h,y,D,n,p,c,a,T,q,L,O,A,j,o,f,U,K,V,F]}class Hc extends Pt{constructor(e){super(),Et(this,e,Uc,jc,zt,{server:0,showProject:1},null,[-1,-1])}}function Ps(l,e,t){const n=l.slice();return n[89]=e[t],n}function Ns(l,e,t){const n=l.slice();return n[92]=e[t],n}function Ls(l,e,t){const n=l.slice();return n[95]=e[t],n}function Ms(l,e,t){const n=l.slice();return n[98]=e[t],n}function Rs(l,e,t){const n=l.slice();return n[101]=e[t],n}function As(l,e,t){const n=l.slice();return n[104]=e[t],n}function Os(l,e,t){const n=l.slice();return n[107]=e[t],n}function js(l){let e,t=l[107]+"",n,s;return{c(){e=_("option"),n=z(t),e.__value=s=l[107],ee(e,e.__value)},m(i,o){w(i,e,o),r(e,n)},p(i,o){o[0]&1073741824&&t!==(t=i[107]+"")&&B(n,t),o[0]&1073741824&&s!==(s=i[107])&&(e.__value=s,ee(e,e.__value))},d(i){i&&$(e)}}}function Fs(l){let e,t=l[104]+"",n,s;return{c(){e=_("option"),n=z(t),e.__value=s=l[104],ee(e,e.__value)},m(i,o){w(i,e,o),r(e,n)},p(i,o){o[0]&536870912&&t!==(t=i[104]+"")&&B(n,t),o[0]&536870912&&s!==(s=i[104])&&(e.__value=s,ee(e,e.__value))},d(i){i&&$(e)}}}function Is(l){let e,t,n,s;const i=[Vc,Wc,Gc],o=[];function a(c,p){return c[25]?0:c[28].length?2:1}return t=a(l),n=o[t]=i[t](l),{c(){e=_("div"),n.c(),u(e,"class","section-content svelte-16pmxmk")},m(c,p){w(c,e,p),o[t].m(e,null),s=!0},p(c,p){let f=t;t=a(c),t===f?o[t].p(c,p):(De(),R(o[f],1,1,()=>{o[f]=null}),Te(),n=o[t],n?n.p(c,p):(n=o[t]=i[t](c),n.c()),N(n,1),n.m(e,null))},i(c){s||(N(n),s=!0)},o(c){R(n),s=!1},d(c){c&&$(e),o[t].d()}}}function Gc(l){let e=[],t=new Map,n,s,i=me(l[28]);const o=a=>a[101].id;for(let a=0;a<i.length;a+=1){let c=Rs(l,i,a),p=o(c);t.set(p,e[a]=Bs(p,c))}return{c(){for(let a=0;a<e.length;a+=1)e[a].c();n=Ge()},m(a,c){for(let p=0;p<e.length;p+=1)e[p]&&e[p].m(a,c);w(a,n,c),s=!0},p(a,c){c[0]&268435456|c[1]&768&&(i=me(a[28]),De(),e=Jr(e,c,o,1,a,i,t,n.parentNode,Vr,Bs,n,Rs),Te())},i(a){if(!s){for(let c=0;c<i.length;c+=1)N(e[c]);s=!0}},o(a){for(let c=0;c<e.length;c+=1)R(e[c]);s=!1},d(a){a&&$(n);for(let c=0;c<e.length;c+=1)e[c].d(a)}}}function Wc(l){let e;function t(i,o){return i[1]||i[2]?Kc:Jc}let n=t(l),s=n(l);return{c(){e=_("div"),s.c(),u(e,"class","empty-msg svelte-16pmxmk")},m(i,o){w(i,e,o),s.m(e,null)},p(i,o){n!==(n=t(i))&&(s.d(1),s=n(i),s&&(s.c(),s.m(e,null)))},i:pe,o:pe,d(i){i&&$(e),s.d()}}}function Vc(l){let e;return{c(){e=_("div"),e.innerHTML='<div class="skeleton-card svelte-16pmxmk"></div> <div class="skeleton-card svelte-16pmxmk"></div>',u(e,"class","loading-skeleton svelte-16pmxmk")},m(t,n){w(t,e,n)},p:pe,i:pe,o:pe,d(t){t&&$(e)}}}function Bs(l,e){let t,n,s;return n=new Hc({props:{server:e[101]}}),n.$on("destroy",e[39]),n.$on("viewLogs",e[40]),{key:l,first:null,c(){t=Ge(),ce(n.$$.fragment),this.first=t},m(i,o){w(i,t,o),re(n,i,o),s=!0},p(i,o){e=i;const a={};o[0]&268435456&&(a.server=e[101]),n.$set(a)},i(i){s||(N(n.$$.fragment,i),s=!0)},o(i){R(n.$$.fragment,i),s=!1},d(i){i&&$(t),ae(n,i)}}}function Jc(l){let e;return{c(){e=z('No servers. Click "+ Add" to provision.')},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Kc(l){let e;return{c(){e=z("No servers match filters")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Us(l){let e,t,n,s,i,o,a,c;const p=[Zc,Qc,Yc],f=[];function d(h,S){return h[17]===null?0:h[17].exists?1:2}i=d(l),o=f[i]=p[i](l);function m(h,S){return h[5]?lu:h[4].length?eu:tu}let v=m(l),g=v(l);return{c(){e=_("div"),t=_("div"),n=_("span"),n.textContent="Base Snapshot:",s=b(),o.c(),a=b(),g.c(),u(n,"class","base-label svelte-16pmxmk"),u(t,"class","base-snapshot-row svelte-16pmxmk"),u(e,"class","section-content svelte-16pmxmk")},m(h,S){w(h,e,S),r(e,t),r(t,n),r(t,s),f[i].m(t,null),r(e,a),g.m(e,null),c=!0},p(h,S){let y=i;i=d(h),i===y?f[i].p(h,S):(De(),R(f[y],1,1,()=>{f[y]=null}),Te(),o=f[i],o?o.p(h,S):(o=f[i]=p[i](h),o.c()),N(o,1),o.m(t,null)),v===(v=m(h))&&g?g.p(h,S):(g.d(1),g=v(h),g&&(g.c(),g.m(e,null)))},i(h){c||(N(o),c=!0)},o(h){R(o),c=!1},d(h){h&&$(e),f[i].d(),g.d()}}}function Yc(l){let e,t,n,s;return e=new Je({props:{variant:"warning",$$slots:{default:[Xc]},$$scope:{ctx:l}}}),{c(){ce(e.$$.fragment),t=b(),n=_("span"),n.textContent='Use "+ Build" to create',u(n,"class","base-hint svelte-16pmxmk")},m(i,o){re(e,i,o),w(i,t,o),w(i,n,o),s=!0},p(i,o){const a={};o[3]&131072&&(a.$$scope={dirty:o,ctx:i}),e.$set(a)},i(i){s||(N(e.$$.fragment,i),s=!0)},o(i){R(e.$$.fragment,i),s=!1},d(i){i&&($(t),$(n)),ae(e,i)}}}function Qc(l){let e,t;return e=new Je({props:{variant:"success",$$slots:{default:[xc]},$$scope:{ctx:l}}}),{c(){ce(e.$$.fragment)},m(n,s){re(e,n,s),t=!0},p(n,s){const i={};s[0]&131072|s[3]&131072&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){ae(e,n)}}}function Zc(l){let e;return{c(){e=_("span"),e.textContent="checking...",u(e,"class","base-status checking svelte-16pmxmk")},m(t,n){w(t,e,n)},p:pe,i:pe,o:pe,d(t){t&&$(e)}}}function Xc(l){let e;return{c(){e=z("Not found")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function xc(l){let e,t=l[17].name+"",n;return{c(){e=z("✓ "),n=z(t)},m(s,i){w(s,e,i),w(s,n,i)},p(s,i){i[0]&131072&&t!==(t=s[17].name+"")&&B(n,t)},d(s){s&&($(e),$(n))}}}function eu(l){let e,t=me(l[4]),n=[];for(let s=0;s<t.length;s+=1)n[s]=Hs(Ms(l,t,s));return{c(){e=_("div");for(let s=0;s<n.length;s+=1)n[s].c();u(e,"class","snapshots-grid svelte-16pmxmk")},m(s,i){w(s,e,i);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null)},p(s,i){if(i[0]&16|i[1]&32){t=me(s[4]);let o;for(o=0;o<t.length;o+=1){const a=Ms(s,t,o);n[o]?n[o].p(a,i):(n[o]=Hs(a),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=t.length}},d(s){s&&$(e),Re(n,s)}}}function tu(l){let e;return{c(){e=_("div"),e.textContent="No custom snapshots",u(e,"class","empty-msg svelte-16pmxmk")},m(t,n){w(t,e,n)},p:pe,d(t){t&&$(e)}}}function lu(l){let e;return{c(){e=_("div"),e.textContent="Loading...",u(e,"class","empty-msg svelte-16pmxmk")},m(t,n){w(t,e,n)},p:pe,d(t){t&&$(e)}}}function Hs(l){let e,t,n=l[98].name+"",s,i,o,a=Ys(l[98].size_gigabytes*1024*1024*1024)+"",c,p,f=Qs(l[98].created_at)+"",d,m,v,g,h,S;function y(){return l[59](l[98])}return{c(){e=_("div"),t=_("span"),s=z(n),i=b(),o=_("span"),c=z(a),p=z(" • "),d=z(f),m=b(),v=_("button"),v.textContent="×",g=b(),u(t,"class","snap-name svelte-16pmxmk"),u(o,"class","snap-meta svelte-16pmxmk"),u(v,"class","pill-del svelte-16pmxmk"),u(v,"title","Delete"),u(e,"class","snapshot-pill svelte-16pmxmk")},m(k,D){w(k,e,D),r(e,t),r(t,s),r(e,i),r(e,o),r(o,c),r(o,p),r(o,d),r(e,m),r(e,v),r(e,g),h||(S=Z(v,"click",y),h=!0)},p(k,D){l=k,D[0]&16&&n!==(n=l[98].name+"")&&B(s,n),D[0]&16&&a!==(a=Ys(l[98].size_gigabytes*1024*1024*1024)+"")&&B(c,a),D[0]&16&&f!==(f=Qs(l[98].created_at)+"")&&B(d,f)},d(k){k&&$(e),h=!1,S()}}}function Gs(l){let e,t=l[95].label+"",n;return{c(){e=_("option"),n=z(t),e.__value=l[95].value,ee(e,e.__value)},m(s,i){w(s,e,i),r(e,n)},p:pe,d(s){s&&$(e)}}}function Ws(l){let e,t=l[92].label+"",n;return{c(){e=_("option"),n=z(t),e.__value=l[92].value,ee(e,e.__value)},m(s,i){w(s,e,i),r(e,n)},p:pe,d(s){s&&$(e)}}}function nu(l){let e,t,n,s,i,o,a,c,p,f,d,m,v,g,h,S,y,k,D,T,q,P,C,L,O,A,j,U,K,V,F=me(l[33]),E=[];for(let I=0;I<F.length;I+=1)E[I]=Gs(Ls(l,F,I));let M=me(l[34]),G=[];for(let I=0;I<M.length;I+=1)G[I]=Ws(Ns(l,M,I));return{c(){e=_("div"),t=_("div"),n=_("label"),n.textContent="Name",s=b(),i=_("input"),o=b(),a=_("div"),c=_("label"),c.textContent="Project",p=b(),f=_("input"),d=b(),m=_("div"),v=_("label"),v.textContent="Env",g=b(),h=_("select"),S=_("option"),S.textContent="prod",y=_("option"),y.textContent="staging",k=_("option"),k.textContent="dev",D=b(),T=_("div"),q=_("label"),q.textContent="Region",P=b(),C=_("select");for(let I=0;I<E.length;I+=1)E[I].c();L=b(),O=_("div"),A=_("label"),A.textContent="Size",j=b(),U=_("select");for(let I=0;I<G.length;I+=1)G[I].c();u(n,"class","svelte-16pmxmk"),u(i,"type","text"),u(i,"placeholder","web-01"),u(i,"class","svelte-16pmxmk"),u(t,"class","form-group full svelte-16pmxmk"),u(c,"class","svelte-16pmxmk"),u(f,"type","text"),u(f,"placeholder","myapp"),u(f,"class","svelte-16pmxmk"),u(a,"class","form-group svelte-16pmxmk"),u(v,"class","svelte-16pmxmk"),S.__value="prod",ee(S,S.__value),y.__value="staging",ee(y,y.__value),k.__value="dev",ee(k,k.__value),u(h,"class","svelte-16pmxmk"),l[24].env===void 0&&lt(()=>l[63].call(h)),u(m,"class","form-group svelte-16pmxmk"),u(q,"class","svelte-16pmxmk"),u(C,"class","svelte-16pmxmk"),l[24].region===void 0&&lt(()=>l[64].call(C)),u(T,"class","form-group svelte-16pmxmk"),u(A,"class","svelte-16pmxmk"),u(U,"class","svelte-16pmxmk"),l[24].size===void 0&&lt(()=>l[65].call(U)),u(O,"class","form-group svelte-16pmxmk"),u(e,"class","form-grid svelte-16pmxmk")},m(I,J){w(I,e,J),r(e,t),r(t,n),r(t,s),r(t,i),ee(i,l[24].name),r(e,o),r(e,a),r(a,c),r(a,p),r(a,f),ee(f,l[24].project),r(e,d),r(e,m),r(m,v),r(m,g),r(m,h),r(h,S),r(h,y),r(h,k),Pe(h,l[24].env,!0),r(e,D),r(e,T),r(T,q),r(T,P),r(T,C);for(let H=0;H<E.length;H+=1)E[H]&&E[H].m(C,null);Pe(C,l[24].region,!0),r(e,L),r(e,O),r(O,A),r(O,j),r(O,U);for(let H=0;H<G.length;H+=1)G[H]&&G[H].m(U,null);Pe(U,l[24].size,!0),K||(V=[Z(i,"input",l[61]),Z(f,"input",l[62]),Z(h,"change",l[63]),Z(C,"change",l[64]),Z(U,"change",l[65])],K=!0)},p(I,J){if(J[0]&16777216&&i.value!==I[24].name&&ee(i,I[24].name),J[0]&16777216&&f.value!==I[24].project&&ee(f,I[24].project),J[0]&16777216&&Pe(h,I[24].env),J[1]&4){F=me(I[33]);let H;for(H=0;H<F.length;H+=1){const Q=Ls(I,F,H);E[H]?E[H].p(Q,J):(E[H]=Gs(Q),E[H].c(),E[H].m(C,null))}for(;H<E.length;H+=1)E[H].d(1);E.length=F.length}if(J[0]&16777216&&Pe(C,I[24].region),J[1]&8){M=me(I[34]);let H;for(H=0;H<M.length;H+=1){const Q=Ns(I,M,H);G[H]?G[H].p(Q,J):(G[H]=Ws(Q),G[H].c(),G[H].m(U,null))}for(;H<G.length;H+=1)G[H].d(1);G.length=M.length}J[0]&16777216&&Pe(U,I[24].size)},d(I){I&&$(e),Re(E,I),Re(G,I),K=!1,He(V)}}}function su(l){let e;return{c(){e=z("Cancel")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function ou(l){let e;return{c(){e=z("🚀 Provision")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function iu(l){let e,t,n,s,i;return t=new je({props:{variant:"ghost",$$slots:{default:[su]},$$scope:{ctx:l}}}),t.$on("click",l[60]),s=new je({props:{variant:"primary",$$slots:{default:[ou]},$$scope:{ctx:l}}}),s.$on("click",l[38]),{c(){e=_("div"),ce(t.$$.fragment),n=b(),ce(s.$$.fragment),u(e,"slot","footer")},m(o,a){w(o,e,a),re(t,e,null),r(e,n),re(s,e,null),i=!0},p(o,a){const c={};a[3]&131072&&(c.$$scope={dirty:a,ctx:o}),t.$set(c);const p={};a[3]&131072&&(p.$$scope={dirty:a,ctx:o}),s.$set(p)},i(o){i||(N(t.$$.fragment,o),N(s.$$.fragment,o),i=!0)},o(o){R(t.$$.fragment,o),R(s.$$.fragment,o),i=!1},d(o){o&&$(e),ae(t),ae(s)}}}function ru(l){let e=l[20]?"...":"↻",t;return{c(){t=z(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&1048576&&e!==(e=n[20]?"...":"↻")&&B(t,e)},d(n){n&&$(t)}}}function au(l){let e,t,n,s,i,o,a,c,p,f,d,m,v,g,h,S,y,k,D,T,q=(l[26]||"No logs")+"",P,C,L,O;return k=new je({props:{variant:"ghost",size:"sm",disabled:l[20],$$slots:{default:[ru]},$$scope:{ctx:l}}}),k.$on("click",l[41]),{c(){e=_("div"),t=_("div"),n=_("input"),s=b(),i=_("div"),o=_("label"),o.textContent="Lines:",a=b(),c=_("select"),p=_("option"),p.textContent="100",f=_("option"),f.textContent="200",d=_("option"),d.textContent="500",m=_("option"),m.textContent="1000",v=b(),g=_("label"),h=_("input"),S=z(`
      Auto-refresh`),y=b(),ce(k.$$.fragment),D=b(),T=_("pre"),P=z(q),u(n,"type","text"),u(n,"placeholder","Search logs..."),u(n,"class","svelte-16pmxmk"),u(t,"class","logs-search svelte-16pmxmk"),u(o,"class","svelte-16pmxmk"),p.__value=100,ee(p,p.__value),f.__value=200,ee(f,f.__value),d.__value=500,ee(d,d.__value),m.__value=1e3,ee(m,m.__value),u(c,"class","svelte-16pmxmk"),l[21]===void 0&&lt(()=>l[69].call(c)),u(i,"class","logs-tail svelte-16pmxmk"),u(h,"type","checkbox"),u(h,"class","svelte-16pmxmk"),u(g,"class","logs-auto svelte-16pmxmk"),u(e,"class","logs-toolbar svelte-16pmxmk"),u(T,"class","logs-content large svelte-16pmxmk")},m(A,j){w(A,e,j),r(e,t),r(t,n),ee(n,l[6]),r(e,s),r(e,i),r(i,o),r(i,a),r(i,c),r(c,p),r(c,f),r(c,d),r(c,m),Pe(c,l[21],!0),r(e,v),r(e,g),r(g,h),h.checked=l[22],r(g,S),r(e,y),re(k,e,null),w(A,D,j),w(A,T,j),r(T,P),C=!0,L||(O=[Z(n,"input",l[68]),Z(c,"change",l[69]),Z(c,"change",l[41]),Z(h,"change",l[70]),Z(h,"change",l[42])],L=!0)},p(A,j){j[0]&64&&n.value!==A[6]&&ee(n,A[6]),j[0]&2097152&&Pe(c,A[21]),j[0]&4194304&&(h.checked=A[22]);const U={};j[0]&1048576&&(U.disabled=A[20]),j[0]&1048576|j[3]&131072&&(U.$$scope={dirty:j,ctx:A}),k.$set(U),(!C||j[0]&67108864)&&q!==(q=(A[26]||"No logs")+"")&&B(P,q)},i(A){C||(N(k.$$.fragment,A),C=!0)},o(A){R(k.$$.fragment,A),C=!1},d(A){A&&($(e),$(D),$(T)),ae(k),L=!1,He(O)}}}function cu(l){let e;return{c(){e=z("Close")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function uu(l){var p;let e,t,n=(((p=l[26])==null?void 0:p.split(`
`).length)||0)+"",s,i,o,a,c;return a=new je({props:{variant:"ghost",$$slots:{default:[cu]},$$scope:{ctx:l}}}),a.$on("click",l[67]),{c(){e=_("div"),t=_("span"),s=z(n),i=z(" lines"),o=b(),ce(a.$$.fragment),u(t,"class","logs-count svelte-16pmxmk"),u(e,"slot","footer")},m(f,d){w(f,e,d),r(e,t),r(t,s),r(t,i),r(e,o),re(a,e,null),c=!0},p(f,d){var v;(!c||d[0]&67108864)&&n!==(n=(((v=f[26])==null?void 0:v.split(`
`).length)||0)+"")&&B(s,n);const m={};d[3]&131072&&(m.$$scope={dirty:d,ctx:f}),a.$set(m)},i(f){c||(N(a.$$.fragment,f),c=!0)},o(f){R(a.$$.fragment,f),c=!1},d(f){f&&$(e),ae(a)}}}function fu(l){let e,t,n,s,i,o,a,c,p,f,d,m,v,g,h,S,y,k,D,T,q,P,C,L,O,A,j,U,K=me(l[31]),V=[];for(let F=0;F<K.length;F+=1)V[F]=Vs(Ps(l,K,F));return{c(){e=_("form"),t=_("div"),n=_("label"),n.textContent="Snapshot Name *",s=b(),i=_("input"),o=b(),a=_("div"),c=_("label"),c.textContent="Base Image",p=b(),f=_("select");for(let F=0;F<V.length;F+=1)V[F].c();d=b(),m=_("div"),v=_("label"),v.textContent="Pre-install",g=b(),h=_("div"),S=_("label"),y=_("input"),k=z(" Docker"),D=b(),T=_("label"),q=_("input"),P=z(" Nginx"),C=b(),L=_("label"),O=_("input"),A=z(" Certbot"),u(n,"for","snap-name"),u(n,"class","svelte-16pmxmk"),u(i,"id","snap-name"),u(i,"type","text"),u(i,"placeholder","my-custom-snapshot"),u(i,"class","svelte-16pmxmk"),u(t,"class","form-group svelte-16pmxmk"),u(c,"for","base-image"),u(c,"class","svelte-16pmxmk"),u(f,"id","base-image"),u(f,"class","svelte-16pmxmk"),l[13]===void 0&&lt(()=>l[76].call(f)),u(a,"class","form-group svelte-16pmxmk"),u(v,"class","svelte-16pmxmk"),u(y,"type","checkbox"),u(y,"class","svelte-16pmxmk"),u(S,"class","checkbox-item svelte-16pmxmk"),u(q,"type","checkbox"),u(q,"class","svelte-16pmxmk"),u(T,"class","checkbox-item svelte-16pmxmk"),u(O,"type","checkbox"),u(O,"class","svelte-16pmxmk"),u(L,"class","checkbox-item svelte-16pmxmk"),u(h,"class","checkbox-list svelte-16pmxmk"),u(m,"class","form-group svelte-16pmxmk")},m(F,E){w(F,e,E),r(e,t),r(t,n),r(t,s),r(t,i),ee(i,l[12]),r(e,o),r(e,a),r(a,c),r(a,p),r(a,f);for(let M=0;M<V.length;M+=1)V[M]&&V[M].m(f,null);Pe(f,l[13],!0),r(e,d),r(e,m),r(m,v),r(m,g),r(m,h),r(h,S),r(S,y),y.checked=l[14],r(S,k),r(h,D),r(h,T),r(T,q),q.checked=l[15],r(T,P),r(h,C),r(h,L),r(L,O),O.checked=l[16],r(L,A),j||(U=[Z(i,"input",l[75]),Z(f,"change",l[76]),Z(y,"change",l[77]),Z(q,"change",l[78]),Z(O,"change",l[79]),Z(e,"submit",wa(l[37]))],j=!0)},p(F,E){if(E[0]&4096&&i.value!==F[12]&&ee(i,F[12]),E[1]&1){K=me(F[31]);let M;for(M=0;M<K.length;M+=1){const G=Ps(F,K,M);V[M]?V[M].p(G,E):(V[M]=Vs(G),V[M].c(),V[M].m(f,null))}for(;M<V.length;M+=1)V[M].d(1);V.length=K.length}E[0]&8192|E[1]&1&&Pe(f,F[13]),E[0]&16384&&(y.checked=F[14]),E[0]&32768&&(q.checked=F[15]),E[0]&65536&&(O.checked=F[16])},i:pe,o:pe,d(F){F&&$(e),Re(V,F),j=!1,He(U)}}}function pu(l){var o;let e,t,n,s,i=((o=l[17])==null?void 0:o.exists)&&Js(l);return{c(){e=_("div"),t=_("p"),t.textContent="Creates the default base snapshot with Docker, Nginx, Certbot pre-installed. Required for provisioning new servers.",n=b(),i&&i.c(),u(t,"class","svelte-16pmxmk"),u(e,"class","snap-type-info svelte-16pmxmk")},m(a,c){w(a,e,c),r(e,t),r(e,n),i&&i.m(e,null),s=!0},p(a,c){var p;(p=a[17])!=null&&p.exists?i?(i.p(a,c),c[0]&131072&&N(i,1)):(i=Js(a),i.c(),N(i,1),i.m(e,null)):i&&(De(),R(i,1,1,()=>{i=null}),Te())},i(a){s||(N(i),s=!0)},o(a){R(i),s=!1},d(a){a&&$(e),i&&i.d()}}}function Vs(l){let e,t=l[89].label+"",n;return{c(){e=_("option"),n=z(t),e.__value=l[89].value,ee(e,e.__value)},m(s,i){w(s,e,i),r(e,n)},p:pe,d(s){s&&$(e)}}}function Js(l){let e,t;return e=new Je({props:{variant:"warning",$$slots:{default:[_u]},$$scope:{ctx:l}}}),{c(){ce(e.$$.fragment)},m(n,s){re(e,n,s),t=!0},p(n,s){const i={};s[0]&131072|s[3]&131072&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){ae(e,n)}}}function _u(l){let e,t=l[17].name+"",n;return{c(){e=z("⚠️ Base snapshot already exists: "),n=z(t)},m(s,i){w(s,e,i),w(s,n,i)},p(s,i){i[0]&131072&&t!==(t=s[17].name+"")&&B(n,t)},d(s){s&&($(e),$(n))}}}function du(l){let e,t,n,s,i,o,a,c,p,f,d;const m=[pu,fu],v=[];function g(h,S){return h[11]==="base"?0:1}return o=g(l),a=v[o]=m[o](l),{c(){e=_("div"),t=_("button"),t.textContent="🏗️ Base Snapshot",n=b(),s=_("button"),s.textContent="📸 Custom Snapshot",i=b(),a.c(),c=Ge(),u(t,"class","snap-type-btn svelte-16pmxmk"),Ce(t,"active",l[11]==="base"),u(s,"class","snap-type-btn svelte-16pmxmk"),Ce(s,"active",l[11]==="custom"),u(e,"class","snap-type-selector svelte-16pmxmk")},m(h,S){w(h,e,S),r(e,t),r(e,n),r(e,s),w(h,i,S),v[o].m(h,S),w(h,c,S),p=!0,f||(d=[Z(t,"click",l[73]),Z(s,"click",l[74])],f=!0)},p(h,S){(!p||S[0]&2048)&&Ce(t,"active",h[11]==="base"),(!p||S[0]&2048)&&Ce(s,"active",h[11]==="custom");let y=o;o=g(h),o===y?v[o].p(h,S):(De(),R(v[y],1,1,()=>{v[y]=null}),Te(),a=v[o],a?a.p(h,S):(a=v[o]=m[o](h),a.c()),N(a,1),a.m(c.parentNode,c))},i(h){p||(N(a),p=!0)},o(h){R(a),p=!1},d(h){h&&($(e),$(i),$(c)),v[o].d(h),f=!1,He(d)}}}function mu(l){let e;return{c(){e=z("Cancel")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function vu(l){let e;return{c(){e=z("🔨 Build")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function hu(l){let e;return{c(){e=z("Building...")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function gu(l){let e;function t(i,o){return i[10]?hu:vu}let n=t(l),s=n(l);return{c(){s.c(),e=Ge()},m(i,o){s.m(i,o),w(i,e,o)},p(i,o){n!==(n=t(i))&&(s.d(1),s=n(i),s&&(s.c(),s.m(e.parentNode,e)))},d(i){i&&$(e),s.d(i)}}}function bu(l){let e,t,n,s,i;return t=new je({props:{variant:"ghost",$$slots:{default:[mu]},$$scope:{ctx:l}}}),t.$on("click",l[72]),s=new je({props:{variant:"primary",disabled:l[10],$$slots:{default:[gu]},$$scope:{ctx:l}}}),s.$on("click",l[37]),{c(){e=_("div"),ce(t.$$.fragment),n=b(),ce(s.$$.fragment),u(e,"slot","footer")},m(o,a){w(o,e,a),re(t,e,null),r(e,n),re(s,e,null),i=!0},p(o,a){const c={};a[3]&131072&&(c.$$scope={dirty:a,ctx:o}),t.$set(c);const p={};a[0]&1024&&(p.disabled=o[10]),a[0]&1024|a[3]&131072&&(p.$$scope={dirty:a,ctx:o}),s.$set(p)},i(o){i||(N(t.$$.fragment,o),N(s.$$.fragment,o),i=!0)},o(o){R(t.$$.fragment,o),R(s.$$.fragment,o),i=!1},d(o){o&&$(e),ae(t),ae(s)}}}function ku(l){let e,t,n,s,i,o,a,c,p,f,d,m,v,g,h,S,y,k,D=Zs(l[7])+"",T,q,P,C,L,O,A,j=l[28].length+"",U,K,V,F=l[28].length===1?"SERVER":"SERVERS",E,M,G,I,J=l[27].containerCount+"",H,Q,le,W=l[27].containerCount===1?"CONTAINER":"CONTAINERS",X,x,_e,$e,he,ne=l[27].monthlyCost+"",ve,we,fe,te,se,Ee,ge=l[27].healthyContainers+"",Ve,Ot,rt=l[27].containerCount+"",mt,ke,Fe,Ye,Ke,Ze,Be,Dt,vt,st=l[8]?"▼":"▶",jt,$t,nl,Xt=_n(l[28].length,"Server")+"",xt,sl,Ft,el,hl,ht,wt,ol,yt,It,Gt,Yt,Qt=l[3]?"▼":"▶",il,rl,ul,Tt=_n(l[4].length,"Snapshot")+"",Wt,Bt,ye,Xe,Qe,gt,xe,ut,Ie,et,Tl,Nt,Ct,qt,Vt,Ut,We,fl,gl,tl=me(l[30]),ft=[];for(let ue=0;ue<tl.length;ue+=1)ft[ue]=js(Os(l,tl,ue));let ll=me(l[29]),pt=[];for(let ue=0;ue<ll.length;ue+=1)pt[ue]=Fs(As(l,ll,ue));let ot=l[8]&&Is(l),it=l[3]&&Us(l);function al(ue){l[66](ue)}let bt={title:"Provision Server",width:"400px",$$slots:{footer:[iu],default:[nu]},$$scope:{ctx:l}};l[23]!==void 0&&(bt.open=l[23]),Ie=new Ml({props:bt}),Kt.push(()=>Ll(Ie,"open",al));function Rl(ue){l[71](ue)}let ql={title:l[19],width:"1000px",$$slots:{footer:[uu],default:[au]},$$scope:{ctx:l}};l[18]!==void 0&&(ql.open=l[18]),Nt=new Ml({props:ql}),Kt.push(()=>Ll(Nt,"open",Rl));function Ol(ue){l[80](ue)}let cl={title:"Build Snapshot",width:"500px",$$slots:{footer:[bu],default:[du]},$$scope:{ctx:l}};return l[9]!==void 0&&(cl.open=l[9]),Vt=new Ml({props:cl}),Kt.push(()=>Ll(Vt,"open",Ol)),Vt.$on("close",l[81]),{c(){e=_("div"),t=_("div"),n=_("div"),s=_("label"),s.textContent="Project",i=b(),o=_("select"),a=_("option"),a.textContent="All";for(let ue=0;ue<ft.length;ue+=1)ft[ue].c();c=b(),p=_("div"),f=_("label"),f.textContent="Env",d=b(),m=_("select"),v=_("option"),v.textContent="All";for(let ue=0;ue<pt.length;ue+=1)pt[ue].c();g=b(),h=_("div"),S=b(),y=_("span"),k=z("Updated "),T=z(D),q=b(),P=_("button"),P.textContent="↻",C=b(),L=_("div"),O=_("div"),A=_("span"),U=z(j),K=b(),V=_("span"),E=z(F),M=b(),G=_("div"),I=_("span"),H=z(J),Q=b(),le=_("span"),X=z(W),x=b(),_e=_("div"),$e=_("span"),he=z("£"),ve=z(ne),we=b(),fe=_("span"),fe.textContent="/MONTH",te=b(),se=_("div"),Ee=_("span"),Ve=z(ge),Ot=z("/"),mt=z(rt),Fe=b(),Ye=_("span"),Ye.textContent="HEALTHY",Ke=b(),Ze=_("div"),Be=_("div"),Dt=_("div"),vt=_("span"),jt=z(st),$t=b(),nl=_("span"),xt=z(Xt),sl=b(),Ft=_("div"),el=_("button"),el.textContent="↻",hl=b(),ht=_("button"),ht.textContent="+ Add",wt=b(),ot&&ot.c(),ol=b(),yt=_("div"),It=_("div"),Gt=_("div"),Yt=_("span"),il=z(Qt),rl=b(),ul=_("span"),Wt=z(Tt),Bt=b(),ye=_("div"),Xe=_("button"),Xe.textContent="↻",Qe=b(),gt=_("button"),gt.textContent="+ Build",xe=b(),it&&it.c(),ut=b(),ce(Ie.$$.fragment),Tl=b(),ce(Nt.$$.fragment),qt=b(),ce(Vt.$$.fragment),u(s,"class","svelte-16pmxmk"),a.__value="",ee(a,a.__value),u(o,"class","svelte-16pmxmk"),l[1]===void 0&&lt(()=>l[54].call(o)),u(n,"class","filter-group svelte-16pmxmk"),u(f,"class","svelte-16pmxmk"),v.__value="",ee(v,v.__value),u(m,"class","svelte-16pmxmk"),l[2]===void 0&&lt(()=>l[55].call(m)),u(p,"class","filter-group svelte-16pmxmk"),u(h,"class","filter-spacer svelte-16pmxmk"),u(y,"class","last-updated svelte-16pmxmk"),u(P,"class","filter-refresh svelte-16pmxmk"),u(P,"title","Refresh"),u(t,"class","filter-bar svelte-16pmxmk"),u(A,"class","banner-value svelte-16pmxmk"),u(V,"class","banner-label svelte-16pmxmk"),u(O,"class","banner-metric svelte-16pmxmk"),u(I,"class","banner-value svelte-16pmxmk"),u(le,"class","banner-label svelte-16pmxmk"),u(G,"class","banner-metric svelte-16pmxmk"),u($e,"class","banner-value svelte-16pmxmk"),u(fe,"class","banner-label svelte-16pmxmk"),u(_e,"class","banner-metric svelte-16pmxmk"),u(Ee,"class",ke="banner-value "+(l[27].unhealthyContainers>0?"warning":"success")+" svelte-16pmxmk"),u(Ye,"class","banner-label svelte-16pmxmk"),u(se,"class","banner-metric svelte-16pmxmk"),u(L,"class","summary-banner svelte-16pmxmk"),u(vt,"class","expand-icon svelte-16pmxmk"),u(Dt,"class","section-title svelte-16pmxmk"),u(el,"class","section-btn svelte-16pmxmk"),u(ht,"class","section-btn primary svelte-16pmxmk"),u(Ft,"class","section-actions svelte-16pmxmk"),u(Be,"class","section-header svelte-16pmxmk"),u(Ze,"class","section svelte-16pmxmk"),Ce(Ze,"expanded",l[8]),u(Yt,"class","expand-icon svelte-16pmxmk"),u(Gt,"class","section-title svelte-16pmxmk"),u(Xe,"class","section-btn svelte-16pmxmk"),u(gt,"class","section-btn primary svelte-16pmxmk"),u(ye,"class","section-actions svelte-16pmxmk"),u(It,"class","section-header svelte-16pmxmk"),u(yt,"class","section svelte-16pmxmk"),Ce(yt,"expanded",l[3]),u(e,"class","infrastructure svelte-16pmxmk")},m(ue,ze){w(ue,e,ze),r(e,t),r(t,n),r(n,s),r(n,i),r(n,o),r(o,a);for(let Ue=0;Ue<ft.length;Ue+=1)ft[Ue]&&ft[Ue].m(o,null);Pe(o,l[1],!0),r(t,c),r(t,p),r(p,f),r(p,d),r(p,m),r(m,v);for(let Ue=0;Ue<pt.length;Ue+=1)pt[Ue]&&pt[Ue].m(m,null);Pe(m,l[2],!0),r(t,g),r(t,h),r(t,S),r(t,y),r(y,k),r(y,T),r(t,q),r(t,P),r(e,C),r(e,L),r(L,O),r(O,A),r(A,U),r(O,K),r(O,V),r(V,E),r(L,M),r(L,G),r(G,I),r(I,H),r(G,Q),r(G,le),r(le,X),r(L,x),r(L,_e),r(_e,$e),r($e,he),r($e,ve),r(_e,we),r(_e,fe),r(L,te),r(L,se),r(se,Ee),r(Ee,Ve),r(Ee,Ot),r(Ee,mt),r(se,Fe),r(se,Ye),r(e,Ke),r(e,Ze),r(Ze,Be),r(Be,Dt),r(Dt,vt),r(vt,jt),r(Dt,$t),r(Dt,nl),r(nl,xt),r(Be,sl),r(Be,Ft),r(Ft,el),r(Ft,hl),r(Ft,ht),r(Ze,wt),ot&&ot.m(Ze,null),r(e,ol),r(e,yt),r(yt,It),r(It,Gt),r(Gt,Yt),r(Yt,il),r(Gt,rl),r(Gt,ul),r(ul,Wt),r(It,Bt),r(It,ye),r(ye,Xe),r(ye,Qe),r(ye,gt),r(yt,xe),it&&it.m(yt,null),w(ue,ut,ze),re(Ie,ue,ze),w(ue,Tl,ze),re(Nt,ue,ze),w(ue,qt,ze),re(Vt,ue,ze),We=!0,fl||(gl=[Z(o,"change",l[54]),Z(m,"change",l[55]),Z(P,"click",l[0]),Z(el,"click",l[0]),Z(ht,"click",l[56]),Z(Ft,"click",Un(l[53])),Z(Be,"click",l[57]),Z(Xe,"click",l[35]),Z(gt,"click",l[32]),Z(ye,"click",Un(l[52])),Z(It,"click",l[58])],fl=!0)},p(ue,ze){if(ze[0]&1073741824){tl=me(ue[30]);let Me;for(Me=0;Me<tl.length;Me+=1){const at=Os(ue,tl,Me);ft[Me]?ft[Me].p(at,ze):(ft[Me]=js(at),ft[Me].c(),ft[Me].m(o,null))}for(;Me<ft.length;Me+=1)ft[Me].d(1);ft.length=tl.length}if(ze[0]&1073741826&&Pe(o,ue[1]),ze[0]&536870912){ll=me(ue[29]);let Me;for(Me=0;Me<ll.length;Me+=1){const at=As(ue,ll,Me);pt[Me]?pt[Me].p(at,ze):(pt[Me]=Fs(at),pt[Me].c(),pt[Me].m(m,null))}for(;Me<pt.length;Me+=1)pt[Me].d(1);pt.length=ll.length}ze[0]&536870916&&Pe(m,ue[2]),(!We||ze[0]&128)&&D!==(D=Zs(ue[7])+"")&&B(T,D),(!We||ze[0]&268435456)&&j!==(j=ue[28].length+"")&&B(U,j),(!We||ze[0]&268435456)&&F!==(F=ue[28].length===1?"SERVER":"SERVERS")&&B(E,F),(!We||ze[0]&134217728)&&J!==(J=ue[27].containerCount+"")&&B(H,J),(!We||ze[0]&134217728)&&W!==(W=ue[27].containerCount===1?"CONTAINER":"CONTAINERS")&&B(X,W),(!We||ze[0]&134217728)&&ne!==(ne=ue[27].monthlyCost+"")&&B(ve,ne),(!We||ze[0]&134217728)&&ge!==(ge=ue[27].healthyContainers+"")&&B(Ve,ge),(!We||ze[0]&134217728)&&rt!==(rt=ue[27].containerCount+"")&&B(mt,rt),(!We||ze[0]&134217728&&ke!==(ke="banner-value "+(ue[27].unhealthyContainers>0?"warning":"success")+" svelte-16pmxmk"))&&u(Ee,"class",ke),(!We||ze[0]&256)&&st!==(st=ue[8]?"▼":"▶")&&B(jt,st),(!We||ze[0]&268435456)&&Xt!==(Xt=_n(ue[28].length,"Server")+"")&&B(xt,Xt),ue[8]?ot?(ot.p(ue,ze),ze[0]&256&&N(ot,1)):(ot=Is(ue),ot.c(),N(ot,1),ot.m(Ze,null)):ot&&(De(),R(ot,1,1,()=>{ot=null}),Te()),(!We||ze[0]&256)&&Ce(Ze,"expanded",ue[8]),(!We||ze[0]&8)&&Qt!==(Qt=ue[3]?"▼":"▶")&&B(il,Qt),(!We||ze[0]&16)&&Tt!==(Tt=_n(ue[4].length,"Snapshot")+"")&&B(Wt,Tt),ue[3]?it?(it.p(ue,ze),ze[0]&8&&N(it,1)):(it=Us(ue),it.c(),N(it,1),it.m(yt,null)):it&&(De(),R(it,1,1,()=>{it=null}),Te()),(!We||ze[0]&8)&&Ce(yt,"expanded",ue[3]);const Ue={};ze[0]&25165824|ze[3]&131072&&(Ue.$$scope={dirty:ze,ctx:ue}),!et&&ze[0]&8388608&&(et=!0,Ue.open=ue[23],Nl(()=>et=!1)),Ie.$set(Ue);const tt={};ze[0]&524288&&(tt.title=ue[19]),ze[0]&74711104|ze[3]&131072&&(tt.$$scope={dirty:ze,ctx:ue}),!Ct&&ze[0]&262144&&(Ct=!0,tt.open=ue[18],Nl(()=>Ct=!1)),Nt.$set(tt);const nt={};ze[0]&261632|ze[3]&131072&&(nt.$$scope={dirty:ze,ctx:ue}),!Ut&&ze[0]&512&&(Ut=!0,nt.open=ue[9],Nl(()=>Ut=!1)),Vt.$set(nt)},i(ue){We||(N(ot),N(it),N(Ie.$$.fragment,ue),N(Nt.$$.fragment,ue),N(Vt.$$.fragment,ue),We=!0)},o(ue){R(ot),R(it),R(Ie.$$.fragment,ue),R(Nt.$$.fragment,ue),R(Vt.$$.fragment,ue),We=!1},d(ue){ue&&($(e),$(ut),$(Tl),$(qt)),Re(ft,ue),Re(pt,ue),ot&&ot.d(),it&&it.d(),ae(Ie,ue),ae(Nt,ue),ae(Vt,ue),fl=!1,He(gl)}}}function Ks(l){return l!=null&&l.length?l.reduce((e,t)=>{const n=t.size_slug||t.size||"";return n.includes("4gb")?e+24:n.includes("2gb")?e+12:n.includes("1gb")?e+6:n.includes("512mb")?e+4:e+6},0):0}function _n(l,e,t=null){return l===1?`${l} ${e}`:`${l} ${t||e+"s"}`}function Ys(l){if(!l)return"0 B";const e=1024,t=["B","KB","MB","GB"],n=Math.floor(Math.log(l)/Math.log(e));return parseFloat((l/Math.pow(e,n)).toFixed(1))+" "+t[n]}function Qs(l){return l?new Date(l).toLocaleDateString("en-GB",{day:"2-digit",month:"short"}):""}function Zs(l){if(!l)return"never";const t=Math.floor((new Date-l)/1e3);return t<5?"just now":t<60?`${t}s ago`:t<3600?`${Math.floor(t/60)}m ago`:l.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"})}function $u(l,e,t){let n,s,i,o,a,c,p,f,d,m,v,g;ct(l,xl,ye=>t(47,f=ye)),ct(l,Zr,ye=>t(48,d=ye)),ct(l,$l,ye=>t(49,m=ye)),ct(l,Xr,ye=>t(50,v=ye)),ct(l,jn,ye=>t(51,g=ye));let h="",S="",y=null,k=!0,D=!1,T=[],q=!1,P=!1,C=!1,L="custom",O="",A="ubuntu-22-04-x64",j=!0,U=!0,K=!0,V=null;const F=[{value:"ubuntu-22-04-x64",label:"Ubuntu 22.04 LTS"},{value:"ubuntu-20-04-x64",label:"Ubuntu 20.04 LTS"},{value:"debian-11-x64",label:"Debian 11"},{value:"debian-12-x64",label:"Debian 12"}];function E(){t(11,L=V!=null&&V.exists?"custom":"base"),t(9,P=!0)}let M=null;async function G(){if(d)try{t(44,M=await Oe("GET",`/infra/fleet/health?do_token=${d}`))}catch(ye){console.error("Failed to load fleet health:",ye)}finally{}}let I=!1,J="",H="",Q=!1,le=null,W=null,X="",x=200,_e=!1,$e=null,he=!1,ne={name:"",project:"",env:"prod",region:"lon1",size:"s-1vcpu-1gb",count:1};const ve=[{value:"lon1",label:"London"},{value:"fra1",label:"Frankfurt"},{value:"ams3",label:"Amsterdam"},{value:"nyc1",label:"New York"},{value:"sfo3",label:"San Francisco"},{value:"sgp1",label:"Singapore"}],we=[{value:"s-1vcpu-512mb-10gb",label:"$4 - 512MB"},{value:"s-1vcpu-1gb",label:"$6 - 1GB"},{value:"s-1vcpu-2gb",label:"$12 - 2GB"},{value:"s-2vcpu-2gb",label:"$18 - 2vCPU/2GB"},{value:"s-2vcpu-4gb",label:"$24 - 2vCPU/4GB"}];async function fe(){t(5,q=!0);try{const ye=await Oe("GET",`/infra/snapshots?do_token=${d}`);t(4,T=ye.snapshots||[]),te()}catch(ye){console.error("Failed to load snapshots:",ye)}finally{t(5,q=!1)}}function te(){const ye=T.find(Xe=>{var Qe;return(Qe=Xe.name)==null?void 0:Qe.toLowerCase().startsWith("base-")});ye?t(17,V={exists:!0,name:ye.name,created_at:ye.created_at}):t(17,V={exists:!1})}async function se(ye,Xe){if(confirm(`Delete snapshot "${Xe}"?`))try{await Oe("DELETE",`/infra/snapshots/${ye}?do_token=${d}`),be.success(`Deleted ${Xe}`),t(4,T=T.filter(Qe=>Qe.id!==ye))}catch(Qe){be.error(`Failed: ${Qe.message}`)}}async function Ee(){t(10,C=!0);try{if(L==="base")be.info("Creating base snapshot... This takes ~5 minutes"),await Oe("POST",`/infra/setup/init?do_token=${d}`),be.success("Base snapshot created!"),await te();else{if(!O){be.error("Snapshot name required"),t(10,C=!1);return}if(O.toLowerCase().startsWith("base-")){be.error('Custom snapshots cannot start with "base-"'),t(10,C=!1);return}await Oe("POST",`/infra/snapshots/build?do_token=${d}`,{name:O,base_image:A,install_docker:j,install_nginx:U,install_certbot:K}),be.success("Snapshot build started! Takes 5-10 min.")}t(9,P=!1),t(12,O=""),setTimeout(()=>fe(),5e3)}catch(ye){be.error(ye.message)}finally{t(10,C=!1)}}async function ge(){try{const ye=await Oe("POST","/infra/servers/provision",{...ne,do_token:d});be.success(`Provisioned ${ye.created||1} server(s)`),t(23,he=!1),$l.refresh()}catch(ye){be.error("Failed: "+ye.message)}}async function Ve(ye){const{server:Xe}=ye.detail;if(ye.type==="destroy"&&confirm(`Destroy ${Xe.name}? This cannot be undone.`))try{await Oe("DELETE",`/infra/servers/${Xe.id}?do_token=${d}`),be.success(`Destroyed ${Xe.name}`),$l.refresh()}catch(gt){be.error(`Failed: ${gt.message}`)}}async function Ot(ye){var xe,ut,Ie;const{server:Xe,containerName:Qe}=ye.detail,gt=Xe.ip||((Ie=(ut=(xe=Xe.networks)==null?void 0:xe.v4)==null?void 0:ut[0])==null?void 0:Ie.ip_address);le=gt,W=Qe,t(19,J=`📋 ${Qe} @ ${gt}`),t(45,H=""),t(6,X=""),t(18,I=!0),t(20,Q=!0);try{const et=await Oe("GET",`/infra/agent/${gt}/containers/${Qe}/logs?do_token=${d}&tail=${x}`);t(45,H=et.logs||"No logs available")}catch(et){t(45,H=`Error: ${et.message}`)}finally{t(20,Q=!1)}}async function rt(){if(!(!le||!W)){t(20,Q=!0);try{const ye=await Oe("GET",`/infra/agent/${le}/containers/${W}/logs?do_token=${d}&tail=${x}`);t(45,H=ye.logs||"No logs available")}catch(ye){t(45,H=`Error: ${ye.message}`)}finally{t(20,Q=!1)}}}function mt(){_e?$e=setInterval(rt,3e3):ke()}function ke(){$e&&(clearInterval($e),$e=null),t(22,_e=!1)}function Fe(){$l.refresh(),t(7,y=new Date)}function Ye(ye){gn.call(this,l,ye)}function Ke(ye){gn.call(this,l,ye)}function Ze(){h=St(this),t(1,h),t(30,n),t(47,f),t(51,g),t(50,v)}function Be(){S=St(this),t(2,S),t(29,s),t(47,f)}const Dt=()=>t(23,he=!0),vt=()=>t(8,k=!k),st=()=>t(3,D=!D),jt=ye=>se(ye.id,ye.name),$t=()=>t(23,he=!1);function nl(){ne.name=this.value,t(24,ne)}function Xt(){ne.project=this.value,t(24,ne)}function xt(){ne.env=St(this),t(24,ne)}function sl(){ne.region=St(this),t(24,ne)}function Ft(){ne.size=St(this),t(24,ne)}function el(ye){he=ye,t(23,he)}const hl=()=>{t(18,I=!1),ke()};function ht(){X=this.value,t(6,X)}function wt(){x=St(this),t(21,x)}function ol(){_e=this.checked,t(22,_e)}function yt(ye){I=ye,t(18,I)}const It=()=>t(9,P=!1),Gt=()=>t(11,L="base"),Yt=()=>t(11,L="custom");function Qt(){O=this.value,t(12,O)}function il(){A=St(this),t(13,A),t(31,F)}function rl(){j=this.checked,t(14,j)}function ul(){U=this.checked,t(15,U)}function Tt(){K=this.checked,t(16,K)}function Wt(ye){P=ye,t(9,P)}const Bt=()=>t(9,P=!1);return l.$$.update=()=>{var ye,Xe,Qe,gt,xe,ut;l.$$.dirty[1]&1638400&&t(30,n=[...new Set([...(f||[]).map(Ie=>Ie.project).filter(Boolean),...g||[],...(v||[]).map(Ie=>Ie.project).filter(Boolean)])].sort()),l.$$.dirty[1]&65536&&t(29,s=[...new Set([...(f||[]).map(Ie=>Ie.env||Ie.environment).filter(Boolean),"prod","staging","dev"])].sort()),l.$$.dirty[0]&6|l.$$.dirty[1]&65536&&t(28,i=(f||[]).filter(Ie=>!(h&&Ie.project!==h||S&&(Ie.env||Ie.environment)!==S))),l.$$.dirty[0]&56&&D&&T.length===0&&!q&&fe(),l.$$.dirty[1]&73728&&t(27,o=M?{serverCount:((ye=M.summary)==null?void 0:ye.total)||(f==null?void 0:f.length)||0,containerCount:((Xe=M.servers)==null?void 0:Xe.reduce((Ie,et)=>Ie+(et.containers||0),0))||0,healthyContainers:((Qe=M.servers)==null?void 0:Qe.reduce((Ie,et)=>Ie+(et.healthy||0),0))||0,unhealthyContainers:((gt=M.servers)==null?void 0:gt.reduce((Ie,et)=>Ie+(et.unhealthy||0),0))||0,monthlyCost:Ks(f),health:((xe=M.summary)==null?void 0:xe.healthy)===((ut=M.summary)==null?void 0:ut.total)?"healthy":"degraded"}:{serverCount:(f==null?void 0:f.length)||0,containerCount:0,healthyContainers:0,unhealthyContainers:0,monthlyCost:Ks(f),health:"unknown"}),l.$$.dirty[1]&139264&&!M&&d&&G(),l.$$.dirty[0]&64|l.$$.dirty[1]&16384&&t(26,a=X?H.split(`
`).filter(Ie=>Ie.toLowerCase().includes(X.toLowerCase())).join(`
`):H),l.$$.dirty[1]&262144&&t(46,c=m||{loading:!1}),l.$$.dirty[1]&32768&&t(25,p=c.loading),l.$$.dirty[1]&65536&&f&&t(7,y=new Date)},[Fe,h,S,D,T,q,X,y,k,P,C,L,O,A,j,U,K,V,I,J,Q,x,_e,he,ne,p,a,o,i,s,n,F,E,ve,we,fe,se,Ee,ge,Ve,Ot,rt,mt,ke,M,H,c,f,d,m,v,g,Ye,Ke,Ze,Be,Dt,vt,st,jt,$t,nl,Xt,xt,sl,Ft,el,hl,ht,wt,ol,yt,It,Gt,Yt,Qt,il,rl,ul,Tt,Wt,Bt]}class wu extends Pt{constructor(e){super(),Et(this,e,$u,ku,zt,{refresh:0},null,[-1,-1,-1,-1])}get refresh(){return this.$$.ctx[0]}}const yu="modulepreload",Cu=function(l){return"/static/"+l},Xs={},xs=function(e,t,n){let s=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(t.map(c=>{if(c=Cu(c),c in Xs)return;Xs[c]=!0;const p=c.endsWith(".css"),f=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const d=document.createElement("link");if(d.rel=p?"stylesheet":yu,p||(d.as="script"),d.crossOrigin="",d.href=c,a&&d.setAttribute("nonce",a),document.head.appendChild(d),p)return new Promise((m,v)=>{d.addEventListener("load",m),d.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},Su=l=>({}),eo=l=>({}),zu=l=>({}),to=l=>({});function lo(l){let e,t,n,s=l[0]&&no(l);const i=l[5].header,o=yl(i,l,l[4],to);return{c(){e=_("div"),s&&s.c(),t=b(),o&&o.c(),u(e,"class","card-header svelte-1qbuf8h")},m(a,c){w(a,e,c),s&&s.m(e,null),r(e,t),o&&o.m(e,null),n=!0},p(a,c){a[0]?s?s.p(a,c):(s=no(a),s.c(),s.m(e,t)):s&&(s.d(1),s=null),o&&o.p&&(!n||c&16)&&Sl(o,i,a,a[4],n?Cl(i,a[4],c,zu):zl(a[4]),to)},i(a){n||(N(o,a),n=!0)},o(a){R(o,a),n=!1},d(a){a&&$(e),s&&s.d(),o&&o.d(a)}}}function no(l){let e,t;return{c(){e=_("span"),t=z(l[0]),u(e,"class","card-title svelte-1qbuf8h")},m(n,s){w(n,e,s),r(e,t)},p(n,s){s&1&&B(t,n[0])},d(n){n&&$(e)}}}function so(l){let e,t;const n=l[5].footer,s=yl(n,l,l[4],eo);return{c(){e=_("div"),s&&s.c(),u(e,"class","card-footer svelte-1qbuf8h")},m(i,o){w(i,e,o),s&&s.m(e,null),t=!0},p(i,o){s&&s.p&&(!t||o&16)&&Sl(s,n,i,i[4],t?Cl(n,i[4],o,Su):zl(i[4]),eo)},i(i){t||(N(s,i),t=!0)},o(i){R(s,i),t=!1},d(i){i&&$(e),s&&s.d(i)}}}function Du(l){let e,t,n,s,i,o=(l[0]||l[3].header)&&lo(l);const a=l[5].default,c=yl(a,l,l[4],null);let p=l[3].footer&&so(l);return{c(){e=_("div"),o&&o.c(),t=b(),n=_("div"),c&&c.c(),s=b(),p&&p.c(),u(n,"class","card-body svelte-1qbuf8h"),u(e,"class","card svelte-1qbuf8h"),Ce(e,"glass",l[1]),Ce(e,"no-padding",!l[2])},m(f,d){w(f,e,d),o&&o.m(e,null),r(e,t),r(e,n),c&&c.m(n,null),r(e,s),p&&p.m(e,null),i=!0},p(f,[d]){f[0]||f[3].header?o?(o.p(f,d),d&9&&N(o,1)):(o=lo(f),o.c(),N(o,1),o.m(e,t)):o&&(De(),R(o,1,1,()=>{o=null}),Te()),c&&c.p&&(!i||d&16)&&Sl(c,a,f,f[4],i?Cl(a,f[4],d,null):zl(f[4]),null),f[3].footer?p?(p.p(f,d),d&8&&N(p,1)):(p=so(f),p.c(),N(p,1),p.m(e,null)):p&&(De(),R(p,1,1,()=>{p=null}),Te()),(!i||d&2)&&Ce(e,"glass",f[1]),(!i||d&4)&&Ce(e,"no-padding",!f[2])},i(f){i||(N(o),N(c,f),N(p),i=!0)},o(f){R(o),R(c,f),R(p),i=!1},d(f){f&&$(e),o&&o.d(),c&&c.d(f),p&&p.d()}}}function Tu(l,e,t){let{$$slots:n={},$$scope:s}=e;const i=jr(n);let{title:o=""}=e,{glass:a=!1}=e,{padding:c=!0}=e;return l.$$set=p=>{"title"in p&&t(0,o=p.title),"glass"in p&&t(1,a=p.glass),"padding"in p&&t(2,c=p.padding),"$$scope"in p&&t(4,s=p.$$scope)},[o,a,c,i,s,n]}class At extends Pt{constructor(e){super(),Et(this,e,Tu,Du,zt,{title:0,glass:1,padding:2})}}const{Boolean:Fn}=Br;function oo(l,e,t){const n=l.slice();return n[156]=e[t],n}function io(l,e,t){const n=l.slice();return n[156]=e[t],n}function ro(l,e,t){const n=l.slice();return n[156]=e[t],n}function ao(l,e,t){const n=l.slice();return n[156]=e[t],n}function co(l,e,t){const n=l.slice();return n[75]=e[t],n}function uo(l,e,t){const n=l.slice();return n[167]=e[t],n}function fo(l,e,t){const n=l.slice();return n[170]=e[t],n}function po(l,e,t){const n=l.slice();return n[173]=e[t],n}function _o(l,e,t){var i,o,a;const n=l.slice();n[156]=e[t];const s=n[156].ip||((a=(o=(i=n[156].networks)==null?void 0:i.v4)==null?void 0:o[0])==null?void 0:a.ip_address);return n[176]=s,n}function mo(l,e,t){const n=l.slice();return n[179]=e[t],n[181]=t,n}function qu(l){const e=l.slice(),t=e[21].find(s=>s.isMain);e[182]=t;const n=e[21].filter(s=>!s.isMain).length;return e[183]=n,e}function vo(l,e,t){const n=l.slice();return n[179]=e[t],n[181]=t,n}function ho(l,e,t){const n=l.slice();return n[185]=e[t],n}function go(l){let e,t=l[185]+"",n;return{c(){e=_("option"),n=z(t),e.__value=l[185],ee(e,e.__value)},m(s,i){w(s,e,i),r(e,n)},p:pe,d(s){s&&$(e)}}}function Eu(l){let e;return{c(){e=z("📥 Load")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Pu(l){let e;return{c(){e=z("💾 Save")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Nu(l){let e;return{c(){e=z("🚫 Exclusions")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function bo(l){let e,t;return{c(){e=_("span"),t=z(l[48]),u(e,"class","config-status svelte-8rkhbz")},m(n,s){w(n,e,s),r(e,t)},p(n,s){s[1]&131072&&B(t,n[48])},d(n){n&&$(e)}}}function ko(l){let e,t,n,s,i,o,a,c,p,f,d,m;return i=new je({props:{variant:"ghost",size:"sm",$$slots:{default:[Lu]},$$scope:{ctx:l}}}),i.$on("click",l[59]),{c(){e=_("div"),t=_("div"),n=_("label"),n.textContent="Exclusion Patterns",s=b(),ce(i.$$.fragment),o=b(),a=_("textarea"),c=b(),p=_("small"),p.textContent="One pattern per line. Applied to folder uploads and git clones.",u(n,"class","svelte-8rkhbz"),u(t,"class","exclude-header svelte-8rkhbz"),u(a,"rows","6"),u(a,"placeholder","node_modules/ __pycache__/ *.pyc .git/"),u(a,"class","svelte-8rkhbz"),u(p,"class","svelte-8rkhbz"),u(e,"class","exclude-editor svelte-8rkhbz")},m(v,g){w(v,e,g),r(e,t),r(t,n),r(t,s),re(i,t,null),r(e,o),r(e,a),ee(a,l[50]),r(e,c),r(e,p),f=!0,d||(m=Z(a,"input",l[80]),d=!0)},p(v,g){const h={};g[6]&4&&(h.$$scope={dirty:g,ctx:v}),i.$set(h),g[1]&524288&&ee(a,v[50])},i(v){f||(N(i.$$.fragment,v),f=!0)},o(v){R(i.$$.fragment,v),f=!1},d(v){v&&$(e),ae(i),d=!1,m()}}}function Lu(l){let e;return{c(){e=z("Reset to Defaults")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function $o(l){let e,t,n,s,i,o,a,c,p,f,d,m,v,g,h,S,y,k,D,T,q,P,C,L,O,A=l[24]&&wo(),j=l[21].length>0&&yo(l);d=new je({props:{size:"sm",$$slots:{default:[Ru]},$$scope:{ctx:l}}}),d.$on("click",l[62]);function U(M,G){return G[0]&2097152&&(S=null),M[21].length===0?Ou:(S==null&&(S=!M[21].some(hf)),S?Au:zo)}function K(M,G){return G===zo?qu(M):M}let V=U(l,[-1,-1,-1,-1,-1,-1,-1]),F=V(K(l,V)),E=l[27]&&To(l);return{c(){e=_("div"),t=_("div"),n=_("label"),n.textContent="Build Folders",s=b(),i=_("div"),A&&A.c(),o=b(),a=_("input"),c=b(),j&&j.c(),p=b(),f=_("div"),ce(d.$$.fragment),m=b(),v=_("span"),v.textContent="or drag & drop folders here",g=b(),h=_("div"),F.c(),y=b(),k=_("label"),D=_("input"),T=b(),q=_("span"),q.textContent="Remember folder configuration for this service",P=b(),E&&E.c(),u(n,"class","svelte-8rkhbz"),u(a,"type","file"),u(a,"webkitdirectory",""),u(a,"directory",""),a.multiple=!0,ml(a,"display","none"),u(a,"class","svelte-8rkhbz"),u(v,"class","drop-hint svelte-8rkhbz"),u(f,"class","folder-actions svelte-8rkhbz"),u(i,"class","folder-drop-zone svelte-8rkhbz"),Ce(i,"dragover",l[24]),u(h,"class","code-selection-info svelte-8rkhbz"),Ce(h,"success",l[21].some(pi)),Ce(h,"warning",l[21].length>0&&!l[21].some(_i)),u(D,"type","checkbox"),u(D,"class","svelte-8rkhbz"),u(k,"class","checkbox-label small-check svelte-8rkhbz"),u(t,"class","form-group svelte-8rkhbz"),u(e,"class","source-config svelte-8rkhbz")},m(M,G){w(M,e,G),r(e,t),r(t,n),r(t,s),r(t,i),A&&A.m(i,null),r(i,o),r(i,a),l[87](a),r(i,c),j&&j.m(i,null),r(i,p),r(i,f),re(d,f,null),r(f,m),r(f,v),r(t,g),r(t,h),F.m(h,null),r(t,y),r(t,k),r(k,D),D.checked=l[23],r(k,T),r(k,q),r(e,P),E&&E.m(e,null),C=!0,L||(O=[Z(a,"change",l[63]),Z(i,"dragenter",l[64]),Z(i,"dragleave",l[65]),Z(i,"dragover",vf),Z(i,"drop",l[66]),Z(D,"change",l[90])],L=!0)},p(M,G){M[24]?A||(A=wo(),A.c(),A.m(i,o)):A&&(A.d(1),A=null),M[21].length>0?j?(j.p(M,G),G[0]&2097152&&N(j,1)):(j=yo(M),j.c(),N(j,1),j.m(i,p)):j&&(De(),R(j,1,1,()=>{j=null}),Te());const I={};G[6]&4&&(I.$$scope={dirty:G,ctx:M}),d.$set(I),(!C||G[0]&16777216)&&Ce(i,"dragover",M[24]),V===(V=U(M,G))&&F?F.p(K(M,V),G):(F.d(1),F=V(K(M,V)),F&&(F.c(),F.m(h,null))),(!C||G[0]&2097152)&&Ce(h,"success",M[21].some(pi)),(!C||G[0]&2097152)&&Ce(h,"warning",M[21].length>0&&!M[21].some(_i)),G[0]&8388608&&(D.checked=M[23]),M[27]?E?(E.p(M,G),G[0]&134217728&&N(E,1)):(E=To(M),E.c(),N(E,1),E.m(e,null)):E&&(De(),R(E,1,1,()=>{E=null}),Te())},i(M){C||(N(j),N(d.$$.fragment,M),N(E),C=!0)},o(M){R(j),R(d.$$.fragment,M),R(E),C=!1},d(M){M&&$(e),A&&A.d(),l[87](null),j&&j.d(),ae(d),F.d(),E&&E.d(),L=!1,He(O)}}}function wo(l){let e;return{c(){e=_("div"),e.innerHTML='<span class="drop-icon svelte-8rkhbz">📂</span> <span>Drop folder here</span>',u(e,"class","drop-overlay svelte-8rkhbz")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function yo(l){let e,t,n=me(l[21]),s=[];for(let o=0;o<n.length;o+=1)s[o]=So(vo(l,n,o));const i=o=>R(s[o],1,1,()=>{s[o]=null});return{c(){e=_("div");for(let o=0;o<s.length;o+=1)s[o].c();u(e,"class","folder-list svelte-8rkhbz")},m(o,a){w(o,e,a);for(let c=0;c<s.length;c+=1)s[c]&&s[c].m(e,null);t=!0},p(o,a){if(a[0]&2097152|a[2]&96){n=me(o[21]);let c;for(c=0;c<n.length;c+=1){const p=vo(o,n,c);s[c]?(s[c].p(p,a),N(s[c],1)):(s[c]=So(p),s[c].c(),N(s[c],1),s[c].m(e,null))}for(De(),c=n.length;c<s.length;c+=1)i(c);Te()}},i(o){if(!t){for(let a=0;a<n.length;a+=1)N(s[a]);t=!0}},o(o){s=s.filter(Fn);for(let a=0;a<s.length;a+=1)R(s[a]);t=!1},d(o){o&&$(e),Re(s,o)}}}function Mu(l){let e=l[179].isMain?"MAIN":"dependency",t;return{c(){t=z(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&2097152&&e!==(e=n[179].isMain?"MAIN":"dependency")&&B(t,e)},d(n){n&&$(t)}}}function Co(l){let e,t,n;function s(){return l[88](l[181])}return{c(){e=_("button"),e.textContent="⭐",u(e,"type","button"),u(e,"class","set-main-btn svelte-8rkhbz"),u(e,"title","Set as main")},m(i,o){w(i,e,o),t||(n=Z(e,"click",s),t=!0)},p(i,o){l=i},d(i){i&&$(e),t=!1,n()}}}function So(l){let e,t,n=l[179].isMain?"📁":"📂",s,i,o,a=l[179].name+"",c,p,f,d,m,v,g=l[179].fileCount+"",h,S,y,k,D,T,q,P,C;d=new Je({props:{variant:l[179].isMain?"success":"secondary",$$slots:{default:[Mu]},$$scope:{ctx:l}}});let L=!l[179].isMain&&Co(l);function O(){return l[89](l[181])}return{c(){e=_("div"),t=_("span"),s=z(n),i=b(),o=_("strong"),c=z(a),p=z("/"),f=b(),ce(d.$$.fragment),m=b(),v=_("span"),h=z(g),S=z(" files"),y=b(),L&&L.c(),k=b(),D=_("button"),D.textContent="✕",T=b(),u(t,"class","folder-icon svelte-8rkhbz"),u(o,"class","svelte-8rkhbz"),u(v,"class","file-count svelte-8rkhbz"),u(D,"type","button"),u(D,"class","remove-btn svelte-8rkhbz"),u(e,"class","folder-item svelte-8rkhbz")},m(A,j){w(A,e,j),r(e,t),r(t,s),r(e,i),r(e,o),r(o,c),r(o,p),r(e,f),re(d,e,null),r(e,m),r(e,v),r(v,h),r(v,S),r(e,y),L&&L.m(e,null),r(e,k),r(e,D),r(e,T),q=!0,P||(C=Z(D,"click",O),P=!0)},p(A,j){l=A,(!q||j[0]&2097152)&&n!==(n=l[179].isMain?"📁":"📂")&&B(s,n),(!q||j[0]&2097152)&&a!==(a=l[179].name+"")&&B(c,a);const U={};j[0]&2097152&&(U.variant=l[179].isMain?"success":"secondary"),j[0]&2097152|j[6]&4&&(U.$$scope={dirty:j,ctx:l}),d.$set(U),(!q||j[0]&2097152)&&g!==(g=l[179].fileCount+"")&&B(h,g),l[179].isMain?L&&(L.d(1),L=null):L?L.p(l,j):(L=Co(l),L.c(),L.m(e,k))},i(A){q||(N(d.$$.fragment,A),q=!0)},o(A){R(d.$$.fragment,A),q=!1},d(A){A&&$(e),ae(d),L&&L.d(),P=!1,C()}}}function Ru(l){let e;return{c(){e=z("➕ Add Folder")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function zo(l){let e,t,n=l[182].name+"",s,i,o,a,c=l[183]>0&&Do(l);return{c(){e=z("✓ Main: "),t=_("strong"),s=z(n),i=z("/"),o=b(),c&&c.c(),a=Ge()},m(p,f){w(p,e,f),w(p,t,f),r(t,s),r(t,i),w(p,o,f),c&&c.m(p,f),w(p,a,f)},p(p,f){f[0]&2097152&&n!==(n=p[182].name+"")&&B(s,n),p[183]>0?c?c.p(p,f):(c=Do(p),c.c(),c.m(a.parentNode,a)):c&&(c.d(1),c=null)},d(p){p&&($(e),$(t),$(o),$(a)),c&&c.d(p)}}}function Au(l){let e;return{c(){e=z("⚠️ No main folder selected. Click ⭐ to set one as main.")},m(t,n){w(t,e,n)},p:pe,d(t){t&&$(e)}}}function Ou(l){let e;return{c(){e=z("No folders selected. Add your main service folder and any dependencies.")},m(t,n){w(t,e,n)},p:pe,d(t){t&&$(e)}}}function Do(l){let e,t=l[183]+"",n,s,i=l[183]===1?"y":"ies",o;return{c(){e=z("+ "),n=z(t),s=z(" dependenc"),o=z(i)},m(a,c){w(a,e,c),w(a,n,c),w(a,s,c),w(a,o,c)},p(a,c){c[0]&2097152&&t!==(t=a[183]+"")&&B(n,t),c[0]&2097152&&i!==(i=a[183]===1?"y":"ies")&&B(o,i)},d(a){a&&($(e),$(n),$(s),$(o))}}}function To(l){let e,t,n,s,i,o,a,c,p,f,d,m,v,g,h,S,y,k,D,T,q,P;return i=new Je({props:{variant:l[26]==="from folder"?"success":l[26]==="multi-folder"?"info":"warning",$$slots:{default:[ju]},$$scope:{ctx:l}}}),{c(){e=_("div"),t=_("div"),n=_("label"),s=z(`🐳 Dockerfile
                    `),ce(i.$$.fragment),o=b(),a=_("textarea"),c=b(),p=_("div"),f=_("select"),d=_("option"),d.textContent="FROM...",m=_("option"),m.textContent="python:3.11-slim",v=_("option"),v.textContent="python:3.12-slim",g=_("option"),g.textContent="node:20-alpine",h=_("option"),h.textContent="node:18-alpine",S=_("option"),S.textContent="golang:1.21-alpine",y=_("option"),y.textContent="nginx:alpine",k=b(),D=_("input"),u(n,"class","svelte-8rkhbz"),u(t,"class","dockerfile-header svelte-8rkhbz"),u(a,"rows","8"),u(a,"class","dockerfile-editor svelte-8rkhbz"),u(a,"spellcheck","false"),d.__value="",ee(d,d.__value),m.__value="python:3.11-slim",ee(m,m.__value),v.__value="python:3.12-slim",ee(v,v.__value),g.__value="node:20-alpine",ee(g,g.__value),h.__value="node:18-alpine",ee(h,h.__value),S.__value="golang:1.21-alpine",ee(S,S.__value),y.__value="nginx:alpine",ee(y,y.__value),u(f,"class","svelte-8rkhbz"),l[28]===void 0&&lt(()=>l[92].call(f)),u(D,"type","text"),u(D,"placeholder","CMD (e.g. uvicorn main:app ...)"),u(D,"class","svelte-8rkhbz"),u(p,"class","dockerfile-quick-fields svelte-8rkhbz"),u(e,"class","dockerfile-preview svelte-8rkhbz")},m(C,L){w(C,e,L),r(e,t),r(t,n),r(n,s),re(i,n,null),r(e,o),r(e,a),ee(a,l[25]),r(e,c),r(e,p),r(p,f),r(f,d),r(f,m),r(f,v),r(f,g),r(f,h),r(f,S),r(f,y),Pe(f,l[28],!0),r(p,k),r(p,D),ee(D,l[29]),T=!0,q||(P=[Z(a,"input",l[91]),Z(f,"change",l[92]),Z(f,"change",l[93]),Z(D,"input",l[94]),Z(D,"change",l[95])],q=!0)},p(C,L){const O={};L[0]&67108864&&(O.variant=C[26]==="from folder"?"success":C[26]==="multi-folder"?"info":"warning"),L[0]&67108864|L[6]&4&&(O.$$scope={dirty:L,ctx:C}),i.$set(O),L[0]&33554432&&ee(a,C[25]),L[0]&268435456&&Pe(f,C[28]),L[0]&536870912&&D.value!==C[29]&&ee(D,C[29])},i(C){T||(N(i.$$.fragment,C),T=!0)},o(C){R(i.$$.fragment,C),T=!1},d(C){C&&$(e),ae(i),q=!1,He(P)}}}function ju(l){let e;return{c(){e=z(l[26])},m(t,n){w(t,e,n)},p(t,n){n[0]&67108864&&B(e,t[26])},d(t){t&&$(e)}}}function qo(l){let e,t,n,s,i,o,a,c,p,f,d,m,v,g,h,S,y,k,D,T,q,P,C,L,O,A,j,U,K,V,F,E,M,G,I,J,H,Q,le=l[14].length>0&&Eo(l);return q=new je({props:{size:"sm",$$slots:{default:[Iu]},$$scope:{ctx:l}}}),q.$on("click",l[100]),C=new je({props:{variant:"ghost",size:"sm",$$slots:{default:[Bu]},$$scope:{ctx:l}}}),C.$on("click",l[101]),{c(){e=_("div"),t=_("div"),n=_("label"),n.textContent="Git Repository URL *",s=b(),i=_("input"),o=b(),a=_("small"),a.textContent="HTTPS URL (SSH not supported)",c=b(),p=_("div"),f=_("label"),f.textContent="Branch",d=b(),m=_("input"),v=b(),g=_("div"),h=_("label"),h.textContent="Folders to Include",S=b(),le&&le.c(),y=b(),k=_("div"),D=_("input"),T=b(),ce(q.$$.fragment),P=b(),ce(C.$$.fragment),L=b(),O=_("small"),O.textContent="Leave empty to use entire repo. Add paths for multi-folder builds (main folder contains Dockerfile).",A=b(),j=_("details"),U=_("summary"),U.textContent="🔐 Private repository?",K=b(),V=_("div"),F=_("label"),F.textContent="Personal Access Token",E=b(),M=_("input"),G=b(),I=_("small"),I.innerHTML="Needs <code>repo</code> scope for private repos",u(n,"for","git-url"),u(n,"class","svelte-8rkhbz"),u(i,"id","git-url"),u(i,"type","url"),u(i,"placeholder","https://github.com/user/repo"),u(i,"class","svelte-8rkhbz"),u(a,"class","svelte-8rkhbz"),u(t,"class","form-group svelte-8rkhbz"),u(f,"for","git-branch"),u(f,"class","svelte-8rkhbz"),u(m,"id","git-branch"),u(m,"type","text"),u(m,"placeholder","main"),u(m,"class","svelte-8rkhbz"),u(p,"class","form-group svelte-8rkhbz"),u(h,"class","svelte-8rkhbz"),u(D,"type","text"),u(D,"placeholder","e.g. services/my_api"),u(D,"class","svelte-8rkhbz"),u(k,"class","folder-input svelte-8rkhbz"),u(O,"class","svelte-8rkhbz"),u(g,"class","form-group svelte-8rkhbz"),u(U,"class","svelte-8rkhbz"),u(F,"for","git-token"),u(F,"class","svelte-8rkhbz"),u(M,"id","git-token"),u(M,"type","password"),u(M,"placeholder","ghp_xxxxxxxxxxxx"),u(M,"class","svelte-8rkhbz"),u(I,"class","svelte-8rkhbz"),u(V,"class","form-group svelte-8rkhbz"),u(j,"class","private-repo svelte-8rkhbz"),u(e,"class","source-config svelte-8rkhbz")},m(W,X){w(W,e,X),r(e,t),r(t,n),r(t,s),r(t,i),ee(i,l[11]),r(t,o),r(t,a),r(e,c),r(e,p),r(p,f),r(p,d),r(p,m),ee(m,l[12]),r(e,v),r(e,g),r(g,h),r(g,S),le&&le.m(g,null),r(g,y),r(g,k),r(k,D),ee(D,l[15]),r(k,T),re(q,k,null),r(k,P),re(C,k,null),r(g,L),r(g,O),r(e,A),r(e,j),r(j,U),r(j,K),r(j,V),r(V,F),r(V,E),r(V,M),ee(M,l[13]),r(V,G),r(V,I),J=!0,H||(Q=[Z(i,"input",l[96]),Z(m,"input",l[97]),Z(D,"input",l[99]),Z(M,"input",l[102])],H=!0)},p(W,X){X[0]&2048&&i.value!==W[11]&&ee(i,W[11]),X[0]&4096&&m.value!==W[12]&&ee(m,W[12]),W[14].length>0?le?(le.p(W,X),X[0]&16384&&N(le,1)):(le=Eo(W),le.c(),N(le,1),le.m(g,y)):le&&(De(),R(le,1,1,()=>{le=null}),Te()),X[0]&32768&&D.value!==W[15]&&ee(D,W[15]);const x={};X[6]&4&&(x.$$scope={dirty:X,ctx:W}),q.$set(x);const _e={};X[6]&4&&(_e.$$scope={dirty:X,ctx:W}),C.$set(_e),X[0]&8192&&M.value!==W[13]&&ee(M,W[13])},i(W){J||(N(le),N(q.$$.fragment,W),N(C.$$.fragment,W),J=!0)},o(W){R(le),R(q.$$.fragment,W),R(C.$$.fragment,W),J=!1},d(W){W&&$(e),le&&le.d(),ae(q),ae(C),H=!1,He(Q)}}}function Eo(l){let e,t,n=me(l[14]),s=[];for(let o=0;o<n.length;o+=1)s[o]=Po(mo(l,n,o));const i=o=>R(s[o],1,1,()=>{s[o]=null});return{c(){e=_("div");for(let o=0;o<s.length;o+=1)s[o].c();u(e,"class","folder-list svelte-8rkhbz")},m(o,a){w(o,e,a);for(let c=0;c<s.length;c+=1)s[c]&&s[c].m(e,null);t=!0},p(o,a){if(a[0]&16384|a[2]&512){n=me(o[14]);let c;for(c=0;c<n.length;c+=1){const p=mo(o,n,c);s[c]?(s[c].p(p,a),N(s[c],1)):(s[c]=Po(p),s[c].c(),N(s[c],1),s[c].m(e,null))}for(De(),c=n.length;c<s.length;c+=1)i(c);Te()}},i(o){if(!t){for(let a=0;a<n.length;a+=1)N(s[a]);t=!0}},o(o){s=s.filter(Fn);for(let a=0;a<s.length;a+=1)R(s[a]);t=!1},d(o){o&&$(e),Re(s,o)}}}function Fu(l){let e=l[179].isMain?"MAIN":"dependency",t;return{c(){t=z(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&16384&&e!==(e=n[179].isMain?"MAIN":"dependency")&&B(t,e)},d(n){n&&$(t)}}}function Po(l){let e,t,n=l[179].isMain?"📁":"📂",s,i,o,a=l[179].path+"",c,p,f,d,m,v,g,h,S;f=new Je({props:{variant:l[179].isMain?"success":"secondary",$$slots:{default:[Fu]},$$scope:{ctx:l}}});function y(){return l[98](l[181])}return{c(){e=_("div"),t=_("span"),s=z(n),i=b(),o=_("strong"),c=z(a),p=b(),ce(f.$$.fragment),d=b(),m=_("button"),m.textContent="✕",v=b(),u(o,"class","svelte-8rkhbz"),u(m,"type","button"),u(m,"class","remove-btn svelte-8rkhbz"),u(e,"class","folder-item svelte-8rkhbz")},m(k,D){w(k,e,D),r(e,t),r(t,s),r(e,i),r(e,o),r(o,c),r(e,p),re(f,e,null),r(e,d),r(e,m),r(e,v),g=!0,h||(S=Z(m,"click",y),h=!0)},p(k,D){l=k,(!g||D[0]&16384)&&n!==(n=l[179].isMain?"📁":"📂")&&B(s,n),(!g||D[0]&16384)&&a!==(a=l[179].path+"")&&B(c,a);const T={};D[0]&16384&&(T.variant=l[179].isMain?"success":"secondary"),D[0]&16384|D[6]&4&&(T.$$scope={dirty:D,ctx:l}),f.$set(T)},i(k){g||(N(f.$$.fragment,k),g=!0)},o(k){R(f.$$.fragment,k),g=!1},d(k){k&&$(e),ae(f),h=!1,S()}}}function Iu(l){let e;return{c(){e=z("+ Main")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Bu(l){let e;return{c(){e=z("+ Dep")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function No(l){let e,t,n,s,i,o,a,c,p;return{c(){e=_("div"),t=_("div"),n=_("label"),n.textContent="Docker Image *",s=b(),i=_("input"),o=b(),a=_("small"),a.textContent="Full image URL from DO Registry or Docker Hub",u(n,"for","image-url"),u(n,"class","svelte-8rkhbz"),u(i,"id","image-url"),u(i,"type","text"),u(i,"placeholder","registry.digitalocean.com/my-registry/app:latest"),u(i,"class","svelte-8rkhbz"),u(a,"class","svelte-8rkhbz"),u(t,"class","form-group svelte-8rkhbz"),u(e,"class","source-config svelte-8rkhbz")},m(f,d){w(f,e,d),r(e,t),r(t,n),r(t,s),r(t,i),ee(i,l[16]),r(t,o),r(t,a),c||(p=Z(i,"input",l[103]),c=!0)},p(f,d){d[0]&65536&&i.value!==f[16]&&ee(i,f[16])},d(f){f&&$(e),c=!1,p()}}}function Lo(l){let e,t,n,s,i,o,a,c,p,f,d,m,v,g,h,S,y,k,D,T,q,P,C,L,O,A,j,U,K=l[17]&&Mo(l);return{c(){e=_("div"),t=_("div"),n=_("label"),n.textContent="Docker Image File (.tar) *",s=b(),i=_("input"),o=b(),K&&K.c(),a=b(),c=_("small"),c.innerHTML="Export from Docker with: <code>docker save myimage:latest -o image.tar</code>",p=b(),f=_("div"),d=_("label"),d.textContent="Image Name *",m=b(),v=_("input"),g=b(),h=_("small"),h.textContent="The image name/tag as it appears in the tar file",S=b(),y=_("div"),k=_("div"),D=_("label"),D.textContent="Container Port",T=b(),q=_("input"),P=b(),C=_("div"),L=_("label"),L.textContent="Host Port",O=b(),A=_("input"),u(n,"for","image-file"),u(n,"class","svelte-8rkhbz"),u(i,"id","image-file"),u(i,"type","file"),u(i,"accept",".tar,.tar.gz"),u(i,"class","svelte-8rkhbz"),u(c,"class","svelte-8rkhbz"),u(t,"class","form-group svelte-8rkhbz"),u(d,"for","image-name"),u(d,"class","svelte-8rkhbz"),u(v,"id","image-name"),u(v,"type","text"),u(v,"placeholder","myapp:latest"),u(v,"class","svelte-8rkhbz"),u(h,"class","svelte-8rkhbz"),u(f,"class","form-group svelte-8rkhbz"),u(D,"for","container-port"),u(D,"class","svelte-8rkhbz"),u(q,"id","container-port"),u(q,"type","number"),u(q,"placeholder",l[9]),u(q,"class","svelte-8rkhbz"),u(k,"class","form-group svelte-8rkhbz"),u(L,"for","host-port"),u(L,"class","svelte-8rkhbz"),u(A,"id","host-port"),u(A,"type","number"),u(A,"placeholder",l[9]),u(A,"class","svelte-8rkhbz"),u(C,"class","form-group svelte-8rkhbz"),u(y,"class","form-row svelte-8rkhbz"),u(e,"class","source-config svelte-8rkhbz")},m(V,F){w(V,e,F),r(e,t),r(t,n),r(t,s),r(t,i),r(t,o),K&&K.m(t,null),r(t,a),r(t,c),r(e,p),r(e,f),r(f,d),r(f,m),r(f,v),ee(v,l[18]),r(f,g),r(f,h),r(e,S),r(e,y),r(y,k),r(k,D),r(k,T),r(k,q),ee(q,l[19]),r(y,P),r(y,C),r(C,L),r(C,O),r(C,A),ee(A,l[20]),j||(U=[Z(i,"change",l[72]),Z(v,"input",l[104]),Z(q,"input",l[105]),Z(A,"input",l[106])],j=!0)},p(V,F){V[17]?K?K.p(V,F):(K=Mo(V),K.c(),K.m(t,a)):K&&(K.d(1),K=null),F[0]&262144&&v.value!==V[18]&&ee(v,V[18]),F[0]&512&&u(q,"placeholder",V[9]),F[0]&524288&&Pl(q.value)!==V[19]&&ee(q,V[19]),F[0]&512&&u(A,"placeholder",V[9]),F[0]&1048576&&Pl(A.value)!==V[20]&&ee(A,V[20])},d(V){V&&$(e),K&&K.d(),j=!1,He(U)}}}function Mo(l){let e,t,n=l[17].name+"",s,i,o=(l[17].size/1024/1024).toFixed(2)+"",a,c;return{c(){e=_("div"),t=z("📦 "),s=z(n),i=z(" ("),a=z(o),c=z(" MB)"),u(e,"class","file-selected svelte-8rkhbz")},m(p,f){w(p,e,f),r(e,t),r(e,s),r(e,i),r(e,a),r(e,c)},p(p,f){f[0]&131072&&n!==(n=p[17].name+"")&&B(s,n),f[0]&131072&&o!==(o=(p[17].size/1024/1024).toFixed(2)+"")&&B(a,o)},d(p){p&&$(e)}}}function Ro(l){let e,t;return e=new Je({props:{variant:"info",$$slots:{default:[Uu]},$$scope:{ctx:l}}}),{c(){ce(e.$$.fragment)},m(n,s){re(e,n,s),t=!0},p(n,s){const i={};s[0]&1024|s[6]&4&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){ae(e,n)}}}function Uu(l){let e=l[10].trim().split(`
`).filter(di).length+"",t,n;return{c(){t=z(e),n=z(" vars")},m(s,i){w(s,t,i),w(s,n,i)},p(s,i){i[0]&1024&&e!==(e=s[10].trim().split(`
`).filter(di).length+"")&&B(t,e)},d(s){s&&($(t),$(n))}}}function Ao(l){let e,t,n,s,i,o;return{c(){e=_("div"),t=_("textarea"),n=b(),s=_("small"),s.textContent="One per line: KEY=value",u(t,"id","deploy-envvars"),u(t,"rows","3"),u(t,"placeholder","KEY=value ANOTHER_KEY=value"),u(t,"class","svelte-8rkhbz"),u(s,"class","svelte-8rkhbz"),u(e,"class","section-content svelte-8rkhbz")},m(a,c){w(a,e,c),r(e,t),ee(t,l[10]),r(e,n),r(e,s),i||(o=Z(t,"input",l[109]),i=!0)},p(a,c){c[0]&1024&&ee(t,a[10])},d(a){a&&$(e),i=!1,o()}}}function Oo(l){let e,t;return e=new Je({props:{variant:"info",$$slots:{default:[Hu]},$$scope:{ctx:l}}}),{c(){ce(e.$$.fragment)},m(n,s){re(e,n,s),t=!0},i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){ae(e,n)}}}function Hu(l){let e;return{c(){e=z("configured")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function jo(l){let e,t,n,s,i,o,a,c,p,f,d,m,v,g,h,S,y,k,D,T,q,P,C,L,O,A,j,U,K,V=l[43]&&Fo(l),F=l[46]&&Io(l);return{c(){e=_("div"),t=_("label"),n=_("input"),s=b(),i=_("span"),i.textContent="Auto-inject service discovery",o=b(),a=_("small"),a.textContent="Injects DATABASE_URL, REDIS_URL, etc. based on dependencies",c=b(),V&&V.c(),p=b(),f=_("div"),d=b(),m=_("label"),v=_("input"),g=b(),h=_("span"),h.textContent="💾 Persist data (mount volume)",S=b(),y=_("small"),y.textContent="Mounts /data volume for databases and stateful services",k=b(),D=_("div"),T=b(),q=_("label"),P=_("input"),C=b(),L=_("span"),L.textContent="🌐 Setup domain (Cloudflare)",O=b(),A=_("small"),A.textContent="Auto-provision subdomain with SSL via Cloudflare",j=b(),F&&F.c(),u(n,"type","checkbox"),u(n,"class","svelte-8rkhbz"),u(t,"class","checkbox-label svelte-8rkhbz"),u(a,"class","svelte-8rkhbz"),u(f,"class","config-divider svelte-8rkhbz"),u(v,"type","checkbox"),u(v,"class","svelte-8rkhbz"),u(m,"class","checkbox-label svelte-8rkhbz"),u(y,"class","svelte-8rkhbz"),u(D,"class","config-divider svelte-8rkhbz"),u(P,"type","checkbox"),u(P,"class","svelte-8rkhbz"),u(q,"class","checkbox-label svelte-8rkhbz"),u(A,"class","svelte-8rkhbz"),u(e,"class","section-content service-config svelte-8rkhbz")},m(E,M){w(E,e,M),r(e,t),r(t,n),n.checked=l[43],r(t,s),r(t,i),r(e,o),r(e,a),r(e,c),V&&V.m(e,null),r(e,p),r(e,f),r(e,d),r(e,m),r(m,v),v.checked=l[44],r(m,g),r(m,h),r(e,S),r(e,y),r(e,k),r(e,D),r(e,T),r(e,q),r(q,P),P.checked=l[46],r(q,C),r(q,L),r(e,O),r(e,A),r(e,j),F&&F.m(e,null),U||(K=[Z(n,"change",l[111]),Z(v,"change",l[116]),Z(P,"change",l[117])],U=!0)},p(E,M){M[1]&4096&&(n.checked=E[43]),E[43]?V?V.p(E,M):(V=Fo(E),V.c(),V.m(e,p)):V&&(V.d(1),V=null),M[1]&8192&&(v.checked=E[44]),M[1]&32768&&(P.checked=E[46]),E[46]?F?F.p(E,M):(F=Io(E),F.c(),F.m(e,null)):F&&(F.d(1),F=null)},d(E){E&&$(e),V&&V.d(),F&&F.d(),U=!1,He(K)}}}function Fo(l){let e,t,n,s,i,o,a,c,p,f,d,m,v,g,h,S,y,k,D,T,q;return{c(){e=_("div"),t=_("label"),t.textContent="Dependencies:",n=b(),s=_("div"),i=_("label"),o=_("input"),a=z(`
                      🐘 PostgreSQL`),c=b(),p=_("label"),f=_("input"),d=z(`
                      ⚡ Redis`),m=b(),v=_("label"),g=_("input"),h=z(`
                      🐬 MySQL`),S=b(),y=_("label"),k=_("input"),D=z(`
                      🍃 MongoDB`),u(o,"type","checkbox"),u(o,"class","svelte-8rkhbz"),u(i,"class","dep-item svelte-8rkhbz"),u(f,"type","checkbox"),u(f,"class","svelte-8rkhbz"),u(p,"class","dep-item svelte-8rkhbz"),u(g,"type","checkbox"),u(g,"class","svelte-8rkhbz"),u(v,"class","dep-item svelte-8rkhbz"),u(k,"type","checkbox"),u(k,"class","svelte-8rkhbz"),u(y,"class","dep-item svelte-8rkhbz"),u(s,"class","dep-list svelte-8rkhbz"),u(e,"class","dependencies svelte-8rkhbz")},m(P,C){w(P,e,C),r(e,t),r(e,n),r(e,s),r(s,i),r(i,o),o.checked=l[45].postgres,r(i,a),r(s,c),r(s,p),r(p,f),f.checked=l[45].redis,r(p,d),r(s,m),r(s,v),r(v,g),g.checked=l[45].mysql,r(v,h),r(s,S),r(s,y),r(y,k),k.checked=l[45].mongo,r(y,D),T||(q=[Z(o,"change",l[112]),Z(f,"change",l[113]),Z(g,"change",l[114]),Z(k,"change",l[115])],T=!0)},p(P,C){C[1]&16384&&(o.checked=P[45].postgres),C[1]&16384&&(f.checked=P[45].redis),C[1]&16384&&(g.checked=P[45].mysql),C[1]&16384&&(k.checked=P[45].mongo)},d(P){P&&$(e),T=!1,He(q)}}}function Io(l){let e,t,n,s,i,o=(l[54]||"app-project-env.domain.com")+"",a,c,p,f,d,m,v,g,h,S,y,k,D,T,q;return{c(){e=_("div"),t=_("div"),n=_("label"),n.textContent="Domain Preview:",s=b(),i=_("code"),a=z(o),c=b(),p=_("div"),f=_("label"),f.textContent="Base Domain",d=b(),m=_("input"),v=b(),g=_("div"),h=_("label"),h.innerHTML='Custom Aliases <small class="svelte-8rkhbz">(optional)</small>',S=b(),y=_("input"),k=b(),D=_("small"),D.textContent="Comma-separated custom domains (requires DNS setup)",u(n,"class","svelte-8rkhbz"),u(i,"class","svelte-8rkhbz"),u(t,"class","domain-preview svelte-8rkhbz"),u(f,"for","base-domain"),u(f,"class","svelte-8rkhbz"),u(m,"id","base-domain"),u(m,"type","text"),u(m,"placeholder","example.com"),u(m,"class","svelte-8rkhbz"),u(p,"class","form-group svelte-8rkhbz"),u(h,"for","domain-aliases"),u(h,"class","svelte-8rkhbz"),u(y,"id","domain-aliases"),u(y,"type","text"),u(y,"placeholder","api.myclient.com, app.example.com"),u(y,"class","svelte-8rkhbz"),u(D,"class","svelte-8rkhbz"),u(g,"class","form-group svelte-8rkhbz"),u(e,"class","domain-config svelte-8rkhbz")},m(P,C){w(P,e,C),r(e,t),r(t,n),r(t,s),r(t,i),r(i,a),r(e,c),r(e,p),r(p,f),r(p,d),r(p,m),ee(m,l[5]),r(e,v),r(e,g),r(g,h),r(g,S),r(g,y),ee(y,l[47]),r(g,k),r(g,D),T||(q=[Z(m,"input",l[118]),Z(y,"input",l[119])],T=!0)},p(P,C){C[1]&8388608&&o!==(o=(P[54]||"app-project-env.domain.com")+"")&&B(a,o),C[0]&32&&m.value!==P[5]&&ee(m,P[5]),C[1]&65536&&y.value!==P[47]&&ee(y,P[47])},d(P){P&&$(e),T=!1,He(q)}}}function Gu(l){let e=l[37].size+"",t,n;return{c(){t=z(e),n=z(" selected")},m(s,i){w(s,t,i),w(s,n,i)},p(s,i){i[1]&64&&e!==(e=s[37].size+"")&&B(t,e)},d(s){s&&($(t),$(n))}}}function Wu(l){let e;return{c(){e=z("✓ All")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Vu(l){let e;return{c(){e=z("✕ None")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Ju(l){let e,t,n=me(l[33]),s=[];for(let o=0;o<n.length;o+=1)s[o]=Ho(_o(l,n,o));const i=o=>R(s[o],1,1,()=>{s[o]=null});return{c(){for(let o=0;o<s.length;o+=1)s[o].c();e=Ge()},m(o,a){for(let c=0;c<s.length;c+=1)s[c]&&s[c].m(o,a);w(o,e,a),t=!0},p(o,a){if(a[1]&536870980){n=me(o[33]);let c;for(c=0;c<n.length;c+=1){const p=_o(o,n,c);s[c]?(s[c].p(p,a),N(s[c],1)):(s[c]=Ho(p),s[c].c(),N(s[c],1),s[c].m(e.parentNode,e))}for(De(),c=n.length;c<s.length;c+=1)i(c);Te()}},i(o){if(!t){for(let a=0;a<n.length;a+=1)N(s[a]);t=!0}},o(o){s=s.filter(Fn);for(let a=0;a<s.length;a+=1)R(s[a]);t=!1},d(o){o&&$(e),Re(s,o)}}}function Ku(l){let e,t,n=(l[4]||"any region")+"",s;return{c(){e=_("div"),t=z("No servers in "),s=z(n),u(e,"class","empty svelte-8rkhbz")},m(i,o){w(i,e,o),r(e,t),r(e,s)},p(i,o){o[0]&16&&n!==(n=(i[4]||"any region")+"")&&B(s,n)},i:pe,o:pe,d(i){i&&$(e)}}}function Bo(l){let e,t,n,s,i,o=(l[156].name||"unnamed")+"",a,c,p,f=l[176]+"",d,m,v,g,h,S;function y(){return l[122](l[176])}let k=l[156].project&&Uo(l);return{c(){e=_("label"),t=_("input"),s=b(),i=_("span"),a=z(o),c=b(),p=_("code"),d=z(f),m=b(),k&&k.c(),v=b(),u(t,"type","checkbox"),t.checked=n=l[37].has(l[176]),u(t,"class","svelte-8rkhbz"),u(i,"class","server-name svelte-8rkhbz"),u(p,"class","server-ip svelte-8rkhbz"),u(e,"class","server-item svelte-8rkhbz"),Ce(e,"selected",l[37].has(l[176]))},m(D,T){w(D,e,T),r(e,t),r(e,s),r(e,i),r(i,a),r(e,c),r(e,p),r(p,d),r(e,m),k&&k.m(e,null),r(e,v),g=!0,h||(S=Z(t,"change",y),h=!0)},p(D,T){l=D,(!g||T[1]&68&&n!==(n=l[37].has(l[176])))&&(t.checked=n),(!g||T[1]&4)&&o!==(o=(l[156].name||"unnamed")+"")&&B(a,o),(!g||T[1]&4)&&f!==(f=l[176]+"")&&B(d,f),l[156].project?k?(k.p(l,T),T[1]&4&&N(k,1)):(k=Uo(l),k.c(),N(k,1),k.m(e,v)):k&&(De(),R(k,1,1,()=>{k=null}),Te()),(!g||T[1]&68)&&Ce(e,"selected",l[37].has(l[176]))},i(D){g||(N(k),g=!0)},o(D){R(k),g=!1},d(D){D&&$(e),k&&k.d(),h=!1,S()}}}function Uo(l){let e,t;return e=new Je({props:{variant:"info",$$slots:{default:[Yu]},$$scope:{ctx:l}}}),{c(){ce(e.$$.fragment)},m(n,s){re(e,n,s),t=!0},p(n,s){const i={};s[1]&4|s[6]&4&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){ae(e,n)}}}function Yu(l){let e=l[156].project+"",t;return{c(){t=z(e)},m(n,s){w(n,t,s)},p(n,s){s[1]&4&&e!==(e=n[156].project+"")&&B(t,e)},d(n){n&&$(t)}}}function Ho(l){let e,t,n=l[176]&&Bo(l);return{c(){n&&n.c(),e=Ge()},m(s,i){n&&n.m(s,i),w(s,e,i),t=!0},p(s,i){s[176]?n?(n.p(s,i),i[1]&4&&N(n,1)):(n=Bo(s),n.c(),N(n,1),n.m(e.parentNode,e)):n&&(De(),R(n,1,1,()=>{n=null}),Te())},i(s){t||(N(n),t=!0)},o(s){R(n),t=!1},d(s){s&&$(e),n&&n.d(s)}}}function Go(l){let e,t;return e=new Je({props:{variant:"warning",$$slots:{default:[Qu]},$$scope:{ctx:l}}}),{c(){ce(e.$$.fragment)},m(n,s){re(e,n,s),t=!0},p(n,s){const i={};s[1]&128|s[6]&4&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){ae(e,n)}}}function Qu(l){let e,t;return{c(){e=z(l[38]),t=z(" new")},m(n,s){w(n,e,s),w(n,t,s)},p(n,s){s[1]&128&&B(e,n[38])},d(n){n&&($(e),$(t))}}}function Wo(l){let e,t,n,s,i,o,a,c,p,f,d,m,v,g,h,S,y,k,D,T,q,P,C,L,O,A,j,U,K,V,F,E=l[38]>0&&Vo(),M=me(l[6]||[]),G=[];for(let W=0;W<M.length;W+=1)G[W]=Jo(po(l,M,W));let I=me(l[31]||[]),J=[];for(let W=0;W<I.length;W+=1)J[W]=Ko(fo(l,I,W));let H=me(l[32]||[]),Q=[];for(let W=0;W<H.length;W+=1)Q[W]=Yo(uo(l,H,W));let le=l[38]>0&&!l[3]&&Qo();return{c(){e=_("div"),t=_("div"),n=_("div"),s=_("label"),i=z("Snapshot "),E&&E.c(),o=b(),a=_("select"),c=_("option"),c.textContent="Select snapshot...";for(let W=0;W<G.length;W+=1)G[W].c();p=b(),f=_("div"),d=_("label"),d.textContent="Region",m=b(),v=_("select");for(let W=0;W<J.length;W+=1)J[W].c();g=b(),h=_("div"),S=_("label"),S.textContent="Size",y=b(),k=_("select");for(let W=0;W<Q.length;W+=1)Q[W].c();D=b(),T=_("div"),q=_("span"),q.textContent="New servers to provision:",P=b(),C=_("div"),L=_("button"),L.textContent="−",O=b(),A=_("input"),j=b(),U=_("button"),U.textContent="+",K=b(),le&&le.c(),u(s,"for","snapshot-select"),u(s,"class","svelte-8rkhbz"),c.__value="",ee(c,c.__value),u(a,"id","snapshot-select"),u(a,"class","svelte-8rkhbz"),l[3]===void 0&&lt(()=>l[124].call(a)),u(n,"class","form-group svelte-8rkhbz"),u(d,"for","region-select"),u(d,"class","svelte-8rkhbz"),u(v,"id","region-select"),u(v,"class","svelte-8rkhbz"),l[4]===void 0&&lt(()=>l[125].call(v)),u(f,"class","form-group svelte-8rkhbz"),u(S,"for","size-select"),u(S,"class","svelte-8rkhbz"),u(k,"id","size-select"),u(k,"class","svelte-8rkhbz"),l[30]===void 0&&lt(()=>l[126].call(k)),u(h,"class","form-group svelte-8rkhbz"),u(t,"class","form-row three-col svelte-8rkhbz"),u(L,"type","button"),u(L,"class","svelte-8rkhbz"),u(A,"type","number"),u(A,"min","0"),u(A,"max","10"),u(A,"class","svelte-8rkhbz"),u(U,"type","button"),u(U,"class","svelte-8rkhbz"),u(C,"class","number-spinner svelte-8rkhbz"),u(T,"class","new-servers svelte-8rkhbz"),u(e,"class","section-content provisioning-config svelte-8rkhbz")},m(W,X){w(W,e,X),r(e,t),r(t,n),r(n,s),r(s,i),E&&E.m(s,null),r(n,o),r(n,a),r(a,c);for(let x=0;x<G.length;x+=1)G[x]&&G[x].m(a,null);Pe(a,l[3],!0),r(t,p),r(t,f),r(f,d),r(f,m),r(f,v);for(let x=0;x<J.length;x+=1)J[x]&&J[x].m(v,null);Pe(v,l[4],!0),r(t,g),r(t,h),r(h,S),r(h,y),r(h,k);for(let x=0;x<Q.length;x+=1)Q[x]&&Q[x].m(k,null);Pe(k,l[30],!0),r(e,D),r(e,T),r(T,q),r(T,P),r(T,C),r(C,L),r(C,O),r(C,A),ee(A,l[38]),r(C,j),r(C,U),r(T,K),le&&le.m(T,null),V||(F=[Z(a,"change",l[124]),Z(v,"change",l[125]),Z(k,"change",l[126]),Z(L,"click",l[127]),Z(A,"input",l[128]),Z(U,"click",l[129])],V=!0)},p(W,X){if(W[38]>0?E||(E=Vo(),E.c(),E.m(s,null)):E&&(E.d(1),E=null),X[0]&64){M=me(W[6]||[]);let x;for(x=0;x<M.length;x+=1){const _e=po(W,M,x);G[x]?G[x].p(_e,X):(G[x]=Jo(_e),G[x].c(),G[x].m(a,null))}for(;x<G.length;x+=1)G[x].d(1);G.length=M.length}if(X[0]&72&&Pe(a,W[3]),X[1]&1){I=me(W[31]||[]);let x;for(x=0;x<I.length;x+=1){const _e=fo(W,I,x);J[x]?J[x].p(_e,X):(J[x]=Ko(_e),J[x].c(),J[x].m(v,null))}for(;x<J.length;x+=1)J[x].d(1);J.length=I.length}if(X[0]&16|X[1]&1&&Pe(v,W[4]),X[1]&2){H=me(W[32]||[]);let x;for(x=0;x<H.length;x+=1){const _e=uo(W,H,x);Q[x]?Q[x].p(_e,X):(Q[x]=Yo(_e),Q[x].c(),Q[x].m(k,null))}for(;x<Q.length;x+=1)Q[x].d(1);Q.length=H.length}X[0]&1073741824|X[1]&2&&Pe(k,W[30]),X[1]&128&&Pl(A.value)!==W[38]&&ee(A,W[38]),W[38]>0&&!W[3]?le||(le=Qo(),le.c(),le.m(T,null)):le&&(le.d(1),le=null)},d(W){W&&$(e),E&&E.d(),Re(G,W),Re(J,W),Re(Q,W),le&&le.d(),V=!1,He(F)}}}function Vo(l){let e;return{c(){e=z("*")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Jo(l){let e,t=l[173].name+"",n,s;return{c(){e=_("option"),n=z(t),e.__value=s=l[173].id,ee(e,e.__value)},m(i,o){w(i,e,o),r(e,n)},p(i,o){o[0]&64&&t!==(t=i[173].name+"")&&B(n,t),o[0]&64&&s!==(s=i[173].id)&&(e.__value=s,ee(e,e.__value))},d(i){i&&$(e)}}}function Ko(l){let e,t=(l[170].name||l[170].slug)+"",n,s;return{c(){e=_("option"),n=z(t),e.__value=s=l[170].slug,ee(e,e.__value)},m(i,o){w(i,e,o),r(e,n)},p(i,o){o[1]&1&&t!==(t=(i[170].name||i[170].slug)+"")&&B(n,t),o[1]&1&&s!==(s=i[170].slug)&&(e.__value=s,ee(e,e.__value))},d(i){i&&$(e)}}}function Yo(l){let e,t=(l[167].description||l[167].slug)+"",n,s;return{c(){e=_("option"),n=z(t),e.__value=s=l[167].slug,ee(e,e.__value)},m(i,o){w(i,e,o),r(e,n)},p(i,o){o[1]&2&&t!==(t=(i[167].description||i[167].slug)+"")&&B(n,t),o[1]&2&&s!==(s=i[167].slug)&&(e.__value=s,ee(e,e.__value))},d(i){i&&$(e)}}}function Qo(l){let e;return{c(){e=_("small"),e.textContent="⚠️ Select a snapshot for new servers",u(e,"class","warning svelte-8rkhbz")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Zu(l){let e;return{c(){e=z("🚀 Deploy")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Xu(l){let e;return{c(){e=z("Deploying...")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function xu(l){let e;function t(i,o){return i[34]?Xu:Zu}let n=t(l),s=n(l);return{c(){s.c(),e=Ge()},m(i,o){s.m(i,o),w(i,e,o)},p(i,o){n!==(n=t(i))&&(s.d(1),s=n(i),s&&(s.c(),s.m(e.parentNode,e)))},d(i){i&&$(e),s.d(i)}}}function ef(l){let e,t,n,s,i,o,a,c,p,f,d,m,v,g,h,S,y,k,D,T,q,P,C,L,O,A,j,U,K,V,F,E,M,G,I,J,H,Q,le,W,X,x,_e,$e,he,ne,ve,we,fe,te,se,Ee,ge,Ve,Ot,rt,mt,ke,Fe,Ye,Ke,Ze,Be,Dt,vt,st,jt,$t=l[51]?"▼":"▶",nl,Xt,xt,sl,Ft=l[10].trim(),el,hl,ht,wt,ol,yt=l[52]?"▼":"▶",It,Gt,Yt,Qt,il=l[46]||Object.values(l[45]).some(fi),rl,ul,Tt,Wt,Bt,ye,Xe,Qe,gt,xe,ut,Ie,et,Tl,Nt,Ct,qt,Vt,Ut,We,fl,gl=l[53]?"▼":"▶",tl,ft,ll,pt,ot,it,al,bt,Rl,ql,Ol,cl=me(l[55]),ue=[];for(let ie=0;ie<cl.length;ie+=1)ue[ie]=go(ho(l,cl,ie));q=new je({props:{variant:"ghost",size:"sm",title:"Load saved config",$$slots:{default:[Eu]},$$scope:{ctx:l}}}),q.$on("click",l[56]),C=new je({props:{variant:"ghost",size:"sm",title:"Save current settings",$$slots:{default:[Pu]},$$scope:{ctx:l}}}),C.$on("click",l[57]),O=new je({props:{variant:"ghost",size:"sm",title:"Edit exclusion patterns",$$slots:{default:[Nu]},$$scope:{ctx:l}}}),O.$on("click",l[58]);let ze=l[48]&&bo(l),Ue=l[49]&&ko(l),tt=l[8]==="code"&&$o(l),nt=l[8]==="git"&&qo(l),Me=l[8]==="image"&&No(l),at=l[8]==="image_file"&&Lo(l),_t=Ft&&Ro(l),Lt=l[51]&&Ao(l),kt=il&&Oo(l),Mt=l[52]&&jo(l);Qe=new Je({props:{variant:"info",$$slots:{default:[Gu]},$$scope:{ctx:l}}}),ut=new je({props:{variant:"ghost",size:"sm",$$slots:{default:[Wu]},$$scope:{ctx:l}}}),ut.$on("click",l[120]),et=new je({props:{variant:"ghost",size:"sm",$$slots:{default:[Vu]},$$scope:{ctx:l}}}),et.$on("click",l[121]);const nn=[Ku,Ju],pl=[];function sn(ie,Se){return!ie[33]||ie[33].length===0?0:1}Ct=sn(l),qt=pl[Ct]=nn[Ct](l);let dt=l[38]>0&&Go(l),Rt=l[53]&&Wo(l);return al=new je({props:{variant:"primary",type:"submit",disabled:l[34],$$slots:{default:[xu]},$$scope:{ctx:l}}}),Rl=Hr(l[83][0]),{c(){e=_("form"),t=_("div"),n=_("div"),s=_("label"),s.textContent="App Name *",i=b(),o=_("input"),a=b(),c=_("div"),p=_("label"),p.textContent="Project",f=b(),d=_("input"),m=b(),v=_("div"),g=_("label"),g.textContent="Environment",h=b(),S=_("select");for(let ie=0;ie<ue.length;ie+=1)ue[ie].c();y=b(),k=_("div"),D=_("span"),D.textContent="Config:",T=b(),ce(q.$$.fragment),P=b(),ce(C.$$.fragment),L=b(),ce(O.$$.fragment),A=b(),ze&&ze.c(),j=b(),Ue&&Ue.c(),U=b(),K=_("div"),V=_("label"),V.innerHTML='Tags <small class="svelte-8rkhbz">(comma-separated)</small>',F=b(),E=_("input"),M=b(),G=_("div"),I=_("label"),I.textContent="Source Type *",J=b(),H=_("div"),Q=_("label"),le=_("input"),W=z(`
              📁 Local Code`),X=b(),x=_("label"),_e=_("input"),$e=z(`
              📦 Git Repo`),he=b(),ne=_("label"),ve=_("input"),we=z(`
              🐳 Registry`),fe=b(),te=_("label"),se=_("input"),Ee=z(`
              📦 Local Image`),ge=b(),tt&&tt.c(),Ve=b(),nt&&nt.c(),Ot=b(),Me&&Me.c(),rt=b(),at&&at.c(),mt=b(),ke=_("div"),Fe=_("label"),Fe.textContent="App Port",Ye=b(),Ke=_("input"),Ze=b(),Be=_("small"),Be.textContent="Port your app listens on inside the container",Dt=b(),vt=_("div"),st=_("button"),jt=_("span"),nl=z($t),Xt=b(),xt=_("span"),xt.textContent="Environment Variables",sl=b(),_t&&_t.c(),el=b(),Lt&&Lt.c(),hl=b(),ht=_("div"),wt=_("button"),ol=_("span"),It=z(yt),Gt=b(),Yt=_("span"),Yt.textContent="🔧 Service Configuration",Qt=b(),kt&&kt.c(),rl=b(),Mt&&Mt.c(),ul=b(),Tt=_("div"),Wt=_("div"),Bt=_("div"),ye=_("span"),ye.textContent="🖥️ Servers",Xe=b(),ce(Qe.$$.fragment),gt=b(),xe=_("div"),ce(ut.$$.fragment),Ie=b(),ce(et.$$.fragment),Tl=b(),Nt=_("div"),qt.c(),Vt=b(),Ut=_("div"),We=_("button"),fl=_("span"),tl=z(gl),ft=b(),ll=_("span"),ll.textContent="➕ New Server Provisioning",pt=b(),dt&&dt.c(),ot=b(),Rt&&Rt.c(),it=b(),ce(al.$$.fragment),u(s,"for","deploy-name"),u(s,"class","svelte-8rkhbz"),u(o,"id","deploy-name"),u(o,"type","text"),u(o,"placeholder","my-app"),o.required=!0,u(o,"pattern","[-a-z0-9]+"),u(o,"title","Lowercase letters, numbers, hyphens only"),u(o,"class","svelte-8rkhbz"),u(n,"class","form-group svelte-8rkhbz"),u(p,"for","deploy-project"),u(p,"class","svelte-8rkhbz"),u(d,"id","deploy-project"),u(d,"type","text"),u(d,"placeholder","my-project"),u(d,"pattern","[-a-z0-9]*"),u(d,"class","svelte-8rkhbz"),u(c,"class","form-group svelte-8rkhbz"),u(g,"for","deploy-env"),u(g,"class","svelte-8rkhbz"),u(S,"id","deploy-env"),u(S,"class","svelte-8rkhbz"),l[2]===void 0&&lt(()=>l[79].call(S)),u(v,"class","form-group svelte-8rkhbz"),u(t,"class","form-row three-col svelte-8rkhbz"),u(D,"class","config-label svelte-8rkhbz"),u(k,"class","config-bar svelte-8rkhbz"),u(V,"for","deploy-tags"),u(V,"class","svelte-8rkhbz"),u(E,"id","deploy-tags"),u(E,"type","text"),u(E,"placeholder","api, backend, v2"),u(E,"class","svelte-8rkhbz"),u(K,"class","form-group svelte-8rkhbz"),u(I,"class","svelte-8rkhbz"),u(le,"type","radio"),le.__value="code",ee(le,le.__value),u(le,"class","svelte-8rkhbz"),u(Q,"class","source-option svelte-8rkhbz"),Ce(Q,"active",l[8]==="code"),u(_e,"type","radio"),_e.__value="git",ee(_e,_e.__value),u(_e,"class","svelte-8rkhbz"),u(x,"class","source-option svelte-8rkhbz"),Ce(x,"active",l[8]==="git"),u(ve,"type","radio"),ve.__value="image",ee(ve,ve.__value),u(ve,"class","svelte-8rkhbz"),u(ne,"class","source-option svelte-8rkhbz"),Ce(ne,"active",l[8]==="image"),u(se,"type","radio"),se.__value="image_file",ee(se,se.__value),u(se,"class","svelte-8rkhbz"),u(te,"class","source-option svelte-8rkhbz"),Ce(te,"active",l[8]==="image_file"),u(H,"class","source-radio-group svelte-8rkhbz"),u(G,"class","form-group svelte-8rkhbz"),u(Fe,"for","deploy-port"),u(Fe,"class","svelte-8rkhbz"),u(Ke,"id","deploy-port"),u(Ke,"type","number"),u(Ke,"min","1"),u(Ke,"max","65535"),u(Ke,"class","svelte-8rkhbz"),u(Be,"class","svelte-8rkhbz"),u(ke,"class","form-group svelte-8rkhbz"),u(jt,"class","toggle-icon svelte-8rkhbz"),u(st,"type","button"),u(st,"class","section-toggle svelte-8rkhbz"),u(vt,"class","collapsible-section svelte-8rkhbz"),Ce(vt,"expanded",l[51]),u(ol,"class","toggle-icon svelte-8rkhbz"),u(wt,"type","button"),u(wt,"class","section-toggle svelte-8rkhbz"),u(ht,"class","collapsible-section svelte-8rkhbz"),Ce(ht,"expanded",l[52]),u(Bt,"class","server-title svelte-8rkhbz"),u(xe,"class","server-actions svelte-8rkhbz"),u(Wt,"class","server-header svelte-8rkhbz"),u(Nt,"class","server-list svelte-8rkhbz"),u(fl,"class","toggle-icon svelte-8rkhbz"),u(We,"type","button"),u(We,"class","section-toggle svelte-8rkhbz"),u(Ut,"class","collapsible-section svelte-8rkhbz"),Ce(Ut,"expanded",l[53]),u(Tt,"class","server-selection svelte-8rkhbz"),Rl.p(le,_e,ve,se)},m(ie,Se){w(ie,e,Se),r(e,t),r(t,n),r(n,s),r(n,i),r(n,o),ee(o,l[0]),r(t,a),r(t,c),r(c,p),r(c,f),r(c,d),ee(d,l[1]),r(t,m),r(t,v),r(v,g),r(v,h),r(v,S);for(let bl=0;bl<ue.length;bl+=1)ue[bl]&&ue[bl].m(S,null);Pe(S,l[2],!0),r(e,y),r(e,k),r(k,D),r(k,T),re(q,k,null),r(k,P),re(C,k,null),r(k,L),re(O,k,null),r(k,A),ze&&ze.m(k,null),r(e,j),Ue&&Ue.m(e,null),r(e,U),r(e,K),r(K,V),r(K,F),r(K,E),ee(E,l[7]),r(e,M),r(e,G),r(G,I),r(G,J),r(G,H),r(H,Q),r(Q,le),le.checked=le.__value===l[8],r(Q,W),r(H,X),r(H,x),r(x,_e),_e.checked=_e.__value===l[8],r(x,$e),r(H,he),r(H,ne),r(ne,ve),ve.checked=ve.__value===l[8],r(ne,we),r(H,fe),r(H,te),r(te,se),se.checked=se.__value===l[8],r(te,Ee),r(e,ge),tt&&tt.m(e,null),r(e,Ve),nt&&nt.m(e,null),r(e,Ot),Me&&Me.m(e,null),r(e,rt),at&&at.m(e,null),r(e,mt),r(e,ke),r(ke,Fe),r(ke,Ye),r(ke,Ke),ee(Ke,l[9]),r(ke,Ze),r(ke,Be),r(e,Dt),r(e,vt),r(vt,st),r(st,jt),r(jt,nl),r(st,Xt),r(st,xt),r(st,sl),_t&&_t.m(st,null),r(vt,el),Lt&&Lt.m(vt,null),r(e,hl),r(e,ht),r(ht,wt),r(wt,ol),r(ol,It),r(wt,Gt),r(wt,Yt),r(wt,Qt),kt&&kt.m(wt,null),r(ht,rl),Mt&&Mt.m(ht,null),r(e,ul),r(e,Tt),r(Tt,Wt),r(Wt,Bt),r(Bt,ye),r(Bt,Xe),re(Qe,Bt,null),r(Wt,gt),r(Wt,xe),re(ut,xe,null),r(xe,Ie),re(et,xe,null),r(Tt,Tl),r(Tt,Nt),pl[Ct].m(Nt,null),r(Tt,Vt),r(Tt,Ut),r(Ut,We),r(We,fl),r(fl,tl),r(We,ft),r(We,ll),r(We,pt),dt&&dt.m(We,null),r(Ut,ot),Rt&&Rt.m(Ut,null),r(e,it),re(al,e,null),bt=!0,ql||(Ol=[Z(o,"input",l[77]),Z(d,"input",l[78]),Z(S,"change",l[79]),Z(E,"input",l[81]),Z(le,"change",l[82]),Z(_e,"change",l[84]),Z(ve,"change",l[85]),Z(se,"change",l[86]),Z(Ke,"input",l[107]),Z(st,"click",l[108]),Z(wt,"click",l[110]),Z(We,"click",l[123]),Z(e,"submit",l[73])],ql=!0)},p(ie,Se){if(Se[0]&1&&o.value!==ie[0]&&ee(o,ie[0]),Se[0]&2&&d.value!==ie[1]&&ee(d,ie[1]),Se[1]&16777216){cl=me(ie[55]);let Jt;for(Jt=0;Jt<cl.length;Jt+=1){const fn=ho(ie,cl,Jt);ue[Jt]?ue[Jt].p(fn,Se):(ue[Jt]=go(fn),ue[Jt].c(),ue[Jt].m(S,null))}for(;Jt<ue.length;Jt+=1)ue[Jt].d(1);ue.length=cl.length}Se[0]&4|Se[1]&16777216&&Pe(S,ie[2]);const bl={};Se[6]&4&&(bl.$$scope={dirty:Se,ctx:ie}),q.$set(bl);const on={};Se[6]&4&&(on.$$scope={dirty:Se,ctx:ie}),C.$set(on);const rn={};Se[6]&4&&(rn.$$scope={dirty:Se,ctx:ie}),O.$set(rn),ie[48]?ze?ze.p(ie,Se):(ze=bo(ie),ze.c(),ze.m(k,null)):ze&&(ze.d(1),ze=null),ie[49]?Ue?(Ue.p(ie,Se),Se[1]&262144&&N(Ue,1)):(Ue=ko(ie),Ue.c(),N(Ue,1),Ue.m(e,U)):Ue&&(De(),R(Ue,1,1,()=>{Ue=null}),Te()),Se[0]&128&&E.value!==ie[7]&&ee(E,ie[7]),Se[0]&256&&(le.checked=le.__value===ie[8]),(!bt||Se[0]&256)&&Ce(Q,"active",ie[8]==="code"),Se[0]&256&&(_e.checked=_e.__value===ie[8]),(!bt||Se[0]&256)&&Ce(x,"active",ie[8]==="git"),Se[0]&256&&(ve.checked=ve.__value===ie[8]),(!bt||Se[0]&256)&&Ce(ne,"active",ie[8]==="image"),Se[0]&256&&(se.checked=se.__value===ie[8]),(!bt||Se[0]&256)&&Ce(te,"active",ie[8]==="image_file"),ie[8]==="code"?tt?(tt.p(ie,Se),Se[0]&256&&N(tt,1)):(tt=$o(ie),tt.c(),N(tt,1),tt.m(e,Ve)):tt&&(De(),R(tt,1,1,()=>{tt=null}),Te()),ie[8]==="git"?nt?(nt.p(ie,Se),Se[0]&256&&N(nt,1)):(nt=qo(ie),nt.c(),N(nt,1),nt.m(e,Ot)):nt&&(De(),R(nt,1,1,()=>{nt=null}),Te()),ie[8]==="image"?Me?Me.p(ie,Se):(Me=No(ie),Me.c(),Me.m(e,rt)):Me&&(Me.d(1),Me=null),ie[8]==="image_file"?at?at.p(ie,Se):(at=Lo(ie),at.c(),at.m(e,mt)):at&&(at.d(1),at=null),Se[0]&512&&Pl(Ke.value)!==ie[9]&&ee(Ke,ie[9]),(!bt||Se[1]&1048576)&&$t!==($t=ie[51]?"▼":"▶")&&B(nl,$t),Se[0]&1024&&(Ft=ie[10].trim()),Ft?_t?(_t.p(ie,Se),Se[0]&1024&&N(_t,1)):(_t=Ro(ie),_t.c(),N(_t,1),_t.m(st,null)):_t&&(De(),R(_t,1,1,()=>{_t=null}),Te()),ie[51]?Lt?Lt.p(ie,Se):(Lt=Ao(ie),Lt.c(),Lt.m(vt,null)):Lt&&(Lt.d(1),Lt=null),(!bt||Se[1]&1048576)&&Ce(vt,"expanded",ie[51]),(!bt||Se[1]&2097152)&&yt!==(yt=ie[52]?"▼":"▶")&&B(It,yt),Se[1]&49152&&(il=ie[46]||Object.values(ie[45]).some(fi)),il?kt?Se[1]&49152&&N(kt,1):(kt=Oo(ie),kt.c(),N(kt,1),kt.m(wt,null)):kt&&(De(),R(kt,1,1,()=>{kt=null}),Te()),ie[52]?Mt?Mt.p(ie,Se):(Mt=jo(ie),Mt.c(),Mt.m(ht,null)):Mt&&(Mt.d(1),Mt=null),(!bt||Se[1]&2097152)&&Ce(ht,"expanded",ie[52]);const an={};Se[1]&64|Se[6]&4&&(an.$$scope={dirty:Se,ctx:ie}),Qe.$set(an);const cn={};Se[6]&4&&(cn.$$scope={dirty:Se,ctx:ie}),ut.$set(cn);const un={};Se[6]&4&&(un.$$scope={dirty:Se,ctx:ie}),et.$set(un);let Kl=Ct;Ct=sn(ie),Ct===Kl?pl[Ct].p(ie,Se):(De(),R(pl[Kl],1,1,()=>{pl[Kl]=null}),Te(),qt=pl[Ct],qt?qt.p(ie,Se):(qt=pl[Ct]=nn[Ct](ie),qt.c()),N(qt,1),qt.m(Nt,null)),(!bt||Se[1]&4194304)&&gl!==(gl=ie[53]?"▼":"▶")&&B(tl,gl),ie[38]>0?dt?(dt.p(ie,Se),Se[1]&128&&N(dt,1)):(dt=Go(ie),dt.c(),N(dt,1),dt.m(We,null)):dt&&(De(),R(dt,1,1,()=>{dt=null}),Te()),ie[53]?Rt?Rt.p(ie,Se):(Rt=Wo(ie),Rt.c(),Rt.m(Ut,null)):Rt&&(Rt.d(1),Rt=null),(!bt||Se[1]&4194304)&&Ce(Ut,"expanded",ie[53]);const Yl={};Se[1]&8&&(Yl.disabled=ie[34]),Se[1]&8|Se[6]&4&&(Yl.$$scope={dirty:Se,ctx:ie}),al.$set(Yl)},i(ie){bt||(N(q.$$.fragment,ie),N(C.$$.fragment,ie),N(O.$$.fragment,ie),N(Ue),N(tt),N(nt),N(_t),N(kt),N(Qe.$$.fragment,ie),N(ut.$$.fragment,ie),N(et.$$.fragment,ie),N(qt),N(dt),N(al.$$.fragment,ie),bt=!0)},o(ie){R(q.$$.fragment,ie),R(C.$$.fragment,ie),R(O.$$.fragment,ie),R(Ue),R(tt),R(nt),R(_t),R(kt),R(Qe.$$.fragment,ie),R(ut.$$.fragment,ie),R(et.$$.fragment,ie),R(qt),R(dt),R(al.$$.fragment,ie),bt=!1},d(ie){ie&&$(e),Re(ue,ie),ae(q),ae(C),ae(O),ze&&ze.d(),Ue&&Ue.d(),tt&&tt.d(),nt&&nt.d(),Me&&Me.d(),at&&at.d(),_t&&_t.d(),Lt&&Lt.d(),kt&&kt.d(),Mt&&Mt.d(),ae(Qe),ae(ut),ae(et),pl[Ct].d(),dt&&dt.d(),Rt&&Rt.d(),ae(al),Rl.r(),ql=!1,He(Ol)}}}function tf(l){let e;return{c(){e=_("div"),e.innerHTML='<p>No deployment in progress</p> <p class="hint svelte-8rkhbz">Fill in the form and click Deploy to start</p>',u(e,"class","empty-state svelte-8rkhbz")},m(t,n){w(t,e,n)},p:pe,d(t){t&&$(e)}}}function lf(l){let e,t,n,s,i,o,a=me(l[36]),c=[];for(let m=0;m<a.length;m+=1)c[m]=Zo(co(l,a,m));function p(m,v){if(m[39]&&m[39].success)return sf;if(m[39]&&!m[39].success)return nf}let f=p(l),d=f&&f(l);return{c(){e=_("div"),t=_("div"),n=_("div"),s=b(),i=_("div");for(let m=0;m<c.length;m+=1)c[m].c();o=b(),d&&d.c(),u(n,"class","progress-fill svelte-8rkhbz"),ml(n,"width",l[35]+"%"),u(t,"class","progress-bar svelte-8rkhbz"),u(i,"class","log-output svelte-8rkhbz"),u(e,"class","progress-section svelte-8rkhbz")},m(m,v){w(m,e,v),r(e,t),r(t,n),r(e,s),r(e,i);for(let g=0;g<c.length;g+=1)c[g]&&c[g].m(i,null);r(e,o),d&&d.m(e,null)},p(m,v){if(v[1]&16&&ml(n,"width",m[35]+"%"),v[1]&32){a=me(m[36]);let g;for(g=0;g<a.length;g+=1){const h=co(m,a,g);c[g]?c[g].p(h,v):(c[g]=Zo(h),c[g].c(),c[g].m(i,null))}for(;g<c.length;g+=1)c[g].d(1);c.length=a.length}f===(f=p(m))&&d?d.p(m,v):(d&&d.d(1),d=f&&f(m),d&&(d.c(),d.m(e,null)))},d(m){m&&$(e),Re(c,m),d&&d.d()}}}function Zo(l){let e,t,n=l[75].time.toLocaleTimeString()+"",s,i,o,a=ci(l[75].message)+"",c,p;return{c(){e=_("div"),t=_("span"),s=z(n),i=b(),o=new Ca(!1),c=b(),u(t,"class","log-time svelte-8rkhbz"),o.a=c,u(e,"class",p="log-line "+l[75].type+" svelte-8rkhbz")},m(f,d){w(f,e,d),r(e,t),r(t,s),r(e,i),o.m(a,e),r(e,c)},p(f,d){d[1]&32&&n!==(n=f[75].time.toLocaleTimeString()+"")&&B(s,n),d[1]&32&&a!==(a=ci(f[75].message)+"")&&o.p(a),d[1]&32&&p!==(p="log-line "+f[75].type+" svelte-8rkhbz")&&u(e,"class",p)},d(f){f&&$(e)}}}function nf(l){let e,t,n,s,i,o=l[2].toUpperCase()+"",a,c,p,f=l[39].error&&Xo(l);function d(g,h){return g[39].servers&&g[39].servers.length>0?rf:of}let m=d(l),v=m(l);return{c(){e=_("div"),t=_("div"),n=_("h4"),n.textContent="❌ Deployment Failed",s=b(),i=_("span"),a=z(o),c=b(),f&&f.c(),p=b(),v.c(),u(n,"class","svelte-8rkhbz"),u(i,"class","env-badge svelte-8rkhbz"),u(t,"class","result-header svelte-8rkhbz"),u(e,"class","deploy-failure-box svelte-8rkhbz")},m(g,h){w(g,e,h),r(e,t),r(t,n),r(t,s),r(t,i),r(i,a),r(e,c),f&&f.m(e,null),r(e,p),v.m(e,null)},p(g,h){h[0]&4&&o!==(o=g[2].toUpperCase()+"")&&B(a,o),g[39].error?f?f.p(g,h):(f=Xo(g),f.c(),f.m(e,p)):f&&(f.d(1),f=null),m===(m=d(g))&&v?v.p(g,h):(v.d(1),v=m(g),v&&(v.c(),v.m(e,null)))},d(g){g&&$(e),f&&f.d(),v.d()}}}function sf(l){let e,t,n,s,i,o=l[2].toUpperCase()+"",a,c,p,f=l[39].domain&&ti(l),d=l[39].servers&&l[39].servers.length>0&&li(l);return{c(){e=_("div"),t=_("div"),n=_("h4"),n.textContent="✅ Deployment Complete",s=b(),i=_("span"),a=z(o),c=b(),f&&f.c(),p=b(),d&&d.c(),u(n,"class","svelte-8rkhbz"),u(i,"class","env-badge svelte-8rkhbz"),u(t,"class","result-header svelte-8rkhbz"),u(e,"class","deploy-success-box svelte-8rkhbz")},m(m,v){w(m,e,v),r(e,t),r(t,n),r(t,s),r(t,i),r(i,a),r(e,c),f&&f.m(e,null),r(e,p),d&&d.m(e,null)},p(m,v){v[0]&4&&o!==(o=m[2].toUpperCase()+"")&&B(a,o),m[39].domain?f?f.p(m,v):(f=ti(m),f.c(),f.m(e,p)):f&&(f.d(1),f=null),m[39].servers&&m[39].servers.length>0?d?d.p(m,v):(d=li(m),d.c(),d.m(e,null)):d&&(d.d(1),d=null)},d(m){m&&$(e),f&&f.d(),d&&d.d()}}}function Xo(l){let e,t=l[39].error+"",n;return{c(){e=_("p"),n=z(t)},m(s,i){w(s,e,i),r(e,n)},p(s,i){i[1]&256&&t!==(t=s[39].error+"")&&B(n,t)},d(s){s&&$(e)}}}function of(l){let e;return{c(){e=_("p"),e.textContent="No server details available",ml(e,"margin-top","8px"),ml(e,"opacity","0.8")},m(t,n){w(t,e,n)},p:pe,d(t){t&&$(e)}}}function rf(l){let e,t,n,s,i=me(l[39].servers),o=[];for(let a=0;a<i.length;a+=1)o[a]=ei(io(l,i,a));return{c(){e=_("div"),t=_("span"),t.textContent="Server Status:",n=b(),s=_("div");for(let a=0;a<o.length;a+=1)o[a].c();u(t,"class","result-label svelte-8rkhbz"),u(s,"class","server-links svelte-8rkhbz"),u(e,"class","result-section svelte-8rkhbz"),ml(e,"margin-top","12px")},m(a,c){w(a,e,c),r(e,t),r(e,n),r(e,s);for(let p=0;p<o.length;p+=1)o[p]&&o[p].m(s,null)},p(a,c){if(c[0]&1|c[1]&256){i=me(a[39].servers);let p;for(p=0;p<i.length;p+=1){const f=io(a,i,p);o[p]?o[p].p(f,c):(o[p]=ei(f),o[p].c(),o[p].m(s,null))}for(;p<o.length;p+=1)o[p].d(1);o.length=i.length}},d(a){a&&$(e),Re(o,a)}}}function af(l){let e,t=l[156].ip+"",n,s,i=l[156].error&&xo(l);return{c(){e=z("❌ "),n=z(t),i&&i.c(),s=Ge()},m(o,a){w(o,e,a),w(o,n,a),i&&i.m(o,a),w(o,s,a)},p(o,a){a[1]&256&&t!==(t=o[156].ip+"")&&B(n,t),o[156].error?i?i.p(o,a):(i=xo(o),i.c(),i.m(s.parentNode,s)):i&&(i.d(1),i=null)},d(o){o&&($(e),$(n),$(s)),i&&i.d(o)}}}function cf(l){let e,t=l[156].ip+"",n;return{c(){e=z("✅ "),n=z(t)},m(s,i){w(s,e,i),w(s,n,i)},p(s,i){i[1]&256&&t!==(t=s[156].ip+"")&&B(n,t)},d(s){s&&($(e),$(n))}}}function xo(l){let e,t=l[156].error+"",n;return{c(){e=z(": "),n=z(t)},m(s,i){w(s,e,i),w(s,n,i)},p(s,i){i[1]&256&&t!==(t=s[156].error+"")&&B(n,t)},d(s){s&&($(e),$(n))}}}function ei(l){let e,t,n,s,i,o,a;function c(m,v){return m[156].success?cf:af}let p=c(l),f=p(l);function d(){return l[132](l[156])}return{c(){e=_("div"),t=_("span"),f.c(),n=b(),s=_("button"),s.textContent="📋 Logs",i=b(),u(s,"class","log-btn svelte-8rkhbz"),u(e,"class","server-link-row svelte-8rkhbz")},m(m,v){w(m,e,v),r(e,t),f.m(t,null),r(e,n),r(e,s),r(e,i),o||(a=Z(s,"click",d),o=!0)},p(m,v){l=m,p===(p=c(l))&&f?f.p(l,v):(f.d(1),f=p(l),f&&(f.c(),f.m(t,null)))},d(m){m&&$(e),f.d(),o=!1,a()}}}function ti(l){let e,t,n,s,i,o=l[39].domain+"",a,c;return{c(){e=_("div"),t=_("span"),t.textContent="Domain:",n=b(),s=_("a"),i=z("https://"),a=z(o),u(t,"class","result-label svelte-8rkhbz"),u(s,"href",c="https://"+l[39].domain),u(s,"target","_blank"),u(s,"class","result-link svelte-8rkhbz"),u(e,"class","result-section svelte-8rkhbz")},m(p,f){w(p,e,f),r(e,t),r(e,n),r(e,s),r(s,i),r(s,a)},p(p,f){f[1]&256&&o!==(o=p[39].domain+"")&&B(a,o),f[1]&256&&c!==(c="https://"+p[39].domain)&&u(s,"href",c)},d(p){p&&$(e)}}}function li(l){let e,t,n,s,i,o=l[39].servers.some(ui),a,c=me(l[39].servers.filter(mi)),p=[];for(let d=0;d<c.length;d+=1)p[d]=ni(ao(l,c,d));let f=o&&si(l);return{c(){e=_("div"),t=_("span"),t.textContent="Servers:",n=b(),s=_("div");for(let d=0;d<p.length;d+=1)p[d].c();i=b(),f&&f.c(),a=Ge(),u(t,"class","result-label svelte-8rkhbz"),u(s,"class","server-links svelte-8rkhbz"),u(e,"class","result-section svelte-8rkhbz")},m(d,m){w(d,e,m),r(e,t),r(e,n),r(e,s);for(let v=0;v<p.length;v+=1)p[v]&&p[v].m(s,null);w(d,i,m),f&&f.m(d,m),w(d,a,m)},p(d,m){if(m[0]&1|m[1]&256){c=me(d[39].servers.filter(mi));let v;for(v=0;v<c.length;v+=1){const g=ao(d,c,v);p[v]?p[v].p(g,m):(p[v]=ni(g),p[v].c(),p[v].m(s,null))}for(;v<p.length;v+=1)p[v].d(1);p.length=c.length}m[1]&256&&(o=d[39].servers.some(ui)),o?f?f.p(d,m):(f=si(d),f.c(),f.m(a.parentNode,a)):f&&(f.d(1),f=null)},d(d){d&&($(e),$(i),$(a)),Re(p,d),f&&f.d(d)}}}function ni(l){let e,t,n=l[156].url+"",s,i,o,a,c,p,f;function d(){return l[130](l[156])}return{c(){e=_("div"),t=_("a"),s=z(n),o=b(),a=_("button"),a.textContent="📋 Logs",c=b(),u(t,"href",i=l[156].url),u(t,"target","_blank"),u(t,"class","result-link svelte-8rkhbz"),u(a,"class","log-btn svelte-8rkhbz"),u(e,"class","server-link-row svelte-8rkhbz")},m(m,v){w(m,e,v),r(e,t),r(t,s),r(e,o),r(e,a),r(e,c),p||(f=Z(a,"click",d),p=!0)},p(m,v){l=m,v[1]&256&&n!==(n=l[156].url+"")&&B(s,n),v[1]&256&&i!==(i=l[156].url)&&u(t,"href",i)},d(m){m&&$(e),p=!1,f()}}}function si(l){let e,t,n,s=me(l[39].servers.filter(vi)),i=[];for(let o=0;o<s.length;o+=1)i[o]=oi(ro(l,s,o));return{c(){e=_("div"),t=_("span"),t.textContent="Failed Servers:",n=b();for(let o=0;o<i.length;o+=1)i[o].c();u(t,"class","result-label svelte-8rkhbz"),ml(t,"color","#fef3c7"),u(e,"class","failed-servers-section svelte-8rkhbz")},m(o,a){w(o,e,a),r(e,t),r(e,n);for(let c=0;c<i.length;c+=1)i[c]&&i[c].m(e,null)},p(o,a){if(a[0]&1|a[1]&256){s=me(o[39].servers.filter(vi));let c;for(c=0;c<s.length;c+=1){const p=ro(o,s,c);i[c]?i[c].p(p,a):(i[c]=oi(p),i[c].c(),i[c].m(e,null))}for(;c<i.length;c+=1)i[c].d(1);i.length=s.length}},d(o){o&&$(e),Re(i,o)}}}function oi(l){let e,t,n,s=l[156].ip+"",i,o,a=(l[156].error||"Unknown error")+"",c,p,f,d,m,v;function g(){return l[131](l[156])}return{c(){e=_("div"),t=_("span"),n=z("❌ "),i=z(s),o=z(": "),c=z(a),p=b(),f=_("button"),f.textContent="📋 Logs",d=b(),ml(t,"color","#fef3c7"),u(f,"class","log-btn svelte-8rkhbz"),u(e,"class","server-link-row svelte-8rkhbz")},m(h,S){w(h,e,S),r(e,t),r(t,n),r(t,i),r(t,o),r(t,c),r(e,p),r(e,f),r(e,d),m||(v=Z(f,"click",g),m=!0)},p(h,S){l=h,S[1]&256&&s!==(s=l[156].ip+"")&&B(i,s),S[1]&256&&a!==(a=(l[156].error||"Unknown error")+"")&&B(c,a)},d(h){h&&$(e),m=!1,v()}}}function uf(l){let e;function t(i,o){return i[34]||i[36].length>0?lf:tf}let n=t(l),s=n(l);return{c(){s.c(),e=Ge()},m(i,o){s.m(i,o),w(i,e,o)},p(i,o){n===(n=t(i))&&s?s.p(i,o):(s.d(1),s=n(i),s&&(s.c(),s.m(e.parentNode,e)))},d(i){i&&$(e),s.d(i)}}}function ii(l){let e,t,n=(l[156].name||l[156].ip)+"",s,i,o,a=l[156].ip+"",c,p;return{c(){e=_("div"),t=_("span"),s=z(n),i=b(),o=_("span"),c=z(a),p=b(),u(t,"class","server-name svelte-8rkhbz"),u(o,"class","server-ip svelte-8rkhbz"),u(e,"class","cleanup-server-item svelte-8rkhbz")},m(f,d){w(f,e,d),r(e,t),r(t,s),r(e,i),r(e,o),r(o,c),r(e,p)},p(f,d){d[1]&1024&&n!==(n=(f[156].name||f[156].ip)+"")&&B(s,n),d[1]&1024&&a!==(a=f[156].ip+"")&&B(c,a)},d(f){f&&$(e)}}}function ff(l){let e,t,n,s,i=l[41].length+[...l[37]].length+"",o,a,c,p=[...l[37]].length+"",f,d,m,v,g,h,S=me(l[41]),y=[];for(let k=0;k<S.length;k+=1)y[k]=ii(oo(l,S,k));return{c(){e=_("div"),t=_("p"),n=z("This service is currently running on "),s=_("strong"),o=z(i),a=z(` servers.
      You're deploying to `),c=_("strong"),f=z(p),d=z(" servers."),m=b(),v=_("p"),v.textContent="Stop containers on the following servers?",g=b(),h=_("div");for(let k=0;k<y.length;k+=1)y[k].c();u(t,"class","svelte-8rkhbz"),u(v,"class","svelte-8rkhbz"),u(h,"class","cleanup-server-list svelte-8rkhbz"),u(e,"class","cleanup-confirm-content svelte-8rkhbz")},m(k,D){w(k,e,D),r(e,t),r(t,n),r(t,s),r(s,o),r(t,a),r(t,c),r(c,f),r(t,d),r(e,m),r(e,v),r(e,g),r(e,h);for(let T=0;T<y.length;T+=1)y[T]&&y[T].m(h,null)},p(k,D){if(D[1]&1088&&i!==(i=k[41].length+[...k[37]].length+"")&&B(o,i),D[1]&64&&p!==(p=[...k[37]].length+"")&&B(f,p),D[1]&1024){S=me(k[41]);let T;for(T=0;T<S.length;T+=1){const q=oo(k,S,T);y[T]?y[T].p(q,D):(y[T]=ii(q),y[T].c(),y[T].m(h,null))}for(;T<y.length;T+=1)y[T].d(1);y.length=S.length}},d(k){k&&$(e),Re(y,k)}}}function pf(l){let e;return{c(){e=z("Proceed")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function _f(l){let e;return{c(){e=z("Cancel")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function df(l){let e,t,n,s,i;return t=new je({props:{variant:"primary",$$slots:{default:[pf]},$$scope:{ctx:l}}}),t.$on("click",l[74]),s=new je({props:{variant:"ghost",$$slots:{default:[_f]},$$scope:{ctx:l}}}),s.$on("click",l[133]),{c(){e=_("div"),ce(t.$$.fragment),n=b(),ce(s.$$.fragment),u(e,"slot","footer")},m(o,a){w(o,e,a),re(t,e,null),r(e,n),re(s,e,null),i=!0},p(o,a){const c={};a[6]&4&&(c.$$scope={dirty:a,ctx:o}),t.$set(c);const p={};a[6]&4&&(p.$$scope={dirty:a,ctx:o}),s.$set(p)},i(o){i||(N(t.$$.fragment,o),N(s.$$.fragment,o),i=!0)},o(o){R(t.$$.fragment,o),R(s.$$.fragment,o),i=!1},d(o){o&&$(e),ae(t),ae(s)}}}function mf(l){let e,t,n,s,i,o,a,c,p;n=new At({props:{title:"🚀 Deploy Application",$$slots:{default:[ef]},$$scope:{ctx:l}}}),i=new At({props:{title:"📋 Deployment Progress",$$slots:{default:[uf]},$$scope:{ctx:l}}});function f(m){l[134](m)}let d={title:"⚠️ Service Already Running",width:"500px",$$slots:{footer:[df],default:[ff]},$$scope:{ctx:l}};return l[40]!==void 0&&(d.open=l[40]),a=new Ml({props:d}),Kt.push(()=>Ll(a,"open",f)),a.$on("close",l[135]),{c(){e=_("div"),t=_("div"),ce(n.$$.fragment),s=b(),ce(i.$$.fragment),o=b(),ce(a.$$.fragment),u(t,"class","deploy-grid svelte-8rkhbz"),u(e,"class","deploy-page svelte-8rkhbz")},m(m,v){w(m,e,v),r(e,t),re(n,t,null),r(t,s),re(i,t,null),w(m,o,v),re(a,m,v),p=!0},p(m,v){const g={};v[0]&2147483647|v[1]&16773327|v[6]&4&&(g.$$scope={dirty:v,ctx:m}),n.$set(g);const h={};v[0]&5|v[1]&312|v[6]&4&&(h.$$scope={dirty:v,ctx:m}),i.$set(h);const S={};v[1]&3648|v[6]&4&&(S.$$scope={dirty:v,ctx:m}),!c&&v[1]&512&&(c=!0,S.open=m[40],Nl(()=>c=!1)),a.$set(S)},i(m){p||(N(n.$$.fragment,m),N(i.$$.fragment,m),N(a.$$.fragment,m),p=!0)},o(m){R(n.$$.fragment,m),R(i.$$.fragment,m),R(a.$$.fragment,m),p=!1},d(m){m&&($(e),$(o)),ae(n),ae(i),ae(a,m)}}}function vf(l){l.preventDefault(),l.stopPropagation()}async function ea(l,e){const t=[],n=l.createReader();let s=[],i;do i=await new Promise((o,a)=>{n.readEntries(o,a)}),s=s.concat(i);while(i.length>0);for(const o of s){const a=e?`${e}/${o.name}`:o.name;if(o.isFile){const c=await new Promise((p,f)=>{o.file(p,f)});c._relativePath=a,t.push(c)}else if(o.isDirectory){const c=await ea(o,a);t.push(...c)}}return t}function ri(l){return new Promise((e,t)=>{const n=new FileReader;n.onload=()=>e(new Uint8Array(n.result)),n.onerror=t,n.readAsArrayBuffer(l)})}function ai(l){return new Promise((e,t)=>{const n=new FileReader;n.onload=()=>e(n.result),n.onerror=t,n.readAsText(l)})}function ci(l){const e=/(https?:\/\/[^\s]+)/g;return l.replace(e,'<a href="$1" target="_blank" class="log-link">$1</a>')}const ui=l=>!l.success,fi=l=>l,hf=l=>l.isMain,pi=l=>l.isMain,_i=l=>l.isMain,di=l=>l.trim(),mi=l=>l.success,vi=l=>!l.success;function gf(l,e,t){let n,s,i;ct(l,Ya,Y=>t(6,s=Y)),ct(l,xl,Y=>t(76,i=Y));let o="",a="",c="prod",p="",f="code",d=8e3,m="",v="",g="main",h="",S=[],y="",k="",D=null,T="",q="",P="",C=[],L=null,O=null,A=!0,j=!1,U="",K="",V=!1,F="",E="",M="",G="lon1",I="s-1vcpu-2gb",J=[],H=[],Q=[],le=!1,W=0,X=[],x=new Set,_e=0,$e=null,he=!1,ne=[],ve=null,we=!0,fe=!0,te={postgres:!1,redis:!1,mysql:!1,mongo:!1},se=!0,Ee="digitalpixo.com",ge="",Ve="",Ot=!1,rt=["node_modules/","__pycache__/","*.pyc",".git/",".venv/","venv/",".env",".DS_Store",".idea/",".vscode/","dist/","build/",".pytest_cache/",".mypy_cache/"],mt=rt.join(`
`),ke=!1,Fe=!1,Ye=!1;const Ke=[...rt],Ze=["dev","test","staging","uat","prod"];tn(()=>{$l.refresh().catch(()=>{}),yn.refresh().catch(()=>{}),Be()});async function Be(){try{try{const Y=await Oe("GET","/infra/regions");t(31,J=Y.regions||Y||[])}catch{t(31,J=[{slug:"nyc1",name:"New York 1"},{slug:"nyc3",name:"New York 3"},{slug:"sfo3",name:"San Francisco 3"},{slug:"ams3",name:"Amsterdam 3"},{slug:"sgp1",name:"Singapore 1"},{slug:"lon1",name:"London 1"},{slug:"fra1",name:"Frankfurt 1"}])}try{const Y=await Oe("GET","/infra/sizes");t(32,H=Y.sizes||Y||[])}catch{t(32,H=[{slug:"s-1vcpu-512mb-10gb",description:"512MB / 1 vCPU"},{slug:"s-1vcpu-1gb",description:"1GB / 1 vCPU"},{slug:"s-1vcpu-2gb",description:"2GB / 1 vCPU"},{slug:"s-2vcpu-2gb",description:"2GB / 2 vCPU"},{slug:"s-2vcpu-4gb",description:"4GB / 2 vCPU"},{slug:"s-4vcpu-8gb",description:"8GB / 4 vCPU"}])}}catch(Y){console.error("Failed to load regions/sizes:",Y)}}async function Dt(){var Y;if(!o){be.warning("Enter app name first");return}t(48,Ve="Loading...");try{const de=await Oe("GET",`/infra/deploy-configs/${a||"default"}/${o}/${c}`);st(de),t(48,Ve="✓ Loaded"),be.success("Config loaded")}catch(oe){(Y=oe.message)!=null&&Y.includes("404")?(t(48,Ve="No saved config"),be.info("No saved config found")):(t(48,Ve="Load failed"),be.error("Failed to load config"))}}async function vt(){try{const oe=await Oe("GET",`/infra/deploy-configs/${a||"default"}/${o}/${c}`);st(oe),t(48,Ve="✓ Auto-loaded")}catch{t(48,Ve="")}}function st(Y){var oe,de;Y.source_type&&t(8,f={folder:"code",git:"git",image:"image"}[Y.source_type]||Y.source_type),Y.git_url&&t(11,v=Y.git_url),Y.git_branch&&t(12,g=Y.git_branch),Y.port&&t(9,d=Y.port),Y.env_vars&&Object.keys(Y.env_vars).length>0&&t(10,m=Object.entries(Y.env_vars).map(([qe,Ne])=>`${qe}=${Ne}`).join(`
`)),((oe=Y.exclude_patterns)==null?void 0:oe.length)>0&&(rt=Y.exclude_patterns,t(50,mt=rt.join(`
`))),((de=Y.server_ips)==null?void 0:de.length)>0&&t(37,x=new Set(Y.server_ips))}async function jt(){if(!o){be.warning("Enter app name first");return}t(48,Ve="Saving...");const Y={};for(const qe of m.split(`
`)){const Ne=qe.trim();if(Ne&&Ne.includes("=")){const[Ae,...Le]=Ne.split("=");Y[Ae.trim()]=Le.join("=").trim()}}const oe=mt.split(`
`).map(qe=>qe.trim()).filter(Boolean),de={project_name:a||"default",service_name:o,env:c,source_type:f==="code"?"folder":f,git_url:v||null,git_branch:g||"main",exclude_patterns:oe.length>0?oe:Ke,port:d,env_vars:Y,server_ips:Array.from(x)};try{await Oe("POST","/infra/deploy-configs",de),t(48,Ve="✓ Saved"),be.success("Config saved")}catch{t(48,Ve="Save failed"),be.error("Failed to save config")}}function $t(){t(49,Ot=!Ot),Ot||(rt=mt.split(`
`).map(Y=>Y.trim()).filter(Boolean))}function nl(){rt=[...Ke],t(50,mt=Ke.join(`
`)),be.info("Reset to default patterns")}function Xt(Y){for(const oe of rt)if(oe.endsWith("/")){const de=oe.slice(0,-1);if(Y.startsWith(de+"/")||Y.includes("/"+de+"/"))return!0}else if(oe.startsWith("*")){const de=oe.slice(1);if(Y.endsWith(de))return!0}else if(Y===oe||Y.endsWith("/"+oe))return!0;return!1}function xt(Y){x.has(Y)?x.delete(Y):x.add(Y),t(37,x)}function sl(Y){Y?(Q||[]).forEach(oe=>{var qe,Ne,Ae;const de=oe.ip||((Ae=(Ne=(qe=oe.networks)==null?void 0:qe.v4)==null?void 0:Ne[0])==null?void 0:Ae.ip_address);de&&x.add(de)}):x.clear(),t(37,x)}function Ft(){O=async(Y,oe)=>{await It(Y,oe,C.length===0)},L==null||L.click()}async function el(Y){const oe=Array.from(Y.target.files||[]);if(!oe.length||!O)return;console.log(`[Deploy] Browser returned ${oe.length} files`),oe.length<50?console.log("[Deploy] Files:",oe.map(Ne=>Ne.webkitRelativePath)):console.log("[Deploy] First 20 files:",oe.slice(0,20).map(Ne=>Ne.webkitRelativePath));const qe=oe[0].webkitRelativePath.split("/")[0];await O(oe,qe),O=null,Y.target.value=""}function hl(Y){Y.preventDefault(),Y.stopPropagation(),t(24,j=!0)}function ht(Y){Y.preventDefault(),Y.stopPropagation(),Y.currentTarget.contains(Y.relatedTarget)||t(24,j=!1)}async function wt(Y){var de,qe;Y.preventDefault(),Y.stopPropagation(),t(24,j=!1);const oe=(de=Y.dataTransfer)==null?void 0:de.items;if(!(!oe||oe.length===0)){for(const Ne of oe)if(Ne.kind==="file"){const Ae=(qe=Ne.webkitGetAsEntry)==null?void 0:qe.call(Ne);Ae!=null&&Ae.isDirectory&&await ol(Ae)}}}async function ol(Y){const oe=Y.name;if(C.some(Ne=>Ne.name===oe)){be.error(`Folder "${oe}" is already added`);return}be.info(`Reading ${oe}/...`);const de=await ea(Y,"");if(de.length===0){be.error(`No files found in ${oe}/`);return}const qe=C.length===0;await yt(de,oe,qe)}async function yt(Y,oe,de){de&&C.some(Le=>Le.isMain)&&t(21,C=C.map(Le=>({...Le,isMain:!1})));const qe=[];let Ne=null,Ae=0;for(const Le of Y){const Ht=Le._relativePath||Le.name;if(Xt(Ht)){Ae++;continue}const _l=await ri(Le);qe.push({path:Ht,content:_l}),de&&Ht==="Dockerfile"&&(Ne=await ai(Le))}console.log(`[Deploy] Dropped ${oe}/: ${Y.length} total, ${Ae} skipped, ${qe.length} included`),t(21,C=[...C,{name:oe,fileContents:qe,isMain:de,fileCount:qe.length}]),Qt(),C.some(Le=>Le.isMain)&&rl(Ne),A&&a&&o&&ye(),be.success(`Added ${oe}/ (${qe.length} files)`)}async function It(Y,oe,de){if(C.some(Le=>Le.name===oe)){be.error(`Folder "${oe}" is already added`);return}de&&C.some(Le=>Le.isMain)&&t(21,C=C.map(Le=>({...Le,isMain:!1})));const qe=[];let Ne=null,Ae=0;for(const Le of Y){const Ht=Le.webkitRelativePath.replace(`${oe}/`,"");if(Xt(Ht)){Ae++;continue}const _l=await ri(Le);qe.push({path:Ht,content:_l}),de&&Ht==="Dockerfile"&&(Ne=await ai(Le))}console.log(`[Deploy] Processed ${oe}/: ${Y.length} total, ${Ae} skipped, ${qe.length} included`),t(21,C=[...C,{name:oe,fileContents:qe,isMain:de,fileCount:qe.length}]),Qt(),C.some(Le=>Le.isMain)&&rl(Ne),A&&a&&o&&ye(),be.success(`Added ${oe}/ (${qe.length} files)`)}function Gt(Y){t(21,C=C.filter((oe,de)=>de!==Y)),Qt(),C.length>0&&!C.some(oe=>oe.isMain)&&t(21,C=C.map((oe,de)=>({...oe,isMain:de===0})))}function Yt(Y){t(21,C=C.map((oe,de)=>({...oe,isMain:de===Y}))),rl()}function Qt(){const Y=C.some(oe=>oe.isMain);C.length&&Y&&il()}async function il(){if(!C.length)return;const{default:Y}=await xs(async()=>{const{default:de}=await import("https://cdn.jsdelivr.net/npm/jszip@3.10.1/+esm");return{default:de}},[]),oe=new Y;for(const de of C)for(const{path:qe,content:Ne}of de.fileContents)oe.file(`${de.name}/${qe}`,Ne);C.length>1&&U&&oe.file("Dockerfile",U),await oe.generateAsync({type:"blob"})}function rl(Y=null){if(t(27,V=!0),Y)t(25,U=Y),t(26,K="from folder");else if(C.length>1)t(25,U=ul()),t(26,K="multi-folder");else if(C.length===1){const oe=C[0];t(25,U=Tt(oe.fileContents.map(de=>de.path))),t(26,K="generated")}Wt()}function ul(){const Y=C.find(Ne=>Ne.isMain);if(!Y)return"";const oe=C.filter(Ne=>!Ne.isMain),de=Y.fileContents.some(Ne=>Ne.path==="requirements.txt");Y.fileContents.some(Ne=>Ne.path==="package.json");let qe=`FROM python:3.11-slim

WORKDIR /app

`;for(const Ne of oe)qe+=`# Copy ${Ne.name}
COPY ${Ne.name}/ ./${Ne.name}/

`;return qe+=`# Copy main service
COPY ${Y.name}/ ./${Y.name}/

`,de&&(qe+=`# Install dependencies
RUN pip install --no-cache-dir -r ${Y.name}/requirements.txt

`),qe+=`EXPOSE ${d}

`,qe+=`CMD ["uvicorn", "${Y.name}.main:app", "--host", "0.0.0.0", "--port", "${d}"]
`,qe}function Tt(Y){const oe=Y.includes("requirements.txt"),de=Y.includes("package.json"),qe=Y.includes("pyproject.toml");return oe||qe?`FROM python:3.11-slim

WORKDIR /app

COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

COPY . .

EXPOSE ${d}

CMD ["uvicorn", "main:app", "--host", "0.0.0.0", "--port", "${d}"]
`:de?`FROM node:20-alpine

WORKDIR /app

COPY package*.json ./
RUN npm ci --only=production

COPY . .

EXPOSE ${d}

CMD ["node", "index.js"]
`:`FROM python:3.11-slim

WORKDIR /app

COPY . .

EXPOSE ${d}

CMD ["python", "main.py"]
`}function Wt(){const Y=U.match(/^FROM\s+(\S+)/m),oe=U.match(/^CMD\s+(.+)$/m);t(28,F=Y?Y[1]:""),t(29,E=oe?oe[1]:"")}function Bt(Y){Y==="from"&&F?t(25,U=U.replace(/^FROM\s+\S+/m,`FROM ${F}`)):Y==="cmd"&&E&&(U.includes("CMD ")?t(25,U=U.replace(/^CMD\s+.+$/m,`CMD ${E}`)):t(25,U+=`
CMD ${E}
`)),t(26,K="edited")}function ye(){if(!a||!o)return;const Y=`build_folders_${a}_${o}`,oe=C.map(de=>({name:de.name,isMain:de.isMain}));localStorage.setItem(Y,JSON.stringify(oe))}function Xe(Y){if(!y.trim()){be.error("Please enter a folder path");return}const oe=y.trim();if(Y&&S.some(de=>de.isMain)&&t(14,S=S.map(de=>({...de,isMain:!1}))),S.some(de=>de.path===oe)){be.error("This folder is already added");return}t(14,S=[...S,{path:oe,isMain:Y}]),t(15,y="")}function Qe(Y){t(14,S=S.filter((oe,de)=>de!==Y))}function gt(Y){var de;const oe=(de=Y.target.files)==null?void 0:de[0];if(oe){if(!oe.name.endsWith(".tar")&&!oe.name.endsWith(".tar.gz")){be.error("Only .tar or .tar.gz image files are supported");return}t(17,D=oe),be.success(`Selected: ${oe.name}`)}}function xe(Y,oe="info"){t(36,X=[...X,{message:Y,type:oe,time:new Date}])}async function ut(Y){if(Y.preventDefault(),!o){be.error("App name is required");return}if(f==="code"&&!C.some(de=>de.isMain)){be.error("Add a main folder with your code");return}if(f==="git"&&!v){be.error("Git URL is required");return}if(f==="image"&&!k){be.error("Docker image URL is required");return}if(f==="image_file"&&!D){be.error("Upload a Docker image file (.tar)");return}if(f==="image_file"&&!T){be.error("Image name is required for local images");return}if(x.size===0&&_e===0){be.error("Select at least one server or add new servers");return}if(_e>0&&!M){be.error("Select a snapshot for new servers");return}if(!dl()){be.error("Configure your DO Token in Settings first");return}if(se&&!qn()){be.error("Configure your Cloudflare Token in Settings first (required for domain setup)");return}const oe=[...x];if(a&&o&&c)try{const de=new URLSearchParams({project:a,environment:c,service_name:o}),qe=await Oe("GET",`/infra/services/state?${de}`);if(qe.server_ips&&qe.server_ips.length>0){const Ne=qe.servers.filter(Ae=>!oe.includes(Ae.ip));if(Ne.length>0){t(41,ne=Ne),t(42,ve=()=>et(Y)),t(40,he=!0);return}}}catch(de){console.log("Service state check:",de.message||de)}await et()}async function Ie(){t(40,he=!1);const Y=`${a}_${o}_${c}`.replace(/[^a-zA-Z0-9_]/g,"_");if(ne.length>0){const oe=ne.map(de=>de.ip);xe(`Stopping containers on ${ne.length} server(s)...`);try{const de=await Oe("POST",`/infra/services/cleanup?do_token=${dl()}`,{server_ips:oe,container_name:Y});xe(`Cleanup complete: ${de.cleaned} stopped, ${de.failed} failed`)}catch(de){xe(`Cleanup warning: ${de.message||de}`,"warning")}}t(41,ne=[]),ve&&(await ve(),t(42,ve=null))}async function et(Y){t(34,le=!0),t(35,W=0),t(36,X=[]),t(39,$e=null);try{xe(`Starting deployment of ${o}...`),t(35,W=10);let oe=null;if(f==="code"){xe("Creating code archive...");const{default:Le}=await xs(async()=>{const{default:_l}=await import("https://cdn.jsdelivr.net/npm/jszip@3.10.1/+esm");return{default:_l}},[]),Ht=new Le;for(const _l of C)for(const{path:fa,content:pa}of _l.fileContents)Ht.file(`${_l.name}/${fa}`,pa);C.length>1&&U&&Ht.file("Dockerfile",U),oe=await Ht.generateAsync({type:"blob"})}xe("Sending deployment request... server provisioning may take 30-60s"),t(35,W=20);const de=dl(),qe=qn(),Ne=new URLSearchParams({do_token:de,snapshot_id:M||"",new_server_count:String(_e),region:G,size:I,project:a||"",environment:c,setup_domain:String(se),base_domain:Ee,domain_aliases:JSON.stringify(ge.split(",").map(Le=>Le.trim()).filter(Boolean))});se&&qe&&Ne.set("cf_token",qe);const Ae=new FormData;Ae.append("name",o),Ae.append("port",String(d)),Ae.append("source_type",f),Ae.append("env_vars",m),Ae.append("tags",p),Ae.append("server_ips",JSON.stringify(Array.from(x))),Ae.append("depends_on",JSON.stringify(Object.entries(te).filter(([Le,Ht])=>Ht).map(([Le])=>Le))),Ae.append("exclude_patterns",JSON.stringify(rt)),U&&Ae.append("dockerfile",U),v&&Ae.append("git_url",v),g&&Ae.append("git_branch",g),h&&Ae.append("git_token",h),S.length&&Ae.append("git_folders",JSON.stringify(S)),k&&Ae.append("image",k),oe&&Ae.append("code_tar",oe,"code.zip"),f==="image_file"&&(D&&Ae.append("image_tar",D),T&&Ae.append("image",T),q&&Ae.append("container_port",String(q)),P&&Ae.append("host_port",String(P))),await Ga(`/infra/deploy/multipart?${Ne}`,Ae,Le=>{if(Le.type==="log")xe(Le.message);else if(Le.type==="progress")t(35,W=Math.min(20+(Le.percent||0)*.8,95));else if(Le.type==="done"){if(t(39,$e=Le),t(35,W=100),!Le.success){const Ht=Le.failed_count||0,_l=Le.error||`Deployment failed: ${Ht} server(s) failed`;throw new Error(_l)}}else if(Le.type==="error")throw new Error(Le.message||"Deployment failed")}),xe("✅ Deployment complete!","success"),be.success("Deployment successful!"),await loadServersForDeploy()}catch(oe){let de="Unknown error";if(typeof oe=="string")de=oe;else if(oe!=null&&oe.message)de=oe.message;else if(oe!=null&&oe.detail)de=oe.detail;else if(oe!=null&&oe.error)de=oe.error;else try{de=JSON.stringify(oe)}catch{de=String(oe)}xe(`❌ Error: ${de}`,"error"),be.error(de)}finally{t(34,le=!1)}}const Tl=[[]];function Nt(){o=this.value,t(0,o)}function Ct(){a=this.value,t(1,a)}function qt(){c=St(this),t(2,c),t(55,Ze)}function Vt(){mt=this.value,t(50,mt)}function Ut(){p=this.value,t(7,p)}function We(){f=this.__value,t(8,f)}function fl(){f=this.__value,t(8,f)}function gl(){f=this.__value,t(8,f)}function tl(){f=this.__value,t(8,f)}function ft(Y){Kt[Y?"unshift":"push"](()=>{L=Y,t(22,L)})}const ll=Y=>Yt(Y),pt=Y=>Gt(Y);function ot(){A=this.checked,t(23,A)}function it(){U=this.value,t(25,U)}function al(){F=St(this),t(28,F)}const bt=()=>Bt("from");function Rl(){E=this.value,t(29,E)}const ql=()=>Bt("cmd");function Ol(){v=this.value,t(11,v)}function cl(){g=this.value,t(12,g)}const ue=Y=>Qe(Y);function ze(){y=this.value,t(15,y)}const Ue=()=>Xe(!0),tt=()=>Xe(!1);function nt(){h=this.value,t(13,h)}function Me(){k=this.value,t(16,k)}function at(){T=this.value,t(18,T)}function _t(){q=Pl(this.value),t(19,q)}function Lt(){P=Pl(this.value),t(20,P)}function kt(){d=Pl(this.value),t(9,d)}const Mt=()=>t(51,ke=!ke);function nn(){m=this.value,t(10,m)}const pl=()=>t(52,Fe=!Fe);function sn(){we=this.checked,t(43,we)}function dt(){te.postgres=this.checked,t(45,te)}function Rt(){te.redis=this.checked,t(45,te)}function ie(){te.mysql=this.checked,t(45,te)}function Se(){te.mongo=this.checked,t(45,te)}function bl(){fe=this.checked,t(44,fe)}function on(){se=this.checked,t(46,se)}function rn(){Ee=this.value,t(5,Ee)}function an(){ge=this.value,t(47,ge)}const cn=()=>sl(!0),un=()=>sl(!1),Kl=Y=>xt(Y),Yl=()=>t(53,Ye=!Ye);function Jt(){M=St(this),t(3,M),t(6,s)}function fn(){G=St(this),t(4,G),t(31,J)}function ta(){I=St(this),t(30,I),t(32,H)}const la=()=>t(38,_e=Math.max(0,_e-1));function na(){_e=Pl(this.value),t(38,_e)}const sa=()=>t(38,_e=Math.min(10,_e+1)),oa=Y=>window.open(`/api/v1/infra/logs/${Y.ip}/${Y.container_name||$e.container_name||o}`,"_blank"),ia=Y=>window.open(`/api/v1/infra/logs/${Y.ip}/${Y.container_name||$e.container_name||o}`,"_blank"),ra=Y=>window.open(`/api/v1/infra/logs/${Y.ip}/${Y.container_name||$e.container_name||o}`,"_blank"),aa=()=>{t(40,he=!1),t(42,ve=null)};function ca(Y){he=Y,t(40,he)}const ua=()=>{t(40,he=!1),t(42,ve=null)};return l.$$.update=()=>{if(l.$$.dirty[0]&16|l.$$.dirty[2]&16384&&t(33,Q=(i||[]).filter(Y=>!G||Y.region===G)),l.$$.dirty[0]&39&&t(54,n=o&&a&&c?`${o}-${a}-${c}.${Ee}`:""),l.$$.dirty[0]&3&&o&&a&&vt(),l.$$.dirty[0]&72&&(s==null?void 0:s.length)>0&&!M){const Y=s.find(oe=>(oe.name||"").toLowerCase().includes("base"));t(3,M=(Y==null?void 0:Y.id)||(Y==null?void 0:Y.name)||s[0].id||s[0].name)}},[o,a,c,M,G,Ee,s,p,f,d,m,v,g,h,S,y,k,D,T,q,P,C,L,A,j,U,K,V,F,E,I,J,H,Q,le,W,X,x,_e,$e,he,ne,ve,we,fe,te,se,ge,Ve,Ot,mt,ke,Fe,Ye,n,Ze,Dt,jt,$t,nl,xt,sl,Ft,el,hl,ht,wt,Gt,Yt,Bt,Xe,Qe,gt,ut,Ie,xe,i,Nt,Ct,qt,Vt,Ut,We,Tl,fl,gl,tl,ft,ll,pt,ot,it,al,bt,Rl,ql,Ol,cl,ue,ze,Ue,tt,nt,Me,at,_t,Lt,kt,Mt,nn,pl,sn,dt,Rt,ie,Se,bl,on,rn,an,cn,un,Kl,Yl,Jt,fn,ta,la,na,sa,oa,ia,ra,aa,ca,ua]}class bf extends Pt{constructor(e){super(),Et(this,e,gf,mf,zt,{},null,[-1,-1,-1,-1,-1,-1,-1])}}function hi(l,e,t){const n=l.slice();return n[55]=e[t],n}function gi(l,e,t){const n=l.slice();return n[55]=e[t],n}function bi(l,e,t){const n=l.slice();return n[55]=e[t],n}function ki(l,e,t){const n=l.slice();return n[62]=e[t],n}function $i(l,e,t){const n=l.slice();return n[66]=e[t],n}function wi(l,e,t){const n=l.slice();return n[69]=e[t][0],n[70]=e[t][1],n}function kf(l){const e=l.slice(),t=e[14].config_snapshot;return e[65]=t,e}function yi(l,e,t){const n=l.slice();return n[62]=e[t],n}function Ci(l,e,t){const n=l.slice();return n[75]=e[t],n}function Si(l,e,t){const n=l.slice();n[78]=e[t];const s=wl(n[78]);return n[79]=s,n}function zi(l){let e,t,n=ir(l[20])+"",s;return{c(){e=_("span"),t=z("Updated "),s=z(n),u(e,"class","last-updated svelte-cuxyqu")},m(i,o){w(i,e,o),r(e,t),r(e,s)},p(i,o){o[0]&1048576&&n!==(n=ir(i[20])+"")&&B(s,n)},d(i){i&&$(e)}}}function $f(l){let e;return{c(){e=z("↻ Refresh")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function wf(l){let e,t,n=me(l[19]),s=[];for(let o=0;o<n.length;o+=1)s[o]=Ei(Si(l,n,o));const i=o=>R(s[o],1,1,()=>{s[o]=null});return{c(){for(let o=0;o<s.length;o+=1)s[o].c();e=Ge()},m(o,a){for(let c=0;c<s.length;c+=1)s[c]&&s[c].m(o,a);w(o,e,a),t=!0},p(o,a){if(a[0]&27787264){n=me(o[19]);let c;for(c=0;c<n.length;c+=1){const p=Si(o,n,c);s[c]?(s[c].p(p,a),N(s[c],1)):(s[c]=Ei(p),s[c].c(),N(s[c],1),s[c].m(e.parentNode,e))}for(De(),c=n.length;c<s.length;c+=1)i(c);Te()}},i(o){if(!t){for(let a=0;a<n.length;a+=1)N(s[a]);t=!0}},o(o){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)R(s[a]);t=!1},d(o){o&&$(e),Re(s,o)}}}function yf(l){let e;return{c(){e=_("tr"),e.innerHTML='<td colspan="12" class="empty-cell svelte-cuxyqu">No deployments found</td>',u(e,"class","svelte-cuxyqu")},m(t,n){w(t,e,n)},p:pe,i:pe,o:pe,d(t){t&&$(e)}}}function Cf(l){let e;return{c(){e=_("tr"),e.innerHTML='<td colspan="12" class="loading-cell svelte-cuxyqu">Loading deployment history...</td>',u(e,"class","svelte-cuxyqu")},m(t,n){w(t,e,n)},p:pe,i:pe,o:pe,d(t){t&&$(e)}}}function Sf(l){let e=(l[78].environment||"-")+"",t;return{c(){t=z(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&524288&&e!==(e=(n[78].environment||"-")+"")&&B(t,e)},d(n){n&&$(t)}}}function zf(l){let e;return{c(){e=_("span"),e.textContent="-",u(e,"class","version-none svelte-cuxyqu")},m(t,n){w(t,e,n)},p:pe,d(t){t&&$(e)}}}function Df(l){let e,t,n=l[78].version+"",s;return{c(){e=_("span"),t=z("v"),s=z(n),u(e,"class","version-badge svelte-cuxyqu")},m(i,o){w(i,e,o),r(e,t),r(e,s)},p(i,o){o[0]&524288&&n!==(n=i[78].version+"")&&B(s,n)},d(i){i&&$(e)}}}function Tf(l){let e=l[78].is_rollback?"rollback":"deploy",t;return{c(){t=z(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&524288&&e!==(e=n[78].is_rollback?"rollback":"deploy")&&B(t,e)},d(n){n&&$(t)}}}function qf(l){let e=l[79]+"",t;return{c(){t=z(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&524288&&e!==(e=n[79]+"")&&B(t,e)},d(n){n&&$(t)}}}function Di(l){let e,t,n;function s(){return l[34](l[78])}return{c(){e=_("button"),e.textContent="⚙️",u(e,"class","icon-btn svelte-cuxyqu"),u(e,"title","View config")},m(i,o){w(i,e,o),t||(n=Z(e,"click",s),t=!0)},p(i,o){l=i},d(i){i&&$(e),t=!1,n()}}}function Ti(l){let e,t,n;function s(){return l[35](l[78])}return{c(){e=_("button"),e.textContent="📋",u(e,"class","icon-btn svelte-cuxyqu"),u(e,"title","View logs")},m(i,o){w(i,e,o),t||(n=Z(e,"click",s),t=!0)},p(i,o){l=i},d(i){i&&$(e),t=!1,n()}}}function qi(l){let e,t,n;function s(){return l[36](l[78])}return{c(){e=_("button"),e.textContent="⏪",u(e,"class","icon-btn rollback-icon-btn svelte-cuxyqu"),u(e,"title","Rollback")},m(i,o){w(i,e,o),t||(n=Z(e,"click",s),t=!0)},p(i,o){l=i},d(i){i&&$(e),t=!1,n()}}}function Ei(l){let e,t,n,s=(l[78].project||"-")+"",i,o,a,c,p=(l[78].service||l[78].name)+"",f,d,m,v,g,h,S,y,k=vl(l[78].deployed_at||l[78].created_at)+"",D,T,q,P=(l[78].deployed_by||l[78].user||"-")+"",C,L,O,A,j,U,K,V,F,E,M=(l[78].comment||"-")+"",G,I,J,H,Q,le,W,X,x;v=new Je({props:{variant:l[78].environment==="prod"?"purple":l[78].environment==="staging"?"warning":"info",$$slots:{default:[Sf]},$$scope:{ctx:l}}});function _e(fe,te){return fe[78].version?Df:zf}let $e=_e(l),he=$e(l);j=new Je({props:{variant:l[78].is_rollback?"warning":"info",$$slots:{default:[Tf]},$$scope:{ctx:l}}}),V=new Je({props:{variant:Vl(l[79]),$$slots:{default:[qf]},$$scope:{ctx:l}}});let ne=l[78].config_snapshot&&Di(l),ve=l[78].has_logs&&Ti(l),we=l[78].is_current_active&&qi(l);return{c(){e=_("tr"),t=_("td"),n=_("span"),i=z(s),o=b(),a=_("td"),c=_("span"),f=z(p),d=b(),m=_("td"),ce(v.$$.fragment),g=b(),h=_("td"),he.c(),S=b(),y=_("td"),D=z(k),T=b(),q=_("td"),C=z(P),O=b(),A=_("td"),ce(j.$$.fragment),U=b(),K=_("td"),ce(V.$$.fragment),F=b(),E=_("td"),G=z(M),I=b(),J=_("td"),ne&&ne.c(),H=b(),Q=_("td"),ve&&ve.c(),le=b(),W=_("td"),we&&we.c(),X=b(),u(n,"class","project-name svelte-cuxyqu"),u(t,"class","svelte-cuxyqu"),u(c,"class","service-name svelte-cuxyqu"),u(a,"class","svelte-cuxyqu"),u(m,"class","svelte-cuxyqu"),u(h,"class","version-cell svelte-cuxyqu"),u(y,"class","date-cell svelte-cuxyqu"),u(q,"class","by-cell svelte-cuxyqu"),u(q,"title",L=l[78].deployed_by||l[78].user||"-"),u(A,"class","svelte-cuxyqu"),u(K,"class","svelte-cuxyqu"),u(E,"class","comment-cell svelte-cuxyqu"),u(J,"class","config-cell svelte-cuxyqu"),u(Q,"class","logs-cell svelte-cuxyqu"),u(W,"class","rollback-cell svelte-cuxyqu"),u(e,"class","svelte-cuxyqu")},m(fe,te){w(fe,e,te),r(e,t),r(t,n),r(n,i),r(e,o),r(e,a),r(a,c),r(c,f),r(e,d),r(e,m),re(v,m,null),r(e,g),r(e,h),he.m(h,null),r(e,S),r(e,y),r(y,D),r(e,T),r(e,q),r(q,C),r(e,O),r(e,A),re(j,A,null),r(e,U),r(e,K),re(V,K,null),r(e,F),r(e,E),r(E,G),r(e,I),r(e,J),ne&&ne.m(J,null),r(e,H),r(e,Q),ve&&ve.m(Q,null),r(e,le),r(e,W),we&&we.m(W,null),r(e,X),x=!0},p(fe,te){(!x||te[0]&524288)&&s!==(s=(fe[78].project||"-")+"")&&B(i,s),(!x||te[0]&524288)&&p!==(p=(fe[78].service||fe[78].name)+"")&&B(f,p);const se={};te[0]&524288&&(se.variant=fe[78].environment==="prod"?"purple":fe[78].environment==="staging"?"warning":"info"),te[0]&524288|te[2]&1048576&&(se.$$scope={dirty:te,ctx:fe}),v.$set(se),$e===($e=_e(fe))&&he?he.p(fe,te):(he.d(1),he=$e(fe),he&&(he.c(),he.m(h,null))),(!x||te[0]&524288)&&k!==(k=vl(fe[78].deployed_at||fe[78].created_at)+"")&&B(D,k),(!x||te[0]&524288)&&P!==(P=(fe[78].deployed_by||fe[78].user||"-")+"")&&B(C,P),(!x||te[0]&524288&&L!==(L=fe[78].deployed_by||fe[78].user||"-"))&&u(q,"title",L);const Ee={};te[0]&524288&&(Ee.variant=fe[78].is_rollback?"warning":"info"),te[0]&524288|te[2]&1048576&&(Ee.$$scope={dirty:te,ctx:fe}),j.$set(Ee);const ge={};te[0]&524288&&(ge.variant=Vl(fe[79])),te[0]&524288|te[2]&1048576&&(ge.$$scope={dirty:te,ctx:fe}),V.$set(ge),(!x||te[0]&524288)&&M!==(M=(fe[78].comment||"-")+"")&&B(G,M),fe[78].config_snapshot?ne?ne.p(fe,te):(ne=Di(fe),ne.c(),ne.m(J,null)):ne&&(ne.d(1),ne=null),fe[78].has_logs?ve?ve.p(fe,te):(ve=Ti(fe),ve.c(),ve.m(Q,null)):ve&&(ve.d(1),ve=null),fe[78].is_current_active?we?we.p(fe,te):(we=qi(fe),we.c(),we.m(W,null)):we&&(we.d(1),we=null)},i(fe){x||(N(v.$$.fragment,fe),N(j.$$.fragment,fe),N(V.$$.fragment,fe),x=!0)},o(fe){R(v.$$.fragment,fe),R(j.$$.fragment,fe),R(V.$$.fragment,fe),x=!1},d(fe){fe&&$(e),ae(v),he.d(),ae(j),ae(V),ne&&ne.d(),ve&&ve.d(),we&&we.d()}}}function Ef(l){let e,t,n,s,i,o,a,c;const p=[Cf,yf,wf],f=[];function d(m,v){return m[0]&&m[19].length===0?0:m[19].length===0?1:2}return o=d(l),a=f[o]=p[o](l),{c(){e=_("div"),t=_("table"),n=_("thead"),n.innerHTML='<tr class="svelte-cuxyqu"><th class="svelte-cuxyqu">Project</th> <th class="svelte-cuxyqu">Service</th> <th class="svelte-cuxyqu">Environment</th> <th class="version-col svelte-cuxyqu">v</th> <th class="svelte-cuxyqu">Deployed</th> <th class="svelte-cuxyqu">By</th> <th class="svelte-cuxyqu">Type</th> <th class="svelte-cuxyqu">Status</th> <th class="svelte-cuxyqu">Comment</th> <th class="config-col svelte-cuxyqu"></th> <th class="logs-col svelte-cuxyqu"></th> <th class="rollback-col svelte-cuxyqu"></th></tr>',s=b(),i=_("tbody"),a.c(),u(t,"class","table svelte-cuxyqu"),u(e,"class","table-container svelte-cuxyqu")},m(m,v){w(m,e,v),r(e,t),r(t,n),r(t,s),r(t,i),f[o].m(i,null),c=!0},p(m,v){let g=o;o=d(m),o===g?f[o].p(m,v):(De(),R(f[g],1,1,()=>{f[g]=null}),Te(),a=f[o],a?a.p(m,v):(a=f[o]=p[o](m),a.c()),N(a,1),a.m(i,null))},i(m){c||(N(a),c=!0)},o(m){R(a),c=!1},d(m){m&&$(e),f[o].d()}}}function Pi(l){let e,t,n,s=(l[2].service||l[2].name)+"",i,o,a,c=l[2].project+"",p,f,d=l[2].environment+"",m,v,g,h,S,y,k,D=vl(l[2].deployed_at||l[2].created_at)+"",T,q,P,C,L=(l[2].deployed_by||l[2].user||"unknown")+"",O,A,j,U,K,V,F,E,M,G,I=l[2].comment&&Ni(l);const J=[Nf,Pf],H=[];function Q(W,X){return W[3].length===0?0:1}F=Q(l),E=H[F]=J[F](l);let le=l[6].length>0&&Mi(l);return{c(){e=_("div"),t=_("div"),n=_("div"),i=z(s),o=b(),a=_("div"),p=z(c),f=z(" / "),m=z(d),v=b(),g=_("div"),h=_("label"),h.textContent="📍 Current Deployment",S=b(),y=_("div"),k=_("div"),T=z(D),q=b(),P=_("div"),C=z("by "),O=z(L),A=b(),I&&I.c(),j=b(),U=_("div"),K=_("label"),K.textContent="🎯 Rollback to",V=b(),E.c(),M=b(),le&&le.c(),u(n,"class","service-name svelte-cuxyqu"),u(a,"class","service-coords svelte-cuxyqu"),u(t,"class","service-info svelte-cuxyqu"),u(h,"class","svelte-cuxyqu"),u(k,"class","deploy-date svelte-cuxyqu"),u(P,"class","deploy-by svelte-cuxyqu"),u(y,"class","deployment-card current svelte-cuxyqu"),u(g,"class","section svelte-cuxyqu"),u(K,"class","svelte-cuxyqu"),u(U,"class","section svelte-cuxyqu"),u(e,"class","rollback-content svelte-cuxyqu")},m(W,X){w(W,e,X),r(e,t),r(t,n),r(n,i),r(t,o),r(t,a),r(a,p),r(a,f),r(a,m),r(e,v),r(e,g),r(g,h),r(g,S),r(g,y),r(y,k),r(k,T),r(y,q),r(y,P),r(P,C),r(P,O),r(y,A),I&&I.m(y,null),r(e,j),r(e,U),r(U,K),r(U,V),H[F].m(U,null),r(e,M),le&&le.m(e,null),G=!0},p(W,X){(!G||X[0]&4)&&s!==(s=(W[2].service||W[2].name)+"")&&B(i,s),(!G||X[0]&4)&&c!==(c=W[2].project+"")&&B(p,c),(!G||X[0]&4)&&d!==(d=W[2].environment+"")&&B(m,d),(!G||X[0]&4)&&D!==(D=vl(W[2].deployed_at||W[2].created_at)+"")&&B(T,D),(!G||X[0]&4)&&L!==(L=(W[2].deployed_by||W[2].user||"unknown")+"")&&B(O,L),W[2].comment?I?I.p(W,X):(I=Ni(W),I.c(),I.m(y,null)):I&&(I.d(1),I=null);let x=F;F=Q(W),F===x?H[F].p(W,X):(De(),R(H[x],1,1,()=>{H[x]=null}),Te(),E=H[F],E?E.p(W,X):(E=H[F]=J[F](W),E.c()),N(E,1),E.m(U,null)),W[6].length>0?le?le.p(W,X):(le=Mi(W),le.c(),le.m(e,null)):le&&(le.d(1),le=null)},i(W){G||(N(E),G=!0)},o(W){R(E),G=!1},d(W){W&&$(e),I&&I.d(),H[F].d(),le&&le.d()}}}function Ni(l){let e,t=l[2].comment+"",n;return{c(){e=_("div"),n=z(t),u(e,"class","deploy-comment svelte-cuxyqu")},m(s,i){w(s,e,i),r(e,n)},p(s,i){i[0]&4&&t!==(t=s[2].comment+"")&&B(n,t)},d(s){s&&$(e)}}}function Pf(l){let e,t,n=me(l[3]),s=[];for(let o=0;o<n.length;o+=1)s[o]=Li(Ci(l,n,o));const i=o=>R(s[o],1,1,()=>{s[o]=null});return{c(){e=_("div");for(let o=0;o<s.length;o+=1)s[o].c();u(e,"class","deployment-list svelte-cuxyqu")},m(o,a){w(o,e,a);for(let c=0;c<s.length;c+=1)s[c]&&s[c].m(e,null);t=!0},p(o,a){if(a[0]&56){n=me(o[3]);let c;for(c=0;c<n.length;c+=1){const p=Ci(o,n,c);s[c]?(s[c].p(p,a),N(s[c],1)):(s[c]=Li(p),s[c].c(),N(s[c],1),s[c].m(e,null))}for(De(),c=n.length;c<s.length;c+=1)i(c);Te()}},i(o){if(!t){for(let a=0;a<n.length;a+=1)N(s[a]);t=!0}},o(o){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)R(s[a]);t=!1},d(o){o&&$(e),Re(s,o)}}}function Nf(l){let e;return{c(){e=_("div"),e.textContent="No previous deployments found",u(e,"class","no-deployments svelte-cuxyqu")},m(t,n){w(t,e,n)},p:pe,i:pe,o:pe,d(t){t&&$(e)}}}function Lf(l){let e,t=l[75].id.substring(0,8)+"",n;return{c(){e=_("span"),n=z(t),u(e,"class","version-badge muted svelte-cuxyqu")},m(s,i){w(s,e,i),r(e,n)},p(s,i){i[0]&8&&t!==(t=s[75].id.substring(0,8)+"")&&B(n,t)},d(s){s&&$(e)}}}function Mf(l){let e,t,n=l[75].version+"",s;return{c(){e=_("span"),t=z("v"),s=z(n),u(e,"class","version-badge svelte-cuxyqu")},m(i,o){w(i,e,o),r(e,t),r(e,s)},p(i,o){o[0]&8&&n!==(n=i[75].version+"")&&B(s,n)},d(i){i&&$(e)}}}function Rf(l){let e=wl(l[75])+"",t;return{c(){t=z(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&8&&e!==(e=wl(n[75])+"")&&B(t,e)},d(n){n&&$(t)}}}function Li(l){let e,t,n,s=!1,i,o,a,c,p,f=vl(l[75].deployed_at||l[75].created_at)+"",d,m,v,g,h=(l[75].deployed_by||l[75].user||"unknown")+"",S,y,k,D,T,q,P,C;function L(j,U){return j[75].version?Mf:Lf}let O=L(l),A=O(l);return k=new Je({props:{variant:Vl(wl(l[75])),$$slots:{default:[Rf]},$$scope:{ctx:l}}}),q=Hr(l[39][0]),{c(){e=_("label"),t=_("input"),i=b(),o=_("div"),A.c(),a=b(),c=_("div"),p=_("div"),d=z(f),m=b(),v=_("div"),g=z("by "),S=z(h),y=b(),ce(k.$$.fragment),D=b(),u(t,"type","radio"),t.__value=n=l[75].id,ee(t,t.__value),t.disabled=l[5],u(t,"class","svelte-cuxyqu"),u(o,"class","deploy-version svelte-cuxyqu"),u(p,"class","deploy-date svelte-cuxyqu"),u(v,"class","deploy-by svelte-cuxyqu"),u(c,"class","deploy-info svelte-cuxyqu"),u(e,"class","deployment-option svelte-cuxyqu"),Ce(e,"selected",l[4]===l[75].id),q.p(t)},m(j,U){w(j,e,U),r(e,t),t.checked=t.__value===l[4],r(e,i),r(e,o),A.m(o,null),r(e,a),r(e,c),r(c,p),r(p,d),r(c,m),r(c,v),r(v,g),r(v,S),r(e,y),re(k,e,null),r(e,D),T=!0,P||(C=Z(t,"change",l[38]),P=!0)},p(j,U){(!T||U[0]&8&&n!==(n=j[75].id))&&(t.__value=n,ee(t,t.__value),s=!0),(!T||U[0]&32)&&(t.disabled=j[5]),(s||U[0]&24)&&(t.checked=t.__value===j[4]),O===(O=L(j))&&A?A.p(j,U):(A.d(1),A=O(j),A&&(A.c(),A.m(o,null))),(!T||U[0]&8)&&f!==(f=vl(j[75].deployed_at||j[75].created_at)+"")&&B(d,f),(!T||U[0]&8)&&h!==(h=(j[75].deployed_by||j[75].user||"unknown")+"")&&B(S,h);const K={};U[0]&8&&(K.variant=Vl(wl(j[75]))),U[0]&8|U[2]&1048576&&(K.$$scope={dirty:U,ctx:j}),k.$set(K),(!T||U[0]&24)&&Ce(e,"selected",j[4]===j[75].id)},i(j){T||(N(k.$$.fragment,j),T=!0)},o(j){R(k.$$.fragment,j),T=!1},d(j){j&&$(e),A.d(),ae(k),q.r(),P=!1,C()}}}function Mi(l){let e,t,n,s,i,o=me(l[6]),a=[];for(let p=0;p<o.length;p+=1)a[p]=Ri(yi(l,o,p));let c=l[5]&&Ai();return{c(){e=_("div"),t=_("label"),t.textContent="📋 Progress",n=b(),s=_("div");for(let p=0;p<a.length;p+=1)a[p].c();i=b(),c&&c.c(),u(t,"class","svelte-cuxyqu"),u(s,"class","rollback-logs svelte-cuxyqu"),u(e,"class","section rollback-logs-section svelte-cuxyqu")},m(p,f){w(p,e,f),r(e,t),r(e,n),r(e,s);for(let d=0;d<a.length;d+=1)a[d]&&a[d].m(s,null);r(s,i),c&&c.m(s,null)},p(p,f){if(f[0]&64){o=me(p[6]);let d;for(d=0;d<o.length;d+=1){const m=yi(p,o,d);a[d]?a[d].p(m,f):(a[d]=Ri(m),a[d].c(),a[d].m(s,i))}for(;d<a.length;d+=1)a[d].d(1);a.length=o.length}p[5]?c||(c=Ai(),c.c(),c.m(s,null)):c&&(c.d(1),c=null)},d(p){p&&$(e),Re(a,p),c&&c.d()}}}function Ri(l){let e,t=l[62].message+"",n,s;return{c(){e=_("div"),n=z(t),u(e,"class",s="log-entry log-"+l[62].type+" svelte-cuxyqu")},m(i,o){w(i,e,o),r(e,n)},p(i,o){o[0]&64&&t!==(t=i[62].message+"")&&B(n,t),o[0]&64&&s!==(s="log-entry log-"+i[62].type+" svelte-cuxyqu")&&u(e,"class",s)},d(i){i&&$(e)}}}function Ai(l){let e;return{c(){e=_("div"),e.innerHTML='<span class="spinner svelte-cuxyqu">⏳</span> Working...',u(e,"class","log-entry log-info svelte-cuxyqu")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Af(l){let e,t,n=l[2]&&Pi(l);return{c(){n&&n.c(),e=Ge()},m(s,i){n&&n.m(s,i),w(s,e,i),t=!0},p(s,i){s[2]?n?(n.p(s,i),i[0]&4&&N(n,1)):(n=Pi(s),n.c(),N(n,1),n.m(e.parentNode,e)):n&&(De(),R(n,1,1,()=>{n=null}),Te())},i(s){t||(N(n),t=!0)},o(s){R(n),t=!1},d(s){s&&$(e),n&&n.d(s)}}}function Of(l){let e=l[6].length>0?"Close":"Cancel",t;return{c(){t=z(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&64&&e!==(e=n[6].length>0?"Close":"Cancel")&&B(t,e)},d(n){n&&$(t)}}}function jf(l){let e;return{c(){e=z("⏪ Execute Rollback")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Ff(l){let e;return{c(){e=z("⏳ Rolling back...")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function If(l){let e;function t(i,o){return i[5]?Ff:jf}let n=t(l),s=n(l);return{c(){s.c(),e=Ge()},m(i,o){s.m(i,o),w(i,e,o)},p(i,o){n!==(n=t(i))&&(s.d(1),s=n(i),s&&(s.c(),s.m(e.parentNode,e)))},d(i){i&&$(e),s.d(i)}}}function Bf(l){let e,t,n,s,i;return t=new je({props:{variant:"ghost",$$slots:{default:[Of]},$$scope:{ctx:l}}}),t.$on("click",l[37]),s=new je({props:{variant:"warning",disabled:!l[4]||l[5],$$slots:{default:[If]},$$scope:{ctx:l}}}),s.$on("click",l[25]),{c(){e=_("div"),ce(t.$$.fragment),n=b(),ce(s.$$.fragment),u(e,"slot","footer")},m(o,a){w(o,e,a),re(t,e,null),r(e,n),re(s,e,null),i=!0},p(o,a){const c={};a[0]&64|a[2]&1048576&&(c.$$scope={dirty:a,ctx:o}),t.$set(c);const p={};a[0]&48&&(p.disabled=!o[4]||o[5]),a[0]&32|a[2]&1048576&&(p.$$scope={dirty:a,ctx:o}),s.$set(p)},i(o){i||(N(t.$$.fragment,o),N(s.$$.fragment,o),i=!0)},o(o){R(t.$$.fragment,o),R(s.$$.fragment,o),i=!1},d(o){o&&$(e),ae(t),ae(s)}}}function Oi(l){let e,t,n,s=(l[14].service_name||l[14].service)+"",i,o,a,c=l[14].environment+"",p,f,d=vl(l[14].deployed_at)+"",m,v,g,h,S;const y=[Hf,Uf],k=[];function D(q,P){return q[14].config_snapshot?0:1}function T(q,P){return P===0?kf(q):q}return g=D(l),h=k[g]=y[g](T(l,g)),{c(){e=_("div"),t=_("div"),n=_("span"),i=z(s),o=b(),a=_("span"),p=z(c),f=z(" • "),m=z(d),v=b(),h.c(),u(n,"class","service-name svelte-cuxyqu"),u(a,"class","meta svelte-cuxyqu"),u(t,"class","config-header-info svelte-cuxyqu"),u(e,"class","config-content svelte-cuxyqu")},m(q,P){w(q,e,P),r(e,t),r(t,n),r(n,i),r(t,o),r(t,a),r(a,p),r(a,f),r(a,m),r(e,v),k[g].m(e,null),S=!0},p(q,P){(!S||P[0]&16384)&&s!==(s=(q[14].service_name||q[14].service)+"")&&B(i,s),(!S||P[0]&16384)&&c!==(c=q[14].environment+"")&&B(p,c),(!S||P[0]&16384)&&d!==(d=vl(q[14].deployed_at)+"")&&B(m,d);let C=g;g=D(q),g===C?k[g].p(T(q,g),P):(De(),R(k[C],1,1,()=>{k[C]=null}),Te(),h=k[g],h?h.p(T(q,g),P):(h=k[g]=y[g](T(q,g)),h.c()),N(h,1),h.m(e,null))},i(q){S||(N(h),S=!0)},o(q){R(h),S=!1},d(q){q&&$(e),k[g].d()}}}function Uf(l){let e;return{c(){e=_("div"),e.textContent="No config snapshot available",u(e,"class","no-config svelte-cuxyqu")},m(t,n){w(t,e,n)},p:pe,i:pe,o:pe,d(t){t&&$(e)}}}function Hf(l){var $e,he;let e,t,n,s,i,o,a=(l[65].source_type||"-")+"",c,p,f,d,m,v,g,h,S=(l[65].port||"-")+"",y,k,D,T,q,P,C,L,O,A,j=l[65].env_vars&&Object.keys(l[65].env_vars).length>0,U,K,V,F=l[65].git_url&&ji(l),E=l[65].git_branch&&Fi(l),M=l[65].image&&Ii(l),G=l[65].container_port&&Bi(l),I=l[65].host_port&&Ui(l),J=l[65].snapshot_id&&Hi(l),H=l[65].region&&Gi(l),Q=l[65].size&&Wi(l),le=(($e=l[65].server_ips)==null?void 0:$e.length)&&Vi(l),W=l[65].setup_domain&&Ji(),X=l[65].base_domain&&Ki(l),x=j&&Yi(l),_e=((he=l[65].tags)==null?void 0:he.length)&&Zi(l);return{c(){e=_("table"),t=_("tbody"),n=_("tr"),s=_("td"),s.textContent="Source Type",i=_("td"),o=_("strong"),c=z(a),p=b(),F&&F.c(),f=b(),E&&E.c(),d=b(),M&&M.c(),m=b(),v=_("tr"),g=_("td"),g.textContent="Port",h=_("td"),y=z(S),k=b(),G&&G.c(),D=b(),I&&I.c(),T=b(),J&&J.c(),q=b(),H&&H.c(),P=b(),Q&&Q.c(),C=b(),le&&le.c(),L=b(),W&&W.c(),O=b(),X&&X.c(),A=b(),x&&x.c(),U=b(),_e&&_e.c(),K=Ge(),u(s,"class","label svelte-cuxyqu"),u(i,"class","svelte-cuxyqu"),u(g,"class","label svelte-cuxyqu"),u(h,"class","svelte-cuxyqu"),u(t,"class","svelte-cuxyqu"),u(e,"class","config-table svelte-cuxyqu")},m(ne,ve){w(ne,e,ve),r(e,t),r(t,n),r(n,s),r(n,i),r(i,o),r(o,c),r(t,p),F&&F.m(t,null),r(t,f),E&&E.m(t,null),r(t,d),M&&M.m(t,null),r(t,m),r(t,v),r(v,g),r(v,h),r(h,y),r(t,k),G&&G.m(t,null),r(t,D),I&&I.m(t,null),r(t,T),J&&J.m(t,null),r(t,q),H&&H.m(t,null),r(t,P),Q&&Q.m(t,null),r(t,C),le&&le.m(t,null),r(t,L),W&&W.m(t,null),r(t,O),X&&X.m(t,null),w(ne,A,ve),x&&x.m(ne,ve),w(ne,U,ve),_e&&_e.m(ne,ve),w(ne,K,ve),V=!0},p(ne,ve){var we,fe;(!V||ve[0]&16384)&&a!==(a=(ne[65].source_type||"-")+"")&&B(c,a),ne[65].git_url?F?F.p(ne,ve):(F=ji(ne),F.c(),F.m(t,f)):F&&(F.d(1),F=null),ne[65].git_branch?E?E.p(ne,ve):(E=Fi(ne),E.c(),E.m(t,d)):E&&(E.d(1),E=null),ne[65].image?M?M.p(ne,ve):(M=Ii(ne),M.c(),M.m(t,m)):M&&(M.d(1),M=null),(!V||ve[0]&16384)&&S!==(S=(ne[65].port||"-")+"")&&B(y,S),ne[65].container_port?G?G.p(ne,ve):(G=Bi(ne),G.c(),G.m(t,D)):G&&(G.d(1),G=null),ne[65].host_port?I?I.p(ne,ve):(I=Ui(ne),I.c(),I.m(t,T)):I&&(I.d(1),I=null),ne[65].snapshot_id?J?J.p(ne,ve):(J=Hi(ne),J.c(),J.m(t,q)):J&&(J.d(1),J=null),ne[65].region?H?H.p(ne,ve):(H=Gi(ne),H.c(),H.m(t,P)):H&&(H.d(1),H=null),ne[65].size?Q?Q.p(ne,ve):(Q=Wi(ne),Q.c(),Q.m(t,C)):Q&&(Q.d(1),Q=null),(we=ne[65].server_ips)!=null&&we.length?le?le.p(ne,ve):(le=Vi(ne),le.c(),le.m(t,L)):le&&(le.d(1),le=null),ne[65].setup_domain?W||(W=Ji(),W.c(),W.m(t,O)):W&&(W.d(1),W=null),ne[65].base_domain?X?X.p(ne,ve):(X=Ki(ne),X.c(),X.m(t,null)):X&&(X.d(1),X=null),ve[0]&16384&&(j=ne[65].env_vars&&Object.keys(ne[65].env_vars).length>0),j?x?x.p(ne,ve):(x=Yi(ne),x.c(),x.m(U.parentNode,U)):x&&(x.d(1),x=null),(fe=ne[65].tags)!=null&&fe.length?_e?(_e.p(ne,ve),ve[0]&16384&&N(_e,1)):(_e=Zi(ne),_e.c(),N(_e,1),_e.m(K.parentNode,K)):_e&&(De(),R(_e,1,1,()=>{_e=null}),Te())},i(ne){V||(N(_e),V=!0)},o(ne){R(_e),V=!1},d(ne){ne&&($(e),$(A),$(U),$(K)),F&&F.d(),E&&E.d(),M&&M.d(),G&&G.d(),I&&I.d(),J&&J.d(),H&&H.d(),Q&&Q.d(),le&&le.d(),W&&W.d(),X&&X.d(),x&&x.d(ne),_e&&_e.d(ne)}}}function ji(l){let e,t,n,s=l[65].git_url+"",i;return{c(){e=_("tr"),t=_("td"),t.textContent="Git URL",n=_("td"),i=z(s),u(t,"class","label svelte-cuxyqu"),u(n,"class","svelte-cuxyqu")},m(o,a){w(o,e,a),r(e,t),r(e,n),r(n,i)},p(o,a){a[0]&16384&&s!==(s=o[65].git_url+"")&&B(i,s)},d(o){o&&$(e)}}}function Fi(l){let e,t,n,s=l[65].git_branch+"",i;return{c(){e=_("tr"),t=_("td"),t.textContent="Git Branch",n=_("td"),i=z(s),u(t,"class","label svelte-cuxyqu"),u(n,"class","svelte-cuxyqu")},m(o,a){w(o,e,a),r(e,t),r(e,n),r(n,i)},p(o,a){a[0]&16384&&s!==(s=o[65].git_branch+"")&&B(i,s)},d(o){o&&$(e)}}}function Ii(l){let e,t,n,s=l[65].image+"",i;return{c(){e=_("tr"),t=_("td"),t.textContent="Image",n=_("td"),i=z(s),u(t,"class","label svelte-cuxyqu"),u(n,"class","svelte-cuxyqu")},m(o,a){w(o,e,a),r(e,t),r(e,n),r(n,i)},p(o,a){a[0]&16384&&s!==(s=o[65].image+"")&&B(i,s)},d(o){o&&$(e)}}}function Bi(l){let e,t,n,s=l[65].container_port+"",i;return{c(){e=_("tr"),t=_("td"),t.textContent="Container Port",n=_("td"),i=z(s),u(t,"class","label svelte-cuxyqu"),u(n,"class","svelte-cuxyqu")},m(o,a){w(o,e,a),r(e,t),r(e,n),r(n,i)},p(o,a){a[0]&16384&&s!==(s=o[65].container_port+"")&&B(i,s)},d(o){o&&$(e)}}}function Ui(l){let e,t,n,s=l[65].host_port+"",i;return{c(){e=_("tr"),t=_("td"),t.textContent="Host Port",n=_("td"),i=z(s),u(t,"class","label svelte-cuxyqu"),u(n,"class","svelte-cuxyqu")},m(o,a){w(o,e,a),r(e,t),r(e,n),r(n,i)},p(o,a){a[0]&16384&&s!==(s=o[65].host_port+"")&&B(i,s)},d(o){o&&$(e)}}}function Hi(l){let e,t,n,s=l[65].snapshot_id+"",i;return{c(){e=_("tr"),t=_("td"),t.textContent="Snapshot ID",n=_("td"),i=z(s),u(t,"class","label svelte-cuxyqu"),u(n,"class","svelte-cuxyqu")},m(o,a){w(o,e,a),r(e,t),r(e,n),r(n,i)},p(o,a){a[0]&16384&&s!==(s=o[65].snapshot_id+"")&&B(i,s)},d(o){o&&$(e)}}}function Gi(l){let e,t,n,s=l[65].region+"",i;return{c(){e=_("tr"),t=_("td"),t.textContent="Region",n=_("td"),i=z(s),u(t,"class","label svelte-cuxyqu"),u(n,"class","svelte-cuxyqu")},m(o,a){w(o,e,a),r(e,t),r(e,n),r(n,i)},p(o,a){a[0]&16384&&s!==(s=o[65].region+"")&&B(i,s)},d(o){o&&$(e)}}}function Wi(l){let e,t,n,s=l[65].size+"",i;return{c(){e=_("tr"),t=_("td"),t.textContent="Size",n=_("td"),i=z(s),u(t,"class","label svelte-cuxyqu"),u(n,"class","svelte-cuxyqu")},m(o,a){w(o,e,a),r(e,t),r(e,n),r(n,i)},p(o,a){a[0]&16384&&s!==(s=o[65].size+"")&&B(i,s)},d(o){o&&$(e)}}}function Vi(l){let e,t,n,s=l[65].server_ips.join(", ")+"",i;return{c(){e=_("tr"),t=_("td"),t.textContent="Servers",n=_("td"),i=z(s),u(t,"class","label svelte-cuxyqu"),u(n,"class","svelte-cuxyqu")},m(o,a){w(o,e,a),r(e,t),r(e,n),r(n,i)},p(o,a){a[0]&16384&&s!==(s=o[65].server_ips.join(", ")+"")&&B(i,s)},d(o){o&&$(e)}}}function Ji(l){let e;return{c(){e=_("tr"),e.innerHTML='<td class="label svelte-cuxyqu">Setup Domain</td><td class="svelte-cuxyqu">Yes</td>'},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Ki(l){let e,t,n,s=l[65].base_domain+"",i;return{c(){e=_("tr"),t=_("td"),t.textContent="Base Domain",n=_("td"),i=z(s),u(t,"class","label svelte-cuxyqu"),u(n,"class","svelte-cuxyqu")},m(o,a){w(o,e,a),r(e,t),r(e,n),r(n,i)},p(o,a){a[0]&16384&&s!==(s=o[65].base_domain+"")&&B(i,s)},d(o){o&&$(e)}}}function Yi(l){let e,t,n,s,i=me(Object.entries(l[65].env_vars)),o=[];for(let a=0;a<i.length;a+=1)o[a]=Qi(wi(l,i,a));return{c(){e=_("div"),t=_("div"),t.textContent="Environment Variables",n=b(),s=_("div");for(let a=0;a<o.length;a+=1)o[a].c();u(t,"class","section-title svelte-cuxyqu"),u(s,"class","env-list svelte-cuxyqu"),u(e,"class","env-section svelte-cuxyqu")},m(a,c){w(a,e,c),r(e,t),r(e,n),r(e,s);for(let p=0;p<o.length;p+=1)o[p]&&o[p].m(s,null)},p(a,c){if(c[0]&16384){i=me(Object.entries(a[65].env_vars));let p;for(p=0;p<i.length;p+=1){const f=wi(a,i,p);o[p]?o[p].p(f,c):(o[p]=Qi(f),o[p].c(),o[p].m(s,null))}for(;p<o.length;p+=1)o[p].d(1);o.length=i.length}},d(a){a&&$(e),Re(o,a)}}}function Qi(l){let e,t=l[69]+"",n,s,i=(l[70].length>20?l[70].substring(0,20)+"...":l[70])+"",o;return{c(){e=_("div"),n=z(t),s=z("="),o=z(i),u(e,"class","env-item svelte-cuxyqu")},m(a,c){w(a,e,c),r(e,n),r(e,s),r(e,o)},p(a,c){c[0]&16384&&t!==(t=a[69]+"")&&B(n,t),c[0]&16384&&i!==(i=(a[70].length>20?a[70].substring(0,20)+"...":a[70])+"")&&B(o,i)},d(a){a&&$(e)}}}function Zi(l){let e,t,n,s,i,o=me(l[65].tags),a=[];for(let p=0;p<o.length;p+=1)a[p]=Xi($i(l,o,p));const c=p=>R(a[p],1,1,()=>{a[p]=null});return{c(){e=_("div"),t=_("div"),t.textContent="Tags",n=b(),s=_("div");for(let p=0;p<a.length;p+=1)a[p].c();u(t,"class","section-title svelte-cuxyqu"),u(s,"class","tags-list svelte-cuxyqu"),u(e,"class","tags-section svelte-cuxyqu")},m(p,f){w(p,e,f),r(e,t),r(e,n),r(e,s);for(let d=0;d<a.length;d+=1)a[d]&&a[d].m(s,null);i=!0},p(p,f){if(f[0]&16384){o=me(p[65].tags);let d;for(d=0;d<o.length;d+=1){const m=$i(p,o,d);a[d]?(a[d].p(m,f),N(a[d],1)):(a[d]=Xi(m),a[d].c(),N(a[d],1),a[d].m(s,null))}for(De(),d=o.length;d<a.length;d+=1)c(d);Te()}},i(p){if(!i){for(let f=0;f<o.length;f+=1)N(a[f]);i=!0}},o(p){a=a.filter(Boolean);for(let f=0;f<a.length;f+=1)R(a[f]);i=!1},d(p){p&&$(e),Re(a,p)}}}function Gf(l){let e=l[66]+"",t;return{c(){t=z(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&16384&&e!==(e=n[66]+"")&&B(t,e)},d(n){n&&$(t)}}}function Xi(l){let e,t;return e=new Je({props:{$$slots:{default:[Gf]},$$scope:{ctx:l}}}),{c(){ce(e.$$.fragment)},m(n,s){re(e,n,s),t=!0},p(n,s){const i={};s[0]&16384|s[2]&1048576&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){ae(e,n)}}}function Wf(l){let e,t,n=l[14]&&Oi(l);return{c(){n&&n.c(),e=Ge()},m(s,i){n&&n.m(s,i),w(s,e,i),t=!0},p(s,i){s[14]?n?(n.p(s,i),i[0]&16384&&N(n,1)):(n=Oi(s),n.c(),N(n,1),n.m(e.parentNode,e)):n&&(De(),R(n,1,1,()=>{n=null}),Te())},i(s){t||(N(n),t=!0)},o(s){R(n),t=!1},d(s){s&&$(e),n&&n.d(s)}}}function Vf(l){let e;return{c(){e=z("🚀 Redeploy with this config")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Jf(l){let e;return{c(){e=z("Close")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Kf(l){let e,t,n,s,i;return t=new je({props:{variant:"primary",$$slots:{default:[Vf]},$$scope:{ctx:l}}}),t.$on("click",l[22]),s=new je({props:{variant:"ghost",$$slots:{default:[Jf]},$$scope:{ctx:l}}}),s.$on("click",l[42]),{c(){e=_("div"),ce(t.$$.fragment),n=b(),ce(s.$$.fragment),u(e,"slot","footer")},m(o,a){w(o,e,a),re(t,e,null),r(e,n),re(s,e,null),i=!0},p(o,a){const c={};a[2]&1048576&&(c.$$scope={dirty:a,ctx:o}),t.$set(c);const p={};a[2]&1048576&&(p.$$scope={dirty:a,ctx:o}),s.$set(p)},i(o){i||(N(t.$$.fragment,o),N(s.$$.fragment,o),i=!0)},o(o){R(t.$$.fragment,o),R(s.$$.fragment,o),i=!1},d(o){o&&$(e),ae(t),ae(s)}}}function xi(l){let e,t,n,s=(l[16].service||l[16].name)+"",i,o,a,c=l[16].environment+"",p,f,d=vl(l[16].deployed_at)+"",m,v,g,h,S,y,k=l[16].version&&er(l);h=new Je({props:{variant:Vl(wl(l[16])),$$slots:{default:[Qf]},$$scope:{ctx:l}}});function D(P,C){return P[18]?xf:P[17].length===0?Xf:Zf}let T=D(l),q=T(l);return{c(){e=_("div"),t=_("div"),n=_("span"),i=z(s),o=b(),a=_("span"),p=z(c),f=z(" • "),m=z(d),v=b(),k&&k.c(),g=b(),ce(h.$$.fragment),S=b(),q.c(),u(n,"class","service-name svelte-cuxyqu"),u(a,"class","meta svelte-cuxyqu"),u(t,"class","logs-header-info svelte-cuxyqu"),u(e,"class","logs-modal-content svelte-cuxyqu")},m(P,C){w(P,e,C),r(e,t),r(t,n),r(n,i),r(t,o),r(t,a),r(a,p),r(a,f),r(a,m),r(t,v),k&&k.m(t,null),r(t,g),re(h,t,null),r(e,S),q.m(e,null),y=!0},p(P,C){(!y||C[0]&65536)&&s!==(s=(P[16].service||P[16].name)+"")&&B(i,s),(!y||C[0]&65536)&&c!==(c=P[16].environment+"")&&B(p,c),(!y||C[0]&65536)&&d!==(d=vl(P[16].deployed_at)+"")&&B(m,d),P[16].version?k?(k.p(P,C),C[0]&65536&&N(k,1)):(k=er(P),k.c(),N(k,1),k.m(t,g)):k&&(De(),R(k,1,1,()=>{k=null}),Te());const L={};C[0]&65536&&(L.variant=Vl(wl(P[16]))),C[0]&65536|C[2]&1048576&&(L.$$scope={dirty:C,ctx:P}),h.$set(L),T===(T=D(P))&&q?q.p(P,C):(q.d(1),q=T(P),q&&(q.c(),q.m(e,null)))},i(P){y||(N(k),N(h.$$.fragment,P),y=!0)},o(P){R(k),R(h.$$.fragment,P),y=!1},d(P){P&&$(e),k&&k.d(),ae(h),q.d()}}}function er(l){let e,t;return e=new Je({props:{variant:"purple",$$slots:{default:[Yf]},$$scope:{ctx:l}}}),{c(){ce(e.$$.fragment)},m(n,s){re(e,n,s),t=!0},p(n,s){const i={};s[0]&65536|s[2]&1048576&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){ae(e,n)}}}function Yf(l){let e,t=l[16].version+"",n;return{c(){e=z("v"),n=z(t)},m(s,i){w(s,e,i),w(s,n,i)},p(s,i){i[0]&65536&&t!==(t=s[16].version+"")&&B(n,t)},d(s){s&&($(e),$(n))}}}function Qf(l){let e=wl(l[16])+"",t;return{c(){t=z(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&65536&&e!==(e=wl(n[16])+"")&&B(t,e)},d(n){n&&$(t)}}}function Zf(l){let e,t=me(l[17]),n=[];for(let s=0;s<t.length;s+=1)n[s]=tr(ki(l,t,s));return{c(){e=_("div");for(let s=0;s<n.length;s+=1)n[s].c();u(e,"class","logs-container svelte-cuxyqu")},m(s,i){w(s,e,i);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null)},p(s,i){if(i[0]&131072){t=me(s[17]);let o;for(o=0;o<t.length;o+=1){const a=ki(s,t,o);n[o]?n[o].p(a,i):(n[o]=tr(a),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=t.length}},d(s){s&&$(e),Re(n,s)}}}function Xf(l){let e;return{c(){e=_("div"),e.textContent="No logs available for this deployment",u(e,"class","no-logs svelte-cuxyqu")},m(t,n){w(t,e,n)},p:pe,d(t){t&&$(e)}}}function xf(l){let e;return{c(){e=_("div"),e.textContent="Loading logs...",u(e,"class","logs-loading svelte-cuxyqu")},m(t,n){w(t,e,n)},p:pe,d(t){t&&$(e)}}}function tr(l){let e,t,n=(l[62].timestamp?new Date(l[62].timestamp).toLocaleTimeString():"")+"",s,i,o,a=l[62].message+"",c,p;return{c(){e=_("div"),t=_("span"),s=z(n),i=b(),o=_("span"),c=z(a),p=b(),u(t,"class","log-time svelte-cuxyqu"),u(o,"class","log-message svelte-cuxyqu"),u(e,"class","log-line svelte-cuxyqu")},m(f,d){w(f,e,d),r(e,t),r(t,s),r(e,i),r(e,o),r(o,c),r(e,p)},p(f,d){d[0]&131072&&n!==(n=(f[62].timestamp?new Date(f[62].timestamp).toLocaleTimeString():"")+"")&&B(s,n),d[0]&131072&&a!==(a=f[62].message+"")&&B(c,a)},d(f){f&&$(e)}}}function ep(l){let e,t,n=l[16]&&xi(l);return{c(){n&&n.c(),e=Ge()},m(s,i){n&&n.m(s,i),w(s,e,i),t=!0},p(s,i){s[16]?n?(n.p(s,i),i[0]&65536&&N(n,1)):(n=xi(s),n.c(),N(n,1),n.m(e.parentNode,e)):n&&(De(),R(n,1,1,()=>{n=null}),Te())},i(s){t||(N(n),t=!0)},o(s){R(n),t=!1},d(s){s&&$(e),n&&n.d(s)}}}function tp(l){let e;return{c(){e=z("Close")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function lp(l){let e,t,n;return t=new je({props:{variant:"ghost",$$slots:{default:[tp]},$$scope:{ctx:l}}}),t.$on("click",l[45]),{c(){e=_("div"),ce(t.$$.fragment),u(e,"slot","footer")},m(s,i){w(s,e,i),re(t,e,null),n=!0},p(s,i){const o={};i[2]&1048576&&(o.$$scope={dirty:i,ctx:s}),t.$set(o)},i(s){n||(N(t.$$.fragment,s),n=!0)},o(s){R(t.$$.fragment,s),n=!1},d(s){s&&$(e),ae(t)}}}function np(l){let e,t,n,s=l[10].length+"",i,o,a,c,p,f,d=me(l[10]),m=[];for(let h=0;h<d.length;h+=1)m[h]=lr(gi(l,d,h));const v=h=>R(m[h],1,1,()=>{m[h]=null});let g=l[11].length>0&&nr(l);return{c(){e=_("div"),t=_("p"),n=_("strong"),i=z(s),o=z(" server(s) from the original deployment are unavailable:"),a=b(),c=_("div");for(let h=0;h<m.length;h+=1)m[h].c();p=b(),g&&g.c(),u(t,"class","svelte-cuxyqu"),u(c,"class","confirm-server-list unavailable svelte-cuxyqu"),u(e,"class","rollback-confirm-content svelte-cuxyqu")},m(h,S){w(h,e,S),r(e,t),r(t,n),r(n,i),r(t,o),r(e,a),r(e,c);for(let y=0;y<m.length;y+=1)m[y]&&m[y].m(c,null);r(e,p),g&&g.m(e,null),f=!0},p(h,S){if((!f||S[0]&1024)&&s!==(s=h[10].length+"")&&B(i,s),S[0]&1024){d=me(h[10]);let y;for(y=0;y<d.length;y+=1){const k=gi(h,d,y);m[y]?(m[y].p(k,S),N(m[y],1)):(m[y]=lr(k),m[y].c(),N(m[y],1),m[y].m(c,null))}for(De(),y=d.length;y<m.length;y+=1)v(y);Te()}h[11].length>0?g?(g.p(h,S),S[0]&2048&&N(g,1)):(g=nr(h),g.c(),N(g,1),g.m(e,null)):g&&(De(),R(g,1,1,()=>{g=null}),Te())},i(h){if(!f){for(let S=0;S<d.length;S+=1)N(m[S]);N(g),f=!0}},o(h){m=m.filter(Boolean);for(let S=0;S<m.length;S+=1)R(m[S]);R(g),f=!1},d(h){h&&$(e),Re(m,h),g&&g.d()}}}function sp(l){let e,t,n,s,i=l[11].length+"",o,a,c,p=l[11].length+l[9].length+"",f,d,m,v,g,h,S=me(l[9]),y=[];for(let k=0;k<S.length;k+=1)y[k]=or(bi(l,S,k));return{c(){e=_("div"),t=_("p"),n=z("Rolling back will restore to "),s=_("strong"),o=z(i),a=z(` servers.
        Service currently runs on `),c=_("strong"),f=z(p),d=z(" servers."),m=b(),v=_("p"),v.textContent="Stop containers on the following servers?",g=b(),h=_("div");for(let k=0;k<y.length;k+=1)y[k].c();u(t,"class","svelte-cuxyqu"),u(v,"class","svelte-cuxyqu"),u(h,"class","confirm-server-list svelte-cuxyqu"),u(e,"class","rollback-confirm-content svelte-cuxyqu")},m(k,D){w(k,e,D),r(e,t),r(t,n),r(t,s),r(s,o),r(t,a),r(t,c),r(c,f),r(t,d),r(e,m),r(e,v),r(e,g),r(e,h);for(let T=0;T<y.length;T+=1)y[T]&&y[T].m(h,null)},p(k,D){if(D[0]&2048&&i!==(i=k[11].length+"")&&B(o,i),D[0]&2560&&p!==(p=k[11].length+k[9].length+"")&&B(f,p),D[0]&512){S=me(k[9]);let T;for(T=0;T<S.length;T+=1){const q=bi(k,S,T);y[T]?y[T].p(q,D):(y[T]=or(q),y[T].c(),y[T].m(h,null))}for(;T<y.length;T+=1)y[T].d(1);y.length=S.length}},i:pe,o:pe,d(k){k&&$(e),Re(y,k)}}}function op(l){let e;return{c(){e=z("offline")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function lr(l){let e,t,n=(l[55].name||l[55].ip)+"",s,i,o,a=l[55].ip+"",c,p,f,d,m;return f=new Je({props:{variant:"error",$$slots:{default:[op]},$$scope:{ctx:l}}}),{c(){e=_("div"),t=_("span"),s=z(n),i=b(),o=_("span"),c=z(a),p=b(),ce(f.$$.fragment),d=b(),u(t,"class","server-name svelte-cuxyqu"),u(o,"class","server-ip svelte-cuxyqu"),u(e,"class","confirm-server-item svelte-cuxyqu")},m(v,g){w(v,e,g),r(e,t),r(t,s),r(e,i),r(e,o),r(o,c),r(e,p),re(f,e,null),r(e,d),m=!0},p(v,g){(!m||g[0]&1024)&&n!==(n=(v[55].name||v[55].ip)+"")&&B(s,n),(!m||g[0]&1024)&&a!==(a=v[55].ip+"")&&B(c,a);const h={};g[2]&1048576&&(h.$$scope={dirty:g,ctx:v}),f.$set(h)},i(v){m||(N(f.$$.fragment,v),m=!0)},o(v){R(f.$$.fragment,v),m=!1},d(v){v&&$(e),ae(f)}}}function nr(l){let e,t,n=l[11].length+"",s,i,o,a,c,p=me(l[11]),f=[];for(let m=0;m<p.length;m+=1)f[m]=sr(hi(l,p,m));const d=m=>R(f[m],1,1,()=>{f[m]=null});return{c(){e=_("p"),t=z("Available servers ("),s=z(n),i=z("):"),o=b(),a=_("div");for(let m=0;m<f.length;m+=1)f[m].c();u(e,"class","svelte-cuxyqu"),u(a,"class","confirm-server-list available svelte-cuxyqu")},m(m,v){w(m,e,v),r(e,t),r(e,s),r(e,i),w(m,o,v),w(m,a,v);for(let g=0;g<f.length;g+=1)f[g]&&f[g].m(a,null);c=!0},p(m,v){if((!c||v[0]&2048)&&n!==(n=m[11].length+"")&&B(s,n),v[0]&2048){p=me(m[11]);let g;for(g=0;g<p.length;g+=1){const h=hi(m,p,g);f[g]?(f[g].p(h,v),N(f[g],1)):(f[g]=sr(h),f[g].c(),N(f[g],1),f[g].m(a,null))}for(De(),g=p.length;g<f.length;g+=1)d(g);Te()}},i(m){if(!c){for(let v=0;v<p.length;v+=1)N(f[v]);c=!0}},o(m){f=f.filter(Boolean);for(let v=0;v<f.length;v+=1)R(f[v]);c=!1},d(m){m&&($(e),$(o),$(a)),Re(f,m)}}}function ip(l){let e;return{c(){e=z("online")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function sr(l){let e,t,n=(l[55].name||l[55].ip)+"",s,i,o,a=l[55].ip+"",c,p,f,d,m;return f=new Je({props:{variant:"success",$$slots:{default:[ip]},$$scope:{ctx:l}}}),{c(){e=_("div"),t=_("span"),s=z(n),i=b(),o=_("span"),c=z(a),p=b(),ce(f.$$.fragment),d=b(),u(t,"class","server-name svelte-cuxyqu"),u(o,"class","server-ip svelte-cuxyqu"),u(e,"class","confirm-server-item svelte-cuxyqu")},m(v,g){w(v,e,g),r(e,t),r(t,s),r(e,i),r(e,o),r(o,c),r(e,p),re(f,e,null),r(e,d),m=!0},p(v,g){(!m||g[0]&2048)&&n!==(n=(v[55].name||v[55].ip)+"")&&B(s,n),(!m||g[0]&2048)&&a!==(a=v[55].ip+"")&&B(c,a);const h={};g[2]&1048576&&(h.$$scope={dirty:g,ctx:v}),f.$set(h)},i(v){m||(N(f.$$.fragment,v),m=!0)},o(v){R(f.$$.fragment,v),m=!1},d(v){v&&$(e),ae(f)}}}function or(l){let e,t,n=(l[55].name||l[55].ip)+"",s,i,o,a=l[55].ip+"",c,p;return{c(){e=_("div"),t=_("span"),s=z(n),i=b(),o=_("span"),c=z(a),p=b(),u(t,"class","server-name svelte-cuxyqu"),u(o,"class","server-ip svelte-cuxyqu"),u(e,"class","confirm-server-item svelte-cuxyqu")},m(f,d){w(f,e,d),r(e,t),r(t,s),r(e,i),r(e,o),r(o,c),r(e,p)},p(f,d){d[0]&512&&n!==(n=(f[55].name||f[55].ip)+"")&&B(s,n),d[0]&512&&a!==(a=f[55].ip+"")&&B(c,a)},d(f){f&&$(e)}}}function rp(l){let e,t,n,s;const i=[sp,np],o=[];function a(c,p){return c[8]==="cleanup"?0:c[8]==="missing"?1:-1}return~(e=a(l))&&(t=o[e]=i[e](l)),{c(){t&&t.c(),n=Ge()},m(c,p){~e&&o[e].m(c,p),w(c,n,p),s=!0},p(c,p){let f=e;e=a(c),e===f?~e&&o[e].p(c,p):(t&&(De(),R(o[f],1,1,()=>{o[f]=null}),Te()),~e?(t=o[e],t?t.p(c,p):(t=o[e]=i[e](c),t.c()),N(t,1),t.m(n.parentNode,n)):t=null)},i(c){s||(N(t),s=!0)},o(c){R(t),s=!1},d(c){c&&$(n),~e&&o[e].d(c)}}}function ap(l){let e,t;return e=new je({props:{variant:"primary",$$slots:{default:[up]},$$scope:{ctx:l}}}),e.$on("click",l[27]),{c(){ce(e.$$.fragment)},m(n,s){re(e,n,s),t=!0},p(n,s){const i={};s[2]&1048576&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){ae(e,n)}}}function cp(l){let e,t;return e=new je({props:{variant:"primary",$$slots:{default:[fp]},$$scope:{ctx:l}}}),e.$on("click",l[26]),{c(){ce(e.$$.fragment)},m(n,s){re(e,n,s),t=!0},p(n,s){const i={};s[2]&1048576&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){ae(e,n)}}}function up(l){let e;return{c(){e=z("Proceed with available only")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function fp(l){let e;return{c(){e=z("Proceed")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function pp(l){let e;return{c(){e=z("Cancel")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function _p(l){let e,t,n,s,i,o;const a=[cp,ap],c=[];function p(f,d){return f[8]==="cleanup"?0:f[8]==="missing"&&f[11].length>0?1:-1}return~(t=p(l))&&(n=c[t]=a[t](l)),i=new je({props:{variant:"ghost",$$slots:{default:[pp]},$$scope:{ctx:l}}}),i.$on("click",l[48]),{c(){e=_("div"),n&&n.c(),s=b(),ce(i.$$.fragment),u(e,"slot","footer")},m(f,d){w(f,e,d),~t&&c[t].m(e,null),r(e,s),re(i,e,null),o=!0},p(f,d){let m=t;t=p(f),t===m?~t&&c[t].p(f,d):(n&&(De(),R(c[m],1,1,()=>{c[m]=null}),Te()),~t?(n=c[t],n?n.p(f,d):(n=c[t]=a[t](f),n.c()),N(n,1),n.m(e,s)):n=null);const v={};d[2]&1048576&&(v.$$scope={dirty:d,ctx:f}),i.$set(v)},i(f){o||(N(n),N(i.$$.fragment,f),o=!0)},o(f){R(n),R(i.$$.fragment,f),o=!1},d(f){f&&$(e),~t&&c[t].d(),ae(i)}}}function dp(l){let e,t,n,s,i,o,a,c,p,f,d,m,v,g,h,S,y,k,D,T,q,P,C=l[20]&&zi(l);a=new je({props:{variant:"ghost",$$slots:{default:[$f]},$$scope:{ctx:l}}}),a.$on("click",l[33]),p=new At({props:{padding:!1,$$slots:{default:[Ef]},$$scope:{ctx:l}}});function L(E){l[40](E)}let O={title:"⏪ Rollback",width:"600px",$$slots:{footer:[Bf],default:[Af]},$$scope:{ctx:l}};l[1]!==void 0&&(O.open=l[1]),d=new Ml({props:O}),Kt.push(()=>Ll(d,"open",L)),d.$on("close",l[41]);function A(E){l[43](E)}let j={title:"⚙️ Deployment Config",width:"500px",$$slots:{footer:[Kf],default:[Wf]},$$scope:{ctx:l}};l[13]!==void 0&&(j.open=l[13]),g=new Ml({props:j}),Kt.push(()=>Ll(g,"open",A)),g.$on("close",l[44]);function U(E){l[46](E)}let K={title:"📋 Deployment Logs",width:"700px",$$slots:{footer:[lp],default:[ep]},$$scope:{ctx:l}};l[15]!==void 0&&(K.open=l[15]),y=new Ml({props:K}),Kt.push(()=>Ll(y,"open",U)),y.$on("close",l[47]);function V(E){l[49](E)}let F={title:l[8]==="cleanup"?"⚠️ Stop Orphan Containers":"⚠️ Servers Unavailable",width:"500px",$$slots:{footer:[_p],default:[rp]},$$scope:{ctx:l}};return l[7]!==void 0&&(F.open=l[7]),T=new Ml({props:F}),Kt.push(()=>Ll(T,"open",V)),T.$on("close",l[50]),{c(){e=_("div"),t=_("div"),n=_("h1"),n.textContent="Deployment History",s=b(),i=_("div"),C&&C.c(),o=b(),ce(a.$$.fragment),c=b(),ce(p.$$.fragment),f=b(),ce(d.$$.fragment),v=b(),ce(g.$$.fragment),S=b(),ce(y.$$.fragment),D=b(),ce(T.$$.fragment),u(n,"class","svelte-cuxyqu"),u(i,"class","header-actions svelte-cuxyqu"),u(t,"class","page-header svelte-cuxyqu"),u(e,"class","deployments-page svelte-cuxyqu")},m(E,M){w(E,e,M),r(e,t),r(t,n),r(t,s),r(t,i),C&&C.m(i,null),r(i,o),re(a,i,null),r(e,c),re(p,e,null),w(E,f,M),re(d,E,M),w(E,v,M),re(g,E,M),w(E,S,M),re(y,E,M),w(E,D,M),re(T,E,M),P=!0},p(E,M){E[20]?C?C.p(E,M):(C=zi(E),C.c(),C.m(i,o)):C&&(C.d(1),C=null);const G={};M[2]&1048576&&(G.$$scope={dirty:M,ctx:E}),a.$set(G);const I={};M[0]&524289|M[2]&1048576&&(I.$$scope={dirty:M,ctx:E}),p.$set(I);const J={};M[0]&126|M[2]&1048576&&(J.$$scope={dirty:M,ctx:E}),!m&&M[0]&2&&(m=!0,J.open=E[1],Nl(()=>m=!1)),d.$set(J);const H={};M[0]&24576|M[2]&1048576&&(H.$$scope={dirty:M,ctx:E}),!h&&M[0]&8192&&(h=!0,H.open=E[13],Nl(()=>h=!1)),g.$set(H);const Q={};M[0]&491520|M[2]&1048576&&(Q.$$scope={dirty:M,ctx:E}),!k&&M[0]&32768&&(k=!0,Q.open=E[15],Nl(()=>k=!1)),y.$set(Q);const le={};M[0]&256&&(le.title=E[8]==="cleanup"?"⚠️ Stop Orphan Containers":"⚠️ Servers Unavailable"),M[0]&8064|M[2]&1048576&&(le.$$scope={dirty:M,ctx:E}),!q&&M[0]&128&&(q=!0,le.open=E[7],Nl(()=>q=!1)),T.$set(le)},i(E){P||(N(a.$$.fragment,E),N(p.$$.fragment,E),N(d.$$.fragment,E),N(g.$$.fragment,E),N(y.$$.fragment,E),N(T.$$.fragment,E),P=!0)},o(E){R(a.$$.fragment,E),R(p.$$.fragment,E),R(d.$$.fragment,E),R(g.$$.fragment,E),R(y.$$.fragment,E),R(T.$$.fragment,E),P=!1},d(E){E&&($(e),$(f),$(v),$(S),$(D)),C&&C.d(),ae(a),ae(p),ae(d,E),ae(g,E),ae(y,E),ae(T,E)}}}function ir(l){return l?l.toLocaleTimeString():""}function mp(l,e){return l?l.filter(t=>!(e.project&&t.project!==e.project||e.env&&t.environment!==e.env)):[]}function vp(l){const e=[...l],t=new Set;for(const n of e){const s=`${n.project}/${n.service||n.name}/${n.environment}`;n.status==="success"&&n.can_rollback&&!t.has(s)?(n.is_current_active=!0,t.add(s)):n.is_current_active=!1}return e}function vl(l){return l?new Date(l).toLocaleString():"-"}function Vl(l){switch(l){case"success":case"active":return"success";case"failed":case"error":return"danger";case"pending":case"deploying":return"warning";case"superseded":return"secondary";default:return"info"}}function wl(l){const e=l.status||"unknown";return e==="rolled_back"?l.is_rollback?"failed":"superseded":e}function hp(l,e,t){let n,s,i,o;ct(l,Ul,ke=>t(31,i=ke)),ct(l,Al,ke=>t(32,o=ke));let a=!1,c=!1,p=null,f=[],d=null,m=!1,v=[],g=!1,h="",S=[],y=[],k=[],D=null,T=!1,q=null,P=!1,C=null,L=[],O=!1,A=[],j=[];function U(ke){t(14,q=ke),t(13,T=!0)}function K(){if(!(q!=null&&q.config_snapshot))return;const ke=new CustomEvent("redeploy",{detail:{deployment:q,config:q.config_snapshot},bubbles:!0});document.dispatchEvent(ke),t(13,T=!1),be.info("Config loaded - switch to Deploy tab")}async function V(ke){t(16,C=ke),t(15,P=!0),t(18,O=!0),t(17,L=[]);try{const Fe=await Oe("GET",`/infra/deployments/history/${ke.id}/logs`);t(17,L=Fe.logs||[])}catch(Fe){be.error("Failed to load logs: "+(Fe.message||Fe))}finally{t(18,O=!1)}}async function F(ke){t(2,p=ke);try{const Fe=new URLSearchParams({project:ke.project||"",environment:ke.environment||"",service_name:ke.service_name||ke.service||""}),Ye=await Oe("GET",`/infra/deployments/rollback/preview?${Fe}`);t(3,f=(Ye.recent_deployments||[]).filter(Ke=>Ke.id!==ke.id&&Ke.status==="success"))}catch{t(3,f=[])}t(1,c=!0)}async function E(){if(!p||!d){be.error("Select a deployment to rollback to");return}const ke=f.find(Ze=>Ze.id===d);if(!ke){be.error("Target deployment not found");return}const Fe=p.project||"",Ye=p.environment||"",Ke=p.service_name||p.service||"";try{const Ze=new URLSearchParams({project:Fe,environment:Ye,service_name:Ke}),Be=await Oe("GET",`/infra/services/state?${Ze}`),Dt=ke.server_ips||[],st=(Be.server_ips||[]).filter($t=>!Dt.includes($t)),jt=(Be.servers||[]).filter($t=>st.includes($t.ip));if(Dt.length>0){const $t=await Oe("POST",`/infra/services/check-servers?do_token=${dl()}&server_ips=${Dt.join(",")}`,null);if(t(10,y=$t.unavailable||[]),t(11,k=$t.available||[]),y.length>0){t(8,h="missing"),t(12,D=ke),t(7,g=!0);return}}if(jt.length>0){t(9,S=jt),t(8,h="cleanup"),t(12,D=ke),t(7,g=!0);return}}catch(Ze){console.log("Rollback pre-check:",Ze.message||Ze)}await H()}async function M(){if(t(7,g=!1),h==="cleanup"&&S.length>0){const ke=`${p.project}_${p.service||p.service_name}_${p.environment}`.replace(/[^a-zA-Z0-9_]/g,"_"),Fe=S.map(Ye=>Ye.ip);try{const Ye=await Oe("POST",`/infra/services/cleanup?do_token=${dl()}`,{server_ips:Fe,container_name:ke});t(6,v=[...v,{message:`Cleanup: ${Ye.cleaned} stopped`,type:"info",time:new Date}])}catch(Ye){t(6,v=[...v,{message:`Cleanup warning: ${Ye.message}`,type:"warning",time:new Date}])}}t(9,S=[]),t(10,y=[]),t(12,D=null),await H()}let G=!1,I=[];async function J(){t(7,g=!1),G=!0,I=k.map(ke=>ke.ip),t(10,y=[]),t(12,D=null),await H()}async function H(){t(6,v=[]),t(5,m=!0);const ke=(Fe,Ye="info")=>{t(6,v=[...v,{message:Fe,type:Ye,time:new Date}])};try{const Fe=new URLSearchParams({project:p.project||"",environment:p.environment||"",service_name:p.service_name||p.service||""}).toString();ke("Starting rollback...");let Ye=!1,Ke="";const Ze={deployment_id:d};if(G&&I.length>0&&(Ze.server_ips=I,ke(`Partial rollback to ${I.length} available server(s)`)),await Ha("POST",`/infra/deployments/rollback?${Fe}`,Ze,Be=>{Be.type==="progress"||Be.type==="start"?ke(Be.message,"info"):Be.type==="server_complete"?ke(`✅ ${Be.ip}: Success`,"success"):Be.type==="error"?(ke(`❌ ${Be.message||Be.error}`,"error"),Ke=Be.message||Be.error||"Unknown error"):Be.type==="complete"&&(Ye=Be.success,Ye?ke(`✅ ${Be.message}`,"success"):(Ke=Be.message||"Rollback failed",ke(`❌ ${Ke}`,"error")))}),Ye)be.success("Rollback completed successfully"),await Q();else throw new Error(Ke||"Rollback failed")}catch(Fe){ke(`❌ Error: ${Fe.message||String(Fe)}`,"error"),be.error("Rollback failed: "+(Fe.message||String(Fe)))}finally{t(5,m=!1),G=!1,I=[]}}function Q(){Al.refresh()}function le(){Al.refresh()}const W=[[]],X=()=>Al.refresh(),x=ke=>U(ke),_e=ke=>V(ke),$e=ke=>F(ke),he=()=>{t(1,c=!1),t(6,v=[])};function ne(){d=this.__value,t(4,d)}function ve(ke){c=ke,t(1,c)}const we=()=>t(1,c=!1),fe=()=>t(13,T=!1);function te(ke){T=ke,t(13,T)}const se=()=>t(13,T=!1),Ee=()=>t(15,P=!1);function ge(ke){P=ke,t(15,P)}const Ve=()=>t(15,P=!1),Ot=()=>{t(7,g=!1),t(12,D=null)};function rt(ke){g=ke,t(7,g)}const mt=()=>{t(7,g=!1),t(12,D=null)};return l.$$.update=()=>{l.$$.dirty[1]&2&&t(30,n=o||{loading:!1}),l.$$.dirty[0]&1073741824&&t(0,a=n.loading),l.$$.dirty[0]&1073741824&&t(20,s=n.lastFetched),l.$$.dirty[0]&1073741824&&n.data&&t(29,A=vp(n.data)),l.$$.dirty[0]&536870912|l.$$.dirty[1]&1&&t(19,j=mp(A,i))},[a,c,p,f,d,m,v,g,h,S,y,k,D,T,q,P,C,L,O,j,s,U,K,V,F,E,M,J,le,A,n,i,o,X,x,_e,$e,he,ne,W,ve,we,fe,te,se,Ee,ge,Ve,Ot,rt,mt]}class gp extends Pt{constructor(e){super(),Et(this,e,hp,dp,zt,{refresh:28},null,[-1,-1,-1])}get refresh(){return this.$$.ctx[28]}}function rr(l,e,t){var i,o,a;const n=l.slice();n[22]=e[t];const s=n[22].ip||((a=(o=(i=n[22].networks)==null?void 0:i.v4)==null?void 0:o[0])==null?void 0:a.ip_address);return n[23]=s,n}function ar(l,e,t){const n=l.slice();return n[26]=e[t],n}function cr(l,e,t){const n=l.slice();return n[29]=e[t],n}function ur(l){let e,t=l[29].label+"",n;return{c(){e=_("option"),n=z(t),e.__value=l[29].value,ee(e,e.__value)},m(s,i){w(s,e,i),r(e,n)},p:pe,d(s){s&&$(e)}}}function fr(l){let e,t=l[26].charAt(0).toUpperCase()+l[26].slice(1)+"",n;return{c(){e=_("option"),n=z(t),e.__value=l[26],ee(e,e.__value)},m(s,i){w(s,e,i),r(e,n)},p:pe,d(s){s&&$(e)}}}function pr(l){let e,t=(l[22].name||"unnamed")+"",n,s,i=l[23]+"",o,a,c;return{c(){e=_("option"),n=z(t),s=z(" ("),o=z(i),a=z(")"),e.__value=c=l[23],ee(e,e.__value)},m(p,f){w(p,e,f),r(e,n),r(e,s),r(e,o),r(e,a)},p(p,f){f[0]&64&&t!==(t=(p[22].name||"unnamed")+"")&&B(n,t),f[0]&64&&i!==(i=p[23]+"")&&B(o,i),f[0]&64&&c!==(c=p[23])&&(e.__value=c,ee(e,e.__value))},d(p){p&&$(e)}}}function _r(l){let e,t=l[23]&&pr(l);return{c(){t&&t.c(),e=Ge()},m(n,s){t&&t.m(n,s),w(n,e,s)},p(n,s){n[23]?t?t.p(n,s):(t=pr(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(n){n&&$(e),t&&t.d(n)}}}function bp(l){let e;return{c(){e=z("🚀 Deploy Service")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function kp(l){let e;return{c(){e=z("Deploying...")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function $p(l){let e;function t(i,o){return i[4]?kp:bp}let n=t(l),s=n(l);return{c(){s.c(),e=Ge()},m(i,o){s.m(i,o),w(i,e,o)},p(i,o){n!==(n=t(i))&&(s.d(1),s=n(i),s&&(s.c(),s.m(e.parentNode,e)))},d(i){i&&$(e),s.d(i)}}}function wp(l){let e,t,n,s,i,o,a,c,p,f,d,m,v,g,h,S,y,k,D,T,q,P,C,L,O,A,j,U,K,V,F,E=me(l[7]),M=[];for(let Q=0;Q<E.length;Q+=1)M[Q]=ur(cr(l,E,Q));let G=me(l[8]),I=[];for(let Q=0;Q<G.length;Q+=1)I[Q]=fr(ar(l,G,Q));let J=me(l[6]||[]),H=[];for(let Q=0;Q<J.length;Q+=1)H[Q]=_r(rr(l,J,Q));return U=new je({props:{variant:"primary",type:"submit",disabled:l[4],$$slots:{default:[$p]},$$scope:{ctx:l}}}),{c(){e=_("p"),e.textContent="Deploy stateful services with automatic configuration, persistence, and service mesh.",t=b(),n=_("form"),s=_("div"),i=_("label"),i.textContent="Service Type *",o=b(),a=_("select"),c=_("option"),c.textContent="Select service...";for(let Q=0;Q<M.length;Q+=1)M[Q].c();p=b(),f=_("div"),d=_("label"),d.textContent="Project *",m=b(),v=_("input"),g=b(),h=_("div"),S=_("label"),S.textContent="Environment",y=b(),k=_("select");for(let Q=0;Q<I.length;Q+=1)I[Q].c();D=b(),T=_("div"),q=_("label"),q.textContent="Target Server *",P=b(),C=_("select"),L=_("option"),L.textContent="Select server...";for(let Q=0;Q<H.length;Q+=1)H[Q].c();O=b(),A=_("small"),A.textContent="Servers from Infrastructure tab",j=b(),ce(U.$$.fragment),u(e,"class","description svelte-2vlpp7"),u(i,"for","svc-type"),u(i,"class","svelte-2vlpp7"),c.__value="",ee(c,c.__value),u(a,"id","svc-type"),a.required=!0,u(a,"class","svelte-2vlpp7"),l[0]===void 0&&lt(()=>l[11].call(a)),u(s,"class","form-group svelte-2vlpp7"),u(d,"for","svc-project"),u(d,"class","svelte-2vlpp7"),u(v,"id","svc-project"),u(v,"type","text"),u(v,"placeholder","myapp"),v.required=!0,u(v,"class","svelte-2vlpp7"),u(f,"class","form-group svelte-2vlpp7"),u(S,"for","svc-env"),u(S,"class","svelte-2vlpp7"),u(k,"id","svc-env"),u(k,"class","svelte-2vlpp7"),l[2]===void 0&&lt(()=>l[13].call(k)),u(h,"class","form-group svelte-2vlpp7"),u(q,"for","svc-server"),u(q,"class","svelte-2vlpp7"),L.__value="",ee(L,L.__value),u(C,"id","svc-server"),C.required=!0,u(C,"class","svelte-2vlpp7"),l[3]===void 0&&lt(()=>l[14].call(C)),u(A,"class","svelte-2vlpp7"),u(T,"class","form-group svelte-2vlpp7")},m(Q,le){w(Q,e,le),w(Q,t,le),w(Q,n,le),r(n,s),r(s,i),r(s,o),r(s,a),r(a,c);for(let W=0;W<M.length;W+=1)M[W]&&M[W].m(a,null);Pe(a,l[0],!0),r(n,p),r(n,f),r(f,d),r(f,m),r(f,v),ee(v,l[1]),r(n,g),r(n,h),r(h,S),r(h,y),r(h,k);for(let W=0;W<I.length;W+=1)I[W]&&I[W].m(k,null);Pe(k,l[2],!0),r(n,D),r(n,T),r(T,q),r(T,P),r(T,C),r(C,L);for(let W=0;W<H.length;W+=1)H[W]&&H[W].m(C,null);Pe(C,l[3],!0),r(T,O),r(T,A),r(n,j),re(U,n,null),K=!0,V||(F=[Z(a,"change",l[11]),Z(v,"input",l[12]),Z(k,"change",l[13]),Z(C,"change",l[14]),Z(n,"submit",l[9])],V=!0)},p(Q,le){if(le[0]&128){E=me(Q[7]);let X;for(X=0;X<E.length;X+=1){const x=cr(Q,E,X);M[X]?M[X].p(x,le):(M[X]=ur(x),M[X].c(),M[X].m(a,null))}for(;X<M.length;X+=1)M[X].d(1);M.length=E.length}if(le[0]&129&&Pe(a,Q[0]),le[0]&2&&v.value!==Q[1]&&ee(v,Q[1]),le[0]&256){G=me(Q[8]);let X;for(X=0;X<G.length;X+=1){const x=ar(Q,G,X);I[X]?I[X].p(x,le):(I[X]=fr(x),I[X].c(),I[X].m(k,null))}for(;X<I.length;X+=1)I[X].d(1);I.length=G.length}if(le[0]&260&&Pe(k,Q[2]),le[0]&64){J=me(Q[6]||[]);let X;for(X=0;X<J.length;X+=1){const x=rr(Q,J,X);H[X]?H[X].p(x,le):(H[X]=_r(x),H[X].c(),H[X].m(C,null))}for(;X<H.length;X+=1)H[X].d(1);H.length=J.length}le[0]&72&&Pe(C,Q[3]);const W={};le[0]&16&&(W.disabled=Q[4]),le[0]&16|le[1]&2&&(W.$$scope={dirty:le,ctx:Q}),U.$set(W)},i(Q){K||(N(U.$$.fragment,Q),K=!0)},o(Q){R(U.$$.fragment,Q),K=!1},d(Q){Q&&($(e),$(t),$(n)),Re(M,Q),Re(I,Q),Re(H,Q),ae(U),V=!1,He(F)}}}function yp(l){let e;return{c(){e=_("div"),e.innerHTML='<div class="empty-icon svelte-2vlpp7">🗄️</div> <div>Deploy a service to see connection details</div>',u(e,"class","empty-result svelte-2vlpp7")},m(t,n){w(t,e,n)},p:pe,d(t){t&&$(e)}}}function Cp(l){let e,t,n,s,i,o=l[5].service_type+"",a,c,p,f,d,m,v,g,h=(l[5].host||"localhost")+"",S,y,k,D,T,q,P=l[5].port+"",C,L,O,A,j,U,K,V,F,E=l[5].database&&dr(l),M=l[5].username&&mr(l),G=l[5].password&&vr(l),I=l[5].connection_url&&hr(l);return{c(){e=_("div"),t=_("div"),n=_("span"),n.textContent="✅",s=b(),i=_("span"),a=z(o),c=z(" deployed"),p=b(),f=_("div"),d=_("div"),m=_("span"),m.textContent="Host:",v=b(),g=_("code"),S=z(h),y=b(),k=_("div"),D=_("span"),D.textContent="Port:",T=b(),q=_("code"),C=z(P),L=b(),E&&E.c(),O=b(),M&&M.c(),A=b(),G&&G.c(),j=b(),I&&I.c(),U=b(),K=_("small"),K.textContent="Click any value to copy",u(n,"class","result-icon svelte-2vlpp7"),u(i,"class","result-title svelte-2vlpp7"),u(t,"class","result-header svelte-2vlpp7"),u(m,"class","label svelte-2vlpp7"),u(g,"class","value clickable svelte-2vlpp7"),u(d,"class","info-row svelte-2vlpp7"),u(D,"class","label svelte-2vlpp7"),u(q,"class","value clickable svelte-2vlpp7"),u(k,"class","info-row svelte-2vlpp7"),u(f,"class","connection-info svelte-2vlpp7"),u(K,"class","copy-hint svelte-2vlpp7"),u(e,"class","result-content svelte-2vlpp7")},m(J,H){w(J,e,H),r(e,t),r(t,n),r(t,s),r(t,i),r(i,a),r(i,c),r(e,p),r(e,f),r(f,d),r(d,m),r(d,v),r(d,g),r(g,S),r(f,y),r(f,k),r(k,D),r(k,T),r(k,q),r(q,C),r(f,L),E&&E.m(f,null),r(f,O),M&&M.m(f,null),r(f,A),G&&G.m(f,null),r(f,j),I&&I.m(f,null),r(e,U),r(e,K),V||(F=[Z(g,"click",l[15]),Z(q,"click",l[16])],V=!0)},p(J,H){H[0]&32&&o!==(o=J[5].service_type+"")&&B(a,o),H[0]&32&&h!==(h=(J[5].host||"localhost")+"")&&B(S,h),H[0]&32&&P!==(P=J[5].port+"")&&B(C,P),J[5].database?E?E.p(J,H):(E=dr(J),E.c(),E.m(f,O)):E&&(E.d(1),E=null),J[5].username?M?M.p(J,H):(M=mr(J),M.c(),M.m(f,A)):M&&(M.d(1),M=null),J[5].password?G?G.p(J,H):(G=vr(J),G.c(),G.m(f,j)):G&&(G.d(1),G=null),J[5].connection_url?I?I.p(J,H):(I=hr(J),I.c(),I.m(f,null)):I&&(I.d(1),I=null)},d(J){J&&$(e),E&&E.d(),M&&M.d(),G&&G.d(),I&&I.d(),V=!1,He(F)}}}function dr(l){let e,t,n,s,i=l[5].database+"",o,a,c;return{c(){e=_("div"),t=_("span"),t.textContent="Database:",n=b(),s=_("code"),o=z(i),u(t,"class","label svelte-2vlpp7"),u(s,"class","value clickable svelte-2vlpp7"),u(e,"class","info-row svelte-2vlpp7")},m(p,f){w(p,e,f),r(e,t),r(e,n),r(e,s),r(s,o),a||(c=Z(s,"click",l[17]),a=!0)},p(p,f){f[0]&32&&i!==(i=p[5].database+"")&&B(o,i)},d(p){p&&$(e),a=!1,c()}}}function mr(l){let e,t,n,s,i=l[5].username+"",o,a,c;return{c(){e=_("div"),t=_("span"),t.textContent="Username:",n=b(),s=_("code"),o=z(i),u(t,"class","label svelte-2vlpp7"),u(s,"class","value clickable svelte-2vlpp7"),u(e,"class","info-row svelte-2vlpp7")},m(p,f){w(p,e,f),r(e,t),r(e,n),r(e,s),r(s,o),a||(c=Z(s,"click",l[18]),a=!0)},p(p,f){f[0]&32&&i!==(i=p[5].username+"")&&B(o,i)},d(p){p&&$(e),a=!1,c()}}}function vr(l){let e,t,n,s,i=l[5].password+"",o,a,c;return{c(){e=_("div"),t=_("span"),t.textContent="Password:",n=b(),s=_("code"),o=z(i),u(t,"class","label svelte-2vlpp7"),u(s,"class","value clickable svelte-2vlpp7"),u(e,"class","info-row svelte-2vlpp7")},m(p,f){w(p,e,f),r(e,t),r(e,n),r(e,s),r(s,o),a||(c=Z(s,"click",l[19]),a=!0)},p(p,f){f[0]&32&&i!==(i=p[5].password+"")&&B(o,i)},d(p){p&&$(e),a=!1,c()}}}function hr(l){let e,t,n,s,i=l[5].connection_url+"",o,a,c;return{c(){e=_("div"),t=_("span"),t.textContent="Connection URL:",n=b(),s=_("code"),o=z(i),u(t,"class","label svelte-2vlpp7"),u(s,"class","value url clickable svelte-2vlpp7"),u(e,"class","info-row full-width svelte-2vlpp7")},m(p,f){w(p,e,f),r(e,t),r(e,n),r(e,s),r(s,o),a||(c=Z(s,"click",l[20]),a=!0)},p(p,f){f[0]&32&&i!==(i=p[5].connection_url+"")&&B(o,i)},d(p){p&&$(e),a=!1,c()}}}function Sp(l){let e;function t(i,o){return i[5]?Cp:yp}let n=t(l),s=n(l);return{c(){s.c(),e=Ge()},m(i,o){s.m(i,o),w(i,e,o)},p(i,o){n===(n=t(i))&&s?s.p(i,o):(s.d(1),s=n(i),s&&(s.c(),s.m(e.parentNode,e)))},d(i){i&&$(e),s.d(i)}}}function zp(l){let e;return{c(){e=_("div"),e.innerHTML='<div class="feature svelte-2vlpp7"><strong class="svelte-2vlpp7">🔐 Auto Credentials</strong> <p class="svelte-2vlpp7">Deterministic passwords generated from project/env. Same inputs = same password.</p></div> <div class="feature svelte-2vlpp7"><strong class="svelte-2vlpp7">💾 Persistent Storage</strong> <p class="svelte-2vlpp7">Data volumes mounted at /data. Survives container restarts and redeploys.</p></div> <div class="feature svelte-2vlpp7"><strong class="svelte-2vlpp7">🔀 Service Mesh</strong> <p class="svelte-2vlpp7">Nginx proxy on internal ports. Apps connect to localhost:PORT.</p></div> <div class="feature svelte-2vlpp7"><strong class="svelte-2vlpp7">🔧 Auto-Inject</strong> <p class="svelte-2vlpp7">Enable &quot;Auto-inject&quot; in Deploy tab to get DATABASE_URL automatically.</p></div>',u(e,"class","features-grid svelte-2vlpp7")},m(t,n){w(t,e,n)},p:pe,d(t){t&&$(e)}}}function Dp(l){let e,t,n,s,i,o,a,c;return n=new At({props:{title:"🗄️ Deploy Database/Cache",$$slots:{default:[wp]},$$scope:{ctx:l}}}),i=new At({props:{title:"📋 Deployment Result",$$slots:{default:[Sp]},$$scope:{ctx:l}}}),a=new At({props:{title:"ℹ️ How It Works",$$slots:{default:[zp]},$$scope:{ctx:l}}}),{c(){e=_("div"),t=_("div"),ce(n.$$.fragment),s=b(),ce(i.$$.fragment),o=b(),ce(a.$$.fragment),u(t,"class","services-grid svelte-2vlpp7"),u(e,"class","services-page svelte-2vlpp7")},m(p,f){w(p,e,f),r(e,t),re(n,t,null),r(t,s),re(i,t,null),r(e,o),re(a,e,null),c=!0},p(p,f){const d={};f[0]&95|f[1]&2&&(d.$$scope={dirty:f,ctx:p}),n.$set(d);const m={};f[0]&32|f[1]&2&&(m.$$scope={dirty:f,ctx:p}),i.$set(m);const v={};f[1]&2&&(v.$$scope={dirty:f,ctx:p}),a.$set(v)},i(p){c||(N(n.$$.fragment,p),N(i.$$.fragment,p),N(a.$$.fragment,p),c=!0)},o(p){R(n.$$.fragment,p),R(i.$$.fragment,p),R(a.$$.fragment,p),c=!1},d(p){p&&$(e),ae(n),ae(i),ae(a)}}}function Tp(l,e,t){let n;ct(l,xl,O=>t(6,n=O));let s="",i="",o="prod",a="",c=!1,p=null;const f=[{value:"postgres",label:"🐘 PostgreSQL",port:5432},{value:"redis",label:"⚡ Redis",port:6379},{value:"mysql",label:"🐬 MySQL",port:3306},{value:"mongo",label:"🍃 MongoDB",port:27017}],d=["prod","staging","dev"];tn(()=>{m()});async function m(){try{const O=await Oe("GET","/infra/servers");xl.set(O.servers||O||[])}catch(O){console.error("Failed to load servers:",O)}}async function v(O){if(O.preventDefault(),!s||!i||!a){be.error("Please fill in all required fields");return}t(4,c=!0),t(5,p=null);try{be.error("Service deployment not yet implemented. Use Deploy tab instead.");return}catch(A){be.error("Deployment failed: "+A.message)}finally{t(4,c=!1)}}function g(O){navigator.clipboard.writeText(O),be.success("Copied to clipboard")}function h(){s=St(this),t(0,s),t(7,f)}function S(){i=this.value,t(1,i)}function y(){o=St(this),t(2,o),t(8,d)}function k(){a=St(this),t(3,a)}return[s,i,o,a,c,p,n,f,d,v,g,h,S,y,k,()=>g(p.host||"localhost"),()=>g(String(p.port)),()=>g(p.database),()=>g(p.username),()=>g(p.password),()=>g(p.connection_url)]}class qp extends Pt{constructor(e){super(),Et(this,e,Tp,Dp,zt,{},null,[-1,-1])}}const{Boolean:Ep}=Br;function gr(l,e,t){const n=l.slice();return n[32]=e[t],n}function Pp(l){let e,t,n,s,i,o,a,c,p,f;return{c(){e=_("div"),t=_("label"),t.textContent="Theme",n=b(),s=_("select"),i=_("option"),i.textContent="🌙 Dark (Space)",o=_("option"),o.textContent="☀️ Light",a=b(),c=_("p"),c.textContent="Theme preference is saved to your browser.",u(t,"for","theme-select"),u(t,"class","svelte-16vnl3x"),i.__value="dark",ee(i,i.__value),o.__value="light",ee(o,o.__value),u(s,"id","theme-select"),u(s,"class","svelte-16vnl3x"),l[14]===void 0&&lt(()=>l[21].call(s)),u(e,"class","form-group svelte-16vnl3x"),u(c,"class","hint svelte-16vnl3x")},m(d,m){w(d,e,m),r(e,t),r(e,n),r(e,s),r(s,i),r(s,o),Pe(s,l[14],!0),w(d,a,m),w(d,c,m),p||(f=[Z(s,"change",l[21]),Z(s,"change",l[22])],p=!0)},p(d,m){m[0]&16384&&Pe(s,d[14])},d(d){d&&($(e),$(a),$(c)),p=!1,He(f)}}}function Np(l){let e;return{c(){e=z("Save Token")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Lp(l){let e,t;return e=new Je({props:{variant:"danger",$$slots:{default:[Ap]},$$scope:{ctx:l}}}),{c(){ce(e.$$.fragment)},m(n,s){re(e,n,s),t=!0},p(n,s){const i={};s[1]&16&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){ae(e,n)}}}function Mp(l){let e,t;return e=new Je({props:{variant:"warning",$$slots:{default:[Op]},$$scope:{ctx:l}}}),{c(){ce(e.$$.fragment)},m(n,s){re(e,n,s),t=!0},p(n,s){const i={};s[1]&16&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){ae(e,n)}}}function Rp(l){let e,t,n,s,i;return e=new Je({props:{variant:"success",$$slots:{default:[jp]},$$scope:{ctx:l}}}),{c(){ce(e.$$.fragment),t=b(),n=_("span"),s=z(l[0]),u(n,"class","token-preview svelte-16vnl3x")},m(o,a){re(e,o,a),w(o,t,a),w(o,n,a),r(n,s),i=!0},p(o,a){const c={};a[1]&16&&(c.$$scope={dirty:a,ctx:o}),e.$set(c),(!i||a[0]&1)&&B(s,o[0])},i(o){i||(N(e.$$.fragment,o),i=!0)},o(o){R(e.$$.fragment,o),i=!1},d(o){o&&($(t),$(n)),ae(e,o)}}}function Ap(l){let e;return{c(){e=z("Invalid token")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Op(l){let e;return{c(){e=z("Not configured")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function jp(l){let e;return{c(){e=z("✓ Connected")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Fp(l){let e,t,n,s,i,o,a,c,p,f,d,m,v,g,h;c=new je({props:{variant:"primary",type:"submit",$$slots:{default:[Np]},$$scope:{ctx:l}}});const S=[Rp,Mp,Lp],y=[];function k(D,T){var q,P;return(q=D[1])!=null&&q.valid?0:(P=D[1])!=null&&P.missing?1:2}return d=k(l),m=y[d]=S[d](l),{c(){e=_("p"),e.innerHTML=`Get your token from 
      <a href="https://cloud.digitalocean.com/account/api/tokens" target="_blank" class="svelte-16vnl3x">DO Control Panel</a>.`,t=b(),n=_("div"),n.innerHTML='<div class="info-title svelte-16vnl3x">🔒 Browser Storage</div> <div class="info-text svelte-16vnl3x">Token stored in browser cookie. Passed with each API request. Never stored on server.</div>',s=b(),i=_("form"),o=_("div"),o.innerHTML='<label for="do-token" class="svelte-16vnl3x">DigitalOcean API Token</label> <input id="do-token" type="password" placeholder="dop_v1_xxxxx" class="svelte-16vnl3x"/>',a=b(),ce(c.$$.fragment),p=b(),f=_("div"),m.c(),u(e,"class","description svelte-16vnl3x"),u(n,"class","info-box svelte-16vnl3x"),u(o,"class","form-group svelte-16vnl3x"),u(f,"class","token-status svelte-16vnl3x")},m(D,T){w(D,e,T),w(D,t,T),w(D,n,T),w(D,s,T),w(D,i,T),r(i,o),r(i,a),re(c,i,null),w(D,p,T),w(D,f,T),y[d].m(f,null),v=!0,g||(h=Z(i,"submit",l[15]),g=!0)},p(D,T){const q={};T[1]&16&&(q.$$scope={dirty:T,ctx:D}),c.$set(q);let P=d;d=k(D),d===P?y[d].p(D,T):(De(),R(y[P],1,1,()=>{y[P]=null}),Te(),m=y[d],m?m.p(D,T):(m=y[d]=S[d](D),m.c()),N(m,1),m.m(f,null))},i(D){v||(N(c.$$.fragment,D),N(m),v=!0)},o(D){R(c.$$.fragment,D),R(m),v=!1},d(D){D&&($(e),$(t),$(n),$(s),$(i),$(p),$(f)),ae(c),y[d].d(),g=!1,h()}}}function Ip(l){let e;return{c(){e=z("Save Token")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Bp(l){let e,t;return e=new Je({props:{variant:"warning",$$slots:{default:[Hp]},$$scope:{ctx:l}}}),{c(){ce(e.$$.fragment)},m(n,s){re(e,n,s),t=!0},p(n,s){const i={};s[1]&16&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){ae(e,n)}}}function Up(l){let e,t,n,s,i;return e=new Je({props:{variant:"success",$$slots:{default:[Gp]},$$scope:{ctx:l}}}),{c(){ce(e.$$.fragment),t=b(),n=_("span"),s=z(l[2]),u(n,"class","token-preview svelte-16vnl3x")},m(o,a){re(e,o,a),w(o,t,a),w(o,n,a),r(n,s),i=!0},p(o,a){const c={};a[1]&16&&(c.$$scope={dirty:a,ctx:o}),e.$set(c),(!i||a[0]&4)&&B(s,o[2])},i(o){i||(N(e.$$.fragment,o),i=!0)},o(o){R(e.$$.fragment,o),i=!1},d(o){o&&($(t),$(n)),ae(e,o)}}}function Hp(l){let e;return{c(){e=z("Not configured")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Gp(l){let e;return{c(){e=z("✓ Connected")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Wp(l){let e,t,n,s,i,o,a,c,p,f,d,m,v;o=new je({props:{variant:"primary",type:"submit",$$slots:{default:[Ip]},$$scope:{ctx:l}}});const g=[Up,Bp],h=[];function S(y,k){var D;return(D=y[3])!=null&&D.valid?0:1}return p=S(l),f=h[p]=g[p](l),{c(){e=_("p"),e.innerHTML=`Get your token from 
      <a href="https://dash.cloudflare.com/profile/api-tokens" target="_blank" class="svelte-16vnl3x">Cloudflare Dashboard</a>.`,t=b(),n=_("form"),s=_("div"),s.innerHTML='<label for="cf-token" class="svelte-16vnl3x">Cloudflare API Token</label> <input id="cf-token" type="password" placeholder="xxxxx" class="svelte-16vnl3x"/>',i=b(),ce(o.$$.fragment),a=b(),c=_("div"),f.c(),u(e,"class","description svelte-16vnl3x"),u(s,"class","form-group svelte-16vnl3x"),u(c,"class","token-status svelte-16vnl3x")},m(y,k){w(y,e,k),w(y,t,k),w(y,n,k),r(n,s),r(n,i),re(o,n,null),w(y,a,k),w(y,c,k),h[p].m(c,null),d=!0,m||(v=Z(n,"submit",l[16]),m=!0)},p(y,k){const D={};k[1]&16&&(D.$$scope={dirty:k,ctx:y}),o.$set(D);let T=p;p=S(y),p===T?h[p].p(y,k):(De(),R(h[T],1,1,()=>{h[T]=null}),Te(),f=h[p],f?f.p(y,k):(f=h[p]=g[p](y),f.c()),N(f,1),f.m(c,null))},i(y){d||(N(o.$$.fragment,y),N(f),d=!0)},o(y){R(o.$$.fragment,y),R(f),d=!1},d(y){y&&($(e),$(t),$(n),$(a),$(c)),ae(o),h[p].d(),m=!1,v()}}}function Vp(l){let e;return{c(){e=z("Setup Domain")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function br(l){let e,t=l[7].message+"",n;return{c(){e=_("div"),n=z(t),u(e,"class","result svelte-16vnl3x"),Ce(e,"success",l[7].success),Ce(e,"error",!l[7].success)},m(s,i){w(s,e,i),r(e,n)},p(s,i){i[0]&128&&t!==(t=s[7].message+"")&&B(n,t),i[0]&128&&Ce(e,"success",s[7].success),i[0]&128&&Ce(e,"error",!s[7].success)},d(s){s&&$(e)}}}function Jp(l){let e,t,n,s,i,o,a,c,p,f,d,m,v,g,h,S,y,k,D,T,q,P,C,L;D=new je({props:{variant:"primary",type:"submit",$$slots:{default:[Vp]},$$scope:{ctx:l}}});let O=l[7]&&br(l);return{c(){e=_("p"),e.textContent='Point a domain to your server. With "Proxied" enabled, HTTPS works automatically.',t=b(),n=_("form"),s=_("div"),i=_("label"),i.textContent="Domain",o=b(),a=_("input"),c=b(),p=_("div"),f=_("label"),f.textContent="Server IP",d=b(),m=_("input"),v=b(),g=_("label"),h=_("input"),S=z(`
        Proxied (Cloudflare handles SSL)`),y=b(),k=_("div"),ce(D.$$.fragment),T=b(),O&&O.c(),q=Ge(),u(e,"class","description svelte-16vnl3x"),u(i,"for","domain-name"),u(i,"class","svelte-16vnl3x"),u(a,"id","domain-name"),u(a,"type","text"),u(a,"placeholder","api.example.com"),a.required=!0,u(a,"class","svelte-16vnl3x"),u(s,"class","form-group svelte-16vnl3x"),u(f,"for","domain-ip"),u(f,"class","svelte-16vnl3x"),u(m,"id","domain-ip"),u(m,"type","text"),u(m,"placeholder","1.2.3.4"),m.required=!0,u(m,"class","svelte-16vnl3x"),u(p,"class","form-group svelte-16vnl3x"),u(h,"type","checkbox"),u(h,"class","svelte-16vnl3x"),u(g,"class","checkbox-label svelte-16vnl3x"),u(k,"class","form-actions svelte-16vnl3x")},m(A,j){w(A,e,j),w(A,t,j),w(A,n,j),r(n,s),r(s,i),r(s,o),r(s,a),ee(a,l[4]),r(n,c),r(n,p),r(p,f),r(p,d),r(p,m),ee(m,l[5]),r(n,v),r(n,g),r(g,h),h.checked=l[6],r(g,S),r(n,y),r(n,k),re(D,k,null),w(A,T,j),O&&O.m(A,j),w(A,q,j),P=!0,C||(L=[Z(a,"input",l[23]),Z(m,"input",l[24]),Z(h,"change",l[25]),Z(n,"submit",l[17])],C=!0)},p(A,j){j[0]&16&&a.value!==A[4]&&ee(a,A[4]),j[0]&32&&m.value!==A[5]&&ee(m,A[5]),j[0]&64&&(h.checked=A[6]);const U={};j[1]&16&&(U.$$scope={dirty:j,ctx:A}),D.$set(U),A[7]?O?O.p(A,j):(O=br(A),O.c(),O.m(q.parentNode,q)):O&&(O.d(1),O=null)},i(A){P||(N(D.$$.fragment,A),P=!0)},o(A){R(D.$$.fragment,A),P=!1},d(A){A&&($(e),$(t),$(n),$(T),$(q)),ae(D),O&&O.d(A),C=!1,He(L)}}}function Kp(l){let e;return{c(){e=z("Setup DNS Round-Robin")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function kr(l){let e,t=l[11].message+"",n;return{c(){e=_("div"),n=z(t),u(e,"class","result svelte-16vnl3x"),Ce(e,"success",l[11].success),Ce(e,"error",!l[11].success)},m(s,i){w(s,e,i),r(e,n)},p(s,i){i[0]&2048&&t!==(t=s[11].message+"")&&B(n,t),i[0]&2048&&Ce(e,"success",s[11].success),i[0]&2048&&Ce(e,"error",!s[11].success)},d(s){s&&$(e)}}}function Yp(l){let e,t,n,s,i,o,a,c,p,f,d,m,v,g,h,S,y,k,D,T,q,P,C,L;D=new je({props:{variant:"primary",type:"submit",$$slots:{default:[Kp]},$$scope:{ctx:l}}});let O=l[11]&&kr(l);return{c(){e=_("p"),e.innerHTML=`Simple load distribution via multiple A records. Cloudflare rotates between IPs at DNS level.
      <strong>FREE</strong>, but no health checks.`,t=b(),n=_("form"),s=_("div"),i=_("label"),i.textContent="Domain",o=b(),a=_("input"),c=b(),p=_("div"),f=_("label"),f.textContent="Server IPs (comma-separated)",d=b(),m=_("input"),v=b(),g=_("label"),h=_("input"),S=z(`
        Proxied (SSL + CDN)`),y=b(),k=_("div"),ce(D.$$.fragment),T=b(),O&&O.c(),q=Ge(),u(e,"class","description svelte-16vnl3x"),u(i,"for","lb-domain"),u(i,"class","svelte-16vnl3x"),u(a,"id","lb-domain"),u(a,"type","text"),u(a,"placeholder","api.example.com"),a.required=!0,u(a,"class","svelte-16vnl3x"),u(s,"class","form-group svelte-16vnl3x"),u(f,"for","lb-ips"),u(f,"class","svelte-16vnl3x"),u(m,"id","lb-ips"),u(m,"type","text"),u(m,"placeholder","1.2.3.4, 5.6.7.8"),m.required=!0,u(m,"class","svelte-16vnl3x"),u(p,"class","form-group svelte-16vnl3x"),u(h,"type","checkbox"),u(h,"class","svelte-16vnl3x"),u(g,"class","checkbox-label svelte-16vnl3x"),u(k,"class","form-actions svelte-16vnl3x")},m(A,j){w(A,e,j),w(A,t,j),w(A,n,j),r(n,s),r(s,i),r(s,o),r(s,a),ee(a,l[8]),r(n,c),r(n,p),r(p,f),r(p,d),r(p,m),ee(m,l[9]),r(n,v),r(n,g),r(g,h),h.checked=l[10],r(g,S),r(n,y),r(n,k),re(D,k,null),w(A,T,j),O&&O.m(A,j),w(A,q,j),P=!0,C||(L=[Z(a,"input",l[26]),Z(m,"input",l[27]),Z(h,"change",l[28]),Z(n,"submit",l[18])],C=!0)},p(A,j){j[0]&256&&a.value!==A[8]&&ee(a,A[8]),j[0]&512&&m.value!==A[9]&&ee(m,A[9]),j[0]&1024&&(h.checked=A[10]);const U={};j[1]&16&&(U.$$scope={dirty:j,ctx:A}),D.$set(U),A[11]?O?O.p(A,j):(O=kr(A),O.c(),O.m(q.parentNode,q)):O&&(O.d(1),O=null)},i(A){P||(N(D.$$.fragment,A),P=!0)},o(A){R(D.$$.fragment,A),P=!1},d(A){A&&($(e),$(t),$(n),$(T),$(q)),ae(D),O&&O.d(A),C=!1,He(L)}}}function Qp(l){let e,t,n=me(l[12]),s=[];for(let o=0;o<n.length;o+=1)s[o]=$r(gr(l,n,o));const i=o=>R(s[o],1,1,()=>{s[o]=null});return{c(){e=_("div");for(let o=0;o<s.length;o+=1)s[o].c();u(e,"class","task-list svelte-16vnl3x")},m(o,a){w(o,e,a);for(let c=0;c<s.length;c+=1)s[c]&&s[c].m(e,null);t=!0},p(o,a){if(a[0]&1052672){n=me(o[12]);let c;for(c=0;c<n.length;c+=1){const p=gr(o,n,c);s[c]?(s[c].p(p,a),N(s[c],1)):(s[c]=$r(p),s[c].c(),N(s[c],1),s[c].m(e,null))}for(De(),c=n.length;c<s.length;c+=1)i(c);Te()}},i(o){if(!t){for(let a=0;a<n.length;a+=1)N(s[a]);t=!0}},o(o){s=s.filter(Ep);for(let a=0;a<s.length;a+=1)R(s[a]);t=!1},d(o){o&&$(e),Re(s,o)}}}function Zp(l){let e;return{c(){e=_("div"),e.textContent="No scheduled tasks",u(e,"class","empty-state svelte-16vnl3x")},m(t,n){w(t,e,n)},p:pe,i:pe,o:pe,d(t){t&&$(e)}}}function Xp(l){let e;return{c(){e=_("div"),e.textContent="Loading tasks...",u(e,"class","empty-state svelte-16vnl3x")},m(t,n){w(t,e,n)},p:pe,i:pe,o:pe,d(t){t&&$(e)}}}function xp(l){let e=l[32].type+"",t;return{c(){t=z(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&4096&&e!==(e=n[32].type+"")&&B(t,e)},d(n){n&&$(t)}}}function e_(l){let e;return{c(){e=z("🗑️")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function $r(l){let e,t,n,s=l[32].name+"",i,o,a,c,p,f,d,m=l[32].interval+"",v,g,h,S,y,k;c=new Je({props:{variant:"info",$$slots:{default:[xp]},$$scope:{ctx:l}}});function D(){return l[29](l[32])}return S=new je({props:{variant:"danger",size:"sm",$$slots:{default:[e_]},$$scope:{ctx:l}}}),S.$on("click",D),{c(){e=_("div"),t=_("div"),n=_("div"),i=z(s),o=b(),a=_("div"),ce(c.$$.fragment),p=b(),f=_("span"),d=z("Every "),v=z(m),g=z(" min"),h=b(),ce(S.$$.fragment),y=b(),u(n,"class","task-name svelte-16vnl3x"),u(a,"class","task-meta svelte-16vnl3x"),u(t,"class","task-info"),u(e,"class","task-item svelte-16vnl3x")},m(T,q){w(T,e,q),r(e,t),r(t,n),r(n,i),r(t,o),r(t,a),re(c,a,null),r(a,p),r(a,f),r(f,d),r(f,v),r(f,g),r(e,h),re(S,e,null),r(e,y),k=!0},p(T,q){l=T,(!k||q[0]&4096)&&s!==(s=l[32].name+"")&&B(i,s);const P={};q[0]&4096|q[1]&16&&(P.$$scope={dirty:q,ctx:l}),c.$set(P),(!k||q[0]&4096)&&m!==(m=l[32].interval+"")&&B(v,m);const C={};q[1]&16&&(C.$$scope={dirty:q,ctx:l}),S.$set(C)},i(T){k||(N(c.$$.fragment,T),N(S.$$.fragment,T),k=!0)},o(T){R(c.$$.fragment,T),R(S.$$.fragment,T),k=!1},d(T){T&&$(e),ae(c),ae(S)}}}function t_(l){let e,t,n,s,i,o;const a=[Xp,Zp,Qp],c=[];function p(f,d){return f[13]?0:f[12].length===0?1:2}return n=p(l),s=c[n]=a[n](l),{c(){e=_("p"),e.textContent="Schedule recurring tasks like health checks, auto-restart, and backups.",t=b(),s.c(),i=Ge(),u(e,"class","description svelte-16vnl3x")},m(f,d){w(f,e,d),w(f,t,d),c[n].m(f,d),w(f,i,d),o=!0},p(f,d){let m=n;n=p(f),n===m?c[n].p(f,d):(De(),R(c[m],1,1,()=>{c[m]=null}),Te(),s=c[n],s?s.p(f,d):(s=c[n]=a[n](f),s.c()),N(s,1),s.m(i.parentNode,i))},i(f){o||(N(s),o=!0)},o(f){R(s),o=!1},d(f){f&&($(e),$(t),$(i)),c[n].d(f)}}}function l_(l){let e;return{c(){e=z("↻ Refresh")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function n_(l){let e,t;return e=new je({props:{slot:"header",variant:"ghost",size:"sm",$$slots:{default:[l_]},$$scope:{ctx:l}}}),e.$on("click",l[19]),{c(){ce(e.$$.fragment)},m(n,s){re(e,n,s),t=!0},p(n,s){const i={};s[1]&16&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){ae(e,n)}}}function s_(l){let e,t,n,s,i,o,a,c,p,f,d,m,v;return t=new At({props:{title:"🎨 Appearance",$$slots:{default:[Pp]},$$scope:{ctx:l}}}),s=new At({props:{title:"⚙️ DigitalOcean Credentials",$$slots:{default:[Fp]},$$scope:{ctx:l}}}),o=new At({props:{title:"☁️ Cloudflare Credentials",$$slots:{default:[Wp]},$$scope:{ctx:l}}}),c=new At({props:{title:"🌐 Domain Setup",$$slots:{default:[Jp]},$$scope:{ctx:l}}}),f=new At({props:{title:"🌐 DNS Round-Robin (Cloudflare)",$$slots:{default:[Yp]},$$scope:{ctx:l}}}),m=new At({props:{title:"⏰ Task Scheduler",$$slots:{header:[n_],default:[t_]},$$scope:{ctx:l}}}),{c(){e=_("div"),ce(t.$$.fragment),n=b(),ce(s.$$.fragment),i=b(),ce(o.$$.fragment),a=b(),ce(c.$$.fragment),p=b(),ce(f.$$.fragment),d=b(),ce(m.$$.fragment),u(e,"class","settings-page svelte-16vnl3x")},m(g,h){w(g,e,h),re(t,e,null),r(e,n),re(s,e,null),r(e,i),re(o,e,null),r(e,a),re(c,e,null),r(e,p),re(f,e,null),r(e,d),re(m,e,null),v=!0},p(g,h){const S={};h[0]&16384|h[1]&16&&(S.$$scope={dirty:h,ctx:g}),t.$set(S);const y={};h[0]&3|h[1]&16&&(y.$$scope={dirty:h,ctx:g}),s.$set(y);const k={};h[0]&12|h[1]&16&&(k.$$scope={dirty:h,ctx:g}),o.$set(k);const D={};h[0]&240|h[1]&16&&(D.$$scope={dirty:h,ctx:g}),c.$set(D);const T={};h[0]&3840|h[1]&16&&(T.$$scope={dirty:h,ctx:g}),f.$set(T);const q={};h[0]&12288|h[1]&16&&(q.$$scope={dirty:h,ctx:g}),m.$set(q)},i(g){v||(N(t.$$.fragment,g),N(s.$$.fragment,g),N(o.$$.fragment,g),N(c.$$.fragment,g),N(f.$$.fragment,g),N(m.$$.fragment,g),v=!0)},o(g){R(t.$$.fragment,g),R(s.$$.fragment,g),R(o.$$.fragment,g),R(c.$$.fragment,g),R(f.$$.fragment,g),R(m.$$.fragment,g),v=!1},d(g){g&&$(e),ae(t),ae(s),ae(o),ae(c),ae(f),ae(m)}}}function o_(l,e,t){let n;ct(l,zn,I=>t(14,n=I));let s="",i=null,o="",a=null,c="",p="",f=!0,d=null,m="",v="",g=!0,h=null,S=[],y=!1;tn(()=>{k(),D(),L()});async function k(){const I=dl();if(I){t(0,s=I.substring(0,10)+"...");try{await Oe("GET","/infra/snapshots"),t(1,i={valid:!0})}catch{t(1,i={valid:!1})}}else t(1,i={valid:!1,missing:!0})}async function D(){const I=qn();I?(t(2,o=I.substring(0,10)+"..."),t(3,a={valid:!0})):t(3,a={valid:!1,missing:!0})}async function T(I){I.preventDefault();const J=I.target.querySelector("input"),H=J.value;if(!H){be.error("Token is required");return}Ia(H),J.value="",be.success("DigitalOcean token saved"),await k(),$l.refresh(),On.refresh(),yn.refresh(),Al.refresh()}async function q(I){I.preventDefault();const J=I.target.querySelector("input"),H=J.value;if(!H){be.error("Token is required");return}Ba(H),J.value="",be.success("Cloudflare token saved"),await D()}async function P(I){I.preventDefault();try{const J=await Oe("POST","/infra/cloudflare/domain",{domain:c,ip:p,proxied:f});t(7,d={success:!0,message:"Domain configured successfully"}),be.success("Domain setup complete")}catch(J){t(7,d={success:!1,message:J.message}),be.error(J.message)}}async function C(I){I.preventDefault();try{const J=v.split(",").map(Q=>Q.trim()).filter(Boolean),H=await Oe("POST","/infra/cloudflare/lb",{domain:m,server_ips:J,proxied:g});t(11,h={success:!0,message:`Created load balancer with ${J.length} servers`}),be.success("Load balancer configured")}catch(J){t(11,h={success:!1,message:J.message}),be.error(J.message)}}async function L(){t(13,y=!0);try{const I=await Oe("GET","/infra/scheduler/tasks");t(12,S=I.tasks||I||[])}catch{t(12,S=[])}finally{t(13,y=!1)}}async function O(I){if(confirm("Delete this scheduled task?"))try{await Oe("DELETE",`/infra/scheduler/tasks/${I}`),be.success("Task deleted"),await L()}catch(J){be.error(J.message)}}function A(){n=St(this),zn.set(n)}const j=()=>zn.set(n);function U(){c=this.value,t(4,c)}function K(){p=this.value,t(5,p)}function V(){f=this.checked,t(6,f)}function F(){m=this.value,t(8,m)}function E(){v=this.value,t(9,v)}function M(){g=this.checked,t(10,g)}return[s,i,o,a,c,p,f,d,m,v,g,h,S,y,n,T,q,P,C,L,O,A,j,U,K,V,F,E,M,I=>O(I.id)]}class i_ extends Pt{constructor(e){super(),Et(this,e,o_,s_,zt,{},null,[-1,-1])}}function wr(l,e,t){const n=l.slice();n[21]=e[t];const s=n[1].filter(function(...c){return l[17](n[21],...c)});n[22]=s;const i=n[21].domain;n[23]=i;const o=n[22].length>1;return n[24]=o,n}function yr(l,e,t){const n=l.slice();return n[27]=e[t],n}function Cr(l,e,t){const n=l.slice();return n[21]=e[t],n}function Sr(l,e,t){const n=l.slice();return n[32]=e[t],n}function r_(l){let e,t,n,s,i,o,a,c,p,f,d,m,v,g,h,S,y,k,D=l[1].length+"",T,q,P,C,L,O,A,j,U=l[7].length+"",K,V,F,E;const M=[p_,f_],G=[];function I(J,H){return J[11]?1:0}return m=I(l),v=G[m]=M[m](l),{c(){e=_("div"),t=_("div"),n=_("div"),n.innerHTML='<span class="summary-icon svelte-odhywp">🔀</span> <span>Nginx Sidecar</span>',s=b(),i=_("div"),o=z(l[3]),a=z("/"),c=z(l[2]),p=b(),f=_("div"),f.textContent="servers with nginx",d=b(),v.c(),g=b(),h=_("div"),S=_("div"),S.innerHTML='<span class="summary-icon svelte-odhywp">🤖</span> <span>Node Agents</span>',y=b(),k=_("div"),T=z(D),q=b(),P=_("div"),P.textContent="servers monitored",C=b(),L=_("div"),O=_("div"),O.innerHTML='<span class="summary-icon svelte-odhywp">📦</span> <span>Services</span>',A=b(),j=_("div"),K=z(U),V=b(),F=_("div"),F.textContent="deployed services",u(n,"class","summary-header svelte-odhywp"),u(i,"class","summary-value svelte-odhywp"),u(f,"class","summary-label svelte-odhywp"),u(t,"class","summary-card svelte-odhywp"),Ce(t,"ok",l[11]),Ce(t,"warn",!l[11]),u(S,"class","summary-header svelte-odhywp"),u(k,"class","summary-value svelte-odhywp"),u(P,"class","summary-label svelte-odhywp"),u(h,"class","summary-card info svelte-odhywp"),u(O,"class","summary-header svelte-odhywp"),u(j,"class","summary-value svelte-odhywp"),u(F,"class","summary-label svelte-odhywp"),u(L,"class","summary-card info svelte-odhywp"),u(e,"class","summary-grid svelte-odhywp")},m(J,H){w(J,e,H),r(e,t),r(t,n),r(t,s),r(t,i),r(i,o),r(i,a),r(i,c),r(t,p),r(t,f),r(t,d),G[m].m(t,null),r(e,g),r(e,h),r(h,S),r(h,y),r(h,k),r(k,T),r(h,q),r(h,P),r(e,C),r(e,L),r(L,O),r(L,A),r(L,j),r(j,K),r(L,V),r(L,F),E=!0},p(J,H){(!E||H[0]&8)&&B(o,J[3]),(!E||H[0]&4)&&B(c,J[2]);let Q=m;m=I(J),m===Q?G[m].p(J,H):(De(),R(G[Q],1,1,()=>{G[Q]=null}),Te(),v=G[m],v?v.p(J,H):(v=G[m]=M[m](J),v.c()),N(v,1),v.m(t,null)),(!E||H[0]&2048)&&Ce(t,"ok",J[11]),(!E||H[0]&2048)&&Ce(t,"warn",!J[11]),(!E||H[0]&2)&&D!==(D=J[1].length+"")&&B(T,D),(!E||H[0]&128)&&U!==(U=J[7].length+"")&&B(K,U)},i(J){E||(N(v),E=!0)},o(J){R(v),E=!1},d(J){J&&$(e),G[m].d()}}}function a_(l){let e;return{c(){e=_("div"),e.innerHTML='<p>No services deployed yet</p> <p class="hint svelte-odhywp">Deploy your first service to see the architecture</p>',u(e,"class","empty-state svelte-odhywp")},m(t,n){w(t,e,n)},p:pe,i:pe,o:pe,d(t){t&&$(e)}}}function c_(l){let e,t,n,s,i,o;return{c(){e=_("div"),t=_("p"),n=z("Failed to load: "),s=z(l[9]),i=b(),o=_("p"),o.textContent="Check your connection and try refreshing",u(o,"class","hint svelte-odhywp"),u(e,"class","empty-state svelte-odhywp")},m(a,c){w(a,e,c),r(e,t),r(t,n),r(t,s),r(e,i),r(e,o)},p(a,c){c[0]&512&&B(s,a[9])},i:pe,o:pe,d(a){a&&$(e)}}}function u_(l){let e;return{c(){e=_("div"),e.textContent="Loading architecture...",u(e,"class","empty-state svelte-odhywp")},m(t,n){w(t,e,n)},p:pe,i:pe,o:pe,d(t){t&&$(e)}}}function f_(l){let e;return{c(){e=_("div"),e.textContent="✅ All servers OK",u(e,"class","summary-ok svelte-odhywp")},m(t,n){w(t,e,n)},p:pe,i:pe,o:pe,d(t){t&&$(e)}}}function p_(l){let e,t;return e=new je({props:{variant:"warning",size:"sm",$$slots:{default:[__]},$$scope:{ctx:l}}}),e.$on("click",l[13]),{c(){ce(e.$$.fragment)},m(n,s){re(e,n,s),t=!0},p(n,s){const i={};s[0]&12|s[1]&16&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){ae(e,n)}}}function __(l){let e,t=l[2]-l[3]+"",n,s;return{c(){e=z("🔧 Fix "),n=z(t),s=z(" server(s)")},m(i,o){w(i,e,o),w(i,n,o),w(i,s,o)},p(i,o){o[0]&12&&t!==(t=i[2]-i[3]+"")&&B(n,t)},d(i){i&&($(e),$(n),$(s))}}}function d_(l){let e,t,n,s;const i=[u_,c_,a_,r_],o=[];function a(c,p){return c[6]&&!c[10]?0:c[9]?1:c[7].length===0&&c[1].length===0?2:3}return e=a(l),t=o[e]=i[e](l),{c(){t.c(),n=Ge()},m(c,p){o[e].m(c,p),w(c,n,p),s=!0},p(c,p){let f=e;e=a(c),e===f?o[e].p(c,p):(De(),R(o[f],1,1,()=>{o[f]=null}),Te(),t=o[e],t?t.p(c,p):(t=o[e]=i[e](c),t.c()),N(t,1),t.m(n.parentNode,n))},i(c){s||(N(t),s=!0)},o(c){R(t),s=!1},d(c){c&&$(n),o[e].d(c)}}}function zr(l){let e,t=l[32]+"",n,s;return{c(){e=_("option"),n=z(t),e.__value=s=l[32],ee(e,e.__value)},m(i,o){w(i,e,o),r(e,n)},p(i,o){o[0]&4096&&t!==(t=i[32]+"")&&B(n,t),o[0]&4096&&s!==(s=i[32])&&(e.__value=s,ee(e,e.__value))},d(i){i&&$(e)}}}function Dr(l){let e,t,n=Lr(l[8])+"",s;return{c(){e=_("span"),t=z("Updated "),s=z(n),u(e,"class","last-updated svelte-odhywp")},m(i,o){w(i,e,o),r(e,t),r(e,s)},p(i,o){o[0]&256&&n!==(n=Lr(i[8])+"")&&B(s,n)},d(i){i&&$(e)}}}function m_(l){let e;return{c(){e=z("↻ Refresh")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function v_(l){let e,t,n,s,i,o,a,c,p,f,d,m,v,g,h,S=me(l[12]||[]),y=[];for(let D=0;D<S.length;D+=1)y[D]=zr(Sr(l,S,D));let k=l[8]&&Dr(l);return m=new je({props:{variant:"ghost",size:"sm",$$slots:{default:[m_]},$$scope:{ctx:l}}}),m.$on("click",l[0]),{c(){e=_("div"),t=_("select"),n=_("option"),n.textContent="All Projects";for(let D=0;D<y.length;D+=1)y[D].c();s=b(),i=_("select"),o=_("option"),o.textContent="All Envs",a=_("option"),a.textContent="prod",c=_("option"),c.textContent="staging",p=_("option"),p.textContent="dev",f=b(),k&&k.c(),d=b(),ce(m.$$.fragment),n.__value="",ee(n,n.__value),u(t,"class","svelte-odhywp"),l[4]===void 0&&lt(()=>l[15].call(t)),o.__value="",ee(o,o.__value),a.__value="prod",ee(a,a.__value),c.__value="staging",ee(c,c.__value),p.__value="dev",ee(p,p.__value),u(i,"class","svelte-odhywp"),l[5]===void 0&&lt(()=>l[16].call(i)),u(e,"slot","header"),u(e,"class","filters svelte-odhywp")},m(D,T){w(D,e,T),r(e,t),r(t,n);for(let q=0;q<y.length;q+=1)y[q]&&y[q].m(t,null);Pe(t,l[4],!0),r(e,s),r(e,i),r(i,o),r(i,a),r(i,c),r(i,p),Pe(i,l[5],!0),r(e,f),k&&k.m(e,null),r(e,d),re(m,e,null),v=!0,g||(h=[Z(t,"change",l[15]),Z(t,"change",l[14]),Z(i,"change",l[16]),Z(i,"change",l[14])],g=!0)},p(D,T){if(T[0]&4096){S=me(D[12]||[]);let P;for(P=0;P<S.length;P+=1){const C=Sr(D,S,P);y[P]?y[P].p(C,T):(y[P]=zr(C),y[P].c(),y[P].m(t,null))}for(;P<y.length;P+=1)y[P].d(1);y.length=S.length}T[0]&4112&&Pe(t,D[4]),T[0]&32&&Pe(i,D[5]),D[8]?k?k.p(D,T):(k=Dr(D),k.c(),k.m(e,d)):k&&(k.d(1),k=null);const q={};T[1]&16&&(q.$$scope={dirty:T,ctx:D}),m.$set(q)},i(D){v||(N(m.$$.fragment,D),v=!0)},o(D){R(m.$$.fragment,D),v=!1},d(D){D&&$(e),Re(y,D),k&&k.d(),ae(m),g=!1,He(h)}}}function h_(l){let e,t,n=me(l[7]),s=[];for(let o=0;o<n.length;o+=1)s[o]=Tr(Cr(l,n,o));const i=o=>R(s[o],1,1,()=>{s[o]=null});return{c(){e=_("div");for(let o=0;o<s.length;o+=1)s[o].c();u(e,"class","list svelte-odhywp")},m(o,a){w(o,e,a);for(let c=0;c<s.length;c+=1)s[c]&&s[c].m(e,null);t=!0},p(o,a){if(a[0]&128){n=me(o[7]);let c;for(c=0;c<n.length;c+=1){const p=Cr(o,n,c);s[c]?(s[c].p(p,a),N(s[c],1)):(s[c]=Tr(p),s[c].c(),N(s[c],1),s[c].m(e,null))}for(De(),c=n.length;c<s.length;c+=1)i(c);Te()}},i(o){if(!t){for(let a=0;a<n.length;a+=1)N(s[a]);t=!0}},o(o){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)R(s[a]);t=!1},d(o){o&&$(e),Re(s,o)}}}function g_(l){let e;return{c(){e=_("div"),e.textContent="No services found",u(e,"class","empty-panel svelte-odhywp")},m(t,n){w(t,e,n)},p:pe,i:pe,o:pe,d(t){t&&$(e)}}}function b_(l){let e=l[21].type+"",t;return{c(){t=z(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&128&&e!==(e=n[21].type+"")&&B(t,e)},d(n){n&&$(t)}}}function Tr(l){var F,E;let e,t,n=bn(l[21])+"",s,i,o,a,c=l[21].service+"",p,f,d,m=l[21].project+"",v,g,h=l[21].env+"",S,y,k,D,T=(((F=l[21].servers)==null?void 0:F.length)||0)+"",q,P,C,L,O=(((E=l[21].ports)==null?void 0:E.join(", "))||"-")+"",A,j,U,K,V;return U=new Je({props:{variant:l[21].type==="stateful"?"warning":"info",$$slots:{default:[b_]},$$scope:{ctx:l}}}),{c(){e=_("div"),t=_("div"),s=z(n),i=b(),o=_("div"),a=_("div"),p=z(c),f=b(),d=_("div"),v=z(m),g=z(" / "),S=z(h),y=b(),k=_("div"),D=_("div"),q=z(T),P=z(" server(s)"),C=b(),L=_("div"),A=z(O),j=b(),ce(U.$$.fragment),K=b(),u(t,"class","item-icon svelte-odhywp"),u(a,"class","item-name svelte-odhywp"),u(d,"class","item-meta svelte-odhywp"),u(o,"class","item-info svelte-odhywp"),u(L,"class","ports svelte-odhywp"),u(k,"class","item-stats svelte-odhywp"),u(e,"class","list-item svelte-odhywp")},m(M,G){w(M,e,G),r(e,t),r(t,s),r(e,i),r(e,o),r(o,a),r(a,p),r(o,f),r(o,d),r(d,v),r(d,g),r(d,S),r(e,y),r(e,k),r(k,D),r(D,q),r(D,P),r(k,C),r(k,L),r(L,A),r(e,j),re(U,e,null),r(e,K),V=!0},p(M,G){var J,H;(!V||G[0]&128)&&n!==(n=bn(M[21])+"")&&B(s,n),(!V||G[0]&128)&&c!==(c=M[21].service+"")&&B(p,c),(!V||G[0]&128)&&m!==(m=M[21].project+"")&&B(v,m),(!V||G[0]&128)&&h!==(h=M[21].env+"")&&B(S,h),(!V||G[0]&128)&&T!==(T=(((J=M[21].servers)==null?void 0:J.length)||0)+"")&&B(q,T),(!V||G[0]&128)&&O!==(O=(((H=M[21].ports)==null?void 0:H.join(", "))||"-")+"")&&B(A,O);const I={};G[0]&128&&(I.variant=M[21].type==="stateful"?"warning":"info"),G[0]&128|G[1]&16&&(I.$$scope={dirty:G,ctx:M}),U.$set(I)},i(M){V||(N(U.$$.fragment,M),V=!0)},o(M){R(U.$$.fragment,M),V=!1},d(M){M&&$(e),ae(U)}}}function k_(l){let e,t,n,s;const i=[g_,h_],o=[];function a(c,p){return c[7].length===0?0:1}return e=a(l),t=o[e]=i[e](l),{c(){t.c(),n=Ge()},m(c,p){o[e].m(c,p),w(c,n,p),s=!0},p(c,p){let f=e;e=a(c),e===f?o[e].p(c,p):(De(),R(o[f],1,1,()=>{o[f]=null}),Te(),t=o[e],t?t.p(c,p):(t=o[e]=i[e](c),t.c()),N(t,1),t.m(n.parentNode,n))},i(c){s||(N(t),s=!0)},o(c){R(t),s=!1},d(c){c&&$(n),o[e].d(c)}}}function $_(l){let e,t,n=me(l[1]),s=[];for(let o=0;o<n.length;o+=1)s[o]=qr(yr(l,n,o));const i=o=>R(s[o],1,1,()=>{s[o]=null});return{c(){e=_("div");for(let o=0;o<s.length;o+=1)s[o].c();u(e,"class","list svelte-odhywp")},m(o,a){w(o,e,a);for(let c=0;c<s.length;c+=1)s[c]&&s[c].m(e,null);t=!0},p(o,a){if(a[0]&2){n=me(o[1]);let c;for(c=0;c<n.length;c+=1){const p=yr(o,n,c);s[c]?(s[c].p(p,a),N(s[c],1)):(s[c]=qr(p),s[c].c(),N(s[c],1),s[c].m(e,null))}for(De(),c=n.length;c<s.length;c+=1)i(c);Te()}},i(o){if(!t){for(let a=0;a<n.length;a+=1)N(s[a]);t=!0}},o(o){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)R(s[a]);t=!1},d(o){o&&$(e),Re(s,o)}}}function w_(l){let e;return{c(){e=_("div"),e.textContent="No servers found",u(e,"class","empty-panel svelte-odhywp")},m(t,n){w(t,e,n)},p:pe,i:pe,o:pe,d(t){t&&$(e)}}}function y_(l){let e=kn(l[27])?"🔀 nginx":"⚠️ no nginx",t;return{c(){t=z(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&2&&e!==(e=kn(n[27])?"🔀 nginx":"⚠️ no nginx")&&B(t,e)},d(n){n&&$(t)}}}function C_(l){let e,t=(l[27].agent_version||"?")+"",n;return{c(){e=z("🤖 v"),n=z(t)},m(s,i){w(s,e,i),w(s,n,i)},p(s,i){i[0]&2&&t!==(t=(s[27].agent_version||"?")+"")&&B(n,t)},d(s){s&&($(e),$(n))}}}function qr(l){let e,t,n=l[27].status==="online"?"🟢":"🔴",s,i,o,a,c=l[27].ip+"",p,f,d,m=(l[27].containers||0)+"",v,g,h,S,y,k,D,T,q;return y=new Je({props:{variant:kn(l[27])?"success":"warning",$$slots:{default:[y_]},$$scope:{ctx:l}}}),D=new Je({props:{variant:"info",$$slots:{default:[C_]},$$scope:{ctx:l}}}),{c(){e=_("div"),t=_("div"),s=z(n),i=b(),o=_("div"),a=_("code"),p=z(c),f=b(),d=_("div"),v=z(m),g=z(" container(s)"),h=b(),S=_("div"),ce(y.$$.fragment),k=b(),ce(D.$$.fragment),T=b(),u(t,"class","item-icon svelte-odhywp"),u(a,"class","server-ip svelte-odhywp"),u(d,"class","item-meta svelte-odhywp"),u(o,"class","item-info svelte-odhywp"),u(S,"class","item-badges svelte-odhywp"),u(e,"class","list-item svelte-odhywp")},m(P,C){w(P,e,C),r(e,t),r(t,s),r(e,i),r(e,o),r(o,a),r(a,p),r(o,f),r(o,d),r(d,v),r(d,g),r(e,h),r(e,S),re(y,S,null),r(S,k),re(D,S,null),r(e,T),q=!0},p(P,C){(!q||C[0]&2)&&n!==(n=P[27].status==="online"?"🟢":"🔴")&&B(s,n),(!q||C[0]&2)&&c!==(c=P[27].ip+"")&&B(p,c),(!q||C[0]&2)&&m!==(m=(P[27].containers||0)+"")&&B(v,m);const L={};C[0]&2&&(L.variant=kn(P[27])?"success":"warning"),C[0]&2|C[1]&16&&(L.$$scope={dirty:C,ctx:P}),y.$set(L);const O={};C[0]&2|C[1]&16&&(O.$$scope={dirty:C,ctx:P}),D.$set(O)},i(P){q||(N(y.$$.fragment,P),N(D.$$.fragment,P),q=!0)},o(P){R(y.$$.fragment,P),R(D.$$.fragment,P),q=!1},d(P){P&&$(e),ae(y),ae(D)}}}function S_(l){let e,t,n,s;const i=[w_,$_],o=[];function a(c,p){return c[1].length===0?0:1}return e=a(l),t=o[e]=i[e](l),{c(){t.c(),n=Ge()},m(c,p){o[e].m(c,p),w(c,n,p),s=!0},p(c,p){let f=e;e=a(c),e===f?o[e].p(c,p):(De(),R(o[f],1,1,()=>{o[f]=null}),Te(),t=o[e],t?t.p(c,p):(t=o[e]=i[e](c),t.c()),N(t,1),t.m(n.parentNode,n))},i(c){s||(N(t),s=!0)},o(c){R(t),s=!1},d(c){c&&$(n),o[e].d(c)}}}function z_(l){let e,t,n=me(l[7]),s=[];for(let o=0;o<n.length;o+=1)s[o]=Nr(wr(l,n,o));const i=o=>R(s[o],1,1,()=>{s[o]=null});return{c(){e=_("div");for(let o=0;o<s.length;o+=1)s[o].c();u(e,"class","traffic-flow svelte-odhywp")},m(o,a){w(o,e,a);for(let c=0;c<s.length;c+=1)s[c]&&s[c].m(e,null);t=!0},p(o,a){if(a[0]&130){n=me(o[7]);let c;for(c=0;c<n.length;c+=1){const p=wr(o,n,c);s[c]?(s[c].p(p,a),N(s[c],1)):(s[c]=Nr(p),s[c].c(),N(s[c],1),s[c].m(e,null))}for(De(),c=n.length;c<s.length;c+=1)i(c);Te()}},i(o){if(!t){for(let a=0;a<n.length;a+=1)N(s[a]);t=!0}},o(o){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)R(s[a]);t=!1},d(o){o&&$(e),Re(s,o)}}}function D_(l){let e;return{c(){e=_("div"),e.textContent="Deploy services to see traffic flow",u(e,"class","empty-panel svelte-odhywp")},m(t,n){w(t,e,n)},p:pe,i:pe,o:pe,d(t){t&&$(e)}}}function T_(l){let e=l[21].env+"",t;return{c(){t=z(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&128&&e!==(e=n[21].env+"")&&B(t,e)},d(n){n&&$(t)}}}function Er(l){let e,t,n,s,i,o,a=l[21].domain+"",c,p,f;return{c(){e=_("div"),t=_("span"),t.textContent="☁️",n=b(),s=_("span"),s.textContent="Cloudflare",i=b(),o=_("span"),c=z(a),p=b(),f=_("div"),f.textContent="→",u(t,"class","svelte-odhywp"),u(s,"class","node-label svelte-odhywp"),u(o,"class","node-detail svelte-odhywp"),u(e,"class","flow-node cloudflare svelte-odhywp"),u(f,"class","flow-arrow svelte-odhywp")},m(d,m){w(d,e,m),r(e,t),r(e,n),r(e,s),r(e,i),r(e,o),r(o,c),w(d,p,m),w(d,f,m)},p(d,m){m[0]&128&&a!==(a=d[21].domain+"")&&B(c,a)},d(d){d&&($(e),$(p),$(f))}}}function q_(l){let e;return{c(){e=z("Server")},m(t,n){w(t,e,n)},p:pe,d(t){t&&$(e)}}}function E_(l){let e,t=l[22].length+"",n,s;return{c(){e=z("⚖️ Load Balanced ("),n=z(t),s=z(")")},m(i,o){w(i,e,o),w(i,n,o),w(i,s,o)},p(i,o){o[0]&130&&t!==(t=i[22].length+"")&&B(n,t)},d(i){i&&($(e),$(n),$(s))}}}function Pr(l){let e,t,n,s=l[21].domain+"",i,o;return{c(){e=_("span"),t=z("Domain: "),n=_("a"),i=z(s),u(n,"href",o="https://"+l[21].domain),u(n,"target","_blank"),u(n,"class","svelte-odhywp")},m(a,c){w(a,e,c),r(e,t),r(e,n),r(n,i)},p(a,c){c[0]&128&&s!==(s=a[21].domain+"")&&B(i,s),c[0]&128&&o!==(o="https://"+a[21].domain)&&u(n,"href",o)},d(a){a&&$(e)}}}function Nr(l){let e,t,n,s=bn(l[21])+"",i,o,a,c=l[21].service+"",p,f,d,m,v,g,h,S,y,k,D,T,q,P,C,L,O,A,j,U,K,V,F,E,M=(l[21].host_port||"8000")+"",G,I,J,H,Q,le,W,X=(l[21].container_name||l[21].id)+"",x,_e,$e;d=new Je({props:{variant:l[21].env==="prod"?"danger":"info",$$slots:{default:[T_]},$$scope:{ctx:l}}});let he=l[23]&&Er(l);function ne(te,se){return te[24]?E_:q_}let ve=ne(l),we=ve(l),fe=l[23]&&Pr(l);return{c(){e=_("div"),t=_("div"),n=_("span"),i=z(s),o=b(),a=_("span"),p=z(c),f=b(),ce(d.$$.fragment),m=b(),v=_("div"),he&&he.c(),g=b(),h=_("div"),S=_("span"),S.textContent="🖥️",y=b(),k=_("span"),we.c(),D=b(),T=_("div"),T.textContent="→",q=b(),P=_("div"),P.innerHTML='<span class="svelte-odhywp">🔀</span> <span class="node-label svelte-odhywp">nginx</span> <span class="node-detail svelte-odhywp">:443</span>',C=b(),L=_("div"),L.textContent="→",O=b(),A=_("div"),j=_("span"),j.textContent="🐳",U=b(),K=_("span"),K.textContent="Container",V=b(),F=_("span"),E=z(":"),G=z(M),I=b(),J=_("div"),fe&&fe.c(),H=b(),Q=_("span"),le=z("Container: "),W=_("code"),x=z(X),_e=b(),u(n,"class","flow-icon svelte-odhywp"),u(a,"class","flow-name svelte-odhywp"),u(t,"class","flow-header svelte-odhywp"),u(S,"class","svelte-odhywp"),u(k,"class","node-label svelte-odhywp"),u(h,"class","flow-node server svelte-odhywp"),u(T,"class","flow-arrow svelte-odhywp"),u(P,"class","flow-node nginx svelte-odhywp"),u(L,"class","flow-arrow svelte-odhywp"),u(j,"class","svelte-odhywp"),u(K,"class","node-label svelte-odhywp"),u(F,"class","node-detail svelte-odhywp"),u(A,"class","flow-node container svelte-odhywp"),u(v,"class","flow-path svelte-odhywp"),u(W,"class","svelte-odhywp"),u(J,"class","flow-details svelte-odhywp"),u(e,"class","flow-card svelte-odhywp")},m(te,se){w(te,e,se),r(e,t),r(t,n),r(n,i),r(t,o),r(t,a),r(a,p),r(t,f),re(d,t,null),r(e,m),r(e,v),he&&he.m(v,null),r(v,g),r(v,h),r(h,S),r(h,y),r(h,k),we.m(k,null),r(v,D),r(v,T),r(v,q),r(v,P),r(v,C),r(v,L),r(v,O),r(v,A),r(A,j),r(A,U),r(A,K),r(A,V),r(A,F),r(F,E),r(F,G),r(e,I),r(e,J),fe&&fe.m(J,null),r(J,H),r(J,Q),r(Q,le),r(Q,W),r(W,x),r(e,_e),$e=!0},p(te,se){(!$e||se[0]&128)&&s!==(s=bn(te[21])+"")&&B(i,s),(!$e||se[0]&128)&&c!==(c=te[21].service+"")&&B(p,c);const Ee={};se[0]&128&&(Ee.variant=te[21].env==="prod"?"danger":"info"),se[0]&128|se[1]&16&&(Ee.$$scope={dirty:se,ctx:te}),d.$set(Ee),te[23]?he?he.p(te,se):(he=Er(te),he.c(),he.m(v,g)):he&&(he.d(1),he=null),ve===(ve=ne(te))&&we?we.p(te,se):(we.d(1),we=ve(te),we&&(we.c(),we.m(k,null))),(!$e||se[0]&128)&&M!==(M=(te[21].host_port||"8000")+"")&&B(G,M),te[23]?fe?fe.p(te,se):(fe=Pr(te),fe.c(),fe.m(J,H)):fe&&(fe.d(1),fe=null),(!$e||se[0]&128)&&X!==(X=(te[21].container_name||te[21].id)+"")&&B(x,X)},i(te){$e||(N(d.$$.fragment,te),$e=!0)},o(te){R(d.$$.fragment,te),$e=!1},d(te){te&&$(e),ae(d),he&&he.d(),we.d(),fe&&fe.d()}}}function P_(l){let e,t,n,s;const i=[D_,z_],o=[];function a(c,p){return c[7].length===0?0:1}return e=a(l),t=o[e]=i[e](l),{c(){t.c(),n=Ge()},m(c,p){o[e].m(c,p),w(c,n,p),s=!0},p(c,p){let f=e;e=a(c),e===f?o[e].p(c,p):(De(),R(o[f],1,1,()=>{o[f]=null}),Te(),t=o[e],t?t.p(c,p):(t=o[e]=i[e](c),t.c()),N(t,1),t.m(n.parentNode,n))},i(c){s||(N(t),s=!0)},o(c){R(t),s=!1},d(c){c&&$(n),o[e].d(c)}}}function N_(l){let e;return{c(){e=_("span"),e.textContent="Request path from client to container",u(e,"slot","header"),u(e,"class","subtitle svelte-odhywp")},m(t,n){w(t,e,n)},p:pe,d(t){t&&$(e)}}}function L_(l){let e,t,n,s,i,o,a,c,p,f;return t=new At({props:{title:"🏗️ Architecture View",$$slots:{header:[v_],default:[d_]},$$scope:{ctx:l}}}),i=new At({props:{title:"📦 Services",padding:!1,$$slots:{default:[k_]},$$scope:{ctx:l}}}),a=new At({props:{title:"🖥️ Servers",padding:!1,$$slots:{default:[S_]},$$scope:{ctx:l}}}),p=new At({props:{title:"🚦 Traffic Flow",$$slots:{header:[N_],default:[P_]},$$scope:{ctx:l}}}),{c(){e=_("div"),ce(t.$$.fragment),n=b(),s=_("div"),ce(i.$$.fragment),o=b(),ce(a.$$.fragment),c=b(),ce(p.$$.fragment),u(s,"class","panels-grid svelte-odhywp"),u(e,"class","architecture-page svelte-odhywp")},m(d,m){w(d,e,m),re(t,e,null),r(e,n),r(e,s),re(i,s,null),r(s,o),re(a,s,null),r(e,c),re(p,e,null),f=!0},p(d,m){const v={};m[0]&8190|m[1]&16&&(v.$$scope={dirty:m,ctx:d}),t.$set(v);const g={};m[0]&128|m[1]&16&&(g.$$scope={dirty:m,ctx:d}),i.$set(g);const h={};m[0]&2|m[1]&16&&(h.$$scope={dirty:m,ctx:d}),a.$set(h);const S={};m[0]&130|m[1]&16&&(S.$$scope={dirty:m,ctx:d}),p.$set(S)},i(d){f||(N(t.$$.fragment,d),N(i.$$.fragment,d),N(a.$$.fragment,d),N(p.$$.fragment,d),f=!0)},o(d){R(t.$$.fragment,d),R(i.$$.fragment,d),R(a.$$.fragment,d),R(p.$$.fragment,d),f=!1},d(d){d&&$(e),ae(t),ae(i),ae(a),ae(p)}}}function Lr(l){return l?l.toLocaleTimeString():""}function bn(l){switch(l.type){case"stateful":return"🗄️";case"frontend":return"🌐";case"api":return"⚡";case"worker":return"⚙️";default:return"📦"}}function kn(l){return l.nginx_status==="running"}function M_(l,e,t){let n,s,i,o;ct(l,jn,L=>t(12,o=L));let a="",c="",p=!1,f=[],d=[],m=[],v=null,g=null,h=!1,S=null;tn(()=>{h||(y(),S=setInterval(y,6e4))}),qa(()=>{S&&clearInterval(S)});async function y(){h||t(6,p=!0),t(9,g=null);try{const L=await Oe("POST","/infra/architecture",{project:a||null,environment:c||null});t(7,f=L.nodes||[]),t(1,d=L.servers||[]),m=L.infrastructure||[],t(8,v=new Date),t(10,h=!0)}catch(L){t(9,g=L.message),h||be.error("Failed to load architecture: "+L.message)}finally{t(6,p=!1)}}async function k(){const L=d.filter(O=>O.nginx_status!=="running").map(O=>O.ip);if(L.length===0){be.info("All servers already have nginx running");return}be.info(`Fixing ${L.length} server(s)...`);try{await Oe("POST","/infra/nginx/ensure",{server_ips:L}),be.success("Nginx sidecar installed"),architectureStore.refresh()}catch(O){be.error(O.message)}}function D(){y()}function T(){y()}function q(){a=St(this),t(4,a)}function P(){c=St(this),t(5,c)}const C=(L,O)=>{var A;return(A=L.servers)==null?void 0:A.includes(O.ip)};return l.$$.update=()=>{l.$$.dirty[0]&2&&t(3,n=d.filter(L=>L.nginx_status==="running").length),l.$$.dirty[0]&2&&t(2,s=d.length),l.$$.dirty[0]&12&&t(11,i=n===s)},[T,d,s,n,a,c,p,f,v,g,h,i,o,k,D,q,P,C]}class R_ extends Pt{constructor(e){super(),Et(this,e,M_,L_,zt,{refresh:0},null,[-1,-1])}get refresh(){return this.$$.ctx[0]}}function A_(l){let e,t,n,s,i,o,a,c,p,f,d,m,v,g,h,S,y,k,D,T,q,P,C;n=new gc({}),i=new $c({props:{tabs:l[9],active:l[0],scrollable:!0}}),i.$on("change",l[11]);let L=l[7]&&Mr(l),O={};f=new wu({props:O}),l[14](f),v=new bf({});let A={};S=new gp({props:A}),l[15](S);let j={};D=new R_({props:j}),l[16](D);const U=[I_,F_],K=[];function V(F,E){return F[0]==="services"?0:F[0]==="settings"?1:-1}return~(q=V(l))&&(P=K[q]=U[q](l)),{c(){e=_("div"),t=_("div"),ce(n.$$.fragment),s=b(),ce(i.$$.fragment),o=b(),L&&L.c(),a=b(),c=_("main"),p=_("div"),ce(f.$$.fragment),d=b(),m=_("div"),ce(v.$$.fragment),g=b(),h=_("div"),ce(S.$$.fragment),y=b(),k=_("div"),ce(D.$$.fragment),T=b(),P&&P.c(),u(p,"class","svelte-p7g5el"),Ce(p,"hidden",l[0]!=="infra"),u(m,"class","svelte-p7g5el"),Ce(m,"hidden",l[0]!=="deploy"),u(h,"class","svelte-p7g5el"),Ce(h,"hidden",l[0]!=="deployments"),u(k,"class","svelte-p7g5el"),Ce(k,"hidden",l[0]!=="architecture"),u(c,"class","content glass svelte-p7g5el"),u(t,"class","container svelte-p7g5el"),u(e,"class","app svelte-p7g5el")},m(F,E){w(F,e,E),r(e,t),re(n,t,null),r(t,s),re(i,t,null),r(t,o),L&&L.m(t,null),r(t,a),r(t,c),r(c,p),re(f,p,null),r(c,d),r(c,m),re(v,m,null),r(c,g),r(c,h),re(S,h,null),r(c,y),r(c,k),re(D,k,null),r(c,T),~q&&K[q].m(c,null),C=!0},p(F,E){const M={};E&1&&(M.active=F[0]),i.$set(M),F[7]?L?(L.p(F,E),E&128&&N(L,1)):(L=Mr(F),L.c(),N(L,1),L.m(t,a)):L&&(De(),R(L,1,1,()=>{L=null}),Te());const G={};f.$set(G),(!C||E&1)&&Ce(p,"hidden",F[0]!=="infra"),(!C||E&1)&&Ce(m,"hidden",F[0]!=="deploy");const I={};S.$set(I),(!C||E&1)&&Ce(h,"hidden",F[0]!=="deployments");const J={};D.$set(J),(!C||E&1)&&Ce(k,"hidden",F[0]!=="architecture");let H=q;q=V(F),q!==H&&(P&&(De(),R(K[H],1,1,()=>{K[H]=null}),Te()),~q?(P=K[q],P||(P=K[q]=U[q](F),P.c()),N(P,1),P.m(c,null)):P=null)},i(F){C||(N(n.$$.fragment,F),N(i.$$.fragment,F),N(L),N(f.$$.fragment,F),N(v.$$.fragment,F),N(S.$$.fragment,F),N(D.$$.fragment,F),N(P),C=!0)},o(F){R(n.$$.fragment,F),R(i.$$.fragment,F),R(L),R(f.$$.fragment,F),R(v.$$.fragment,F),R(S.$$.fragment,F),R(D.$$.fragment,F),R(P),C=!1},d(F){F&&$(e),ae(n),ae(i),L&&L.d(),l[14](null),ae(f),ae(v),l[15](null),ae(S),l[16](null),ae(D),~q&&K[q].d()}}}function O_(l){let e,t;return e=new rc({props:{title:"Deploy Dashboard",subtitle:"Sign in to manage your infrastructure"}}),e.$on("success",l[10]),{c(){ce(e.$$.fragment)},m(n,s){re(e,n,s),t=!0},p:pe,i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){ae(e,n)}}}function j_(l){let e;return{c(){e=_("div"),e.innerHTML='<div class="spinner svelte-p7g5el"></div>',u(e,"class","loading-screen svelte-p7g5el")},m(t,n){w(t,e,n)},p:pe,i:pe,o:pe,d(t){t&&$(e)}}}function Mr(l){let e,t;return e=new Cc({props:{showTail:l[6],showContainer:l[5]}}),e.$on("change",l[12]),e.$on("refresh",l[13]),{c(){ce(e.$$.fragment)},m(n,s){re(e,n,s),t=!0},p(n,s){const i={};s&64&&(i.showTail=n[6]),s&32&&(i.showContainer=n[5]),e.$set(i)},i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){ae(e,n)}}}function F_(l){let e,t;return e=new i_({}),{c(){ce(e.$$.fragment)},m(n,s){re(e,n,s),t=!0},i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){ae(e,n)}}}function I_(l){let e,t;return e=new qp({}),{c(){ce(e.$$.fragment)},m(n,s){re(e,n,s),t=!0},i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){R(e.$$.fragment,n),t=!1},d(n){ae(e,n)}}}function B_(l){let e,t,n,s,i,o;e=new uc({});const a=[j_,O_,A_],c=[];function p(f,d){return f[1]?!f[8].token||!f[8].user?1:2:0}return n=p(l),s=c[n]=a[n](l),{c(){ce(e.$$.fragment),t=b(),s.c(),i=Ge()},m(f,d){re(e,f,d),w(f,t,d),c[n].m(f,d),w(f,i,d),o=!0},p(f,[d]){let m=n;n=p(f),n===m?c[n].p(f,d):(De(),R(c[m],1,1,()=>{c[m]=null}),Te(),s=c[n],s?s.p(f,d):(s=c[n]=a[n](f),s.c()),N(s,1),s.m(i.parentNode,i))},i(f){o||(N(e.$$.fragment,f),N(s),o=!0)},o(f){R(e.$$.fragment,f),R(s),o=!1},d(f){f&&($(t),$(i)),ae(e,f),c[n].d(f)}}}function U_(l,e,t){let n,s,i,o,a;ct(l,Wn,q=>t(0,o=q)),ct(l,Zt,q=>t(8,a=q));let c=!1,p,f,d;const m=[{id:"infra",label:"Infrastructure"},{id:"deploy",label:"Deploy"},{id:"deployments",label:"Deployments"},{id:"architecture",label:"Architecture"},{id:"services",label:"Services"},{id:"settings",label:"Settings"}];tn(async()=>{const q=await Wa();t(1,c=!0),q&&v()});function v(){$l.refresh(),On.refresh(),yn.refresh(),Al.refresh()}async function g(q){const{user:P,token:C}=q.detail;Zt.setToken(C),Zt.setUser(P),v()}function h(q){Wn.set(q.detail)}function S(){y()}function y(){switch(o){case"infra":p==null||p.refresh(),$l.refresh();break;case"deployments":f==null||f.refresh();break;case"architecture":d==null||d.refresh();break}}function k(q){Kt[q?"unshift":"push"](()=>{p=q,t(2,p)})}function D(q){Kt[q?"unshift":"push"](()=>{f=q,t(3,f)})}function T(q){Kt[q?"unshift":"push"](()=>{d=q,t(4,d)})}return l.$$.update=()=>{l.$$.dirty&1&&t(7,n=o==="deployments")},t(6,s=!1),t(5,i=!1),[o,c,p,f,d,i,s,n,a,m,g,h,S,y,k,D,T]}class H_ extends Pt{constructor(e){super(),Et(this,e,U_,B_,zt,{})}}new H_({target:document.getElementById("app")});
