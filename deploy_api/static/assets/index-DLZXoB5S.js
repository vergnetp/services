var Gu=Object.defineProperty;var Vu=(l,e,t)=>e in l?Gu(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t;var _l=(l,e,t)=>Vu(l,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();function ge(){}const gf=l=>l;function bf(l,e){for(const t in e)l[t]=e[t];return l}function kf(l){return l()}function On(){return Object.create(null)}function We(l){l.forEach(kf)}function cn(l){return typeof l=="function"}function kt(l,e){return l!=l?e==e:l!==e||l&&typeof l=="object"||typeof l=="function"}let Ql;function ln(l,e){return l===e?!0:(Ql||(Ql=document.createElement("a")),Ql.href=e,l===Ql.href)}function Wu(l){return Object.keys(l).length===0}function En(l,...e){if(l==null){for(const n of e)n(void 0);return ge}const t=l.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function jl(l){let e;return En(l,t=>e=t)(),e}function dt(l,e,t){l.$$.on_destroy.push(En(e,t))}function Mt(l,e,t,n){if(l){const s=wf(l,e,t,n);return l[0](s)}}function wf(l,e,t,n){return l[1]&&n?bf(t.ctx.slice(),l[1](n(e))):t.ctx}function jt(l,e,t,n){if(l[2]&&n){const s=l[2](n(t));if(e.dirty===void 0)return s;if(typeof s=="object"){const o=[],i=Math.max(e.dirty.length,s.length);for(let f=0;f<i;f+=1)o[f]=e.dirty[f]|s[f];return o}return e.dirty|s}return e.dirty}function At(l,e,t,n,s,o){if(s){const i=wf(e,t,n,o);l.p(i,s)}}function Ot(l){if(l.ctx.length>32){const e=[],t=l.ctx.length/32;for(let n=0;n<t;n++)e[n]=-1;return e}return-1}function $f(l){const e={};for(const t in l)e[t]=!0;return e}function In(l){const e=typeof l=="string"&&l.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[l,"px"]}const Cf=typeof window<"u";let Ju=Cf?()=>window.performance.now():()=>Date.now(),qn=Cf?l=>requestAnimationFrame(l):ge;const Pl=new Set;function yf(l){Pl.forEach(e=>{e.c(l)||(Pl.delete(e),e.f())}),Pl.size!==0&&qn(yf)}function Ku(l){let e;return Pl.size===0&&qn(yf),{promise:new Promise(t=>{Pl.add(e={c:l,f:t})}),abort(){Pl.delete(e)}}}const Sf=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function r(l,e){l.appendChild(e)}function Tf(l){if(!l)return document;const e=l.getRootNode?l.getRootNode():l.ownerDocument;return e&&e.host?e:l.ownerDocument}function Yu(l){const e=d("style");return e.textContent="/* empty */",Qu(Tf(l),e),e.sheet}function Qu(l,e){return r(l.head||l,e),e.sheet}function $(l,e,t){l.insertBefore(e,t||null)}function k(l){l.parentNode&&l.parentNode.removeChild(l)}function Me(l,e){for(let t=0;t<l.length;t+=1)l[t]&&l[t].d(e)}function d(l){return document.createElement(l)}function Rl(l){return document.createElementNS("http://www.w3.org/2000/svg",l)}function T(l){return document.createTextNode(l)}function b(){return T(" ")}function Fe(){return T("")}function X(l,e,t,n){return l.addEventListener(e,t,n),()=>l.removeEventListener(e,t,n)}function Zu(l){return function(e){return e.preventDefault(),l.call(this,e)}}function Fn(l){return function(e){return e.stopPropagation(),l.call(this,e)}}function u(l,e,t){t==null?l.removeAttribute(e):l.getAttribute(e)!==t&&l.setAttribute(e,t)}function Ln(l){let e;return{p(...t){e=t,e.forEach(n=>l.push(n))},r(){e.forEach(t=>l.splice(l.indexOf(t),1))}}}function Kt(l){return l===""?null:+l}function Xu(l){return Array.from(l.childNodes)}function U(l,e){e=""+e,l.data!==e&&(l.data=e)}function le(l,e){l.value=e??""}function qt(l,e,t,n){t==null?l.style.removeProperty(e):l.style.setProperty(e,t,"")}function Ne(l,e,t){for(let n=0;n<l.options.length;n+=1){const s=l.options[n];if(s.__value===e){s.selected=!0;return}}(!t||e!==void 0)&&(l.selectedIndex=-1)}function _t(l){const e=l.querySelector(":checked");return e&&e.__value}function ke(l,e,t){l.classList.toggle(e,!!t)}function zf(l,e,{bubbles:t=!1,cancelable:n=!1}={}){return new CustomEvent(l,{detail:e,bubbles:t,cancelable:n})}class xu{constructor(e=!1){_l(this,"is_svg",!1);_l(this,"e");_l(this,"n");_l(this,"t");_l(this,"a");this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,n=null){this.e||(this.is_svg?this.e=Rl(t.nodeName):this.e=d(t.nodeType===11?"TEMPLATE":t.nodeName),this.t=t.tagName!=="TEMPLATE"?t:t.content,this.c(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)$(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(k)}}const nn=new Map;let sn=0;function ec(l){let e=5381,t=l.length;for(;t--;)e=(e<<5)-e^l.charCodeAt(t);return e>>>0}function tc(l,e){const t={stylesheet:Yu(e),rules:{}};return nn.set(l,t),t}function Un(l,e,t,n,s,o,i,f=0){const a=16.666/n;let c=`{
`;for(let y=0;y<=1;y+=a){const C=e+(t-e)*o(y);c+=y*100+`%{${i(C,1-C)}}
`}const _=c+`100% {${i(t,1-t)}}
}`,p=`__svelte_${ec(_)}_${f}`,m=Tf(l),{stylesheet:h,rules:v}=nn.get(m)||tc(m,l);v[p]||(v[p]=!0,h.insertRule(`@keyframes ${p} ${_}`,h.cssRules.length));const g=l.style.animation||"";return l.style.animation=`${g?`${g}, `:""}${p} ${n}ms linear ${s}ms 1 both`,sn+=1,p}function lc(l,e){const t=(l.style.animation||"").split(", "),n=t.filter(e?o=>o.indexOf(e)<0:o=>o.indexOf("__svelte")===-1),s=t.length-n.length;s&&(l.style.animation=n.join(", "),sn-=s,sn||nc())}function nc(){qn(()=>{sn||(nn.forEach(l=>{const{ownerNode:e}=l.stylesheet;e&&k(e)}),nn.clear())})}let Vl;function Gl(l){Vl=l}function Pn(){if(!Vl)throw new Error("Function called outside component initialization");return Vl}function kl(l){Pn().$$.on_mount.push(l)}function sc(l){Pn().$$.on_destroy.push(l)}function Al(){const l=Pn();return(e,t,{cancelable:n=!1}={})=>{const s=l.$$.callbacks[e];if(s){const o=zf(e,t,{cancelable:n});return s.slice().forEach(i=>{i.call(l,o)}),!o.defaultPrevented}return!0}}function on(l,e){const t=l.$$.callbacks[e.type];t&&t.slice().forEach(n=>n.call(this,e))}const Dl=[],It=[];let Nl=[];const Cn=[],oc=Promise.resolve();let yn=!1;function ic(){yn||(yn=!0,oc.then(Df))}function Xe(l){Nl.push(l)}function dl(l){Cn.push(l)}const bn=new Set;let Sl=0;function Df(){if(Sl!==0)return;const l=Vl;do{try{for(;Sl<Dl.length;){const e=Dl[Sl];Sl++,Gl(e),rc(e.$$)}}catch(e){throw Dl.length=0,Sl=0,e}for(Gl(null),Dl.length=0,Sl=0;It.length;)It.pop()();for(let e=0;e<Nl.length;e+=1){const t=Nl[e];bn.has(t)||(bn.add(t),t())}Nl.length=0}while(Dl.length);for(;Cn.length;)Cn.pop()();yn=!1,bn.clear(),Gl(l)}function rc(l){if(l.fragment!==null){l.update(),We(l.before_update);const e=l.dirty;l.dirty=[-1],l.fragment&&l.fragment.p(l.ctx,e),l.after_update.forEach(Xe)}}function ac(l){const e=[],t=[];Nl.forEach(n=>l.indexOf(n)===-1?e.push(n):t.push(n)),t.forEach(n=>n()),Nl=e}let Hl;function fc(){return Hl||(Hl=Promise.resolve(),Hl.then(()=>{Hl=null})),Hl}function kn(l,e,t){l.dispatchEvent(zf(`${e?"intro":"outro"}${t}`))}const xl=new Set;let sl;function De(){sl={r:0,c:[],p:sl}}function Ee(){sl.r||We(sl.c),sl=sl.p}function R(l,e){l&&l.i&&(xl.delete(l),l.i(e))}function M(l,e,t,n){if(l&&l.o){if(xl.has(l))return;xl.add(l),sl.c.push(()=>{xl.delete(l),n&&(t&&l.d(1),n())}),l.o(e)}else n&&n()}const uc={duration:0};function Ll(l,e,t,n){let o=e(l,t,{direction:"both"}),i=n?0:1,f=null,a=null,c=null,_;function p(){c&&lc(l,c)}function m(v,g){const y=v.b-i;return g*=Math.abs(y),{a:i,b:v.b,d:y,duration:g,start:v.start,end:v.start+g,group:v.group}}function h(v){const{delay:g=0,duration:y=300,easing:C=gf,tick:w=ge,css:S}=o||uc,D={start:Ju()+g,b:v};v||(D.group=sl,sl.r+=1),"inert"in l&&(v?_!==void 0&&(l.inert=_):(_=l.inert,l.inert=!0)),f||a?a=D:(S&&(p(),c=Un(l,i,v,y,g,C,S)),v&&w(0,1),f=m(D,y),Xe(()=>kn(l,v,"start")),Ku(E=>{if(a&&E>a.start&&(f=m(a,y),a=null,kn(l,f.b,"start"),S&&(p(),c=Un(l,i,f.b,f.duration,0,C,o.css))),f){if(E>=f.end)w(i=f.b,1-i),kn(l,f.b,"end"),a||(f.b?p():--f.group.r||We(f.group.c)),f=null;else if(E>=f.start){const P=E-f.start;i=f.a+f.d*C(P/f.duration),w(i,1-i)}}return!!(f||a)}))}return{run(v){cn(o)?fc().then(()=>{o=o({direction:v?"in":"out"}),h(v)}):h(v)},end(){p(),f=a=null}}}function pe(l){return(l==null?void 0:l.length)!==void 0?l:Array.from(l)}function Ef(l,e){M(l,1,1,()=>{e.delete(l.key)})}function qf(l,e,t,n,s,o,i,f,a,c,_,p){let m=l.length,h=o.length,v=m;const g={};for(;v--;)g[l[v].key]=v;const y=[],C=new Map,w=new Map,S=[];for(v=h;v--;){const z=p(s,o,v),q=t(z);let A=i.get(q);A?S.push(()=>A.p(z,e)):(A=c(q,z),A.c()),C.set(q,y[v]=A),q in g&&w.set(q,Math.abs(v-g[q]))}const D=new Set,E=new Set;function P(z){R(z,1),z.m(f,_),i.set(z.key,z),_=z.first,h--}for(;m&&h;){const z=y[h-1],q=l[m-1],A=z.key,N=q.key;z===q?(_=z.first,m--,h--):C.has(N)?!i.has(A)||D.has(A)?P(z):E.has(N)?m--:w.get(A)>w.get(N)?(E.add(A),P(z)):(D.add(N),m--):(a(q,i),m--)}for(;m--;){const z=l[m];C.has(z.key)||a(z,i)}for(;h;)P(y[h-1]);return We(S),y}function pl(l,e,t){const n=l.$$.props[e];n!==void 0&&(l.$$.bound[n]=t,t(l.$$.ctx[n]))}function ce(l){l&&l.c()}function fe(l,e,t){const{fragment:n,after_update:s}=l.$$;n&&n.m(e,t),Xe(()=>{const o=l.$$.on_mount.map(kf).filter(cn);l.$$.on_destroy?l.$$.on_destroy.push(...o):We(o),l.$$.on_mount=[]}),s.forEach(Xe)}function ue(l,e){const t=l.$$;t.fragment!==null&&(ac(t.after_update),We(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function cc(l,e){l.$$.dirty[0]===-1&&(Dl.push(l),ic(),l.$$.dirty.fill(0)),l.$$.dirty[e/31|0]|=1<<e%31}function $t(l,e,t,n,s,o,i=null,f=[-1]){const a=Vl;Gl(l);const c=l.$$={fragment:null,ctx:[],props:o,update:ge,not_equal:s,bound:On(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:On(),dirty:f,skip_bound:!1,root:e.target||a.$$.root};i&&i(c.root);let _=!1;if(c.ctx=t?t(l,e.props||{},(p,m,...h)=>{const v=h.length?h[0]:m;return c.ctx&&s(c.ctx[p],c.ctx[p]=v)&&(!c.skip_bound&&c.bound[p]&&c.bound[p](v),_&&cc(l,p)),m}):[],c.update(),_=!0,We(c.before_update),c.fragment=n?n(c.ctx):!1,e.target){if(e.hydrate){const p=Xu(e.target);c.fragment&&c.fragment.l(p),p.forEach(k)}else c.fragment&&c.fragment.c();e.intro&&R(l.$$.fragment),fe(l,e.target,e.anchor),Df()}Gl(a)}class Ct{constructor(){_l(this,"$$");_l(this,"$$set")}$destroy(){ue(this,1),this.$destroy=ge}$on(e,t){if(!cn(t))return ge;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const s=n.indexOf(t);s!==-1&&n.splice(s,1)}}$set(e){this.$$set&&!Wu(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const _c="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(_c);const Tl=[];function dc(l,e){return{subscribe:ll(l,e).subscribe}}function ll(l,e=ge){let t;const n=new Set;function s(f){if(kt(l,f)&&(l=f,t)){const a=!Tl.length;for(const c of n)c[1](),Tl.push(c,l);if(a){for(let c=0;c<Tl.length;c+=2)Tl[c][0](Tl[c+1]);Tl.length=0}}}function o(f){s(f(l))}function i(f,a=ge){const c=[f,a];return n.add(c),n.size===1&&(t=e(s,o)||ge),f(l),()=>{n.delete(c),n.size===0&&t&&(t(),t=null)}}return{set:s,update:o,subscribe:i}}function ml(l,e,t){const n=!Array.isArray(l),s=n?[l]:l;if(!s.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const o=e.length<2;return dc(t,(i,f)=>{let a=!1;const c=[];let _=0,p=ge;const m=()=>{if(_)return;p();const v=e(n?c[0]:c,i,f);o?i(v):p=cn(v)?v:ge},h=s.map((v,g)=>En(v,y=>{c[g]=y,_&=~(1<<g),a&&m()},()=>{_|=1<<g}));return a=!0,m(),function(){We(h),p(),a=!1}})}function Lf(l,e,t=7){if(typeof document>"u")return;const n=new Date(Date.now()+t*864e5).toUTCString();document.cookie=`${l}=${encodeURIComponent(e)}; expires=${n}; path=/; SameSite=Strict`}function Pf(l){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(^| )"+l+"=([^;]+)"));return e?decodeURIComponent(e[2]):null}function pc(l){typeof document>"u"||(document.cookie=`${l}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; SameSite=Strict`)}const wn="jwt_token";function mc(){const l=Pf(wn),{subscribe:e,set:t,update:n}=ll({token:l,user:null,loading:!1,error:null});return{subscribe:e,setToken(s){Lf(wn,s,7),n(o=>({...o,token:s,error:null}))},setUser(s){n(o=>({...o,user:s}))},setError(s){n(o=>({...o,error:s,loading:!1}))},setLoading(s){n(o=>({...o,loading:s}))},logout(){pc(wn),t({token:null,user:null,loading:!1,error:null})},clearError(){n(s=>({...s,error:null}))}}}const wt=mc();ml(wt,l=>!!l.token&&!!l.user);ml(wt,l=>l.user);let Rf=[];function vc(l){Rf=l.map(e=>e.toLowerCase())}const hc=ml(wt,l=>{var e;return(e=l.user)!=null&&e.email?l.user.role==="admin"?!0:Rf.includes(l.user.email.toLowerCase()):!1});function Sn(l){wt.setToken(l)}function gc(){wt.logout()}function Nf(l){return Pf(l)}function Mf(l,e,t=30){Lf(l,e,t)}let jf={baseUrl:"/api/v1",onUnauthorized:null};function bc(l,e={}){const t=e.config||jf,n=jl(wt),s={"Content-Type":"application/json"},o=l.startsWith("/auth/login")||l.startsWith("/auth/register");return n.token&&!o&&!e.skipAuth&&(s.Authorization=`Bearer ${n.token}`),e.headers&&Object.assign(s,e.headers),{url:t.baseUrl+l,headers:s}}async function kc(l,e={}){const t=e.config||jf;if(l.status===401){let n="Authentication failed";try{const o=await l.json();n=o.detail||o.error||o.message||n}catch{}throw jl(wt).token&&(wt.logout(),n="Session expired - please login again"),t.onUnauthorized&&t.onUnauthorized(n),new Error(n)}if(!l.ok){const n=await l.json().catch(()=>({detail:"Request failed"}));throw new Error(n.detail||n.error||n.message||"Request failed")}}async function wc(l,e,t=null,n={}){const{url:s,headers:o}=bc(e,n),i={method:l,headers:o};t&&(i.body=JSON.stringify(t));const f=await fetch(s,i);if(await kc(f,n),f.status===204)return null;const a=await f.json();return a&&a.success===!0&&a.data!==void 0?a.data:a}async function El(l,e,t=null,n={}){return wc(l,e,t,n)}function $c(l){let e,t,n,s,o,i,f=l[3]&&Bn();const a=l[9].default,c=Mt(a,l,l[8],null);return{c(){e=d("button"),f&&f.c(),t=b(),c&&c.c(),u(e,"type",l[4]),u(e,"title",l[6]),u(e,"aria-label",l[7]),u(e,"class",n="btn btn-"+l[0]+" btn-"+l[1]+" svelte-1umzi1p"),e.disabled=l[2]},m(_,p){$(_,e,p),f&&f.m(e,null),r(e,t),c&&c.m(e,null),s=!0,o||(i=X(e,"click",l[11]),o=!0)},p(_,p){_[3]?f||(f=Bn(),f.c(),f.m(e,t)):f&&(f.d(1),f=null),c&&c.p&&(!s||p&256)&&At(c,a,_,_[8],s?jt(a,_[8],p,null):Ot(_[8]),null),(!s||p&16)&&u(e,"type",_[4]),(!s||p&64)&&u(e,"title",_[6]),(!s||p&128)&&u(e,"aria-label",_[7]),(!s||p&3&&n!==(n="btn btn-"+_[0]+" btn-"+_[1]+" svelte-1umzi1p"))&&u(e,"class",n),(!s||p&4)&&(e.disabled=_[2])},i(_){s||(R(c,_),s=!0)},o(_){M(c,_),s=!1},d(_){_&&k(e),f&&f.d(),c&&c.d(_),o=!1,i()}}}function Cc(l){let e,t,n,s,o,i,f=l[3]&&Hn();const a=l[9].default,c=Mt(a,l,l[8],null);return{c(){e=d("a"),f&&f.c(),t=b(),c&&c.c(),u(e,"href",l[5]),u(e,"title",l[6]),u(e,"aria-label",l[7]),u(e,"class",n="btn btn-"+l[0]+" btn-"+l[1]+" svelte-1umzi1p"),ke(e,"disabled",l[2])},m(_,p){$(_,e,p),f&&f.m(e,null),r(e,t),c&&c.m(e,null),s=!0,o||(i=X(e,"click",l[10]),o=!0)},p(_,p){_[3]?f||(f=Hn(),f.c(),f.m(e,t)):f&&(f.d(1),f=null),c&&c.p&&(!s||p&256)&&At(c,a,_,_[8],s?jt(a,_[8],p,null):Ot(_[8]),null),(!s||p&32)&&u(e,"href",_[5]),(!s||p&64)&&u(e,"title",_[6]),(!s||p&128)&&u(e,"aria-label",_[7]),(!s||p&3&&n!==(n="btn btn-"+_[0]+" btn-"+_[1]+" svelte-1umzi1p"))&&u(e,"class",n),(!s||p&7)&&ke(e,"disabled",_[2])},i(_){s||(R(c,_),s=!0)},o(_){M(c,_),s=!1},d(_){_&&k(e),f&&f.d(),c&&c.d(_),o=!1,i()}}}function Bn(l){let e;return{c(){e=d("span"),u(e,"class","spinner svelte-1umzi1p")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function Hn(l){let e;return{c(){e=d("span"),u(e,"class","spinner svelte-1umzi1p")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function yc(l){let e,t,n,s;const o=[Cc,$c],i=[];function f(a,c){return a[5]?0:1}return e=f(l),t=i[e]=o[e](l),{c(){t.c(),n=Fe()},m(a,c){i[e].m(a,c),$(a,n,c),s=!0},p(a,[c]){let _=e;e=f(a),e===_?i[e].p(a,c):(De(),M(i[_],1,1,()=>{i[_]=null}),Ee(),t=i[e],t?t.p(a,c):(t=i[e]=o[e](a),t.c()),R(t,1),t.m(n.parentNode,n))},i(a){s||(R(t),s=!0)},o(a){M(t),s=!1},d(a){a&&k(n),i[e].d(a)}}}function Sc(l,e,t){let{$$slots:n={},$$scope:s}=e,{variant:o="default"}=e,{size:i="md"}=e,{disabled:f=!1}=e,{loading:a=!1}=e,{type:c="button"}=e,{href:_=null}=e,{title:p=void 0}=e,{ariaLabel:m=void 0}=e;function h(g){on.call(this,l,g)}function v(g){on.call(this,l,g)}return l.$$set=g=>{"variant"in g&&t(0,o=g.variant),"size"in g&&t(1,i=g.size),"disabled"in g&&t(2,f=g.disabled),"loading"in g&&t(3,a=g.loading),"type"in g&&t(4,c=g.type),"href"in g&&t(5,_=g.href),"title"in g&&t(6,p=g.title),"ariaLabel"in g&&t(7,m=g.ariaLabel),"$$scope"in g&&t(8,s=g.$$scope)},[o,i,f,a,c,_,p,m,s,n,h,v]}class Ue extends Ct{constructor(e){super(),$t(this,e,Sc,yc,kt,{variant:0,size:1,disabled:2,loading:3,type:4,href:5,title:6,ariaLabel:7})}}const Tc=l=>({}),Gn=l=>({}),zc=l=>({}),Vn=l=>({});function Wn(l,e,t){const n=l.slice();return n[57]=e[t],n[58]=e,n[59]=t,n}function Jn(l,e,t){const n=l.slice();return n[60]=e[t],n}function Kn(l,e,t){const n=l.slice();return n[63]=e[t],n}const Dc=l=>({}),Yn=l=>({}),Ec=l=>({}),Qn=l=>({});function Zn(l){let e;function t(o,i){return o[2]?Lc:qc}let n=t(l),s=n(l);return{c(){s.c(),e=Fe()},m(o,i){s.m(o,i),$(o,e,i)},p(o,i){n===(n=t(o))&&s?s.p(o,i):(s.d(1),s=n(o),s&&(s.c(),s.m(e.parentNode,e)))},d(o){o&&k(e),s.d(o)}}}function qc(l){let e;return{c(){e=d("span"),u(e,"class","brand-dot svelte-18o6zjb")},m(t,n){$(t,e,n)},p:ge,d(t){t&&k(e)}}}function Lc(l){let e,t;return{c(){e=d("img"),ln(e.src,t=l[2])||u(e,"src",t),u(e,"alt",l[0]),u(e,"class","auth-logo svelte-18o6zjb")},m(n,s){$(n,e,s)},p(n,s){s[0]&4&&!ln(e.src,t=n[2])&&u(e,"src",t),s[0]&1&&u(e,"alt",n[0])},d(n){n&&k(e)}}}function Pc(l){let e,t,n,s,o,i,f,a=l[3]&&Zn(l);return{c(){e=d("div"),a&&a.c(),t=b(),n=d("h1"),s=T(l[0]),o=b(),i=d("p"),f=T(l[1]),u(n,"class","svelte-18o6zjb"),u(i,"class","subtitle svelte-18o6zjb"),u(e,"class","auth-header svelte-18o6zjb")},m(c,_){$(c,e,_),a&&a.m(e,null),r(e,t),r(e,n),r(n,s),r(e,o),r(e,i),r(i,f)},p(c,_){c[3]?a?a.p(c,_):(a=Zn(c),a.c(),a.m(e,t)):a&&(a.d(1),a=null),_[0]&1&&U(s,c[0]),_[0]&2&&U(f,c[1])},d(c){c&&k(e),a&&a.d()}}}function Xn(l){let e,t,n,s=pe(l[6]),o=[];for(let f=0;f<s.length;f+=1)o[f]=xn(Kn(l,s,f));let i=!l[7]&&es();return{c(){e=d("div");for(let f=0;f<o.length;f+=1)o[f].c();t=b(),i&&i.c(),n=Fe(),u(e,"class","social-login svelte-18o6zjb")},m(f,a){$(f,e,a);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(e,null);$(f,t,a),i&&i.m(f,a),$(f,n,a)},p(f,a){if(a[0]&67371072|a[1]&1){s=pe(f[6]);let c;for(c=0;c<s.length;c+=1){const _=Kn(f,s,c);o[c]?o[c].p(_,a):(o[c]=xn(_),o[c].c(),o[c].m(e,null))}for(;c<o.length;c+=1)o[c].d(1);o.length=s.length}f[7]?i&&(i.d(1),i=null):i||(i=es(),i.c(),i.m(n.parentNode,n))},d(f){f&&(k(e),k(t),k(n)),Me(o,f),i&&i.d(f)}}}function xn(l){let e,t,n=(l[26][l[63]]||"")+"",s,o=l[63].charAt(0).toUpperCase()+l[63].slice(1)+"",i,f,a,c,_;function p(){return l[43](l[63])}return{c(){e=d("button"),t=d("span"),s=T(`
            Continue with `),i=T(o),f=b(),u(t,"class","social-icon svelte-18o6zjb"),u(e,"class",a="btn-social btn-social-"+l[63]+" svelte-18o6zjb"),e.disabled=l[18]},m(m,h){$(m,e,h),r(e,t),t.innerHTML=n,r(e,s),r(e,i),r(e,f),c||(_=X(e,"click",p),c=!0)},p(m,h){l=m,h[0]&64&&n!==(n=(l[26][l[63]]||"")+"")&&(t.innerHTML=n),h[0]&64&&o!==(o=l[63].charAt(0).toUpperCase()+l[63].slice(1)+"")&&U(i,o),h[0]&64&&a!==(a="btn-social btn-social-"+l[63]+" svelte-18o6zjb")&&u(e,"class",a),h[0]&262144&&(e.disabled=l[18])},d(m){m&&k(e),c=!1,_()}}}function es(l){let e;return{c(){e=d("div"),e.innerHTML='<span class="svelte-18o6zjb">or</span>',u(e,"class","divider svelte-18o6zjb")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function ts(l){let e,t,n,s,o,i,f,a=l[10]&&l[27][l[10]]&&ls(l),c=!l[7]&&ns();return{c(){e=d("button"),a&&a.c(),t=b(),n=T(l[9]),s=b(),c&&c.c(),o=Fe(),u(e,"class","btn-sso svelte-18o6zjb"),e.disabled=l[18]},m(_,p){$(_,e,p),a&&a.m(e,null),r(e,t),r(e,n),$(_,s,p),c&&c.m(_,p),$(_,o,p),i||(f=X(e,"click",l[32]),i=!0)},p(_,p){_[10]&&_[27][_[10]]?a?a.p(_,p):(a=ls(_),a.c(),a.m(e,t)):a&&(a.d(1),a=null),p[0]&512&&U(n,_[9]),p[0]&262144&&(e.disabled=_[18]),_[7]?c&&(c.d(1),c=null):c||(c=ns(),c.c(),c.m(o.parentNode,o))},d(_){_&&(k(e),k(s),k(o)),a&&a.d(),c&&c.d(_),i=!1,f()}}}function ls(l){let e,t=l[27][l[10]]+"";return{c(){e=d("span"),u(e,"class","sso-icon svelte-18o6zjb")},m(n,s){$(n,e,s),e.innerHTML=t},p(n,s){s[0]&1024&&t!==(t=n[27][n[10]]+"")&&(e.innerHTML=t)},d(n){n&&k(e)}}}function ns(l){let e;return{c(){e=d("div"),e.innerHTML='<span class="svelte-18o6zjb">or use email</span>',u(e,"class","divider svelte-18o6zjb")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function ss(l){let e,t,n,s,o,i=l[4]&&os(l);const f=[Nc,Rc],a=[];function c(_,p){return _[17]==="login"?0:1}return t=c(l),n=a[t]=f[t](l),{c(){i&&i.c(),e=b(),n.c(),s=Fe()},m(_,p){i&&i.m(_,p),$(_,e,p),a[t].m(_,p),$(_,s,p),o=!0},p(_,p){_[4]?i?i.p(_,p):(i=os(_),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null);let m=t;t=c(_),t===m?a[t].p(_,p):(De(),M(a[m],1,1,()=>{a[m]=null}),Ee(),n=a[t],n?n.p(_,p):(n=a[t]=f[t](_),n.c()),R(n,1),n.m(s.parentNode,s))},i(_){o||(R(n),o=!0)},o(_){M(n),o=!1},d(_){_&&(k(e),k(s)),i&&i.d(_),a[t].d(_)}}}function os(l){let e,t,n,s,o,i;return{c(){e=d("div"),t=d("button"),t.textContent="Sign In",n=b(),s=d("button"),s.textContent="Sign Up",u(t,"class","tab svelte-18o6zjb"),ke(t,"active",l[17]==="login"),u(s,"class","tab svelte-18o6zjb"),ke(s,"active",l[17]==="signup"),u(e,"class","tabs svelte-18o6zjb")},m(f,a){$(f,e,a),r(e,t),r(e,n),r(e,s),o||(i=[X(t,"click",l[44]),X(s,"click",l[45])],o=!0)},p(f,a){a[0]&131072&&ke(t,"active",f[17]==="login"),a[0]&131072&&ke(s,"active",f[17]==="signup")},d(f){f&&k(e),o=!1,We(i)}}}function Rc(l){let e,t,n,s,o,i,f,a,c,_,p,m,h,v,g,y,C,w,S,D,E,P,z=pe(l[15]),q=[];for(let N=0;N<z.length;N+=1)q[N]=rs(Wn(l,z,N));let A=l[11]&&as(l);return S=new Ue({props:{type:"submit",variant:"primary",loading:l[18],disabled:l[18],$$slots:{default:[Oc]},$$scope:{ctx:l}}}),{c(){e=d("form"),t=d("div"),n=d("label"),n.textContent="Email",s=b(),o=d("input"),i=b(),f=d("div"),a=d("label"),a.textContent="Password",c=b(),_=d("input"),p=b(),m=d("div"),h=d("label"),h.textContent="Confirm Password",v=b(),g=d("input"),y=b();for(let N=0;N<q.length;N+=1)q[N].c();C=b(),A&&A.c(),w=b(),ce(S.$$.fragment),u(n,"for","signup-email"),u(n,"class","svelte-18o6zjb"),u(o,"type","email"),u(o,"id","signup-email"),u(o,"placeholder","you@example.com"),o.required=!0,o.disabled=l[18],u(o,"autocomplete","email"),u(o,"class","svelte-18o6zjb"),u(t,"class","form-group svelte-18o6zjb"),u(a,"for","signup-password"),u(a,"class","svelte-18o6zjb"),u(_,"type","password"),u(_,"id","signup-password"),u(_,"placeholder","••••••••"),_.required=!0,_.disabled=l[18],u(_,"autocomplete","new-password"),u(_,"class","svelte-18o6zjb"),u(f,"class","form-group svelte-18o6zjb"),u(h,"for","signup-confirm"),u(h,"class","svelte-18o6zjb"),u(g,"type","password"),u(g,"id","signup-confirm"),u(g,"placeholder","••••••••"),g.required=!0,g.disabled=l[18],u(g,"autocomplete","new-password"),u(g,"class","svelte-18o6zjb"),u(m,"class","form-group svelte-18o6zjb"),u(e,"class","svelte-18o6zjb")},m(N,I){$(N,e,I),r(e,t),r(t,n),r(t,s),r(t,o),le(o,l[22]),r(e,i),r(e,f),r(f,a),r(f,c),r(f,_),le(_,l[23]),r(e,p),r(e,m),r(m,h),r(m,v),r(m,g),le(g,l[24]),r(e,y);for(let G=0;G<q.length;G+=1)q[G]&&q[G].m(e,null);r(e,C),A&&A.m(e,null),r(e,w),fe(S,e,null),D=!0,E||(P=[X(o,"input",l[48]),X(_,"input",l[49]),X(g,"input",l[50]),X(e,"submit",l[30])],E=!0)},p(N,I){if((!D||I[0]&262144)&&(o.disabled=N[18]),I[0]&4194304&&o.value!==N[22]&&le(o,N[22]),(!D||I[0]&262144)&&(_.disabled=N[18]),I[0]&8388608&&_.value!==N[23]&&le(_,N[23]),(!D||I[0]&262144)&&(g.disabled=N[18]),I[0]&16777216&&g.value!==N[24]&&le(g,N[24]),I[0]&360448){z=pe(N[15]);let F;for(F=0;F<z.length;F+=1){const O=Wn(N,z,F);q[F]?q[F].p(O,I):(q[F]=rs(O),q[F].c(),q[F].m(e,C))}for(;F<q.length;F+=1)q[F].d(1);q.length=z.length}N[11]?A?A.p(N,I):(A=as(N),A.c(),A.m(e,w)):A&&(A.d(1),A=null);const G={};I[0]&262144&&(G.loading=N[18]),I[0]&262144&&(G.disabled=N[18]),I[1]&16777216&&(G.$$scope={dirty:I,ctx:N}),S.$set(G)},i(N){D||(R(S.$$.fragment,N),D=!0)},o(N){M(S.$$.fragment,N),D=!1},d(N){N&&k(e),Me(q,N),A&&A.d(),ue(S),E=!1,We(P)}}}function Nc(l){let e,t,n,s,o,i,f,a,c,_,p,m,h,v,g,y,C=l[5]&&fs(l);return h=new Ue({props:{type:"submit",variant:"primary",loading:l[18],disabled:l[18],$$slots:{default:[Ic]},$$scope:{ctx:l}}}),{c(){e=d("form"),t=d("div"),n=d("label"),n.textContent="Email",s=b(),o=d("input"),i=b(),f=d("div"),a=d("label"),a.textContent="Password",c=b(),_=d("input"),p=b(),C&&C.c(),m=b(),ce(h.$$.fragment),u(n,"for","login-email"),u(n,"class","svelte-18o6zjb"),u(o,"type","email"),u(o,"id","login-email"),u(o,"placeholder","you@example.com"),o.required=!0,o.disabled=l[18],u(o,"autocomplete","email"),u(o,"class","svelte-18o6zjb"),u(t,"class","form-group svelte-18o6zjb"),u(a,"for","login-password"),u(a,"class","svelte-18o6zjb"),u(_,"type","password"),u(_,"id","login-password"),u(_,"placeholder","••••••••"),_.required=!0,_.disabled=l[18],u(_,"autocomplete","current-password"),u(_,"class","svelte-18o6zjb"),u(f,"class","form-group svelte-18o6zjb"),u(e,"class","svelte-18o6zjb")},m(w,S){$(w,e,S),r(e,t),r(t,n),r(t,s),r(t,o),le(o,l[20]),r(e,i),r(e,f),r(f,a),r(f,c),r(f,_),le(_,l[21]),r(e,p),C&&C.m(e,null),r(e,m),fe(h,e,null),v=!0,g||(y=[X(o,"input",l[46]),X(_,"input",l[47]),X(e,"submit",l[29])],g=!0)},p(w,S){(!v||S[0]&262144)&&(o.disabled=w[18]),S[0]&1048576&&o.value!==w[20]&&le(o,w[20]),(!v||S[0]&262144)&&(_.disabled=w[18]),S[0]&2097152&&_.value!==w[21]&&le(_,w[21]),w[5]?C?C.p(w,S):(C=fs(w),C.c(),C.m(e,m)):C&&(C.d(1),C=null);const D={};S[0]&262144&&(D.loading=w[18]),S[0]&262144&&(D.disabled=w[18]),S[1]&16777216&&(D.$$scope={dirty:S,ctx:w}),h.$set(D)},i(w){v||(R(h.$$.fragment,w),v=!0)},o(w){M(h.$$.fragment,w),v=!1},d(w){w&&k(e),C&&C.d(),ue(h),g=!1,We(y)}}}function Mc(l){let e,t,n,s,o,i;function f(){l[53].call(e,l[57])}return{c(){e=d("input"),u(e,"type","text"),u(e,"id",t="signup-"+l[57].name),u(e,"placeholder",n=l[57].placeholder||""),e.required=s=l[57].required,e.disabled=l[18],u(e,"class","svelte-18o6zjb")},m(a,c){$(a,e,c),le(e,l[16][l[57].name]),o||(i=X(e,"input",f),o=!0)},p(a,c){l=a,c[0]&32768&&t!==(t="signup-"+l[57].name)&&u(e,"id",t),c[0]&32768&&n!==(n=l[57].placeholder||"")&&u(e,"placeholder",n),c[0]&32768&&s!==(s=l[57].required)&&(e.required=s),c[0]&262144&&(e.disabled=l[18]),c[0]&98304&&e.value!==l[16][l[57].name]&&le(e,l[16][l[57].name])},d(a){a&&k(e),o=!1,i()}}}function jc(l){let e,t,n,s,o,i;function f(){l[52].call(e,l[57])}return{c(){e=d("textarea"),u(e,"id",t="signup-"+l[57].name),u(e,"placeholder",n=l[57].placeholder||""),e.required=s=l[57].required,e.disabled=l[18],u(e,"rows","3"),u(e,"class","svelte-18o6zjb")},m(a,c){$(a,e,c),le(e,l[16][l[57].name]),o||(i=X(e,"input",f),o=!0)},p(a,c){l=a,c[0]&32768&&t!==(t="signup-"+l[57].name)&&u(e,"id",t),c[0]&32768&&n!==(n=l[57].placeholder||"")&&u(e,"placeholder",n),c[0]&32768&&s!==(s=l[57].required)&&(e.required=s),c[0]&262144&&(e.disabled=l[18]),c[0]&98304&&le(e,l[16][l[57].name])},d(a){a&&k(e),o=!1,i()}}}function Ac(l){let e,t,n,s,o,i,f=pe(l[57].options),a=[];for(let _=0;_<f.length;_+=1)a[_]=is(Jn(l,f,_));function c(){l[51].call(e,l[57])}return{c(){e=d("select"),t=d("option"),t.textContent="Select...";for(let _=0;_<a.length;_+=1)a[_].c();t.__value="",le(t,t.__value),u(e,"id",n="signup-"+l[57].name),e.required=s=l[57].required,e.disabled=l[18],u(e,"class","svelte-18o6zjb"),l[16][l[57].name]===void 0&&Xe(c)},m(_,p){$(_,e,p),r(e,t);for(let m=0;m<a.length;m+=1)a[m]&&a[m].m(e,null);Ne(e,l[16][l[57].name],!0),o||(i=X(e,"change",c),o=!0)},p(_,p){if(l=_,p[0]&32768){f=pe(l[57].options);let m;for(m=0;m<f.length;m+=1){const h=Jn(l,f,m);a[m]?a[m].p(h,p):(a[m]=is(h),a[m].c(),a[m].m(e,null))}for(;m<a.length;m+=1)a[m].d(1);a.length=f.length}p[0]&32768&&n!==(n="signup-"+l[57].name)&&u(e,"id",n),p[0]&32768&&s!==(s=l[57].required)&&(e.required=s),p[0]&262144&&(e.disabled=l[18]),p[0]&98304&&Ne(e,l[16][l[57].name])},d(_){_&&k(e),Me(a,_),o=!1,i()}}}function is(l){let e,t=l[60]+"",n,s;return{c(){e=d("option"),n=T(t),e.__value=s=l[60],le(e,e.__value)},m(o,i){$(o,e,i),r(e,n)},p(o,i){i[0]&32768&&t!==(t=o[60]+"")&&U(n,t),i[0]&32768&&s!==(s=o[60])&&(e.__value=s,le(e,e.__value))},d(o){o&&k(e)}}}function rs(l){let e,t,n=l[57].label+"",s,o,i,f;function a(p,m){return p[57].type==="select"&&p[57].options?Ac:p[57].type==="textarea"?jc:Mc}let c=a(l),_=c(l);return{c(){e=d("div"),t=d("label"),s=T(n),i=b(),_.c(),f=b(),u(t,"for",o="signup-"+l[57].name),u(t,"class","svelte-18o6zjb"),u(e,"class","form-group svelte-18o6zjb")},m(p,m){$(p,e,m),r(e,t),r(t,s),r(e,i),_.m(e,null),r(e,f)},p(p,m){m[0]&32768&&n!==(n=p[57].label+"")&&U(s,n),m[0]&32768&&o!==(o="signup-"+p[57].name)&&u(t,"for",o),c===(c=a(p))&&_?_.p(p,m):(_.d(1),_=c(p),_&&(_.c(),_.m(e,f)))},d(p){p&&k(e),_.d()}}}function as(l){let e,t,n,s,o,i,f,a,c,_,p,m,h;return{c(){e=d("label"),t=d("input"),n=b(),s=d("span"),o=T(l[14]),i=b(),f=d("a"),a=T("Terms"),c=T(` and 
                `),_=d("a"),p=T("Privacy Policy"),u(t,"type","checkbox"),t.disabled=l[18],u(t,"class","svelte-18o6zjb"),u(f,"href",l[12]),u(f,"target","_blank"),u(f,"class","svelte-18o6zjb"),u(_,"href",l[13]),u(_,"target","_blank"),u(_,"class","svelte-18o6zjb"),u(e,"class","terms-checkbox svelte-18o6zjb")},m(v,g){$(v,e,g),r(e,t),t.checked=l[25],r(e,n),r(e,s),r(s,o),r(s,i),r(s,f),r(f,a),r(s,c),r(s,_),r(_,p),m||(h=X(t,"change",l[54]),m=!0)},p(v,g){g[0]&262144&&(t.disabled=v[18]),g[0]&33554432&&(t.checked=v[25]),g[0]&16384&&U(o,v[14]),g[0]&4096&&u(f,"href",v[12]),g[0]&8192&&u(_,"href",v[13])},d(v){v&&k(e),m=!1,h()}}}function Oc(l){let e;return{c(){e=T("Create Account")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function fs(l){let e,t,n;return{c(){e=d("button"),e.textContent="Forgot password?",u(e,"type","button"),u(e,"class","link-btn forgot-link svelte-18o6zjb")},m(s,o){$(s,e,o),t||(n=X(e,"click",l[33]),t=!0)},p:ge,d(s){s&&k(e),t=!1,n()}}}function Ic(l){let e;return{c(){e=T("Sign In")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function us(l){let e,t;return{c(){e=d("p"),t=T(l[19]),u(e,"class","error-message svelte-18o6zjb")},m(n,s){$(n,e,s),r(e,t)},p(n,s){s[0]&524288&&U(t,n[19])},d(n){n&&k(e)}}}function Fc(l){let e,t,n,s,o,i,f,a,c,_;const p=l[42].header,m=Mt(p,l,l[55],Qn),h=m||Pc(l),v=l[42]["before-form"],g=Mt(v,l,l[55],Yn);let y=l[6].length>0&&Xn(l),C=l[8]&&ts(l),w=!l[7]&&ss(l),S=l[19]&&us(l);const D=l[42]["after-form"],E=Mt(D,l,l[55],Vn),P=l[42].footer,z=Mt(P,l,l[55],Gn);return{c(){e=d("div"),t=d("div"),h&&h.c(),n=b(),g&&g.c(),s=b(),y&&y.c(),o=b(),C&&C.c(),i=b(),w&&w.c(),f=b(),S&&S.c(),a=b(),E&&E.c(),c=b(),z&&z.c(),u(t,"class","auth-card glass svelte-18o6zjb"),u(e,"class","auth-container svelte-18o6zjb")},m(q,A){$(q,e,A),r(e,t),h&&h.m(t,null),r(t,n),g&&g.m(t,null),r(t,s),y&&y.m(t,null),r(t,o),C&&C.m(t,null),r(t,i),w&&w.m(t,null),r(t,f),S&&S.m(t,null),r(t,a),E&&E.m(t,null),r(t,c),z&&z.m(t,null),_=!0},p(q,A){m?m.p&&(!_||A[1]&16777216)&&At(m,p,q,q[55],_?jt(p,q[55],A,Ec):Ot(q[55]),Qn):h&&h.p&&(!_||A[0]&15)&&h.p(q,_?A:[-1,-1,-1]),g&&g.p&&(!_||A[1]&16777216)&&At(g,v,q,q[55],_?jt(v,q[55],A,Dc):Ot(q[55]),Yn),q[6].length>0?y?y.p(q,A):(y=Xn(q),y.c(),y.m(t,o)):y&&(y.d(1),y=null),q[8]?C?C.p(q,A):(C=ts(q),C.c(),C.m(t,i)):C&&(C.d(1),C=null),q[7]?w&&(De(),M(w,1,1,()=>{w=null}),Ee()):w?(w.p(q,A),A[0]&128&&R(w,1)):(w=ss(q),w.c(),R(w,1),w.m(t,f)),q[19]?S?S.p(q,A):(S=us(q),S.c(),S.m(t,a)):S&&(S.d(1),S=null),E&&E.p&&(!_||A[1]&16777216)&&At(E,D,q,q[55],_?jt(D,q[55],A,zc):Ot(q[55]),Vn),z&&z.p&&(!_||A[1]&16777216)&&At(z,P,q,q[55],_?jt(P,q[55],A,Tc):Ot(q[55]),Gn)},i(q){_||(R(h,q),R(g,q),R(w),R(E,q),R(z,q),_=!0)},o(q){M(h,q),M(g,q),M(w),M(E,q),M(z,q),_=!1},d(q){q&&k(e),h&&h.d(q),g&&g.d(q),y&&y.d(),C&&C.d(),w&&w.d(),S&&S.d(),E&&E.d(q),z&&z.d(q)}}}function Uc(l,e,t){let{$$slots:n={},$$scope:s}=e,{title:o="Welcome"}=e,{subtitle:i="Sign in to your account"}=e,{logo:f=null}=e,{showLogo:a=!0}=e,{allowSignup:c=!0}=e,{allowPasswordReset:_=!0}=e,{requireEmailVerification:p=!1}=e,{socialProviders:m=[]}=e,{socialOnly:h=!1}=e,{ssoEnabled:v=!1}=e,{ssoButtonText:g="Sign in with SSO"}=e,{ssoProvider:y=null}=e,{ssoUrl:C="/api/v1/auth/sso"}=e,{showTerms:w=!1}=e,{termsUrl:S="/terms"}=e,{privacyUrl:D="/privacy"}=e,{termsText:E="I agree to the"}=e,{signupFields:P=[]}=e,{apiBase:z="/api/v1"}=e,{loginEndpoint:q="/auth/login"}=e,{registerEndpoint:A="/auth/register"}=e,{meEndpoint:N="/auth/me"}=e,{onSuccess:I=null}=e,{onError:G=null}=e;const F=Al();let O="login",H=!1,L=null,j="",B="",K="",Y="",Z="",oe=!1,x={};const J={google:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4"/><path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"/><path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" fill="#FBBC05"/><path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"/></svg>',github:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z"/></svg>',microsoft:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M11.4 11.4H0V0h11.4v11.4z" fill="#F25022"/><path d="M24 11.4H12.6V0H24v11.4z" fill="#7FBA00"/><path d="M11.4 24H0V12.6h11.4V24z" fill="#00A4EF"/><path d="M24 24H12.6V12.6H24V24z" fill="#FFB900"/></svg>',apple:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z"/></svg>',facebook:'<svg viewBox="0 0 24 24" fill="#1877F2"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>'},W={okta:'<svg viewBox="0 0 24 24" fill="currentColor"><circle cx="12" cy="12" r="10" fill="#007DC1"/><path d="M12 6a6 6 0 100 12 6 6 0 000-12zm0 9a3 3 0 110-6 3 3 0 010 6z" fill="white"/></svg>',azure:'<svg viewBox="0 0 24 24" fill="currentColor"><path d="M13.05 4.24L6.56 18.05l2.97.01 1.42-3.22h5.09l-.96 3.21h3.03L13.05 4.24z" fill="#0078D4"/></svg>'};function re(me){t(17,O=me),t(19,L=null)}async function V(me){me.preventDefault(),t(18,H=!0),t(19,L=null);try{const Le=await El("POST",q,{username:j,password:B},{skipAuth:!0}),Re=(Le==null?void 0:Le.access_token)||(Le==null?void 0:Le.token);if(!Re)throw new Error("Login failed - no token returned");Sn(Re);let Pe=Le==null?void 0:Le.user;if(Pe||(Pe=await El("GET",N)),!Pe)throw new Error("Login failed - no user info");wt.setUser(Pe);const Be={user:Pe,token:Re};F("success",Be),I&&I(Be)}catch(Le){t(19,L=Le.message),F("error",{error:Le.message,type:"login"}),G&&G({error:Le.message,type:"login"})}finally{t(18,H=!1)}}async function ie(me){if(me.preventDefault(),Y!==Z){t(19,L="Passwords do not match");return}if(w&&!oe){t(19,L="Please accept the terms and conditions");return}t(18,H=!0),t(19,L=null);try{const Le={username:K,email:K,password:Y,...x};await El("POST",A,Le,{skipAuth:!0});const Re=await El("POST",q,{username:K,password:Y},{skipAuth:!0}),Pe=(Re==null?void 0:Re.access_token)||(Re==null?void 0:Re.token);if(!Pe)throw new Error("Signup failed - no token returned");Sn(Pe);let Be=Re==null?void 0:Re.user;if(Be||(Be=await El("GET",N)),!Be)throw new Error("Signup failed - no user info");wt.setUser(Be);const tt={user:Be,token:Pe};F("success",tt),I&&I(tt)}catch(Le){t(19,L=Le.message),F("error",{error:Le.message,type:"signup"}),G&&G({error:Le.message,type:"signup"})}finally{t(18,H=!1)}}async function _e(me){window.location.href=`${z}/auth/oauth/${me}`}async function te(){window.location.href=C}function ve(){F("passwordReset",{email:j})}const ae=me=>_e(me),se=()=>re("login"),ee=()=>re("signup");function Q(){j=this.value,t(20,j)}function be(){B=this.value,t(21,B)}function we(){K=this.value,t(22,K)}function Ge(){Y=this.value,t(23,Y)}function nt(){Z=this.value,t(24,Z)}function vt(me){x[me.name]=_t(this),t(16,x),t(15,P),t(15,P)}function qe(me){x[me.name]=this.value,t(16,x),t(15,P),t(15,P)}function Se(me){x[me.name]=this.value,t(16,x),t(15,P),t(15,P)}function Ae(){oe=this.checked,t(25,oe)}return l.$$set=me=>{"title"in me&&t(0,o=me.title),"subtitle"in me&&t(1,i=me.subtitle),"logo"in me&&t(2,f=me.logo),"showLogo"in me&&t(3,a=me.showLogo),"allowSignup"in me&&t(4,c=me.allowSignup),"allowPasswordReset"in me&&t(5,_=me.allowPasswordReset),"requireEmailVerification"in me&&t(34,p=me.requireEmailVerification),"socialProviders"in me&&t(6,m=me.socialProviders),"socialOnly"in me&&t(7,h=me.socialOnly),"ssoEnabled"in me&&t(8,v=me.ssoEnabled),"ssoButtonText"in me&&t(9,g=me.ssoButtonText),"ssoProvider"in me&&t(10,y=me.ssoProvider),"ssoUrl"in me&&t(35,C=me.ssoUrl),"showTerms"in me&&t(11,w=me.showTerms),"termsUrl"in me&&t(12,S=me.termsUrl),"privacyUrl"in me&&t(13,D=me.privacyUrl),"termsText"in me&&t(14,E=me.termsText),"signupFields"in me&&t(15,P=me.signupFields),"apiBase"in me&&t(36,z=me.apiBase),"loginEndpoint"in me&&t(37,q=me.loginEndpoint),"registerEndpoint"in me&&t(38,A=me.registerEndpoint),"meEndpoint"in me&&t(39,N=me.meEndpoint),"onSuccess"in me&&t(40,I=me.onSuccess),"onError"in me&&t(41,G=me.onError),"$$scope"in me&&t(55,s=me.$$scope)},l.$$.update=()=>{l.$$.dirty[0]&98304&&P.forEach(me=>{me.name in x||t(16,x[me.name]=me.default||"",x)})},[o,i,f,a,c,_,m,h,v,g,y,w,S,D,E,P,x,O,H,L,j,B,K,Y,Z,oe,J,W,re,V,ie,_e,te,ve,p,C,z,q,A,N,I,G,n,ae,se,ee,Q,be,we,Ge,nt,vt,qe,Se,Ae,s]}class Bc extends Ct{constructor(e){super(),$t(this,e,Uc,Fc,kt,{title:0,subtitle:1,logo:2,showLogo:3,allowSignup:4,allowPasswordReset:5,requireEmailVerification:34,socialProviders:6,socialOnly:7,ssoEnabled:8,ssoButtonText:9,ssoProvider:10,ssoUrl:35,showTerms:11,termsUrl:12,privacyUrl:13,termsText:14,signupFields:15,apiBase:36,loginEndpoint:37,registerEndpoint:38,meEndpoint:39,onSuccess:40,onError:41},null,[-1,-1,-1])}}const Rn="theme",cs="dark";function Hc(){return typeof localStorage>"u"?cs:localStorage.getItem(Rn)||cs}function Tn(l){typeof document<"u"&&document.documentElement.setAttribute("data-theme",l)}function Gc(){const l=Hc(),{subscribe:e,set:t}=ll(l);return Tn(l),{subscribe:e,set(n){typeof localStorage<"u"&&localStorage.setItem(Rn,n),Tn(n),t(n)}}}const Af=Gc();function Vc(){Af.update(l=>{const e=l==="dark"?"light":"dark";return typeof localStorage<"u"&&localStorage.setItem(Rn,e),Tn(e),e})}function Wc(l){let e,t;return{c(){e=Rl("svg"),t=Rl("path"),u(t,"d","M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"),u(e,"viewBox","0 0 24 24"),u(e,"fill","none"),u(e,"stroke","currentColor"),u(e,"stroke-width","2"),u(e,"class","svelte-8jsmst")},m(n,s){$(n,e,s),r(e,t)},d(n){n&&k(e)}}}function Jc(l){let e,t,n;return{c(){e=Rl("svg"),t=Rl("circle"),n=Rl("path"),u(t,"cx","12"),u(t,"cy","12"),u(t,"r","5"),u(n,"d","M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"),u(e,"viewBox","0 0 24 24"),u(e,"fill","none"),u(e,"stroke","currentColor"),u(e,"stroke-width","2"),u(e,"class","svelte-8jsmst")},m(s,o){$(s,e,o),r(e,t),r(e,n)},d(s){s&&k(e)}}}function Kc(l){let e,t,n,s;function o(a,c){return a[0]==="dark"?Jc:Wc}let i=o(l),f=i(l);return{c(){e=d("button"),f.c(),u(e,"class","theme-toggle svelte-8jsmst"),u(e,"title",t=l[0]==="dark"?"Switch to light mode":"Switch to dark mode"),u(e,"aria-label","Toggle theme")},m(a,c){$(a,e,c),f.m(e,null),n||(s=X(e,"click",Vc),n=!0)},p(a,[c]){i!==(i=o(a))&&(f.d(1),f=i(a),f&&(f.c(),f.m(e,null))),c&1&&t!==(t=a[0]==="dark"?"Switch to light mode":"Switch to dark mode")&&u(e,"title",t)},i:ge,o:ge,d(a){a&&k(e),f.d(),n=!1,s()}}}function Yc(l,e,t){let n;return dt(l,Af,s=>t(0,n=s)),[n]}class Qc extends Ct{constructor(e){super(),$t(this,e,Yc,Kc,kt,{})}}const Zc=l=>({}),_s=l=>({}),Xc=l=>({}),ds=l=>({});function ps(l){let e;function t(o,i){return o[1]?e1:xc}let n=t(l),s=n(l);return{c(){s.c(),e=Fe()},m(o,i){s.m(o,i),$(o,e,i)},p(o,i){n===(n=t(o))&&s?s.p(o,i):(s.d(1),s=n(o),s&&(s.c(),s.m(e.parentNode,e)))},d(o){o&&k(e),s.d(o)}}}function xc(l){let e;return{c(){e=d("span"),u(e,"class","brand-dot svelte-x14ysc")},m(t,n){$(t,e,n)},p:ge,d(t){t&&k(e)}}}function e1(l){let e,t;return{c(){e=d("img"),ln(e.src,t=l[1])||u(e,"src",t),u(e,"alt",l[0]),u(e,"class","header-logo svelte-x14ysc")},m(n,s){$(n,e,s)},p(n,s){s&2&&!ln(e.src,t=n[1])&&u(e,"src",t),s&1&&u(e,"alt",n[0])},d(n){n&&k(e)}}}function ms(l){let e;return{c(){e=d("span"),e.textContent="MOCK",u(e,"class","mock-badge svelte-x14ysc")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function vs(l){let e,t;return e=new Qc({}),{c(){ce(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},i(n){t||(R(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){ue(e,n)}}}function hs(l){let e,t=(l[8].user.email||l[8].user.username)+"",n;return{c(){e=d("span"),n=T(t),u(e,"class","user-email svelte-x14ysc")},m(s,o){$(s,e,o),r(e,n)},p(s,o){o&256&&t!==(t=(s[8].user.email||s[8].user.username)+"")&&U(n,t)},d(s){s&&k(e)}}}function gs(l){let e,t;return e=new Ue({props:{variant:"ghost",size:"sm",$$slots:{default:[t1]},$$scope:{ctx:l}}}),e.$on("click",l[9]),{c(){ce(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const o={};s&4160&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(R(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){ue(e,n)}}}function t1(l){let e;return{c(){e=T(l[6])},m(t,n){$(t,e,n)},p(t,n){n&64&&U(e,t[6])},d(t){t&&k(e)}}}function l1(l){let e,t,n,s,o,i,f,a,c,_,p,m,h,v=l[2]&&ps(l);const g=l[11]["after-title"],y=Mt(g,l,l[12],ds),C=l[11].actions,w=Mt(C,l,l[12],_s);let S=l[7]&&ms(),D=l[4]&&vs(),E=l[3]&&l[8].user&&hs(l),P=l[5]&&l[8].token&&gs(l);return{c(){e=d("header"),t=d("div"),v&&v.c(),n=b(),s=d("h1"),o=T(l[0]),i=b(),y&&y.c(),f=b(),a=d("div"),w&&w.c(),c=b(),S&&S.c(),_=b(),D&&D.c(),p=b(),E&&E.c(),m=b(),P&&P.c(),u(s,"class","svelte-x14ysc"),u(t,"class","header-brand svelte-x14ysc"),u(a,"class","header-actions svelte-x14ysc"),u(e,"class","header glass svelte-x14ysc")},m(z,q){$(z,e,q),r(e,t),v&&v.m(t,null),r(t,n),r(t,s),r(s,o),r(t,i),y&&y.m(t,null),r(e,f),r(e,a),w&&w.m(a,null),r(a,c),S&&S.m(a,null),r(a,_),D&&D.m(a,null),r(a,p),E&&E.m(a,null),r(a,m),P&&P.m(a,null),h=!0},p(z,[q]){z[2]?v?v.p(z,q):(v=ps(z),v.c(),v.m(t,n)):v&&(v.d(1),v=null),(!h||q&1)&&U(o,z[0]),y&&y.p&&(!h||q&4096)&&At(y,g,z,z[12],h?jt(g,z[12],q,Xc):Ot(z[12]),ds),w&&w.p&&(!h||q&4096)&&At(w,C,z,z[12],h?jt(C,z[12],q,Zc):Ot(z[12]),_s),z[7]?S||(S=ms(),S.c(),S.m(a,_)):S&&(S.d(1),S=null),z[4]?D?q&16&&R(D,1):(D=vs(),D.c(),R(D,1),D.m(a,p)):D&&(De(),M(D,1,1,()=>{D=null}),Ee()),z[3]&&z[8].user?E?E.p(z,q):(E=hs(z),E.c(),E.m(a,m)):E&&(E.d(1),E=null),z[5]&&z[8].token?P?(P.p(z,q),q&288&&R(P,1)):(P=gs(z),P.c(),R(P,1),P.m(a,null)):P&&(De(),M(P,1,1,()=>{P=null}),Ee())},i(z){h||(R(y,z),R(w,z),R(D),R(P),h=!0)},o(z){M(y,z),M(w,z),M(D),M(P),h=!1},d(z){z&&k(e),v&&v.d(),y&&y.d(z),w&&w.d(z),S&&S.d(),D&&D.d(),E&&E.d(),P&&P.d()}}}function n1(l,e,t){var C,w;let n;dt(l,wt,S=>t(8,n=S));let{$$slots:s={},$$scope:o}=e,{title:i="Dashboard"}=e,{logo:f=null}=e,{showLogo:a=!0}=e,{showUser:c=!0}=e,{showThemeToggle:_=!1}=e,{showLogout:p=!0}=e,{logoutText:m="Logout"}=e,{showMockBadge:h=!1}=e;const v=Al();let g=h;try{typeof window<"u"&&(g=h||((w=(C=import.meta)==null?void 0:C.env)==null?void 0:w.VITE_MOCK_API)==="1"||localStorage.getItem("mockApi")==="1")}catch{g=h}function y(){gc(),v("logout")}return l.$$set=S=>{"title"in S&&t(0,i=S.title),"logo"in S&&t(1,f=S.logo),"showLogo"in S&&t(2,a=S.showLogo),"showUser"in S&&t(3,c=S.showUser),"showThemeToggle"in S&&t(4,_=S.showThemeToggle),"showLogout"in S&&t(5,p=S.showLogout),"logoutText"in S&&t(6,m=S.logoutText),"showMockBadge"in S&&t(10,h=S.showMockBadge),"$$scope"in S&&t(12,o=S.$$scope)},[i,f,a,c,_,p,m,g,n,y,h,s,o]}class s1 extends Ct{constructor(e){super(),$t(this,e,n1,l1,kt,{title:0,logo:1,showLogo:2,showUser:3,showThemeToggle:4,showLogout:5,logoutText:6,showMockBadge:10})}}function o1(l){let e,t,n;const s=l[2].default,o=Mt(s,l,l[1],null);return{c(){e=d("span"),o&&o.c(),u(e,"class",t="badge badge-"+l[0]+" svelte-1d0la3i")},m(i,f){$(i,e,f),o&&o.m(e,null),n=!0},p(i,[f]){o&&o.p&&(!n||f&2)&&At(o,s,i,i[1],n?jt(s,i[1],f,null):Ot(i[1]),null),(!n||f&1&&t!==(t="badge badge-"+i[0]+" svelte-1d0la3i"))&&u(e,"class",t)},i(i){n||(R(o,i),n=!0)},o(i){M(o,i),n=!1},d(i){i&&k(e),o&&o.d(i)}}}function i1(l,e,t){let{$$slots:n={},$$scope:s}=e,{variant:o="info"}=e;return l.$$set=i=>{"variant"in i&&t(0,o=i.variant),"$$scope"in i&&t(1,s=i.$$scope)},[o,s,n]}class Ze extends Ct{constructor(e){super(),$t(this,e,i1,o1,kt,{variant:0})}}const r1=l=>({}),bs=l=>({}),a1=l=>({}),ks=l=>({});function ws(l){let e,t,n,s=l[0]&&$s(l);const o=l[5].header,i=Mt(o,l,l[4],ks);return{c(){e=d("div"),s&&s.c(),t=b(),i&&i.c(),u(e,"class","card-header svelte-1qbuf8h")},m(f,a){$(f,e,a),s&&s.m(e,null),r(e,t),i&&i.m(e,null),n=!0},p(f,a){f[0]?s?s.p(f,a):(s=$s(f),s.c(),s.m(e,t)):s&&(s.d(1),s=null),i&&i.p&&(!n||a&16)&&At(i,o,f,f[4],n?jt(o,f[4],a,a1):Ot(f[4]),ks)},i(f){n||(R(i,f),n=!0)},o(f){M(i,f),n=!1},d(f){f&&k(e),s&&s.d(),i&&i.d(f)}}}function $s(l){let e,t;return{c(){e=d("span"),t=T(l[0]),u(e,"class","card-title svelte-1qbuf8h")},m(n,s){$(n,e,s),r(e,t)},p(n,s){s&1&&U(t,n[0])},d(n){n&&k(e)}}}function Cs(l){let e,t;const n=l[5].footer,s=Mt(n,l,l[4],bs);return{c(){e=d("div"),s&&s.c(),u(e,"class","card-footer svelte-1qbuf8h")},m(o,i){$(o,e,i),s&&s.m(e,null),t=!0},p(o,i){s&&s.p&&(!t||i&16)&&At(s,n,o,o[4],t?jt(n,o[4],i,r1):Ot(o[4]),bs)},i(o){t||(R(s,o),t=!0)},o(o){M(s,o),t=!1},d(o){o&&k(e),s&&s.d(o)}}}function f1(l){let e,t,n,s,o,i=(l[0]||l[3].header)&&ws(l);const f=l[5].default,a=Mt(f,l,l[4],null);let c=l[3].footer&&Cs(l);return{c(){e=d("div"),i&&i.c(),t=b(),n=d("div"),a&&a.c(),s=b(),c&&c.c(),u(n,"class","card-body svelte-1qbuf8h"),u(e,"class","card svelte-1qbuf8h"),ke(e,"glass",l[1]),ke(e,"no-padding",!l[2])},m(_,p){$(_,e,p),i&&i.m(e,null),r(e,t),r(e,n),a&&a.m(n,null),r(e,s),c&&c.m(e,null),o=!0},p(_,[p]){_[0]||_[3].header?i?(i.p(_,p),p&9&&R(i,1)):(i=ws(_),i.c(),R(i,1),i.m(e,t)):i&&(De(),M(i,1,1,()=>{i=null}),Ee()),a&&a.p&&(!o||p&16)&&At(a,f,_,_[4],o?jt(f,_[4],p,null):Ot(_[4]),null),_[3].footer?c?(c.p(_,p),p&8&&R(c,1)):(c=Cs(_),c.c(),R(c,1),c.m(e,null)):c&&(De(),M(c,1,1,()=>{c=null}),Ee()),(!o||p&2)&&ke(e,"glass",_[1]),(!o||p&4)&&ke(e,"no-padding",!_[2])},i(_){o||(R(i),R(a,_),R(c),o=!0)},o(_){M(i),M(a,_),M(c),o=!1},d(_){_&&k(e),i&&i.d(),a&&a.d(_),c&&c.d()}}}function u1(l,e,t){let{$$slots:n={},$$scope:s}=e;const o=$f(n);let{title:i=""}=e,{glass:f=!1}=e,{padding:a=!0}=e;return l.$$set=c=>{"title"in c&&t(0,i=c.title),"glass"in c&&t(1,f=c.glass),"padding"in c&&t(2,a=c.padding),"$$scope"in c&&t(4,s=c.$$scope)},[i,f,a,o,s,n]}class ft extends Ct{constructor(e){super(),$t(this,e,u1,f1,kt,{title:0,glass:1,padding:2})}}function Of(l){const e=l-1;return e*e*e+1}function ys(l,{delay:e=0,duration:t=400,easing:n=gf}={}){const s=+getComputedStyle(l).opacity;return{delay:e,duration:t,easing:n,css:o=>`opacity: ${o*s}`}}function Ss(l,{delay:e=0,duration:t=400,easing:n=Of,x:s=0,y:o=0,opacity:i=0}={}){const f=getComputedStyle(l),a=+f.opacity,c=f.transform==="none"?"":f.transform,_=a*(1-i),[p,m]=In(s),[h,v]=In(o);return{delay:e,duration:t,easing:n,css:(g,y)=>`
			transform: ${c} translate(${(1-g)*p}${m}, ${(1-g)*h}${v});
			opacity: ${a-_*y}`}}function Ts(l,{delay:e=0,duration:t=400,easing:n=Of,start:s=0,opacity:o=0}={}){const i=getComputedStyle(l),f=+i.opacity,a=i.transform==="none"?"":i.transform,c=1-s,_=f*(1-o);return{delay:e,duration:t,easing:n,css:(p,m)=>`
			transform: ${a} scale(${1-c*m});
			opacity: ${f-_*m}
		`}}const c1=l=>({}),zs=l=>({}),_1=l=>({}),Ds=l=>({});function Es(l){let e,t,n,s,o,i,f,a,c,_,p=(l[1]||l[6].header)&&qs(l);const m=l[9].default,h=Mt(m,l,l[8],null);let v=l[6].footer&&Ps(l);return{c(){e=d("div"),t=d("div"),p&&p.c(),n=b(),s=d("div"),h&&h.c(),o=b(),v&&v.c(),u(s,"class","modal-body svelte-f0wwwf"),u(t,"class","modal svelte-f0wwwf"),qt(t,"max-width",l[2]),u(e,"class","modal-overlay svelte-f0wwwf"),u(e,"role","dialog"),u(e,"aria-modal","true")},m(g,y){$(g,e,y),r(e,t),p&&p.m(t,null),r(t,n),r(t,s),h&&h.m(s,null),r(t,o),v&&v.m(t,null),a=!0,c||(_=X(e,"click",l[4]),c=!0)},p(g,y){g[1]||g[6].header?p?(p.p(g,y),y&66&&R(p,1)):(p=qs(g),p.c(),R(p,1),p.m(t,n)):p&&(De(),M(p,1,1,()=>{p=null}),Ee()),h&&h.p&&(!a||y&256)&&At(h,m,g,g[8],a?jt(m,g[8],y,null):Ot(g[8]),null),g[6].footer?v?(v.p(g,y),y&64&&R(v,1)):(v=Ps(g),v.c(),R(v,1),v.m(t,null)):v&&(De(),M(v,1,1,()=>{v=null}),Ee()),(!a||y&4)&&qt(t,"max-width",g[2])},i(g){a||(R(p),R(h,g),R(v),g&&Xe(()=>{a&&(i||(i=Ll(t,Ts,{duration:200,start:.95},!0)),i.run(1))}),g&&Xe(()=>{a&&(f||(f=Ll(e,ys,{duration:150},!0)),f.run(1))}),a=!0)},o(g){M(p),M(h,g),M(v),g&&(i||(i=Ll(t,Ts,{duration:200,start:.95},!1)),i.run(0)),g&&(f||(f=Ll(e,ys,{duration:150},!1)),f.run(0)),a=!1},d(g){g&&k(e),p&&p.d(),h&&h.d(g),v&&v.d(),g&&i&&i.end(),g&&f&&f.end(),c=!1,_()}}}function qs(l){let e,t,n,s,o,i,f,a=l[1]&&Ls(l);const c=l[9].header,_=Mt(c,l,l[8],Ds);return{c(){e=d("div"),a&&a.c(),t=b(),_&&_.c(),n=b(),s=d("button"),s.innerHTML='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-f0wwwf"><path d="M18 6L6 18M6 6l12 12"></path></svg>',u(s,"class","modal-close svelte-f0wwwf"),u(s,"aria-label","Close"),u(e,"class","modal-header svelte-f0wwwf")},m(p,m){$(p,e,m),a&&a.m(e,null),r(e,t),_&&_.m(e,null),r(e,n),r(e,s),o=!0,i||(f=X(s,"click",l[3]),i=!0)},p(p,m){p[1]?a?a.p(p,m):(a=Ls(p),a.c(),a.m(e,t)):a&&(a.d(1),a=null),_&&_.p&&(!o||m&256)&&At(_,c,p,p[8],o?jt(c,p[8],m,_1):Ot(p[8]),Ds)},i(p){o||(R(_,p),o=!0)},o(p){M(_,p),o=!1},d(p){p&&k(e),a&&a.d(),_&&_.d(p),i=!1,f()}}}function Ls(l){let e,t;return{c(){e=d("h3"),t=T(l[1]),u(e,"class","svelte-f0wwwf")},m(n,s){$(n,e,s),r(e,t)},p(n,s){s&2&&U(t,n[1])},d(n){n&&k(e)}}}function Ps(l){let e,t;const n=l[9].footer,s=Mt(n,l,l[8],zs);return{c(){e=d("div"),s&&s.c(),u(e,"class","modal-footer svelte-f0wwwf")},m(o,i){$(o,e,i),s&&s.m(e,null),t=!0},p(o,i){s&&s.p&&(!t||i&256)&&At(s,n,o,o[8],t?jt(n,o[8],i,c1):Ot(o[8]),zs)},i(o){t||(R(s,o),t=!0)},o(o){M(s,o),t=!1},d(o){o&&k(e),s&&s.d(o)}}}function d1(l){let e,t,n,s,o=l[0]&&Es(l);return{c(){o&&o.c(),e=Fe()},m(i,f){o&&o.m(i,f),$(i,e,f),t=!0,n||(s=X(window,"keydown",l[5]),n=!0)},p(i,[f]){i[0]?o?(o.p(i,f),f&1&&R(o,1)):(o=Es(i),o.c(),R(o,1),o.m(e.parentNode,e)):o&&(De(),M(o,1,1,()=>{o=null}),Ee())},i(i){t||(R(o),t=!0)},o(i){M(o),t=!1},d(i){i&&k(e),o&&o.d(i),n=!1,s()}}}function p1(l,e,t){let{$$slots:n={},$$scope:s}=e;const o=$f(n);let{open:i=!1}=e,{title:f=""}=e,{width:a="500px"}=e,{closeOnOverlay:c=!0}=e;const _=Al();function p(){t(0,i=!1),_("close")}function m(v){c&&v.target===v.currentTarget&&p()}function h(v){v.key==="Escape"&&p()}return l.$$set=v=>{"open"in v&&t(0,i=v.open),"title"in v&&t(1,f=v.title),"width"in v&&t(2,a=v.width),"closeOnOverlay"in v&&t(7,c=v.closeOnOverlay),"$$scope"in v&&t(8,s=v.$$scope)},[i,f,a,p,m,h,o,c,s,n]}class ol extends Ct{constructor(e){super(),$t(this,e,p1,d1,kt,{open:0,title:1,width:2,closeOnOverlay:7})}}function Rs(l,e,t){const n=l.slice();return n[6]=e[t],n}function Ns(l){let e,t=l[6].icon+"",n;return{c(){e=d("span"),n=T(t),u(e,"class","tab-icon svelte-1po08a6")},m(s,o){$(s,e,o),r(e,n)},p(s,o){o&2&&t!==(t=s[6].icon+"")&&U(n,t)},d(s){s&&k(e)}}}function Ms(l){let e,t,n=l[6].label+"",s,o,i,f,a=l[6].icon&&Ns(l);function c(){return l[4](l[6])}return{c(){e=d("button"),a&&a.c(),t=b(),s=T(n),o=b(),u(e,"class","tab svelte-1po08a6"),ke(e,"active",l[0]===l[6].id)},m(_,p){$(_,e,p),a&&a.m(e,null),r(e,t),r(e,s),r(e,o),i||(f=X(e,"click",c),i=!0)},p(_,p){l=_,l[6].icon?a?a.p(l,p):(a=Ns(l),a.c(),a.m(e,t)):a&&(a.d(1),a=null),p&2&&n!==(n=l[6].label+"")&&U(s,n),p&3&&ke(e,"active",l[0]===l[6].id)},d(_){_&&k(e),a&&a.d(),i=!1,f()}}}function m1(l){let e,t=pe(l[1]),n=[];for(let s=0;s<t.length;s+=1)n[s]=Ms(Rs(l,t,s));return{c(){e=d("div");for(let s=0;s<n.length;s+=1)n[s].c();u(e,"class","tabs svelte-1po08a6"),ke(e,"scrollable",l[2])},m(s,o){$(s,e,o);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(e,null)},p(s,[o]){if(o&11){t=pe(s[1]);let i;for(i=0;i<t.length;i+=1){const f=Rs(s,t,i);n[i]?n[i].p(f,o):(n[i]=Ms(f),n[i].c(),n[i].m(e,null))}for(;i<n.length;i+=1)n[i].d(1);n.length=t.length}o&4&&ke(e,"scrollable",s[2])},i:ge,o:ge,d(s){s&&k(e),Me(n,s)}}}function v1(l,e,t){let{tabs:n=[]}=e,{active:s=""}=e,{scrollable:o=!0}=e;const i=Al();function f(c){t(0,s=c),i("change",c)}const a=c=>f(c.id);return l.$$set=c=>{"tabs"in c&&t(1,n=c.tabs),"active"in c&&t(0,s=c.active),"scrollable"in c&&t(2,o=c.scrollable)},[s,n,o,f,a]}class h1 extends Ct{constructor(e){super(),$t(this,e,v1,m1,kt,{tabs:1,active:0,scrollable:2})}}function g1(){const{subscribe:l,update:e}=ll([]);let t=0;function n(o,i="info",f=3e3){const a={id:++t,message:o,type:i};return e(c=>[...c,a]),f>0&&setTimeout(()=>s(a.id),f),a.id}function s(o){e(i=>i.filter(f=>f.id!==o))}return{subscribe:l,success:(o,i)=>n(o,"success",i),error:(o,i)=>n(o,"error",i??5e3),warning:(o,i)=>n(o,"warning",i),info:(o,i)=>n(o,"info",i),add:n,remove:s}}const $e=g1();function js(l,e,t){const n=l.slice();return n[2]=e[t],n}function As(l,e){let t,n,s=e[2].message+"",o,i,f,a,c,_,p,m,h;function v(){return e[1](e[2])}return{key:l,first:null,c(){t=d("div"),n=d("span"),o=T(s),i=b(),f=d("button"),f.textContent="×",a=b(),u(n,"class","toast-message svelte-1l5lsfn"),u(f,"class","toast-close svelte-1l5lsfn"),u(t,"class",c="toast toast-"+e[2].type+" svelte-1l5lsfn"),this.first=t},m(g,y){$(g,t,y),r(t,n),r(n,o),r(t,i),r(t,f),r(t,a),p=!0,m||(h=X(f,"click",v),m=!0)},p(g,y){e=g,(!p||y&1)&&s!==(s=e[2].message+"")&&U(o,s),(!p||y&1&&c!==(c="toast toast-"+e[2].type+" svelte-1l5lsfn"))&&u(t,"class",c)},i(g){p||(g&&Xe(()=>{p&&(_||(_=Ll(t,Ss,{x:100,duration:200},!0)),_.run(1))}),p=!0)},o(g){g&&(_||(_=Ll(t,Ss,{x:100,duration:200},!1)),_.run(0)),p=!1},d(g){g&&k(t),g&&_&&_.end(),m=!1,h()}}}function b1(l){let e,t=[],n=new Map,s,o=pe(l[0]);const i=f=>f[2].id;for(let f=0;f<o.length;f+=1){let a=js(l,o,f),c=i(a);n.set(c,t[f]=As(c,a))}return{c(){e=d("div");for(let f=0;f<t.length;f+=1)t[f].c();u(e,"class","toast-container svelte-1l5lsfn")},m(f,a){$(f,e,a);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null);s=!0},p(f,[a]){a&1&&(o=pe(f[0]),De(),t=qf(t,a,i,1,f,o,n,e,Ef,As,null,js),Ee())},i(f){if(!s){for(let a=0;a<o.length;a+=1)R(t[a]);s=!0}},o(f){for(let a=0;a<t.length;a+=1)M(t[a]);s=!1},d(f){f&&k(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function k1(l,e,t){let n;return dt(l,$e,o=>t(0,n=o)),[n,o=>$e.remove(o.id)]}class w1 extends Ct{constructor(e){super(),$t(this,e,k1,b1,kt,{})}}const $1={internal:{allowSignup:!1,allowPasswordReset:!1,socialProviders:[],ssoEnabled:!1,showTerms:!1,subtitle:"Sign in to continue"}};vc(["vergnetp@yahoo.fr"]);function Ft(){return Nf("do_token_local")}function C1(l){Mf("do_token_local",l,30)}function zn(){return Nf("cf_token_local")}function y1(l){Mf("cf_token_local",l,30)}const If="/api/v1",Ff=["/infra/servers","/infra/snapshots","/infra/setup","/infra/deploy","/infra/registry","/infra/agent","/infra/architecture","/infra/fleet","/infra/projects","/infra/containers","/infra/services","/infra/deployments"];function Uf(l,e={}){const t=jl(wt),n={"Content-Type":"application/json"},s=l.startsWith("/auth/login")||l.startsWith("/auth/register");t.token&&t.token.trim()!==""&&!s&&!e.skipAuth&&(n.Authorization=`Bearer ${t.token}`);let o=If+l;if(!e.skipDoToken&&(l.startsWith("/infra/")||Ff.some(f=>l.startsWith(f)))){const f=Ft();if(!f)return{error:"DO token not set",url:null,headers:null};const a=o.includes("?")?"&":"?";o+=`${a}do_token=${encodeURIComponent(f)}`}return{url:o,headers:n,error:null}}async function Nn(l){if(l.status===401){let e="Authentication failed";try{const n=await l.json();e=n.detail||n.error||n.message||e}catch{}throw jl(wt).token&&(wt.logout(),e="Session expired - please login again"),new Error(e)}if(!l.ok){const e=await l.json().catch(()=>({detail:"Request failed"}));throw new Error(e.detail||e.error||e.message||"Request failed")}}async function He(l,e,t=null,n={}){const{url:s,headers:o,error:i}=Uf(e,n);if(i)return console.debug(`Skipping ${e} - ${i}`),null;const f={method:l,headers:o};t&&(f.body=JSON.stringify(t));const a=await fetch(s,f);if(await Nn(a),a.status===204)return null;const c=await a.json();return c&&c.success===!0&&c.data!==void 0?c.data:c}async function en(l,e,t=null,n,s={}){const{url:o,headers:i,error:f}=Uf(e,s);if(f)throw new Error(f);const a={method:l,headers:i};t&&(a.body=JSON.stringify(t));const c=await fetch(o,a);await Nn(c);const _=c.body.getReader(),p=new TextDecoder;let m="";for(;;){const{done:h,value:v}=await _.read();if(h)break;m+=p.decode(v,{stream:!0});const g=m.split(`
`);m=g.pop()||"";for(const y of g)if(y.startsWith("data: "))try{const C=JSON.parse(y.slice(6));n(C)}catch{}}}async function S1(l,e,t,n={}){const s=jl(wt);let o=If+l;if(!n.skipDoToken&&Ff.some(m=>l.startsWith(m))){const m=Ft();if(!m)throw new Error("DO token not set");const h=o.includes("?")?"&":"?";o+=`${h}do_token=${encodeURIComponent(m)}`}const f={};s.token&&(f.Authorization=`Bearer ${s.token}`);const a=await fetch(o,{method:"POST",headers:f,body:e});await Nn(a);const c=a.body.getReader(),_=new TextDecoder;let p="";for(;;){const{done:m,value:h}=await c.read();if(m)break;p+=_.decode(h,{stream:!0});const v=p.split(`
`);p=v.pop()||"";for(const g of v)if(g.startsWith("data: "))try{const y=JSON.parse(g.slice(6));t(y)}catch{}}}function T1(l,e,t={}){const{refreshInterval:n=0,revalidateOnFocus:s=!0,revalidateOnMount:o=!0,dedupingInterval:i=2e3,initialData:f=null}=t,a=ll({data:f,error:null,loading:!1,lastFetched:null});let c=0,_=null,p=null,m=0;async function h(S=!1){const D=Date.now();return!S&&_&&D-c<i||(c=D,a.update(E=>{var P;return{...E,loading:E.data===null||((P=E.data)==null?void 0:P.length)===0}}),_=(async()=>{try{const E=await e();return a.set({data:E,error:null,loading:!1,lastFetched:new Date}),E}catch(E){throw a.update(P=>({...P,error:E.message||"Fetch failed",loading:!1})),E}finally{_=null}})()),_}function v(){document.visibilityState==="visible"&&s&&h()}function g(){n>0&&!p&&(p=setInterval(()=>h(),n))}function y(){p&&(clearInterval(p),p=null)}const{subscribe:C}=a;function w(S){m++,m===1&&(s&&typeof document<"u"&&document.addEventListener("visibilitychange",v),o&&h(),g());const D=C(S);return()=>{D(),m--,m===0&&(typeof document<"u"&&document.removeEventListener("visibilitychange",v),y())}}return{subscribe:w,refresh:()=>h(!0),mutate:S=>a.update(D=>({...D,data:S})),get:()=>jl(a)}}function _n(l,e={}){const{transform:t=s=>s,...n}=e;return T1(l,async()=>{const s=await He("GET",l);return t(s)},n)}function z1(l,e={}){const{transform:t=a=>a,...n}=e,s=ll({data:null,error:null,loading:!1,lastFetched:null});let o=null,i=null;async function f(a){const c=l(a);if(!c){s.set({data:null,error:null,loading:!1,lastFetched:null});return}return i&&JSON.stringify(a)===JSON.stringify(o)||(o=a,s.update(_=>({..._,loading:!0})),i=(async()=>{try{const _=await He("GET",c),p=t(_);return s.set({data:p,error:null,loading:!1,lastFetched:new Date}),p}catch(_){throw s.update(p=>({...p,error:_.message||"Fetch failed",loading:!1})),_}finally{i=null}})()),i}return{subscribe:s.subscribe,fetch:f,refresh:()=>o&&f(o),clear:()=>{o=null,s.set({data:null,error:null,loading:!1,lastFetched:null})}}}const Os=ll("infra");function D1(){const{subscribe:l,set:e}=ll(null);return typeof window<"u"&&e(Ft()),{subscribe:l,refresh(){e(Ft())},set(t){e(t)}}}const Mn=D1(),ql=ll({project:"",env:"",server:"",container:"",range:"30d",tail:!1}),Xt=_n("/infra/servers",{transform:l=>(l==null?void 0:l.servers)||l||[],refreshInterval:6e4,revalidateOnFocus:!0,initialData:[]}),jn=_n("/infra/projects",{transform:l=>(l==null?void 0:l.projects)||[],refreshInterval:12e4,initialData:[]}),dn=_n("/infra/snapshots",{transform:l=>(l==null?void 0:l.snapshots)||[],refreshInterval:6e4,initialData:[]}),bl=_n("/infra/deployments/history",{transform:l=>(l==null?void 0:l.deployments)||[],refreshInterval:3e4,initialData:[]}),Dn=z1(l=>l!=null&&l.server?`/infra/agent/${l.server}/containers`:null,{transform:l=>{const e=(l==null?void 0:l.containers)||l||[];return(Array.isArray(e)?e:[]).map(t=>({id:t.ID||t.Id||t.id,name:t.Names||t.Name||t.name||"unknown",image:t.Image||t.image,status:t.Status||t.State||t.status,state:t.State||t.state}))}}),pn=ml(Xt,l=>(l==null?void 0:l.data)||[]),An=ml(jn,l=>(l==null?void 0:l.data)||[]),E1=ml(dn,l=>(l==null?void 0:l.data)||[]),Bf=ml(bl,l=>(l==null?void 0:l.data)||[]),q1=ml(Dn,l=>(l==null?void 0:l.data)||[]),L1="2.1.0";function P1(){const l=typeof localStorage<"u"&&localStorage.getItem("theme")||"dark",{subscribe:e,set:t}=ll(l);return typeof document<"u"&&document.documentElement.setAttribute("data-theme",l),{subscribe:e,set(n){typeof localStorage<"u"&&localStorage.setItem("theme",n),typeof document<"u"&&document.documentElement.setAttribute("data-theme",n),t(n)}}}const $n=P1();function Is(l,e,t){const n=l.slice();return n[20]=e[t],n}function Fs(l,e,t){var o,i,f;const n=l.slice();n[23]=e[t];const s=n[23].ip||((f=(i=(o=n[23].networks)==null?void 0:o.v4)==null?void 0:i[0])==null?void 0:f.ip_address);return n[24]=s,n}function Us(l,e,t){const n=l.slice();return n[27]=e[t],n}function Bs(l,e,t){const n=l.slice();return n[30]=e[t],n}function Hs(l){let e,t=l[30]+"",n,s;return{c(){e=d("option"),n=T(t),e.__value=s=l[30],le(e,e.__value)},m(o,i){$(o,e,i),r(e,n)},p(o,i){i[0]&16&&t!==(t=o[30]+"")&&U(n,t),i[0]&16&&s!==(s=o[30])&&(e.__value=s,le(e,e.__value))},d(o){o&&k(e)}}}function Gs(l){let e,t=l[27]+"",n,s;return{c(){e=d("option"),n=T(t),e.__value=s=l[27],le(e,e.__value)},m(o,i){$(o,e,i),r(e,n)},p(o,i){i[0]&8&&t!==(t=o[27]+"")&&U(n,t),i[0]&8&&s!==(s=o[27])&&(e.__value=s,le(e,e.__value))},d(o){o&&k(e)}}}function Vs(l){let e,t=(l[23].name||"unnamed")+"",n,s,o=l[24]+"",i,f,a;return{c(){e=d("option"),n=T(t),s=T(" ("),i=T(o),f=T(")"),e.__value=a=l[23].id,le(e,e.__value)},m(c,_){$(c,e,_),r(e,n),r(e,s),r(e,i),r(e,f)},p(c,_){_[0]&32&&t!==(t=(c[23].name||"unnamed")+"")&&U(n,t),_[0]&32&&o!==(o=c[24]+"")&&U(i,o),_[0]&32&&a!==(a=c[23].id)&&(e.__value=a,le(e,e.__value))},d(c){c&&k(e)}}}function Ws(l){let e,t=l[24]&&l[23].id&&Vs(l);return{c(){t&&t.c(),e=Fe()},m(n,s){t&&t.m(n,s),$(n,e,s)},p(n,s){n[24]&&n[23].id?t?t.p(n,s):(t=Vs(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(n){n&&k(e),t&&t.d(n)}}}function Js(l){let e,t,n,s,o,i,f,a,c=pe(l[6]||[]),_=[];for(let p=0;p<c.length;p+=1)_[p]=Ks(Is(l,c,p));return{c(){e=d("div"),t=d("label"),t.textContent="Container:",n=b(),s=d("select"),o=d("option"),o.textContent="(All)";for(let p=0;p<_.length;p+=1)_[p].c();u(t,"class","svelte-1wvrz0m"),o.__value="",le(o,o.__value),u(s,"class","svelte-1wvrz0m"),u(e,"class","scope-field svelte-1wvrz0m")},m(p,m){$(p,e,m),r(e,t),r(e,n),r(e,s),r(s,o);for(let h=0;h<_.length;h+=1)_[h]&&_[h].m(s,null);Ne(s,l[2].container),f||(a=X(s,"change",l[16]),f=!0)},p(p,m){if(m[0]&64){c=pe(p[6]||[]);let h;for(h=0;h<c.length;h+=1){const v=Is(p,c,h);_[h]?_[h].p(v,m):(_[h]=Ks(v),_[h].c(),_[h].m(s,null))}for(;h<_.length;h+=1)_[h].d(1);_.length=c.length}m[0]&20&&i!==(i=p[2].container)&&Ne(s,p[2].container)},d(p){p&&k(e),Me(_,p),f=!1,a()}}}function Ks(l){let e,t=l[20].name+"",n,s;return{c(){e=d("option"),n=T(t),e.__value=s=l[20].name,le(e,e.__value)},m(o,i){$(o,e,i),r(e,n)},p(o,i){i[0]&64&&t!==(t=o[20].name+"")&&U(n,t),i[0]&64&&s!==(s=o[20].name)&&(e.__value=s,le(e,e.__value))},d(o){o&&k(e)}}}function Ys(l){let e,t,n,s,o,i;return{c(){e=d("label"),t=d("input"),s=T(`
      Tail`),u(t,"type","checkbox"),t.checked=n=l[2].tail,u(t,"class","svelte-1wvrz0m"),u(e,"class","tail-toggle svelte-1wvrz0m")},m(f,a){$(f,e,a),r(e,t),r(e,s),o||(i=X(t,"change",l[18]),o=!0)},p(f,a){a[0]&20&&n!==(n=f[2].tail)&&(t.checked=n)},d(f){f&&k(e),o=!1,i()}}}function R1(l){let e,t,n,s,o,i,f,a,c,_,p,m,h,v,g,y,C,w,S,D,E,P,z,q,A,N,I,G,F,O,H,L,j,B,K,Y,Z,oe,x,J,W,re,V=pe(l[4]),ie=[];for(let Q=0;Q<V.length;Q+=1)ie[Q]=Hs(Bs(l,V,Q));let _e=pe(l[3]),te=[];for(let Q=0;Q<_e.length;Q+=1)te[Q]=Gs(Us(l,_e,Q));let ve=pe(l[5]||[]),ae=[];for(let Q=0;Q<ve.length;Q+=1)ae[Q]=Ws(Fs(l,ve,Q));let se=l[1]&&l[2].server&&Js(l),ee=l[0]&&Ys(l);return{c(){e=d("div"),t=d("div"),n=d("div"),n.innerHTML='<span class="brand-dot svelte-1wvrz0m"></span> <span>cc</span>',s=b(),o=d("div"),i=d("label"),i.textContent="Project:",f=b(),a=d("select"),c=d("option"),c.textContent="All";for(let Q=0;Q<ie.length;Q+=1)ie[Q].c();p=b(),m=d("div"),h=d("label"),h.textContent="Env:",v=b(),g=d("select"),y=d("option"),y.textContent="All";for(let Q=0;Q<te.length;Q+=1)te[Q].c();w=b(),S=d("div"),D=d("label"),D.textContent="Server:",E=b(),P=d("select"),z=d("option"),z.textContent="(Fleet)";for(let Q=0;Q<ae.length;Q+=1)ae[Q].c();A=b(),se&&se.c(),N=b(),I=d("div"),G=d("label"),G.textContent="Last",F=b(),O=d("select"),H=d("option"),H.textContent="15m",L=d("option"),L.textContent="1h",j=d("option"),j.textContent="6h",B=d("option"),B.textContent="24h",K=d("option"),K.textContent="7d",Y=d("option"),Y.textContent="30d",oe=b(),x=d("button"),x.innerHTML='<svg viewBox="0 0 24 24" fill="none" class="svelte-1wvrz0m"><path d="M20 12a8 8 0 1 1-2.34-5.66" stroke="currentColor" stroke-width="2" stroke-linecap="round"></path><path d="M20 4v6h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg>',J=b(),ee&&ee.c(),u(n,"class","scope-brand svelte-1wvrz0m"),u(i,"class","svelte-1wvrz0m"),c.__value="",le(c,c.__value),u(a,"class","svelte-1wvrz0m"),u(o,"class","scope-field svelte-1wvrz0m"),u(h,"class","svelte-1wvrz0m"),y.__value="",le(y,y.__value),u(g,"class","svelte-1wvrz0m"),u(m,"class","scope-field svelte-1wvrz0m"),u(D,"class","svelte-1wvrz0m"),z.__value="",le(z,z.__value),u(P,"class","svelte-1wvrz0m"),u(S,"class","scope-field svelte-1wvrz0m"),u(G,"class","svelte-1wvrz0m"),H.__value="15m",le(H,H.__value),L.__value="1h",le(L,L.__value),j.__value="6h",le(j,j.__value),B.__value="24h",le(B,B.__value),K.__value="7d",le(K,K.__value),Y.__value="30d",le(Y,Y.__value),u(O,"class","svelte-1wvrz0m"),u(I,"class","scope-field svelte-1wvrz0m"),u(x,"class","iconbtn svelte-1wvrz0m"),u(x,"title","Refresh"),u(t,"class","scope-bar-inner svelte-1wvrz0m"),u(e,"class","scope-bar glass svelte-1wvrz0m")},m(Q,be){$(Q,e,be),r(e,t),r(t,n),r(t,s),r(t,o),r(o,i),r(o,f),r(o,a),r(a,c);for(let we=0;we<ie.length;we+=1)ie[we]&&ie[we].m(a,null);Ne(a,l[2].project),r(t,p),r(t,m),r(m,h),r(m,v),r(m,g),r(g,y);for(let we=0;we<te.length;we+=1)te[we]&&te[we].m(g,null);Ne(g,l[2].env),r(t,w),r(t,S),r(S,D),r(S,E),r(S,P),r(P,z);for(let we=0;we<ae.length;we+=1)ae[we]&&ae[we].m(P,null);Ne(P,l[2].server),r(t,A),se&&se.m(t,null),r(t,N),r(t,I),r(I,G),r(I,F),r(I,O),r(O,H),r(O,L),r(O,j),r(O,B),r(O,K),r(O,Y),Ne(O,l[2].range),r(t,oe),r(t,x),r(e,J),ee&&ee.m(e,null),W||(re=[X(a,"change",l[13]),X(g,"change",l[14]),X(P,"change",l[15]),X(O,"change",l[17]),X(x,"click",l[10])],W=!0)},p(Q,be){if(be[0]&16){V=pe(Q[4]);let we;for(we=0;we<V.length;we+=1){const Ge=Bs(Q,V,we);ie[we]?ie[we].p(Ge,be):(ie[we]=Hs(Ge),ie[we].c(),ie[we].m(a,null))}for(;we<ie.length;we+=1)ie[we].d(1);ie.length=V.length}if(be[0]&20&&_!==(_=Q[2].project)&&Ne(a,Q[2].project),be[0]&8){_e=pe(Q[3]);let we;for(we=0;we<_e.length;we+=1){const Ge=Us(Q,_e,we);te[we]?te[we].p(Ge,be):(te[we]=Gs(Ge),te[we].c(),te[we].m(g,null))}for(;we<te.length;we+=1)te[we].d(1);te.length=_e.length}if(be[0]&20&&C!==(C=Q[2].env)&&Ne(g,Q[2].env),be[0]&32){ve=pe(Q[5]||[]);let we;for(we=0;we<ve.length;we+=1){const Ge=Fs(Q,ve,we);ae[we]?ae[we].p(Ge,be):(ae[we]=Ws(Ge),ae[we].c(),ae[we].m(P,null))}for(;we<ae.length;we+=1)ae[we].d(1);ae.length=ve.length}be[0]&20&&q!==(q=Q[2].server)&&Ne(P,Q[2].server),Q[1]&&Q[2].server?se?se.p(Q,be):(se=Js(Q),se.c(),se.m(t,N)):se&&(se.d(1),se=null),be[0]&20&&Z!==(Z=Q[2].range)&&Ne(O,Q[2].range),Q[0]?ee?ee.p(Q,be):(ee=Ys(Q),ee.c(),ee.m(e,null)):ee&&(ee.d(1),ee=null)},i:ge,o:ge,d(Q){Q&&k(e),Me(ie,Q),Me(te,Q),Me(ae,Q),se&&se.d(),ee&&ee.d(),W=!1,We(re)}}}function N1(l,e,t){let n,s,o,i,f,a,c;dt(l,ql,z=>t(2,o=z)),dt(l,Bf,z=>t(11,i=z)),dt(l,An,z=>t(12,f=z)),dt(l,pn,z=>t(5,a=z)),dt(l,q1,z=>t(6,c=z));let{showTail:_=!1}=e,{showContainer:p=!1}=e;const m=Al();function h(z,q){ql.update(A=>({...A,[z]:q})),m("change")}function v(z){ql.update(q=>({...q,server:z,container:""})),m("change")}function g(z){ql.update(q=>({...q,tail:z})),m("change")}function y(){m("refresh")}const C=z=>h("project",z.target.value),w=z=>h("env",z.target.value),S=z=>v(z.target.value),D=z=>h("container",z.target.value),E=z=>h("range",z.target.value),P=z=>g(z.target.checked);return l.$$set=z=>{"showTail"in z&&t(0,_=z.showTail),"showContainer"in z&&t(1,p=z.showContainer)},l.$$.update=()=>{l.$$.dirty[0]&6144&&t(4,n=[...new Set([...f||[],...(i||[]).map(z=>z.project).filter(Boolean)])].sort()),l.$$.dirty[0]&2048&&t(3,s=[...new Set(["prod","staging","uat","test","dev",...(i||[]).map(z=>z.environment).filter(Boolean)])].sort()),l.$$.dirty[0]&4&&(o.server?Dn.fetch({server:o.server}):(Dn.clear(),o.container&&ql.update(z=>({...z,container:""}))))},[_,p,o,s,n,a,c,h,v,g,y,i,f,C,w,S,D,E,P]}class M1 extends Ct{constructor(e){super(),$t(this,e,N1,R1,kt,{showTail:0,showContainer:1},null,[-1,-1])}}function Qs(l,e,t){const n=l.slice();n[29]=e[t];const s=V1(n[29]);n[30]=s;const o=tn(n[30]);n[31]=o;const i=W1(n[29]);n[32]=i;const f=n[8][n[30]];return n[33]=f,n}function Zs(l){let e;return{c(){e=d("span"),e.textContent="⚠",u(e,"class","health-warn svelte-3mbtsx"),u(e,"title","High resource usage")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function Xs(l){let e;return{c(){e=d("span"),e.textContent="⚠️",u(e,"class","agent-warn svelte-3mbtsx"),u(e,"title","Agent outdated")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function j1(l){let e;return{c(){e=d("span"),e.textContent="offline",u(e,"class","metric-inline offline svelte-3mbtsx")},m(t,n){$(t,e,n)},p:ge,d(t){t&&k(e)}}}function A1(l){let e,t,n,s,o;return{c(){e=d("span"),t=b(),n=d("span"),s=b(),o=d("span"),u(e,"class","metric-skeleton svelte-3mbtsx"),u(n,"class","metric-skeleton svelte-3mbtsx"),u(o,"class","metric-skeleton svelte-3mbtsx")},m(i,f){$(i,e,f),$(i,t,f),$(i,n,f),$(i,s,f),$(i,o,f)},p:ge,d(i){i&&(k(e),k(t),k(n),k(s),k(o))}}}function O1(l){let e,t,n=l[3].cpu.toFixed(0)+"",s,o,i,f,a,c,_=l[3].mem.toFixed(0)+"",p,m,h,v,g,y,C=l[3].disk.toFixed(0)+"",w,S,D,E,P,z=(l[3].netIn||l[3].netOut)&&xs(l);return{c(){e=d("span"),t=T("CPU "),s=T(n),o=T("%"),f=b(),a=d("span"),c=T("MEM "),p=T(_),m=T("%"),v=b(),g=d("span"),y=T("DISK "),w=T(C),S=T("%"),E=b(),z&&z.c(),P=Fe(),u(e,"class",i="metric-inline "+zl(l[3].cpu)+" svelte-3mbtsx"),u(a,"class",h="metric-inline "+zl(l[3].mem)+" svelte-3mbtsx"),u(g,"class",D="metric-inline "+zl(l[3].disk)+" svelte-3mbtsx")},m(q,A){$(q,e,A),r(e,t),r(e,s),r(e,o),$(q,f,A),$(q,a,A),r(a,c),r(a,p),r(a,m),$(q,v,A),$(q,g,A),r(g,y),r(g,w),r(g,S),$(q,E,A),z&&z.m(q,A),$(q,P,A)},p(q,A){A[0]&8&&n!==(n=q[3].cpu.toFixed(0)+"")&&U(s,n),A[0]&8&&i!==(i="metric-inline "+zl(q[3].cpu)+" svelte-3mbtsx")&&u(e,"class",i),A[0]&8&&_!==(_=q[3].mem.toFixed(0)+"")&&U(p,_),A[0]&8&&h!==(h="metric-inline "+zl(q[3].mem)+" svelte-3mbtsx")&&u(a,"class",h),A[0]&8&&C!==(C=q[3].disk.toFixed(0)+"")&&U(w,C),A[0]&8&&D!==(D="metric-inline "+zl(q[3].disk)+" svelte-3mbtsx")&&u(g,"class",D),q[3].netIn||q[3].netOut?z?z.p(q,A):(z=xs(q),z.c(),z.m(P.parentNode,P)):z&&(z.d(1),z=null)},d(q){q&&(k(e),k(f),k(a),k(v),k(g),k(E),k(P)),z&&z.d(q)}}}function xs(l){let e,t,n=Zl(l[3].netIn)+"",s,o,i=Zl(l[3].netOut)+"",f;return{c(){e=d("span"),t=T("↓"),s=T(n),o=T(" ↑"),f=T(i),u(e,"class","metric-inline net svelte-3mbtsx")},m(a,c){$(a,e,c),r(e,t),r(e,s),r(e,o),r(e,f)},p(a,c){c[0]&8&&n!==(n=Zl(a[3].netIn)+"")&&U(s,n),c[0]&8&&i!==(i=Zl(a[3].netOut)+"")&&U(f,i)},d(a){a&&k(e)}}}function eo(l){let e,t;return e=new Ze({props:{variant:"info",$$slots:{default:[I1]},$$scope:{ctx:l}}}),{c(){ce(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const o={};s[0]&1|s[1]&32&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(R(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){ue(e,n)}}}function I1(l){let e=l[0].project+"",t;return{c(){t=T(e)},m(n,s){$(n,t,s)},p(n,s){s[0]&1&&e!==(e=n[0].project+"")&&U(t,e)},d(n){n&&k(t)}}}function F1(l){let e,t=pe(l[6]),n=[];for(let s=0;s<t.length;s+=1)n[s]=to(Qs(l,t,s));return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=Fe()},m(s,o){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(s,o);$(s,e,o)},p(s,o){if(o[0]&459072){t=pe(s[6]);let i;for(i=0;i<t.length;i+=1){const f=Qs(s,t,i);n[i]?n[i].p(f,o):(n[i]=to(f),n[i].c(),n[i].m(e.parentNode,e))}for(;i<n.length;i+=1)n[i].d(1);n.length=t.length}},d(s){s&&k(e),Me(n,s)}}}function U1(l){let e;return{c(){e=d("span"),e.textContent="No containers",u(e,"class","empty-text svelte-3mbtsx")},m(t,n){$(t,e,n)},p:ge,d(t){t&&k(e)}}}function B1(l){let e;return{c(){e=d("span"),e.textContent="Loading...",u(e,"class","loading-text svelte-3mbtsx")},m(t,n){$(t,e,n)},p:ge,d(t){t&&k(e)}}}function to(l){let e,t,n,s,o,i=l[31]+"",f,a,c,_,p=l[33]==="restart"?"...":"↻",m,h,v,g,y,C,w,S,D,E,P,z;function q(){return l[23](l[30])}function A(){return l[24](l[30])}function N(){return l[25](l[30])}return{c(){e=d("div"),t=d("span"),s=b(),o=d("span"),f=T(i),a=b(),c=d("div"),_=d("button"),m=T(p),v=b(),g=d("button"),g.textContent="📋",y=b(),C=d("button"),w=T("×"),D=b(),u(t,"class",n="container-status "+lo(l[32])+" svelte-3mbtsx"),u(o,"class","container-name svelte-3mbtsx"),u(_,"class","pill-btn svelte-3mbtsx"),u(_,"title","Restart"),_.disabled=h=l[33],u(g,"class","pill-btn svelte-3mbtsx"),u(g,"title","Logs"),u(C,"class","pill-btn danger svelte-3mbtsx"),u(C,"title","Remove"),C.disabled=S=l[33],u(c,"class","container-actions svelte-3mbtsx"),u(e,"class","container-pill svelte-3mbtsx"),u(e,"title",E=l[30]),ke(e,"busy",l[33])},m(I,G){$(I,e,G),r(e,t),r(e,s),r(e,o),r(o,f),r(e,a),r(e,c),r(c,_),r(_,m),r(c,v),r(c,g),r(c,y),r(c,C),r(C,w),r(e,D),P||(z=[X(_,"click",q),X(g,"click",A),X(C,"click",N)],P=!0)},p(I,G){l=I,G[0]&64&&n!==(n="container-status "+lo(l[32])+" svelte-3mbtsx")&&u(t,"class",n),G[0]&64&&i!==(i=l[31]+"")&&U(f,i),G[0]&320&&p!==(p=l[33]==="restart"?"...":"↻")&&U(m,p),G[0]&320&&h!==(h=l[33])&&(_.disabled=h),G[0]&320&&S!==(S=l[33])&&(C.disabled=S),G[0]&64&&E!==(E=l[30])&&u(e,"title",E),G[0]&320&&ke(e,"busy",l[33])},d(I){I&&k(e),P=!1,We(z)}}}function H1(l){var se;let e,t,n,s,o,i,f,a=(l[0].name||"Unnamed")+"",c,_,p,m,h,v,g,y=(((se=l[0].region)==null?void 0:se.slug)||l[0].region||"")+"",C,w,S,D,E,P,z,q,A,N,I,G,F,O=l[7]||l[9]?"...":"↻",H,L,j,B,K,Y,Z,oe,x,J=l[11]&&Zs(),W=l[12]&&Xs();function re(ee,Q){if(ee[4]&&ee[3])return O1;if(ee[4]&&ee[9])return A1;if(!ee[4])return j1}let V=re(l),ie=V&&V(l),_e=l[1]&&l[0].project&&eo(l);function te(ee,Q){return ee[7]&&ee[6].length===0?B1:ee[6].length===0&&ee[2]?U1:F1}let ve=te(l),ae=ve(l);return{c(){e=d("div"),t=d("div"),n=d("div"),s=d("span"),i=b(),f=d("span"),c=T(a),_=b(),J&&J.c(),p=b(),m=d("code"),h=T(l[13]),v=b(),g=d("span"),C=T(y),w=b(),W&&W.c(),S=b(),D=d("div"),ie&&ie.c(),E=b(),P=d("span"),z=T("£"),q=T(l[10]),A=T("/mo"),N=b(),I=d("div"),_e&&_e.c(),G=b(),F=d("button"),H=T(O),j=b(),B=d("button"),B.textContent="🗑️",K=b(),Y=d("div"),ae.c(),u(s,"class",o="status-dot "+l[14](l[5])+" svelte-3mbtsx"),u(f,"class","server-name svelte-3mbtsx"),u(m,"class","server-ip svelte-3mbtsx"),u(g,"class","server-meta svelte-3mbtsx"),u(n,"class","server-info svelte-3mbtsx"),u(P,"class","metric-inline cost svelte-3mbtsx"),u(D,"class","server-metrics-inline svelte-3mbtsx"),u(F,"class","icon-btn svelte-3mbtsx"),u(F,"title","Refresh"),F.disabled=L=l[7]||l[9],u(B,"class","icon-btn danger svelte-3mbtsx"),u(B,"title","Destroy"),u(I,"class","server-actions svelte-3mbtsx"),u(t,"class","server-header svelte-3mbtsx"),u(Y,"class","containers svelte-3mbtsx"),u(e,"class","server-card svelte-3mbtsx")},m(ee,Q){$(ee,e,Q),r(e,t),r(t,n),r(n,s),r(n,i),r(n,f),r(f,c),r(n,_),J&&J.m(n,null),r(n,p),r(n,m),r(m,h),r(n,v),r(n,g),r(g,C),r(n,w),W&&W.m(n,null),r(t,S),r(t,D),ie&&ie.m(D,null),r(D,E),r(D,P),r(P,z),r(P,q),r(P,A),r(t,N),r(t,I),_e&&_e.m(I,null),r(I,G),r(I,F),r(F,H),r(I,j),r(I,B),r(e,K),r(e,Y),ae.m(Y,null),Z=!0,oe||(x=[X(F,"click",l[19]),X(B,"click",l[22])],oe=!0)},p(ee,Q){var be;(!Z||Q[0]&32&&o!==(o="status-dot "+ee[14](ee[5])+" svelte-3mbtsx"))&&u(s,"class",o),(!Z||Q[0]&1)&&a!==(a=(ee[0].name||"Unnamed")+"")&&U(c,a),ee[11]?J||(J=Zs(),J.c(),J.m(n,p)):J&&(J.d(1),J=null),(!Z||Q[0]&8192)&&U(h,ee[13]),(!Z||Q[0]&1)&&y!==(y=(((be=ee[0].region)==null?void 0:be.slug)||ee[0].region||"")+"")&&U(C,y),ee[12]?W||(W=Xs(),W.c(),W.m(n,null)):W&&(W.d(1),W=null),V===(V=re(ee))&&ie?ie.p(ee,Q):(ie&&ie.d(1),ie=V&&V(ee),ie&&(ie.c(),ie.m(D,E))),(!Z||Q[0]&1024)&&U(q,ee[10]),ee[1]&&ee[0].project?_e?(_e.p(ee,Q),Q[0]&3&&R(_e,1)):(_e=eo(ee),_e.c(),R(_e,1),_e.m(I,G)):_e&&(De(),M(_e,1,1,()=>{_e=null}),Ee()),(!Z||Q[0]&640)&&O!==(O=ee[7]||ee[9]?"...":"↻")&&U(H,O),(!Z||Q[0]&640&&L!==(L=ee[7]||ee[9]))&&(F.disabled=L),ve===(ve=te(ee))&&ae?ae.p(ee,Q):(ae.d(1),ae=ve(ee),ae&&(ae.c(),ae.m(Y,null)))},i(ee){Z||(R(_e),Z=!0)},o(ee){M(_e),Z=!1},d(ee){ee&&k(e),J&&J.d(),W&&W.d(),ie&&ie.d(),_e&&_e.d(),ae.d(),oe=!1,We(x)}}}function G1(l){return l.includes("4gb")?24:l.includes("2gb")?12:l.includes("1gb")?6:l.includes("512mb")?4:6}function lo(l){if(!l)return"gray";const e=l.toLowerCase();return e==="running"?"green":e==="exited"||e==="stopped"?"yellow":e==="restarting"?"blue":"red"}function zl(l){return l>=90?"danger":l>=70?"warning":"ok"}function V1(l){return l.Names&&typeof l.Names=="string"?l.Names.replace(/^\//,""):Array.isArray(l.Names)&&l.Names.length>0?l.Names[0].replace(/^\//,""):l.Name?l.Name.replace(/^\//,""):l.name?l.name:l.ID?l.ID.substring(0,12):l.Id?l.Id.substring(0,12):"unknown"}function W1(l){return l.State||l.state||l.Status||"unknown"}function tn(l){if(!l)return"unknown";const e=l.split("-");return e.length>=3&&e[0].length<=10?e.slice(2).join("-"):l}function Zl(l){return l?l<1024?`${l}B`:l<1048576?`${(l/1024).toFixed(0)}K`:l<1073741824?`${(l/1048576).toFixed(1)}M`:`${(l/1073741824).toFixed(1)}G`:"0"}function J1(l,e,t){let n,s,o,i,f,a,c,_;dt(l,Mn,L=>t(21,_=L));let{server:p}=e,{showProject:m=!1}=e;const h=Al();let v=[],g=!1,y=!1,C={},w=null,S=!1;function D(L){switch(L){case"active":case"online":return"green";case"new":case"starting":return"blue";case"off":case"stopped":return"yellow";default:return"red"}}function E(L){h(L,{server:p})}async function P(){if(!(!o||!_||!p.id)){t(7,g=!0);try{const L=await He("GET",`/infra/agent/${p.id}/containers?do_token=${_}`);t(6,v=L.containers||[]),t(2,y=!0)}catch(L){console.error("Failed to load containers:",L),t(6,v=[])}finally{t(7,g=!1)}}}async function z(){var L,j,B,K,Y;if(!(!o||!_||!p.id)){t(9,S=!0);try{const Z=await He("GET",`/infra/agent/${p.id}/metrics?do_token=${_}`);t(3,w={cpu:((L=Z.system)==null?void 0:L.load_1m)||0,mem:((j=Z.system)==null?void 0:j.mem_percent)||0,disk:((B=Z.system)==null?void 0:B.disk_percent)||0,netIn:((K=Z.system)==null?void 0:K.net_in_bytes)||0,netOut:((Y=Z.system)==null?void 0:Y.net_out_bytes)||0})}catch(Z){console.error("Failed to load metrics:",Z)}finally{t(9,S=!1)}}}async function q(L){if(!(!_||!p.id)){t(8,C[L]="restart",C);try{await He("POST",`/infra/agent/${p.id}/containers/${L}/restart?do_token=${_}`),$e.success(`Restarted ${tn(L)}`),await P()}catch(j){$e.error(`Failed: ${j.message}`)}finally{t(8,C[L]=null,C)}}}async function A(L){if(!(!_||!p.id)&&confirm(`Remove "${tn(L)}"?`)){t(8,C[L]="remove",C);try{await He("POST",`/infra/agent/${p.id}/containers/${L}/stop?do_token=${_}`).catch(()=>{}),await He("POST",`/infra/agent/${p.id}/containers/${L}/remove?do_token=${_}`),$e.success(`Removed ${tn(L)}`),await P()}catch(j){$e.error(`Failed: ${j.message}`)}finally{t(8,C[L]=null,C)}}}function N(L){h("viewLogs",{server:p,containerName:L})}async function I(){await Promise.all([P(),z()])}const G=()=>E("destroy"),F=L=>q(L),O=L=>N(L),H=L=>A(L);return l.$$set=L=>{"server"in L&&t(0,p=L.server),"showProject"in L&&t(1,m=L.showProject)},l.$$.update=()=>{var L,j,B;l.$$.dirty[0]&1&&t(13,n=p.ip||((B=(j=(L=p.networks)==null?void 0:L.v4)==null?void 0:j[0])==null?void 0:B.ip_address)||"N/A"),l.$$.dirty[0]&1&&t(5,s=p.status||"unknown"),l.$$.dirty[0]&32&&t(4,o=s==="active"||s==="online"),l.$$.dirty[0]&1&&t(20,i=p.agent_version),l.$$.dirty[0]&1048576&&t(12,f=i&&i!==L1),l.$$.dirty[0]&8&&t(11,a=w&&(w.cpu>80||w.mem>80||w.disk>80)),l.$$.dirty[0]&1&&t(10,c=G1(p.size_slug||p.size||"")),l.$$.dirty[0]&2097172&&o&&!y&&_&&(P(),z())},[p,m,y,w,o,s,v,g,C,S,c,a,f,n,D,E,q,A,N,I,i,_,G,F,O,H]}class K1 extends Ct{constructor(e){super(),$t(this,e,J1,H1,kt,{server:0,showProject:1},null,[-1,-1])}}function no(l,e,t){const n=l.slice();return n[92]=e[t],n}function so(l,e,t){const n=l.slice();return n[95]=e[t],n}function oo(l,e,t){const n=l.slice();return n[92]=e[t],n}function io(l,e,t){const n=l.slice();return n[100]=e[t],n}function ro(l,e,t){const n=l.slice();return n[103]=e[t],n}function ao(l,e,t){const n=l.slice();return n[106]=e[t],n}function fo(l,e,t){const n=l.slice();return n[106]=e[t],n}function uo(l,e,t){const n=l.slice();return n[111]=e[t],n}function co(l,e,t){const n=l.slice();return n[114]=e[t],n}function _o(l,e,t){const n=l.slice();return n[117]=e[t],n}function po(l){let e,t=l[117]+"",n,s;return{c(){e=d("option"),n=T(t),e.__value=s=l[117],le(e,e.__value)},m(o,i){$(o,e,i),r(e,n)},p(o,i){i[1]&8&&t!==(t=o[117]+"")&&U(n,t),i[1]&8&&s!==(s=o[117])&&(e.__value=s,le(e,e.__value))},d(o){o&&k(e)}}}function mo(l){let e,t=l[114]+"",n,s;return{c(){e=d("option"),n=T(t),e.__value=s=l[114],le(e,e.__value)},m(o,i){$(o,e,i),r(e,n)},p(o,i){i[1]&4&&t!==(t=o[114]+"")&&U(n,t),i[1]&4&&s!==(s=o[114])&&(e.__value=s,le(e,e.__value))},d(o){o&&k(e)}}}function vo(l){let e,t,n,s;const o=[Z1,Q1,Y1],i=[];function f(a,c){return a[29]?0:a[32].length?2:1}return t=f(l),n=i[t]=o[t](l),{c(){e=d("div"),n.c(),u(e,"class","section-content svelte-kvdz4s")},m(a,c){$(a,e,c),i[t].m(e,null),s=!0},p(a,c){let _=t;t=f(a),t===_?i[t].p(a,c):(De(),M(i[_],1,1,()=>{i[_]=null}),Ee(),n=i[t],n?n.p(a,c):(n=i[t]=o[t](a),n.c()),R(n,1),n.m(e,null))},i(a){s||(R(n),s=!0)},o(a){M(n),s=!1},d(a){a&&k(e),i[t].d()}}}function Y1(l){let e=[],t=new Map,n,s,o=pe(l[32]);const i=f=>f[111].id;for(let f=0;f<o.length;f+=1){let a=uo(l,o,f),c=i(a);t.set(c,e[f]=ho(c,a))}return{c(){for(let f=0;f<e.length;f+=1)e[f].c();n=Fe()},m(f,a){for(let c=0;c<e.length;c+=1)e[c]&&e[c].m(f,a);$(f,n,a),s=!0},p(f,a){a[1]&6146&&(o=pe(f[32]),De(),e=qf(e,a,i,1,f,o,t,n.parentNode,Ef,ho,n,uo),Ee())},i(f){if(!s){for(let a=0;a<o.length;a+=1)R(e[a]);s=!0}},o(f){for(let a=0;a<e.length;a+=1)M(e[a]);s=!1},d(f){f&&k(n);for(let a=0;a<e.length;a+=1)e[a].d(f)}}}function Q1(l){let e;function t(o,i){return o[1]||o[2]?x1:X1}let n=t(l),s=n(l);return{c(){e=d("div"),s.c(),u(e,"class","empty-msg svelte-kvdz4s")},m(o,i){$(o,e,i),s.m(e,null)},p(o,i){n!==(n=t(o))&&(s.d(1),s=n(o),s&&(s.c(),s.m(e,null)))},i:ge,o:ge,d(o){o&&k(e),s.d()}}}function Z1(l){let e;return{c(){e=d("div"),e.innerHTML='<div class="skeleton-card svelte-kvdz4s"></div> <div class="skeleton-card svelte-kvdz4s"></div>',u(e,"class","loading-skeleton svelte-kvdz4s")},m(t,n){$(t,e,n)},p:ge,i:ge,o:ge,d(t){t&&k(e)}}}function ho(l,e){let t,n,s;return n=new K1({props:{server:e[111]}}),n.$on("destroy",e[42]),n.$on("viewLogs",e[43]),{key:l,first:null,c(){t=Fe(),ce(n.$$.fragment),this.first=t},m(o,i){$(o,t,i),fe(n,o,i),s=!0},p(o,i){e=o;const f={};i[1]&2&&(f.server=e[111]),n.$set(f)},i(o){s||(R(n.$$.fragment,o),s=!0)},o(o){M(n.$$.fragment,o),s=!1},d(o){o&&k(t),ue(n,o)}}}function X1(l){let e;return{c(){e=T('No servers. Click "+ Add" to provision.')},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function x1(l){let e;return{c(){e=T("No servers match filters")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function go(l){let e,t,n,s,o,i,f,a;const c=[l_,t_,e_],_=[];function p(g,y){return g[20]===null?0:g[20].exists?1:2}o=p(l),i=_[o]=c[o](l);function m(g,y){return g[5]?r_:g[4].length?o_:i_}let h=m(l),v=h(l);return{c(){e=d("div"),t=d("div"),n=d("span"),n.textContent="Base Snapshot:",s=b(),i.c(),f=b(),v.c(),u(n,"class","base-label svelte-kvdz4s"),u(t,"class","base-snapshot-row svelte-kvdz4s"),u(e,"class","section-content svelte-kvdz4s")},m(g,y){$(g,e,y),r(e,t),r(t,n),r(t,s),_[o].m(t,null),r(e,f),v.m(e,null),a=!0},p(g,y){let C=o;o=p(g),o===C?_[o].p(g,y):(De(),M(_[C],1,1,()=>{_[C]=null}),Ee(),i=_[o],i?i.p(g,y):(i=_[o]=c[o](g),i.c()),R(i,1),i.m(t,null)),h===(h=m(g))&&v?v.p(g,y):(v.d(1),v=h(g),v&&(v.c(),v.m(e,null)))},i(g){a||(R(i),a=!0)},o(g){M(i),a=!1},d(g){g&&k(e),_[o].d(),v.d()}}}function e_(l){let e,t,n,s;return e=new Ze({props:{variant:"warning",$$slots:{default:[n_]},$$scope:{ctx:l}}}),{c(){ce(e.$$.fragment),t=b(),n=d("span"),n.textContent='Use "+ Build" to create',u(n,"class","base-hint svelte-kvdz4s")},m(o,i){fe(e,o,i),$(o,t,i),$(o,n,i),s=!0},p(o,i){const f={};i[3]&134217728&&(f.$$scope={dirty:i,ctx:o}),e.$set(f)},i(o){s||(R(e.$$.fragment,o),s=!0)},o(o){M(e.$$.fragment,o),s=!1},d(o){o&&(k(t),k(n)),ue(e,o)}}}function t_(l){let e,t;return e=new Ze({props:{variant:"success",$$slots:{default:[s_]},$$scope:{ctx:l}}}),{c(){ce(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const o={};s[0]&1048576|s[3]&134217728&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(R(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){ue(e,n)}}}function l_(l){let e;return{c(){e=d("span"),e.textContent="checking...",u(e,"class","base-status checking svelte-kvdz4s")},m(t,n){$(t,e,n)},p:ge,i:ge,o:ge,d(t){t&&k(e)}}}function n_(l){let e;return{c(){e=T("Not found")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function s_(l){let e,t=l[20].name+"",n;return{c(){e=T("✓ "),n=T(t)},m(s,o){$(s,e,o),$(s,n,o)},p(s,o){o[0]&1048576&&t!==(t=s[20].name+"")&&U(n,t)},d(s){s&&(k(e),k(n))}}}function o_(l){let e,t=pe(l[4]),n=[];for(let s=0;s<t.length;s+=1)n[s]=bo(fo(l,t,s));return{c(){e=d("div");for(let s=0;s<n.length;s+=1)n[s].c();u(e,"class","snapshots-grid svelte-kvdz4s")},m(s,o){$(s,e,o);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(e,null)},p(s,o){if(o[0]&16|o[1]&256){t=pe(s[4]);let i;for(i=0;i<t.length;i+=1){const f=fo(s,t,i);n[i]?n[i].p(f,o):(n[i]=bo(f),n[i].c(),n[i].m(e,null))}for(;i<n.length;i+=1)n[i].d(1);n.length=t.length}},d(s){s&&k(e),Me(n,s)}}}function i_(l){let e;return{c(){e=d("div"),e.textContent="No custom snapshots",u(e,"class","empty-msg svelte-kvdz4s")},m(t,n){$(t,e,n)},p:ge,d(t){t&&k(e)}}}function r_(l){let e;return{c(){e=d("div"),e.textContent="Loading...",u(e,"class","empty-msg svelte-kvdz4s")},m(t,n){$(t,e,n)},p:ge,d(t){t&&k(e)}}}function bo(l){let e,t,n=l[106].name+"",s,o,i,f=Ro(l[106].size_gigabytes*1024*1024*1024)+"",a,c,_=No(l[106].created_at)+"",p,m,h,v,g,y;function C(){return l[62](l[106])}return{c(){e=d("div"),t=d("span"),s=T(n),o=b(),i=d("span"),a=T(f),c=T(" • "),p=T(_),m=b(),h=d("button"),h.textContent="×",v=b(),u(t,"class","snap-name svelte-kvdz4s"),u(i,"class","snap-meta svelte-kvdz4s"),u(h,"class","pill-del svelte-kvdz4s"),u(h,"title","Delete"),u(e,"class","snapshot-pill svelte-kvdz4s")},m(w,S){$(w,e,S),r(e,t),r(t,s),r(e,o),r(e,i),r(i,a),r(i,c),r(i,p),r(e,m),r(e,h),r(e,v),g||(y=X(h,"click",C),g=!0)},p(w,S){l=w,S[0]&16&&n!==(n=l[106].name+"")&&U(s,n),S[0]&16&&f!==(f=Ro(l[106].size_gigabytes*1024*1024*1024)+"")&&U(a,f),S[0]&16&&_!==(_=No(l[106].created_at)+"")&&U(p,_)},d(w){w&&k(e),g=!1,y()}}}function ko(l){let e,t=l[106].name+"",n,s;return{c(){e=d("option"),n=T(t),e.__value=s=l[106].id,le(e,e.__value)},m(o,i){$(o,e,i),r(e,n)},p(o,i){i[0]&16&&t!==(t=o[106].name+"")&&U(n,t),i[0]&16&&s!==(s=o[106].id)&&(e.__value=s,le(e,e.__value))},d(o){o&&k(e)}}}function wo(l){let e;return{c(){e=d("option"),e.textContent="No base snapshot - create one first",e.__value="",le(e,e.__value)},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function $o(l){let e,t=l[103].label+"",n;return{c(){e=d("option"),n=T(t),e.__value=l[103].value,le(e,e.__value)},m(s,o){$(s,e,o),r(e,n)},p:ge,d(s){s&&k(e)}}}function Co(l){let e,t=(l[100].description||l[100].slug)+"",n,s;return{c(){e=d("option"),n=T(t),e.__value=s=l[100].slug,le(e,e.__value)},m(o,i){$(o,e,i),r(e,n)},p(o,i){i[0]&268435456&&t!==(t=(o[100].description||o[100].slug)+"")&&U(n,t),i[0]&268435456&&s!==(s=o[100].slug)&&(e.__value=s,le(e,e.__value))},d(o){o&&k(e)}}}function yo(l){let e,t,n,s,o,i=pe(l[9]),f=[];for(let c=0;c<i.length;c+=1)f[c]=So(oo(l,i,c));let a=l[10]&&To();return{c(){e=d("div"),t=d("label"),t.textContent="📋 Progress",n=b(),s=d("div");for(let c=0;c<f.length;c+=1)f[c].c();o=b(),a&&a.c(),u(t,"class","svelte-kvdz4s"),u(s,"class","operation-logs svelte-kvdz4s"),u(e,"class","operation-logs-section svelte-kvdz4s")},m(c,_){$(c,e,_),r(e,t),r(e,n),r(e,s);for(let p=0;p<f.length;p+=1)f[p]&&f[p].m(s,null);r(s,o),a&&a.m(s,null)},p(c,_){if(_[0]&512){i=pe(c[9]);let p;for(p=0;p<i.length;p+=1){const m=oo(c,i,p);f[p]?f[p].p(m,_):(f[p]=So(m),f[p].c(),f[p].m(s,o))}for(;p<f.length;p+=1)f[p].d(1);f.length=i.length}c[10]?a||(a=To(),a.c(),a.m(s,null)):a&&(a.d(1),a=null)},d(c){c&&k(e),Me(f,c),a&&a.d()}}}function So(l){let e,t=l[92].message+"",n,s;return{c(){e=d("div"),n=T(t),u(e,"class",s="log-entry log-"+l[92].type+" svelte-kvdz4s")},m(o,i){$(o,e,i),r(e,n)},p(o,i){i[0]&512&&t!==(t=o[92].message+"")&&U(n,t),i[0]&512&&s!==(s="log-entry log-"+o[92].type+" svelte-kvdz4s")&&u(e,"class",s)},d(o){o&&k(e)}}}function To(l){let e;return{c(){e=d("div"),e.innerHTML='<span class="spinner svelte-kvdz4s">⏳</span> Provisioning...',u(e,"class","log-entry log-info svelte-kvdz4s")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function a_(l){let e,t,n,s,o,i,f=l[4].filter(jo).length===0,a,c,_,p,m,h,v,g,y,C,w,S,D,E,P=pe(l[4].filter(Ao)),z=[];for(let O=0;O<P.length;O+=1)z[O]=ko(ao(l,P,O));let q=f&&wo(),A=pe(l[37]),N=[];for(let O=0;O<A.length;O+=1)N[O]=$o(ro(l,A,O));let I=pe(l[28]),G=[];for(let O=0;O<I.length;O+=1)G[O]=Co(io(l,I,O));let F=(l[9].length>0||l[10])&&yo(l);return{c(){e=d("div"),t=d("div"),n=d("label"),n.textContent="Snapshot",s=b(),o=d("select");for(let O=0;O<z.length;O+=1)z[O].c();i=Fe(),q&&q.c(),a=b(),c=d("div"),_=d("label"),_.textContent="Region",p=b(),m=d("select");for(let O=0;O<N.length;O+=1)N[O].c();h=b(),v=d("div"),g=d("label"),g.textContent="Size",y=b(),C=d("select");for(let O=0;O<G.length;O+=1)G[O].c();w=b(),F&&F.c(),S=Fe(),u(n,"class","svelte-kvdz4s"),o.disabled=l[10],u(o,"class","svelte-kvdz4s"),l[27].snapshot_id===void 0&&Xe(()=>l[64].call(o)),u(t,"class","form-group full svelte-kvdz4s"),u(_,"class","svelte-kvdz4s"),m.disabled=l[10],u(m,"class","svelte-kvdz4s"),l[27].region===void 0&&Xe(()=>l[65].call(m)),u(c,"class","form-group svelte-kvdz4s"),u(g,"class","svelte-kvdz4s"),C.disabled=l[10],u(C,"class","svelte-kvdz4s"),l[27].size===void 0&&Xe(()=>l[66].call(C)),u(v,"class","form-group svelte-kvdz4s"),u(e,"class","form-grid svelte-kvdz4s")},m(O,H){$(O,e,H),r(e,t),r(t,n),r(t,s),r(t,o);for(let L=0;L<z.length;L+=1)z[L]&&z[L].m(o,null);r(o,i),q&&q.m(o,null),Ne(o,l[27].snapshot_id,!0),r(e,a),r(e,c),r(c,_),r(c,p),r(c,m);for(let L=0;L<N.length;L+=1)N[L]&&N[L].m(m,null);Ne(m,l[27].region,!0),r(e,h),r(e,v),r(v,g),r(v,y),r(v,C);for(let L=0;L<G.length;L+=1)G[L]&&G[L].m(C,null);Ne(C,l[27].size,!0),$(O,w,H),F&&F.m(O,H),$(O,S,H),D||(E=[X(o,"change",l[64]),X(m,"change",l[65]),X(C,"change",l[66])],D=!0)},p(O,H){if(H[0]&16){P=pe(O[4].filter(Ao));let L;for(L=0;L<P.length;L+=1){const j=ao(O,P,L);z[L]?z[L].p(j,H):(z[L]=ko(j),z[L].c(),z[L].m(o,i))}for(;L<z.length;L+=1)z[L].d(1);z.length=P.length}if(H[0]&16&&(f=O[4].filter(jo).length===0),f?q||(q=wo(),q.c(),q.m(o,null)):q&&(q.d(1),q=null),H[0]&1024&&(o.disabled=O[10]),H[0]&134217744&&Ne(o,O[27].snapshot_id),H[1]&64){A=pe(O[37]);let L;for(L=0;L<A.length;L+=1){const j=ro(O,A,L);N[L]?N[L].p(j,H):(N[L]=$o(j),N[L].c(),N[L].m(m,null))}for(;L<N.length;L+=1)N[L].d(1);N.length=A.length}if(H[0]&1024&&(m.disabled=O[10]),H[0]&134217744&&Ne(m,O[27].region),H[0]&268435456){I=pe(O[28]);let L;for(L=0;L<I.length;L+=1){const j=io(O,I,L);G[L]?G[L].p(j,H):(G[L]=Co(j),G[L].c(),G[L].m(C,null))}for(;L<G.length;L+=1)G[L].d(1);G.length=I.length}H[0]&1024&&(C.disabled=O[10]),H[0]&134217744&&Ne(C,O[27].size),O[9].length>0||O[10]?F?F.p(O,H):(F=yo(O),F.c(),F.m(S.parentNode,S)):F&&(F.d(1),F=null)},d(O){O&&(k(e),k(w),k(S)),Me(z,O),q&&q.d(),Me(N,O),Me(G,O),F&&F.d(O),D=!1,We(E)}}}function f_(l){let e=l[9].length>0?"Close":"Cancel",t;return{c(){t=T(e)},m(n,s){$(n,t,s)},p(n,s){s[0]&512&&e!==(e=n[9].length>0?"Close":"Cancel")&&U(t,e)},d(n){n&&k(t)}}}function u_(l){let e;return{c(){e=T("🚀 Provision")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function c_(l){let e;return{c(){e=T("⏳ Provisioning...")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function __(l){let e;function t(o,i){return o[10]?c_:u_}let n=t(l),s=n(l);return{c(){s.c(),e=Fe()},m(o,i){s.m(o,i),$(o,e,i)},p(o,i){n!==(n=t(o))&&(s.d(1),s=n(o),s&&(s.c(),s.m(e.parentNode,e)))},d(o){o&&k(e),s.d(o)}}}function d_(l){let e,t,n,s,o;return t=new Ue({props:{variant:"ghost",$$slots:{default:[f_]},$$scope:{ctx:l}}}),t.$on("click",l[63]),s=new Ue({props:{variant:"primary",disabled:l[10]||!l[27].snapshot_id,$$slots:{default:[__]},$$scope:{ctx:l}}}),s.$on("click",l[41]),{c(){e=d("div"),ce(t.$$.fragment),n=b(),ce(s.$$.fragment),u(e,"slot","footer")},m(i,f){$(i,e,f),fe(t,e,null),r(e,n),fe(s,e,null),o=!0},p(i,f){const a={};f[0]&512|f[3]&134217728&&(a.$$scope={dirty:f,ctx:i}),t.$set(a);const c={};f[0]&134218752&&(c.disabled=i[10]||!i[27].snapshot_id),f[0]&1024|f[3]&134217728&&(c.$$scope={dirty:f,ctx:i}),s.$set(c)},i(i){o||(R(t.$$.fragment,i),R(s.$$.fragment,i),o=!0)},o(i){M(t.$$.fragment,i),M(s.$$.fragment,i),o=!1},d(i){i&&k(e),ue(t),ue(s)}}}function p_(l){let e=l[23]?"...":"↻",t;return{c(){t=T(e)},m(n,s){$(n,t,s)},p(n,s){s[0]&8388608&&e!==(e=n[23]?"...":"↻")&&U(t,e)},d(n){n&&k(t)}}}function m_(l){let e,t,n,s,o,i,f,a,c,_,p,m,h,v,g,y,C,w,S,D,E=(l[30]||"No logs")+"",P,z,q,A;return w=new Ue({props:{variant:"ghost",size:"sm",disabled:l[23],$$slots:{default:[p_]},$$scope:{ctx:l}}}),w.$on("click",l[44]),{c(){e=d("div"),t=d("div"),n=d("input"),s=b(),o=d("div"),i=d("label"),i.textContent="Lines:",f=b(),a=d("select"),c=d("option"),c.textContent="100",_=d("option"),_.textContent="200",p=d("option"),p.textContent="500",m=d("option"),m.textContent="1000",h=b(),v=d("label"),g=d("input"),y=T(`
      Auto-refresh`),C=b(),ce(w.$$.fragment),S=b(),D=d("pre"),P=T(E),u(n,"type","text"),u(n,"placeholder","Search logs..."),u(n,"class","svelte-kvdz4s"),u(t,"class","logs-search svelte-kvdz4s"),u(i,"class","svelte-kvdz4s"),c.__value=100,le(c,c.__value),_.__value=200,le(_,_.__value),p.__value=500,le(p,p.__value),m.__value=1e3,le(m,m.__value),u(a,"class","svelte-kvdz4s"),l[24]===void 0&&Xe(()=>l[71].call(a)),u(o,"class","logs-tail svelte-kvdz4s"),u(g,"type","checkbox"),u(g,"class","svelte-kvdz4s"),u(v,"class","logs-auto svelte-kvdz4s"),u(e,"class","logs-toolbar svelte-kvdz4s"),u(D,"class","logs-content large svelte-kvdz4s")},m(N,I){$(N,e,I),r(e,t),r(t,n),le(n,l[6]),r(e,s),r(e,o),r(o,i),r(o,f),r(o,a),r(a,c),r(a,_),r(a,p),r(a,m),Ne(a,l[24],!0),r(e,h),r(e,v),r(v,g),g.checked=l[25],r(v,y),r(e,C),fe(w,e,null),$(N,S,I),$(N,D,I),r(D,P),z=!0,q||(A=[X(n,"input",l[70]),X(a,"change",l[71]),X(a,"change",l[44]),X(g,"change",l[72]),X(g,"change",l[45])],q=!0)},p(N,I){I[0]&64&&n.value!==N[6]&&le(n,N[6]),I[0]&16777216&&Ne(a,N[24]),I[0]&33554432&&(g.checked=N[25]);const G={};I[0]&8388608&&(G.disabled=N[23]),I[0]&8388608|I[3]&134217728&&(G.$$scope={dirty:I,ctx:N}),w.$set(G),(!z||I[0]&1073741824)&&E!==(E=(N[30]||"No logs")+"")&&U(P,E)},i(N){z||(R(w.$$.fragment,N),z=!0)},o(N){M(w.$$.fragment,N),z=!1},d(N){N&&(k(e),k(S),k(D)),ue(w),q=!1,We(A)}}}function v_(l){let e;return{c(){e=T("Close")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function h_(l){var c;let e,t,n=(((c=l[30])==null?void 0:c.split(`
`).length)||0)+"",s,o,i,f,a;return f=new Ue({props:{variant:"ghost",$$slots:{default:[v_]},$$scope:{ctx:l}}}),f.$on("click",l[69]),{c(){e=d("div"),t=d("span"),s=T(n),o=T(" lines"),i=b(),ce(f.$$.fragment),u(t,"class","logs-count svelte-kvdz4s"),u(e,"slot","footer")},m(_,p){$(_,e,p),r(e,t),r(t,s),r(t,o),r(e,i),fe(f,e,null),a=!0},p(_,p){var h;(!a||p[0]&1073741824)&&n!==(n=(((h=_[30])==null?void 0:h.split(`
`).length)||0)+"")&&U(s,n);const m={};p[3]&134217728&&(m.$$scope={dirty:p,ctx:_}),f.$set(m)},i(_){a||(R(f.$$.fragment,_),a=!0)},o(_){M(f.$$.fragment,_),a=!1},d(_){_&&k(e),ue(f)}}}function g_(l){let e,t,n,s,o,i,f,a,c,_,p,m,h,v,g,y,C,w,S,D,E,P,z,q,A,N,I,G,F=pe(l[35]),O=[];for(let H=0;H<F.length;H+=1)O[H]=zo(so(l,F,H));return{c(){e=d("form"),t=d("div"),n=d("label"),n.textContent="Snapshot Name *",s=b(),o=d("input"),i=b(),f=d("div"),a=d("label"),a.textContent="Base Image",c=b(),_=d("select");for(let H=0;H<O.length;H+=1)O[H].c();p=b(),m=d("div"),h=d("label"),h.textContent="Pre-install",v=b(),g=d("div"),y=d("label"),C=d("input"),w=T(" Docker"),S=b(),D=d("label"),E=d("input"),P=T(" Nginx"),z=b(),q=d("label"),A=d("input"),N=T(" Certbot"),u(n,"for","snap-name"),u(n,"class","svelte-kvdz4s"),u(o,"id","snap-name"),u(o,"type","text"),u(o,"placeholder","my-custom-snapshot"),o.disabled=l[13],u(o,"class","svelte-kvdz4s"),u(t,"class","form-group svelte-kvdz4s"),u(a,"for","base-image"),u(a,"class","svelte-kvdz4s"),u(_,"id","base-image"),_.disabled=l[13],u(_,"class","svelte-kvdz4s"),l[16]===void 0&&Xe(()=>l[78].call(_)),u(f,"class","form-group svelte-kvdz4s"),u(h,"class","svelte-kvdz4s"),u(C,"type","checkbox"),C.disabled=l[13],u(C,"class","svelte-kvdz4s"),u(y,"class","checkbox-item svelte-kvdz4s"),u(E,"type","checkbox"),E.disabled=l[13],u(E,"class","svelte-kvdz4s"),u(D,"class","checkbox-item svelte-kvdz4s"),u(A,"type","checkbox"),A.disabled=l[13],u(A,"class","svelte-kvdz4s"),u(q,"class","checkbox-item svelte-kvdz4s"),u(g,"class","checkbox-list svelte-kvdz4s"),u(m,"class","form-group svelte-kvdz4s")},m(H,L){$(H,e,L),r(e,t),r(t,n),r(t,s),r(t,o),le(o,l[15]),r(e,i),r(e,f),r(f,a),r(f,c),r(f,_);for(let j=0;j<O.length;j+=1)O[j]&&O[j].m(_,null);Ne(_,l[16],!0),r(e,p),r(e,m),r(m,h),r(m,v),r(m,g),r(g,y),r(y,C),C.checked=l[17],r(y,w),r(g,S),r(g,D),r(D,E),E.checked=l[18],r(D,P),r(g,z),r(g,q),r(q,A),A.checked=l[19],r(q,N),I||(G=[X(o,"input",l[77]),X(_,"change",l[78]),X(C,"change",l[79]),X(E,"change",l[80]),X(A,"change",l[81]),X(e,"submit",Zu(l[40]))],I=!0)},p(H,L){if(L[0]&8192&&(o.disabled=H[13]),L[0]&32768&&o.value!==H[15]&&le(o,H[15]),L[1]&16){F=pe(H[35]);let j;for(j=0;j<F.length;j+=1){const B=so(H,F,j);O[j]?O[j].p(B,L):(O[j]=zo(B),O[j].c(),O[j].m(_,null))}for(;j<O.length;j+=1)O[j].d(1);O.length=F.length}L[0]&8192&&(_.disabled=H[13]),L[0]&65536|L[1]&16&&Ne(_,H[16]),L[0]&8192&&(C.disabled=H[13]),L[0]&131072&&(C.checked=H[17]),L[0]&8192&&(E.disabled=H[13]),L[0]&262144&&(E.checked=H[18]),L[0]&8192&&(A.disabled=H[13]),L[0]&524288&&(A.checked=H[19])},i:ge,o:ge,d(H){H&&k(e),Me(O,H),I=!1,We(G)}}}function b_(l){var i;let e,t,n,s,o=((i=l[20])==null?void 0:i.exists)&&Do(l);return{c(){e=d("div"),t=d("p"),t.textContent="Creates the default base snapshot with Docker, Nginx, Certbot pre-installed. Required for provisioning new servers.",n=b(),o&&o.c(),u(t,"class","svelte-kvdz4s"),u(e,"class","snap-type-info svelte-kvdz4s")},m(f,a){$(f,e,a),r(e,t),r(e,n),o&&o.m(e,null),s=!0},p(f,a){var c;(c=f[20])!=null&&c.exists?o?(o.p(f,a),a[0]&1048576&&R(o,1)):(o=Do(f),o.c(),R(o,1),o.m(e,null)):o&&(De(),M(o,1,1,()=>{o=null}),Ee())},i(f){s||(R(o),s=!0)},o(f){M(o),s=!1},d(f){f&&k(e),o&&o.d()}}}function zo(l){let e,t=l[95].label+"",n;return{c(){e=d("option"),n=T(t),e.__value=l[95].value,le(e,e.__value)},m(s,o){$(s,e,o),r(e,n)},p:ge,d(s){s&&k(e)}}}function Do(l){let e,t;return e=new Ze({props:{variant:"warning",$$slots:{default:[k_]},$$scope:{ctx:l}}}),{c(){ce(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const o={};s[0]&1048576|s[3]&134217728&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(R(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){ue(e,n)}}}function k_(l){let e,t=l[20].name+"",n;return{c(){e=T("⚠️ Base snapshot already exists: "),n=T(t)},m(s,o){$(s,e,o),$(s,n,o)},p(s,o){o[0]&1048576&&t!==(t=s[20].name+"")&&U(n,t)},d(s){s&&(k(e),k(n))}}}function Eo(l){let e,t,n,s,o,i=pe(l[8]),f=[];for(let c=0;c<i.length;c+=1)f[c]=qo(no(l,i,c));let a=l[13]&&Lo();return{c(){e=d("div"),t=d("label"),t.textContent="📋 Progress",n=b(),s=d("div");for(let c=0;c<f.length;c+=1)f[c].c();o=b(),a&&a.c(),u(t,"class","svelte-kvdz4s"),u(s,"class","operation-logs svelte-kvdz4s"),u(e,"class","operation-logs-section svelte-kvdz4s")},m(c,_){$(c,e,_),r(e,t),r(e,n),r(e,s);for(let p=0;p<f.length;p+=1)f[p]&&f[p].m(s,null);r(s,o),a&&a.m(s,null)},p(c,_){if(_[0]&256){i=pe(c[8]);let p;for(p=0;p<i.length;p+=1){const m=no(c,i,p);f[p]?f[p].p(m,_):(f[p]=qo(m),f[p].c(),f[p].m(s,o))}for(;p<f.length;p+=1)f[p].d(1);f.length=i.length}c[13]?a||(a=Lo(),a.c(),a.m(s,null)):a&&(a.d(1),a=null)},d(c){c&&k(e),Me(f,c),a&&a.d()}}}function qo(l){let e,t=l[92].message+"",n,s;return{c(){e=d("div"),n=T(t),u(e,"class",s="log-entry log-"+l[92].type+" svelte-kvdz4s")},m(o,i){$(o,e,i),r(e,n)},p(o,i){i[0]&256&&t!==(t=o[92].message+"")&&U(n,t),i[0]&256&&s!==(s="log-entry log-"+o[92].type+" svelte-kvdz4s")&&u(e,"class",s)},d(o){o&&k(e)}}}function Lo(l){let e;return{c(){e=d("div"),e.innerHTML='<span class="spinner svelte-kvdz4s">⏳</span> Working...',u(e,"class","log-entry log-info svelte-kvdz4s")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function w_(l){let e,t,n,s,o,i,f,a,c,_,p,m,h,v;const g=[b_,g_],y=[];function C(S,D){return S[14]==="base"?0:1}a=C(l),c=y[a]=g[a](l);let w=(l[8].length>0||l[13])&&Eo(l);return{c(){e=d("div"),t=d("button"),n=T("🏗️ Base Snapshot"),s=b(),o=d("button"),i=T("📸 Custom Snapshot"),f=b(),c.c(),_=b(),w&&w.c(),p=Fe(),u(t,"class","snap-type-btn svelte-kvdz4s"),t.disabled=l[13],ke(t,"active",l[14]==="base"),u(o,"class","snap-type-btn svelte-kvdz4s"),o.disabled=l[13],ke(o,"active",l[14]==="custom"),u(e,"class","snap-type-selector svelte-kvdz4s")},m(S,D){$(S,e,D),r(e,t),r(t,n),r(e,s),r(e,o),r(o,i),$(S,f,D),y[a].m(S,D),$(S,_,D),w&&w.m(S,D),$(S,p,D),m=!0,h||(v=[X(t,"click",l[75]),X(o,"click",l[76])],h=!0)},p(S,D){(!m||D[0]&8192)&&(t.disabled=S[13]),(!m||D[0]&16384)&&ke(t,"active",S[14]==="base"),(!m||D[0]&8192)&&(o.disabled=S[13]),(!m||D[0]&16384)&&ke(o,"active",S[14]==="custom");let E=a;a=C(S),a===E?y[a].p(S,D):(De(),M(y[E],1,1,()=>{y[E]=null}),Ee(),c=y[a],c?c.p(S,D):(c=y[a]=g[a](S),c.c()),R(c,1),c.m(_.parentNode,_)),S[8].length>0||S[13]?w?w.p(S,D):(w=Eo(S),w.c(),w.m(p.parentNode,p)):w&&(w.d(1),w=null)},i(S){m||(R(c),m=!0)},o(S){M(c),m=!1},d(S){S&&(k(e),k(f),k(_),k(p)),y[a].d(S),w&&w.d(S),h=!1,We(v)}}}function $_(l){let e=l[8].length>0?"Close":"Cancel",t;return{c(){t=T(e)},m(n,s){$(n,t,s)},p(n,s){s[0]&256&&e!==(e=n[8].length>0?"Close":"Cancel")&&U(t,e)},d(n){n&&k(t)}}}function C_(l){let e;return{c(){e=T("🔨 Build")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function y_(l){let e;return{c(){e=T("⏳ Building...")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function S_(l){let e;function t(o,i){return o[13]?y_:C_}let n=t(l),s=n(l);return{c(){s.c(),e=Fe()},m(o,i){s.m(o,i),$(o,e,i)},p(o,i){n!==(n=t(o))&&(s.d(1),s=n(o),s&&(s.c(),s.m(e.parentNode,e)))},d(o){o&&k(e),s.d(o)}}}function T_(l){let e,t,n,s,o;return t=new Ue({props:{variant:"ghost",$$slots:{default:[$_]},$$scope:{ctx:l}}}),t.$on("click",l[74]),s=new Ue({props:{variant:"primary",disabled:l[13],$$slots:{default:[S_]},$$scope:{ctx:l}}}),s.$on("click",l[40]),{c(){e=d("div"),ce(t.$$.fragment),n=b(),ce(s.$$.fragment),u(e,"slot","footer")},m(i,f){$(i,e,f),fe(t,e,null),r(e,n),fe(s,e,null),o=!0},p(i,f){const a={};f[0]&256|f[3]&134217728&&(a.$$scope={dirty:f,ctx:i}),t.$set(a);const c={};f[0]&8192&&(c.disabled=i[13]),f[0]&8192|f[3]&134217728&&(c.$$scope={dirty:f,ctx:i}),s.$set(c)},i(i){o||(R(t.$$.fragment,i),R(s.$$.fragment,i),o=!0)},o(i){M(t.$$.fragment,i),M(s.$$.fragment,i),o=!1},d(i){i&&k(e),ue(t),ue(s)}}}function z_(l){let e,t,n,s,o,i,f,a,c,_,p,m,h,v,g,y,C,w,S=Mo(l[7])+"",D,E,P,z,q,A,N,I=l[32].length+"",G,F,O,H=l[32].length===1?"SERVER":"SERVERS",L,j,B,K,Y=l[31].containerCount+"",Z,oe,x,J=l[31].containerCount===1?"CONTAINER":"CONTAINERS",W,re,V,ie,_e,te=l[31].monthlyCost+"",ve,ae,se,ee,Q,be,we=l[31].healthyContainers+"",Ge,nt,vt=l[31].containerCount+"",qe,Se,Ae,me,Le,Re,Pe,Be,tt,st=l[11]?"▼":"▶",ot,Je,it,St=Xl(l[32].length,"Server")+"",Et,nl,et,Ut,Pt,Ht,ut,pt,he,Oe,ct,Gt,Vt=l[3]?"▼":"▶",Ke,Wt,vl,rl=Xl(l[4].length,"Snapshot")+"",hl,wl,Jt,xt,al,Te,ye,Ye,yt,Yt,Bt,Qe,Tt,$l,Qt,Rt,mt,Ol,Il,fl=pe(l[34]),zt=[];for(let ze=0;ze<fl.length;ze+=1)zt[ze]=po(_o(l,fl,ze));let ul=pe(l[33]),Dt=[];for(let ze=0;ze<ul.length;ze+=1)Dt[ze]=mo(co(l,ul,ze));let ht=l[11]&&vo(l),gt=l[3]&&go(l);function vn(ze){l[67](ze)}let Wl={title:"Provision Server",width:"500px",$$slots:{footer:[d_],default:[a_]},$$scope:{ctx:l}};l[26]!==void 0&&(Wl.open=l[26]),yt=new ol({props:Wl}),It.push(()=>pl(yt,"open",vn)),yt.$on("close",l[68]);function hn(ze){l[73](ze)}let Jl={title:l[22],width:"1000px",$$slots:{footer:[h_],default:[m_]},$$scope:{ctx:l}};l[21]!==void 0&&(Jl.open=l[21]),Qe=new ol({props:Jl}),It.push(()=>pl(Qe,"open",hn));function gn(ze){l[82](ze)}let Kl={title:"Build Snapshot",width:"600px",$$slots:{footer:[T_],default:[w_]},$$scope:{ctx:l}};return l[12]!==void 0&&(Kl.open=l[12]),Qt=new ol({props:Kl}),It.push(()=>pl(Qt,"open",gn)),Qt.$on("close",l[83]),{c(){e=d("div"),t=d("div"),n=d("div"),s=d("label"),s.textContent="Project",o=b(),i=d("select"),f=d("option"),f.textContent="All";for(let ze=0;ze<zt.length;ze+=1)zt[ze].c();a=b(),c=d("div"),_=d("label"),_.textContent="Env",p=b(),m=d("select"),h=d("option"),h.textContent="All";for(let ze=0;ze<Dt.length;ze+=1)Dt[ze].c();v=b(),g=d("div"),y=b(),C=d("span"),w=T("Updated "),D=T(S),E=b(),P=d("button"),P.textContent="↻",z=b(),q=d("div"),A=d("div"),N=d("span"),G=T(I),F=b(),O=d("span"),L=T(H),j=b(),B=d("div"),K=d("span"),Z=T(Y),oe=b(),x=d("span"),W=T(J),re=b(),V=d("div"),ie=d("span"),_e=T("£"),ve=T(te),ae=b(),se=d("span"),se.textContent="/MONTH",ee=b(),Q=d("div"),be=d("span"),Ge=T(we),nt=T("/"),qe=T(vt),Ae=b(),me=d("span"),me.textContent="HEALTHY",Le=b(),Re=d("div"),Pe=d("div"),Be=d("div"),tt=d("span"),ot=T(st),Je=b(),it=d("span"),Et=T(St),nl=b(),et=d("div"),Ut=d("button"),Ut.textContent="↻",Pt=b(),Ht=d("button"),Ht.textContent="+ Add",ut=b(),ht&&ht.c(),pt=b(),he=d("div"),Oe=d("div"),ct=d("div"),Gt=d("span"),Ke=T(Vt),Wt=b(),vl=d("span"),hl=T(rl),wl=b(),Jt=d("div"),xt=d("button"),xt.textContent="↻",al=b(),Te=d("button"),Te.textContent="+ Build",ye=b(),gt&&gt.c(),Ye=b(),ce(yt.$$.fragment),Bt=b(),ce(Qe.$$.fragment),$l=b(),ce(Qt.$$.fragment),u(s,"class","svelte-kvdz4s"),f.__value="",le(f,f.__value),u(i,"class","svelte-kvdz4s"),l[1]===void 0&&Xe(()=>l[57].call(i)),u(n,"class","filter-group svelte-kvdz4s"),u(_,"class","svelte-kvdz4s"),h.__value="",le(h,h.__value),u(m,"class","svelte-kvdz4s"),l[2]===void 0&&Xe(()=>l[58].call(m)),u(c,"class","filter-group svelte-kvdz4s"),u(g,"class","filter-spacer svelte-kvdz4s"),u(C,"class","last-updated svelte-kvdz4s"),u(P,"class","filter-refresh svelte-kvdz4s"),u(P,"title","Refresh"),u(t,"class","filter-bar svelte-kvdz4s"),u(N,"class","banner-value svelte-kvdz4s"),u(O,"class","banner-label svelte-kvdz4s"),u(A,"class","banner-metric svelte-kvdz4s"),u(K,"class","banner-value svelte-kvdz4s"),u(x,"class","banner-label svelte-kvdz4s"),u(B,"class","banner-metric svelte-kvdz4s"),u(ie,"class","banner-value svelte-kvdz4s"),u(se,"class","banner-label svelte-kvdz4s"),u(V,"class","banner-metric svelte-kvdz4s"),u(be,"class",Se="banner-value "+(l[31].unhealthyContainers>0?"warning":"success")+" svelte-kvdz4s"),u(me,"class","banner-label svelte-kvdz4s"),u(Q,"class","banner-metric svelte-kvdz4s"),u(q,"class","summary-banner svelte-kvdz4s"),u(tt,"class","expand-icon svelte-kvdz4s"),u(Be,"class","section-title svelte-kvdz4s"),u(Ut,"class","section-btn svelte-kvdz4s"),u(Ht,"class","section-btn primary svelte-kvdz4s"),u(et,"class","section-actions svelte-kvdz4s"),u(Pe,"class","section-header svelte-kvdz4s"),u(Re,"class","section svelte-kvdz4s"),ke(Re,"expanded",l[11]),u(Gt,"class","expand-icon svelte-kvdz4s"),u(ct,"class","section-title svelte-kvdz4s"),u(xt,"class","section-btn svelte-kvdz4s"),u(Te,"class","section-btn primary svelte-kvdz4s"),u(Jt,"class","section-actions svelte-kvdz4s"),u(Oe,"class","section-header svelte-kvdz4s"),u(he,"class","section svelte-kvdz4s"),ke(he,"expanded",l[3]),u(e,"class","infrastructure svelte-kvdz4s")},m(ze,Ie){$(ze,e,Ie),r(e,t),r(t,n),r(n,s),r(n,o),r(n,i),r(i,f);for(let Nt=0;Nt<zt.length;Nt+=1)zt[Nt]&&zt[Nt].m(i,null);Ne(i,l[1],!0),r(t,a),r(t,c),r(c,_),r(c,p),r(c,m),r(m,h);for(let Nt=0;Nt<Dt.length;Nt+=1)Dt[Nt]&&Dt[Nt].m(m,null);Ne(m,l[2],!0),r(t,v),r(t,g),r(t,y),r(t,C),r(C,w),r(C,D),r(t,E),r(t,P),r(e,z),r(e,q),r(q,A),r(A,N),r(N,G),r(A,F),r(A,O),r(O,L),r(q,j),r(q,B),r(B,K),r(K,Z),r(B,oe),r(B,x),r(x,W),r(q,re),r(q,V),r(V,ie),r(ie,_e),r(ie,ve),r(V,ae),r(V,se),r(q,ee),r(q,Q),r(Q,be),r(be,Ge),r(be,nt),r(be,qe),r(Q,Ae),r(Q,me),r(e,Le),r(e,Re),r(Re,Pe),r(Pe,Be),r(Be,tt),r(tt,ot),r(Be,Je),r(Be,it),r(it,Et),r(Pe,nl),r(Pe,et),r(et,Ut),r(et,Pt),r(et,Ht),r(Re,ut),ht&&ht.m(Re,null),r(e,pt),r(e,he),r(he,Oe),r(Oe,ct),r(ct,Gt),r(Gt,Ke),r(ct,Wt),r(ct,vl),r(vl,hl),r(Oe,wl),r(Oe,Jt),r(Jt,xt),r(Jt,al),r(Jt,Te),r(he,ye),gt&&gt.m(he,null),$(ze,Ye,Ie),fe(yt,ze,Ie),$(ze,Bt,Ie),fe(Qe,ze,Ie),$(ze,$l,Ie),fe(Qt,ze,Ie),mt=!0,Ol||(Il=[X(i,"change",l[57]),X(m,"change",l[58]),X(P,"click",l[0]),X(Ut,"click",l[0]),X(Ht,"click",l[59]),X(et,"click",Fn(l[56])),X(Pe,"click",l[60]),X(xt,"click",l[38]),X(Te,"click",l[36]),X(Jt,"click",Fn(l[55])),X(Oe,"click",l[61])],Ol=!0)},p(ze,Ie){if(Ie[1]&8){fl=pe(ze[34]);let rt;for(rt=0;rt<fl.length;rt+=1){const gl=_o(ze,fl,rt);zt[rt]?zt[rt].p(gl,Ie):(zt[rt]=po(gl),zt[rt].c(),zt[rt].m(i,null))}for(;rt<zt.length;rt+=1)zt[rt].d(1);zt.length=fl.length}if(Ie[0]&2|Ie[1]&8&&Ne(i,ze[1]),Ie[1]&4){ul=pe(ze[33]);let rt;for(rt=0;rt<ul.length;rt+=1){const gl=co(ze,ul,rt);Dt[rt]?Dt[rt].p(gl,Ie):(Dt[rt]=mo(gl),Dt[rt].c(),Dt[rt].m(m,null))}for(;rt<Dt.length;rt+=1)Dt[rt].d(1);Dt.length=ul.length}Ie[0]&4|Ie[1]&4&&Ne(m,ze[2]),(!mt||Ie[0]&128)&&S!==(S=Mo(ze[7])+"")&&U(D,S),(!mt||Ie[1]&2)&&I!==(I=ze[32].length+"")&&U(G,I),(!mt||Ie[1]&2)&&H!==(H=ze[32].length===1?"SERVER":"SERVERS")&&U(L,H),(!mt||Ie[1]&1)&&Y!==(Y=ze[31].containerCount+"")&&U(Z,Y),(!mt||Ie[1]&1)&&J!==(J=ze[31].containerCount===1?"CONTAINER":"CONTAINERS")&&U(W,J),(!mt||Ie[1]&1)&&te!==(te=ze[31].monthlyCost+"")&&U(ve,te),(!mt||Ie[1]&1)&&we!==(we=ze[31].healthyContainers+"")&&U(Ge,we),(!mt||Ie[1]&1)&&vt!==(vt=ze[31].containerCount+"")&&U(qe,vt),(!mt||Ie[1]&1&&Se!==(Se="banner-value "+(ze[31].unhealthyContainers>0?"warning":"success")+" svelte-kvdz4s"))&&u(be,"class",Se),(!mt||Ie[0]&2048)&&st!==(st=ze[11]?"▼":"▶")&&U(ot,st),(!mt||Ie[1]&2)&&St!==(St=Xl(ze[32].length,"Server")+"")&&U(Et,St),ze[11]?ht?(ht.p(ze,Ie),Ie[0]&2048&&R(ht,1)):(ht=vo(ze),ht.c(),R(ht,1),ht.m(Re,null)):ht&&(De(),M(ht,1,1,()=>{ht=null}),Ee()),(!mt||Ie[0]&2048)&&ke(Re,"expanded",ze[11]),(!mt||Ie[0]&8)&&Vt!==(Vt=ze[3]?"▼":"▶")&&U(Ke,Vt),(!mt||Ie[0]&16)&&rl!==(rl=Xl(ze[4].length,"Snapshot")+"")&&U(hl,rl),ze[3]?gt?(gt.p(ze,Ie),Ie[0]&8&&R(gt,1)):(gt=go(ze),gt.c(),R(gt,1),gt.m(he,null)):gt&&(De(),M(gt,1,1,()=>{gt=null}),Ee()),(!mt||Ie[0]&8)&&ke(he,"expanded",ze[3]);const Nt={};Ie[0]&469763600|Ie[3]&134217728&&(Nt.$$scope={dirty:Ie,ctx:ze}),!Yt&&Ie[0]&67108864&&(Yt=!0,Nt.open=ze[26],dl(()=>Yt=!1)),yt.$set(Nt);const Cl={};Ie[0]&4194304&&(Cl.title=ze[22]),Ie[0]&1134559296|Ie[3]&134217728&&(Cl.$$scope={dirty:Ie,ctx:ze}),!Tt&&Ie[0]&2097152&&(Tt=!0,Cl.open=ze[21],dl(()=>Tt=!1)),Qe.$set(Cl);const Fl={};Ie[0]&2093312|Ie[3]&134217728&&(Fl.$$scope={dirty:Ie,ctx:ze}),!Rt&&Ie[0]&4096&&(Rt=!0,Fl.open=ze[12],dl(()=>Rt=!1)),Qt.$set(Fl)},i(ze){mt||(R(ht),R(gt),R(yt.$$.fragment,ze),R(Qe.$$.fragment,ze),R(Qt.$$.fragment,ze),mt=!0)},o(ze){M(ht),M(gt),M(yt.$$.fragment,ze),M(Qe.$$.fragment,ze),M(Qt.$$.fragment,ze),mt=!1},d(ze){ze&&(k(e),k(Ye),k(Bt),k($l)),Me(zt,ze),Me(Dt,ze),ht&&ht.d(),gt&&gt.d(),ue(yt,ze),ue(Qe,ze),ue(Qt,ze),Ol=!1,We(Il)}}}function Po(l){return l!=null&&l.length?l.reduce((e,t)=>{const n=t.size_slug||t.size||"";return n.includes("4gb")?e+24:n.includes("2gb")?e+12:n.includes("1gb")?e+6:n.includes("512mb")?e+4:e+6},0):0}function Xl(l,e,t=null){return l===1?`${l} ${e}`:`${l} ${t||e+"s"}`}function Ro(l){if(!l)return"0 B";const e=1024,t=["B","KB","MB","GB"],n=Math.floor(Math.log(l)/Math.log(e));return parseFloat((l/Math.pow(e,n)).toFixed(1))+" "+t[n]}function No(l){return l?new Date(l).toLocaleDateString("en-GB",{day:"2-digit",month:"short"}):""}function Mo(l){if(!l)return"never";const t=Math.floor((new Date-l)/1e3);return t<5?"just now":t<60?`${t}s ago`:t<3600?`${Math.floor(t/60)}m ago`:l.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"})}const jo=l=>{var e;return(e=l.name)==null?void 0:e.startsWith("base-")},Ao=l=>{var e;return(e=l.name)==null?void 0:e.startsWith("base-")};function D_(l,e,t){let n,s,o,i,f,a,c,_,p,m,h,v;dt(l,pn,Te=>t(50,_=Te)),dt(l,Mn,Te=>t(51,p=Te)),dt(l,Xt,Te=>t(52,m=Te)),dt(l,Bf,Te=>t(53,h=Te)),dt(l,An,Te=>t(54,v=Te));let g="",y="",C=null,w=[],S=[],D=!1,E=!0,P=!1,z=[],q=!1,A=!1,N=!1,I="custom",G="",F="ubuntu-22-04-x64",O=!0,H=!0,L=!0,j=null;const B=[{value:"ubuntu-22-04-x64",label:"Ubuntu 22.04 LTS"},{value:"ubuntu-20-04-x64",label:"Ubuntu 20.04 LTS"},{value:"debian-11-x64",label:"Debian 11"},{value:"debian-12-x64",label:"Debian 12"}];function K(){t(14,I=j!=null&&j.exists?"custom":"base"),t(12,A=!0)}let Y=null;async function Z(){if(p)try{t(47,Y=await He("GET",`/infra/fleet/health?do_token=${p}`))}catch(Te){console.error("Failed to load fleet health:",Te)}finally{}}let oe=!1,x="",J="",W=!1,re=null,V=null,ie="",_e=200,te=!1,ve=null,ae=!1,se={region:"lon1",size:"s-2vcpu-2gb",snapshot_id:""};const ee=[{value:"lon1",label:"London 1"},{value:"fra1",label:"Frankfurt 1"},{value:"ams3",label:"Amsterdam 3"},{value:"nyc1",label:"New York 1"},{value:"nyc3",label:"New York 3"},{value:"sfo3",label:"San Francisco 3"},{value:"sgp1",label:"Singapore 1"},{value:"blr1",label:"Bangalore 1"},{value:"tor1",label:"Toronto 1"},{value:"syd1",label:"Sydney 1"}];let Q=[{slug:"s-1vcpu-512mb-10gb",memory:512,vcpus:1,price_monthly:4,description:"$4/mo - 512MB / 1 vCPU"},{slug:"s-1vcpu-1gb",memory:1024,vcpus:1,price_monthly:6,description:"$6/mo - 1GB / 1 vCPU"},{slug:"s-2vcpu-2gb",memory:2048,vcpus:2,price_monthly:18,description:"$18/mo - 2GB / 2 vCPU"},{slug:"s-2vcpu-4gb",memory:4096,vcpus:2,price_monthly:24,description:"$24/mo - 4GB / 2 vCPU"},{slug:"s-4vcpu-8gb",memory:8192,vcpus:4,price_monthly:48,description:"$48/mo - 8GB / 4 vCPU"}];async function be(){var Te;try{const ye=await He("GET","/infra/sizes");((Te=ye.sizes)==null?void 0:Te.length)>0&&t(28,Q=ye.sizes)}catch{console.warn("Using fallback sizes")}}kl(()=>{be()});async function we(){t(5,q=!0);try{const Te=await He("GET",`/infra/snapshots?do_token=${p}`);t(4,z=Te.snapshots||[]),Ge()}catch(Te){console.error("Failed to load snapshots:",Te)}finally{t(5,q=!1)}}function Ge(){const Te=z.find(ye=>{var Ye;return(Ye=ye.name)==null?void 0:Ye.toLowerCase().startsWith("base-")});Te?t(20,j={exists:!0,name:Te.name,created_at:Te.created_at}):t(20,j={exists:!1})}async function nt(Te,ye){if(confirm(`Delete snapshot "${ye}"?`))try{await He("DELETE",`/infra/snapshots/${Te}?do_token=${p}`),$e.success(`Deleted ${ye}`),t(4,z=z.filter(Ye=>Ye.id!==Te))}catch(Ye){$e.error(`Failed: ${Ye.message}`)}}async function vt(){t(13,N=!0),t(8,w=[]);const Te=(ye,Ye="info")=>{t(8,w=[...w,{message:ye,type:Ye,time:new Date}])};try{if(I==="base")Te("Starting base snapshot creation..."),await en("POST",`/infra/setup/init/stream?do_token=${p}`,{},ye=>{var Ye;ye.type==="log"?Te(ye.message||((Ye=ye.data)==null?void 0:Ye.message),"info"):ye.type==="progress"?ye.message&&Te(ye.message,"info"):ye.type==="error"?Te(ye.message||ye.error,"error"):ye.type==="done"||ye.type==="complete"?ye.success?Te("✅ Base snapshot created successfully!","success"):Te(`❌ ${ye.message||ye.error||"Failed"}`,"error"):ye.message&&Te(ye.message,"info")}),await Ge(),await we(),$e.success("Base snapshot created!");else{if(!G){$e.error("Snapshot name required"),t(13,N=!1);return}if(G.toLowerCase().startsWith("base-")){$e.error('Custom snapshots cannot start with "base-"'),t(13,N=!1);return}Te(`Starting custom snapshot "${G}"...`),await en("POST",`/infra/snapshots/ensure/stream?do_token=${p}`,{name:G,base_image:F,install_docker:O,install_nginx:H,install_certbot:L},ye=>{var Ye;ye.type==="log"?Te(ye.message||((Ye=ye.data)==null?void 0:Ye.message),"info"):ye.type==="progress"?ye.message&&Te(ye.message,"info"):ye.type==="error"?Te(ye.message||ye.error,"error"):ye.type==="done"||ye.type==="complete"?ye.success?Te("✅ Snapshot created successfully!","success"):Te(`❌ ${ye.message||ye.error||"Failed"}`,"error"):ye.message&&Te(ye.message,"info")}),await we(),$e.success("Custom snapshot created!"),t(15,G="")}}catch(ye){Te(`❌ Error: ${ye.message}`,"error"),$e.error(ye.message)}finally{t(13,N=!1)}}async function qe(){t(10,D=!0),t(9,S=[]);const Te=(ye,Ye="info")=>{t(9,S=[...S,{message:ye,type:Ye,time:new Date}])};try{Te("Starting provisioning..."),await en("POST",`/infra/servers/provision/stream?do_token=${p}`,{snapshot_id:se.snapshot_id||null,region:se.region,size:se.size},ye=>{var Ye;ye.type==="log"?Te(ye.message||((Ye=ye.data)==null?void 0:Ye.message),"info"):ye.type==="progress"?Te(ye.message||`Progress: ${ye.percent||""}%`,"info"):ye.type==="error"?Te(ye.message||ye.error,"error"):ye.type==="done"||ye.type==="complete"?ye.success?Te(`✅ Server provisioned! IP: ${ye.ip||"pending"}`,"success"):Te(`❌ ${ye.message||ye.error||"Failed"}`,"error"):ye.message&&Te(ye.message,"info")}),$e.success("Server provisioned"),Xt.refresh()}catch(ye){Te(`❌ Error: ${ye.message}`,"error"),$e.error("Failed: "+ye.message)}finally{t(10,D=!1)}}async function Se(Te){const{server:ye}=Te.detail;if(Te.type==="destroy"&&confirm(`Destroy ${ye.name}? This cannot be undone.`))try{await He("DELETE",`/infra/servers/${ye.id}?do_token=${p}`),$e.success(`Destroyed ${ye.name}`),Xt.refresh()}catch(yt){$e.error(`Failed: ${yt.message}`)}}async function Ae(Te){var Yt,Bt,Qe;const{server:ye,containerName:Ye}=Te.detail,yt=ye.ip||((Qe=(Bt=(Yt=ye.networks)==null?void 0:Yt.v4)==null?void 0:Bt[0])==null?void 0:Qe.ip_address)||"unknown";re=ye.id,V=Ye,t(22,x=`📋 ${Ye} @ ${yt}`),t(48,J=""),t(6,ie=""),t(21,oe=!0),t(23,W=!0);try{const Tt=await He("GET",`/infra/agent/${ye.id}/containers/${Ye}/logs?do_token=${p}&tail=${_e}`);t(48,J=Tt.logs||"No logs available")}catch(Tt){t(48,J=`Error: ${Tt.message}`)}finally{t(23,W=!1)}}async function me(){if(!(!re||!V)){t(23,W=!0);try{const Te=await He("GET",`/infra/agent/${re}/containers/${V}/logs?do_token=${p}&tail=${_e}`);t(48,J=Te.logs||"No logs available")}catch(Te){t(48,J=`Error: ${Te.message}`)}finally{t(23,W=!1)}}}function Le(){te?ve=setInterval(me,3e3):Re()}function Re(){ve&&(clearInterval(ve),ve=null),t(25,te=!1)}function Pe(){Xt.refresh(),t(7,C=new Date)}function Be(Te){on.call(this,l,Te)}function tt(Te){on.call(this,l,Te)}function st(){g=_t(this),t(1,g),t(34,n),t(50,_),t(54,v),t(53,h)}function ot(){y=_t(this),t(2,y),t(33,s),t(50,_)}const Je=()=>t(26,ae=!0),it=()=>t(11,E=!E),St=()=>t(3,P=!P),Et=Te=>nt(Te.id,Te.name),nl=()=>{t(26,ae=!1),t(9,S=[])};function et(){se.snapshot_id=_t(this),t(27,se),t(4,z)}function Ut(){se.region=_t(this),t(27,se),t(4,z)}function Pt(){se.size=_t(this),t(27,se),t(4,z)}function Ht(Te){ae=Te,t(26,ae)}const ut=()=>{t(26,ae=!1),t(9,S=[])},pt=()=>{t(21,oe=!1),Re()};function he(){ie=this.value,t(6,ie)}function Oe(){_e=_t(this),t(24,_e)}function ct(){te=this.checked,t(25,te)}function Gt(Te){oe=Te,t(21,oe)}const Vt=()=>{t(12,A=!1),t(8,w=[])},Ke=()=>t(14,I="base"),Wt=()=>t(14,I="custom");function vl(){G=this.value,t(15,G)}function rl(){F=_t(this),t(16,F),t(35,B)}function hl(){O=this.checked,t(17,O)}function wl(){H=this.checked,t(18,H)}function Jt(){L=this.checked,t(19,L)}function xt(Te){A=Te,t(12,A)}const al=()=>{t(12,A=!1),t(8,w=[])};return l.$$.update=()=>{var Te,ye,Ye,yt,Yt,Bt;l.$$.dirty[1]&13107200&&t(34,n=[...new Set([...(_||[]).map(Qe=>Qe.project).filter(Boolean),...v||[],...(h||[]).map(Qe=>Qe.project).filter(Boolean)])].sort()),l.$$.dirty[1]&524288&&t(33,s=[...new Set([...(_||[]).map(Qe=>Qe.env||Qe.environment).filter(Boolean),"prod","staging","dev"])].sort()),l.$$.dirty[0]&6|l.$$.dirty[1]&524288&&t(32,o=(_||[]).filter(Qe=>!(g&&Qe.project!==g||y&&(Qe.env||Qe.environment)!==y))),l.$$.dirty[0]&56&&P&&z.length===0&&!q&&we(),l.$$.dirty[1]&589824&&t(31,i=Y?{serverCount:((Te=Y.summary)==null?void 0:Te.total)||(_==null?void 0:_.length)||0,containerCount:((ye=Y.servers)==null?void 0:ye.reduce((Qe,Tt)=>Qe+(Tt.containers||0),0))||0,healthyContainers:((Ye=Y.servers)==null?void 0:Ye.reduce((Qe,Tt)=>Qe+(Tt.healthy||0),0))||0,unhealthyContainers:((yt=Y.servers)==null?void 0:yt.reduce((Qe,Tt)=>Qe+(Tt.unhealthy||0),0))||0,monthlyCost:Po(_),health:((Yt=Y.summary)==null?void 0:Yt.healthy)===((Bt=Y.summary)==null?void 0:Bt.total)?"healthy":"degraded"}:{serverCount:(_==null?void 0:_.length)||0,containerCount:0,healthyContainers:0,unhealthyContainers:0,monthlyCost:Po(_),health:"unknown"}),l.$$.dirty[1]&1114112&&!Y&&p&&Z(),l.$$.dirty[0]&64|l.$$.dirty[1]&131072&&t(30,f=ie?J.split(`
`).filter(Qe=>Qe.toLowerCase().includes(ie.toLowerCase())).join(`
`):J),l.$$.dirty[1]&2097152&&t(49,a=m||{loading:!1}),l.$$.dirty[1]&262144&&t(29,c=a.loading),l.$$.dirty[1]&524288&&_&&t(7,C=new Date)},[Pe,g,y,P,z,q,ie,C,w,S,D,E,A,N,I,G,F,O,H,L,j,oe,x,W,_e,te,ae,se,Q,c,f,i,o,s,n,B,K,ee,we,nt,vt,qe,Se,Ae,me,Le,Re,Y,J,a,_,p,m,h,v,Be,tt,st,ot,Je,it,St,Et,nl,et,Ut,Pt,Ht,ut,pt,he,Oe,ct,Gt,Vt,Ke,Wt,vl,rl,hl,wl,Jt,xt,al]}class E_ extends Ct{constructor(e){super(),$t(this,e,D_,z_,kt,{refresh:0},null,[-1,-1,-1,-1])}get refresh(){return this.$$.ctx[0]}}const q_="modulepreload",L_=function(l){return"/static/"+l},Oo={},Io=function(e,t,n){let s=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),f=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));s=Promise.allSettled(t.map(a=>{if(a=L_(a),a in Oo)return;Oo[a]=!0;const c=a.endsWith(".css"),_=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${_}`))return;const p=document.createElement("link");if(p.rel=c?"stylesheet":q_,c||(p.as="script"),p.crossOrigin="",p.href=a,f&&p.setAttribute("nonce",f),document.head.appendChild(p),c)return new Promise((m,h)=>{p.addEventListener("load",m),p.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${a}`)))})}))}function o(i){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=i,window.dispatchEvent(f),!f.defaultPrevented)throw i}return s.then(i=>{for(const f of i||[])f.status==="rejected"&&o(f.reason);return e().catch(o)})},{Boolean:mn}=Sf;function Fo(l,e,t){const n=l.slice();return n[179]=e[t],n}function Uo(l,e,t){const n=l.slice();return n[179]=e[t],n}function Bo(l,e,t){const n=l.slice();return n[179]=e[t],n}function Ho(l,e,t){const n=l.slice();return n[179]=e[t],n}function Go(l,e,t){const n=l.slice();return n[83]=e[t],n}function Vo(l,e,t){const n=l.slice();return n[190]=e[t],n}function Wo(l,e,t){const n=l.slice();return n[193]=e[t],n}function Jo(l,e,t){const n=l.slice();return n[196]=e[t],n}function Ko(l,e,t){var o,i,f;const n=l.slice();n[179]=e[t];const s=n[179].ip||((f=(i=(o=n[179].networks)==null?void 0:o.v4)==null?void 0:i[0])==null?void 0:f.ip_address);return n[199]=s,n}function Yo(l,e,t){var o,i,f;const n=l.slice();n[179]=e[t];const s=n[179].ip||((f=(i=(o=n[179].networks)==null?void 0:o.v4)==null?void 0:i[0])==null?void 0:f.ip_address);return n[199]=s,n}function Qo(l,e,t){const n=l.slice();return n[204]=e[t],n[206]=t,n}function P_(l){const e=l.slice(),t=e[28].find(s=>s.isMain);e[207]=t;const n=e[28].filter(s=>!s.isMain).length;return e[208]=n,e}function Zo(l,e,t){const n=l.slice();return n[204]=e[t],n[206]=t,n}function Xo(l,e,t){const n=l.slice();return n[210]=e[t],n}function xo(l,e,t){const n=l.slice();return n[213]=e[t],n}function ei(l,e,t){const n=l.slice();return n[216]=e[t],n}function ti(l){let e,t,n,s,o,i,f,a,c,_;function p(){return l[86](l[216])}return{c(){e=d("label"),t=d("input"),s=b(),o=d("span"),o.textContent=`${l[216].label}`,i=b(),f=d("span"),f.textContent=`${l[216].description}`,a=b(),u(t,"type","radio"),u(t,"name","deployType"),t.checked=n=l[0]===l[216].value,u(t,"class","svelte-1hrwlue"),u(o,"class","dt-label svelte-1hrwlue"),u(f,"class","dt-desc svelte-1hrwlue"),u(e,"class","deploy-type-option svelte-1hrwlue"),ke(e,"active",l[0]===l[216].value)},m(m,h){$(m,e,h),r(e,t),r(e,s),r(e,o),r(e,i),r(e,f),r(e,a),c||(_=X(t,"change",p),c=!0)},p(m,h){l=m,h[0]&1&&n!==(n=l[0]===l[216].value)&&(t.checked=n),h[0]&1|h[1]&536870912&&ke(e,"active",l[0]===l[216].value)},d(m){m&&k(e),c=!1,_()}}}function li(l){let e,t,n;return{c(){e=d("small"),t=T("Usually same as type: "),n=T(l[1]),u(e,"class","svelte-1hrwlue")},m(s,o){$(s,e,o),r(e,t),r(e,n)},p(s,o){o[0]&2&&U(n,s[1])},d(s){s&&k(e)}}}function ni(l){let e,t=l[213]+"",n;return{c(){e=d("option"),n=T(t),e.__value=l[213],le(e,e.__value)},m(s,o){$(s,e,o),r(e,n)},p:ge,d(s){s&&k(e)}}}function si(l){var h;let e,t,n,s,o,i,f,a=((h=l[2].find(l[92]))==null?void 0:h.image)+"",c,_,p=pe(l[2]),m=[];for(let v=0;v<p.length;v+=1)m[v]=oi(Xo(l,p,v));return{c(){e=d("div"),t=d("label"),t.textContent="Service Type *",n=b(),s=d("div");for(let v=0;v<m.length;v+=1)m[v].c();o=b(),i=d("small"),f=T("Image: "),c=T(a),_=T(" • Data persisted to /data"),u(t,"class","svelte-1hrwlue"),u(s,"class","stateful-type-selector svelte-1hrwlue"),u(i,"class","svelte-1hrwlue"),u(e,"class","form-group svelte-1hrwlue")},m(v,g){$(v,e,g),r(e,t),r(e,n),r(e,s);for(let y=0;y<m.length;y+=1)m[y]&&m[y].m(s,null);r(e,o),r(e,i),r(i,f),r(i,c),r(i,_)},p(v,g){var y;if(g[0]&6){p=pe(v[2]);let C;for(C=0;C<p.length;C+=1){const w=Xo(v,p,C);m[C]?m[C].p(w,g):(m[C]=oi(w),m[C].c(),m[C].m(s,null))}for(;C<m.length;C+=1)m[C].d(1);m.length=p.length}g[0]&6&&a!==(a=((y=v[2].find(v[92]))==null?void 0:y.image)+"")&&U(c,a)},d(v){v&&k(e),Me(m,v)}}}function oi(l){let e,t,n,s=!1,o,i,f=l[210].label+"",a,c,_,p,m=l[210].port+"",h,v,g,y,C;return g=Ln(l[91][1]),{c(){e=d("label"),t=d("input"),o=b(),i=d("span"),a=T(f),c=b(),_=d("span"),p=T("Port "),h=T(m),v=b(),u(t,"type","radio"),t.__value=n=l[210].value,le(t,t.__value),u(t,"class","svelte-1hrwlue"),u(i,"class","st-label svelte-1hrwlue"),u(_,"class","st-port svelte-1hrwlue"),u(e,"class","stateful-option svelte-1hrwlue"),ke(e,"active",l[1]===l[210].value),g.p(t)},m(w,S){$(w,e,S),r(e,t),t.checked=t.__value===l[1],r(e,o),r(e,i),r(i,a),r(e,c),r(e,_),r(_,p),r(_,h),r(e,v),y||(C=X(t,"change",l[90]),y=!0)},p(w,S){S[0]&4&&n!==(n=w[210].value)&&(t.__value=n,le(t,t.__value),s=!0),(s||S[0]&6)&&(t.checked=t.__value===w[1]),S[0]&4&&f!==(f=w[210].label+"")&&U(a,f),S[0]&4&&m!==(m=w[210].port+"")&&U(h,m),S[0]&6&&ke(e,"active",w[1]===w[210].value)},d(w){w&&k(e),g.r(),y=!1,C()}}}function ii(l){let e,t,n,s,o,i,f,a,c,_,p,m,h,v,g,y,C,w,S,D,E,P,z,q,A,N,I,G,F,O,H,L,j,B,K,Y,Z,oe,x,J,W,re,V,ie;s=new Ue({props:{variant:"ghost",size:"sm",title:"Load saved config",$$slots:{default:[R_]},$$scope:{ctx:l}}}),s.$on("click",l[63]),i=new Ue({props:{variant:"ghost",size:"sm",title:"Save current settings",$$slots:{default:[N_]},$$scope:{ctx:l}}}),i.$on("click",l[64]),a=new Ue({props:{variant:"ghost",size:"sm",title:"Edit exclusion patterns",$$slots:{default:[M_]},$$scope:{ctx:l}}}),a.$on("click",l[65]);let _e=l[53]&&ri(l),te=l[54]&&ai(l),ve=l[15]==="code"&&fi(l),ae=l[15]==="git"&&hi(l),se=l[15]==="image"&&ki(l),ee=l[15]==="image_file"&&wi(l);return re=Ln(l[91][0]),{c(){e=d("div"),t=d("span"),t.textContent="Config:",n=b(),ce(s.$$.fragment),o=b(),ce(i.$$.fragment),f=b(),ce(a.$$.fragment),c=b(),_e&&_e.c(),_=b(),te&&te.c(),p=b(),m=d("div"),h=d("label"),h.innerHTML='Tags <small class="svelte-1hrwlue">(comma-separated)</small>',v=b(),g=d("input"),y=b(),C=d("div"),w=d("label"),w.textContent="Source Type *",S=b(),D=d("div"),E=d("label"),P=d("input"),z=T(`
              📁 Local Code`),q=b(),A=d("label"),N=d("input"),I=T(`
              📦 Git Repo`),G=b(),F=d("label"),O=d("input"),H=T(`
              🐳 Registry`),L=b(),j=d("label"),B=d("input"),K=T(`
              📦 Local Image`),Y=b(),ve&&ve.c(),Z=b(),ae&&ae.c(),oe=b(),se&&se.c(),x=b(),ee&&ee.c(),J=Fe(),u(t,"class","config-label svelte-1hrwlue"),u(e,"class","config-bar svelte-1hrwlue"),u(h,"for","deploy-tags"),u(h,"class","svelte-1hrwlue"),u(g,"id","deploy-tags"),u(g,"type","text"),u(g,"placeholder","api, backend, v2"),u(g,"class","svelte-1hrwlue"),u(m,"class","form-group svelte-1hrwlue"),u(w,"class","svelte-1hrwlue"),u(P,"type","radio"),P.__value="code",le(P,P.__value),u(P,"class","svelte-1hrwlue"),u(E,"class","source-option svelte-1hrwlue"),ke(E,"active",l[15]==="code"),u(N,"type","radio"),N.__value="git",le(N,N.__value),u(N,"class","svelte-1hrwlue"),u(A,"class","source-option svelte-1hrwlue"),ke(A,"active",l[15]==="git"),u(O,"type","radio"),O.__value="image",le(O,O.__value),u(O,"class","svelte-1hrwlue"),u(F,"class","source-option svelte-1hrwlue"),ke(F,"active",l[15]==="image"),u(B,"type","radio"),B.__value="image_file",le(B,B.__value),u(B,"class","svelte-1hrwlue"),u(j,"class","source-option svelte-1hrwlue"),ke(j,"active",l[15]==="image_file"),u(D,"class","source-radio-group svelte-1hrwlue"),u(C,"class","form-group svelte-1hrwlue"),re.p(P,N,O,B)},m(Q,be){$(Q,e,be),r(e,t),r(e,n),fe(s,e,null),r(e,o),fe(i,e,null),r(e,f),fe(a,e,null),r(e,c),_e&&_e.m(e,null),$(Q,_,be),te&&te.m(Q,be),$(Q,p,be),$(Q,m,be),r(m,h),r(m,v),r(m,g),le(g,l[14]),$(Q,y,be),$(Q,C,be),r(C,w),r(C,S),r(C,D),r(D,E),r(E,P),P.checked=P.__value===l[15],r(E,z),r(D,q),r(D,A),r(A,N),N.checked=N.__value===l[15],r(A,I),r(D,G),r(D,F),r(F,O),O.checked=O.__value===l[15],r(F,H),r(D,L),r(D,j),r(j,B),B.checked=B.__value===l[15],r(j,K),$(Q,Y,be),ve&&ve.m(Q,be),$(Q,Z,be),ae&&ae.m(Q,be),$(Q,oe,be),se&&se.m(Q,be),$(Q,x,be),ee&&ee.m(Q,be),$(Q,J,be),W=!0,V||(ie=[X(g,"input",l[94]),X(P,"change",l[95]),X(N,"change",l[96]),X(O,"change",l[97]),X(B,"change",l[98])],V=!0)},p(Q,be){const we={};be[7]&4&&(we.$$scope={dirty:be,ctx:Q}),s.$set(we);const Ge={};be[7]&4&&(Ge.$$scope={dirty:be,ctx:Q}),i.$set(Ge);const nt={};be[7]&4&&(nt.$$scope={dirty:be,ctx:Q}),a.$set(nt),Q[53]?_e?_e.p(Q,be):(_e=ri(Q),_e.c(),_e.m(e,null)):_e&&(_e.d(1),_e=null),Q[54]?te?(te.p(Q,be),be[1]&8388608&&R(te,1)):(te=ai(Q),te.c(),R(te,1),te.m(p.parentNode,p)):te&&(De(),M(te,1,1,()=>{te=null}),Ee()),be[0]&16384&&g.value!==Q[14]&&le(g,Q[14]),be[0]&32768&&(P.checked=P.__value===Q[15]),(!W||be[0]&32768)&&ke(E,"active",Q[15]==="code"),be[0]&32768&&(N.checked=N.__value===Q[15]),(!W||be[0]&32768)&&ke(A,"active",Q[15]==="git"),be[0]&32768&&(O.checked=O.__value===Q[15]),(!W||be[0]&32768)&&ke(F,"active",Q[15]==="image"),be[0]&32768&&(B.checked=B.__value===Q[15]),(!W||be[0]&32768)&&ke(j,"active",Q[15]==="image_file"),Q[15]==="code"?ve?(ve.p(Q,be),be[0]&32768&&R(ve,1)):(ve=fi(Q),ve.c(),R(ve,1),ve.m(Z.parentNode,Z)):ve&&(De(),M(ve,1,1,()=>{ve=null}),Ee()),Q[15]==="git"?ae?(ae.p(Q,be),be[0]&32768&&R(ae,1)):(ae=hi(Q),ae.c(),R(ae,1),ae.m(oe.parentNode,oe)):ae&&(De(),M(ae,1,1,()=>{ae=null}),Ee()),Q[15]==="image"?se?se.p(Q,be):(se=ki(Q),se.c(),se.m(x.parentNode,x)):se&&(se.d(1),se=null),Q[15]==="image_file"?ee?ee.p(Q,be):(ee=wi(Q),ee.c(),ee.m(J.parentNode,J)):ee&&(ee.d(1),ee=null)},i(Q){W||(R(s.$$.fragment,Q),R(i.$$.fragment,Q),R(a.$$.fragment,Q),R(te),R(ve),R(ae),W=!0)},o(Q){M(s.$$.fragment,Q),M(i.$$.fragment,Q),M(a.$$.fragment,Q),M(te),M(ve),M(ae),W=!1},d(Q){Q&&(k(e),k(_),k(p),k(m),k(y),k(C),k(Y),k(Z),k(oe),k(x),k(J)),ue(s),ue(i),ue(a),_e&&_e.d(),te&&te.d(Q),ve&&ve.d(Q),ae&&ae.d(Q),se&&se.d(Q),ee&&ee.d(Q),re.r(),V=!1,We(ie)}}}function R_(l){let e;return{c(){e=T("📥 Load")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function N_(l){let e;return{c(){e=T("💾 Save")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function M_(l){let e;return{c(){e=T("🚫 Exclusions")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function ri(l){let e,t;return{c(){e=d("span"),t=T(l[53]),u(e,"class","config-status svelte-1hrwlue")},m(n,s){$(n,e,s),r(e,t)},p(n,s){s[1]&4194304&&U(t,n[53])},d(n){n&&k(e)}}}function ai(l){let e,t,n,s,o,i,f,a,c,_,p,m;return o=new Ue({props:{variant:"ghost",size:"sm",$$slots:{default:[j_]},$$scope:{ctx:l}}}),o.$on("click",l[66]),{c(){e=d("div"),t=d("div"),n=d("label"),n.textContent="Exclusion Patterns",s=b(),ce(o.$$.fragment),i=b(),f=d("textarea"),a=b(),c=d("small"),c.textContent="One pattern per line. Applied to folder uploads and git clones.",u(n,"class","svelte-1hrwlue"),u(t,"class","exclude-header svelte-1hrwlue"),u(f,"rows","6"),u(f,"placeholder","node_modules/ __pycache__/ *.pyc .git/"),u(f,"class","svelte-1hrwlue"),u(c,"class","svelte-1hrwlue"),u(e,"class","exclude-editor svelte-1hrwlue")},m(h,v){$(h,e,v),r(e,t),r(t,n),r(t,s),fe(o,t,null),r(e,i),r(e,f),le(f,l[55]),r(e,a),r(e,c),_=!0,p||(m=X(f,"input",l[93]),p=!0)},p(h,v){const g={};v[7]&4&&(g.$$scope={dirty:v,ctx:h}),o.$set(g),v[1]&16777216&&le(f,h[55])},i(h){_||(R(o.$$.fragment,h),_=!0)},o(h){M(o.$$.fragment,h),_=!1},d(h){h&&k(e),ue(o),p=!1,m()}}}function j_(l){let e;return{c(){e=T("Reset to Defaults")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function fi(l){let e,t,n,s,o,i,f,a,c,_,p,m,h,v,g,y,C,w,S,D,E,P,z,q,A,N=l[31]&&ui(),I=l[28].length>0&&ci(l);p=new Ue({props:{size:"sm",$$slots:{default:[O_]},$$scope:{ctx:l}}}),p.$on("click",l[70]);function G(j,B){return B[0]&268435456&&(y=null),j[28].length===0?F_:(y==null&&(y=!j[28].some(Rd)),y?I_:pi)}function F(j,B){return B===pi?P_(j):j}let O=G(l,[-1,-1,-1,-1,-1,-1,-1,-1]),H=O(F(l,O)),L=l[34]&&vi(l);return{c(){e=d("div"),t=d("div"),n=d("label"),n.textContent="Build Folders",s=b(),o=d("div"),N&&N.c(),i=b(),f=d("input"),a=b(),I&&I.c(),c=b(),_=d("div"),ce(p.$$.fragment),m=b(),h=d("span"),h.textContent="or drag & drop folders here",v=b(),g=d("div"),H.c(),C=b(),w=d("label"),S=d("input"),D=b(),E=d("span"),E.textContent="Remember folder configuration for this service",P=b(),L&&L.c(),u(n,"class","svelte-1hrwlue"),u(f,"type","file"),u(f,"webkitdirectory",""),u(f,"directory",""),f.multiple=!0,qt(f,"display","none"),u(f,"class","svelte-1hrwlue"),u(h,"class","drop-hint svelte-1hrwlue"),u(_,"class","folder-actions svelte-1hrwlue"),u(o,"class","folder-drop-zone svelte-1hrwlue"),ke(o,"dragover",l[31]),u(g,"class","code-selection-info svelte-1hrwlue"),ke(g,"success",l[28].some(cr)),ke(g,"warning",l[28].length>0&&!l[28].some(_r)),u(S,"type","checkbox"),u(S,"class","svelte-1hrwlue"),u(w,"class","checkbox-label small-check svelte-1hrwlue"),u(t,"class","form-group svelte-1hrwlue"),u(e,"class","source-config svelte-1hrwlue")},m(j,B){$(j,e,B),r(e,t),r(t,n),r(t,s),r(t,o),N&&N.m(o,null),r(o,i),r(o,f),l[99](f),r(o,a),I&&I.m(o,null),r(o,c),r(o,_),fe(p,_,null),r(_,m),r(_,h),r(t,v),r(t,g),H.m(g,null),r(t,C),r(t,w),r(w,S),S.checked=l[30],r(w,D),r(w,E),r(e,P),L&&L.m(e,null),z=!0,q||(A=[X(f,"change",l[71]),X(o,"dragenter",l[72]),X(o,"dragleave",l[73]),X(o,"dragover",Pd),X(o,"drop",l[74]),X(S,"change",l[102])],q=!0)},p(j,B){j[31]?N||(N=ui(),N.c(),N.m(o,i)):N&&(N.d(1),N=null),j[28].length>0?I?(I.p(j,B),B[0]&268435456&&R(I,1)):(I=ci(j),I.c(),R(I,1),I.m(o,c)):I&&(De(),M(I,1,1,()=>{I=null}),Ee());const K={};B[7]&4&&(K.$$scope={dirty:B,ctx:j}),p.$set(K),(!z||B[1]&1)&&ke(o,"dragover",j[31]),O===(O=G(j,B))&&H?H.p(F(j,O),B):(H.d(1),H=O(F(j,O)),H&&(H.c(),H.m(g,null))),(!z||B[0]&268435456)&&ke(g,"success",j[28].some(cr)),(!z||B[0]&268435456)&&ke(g,"warning",j[28].length>0&&!j[28].some(_r)),B[0]&1073741824&&(S.checked=j[30]),j[34]?L?(L.p(j,B),B[1]&8&&R(L,1)):(L=vi(j),L.c(),R(L,1),L.m(e,null)):L&&(De(),M(L,1,1,()=>{L=null}),Ee())},i(j){z||(R(I),R(p.$$.fragment,j),R(L),z=!0)},o(j){M(I),M(p.$$.fragment,j),M(L),z=!1},d(j){j&&k(e),N&&N.d(),l[99](null),I&&I.d(),ue(p),H.d(),L&&L.d(),q=!1,We(A)}}}function ui(l){let e;return{c(){e=d("div"),e.innerHTML='<span class="drop-icon svelte-1hrwlue">📂</span> <span>Drop folder here</span>',u(e,"class","drop-overlay svelte-1hrwlue")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function ci(l){let e,t,n=pe(l[28]),s=[];for(let i=0;i<n.length;i+=1)s[i]=di(Zo(l,n,i));const o=i=>M(s[i],1,1,()=>{s[i]=null});return{c(){e=d("div");for(let i=0;i<s.length;i+=1)s[i].c();u(e,"class","folder-list svelte-1hrwlue")},m(i,f){$(i,e,f);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(e,null);t=!0},p(i,f){if(f[0]&268435456|f[2]&24576){n=pe(i[28]);let a;for(a=0;a<n.length;a+=1){const c=Zo(i,n,a);s[a]?(s[a].p(c,f),R(s[a],1)):(s[a]=di(c),s[a].c(),R(s[a],1),s[a].m(e,null))}for(De(),a=n.length;a<s.length;a+=1)o(a);Ee()}},i(i){if(!t){for(let f=0;f<n.length;f+=1)R(s[f]);t=!0}},o(i){s=s.filter(mn);for(let f=0;f<s.length;f+=1)M(s[f]);t=!1},d(i){i&&k(e),Me(s,i)}}}function A_(l){let e=l[204].isMain?"MAIN":"dependency",t;return{c(){t=T(e)},m(n,s){$(n,t,s)},p(n,s){s[0]&268435456&&e!==(e=n[204].isMain?"MAIN":"dependency")&&U(t,e)},d(n){n&&k(t)}}}function _i(l){let e,t,n;function s(){return l[100](l[206])}return{c(){e=d("button"),e.textContent="⭐",u(e,"type","button"),u(e,"class","set-main-btn svelte-1hrwlue"),u(e,"title","Set as main")},m(o,i){$(o,e,i),t||(n=X(e,"click",s),t=!0)},p(o,i){l=o},d(o){o&&k(e),t=!1,n()}}}function di(l){let e,t,n=l[204].isMain?"📁":"📂",s,o,i,f=l[204].name+"",a,c,_,p,m,h,v=l[204].fileCount+"",g,y,C,w,S,D,E,P,z;p=new Ze({props:{variant:l[204].isMain?"success":"secondary",$$slots:{default:[A_]},$$scope:{ctx:l}}});let q=!l[204].isMain&&_i(l);function A(){return l[101](l[206])}return{c(){e=d("div"),t=d("span"),s=T(n),o=b(),i=d("strong"),a=T(f),c=T("/"),_=b(),ce(p.$$.fragment),m=b(),h=d("span"),g=T(v),y=T(" files"),C=b(),q&&q.c(),w=b(),S=d("button"),S.textContent="✕",D=b(),u(t,"class","folder-icon svelte-1hrwlue"),u(i,"class","svelte-1hrwlue"),u(h,"class","file-count svelte-1hrwlue"),u(S,"type","button"),u(S,"class","remove-btn svelte-1hrwlue"),u(e,"class","folder-item svelte-1hrwlue")},m(N,I){$(N,e,I),r(e,t),r(t,s),r(e,o),r(e,i),r(i,a),r(i,c),r(e,_),fe(p,e,null),r(e,m),r(e,h),r(h,g),r(h,y),r(e,C),q&&q.m(e,null),r(e,w),r(e,S),r(e,D),E=!0,P||(z=X(S,"click",A),P=!0)},p(N,I){l=N,(!E||I[0]&268435456)&&n!==(n=l[204].isMain?"📁":"📂")&&U(s,n),(!E||I[0]&268435456)&&f!==(f=l[204].name+"")&&U(a,f);const G={};I[0]&268435456&&(G.variant=l[204].isMain?"success":"secondary"),I[0]&268435456|I[7]&4&&(G.$$scope={dirty:I,ctx:l}),p.$set(G),(!E||I[0]&268435456)&&v!==(v=l[204].fileCount+"")&&U(g,v),l[204].isMain?q&&(q.d(1),q=null):q?q.p(l,I):(q=_i(l),q.c(),q.m(e,w))},i(N){E||(R(p.$$.fragment,N),E=!0)},o(N){M(p.$$.fragment,N),E=!1},d(N){N&&k(e),ue(p),q&&q.d(),P=!1,z()}}}function O_(l){let e;return{c(){e=T("➕ Add Folder")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function pi(l){let e,t,n=l[207].name+"",s,o,i,f,a=l[208]>0&&mi(l);return{c(){e=T("✓ Main: "),t=d("strong"),s=T(n),o=T("/"),i=b(),a&&a.c(),f=Fe()},m(c,_){$(c,e,_),$(c,t,_),r(t,s),r(t,o),$(c,i,_),a&&a.m(c,_),$(c,f,_)},p(c,_){_[0]&268435456&&n!==(n=c[207].name+"")&&U(s,n),c[208]>0?a?a.p(c,_):(a=mi(c),a.c(),a.m(f.parentNode,f)):a&&(a.d(1),a=null)},d(c){c&&(k(e),k(t),k(i),k(f)),a&&a.d(c)}}}function I_(l){let e;return{c(){e=T("⚠️ No main folder selected. Click ⭐ to set one as main.")},m(t,n){$(t,e,n)},p:ge,d(t){t&&k(e)}}}function F_(l){let e;return{c(){e=T("No folders selected. Add your main service folder and any dependencies.")},m(t,n){$(t,e,n)},p:ge,d(t){t&&k(e)}}}function mi(l){let e,t=l[208]+"",n,s,o=l[208]===1?"y":"ies",i;return{c(){e=T("+ "),n=T(t),s=T(" dependenc"),i=T(o)},m(f,a){$(f,e,a),$(f,n,a),$(f,s,a),$(f,i,a)},p(f,a){a[0]&268435456&&t!==(t=f[208]+"")&&U(n,t),a[0]&268435456&&o!==(o=f[208]===1?"y":"ies")&&U(i,o)},d(f){f&&(k(e),k(n),k(s),k(i))}}}function vi(l){let e,t,n,s,o,i,f,a,c,_,p,m,h,v,g,y,C,w,S,D,E,P;return o=new Ze({props:{variant:l[33]==="from folder"?"success":l[33]==="multi-folder"?"info":"warning",$$slots:{default:[U_]},$$scope:{ctx:l}}}),{c(){e=d("div"),t=d("div"),n=d("label"),s=T(`🐳 Dockerfile
                    `),ce(o.$$.fragment),i=b(),f=d("textarea"),a=b(),c=d("div"),_=d("select"),p=d("option"),p.textContent="FROM...",m=d("option"),m.textContent="python:3.11-slim",h=d("option"),h.textContent="python:3.12-slim",v=d("option"),v.textContent="node:20-alpine",g=d("option"),g.textContent="node:18-alpine",y=d("option"),y.textContent="golang:1.21-alpine",C=d("option"),C.textContent="nginx:alpine",w=b(),S=d("input"),u(n,"class","svelte-1hrwlue"),u(t,"class","dockerfile-header svelte-1hrwlue"),u(f,"rows","8"),u(f,"class","dockerfile-editor svelte-1hrwlue"),u(f,"spellcheck","false"),p.__value="",le(p,p.__value),m.__value="python:3.11-slim",le(m,m.__value),h.__value="python:3.12-slim",le(h,h.__value),v.__value="node:20-alpine",le(v,v.__value),g.__value="node:18-alpine",le(g,g.__value),y.__value="golang:1.21-alpine",le(y,y.__value),C.__value="nginx:alpine",le(C,C.__value),u(_,"class","svelte-1hrwlue"),l[35]===void 0&&Xe(()=>l[104].call(_)),u(S,"type","text"),u(S,"placeholder","CMD (e.g. uvicorn main:app ...)"),u(S,"class","svelte-1hrwlue"),u(c,"class","dockerfile-quick-fields svelte-1hrwlue"),u(e,"class","dockerfile-preview svelte-1hrwlue")},m(z,q){$(z,e,q),r(e,t),r(t,n),r(n,s),fe(o,n,null),r(e,i),r(e,f),le(f,l[32]),r(e,a),r(e,c),r(c,_),r(_,p),r(_,m),r(_,h),r(_,v),r(_,g),r(_,y),r(_,C),Ne(_,l[35],!0),r(c,w),r(c,S),le(S,l[36]),D=!0,E||(P=[X(f,"input",l[103]),X(_,"change",l[104]),X(_,"change",l[105]),X(S,"input",l[106]),X(S,"change",l[107])],E=!0)},p(z,q){const A={};q[1]&4&&(A.variant=z[33]==="from folder"?"success":z[33]==="multi-folder"?"info":"warning"),q[1]&4|q[7]&4&&(A.$$scope={dirty:q,ctx:z}),o.$set(A),q[1]&2&&le(f,z[32]),q[1]&16&&Ne(_,z[35]),q[1]&32&&S.value!==z[36]&&le(S,z[36])},i(z){D||(R(o.$$.fragment,z),D=!0)},o(z){M(o.$$.fragment,z),D=!1},d(z){z&&k(e),ue(o),E=!1,We(P)}}}function U_(l){let e;return{c(){e=T(l[33])},m(t,n){$(t,e,n)},p(t,n){n[1]&4&&U(e,t[33])},d(t){t&&k(e)}}}function hi(l){let e,t,n,s,o,i,f,a,c,_,p,m,h,v,g,y,C,w,S,D,E,P,z,q,A,N,I,G,F,O,H,L,j,B,K,Y,Z,oe,x=l[21].length>0&&gi(l);return E=new Ue({props:{size:"sm",$$slots:{default:[H_]},$$scope:{ctx:l}}}),E.$on("click",l[112]),z=new Ue({props:{variant:"ghost",size:"sm",$$slots:{default:[G_]},$$scope:{ctx:l}}}),z.$on("click",l[113]),{c(){e=d("div"),t=d("div"),n=d("label"),n.textContent="Git Repository URL *",s=b(),o=d("input"),i=b(),f=d("small"),f.textContent="HTTPS URL (SSH not supported)",a=b(),c=d("div"),_=d("label"),_.textContent="Branch",p=b(),m=d("input"),h=b(),v=d("div"),g=d("label"),g.textContent="Folders to Include",y=b(),x&&x.c(),C=b(),w=d("div"),S=d("input"),D=b(),ce(E.$$.fragment),P=b(),ce(z.$$.fragment),q=b(),A=d("small"),A.textContent="Leave empty to use entire repo. Add paths for multi-folder builds (main folder contains Dockerfile).",N=b(),I=d("details"),G=d("summary"),G.textContent="🔐 Private repository?",F=b(),O=d("div"),H=d("label"),H.textContent="Personal Access Token",L=b(),j=d("input"),B=b(),K=d("small"),K.innerHTML="Needs <code>repo</code> scope for private repos",u(n,"for","git-url"),u(n,"class","svelte-1hrwlue"),u(o,"id","git-url"),u(o,"type","url"),u(o,"placeholder","https://github.com/user/repo"),u(o,"class","svelte-1hrwlue"),u(f,"class","svelte-1hrwlue"),u(t,"class","form-group svelte-1hrwlue"),u(_,"for","git-branch"),u(_,"class","svelte-1hrwlue"),u(m,"id","git-branch"),u(m,"type","text"),u(m,"placeholder","main"),u(m,"class","svelte-1hrwlue"),u(c,"class","form-group svelte-1hrwlue"),u(g,"class","svelte-1hrwlue"),u(S,"type","text"),u(S,"placeholder","e.g. services/my_api"),u(S,"class","svelte-1hrwlue"),u(w,"class","folder-input svelte-1hrwlue"),u(A,"class","svelte-1hrwlue"),u(v,"class","form-group svelte-1hrwlue"),u(G,"class","svelte-1hrwlue"),u(H,"for","git-token"),u(H,"class","svelte-1hrwlue"),u(j,"id","git-token"),u(j,"type","password"),u(j,"placeholder","ghp_xxxxxxxxxxxx"),u(j,"class","svelte-1hrwlue"),u(K,"class","svelte-1hrwlue"),u(O,"class","form-group svelte-1hrwlue"),u(I,"class","private-repo svelte-1hrwlue"),u(e,"class","source-config svelte-1hrwlue")},m(J,W){$(J,e,W),r(e,t),r(t,n),r(t,s),r(t,o),le(o,l[18]),r(t,i),r(t,f),r(e,a),r(e,c),r(c,_),r(c,p),r(c,m),le(m,l[19]),r(e,h),r(e,v),r(v,g),r(v,y),x&&x.m(v,null),r(v,C),r(v,w),r(w,S),le(S,l[22]),r(w,D),fe(E,w,null),r(w,P),fe(z,w,null),r(v,q),r(v,A),r(e,N),r(e,I),r(I,G),r(I,F),r(I,O),r(O,H),r(O,L),r(O,j),le(j,l[20]),r(O,B),r(O,K),Y=!0,Z||(oe=[X(o,"input",l[108]),X(m,"input",l[109]),X(S,"input",l[111]),X(j,"input",l[114])],Z=!0)},p(J,W){W[0]&262144&&o.value!==J[18]&&le(o,J[18]),W[0]&524288&&m.value!==J[19]&&le(m,J[19]),J[21].length>0?x?(x.p(J,W),W[0]&2097152&&R(x,1)):(x=gi(J),x.c(),R(x,1),x.m(v,C)):x&&(De(),M(x,1,1,()=>{x=null}),Ee()),W[0]&4194304&&S.value!==J[22]&&le(S,J[22]);const re={};W[7]&4&&(re.$$scope={dirty:W,ctx:J}),E.$set(re);const V={};W[7]&4&&(V.$$scope={dirty:W,ctx:J}),z.$set(V),W[0]&1048576&&j.value!==J[20]&&le(j,J[20])},i(J){Y||(R(x),R(E.$$.fragment,J),R(z.$$.fragment,J),Y=!0)},o(J){M(x),M(E.$$.fragment,J),M(z.$$.fragment,J),Y=!1},d(J){J&&k(e),x&&x.d(),ue(E),ue(z),Z=!1,We(oe)}}}function gi(l){let e,t,n=pe(l[21]),s=[];for(let i=0;i<n.length;i+=1)s[i]=bi(Qo(l,n,i));const o=i=>M(s[i],1,1,()=>{s[i]=null});return{c(){e=d("div");for(let i=0;i<s.length;i+=1)s[i].c();u(e,"class","folder-list svelte-1hrwlue")},m(i,f){$(i,e,f);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(e,null);t=!0},p(i,f){if(f[0]&2097152|f[2]&131072){n=pe(i[21]);let a;for(a=0;a<n.length;a+=1){const c=Qo(i,n,a);s[a]?(s[a].p(c,f),R(s[a],1)):(s[a]=bi(c),s[a].c(),R(s[a],1),s[a].m(e,null))}for(De(),a=n.length;a<s.length;a+=1)o(a);Ee()}},i(i){if(!t){for(let f=0;f<n.length;f+=1)R(s[f]);t=!0}},o(i){s=s.filter(mn);for(let f=0;f<s.length;f+=1)M(s[f]);t=!1},d(i){i&&k(e),Me(s,i)}}}function B_(l){let e=l[204].isMain?"MAIN":"dependency",t;return{c(){t=T(e)},m(n,s){$(n,t,s)},p(n,s){s[0]&2097152&&e!==(e=n[204].isMain?"MAIN":"dependency")&&U(t,e)},d(n){n&&k(t)}}}function bi(l){let e,t,n=l[204].isMain?"📁":"📂",s,o,i,f=l[204].path+"",a,c,_,p,m,h,v,g,y;_=new Ze({props:{variant:l[204].isMain?"success":"secondary",$$slots:{default:[B_]},$$scope:{ctx:l}}});function C(){return l[110](l[206])}return{c(){e=d("div"),t=d("span"),s=T(n),o=b(),i=d("strong"),a=T(f),c=b(),ce(_.$$.fragment),p=b(),m=d("button"),m.textContent="✕",h=b(),u(i,"class","svelte-1hrwlue"),u(m,"type","button"),u(m,"class","remove-btn svelte-1hrwlue"),u(e,"class","folder-item svelte-1hrwlue")},m(w,S){$(w,e,S),r(e,t),r(t,s),r(e,o),r(e,i),r(i,a),r(e,c),fe(_,e,null),r(e,p),r(e,m),r(e,h),v=!0,g||(y=X(m,"click",C),g=!0)},p(w,S){l=w,(!v||S[0]&2097152)&&n!==(n=l[204].isMain?"📁":"📂")&&U(s,n),(!v||S[0]&2097152)&&f!==(f=l[204].path+"")&&U(a,f);const D={};S[0]&2097152&&(D.variant=l[204].isMain?"success":"secondary"),S[0]&2097152|S[7]&4&&(D.$$scope={dirty:S,ctx:l}),_.$set(D)},i(w){v||(R(_.$$.fragment,w),v=!0)},o(w){M(_.$$.fragment,w),v=!1},d(w){w&&k(e),ue(_),g=!1,y()}}}function H_(l){let e;return{c(){e=T("+ Main")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function G_(l){let e;return{c(){e=T("+ Dep")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function ki(l){let e,t,n,s,o,i,f,a,c;return{c(){e=d("div"),t=d("div"),n=d("label"),n.textContent="Docker Image *",s=b(),o=d("input"),i=b(),f=d("small"),f.textContent="Full image URL from DO Registry or Docker Hub",u(n,"for","image-url"),u(n,"class","svelte-1hrwlue"),u(o,"id","image-url"),u(o,"type","text"),u(o,"placeholder","registry.digitalocean.com/my-registry/app:latest"),u(o,"class","svelte-1hrwlue"),u(f,"class","svelte-1hrwlue"),u(t,"class","form-group svelte-1hrwlue"),u(e,"class","source-config svelte-1hrwlue")},m(_,p){$(_,e,p),r(e,t),r(t,n),r(t,s),r(t,o),le(o,l[23]),r(t,i),r(t,f),a||(c=X(o,"input",l[115]),a=!0)},p(_,p){p[0]&8388608&&o.value!==_[23]&&le(o,_[23])},d(_){_&&k(e),a=!1,c()}}}function wi(l){let e,t,n,s,o,i,f,a,c,_,p,m,h,v,g,y,C,w,S,D,E,P,z,q,A,N,I,G,F=l[24]&&$i(l);return{c(){e=d("div"),t=d("div"),n=d("label"),n.textContent="Docker Image File (.tar) *",s=b(),o=d("input"),i=b(),F&&F.c(),f=b(),a=d("small"),a.innerHTML="Export from Docker with: <code>docker save myimage:latest -o image.tar</code>",c=b(),_=d("div"),p=d("label"),p.textContent="Image Name *",m=b(),h=d("input"),v=b(),g=d("small"),g.textContent="The image name/tag as it appears in the tar file",y=b(),C=d("div"),w=d("div"),S=d("label"),S.textContent="Container Port",D=b(),E=d("input"),P=b(),z=d("div"),q=d("label"),q.textContent="Host Port",A=b(),N=d("input"),u(n,"for","image-file"),u(n,"class","svelte-1hrwlue"),u(o,"id","image-file"),u(o,"type","file"),u(o,"accept",".tar,.tar.gz"),u(o,"class","svelte-1hrwlue"),u(a,"class","svelte-1hrwlue"),u(t,"class","form-group svelte-1hrwlue"),u(p,"for","image-name"),u(p,"class","svelte-1hrwlue"),u(h,"id","image-name"),u(h,"type","text"),u(h,"placeholder","myapp:latest"),u(h,"class","svelte-1hrwlue"),u(g,"class","svelte-1hrwlue"),u(_,"class","form-group svelte-1hrwlue"),u(S,"for","container-port"),u(S,"class","svelte-1hrwlue"),u(E,"id","container-port"),u(E,"type","number"),u(E,"placeholder",l[16]),u(E,"class","svelte-1hrwlue"),u(w,"class","form-group svelte-1hrwlue"),u(q,"for","host-port"),u(q,"class","svelte-1hrwlue"),u(N,"id","host-port"),u(N,"type","number"),u(N,"placeholder",l[16]),u(N,"class","svelte-1hrwlue"),u(z,"class","form-group svelte-1hrwlue"),u(C,"class","form-row svelte-1hrwlue"),u(e,"class","source-config svelte-1hrwlue")},m(O,H){$(O,e,H),r(e,t),r(t,n),r(t,s),r(t,o),r(t,i),F&&F.m(t,null),r(t,f),r(t,a),r(e,c),r(e,_),r(_,p),r(_,m),r(_,h),le(h,l[25]),r(_,v),r(_,g),r(e,y),r(e,C),r(C,w),r(w,S),r(w,D),r(w,E),le(E,l[26]),r(C,P),r(C,z),r(z,q),r(z,A),r(z,N),le(N,l[27]),I||(G=[X(o,"change",l[80]),X(h,"input",l[116]),X(E,"input",l[117]),X(N,"input",l[118])],I=!0)},p(O,H){O[24]?F?F.p(O,H):(F=$i(O),F.c(),F.m(t,f)):F&&(F.d(1),F=null),H[0]&33554432&&h.value!==O[25]&&le(h,O[25]),H[0]&65536&&u(E,"placeholder",O[16]),H[0]&67108864&&Kt(E.value)!==O[26]&&le(E,O[26]),H[0]&65536&&u(N,"placeholder",O[16]),H[0]&134217728&&Kt(N.value)!==O[27]&&le(N,O[27])},d(O){O&&k(e),F&&F.d(),I=!1,We(G)}}}function $i(l){let e,t,n=l[24].name+"",s,o,i=(l[24].size/1024/1024).toFixed(2)+"",f,a;return{c(){e=d("div"),t=T("📦 "),s=T(n),o=T(" ("),f=T(i),a=T(" MB)"),u(e,"class","file-selected svelte-1hrwlue")},m(c,_){$(c,e,_),r(e,t),r(e,s),r(e,o),r(e,f),r(e,a)},p(c,_){_[0]&16777216&&n!==(n=c[24].name+"")&&U(s,n),_[0]&16777216&&i!==(i=(c[24].size/1024/1024).toFixed(2)+"")&&U(f,i)},d(c){c&&k(e)}}}function Ci(l){let e,t,n,s,o,i,f,a;return{c(){e=d("div"),t=d("label"),t.textContent="App Port",n=b(),s=d("input"),o=b(),i=d("small"),i.textContent="Port your app listens on inside the container",u(t,"for","deploy-port"),u(t,"class","svelte-1hrwlue"),u(s,"id","deploy-port"),u(s,"type","number"),u(s,"min","1"),u(s,"max","65535"),u(s,"class","svelte-1hrwlue"),u(i,"class","svelte-1hrwlue"),u(e,"class","form-group svelte-1hrwlue")},m(c,_){$(c,e,_),r(e,t),r(e,n),r(e,s),le(s,l[16]),r(e,o),r(e,i),f||(a=X(s,"input",l[119]),f=!0)},p(c,_){_[0]&65536&&Kt(s.value)!==c[16]&&le(s,c[16])},d(c){c&&k(e),f=!1,a()}}}function yi(l){let e,t,n,s,o,i,f,a;return{c(){e=d("div"),t=d("label"),t.textContent="Command Override",n=b(),s=d("input"),o=b(),i=d("small"),i.textContent="Override Dockerfile CMD (e.g., different entrypoint for worker vs webservice)",u(t,"for","custom-cmd"),u(t,"class","svelte-1hrwlue"),u(s,"id","custom-cmd"),u(s,"type","text"),u(s,"placeholder","python worker.py"),u(s,"class","svelte-1hrwlue"),u(i,"class","svelte-1hrwlue"),u(e,"class","form-group svelte-1hrwlue")},m(c,_){$(c,e,_),r(e,t),r(e,n),r(e,s),le(s,l[12]),r(e,o),r(e,i),f||(a=X(s,"input",l[120]),f=!0)},p(c,_){_[0]&4096&&s.value!==c[12]&&le(s,c[12])},d(c){c&&k(e),f=!1,a()}}}function Si(l){let e,t,n,s,o,i,f,a,c,_,p,m,h,v,g,y,C;return{c(){e=d("div"),t=d("label"),t.textContent="Cron Schedule *",n=b(),s=d("input"),o=b(),i=d("small"),i.textContent='Standard cron format: minute hour day month weekday (e.g., "0 */6 * * *" = every 6 hours)',f=b(),a=d("div"),c=d("button"),c.textContent="Every min",_=b(),p=d("button"),p.textContent="Hourly",m=b(),h=d("button"),h.textContent="Daily",v=b(),g=d("button"),g.textContent="Weekly",u(t,"for","cron-schedule"),u(t,"class","svelte-1hrwlue"),u(s,"id","cron-schedule"),u(s,"type","text"),u(s,"placeholder","0 * * * *"),s.required=!0,u(s,"class","svelte-1hrwlue"),u(i,"class","svelte-1hrwlue"),u(c,"type","button"),u(c,"class","preset-btn svelte-1hrwlue"),u(p,"type","button"),u(p,"class","preset-btn svelte-1hrwlue"),u(h,"type","button"),u(h,"class","preset-btn svelte-1hrwlue"),u(g,"type","button"),u(g,"class","preset-btn svelte-1hrwlue"),u(a,"class","cron-presets svelte-1hrwlue"),u(e,"class","form-group svelte-1hrwlue")},m(w,S){$(w,e,S),r(e,t),r(e,n),r(e,s),le(s,l[13]),r(e,o),r(e,i),r(e,f),r(e,a),r(a,c),r(a,_),r(a,p),r(a,m),r(a,h),r(a,v),r(a,g),y||(C=[X(s,"input",l[121]),X(c,"click",l[122]),X(p,"click",l[123]),X(h,"click",l[124]),X(g,"click",l[125])],y=!0)},p(w,S){S[0]&8192&&s.value!==w[13]&&le(s,w[13])},d(w){w&&k(e),y=!1,We(C)}}}function Ti(l){let e,t,n,s=l[56]?"▼":"▶",o,i,f,a,c=l[17].trim(),_,p,m,h,v=c&&zi(l),g=l[56]&&Di(l);return{c(){e=d("div"),t=d("button"),n=d("span"),o=T(s),i=b(),f=d("span"),f.textContent="Environment Variables",a=b(),v&&v.c(),_=b(),g&&g.c(),u(n,"class","toggle-icon svelte-1hrwlue"),u(t,"type","button"),u(t,"class","section-toggle svelte-1hrwlue"),u(e,"class","collapsible-section svelte-1hrwlue"),ke(e,"expanded",l[56])},m(y,C){$(y,e,C),r(e,t),r(t,n),r(n,o),r(t,i),r(t,f),r(t,a),v&&v.m(t,null),r(e,_),g&&g.m(e,null),p=!0,m||(h=X(t,"click",l[126]),m=!0)},p(y,C){(!p||C[1]&33554432)&&s!==(s=y[56]?"▼":"▶")&&U(o,s),C[0]&131072&&(c=y[17].trim()),c?v?(v.p(y,C),C[0]&131072&&R(v,1)):(v=zi(y),v.c(),R(v,1),v.m(t,null)):v&&(De(),M(v,1,1,()=>{v=null}),Ee()),y[56]?g?g.p(y,C):(g=Di(y),g.c(),g.m(e,null)):g&&(g.d(1),g=null),(!p||C[1]&33554432)&&ke(e,"expanded",y[56])},i(y){p||(R(v),p=!0)},o(y){M(v),p=!1},d(y){y&&k(e),v&&v.d(),g&&g.d(),m=!1,h()}}}function zi(l){let e,t;return e=new Ze({props:{variant:"info",$$slots:{default:[V_]},$$scope:{ctx:l}}}),{c(){ce(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const o={};s[0]&131072|s[7]&4&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(R(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){ue(e,n)}}}function V_(l){let e=l[17].trim().split(`
`).filter(dr).length+"",t,n;return{c(){t=T(e),n=T(" vars")},m(s,o){$(s,t,o),$(s,n,o)},p(s,o){o[0]&131072&&e!==(e=s[17].trim().split(`
`).filter(dr).length+"")&&U(t,e)},d(s){s&&(k(t),k(n))}}}function Di(l){let e,t,n,s,o,i;return{c(){e=d("div"),t=d("textarea"),n=b(),s=d("small"),s.textContent="One per line: KEY=value",u(t,"id","deploy-envvars"),u(t,"rows","3"),u(t,"placeholder","KEY=value ANOTHER_KEY=value"),u(t,"class","svelte-1hrwlue"),u(s,"class","svelte-1hrwlue"),u(e,"class","section-content svelte-1hrwlue")},m(f,a){$(f,e,a),r(e,t),le(t,l[17]),r(e,n),r(e,s),o||(i=X(t,"input",l[127]),o=!0)},p(f,a){a[0]&131072&&le(t,f[17])},d(f){f&&k(e),o=!1,i()}}}function Ei(l){let e,t,n,s=l[57]?"▼":"▶",o,i,f,a,c=l[0]==="service"&&l[51]||Object.values(l[50]).some(ur),_,p,m,h,v=c&&qi(l),g=l[57]&&Li(l);return{c(){e=d("div"),t=d("button"),n=d("span"),o=T(s),i=b(),f=d("span"),f.textContent="🔧 Service Configuration",a=b(),v&&v.c(),_=b(),g&&g.c(),u(n,"class","toggle-icon svelte-1hrwlue"),u(t,"type","button"),u(t,"class","section-toggle svelte-1hrwlue"),u(e,"class","collapsible-section svelte-1hrwlue"),ke(e,"expanded",l[57])},m(y,C){$(y,e,C),r(e,t),r(t,n),r(n,o),r(t,i),r(t,f),r(t,a),v&&v.m(t,null),r(e,_),g&&g.m(e,null),p=!0,m||(h=X(t,"click",l[128]),m=!0)},p(y,C){(!p||C[1]&67108864)&&s!==(s=y[57]?"▼":"▶")&&U(o,s),C[0]&1|C[1]&1572864&&(c=y[0]==="service"&&y[51]||Object.values(y[50]).some(ur)),c?v?C[0]&1|C[1]&1572864&&R(v,1):(v=qi(y),v.c(),R(v,1),v.m(t,null)):v&&(De(),M(v,1,1,()=>{v=null}),Ee()),y[57]?g?g.p(y,C):(g=Li(y),g.c(),g.m(e,null)):g&&(g.d(1),g=null),(!p||C[1]&67108864)&&ke(e,"expanded",y[57])},i(y){p||(R(v),p=!0)},o(y){M(v),p=!1},d(y){y&&k(e),v&&v.d(),g&&g.d(),m=!1,h()}}}function qi(l){let e,t;return e=new Ze({props:{variant:"info",$$slots:{default:[W_]},$$scope:{ctx:l}}}),{c(){ce(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},i(n){t||(R(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){ue(e,n)}}}function W_(l){let e;return{c(){e=T("configured")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function Li(l){let e,t,n,s,o,i,f,a,c,_,p,m,h,v,g,y,C,w,S,D,E=l[48]&&Pi(l),P=l[0]==="service"&&Ri(l);return{c(){e=d("div"),t=d("label"),n=d("input"),s=b(),o=d("span"),o.textContent="Auto-inject service discovery",i=b(),f=d("small"),f.textContent="Injects DATABASE_URL, REDIS_URL, etc. based on dependencies",a=b(),E&&E.c(),c=b(),_=d("div"),p=b(),m=d("label"),h=d("input"),v=b(),g=d("span"),g.textContent="💾 Persist data (mount volume)",y=b(),C=d("small"),C.textContent="Mounts /data volume for databases and stateful services",w=b(),P&&P.c(),u(n,"type","checkbox"),u(n,"class","svelte-1hrwlue"),u(t,"class","checkbox-label svelte-1hrwlue"),u(f,"class","svelte-1hrwlue"),u(_,"class","config-divider svelte-1hrwlue"),u(h,"type","checkbox"),u(h,"class","svelte-1hrwlue"),u(m,"class","checkbox-label svelte-1hrwlue"),u(C,"class","svelte-1hrwlue"),u(e,"class","section-content service-config svelte-1hrwlue")},m(z,q){$(z,e,q),r(e,t),r(t,n),n.checked=l[48],r(t,s),r(t,o),r(e,i),r(e,f),r(e,a),E&&E.m(e,null),r(e,c),r(e,_),r(e,p),r(e,m),r(m,h),h.checked=l[49],r(m,v),r(m,g),r(e,y),r(e,C),r(e,w),P&&P.m(e,null),S||(D=[X(n,"change",l[129]),X(h,"change",l[134])],S=!0)},p(z,q){q[1]&131072&&(n.checked=z[48]),z[48]?E?E.p(z,q):(E=Pi(z),E.c(),E.m(e,c)):E&&(E.d(1),E=null),q[1]&262144&&(h.checked=z[49]),z[0]==="service"?P?P.p(z,q):(P=Ri(z),P.c(),P.m(e,null)):P&&(P.d(1),P=null)},d(z){z&&k(e),E&&E.d(),P&&P.d(),S=!1,We(D)}}}function Pi(l){let e,t,n,s,o,i,f,a,c,_,p,m,h,v,g,y,C,w,S,D,E;return{c(){e=d("div"),t=d("label"),t.textContent="Dependencies:",n=b(),s=d("div"),o=d("label"),i=d("input"),f=T(`
                      🐘 PostgreSQL`),a=b(),c=d("label"),_=d("input"),p=T(`
                      ⚡ Redis`),m=b(),h=d("label"),v=d("input"),g=T(`
                      🐬 MySQL`),y=b(),C=d("label"),w=d("input"),S=T(`
                      🍃 MongoDB`),u(i,"type","checkbox"),u(i,"class","svelte-1hrwlue"),u(o,"class","dep-item svelte-1hrwlue"),u(_,"type","checkbox"),u(_,"class","svelte-1hrwlue"),u(c,"class","dep-item svelte-1hrwlue"),u(v,"type","checkbox"),u(v,"class","svelte-1hrwlue"),u(h,"class","dep-item svelte-1hrwlue"),u(w,"type","checkbox"),u(w,"class","svelte-1hrwlue"),u(C,"class","dep-item svelte-1hrwlue"),u(s,"class","dep-list svelte-1hrwlue"),u(e,"class","dependencies svelte-1hrwlue")},m(P,z){$(P,e,z),r(e,t),r(e,n),r(e,s),r(s,o),r(o,i),i.checked=l[50].postgres,r(o,f),r(s,a),r(s,c),r(c,_),_.checked=l[50].redis,r(c,p),r(s,m),r(s,h),r(h,v),v.checked=l[50].mysql,r(h,g),r(s,y),r(s,C),r(C,w),w.checked=l[50].mongo,r(C,S),D||(E=[X(i,"change",l[130]),X(_,"change",l[131]),X(v,"change",l[132]),X(w,"change",l[133])],D=!0)},p(P,z){z[1]&524288&&(i.checked=P[50].postgres),z[1]&524288&&(_.checked=P[50].redis),z[1]&524288&&(v.checked=P[50].mysql),z[1]&524288&&(w.checked=P[50].mongo)},d(P){P&&k(e),D=!1,We(E)}}}function Ri(l){let e,t,n,s,o,i,f,a,c,_,p,m,h=l[51]&&Ni(l);return{c(){e=d("div"),t=b(),n=d("label"),s=d("input"),o=b(),i=d("span"),i.textContent="🌐 Setup domain (Cloudflare)",f=b(),a=d("small"),a.textContent="Auto-provision subdomain with SSL via Cloudflare",c=b(),h&&h.c(),_=Fe(),u(e,"class","config-divider svelte-1hrwlue"),u(s,"type","checkbox"),u(s,"class","svelte-1hrwlue"),u(n,"class","checkbox-label svelte-1hrwlue"),u(a,"class","svelte-1hrwlue")},m(v,g){$(v,e,g),$(v,t,g),$(v,n,g),r(n,s),s.checked=l[51],r(n,o),r(n,i),$(v,f,g),$(v,a,g),$(v,c,g),h&&h.m(v,g),$(v,_,g),p||(m=X(s,"change",l[135]),p=!0)},p(v,g){g[1]&1048576&&(s.checked=v[51]),v[51]?h?h.p(v,g):(h=Ni(v),h.c(),h.m(_.parentNode,_)):h&&(h.d(1),h=null)},d(v){v&&(k(e),k(t),k(n),k(f),k(a),k(c),k(_)),h&&h.d(v),p=!1,m()}}}function Ni(l){let e,t,n,s,o,i=(l[59]||"app-project-env.domain.com")+"",f,a,c,_,p,m,h,v,g,y,C,w,S,D,E;return{c(){e=d("div"),t=d("div"),n=d("label"),n.textContent="Domain Preview:",s=b(),o=d("code"),f=T(i),a=b(),c=d("div"),_=d("label"),_.textContent="Base Domain",p=b(),m=d("input"),h=b(),v=d("div"),g=d("label"),g.innerHTML='Custom Aliases <small class="svelte-1hrwlue">(optional)</small>',y=b(),C=d("input"),w=b(),S=d("small"),S.textContent="Comma-separated custom domains (requires DNS setup)",u(n,"class","svelte-1hrwlue"),u(o,"class","svelte-1hrwlue"),u(t,"class","domain-preview svelte-1hrwlue"),u(_,"for","base-domain"),u(_,"class","svelte-1hrwlue"),u(m,"id","base-domain"),u(m,"type","text"),u(m,"placeholder","example.com"),u(m,"class","svelte-1hrwlue"),u(c,"class","form-group svelte-1hrwlue"),u(g,"for","domain-aliases"),u(g,"class","svelte-1hrwlue"),u(C,"id","domain-aliases"),u(C,"type","text"),u(C,"placeholder","api.myclient.com, app.example.com"),u(C,"class","svelte-1hrwlue"),u(S,"class","svelte-1hrwlue"),u(v,"class","form-group svelte-1hrwlue"),u(e,"class","domain-config svelte-1hrwlue")},m(P,z){$(P,e,z),r(e,t),r(t,n),r(t,s),r(t,o),r(o,f),r(e,a),r(e,c),r(c,_),r(c,p),r(c,m),le(m,l[10]),r(e,h),r(e,v),r(v,g),r(v,y),r(v,C),le(C,l[52]),r(v,w),r(v,S),D||(E=[X(m,"input",l[136]),X(C,"input",l[137])],D=!0)},p(P,z){z[1]&268435456&&i!==(i=(P[59]||"app-project-env.domain.com")+"")&&U(f,i),z[0]&1024&&m.value!==P[10]&&le(m,P[10]),z[1]&2097152&&C.value!==P[52]&&le(C,P[52])},d(P){P&&k(e),D=!1,We(E)}}}function J_(l){let e,t;return e=new Ze({props:{variant:"info",$$slots:{default:[Y_]},$$scope:{ctx:l}}}),{c(){ce(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const o={};s[0]&256|s[7]&4&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(R(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){ue(e,n)}}}function K_(l){let e,t;return e=new Ze({props:{variant:"info",$$slots:{default:[Q_]},$$scope:{ctx:l}}}),{c(){ce(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const o={};s[0]&256|s[7]&4&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(R(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){ue(e,n)}}}function Y_(l){let e=l[8].size+"",t,n;return{c(){t=T(e),n=T(" selected")},m(s,o){$(s,t,o),$(s,n,o)},p(s,o){o[0]&256&&e!==(e=s[8].size+"")&&U(t,e)},d(s){s&&(k(t),k(n))}}}function Q_(l){let e=l[8].size===1?"1 selected":"select 1",t;return{c(){t=T(e)},m(n,s){$(n,t,s)},p(n,s){s[0]&256&&e!==(e=n[8].size===1?"1 selected":"select 1")&&U(t,e)},d(n){n&&k(t)}}}function Mi(l){let e,t,n,s,o;return t=new Ue({props:{variant:"ghost",size:"sm",$$slots:{default:[Z_]},$$scope:{ctx:l}}}),t.$on("click",l[138]),s=new Ue({props:{variant:"ghost",size:"sm",$$slots:{default:[X_]},$$scope:{ctx:l}}}),s.$on("click",l[139]),{c(){e=d("div"),ce(t.$$.fragment),n=b(),ce(s.$$.fragment),u(e,"class","server-actions svelte-1hrwlue")},m(i,f){$(i,e,f),fe(t,e,null),r(e,n),fe(s,e,null),o=!0},p(i,f){const a={};f[7]&4&&(a.$$scope={dirty:f,ctx:i}),t.$set(a);const c={};f[7]&4&&(c.$$scope={dirty:f,ctx:i}),s.$set(c)},i(i){o||(R(t.$$.fragment,i),R(s.$$.fragment,i),o=!0)},o(i){M(t.$$.fragment,i),M(s.$$.fragment,i),o=!1},d(i){i&&k(e),ue(t),ue(s)}}}function Z_(l){let e;return{c(){e=T("✓ All")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function X_(l){let e;return{c(){e=T("✕ None")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function x_(l){let e,t,n,s;const o=[ld,td],i=[];function f(a,c){return!a[40]||a[40].length===0?0:1}return t=f(l),n=i[t]=o[t](l),{c(){e=d("div"),n.c(),u(e,"class","server-list svelte-1hrwlue")},m(a,c){$(a,e,c),i[t].m(e,null),s=!0},p(a,c){let _=t;t=f(a),t===_?i[t].p(a,c):(De(),M(i[_],1,1,()=>{i[_]=null}),Ee(),n=i[t],n?n.p(a,c):(n=i[t]=o[t](a),n.c()),R(n,1),n.m(e,null))},i(a){s||(R(n),s=!0)},o(a){M(n),s=!1},d(a){a&&k(e),i[t].d()}}}function ed(l){let e,t,n,s,o,i;function f(h,v){return h[0]==="stateful"?od:sd}let a=f(l),c=a(l);const _=[rd,id],p=[];function m(h,v){return!h[40]||h[40].length===0?0:1}return s=m(l),o=p[s]=_[s](l),{c(){e=d("div"),t=d("small"),c.c(),n=b(),o.c(),u(t,"class","select-hint svelte-1hrwlue"),u(e,"class","server-list single-select svelte-1hrwlue")},m(h,v){$(h,e,v),r(e,t),c.m(t,null),r(e,n),p[s].m(e,null),i=!0},p(h,v){a!==(a=f(h))&&(c.d(1),c=a(h),c&&(c.c(),c.m(t,null)));let g=s;s=m(h),s===g?p[s].p(h,v):(De(),M(p[g],1,1,()=>{p[g]=null}),Ee(),o=p[s],o?o.p(h,v):(o=p[s]=_[s](h),o.c()),R(o,1),o.m(e,null))},i(h){i||(R(o),i=!0)},o(h){M(o),i=!1},d(h){h&&k(e),c.d(),p[s].d()}}}function td(l){let e,t,n=pe(l[40]),s=[];for(let i=0;i<n.length;i+=1)s[i]=Oi(Ko(l,n,i));const o=i=>M(s[i],1,1,()=>{s[i]=null});return{c(){for(let i=0;i<s.length;i+=1)s[i].c();e=Fe()},m(i,f){for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(i,f);$(i,e,f),t=!0},p(i,f){if(f[0]&256|f[1]&512|f[2]&32){n=pe(i[40]);let a;for(a=0;a<n.length;a+=1){const c=Ko(i,n,a);s[a]?(s[a].p(c,f),R(s[a],1)):(s[a]=Oi(c),s[a].c(),R(s[a],1),s[a].m(e.parentNode,e))}for(De(),a=n.length;a<s.length;a+=1)o(a);Ee()}},i(i){if(!t){for(let f=0;f<n.length;f+=1)R(s[f]);t=!0}},o(i){s=s.filter(mn);for(let f=0;f<s.length;f+=1)M(s[f]);t=!1},d(i){i&&k(e),Me(s,i)}}}function ld(l){let e,t,n=(l[7]||"any region")+"",s;return{c(){e=d("div"),t=T("No servers in "),s=T(n),u(e,"class","empty svelte-1hrwlue")},m(o,i){$(o,e,i),r(e,t),r(e,s)},p(o,i){i[0]&128&&n!==(n=(o[7]||"any region")+"")&&U(s,n)},i:ge,o:ge,d(o){o&&k(e)}}}function ji(l){let e,t,n,s,o,i=(l[179].name||"unnamed")+"",f,a,c,_=l[199]+"",p,m,h,v,g,y;function C(){return l[141](l[199])}let w=l[179].project&&Ai(l);return{c(){e=d("label"),t=d("input"),s=b(),o=d("span"),f=T(i),a=b(),c=d("code"),p=T(_),m=b(),w&&w.c(),h=b(),u(t,"type","checkbox"),t.checked=n=l[8].has(l[199]),u(t,"class","svelte-1hrwlue"),u(o,"class","server-name svelte-1hrwlue"),u(c,"class","server-ip svelte-1hrwlue"),u(e,"class","server-item svelte-1hrwlue"),ke(e,"selected",l[8].has(l[199]))},m(S,D){$(S,e,D),r(e,t),r(e,s),r(e,o),r(o,f),r(e,a),r(e,c),r(c,p),r(e,m),w&&w.m(e,null),r(e,h),v=!0,g||(y=X(t,"change",C),g=!0)},p(S,D){l=S,(!v||D[0]&256|D[1]&512&&n!==(n=l[8].has(l[199])))&&(t.checked=n),(!v||D[1]&512)&&i!==(i=(l[179].name||"unnamed")+"")&&U(f,i),(!v||D[1]&512)&&_!==(_=l[199]+"")&&U(p,_),l[179].project?w?(w.p(l,D),D[1]&512&&R(w,1)):(w=Ai(l),w.c(),R(w,1),w.m(e,h)):w&&(De(),M(w,1,1,()=>{w=null}),Ee()),(!v||D[0]&256|D[1]&512)&&ke(e,"selected",l[8].has(l[199]))},i(S){v||(R(w),v=!0)},o(S){M(w),v=!1},d(S){S&&k(e),w&&w.d(),g=!1,y()}}}function Ai(l){let e,t;return e=new Ze({props:{variant:"info",$$slots:{default:[nd]},$$scope:{ctx:l}}}),{c(){ce(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const o={};s[1]&512|s[7]&4&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(R(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){ue(e,n)}}}function nd(l){let e=l[179].project+"",t;return{c(){t=T(e)},m(n,s){$(n,t,s)},p(n,s){s[1]&512&&e!==(e=n[179].project+"")&&U(t,e)},d(n){n&&k(t)}}}function Oi(l){let e,t,n=l[199]&&ji(l);return{c(){n&&n.c(),e=Fe()},m(s,o){n&&n.m(s,o),$(s,e,o),t=!0},p(s,o){s[199]?n?(n.p(s,o),o[1]&512&&R(n,1)):(n=ji(s),n.c(),R(n,1),n.m(e.parentNode,e)):n&&(De(),M(n,1,1,()=>{n=null}),Ee())},i(s){t||(R(n),t=!0)},o(s){M(n),t=!1},d(s){s&&k(e),n&&n.d(s)}}}function sd(l){let e;return{c(){e=T("ℹ️ Scheduled jobs run on one server to avoid duplicate execution.")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function od(l){let e;return{c(){e=T("ℹ️ Stateful services run on a single server. For replication, deploy multiple named services.")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function id(l){let e,t,n=pe(l[40]),s=[];for(let i=0;i<n.length;i+=1)s[i]=Ui(Yo(l,n,i));const o=i=>M(s[i],1,1,()=>{s[i]=null});return{c(){for(let i=0;i<s.length;i+=1)s[i].c();e=Fe()},m(i,f){for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(i,f);$(i,e,f),t=!0},p(i,f){if(f[0]&256|f[1]&512|f[2]&128){n=pe(i[40]);let a;for(a=0;a<n.length;a+=1){const c=Yo(i,n,a);s[a]?(s[a].p(c,f),R(s[a],1)):(s[a]=Ui(c),s[a].c(),R(s[a],1),s[a].m(e.parentNode,e))}for(De(),a=n.length;a<s.length;a+=1)o(a);Ee()}},i(i){if(!t){for(let f=0;f<n.length;f+=1)R(s[f]);t=!0}},o(i){s=s.filter(mn);for(let f=0;f<s.length;f+=1)M(s[f]);t=!1},d(i){i&&k(e),Me(s,i)}}}function rd(l){let e,t,n=(l[7]||"any region")+"",s;return{c(){e=d("div"),t=T("No servers in "),s=T(n),u(e,"class","empty svelte-1hrwlue")},m(o,i){$(o,e,i),r(e,t),r(e,s)},p(o,i){i[0]&128&&n!==(n=(o[7]||"any region")+"")&&U(s,n)},i:ge,o:ge,d(o){o&&k(e)}}}function Ii(l){let e,t,n,s,o,i=(l[179].name||"unnamed")+"",f,a,c,_=l[199]+"",p,m,h,v,g,y;function C(){return l[140](l[199])}let w=l[179].project&&Fi(l);return{c(){e=d("label"),t=d("input"),s=b(),o=d("span"),f=T(i),a=b(),c=d("code"),p=T(_),m=b(),w&&w.c(),h=b(),u(t,"type","radio"),u(t,"name","single-server"),t.checked=n=l[8].has(l[199]),u(t,"class","svelte-1hrwlue"),u(o,"class","server-name svelte-1hrwlue"),u(c,"class","server-ip svelte-1hrwlue"),u(e,"class","server-item svelte-1hrwlue"),ke(e,"selected",l[8].has(l[199]))},m(S,D){$(S,e,D),r(e,t),r(e,s),r(e,o),r(o,f),r(e,a),r(e,c),r(c,p),r(e,m),w&&w.m(e,null),r(e,h),v=!0,g||(y=X(t,"change",C),g=!0)},p(S,D){l=S,(!v||D[0]&256|D[1]&512&&n!==(n=l[8].has(l[199])))&&(t.checked=n),(!v||D[1]&512)&&i!==(i=(l[179].name||"unnamed")+"")&&U(f,i),(!v||D[1]&512)&&_!==(_=l[199]+"")&&U(p,_),l[179].project?w?(w.p(l,D),D[1]&512&&R(w,1)):(w=Fi(l),w.c(),R(w,1),w.m(e,h)):w&&(De(),M(w,1,1,()=>{w=null}),Ee()),(!v||D[0]&256|D[1]&512)&&ke(e,"selected",l[8].has(l[199]))},i(S){v||(R(w),v=!0)},o(S){M(w),v=!1},d(S){S&&k(e),w&&w.d(),g=!1,y()}}}function Fi(l){let e,t;return e=new Ze({props:{variant:"info",$$slots:{default:[ad]},$$scope:{ctx:l}}}),{c(){ce(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const o={};s[1]&512|s[7]&4&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(R(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){ue(e,n)}}}function ad(l){let e=l[179].project+"",t;return{c(){t=T(e)},m(n,s){$(n,t,s)},p(n,s){s[1]&512&&e!==(e=n[179].project+"")&&U(t,e)},d(n){n&&k(t)}}}function Ui(l){let e,t,n=l[199]&&Ii(l);return{c(){n&&n.c(),e=Fe()},m(s,o){n&&n.m(s,o),$(s,e,o),t=!0},p(s,o){s[199]?n?(n.p(s,o),o[1]&512&&R(n,1)):(n=Ii(s),n.c(),R(n,1),n.m(e.parentNode,e)):n&&(De(),M(n,1,1,()=>{n=null}),Ee())},i(s){t||(R(n),t=!0)},o(s){M(n),t=!1},d(s){s&&k(e),n&&n.d(s)}}}function Bi(l){let e,t;return e=new Ze({props:{variant:"warning",$$slots:{default:[fd]},$$scope:{ctx:l}}}),{c(){ce(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const o={};s[0]&512|s[7]&4&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(R(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){ue(e,n)}}}function fd(l){let e,t;return{c(){e=T(l[9]),t=T(" new")},m(n,s){$(n,e,s),$(n,t,s)},p(n,s){s[0]&512&&U(e,n[9])},d(n){n&&(k(e),k(t))}}}function Hi(l){let e,t,n,s,o,i,f,a,c,_,p,m,h,v,g,y,C,w,S,D,E,P,z=l[0]==="service"||l[0]==="worker"?"s":"",q,A,N,I,G,F,O=l[9]>0&&Gi(),H=pe(l[11]||[]),L=[];for(let W=0;W<H.length;W+=1)L[W]=Vi(Jo(l,H,W));let j=pe(l[38]||[]),B=[];for(let W=0;W<j.length;W+=1)B[W]=Wi(Wo(l,j,W));let K=pe(l[39]||[]),Y=[];for(let W=0;W<K.length;W+=1)Y[W]=Ji(Vo(l,K,W));function Z(W,re){return W[0]==="stateful"||W[0]==="scheduled"?cd:ud}let oe=Z(l),x=oe(l),J=l[9]>0&&!l[6]&&Ki();return{c(){e=d("div"),t=d("div"),n=d("div"),s=d("label"),o=T("Snapshot "),O&&O.c(),i=b(),f=d("select"),a=d("option"),a.textContent="Select snapshot...";for(let W=0;W<L.length;W+=1)L[W].c();c=b(),_=d("div"),p=d("label"),p.textContent="Region",m=b(),h=d("select");for(let W=0;W<B.length;W+=1)B[W].c();v=b(),g=d("div"),y=d("label"),y.textContent="Size",C=b(),w=d("select");for(let W=0;W<Y.length;W+=1)Y[W].c();S=b(),D=d("div"),E=d("span"),P=T("New server"),q=T(z),A=T(" to provision:"),N=b(),x.c(),I=b(),J&&J.c(),u(s,"for","snapshot-select"),u(s,"class","svelte-1hrwlue"),a.__value="",le(a,a.__value),u(f,"id","snapshot-select"),u(f,"class","svelte-1hrwlue"),l[6]===void 0&&Xe(()=>l[143].call(f)),u(n,"class","form-group svelte-1hrwlue"),u(p,"for","region-select"),u(p,"class","svelte-1hrwlue"),u(h,"id","region-select"),u(h,"class","svelte-1hrwlue"),l[7]===void 0&&Xe(()=>l[144].call(h)),u(_,"class","form-group svelte-1hrwlue"),u(y,"for","size-select"),u(y,"class","svelte-1hrwlue"),u(w,"id","size-select"),u(w,"class","svelte-1hrwlue"),l[37]===void 0&&Xe(()=>l[145].call(w)),u(g,"class","form-group svelte-1hrwlue"),u(t,"class","form-row three-col svelte-1hrwlue"),u(D,"class","new-servers svelte-1hrwlue"),u(e,"class","section-content provisioning-config svelte-1hrwlue")},m(W,re){$(W,e,re),r(e,t),r(t,n),r(n,s),r(s,o),O&&O.m(s,null),r(n,i),r(n,f),r(f,a);for(let V=0;V<L.length;V+=1)L[V]&&L[V].m(f,null);Ne(f,l[6],!0),r(t,c),r(t,_),r(_,p),r(_,m),r(_,h);for(let V=0;V<B.length;V+=1)B[V]&&B[V].m(h,null);Ne(h,l[7],!0),r(t,v),r(t,g),r(g,y),r(g,C),r(g,w);for(let V=0;V<Y.length;V+=1)Y[V]&&Y[V].m(w,null);Ne(w,l[37],!0),r(e,S),r(e,D),r(D,E),r(E,P),r(E,q),r(E,A),r(D,N),x.m(D,null),r(D,I),J&&J.m(D,null),G||(F=[X(f,"change",l[143]),X(h,"change",l[144]),X(w,"change",l[145])],G=!0)},p(W,re){if(W[9]>0?O||(O=Gi(),O.c(),O.m(s,null)):O&&(O.d(1),O=null),re[0]&2048){H=pe(W[11]||[]);let V;for(V=0;V<H.length;V+=1){const ie=Jo(W,H,V);L[V]?L[V].p(ie,re):(L[V]=Vi(ie),L[V].c(),L[V].m(f,null))}for(;V<L.length;V+=1)L[V].d(1);L.length=H.length}if(re[0]&2112&&Ne(f,W[6]),re[1]&128){j=pe(W[38]||[]);let V;for(V=0;V<j.length;V+=1){const ie=Wo(W,j,V);B[V]?B[V].p(ie,re):(B[V]=Wi(ie),B[V].c(),B[V].m(h,null))}for(;V<B.length;V+=1)B[V].d(1);B.length=j.length}if(re[0]&128|re[1]&128&&Ne(h,W[7]),re[1]&256){K=pe(W[39]||[]);let V;for(V=0;V<K.length;V+=1){const ie=Vo(W,K,V);Y[V]?Y[V].p(ie,re):(Y[V]=Ji(ie),Y[V].c(),Y[V].m(w,null))}for(;V<Y.length;V+=1)Y[V].d(1);Y.length=K.length}re[1]&320&&Ne(w,W[37]),re[0]&1&&z!==(z=W[0]==="service"||W[0]==="worker"?"s":"")&&U(q,z),oe===(oe=Z(W))&&x?x.p(W,re):(x.d(1),x=oe(W),x&&(x.c(),x.m(D,I))),W[9]>0&&!W[6]?J||(J=Ki(),J.c(),J.m(D,null)):J&&(J.d(1),J=null)},d(W){W&&k(e),O&&O.d(),Me(L,W),Me(B,W),Me(Y,W),x.d(),J&&J.d(),G=!1,We(F)}}}function Gi(l){let e;return{c(){e=T("*")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function Vi(l){let e,t=l[196].name+"",n,s;return{c(){e=d("option"),n=T(t),e.__value=s=l[196].id,le(e,e.__value)},m(o,i){$(o,e,i),r(e,n)},p(o,i){i[0]&2048&&t!==(t=o[196].name+"")&&U(n,t),i[0]&2048&&s!==(s=o[196].id)&&(e.__value=s,le(e,e.__value))},d(o){o&&k(e)}}}function Wi(l){let e,t=(l[193].name||l[193].slug)+"",n,s;return{c(){e=d("option"),n=T(t),e.__value=s=l[193].slug,le(e,e.__value)},m(o,i){$(o,e,i),r(e,n)},p(o,i){i[1]&128&&t!==(t=(o[193].name||o[193].slug)+"")&&U(n,t),i[1]&128&&s!==(s=o[193].slug)&&(e.__value=s,le(e,e.__value))},d(o){o&&k(e)}}}function Ji(l){let e,t=(l[190].description||l[190].slug)+"",n,s;return{c(){e=d("option"),n=T(t),e.__value=s=l[190].slug,le(e,e.__value)},m(o,i){$(o,e,i),r(e,n)},p(o,i){i[1]&256&&t!==(t=(o[190].description||o[190].slug)+"")&&U(n,t),i[1]&256&&s!==(s=o[190].slug)&&(e.__value=s,le(e,e.__value))},d(o){o&&k(e)}}}function ud(l){let e,t,n,s,o,i,f,a;return{c(){e=d("div"),t=d("button"),t.textContent="−",n=b(),s=d("input"),o=b(),i=d("button"),i.textContent="+",u(t,"type","button"),u(t,"class","svelte-1hrwlue"),u(s,"type","number"),u(s,"min","0"),u(s,"max","10"),u(s,"class","svelte-1hrwlue"),u(i,"type","button"),u(i,"class","svelte-1hrwlue"),u(e,"class","number-spinner svelte-1hrwlue")},m(c,_){$(c,e,_),r(e,t),r(e,n),r(e,s),le(s,l[9]),r(e,o),r(e,i),f||(a=[X(t,"click",l[147]),X(s,"input",l[148]),X(i,"click",l[149])],f=!0)},p(c,_){_[0]&512&&Kt(s.value)!==c[9]&&le(s,c[9])},d(c){c&&k(e),f=!1,We(a)}}}function cd(l){let e,t,n,s,o,i,f;return{c(){e=d("label"),t=d("input"),s=b(),o=d("span"),o.textContent="Provision 1 new server",u(t,"type","checkbox"),t.checked=n=l[9]===1,u(t,"class","svelte-1hrwlue"),u(e,"class","checkbox-label svelte-1hrwlue")},m(a,c){$(a,e,c),r(e,t),r(e,s),r(e,o),i||(f=X(t,"change",l[146]),i=!0)},p(a,c){c[0]&512&&n!==(n=a[9]===1)&&(t.checked=n)},d(a){a&&k(e),i=!1,f()}}}function Ki(l){let e;return{c(){e=d("small"),e.textContent="⚠️ Select a snapshot for new servers",u(e,"class","warning svelte-1hrwlue")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function _d(l){let e;return{c(){e=T("🚀 Deploy")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function dd(l){let e;return{c(){e=T("Deploying...")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function pd(l){let e;function t(o,i){return o[41]?dd:_d}let n=t(l),s=n(l);return{c(){s.c(),e=Fe()},m(o,i){s.m(o,i),$(o,e,i)},p(o,i){n!==(n=t(o))&&(s.d(1),s=n(o),s&&(s.c(),s.m(e.parentNode,e)))},d(o){o&&k(e),s.d(o)}}}function md(l){let e,t,n,s,o,i,f,a,c,_,p,m,h,v,g,y,C,w,S,D,E,P,z,q,A,N,I,G,F,O,H,L,j,B=l[0]==="service"||l[0]==="worker"?"s":"",K,Y,Z,oe,x,J,W,re,V,ie,_e,te,ve=l[58]?"▼":"▶",ae,se,ee,Q,be,we,Ge,nt,vt,qe,Se=pe(l[60]),Ae=[];for(let he=0;he<Se.length;he+=1)Ae[he]=ti(ei(l,Se,he));let me=l[0]==="stateful"&&li(l),Le=pe(l[62]),Re=[];for(let he=0;he<Le.length;he+=1)Re[he]=ni(xo(l,Le,he));let Pe=l[0]==="stateful"&&si(l),Be=l[0]!=="stateful"&&ii(l),tt=l[0]==="service"&&Ci(l),st=(l[0]==="worker"||l[0]==="scheduled")&&yi(l),ot=l[0]==="scheduled"&&Si(l),Je=l[0]!=="stateful"&&Ti(l),it=l[0]!=="stateful"&&Ei(l);const St=[K_,J_],Et=[];function nl(he,Oe){return he[0]==="stateful"||he[0]==="scheduled"?0:1}Z=nl(l),oe=Et[Z]=St[Z](l);let et=(l[0]==="service"||l[0]==="worker")&&Mi(l);const Ut=[ed,x_],Pt=[];function Ht(he,Oe){return he[0]==="stateful"||he[0]==="scheduled"?0:1}W=Ht(l),re=Pt[W]=Ut[W](l);let ut=l[9]>0&&Bi(l),pt=l[58]&&Hi(l);return Ge=new Ue({props:{variant:"primary",type:"submit",disabled:l[41],$$slots:{default:[pd]},$$scope:{ctx:l}}}),{c(){e=d("form"),t=d("div");for(let he=0;he<Ae.length;he+=1)Ae[he].c();n=b(),s=d("div"),o=d("div"),i=d("label"),i.textContent="Project *",f=b(),a=d("input"),c=b(),_=d("div"),p=d("label"),p.textContent="Service Name *",m=b(),h=d("input"),g=b(),me&&me.c(),y=b(),C=d("div"),w=d("label"),w.textContent="Environment",S=b(),D=d("select");for(let he=0;he<Re.length;he+=1)Re[he].c();E=b(),Pe&&Pe.c(),P=b(),Be&&Be.c(),z=b(),tt&&tt.c(),q=b(),st&&st.c(),A=b(),ot&&ot.c(),N=b(),Je&&Je.c(),I=b(),it&&it.c(),G=b(),F=d("div"),O=d("div"),H=d("div"),L=d("span"),j=T("🖥️ Server"),K=T(B),Y=b(),oe.c(),x=b(),et&&et.c(),J=b(),re.c(),V=b(),ie=d("div"),_e=d("button"),te=d("span"),ae=T(ve),se=b(),ee=d("span"),ee.textContent="➕ New Server Provisioning",Q=b(),ut&&ut.c(),be=b(),pt&&pt.c(),we=b(),ce(Ge.$$.fragment),u(t,"class","deploy-type-selector svelte-1hrwlue"),u(i,"for","deploy-project"),u(i,"class","svelte-1hrwlue"),u(a,"id","deploy-project"),u(a,"type","text"),u(a,"placeholder","my-project"),a.required=!0,u(a,"pattern","[-a-z0-9]*"),u(a,"class","svelte-1hrwlue"),u(o,"class","form-group svelte-1hrwlue"),u(p,"for","deploy-name"),u(p,"class","svelte-1hrwlue"),u(h,"id","deploy-name"),u(h,"type","text"),u(h,"placeholder",v=l[0]==="stateful"?l[1]:"api"),h.required=!0,u(h,"pattern","[-a-z0-9]+"),u(h,"title","Lowercase letters, numbers, hyphens only"),u(h,"class","svelte-1hrwlue"),u(_,"class","form-group svelte-1hrwlue"),u(w,"for","deploy-env"),u(w,"class","svelte-1hrwlue"),u(D,"id","deploy-env"),u(D,"class","svelte-1hrwlue"),l[5]===void 0&&Xe(()=>l[89].call(D)),u(C,"class","form-group svelte-1hrwlue"),u(s,"class","form-row three-col svelte-1hrwlue"),u(H,"class","server-title svelte-1hrwlue"),u(O,"class","server-header svelte-1hrwlue"),u(te,"class","toggle-icon svelte-1hrwlue"),u(_e,"type","button"),u(_e,"class","section-toggle svelte-1hrwlue"),u(ie,"class","collapsible-section svelte-1hrwlue"),ke(ie,"expanded",l[58]),u(F,"class","server-selection svelte-1hrwlue")},m(he,Oe){$(he,e,Oe),r(e,t);for(let ct=0;ct<Ae.length;ct+=1)Ae[ct]&&Ae[ct].m(t,null);r(e,n),r(e,s),r(s,o),r(o,i),r(o,f),r(o,a),le(a,l[4]),r(s,c),r(s,_),r(_,p),r(_,m),r(_,h),le(h,l[3]),r(_,g),me&&me.m(_,null),r(s,y),r(s,C),r(C,w),r(C,S),r(C,D);for(let ct=0;ct<Re.length;ct+=1)Re[ct]&&Re[ct].m(D,null);Ne(D,l[5],!0),r(e,E),Pe&&Pe.m(e,null),r(e,P),Be&&Be.m(e,null),r(e,z),tt&&tt.m(e,null),r(e,q),st&&st.m(e,null),r(e,A),ot&&ot.m(e,null),r(e,N),Je&&Je.m(e,null),r(e,I),it&&it.m(e,null),r(e,G),r(e,F),r(F,O),r(O,H),r(H,L),r(L,j),r(L,K),r(H,Y),Et[Z].m(H,null),r(O,x),et&&et.m(O,null),r(F,J),Pt[W].m(F,null),r(F,V),r(F,ie),r(ie,_e),r(_e,te),r(te,ae),r(_e,se),r(_e,ee),r(_e,Q),ut&&ut.m(_e,null),r(ie,be),pt&&pt.m(ie,null),r(e,we),fe(Ge,e,null),nt=!0,vt||(qe=[X(a,"input",l[87]),X(h,"input",l[88]),X(D,"change",l[89]),X(_e,"click",l[142]),X(e,"submit",l[81])],vt=!0)},p(he,Oe){if(Oe[0]&1|Oe[1]&1610612736){Se=pe(he[60]);let Ke;for(Ke=0;Ke<Se.length;Ke+=1){const Wt=ei(he,Se,Ke);Ae[Ke]?Ae[Ke].p(Wt,Oe):(Ae[Ke]=ti(Wt),Ae[Ke].c(),Ae[Ke].m(t,null))}for(;Ke<Ae.length;Ke+=1)Ae[Ke].d(1);Ae.length=Se.length}if(Oe[0]&16&&a.value!==he[4]&&le(a,he[4]),(!nt||Oe[0]&3&&v!==(v=he[0]==="stateful"?he[1]:"api"))&&u(h,"placeholder",v),Oe[0]&8&&h.value!==he[3]&&le(h,he[3]),he[0]==="stateful"?me?me.p(he,Oe):(me=li(he),me.c(),me.m(_,null)):me&&(me.d(1),me=null),Oe[2]&1){Le=pe(he[62]);let Ke;for(Ke=0;Ke<Le.length;Ke+=1){const Wt=xo(he,Le,Ke);Re[Ke]?Re[Ke].p(Wt,Oe):(Re[Ke]=ni(Wt),Re[Ke].c(),Re[Ke].m(D,null))}for(;Ke<Re.length;Ke+=1)Re[Ke].d(1);Re.length=Le.length}Oe[0]&32|Oe[2]&1&&Ne(D,he[5]),he[0]==="stateful"?Pe?Pe.p(he,Oe):(Pe=si(he),Pe.c(),Pe.m(e,P)):Pe&&(Pe.d(1),Pe=null),he[0]!=="stateful"?Be?(Be.p(he,Oe),Oe[0]&1&&R(Be,1)):(Be=ii(he),Be.c(),R(Be,1),Be.m(e,z)):Be&&(De(),M(Be,1,1,()=>{Be=null}),Ee()),he[0]==="service"?tt?tt.p(he,Oe):(tt=Ci(he),tt.c(),tt.m(e,q)):tt&&(tt.d(1),tt=null),he[0]==="worker"||he[0]==="scheduled"?st?st.p(he,Oe):(st=yi(he),st.c(),st.m(e,A)):st&&(st.d(1),st=null),he[0]==="scheduled"?ot?ot.p(he,Oe):(ot=Si(he),ot.c(),ot.m(e,N)):ot&&(ot.d(1),ot=null),he[0]!=="stateful"?Je?(Je.p(he,Oe),Oe[0]&1&&R(Je,1)):(Je=Ti(he),Je.c(),R(Je,1),Je.m(e,I)):Je&&(De(),M(Je,1,1,()=>{Je=null}),Ee()),he[0]!=="stateful"?it?(it.p(he,Oe),Oe[0]&1&&R(it,1)):(it=Ei(he),it.c(),R(it,1),it.m(e,G)):it&&(De(),M(it,1,1,()=>{it=null}),Ee()),(!nt||Oe[0]&1)&&B!==(B=he[0]==="service"||he[0]==="worker"?"s":"")&&U(K,B);let ct=Z;Z=nl(he),Z===ct?Et[Z].p(he,Oe):(De(),M(Et[ct],1,1,()=>{Et[ct]=null}),Ee(),oe=Et[Z],oe?oe.p(he,Oe):(oe=Et[Z]=St[Z](he),oe.c()),R(oe,1),oe.m(H,null)),he[0]==="service"||he[0]==="worker"?et?(et.p(he,Oe),Oe[0]&1&&R(et,1)):(et=Mi(he),et.c(),R(et,1),et.m(O,null)):et&&(De(),M(et,1,1,()=>{et=null}),Ee());let Gt=W;W=Ht(he),W===Gt?Pt[W].p(he,Oe):(De(),M(Pt[Gt],1,1,()=>{Pt[Gt]=null}),Ee(),re=Pt[W],re?re.p(he,Oe):(re=Pt[W]=Ut[W](he),re.c()),R(re,1),re.m(F,V)),(!nt||Oe[1]&134217728)&&ve!==(ve=he[58]?"▼":"▶")&&U(ae,ve),he[9]>0?ut?(ut.p(he,Oe),Oe[0]&512&&R(ut,1)):(ut=Bi(he),ut.c(),R(ut,1),ut.m(_e,null)):ut&&(De(),M(ut,1,1,()=>{ut=null}),Ee()),he[58]?pt?pt.p(he,Oe):(pt=Hi(he),pt.c(),pt.m(ie,null)):pt&&(pt.d(1),pt=null),(!nt||Oe[1]&134217728)&&ke(ie,"expanded",he[58]);const Vt={};Oe[1]&1024&&(Vt.disabled=he[41]),Oe[1]&1024|Oe[7]&4&&(Vt.$$scope={dirty:Oe,ctx:he}),Ge.$set(Vt)},i(he){nt||(R(Be),R(Je),R(it),R(oe),R(et),R(re),R(ut),R(Ge.$$.fragment,he),nt=!0)},o(he){M(Be),M(Je),M(it),M(oe),M(et),M(re),M(ut),M(Ge.$$.fragment,he),nt=!1},d(he){he&&k(e),Me(Ae,he),me&&me.d(),Me(Re,he),Pe&&Pe.d(),Be&&Be.d(),tt&&tt.d(),st&&st.d(),ot&&ot.d(),Je&&Je.d(),it&&it.d(),Et[Z].d(),et&&et.d(),Pt[W].d(),ut&&ut.d(),pt&&pt.d(),ue(Ge),vt=!1,We(qe)}}}function vd(l){let e;return{c(){e=d("div"),e.innerHTML='<p>No deployment in progress</p> <p class="hint svelte-1hrwlue">Fill in the form and click Deploy to start</p>',u(e,"class","empty-state svelte-1hrwlue")},m(t,n){$(t,e,n)},p:ge,d(t){t&&k(e)}}}function hd(l){let e,t,n,s,o,i,f=pe(l[43]),a=[];for(let m=0;m<f.length;m+=1)a[m]=Yi(Go(l,f,m));function c(m,h){if(m[44]&&m[44].success)return bd;if(m[44]&&!m[44].success)return gd}let _=c(l),p=_&&_(l);return{c(){e=d("div"),t=d("div"),n=d("div"),s=b(),o=d("div");for(let m=0;m<a.length;m+=1)a[m].c();i=b(),p&&p.c(),u(n,"class","progress-fill svelte-1hrwlue"),qt(n,"width",l[42]+"%"),u(t,"class","progress-bar svelte-1hrwlue"),u(o,"class","log-output svelte-1hrwlue"),u(e,"class","progress-section svelte-1hrwlue")},m(m,h){$(m,e,h),r(e,t),r(t,n),r(e,s),r(e,o);for(let v=0;v<a.length;v+=1)a[v]&&a[v].m(o,null);r(e,i),p&&p.m(e,null)},p(m,h){if(h[1]&2048&&qt(n,"width",m[42]+"%"),h[1]&4096){f=pe(m[43]);let v;for(v=0;v<f.length;v+=1){const g=Go(m,f,v);a[v]?a[v].p(g,h):(a[v]=Yi(g),a[v].c(),a[v].m(o,null))}for(;v<a.length;v+=1)a[v].d(1);a.length=f.length}_===(_=c(m))&&p?p.p(m,h):(p&&p.d(1),p=_&&_(m),p&&(p.c(),p.m(e,null)))},d(m){m&&k(e),Me(a,m),p&&p.d()}}}function Yi(l){let e,t,n=l[83].time.toLocaleTimeString()+"",s,o,i,f=ar(l[83].message)+"",a,c;return{c(){e=d("div"),t=d("span"),s=T(n),o=b(),i=new xu(!1),a=b(),u(t,"class","log-time svelte-1hrwlue"),i.a=a,u(e,"class",c="log-line "+l[83].type+" svelte-1hrwlue")},m(_,p){$(_,e,p),r(e,t),r(t,s),r(e,o),i.m(f,e),r(e,a)},p(_,p){p[1]&4096&&n!==(n=_[83].time.toLocaleTimeString()+"")&&U(s,n),p[1]&4096&&f!==(f=ar(_[83].message)+"")&&i.p(f),p[1]&4096&&c!==(c="log-line "+_[83].type+" svelte-1hrwlue")&&u(e,"class",c)},d(_){_&&k(e)}}}function gd(l){let e,t,n,s,o,i=l[5].toUpperCase()+"",f,a,c,_=l[44].error&&Qi(l);function p(v,g){return v[44].servers&&v[44].servers.length>0?wd:kd}let m=p(l),h=m(l);return{c(){e=d("div"),t=d("div"),n=d("h4"),n.textContent="❌ Deployment Failed",s=b(),o=d("span"),f=T(i),a=b(),_&&_.c(),c=b(),h.c(),u(n,"class","svelte-1hrwlue"),u(o,"class","env-badge svelte-1hrwlue"),u(t,"class","result-header svelte-1hrwlue"),u(e,"class","deploy-failure-box svelte-1hrwlue")},m(v,g){$(v,e,g),r(e,t),r(t,n),r(t,s),r(t,o),r(o,f),r(e,a),_&&_.m(e,null),r(e,c),h.m(e,null)},p(v,g){g[0]&32&&i!==(i=v[5].toUpperCase()+"")&&U(f,i),v[44].error?_?_.p(v,g):(_=Qi(v),_.c(),_.m(e,c)):_&&(_.d(1),_=null),m===(m=p(v))&&h?h.p(v,g):(h.d(1),h=m(v),h&&(h.c(),h.m(e,null)))},d(v){v&&k(e),_&&_.d(),h.d()}}}function bd(l){let e,t,n,s,o,i=l[5].toUpperCase()+"",f,a,c,_,p=l[44].domain&&xi(l),m=l[44].connection_url&&er(l),h=l[44].servers&&l[44].servers.length>0&&tr(l);return{c(){e=d("div"),t=d("div"),n=d("h4"),n.textContent="✅ Deployment Complete",s=b(),o=d("span"),f=T(i),a=b(),p&&p.c(),c=b(),m&&m.c(),_=b(),h&&h.c(),u(n,"class","svelte-1hrwlue"),u(o,"class","env-badge svelte-1hrwlue"),u(t,"class","result-header svelte-1hrwlue"),u(e,"class","deploy-success-box svelte-1hrwlue")},m(v,g){$(v,e,g),r(e,t),r(t,n),r(t,s),r(t,o),r(o,f),r(e,a),p&&p.m(e,null),r(e,c),m&&m.m(e,null),r(e,_),h&&h.m(e,null)},p(v,g){g[0]&32&&i!==(i=v[5].toUpperCase()+"")&&U(f,i),v[44].domain?p?p.p(v,g):(p=xi(v),p.c(),p.m(e,c)):p&&(p.d(1),p=null),v[44].connection_url?m?m.p(v,g):(m=er(v),m.c(),m.m(e,_)):m&&(m.d(1),m=null),v[44].servers&&v[44].servers.length>0?h?h.p(v,g):(h=tr(v),h.c(),h.m(e,null)):h&&(h.d(1),h=null)},d(v){v&&k(e),p&&p.d(),m&&m.d(),h&&h.d()}}}function Qi(l){let e,t=l[44].error+"",n;return{c(){e=d("p"),n=T(t)},m(s,o){$(s,e,o),r(e,n)},p(s,o){o[1]&8192&&t!==(t=s[44].error+"")&&U(n,t)},d(s){s&&k(e)}}}function kd(l){let e;return{c(){e=d("p"),e.textContent="No server details available",qt(e,"margin-top","8px"),qt(e,"opacity","0.8")},m(t,n){$(t,e,n)},p:ge,d(t){t&&k(e)}}}function wd(l){let e,t,n,s,o=pe(l[44].servers),i=[];for(let f=0;f<o.length;f+=1)i[f]=Xi(Uo(l,o,f));return{c(){e=d("div"),t=d("span"),t.textContent="Server Status:",n=b(),s=d("div");for(let f=0;f<i.length;f+=1)i[f].c();u(t,"class","result-label svelte-1hrwlue"),u(s,"class","server-links svelte-1hrwlue"),u(e,"class","result-section svelte-1hrwlue"),qt(e,"margin-top","12px")},m(f,a){$(f,e,a),r(e,t),r(e,n),r(e,s);for(let c=0;c<i.length;c+=1)i[c]&&i[c].m(s,null)},p(f,a){if(a[0]&8|a[1]&8192){o=pe(f[44].servers);let c;for(c=0;c<o.length;c+=1){const _=Uo(f,o,c);i[c]?i[c].p(_,a):(i[c]=Xi(_),i[c].c(),i[c].m(s,null))}for(;c<i.length;c+=1)i[c].d(1);i.length=o.length}},d(f){f&&k(e),Me(i,f)}}}function $d(l){let e,t=l[179].ip+"",n,s,o=l[179].error&&Zi(l);return{c(){e=T("❌ "),n=T(t),o&&o.c(),s=Fe()},m(i,f){$(i,e,f),$(i,n,f),o&&o.m(i,f),$(i,s,f)},p(i,f){f[1]&8192&&t!==(t=i[179].ip+"")&&U(n,t),i[179].error?o?o.p(i,f):(o=Zi(i),o.c(),o.m(s.parentNode,s)):o&&(o.d(1),o=null)},d(i){i&&(k(e),k(n),k(s)),o&&o.d(i)}}}function Cd(l){let e,t=l[179].ip+"",n;return{c(){e=T("✅ "),n=T(t)},m(s,o){$(s,e,o),$(s,n,o)},p(s,o){o[1]&8192&&t!==(t=s[179].ip+"")&&U(n,t)},d(s){s&&(k(e),k(n))}}}function Zi(l){let e,t=l[179].error+"",n;return{c(){e=T(": "),n=T(t)},m(s,o){$(s,e,o),$(s,n,o)},p(s,o){o[1]&8192&&t!==(t=s[179].error+"")&&U(n,t)},d(s){s&&(k(e),k(n))}}}function Xi(l){let e,t,n,s,o,i,f;function a(m,h){return m[179].success?Cd:$d}let c=a(l),_=c(l);function p(){return l[153](l[179])}return{c(){e=d("div"),t=d("span"),_.c(),n=b(),s=d("button"),s.textContent="📋 Logs",o=b(),u(s,"class","log-btn svelte-1hrwlue"),u(e,"class","server-link-row svelte-1hrwlue")},m(m,h){$(m,e,h),r(e,t),_.m(t,null),r(e,n),r(e,s),r(e,o),i||(f=X(s,"click",p),i=!0)},p(m,h){l=m,c===(c=a(l))&&_?_.p(l,h):(_.d(1),_=c(l),_&&(_.c(),_.m(t,null)))},d(m){m&&k(e),_.d(),i=!1,f()}}}function xi(l){let e,t,n,s,o,i=l[44].domain+"",f,a;return{c(){e=d("div"),t=d("span"),t.textContent="🌐 Domain:",n=b(),s=d("a"),o=T("https://"),f=T(i),u(t,"class","result-label svelte-1hrwlue"),u(s,"href",a="https://"+l[44].domain),u(s,"target","_blank"),u(s,"class","result-link svelte-1hrwlue"),u(e,"class","result-section svelte-1hrwlue")},m(c,_){$(c,e,_),r(e,t),r(e,n),r(e,s),r(s,o),r(s,f)},p(c,_){_[1]&8192&&i!==(i=c[44].domain+"")&&U(f,i),_[1]&8192&&a!==(a="https://"+c[44].domain)&&u(s,"href",a)},d(c){c&&k(e)}}}function er(l){let e,t,n,s,o,i=(l[44].env_var_name||"URL")+"",f,a,c=l[44].connection_url+"",_,p,m,h,v;return{c(){e=d("div"),t=d("span"),t.textContent="Connection:",n=b(),s=d("div"),o=d("code"),f=T(i),a=T("="),_=T(c),p=b(),m=d("button"),m.textContent="📋 Copy",u(t,"class","result-label svelte-1hrwlue"),u(o,"class","connection-url svelte-1hrwlue"),u(m,"class","copy-btn svelte-1hrwlue"),u(s,"class","connection-info svelte-1hrwlue"),u(e,"class","result-section svelte-1hrwlue")},m(g,y){$(g,e,y),r(e,t),r(e,n),r(e,s),r(s,o),r(o,f),r(o,a),r(o,_),r(s,p),r(s,m),h||(v=X(m,"click",l[150]),h=!0)},p(g,y){y[1]&8192&&i!==(i=(g[44].env_var_name||"URL")+"")&&U(f,i),y[1]&8192&&c!==(c=g[44].connection_url+"")&&U(_,c)},d(g){g&&k(e),h=!1,v()}}}function tr(l){let e,t,n=l[0]==="stateful"?"TCP Endpoint:":"Servers:",s,o,i,f,a=l[44].servers.some(fr),c,_=pe(l[44].servers.filter(pr)),p=[];for(let h=0;h<_.length;h+=1)p[h]=lr(Ho(l,_,h));let m=a&&nr(l);return{c(){e=d("div"),t=d("span"),s=T(n),o=b(),i=d("div");for(let h=0;h<p.length;h+=1)p[h].c();f=b(),m&&m.c(),c=Fe(),u(t,"class","result-label svelte-1hrwlue"),u(i,"class","server-links svelte-1hrwlue"),u(e,"class","result-section svelte-1hrwlue")},m(h,v){$(h,e,v),r(e,t),r(t,s),r(e,o),r(e,i);for(let g=0;g<p.length;g+=1)p[g]&&p[g].m(i,null);$(h,f,v),m&&m.m(h,v),$(h,c,v)},p(h,v){if(v[0]&1&&n!==(n=h[0]==="stateful"?"TCP Endpoint:":"Servers:")&&U(s,n),v[0]&9|v[1]&8192){_=pe(h[44].servers.filter(pr));let g;for(g=0;g<_.length;g+=1){const y=Ho(h,_,g);p[g]?p[g].p(y,v):(p[g]=lr(y),p[g].c(),p[g].m(i,null))}for(;g<p.length;g+=1)p[g].d(1);p.length=_.length}v[1]&8192&&(a=h[44].servers.some(fr)),a?m?m.p(h,v):(m=nr(h),m.c(),m.m(c.parentNode,c)):m&&(m.d(1),m=null)},d(h){h&&(k(e),k(f),k(c)),Me(p,h),m&&m.d(h)}}}function yd(l){let e,t=l[179].url+"",n,s;return{c(){e=d("a"),n=T(t),u(e,"href",s=l[179].url),u(e,"target","_blank"),u(e,"class","result-link svelte-1hrwlue")},m(o,i){$(o,e,i),r(e,n)},p(o,i){i[1]&8192&&t!==(t=o[179].url+"")&&U(n,t),i[1]&8192&&s!==(s=o[179].url)&&u(e,"href",s)},d(o){o&&k(e)}}}function Sd(l){var s;let e,t=(((s=l[179].url)==null?void 0:s.replace("http://",""))||`${l[179].ip}:${l[44].host_port||l[179].host_port}`)+"",n;return{c(){e=d("code"),n=T(t),u(e,"class","tcp-endpoint svelte-1hrwlue")},m(o,i){$(o,e,i),r(e,n)},p(o,i){var f;i[1]&8192&&t!==(t=(((f=o[179].url)==null?void 0:f.replace("http://",""))||`${o[179].ip}:${o[44].host_port||o[179].host_port}`)+"")&&U(n,t)},d(o){o&&k(e)}}}function lr(l){let e,t,n,s,o,i;function f(p,m){return p[0]==="stateful"?Sd:yd}let a=f(l),c=a(l);function _(){return l[151](l[179])}return{c(){e=d("div"),c.c(),t=b(),n=d("button"),n.textContent="📋 Logs",s=b(),u(n,"class","log-btn svelte-1hrwlue"),u(e,"class","server-link-row svelte-1hrwlue")},m(p,m){$(p,e,m),c.m(e,null),r(e,t),r(e,n),r(e,s),o||(i=X(n,"click",_),o=!0)},p(p,m){l=p,a===(a=f(l))&&c?c.p(l,m):(c.d(1),c=a(l),c&&(c.c(),c.m(e,t)))},d(p){p&&k(e),c.d(),o=!1,i()}}}function nr(l){let e,t,n,s=pe(l[44].servers.filter(mr)),o=[];for(let i=0;i<s.length;i+=1)o[i]=sr(Bo(l,s,i));return{c(){e=d("div"),t=d("span"),t.textContent="Failed Servers:",n=b();for(let i=0;i<o.length;i+=1)o[i].c();u(t,"class","result-label svelte-1hrwlue"),qt(t,"color","#fef3c7"),u(e,"class","failed-servers-section svelte-1hrwlue")},m(i,f){$(i,e,f),r(e,t),r(e,n);for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(e,null)},p(i,f){if(f[0]&8|f[1]&8192){s=pe(i[44].servers.filter(mr));let a;for(a=0;a<s.length;a+=1){const c=Bo(i,s,a);o[a]?o[a].p(c,f):(o[a]=sr(c),o[a].c(),o[a].m(e,null))}for(;a<o.length;a+=1)o[a].d(1);o.length=s.length}},d(i){i&&k(e),Me(o,i)}}}function sr(l){let e,t,n,s=l[179].ip+"",o,i,f=(l[179].error||"Unknown error")+"",a,c,_,p,m,h;function v(){return l[152](l[179])}return{c(){e=d("div"),t=d("span"),n=T("❌ "),o=T(s),i=T(": "),a=T(f),c=b(),_=d("button"),_.textContent="📋 Logs",p=b(),qt(t,"color","#fef3c7"),u(_,"class","log-btn svelte-1hrwlue"),u(e,"class","server-link-row svelte-1hrwlue")},m(g,y){$(g,e,y),r(e,t),r(t,n),r(t,o),r(t,i),r(t,a),r(e,c),r(e,_),r(e,p),m||(h=X(_,"click",v),m=!0)},p(g,y){l=g,y[1]&8192&&s!==(s=l[179].ip+"")&&U(o,s),y[1]&8192&&f!==(f=(l[179].error||"Unknown error")+"")&&U(a,f)},d(g){g&&k(e),m=!1,h()}}}function Td(l){let e;function t(o,i){return o[41]||o[43].length>0?hd:vd}let n=t(l),s=n(l);return{c(){s.c(),e=Fe()},m(o,i){s.m(o,i),$(o,e,i)},p(o,i){n===(n=t(o))&&s?s.p(o,i):(s.d(1),s=n(o),s&&(s.c(),s.m(e.parentNode,e)))},d(o){o&&k(e),s.d(o)}}}function or(l){let e,t,n=(l[179].name||l[179].ip)+"",s,o,i,f=l[179].ip+"",a,c;return{c(){e=d("div"),t=d("span"),s=T(n),o=b(),i=d("span"),a=T(f),c=b(),u(t,"class","server-name svelte-1hrwlue"),u(i,"class","server-ip svelte-1hrwlue"),u(e,"class","cleanup-server-item svelte-1hrwlue")},m(_,p){$(_,e,p),r(e,t),r(t,s),r(e,o),r(e,i),r(i,a),r(e,c)},p(_,p){p[1]&32768&&n!==(n=(_[179].name||_[179].ip)+"")&&U(s,n),p[1]&32768&&f!==(f=_[179].ip+"")&&U(a,f)},d(_){_&&k(e)}}}function zd(l){let e,t,n,s,o=l[46].length+[...l[8]].length+"",i,f,a,c=[...l[8]].length+"",_,p,m,h,v,g,y=pe(l[46]),C=[];for(let w=0;w<y.length;w+=1)C[w]=or(Fo(l,y,w));return{c(){e=d("div"),t=d("p"),n=T("This service is currently running on "),s=d("strong"),i=T(o),f=T(` servers.
      You're deploying to `),a=d("strong"),_=T(c),p=T(" servers."),m=b(),h=d("p"),h.textContent="Stop containers on the following servers?",v=b(),g=d("div");for(let w=0;w<C.length;w+=1)C[w].c();u(t,"class","svelte-1hrwlue"),u(h,"class","svelte-1hrwlue"),u(g,"class","cleanup-server-list svelte-1hrwlue"),u(e,"class","cleanup-confirm-content svelte-1hrwlue")},m(w,S){$(w,e,S),r(e,t),r(t,n),r(t,s),r(s,i),r(t,f),r(t,a),r(a,_),r(t,p),r(e,m),r(e,h),r(e,v),r(e,g);for(let D=0;D<C.length;D+=1)C[D]&&C[D].m(g,null)},p(w,S){if(S[0]&256|S[1]&32768&&o!==(o=w[46].length+[...w[8]].length+"")&&U(i,o),S[0]&256&&c!==(c=[...w[8]].length+"")&&U(_,c),S[1]&32768){y=pe(w[46]);let D;for(D=0;D<y.length;D+=1){const E=Fo(w,y,D);C[D]?C[D].p(E,S):(C[D]=or(E),C[D].c(),C[D].m(g,null))}for(;D<C.length;D+=1)C[D].d(1);C.length=y.length}},d(w){w&&k(e),Me(C,w)}}}function Dd(l){let e;return{c(){e=T("Proceed")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function Ed(l){let e;return{c(){e=T("Cancel")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function qd(l){let e,t,n,s,o;return t=new Ue({props:{variant:"primary",$$slots:{default:[Dd]},$$scope:{ctx:l}}}),t.$on("click",l[82]),s=new Ue({props:{variant:"ghost",$$slots:{default:[Ed]},$$scope:{ctx:l}}}),s.$on("click",l[154]),{c(){e=d("div"),ce(t.$$.fragment),n=b(),ce(s.$$.fragment),u(e,"slot","footer")},m(i,f){$(i,e,f),fe(t,e,null),r(e,n),fe(s,e,null),o=!0},p(i,f){const a={};f[7]&4&&(a.$$scope={dirty:f,ctx:i}),t.$set(a);const c={};f[7]&4&&(c.$$scope={dirty:f,ctx:i}),s.$set(c)},i(i){o||(R(t.$$.fragment,i),R(s.$$.fragment,i),o=!0)},o(i){M(t.$$.fragment,i),M(s.$$.fragment,i),o=!1},d(i){i&&k(e),ue(t),ue(s)}}}function Ld(l){let e,t,n,s,o,i,f,a,c;n=new ft({props:{title:"🚀 Deploy",$$slots:{default:[md]},$$scope:{ctx:l}}}),o=new ft({props:{title:"📋 Deployment Progress",$$slots:{default:[Td]},$$scope:{ctx:l}}});function _(m){l[155](m)}let p={title:"⚠️ Service Already Running",width:"500px",$$slots:{footer:[qd],default:[zd]},$$scope:{ctx:l}};return l[45]!==void 0&&(p.open=l[45]),f=new ol({props:p}),It.push(()=>pl(f,"open",_)),f.$on("close",l[156]),{c(){e=d("div"),t=d("div"),ce(n.$$.fragment),s=b(),ce(o.$$.fragment),i=b(),ce(f.$$.fragment),u(t,"class","deploy-grid svelte-1hrwlue"),u(e,"class","deploy-page svelte-1hrwlue")},m(m,h){$(m,e,h),r(e,t),fe(n,t,null),r(t,s),fe(o,t,null),$(m,i,h),fe(f,m,h),c=!0},p(m,h){const v={};h[0]&2147483647|h[1]&536741887|h[7]&4&&(v.$$scope={dirty:h,ctx:m}),n.$set(v);const g={};h[0]&41|h[1]&15360|h[7]&4&&(g.$$scope={dirty:h,ctx:m}),o.$set(g);const y={};h[0]&256|h[1]&114688|h[7]&4&&(y.$$scope={dirty:h,ctx:m}),!a&&h[1]&16384&&(a=!0,y.open=m[45],dl(()=>a=!1)),f.$set(y)},i(m){c||(R(n.$$.fragment,m),R(o.$$.fragment,m),R(f.$$.fragment,m),c=!0)},o(m){M(n.$$.fragment,m),M(o.$$.fragment,m),M(f.$$.fragment,m),c=!1},d(m){m&&(k(e),k(i)),ue(n),ue(o),ue(f,m)}}}function Pd(l){l.preventDefault(),l.stopPropagation()}async function Hf(l,e){const t=[],n=l.createReader();let s=[],o;do o=await new Promise((i,f)=>{n.readEntries(i,f)}),s=s.concat(o);while(o.length>0);for(const i of s){const f=e?`${e}/${i.name}`:i.name;if(i.isFile){const a=await new Promise((c,_)=>{i.file(c,_)});a._relativePath=f,t.push(a)}else if(i.isDirectory){const a=await Hf(i,f);t.push(...a)}}return t}function ir(l){return new Promise((e,t)=>{const n=new FileReader;n.onload=()=>e(new Uint8Array(n.result)),n.onerror=t,n.readAsArrayBuffer(l)})}function rr(l){return new Promise((e,t)=>{const n=new FileReader;n.onload=()=>e(n.result),n.onerror=t,n.readAsText(l)})}function ar(l){if(!l)return"";const e=/(https?:\/\/[^\s]+)/g;return l.replace(e,'<a href="$1" target="_blank" class="log-link">$1</a>')}const fr=l=>!l.success,ur=l=>l,Rd=l=>l.isMain,cr=l=>l.isMain,_r=l=>l.isMain,dr=l=>l.trim(),pr=l=>l.success,mr=l=>!l.success;function Nd(l,e,t){let n,s,o;dt(l,E1,ne=>t(11,s=ne)),dt(l,pn,ne=>t(85,o=ne));let i="service";const f=[{value:"stateful",label:"🗄️ Stateful",description:"Database or cache (postgres, redis...)"},{value:"service",label:"🌐 Service",description:"Web app with HTTP port & domain"},{value:"worker",label:"⚙️ Worker",description:"Background job processor"},{value:"scheduled",label:"⏰ Scheduled",description:"Cron job / periodic task"}];let a="redis",c=[{value:"redis",label:"⚡ Redis",port:6379,image:"redis:7-alpine",description:"In-memory cache & pub/sub"},{value:"postgres",label:"🐘 PostgreSQL",port:5432,image:"postgres:16-alpine",description:"Relational database"},{value:"mysql",label:"🐬 MySQL",port:3306,image:"mysql:8",description:"Relational database"},{value:"mongo",label:"🍃 MongoDB",port:27017,image:"mongo:7",description:"Document database"},{value:"opensearch",label:"🔍 OpenSearch",port:9200,image:"opensearchproject/opensearch:2",description:"Search & analytics"},{value:"qdrant",label:"🧠 Qdrant",port:6333,image:"qdrant/qdrant:latest",description:"Vector database for AI"}],_="",p="",m="",h="",v="prod",g="",y="code",C=8e3,w="",S="",D="main",E="",P=[],z="",q="",A=null,N="",I="",G="",F=[],O=null,H=null,L=!0,j=!1,B="",K="",Y=!1,Z="",oe="",x="",J="lon1",W="s-1vcpu-2gb",re=[],V=[],ie=[],_e=!1,te=0,ve=[],ae=new Set,se=0,ee=null;function Q(ne){i!==ne&&(t(0,i=ne),t(3,m=""),t(4,h=""),t(5,v="prod"),ae.clear(),t(8,ae),t(0,i),t(9,se),t(9,se=0),ne==="stateful"&&t(9,se=1))}let be=!1,we=[],Ge=null,nt=!0,vt=!0,qe={postgres:!1,redis:!1,mysql:!1,mongo:!1},Se=!0,Ae="digitalpixo.com",me="",Le="",Re=!1,Pe=["node_modules/","__pycache__/","*.pyc",".git/",".venv/","venv/",".env",".DS_Store",".idea/",".vscode/","dist/","build/",".pytest_cache/",".mypy_cache/"],Be=Pe.join(`
`),tt=!1,st=!1,ot=!1;const Je=[...Pe],it=["dev","test","staging","uat","prod"];kl(()=>{Xt.refresh().catch(()=>{}),dn.refresh().catch(()=>{}),Et()});let St=null;async function Et(){var ne;try{try{const de=await He("GET","/infra/regions");t(38,re=de.regions||de||[])}catch{t(38,re=[{slug:"nyc1",name:"New York 1"},{slug:"nyc3",name:"New York 3"},{slug:"sfo3",name:"San Francisco 3"},{slug:"ams3",name:"Amsterdam 3"},{slug:"sgp1",name:"Singapore 1"},{slug:"lon1",name:"London 1"},{slug:"fra1",name:"Frankfurt 1"}])}try{const de=await He("GET","/infra/sizes");t(39,V=de.sizes||de||[])}catch{t(39,V=[{slug:"s-1vcpu-512mb-10gb",description:"$4/mo - 512MB / 1 vCPU"},{slug:"s-1vcpu-1gb",description:"$6/mo - 1GB / 1 vCPU"},{slug:"s-1vcpu-2gb",description:"$12/mo - 2GB / 1 vCPU"},{slug:"s-2vcpu-2gb",description:"$18/mo - 2GB / 2 vCPU"},{slug:"s-2vcpu-4gb",description:"$24/mo - 4GB / 2 vCPU"},{slug:"s-4vcpu-8gb",description:"$48/mo - 8GB / 4 vCPU"}])}try{const de=await He("GET","/infra/stateful-types");((ne=de.types)==null?void 0:ne.length)>0&&t(2,c=de.types)}catch{console.warn("Using fallback stateful types")}}catch(de){console.error("Failed to load regions/sizes:",de)}}async function nl(){var ne;if(!m){$e.warning("Enter app name first");return}t(53,Le="Loading...");try{const Ce=await He("GET",`/infra/deploy-configs/${h||"default"}/${m}/${v}`);Ut(Ce),t(53,Le="✓ Loaded"),$e.success("Config loaded")}catch(de){(ne=de.message)!=null&&ne.includes("404")?(t(53,Le="No saved config"),$e.info("No saved config found")):(t(53,Le="Load failed"),$e.error("Failed to load config"))}}async function et(){try{const de=await He("GET",`/infra/deploy-configs/${h||"default"}/${m}/${v}`);Ut(de),t(53,Le="✓ Auto-loaded")}catch{t(53,Le="")}}function Ut(ne){var de,Ce;ne.source_type&&t(15,y={folder:"code",git:"git",image:"image"}[ne.source_type]||ne.source_type),ne.git_url&&t(18,S=ne.git_url),ne.git_branch&&t(19,D=ne.git_branch),ne.port&&t(16,C=ne.port),ne.env_vars&&Object.keys(ne.env_vars).length>0&&t(17,w=Object.entries(ne.env_vars).map(([je,Ve])=>`${je}=${Ve}`).join(`
`)),((de=ne.exclude_patterns)==null?void 0:de.length)>0&&(Pe=ne.exclude_patterns,t(55,Be=Pe.join(`
`))),((Ce=ne.server_ips)==null?void 0:Ce.length)>0&&t(8,ae=new Set(ne.server_ips))}async function Pt(){if(!m){$e.warning("Enter app name first");return}t(53,Le="Saving...");const ne={};for(const je of w.split(`
`)){const Ve=je.trim();if(Ve&&Ve.includes("=")){const[bt,...at]=Ve.split("=");ne[bt.trim()]=at.join("=").trim()}}const de=Be.split(`
`).map(je=>je.trim()).filter(Boolean),Ce={project_name:h||"default",service_name:m,env:v,source_type:y==="code"?"folder":y,git_url:S||null,git_branch:D||"main",exclude_patterns:de.length>0?de:Je,port:C,env_vars:ne,server_ips:Array.from(ae)};try{await He("POST","/infra/deploy-configs",Ce),t(53,Le="✓ Saved"),$e.success("Config saved")}catch{t(53,Le="Save failed"),$e.error("Failed to save config")}}function Ht(){t(54,Re=!Re),Re||(Pe=Be.split(`
`).map(ne=>ne.trim()).filter(Boolean))}function ut(){Pe=[...Je],t(55,Be=Je.join(`
`)),$e.info("Reset to default patterns")}function pt(ne){for(const de of Pe)if(de.endsWith("/")){const Ce=de.slice(0,-1);if(ne.startsWith(Ce+"/")||ne.includes("/"+Ce+"/"))return!0}else if(de.startsWith("*")){const Ce=de.slice(1);if(ne.endsWith(Ce))return!0}else if(ne===de||ne.endsWith("/"+de))return!0;return!1}function he(ne){ae.has(ne)?ae.delete(ne):ae.add(ne),t(8,ae),t(0,i),t(9,se)}function Oe(ne){ne?(ie||[]).forEach(de=>{var je,Ve,bt;const Ce=de.ip||((bt=(Ve=(je=de.networks)==null?void 0:je.v4)==null?void 0:Ve[0])==null?void 0:bt.ip_address);Ce&&ae.add(Ce)}):ae.clear(),t(8,ae),t(0,i),t(9,se)}function ct(ne){ae.clear(),ae.add(ne),t(8,ae),t(0,i),t(9,se),(i==="stateful"||i==="scheduled")&&t(9,se=0)}function Gt(){H=async(ne,de)=>{await wl(ne,de,F.length===0)},O==null||O.click()}async function Vt(ne){const de=Array.from(ne.target.files||[]);if(!de.length||!H)return;console.log(`[Deploy] Browser returned ${de.length} files`),de.length<50?console.log("[Deploy] Files:",de.map(Ve=>Ve.webkitRelativePath)):console.log("[Deploy] First 20 files:",de.slice(0,20).map(Ve=>Ve.webkitRelativePath));const je=de[0].webkitRelativePath.split("/")[0];await H(de,je),H=null,ne.target.value=""}function Ke(ne){ne.preventDefault(),ne.stopPropagation(),t(31,j=!0)}function Wt(ne){ne.preventDefault(),ne.stopPropagation(),ne.currentTarget.contains(ne.relatedTarget)||t(31,j=!1)}async function vl(ne){var Ce,je;ne.preventDefault(),ne.stopPropagation(),t(31,j=!1);const de=(Ce=ne.dataTransfer)==null?void 0:Ce.items;if(!(!de||de.length===0)){for(const Ve of de)if(Ve.kind==="file"){const bt=(je=Ve.webkitGetAsEntry)==null?void 0:je.call(Ve);bt!=null&&bt.isDirectory&&await rl(bt)}}}async function rl(ne){const de=ne.name;if(F.some(Ve=>Ve.name===de)){$e.error(`Folder "${de}" is already added`);return}$e.info(`Reading ${de}/...`);const Ce=await Hf(ne,"");if(Ce.length===0){$e.error(`No files found in ${de}/`);return}const je=F.length===0;await hl(Ce,de,je)}async function hl(ne,de,Ce){Ce&&F.some(at=>at.isMain)&&t(28,F=F.map(at=>({...at,isMain:!1})));const je=[];let Ve=null,bt=0;for(const at of ne){const el=at._relativePath||at.name;if(pt(el)){bt++;continue}const yl=await ir(at);je.push({path:el,content:yl}),Ce&&el==="Dockerfile"&&(Ve=await rr(at))}console.log(`[Deploy] Dropped ${de}/: ${ne.length} total, ${bt} skipped, ${je.length} included`),t(28,F=[...F,{name:de,fileContents:je,isMain:Ce,fileCount:je.length}]),al(),F.some(at=>at.isMain)&&await ye(Ve),L&&h&&m&&Qe(),$e.success(`Added ${de}/ (${je.length} files)`)}async function wl(ne,de,Ce){if(F.some(at=>at.name===de)){$e.error(`Folder "${de}" is already added`);return}Ce&&F.some(at=>at.isMain)&&t(28,F=F.map(at=>({...at,isMain:!1})));const je=[];let Ve=null,bt=0;for(const at of ne){const el=at.webkitRelativePath.replace(`${de}/`,"");if(pt(el)){bt++;continue}const yl=await ir(at);je.push({path:el,content:yl}),Ce&&el==="Dockerfile"&&(Ve=await rr(at))}console.log(`[Deploy] Processed ${de}/: ${ne.length} total, ${bt} skipped, ${je.length} included`),t(28,F=[...F,{name:de,fileContents:je,isMain:Ce,fileCount:je.length}]),al(),F.some(at=>at.isMain)&&await ye(Ve),L&&h&&m&&Qe(),$e.success(`Added ${de}/ (${je.length} files)`)}function Jt(ne){t(28,F=F.filter((de,Ce)=>Ce!==ne)),al(),F.length>0&&!F.some(de=>de.isMain)&&t(28,F=F.map((de,Ce)=>({...de,isMain:Ce===0})))}async function xt(ne){t(28,F=F.map((de,Ce)=>({...de,isMain:Ce===ne}))),await ye()}function al(){const ne=F.some(de=>de.isMain);F.length&&ne&&Te()}async function Te(){if(!F.length)return;const{default:ne}=await Io(async()=>{const{default:Ce}=await import("https://cdn.jsdelivr.net/npm/jszip@3.10.1/+esm");return{default:Ce}},[]),de=new ne;for(const Ce of F)for(const{path:je,content:Ve}of Ce.fileContents)de.file(`${Ce.name}/${je}`,Ve);F.length>1&&B&&de.file("Dockerfile",B),await de.generateAsync({type:"blob"})}async function ye(ne=null){t(34,Y=!0),ne?(t(32,B=ne),t(33,K="from folder")):(t(32,B=await Ye()),t(33,K=F.length>1?"multi-folder":"generated")),Yt()}async function Ye(){const ne=F.find(je=>je.isMain);if(!ne)return"";const de=F.filter(je=>!je.isMain).map(je=>je.name),Ce=[];for(const je of F)for(const Ve of je.fileContents)Ce.push(`${je.name}/${Ve.path}`);try{return(await He.post("/infra/dockerfile/generate",{files:Ce,main_folder:ne.name,dep_folders:de,port:parseInt(C)||8e3})).dockerfile||""}catch(je){return console.error("[Deploy] Failed to generate Dockerfile via API:",je),yt(ne)}}function yt(ne){const de=ne.fileContents.some(Ve=>Ve.path==="requirements.txt"),Ce=F.filter(Ve=>!Ve.isMain);let je=`FROM python:3.11-slim

WORKDIR /app

`;for(const Ve of Ce)je+=`COPY ${Ve.name}/ ./${Ve.name}/
`;return je+=`COPY ${ne.name}/ ./${ne.name}/

`,de&&(je+=`RUN pip install --no-cache-dir -r ${ne.name}/requirements.txt

`),je+=`EXPOSE ${C}

`,je+=`CMD ["uvicorn", "${ne.name}.main:app", "--host", "0.0.0.0", "--port", "${C}"]
`,je}function Yt(){const ne=B.match(/^FROM\s+(\S+)/m),de=B.match(/^CMD\s+(.+)$/m);t(35,Z=ne?ne[1]:""),t(36,oe=de?de[1]:"")}function Bt(ne){B&&(ne==="from"&&Z?t(32,B=B.replace(/^FROM\s+\S+/m,`FROM ${Z}`)):ne==="cmd"&&oe&&(B.includes("CMD ")?t(32,B=B.replace(/^CMD\s+.+$/m,`CMD ${oe}`)):t(32,B+=`
CMD ${oe}
`)),t(33,K="edited"))}function Qe(){if(!h||!m)return;const ne=`build_folders_${h}_${m}`,de=F.map(Ce=>({name:Ce.name,isMain:Ce.isMain}));localStorage.setItem(ne,JSON.stringify(de))}function Tt(ne){if(!z.trim()){$e.error("Please enter a folder path");return}const de=z.trim();if(ne&&P.some(Ce=>Ce.isMain)&&t(21,P=P.map(Ce=>({...Ce,isMain:!1}))),P.some(Ce=>Ce.path===de)){$e.error("This folder is already added");return}t(21,P=[...P,{path:de,isMain:ne}]),t(22,z="")}function $l(ne){t(21,P=P.filter((de,Ce)=>Ce!==ne))}function Qt(ne){var Ce;const de=(Ce=ne.target.files)==null?void 0:Ce[0];if(de){if(!de.name.endsWith(".tar")&&!de.name.endsWith(".tar.gz")){$e.error("Only .tar or .tar.gz image files are supported");return}t(24,A=de),$e.success(`Selected: ${de.name}`)}}function Rt(ne,de="info"){t(43,ve=[...ve,{message:ne,type:de,time:new Date}])}async function mt(ne){if(ne.preventDefault(),St&&(clearTimeout(St),t(84,St=null)),!m){$e.error("Service name is required");return}if(!h){$e.error("Project name is required");return}if(i!=="stateful"){if(y==="code"&&!F.some(Ce=>Ce.isMain)){$e.error("Add a main folder with your code");return}if(y==="code"){const Ce=F.find(je=>je.isMain);if(!(Ce!=null&&Ce.fileContents)||Ce.fileContents.length===0){$e.error("Please re-upload your folders. File contents are not loaded from previous sessions.");return}}if(y==="git"&&!S){$e.error("Git URL is required");return}if(y==="image"&&!q){$e.error("Docker image URL is required");return}if(y==="image_file"&&!A){$e.error("Upload a Docker image file (.tar)");return}if(y==="image_file"&&!N){$e.error("Image name is required for local images");return}}if(i==="scheduled"&&!p){$e.error("Cron schedule is required for scheduled jobs");return}if(ae.size===0&&se===0){$e.error("Select at least one server or add new servers");return}if(se>0&&!x){$e.error("Select a snapshot for new servers");return}if(!Ft()){$e.error("Configure your DO Token in Settings first");return}if(i==="service"&&Se&&!zn()){$e.error("Configure your Cloudflare Token in Settings first (required for domain setup)");return}const de=[...ae];if(h&&m&&v)try{const Ce=new URLSearchParams({project:h,environment:v,service_name:m}),je=await He("GET",`/infra/services/state?${Ce}`);if(je.server_ips&&je.server_ips.length>0){const Ve=je.servers.filter(bt=>!de.includes(bt.ip));if(Ve.length>0){t(46,we=Ve),t(47,Ge=()=>Il(ne)),t(45,be=!0);return}}}catch(Ce){console.log("Service state check:",Ce.message||Ce)}await Il()}async function Ol(){t(45,be=!1);const ne=`${h}_${m}_${v}`.replace(/[^a-zA-Z0-9_]/g,"_");if(we.length>0){const de=we.map(Ce=>Ce.ip);Rt(`Stopping containers on ${we.length} server(s)...`);try{const Ce=await He("POST",`/infra/services/cleanup?do_token=${Ft()}`,{server_ips:de,container_name:ne});Rt(`Cleanup complete: ${Ce.cleaned} stopped, ${Ce.failed} failed`)}catch(Ce){Rt(`Cleanup warning: ${Ce.message||Ce}`,"warning")}}t(46,we=[]),Ge&&(await Ge(),t(47,Ge=null))}async function Il(ne){t(41,_e=!0),t(42,te=0),t(43,ve=[]),t(44,ee=null);try{Rt(`Starting ${i} deployment of ${m}...`),t(42,te=10);let de=y,Ce=q,je=C;if(i==="stateful"){de="image";const xe=c.find(cl=>cl.value===a);Ce=(xe==null?void 0:xe.image)||`${a}:latest`,je=(xe==null?void 0:xe.port)||5432}let Ve=null;if(i!=="stateful"&&y==="code"){Rt("Creating code archive..."),console.log("[Deploy] buildFolders:",F.map(Zt=>{var Yl;return{name:Zt.name,isMain:Zt.isMain,fileCount:Zt.fileCount,hasContents:((Yl=Zt.fileContents)==null?void 0:Yl.length)||0}}));const xe=F.find(Zt=>Zt.isMain);if(!(xe!=null&&xe.fileContents)||xe.fileContents.length===0)throw new Error("No file contents in main folder. Please re-upload your folders.");const{default:cl}=await Io(async()=>{const{default:Zt}=await import("https://cdn.jsdelivr.net/npm/jszip@3.10.1/+esm");return{default:Zt}},[]),Ul=new cl;let Bl=0;for(const Zt of F){const Yl=Zt.fileContents||[];for(const{path:Bu,content:Hu}of Yl)Ul.file(`${Zt.name}/${Bu}`,Hu),Bl++}if(console.log("[Deploy] Total files in zip:",Bl),Bl===0)throw new Error("No files to deploy. Please re-upload your folders.");F.length>1&&B&&Ul.file("Dockerfile",B),Ve=await Ul.generateAsync({type:"blob"})}Rt("Sending deployment request... server provisioning may take 30-60s"),t(42,te=20);const bt=i==="service"&&Se,at=Ft(),el=zn(),yl=new URLSearchParams({do_token:at,snapshot_id:x||"",new_server_count:String(se),region:J,size:W,project:h||"",environment:v,setup_domain:String(bt),base_domain:Ae,domain_aliases:JSON.stringify(me.split(",").map(xe=>xe.trim()).filter(Boolean))});bt&&el&&yl.set("cf_token",el);const lt=new FormData;lt.append("name",m),lt.append("port",String(je)),lt.append("source_type",de),lt.append("env_vars",w),lt.append("tags",g),lt.append("server_ips",JSON.stringify(Array.from(ae))),lt.append("depends_on",JSON.stringify(Object.entries(qe).filter(([xe,cl])=>cl).map(([xe])=>xe))),lt.append("exclude_patterns",JSON.stringify(Pe)),lt.append("deploy_type",i),i==="stateful"?(lt.append("is_stateful","true"),lt.append("persist_data","true"),lt.append("image",Ce)):(lt.append("is_stateful","false"),lt.append("persist_data",String(vt))),(i==="worker"||i==="scheduled")&&_&&lt.append("custom_cmd",_),i==="scheduled"&&p&&lt.append("cron_schedule",p),B&&lt.append("dockerfile",B),S&&lt.append("git_url",S),D&&lt.append("git_branch",D),E&&lt.append("git_token",E),P.length&&lt.append("git_folders",JSON.stringify(P)),Ce&&i!=="stateful"&&lt.append("image",Ce),Ve&&lt.append("code_tar",Ve,"code.zip"),y==="image_file"&&(A&&lt.append("image_tar",A),N&&lt.append("image",N),I&&lt.append("container_port",String(I)),G&&lt.append("host_port",String(G))),await S1(`/infra/deploy/multipart?${yl}`,lt,xe=>{var cl;if(xe.type==="log")Rt(xe.message);else if(xe.type==="warning")Rt(xe.message||((cl=xe.data)==null?void 0:cl.message),"warning");else if(xe.type==="progress")t(42,te=Math.min(20+(xe.percent||0)*.8,95));else if(xe.type==="done"){if(t(44,ee=xe),t(42,te=100),!xe.success){const Ul=xe.failed_count||0,Bl=xe.error||`Deployment failed: ${Ul} server(s) failed`;throw new Error(Bl)}}else if(xe.type==="error")throw new Error(xe.message||"Deployment failed")}),Rt("✅ Deployment complete!","success"),$e.success("Deployment successful!"),await Xt.refresh().catch(()=>{})}catch(de){let Ce="Unknown error";if(typeof de=="string")Ce=de;else if(de!=null&&de.message)Ce=de.message;else if(de!=null&&de.detail)Ce=de.detail;else if(de!=null&&de.error)Ce=de.error;else try{Ce=JSON.stringify(de)}catch{Ce=String(de)}Rt(`❌ Error: ${Ce}`,"error"),$e.error(Ce)}finally{t(41,_e=!1),t(9,se=0)}}const fl=[[],[]],zt=ne=>Q(ne.value);function ul(){h=this.value,t(4,h)}function Dt(){m=this.value,t(3,m),t(0,i),t(2,c),t(1,a)}function ht(){v=_t(this),t(5,v),t(62,it)}function gt(){a=this.__value,t(1,a)}const vn=ne=>ne.value===a;function Wl(){Be=this.value,t(55,Be)}function hn(){g=this.value,t(14,g)}function Jl(){y=this.__value,t(15,y)}function gn(){y=this.__value,t(15,y)}function Kl(){y=this.__value,t(15,y)}function ze(){y=this.__value,t(15,y)}function Ie(ne){It[ne?"unshift":"push"](()=>{O=ne,t(29,O)})}const Nt=ne=>xt(ne),Cl=ne=>Jt(ne);function Fl(){L=this.checked,t(30,L)}function rt(){B=this.value,t(32,B)}function gl(){Z=_t(this),t(35,Z)}const Gf=()=>Bt("from");function Vf(){oe=this.value,t(36,oe)}const Wf=()=>Bt("cmd");function Jf(){S=this.value,t(18,S)}function Kf(){D=this.value,t(19,D)}const Yf=ne=>$l(ne);function Qf(){z=this.value,t(22,z)}const Zf=()=>Tt(!0),Xf=()=>Tt(!1);function xf(){E=this.value,t(20,E)}function eu(){q=this.value,t(23,q)}function tu(){N=this.value,t(25,N)}function lu(){I=Kt(this.value),t(26,I)}function nu(){G=Kt(this.value),t(27,G)}function su(){C=Kt(this.value),t(16,C)}function ou(){_=this.value,t(12,_)}function iu(){p=this.value,t(13,p)}const ru=()=>t(13,p="* * * * *"),au=()=>t(13,p="0 * * * *"),fu=()=>t(13,p="0 0 * * *"),uu=()=>t(13,p="0 0 * * 0"),cu=()=>t(56,tt=!tt);function _u(){w=this.value,t(17,w)}const du=()=>t(57,st=!st);function pu(){nt=this.checked,t(48,nt)}function mu(){qe.postgres=this.checked,t(50,qe)}function vu(){qe.redis=this.checked,t(50,qe)}function hu(){qe.mysql=this.checked,t(50,qe)}function gu(){qe.mongo=this.checked,t(50,qe)}function bu(){vt=this.checked,t(49,vt)}function ku(){Se=this.checked,t(51,Se)}function wu(){Ae=this.value,t(10,Ae)}function $u(){me=this.value,t(52,me)}const Cu=()=>Oe(!0),yu=()=>Oe(!1),Su=ne=>ct(ne),Tu=ne=>he(ne),zu=()=>t(58,ot=!ot);function Du(){x=_t(this),t(6,x),t(11,s)}function Eu(){J=_t(this),t(7,J),t(38,re)}function qu(){W=_t(this),t(37,W),t(39,V)}const Lu=ne=>t(9,se=ne.target.checked?1:0),Pu=()=>t(9,se=Math.max(0,se-1));function Ru(){se=Kt(this.value),t(9,se),t(0,i)}const Nu=()=>t(9,se=Math.min(10,se+1)),Mu=()=>{navigator.clipboard.writeText(ee.connection_url),$e.success("Copied to clipboard!")},ju=ne=>window.open(`/api/v1/infra/agent/${ne.droplet_id||ne.ip}/containers/${ne.container_name||ee.container_name||m}/logs?do_token=${Ft()}`,"_blank"),Au=ne=>window.open(`/api/v1/infra/agent/${ne.droplet_id||ne.ip}/containers/${ne.container_name||ee.container_name||m}/logs?do_token=${Ft()}`,"_blank"),Ou=ne=>window.open(`/api/v1/infra/agent/${ne.droplet_id||ne.ip}/containers/${ne.container_name||ee.container_name||m}/logs?do_token=${Ft()}`,"_blank"),Iu=()=>{t(45,be=!1),t(47,Ge=null)};function Fu(ne){be=ne,t(45,be)}const Uu=()=>{t(45,be=!1),t(47,Ge=null)};return l.$$.update=()=>{if(l.$$.dirty[0]&15&&i==="stateful"&&(!m||c.some(ne=>ne.value===m))&&t(3,m=a),l.$$.dirty[0]&128|l.$$.dirty[2]&8388608&&t(40,ie=(o||[]).filter(ne=>!J||ne.region===J)),l.$$.dirty[0]&257&&(i==="stateful"||i==="scheduled")&&ae.size>1){const ne=[...ae][0];ae.clear(),ne&&ae.add(ne),t(8,ae),t(0,i),t(9,se)}if(l.$$.dirty[0]&513&&(i==="stateful"||i==="scheduled")&&se>1&&t(9,se=1),l.$$.dirty[0]&769&&(i==="stateful"||i==="scheduled")&&se>0&&ae.size>0&&(ae.clear(),t(8,ae),t(0,i),t(9,se)),l.$$.dirty[0]&1080&&t(59,n=m&&h&&v?`${m}-${h}-${v}.${Ae}`:""),l.$$.dirty[0]&25|l.$$.dirty[2]&4194304&&m&&h&&i!=="stateful"&&(St&&clearTimeout(St),t(84,St=setTimeout(()=>{et()},500))),l.$$.dirty[0]&2112&&(s==null?void 0:s.length)>0&&!x){const ne=s.find(de=>(de.name||"").toLowerCase().includes("base"));t(6,x=(ne==null?void 0:ne.id)||(ne==null?void 0:ne.name)||s[0].id||s[0].name)}},[i,a,c,m,h,v,x,J,ae,se,Ae,s,_,p,g,y,C,w,S,D,E,P,z,q,A,N,I,G,F,O,L,j,B,K,Y,Z,oe,W,re,V,ie,_e,te,ve,ee,be,we,Ge,nt,vt,qe,Se,me,Le,Re,Be,tt,st,ot,n,f,Q,it,nl,Pt,Ht,ut,he,Oe,ct,Gt,Vt,Ke,Wt,vl,Jt,xt,Bt,Tt,$l,Qt,mt,Ol,Rt,St,o,zt,ul,Dt,ht,gt,fl,vn,Wl,hn,Jl,gn,Kl,ze,Ie,Nt,Cl,Fl,rt,gl,Gf,Vf,Wf,Jf,Kf,Yf,Qf,Zf,Xf,xf,eu,tu,lu,nu,su,ou,iu,ru,au,fu,uu,cu,_u,du,pu,mu,vu,hu,gu,bu,ku,wu,$u,Cu,yu,Su,Tu,zu,Du,Eu,qu,Lu,Pu,Ru,Nu,Mu,ju,Au,Ou,Iu,Fu,Uu]}class Md extends Ct{constructor(e){super(),$t(this,e,Nd,Ld,kt,{},null,[-1,-1,-1,-1,-1,-1,-1,-1])}}function vr(l,e,t){const n=l.slice();return n[55]=e[t],n}function hr(l,e,t){const n=l.slice();return n[55]=e[t],n}function gr(l,e,t){const n=l.slice();return n[55]=e[t],n}function br(l,e,t){const n=l.slice();return n[62]=e[t],n}function kr(l,e,t){const n=l.slice();return n[66]=e[t],n}function wr(l,e,t){const n=l.slice();return n[69]=e[t][0],n[70]=e[t][1],n}function jd(l){const e=l.slice(),t=e[14].config_snapshot;return e[65]=t,e}function $r(l,e,t){const n=l.slice();return n[62]=e[t],n}function Cr(l,e,t){const n=l.slice();return n[75]=e[t],n}function yr(l,e,t){const n=l.slice();n[78]=e[t];const s=il(n[78]);return n[79]=s,n}function Sr(l){let e,t,n=oa(l[20])+"",s;return{c(){e=d("span"),t=T("Updated "),s=T(n),u(e,"class","last-updated svelte-cuxyqu")},m(o,i){$(o,e,i),r(e,t),r(e,s)},p(o,i){i[0]&1048576&&n!==(n=oa(o[20])+"")&&U(s,n)},d(o){o&&k(e)}}}function Ad(l){let e;return{c(){e=T("↻ Refresh")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function Od(l){let e,t,n=pe(l[19]),s=[];for(let i=0;i<n.length;i+=1)s[i]=Er(yr(l,n,i));const o=i=>M(s[i],1,1,()=>{s[i]=null});return{c(){for(let i=0;i<s.length;i+=1)s[i].c();e=Fe()},m(i,f){for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(i,f);$(i,e,f),t=!0},p(i,f){if(f[0]&27787264){n=pe(i[19]);let a;for(a=0;a<n.length;a+=1){const c=yr(i,n,a);s[a]?(s[a].p(c,f),R(s[a],1)):(s[a]=Er(c),s[a].c(),R(s[a],1),s[a].m(e.parentNode,e))}for(De(),a=n.length;a<s.length;a+=1)o(a);Ee()}},i(i){if(!t){for(let f=0;f<n.length;f+=1)R(s[f]);t=!0}},o(i){s=s.filter(Boolean);for(let f=0;f<s.length;f+=1)M(s[f]);t=!1},d(i){i&&k(e),Me(s,i)}}}function Id(l){let e;return{c(){e=d("tr"),e.innerHTML='<td colspan="12" class="empty-cell svelte-cuxyqu">No deployments found</td>',u(e,"class","svelte-cuxyqu")},m(t,n){$(t,e,n)},p:ge,i:ge,o:ge,d(t){t&&k(e)}}}function Fd(l){let e;return{c(){e=d("tr"),e.innerHTML='<td colspan="12" class="loading-cell svelte-cuxyqu">Loading deployment history...</td>',u(e,"class","svelte-cuxyqu")},m(t,n){$(t,e,n)},p:ge,i:ge,o:ge,d(t){t&&k(e)}}}function Ud(l){let e=(l[78].environment||"-")+"",t;return{c(){t=T(e)},m(n,s){$(n,t,s)},p(n,s){s[0]&524288&&e!==(e=(n[78].environment||"-")+"")&&U(t,e)},d(n){n&&k(t)}}}function Bd(l){let e;return{c(){e=d("span"),e.textContent="-",u(e,"class","version-none svelte-cuxyqu")},m(t,n){$(t,e,n)},p:ge,d(t){t&&k(e)}}}function Hd(l){let e,t,n=l[78].version+"",s;return{c(){e=d("span"),t=T("v"),s=T(n),u(e,"class","version-badge svelte-cuxyqu")},m(o,i){$(o,e,i),r(e,t),r(e,s)},p(o,i){i[0]&524288&&n!==(n=o[78].version+"")&&U(s,n)},d(o){o&&k(e)}}}function Gd(l){let e=l[78].is_rollback?"rollback":"deploy",t;return{c(){t=T(e)},m(n,s){$(n,t,s)},p(n,s){s[0]&524288&&e!==(e=n[78].is_rollback?"rollback":"deploy")&&U(t,e)},d(n){n&&k(t)}}}function Vd(l){let e=l[79]+"",t;return{c(){t=T(e)},m(n,s){$(n,t,s)},p(n,s){s[0]&524288&&e!==(e=n[79]+"")&&U(t,e)},d(n){n&&k(t)}}}function Tr(l){let e,t,n;function s(){return l[34](l[78])}return{c(){e=d("button"),e.textContent="⚙️",u(e,"class","icon-btn svelte-cuxyqu"),u(e,"title","View config")},m(o,i){$(o,e,i),t||(n=X(e,"click",s),t=!0)},p(o,i){l=o},d(o){o&&k(e),t=!1,n()}}}function zr(l){let e,t,n;function s(){return l[35](l[78])}return{c(){e=d("button"),e.textContent="📋",u(e,"class","icon-btn svelte-cuxyqu"),u(e,"title","View logs")},m(o,i){$(o,e,i),t||(n=X(e,"click",s),t=!0)},p(o,i){l=o},d(o){o&&k(e),t=!1,n()}}}function Dr(l){let e,t,n;function s(){return l[36](l[78])}return{c(){e=d("button"),e.textContent="⏪",u(e,"class","icon-btn rollback-icon-btn svelte-cuxyqu"),u(e,"title","Rollback")},m(o,i){$(o,e,i),t||(n=X(e,"click",s),t=!0)},p(o,i){l=o},d(o){o&&k(e),t=!1,n()}}}function Er(l){let e,t,n,s=(l[78].project||"-")+"",o,i,f,a,c=(l[78].service||l[78].name)+"",_,p,m,h,v,g,y,C,w=tl(l[78].deployed_at||l[78].created_at)+"",S,D,E,P=(l[78].deployed_by||l[78].user||"-")+"",z,q,A,N,I,G,F,O,H,L,j=(l[78].comment||"-")+"",B,K,Y,Z,oe,x,J,W,re;h=new Ze({props:{variant:l[78].environment==="prod"?"purple":l[78].environment==="staging"?"warning":"info",$$slots:{default:[Ud]},$$scope:{ctx:l}}});function V(se,ee){return se[78].version?Hd:Bd}let ie=V(l),_e=ie(l);I=new Ze({props:{variant:l[78].is_rollback?"warning":"info",$$slots:{default:[Gd]},$$scope:{ctx:l}}}),O=new Ze({props:{variant:Ml(l[79]),$$slots:{default:[Vd]},$$scope:{ctx:l}}});let te=l[78].config_snapshot&&Tr(l),ve=l[78].has_logs&&zr(l),ae=l[78].is_current_active&&Dr(l);return{c(){e=d("tr"),t=d("td"),n=d("span"),o=T(s),i=b(),f=d("td"),a=d("span"),_=T(c),p=b(),m=d("td"),ce(h.$$.fragment),v=b(),g=d("td"),_e.c(),y=b(),C=d("td"),S=T(w),D=b(),E=d("td"),z=T(P),A=b(),N=d("td"),ce(I.$$.fragment),G=b(),F=d("td"),ce(O.$$.fragment),H=b(),L=d("td"),B=T(j),K=b(),Y=d("td"),te&&te.c(),Z=b(),oe=d("td"),ve&&ve.c(),x=b(),J=d("td"),ae&&ae.c(),W=b(),u(n,"class","project-name svelte-cuxyqu"),u(t,"class","svelte-cuxyqu"),u(a,"class","service-name svelte-cuxyqu"),u(f,"class","svelte-cuxyqu"),u(m,"class","svelte-cuxyqu"),u(g,"class","version-cell svelte-cuxyqu"),u(C,"class","date-cell svelte-cuxyqu"),u(E,"class","by-cell svelte-cuxyqu"),u(E,"title",q=l[78].deployed_by||l[78].user||"-"),u(N,"class","svelte-cuxyqu"),u(F,"class","svelte-cuxyqu"),u(L,"class","comment-cell svelte-cuxyqu"),u(Y,"class","config-cell svelte-cuxyqu"),u(oe,"class","logs-cell svelte-cuxyqu"),u(J,"class","rollback-cell svelte-cuxyqu"),u(e,"class","svelte-cuxyqu")},m(se,ee){$(se,e,ee),r(e,t),r(t,n),r(n,o),r(e,i),r(e,f),r(f,a),r(a,_),r(e,p),r(e,m),fe(h,m,null),r(e,v),r(e,g),_e.m(g,null),r(e,y),r(e,C),r(C,S),r(e,D),r(e,E),r(E,z),r(e,A),r(e,N),fe(I,N,null),r(e,G),r(e,F),fe(O,F,null),r(e,H),r(e,L),r(L,B),r(e,K),r(e,Y),te&&te.m(Y,null),r(e,Z),r(e,oe),ve&&ve.m(oe,null),r(e,x),r(e,J),ae&&ae.m(J,null),r(e,W),re=!0},p(se,ee){(!re||ee[0]&524288)&&s!==(s=(se[78].project||"-")+"")&&U(o,s),(!re||ee[0]&524288)&&c!==(c=(se[78].service||se[78].name)+"")&&U(_,c);const Q={};ee[0]&524288&&(Q.variant=se[78].environment==="prod"?"purple":se[78].environment==="staging"?"warning":"info"),ee[0]&524288|ee[2]&1048576&&(Q.$$scope={dirty:ee,ctx:se}),h.$set(Q),ie===(ie=V(se))&&_e?_e.p(se,ee):(_e.d(1),_e=ie(se),_e&&(_e.c(),_e.m(g,null))),(!re||ee[0]&524288)&&w!==(w=tl(se[78].deployed_at||se[78].created_at)+"")&&U(S,w),(!re||ee[0]&524288)&&P!==(P=(se[78].deployed_by||se[78].user||"-")+"")&&U(z,P),(!re||ee[0]&524288&&q!==(q=se[78].deployed_by||se[78].user||"-"))&&u(E,"title",q);const be={};ee[0]&524288&&(be.variant=se[78].is_rollback?"warning":"info"),ee[0]&524288|ee[2]&1048576&&(be.$$scope={dirty:ee,ctx:se}),I.$set(be);const we={};ee[0]&524288&&(we.variant=Ml(se[79])),ee[0]&524288|ee[2]&1048576&&(we.$$scope={dirty:ee,ctx:se}),O.$set(we),(!re||ee[0]&524288)&&j!==(j=(se[78].comment||"-")+"")&&U(B,j),se[78].config_snapshot?te?te.p(se,ee):(te=Tr(se),te.c(),te.m(Y,null)):te&&(te.d(1),te=null),se[78].has_logs?ve?ve.p(se,ee):(ve=zr(se),ve.c(),ve.m(oe,null)):ve&&(ve.d(1),ve=null),se[78].is_current_active?ae?ae.p(se,ee):(ae=Dr(se),ae.c(),ae.m(J,null)):ae&&(ae.d(1),ae=null)},i(se){re||(R(h.$$.fragment,se),R(I.$$.fragment,se),R(O.$$.fragment,se),re=!0)},o(se){M(h.$$.fragment,se),M(I.$$.fragment,se),M(O.$$.fragment,se),re=!1},d(se){se&&k(e),ue(h),_e.d(),ue(I),ue(O),te&&te.d(),ve&&ve.d(),ae&&ae.d()}}}function Wd(l){let e,t,n,s,o,i,f,a;const c=[Fd,Id,Od],_=[];function p(m,h){return m[0]&&m[19].length===0?0:m[19].length===0?1:2}return i=p(l),f=_[i]=c[i](l),{c(){e=d("div"),t=d("table"),n=d("thead"),n.innerHTML='<tr class="svelte-cuxyqu"><th class="svelte-cuxyqu">Project</th> <th class="svelte-cuxyqu">Service</th> <th class="svelte-cuxyqu">Environment</th> <th class="version-col svelte-cuxyqu">v</th> <th class="svelte-cuxyqu">Deployed</th> <th class="svelte-cuxyqu">By</th> <th class="svelte-cuxyqu">Type</th> <th class="svelte-cuxyqu">Status</th> <th class="svelte-cuxyqu">Comment</th> <th class="config-col svelte-cuxyqu"></th> <th class="logs-col svelte-cuxyqu"></th> <th class="rollback-col svelte-cuxyqu"></th></tr>',s=b(),o=d("tbody"),f.c(),u(t,"class","table svelte-cuxyqu"),u(e,"class","table-container svelte-cuxyqu")},m(m,h){$(m,e,h),r(e,t),r(t,n),r(t,s),r(t,o),_[i].m(o,null),a=!0},p(m,h){let v=i;i=p(m),i===v?_[i].p(m,h):(De(),M(_[v],1,1,()=>{_[v]=null}),Ee(),f=_[i],f?f.p(m,h):(f=_[i]=c[i](m),f.c()),R(f,1),f.m(o,null))},i(m){a||(R(f),a=!0)},o(m){M(f),a=!1},d(m){m&&k(e),_[i].d()}}}function qr(l){let e,t,n,s=(l[2].service||l[2].name)+"",o,i,f,a=l[2].project+"",c,_,p=l[2].environment+"",m,h,v,g,y,C,w,S=tl(l[2].deployed_at||l[2].created_at)+"",D,E,P,z,q=(l[2].deployed_by||l[2].user||"unknown")+"",A,N,I,G,F,O,H,L,j,B,K=l[2].comment&&Lr(l);const Y=[Kd,Jd],Z=[];function oe(J,W){return J[3].length===0?0:1}H=oe(l),L=Z[H]=Y[H](l);let x=l[6].length>0&&Rr(l);return{c(){e=d("div"),t=d("div"),n=d("div"),o=T(s),i=b(),f=d("div"),c=T(a),_=T(" / "),m=T(p),h=b(),v=d("div"),g=d("label"),g.textContent="📍 Current Deployment",y=b(),C=d("div"),w=d("div"),D=T(S),E=b(),P=d("div"),z=T("by "),A=T(q),N=b(),K&&K.c(),I=b(),G=d("div"),F=d("label"),F.textContent="🎯 Rollback to",O=b(),L.c(),j=b(),x&&x.c(),u(n,"class","service-name svelte-cuxyqu"),u(f,"class","service-coords svelte-cuxyqu"),u(t,"class","service-info svelte-cuxyqu"),u(g,"class","svelte-cuxyqu"),u(w,"class","deploy-date svelte-cuxyqu"),u(P,"class","deploy-by svelte-cuxyqu"),u(C,"class","deployment-card current svelte-cuxyqu"),u(v,"class","section svelte-cuxyqu"),u(F,"class","svelte-cuxyqu"),u(G,"class","section svelte-cuxyqu"),u(e,"class","rollback-content svelte-cuxyqu")},m(J,W){$(J,e,W),r(e,t),r(t,n),r(n,o),r(t,i),r(t,f),r(f,c),r(f,_),r(f,m),r(e,h),r(e,v),r(v,g),r(v,y),r(v,C),r(C,w),r(w,D),r(C,E),r(C,P),r(P,z),r(P,A),r(C,N),K&&K.m(C,null),r(e,I),r(e,G),r(G,F),r(G,O),Z[H].m(G,null),r(e,j),x&&x.m(e,null),B=!0},p(J,W){(!B||W[0]&4)&&s!==(s=(J[2].service||J[2].name)+"")&&U(o,s),(!B||W[0]&4)&&a!==(a=J[2].project+"")&&U(c,a),(!B||W[0]&4)&&p!==(p=J[2].environment+"")&&U(m,p),(!B||W[0]&4)&&S!==(S=tl(J[2].deployed_at||J[2].created_at)+"")&&U(D,S),(!B||W[0]&4)&&q!==(q=(J[2].deployed_by||J[2].user||"unknown")+"")&&U(A,q),J[2].comment?K?K.p(J,W):(K=Lr(J),K.c(),K.m(C,null)):K&&(K.d(1),K=null);let re=H;H=oe(J),H===re?Z[H].p(J,W):(De(),M(Z[re],1,1,()=>{Z[re]=null}),Ee(),L=Z[H],L?L.p(J,W):(L=Z[H]=Y[H](J),L.c()),R(L,1),L.m(G,null)),J[6].length>0?x?x.p(J,W):(x=Rr(J),x.c(),x.m(e,null)):x&&(x.d(1),x=null)},i(J){B||(R(L),B=!0)},o(J){M(L),B=!1},d(J){J&&k(e),K&&K.d(),Z[H].d(),x&&x.d()}}}function Lr(l){let e,t=l[2].comment+"",n;return{c(){e=d("div"),n=T(t),u(e,"class","deploy-comment svelte-cuxyqu")},m(s,o){$(s,e,o),r(e,n)},p(s,o){o[0]&4&&t!==(t=s[2].comment+"")&&U(n,t)},d(s){s&&k(e)}}}function Jd(l){let e,t,n=pe(l[3]),s=[];for(let i=0;i<n.length;i+=1)s[i]=Pr(Cr(l,n,i));const o=i=>M(s[i],1,1,()=>{s[i]=null});return{c(){e=d("div");for(let i=0;i<s.length;i+=1)s[i].c();u(e,"class","deployment-list svelte-cuxyqu")},m(i,f){$(i,e,f);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(e,null);t=!0},p(i,f){if(f[0]&56){n=pe(i[3]);let a;for(a=0;a<n.length;a+=1){const c=Cr(i,n,a);s[a]?(s[a].p(c,f),R(s[a],1)):(s[a]=Pr(c),s[a].c(),R(s[a],1),s[a].m(e,null))}for(De(),a=n.length;a<s.length;a+=1)o(a);Ee()}},i(i){if(!t){for(let f=0;f<n.length;f+=1)R(s[f]);t=!0}},o(i){s=s.filter(Boolean);for(let f=0;f<s.length;f+=1)M(s[f]);t=!1},d(i){i&&k(e),Me(s,i)}}}function Kd(l){let e;return{c(){e=d("div"),e.textContent="No previous deployments found",u(e,"class","no-deployments svelte-cuxyqu")},m(t,n){$(t,e,n)},p:ge,i:ge,o:ge,d(t){t&&k(e)}}}function Yd(l){let e,t=l[75].id.substring(0,8)+"",n;return{c(){e=d("span"),n=T(t),u(e,"class","version-badge muted svelte-cuxyqu")},m(s,o){$(s,e,o),r(e,n)},p(s,o){o[0]&8&&t!==(t=s[75].id.substring(0,8)+"")&&U(n,t)},d(s){s&&k(e)}}}function Qd(l){let e,t,n=l[75].version+"",s;return{c(){e=d("span"),t=T("v"),s=T(n),u(e,"class","version-badge svelte-cuxyqu")},m(o,i){$(o,e,i),r(e,t),r(e,s)},p(o,i){i[0]&8&&n!==(n=o[75].version+"")&&U(s,n)},d(o){o&&k(e)}}}function Zd(l){let e=il(l[75])+"",t;return{c(){t=T(e)},m(n,s){$(n,t,s)},p(n,s){s[0]&8&&e!==(e=il(n[75])+"")&&U(t,e)},d(n){n&&k(t)}}}function Pr(l){let e,t,n,s=!1,o,i,f,a,c,_=tl(l[75].deployed_at||l[75].created_at)+"",p,m,h,v,g=(l[75].deployed_by||l[75].user||"unknown")+"",y,C,w,S,D,E,P,z;function q(I,G){return I[75].version?Qd:Yd}let A=q(l),N=A(l);return w=new Ze({props:{variant:Ml(il(l[75])),$$slots:{default:[Zd]},$$scope:{ctx:l}}}),E=Ln(l[39][0]),{c(){e=d("label"),t=d("input"),o=b(),i=d("div"),N.c(),f=b(),a=d("div"),c=d("div"),p=T(_),m=b(),h=d("div"),v=T("by "),y=T(g),C=b(),ce(w.$$.fragment),S=b(),u(t,"type","radio"),t.__value=n=l[75].id,le(t,t.__value),t.disabled=l[5],u(t,"class","svelte-cuxyqu"),u(i,"class","deploy-version svelte-cuxyqu"),u(c,"class","deploy-date svelte-cuxyqu"),u(h,"class","deploy-by svelte-cuxyqu"),u(a,"class","deploy-info svelte-cuxyqu"),u(e,"class","deployment-option svelte-cuxyqu"),ke(e,"selected",l[4]===l[75].id),E.p(t)},m(I,G){$(I,e,G),r(e,t),t.checked=t.__value===l[4],r(e,o),r(e,i),N.m(i,null),r(e,f),r(e,a),r(a,c),r(c,p),r(a,m),r(a,h),r(h,v),r(h,y),r(e,C),fe(w,e,null),r(e,S),D=!0,P||(z=X(t,"change",l[38]),P=!0)},p(I,G){(!D||G[0]&8&&n!==(n=I[75].id))&&(t.__value=n,le(t,t.__value),s=!0),(!D||G[0]&32)&&(t.disabled=I[5]),(s||G[0]&24)&&(t.checked=t.__value===I[4]),A===(A=q(I))&&N?N.p(I,G):(N.d(1),N=A(I),N&&(N.c(),N.m(i,null))),(!D||G[0]&8)&&_!==(_=tl(I[75].deployed_at||I[75].created_at)+"")&&U(p,_),(!D||G[0]&8)&&g!==(g=(I[75].deployed_by||I[75].user||"unknown")+"")&&U(y,g);const F={};G[0]&8&&(F.variant=Ml(il(I[75]))),G[0]&8|G[2]&1048576&&(F.$$scope={dirty:G,ctx:I}),w.$set(F),(!D||G[0]&24)&&ke(e,"selected",I[4]===I[75].id)},i(I){D||(R(w.$$.fragment,I),D=!0)},o(I){M(w.$$.fragment,I),D=!1},d(I){I&&k(e),N.d(),ue(w),E.r(),P=!1,z()}}}function Rr(l){let e,t,n,s,o,i=pe(l[6]),f=[];for(let c=0;c<i.length;c+=1)f[c]=Nr($r(l,i,c));let a=l[5]&&Mr();return{c(){e=d("div"),t=d("label"),t.textContent="📋 Progress",n=b(),s=d("div");for(let c=0;c<f.length;c+=1)f[c].c();o=b(),a&&a.c(),u(t,"class","svelte-cuxyqu"),u(s,"class","rollback-logs svelte-cuxyqu"),u(e,"class","section rollback-logs-section svelte-cuxyqu")},m(c,_){$(c,e,_),r(e,t),r(e,n),r(e,s);for(let p=0;p<f.length;p+=1)f[p]&&f[p].m(s,null);r(s,o),a&&a.m(s,null)},p(c,_){if(_[0]&64){i=pe(c[6]);let p;for(p=0;p<i.length;p+=1){const m=$r(c,i,p);f[p]?f[p].p(m,_):(f[p]=Nr(m),f[p].c(),f[p].m(s,o))}for(;p<f.length;p+=1)f[p].d(1);f.length=i.length}c[5]?a||(a=Mr(),a.c(),a.m(s,null)):a&&(a.d(1),a=null)},d(c){c&&k(e),Me(f,c),a&&a.d()}}}function Nr(l){let e,t=l[62].message+"",n,s;return{c(){e=d("div"),n=T(t),u(e,"class",s="log-entry log-"+l[62].type+" svelte-cuxyqu")},m(o,i){$(o,e,i),r(e,n)},p(o,i){i[0]&64&&t!==(t=o[62].message+"")&&U(n,t),i[0]&64&&s!==(s="log-entry log-"+o[62].type+" svelte-cuxyqu")&&u(e,"class",s)},d(o){o&&k(e)}}}function Mr(l){let e;return{c(){e=d("div"),e.innerHTML='<span class="spinner svelte-cuxyqu">⏳</span> Working...',u(e,"class","log-entry log-info svelte-cuxyqu")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function Xd(l){let e,t,n=l[2]&&qr(l);return{c(){n&&n.c(),e=Fe()},m(s,o){n&&n.m(s,o),$(s,e,o),t=!0},p(s,o){s[2]?n?(n.p(s,o),o[0]&4&&R(n,1)):(n=qr(s),n.c(),R(n,1),n.m(e.parentNode,e)):n&&(De(),M(n,1,1,()=>{n=null}),Ee())},i(s){t||(R(n),t=!0)},o(s){M(n),t=!1},d(s){s&&k(e),n&&n.d(s)}}}function xd(l){let e=l[6].length>0?"Close":"Cancel",t;return{c(){t=T(e)},m(n,s){$(n,t,s)},p(n,s){s[0]&64&&e!==(e=n[6].length>0?"Close":"Cancel")&&U(t,e)},d(n){n&&k(t)}}}function ep(l){let e;return{c(){e=T("⏪ Execute Rollback")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function tp(l){let e;return{c(){e=T("⏳ Rolling back...")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function lp(l){let e;function t(o,i){return o[5]?tp:ep}let n=t(l),s=n(l);return{c(){s.c(),e=Fe()},m(o,i){s.m(o,i),$(o,e,i)},p(o,i){n!==(n=t(o))&&(s.d(1),s=n(o),s&&(s.c(),s.m(e.parentNode,e)))},d(o){o&&k(e),s.d(o)}}}function np(l){let e,t,n,s,o;return t=new Ue({props:{variant:"ghost",$$slots:{default:[xd]},$$scope:{ctx:l}}}),t.$on("click",l[37]),s=new Ue({props:{variant:"warning",disabled:!l[4]||l[5],$$slots:{default:[lp]},$$scope:{ctx:l}}}),s.$on("click",l[25]),{c(){e=d("div"),ce(t.$$.fragment),n=b(),ce(s.$$.fragment),u(e,"slot","footer")},m(i,f){$(i,e,f),fe(t,e,null),r(e,n),fe(s,e,null),o=!0},p(i,f){const a={};f[0]&64|f[2]&1048576&&(a.$$scope={dirty:f,ctx:i}),t.$set(a);const c={};f[0]&48&&(c.disabled=!i[4]||i[5]),f[0]&32|f[2]&1048576&&(c.$$scope={dirty:f,ctx:i}),s.$set(c)},i(i){o||(R(t.$$.fragment,i),R(s.$$.fragment,i),o=!0)},o(i){M(t.$$.fragment,i),M(s.$$.fragment,i),o=!1},d(i){i&&k(e),ue(t),ue(s)}}}function jr(l){let e,t,n,s=(l[14].service_name||l[14].service)+"",o,i,f,a=l[14].environment+"",c,_,p=tl(l[14].deployed_at)+"",m,h,v,g,y;const C=[op,sp],w=[];function S(E,P){return E[14].config_snapshot?0:1}function D(E,P){return P===0?jd(E):E}return v=S(l),g=w[v]=C[v](D(l,v)),{c(){e=d("div"),t=d("div"),n=d("span"),o=T(s),i=b(),f=d("span"),c=T(a),_=T(" • "),m=T(p),h=b(),g.c(),u(n,"class","service-name svelte-cuxyqu"),u(f,"class","meta svelte-cuxyqu"),u(t,"class","config-header-info svelte-cuxyqu"),u(e,"class","config-content svelte-cuxyqu")},m(E,P){$(E,e,P),r(e,t),r(t,n),r(n,o),r(t,i),r(t,f),r(f,c),r(f,_),r(f,m),r(e,h),w[v].m(e,null),y=!0},p(E,P){(!y||P[0]&16384)&&s!==(s=(E[14].service_name||E[14].service)+"")&&U(o,s),(!y||P[0]&16384)&&a!==(a=E[14].environment+"")&&U(c,a),(!y||P[0]&16384)&&p!==(p=tl(E[14].deployed_at)+"")&&U(m,p);let z=v;v=S(E),v===z?w[v].p(D(E,v),P):(De(),M(w[z],1,1,()=>{w[z]=null}),Ee(),g=w[v],g?g.p(D(E,v),P):(g=w[v]=C[v](D(E,v)),g.c()),R(g,1),g.m(e,null))},i(E){y||(R(g),y=!0)},o(E){M(g),y=!1},d(E){E&&k(e),w[v].d()}}}function sp(l){let e;return{c(){e=d("div"),e.textContent="No config snapshot available",u(e,"class","no-config svelte-cuxyqu")},m(t,n){$(t,e,n)},p:ge,i:ge,o:ge,d(t){t&&k(e)}}}function op(l){var ie,_e;let e,t,n,s,o,i,f=(l[65].source_type||"-")+"",a,c,_,p,m,h,v,g,y=(l[65].port||"-")+"",C,w,S,D,E,P,z,q,A,N,I=l[65].env_vars&&Object.keys(l[65].env_vars).length>0,G,F,O,H=l[65].git_url&&Ar(l),L=l[65].git_branch&&Or(l),j=l[65].image&&Ir(l),B=l[65].container_port&&Fr(l),K=l[65].host_port&&Ur(l),Y=l[65].snapshot_id&&Br(l),Z=l[65].region&&Hr(l),oe=l[65].size&&Gr(l),x=((ie=l[65].server_ips)==null?void 0:ie.length)&&Vr(l),J=l[65].setup_domain&&Wr(),W=l[65].base_domain&&Jr(l),re=I&&Kr(l),V=((_e=l[65].tags)==null?void 0:_e.length)&&Qr(l);return{c(){e=d("table"),t=d("tbody"),n=d("tr"),s=d("td"),s.textContent="Source Type",o=d("td"),i=d("strong"),a=T(f),c=b(),H&&H.c(),_=b(),L&&L.c(),p=b(),j&&j.c(),m=b(),h=d("tr"),v=d("td"),v.textContent="Port",g=d("td"),C=T(y),w=b(),B&&B.c(),S=b(),K&&K.c(),D=b(),Y&&Y.c(),E=b(),Z&&Z.c(),P=b(),oe&&oe.c(),z=b(),x&&x.c(),q=b(),J&&J.c(),A=b(),W&&W.c(),N=b(),re&&re.c(),G=b(),V&&V.c(),F=Fe(),u(s,"class","label svelte-cuxyqu"),u(o,"class","svelte-cuxyqu"),u(v,"class","label svelte-cuxyqu"),u(g,"class","svelte-cuxyqu"),u(t,"class","svelte-cuxyqu"),u(e,"class","config-table svelte-cuxyqu")},m(te,ve){$(te,e,ve),r(e,t),r(t,n),r(n,s),r(n,o),r(o,i),r(i,a),r(t,c),H&&H.m(t,null),r(t,_),L&&L.m(t,null),r(t,p),j&&j.m(t,null),r(t,m),r(t,h),r(h,v),r(h,g),r(g,C),r(t,w),B&&B.m(t,null),r(t,S),K&&K.m(t,null),r(t,D),Y&&Y.m(t,null),r(t,E),Z&&Z.m(t,null),r(t,P),oe&&oe.m(t,null),r(t,z),x&&x.m(t,null),r(t,q),J&&J.m(t,null),r(t,A),W&&W.m(t,null),$(te,N,ve),re&&re.m(te,ve),$(te,G,ve),V&&V.m(te,ve),$(te,F,ve),O=!0},p(te,ve){var ae,se;(!O||ve[0]&16384)&&f!==(f=(te[65].source_type||"-")+"")&&U(a,f),te[65].git_url?H?H.p(te,ve):(H=Ar(te),H.c(),H.m(t,_)):H&&(H.d(1),H=null),te[65].git_branch?L?L.p(te,ve):(L=Or(te),L.c(),L.m(t,p)):L&&(L.d(1),L=null),te[65].image?j?j.p(te,ve):(j=Ir(te),j.c(),j.m(t,m)):j&&(j.d(1),j=null),(!O||ve[0]&16384)&&y!==(y=(te[65].port||"-")+"")&&U(C,y),te[65].container_port?B?B.p(te,ve):(B=Fr(te),B.c(),B.m(t,S)):B&&(B.d(1),B=null),te[65].host_port?K?K.p(te,ve):(K=Ur(te),K.c(),K.m(t,D)):K&&(K.d(1),K=null),te[65].snapshot_id?Y?Y.p(te,ve):(Y=Br(te),Y.c(),Y.m(t,E)):Y&&(Y.d(1),Y=null),te[65].region?Z?Z.p(te,ve):(Z=Hr(te),Z.c(),Z.m(t,P)):Z&&(Z.d(1),Z=null),te[65].size?oe?oe.p(te,ve):(oe=Gr(te),oe.c(),oe.m(t,z)):oe&&(oe.d(1),oe=null),(ae=te[65].server_ips)!=null&&ae.length?x?x.p(te,ve):(x=Vr(te),x.c(),x.m(t,q)):x&&(x.d(1),x=null),te[65].setup_domain?J||(J=Wr(),J.c(),J.m(t,A)):J&&(J.d(1),J=null),te[65].base_domain?W?W.p(te,ve):(W=Jr(te),W.c(),W.m(t,null)):W&&(W.d(1),W=null),ve[0]&16384&&(I=te[65].env_vars&&Object.keys(te[65].env_vars).length>0),I?re?re.p(te,ve):(re=Kr(te),re.c(),re.m(G.parentNode,G)):re&&(re.d(1),re=null),(se=te[65].tags)!=null&&se.length?V?(V.p(te,ve),ve[0]&16384&&R(V,1)):(V=Qr(te),V.c(),R(V,1),V.m(F.parentNode,F)):V&&(De(),M(V,1,1,()=>{V=null}),Ee())},i(te){O||(R(V),O=!0)},o(te){M(V),O=!1},d(te){te&&(k(e),k(N),k(G),k(F)),H&&H.d(),L&&L.d(),j&&j.d(),B&&B.d(),K&&K.d(),Y&&Y.d(),Z&&Z.d(),oe&&oe.d(),x&&x.d(),J&&J.d(),W&&W.d(),re&&re.d(te),V&&V.d(te)}}}function Ar(l){let e,t,n,s=l[65].git_url+"",o;return{c(){e=d("tr"),t=d("td"),t.textContent="Git URL",n=d("td"),o=T(s),u(t,"class","label svelte-cuxyqu"),u(n,"class","svelte-cuxyqu")},m(i,f){$(i,e,f),r(e,t),r(e,n),r(n,o)},p(i,f){f[0]&16384&&s!==(s=i[65].git_url+"")&&U(o,s)},d(i){i&&k(e)}}}function Or(l){let e,t,n,s=l[65].git_branch+"",o;return{c(){e=d("tr"),t=d("td"),t.textContent="Git Branch",n=d("td"),o=T(s),u(t,"class","label svelte-cuxyqu"),u(n,"class","svelte-cuxyqu")},m(i,f){$(i,e,f),r(e,t),r(e,n),r(n,o)},p(i,f){f[0]&16384&&s!==(s=i[65].git_branch+"")&&U(o,s)},d(i){i&&k(e)}}}function Ir(l){let e,t,n,s=l[65].image+"",o;return{c(){e=d("tr"),t=d("td"),t.textContent="Image",n=d("td"),o=T(s),u(t,"class","label svelte-cuxyqu"),u(n,"class","svelte-cuxyqu")},m(i,f){$(i,e,f),r(e,t),r(e,n),r(n,o)},p(i,f){f[0]&16384&&s!==(s=i[65].image+"")&&U(o,s)},d(i){i&&k(e)}}}function Fr(l){let e,t,n,s=l[65].container_port+"",o;return{c(){e=d("tr"),t=d("td"),t.textContent="Container Port",n=d("td"),o=T(s),u(t,"class","label svelte-cuxyqu"),u(n,"class","svelte-cuxyqu")},m(i,f){$(i,e,f),r(e,t),r(e,n),r(n,o)},p(i,f){f[0]&16384&&s!==(s=i[65].container_port+"")&&U(o,s)},d(i){i&&k(e)}}}function Ur(l){let e,t,n,s=l[65].host_port+"",o;return{c(){e=d("tr"),t=d("td"),t.textContent="Host Port",n=d("td"),o=T(s),u(t,"class","label svelte-cuxyqu"),u(n,"class","svelte-cuxyqu")},m(i,f){$(i,e,f),r(e,t),r(e,n),r(n,o)},p(i,f){f[0]&16384&&s!==(s=i[65].host_port+"")&&U(o,s)},d(i){i&&k(e)}}}function Br(l){let e,t,n,s=l[65].snapshot_id+"",o;return{c(){e=d("tr"),t=d("td"),t.textContent="Snapshot ID",n=d("td"),o=T(s),u(t,"class","label svelte-cuxyqu"),u(n,"class","svelte-cuxyqu")},m(i,f){$(i,e,f),r(e,t),r(e,n),r(n,o)},p(i,f){f[0]&16384&&s!==(s=i[65].snapshot_id+"")&&U(o,s)},d(i){i&&k(e)}}}function Hr(l){let e,t,n,s=l[65].region+"",o;return{c(){e=d("tr"),t=d("td"),t.textContent="Region",n=d("td"),o=T(s),u(t,"class","label svelte-cuxyqu"),u(n,"class","svelte-cuxyqu")},m(i,f){$(i,e,f),r(e,t),r(e,n),r(n,o)},p(i,f){f[0]&16384&&s!==(s=i[65].region+"")&&U(o,s)},d(i){i&&k(e)}}}function Gr(l){let e,t,n,s=l[65].size+"",o;return{c(){e=d("tr"),t=d("td"),t.textContent="Size",n=d("td"),o=T(s),u(t,"class","label svelte-cuxyqu"),u(n,"class","svelte-cuxyqu")},m(i,f){$(i,e,f),r(e,t),r(e,n),r(n,o)},p(i,f){f[0]&16384&&s!==(s=i[65].size+"")&&U(o,s)},d(i){i&&k(e)}}}function Vr(l){let e,t,n,s=l[65].server_ips.join(", ")+"",o;return{c(){e=d("tr"),t=d("td"),t.textContent="Servers",n=d("td"),o=T(s),u(t,"class","label svelte-cuxyqu"),u(n,"class","svelte-cuxyqu")},m(i,f){$(i,e,f),r(e,t),r(e,n),r(n,o)},p(i,f){f[0]&16384&&s!==(s=i[65].server_ips.join(", ")+"")&&U(o,s)},d(i){i&&k(e)}}}function Wr(l){let e;return{c(){e=d("tr"),e.innerHTML='<td class="label svelte-cuxyqu">Setup Domain</td><td class="svelte-cuxyqu">Yes</td>'},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function Jr(l){let e,t,n,s=l[65].base_domain+"",o;return{c(){e=d("tr"),t=d("td"),t.textContent="Base Domain",n=d("td"),o=T(s),u(t,"class","label svelte-cuxyqu"),u(n,"class","svelte-cuxyqu")},m(i,f){$(i,e,f),r(e,t),r(e,n),r(n,o)},p(i,f){f[0]&16384&&s!==(s=i[65].base_domain+"")&&U(o,s)},d(i){i&&k(e)}}}function Kr(l){let e,t,n,s,o=pe(Object.entries(l[65].env_vars)),i=[];for(let f=0;f<o.length;f+=1)i[f]=Yr(wr(l,o,f));return{c(){e=d("div"),t=d("div"),t.textContent="Environment Variables",n=b(),s=d("div");for(let f=0;f<i.length;f+=1)i[f].c();u(t,"class","section-title svelte-cuxyqu"),u(s,"class","env-list svelte-cuxyqu"),u(e,"class","env-section svelte-cuxyqu")},m(f,a){$(f,e,a),r(e,t),r(e,n),r(e,s);for(let c=0;c<i.length;c+=1)i[c]&&i[c].m(s,null)},p(f,a){if(a[0]&16384){o=pe(Object.entries(f[65].env_vars));let c;for(c=0;c<o.length;c+=1){const _=wr(f,o,c);i[c]?i[c].p(_,a):(i[c]=Yr(_),i[c].c(),i[c].m(s,null))}for(;c<i.length;c+=1)i[c].d(1);i.length=o.length}},d(f){f&&k(e),Me(i,f)}}}function Yr(l){let e,t=l[69]+"",n,s,o=(l[70].length>20?l[70].substring(0,20)+"...":l[70])+"",i;return{c(){e=d("div"),n=T(t),s=T("="),i=T(o),u(e,"class","env-item svelte-cuxyqu")},m(f,a){$(f,e,a),r(e,n),r(e,s),r(e,i)},p(f,a){a[0]&16384&&t!==(t=f[69]+"")&&U(n,t),a[0]&16384&&o!==(o=(f[70].length>20?f[70].substring(0,20)+"...":f[70])+"")&&U(i,o)},d(f){f&&k(e)}}}function Qr(l){let e,t,n,s,o,i=pe(l[65].tags),f=[];for(let c=0;c<i.length;c+=1)f[c]=Zr(kr(l,i,c));const a=c=>M(f[c],1,1,()=>{f[c]=null});return{c(){e=d("div"),t=d("div"),t.textContent="Tags",n=b(),s=d("div");for(let c=0;c<f.length;c+=1)f[c].c();u(t,"class","section-title svelte-cuxyqu"),u(s,"class","tags-list svelte-cuxyqu"),u(e,"class","tags-section svelte-cuxyqu")},m(c,_){$(c,e,_),r(e,t),r(e,n),r(e,s);for(let p=0;p<f.length;p+=1)f[p]&&f[p].m(s,null);o=!0},p(c,_){if(_[0]&16384){i=pe(c[65].tags);let p;for(p=0;p<i.length;p+=1){const m=kr(c,i,p);f[p]?(f[p].p(m,_),R(f[p],1)):(f[p]=Zr(m),f[p].c(),R(f[p],1),f[p].m(s,null))}for(De(),p=i.length;p<f.length;p+=1)a(p);Ee()}},i(c){if(!o){for(let _=0;_<i.length;_+=1)R(f[_]);o=!0}},o(c){f=f.filter(Boolean);for(let _=0;_<f.length;_+=1)M(f[_]);o=!1},d(c){c&&k(e),Me(f,c)}}}function ip(l){let e=l[66]+"",t;return{c(){t=T(e)},m(n,s){$(n,t,s)},p(n,s){s[0]&16384&&e!==(e=n[66]+"")&&U(t,e)},d(n){n&&k(t)}}}function Zr(l){let e,t;return e=new Ze({props:{$$slots:{default:[ip]},$$scope:{ctx:l}}}),{c(){ce(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const o={};s[0]&16384|s[2]&1048576&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(R(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){ue(e,n)}}}function rp(l){let e,t,n=l[14]&&jr(l);return{c(){n&&n.c(),e=Fe()},m(s,o){n&&n.m(s,o),$(s,e,o),t=!0},p(s,o){s[14]?n?(n.p(s,o),o[0]&16384&&R(n,1)):(n=jr(s),n.c(),R(n,1),n.m(e.parentNode,e)):n&&(De(),M(n,1,1,()=>{n=null}),Ee())},i(s){t||(R(n),t=!0)},o(s){M(n),t=!1},d(s){s&&k(e),n&&n.d(s)}}}function ap(l){let e;return{c(){e=T("🚀 Redeploy with this config")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function fp(l){let e;return{c(){e=T("Close")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function up(l){let e,t,n,s,o;return t=new Ue({props:{variant:"primary",$$slots:{default:[ap]},$$scope:{ctx:l}}}),t.$on("click",l[22]),s=new Ue({props:{variant:"ghost",$$slots:{default:[fp]},$$scope:{ctx:l}}}),s.$on("click",l[42]),{c(){e=d("div"),ce(t.$$.fragment),n=b(),ce(s.$$.fragment),u(e,"slot","footer")},m(i,f){$(i,e,f),fe(t,e,null),r(e,n),fe(s,e,null),o=!0},p(i,f){const a={};f[2]&1048576&&(a.$$scope={dirty:f,ctx:i}),t.$set(a);const c={};f[2]&1048576&&(c.$$scope={dirty:f,ctx:i}),s.$set(c)},i(i){o||(R(t.$$.fragment,i),R(s.$$.fragment,i),o=!0)},o(i){M(t.$$.fragment,i),M(s.$$.fragment,i),o=!1},d(i){i&&k(e),ue(t),ue(s)}}}function Xr(l){let e,t,n,s=(l[16].service||l[16].name)+"",o,i,f,a=l[16].environment+"",c,_,p=tl(l[16].deployed_at)+"",m,h,v,g,y,C,w=l[16].version&&xr(l);g=new Ze({props:{variant:Ml(il(l[16])),$$slots:{default:[_p]},$$scope:{ctx:l}}});function S(P,z){return P[18]?mp:P[17].length===0?pp:dp}let D=S(l),E=D(l);return{c(){e=d("div"),t=d("div"),n=d("span"),o=T(s),i=b(),f=d("span"),c=T(a),_=T(" • "),m=T(p),h=b(),w&&w.c(),v=b(),ce(g.$$.fragment),y=b(),E.c(),u(n,"class","service-name svelte-cuxyqu"),u(f,"class","meta svelte-cuxyqu"),u(t,"class","logs-header-info svelte-cuxyqu"),u(e,"class","logs-modal-content svelte-cuxyqu")},m(P,z){$(P,e,z),r(e,t),r(t,n),r(n,o),r(t,i),r(t,f),r(f,c),r(f,_),r(f,m),r(t,h),w&&w.m(t,null),r(t,v),fe(g,t,null),r(e,y),E.m(e,null),C=!0},p(P,z){(!C||z[0]&65536)&&s!==(s=(P[16].service||P[16].name)+"")&&U(o,s),(!C||z[0]&65536)&&a!==(a=P[16].environment+"")&&U(c,a),(!C||z[0]&65536)&&p!==(p=tl(P[16].deployed_at)+"")&&U(m,p),P[16].version?w?(w.p(P,z),z[0]&65536&&R(w,1)):(w=xr(P),w.c(),R(w,1),w.m(t,v)):w&&(De(),M(w,1,1,()=>{w=null}),Ee());const q={};z[0]&65536&&(q.variant=Ml(il(P[16]))),z[0]&65536|z[2]&1048576&&(q.$$scope={dirty:z,ctx:P}),g.$set(q),D===(D=S(P))&&E?E.p(P,z):(E.d(1),E=D(P),E&&(E.c(),E.m(e,null)))},i(P){C||(R(w),R(g.$$.fragment,P),C=!0)},o(P){M(w),M(g.$$.fragment,P),C=!1},d(P){P&&k(e),w&&w.d(),ue(g),E.d()}}}function xr(l){let e,t;return e=new Ze({props:{variant:"purple",$$slots:{default:[cp]},$$scope:{ctx:l}}}),{c(){ce(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const o={};s[0]&65536|s[2]&1048576&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(R(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){ue(e,n)}}}function cp(l){let e,t=l[16].version+"",n;return{c(){e=T("v"),n=T(t)},m(s,o){$(s,e,o),$(s,n,o)},p(s,o){o[0]&65536&&t!==(t=s[16].version+"")&&U(n,t)},d(s){s&&(k(e),k(n))}}}function _p(l){let e=il(l[16])+"",t;return{c(){t=T(e)},m(n,s){$(n,t,s)},p(n,s){s[0]&65536&&e!==(e=il(n[16])+"")&&U(t,e)},d(n){n&&k(t)}}}function dp(l){let e,t=pe(l[17]),n=[];for(let s=0;s<t.length;s+=1)n[s]=ea(br(l,t,s));return{c(){e=d("div");for(let s=0;s<n.length;s+=1)n[s].c();u(e,"class","logs-container svelte-cuxyqu")},m(s,o){$(s,e,o);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(e,null)},p(s,o){if(o[0]&131072){t=pe(s[17]);let i;for(i=0;i<t.length;i+=1){const f=br(s,t,i);n[i]?n[i].p(f,o):(n[i]=ea(f),n[i].c(),n[i].m(e,null))}for(;i<n.length;i+=1)n[i].d(1);n.length=t.length}},d(s){s&&k(e),Me(n,s)}}}function pp(l){let e;return{c(){e=d("div"),e.textContent="No logs available for this deployment",u(e,"class","no-logs svelte-cuxyqu")},m(t,n){$(t,e,n)},p:ge,d(t){t&&k(e)}}}function mp(l){let e;return{c(){e=d("div"),e.textContent="Loading logs...",u(e,"class","logs-loading svelte-cuxyqu")},m(t,n){$(t,e,n)},p:ge,d(t){t&&k(e)}}}function ea(l){let e,t,n=(l[62].timestamp?new Date(l[62].timestamp).toLocaleTimeString():"")+"",s,o,i,f=l[62].message+"",a,c;return{c(){e=d("div"),t=d("span"),s=T(n),o=b(),i=d("span"),a=T(f),c=b(),u(t,"class","log-time svelte-cuxyqu"),u(i,"class","log-message svelte-cuxyqu"),u(e,"class","log-line svelte-cuxyqu")},m(_,p){$(_,e,p),r(e,t),r(t,s),r(e,o),r(e,i),r(i,a),r(e,c)},p(_,p){p[0]&131072&&n!==(n=(_[62].timestamp?new Date(_[62].timestamp).toLocaleTimeString():"")+"")&&U(s,n),p[0]&131072&&f!==(f=_[62].message+"")&&U(a,f)},d(_){_&&k(e)}}}function vp(l){let e,t,n=l[16]&&Xr(l);return{c(){n&&n.c(),e=Fe()},m(s,o){n&&n.m(s,o),$(s,e,o),t=!0},p(s,o){s[16]?n?(n.p(s,o),o[0]&65536&&R(n,1)):(n=Xr(s),n.c(),R(n,1),n.m(e.parentNode,e)):n&&(De(),M(n,1,1,()=>{n=null}),Ee())},i(s){t||(R(n),t=!0)},o(s){M(n),t=!1},d(s){s&&k(e),n&&n.d(s)}}}function hp(l){let e;return{c(){e=T("Close")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function gp(l){let e,t,n;return t=new Ue({props:{variant:"ghost",$$slots:{default:[hp]},$$scope:{ctx:l}}}),t.$on("click",l[45]),{c(){e=d("div"),ce(t.$$.fragment),u(e,"slot","footer")},m(s,o){$(s,e,o),fe(t,e,null),n=!0},p(s,o){const i={};o[2]&1048576&&(i.$$scope={dirty:o,ctx:s}),t.$set(i)},i(s){n||(R(t.$$.fragment,s),n=!0)},o(s){M(t.$$.fragment,s),n=!1},d(s){s&&k(e),ue(t)}}}function bp(l){let e,t,n,s=l[10].length+"",o,i,f,a,c,_,p=pe(l[10]),m=[];for(let g=0;g<p.length;g+=1)m[g]=ta(hr(l,p,g));const h=g=>M(m[g],1,1,()=>{m[g]=null});let v=l[11].length>0&&la(l);return{c(){e=d("div"),t=d("p"),n=d("strong"),o=T(s),i=T(" server(s) from the original deployment are unavailable:"),f=b(),a=d("div");for(let g=0;g<m.length;g+=1)m[g].c();c=b(),v&&v.c(),u(t,"class","svelte-cuxyqu"),u(a,"class","confirm-server-list unavailable svelte-cuxyqu"),u(e,"class","rollback-confirm-content svelte-cuxyqu")},m(g,y){$(g,e,y),r(e,t),r(t,n),r(n,o),r(t,i),r(e,f),r(e,a);for(let C=0;C<m.length;C+=1)m[C]&&m[C].m(a,null);r(e,c),v&&v.m(e,null),_=!0},p(g,y){if((!_||y[0]&1024)&&s!==(s=g[10].length+"")&&U(o,s),y[0]&1024){p=pe(g[10]);let C;for(C=0;C<p.length;C+=1){const w=hr(g,p,C);m[C]?(m[C].p(w,y),R(m[C],1)):(m[C]=ta(w),m[C].c(),R(m[C],1),m[C].m(a,null))}for(De(),C=p.length;C<m.length;C+=1)h(C);Ee()}g[11].length>0?v?(v.p(g,y),y[0]&2048&&R(v,1)):(v=la(g),v.c(),R(v,1),v.m(e,null)):v&&(De(),M(v,1,1,()=>{v=null}),Ee())},i(g){if(!_){for(let y=0;y<p.length;y+=1)R(m[y]);R(v),_=!0}},o(g){m=m.filter(Boolean);for(let y=0;y<m.length;y+=1)M(m[y]);M(v),_=!1},d(g){g&&k(e),Me(m,g),v&&v.d()}}}function kp(l){let e,t,n,s,o=l[11].length+"",i,f,a,c=l[11].length+l[9].length+"",_,p,m,h,v,g,y=pe(l[9]),C=[];for(let w=0;w<y.length;w+=1)C[w]=sa(gr(l,y,w));return{c(){e=d("div"),t=d("p"),n=T("Rolling back will restore to "),s=d("strong"),i=T(o),f=T(` servers.
        Service currently runs on `),a=d("strong"),_=T(c),p=T(" servers."),m=b(),h=d("p"),h.textContent="Stop containers on the following servers?",v=b(),g=d("div");for(let w=0;w<C.length;w+=1)C[w].c();u(t,"class","svelte-cuxyqu"),u(h,"class","svelte-cuxyqu"),u(g,"class","confirm-server-list svelte-cuxyqu"),u(e,"class","rollback-confirm-content svelte-cuxyqu")},m(w,S){$(w,e,S),r(e,t),r(t,n),r(t,s),r(s,i),r(t,f),r(t,a),r(a,_),r(t,p),r(e,m),r(e,h),r(e,v),r(e,g);for(let D=0;D<C.length;D+=1)C[D]&&C[D].m(g,null)},p(w,S){if(S[0]&2048&&o!==(o=w[11].length+"")&&U(i,o),S[0]&2560&&c!==(c=w[11].length+w[9].length+"")&&U(_,c),S[0]&512){y=pe(w[9]);let D;for(D=0;D<y.length;D+=1){const E=gr(w,y,D);C[D]?C[D].p(E,S):(C[D]=sa(E),C[D].c(),C[D].m(g,null))}for(;D<C.length;D+=1)C[D].d(1);C.length=y.length}},i:ge,o:ge,d(w){w&&k(e),Me(C,w)}}}function wp(l){let e;return{c(){e=T("offline")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function ta(l){let e,t,n=(l[55].name||l[55].ip)+"",s,o,i,f=l[55].ip+"",a,c,_,p,m;return _=new Ze({props:{variant:"error",$$slots:{default:[wp]},$$scope:{ctx:l}}}),{c(){e=d("div"),t=d("span"),s=T(n),o=b(),i=d("span"),a=T(f),c=b(),ce(_.$$.fragment),p=b(),u(t,"class","server-name svelte-cuxyqu"),u(i,"class","server-ip svelte-cuxyqu"),u(e,"class","confirm-server-item svelte-cuxyqu")},m(h,v){$(h,e,v),r(e,t),r(t,s),r(e,o),r(e,i),r(i,a),r(e,c),fe(_,e,null),r(e,p),m=!0},p(h,v){(!m||v[0]&1024)&&n!==(n=(h[55].name||h[55].ip)+"")&&U(s,n),(!m||v[0]&1024)&&f!==(f=h[55].ip+"")&&U(a,f);const g={};v[2]&1048576&&(g.$$scope={dirty:v,ctx:h}),_.$set(g)},i(h){m||(R(_.$$.fragment,h),m=!0)},o(h){M(_.$$.fragment,h),m=!1},d(h){h&&k(e),ue(_)}}}function la(l){let e,t,n=l[11].length+"",s,o,i,f,a,c=pe(l[11]),_=[];for(let m=0;m<c.length;m+=1)_[m]=na(vr(l,c,m));const p=m=>M(_[m],1,1,()=>{_[m]=null});return{c(){e=d("p"),t=T("Available servers ("),s=T(n),o=T("):"),i=b(),f=d("div");for(let m=0;m<_.length;m+=1)_[m].c();u(e,"class","svelte-cuxyqu"),u(f,"class","confirm-server-list available svelte-cuxyqu")},m(m,h){$(m,e,h),r(e,t),r(e,s),r(e,o),$(m,i,h),$(m,f,h);for(let v=0;v<_.length;v+=1)_[v]&&_[v].m(f,null);a=!0},p(m,h){if((!a||h[0]&2048)&&n!==(n=m[11].length+"")&&U(s,n),h[0]&2048){c=pe(m[11]);let v;for(v=0;v<c.length;v+=1){const g=vr(m,c,v);_[v]?(_[v].p(g,h),R(_[v],1)):(_[v]=na(g),_[v].c(),R(_[v],1),_[v].m(f,null))}for(De(),v=c.length;v<_.length;v+=1)p(v);Ee()}},i(m){if(!a){for(let h=0;h<c.length;h+=1)R(_[h]);a=!0}},o(m){_=_.filter(Boolean);for(let h=0;h<_.length;h+=1)M(_[h]);a=!1},d(m){m&&(k(e),k(i),k(f)),Me(_,m)}}}function $p(l){let e;return{c(){e=T("online")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function na(l){let e,t,n=(l[55].name||l[55].ip)+"",s,o,i,f=l[55].ip+"",a,c,_,p,m;return _=new Ze({props:{variant:"success",$$slots:{default:[$p]},$$scope:{ctx:l}}}),{c(){e=d("div"),t=d("span"),s=T(n),o=b(),i=d("span"),a=T(f),c=b(),ce(_.$$.fragment),p=b(),u(t,"class","server-name svelte-cuxyqu"),u(i,"class","server-ip svelte-cuxyqu"),u(e,"class","confirm-server-item svelte-cuxyqu")},m(h,v){$(h,e,v),r(e,t),r(t,s),r(e,o),r(e,i),r(i,a),r(e,c),fe(_,e,null),r(e,p),m=!0},p(h,v){(!m||v[0]&2048)&&n!==(n=(h[55].name||h[55].ip)+"")&&U(s,n),(!m||v[0]&2048)&&f!==(f=h[55].ip+"")&&U(a,f);const g={};v[2]&1048576&&(g.$$scope={dirty:v,ctx:h}),_.$set(g)},i(h){m||(R(_.$$.fragment,h),m=!0)},o(h){M(_.$$.fragment,h),m=!1},d(h){h&&k(e),ue(_)}}}function sa(l){let e,t,n=(l[55].name||l[55].ip)+"",s,o,i,f=l[55].ip+"",a,c;return{c(){e=d("div"),t=d("span"),s=T(n),o=b(),i=d("span"),a=T(f),c=b(),u(t,"class","server-name svelte-cuxyqu"),u(i,"class","server-ip svelte-cuxyqu"),u(e,"class","confirm-server-item svelte-cuxyqu")},m(_,p){$(_,e,p),r(e,t),r(t,s),r(e,o),r(e,i),r(i,a),r(e,c)},p(_,p){p[0]&512&&n!==(n=(_[55].name||_[55].ip)+"")&&U(s,n),p[0]&512&&f!==(f=_[55].ip+"")&&U(a,f)},d(_){_&&k(e)}}}function Cp(l){let e,t,n,s;const o=[kp,bp],i=[];function f(a,c){return a[8]==="cleanup"?0:a[8]==="missing"?1:-1}return~(e=f(l))&&(t=i[e]=o[e](l)),{c(){t&&t.c(),n=Fe()},m(a,c){~e&&i[e].m(a,c),$(a,n,c),s=!0},p(a,c){let _=e;e=f(a),e===_?~e&&i[e].p(a,c):(t&&(De(),M(i[_],1,1,()=>{i[_]=null}),Ee()),~e?(t=i[e],t?t.p(a,c):(t=i[e]=o[e](a),t.c()),R(t,1),t.m(n.parentNode,n)):t=null)},i(a){s||(R(t),s=!0)},o(a){M(t),s=!1},d(a){a&&k(n),~e&&i[e].d(a)}}}function yp(l){let e,t;return e=new Ue({props:{variant:"primary",$$slots:{default:[Tp]},$$scope:{ctx:l}}}),e.$on("click",l[27]),{c(){ce(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const o={};s[2]&1048576&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(R(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){ue(e,n)}}}function Sp(l){let e,t;return e=new Ue({props:{variant:"primary",$$slots:{default:[zp]},$$scope:{ctx:l}}}),e.$on("click",l[26]),{c(){ce(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const o={};s[2]&1048576&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(R(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){ue(e,n)}}}function Tp(l){let e;return{c(){e=T("Proceed with available only")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function zp(l){let e;return{c(){e=T("Proceed")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function Dp(l){let e;return{c(){e=T("Cancel")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function Ep(l){let e,t,n,s,o,i;const f=[Sp,yp],a=[];function c(_,p){return _[8]==="cleanup"?0:_[8]==="missing"&&_[11].length>0?1:-1}return~(t=c(l))&&(n=a[t]=f[t](l)),o=new Ue({props:{variant:"ghost",$$slots:{default:[Dp]},$$scope:{ctx:l}}}),o.$on("click",l[48]),{c(){e=d("div"),n&&n.c(),s=b(),ce(o.$$.fragment),u(e,"slot","footer")},m(_,p){$(_,e,p),~t&&a[t].m(e,null),r(e,s),fe(o,e,null),i=!0},p(_,p){let m=t;t=c(_),t===m?~t&&a[t].p(_,p):(n&&(De(),M(a[m],1,1,()=>{a[m]=null}),Ee()),~t?(n=a[t],n?n.p(_,p):(n=a[t]=f[t](_),n.c()),R(n,1),n.m(e,s)):n=null);const h={};p[2]&1048576&&(h.$$scope={dirty:p,ctx:_}),o.$set(h)},i(_){i||(R(n),R(o.$$.fragment,_),i=!0)},o(_){M(n),M(o.$$.fragment,_),i=!1},d(_){_&&k(e),~t&&a[t].d(),ue(o)}}}function qp(l){let e,t,n,s,o,i,f,a,c,_,p,m,h,v,g,y,C,w,S,D,E,P,z=l[20]&&Sr(l);f=new Ue({props:{variant:"ghost",$$slots:{default:[Ad]},$$scope:{ctx:l}}}),f.$on("click",l[33]),c=new ft({props:{padding:!1,$$slots:{default:[Wd]},$$scope:{ctx:l}}});function q(L){l[40](L)}let A={title:"⏪ Rollback",width:"600px",$$slots:{footer:[np],default:[Xd]},$$scope:{ctx:l}};l[1]!==void 0&&(A.open=l[1]),p=new ol({props:A}),It.push(()=>pl(p,"open",q)),p.$on("close",l[41]);function N(L){l[43](L)}let I={title:"⚙️ Deployment Config",width:"500px",$$slots:{footer:[up],default:[rp]},$$scope:{ctx:l}};l[13]!==void 0&&(I.open=l[13]),v=new ol({props:I}),It.push(()=>pl(v,"open",N)),v.$on("close",l[44]);function G(L){l[46](L)}let F={title:"📋 Deployment Logs",width:"700px",$$slots:{footer:[gp],default:[vp]},$$scope:{ctx:l}};l[15]!==void 0&&(F.open=l[15]),C=new ol({props:F}),It.push(()=>pl(C,"open",G)),C.$on("close",l[47]);function O(L){l[49](L)}let H={title:l[8]==="cleanup"?"⚠️ Stop Orphan Containers":"⚠️ Servers Unavailable",width:"500px",$$slots:{footer:[Ep],default:[Cp]},$$scope:{ctx:l}};return l[7]!==void 0&&(H.open=l[7]),D=new ol({props:H}),It.push(()=>pl(D,"open",O)),D.$on("close",l[50]),{c(){e=d("div"),t=d("div"),n=d("h1"),n.textContent="Deployment History",s=b(),o=d("div"),z&&z.c(),i=b(),ce(f.$$.fragment),a=b(),ce(c.$$.fragment),_=b(),ce(p.$$.fragment),h=b(),ce(v.$$.fragment),y=b(),ce(C.$$.fragment),S=b(),ce(D.$$.fragment),u(n,"class","svelte-cuxyqu"),u(o,"class","header-actions svelte-cuxyqu"),u(t,"class","page-header svelte-cuxyqu"),u(e,"class","deployments-page svelte-cuxyqu")},m(L,j){$(L,e,j),r(e,t),r(t,n),r(t,s),r(t,o),z&&z.m(o,null),r(o,i),fe(f,o,null),r(e,a),fe(c,e,null),$(L,_,j),fe(p,L,j),$(L,h,j),fe(v,L,j),$(L,y,j),fe(C,L,j),$(L,S,j),fe(D,L,j),P=!0},p(L,j){L[20]?z?z.p(L,j):(z=Sr(L),z.c(),z.m(o,i)):z&&(z.d(1),z=null);const B={};j[2]&1048576&&(B.$$scope={dirty:j,ctx:L}),f.$set(B);const K={};j[0]&524289|j[2]&1048576&&(K.$$scope={dirty:j,ctx:L}),c.$set(K);const Y={};j[0]&126|j[2]&1048576&&(Y.$$scope={dirty:j,ctx:L}),!m&&j[0]&2&&(m=!0,Y.open=L[1],dl(()=>m=!1)),p.$set(Y);const Z={};j[0]&24576|j[2]&1048576&&(Z.$$scope={dirty:j,ctx:L}),!g&&j[0]&8192&&(g=!0,Z.open=L[13],dl(()=>g=!1)),v.$set(Z);const oe={};j[0]&491520|j[2]&1048576&&(oe.$$scope={dirty:j,ctx:L}),!w&&j[0]&32768&&(w=!0,oe.open=L[15],dl(()=>w=!1)),C.$set(oe);const x={};j[0]&256&&(x.title=L[8]==="cleanup"?"⚠️ Stop Orphan Containers":"⚠️ Servers Unavailable"),j[0]&8064|j[2]&1048576&&(x.$$scope={dirty:j,ctx:L}),!E&&j[0]&128&&(E=!0,x.open=L[7],dl(()=>E=!1)),D.$set(x)},i(L){P||(R(f.$$.fragment,L),R(c.$$.fragment,L),R(p.$$.fragment,L),R(v.$$.fragment,L),R(C.$$.fragment,L),R(D.$$.fragment,L),P=!0)},o(L){M(f.$$.fragment,L),M(c.$$.fragment,L),M(p.$$.fragment,L),M(v.$$.fragment,L),M(C.$$.fragment,L),M(D.$$.fragment,L),P=!1},d(L){L&&(k(e),k(_),k(h),k(y),k(S)),z&&z.d(),ue(f),ue(c),ue(p,L),ue(v,L),ue(C,L),ue(D,L)}}}function oa(l){return l?l.toLocaleTimeString():""}function Lp(l,e){return l?l.filter(t=>!(e.project&&t.project!==e.project||e.env&&t.environment!==e.env)):[]}function Pp(l){const e=[...l],t=new Set;for(const n of e){const s=`${n.project}/${n.service||n.name}/${n.environment}`;n.status==="success"&&n.can_rollback&&!t.has(s)?(n.is_current_active=!0,t.add(s)):n.is_current_active=!1}return e}function tl(l){return l?new Date(l).toLocaleString():"-"}function Ml(l){switch(l){case"success":case"active":return"success";case"failed":case"error":return"danger";case"pending":case"deploying":return"warning";case"superseded":return"secondary";default:return"info"}}function il(l){const e=l.status||"unknown";return e==="rolled_back"?l.is_rollback?"failed":"superseded":e}function Rp(l,e,t){let n,s,o,i;dt(l,ql,Se=>t(31,o=Se)),dt(l,bl,Se=>t(32,i=Se));let f=!1,a=!1,c=null,_=[],p=null,m=!1,h=[],v=!1,g="",y=[],C=[],w=[],S=null,D=!1,E=null,P=!1,z=null,q=[],A=!1,N=[],I=[];function G(Se){t(14,E=Se),t(13,D=!0)}function F(){if(!(E!=null&&E.config_snapshot))return;const Se=new CustomEvent("redeploy",{detail:{deployment:E,config:E.config_snapshot},bubbles:!0});document.dispatchEvent(Se),t(13,D=!1),$e.info("Config loaded - switch to Deploy tab")}async function O(Se){t(16,z=Se),t(15,P=!0),t(18,A=!0),t(17,q=[]);try{const Ae=await He("GET",`/infra/deployments/history/${Se.id}/logs`);t(17,q=Ae.logs||[])}catch(Ae){$e.error("Failed to load logs: "+(Ae.message||Ae))}finally{t(18,A=!1)}}async function H(Se){t(2,c=Se);try{const Ae=new URLSearchParams({project:Se.project||"",environment:Se.environment||"",service_name:Se.service_name||Se.service||""}),me=await He("GET",`/infra/deployments/rollback/preview?${Ae}`);t(3,_=(me.recent_deployments||[]).filter(Le=>Le.id!==Se.id&&Le.status==="success"))}catch{t(3,_=[])}t(1,a=!0)}async function L(){if(!c||!p){$e.error("Select a deployment to rollback to");return}const Se=_.find(Re=>Re.id===p);if(!Se){$e.error("Target deployment not found");return}const Ae=c.project||"",me=c.environment||"",Le=c.service_name||c.service||"";try{const Re=new URLSearchParams({project:Ae,environment:me,service_name:Le}),Pe=await He("GET",`/infra/services/state?${Re}`),Be=Se.server_ips||[],st=(Pe.server_ips||[]).filter(Je=>!Be.includes(Je)),ot=(Pe.servers||[]).filter(Je=>st.includes(Je.ip));if(Be.length>0){const Je=await He("POST",`/infra/services/check-servers?do_token=${Ft()}&server_ips=${Be.join(",")}`,null);if(t(10,C=Je.unavailable||[]),t(11,w=Je.available||[]),C.length>0){t(8,g="missing"),t(12,S=Se),t(7,v=!0);return}}if(ot.length>0){t(9,y=ot),t(8,g="cleanup"),t(12,S=Se),t(7,v=!0);return}}catch(Re){console.log("Rollback pre-check:",Re.message||Re)}await Z()}async function j(){if(t(7,v=!1),g==="cleanup"&&y.length>0){const Se=`${c.project}_${c.service||c.service_name}_${c.environment}`.replace(/[^a-zA-Z0-9_]/g,"_"),Ae=y.map(me=>me.ip);try{const me=await He("POST",`/infra/services/cleanup?do_token=${Ft()}`,{server_ips:Ae,container_name:Se});t(6,h=[...h,{message:`Cleanup: ${me.cleaned} stopped`,type:"info",time:new Date}])}catch(me){t(6,h=[...h,{message:`Cleanup warning: ${me.message}`,type:"warning",time:new Date}])}}t(9,y=[]),t(10,C=[]),t(12,S=null),await Z()}let B=!1,K=[];async function Y(){t(7,v=!1),B=!0,K=w.map(Se=>Se.ip),t(10,C=[]),t(12,S=null),await Z()}async function Z(){t(6,h=[]),t(5,m=!0);const Se=(Ae,me="info")=>{t(6,h=[...h,{message:Ae,type:me,time:new Date}])};try{const Ae=new URLSearchParams({project:c.project||"",environment:c.environment||"",service_name:c.service_name||c.service||""}).toString();Se("Starting rollback...");let me=!1,Le="";const Re={deployment_id:p};if(B&&K.length>0&&(Re.server_ips=K,Se(`Partial rollback to ${K.length} available server(s)`)),await en("POST",`/infra/deployments/rollback?${Ae}`,Re,Pe=>{Pe.type==="progress"||Pe.type==="start"?Se(Pe.message,"info"):Pe.type==="server_complete"?Se(`✅ ${Pe.ip}: Success`,"success"):Pe.type==="error"?(Se(`❌ ${Pe.message||Pe.error}`,"error"),Le=Pe.message||Pe.error||"Unknown error"):Pe.type==="complete"&&(me=Pe.success,me?Se(`✅ ${Pe.message}`,"success"):(Le=Pe.message||"Rollback failed",Se(`❌ ${Le}`,"error")))}),me)$e.success("Rollback completed successfully"),await oe();else throw new Error(Le||"Rollback failed")}catch(Ae){Se(`❌ Error: ${Ae.message||String(Ae)}`,"error"),$e.error("Rollback failed: "+(Ae.message||String(Ae)))}finally{t(5,m=!1),B=!1,K=[]}}function oe(){bl.refresh()}function x(){bl.refresh()}const J=[[]],W=()=>bl.refresh(),re=Se=>G(Se),V=Se=>O(Se),ie=Se=>H(Se),_e=()=>{t(1,a=!1),t(6,h=[])};function te(){p=this.__value,t(4,p)}function ve(Se){a=Se,t(1,a)}const ae=()=>t(1,a=!1),se=()=>t(13,D=!1);function ee(Se){D=Se,t(13,D)}const Q=()=>t(13,D=!1),be=()=>t(15,P=!1);function we(Se){P=Se,t(15,P)}const Ge=()=>t(15,P=!1),nt=()=>{t(7,v=!1),t(12,S=null)};function vt(Se){v=Se,t(7,v)}const qe=()=>{t(7,v=!1),t(12,S=null)};return l.$$.update=()=>{l.$$.dirty[1]&2&&t(30,n=i||{loading:!1}),l.$$.dirty[0]&1073741824&&t(0,f=n.loading),l.$$.dirty[0]&1073741824&&t(20,s=n.lastFetched),l.$$.dirty[0]&1073741824&&n.data&&t(29,N=Pp(n.data)),l.$$.dirty[0]&536870912|l.$$.dirty[1]&1&&t(19,I=Lp(N,o))},[f,a,c,_,p,m,h,v,g,y,C,w,S,D,E,P,z,q,A,I,s,G,F,O,H,L,j,Y,x,N,n,o,i,W,re,V,ie,_e,te,J,ve,ae,se,ee,Q,be,we,Ge,nt,vt,qe]}class Np extends Ct{constructor(e){super(),$t(this,e,Rp,qp,kt,{refresh:28},null,[-1,-1,-1])}get refresh(){return this.$$.ctx[28]}}function ia(l,e,t){var o,i,f;const n=l.slice();n[33]=e[t];const s=n[33].ip||((f=(i=(o=n[33].networks)==null?void 0:o.v4)==null?void 0:i[0])==null?void 0:f.ip_address);return n[34]=s,n}function ra(l,e,t){const n=l.slice();return n[37]=e[t],n}function aa(l,e,t){const n=l.slice();return n[40]=e[t],n}function fa(l,e,t){const n=l.slice();return n[37]=e[t],n}function ua(l,e,t){const n=l.slice();return n[40]=e[t],n}function ca(l){let e,t=l[40].label+"",n;return{c(){e=d("option"),n=T(t),e.__value=l[40].value,le(e,e.__value)},m(s,o){$(s,e,o),r(e,n)},p:ge,d(s){s&&k(e)}}}function _a(l){let e,t=l[37].charAt(0).toUpperCase()+l[37].slice(1)+"",n;return{c(){e=d("option"),n=T(t),e.__value=l[37],le(e,e.__value)},m(s,o){$(s,e,o),r(e,n)},p:ge,d(s){s&&k(e)}}}function Mp(l){let e;return{c(){e=T("🔍 Get Credentials")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function jp(l){let e;return{c(){e=T("Looking up...")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function Ap(l){let e;function t(o,i){return o[11]?jp:Mp}let n=t(l),s=n(l);return{c(){s.c(),e=Fe()},m(o,i){s.m(o,i),$(o,e,i)},p(o,i){n!==(n=t(o))&&(s.d(1),s=n(o),s&&(s.c(),s.m(e.parentNode,e)))},d(o){o&&k(e),s.d(o)}}}function da(l){let e,t,n,s,o,i=l[10].service+"",f,a,c,_,p,m,h=l[10].env_var_name+"",v,g,y,C,w=l[10].connection_url+"",S,D,E,P,z,q,A,N,I,G,F,O,H,L=l[10].user&&pa(l),j=l[10].password&&ma(l),B=l[10].database&&va(l);function K(oe,x){if(x[0]&1024&&(I=null),x[0]&1024&&(G=null),x[0]&1024&&(F=null),I==null&&(I=!!oe[10].service.toLowerCase().includes("redis")),I)return Fp;if(G==null&&(G=!!oe[10].service.toLowerCase().includes("postgres")),G)return Ip;if(F==null&&(F=!!oe[10].service.toLowerCase().includes("mongo")),F)return Op}let Y=K(l,[-1,-1]),Z=Y&&Y(l);return{c(){e=d("div"),t=d("div"),n=d("span"),n.textContent="✅",s=b(),o=d("span"),f=T(i),a=T(" credentials"),c=b(),_=d("div"),p=d("div"),m=d("span"),v=T(h),g=T(":"),y=b(),C=d("code"),S=T(w),D=b(),L&&L.c(),E=b(),j&&j.c(),P=b(),B&&B.c(),z=b(),q=d("small"),q.textContent="Click any value to copy",A=b(),N=d("div"),Z&&Z.c(),u(n,"class","result-icon svelte-14omwo7"),u(o,"class","result-title svelte-14omwo7"),u(t,"class","result-header svelte-14omwo7"),u(m,"class","label svelte-14omwo7"),u(C,"class","value url clickable svelte-14omwo7"),u(p,"class","info-row full-width svelte-14omwo7"),u(_,"class","connection-info svelte-14omwo7"),u(q,"class","copy-hint svelte-14omwo7"),u(N,"class","cli-examples svelte-14omwo7"),u(e,"class","lookup-result svelte-14omwo7")},m(oe,x){$(oe,e,x),r(e,t),r(t,n),r(t,s),r(t,o),r(o,f),r(o,a),r(e,c),r(e,_),r(_,p),r(p,m),r(m,v),r(m,g),r(p,y),r(p,C),r(C,S),r(_,D),L&&L.m(_,null),r(_,E),j&&j.m(_,null),r(_,P),B&&B.m(_,null),r(e,z),r(e,q),r(e,A),r(e,N),Z&&Z.m(N,null),O||(H=X(C,"click",l[23]),O=!0)},p(oe,x){x[0]&1024&&i!==(i=oe[10].service+"")&&U(f,i),x[0]&1024&&h!==(h=oe[10].env_var_name+"")&&U(v,h),x[0]&1024&&w!==(w=oe[10].connection_url+"")&&U(S,w),oe[10].user?L?L.p(oe,x):(L=pa(oe),L.c(),L.m(_,E)):L&&(L.d(1),L=null),oe[10].password?j?j.p(oe,x):(j=ma(oe),j.c(),j.m(_,P)):j&&(j.d(1),j=null),oe[10].database?B?B.p(oe,x):(B=va(oe),B.c(),B.m(_,null)):B&&(B.d(1),B=null),Y===(Y=K(oe,x))&&Z?Z.p(oe,x):(Z&&Z.d(1),Z=Y&&Y(oe),Z&&(Z.c(),Z.m(N,null)))},d(oe){oe&&k(e),L&&L.d(),j&&j.d(),B&&B.d(),Z&&Z.d(),O=!1,H()}}}function pa(l){let e,t,n,s,o=l[10].user+"",i,f,a;return{c(){e=d("div"),t=d("span"),t.textContent="User:",n=b(),s=d("code"),i=T(o),u(t,"class","label svelte-14omwo7"),u(s,"class","value clickable svelte-14omwo7"),u(e,"class","info-row svelte-14omwo7")},m(c,_){$(c,e,_),r(e,t),r(e,n),r(e,s),r(s,i),f||(a=X(s,"click",l[24]),f=!0)},p(c,_){_[0]&1024&&o!==(o=c[10].user+"")&&U(i,o)},d(c){c&&k(e),f=!1,a()}}}function ma(l){let e,t,n,s,o=l[10].password+"",i,f,a;return{c(){e=d("div"),t=d("span"),t.textContent="Password:",n=b(),s=d("code"),i=T(o),u(t,"class","label svelte-14omwo7"),u(s,"class","value clickable svelte-14omwo7"),u(e,"class","info-row svelte-14omwo7")},m(c,_){$(c,e,_),r(e,t),r(e,n),r(e,s),r(s,i),f||(a=X(s,"click",l[25]),f=!0)},p(c,_){_[0]&1024&&o!==(o=c[10].password+"")&&U(i,o)},d(c){c&&k(e),f=!1,a()}}}function va(l){let e,t,n,s,o=l[10].database+"",i,f,a;return{c(){e=d("div"),t=d("span"),t.textContent="Database:",n=b(),s=d("code"),i=T(o),u(t,"class","label svelte-14omwo7"),u(s,"class","value clickable svelte-14omwo7"),u(e,"class","info-row svelte-14omwo7")},m(c,_){$(c,e,_),r(e,t),r(e,n),r(e,s),r(s,i),f||(a=X(s,"click",l[26]),f=!0)},p(c,_){_[0]&1024&&o!==(o=c[10].database+"")&&U(i,o)},d(c){c&&k(e),f=!1,a()}}}function Op(l){let e,t,n=l[10].connection_url+"",s,o;return{c(){e=d("code"),t=T('mongosh "'),s=T(n),o=T('"'),u(e,"class","svelte-14omwo7")},m(i,f){$(i,e,f),r(e,t),r(e,s),r(e,o)},p(i,f){f[0]&1024&&n!==(n=i[10].connection_url+"")&&U(s,n)},d(i){i&&k(e)}}}function Ip(l){let e,t,n=l[10].connection_url+"",s,o;return{c(){e=d("code"),t=T('psql "'),s=T(n),o=T('"'),u(e,"class","svelte-14omwo7")},m(i,f){$(i,e,f),r(e,t),r(e,s),r(e,o)},p(i,f){f[0]&1024&&n!==(n=i[10].connection_url+"")&&U(s,n)},d(i){i&&k(e)}}}function Fp(l){let e,t,n=l[10].host+"",s,o,i=l[10].port+"",f,a,c=l[10].password+"",_;return{c(){e=d("code"),t=T("redis-cli -h "),s=T(n),o=T(" -p "),f=T(i),a=T(" -a "),_=T(c),u(e,"class","svelte-14omwo7")},m(p,m){$(p,e,m),r(e,t),r(e,s),r(e,o),r(e,f),r(e,a),r(e,_)},p(p,m){m[0]&1024&&n!==(n=p[10].host+"")&&U(s,n),m[0]&1024&&i!==(i=p[10].port+"")&&U(f,i),m[0]&1024&&c!==(c=p[10].password+"")&&U(_,c)},d(p){p&&k(e)}}}function Up(l){let e,t,n,s,o,i,f,a,c,_,p,m,h,v,g,y,C,w,S,D,E,P,z,q,A,N,I,G,F,O,H,L,j,B,K,Y,Z,oe=pe(l[13]),x=[];for(let V=0;V<oe.length;V+=1)x[V]=ca(ua(l,oe,V));let J=pe(l[14]),W=[];for(let V=0;V<J.length;V+=1)W[V]=_a(fa(l,J,V));L=new Ue({props:{variant:"primary",type:"submit",disabled:l[11],$$slots:{default:[Ap]},$$scope:{ctx:l}}});let re=l[10]&&da(l);return{c(){e=d("p"),e.innerHTML="For CLI tools, DB admin apps, or local dev. <strong>Apps get URLs auto-injected</strong> when you enable dependencies in Deploy tab.",t=b(),n=d("form"),s=d("div"),o=d("label"),o.textContent="Service Type *",i=b(),f=d("select"),a=d("option"),a.textContent="Select service...";for(let V=0;V<x.length;V+=1)x[V].c();c=b(),_=d("div"),p=d("div"),m=d("label"),m.textContent="Project *",h=b(),v=d("input"),g=b(),y=d("div"),C=d("label"),C.textContent="Environment",w=b(),S=d("select");for(let V=0;V<W.length;V+=1)W[V].c();D=b(),E=d("div"),P=d("div"),z=d("label"),z.textContent="Server IP *",q=b(),A=d("input"),N=b(),I=d("div"),G=d("label"),G.textContent="Port *",F=b(),O=d("input"),H=b(),ce(L.$$.fragment),j=b(),re&&re.c(),B=Fe(),u(e,"class","description svelte-14omwo7"),u(o,"for","lookup-type"),u(o,"class","svelte-14omwo7"),a.__value="",le(a,a.__value),u(f,"id","lookup-type"),f.required=!0,u(f,"class","svelte-14omwo7"),l[0]===void 0&&Xe(()=>l[18].call(f)),u(s,"class","form-group svelte-14omwo7"),u(m,"for","lookup-project"),u(m,"class","svelte-14omwo7"),u(v,"id","lookup-project"),u(v,"type","text"),u(v,"placeholder","myapp"),v.required=!0,u(v,"class","svelte-14omwo7"),u(p,"class","form-group svelte-14omwo7"),u(C,"for","lookup-env"),u(C,"class","svelte-14omwo7"),u(S,"id","lookup-env"),u(S,"class","svelte-14omwo7"),l[8]===void 0&&Xe(()=>l[20].call(S)),u(y,"class","form-group svelte-14omwo7"),u(_,"class","form-row svelte-14omwo7"),u(z,"for","lookup-host"),u(z,"class","svelte-14omwo7"),u(A,"id","lookup-host"),u(A,"type","text"),u(A,"placeholder","206.189.18.79"),A.required=!0,u(A,"class","svelte-14omwo7"),u(P,"class","form-group svelte-14omwo7"),u(G,"for","lookup-port"),u(G,"class","svelte-14omwo7"),u(O,"id","lookup-port"),u(O,"type","number"),u(O,"placeholder","8453"),O.required=!0,u(O,"class","svelte-14omwo7"),u(I,"class","form-group svelte-14omwo7"),u(E,"class","form-row svelte-14omwo7")},m(V,ie){$(V,e,ie),$(V,t,ie),$(V,n,ie),r(n,s),r(s,o),r(s,i),r(s,f),r(f,a);for(let _e=0;_e<x.length;_e+=1)x[_e]&&x[_e].m(f,null);Ne(f,l[0],!0),r(n,c),r(n,_),r(_,p),r(p,m),r(p,h),r(p,v),le(v,l[7]),r(_,g),r(_,y),r(y,C),r(y,w),r(y,S);for(let _e=0;_e<W.length;_e+=1)W[_e]&&W[_e].m(S,null);Ne(S,l[8],!0),r(n,D),r(n,E),r(E,P),r(P,z),r(P,q),r(P,A),le(A,l[9]),r(E,N),r(E,I),r(I,G),r(I,F),r(I,O),le(O,l[1]),r(n,H),fe(L,n,null),$(V,j,ie),re&&re.m(V,ie),$(V,B,ie),K=!0,Y||(Z=[X(f,"change",l[18]),X(v,"input",l[19]),X(S,"change",l[20]),X(A,"input",l[21]),X(O,"input",l[22]),X(n,"submit",l[16])],Y=!0)},p(V,ie){if(ie[0]&8192){oe=pe(V[13]);let te;for(te=0;te<oe.length;te+=1){const ve=ua(V,oe,te);x[te]?x[te].p(ve,ie):(x[te]=ca(ve),x[te].c(),x[te].m(f,null))}for(;te<x.length;te+=1)x[te].d(1);x.length=oe.length}if(ie[0]&8193&&Ne(f,V[0]),ie[0]&128&&v.value!==V[7]&&le(v,V[7]),ie[0]&16384){J=pe(V[14]);let te;for(te=0;te<J.length;te+=1){const ve=fa(V,J,te);W[te]?W[te].p(ve,ie):(W[te]=_a(ve),W[te].c(),W[te].m(S,null))}for(;te<W.length;te+=1)W[te].d(1);W.length=J.length}ie[0]&16640&&Ne(S,V[8]),ie[0]&512&&A.value!==V[9]&&le(A,V[9]),ie[0]&2&&Kt(O.value)!==V[1]&&le(O,V[1]);const _e={};ie[0]&2048&&(_e.disabled=V[11]),ie[0]&2048|ie[1]&65536&&(_e.$$scope={dirty:ie,ctx:V}),L.$set(_e),V[10]?re?re.p(V,ie):(re=da(V),re.c(),re.m(B.parentNode,B)):re&&(re.d(1),re=null)},i(V){K||(R(L.$$.fragment,V),K=!0)},o(V){M(L.$$.fragment,V),K=!1},d(V){V&&(k(e),k(t),k(n),k(j),k(B)),Me(x,V),Me(W,V),ue(L),re&&re.d(V),Y=!1,We(Z)}}}function ha(l){let e,t=l[40].label+"",n;return{c(){e=d("option"),n=T(t),e.__value=l[40].value,le(e,e.__value)},m(s,o){$(s,e,o),r(e,n)},p:ge,d(s){s&&k(e)}}}function ga(l){let e,t=l[37].charAt(0).toUpperCase()+l[37].slice(1)+"",n;return{c(){e=d("option"),n=T(t),e.__value=l[37],le(e,e.__value)},m(s,o){$(s,e,o),r(e,n)},p:ge,d(s){s&&k(e)}}}function ba(l){let e,t=(l[33].name||"unnamed")+"",n,s,o=l[34]+"",i,f,a;return{c(){e=d("option"),n=T(t),s=T(" ("),i=T(o),f=T(")"),e.__value=a=l[34],le(e,e.__value)},m(c,_){$(c,e,_),r(e,n),r(e,s),r(e,i),r(e,f)},p(c,_){_[0]&4096&&t!==(t=(c[33].name||"unnamed")+"")&&U(n,t),_[0]&4096&&o!==(o=c[34]+"")&&U(i,o),_[0]&4096&&a!==(a=c[34])&&(e.__value=a,le(e,e.__value))},d(c){c&&k(e)}}}function ka(l){let e,t=l[34]&&ba(l);return{c(){t&&t.c(),e=Fe()},m(n,s){t&&t.m(n,s),$(n,e,s)},p(n,s){n[34]?t?t.p(n,s):(t=ba(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(n){n&&k(e),t&&t.d(n)}}}function Bp(l){let e;return{c(){e=T("Use Deploy Tab Instead →")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function Hp(l){let e;return{c(){e=T("Deploying...")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function Gp(l){let e;function t(o,i){return o[6]?Hp:Bp}let n=t(l),s=n(l);return{c(){s.c(),e=Fe()},m(o,i){s.m(o,i),$(o,e,i)},p(o,i){n!==(n=t(o))&&(s.d(1),s=n(o),s&&(s.c(),s.m(e.parentNode,e)))},d(o){o&&k(e),s.d(o)}}}function Vp(l){let e,t,n,s,o,i,f,a,c,_,p,m,h,v,g,y,C,w,S,D,E,P,z,q,A,N,I,G,F,O,H,L,j,B=pe(l[13]),K=[];for(let J=0;J<B.length;J+=1)K[J]=ha(aa(l,B,J));let Y=pe(l[14]),Z=[];for(let J=0;J<Y.length;J+=1)Z[J]=ga(ra(l,Y,J));let oe=pe(l[12]||[]),x=[];for(let J=0;J<oe.length;J+=1)x[J]=ka(ia(l,oe,J));return G=new Ue({props:{variant:"secondary",type:"submit",disabled:l[6],$$slots:{default:[Gp]},$$scope:{ctx:l}}}),{c(){e=d("p"),e.textContent="Deploy stateful services with automatic configuration, persistence, and service mesh.",t=b(),n=d("form"),s=d("div"),o=d("label"),o.textContent="Service Type *",i=b(),f=d("select"),a=d("option"),a.textContent="Select service...";for(let J=0;J<K.length;J+=1)K[J].c();c=b(),_=d("div"),p=d("label"),p.textContent="Project *",m=b(),h=d("input"),v=b(),g=d("div"),y=d("label"),y.textContent="Environment",C=b(),w=d("select");for(let J=0;J<Z.length;J+=1)Z[J].c();S=b(),D=d("div"),E=d("label"),E.textContent="Target Server *",P=b(),z=d("select"),q=d("option"),q.textContent="Select server...";for(let J=0;J<x.length;J+=1)x[J].c();A=b(),N=d("small"),N.textContent="Servers from Infrastructure tab",I=b(),ce(G.$$.fragment),F=b(),O=d("small"),O.textContent='Stateful deploys work via Deploy tab with "Stateful Service" type',u(e,"class","description svelte-14omwo7"),u(o,"for","svc-type"),u(o,"class","svelte-14omwo7"),a.__value="",le(a,a.__value),u(f,"id","svc-type"),f.required=!0,u(f,"class","svelte-14omwo7"),l[2]===void 0&&Xe(()=>l[27].call(f)),u(s,"class","form-group svelte-14omwo7"),u(p,"for","svc-project"),u(p,"class","svelte-14omwo7"),u(h,"id","svc-project"),u(h,"type","text"),u(h,"placeholder","myapp"),h.required=!0,u(h,"class","svelte-14omwo7"),u(_,"class","form-group svelte-14omwo7"),u(y,"for","svc-env"),u(y,"class","svelte-14omwo7"),u(w,"id","svc-env"),u(w,"class","svelte-14omwo7"),l[4]===void 0&&Xe(()=>l[29].call(w)),u(g,"class","form-group svelte-14omwo7"),u(E,"for","svc-server"),u(E,"class","svelte-14omwo7"),q.__value="",le(q,q.__value),u(z,"id","svc-server"),z.required=!0,u(z,"class","svelte-14omwo7"),l[5]===void 0&&Xe(()=>l[30].call(z)),u(N,"class","svelte-14omwo7"),u(D,"class","form-group svelte-14omwo7"),u(O,"class","hint svelte-14omwo7")},m(J,W){$(J,e,W),$(J,t,W),$(J,n,W),r(n,s),r(s,o),r(s,i),r(s,f),r(f,a);for(let re=0;re<K.length;re+=1)K[re]&&K[re].m(f,null);Ne(f,l[2],!0),r(n,c),r(n,_),r(_,p),r(_,m),r(_,h),le(h,l[3]),r(n,v),r(n,g),r(g,y),r(g,C),r(g,w);for(let re=0;re<Z.length;re+=1)Z[re]&&Z[re].m(w,null);Ne(w,l[4],!0),r(n,S),r(n,D),r(D,E),r(D,P),r(D,z),r(z,q);for(let re=0;re<x.length;re+=1)x[re]&&x[re].m(z,null);Ne(z,l[5],!0),r(D,A),r(D,N),r(n,I),fe(G,n,null),r(n,F),r(n,O),H=!0,L||(j=[X(f,"change",l[27]),X(h,"input",l[28]),X(w,"change",l[29]),X(z,"change",l[30]),X(n,"submit",l[15])],L=!0)},p(J,W){if(W[0]&8192){B=pe(J[13]);let V;for(V=0;V<B.length;V+=1){const ie=aa(J,B,V);K[V]?K[V].p(ie,W):(K[V]=ha(ie),K[V].c(),K[V].m(f,null))}for(;V<K.length;V+=1)K[V].d(1);K.length=B.length}if(W[0]&8196&&Ne(f,J[2]),W[0]&8&&h.value!==J[3]&&le(h,J[3]),W[0]&16384){Y=pe(J[14]);let V;for(V=0;V<Y.length;V+=1){const ie=ra(J,Y,V);Z[V]?Z[V].p(ie,W):(Z[V]=ga(ie),Z[V].c(),Z[V].m(w,null))}for(;V<Z.length;V+=1)Z[V].d(1);Z.length=Y.length}if(W[0]&16400&&Ne(w,J[4]),W[0]&4096){oe=pe(J[12]||[]);let V;for(V=0;V<oe.length;V+=1){const ie=ia(J,oe,V);x[V]?x[V].p(ie,W):(x[V]=ka(ie),x[V].c(),x[V].m(z,null))}for(;V<x.length;V+=1)x[V].d(1);x.length=oe.length}W[0]&4128&&Ne(z,J[5]);const re={};W[0]&64&&(re.disabled=J[6]),W[0]&64|W[1]&65536&&(re.$$scope={dirty:W,ctx:J}),G.$set(re)},i(J){H||(R(G.$$.fragment,J),H=!0)},o(J){M(G.$$.fragment,J),H=!1},d(J){J&&(k(e),k(t),k(n)),Me(K,J),Me(Z,J),Me(x,J),ue(G),L=!1,We(j)}}}function Wp(l){let e;return{c(){e=d("div"),e.innerHTML='<div class="feature svelte-14omwo7"><strong class="svelte-14omwo7">🔐 Auto Credentials</strong> <p class="svelte-14omwo7">Deterministic passwords generated from project/env. Same inputs = same password.</p></div> <div class="feature svelte-14omwo7"><strong class="svelte-14omwo7">💾 Persistent Storage</strong> <p class="svelte-14omwo7">Data volumes mounted at /data. Survives container restarts and redeploys.</p></div> <div class="feature svelte-14omwo7"><strong class="svelte-14omwo7">🔀 Service Mesh</strong> <p class="svelte-14omwo7">Nginx proxy on internal ports. Apps connect to localhost:PORT.</p></div> <div class="feature svelte-14omwo7"><strong class="svelte-14omwo7">🔧 Auto-Inject</strong> <p class="svelte-14omwo7">Enable &quot;Auto-inject&quot; in Deploy tab to get DATABASE_URL automatically.</p></div>',u(e,"class","features-grid svelte-14omwo7")},m(t,n){$(t,e,n)},p:ge,d(t){t&&k(e)}}}function Jp(l){let e,t,n,s,o,i,f,a;return n=new ft({props:{title:"🔑 Direct Access Credentials",$$slots:{default:[Up]},$$scope:{ctx:l}}}),o=new ft({props:{title:"🗄️ Deploy Database/Cache",$$slots:{default:[Vp]},$$scope:{ctx:l}}}),f=new ft({props:{title:"ℹ️ How It Works",$$slots:{default:[Wp]},$$scope:{ctx:l}}}),{c(){e=d("div"),t=d("div"),ce(n.$$.fragment),s=b(),ce(o.$$.fragment),i=b(),ce(f.$$.fragment),u(t,"class","services-grid svelte-14omwo7"),u(e,"class","services-page svelte-14omwo7")},m(c,_){$(c,e,_),r(e,t),fe(n,t,null),r(t,s),fe(o,t,null),r(e,i),fe(f,e,null),a=!0},p(c,_){const p={};_[0]&3971|_[1]&65536&&(p.$$scope={dirty:_,ctx:c}),n.$set(p);const m={};_[0]&4220|_[1]&65536&&(m.$$scope={dirty:_,ctx:c}),o.$set(m);const h={};_[1]&65536&&(h.$$scope={dirty:_,ctx:c}),f.$set(h)},i(c){a||(R(n.$$.fragment,c),R(o.$$.fragment,c),R(f.$$.fragment,c),a=!0)},o(c){M(n.$$.fragment,c),M(o.$$.fragment,c),M(f.$$.fragment,c),a=!1},d(c){c&&k(e),ue(n),ue(o),ue(f)}}}function Kp(l,e,t){let n;dt(l,pn,K=>t(12,n=K));let s="",o="",i="prod",f="",a=!1,c="",_="",p="prod",m="",h="",v=null,g=!1;const y=[{value:"postgres",label:"🐘 PostgreSQL",port:5432},{value:"redis",label:"⚡ Redis",port:6379},{value:"mysql",label:"🐬 MySQL",port:3306},{value:"mongo",label:"🍃 MongoDB",port:27017}],C=["prod","staging","dev"];kl(()=>{w()});async function w(){try{await Xt.refresh()}catch(K){console.error("Failed to load servers:",K)}}async function S(K){if(K.preventDefault(),!s||!o||!f){$e.error("Please fill in all required fields");return}t(6,a=!0);try{$e.error("Service deployment not yet implemented. Use Deploy tab instead.");return}catch(Y){$e.error("Deployment failed: "+Y.message)}finally{t(6,a=!1)}}async function D(K){if(K.preventDefault(),!c||!_||!m||!h){$e.error("Please fill in all required fields");return}t(11,g=!0),t(10,v=null);try{const Y=await He("GET",`/infra/services/${c}/connection?project=${encodeURIComponent(_)}&environment=${p}&host=${encodeURIComponent(m)}&port=${h}`);t(10,v=Y),$e.success("Connection info retrieved!")}catch(Y){$e.error("Lookup failed: "+Y.message)}finally{t(11,g=!1)}}function E(K){navigator.clipboard.writeText(K),$e.success("Copied to clipboard")}function P(){c=_t(this),t(0,c),t(13,y)}function z(){_=this.value,t(7,_)}function q(){p=_t(this),t(8,p),t(14,C)}function A(){m=this.value,t(9,m)}function N(){h=Kt(this.value),t(1,h)}const I=()=>E(v.connection_url),G=()=>E(v.user),F=()=>E(v.password),O=()=>E(v.database);function H(){s=_t(this),t(2,s),t(13,y)}function L(){o=this.value,t(3,o)}function j(){i=_t(this),t(4,i),t(14,C)}function B(){f=_t(this),t(5,f)}return l.$$.update=()=>{l.$$.dirty[0]&3&&c&&y.find(K=>K.value===c)},[c,h,s,o,i,f,a,_,p,m,v,g,n,y,C,S,D,E,P,z,q,A,N,I,G,F,O,H,L,j,B]}class Yp extends Ct{constructor(e){super(),$t(this,e,Kp,Jp,kt,{},null,[-1,-1])}}const{Boolean:Qp}=Sf;function wa(l,e,t){const n=l.slice();return n[32]=e[t],n}function Zp(l){let e,t,n,s,o,i,f,a,c,_;return{c(){e=d("div"),t=d("label"),t.textContent="Theme",n=b(),s=d("select"),o=d("option"),o.textContent="🌙 Dark (Space)",i=d("option"),i.textContent="☀️ Light",f=b(),a=d("p"),a.textContent="Theme preference is saved to your browser.",u(t,"for","theme-select"),u(t,"class","svelte-16vnl3x"),o.__value="dark",le(o,o.__value),i.__value="light",le(i,i.__value),u(s,"id","theme-select"),u(s,"class","svelte-16vnl3x"),l[14]===void 0&&Xe(()=>l[21].call(s)),u(e,"class","form-group svelte-16vnl3x"),u(a,"class","hint svelte-16vnl3x")},m(p,m){$(p,e,m),r(e,t),r(e,n),r(e,s),r(s,o),r(s,i),Ne(s,l[14],!0),$(p,f,m),$(p,a,m),c||(_=[X(s,"change",l[21]),X(s,"change",l[22])],c=!0)},p(p,m){m[0]&16384&&Ne(s,p[14])},d(p){p&&(k(e),k(f),k(a)),c=!1,We(_)}}}function Xp(l){let e;return{c(){e=T("Save Token")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function xp(l){let e,t;return e=new Ze({props:{variant:"danger",$$slots:{default:[lm]},$$scope:{ctx:l}}}),{c(){ce(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const o={};s[1]&16&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(R(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){ue(e,n)}}}function em(l){let e,t;return e=new Ze({props:{variant:"warning",$$slots:{default:[nm]},$$scope:{ctx:l}}}),{c(){ce(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const o={};s[1]&16&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(R(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){ue(e,n)}}}function tm(l){let e,t,n,s,o;return e=new Ze({props:{variant:"success",$$slots:{default:[sm]},$$scope:{ctx:l}}}),{c(){ce(e.$$.fragment),t=b(),n=d("span"),s=T(l[0]),u(n,"class","token-preview svelte-16vnl3x")},m(i,f){fe(e,i,f),$(i,t,f),$(i,n,f),r(n,s),o=!0},p(i,f){const a={};f[1]&16&&(a.$$scope={dirty:f,ctx:i}),e.$set(a),(!o||f[0]&1)&&U(s,i[0])},i(i){o||(R(e.$$.fragment,i),o=!0)},o(i){M(e.$$.fragment,i),o=!1},d(i){i&&(k(t),k(n)),ue(e,i)}}}function lm(l){let e;return{c(){e=T("Invalid token")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function nm(l){let e;return{c(){e=T("Not configured")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function sm(l){let e;return{c(){e=T("✓ Connected")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function om(l){let e,t,n,s,o,i,f,a,c,_,p,m,h,v,g;a=new Ue({props:{variant:"primary",type:"submit",$$slots:{default:[Xp]},$$scope:{ctx:l}}});const y=[tm,em,xp],C=[];function w(S,D){var E,P;return(E=S[1])!=null&&E.valid?0:(P=S[1])!=null&&P.missing?1:2}return p=w(l),m=C[p]=y[p](l),{c(){e=d("p"),e.innerHTML=`Get your token from 
      <a href="https://cloud.digitalocean.com/account/api/tokens" target="_blank" class="svelte-16vnl3x">DO Control Panel</a>.`,t=b(),n=d("div"),n.innerHTML='<div class="info-title svelte-16vnl3x">🔒 Browser Storage</div> <div class="info-text svelte-16vnl3x">Token stored in browser cookie. Passed with each API request. Never stored on server.</div>',s=b(),o=d("form"),i=d("div"),i.innerHTML='<label for="do-token" class="svelte-16vnl3x">DigitalOcean API Token</label> <input id="do-token" type="password" placeholder="dop_v1_xxxxx" class="svelte-16vnl3x"/>',f=b(),ce(a.$$.fragment),c=b(),_=d("div"),m.c(),u(e,"class","description svelte-16vnl3x"),u(n,"class","info-box svelte-16vnl3x"),u(i,"class","form-group svelte-16vnl3x"),u(_,"class","token-status svelte-16vnl3x")},m(S,D){$(S,e,D),$(S,t,D),$(S,n,D),$(S,s,D),$(S,o,D),r(o,i),r(o,f),fe(a,o,null),$(S,c,D),$(S,_,D),C[p].m(_,null),h=!0,v||(g=X(o,"submit",l[15]),v=!0)},p(S,D){const E={};D[1]&16&&(E.$$scope={dirty:D,ctx:S}),a.$set(E);let P=p;p=w(S),p===P?C[p].p(S,D):(De(),M(C[P],1,1,()=>{C[P]=null}),Ee(),m=C[p],m?m.p(S,D):(m=C[p]=y[p](S),m.c()),R(m,1),m.m(_,null))},i(S){h||(R(a.$$.fragment,S),R(m),h=!0)},o(S){M(a.$$.fragment,S),M(m),h=!1},d(S){S&&(k(e),k(t),k(n),k(s),k(o),k(c),k(_)),ue(a),C[p].d(),v=!1,g()}}}function im(l){let e;return{c(){e=T("Save Token")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function rm(l){let e,t;return e=new Ze({props:{variant:"warning",$$slots:{default:[fm]},$$scope:{ctx:l}}}),{c(){ce(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const o={};s[1]&16&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(R(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){ue(e,n)}}}function am(l){let e,t,n,s,o;return e=new Ze({props:{variant:"success",$$slots:{default:[um]},$$scope:{ctx:l}}}),{c(){ce(e.$$.fragment),t=b(),n=d("span"),s=T(l[2]),u(n,"class","token-preview svelte-16vnl3x")},m(i,f){fe(e,i,f),$(i,t,f),$(i,n,f),r(n,s),o=!0},p(i,f){const a={};f[1]&16&&(a.$$scope={dirty:f,ctx:i}),e.$set(a),(!o||f[0]&4)&&U(s,i[2])},i(i){o||(R(e.$$.fragment,i),o=!0)},o(i){M(e.$$.fragment,i),o=!1},d(i){i&&(k(t),k(n)),ue(e,i)}}}function fm(l){let e;return{c(){e=T("Not configured")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function um(l){let e;return{c(){e=T("✓ Connected")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function cm(l){let e,t,n,s,o,i,f,a,c,_,p,m,h;i=new Ue({props:{variant:"primary",type:"submit",$$slots:{default:[im]},$$scope:{ctx:l}}});const v=[am,rm],g=[];function y(C,w){var S;return(S=C[3])!=null&&S.valid?0:1}return c=y(l),_=g[c]=v[c](l),{c(){e=d("p"),e.innerHTML=`Get your token from 
      <a href="https://dash.cloudflare.com/profile/api-tokens" target="_blank" class="svelte-16vnl3x">Cloudflare Dashboard</a>.`,t=b(),n=d("form"),s=d("div"),s.innerHTML='<label for="cf-token" class="svelte-16vnl3x">Cloudflare API Token</label> <input id="cf-token" type="password" placeholder="xxxxx" class="svelte-16vnl3x"/>',o=b(),ce(i.$$.fragment),f=b(),a=d("div"),_.c(),u(e,"class","description svelte-16vnl3x"),u(s,"class","form-group svelte-16vnl3x"),u(a,"class","token-status svelte-16vnl3x")},m(C,w){$(C,e,w),$(C,t,w),$(C,n,w),r(n,s),r(n,o),fe(i,n,null),$(C,f,w),$(C,a,w),g[c].m(a,null),p=!0,m||(h=X(n,"submit",l[16]),m=!0)},p(C,w){const S={};w[1]&16&&(S.$$scope={dirty:w,ctx:C}),i.$set(S);let D=c;c=y(C),c===D?g[c].p(C,w):(De(),M(g[D],1,1,()=>{g[D]=null}),Ee(),_=g[c],_?_.p(C,w):(_=g[c]=v[c](C),_.c()),R(_,1),_.m(a,null))},i(C){p||(R(i.$$.fragment,C),R(_),p=!0)},o(C){M(i.$$.fragment,C),M(_),p=!1},d(C){C&&(k(e),k(t),k(n),k(f),k(a)),ue(i),g[c].d(),m=!1,h()}}}function _m(l){let e;return{c(){e=T("Setup Domain")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function $a(l){let e,t=l[7].message+"",n;return{c(){e=d("div"),n=T(t),u(e,"class","result svelte-16vnl3x"),ke(e,"success",l[7].success),ke(e,"error",!l[7].success)},m(s,o){$(s,e,o),r(e,n)},p(s,o){o[0]&128&&t!==(t=s[7].message+"")&&U(n,t),o[0]&128&&ke(e,"success",s[7].success),o[0]&128&&ke(e,"error",!s[7].success)},d(s){s&&k(e)}}}function dm(l){let e,t,n,s,o,i,f,a,c,_,p,m,h,v,g,y,C,w,S,D,E,P,z,q;S=new Ue({props:{variant:"primary",type:"submit",$$slots:{default:[_m]},$$scope:{ctx:l}}});let A=l[7]&&$a(l);return{c(){e=d("p"),e.textContent='Point a domain to your server. With "Proxied" enabled, HTTPS works automatically.',t=b(),n=d("form"),s=d("div"),o=d("label"),o.textContent="Domain",i=b(),f=d("input"),a=b(),c=d("div"),_=d("label"),_.textContent="Server IP",p=b(),m=d("input"),h=b(),v=d("label"),g=d("input"),y=T(`
        Proxied (Cloudflare handles SSL)`),C=b(),w=d("div"),ce(S.$$.fragment),D=b(),A&&A.c(),E=Fe(),u(e,"class","description svelte-16vnl3x"),u(o,"for","domain-name"),u(o,"class","svelte-16vnl3x"),u(f,"id","domain-name"),u(f,"type","text"),u(f,"placeholder","api.example.com"),f.required=!0,u(f,"class","svelte-16vnl3x"),u(s,"class","form-group svelte-16vnl3x"),u(_,"for","domain-ip"),u(_,"class","svelte-16vnl3x"),u(m,"id","domain-ip"),u(m,"type","text"),u(m,"placeholder","1.2.3.4"),m.required=!0,u(m,"class","svelte-16vnl3x"),u(c,"class","form-group svelte-16vnl3x"),u(g,"type","checkbox"),u(g,"class","svelte-16vnl3x"),u(v,"class","checkbox-label svelte-16vnl3x"),u(w,"class","form-actions svelte-16vnl3x")},m(N,I){$(N,e,I),$(N,t,I),$(N,n,I),r(n,s),r(s,o),r(s,i),r(s,f),le(f,l[4]),r(n,a),r(n,c),r(c,_),r(c,p),r(c,m),le(m,l[5]),r(n,h),r(n,v),r(v,g),g.checked=l[6],r(v,y),r(n,C),r(n,w),fe(S,w,null),$(N,D,I),A&&A.m(N,I),$(N,E,I),P=!0,z||(q=[X(f,"input",l[23]),X(m,"input",l[24]),X(g,"change",l[25]),X(n,"submit",l[17])],z=!0)},p(N,I){I[0]&16&&f.value!==N[4]&&le(f,N[4]),I[0]&32&&m.value!==N[5]&&le(m,N[5]),I[0]&64&&(g.checked=N[6]);const G={};I[1]&16&&(G.$$scope={dirty:I,ctx:N}),S.$set(G),N[7]?A?A.p(N,I):(A=$a(N),A.c(),A.m(E.parentNode,E)):A&&(A.d(1),A=null)},i(N){P||(R(S.$$.fragment,N),P=!0)},o(N){M(S.$$.fragment,N),P=!1},d(N){N&&(k(e),k(t),k(n),k(D),k(E)),ue(S),A&&A.d(N),z=!1,We(q)}}}function pm(l){let e;return{c(){e=T("Setup DNS Round-Robin")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function Ca(l){let e,t=l[11].message+"",n;return{c(){e=d("div"),n=T(t),u(e,"class","result svelte-16vnl3x"),ke(e,"success",l[11].success),ke(e,"error",!l[11].success)},m(s,o){$(s,e,o),r(e,n)},p(s,o){o[0]&2048&&t!==(t=s[11].message+"")&&U(n,t),o[0]&2048&&ke(e,"success",s[11].success),o[0]&2048&&ke(e,"error",!s[11].success)},d(s){s&&k(e)}}}function mm(l){let e,t,n,s,o,i,f,a,c,_,p,m,h,v,g,y,C,w,S,D,E,P,z,q;S=new Ue({props:{variant:"primary",type:"submit",$$slots:{default:[pm]},$$scope:{ctx:l}}});let A=l[11]&&Ca(l);return{c(){e=d("p"),e.innerHTML=`Simple load distribution via multiple A records. Cloudflare rotates between IPs at DNS level.
      <strong>FREE</strong>, but no health checks.`,t=b(),n=d("form"),s=d("div"),o=d("label"),o.textContent="Domain",i=b(),f=d("input"),a=b(),c=d("div"),_=d("label"),_.textContent="Server IPs (comma-separated)",p=b(),m=d("input"),h=b(),v=d("label"),g=d("input"),y=T(`
        Proxied (SSL + CDN)`),C=b(),w=d("div"),ce(S.$$.fragment),D=b(),A&&A.c(),E=Fe(),u(e,"class","description svelte-16vnl3x"),u(o,"for","lb-domain"),u(o,"class","svelte-16vnl3x"),u(f,"id","lb-domain"),u(f,"type","text"),u(f,"placeholder","api.example.com"),f.required=!0,u(f,"class","svelte-16vnl3x"),u(s,"class","form-group svelte-16vnl3x"),u(_,"for","lb-ips"),u(_,"class","svelte-16vnl3x"),u(m,"id","lb-ips"),u(m,"type","text"),u(m,"placeholder","1.2.3.4, 5.6.7.8"),m.required=!0,u(m,"class","svelte-16vnl3x"),u(c,"class","form-group svelte-16vnl3x"),u(g,"type","checkbox"),u(g,"class","svelte-16vnl3x"),u(v,"class","checkbox-label svelte-16vnl3x"),u(w,"class","form-actions svelte-16vnl3x")},m(N,I){$(N,e,I),$(N,t,I),$(N,n,I),r(n,s),r(s,o),r(s,i),r(s,f),le(f,l[8]),r(n,a),r(n,c),r(c,_),r(c,p),r(c,m),le(m,l[9]),r(n,h),r(n,v),r(v,g),g.checked=l[10],r(v,y),r(n,C),r(n,w),fe(S,w,null),$(N,D,I),A&&A.m(N,I),$(N,E,I),P=!0,z||(q=[X(f,"input",l[26]),X(m,"input",l[27]),X(g,"change",l[28]),X(n,"submit",l[18])],z=!0)},p(N,I){I[0]&256&&f.value!==N[8]&&le(f,N[8]),I[0]&512&&m.value!==N[9]&&le(m,N[9]),I[0]&1024&&(g.checked=N[10]);const G={};I[1]&16&&(G.$$scope={dirty:I,ctx:N}),S.$set(G),N[11]?A?A.p(N,I):(A=Ca(N),A.c(),A.m(E.parentNode,E)):A&&(A.d(1),A=null)},i(N){P||(R(S.$$.fragment,N),P=!0)},o(N){M(S.$$.fragment,N),P=!1},d(N){N&&(k(e),k(t),k(n),k(D),k(E)),ue(S),A&&A.d(N),z=!1,We(q)}}}function vm(l){let e,t,n=pe(l[12]),s=[];for(let i=0;i<n.length;i+=1)s[i]=ya(wa(l,n,i));const o=i=>M(s[i],1,1,()=>{s[i]=null});return{c(){e=d("div");for(let i=0;i<s.length;i+=1)s[i].c();u(e,"class","task-list svelte-16vnl3x")},m(i,f){$(i,e,f);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(e,null);t=!0},p(i,f){if(f[0]&1052672){n=pe(i[12]);let a;for(a=0;a<n.length;a+=1){const c=wa(i,n,a);s[a]?(s[a].p(c,f),R(s[a],1)):(s[a]=ya(c),s[a].c(),R(s[a],1),s[a].m(e,null))}for(De(),a=n.length;a<s.length;a+=1)o(a);Ee()}},i(i){if(!t){for(let f=0;f<n.length;f+=1)R(s[f]);t=!0}},o(i){s=s.filter(Qp);for(let f=0;f<s.length;f+=1)M(s[f]);t=!1},d(i){i&&k(e),Me(s,i)}}}function hm(l){let e;return{c(){e=d("div"),e.textContent="No scheduled tasks",u(e,"class","empty-state svelte-16vnl3x")},m(t,n){$(t,e,n)},p:ge,i:ge,o:ge,d(t){t&&k(e)}}}function gm(l){let e;return{c(){e=d("div"),e.textContent="Loading tasks...",u(e,"class","empty-state svelte-16vnl3x")},m(t,n){$(t,e,n)},p:ge,i:ge,o:ge,d(t){t&&k(e)}}}function bm(l){let e=l[32].type+"",t;return{c(){t=T(e)},m(n,s){$(n,t,s)},p(n,s){s[0]&4096&&e!==(e=n[32].type+"")&&U(t,e)},d(n){n&&k(t)}}}function km(l){let e;return{c(){e=T("🗑️")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function ya(l){let e,t,n,s=l[32].name+"",o,i,f,a,c,_,p,m=l[32].interval+"",h,v,g,y,C,w;a=new Ze({props:{variant:"info",$$slots:{default:[bm]},$$scope:{ctx:l}}});function S(){return l[29](l[32])}return y=new Ue({props:{variant:"danger",size:"sm",$$slots:{default:[km]},$$scope:{ctx:l}}}),y.$on("click",S),{c(){e=d("div"),t=d("div"),n=d("div"),o=T(s),i=b(),f=d("div"),ce(a.$$.fragment),c=b(),_=d("span"),p=T("Every "),h=T(m),v=T(" min"),g=b(),ce(y.$$.fragment),C=b(),u(n,"class","task-name svelte-16vnl3x"),u(f,"class","task-meta svelte-16vnl3x"),u(t,"class","task-info"),u(e,"class","task-item svelte-16vnl3x")},m(D,E){$(D,e,E),r(e,t),r(t,n),r(n,o),r(t,i),r(t,f),fe(a,f,null),r(f,c),r(f,_),r(_,p),r(_,h),r(_,v),r(e,g),fe(y,e,null),r(e,C),w=!0},p(D,E){l=D,(!w||E[0]&4096)&&s!==(s=l[32].name+"")&&U(o,s);const P={};E[0]&4096|E[1]&16&&(P.$$scope={dirty:E,ctx:l}),a.$set(P),(!w||E[0]&4096)&&m!==(m=l[32].interval+"")&&U(h,m);const z={};E[1]&16&&(z.$$scope={dirty:E,ctx:l}),y.$set(z)},i(D){w||(R(a.$$.fragment,D),R(y.$$.fragment,D),w=!0)},o(D){M(a.$$.fragment,D),M(y.$$.fragment,D),w=!1},d(D){D&&k(e),ue(a),ue(y)}}}function wm(l){let e,t,n,s,o,i;const f=[gm,hm,vm],a=[];function c(_,p){return _[13]?0:_[12].length===0?1:2}return n=c(l),s=a[n]=f[n](l),{c(){e=d("p"),e.textContent="Schedule recurring tasks like health checks, auto-restart, and backups.",t=b(),s.c(),o=Fe(),u(e,"class","description svelte-16vnl3x")},m(_,p){$(_,e,p),$(_,t,p),a[n].m(_,p),$(_,o,p),i=!0},p(_,p){let m=n;n=c(_),n===m?a[n].p(_,p):(De(),M(a[m],1,1,()=>{a[m]=null}),Ee(),s=a[n],s?s.p(_,p):(s=a[n]=f[n](_),s.c()),R(s,1),s.m(o.parentNode,o))},i(_){i||(R(s),i=!0)},o(_){M(s),i=!1},d(_){_&&(k(e),k(t),k(o)),a[n].d(_)}}}function $m(l){let e;return{c(){e=T("↻ Refresh")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function Cm(l){let e,t;return e=new Ue({props:{slot:"header",variant:"ghost",size:"sm",$$slots:{default:[$m]},$$scope:{ctx:l}}}),e.$on("click",l[19]),{c(){ce(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const o={};s[1]&16&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(R(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){ue(e,n)}}}function ym(l){let e,t,n,s,o,i,f,a,c,_,p,m,h;return t=new ft({props:{title:"🎨 Appearance",$$slots:{default:[Zp]},$$scope:{ctx:l}}}),s=new ft({props:{title:"⚙️ DigitalOcean Credentials",$$slots:{default:[om]},$$scope:{ctx:l}}}),i=new ft({props:{title:"☁️ Cloudflare Credentials",$$slots:{default:[cm]},$$scope:{ctx:l}}}),a=new ft({props:{title:"🌐 Domain Setup",$$slots:{default:[dm]},$$scope:{ctx:l}}}),_=new ft({props:{title:"🌐 DNS Round-Robin (Cloudflare)",$$slots:{default:[mm]},$$scope:{ctx:l}}}),m=new ft({props:{title:"⏰ Task Scheduler",$$slots:{header:[Cm],default:[wm]},$$scope:{ctx:l}}}),{c(){e=d("div"),ce(t.$$.fragment),n=b(),ce(s.$$.fragment),o=b(),ce(i.$$.fragment),f=b(),ce(a.$$.fragment),c=b(),ce(_.$$.fragment),p=b(),ce(m.$$.fragment),u(e,"class","settings-page svelte-16vnl3x")},m(v,g){$(v,e,g),fe(t,e,null),r(e,n),fe(s,e,null),r(e,o),fe(i,e,null),r(e,f),fe(a,e,null),r(e,c),fe(_,e,null),r(e,p),fe(m,e,null),h=!0},p(v,g){const y={};g[0]&16384|g[1]&16&&(y.$$scope={dirty:g,ctx:v}),t.$set(y);const C={};g[0]&3|g[1]&16&&(C.$$scope={dirty:g,ctx:v}),s.$set(C);const w={};g[0]&12|g[1]&16&&(w.$$scope={dirty:g,ctx:v}),i.$set(w);const S={};g[0]&240|g[1]&16&&(S.$$scope={dirty:g,ctx:v}),a.$set(S);const D={};g[0]&3840|g[1]&16&&(D.$$scope={dirty:g,ctx:v}),_.$set(D);const E={};g[0]&12288|g[1]&16&&(E.$$scope={dirty:g,ctx:v}),m.$set(E)},i(v){h||(R(t.$$.fragment,v),R(s.$$.fragment,v),R(i.$$.fragment,v),R(a.$$.fragment,v),R(_.$$.fragment,v),R(m.$$.fragment,v),h=!0)},o(v){M(t.$$.fragment,v),M(s.$$.fragment,v),M(i.$$.fragment,v),M(a.$$.fragment,v),M(_.$$.fragment,v),M(m.$$.fragment,v),h=!1},d(v){v&&k(e),ue(t),ue(s),ue(i),ue(a),ue(_),ue(m)}}}function Sm(l,e,t){let n;dt(l,$n,K=>t(14,n=K));let s="",o=null,i="",f=null,a="",c="",_=!0,p=null,m="",h="",v=!0,g=null,y=[],C=!1;kl(()=>{w(),S(),q()});async function w(){const K=Ft();if(K){t(0,s=K.substring(0,10)+"...");try{await He("GET","/infra/snapshots"),t(1,o={valid:!0})}catch{t(1,o={valid:!1})}}else t(1,o={valid:!1,missing:!0})}async function S(){const K=zn();K?(t(2,i=K.substring(0,10)+"..."),t(3,f={valid:!0})):t(3,f={valid:!1,missing:!0})}async function D(K){K.preventDefault();const Y=K.target.querySelector("input"),Z=Y.value;if(!Z){$e.error("Token is required");return}C1(Z),Y.value="",$e.success("DigitalOcean token saved"),await w(),Xt.refresh(),jn.refresh(),dn.refresh(),bl.refresh()}async function E(K){K.preventDefault();const Y=K.target.querySelector("input"),Z=Y.value;if(!Z){$e.error("Token is required");return}y1(Z),Y.value="",$e.success("Cloudflare token saved"),await S()}async function P(K){K.preventDefault();try{const Y=await He("POST","/infra/cloudflare/domain",{domain:a,ip:c,proxied:_});t(7,p={success:!0,message:"Domain configured successfully"}),$e.success("Domain setup complete")}catch(Y){t(7,p={success:!1,message:Y.message}),$e.error(Y.message)}}async function z(K){K.preventDefault();try{const Y=h.split(",").map(oe=>oe.trim()).filter(Boolean),Z=await He("POST","/infra/cloudflare/lb",{domain:m,server_ips:Y,proxied:v});t(11,g={success:!0,message:`Created load balancer with ${Y.length} servers`}),$e.success("Load balancer configured")}catch(Y){t(11,g={success:!1,message:Y.message}),$e.error(Y.message)}}async function q(){t(13,C=!0);try{const K=await He("GET","/infra/scheduler/tasks");t(12,y=K.tasks||K||[])}catch{t(12,y=[])}finally{t(13,C=!1)}}async function A(K){if(confirm("Delete this scheduled task?"))try{await He("DELETE",`/infra/scheduler/tasks/${K}`),$e.success("Task deleted"),await q()}catch(Y){$e.error(Y.message)}}function N(){n=_t(this),$n.set(n)}const I=()=>$n.set(n);function G(){a=this.value,t(4,a)}function F(){c=this.value,t(5,c)}function O(){_=this.checked,t(6,_)}function H(){m=this.value,t(8,m)}function L(){h=this.value,t(9,h)}function j(){v=this.checked,t(10,v)}return[s,o,i,f,a,c,_,p,m,h,v,g,y,C,n,D,E,P,z,q,A,N,I,G,F,O,H,L,j,K=>A(K.id)]}class Tm extends Ct{constructor(e){super(),$t(this,e,Sm,ym,kt,{},null,[-1,-1])}}function Sa(l,e,t){const n=l.slice();n[21]=e[t];const s=n[1].filter(function(...a){return l[17](n[21],...a)});n[22]=s;const o=n[21].domain;n[23]=o;const i=n[22].length>1;return n[24]=i,n}function Ta(l,e,t){const n=l.slice();return n[27]=e[t],n}function za(l,e,t){const n=l.slice();return n[21]=e[t],n}function Da(l,e,t){const n=l.slice();return n[32]=e[t],n}function zm(l){let e,t,n,s,o,i,f,a,c,_,p,m,h,v,g,y,C,w,S=l[1].length+"",D,E,P,z,q,A,N,I,G=l[7].length+"",F,O,H,L;const j=[Pm,Lm],B=[];function K(Y,Z){return Y[11]?1:0}return m=K(l),h=B[m]=j[m](l),{c(){e=d("div"),t=d("div"),n=d("div"),n.innerHTML='<span class="summary-icon svelte-odhywp">🔀</span> <span>Nginx Sidecar</span>',s=b(),o=d("div"),i=T(l[3]),f=T("/"),a=T(l[2]),c=b(),_=d("div"),_.textContent="servers with nginx",p=b(),h.c(),v=b(),g=d("div"),y=d("div"),y.innerHTML='<span class="summary-icon svelte-odhywp">🤖</span> <span>Node Agents</span>',C=b(),w=d("div"),D=T(S),E=b(),P=d("div"),P.textContent="servers monitored",z=b(),q=d("div"),A=d("div"),A.innerHTML='<span class="summary-icon svelte-odhywp">📦</span> <span>Services</span>',N=b(),I=d("div"),F=T(G),O=b(),H=d("div"),H.textContent="deployed services",u(n,"class","summary-header svelte-odhywp"),u(o,"class","summary-value svelte-odhywp"),u(_,"class","summary-label svelte-odhywp"),u(t,"class","summary-card svelte-odhywp"),ke(t,"ok",l[11]),ke(t,"warn",!l[11]),u(y,"class","summary-header svelte-odhywp"),u(w,"class","summary-value svelte-odhywp"),u(P,"class","summary-label svelte-odhywp"),u(g,"class","summary-card info svelte-odhywp"),u(A,"class","summary-header svelte-odhywp"),u(I,"class","summary-value svelte-odhywp"),u(H,"class","summary-label svelte-odhywp"),u(q,"class","summary-card info svelte-odhywp"),u(e,"class","summary-grid svelte-odhywp")},m(Y,Z){$(Y,e,Z),r(e,t),r(t,n),r(t,s),r(t,o),r(o,i),r(o,f),r(o,a),r(t,c),r(t,_),r(t,p),B[m].m(t,null),r(e,v),r(e,g),r(g,y),r(g,C),r(g,w),r(w,D),r(g,E),r(g,P),r(e,z),r(e,q),r(q,A),r(q,N),r(q,I),r(I,F),r(q,O),r(q,H),L=!0},p(Y,Z){(!L||Z[0]&8)&&U(i,Y[3]),(!L||Z[0]&4)&&U(a,Y[2]);let oe=m;m=K(Y),m===oe?B[m].p(Y,Z):(De(),M(B[oe],1,1,()=>{B[oe]=null}),Ee(),h=B[m],h?h.p(Y,Z):(h=B[m]=j[m](Y),h.c()),R(h,1),h.m(t,null)),(!L||Z[0]&2048)&&ke(t,"ok",Y[11]),(!L||Z[0]&2048)&&ke(t,"warn",!Y[11]),(!L||Z[0]&2)&&S!==(S=Y[1].length+"")&&U(D,S),(!L||Z[0]&128)&&G!==(G=Y[7].length+"")&&U(F,G)},i(Y){L||(R(h),L=!0)},o(Y){M(h),L=!1},d(Y){Y&&k(e),B[m].d()}}}function Dm(l){let e;return{c(){e=d("div"),e.innerHTML='<p>No services deployed yet</p> <p class="hint svelte-odhywp">Deploy your first service to see the architecture</p>',u(e,"class","empty-state svelte-odhywp")},m(t,n){$(t,e,n)},p:ge,i:ge,o:ge,d(t){t&&k(e)}}}function Em(l){let e,t,n,s,o,i;return{c(){e=d("div"),t=d("p"),n=T("Failed to load: "),s=T(l[9]),o=b(),i=d("p"),i.textContent="Check your connection and try refreshing",u(i,"class","hint svelte-odhywp"),u(e,"class","empty-state svelte-odhywp")},m(f,a){$(f,e,a),r(e,t),r(t,n),r(t,s),r(e,o),r(e,i)},p(f,a){a[0]&512&&U(s,f[9])},i:ge,o:ge,d(f){f&&k(e)}}}function qm(l){let e;return{c(){e=d("div"),e.textContent="Loading architecture...",u(e,"class","empty-state svelte-odhywp")},m(t,n){$(t,e,n)},p:ge,i:ge,o:ge,d(t){t&&k(e)}}}function Lm(l){let e;return{c(){e=d("div"),e.textContent="✅ All servers OK",u(e,"class","summary-ok svelte-odhywp")},m(t,n){$(t,e,n)},p:ge,i:ge,o:ge,d(t){t&&k(e)}}}function Pm(l){let e,t;return e=new Ue({props:{variant:"warning",size:"sm",$$slots:{default:[Rm]},$$scope:{ctx:l}}}),e.$on("click",l[13]),{c(){ce(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const o={};s[0]&12|s[1]&16&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(R(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){ue(e,n)}}}function Rm(l){let e,t=l[2]-l[3]+"",n,s;return{c(){e=T("🔧 Fix "),n=T(t),s=T(" server(s)")},m(o,i){$(o,e,i),$(o,n,i),$(o,s,i)},p(o,i){i[0]&12&&t!==(t=o[2]-o[3]+"")&&U(n,t)},d(o){o&&(k(e),k(n),k(s))}}}function Nm(l){let e,t,n,s;const o=[qm,Em,Dm,zm],i=[];function f(a,c){return a[6]&&!a[10]?0:a[9]?1:a[7].length===0&&a[1].length===0?2:3}return e=f(l),t=i[e]=o[e](l),{c(){t.c(),n=Fe()},m(a,c){i[e].m(a,c),$(a,n,c),s=!0},p(a,c){let _=e;e=f(a),e===_?i[e].p(a,c):(De(),M(i[_],1,1,()=>{i[_]=null}),Ee(),t=i[e],t?t.p(a,c):(t=i[e]=o[e](a),t.c()),R(t,1),t.m(n.parentNode,n))},i(a){s||(R(t),s=!0)},o(a){M(t),s=!1},d(a){a&&k(n),i[e].d(a)}}}function Ea(l){let e,t=l[32]+"",n,s;return{c(){e=d("option"),n=T(t),e.__value=s=l[32],le(e,e.__value)},m(o,i){$(o,e,i),r(e,n)},p(o,i){i[0]&4096&&t!==(t=o[32]+"")&&U(n,t),i[0]&4096&&s!==(s=o[32])&&(e.__value=s,le(e,e.__value))},d(o){o&&k(e)}}}function qa(l){let e,t,n=ja(l[8])+"",s;return{c(){e=d("span"),t=T("Updated "),s=T(n),u(e,"class","last-updated svelte-odhywp")},m(o,i){$(o,e,i),r(e,t),r(e,s)},p(o,i){i[0]&256&&n!==(n=ja(o[8])+"")&&U(s,n)},d(o){o&&k(e)}}}function Mm(l){let e;return{c(){e=T("↻ Refresh")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function jm(l){let e,t,n,s,o,i,f,a,c,_,p,m,h,v,g,y=pe(l[12]||[]),C=[];for(let S=0;S<y.length;S+=1)C[S]=Ea(Da(l,y,S));let w=l[8]&&qa(l);return m=new Ue({props:{variant:"ghost",size:"sm",$$slots:{default:[Mm]},$$scope:{ctx:l}}}),m.$on("click",l[0]),{c(){e=d("div"),t=d("select"),n=d("option"),n.textContent="All Projects";for(let S=0;S<C.length;S+=1)C[S].c();s=b(),o=d("select"),i=d("option"),i.textContent="All Envs",f=d("option"),f.textContent="prod",a=d("option"),a.textContent="staging",c=d("option"),c.textContent="dev",_=b(),w&&w.c(),p=b(),ce(m.$$.fragment),n.__value="",le(n,n.__value),u(t,"class","svelte-odhywp"),l[4]===void 0&&Xe(()=>l[15].call(t)),i.__value="",le(i,i.__value),f.__value="prod",le(f,f.__value),a.__value="staging",le(a,a.__value),c.__value="dev",le(c,c.__value),u(o,"class","svelte-odhywp"),l[5]===void 0&&Xe(()=>l[16].call(o)),u(e,"slot","header"),u(e,"class","filters svelte-odhywp")},m(S,D){$(S,e,D),r(e,t),r(t,n);for(let E=0;E<C.length;E+=1)C[E]&&C[E].m(t,null);Ne(t,l[4],!0),r(e,s),r(e,o),r(o,i),r(o,f),r(o,a),r(o,c),Ne(o,l[5],!0),r(e,_),w&&w.m(e,null),r(e,p),fe(m,e,null),h=!0,v||(g=[X(t,"change",l[15]),X(t,"change",l[14]),X(o,"change",l[16]),X(o,"change",l[14])],v=!0)},p(S,D){if(D[0]&4096){y=pe(S[12]||[]);let P;for(P=0;P<y.length;P+=1){const z=Da(S,y,P);C[P]?C[P].p(z,D):(C[P]=Ea(z),C[P].c(),C[P].m(t,null))}for(;P<C.length;P+=1)C[P].d(1);C.length=y.length}D[0]&4112&&Ne(t,S[4]),D[0]&32&&Ne(o,S[5]),S[8]?w?w.p(S,D):(w=qa(S),w.c(),w.m(e,p)):w&&(w.d(1),w=null);const E={};D[1]&16&&(E.$$scope={dirty:D,ctx:S}),m.$set(E)},i(S){h||(R(m.$$.fragment,S),h=!0)},o(S){M(m.$$.fragment,S),h=!1},d(S){S&&k(e),Me(C,S),w&&w.d(),ue(m),v=!1,We(g)}}}function Am(l){let e,t,n=pe(l[7]),s=[];for(let i=0;i<n.length;i+=1)s[i]=La(za(l,n,i));const o=i=>M(s[i],1,1,()=>{s[i]=null});return{c(){e=d("div");for(let i=0;i<s.length;i+=1)s[i].c();u(e,"class","list svelte-odhywp")},m(i,f){$(i,e,f);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(e,null);t=!0},p(i,f){if(f[0]&128){n=pe(i[7]);let a;for(a=0;a<n.length;a+=1){const c=za(i,n,a);s[a]?(s[a].p(c,f),R(s[a],1)):(s[a]=La(c),s[a].c(),R(s[a],1),s[a].m(e,null))}for(De(),a=n.length;a<s.length;a+=1)o(a);Ee()}},i(i){if(!t){for(let f=0;f<n.length;f+=1)R(s[f]);t=!0}},o(i){s=s.filter(Boolean);for(let f=0;f<s.length;f+=1)M(s[f]);t=!1},d(i){i&&k(e),Me(s,i)}}}function Om(l){let e;return{c(){e=d("div"),e.textContent="No services found",u(e,"class","empty-panel svelte-odhywp")},m(t,n){$(t,e,n)},p:ge,i:ge,o:ge,d(t){t&&k(e)}}}function Im(l){let e=l[21].type+"",t;return{c(){t=T(e)},m(n,s){$(n,t,s)},p(n,s){s[0]&128&&e!==(e=n[21].type+"")&&U(t,e)},d(n){n&&k(t)}}}function La(l){var H,L;let e,t,n=rn(l[21])+"",s,o,i,f,a=l[21].service+"",c,_,p,m=l[21].project+"",h,v,g=l[21].env+"",y,C,w,S,D=(((H=l[21].servers)==null?void 0:H.length)||0)+"",E,P,z,q,A=(((L=l[21].ports)==null?void 0:L.join(", "))||"-")+"",N,I,G,F,O;return G=new Ze({props:{variant:l[21].type==="stateful"?"warning":"info",$$slots:{default:[Im]},$$scope:{ctx:l}}}),{c(){e=d("div"),t=d("div"),s=T(n),o=b(),i=d("div"),f=d("div"),c=T(a),_=b(),p=d("div"),h=T(m),v=T(" / "),y=T(g),C=b(),w=d("div"),S=d("div"),E=T(D),P=T(" server(s)"),z=b(),q=d("div"),N=T(A),I=b(),ce(G.$$.fragment),F=b(),u(t,"class","item-icon svelte-odhywp"),u(f,"class","item-name svelte-odhywp"),u(p,"class","item-meta svelte-odhywp"),u(i,"class","item-info svelte-odhywp"),u(q,"class","ports svelte-odhywp"),u(w,"class","item-stats svelte-odhywp"),u(e,"class","list-item svelte-odhywp")},m(j,B){$(j,e,B),r(e,t),r(t,s),r(e,o),r(e,i),r(i,f),r(f,c),r(i,_),r(i,p),r(p,h),r(p,v),r(p,y),r(e,C),r(e,w),r(w,S),r(S,E),r(S,P),r(w,z),r(w,q),r(q,N),r(e,I),fe(G,e,null),r(e,F),O=!0},p(j,B){var Y,Z;(!O||B[0]&128)&&n!==(n=rn(j[21])+"")&&U(s,n),(!O||B[0]&128)&&a!==(a=j[21].service+"")&&U(c,a),(!O||B[0]&128)&&m!==(m=j[21].project+"")&&U(h,m),(!O||B[0]&128)&&g!==(g=j[21].env+"")&&U(y,g),(!O||B[0]&128)&&D!==(D=(((Y=j[21].servers)==null?void 0:Y.length)||0)+"")&&U(E,D),(!O||B[0]&128)&&A!==(A=(((Z=j[21].ports)==null?void 0:Z.join(", "))||"-")+"")&&U(N,A);const K={};B[0]&128&&(K.variant=j[21].type==="stateful"?"warning":"info"),B[0]&128|B[1]&16&&(K.$$scope={dirty:B,ctx:j}),G.$set(K)},i(j){O||(R(G.$$.fragment,j),O=!0)},o(j){M(G.$$.fragment,j),O=!1},d(j){j&&k(e),ue(G)}}}function Fm(l){let e,t,n,s;const o=[Om,Am],i=[];function f(a,c){return a[7].length===0?0:1}return e=f(l),t=i[e]=o[e](l),{c(){t.c(),n=Fe()},m(a,c){i[e].m(a,c),$(a,n,c),s=!0},p(a,c){let _=e;e=f(a),e===_?i[e].p(a,c):(De(),M(i[_],1,1,()=>{i[_]=null}),Ee(),t=i[e],t?t.p(a,c):(t=i[e]=o[e](a),t.c()),R(t,1),t.m(n.parentNode,n))},i(a){s||(R(t),s=!0)},o(a){M(t),s=!1},d(a){a&&k(n),i[e].d(a)}}}function Um(l){let e,t,n=pe(l[1]),s=[];for(let i=0;i<n.length;i+=1)s[i]=Pa(Ta(l,n,i));const o=i=>M(s[i],1,1,()=>{s[i]=null});return{c(){e=d("div");for(let i=0;i<s.length;i+=1)s[i].c();u(e,"class","list svelte-odhywp")},m(i,f){$(i,e,f);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(e,null);t=!0},p(i,f){if(f[0]&2){n=pe(i[1]);let a;for(a=0;a<n.length;a+=1){const c=Ta(i,n,a);s[a]?(s[a].p(c,f),R(s[a],1)):(s[a]=Pa(c),s[a].c(),R(s[a],1),s[a].m(e,null))}for(De(),a=n.length;a<s.length;a+=1)o(a);Ee()}},i(i){if(!t){for(let f=0;f<n.length;f+=1)R(s[f]);t=!0}},o(i){s=s.filter(Boolean);for(let f=0;f<s.length;f+=1)M(s[f]);t=!1},d(i){i&&k(e),Me(s,i)}}}function Bm(l){let e;return{c(){e=d("div"),e.textContent="No servers found",u(e,"class","empty-panel svelte-odhywp")},m(t,n){$(t,e,n)},p:ge,i:ge,o:ge,d(t){t&&k(e)}}}function Hm(l){let e=an(l[27])?"🔀 nginx":"⚠️ no nginx",t;return{c(){t=T(e)},m(n,s){$(n,t,s)},p(n,s){s[0]&2&&e!==(e=an(n[27])?"🔀 nginx":"⚠️ no nginx")&&U(t,e)},d(n){n&&k(t)}}}function Gm(l){let e,t=(l[27].agent_version||"?")+"",n;return{c(){e=T("🤖 v"),n=T(t)},m(s,o){$(s,e,o),$(s,n,o)},p(s,o){o[0]&2&&t!==(t=(s[27].agent_version||"?")+"")&&U(n,t)},d(s){s&&(k(e),k(n))}}}function Pa(l){let e,t,n=l[27].status==="online"?"🟢":"🔴",s,o,i,f,a=l[27].ip+"",c,_,p,m=(l[27].containers||0)+"",h,v,g,y,C,w,S,D,E;return C=new Ze({props:{variant:an(l[27])?"success":"warning",$$slots:{default:[Hm]},$$scope:{ctx:l}}}),S=new Ze({props:{variant:"info",$$slots:{default:[Gm]},$$scope:{ctx:l}}}),{c(){e=d("div"),t=d("div"),s=T(n),o=b(),i=d("div"),f=d("code"),c=T(a),_=b(),p=d("div"),h=T(m),v=T(" container(s)"),g=b(),y=d("div"),ce(C.$$.fragment),w=b(),ce(S.$$.fragment),D=b(),u(t,"class","item-icon svelte-odhywp"),u(f,"class","server-ip svelte-odhywp"),u(p,"class","item-meta svelte-odhywp"),u(i,"class","item-info svelte-odhywp"),u(y,"class","item-badges svelte-odhywp"),u(e,"class","list-item svelte-odhywp")},m(P,z){$(P,e,z),r(e,t),r(t,s),r(e,o),r(e,i),r(i,f),r(f,c),r(i,_),r(i,p),r(p,h),r(p,v),r(e,g),r(e,y),fe(C,y,null),r(y,w),fe(S,y,null),r(e,D),E=!0},p(P,z){(!E||z[0]&2)&&n!==(n=P[27].status==="online"?"🟢":"🔴")&&U(s,n),(!E||z[0]&2)&&a!==(a=P[27].ip+"")&&U(c,a),(!E||z[0]&2)&&m!==(m=(P[27].containers||0)+"")&&U(h,m);const q={};z[0]&2&&(q.variant=an(P[27])?"success":"warning"),z[0]&2|z[1]&16&&(q.$$scope={dirty:z,ctx:P}),C.$set(q);const A={};z[0]&2|z[1]&16&&(A.$$scope={dirty:z,ctx:P}),S.$set(A)},i(P){E||(R(C.$$.fragment,P),R(S.$$.fragment,P),E=!0)},o(P){M(C.$$.fragment,P),M(S.$$.fragment,P),E=!1},d(P){P&&k(e),ue(C),ue(S)}}}function Vm(l){let e,t,n,s;const o=[Bm,Um],i=[];function f(a,c){return a[1].length===0?0:1}return e=f(l),t=i[e]=o[e](l),{c(){t.c(),n=Fe()},m(a,c){i[e].m(a,c),$(a,n,c),s=!0},p(a,c){let _=e;e=f(a),e===_?i[e].p(a,c):(De(),M(i[_],1,1,()=>{i[_]=null}),Ee(),t=i[e],t?t.p(a,c):(t=i[e]=o[e](a),t.c()),R(t,1),t.m(n.parentNode,n))},i(a){s||(R(t),s=!0)},o(a){M(t),s=!1},d(a){a&&k(n),i[e].d(a)}}}function Wm(l){let e,t,n=pe(l[7]),s=[];for(let i=0;i<n.length;i+=1)s[i]=Ma(Sa(l,n,i));const o=i=>M(s[i],1,1,()=>{s[i]=null});return{c(){e=d("div");for(let i=0;i<s.length;i+=1)s[i].c();u(e,"class","traffic-flow svelte-odhywp")},m(i,f){$(i,e,f);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(e,null);t=!0},p(i,f){if(f[0]&130){n=pe(i[7]);let a;for(a=0;a<n.length;a+=1){const c=Sa(i,n,a);s[a]?(s[a].p(c,f),R(s[a],1)):(s[a]=Ma(c),s[a].c(),R(s[a],1),s[a].m(e,null))}for(De(),a=n.length;a<s.length;a+=1)o(a);Ee()}},i(i){if(!t){for(let f=0;f<n.length;f+=1)R(s[f]);t=!0}},o(i){s=s.filter(Boolean);for(let f=0;f<s.length;f+=1)M(s[f]);t=!1},d(i){i&&k(e),Me(s,i)}}}function Jm(l){let e;return{c(){e=d("div"),e.textContent="Deploy services to see traffic flow",u(e,"class","empty-panel svelte-odhywp")},m(t,n){$(t,e,n)},p:ge,i:ge,o:ge,d(t){t&&k(e)}}}function Km(l){let e=l[21].env+"",t;return{c(){t=T(e)},m(n,s){$(n,t,s)},p(n,s){s[0]&128&&e!==(e=n[21].env+"")&&U(t,e)},d(n){n&&k(t)}}}function Ra(l){let e,t,n,s,o,i,f=l[21].domain+"",a,c,_;return{c(){e=d("div"),t=d("span"),t.textContent="☁️",n=b(),s=d("span"),s.textContent="Cloudflare",o=b(),i=d("span"),a=T(f),c=b(),_=d("div"),_.textContent="→",u(t,"class","svelte-odhywp"),u(s,"class","node-label svelte-odhywp"),u(i,"class","node-detail svelte-odhywp"),u(e,"class","flow-node cloudflare svelte-odhywp"),u(_,"class","flow-arrow svelte-odhywp")},m(p,m){$(p,e,m),r(e,t),r(e,n),r(e,s),r(e,o),r(e,i),r(i,a),$(p,c,m),$(p,_,m)},p(p,m){m[0]&128&&f!==(f=p[21].domain+"")&&U(a,f)},d(p){p&&(k(e),k(c),k(_))}}}function Ym(l){let e;return{c(){e=T("Server")},m(t,n){$(t,e,n)},p:ge,d(t){t&&k(e)}}}function Qm(l){let e,t=l[22].length+"",n,s;return{c(){e=T("⚖️ Load Balanced ("),n=T(t),s=T(")")},m(o,i){$(o,e,i),$(o,n,i),$(o,s,i)},p(o,i){i[0]&130&&t!==(t=o[22].length+"")&&U(n,t)},d(o){o&&(k(e),k(n),k(s))}}}function Na(l){let e,t,n,s=l[21].domain+"",o,i;return{c(){e=d("span"),t=T("Domain: "),n=d("a"),o=T(s),u(n,"href",i="https://"+l[21].domain),u(n,"target","_blank"),u(n,"class","svelte-odhywp")},m(f,a){$(f,e,a),r(e,t),r(e,n),r(n,o)},p(f,a){a[0]&128&&s!==(s=f[21].domain+"")&&U(o,s),a[0]&128&&i!==(i="https://"+f[21].domain)&&u(n,"href",i)},d(f){f&&k(e)}}}function Ma(l){let e,t,n,s=rn(l[21])+"",o,i,f,a=l[21].service+"",c,_,p,m,h,v,g,y,C,w,S,D,E,P,z,q,A,N,I,G,F,O,H,L,j=(l[21].host_port||"8000")+"",B,K,Y,Z,oe,x,J,W=(l[21].container_name||l[21].id)+"",re,V,ie;p=new Ze({props:{variant:l[21].env==="prod"?"danger":"info",$$slots:{default:[Km]},$$scope:{ctx:l}}});let _e=l[23]&&Ra(l);function te(ee,Q){return ee[24]?Qm:Ym}let ve=te(l),ae=ve(l),se=l[23]&&Na(l);return{c(){e=d("div"),t=d("div"),n=d("span"),o=T(s),i=b(),f=d("span"),c=T(a),_=b(),ce(p.$$.fragment),m=b(),h=d("div"),_e&&_e.c(),v=b(),g=d("div"),y=d("span"),y.textContent="🖥️",C=b(),w=d("span"),ae.c(),S=b(),D=d("div"),D.textContent="→",E=b(),P=d("div"),P.innerHTML='<span class="svelte-odhywp">🔀</span> <span class="node-label svelte-odhywp">nginx</span> <span class="node-detail svelte-odhywp">:443</span>',z=b(),q=d("div"),q.textContent="→",A=b(),N=d("div"),I=d("span"),I.textContent="🐳",G=b(),F=d("span"),F.textContent="Container",O=b(),H=d("span"),L=T(":"),B=T(j),K=b(),Y=d("div"),se&&se.c(),Z=b(),oe=d("span"),x=T("Container: "),J=d("code"),re=T(W),V=b(),u(n,"class","flow-icon svelte-odhywp"),u(f,"class","flow-name svelte-odhywp"),u(t,"class","flow-header svelte-odhywp"),u(y,"class","svelte-odhywp"),u(w,"class","node-label svelte-odhywp"),u(g,"class","flow-node server svelte-odhywp"),u(D,"class","flow-arrow svelte-odhywp"),u(P,"class","flow-node nginx svelte-odhywp"),u(q,"class","flow-arrow svelte-odhywp"),u(I,"class","svelte-odhywp"),u(F,"class","node-label svelte-odhywp"),u(H,"class","node-detail svelte-odhywp"),u(N,"class","flow-node container svelte-odhywp"),u(h,"class","flow-path svelte-odhywp"),u(J,"class","svelte-odhywp"),u(Y,"class","flow-details svelte-odhywp"),u(e,"class","flow-card svelte-odhywp")},m(ee,Q){$(ee,e,Q),r(e,t),r(t,n),r(n,o),r(t,i),r(t,f),r(f,c),r(t,_),fe(p,t,null),r(e,m),r(e,h),_e&&_e.m(h,null),r(h,v),r(h,g),r(g,y),r(g,C),r(g,w),ae.m(w,null),r(h,S),r(h,D),r(h,E),r(h,P),r(h,z),r(h,q),r(h,A),r(h,N),r(N,I),r(N,G),r(N,F),r(N,O),r(N,H),r(H,L),r(H,B),r(e,K),r(e,Y),se&&se.m(Y,null),r(Y,Z),r(Y,oe),r(oe,x),r(oe,J),r(J,re),r(e,V),ie=!0},p(ee,Q){(!ie||Q[0]&128)&&s!==(s=rn(ee[21])+"")&&U(o,s),(!ie||Q[0]&128)&&a!==(a=ee[21].service+"")&&U(c,a);const be={};Q[0]&128&&(be.variant=ee[21].env==="prod"?"danger":"info"),Q[0]&128|Q[1]&16&&(be.$$scope={dirty:Q,ctx:ee}),p.$set(be),ee[23]?_e?_e.p(ee,Q):(_e=Ra(ee),_e.c(),_e.m(h,v)):_e&&(_e.d(1),_e=null),ve===(ve=te(ee))&&ae?ae.p(ee,Q):(ae.d(1),ae=ve(ee),ae&&(ae.c(),ae.m(w,null))),(!ie||Q[0]&128)&&j!==(j=(ee[21].host_port||"8000")+"")&&U(B,j),ee[23]?se?se.p(ee,Q):(se=Na(ee),se.c(),se.m(Y,Z)):se&&(se.d(1),se=null),(!ie||Q[0]&128)&&W!==(W=(ee[21].container_name||ee[21].id)+"")&&U(re,W)},i(ee){ie||(R(p.$$.fragment,ee),ie=!0)},o(ee){M(p.$$.fragment,ee),ie=!1},d(ee){ee&&k(e),ue(p),_e&&_e.d(),ae.d(),se&&se.d()}}}function Zm(l){let e,t,n,s;const o=[Jm,Wm],i=[];function f(a,c){return a[7].length===0?0:1}return e=f(l),t=i[e]=o[e](l),{c(){t.c(),n=Fe()},m(a,c){i[e].m(a,c),$(a,n,c),s=!0},p(a,c){let _=e;e=f(a),e===_?i[e].p(a,c):(De(),M(i[_],1,1,()=>{i[_]=null}),Ee(),t=i[e],t?t.p(a,c):(t=i[e]=o[e](a),t.c()),R(t,1),t.m(n.parentNode,n))},i(a){s||(R(t),s=!0)},o(a){M(t),s=!1},d(a){a&&k(n),i[e].d(a)}}}function Xm(l){let e;return{c(){e=d("span"),e.textContent="Request path from client to container",u(e,"slot","header"),u(e,"class","subtitle svelte-odhywp")},m(t,n){$(t,e,n)},p:ge,d(t){t&&k(e)}}}function xm(l){let e,t,n,s,o,i,f,a,c,_;return t=new ft({props:{title:"🏗️ Architecture View",$$slots:{header:[jm],default:[Nm]},$$scope:{ctx:l}}}),o=new ft({props:{title:"📦 Services",padding:!1,$$slots:{default:[Fm]},$$scope:{ctx:l}}}),f=new ft({props:{title:"🖥️ Servers",padding:!1,$$slots:{default:[Vm]},$$scope:{ctx:l}}}),c=new ft({props:{title:"🚦 Traffic Flow",$$slots:{header:[Xm],default:[Zm]},$$scope:{ctx:l}}}),{c(){e=d("div"),ce(t.$$.fragment),n=b(),s=d("div"),ce(o.$$.fragment),i=b(),ce(f.$$.fragment),a=b(),ce(c.$$.fragment),u(s,"class","panels-grid svelte-odhywp"),u(e,"class","architecture-page svelte-odhywp")},m(p,m){$(p,e,m),fe(t,e,null),r(e,n),r(e,s),fe(o,s,null),r(s,i),fe(f,s,null),r(e,a),fe(c,e,null),_=!0},p(p,m){const h={};m[0]&8190|m[1]&16&&(h.$$scope={dirty:m,ctx:p}),t.$set(h);const v={};m[0]&128|m[1]&16&&(v.$$scope={dirty:m,ctx:p}),o.$set(v);const g={};m[0]&2|m[1]&16&&(g.$$scope={dirty:m,ctx:p}),f.$set(g);const y={};m[0]&130|m[1]&16&&(y.$$scope={dirty:m,ctx:p}),c.$set(y)},i(p){_||(R(t.$$.fragment,p),R(o.$$.fragment,p),R(f.$$.fragment,p),R(c.$$.fragment,p),_=!0)},o(p){M(t.$$.fragment,p),M(o.$$.fragment,p),M(f.$$.fragment,p),M(c.$$.fragment,p),_=!1},d(p){p&&k(e),ue(t),ue(o),ue(f),ue(c)}}}function ja(l){return l?l.toLocaleTimeString():""}function rn(l){switch(l.type){case"stateful":return"🗄️";case"frontend":return"🌐";case"api":return"⚡";case"worker":return"⚙️";default:return"📦"}}function an(l){return l.nginx_status==="running"}function ev(l,e,t){let n,s,o,i;dt(l,An,q=>t(12,i=q));let f="",a="",c=!1,_=[],p=[],m=[],h=null,v=null,g=!1,y=null;kl(()=>{g||(C(),y=setInterval(C,6e4))}),sc(()=>{y&&clearInterval(y)});async function C(){g||t(6,c=!0),t(9,v=null);try{const q=Ft();if(!q)throw new Error("DigitalOcean token required");const A=await He("POST","/infra/architecture",{project:f||null,environment:a||null,do_token:q});t(7,_=A.nodes||[]),t(1,p=A.servers||[]),m=A.infrastructure||[],t(8,h=new Date),t(10,g=!0)}catch(q){t(9,v=q.message),g||$e.error("Failed to load architecture: "+q.message)}finally{t(6,c=!1)}}async function w(){const q=p.filter(A=>A.nginx_status!=="running").map(A=>A.ip);if(q.length===0){$e.info("All servers already have nginx running");return}$e.info(`Fixing ${q.length} server(s)...`);try{await He("POST","/infra/nginx/ensure",{server_ips:q}),$e.success("Nginx sidecar installed"),architectureStore.refresh()}catch(A){$e.error(A.message)}}function S(){C()}function D(){C()}function E(){f=_t(this),t(4,f)}function P(){a=_t(this),t(5,a)}const z=(q,A)=>{var N;return(N=q.servers)==null?void 0:N.includes(A.ip)};return l.$$.update=()=>{l.$$.dirty[0]&2&&t(3,n=p.filter(q=>q.nginx_status==="running").length),l.$$.dirty[0]&2&&t(2,s=p.length),l.$$.dirty[0]&12&&t(11,o=n===s)},[D,p,s,n,f,a,c,_,h,v,g,o,i,w,S,E,P,z]}class tv extends Ct{constructor(e){super(),$t(this,e,ev,xm,kt,{refresh:0},null,[-1,-1])}get refresh(){return this.$$.ctx[0]}}function Aa(l,e,t){const n=l.slice();return n[54]=e[t],n}function Oa(l,e,t){const n=l.slice();return n[57]=e[t][0],n[58]=e[t][1],n}function Ia(l,e,t){const n=l.slice();return n[54]=e[t],n[62]=t,n}function Fa(l,e,t){const n=l.slice();return n[63]=e[t],n}function Ua(l,e,t){const n=l.slice();return n[66]=e[t],n}function Ba(l,e,t){const n=l.slice();return n[69]=e[t],n}function Ha(l,e,t){const n=l.slice();return n[72]=e[t],n}function Ga(l,e,t){const n=l.slice();return n[75]=e[t],n}function lv(l){let e,t,n,s,o,i,f,a,c,_,p,m,h,v,g,y,C;return _=new Ue({props:{disabled:l[14],$$slots:{default:[sv]},$$scope:{ctx:l}}}),_.$on("click",l[25]),m=new Ue({props:{variant:l[17]?"primary":"secondary",$$slots:{default:[ov]},$$scope:{ctx:l}}}),m.$on("click",l[26]),v=new Ue({props:{variant:"danger",$$slots:{default:[iv]},$$scope:{ctx:l}}}),v.$on("click",l[27]),{c(){e=d("select"),t=d("option"),t.textContent="All Levels",n=d("option"),n.textContent="DEBUG",s=d("option"),s.textContent="INFO",o=d("option"),o.textContent="WARNING",i=d("option"),i.textContent="ERROR",f=b(),a=d("input"),c=b(),ce(_.$$.fragment),p=b(),ce(m.$$.fragment),h=b(),ce(v.$$.fragment),t.__value="",le(t,t.__value),n.__value="DEBUG",le(n,n.__value),s.__value="INFO",le(s,s.__value),o.__value="WARNING",le(o,o.__value),i.__value="ERROR",le(i,i.__value),u(e,"class","svelte-1ikp7df"),l[15]===void 0&&Xe(()=>l[39].call(e)),u(a,"type","text"),u(a,"placeholder","Search logs..."),u(a,"class","svelte-1ikp7df")},m(w,S){$(w,e,S),r(e,t),r(e,n),r(e,s),r(e,o),r(e,i),Ne(e,l[15],!0),$(w,f,S),$(w,a,S),le(a,l[16]),$(w,c,S),fe(_,w,S),$(w,p,S),fe(m,w,S),$(w,h,S),fe(v,w,S),g=!0,y||(C=[X(e,"change",l[39]),X(e,"change",l[25]),X(a,"input",l[40]),X(a,"keyup",l[41])],y=!0)},p(w,S){S[0]&32768&&Ne(e,w[15]),S[0]&65536&&a.value!==w[16]&&le(a,w[16]);const D={};S[0]&16384&&(D.disabled=w[14]),S[0]&16384|S[2]&65536&&(D.$$scope={dirty:S,ctx:w}),_.$set(D);const E={};S[0]&131072&&(E.variant=w[17]?"primary":"secondary"),S[0]&131072|S[2]&65536&&(E.$$scope={dirty:S,ctx:w}),m.$set(E);const P={};S[2]&65536&&(P.$$scope={dirty:S,ctx:w}),v.$set(P)},i(w){g||(R(_.$$.fragment,w),R(m.$$.fragment,w),R(v.$$.fragment,w),g=!0)},o(w){M(_.$$.fragment,w),M(m.$$.fragment,w),M(v.$$.fragment,w),g=!1},d(w){w&&(k(e),k(f),k(a),k(c),k(p),k(h)),ue(_,w),ue(m,w),ue(v,w),y=!1,We(C)}}}function nv(l){let e,t,n,s,o,i,f,a,c,_;return f=new Ue({props:{disabled:l[1],$$slots:{default:[rv]},$$scope:{ctx:l}}}),f.$on("click",l[30]),{c(){e=d("select"),t=d("option"),t.textContent="Last 1 hour",n=d("option"),n.textContent="Last 6 hours",s=d("option"),s.textContent="Last 24 hours",o=d("option"),o.textContent="Last 7 days",i=b(),ce(f.$$.fragment),t.__value=1,le(t,t.__value),n.__value=6,le(n,n.__value),s.__value=24,le(s,s.__value),o.__value=168,le(o,o.__value),u(e,"class","svelte-1ikp7df"),l[9]===void 0&&Xe(()=>l[38].call(e))},m(p,m){$(p,e,m),r(e,t),r(e,n),r(e,s),r(e,o),Ne(e,l[9],!0),$(p,i,m),fe(f,p,m),a=!0,c||(_=[X(e,"change",l[38]),X(e,"change",l[30])],c=!0)},p(p,m){m[0]&512&&Ne(e,p[9]);const h={};m[0]&2&&(h.disabled=p[1]),m[0]&2|m[2]&65536&&(h.$$scope={dirty:m,ctx:p}),f.$set(h)},i(p){a||(R(f.$$.fragment,p),a=!0)},o(p){M(f.$$.fragment,p),a=!1},d(p){p&&(k(e),k(i)),ue(f,p),c=!1,We(_)}}}function sv(l){let e=l[14]?"⏳":"🔄",t,n;return{c(){t=T(e),n=T(" Refresh")},m(s,o){$(s,t,o),$(s,n,o)},p(s,o){o[0]&16384&&e!==(e=s[14]?"⏳":"🔄")&&U(t,e)},d(s){s&&(k(t),k(n))}}}function ov(l){let e=l[17]?"⏸️ Stop":"▶️ Auto",t;return{c(){t=T(e)},m(n,s){$(n,t,s)},p(n,s){s[0]&131072&&e!==(e=n[17]?"⏸️ Stop":"▶️ Auto")&&U(t,e)},d(n){n&&k(t)}}}function iv(l){let e;return{c(){e=T("🗑️ Clear")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function rv(l){let e=l[1]?"⏳":"🔄",t,n;return{c(){t=T(e),n=T(" Refresh")},m(s,o){$(s,t,o),$(s,n,o)},p(s,o){o[0]&2&&e!==(e=s[1]?"⏳":"🔄")&&U(t,e)},d(s){s&&(k(t),k(n))}}}function Va(l){var I,G;let e,t,n,s,o,i,f,a,c,_,p,m,h,v,g,y,C,w,S,D,E,P,z=l[2]&&Wa(l),q=((G=(I=l[2])==null?void 0:I.slow_endpoints)==null?void 0:G.length)>0&&Ja(l),A=pe(l[6]),N=[];for(let F=0;F<A.length;F+=1)N[F]=Ya(Ha(l,A,F));return C=new Ue({props:{size:"small",$$slots:{default:[mv]},$$scope:{ctx:l}}}),C.$on("click",l[28]),S=new ft({props:{$$slots:{default:[hv]},$$scope:{ctx:l}}}),{c(){z&&z.c(),e=b(),q&&q.c(),t=b(),n=d("div"),s=d("select"),o=d("option"),o.textContent="All services";for(let F=0;F<N.length;F+=1)N[F].c();i=b(),f=d("input"),a=b(),c=d("input"),_=b(),p=d("select"),m=d("option"),m.textContent="All status",h=d("option"),h.textContent="2xx Success",v=d("option"),v.textContent="4xx Client Error",g=d("option"),g.textContent="5xx Server Error",y=b(),ce(C.$$.fragment),w=b(),ce(S.$$.fragment),o.__value="",le(o,o.__value),u(s,"title","Filter by service"),u(s,"class","svelte-1ikp7df"),l[8]===void 0&&Xe(()=>l[44].call(s)),u(f,"type","text"),u(f,"placeholder","Path prefix (e.g., /api/v1/infra)"),u(f,"class","svelte-1ikp7df"),u(c,"type","number"),u(c,"placeholder","Min ms"),u(c,"class","svelte-1ikp7df"),m.__value="",le(m,m.__value),h.__value="2xx",le(h,h.__value),v.__value="4xx",le(v,v.__value),g.__value="5xx",le(g,g.__value),u(p,"class","svelte-1ikp7df"),l[12]===void 0&&Xe(()=>l[47].call(p)),u(n,"class","filters svelte-1ikp7df")},m(F,O){z&&z.m(F,O),$(F,e,O),q&&q.m(F,O),$(F,t,O),$(F,n,O),r(n,s),r(s,o);for(let H=0;H<N.length;H+=1)N[H]&&N[H].m(s,null);Ne(s,l[8],!0),r(n,i),r(n,f),le(f,l[10]),r(n,a),r(n,c),le(c,l[11]),r(n,_),r(n,p),r(p,m),r(p,h),r(p,v),r(p,g),Ne(p,l[12],!0),r(n,y),fe(C,n,null),$(F,w,O),fe(S,F,O),D=!0,E||(P=[X(s,"change",l[44]),X(s,"change",l[30]),X(f,"input",l[45]),X(f,"change",l[28]),X(c,"input",l[46]),X(c,"change",l[28]),X(p,"change",l[47]),X(p,"change",l[28])],E=!0)},p(F,O){var j,B;if(F[2]?z?(z.p(F,O),O[0]&4&&R(z,1)):(z=Wa(F),z.c(),R(z,1),z.m(e.parentNode,e)):z&&(De(),M(z,1,1,()=>{z=null}),Ee()),((B=(j=F[2])==null?void 0:j.slow_endpoints)==null?void 0:B.length)>0?q?(q.p(F,O),O[0]&4&&R(q,1)):(q=Ja(F),q.c(),R(q,1),q.m(t.parentNode,t)):q&&(De(),M(q,1,1,()=>{q=null}),Ee()),O[0]&192){A=pe(F[6]);let K;for(K=0;K<A.length;K+=1){const Y=Ha(F,A,K);N[K]?N[K].p(Y,O):(N[K]=Ya(Y),N[K].c(),N[K].m(s,null))}for(;K<N.length;K+=1)N[K].d(1);N.length=A.length}O[0]&320&&Ne(s,F[8]),O[0]&1024&&f.value!==F[10]&&le(f,F[10]),O[0]&2048&&Kt(c.value)!==F[11]&&le(c,F[11]),O[0]&4096&&Ne(p,F[12]);const H={};O[2]&65536&&(H.$$scope={dirty:O,ctx:F}),C.$set(H);const L={};O[0]&8|O[2]&65536&&(L.$$scope={dirty:O,ctx:F}),S.$set(L)},i(F){D||(R(z),R(q),R(C.$$.fragment,F),R(S.$$.fragment,F),D=!0)},o(F){M(z),M(q),M(C.$$.fragment,F),M(S.$$.fragment,F),D=!1},d(F){F&&(k(e),k(t),k(n),k(w)),z&&z.d(F),q&&q.d(F),Me(N,F),ue(C),ue(S,F),E=!1,We(P)}}}function Wa(l){let e,t,n,s,o,i,f,a,c,_,p,m,h;return t=new ft({props:{$$slots:{default:[av]},$$scope:{ctx:l}}}),s=new ft({props:{$$slots:{default:[fv]},$$scope:{ctx:l}}}),i=new ft({props:{$$slots:{default:[uv]},$$scope:{ctx:l}}}),a=new ft({props:{$$slots:{default:[cv]},$$scope:{ctx:l}}}),_=new ft({props:{$$slots:{default:[_v]},$$scope:{ctx:l}}}),m=new ft({props:{$$slots:{default:[dv]},$$scope:{ctx:l}}}),{c(){e=d("div"),ce(t.$$.fragment),n=b(),ce(s.$$.fragment),o=b(),ce(i.$$.fragment),f=b(),ce(a.$$.fragment),c=b(),ce(_.$$.fragment),p=b(),ce(m.$$.fragment),u(e,"class","overview-grid svelte-1ikp7df")},m(v,g){$(v,e,g),fe(t,e,null),r(e,n),fe(s,e,null),r(e,o),fe(i,e,null),r(e,f),fe(a,e,null),r(e,c),fe(_,e,null),r(e,p),fe(m,e,null),h=!0},p(v,g){const y={};g[0]&4|g[2]&65536&&(y.$$scope={dirty:g,ctx:v}),t.$set(y);const C={};g[0]&4|g[2]&65536&&(C.$$scope={dirty:g,ctx:v}),s.$set(C);const w={};g[0]&4|g[2]&65536&&(w.$$scope={dirty:g,ctx:v}),i.$set(w);const S={};g[0]&4|g[2]&65536&&(S.$$scope={dirty:g,ctx:v}),a.$set(S);const D={};g[0]&4|g[2]&65536&&(D.$$scope={dirty:g,ctx:v}),_.$set(D);const E={};g[0]&4|g[2]&65536&&(E.$$scope={dirty:g,ctx:v}),m.$set(E)},i(v){h||(R(t.$$.fragment,v),R(s.$$.fragment,v),R(i.$$.fragment,v),R(a.$$.fragment,v),R(_.$$.fragment,v),R(m.$$.fragment,v),h=!0)},o(v){M(t.$$.fragment,v),M(s.$$.fragment,v),M(i.$$.fragment,v),M(a.$$.fragment,v),M(_.$$.fragment,v),M(m.$$.fragment,v),h=!1},d(v){v&&k(e),ue(t),ue(s),ue(i),ue(a),ue(_),ue(m)}}}function av(l){let e,t,n,s,o=l[2].total_requests.toLocaleString()+"",i;return{c(){e=d("div"),t=d("span"),t.textContent="Total Requests",n=b(),s=d("span"),i=T(o),u(t,"class","label svelte-1ikp7df"),u(s,"class","value svelte-1ikp7df"),u(e,"class","stat svelte-1ikp7df")},m(f,a){$(f,e,a),r(e,t),r(e,n),r(e,s),r(s,i)},p(f,a){a[0]&4&&o!==(o=f[2].total_requests.toLocaleString()+"")&&U(i,o)},d(f){f&&k(e)}}}function fv(l){let e,t,n,s,o=Lt(l[2].avg_latency_ms)+"",i;return{c(){e=d("div"),t=d("span"),t.textContent="Avg Latency",n=b(),s=d("span"),i=T(o),u(t,"class","label svelte-1ikp7df"),u(s,"class","value svelte-1ikp7df"),u(e,"class","stat svelte-1ikp7df")},m(f,a){$(f,e,a),r(e,t),r(e,n),r(e,s),r(s,i)},p(f,a){a[0]&4&&o!==(o=Lt(f[2].avg_latency_ms)+"")&&U(i,o)},d(f){f&&k(e)}}}function uv(l){let e,t,n,s,o=Lt(l[2].p95_latency_ms)+"",i;return{c(){e=d("div"),t=d("span"),t.textContent="P95 Latency",n=b(),s=d("span"),i=T(o),u(t,"class","label svelte-1ikp7df"),u(s,"class","value svelte-1ikp7df"),u(e,"class","stat svelte-1ikp7df")},m(f,a){$(f,e,a),r(e,t),r(e,n),r(e,s),r(s,i)},p(f,a){a[0]&4&&o!==(o=Lt(f[2].p95_latency_ms)+"")&&U(i,o)},d(f){f&&k(e)}}}function cv(l){let e,t,n,s,o=l[2].error_rate+"",i,f;return{c(){e=d("div"),t=d("span"),t.textContent="Error Rate",n=b(),s=d("span"),i=T(o),f=T("%"),u(t,"class","label svelte-1ikp7df"),u(s,"class","value svelte-1ikp7df"),u(e,"class","stat svelte-1ikp7df"),ke(e,"error",l[2].error_rate>5)},m(a,c){$(a,e,c),r(e,t),r(e,n),r(e,s),r(s,i),r(s,f)},p(a,c){c[0]&4&&o!==(o=a[2].error_rate+"")&&U(i,o),c[0]&4&&ke(e,"error",a[2].error_rate>5)},d(a){a&&k(e)}}}function _v(l){let e,t,n,s,o=l[2].slow_count+"",i,f,a;return{c(){e=d("div"),t=d("span"),t.textContent="Slow Requests",n=b(),s=d("span"),i=T(o),u(t,"class","label svelte-1ikp7df"),u(s,"class","value svelte-1ikp7df"),u(e,"class","stat clickable svelte-1ikp7df")},m(c,_){$(c,e,_),r(e,t),r(e,n),r(e,s),r(s,i),f||(a=[X(e,"click",l[31]),X(e,"keypress",l[31])],f=!0)},p(c,_){_[0]&4&&o!==(o=c[2].slow_count+"")&&U(i,o)},d(c){c&&k(e),f=!1,We(a)}}}function dv(l){let e,t,n,s,o=l[2].error_count+"",i,f,a;return{c(){e=d("div"),t=d("span"),t.textContent="5xx Errors",n=b(),s=d("span"),i=T(o),u(t,"class","label svelte-1ikp7df"),u(s,"class","value svelte-1ikp7df"),u(e,"class","stat clickable svelte-1ikp7df")},m(c,_){$(c,e,_),r(e,t),r(e,n),r(e,s),r(s,i),f||(a=[X(e,"click",l[42]),X(e,"keypress",l[43])],f=!0)},p(c,_){_[0]&4&&o!==(o=c[2].error_count+"")&&U(i,o)},d(c){c&&k(e),f=!1,We(a)}}}function Ja(l){let e,t;return e=new ft({props:{$$slots:{default:[pv]},$$scope:{ctx:l}}}),{c(){ce(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const o={};s[0]&4|s[2]&65536&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(R(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){ue(e,n)}}}function Ka(l){let e,t,n=l[75].path+"",s,o,i,f=Lt(l[75].avg_ms)+"",a,c,_,p=l[75].count+"",m,h;return{c(){e=d("tr"),t=d("td"),s=T(n),o=b(),i=d("td"),a=T(f),c=b(),_=d("td"),m=T(p),h=b(),u(t,"class","path svelte-1ikp7df"),u(i,"class","svelte-1ikp7df"),u(_,"class","svelte-1ikp7df"),u(e,"class","svelte-1ikp7df")},m(v,g){$(v,e,g),r(e,t),r(t,s),r(e,o),r(e,i),r(i,a),r(e,c),r(e,_),r(_,m),r(e,h)},p(v,g){g[0]&4&&n!==(n=v[75].path+"")&&U(s,n),g[0]&4&&f!==(f=Lt(v[75].avg_ms)+"")&&U(a,f),g[0]&4&&p!==(p=v[75].count+"")&&U(m,p)},d(v){v&&k(e)}}}function pv(l){let e,t,n,s,o,i,f=pe(l[2].slow_endpoints.slice(0,5)),a=[];for(let c=0;c<f.length;c+=1)a[c]=Ka(Ga(l,f,c));return{c(){e=d("h3"),e.textContent="🐢 Slowest Endpoints",t=b(),n=d("table"),s=d("thead"),s.innerHTML='<tr class="svelte-1ikp7df"><th class="svelte-1ikp7df">Path</th> <th class="svelte-1ikp7df">Avg</th> <th class="svelte-1ikp7df">Count</th></tr>',o=b(),i=d("tbody");for(let c=0;c<a.length;c+=1)a[c].c();u(e,"class","svelte-1ikp7df"),u(n,"class","mini-table svelte-1ikp7df")},m(c,_){$(c,e,_),$(c,t,_),$(c,n,_),r(n,s),r(n,o),r(n,i);for(let p=0;p<a.length;p+=1)a[p]&&a[p].m(i,null)},p(c,_){if(_[0]&4){f=pe(c[2].slow_endpoints.slice(0,5));let p;for(p=0;p<f.length;p+=1){const m=Ga(c,f,p);a[p]?a[p].p(m,_):(a[p]=Ka(m),a[p].c(),a[p].m(i,null))}for(;p<a.length;p+=1)a[p].d(1);a.length=f.length}},d(c){c&&(k(e),k(t),k(n)),Me(a,c)}}}function Ya(l){let e,t=l[72]+"",n,s,o=l[72]===l[7]?"(current)":"",i,f;return{c(){e=d("option"),n=T(t),s=b(),i=T(o),e.__value=f=l[72],le(e,e.__value)},m(a,c){$(a,e,c),r(e,n),r(e,s),r(e,i)},p(a,c){c[0]&64&&t!==(t=a[72]+"")&&U(n,t),c[0]&192&&o!==(o=a[72]===a[7]?"(current)":"")&&U(i,o),c[0]&64&&f!==(f=a[72])&&(e.__value=f,le(e,e.__value))},d(a){a&&k(e)}}}function mv(l){let e;return{c(){e=T("Apply")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function vv(l){let e;return{c(){e=T("View")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function Qa(l){var x;let e,t,n=vf(l[69].timestamp)+"",s,o,i,f=(l[69].service_name||"-")+"",a,c,_,p,m=l[69].method+"",h,v,g,y,C=(((x=l[69].path)==null?void 0:x.length)>40?l[69].path.slice(0,40)+"...":l[69].path)+"",w,S,D,E,P,z=(l[69].status_code||"-")+"",q,A,N,I,G=Lt(l[69].duration_ms)+"",F,O,H,L=l[69].span_count+"",j,B,K,Y,Z;function oe(){return l[48](l[69])}return Y=new Ue({props:{size:"small",$$slots:{default:[vv]},$$scope:{ctx:l}}}),Y.$on("click",oe),{c(){var J;e=d("tr"),t=d("td"),s=T(n),o=b(),i=d("td"),a=T(f),c=b(),_=d("td"),p=d("span"),h=T(m),g=b(),y=d("td"),w=T(C),D=b(),E=d("td"),P=d("span"),q=T(z),N=b(),I=d("td"),F=T(G),O=b(),H=d("td"),j=T(L),B=b(),K=d("td"),ce(Y.$$.fragment),u(t,"class","time svelte-1ikp7df"),u(i,"class","service svelte-1ikp7df"),u(p,"class",v="method "+((J=l[69].method)==null?void 0:J.toLowerCase())+" svelte-1ikp7df"),u(_,"class","svelte-1ikp7df"),u(y,"class","path svelte-1ikp7df"),u(y,"title",S=l[69].path),u(P,"class",A="status status-"+fn(l[69].status_code)+" svelte-1ikp7df"),u(E,"class","svelte-1ikp7df"),u(I,"class","svelte-1ikp7df"),ke(I,"slow",l[69].duration_ms>1e3),u(H,"class","svelte-1ikp7df"),u(K,"class","svelte-1ikp7df"),u(e,"class","svelte-1ikp7df"),ke(e,"error",l[69].status_code>=500),ke(e,"warning",l[69].status_code>=400&&l[69].status_code<500)},m(J,W){$(J,e,W),r(e,t),r(t,s),r(e,o),r(e,i),r(i,a),r(e,c),r(e,_),r(_,p),r(p,h),r(e,g),r(e,y),r(y,w),r(e,D),r(e,E),r(E,P),r(P,q),r(e,N),r(e,I),r(I,F),r(e,O),r(e,H),r(H,j),r(e,B),r(e,K),fe(Y,K,null),Z=!0},p(J,W){var V,ie;l=J,(!Z||W[0]&8)&&n!==(n=vf(l[69].timestamp)+"")&&U(s,n),(!Z||W[0]&8)&&f!==(f=(l[69].service_name||"-")+"")&&U(a,f),(!Z||W[0]&8)&&m!==(m=l[69].method+"")&&U(h,m),(!Z||W[0]&8&&v!==(v="method "+((V=l[69].method)==null?void 0:V.toLowerCase())+" svelte-1ikp7df"))&&u(p,"class",v),(!Z||W[0]&8)&&C!==(C=(((ie=l[69].path)==null?void 0:ie.length)>40?l[69].path.slice(0,40)+"...":l[69].path)+"")&&U(w,C),(!Z||W[0]&8&&S!==(S=l[69].path))&&u(y,"title",S),(!Z||W[0]&8)&&z!==(z=(l[69].status_code||"-")+"")&&U(q,z),(!Z||W[0]&8&&A!==(A="status status-"+fn(l[69].status_code)+" svelte-1ikp7df"))&&u(P,"class",A),(!Z||W[0]&8)&&G!==(G=Lt(l[69].duration_ms)+"")&&U(F,G),(!Z||W[0]&8)&&ke(I,"slow",l[69].duration_ms>1e3),(!Z||W[0]&8)&&L!==(L=l[69].span_count+"")&&U(j,L);const re={};W[2]&65536&&(re.$$scope={dirty:W,ctx:l}),Y.$set(re),(!Z||W[0]&8)&&ke(e,"error",l[69].status_code>=500),(!Z||W[0]&8)&&ke(e,"warning",l[69].status_code>=400&&l[69].status_code<500)},i(J){Z||(R(Y.$$.fragment,J),Z=!0)},o(J){M(Y.$$.fragment,J),Z=!1},d(J){J&&k(e),ue(Y)}}}function Za(l){let e;return{c(){e=d("tr"),e.innerHTML='<td colspan="8" class="empty svelte-1ikp7df">No requests found</td>',u(e,"class","svelte-1ikp7df")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function hv(l){let e,t,n,s,o,i,f,a,c,_=pe(l[3]),p=[];for(let v=0;v<_.length;v+=1)p[v]=Qa(Ba(l,_,v));const m=v=>M(p[v],1,1,()=>{p[v]=null});let h=l[3].length===0&&Za();return{c(){e=d("h3"),e.textContent="📋 Recent Requests",t=b(),n=d("div"),s=d("table"),o=d("thead"),o.innerHTML='<tr class="svelte-1ikp7df"><th class="svelte-1ikp7df">Time</th> <th class="svelte-1ikp7df">Service</th> <th class="svelte-1ikp7df">Method</th> <th class="svelte-1ikp7df">Path</th> <th class="svelte-1ikp7df">Status</th> <th class="svelte-1ikp7df">Duration</th> <th class="svelte-1ikp7df">Spans</th> <th class="svelte-1ikp7df">Actions</th></tr>',i=b(),f=d("tbody");for(let v=0;v<p.length;v+=1)p[v].c();a=b(),h&&h.c(),u(e,"class","svelte-1ikp7df"),u(s,"class","svelte-1ikp7df"),u(n,"class","table-container svelte-1ikp7df")},m(v,g){$(v,e,g),$(v,t,g),$(v,n,g),r(n,s),r(s,o),r(s,i),r(s,f);for(let y=0;y<p.length;y+=1)p[y]&&p[y].m(f,null);r(f,a),h&&h.m(f,null),c=!0},p(v,g){if(g[0]&536870920){_=pe(v[3]);let y;for(y=0;y<_.length;y+=1){const C=Ba(v,_,y);p[y]?(p[y].p(C,g),R(p[y],1)):(p[y]=Qa(C),p[y].c(),R(p[y],1),p[y].m(f,a))}for(De(),y=_.length;y<p.length;y+=1)m(y);Ee()}v[3].length===0?h||(h=Za(),h.c(),h.m(f,null)):h&&(h.d(1),h=null)},i(v){if(!c){for(let g=0;g<_.length;g+=1)R(p[g]);c=!0}},o(v){p=p.filter(Boolean);for(let g=0;g<p.length;g+=1)M(p[g]);c=!1},d(v){v&&(k(e),k(t),k(n)),Me(p,v),h&&h.d()}}}function Xa(l){let e,t;return e=new ft({props:{$$slots:{default:[wv]},$$scope:{ctx:l}}}),{c(){ce(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const o={};s[0]&24576|s[2]&65536&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(R(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){ue(e,n)}}}function gv(l){let e,t=pe(l[13]),n=[];for(let s=0;s<t.length;s+=1)n[s]=ef(Ua(l,t,s));return{c(){e=d("div");for(let s=0;s<n.length;s+=1)n[s].c();u(e,"class","logs-container svelte-1ikp7df")},m(s,o){$(s,e,o);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(e,null)},p(s,o){if(o[0]&8192){t=pe(s[13]);let i;for(i=0;i<t.length;i+=1){const f=Ua(s,t,i);n[i]?n[i].p(f,o):(n[i]=ef(f),n[i].c(),n[i].m(e,null))}for(;i<n.length;i+=1)n[i].d(1);n.length=t.length}},d(s){s&&k(e),Me(n,s)}}}function bv(l){let e;return{c(){e=d("div"),e.innerHTML='<p>No logs found.</p> <p class="hint svelte-1ikp7df">Logs are captured in memory. They reset when the server restarts.</p>',u(e,"class","empty-logs svelte-1ikp7df")},m(t,n){$(t,e,n)},p:ge,d(t){t&&k(e)}}}function kv(l){let e;return{c(){e=d("div"),e.textContent="Loading logs...",u(e,"class","loading-logs svelte-1ikp7df")},m(t,n){$(t,e,n)},p:ge,d(t){t&&k(e)}}}function xa(l){let e,t,n=l[66].module+"",s,o,i=l[66].funcName+"",f,a,c=l[66].lineno+"",_,p;return{c(){e=d("span"),t=T("("),s=T(n),o=T("."),f=T(i),a=T(":"),_=T(c),p=T(")"),u(e,"class","log-location svelte-1ikp7df")},m(m,h){$(m,e,h),r(e,t),r(e,s),r(e,o),r(e,f),r(e,a),r(e,_),r(e,p)},p(m,h){h[0]&8192&&n!==(n=m[66].module+"")&&U(s,n),h[0]&8192&&i!==(i=m[66].funcName+"")&&U(f,i),h[0]&8192&&c!==(c=m[66].lineno+"")&&U(_,c)},d(m){m&&k(e)}}}function ef(l){var P,z;let e,t,n=(((z=(P=l[66].timestamp)==null?void 0:P.split("T")[1])==null?void 0:z.split(".")[0])||l[66].timestamp)+"",s,o,i,f,a=l[66].level+"",c,_,p,m,h=l[66].logger+"",v,g,y,C=l[66].message+"",w,S,D,E=l[66].module&&l[66].funcName&&xa(l);return{c(){e=d("div"),t=d("span"),s=T(n),o=b(),i=d("span"),f=T("["),c=T(a),_=T("]"),p=b(),m=d("span"),v=T(h),g=b(),y=d("span"),w=T(C),S=b(),E&&E.c(),D=b(),u(t,"class","log-time svelte-1ikp7df"),u(i,"class","log-level svelte-1ikp7df"),qt(i,"color",mf(l[66].level)),u(m,"class","log-logger svelte-1ikp7df"),u(y,"class","log-message svelte-1ikp7df"),u(e,"class","log-entry svelte-1ikp7df"),ke(e,"error",l[66].level==="ERROR"||l[66].level==="CRITICAL"),ke(e,"warning",l[66].level==="WARNING")},m(q,A){$(q,e,A),r(e,t),r(t,s),r(e,o),r(e,i),r(i,f),r(i,c),r(i,_),r(e,p),r(e,m),r(m,v),r(e,g),r(e,y),r(y,w),r(e,S),E&&E.m(e,null),r(e,D)},p(q,A){var N,I;A[0]&8192&&n!==(n=(((I=(N=q[66].timestamp)==null?void 0:N.split("T")[1])==null?void 0:I.split(".")[0])||q[66].timestamp)+"")&&U(s,n),A[0]&8192&&a!==(a=q[66].level+"")&&U(c,a),A[0]&8192&&qt(i,"color",mf(q[66].level)),A[0]&8192&&h!==(h=q[66].logger+"")&&U(v,h),A[0]&8192&&C!==(C=q[66].message+"")&&U(w,C),q[66].module&&q[66].funcName?E?E.p(q,A):(E=xa(q),E.c(),E.m(e,D)):E&&(E.d(1),E=null),A[0]&8192&&ke(e,"error",q[66].level==="ERROR"||q[66].level==="CRITICAL"),A[0]&8192&&ke(e,"warning",q[66].level==="WARNING")},d(q){q&&k(e),E&&E.d()}}}function wv(l){let e,t,n,s,o=l[13].length+"",i,f,a,c;function _(h,v){return h[14]?kv:h[13].length===0?bv:gv}let p=_(l),m=p(l);return{c(){e=d("div"),t=d("h3"),t.textContent="📝 Backend Logs",n=b(),s=d("span"),i=T(o),f=T(" entries"),a=b(),m.c(),c=Fe(),u(t,"class","svelte-1ikp7df"),u(s,"class","log-count svelte-1ikp7df"),u(e,"class","logs-header svelte-1ikp7df")},m(h,v){$(h,e,v),r(e,t),r(e,n),r(e,s),r(s,i),r(s,f),$(h,a,v),m.m(h,v),$(h,c,v)},p(h,v){v[0]&8192&&o!==(o=h[13].length+"")&&U(i,o),p===(p=_(h))&&m?m.p(h,v):(m.d(1),m=p(h),m&&(m.c(),m.m(c.parentNode,c)))},d(h){h&&(k(e),k(a),k(c)),m.d(h)}}}function tf(l){let e,t;return e=new ft({props:{$$slots:{default:[zv]},$$scope:{ctx:l}}}),{c(){ce(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const o={};s[0]&3932160|s[2]&65536&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(R(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){ue(e,n)}}}function $v(l){let e,t,n,s,o,i=l[18].path+"",f,a,c,_,p,m,h=l[18].exists?"✅ Exists":"❌ Not found",v,g,y=l[18].exists&&lf(l);return{c(){e=d("div"),t=d("div"),n=d("span"),n.textContent="Path:",s=b(),o=d("code"),f=T(i),a=b(),c=d("div"),_=d("span"),_.textContent="Status:",p=b(),m=d("span"),v=T(h),g=b(),y&&y.c(),u(n,"class","label svelte-1ikp7df"),u(o,"class","svelte-1ikp7df"),u(t,"class","db-info-row svelte-1ikp7df"),u(_,"class","label svelte-1ikp7df"),u(m,"class","status-badge svelte-1ikp7df"),ke(m,"exists",l[18].exists),u(c,"class","db-info-row svelte-1ikp7df"),u(e,"class","db-info svelte-1ikp7df")},m(C,w){$(C,e,w),r(e,t),r(t,n),r(t,s),r(t,o),r(o,f),r(e,a),r(e,c),r(c,_),r(c,p),r(c,m),r(m,v),r(e,g),y&&y.m(e,null)},p(C,w){w[0]&262144&&i!==(i=C[18].path+"")&&U(f,i),w[0]&262144&&h!==(h=C[18].exists?"✅ Exists":"❌ Not found")&&U(v,h),w[0]&262144&&ke(m,"exists",C[18].exists),C[18].exists?y?y.p(C,w):(y=lf(C),y.c(),y.m(e,null)):y&&(y.d(1),y=null)},d(C){C&&k(e),y&&y.d()}}}function Cv(l){let e;return{c(){e=d("div"),e.textContent="Loading database info...",u(e,"class","loading-db svelte-1ikp7df")},m(t,n){$(t,e,n)},p:ge,d(t){t&&k(e)}}}function lf(l){let e,t,n,s,o=l[18].size_human+"",i,f,a,c,_,p,m=l[18].modified+"",h;return{c(){e=d("div"),t=d("span"),t.textContent="Size:",n=b(),s=d("span"),i=T(o),f=b(),a=d("div"),c=d("span"),c.textContent="Modified:",_=b(),p=d("span"),h=T(m),u(t,"class","label svelte-1ikp7df"),u(e,"class","db-info-row svelte-1ikp7df"),u(c,"class","label svelte-1ikp7df"),u(a,"class","db-info-row svelte-1ikp7df")},m(v,g){$(v,e,g),r(e,t),r(e,n),r(e,s),r(s,i),$(v,f,g),$(v,a,g),r(a,c),r(a,_),r(a,p),r(p,h)},p(v,g){g[0]&262144&&o!==(o=v[18].size_human+"")&&U(i,o),g[0]&262144&&m!==(m=v[18].modified+"")&&U(h,m)},d(v){v&&(k(e),k(f),k(a))}}}function yv(l){let e;return{c(){e=T("📥 Download Database")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function Sv(l){let e=l[20]?"⏳ Uploading...":"📤 Upload & Replace",t;return{c(){t=T(e)},m(n,s){$(n,t,s)},p(n,s){s[0]&1048576&&e!==(e=n[20]?"⏳ Uploading...":"📤 Upload & Replace")&&U(t,e)},d(n){n&&k(t)}}}function Tv(l){let e;return{c(){e=T("🔄 Refresh Info")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function zv(l){var j;let e,t,n,s,o,i,f,a,c,_,p,m,h,v,g,y,C,w,S,D,E,P,z,q,A,N,I,G,F;function O(B,K){if(B[19])return Cv;if(B[18])return $v}let H=O(l),L=H&&H(l);return h=new Ue({props:{disabled:!((j=l[18])!=null&&j.exists),$$slots:{default:[yv]},$$scope:{ctx:l}}}),h.$on("click",l[23]),z=new Ue({props:{disabled:l[20],variant:"danger",$$slots:{default:[Sv]},$$scope:{ctx:l}}}),z.$on("click",l[24]),G=new Ue({props:{disabled:l[19],$$slots:{default:[Tv]},$$scope:{ctx:l}}}),G.$on("click",l[22]),{c(){e=d("div"),t=d("h3"),t.textContent="🗄️ Database Management",n=b(),s=d("p"),s.textContent="⚠️ Dev phase only - Use with caution!",o=b(),L&&L.c(),i=b(),f=d("div"),a=d("div"),c=d("h4"),c.textContent="📥 Download",_=b(),p=d("p"),p.textContent="Download the current database to your local machine.",m=b(),ce(h.$$.fragment),v=b(),g=d("div"),y=d("h4"),y.textContent="📤 Upload",C=b(),w=d("p"),w.textContent="Upload a database file to replace the server's database.",S=b(),D=d("div"),E=d("input"),P=b(),ce(z.$$.fragment),q=b(),A=d("p"),A.textContent="⚠️ This will REPLACE the entire database. Download a backup first!",N=b(),I=d("div"),ce(G.$$.fragment),u(t,"class","svelte-1ikp7df"),u(s,"class","db-warning svelte-1ikp7df"),u(c,"class","svelte-1ikp7df"),u(p,"class","svelte-1ikp7df"),u(a,"class","action-group svelte-1ikp7df"),u(y,"class","svelte-1ikp7df"),u(w,"class","svelte-1ikp7df"),u(E,"type","file"),u(E,"accept",".db"),u(E,"class","file-input svelte-1ikp7df"),u(D,"class","upload-controls svelte-1ikp7df"),u(A,"class","upload-warning svelte-1ikp7df"),u(g,"class","action-group svelte-1ikp7df"),u(f,"class","db-actions svelte-1ikp7df"),u(I,"class","db-footer svelte-1ikp7df"),u(e,"class","db-section svelte-1ikp7df")},m(B,K){$(B,e,K),r(e,t),r(e,n),r(e,s),r(e,o),L&&L.m(e,null),r(e,i),r(e,f),r(f,a),r(a,c),r(a,_),r(a,p),r(a,m),fe(h,a,null),r(f,v),r(f,g),r(g,y),r(g,C),r(g,w),r(g,S),r(g,D),r(D,E),l[49](E),r(D,P),fe(z,D,null),r(g,q),r(g,A),r(e,N),r(e,I),fe(G,I,null),F=!0},p(B,K){var x;H===(H=O(B))&&L?L.p(B,K):(L&&L.d(1),L=H&&H(B),L&&(L.c(),L.m(e,i)));const Y={};K[0]&262144&&(Y.disabled=!((x=B[18])!=null&&x.exists)),K[2]&65536&&(Y.$$scope={dirty:K,ctx:B}),h.$set(Y);const Z={};K[0]&1048576&&(Z.disabled=B[20]),K[0]&1048576|K[2]&65536&&(Z.$$scope={dirty:K,ctx:B}),z.$set(Z);const oe={};K[0]&524288&&(oe.disabled=B[19]),K[2]&65536&&(oe.$$scope={dirty:K,ctx:B}),G.$set(oe)},i(B){F||(R(h.$$.fragment,B),R(z.$$.fragment,B),R(G.$$.fragment,B),F=!0)},o(B){M(h.$$.fragment,B),M(z.$$.fragment,B),M(G.$$.fragment,B),F=!1},d(B){B&&k(e),L&&L.d(),ue(h),l[49](null),ue(z),ue(G)}}}function nf(l){let e,t;return e=new ol({props:{open:!0,title:"Request Detail",width:"800px",$$slots:{default:[Dv]},$$scope:{ctx:l}}}),e.$on("close",l[50]),{c(){ce(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const o={};s[0]&16|s[2]&65536&&(o.$$scope={dirty:s,ctx:n}),e.$set(o)},i(n){t||(R(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){ue(e,n)}}}function sf(l){let e,t=l[4].service_name+"",n;return{c(){e=d("span"),n=T(t),u(e,"class","service-badge svelte-1ikp7df")},m(s,o){$(s,e,o),r(e,n)},p(s,o){o[0]&16&&t!==(t=s[4].service_name+"")&&U(n,t)},d(s){s&&k(e)}}}function of(l){let e,t,n=l[4].error+"",s;return{c(){e=d("div"),t=T("⚠️ "),s=T(n),u(e,"class","error-box svelte-1ikp7df")},m(o,i){$(o,e,i),r(e,t),r(e,s)},p(o,i){i[0]&16&&n!==(n=o[4].error+"")&&U(s,n)},d(o){o&&k(e)}}}function rf(l){let e,t,n=l[4].user_id+"",s;return{c(){e=d("span"),t=T("User: "),s=T(n)},m(o,i){$(o,e,i),r(e,t),r(e,s)},p(o,i){i[0]&16&&n!==(n=o[4].user_id+"")&&U(s,n)},d(o){o&&k(e)}}}function af(l){let e,t,n,s=l[63].name+"",o,i,f,a,c,_=Lt(l[63].duration_ms)+"",p,m;return{c(){e=d("div"),t=d("div"),n=T("└─ "),o=T(s),f=b(),a=d("div"),c=d("div"),p=T(_),m=b(),u(t,"class","span-name svelte-1ikp7df"),u(t,"title",i=l[63].name),u(c,"class","span-bar child-bar svelte-1ikp7df"),qt(c,"width",un(l[63],l[4].total_ms)+"%"),ke(c,"error",l[63].error),u(a,"class","span-bar-container svelte-1ikp7df"),u(e,"class","span-row child svelte-1ikp7df")},m(h,v){$(h,e,v),r(e,t),r(t,n),r(t,o),r(e,f),r(e,a),r(a,c),r(c,p),r(e,m)},p(h,v){v[0]&16&&s!==(s=h[63].name+"")&&U(o,s),v[0]&16&&i!==(i=h[63].name)&&u(t,"title",i),v[0]&16&&_!==(_=Lt(h[63].duration_ms)+"")&&U(p,_),v[0]&16&&qt(c,"width",un(h[63],h[4].total_ms)+"%"),v[0]&16&&ke(c,"error",h[63].error)},d(h){h&&k(e)}}}function ff(l){let e,t,n=l[54].name+"",s,o,i,f,a,c=Lt(l[54].duration_ms)+"",_,p,m,h=pe(l[54].children||[]),v=[];for(let g=0;g<h.length;g+=1)v[g]=af(Fa(l,h,g));return{c(){e=d("div"),t=d("div"),s=T(n),i=b(),f=d("div"),a=d("div"),_=T(c),p=b();for(let g=0;g<v.length;g+=1)v[g].c();m=Fe(),u(t,"class","span-name svelte-1ikp7df"),u(t,"title",o=l[54].name),u(a,"class","span-bar svelte-1ikp7df"),qt(a,"width",un(l[54],l[4].total_ms)+"%"),ke(a,"error",l[54].error),u(f,"class","span-bar-container svelte-1ikp7df"),u(e,"class","span-row svelte-1ikp7df")},m(g,y){$(g,e,y),r(e,t),r(t,s),r(e,i),r(e,f),r(f,a),r(a,_),$(g,p,y);for(let C=0;C<v.length;C+=1)v[C]&&v[C].m(g,y);$(g,m,y)},p(g,y){if(y[0]&16&&n!==(n=g[54].name+"")&&U(s,n),y[0]&16&&o!==(o=g[54].name)&&u(t,"title",o),y[0]&16&&c!==(c=Lt(g[54].duration_ms)+"")&&U(_,c),y[0]&16&&qt(a,"width",un(g[54],g[4].total_ms)+"%"),y[0]&16&&ke(a,"error",g[54].error),y[0]&16){h=pe(g[54].children||[]);let C;for(C=0;C<h.length;C+=1){const w=Fa(g,h,C);v[C]?v[C].p(w,y):(v[C]=af(w),v[C].c(),v[C].m(m.parentNode,m))}for(;C<v.length;C+=1)v[C].d(1);v.length=h.length}},d(g){g&&(k(e),k(p),k(m)),Me(v,g)}}}function uf(l){let e,t,n,s=pe(l[4].spans),o=[];for(let i=0;i<s.length;i+=1)o[i]=pf(Aa(l,s,i));return{c(){e=d("h4"),e.textContent="Span Details",t=b(),n=d("div");for(let i=0;i<o.length;i+=1)o[i].c();u(e,"class","svelte-1ikp7df"),u(n,"class","spans-details svelte-1ikp7df")},m(i,f){$(i,e,f),$(i,t,f),$(i,n,f);for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(n,null)},p(i,f){if(f[0]&16){s=pe(i[4].spans);let a;for(a=0;a<s.length;a+=1){const c=Aa(i,s,a);o[a]?o[a].p(c,f):(o[a]=pf(c),o[a].c(),o[a].m(n,null))}for(;a<o.length;a+=1)o[a].d(1);o.length=s.length}},d(i){i&&(k(e),k(t),k(n)),Me(o,i)}}}function cf(l){let e;return{c(){e=d("span"),e.textContent="ERROR",u(e,"class","error-badge svelte-1ikp7df")},m(t,n){$(t,e,n)},d(t){t&&k(e)}}}function _f(l){let e,t,n=l[57]+"",s,o,i,f,a=(typeof l[58]=="object"?JSON.stringify(l[58]):l[58])+"",c;return{c(){e=d("div"),t=d("span"),s=T(n),o=T(":"),i=b(),f=d("span"),c=T(a),u(t,"class","key svelte-1ikp7df"),u(f,"class","value svelte-1ikp7df"),u(e,"class","attr svelte-1ikp7df")},m(_,p){$(_,e,p),r(e,t),r(t,s),r(t,o),r(e,i),r(e,f),r(f,c)},p(_,p){p[0]&16&&n!==(n=_[57]+"")&&U(s,n),p[0]&16&&a!==(a=(typeof _[58]=="object"?JSON.stringify(_[58]):_[58])+"")&&U(c,a)},d(_){_&&k(e)}}}function df(l){let e,t,n,s,o=l[54].error+"",i;return{c(){e=d("div"),t=d("span"),t.textContent="error:",n=b(),s=d("span"),i=T(o),u(t,"class","key svelte-1ikp7df"),u(s,"class","value svelte-1ikp7df"),u(e,"class","attr error svelte-1ikp7df")},m(f,a){$(f,e,a),r(e,t),r(e,n),r(e,s),r(s,i)},p(f,a){a[0]&16&&o!==(o=f[54].error+"")&&U(i,o)},d(f){f&&k(e)}}}function pf(l){let e,t,n,s=l[54].kind+"",o,i,f=l[54].name+"",a,c,_=Lt(l[54].duration_ms)+"",p,m,h,v,g,y,C=l[54].error&&cf(),w=pe(Object.entries(l[54].attributes)),S=[];for(let E=0;E<w.length;E+=1)S[E]=_f(Oa(l,w,E));let D=l[54].error&&df(l);return{c(){e=d("details"),t=d("summary"),n=d("span"),o=T(s),i=b(),a=T(f),c=T(" - "),p=T(_),m=b(),C&&C.c(),h=b(),v=d("div");for(let E=0;E<S.length;E+=1)S[E].c();g=b(),D&&D.c(),y=b(),u(n,"class","span-kind svelte-1ikp7df"),u(t,"class","svelte-1ikp7df"),u(v,"class","span-attrs svelte-1ikp7df"),u(e,"class","svelte-1ikp7df")},m(E,P){$(E,e,P),r(e,t),r(t,n),r(n,o),r(t,i),r(t,a),r(t,c),r(t,p),r(t,m),C&&C.m(t,null),r(e,h),r(e,v);for(let z=0;z<S.length;z+=1)S[z]&&S[z].m(v,null);r(v,g),D&&D.m(v,null),r(e,y)},p(E,P){if(P[0]&16&&s!==(s=E[54].kind+"")&&U(o,s),P[0]&16&&f!==(f=E[54].name+"")&&U(a,f),P[0]&16&&_!==(_=Lt(E[54].duration_ms)+"")&&U(p,_),E[54].error?C||(C=cf(),C.c(),C.m(t,null)):C&&(C.d(1),C=null),P[0]&16){w=pe(Object.entries(E[54].attributes));let z;for(z=0;z<w.length;z+=1){const q=Oa(E,w,z);S[z]?S[z].p(q,P):(S[z]=_f(q),S[z].c(),S[z].m(v,g))}for(;z<S.length;z+=1)S[z].d(1);S.length=w.length}E[54].error?D?D.p(E,P):(D=df(E),D.c(),D.m(v,null)):D&&(D.d(1),D=null)},d(E){E&&k(e),C&&C.d(),Me(S,E),D&&D.d()}}}function Dv(l){let e,t,n,s,o=l[4].method+"",i,f,a,c,_=l[4].path+"",p,m,h,v=l[4].status_code+"",g,y,C,w,S=Lt(l[4].duration_ms)+"",D,E,P,z,q,A,N,I=l[4].request_id+"",G,F,O,H,L,j=l[4].timestamp+"",B,K,Y,Z,oe=l[4].spans.length+"",x,J,W,re,V,ie=l[4].service_name&&sf(l),_e=l[4].error&&of(l),te=l[4].user_id&&rf(l),ve=pe(l[4].spans),ae=[];for(let ee=0;ee<ve.length;ee+=1)ae[ee]=ff(Ia(l,ve,ee));let se=l[4].spans.length>0&&uf(l);return{c(){var ee;e=d("div"),t=d("div"),ie&&ie.c(),n=b(),s=d("span"),i=T(o),a=b(),c=d("span"),p=T(_),m=b(),h=d("span"),g=T(v),C=b(),w=d("span"),D=T(S),E=b(),_e&&_e.c(),P=b(),z=d("div"),q=d("span"),A=T("Request ID: "),N=d("code"),G=T(I),F=b(),te&&te.c(),O=b(),H=d("span"),L=T("Time: "),B=T(j),K=b(),Y=d("h4"),Z=T("Timeline ("),x=T(oe),J=T(" spans)"),W=b(),re=d("div");for(let Q=0;Q<ae.length;Q+=1)ae[Q].c();V=b(),se&&se.c(),u(s,"class",f="method "+((ee=l[4].method)==null?void 0:ee.toLowerCase())+" svelte-1ikp7df"),u(c,"class","path svelte-1ikp7df"),u(h,"class",y="status status-"+fn(l[4].status_code)+" svelte-1ikp7df"),u(w,"class","duration svelte-1ikp7df"),u(t,"class","trace-header svelte-1ikp7df"),u(N,"class","svelte-1ikp7df"),u(z,"class","trace-meta svelte-1ikp7df"),u(Y,"class","svelte-1ikp7df"),u(re,"class","spans-timeline svelte-1ikp7df"),u(e,"class","trace-detail svelte-1ikp7df")},m(ee,Q){$(ee,e,Q),r(e,t),ie&&ie.m(t,null),r(t,n),r(t,s),r(s,i),r(t,a),r(t,c),r(c,p),r(t,m),r(t,h),r(h,g),r(t,C),r(t,w),r(w,D),r(e,E),_e&&_e.m(e,null),r(e,P),r(e,z),r(z,q),r(q,A),r(q,N),r(N,G),r(z,F),te&&te.m(z,null),r(z,O),r(z,H),r(H,L),r(H,B),r(e,K),r(e,Y),r(Y,Z),r(Y,x),r(Y,J),r(e,W),r(e,re);for(let be=0;be<ae.length;be+=1)ae[be]&&ae[be].m(re,null);r(e,V),se&&se.m(e,null)},p(ee,Q){var be;if(ee[4].service_name?ie?ie.p(ee,Q):(ie=sf(ee),ie.c(),ie.m(t,n)):ie&&(ie.d(1),ie=null),Q[0]&16&&o!==(o=ee[4].method+"")&&U(i,o),Q[0]&16&&f!==(f="method "+((be=ee[4].method)==null?void 0:be.toLowerCase())+" svelte-1ikp7df")&&u(s,"class",f),Q[0]&16&&_!==(_=ee[4].path+"")&&U(p,_),Q[0]&16&&v!==(v=ee[4].status_code+"")&&U(g,v),Q[0]&16&&y!==(y="status status-"+fn(ee[4].status_code)+" svelte-1ikp7df")&&u(h,"class",y),Q[0]&16&&S!==(S=Lt(ee[4].duration_ms)+"")&&U(D,S),ee[4].error?_e?_e.p(ee,Q):(_e=of(ee),_e.c(),_e.m(e,P)):_e&&(_e.d(1),_e=null),Q[0]&16&&I!==(I=ee[4].request_id+"")&&U(G,I),ee[4].user_id?te?te.p(ee,Q):(te=rf(ee),te.c(),te.m(z,O)):te&&(te.d(1),te=null),Q[0]&16&&j!==(j=ee[4].timestamp+"")&&U(B,j),Q[0]&16&&oe!==(oe=ee[4].spans.length+"")&&U(x,oe),Q[0]&16){ve=pe(ee[4].spans);let we;for(we=0;we<ve.length;we+=1){const Ge=Ia(ee,ve,we);ae[we]?ae[we].p(Ge,Q):(ae[we]=ff(Ge),ae[we].c(),ae[we].m(re,null))}for(;we<ae.length;we+=1)ae[we].d(1);ae.length=ve.length}ee[4].spans.length>0?se?se.p(ee,Q):(se=uf(ee),se.c(),se.m(e,null)):se&&(se.d(1),se=null)},d(ee){ee&&k(e),ie&&ie.d(),_e&&_e.d(),te&&te.d(),Me(ae,ee),se&&se.d()}}}function Ev(l){let e,t,n,s,o,i,f,a,c,_,p,m,h,v,g,y,C,w,S,D,E,P,z,q;const A=[nv,lv],N=[];function I(L,j){return L[0]==="tracing"?0:1}g=I(l),y=N[g]=A[g](l);let G=l[0]==="tracing"&&Va(l),F=l[0]==="logs"&&Xa(l),O=l[0]==="database"&&tf(l),H=l[5]&&l[4]&&nf(l);return{c(){e=d("div"),t=d("div"),n=d("h2"),n.textContent="🔍 Telemetry Dashboard",s=b(),o=d("div"),i=d("button"),i.textContent="📊 Request Tracing",f=b(),a=d("button"),a.textContent="📝 Backend Logs",c=b(),_=d("button"),_.textContent="🗄️ Database",p=b(),m=d("button"),m.textContent="🗄️ Database",h=b(),v=d("div"),y.c(),C=b(),G&&G.c(),w=b(),F&&F.c(),S=b(),O&&O.c(),D=b(),H&&H.c(),E=Fe(),u(n,"class","svelte-1ikp7df"),u(i,"class","tab svelte-1ikp7df"),ke(i,"active",l[0]==="tracing"),u(a,"class","tab svelte-1ikp7df"),ke(a,"active",l[0]==="logs"),u(_,"class","tab svelte-1ikp7df"),ke(_,"active",l[0]==="database"),u(m,"class","tab svelte-1ikp7df"),ke(m,"active",l[0]==="database"),u(o,"class","tabs svelte-1ikp7df"),u(v,"class","controls svelte-1ikp7df"),u(t,"class","header svelte-1ikp7df"),u(e,"class","telemetry svelte-1ikp7df")},m(L,j){$(L,e,j),r(e,t),r(t,n),r(t,s),r(t,o),r(o,i),r(o,f),r(o,a),r(o,c),r(o,_),r(o,p),r(o,m),r(t,h),r(t,v),N[g].m(v,null),r(e,C),G&&G.m(e,null),r(e,w),F&&F.m(e,null),r(e,S),O&&O.m(e,null),$(L,D,j),H&&H.m(L,j),$(L,E,j),P=!0,z||(q=[X(i,"click",l[34]),X(a,"click",l[35]),X(_,"click",l[36]),X(m,"click",l[37])],z=!0)},p(L,j){(!P||j[0]&1)&&ke(i,"active",L[0]==="tracing"),(!P||j[0]&1)&&ke(a,"active",L[0]==="logs"),(!P||j[0]&1)&&ke(_,"active",L[0]==="database"),(!P||j[0]&1)&&ke(m,"active",L[0]==="database");let B=g;g=I(L),g===B?N[g].p(L,j):(De(),M(N[B],1,1,()=>{N[B]=null}),Ee(),y=N[g],y?y.p(L,j):(y=N[g]=A[g](L),y.c()),R(y,1),y.m(v,null)),L[0]==="tracing"?G?(G.p(L,j),j[0]&1&&R(G,1)):(G=Va(L),G.c(),R(G,1),G.m(e,w)):G&&(De(),M(G,1,1,()=>{G=null}),Ee()),L[0]==="logs"?F?(F.p(L,j),j[0]&1&&R(F,1)):(F=Xa(L),F.c(),R(F,1),F.m(e,S)):F&&(De(),M(F,1,1,()=>{F=null}),Ee()),L[0]==="database"?O?(O.p(L,j),j[0]&1&&R(O,1)):(O=tf(L),O.c(),R(O,1),O.m(e,null)):O&&(De(),M(O,1,1,()=>{O=null}),Ee()),L[5]&&L[4]?H?(H.p(L,j),j[0]&48&&R(H,1)):(H=nf(L),H.c(),R(H,1),H.m(E.parentNode,E)):H&&(De(),M(H,1,1,()=>{H=null}),Ee())},i(L){P||(R(y),R(G),R(F),R(O),R(H),P=!0)},o(L){M(y),M(G),M(F),M(O),M(H),P=!1},d(L){L&&(k(e),k(D),k(E)),N[g].d(),G&&G.d(),F&&F.d(),O&&O.d(),H&&H.d(L),z=!1,We(q)}}}let qv=50,Lv=200;function mf(l){switch(l){case"DEBUG":return"#888";case"INFO":return"#4CAF50";case"WARNING":return"#ff9800";case"ERROR":return"#f44336";case"CRITICAL":return"#9c27b0";default:return"#888"}}function Lt(l){return l?l<1e3?`${Math.round(l)}ms`:`${(l/1e3).toFixed(2)}s`:"-"}function vf(l){return l?new Date(l).toLocaleTimeString():"-"}function fn(l){return l?l<300?"green":l<400?"blue":l<500?"yellow":"red":"gray"}function un(l,e){return!l.duration_ms||!e?0:Math.max(2,l.duration_ms/e*100)}function Pv(l,e,t){let n="tracing",s=!0,o=null,i=[],f=null,a=!1,c=[],_="",p="",m=24,h="",v="",g="",y=[],C=!1,w="",S="",D=!1,E=null,P=null,z=!1,q=!1,A;async function N(){t(19,z=!0);try{t(18,P=await He("GET","/admin/db/info"))}catch(qe){$e.error(`Failed to load db info: ${qe.message}`),t(18,P=null)}t(19,z=!1)}async function I(){try{const qe=localStorage.getItem("token"),Se=await fetch(`${window.API_BASE_URL||""}/api/v1/admin/db/download`,{headers:{Authorization:`Bearer ${qe}`}});if(!Se.ok)throw new Error(`Download failed: ${Se.status}`);const Ae=await Se.blob(),me=URL.createObjectURL(Ae),Le=document.createElement("a");Le.href=me,Le.download="deploy.db",document.body.appendChild(Le),Le.click(),document.body.removeChild(Le),URL.revokeObjectURL(me),$e.success("Database downloaded")}catch(qe){$e.error(`Download failed: ${qe.message}`)}}async function G(){var Se;const qe=(Se=A==null?void 0:A.files)==null?void 0:Se[0];if(!qe){$e.error("Please select a file first");return}if(!qe.name.endsWith(".db")){$e.error("File must be a .db SQLite database");return}if(confirm("This will REPLACE the entire database! Make sure you downloaded a backup first. Continue?")){t(20,q=!0);try{const Ae=new FormData;Ae.append("file",qe);const me=localStorage.getItem("token"),Le=await fetch(`${window.API_BASE_URL||""}/api/v1/admin/db/upload`,{method:"POST",headers:{Authorization:`Bearer ${me}`},body:Ae});if(!Le.ok){const Pe=await Le.json().catch(()=>({}));throw new Error(Pe.detail||`Upload failed: ${Le.status}`)}const Re=await Le.json();$e.success(Re.message||"Database uploaded successfully"),$e.info("Restart the service for changes to take effect"),await N(),A&&t(21,A.value="",A)}catch(Ae){$e.error(`Upload failed: ${Ae.message}`)}t(20,q=!1)}}async function F(){t(14,C=!0);try{const qe=new URLSearchParams({limit:Lv.toString()});w&&qe.set("level",w),S&&qe.set("search",S),t(13,y=await He("GET",`/admin/logs?${qe}`))}catch(qe){$e.error(`Failed to load logs: ${qe.message}`),t(13,y=[])}t(14,C=!1)}function O(){t(17,D=!D),D?(E=setInterval(F,3e3),$e.info("Auto-refresh enabled (3s)")):(clearInterval(E),E=null,$e.info("Auto-refresh disabled"))}async function H(){try{await He("DELETE","/admin/logs"),t(13,y=[]),$e.info("Logs cleared")}catch(qe){$e.error(`Failed to clear logs: ${qe.message}`)}}async function L(){try{const qe=await He("GET","/admin/telemetry/services");t(6,c=qe.services||[]),t(7,_=qe.current||"unknown")}catch(qe){console.warn("Could not load services:",qe),t(6,c=[])}}async function j(){try{const qe=new URLSearchParams({hours:m.toString()});h&&qe.set("path_prefix",h),p&&qe.set("service_name",p),t(2,o=await He("GET",`/admin/telemetry/overview?${qe}`))}catch(qe){$e.error(`Failed to load overview: ${qe.message}`)}}async function B(){try{const qe=new URLSearchParams({hours:m.toString(),limit:qv.toString()});h&&qe.set("path_prefix",h),v&&qe.set("min_duration_ms",v),g&&qe.set("status_class",g),p&&qe.set("service_name",p),t(3,i=await He("GET",`/admin/telemetry/requests?${qe}`))}catch(qe){$e.error(`Failed to load requests: ${qe.message}`)}}async function K(qe){try{t(4,f=await He("GET",`/admin/telemetry/requests/${qe}`)),t(5,a=!0)}catch(Se){$e.error(`Failed to load trace: ${Se.message}`)}}async function Y(){t(1,s=!0),await Promise.all([L(),j(),B()]),t(1,s=!1)}async function Z(){try{const qe=new URLSearchParams({hours:m.toString(),threshold_ms:"1000",limit:"50"});p&&qe.set("service_name",p),t(3,i=await He("GET",`/admin/telemetry/slow?${qe}`)),$e.info("Showing slow requests (>1s)")}catch(qe){$e.error(`Failed to load slow requests: ${qe.message}`)}}async function oe(qe="5xx"){try{const Se=new URLSearchParams({hours:m.toString(),status_class:qe,limit:"50"});p&&Se.set("service_name",p),t(3,i=await He("GET",`/admin/telemetry/errors?${Se}`)),$e.info(`Showing ${qe} errors`)}catch(Se){$e.error(`Failed to load errors: ${Se.message}`)}}kl(()=>(Y(),()=>{E&&clearInterval(E)}));function x(qe){t(0,n=qe),qe==="logs"&&y.length===0&&F(),qe==="database"&&!P&&N()}const J=()=>x("tracing"),W=()=>x("logs"),re=()=>x("database"),V=()=>x("database");function ie(){m=_t(this),t(9,m)}function _e(){w=_t(this),t(15,w)}function te(){S=this.value,t(16,S)}const ve=qe=>qe.key==="Enter"&&F(),ae=()=>oe("5xx"),se=()=>oe("5xx");function ee(){p=_t(this),t(8,p),t(6,c)}function Q(){h=this.value,t(10,h)}function be(){v=Kt(this.value),t(11,v)}function we(){g=_t(this),t(12,g)}const Ge=qe=>K(qe.request_id);function nt(qe){It[qe?"unshift":"push"](()=>{A=qe,t(21,A)})}return[n,s,o,i,f,a,c,_,p,m,h,v,g,y,C,w,S,D,P,z,q,A,N,I,G,F,O,H,B,K,Y,Z,oe,x,J,W,re,V,ie,_e,te,ve,ae,se,ee,Q,be,we,Ge,nt,()=>t(5,a=!1)]}class Rv extends Ct{constructor(e){super(),$t(this,e,Pv,Ev,kt,{},null,[-1,-1,-1])}}function Nv(l){let e,t,n,s,o,i,f,a,c,_,p,m,h,v,g,y,C,w,S,D,E,P,z,q,A;n=new s1({props:{title:"Deploy Dashboard"}}),f=new h1({props:{tabs:l[10],active:l[1],scrollable:!0}}),f.$on("change",l[12]);let N=l[9]&&hf(l),I={};m=new E_({props:I}),l[17](m),g=new Md({});let G={};w=new Np({props:G}),l[18](w);let F={};E=new tv({props:F}),l[19](E);const O=[Iv,Ov,Av],H=[];function L(j,B){return j[1]==="services"?0:j[1]==="settings"?1:j[1]==="telemetry"&&j[3]?2:-1}return~(z=L(l))&&(q=H[z]=O[z](l)),{c(){e=d("div"),t=d("div"),ce(n.$$.fragment),s=b(),o=d("div"),o.textContent=`${Uv}`,i=b(),ce(f.$$.fragment),a=b(),N&&N.c(),c=b(),_=d("main"),p=d("div"),ce(m.$$.fragment),h=b(),v=d("div"),ce(g.$$.fragment),y=b(),C=d("div"),ce(w.$$.fragment),S=b(),D=d("div"),ce(E.$$.fragment),P=b(),q&&q.c(),u(o,"class","version-badge svelte-1jnwr0w"),u(o,"title","Build timestamp"),ke(p,"hidden",l[1]!=="infra"),ke(v,"hidden",l[1]!=="deploy"),ke(C,"hidden",l[1]!=="deployments"),ke(D,"hidden",l[1]!=="architecture"),u(_,"class","content glass"),u(t,"class","container"),u(e,"class","app")},m(j,B){$(j,e,B),r(e,t),fe(n,t,null),r(t,s),r(t,o),r(t,i),fe(f,t,null),r(t,a),N&&N.m(t,null),r(t,c),r(t,_),r(_,p),fe(m,p,null),r(_,h),r(_,v),fe(g,v,null),r(_,y),r(_,C),fe(w,C,null),r(_,S),r(_,D),fe(E,D,null),r(_,P),~z&&H[z].m(_,null),A=!0},p(j,B){const K={};B&1024&&(K.tabs=j[10]),B&2&&(K.active=j[1]),f.$set(K),j[9]?N?(N.p(j,B),B&512&&R(N,1)):(N=hf(j),N.c(),R(N,1),N.m(t,c)):N&&(De(),M(N,1,1,()=>{N=null}),Ee());const Y={};m.$set(Y),(!A||B&2)&&ke(p,"hidden",j[1]!=="infra"),(!A||B&2)&&ke(v,"hidden",j[1]!=="deploy");const Z={};w.$set(Z),(!A||B&2)&&ke(C,"hidden",j[1]!=="deployments");const oe={};E.$set(oe),(!A||B&2)&&ke(D,"hidden",j[1]!=="architecture");let x=z;z=L(j),z!==x&&(q&&(De(),M(H[x],1,1,()=>{H[x]=null}),Ee()),~z?(q=H[z],q||(q=H[z]=O[z](j),q.c()),R(q,1),q.m(_,null)):q=null)},i(j){A||(R(n.$$.fragment,j),R(f.$$.fragment,j),R(N),R(m.$$.fragment,j),R(g.$$.fragment,j),R(w.$$.fragment,j),R(E.$$.fragment,j),R(q),A=!0)},o(j){M(n.$$.fragment,j),M(f.$$.fragment,j),M(N),M(m.$$.fragment,j),M(g.$$.fragment,j),M(w.$$.fragment,j),M(E.$$.fragment,j),M(q),A=!1},d(j){j&&k(e),ue(n),ue(f),N&&N.d(),l[17](null),ue(m),ue(g),l[18](null),ue(w),l[19](null),ue(E),~z&&H[z].d()}}}function Mv(l){let e,t;const n=[{title:"Deploy Dashboard"},{subtitle:"Sign in to manage your infrastructure"},$1.internal,{allowSignup:!0}];let s={};for(let o=0;o<n.length;o+=1)s=bf(s,n[o]);return e=new Bc({props:s}),e.$on("success",l[11]),{c(){ce(e.$$.fragment)},m(o,i){fe(e,o,i),t=!0},p(o,i){const f={};e.$set(f)},i(o){t||(R(e.$$.fragment,o),t=!0)},o(o){M(e.$$.fragment,o),t=!1},d(o){ue(e,o)}}}function jv(l){let e;return{c(){e=d("div"),e.innerHTML='<div class="spinner"></div>',u(e,"class","loading-screen")},m(t,n){$(t,e,n)},p:ge,i:ge,o:ge,d(t){t&&k(e)}}}function hf(l){let e,t;return e=new M1({props:{showTail:l[8],showContainer:l[7]}}),e.$on("change",l[13]),e.$on("refresh",l[14]),{c(){ce(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},p(n,s){const o={};s&256&&(o.showTail=n[8]),s&128&&(o.showContainer=n[7]),e.$set(o)},i(n){t||(R(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){ue(e,n)}}}function Av(l){let e,t;return e=new Rv({}),{c(){ce(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},i(n){t||(R(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){ue(e,n)}}}function Ov(l){let e,t;return e=new Tm({}),{c(){ce(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},i(n){t||(R(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){ue(e,n)}}}function Iv(l){let e,t;return e=new Yp({}),{c(){ce(e.$$.fragment)},m(n,s){fe(e,n,s),t=!0},i(n){t||(R(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){ue(e,n)}}}function Fv(l){let e,t,n,s,o,i;e=new w1({});const f=[jv,Mv,Nv],a=[];function c(_,p){return _[0]?!_[2].token||!_[2].user?1:2:0}return n=c(l),s=a[n]=f[n](l),{c(){ce(e.$$.fragment),t=b(),s.c(),o=Fe()},m(_,p){fe(e,_,p),$(_,t,p),a[n].m(_,p),$(_,o,p),i=!0},p(_,[p]){let m=n;n=c(_),n===m?a[n].p(_,p):(De(),M(a[m],1,1,()=>{a[m]=null}),Ee(),s=a[n],s?s.p(_,p):(s=a[n]=f[n](_),s.c()),R(s,1),s.m(o.parentNode,o))},i(_){i||(R(e.$$.fragment,_),R(s),i=!0)},o(_){M(e.$$.fragment,_),M(s),i=!1},d(_){_&&(k(t),k(o)),ue(e,_),a[n].d(_)}}}const Uv="2026-01-21 14:44 UTC";function Bv(l,e,t){let n,s,o,i,f,a,c,_;dt(l,Os,I=>t(1,f=I)),dt(l,Mn,I=>t(16,a=I)),dt(l,wt,I=>t(2,c=I)),dt(l,hc,I=>t(3,_=I));let p=!1,m,h,v,g=null;const y=[{id:"infra",label:"Infrastructure"},{id:"deploy",label:"Deploy"},{id:"deployments",label:"Deployments"},{id:"architecture",label:"Architecture"},{id:"services",label:"Services"},{id:"settings",label:"Settings"}],C=[{id:"telemetry",label:"🔍 Telemetry",admin:!0}];kl(async()=>{const I=await w();t(0,p=!0),I&&(t(15,g=a),S())});async function w(){const I=c;if(!I.token||I.token.trim()==="")return!1;try{const G=await El("GET","/auth/me");return wt.setUser(G),!0}catch{return wt.logout(),!1}}function S(){Xt.refresh(),jn.refresh(),dn.refresh(),bl.refresh()}async function D(I){const{user:G,token:F}=I.detail;Sn(F),wt.setUser(G),t(15,g=a),S()}function E(I){Os.set(I.detail)}function P(){z()}function z(){switch(f){case"infra":m==null||m.refresh(),Xt.refresh();break;case"deployments":h==null||h.refresh();break;case"architecture":v==null||v.refresh();break}}function q(I){It[I?"unshift":"push"](()=>{m=I,t(4,m)})}function A(I){It[I?"unshift":"push"](()=>{h=I,t(5,h)})}function N(I){It[I?"unshift":"push"](()=>{v=I,t(6,v)})}return l.$$.update=()=>{l.$$.dirty&8&&t(10,n=_?[...y,...C]:y),l.$$.dirty&2&&t(9,s=f==="deployments"),l.$$.dirty&98309&&p&&c.user&&a&&a!==g&&(t(15,g=a),S())},t(8,o=!1),t(7,i=!1),[p,f,c,_,m,h,v,i,o,s,n,D,E,P,z,g,a,q,A,N]}class Hv extends Ct{constructor(e){super(),$t(this,e,Bv,Fv,kt,{})}}new Hv({target:document.getElementById("app")});
