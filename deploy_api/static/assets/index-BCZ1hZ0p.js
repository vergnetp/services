var Ea=Object.defineProperty;var Ma=(l,e,t)=>e in l?Ea(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t;var fl=(l,e,t)=>Ma(l,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();function ie(){}const oa=l=>l;function La(l,e){for(const t in e)l[t]=e[t];return l}function ia(l){return l()}function ds(){return Object.create(null)}function We(l){l.forEach(ia)}function Un(l){return typeof l=="function"}function xe(l,e){return l!=l?e==e:l!==e||l&&typeof l=="object"||typeof l=="function"}function Na(l){return Object.keys(l).length===0}function xn(l,...e){if(l==null){for(const n of e)n(void 0);return ie}const t=l.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function on(l){let e;return xn(l,t=>e=t)(),e}function Xe(l,e,t){l.$$.on_destroy.push(xn(e,t))}function Vt(l,e,t,n){if(l){const s=ra(l,e,t,n);return l[0](s)}}function ra(l,e,t,n){return l[1]&&n?La(t.ctx.slice(),l[1](n(e))):t.ctx}function Yt(l,e,t,n){if(l[2]&&n){const s=l[2](n(t));if(e.dirty===void 0)return s;if(typeof s=="object"){const i=[],o=Math.max(e.dirty.length,s.length);for(let c=0;c<o;c+=1)i[c]=e.dirty[c]|s[c];return i}return e.dirty|s}return e.dirty}function Kt(l,e,t,n,s,i){if(s){const o=ra(e,t,n,i);l.p(o,s)}}function Qt(l){if(l.ctx.length>32){const e=[],t=l.ctx.length/32;for(let n=0;n<t;n++)e[n]=-1;return e}return-1}function aa(l){const e={};for(const t in l)e[t]=!0;return e}function vs(l){const e=typeof l=="string"&&l.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[l,"px"]}const ca=typeof window<"u";let ja=ca?()=>window.performance.now():()=>Date.now(),es=ca?l=>requestAnimationFrame(l):ie;const Bl=new Set;function ua(l){Bl.forEach(e=>{e.c(l)||(Bl.delete(e),e.f())}),Bl.size!==0&&es(ua)}function Ra(l){let e;return Bl.size===0&&es(ua),{promise:new Promise(t=>{Bl.add(e={c:l,f:t})}),abort(){Bl.delete(e)}}}const fa=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function a(l,e){l.appendChild(e)}function pa(l){if(!l)return document;const e=l.getRootNode?l.getRootNode():l.ownerDocument;return e&&e.host?e:l.ownerDocument}function Aa(l){const e=_("style");return e.textContent="/* empty */",Oa(pa(l),e),e.sheet}function Oa(l,e){return a(l.head||l,e),e.sheet}function w(l,e,t){l.insertBefore(e,t||null)}function k(l){l.parentNode&&l.parentNode.removeChild(l)}function Re(l,e){for(let t=0;t<l.length;t+=1)l[t]&&l[t].d(e)}function _(l){return document.createElement(l)}function Fa(l){return document.createElementNS("http://www.w3.org/2000/svg",l)}function S(l){return document.createTextNode(l)}function b(){return S(" ")}function Ae(){return S("")}function le(l,e,t,n){return l.addEventListener(e,t,n),()=>l.removeEventListener(e,t,n)}function _a(l){return function(e){return e.preventDefault(),l.call(this,e)}}function p(l,e,t){t==null?l.removeAttribute(e):l.getAttribute(e)!==t&&l.setAttribute(e,t)}function da(l){let e;return{p(...t){e=t,e.forEach(n=>l.push(n))},r(){e.forEach(t=>l.splice(l.indexOf(t),1))}}}function jt(l){return l===""?null:+l}function za(l){return Array.from(l.childNodes)}function z(l,e){e=""+e,l.data!==e&&(l.data=e)}function ee(l,e){l.value=e??""}function Ue(l,e,t,n){t==null?l.style.removeProperty(e):l.style.setProperty(e,t,"")}function je(l,e,t){for(let n=0;n<l.options.length;n+=1){const s=l.options[n];if(s.__value===e){s.selected=!0;return}}(!t||e!==void 0)&&(l.selectedIndex=-1)}function ct(l){const e=l.querySelector(":checked");return e&&e.__value}function Te(l,e,t){l.classList.toggle(e,!!t)}function va(l,e,{bubbles:t=!1,cancelable:n=!1}={}){return new CustomEvent(l,{detail:e,bubbles:t,cancelable:n})}class Ba{constructor(e=!1){fl(this,"is_svg",!1);fl(this,"e");fl(this,"n");fl(this,"t");fl(this,"a");this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,n=null){this.e||(this.is_svg?this.e=Fa(t.nodeName):this.e=_(t.nodeType===11?"TEMPLATE":t.nodeName),this.t=t.tagName!=="TEMPLATE"?t:t.content,this.c(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)w(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(k)}}const An=new Map;let On=0;function Ia(l){let e=5381,t=l.length;for(;t--;)e=(e<<5)-e^l.charCodeAt(t);return e>>>0}function Ua(l,e){const t={stylesheet:Aa(e),rules:{}};return An.set(l,t),t}function ms(l,e,t,n,s,i,o,c=0){const r=16.666/n;let f=`{
`;for(let C=0;C<=1;C+=r){const y=e+(t-e)*i(C);f+=C*100+`%{${o(y,1-y)}}
`}const u=f+`100% {${o(t,1-t)}}
}`,d=`__svelte_${Ia(u)}_${c}`,v=pa(l),{stylesheet:h,rules:m}=An.get(v)||Ua(v,l);m[d]||(m[d]=!0,h.insertRule(`@keyframes ${d} ${u}`,h.cssRules.length));const g=l.style.animation||"";return l.style.animation=`${g?`${g}, `:""}${d} ${n}ms linear ${s}ms 1 both`,On+=1,d}function Ha(l,e){const t=(l.style.animation||"").split(", "),n=t.filter(e?i=>i.indexOf(e)<0:i=>i.indexOf("__svelte")===-1),s=t.length-n.length;s&&(l.style.animation=n.join(", "),On-=s,On||Ga())}function Ga(){es(()=>{On||(An.forEach(l=>{const{ownerNode:e}=l.stylesheet;e&&k(e)}),An.clear())})}let nn;function ln(l){nn=l}function ts(){if(!nn)throw new Error("Function called outside component initialization");return nn}function dl(l){ts().$$.on_mount.push(l)}function ls(l){ts().$$.on_destroy.push(l)}function rn(){const l=ts();return(e,t,{cancelable:n=!1}={})=>{const s=l.$$.callbacks[e];if(s){const i=va(e,t,{cancelable:n});return s.slice().forEach(o=>{o.call(l,i)}),!i.defaultPrevented}return!0}}function hs(l,e){const t=l.$$.callbacks[e.type];t&&t.slice().forEach(n=>n.call(this,e))}const Ol=[],_t=[];let Il=[];const Kn=[],ma=Promise.resolve();let Qn=!1;function ha(){Qn||(Qn=!0,ma.then(ga))}function Wa(){return ha(),ma}function Qe(l){Il.push(l)}function kl(l){Kn.push(l)}const Jn=new Set;let Rl=0;function ga(){if(Rl!==0)return;const l=nn;do{try{for(;Rl<Ol.length;){const e=Ol[Rl];Rl++,ln(e),Ja(e.$$)}}catch(e){throw Ol.length=0,Rl=0,e}for(ln(null),Ol.length=0,Rl=0;_t.length;)_t.pop()();for(let e=0;e<Il.length;e+=1){const t=Il[e];Jn.has(t)||(Jn.add(t),t())}Il.length=0}while(Ol.length);for(;Kn.length;)Kn.pop()();Qn=!1,Jn.clear(),ln(l)}function Ja(l){if(l.fragment!==null){l.update(),We(l.before_update);const e=l.dirty;l.dirty=[-1],l.fragment&&l.fragment.p(l.ctx,e),l.after_update.forEach(Qe)}}function Va(l){const e=[],t=[];Il.forEach(n=>l.indexOf(n)===-1?e.push(n):t.push(n)),t.forEach(n=>n()),Il=e}let tn;function Ya(){return tn||(tn=Promise.resolve(),tn.then(()=>{tn=null})),tn}function Vn(l,e,t){l.dispatchEvent(va(`${e?"intro":"outro"}${t}`))}const Rn=new Set;let Wt;function ke(){Wt={r:0,c:[],p:Wt}}function we(){Wt.r||We(Wt.c),Wt=Wt.p}function P(l,e){l&&l.i&&(Rn.delete(l),l.i(e))}function L(l,e,t,n){if(l&&l.o){if(Rn.has(l))return;Rn.add(l),Wt.c.push(()=>{Rn.delete(l),n&&(t&&l.d(1),n())}),l.o(e)}else n&&n()}const Ka={duration:0};function Fl(l,e,t,n){let i=e(l,t,{direction:"both"}),o=n?0:1,c=null,r=null,f=null,u;function d(){f&&Ha(l,f)}function v(m,g){const C=m.b-o;return g*=Math.abs(C),{a:o,b:m.b,d:C,duration:g,start:m.start,end:m.start+g,group:m.group}}function h(m){const{delay:g=0,duration:C=300,easing:y=oa,tick:$=ie,css:q}=i||Ka,D={start:ja()+g,b:m};m||(D.group=Wt,Wt.r+=1),"inert"in l&&(m?u!==void 0&&(l.inert=u):(u=l.inert,l.inert=!0)),c||r?r=D:(q&&(d(),f=ms(l,o,m,C,g,y,q)),m&&$(0,1),c=v(D,C),Qe(()=>Vn(l,m,"start")),Ra(T=>{if(r&&T>r.start&&(c=v(r,C),r=null,Vn(l,c.b,"start"),q&&(d(),f=ms(l,o,c.b,c.duration,0,y,i.css))),c){if(T>=c.end)$(o=c.b,1-o),Vn(l,c.b,"end"),r||(c.b?d():--c.group.r||We(c.group.c)),c=null;else if(T>=c.start){const M=T-c.start;o=c.a+c.d*y(M/c.duration),$(o,1-o)}}return!!(c||r)}))}return{run(m){Un(i)?Ya().then(()=>{i=i({direction:m?"in":"out"}),h(m)}):h(m)},end(){d(),c=r=null}}}function ve(l){return(l==null?void 0:l.length)!==void 0?l:Array.from(l)}function ba(l,e){L(l,1,1,()=>{e.delete(l.key)})}function $a(l,e,t,n,s,i,o,c,r,f,u,d){let v=l.length,h=i.length,m=v;const g={};for(;m--;)g[l[m].key]=m;const C=[],y=new Map,$=new Map,q=[];for(m=h;m--;){const E=d(s,i,m),j=t(E);let R=o.get(j);R?q.push(()=>R.p(E,e)):(R=f(j,E),R.c()),y.set(j,C[m]=R),j in g&&$.set(j,Math.abs(m-g[j]))}const D=new Set,T=new Set;function M(E){P(E,1),E.m(c,u),o.set(E.key,E),u=E.first,h--}for(;v&&h;){const E=C[h-1],j=l[v-1],R=E.key,O=j.key;E===j?(u=E.first,v--,h--):y.has(O)?!o.has(R)||D.has(R)?M(E):T.has(O)?v--:$.get(R)>$.get(O)?(T.add(R),M(E)):(D.add(O),v--):(r(j,o),v--)}for(;v--;){const E=l[v];y.has(E.key)||r(E,o)}for(;h;)M(C[h-1]);return We(q),C}function wl(l,e,t){const n=l.$$.props[e];n!==void 0&&(l.$$.bound[n]=t,t(l.$$.ctx[n]))}function X(l){l&&l.c()}function Y(l,e,t){const{fragment:n,after_update:s}=l.$$;n&&n.m(e,t),Qe(()=>{const i=l.$$.on_mount.map(ia).filter(Un);l.$$.on_destroy?l.$$.on_destroy.push(...i):We(i),l.$$.on_mount=[]}),s.forEach(Qe)}function K(l,e){const t=l.$$;t.fragment!==null&&(Va(t.after_update),We(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function Qa(l,e){l.$$.dirty[0]===-1&&(Ol.push(l),ha(),l.$$.dirty.fill(0)),l.$$.dirty[e/31|0]|=1<<e%31}function et(l,e,t,n,s,i,o=null,c=[-1]){const r=nn;ln(l);const f=l.$$={fragment:null,ctx:[],props:i,update:ie,not_equal:s,bound:ds(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(r?r.$$.context:[])),callbacks:ds(),dirty:c,skip_bound:!1,root:e.target||r.$$.root};o&&o(f.root);let u=!1;if(f.ctx=t?t(l,e.props||{},(d,v,...h)=>{const m=h.length?h[0]:v;return f.ctx&&s(f.ctx[d],f.ctx[d]=m)&&(!f.skip_bound&&f.bound[d]&&f.bound[d](m),u&&Qa(l,d)),v}):[],f.update(),u=!0,We(f.before_update),f.fragment=n?n(f.ctx):!1,e.target){if(e.hydrate){const d=za(e.target);f.fragment&&f.fragment.l(d),d.forEach(k)}else f.fragment&&f.fragment.c();e.intro&&P(l.$$.fragment),Y(l,e.target,e.anchor),ga()}ln(r)}class tt{constructor(){fl(this,"$$");fl(this,"$$set")}$destroy(){K(this,1),this.$destroy=ie}$on(e,t){if(!Un(t))return ie;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const s=n.indexOf(t);s!==-1&&n.splice(s,1)}}$set(e){this.$$set&&!Na(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Za="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Za);const Al=[];function Xa(l,e){return{subscribe:vl(l,e).subscribe}}function vl(l,e=ie){let t;const n=new Set;function s(c){if(xe(l,c)&&(l=c,t)){const r=!Al.length;for(const f of n)f[1](),Al.push(f,l);if(r){for(let f=0;f<Al.length;f+=2)Al[f][0](Al[f+1]);Al.length=0}}}function i(c){s(c(l))}function o(c,r=ie){const f=[c,r];return n.add(f),n.size===1&&(t=e(s,i)||ie),c(l),()=>{n.delete(f),n.size===0&&t&&(t(),t=null)}}return{set:s,update:i,subscribe:o}}function Gl(l,e,t){const n=!Array.isArray(l),s=n?[l]:l;if(!s.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const i=e.length<2;return Xa(t,(o,c)=>{let r=!1;const f=[];let u=0,d=ie;const v=()=>{if(u)return;d();const m=e(n?f[0]:f,o,c);i?o(m):d=Un(m)?m:ie},h=s.map((m,g)=>xn(m,C=>{f[g]=C,u&=~(1<<g),r&&v()},()=>{u|=1<<g}));return r=!0,v(),function(){We(h),d(),r=!1}})}function ns(l,e,t=7){const n=new Date(Date.now()+t*864e5).toUTCString();document.cookie=`${l}=${encodeURIComponent(e)}; expires=${n}; path=/; SameSite=Strict`}function ss(l){const e=document.cookie.match(new RegExp("(^| )"+l+"=([^;]+)"));return e?decodeURIComponent(e[2]):null}function gs(l){document.cookie=`${l}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/; SameSite=Strict`}function xa(){const{subscribe:l,set:e,update:t}=vl({token:ss("jwt_token"),user:null,loading:!1,error:null});return{subscribe:l,setToken(n){ns("jwt_token",n,7),t(s=>({...s,token:n,error:null}))},setUser(n){t(s=>({...s,user:n}))},setError(n){t(s=>({...s,error:n,loading:!1}))},setLoading(n){t(s=>({...s,loading:n}))},logout(){gs("jwt_token"),gs("do_token_local"),e({token:null,user:null,loading:!1,error:null})},clearError(){t(n=>({...n,error:null}))}}}const $t=xa();Gl($t,l=>!!l.token&&!!l.user);function _l(){return ss("do_token_local")}function ec(l){ns("do_token_local",l,30)}function Zn(){return ss("cf_token_local")}function tc(l){ns("cf_token_local",l,30)}function lc(){const{subscribe:l,update:e}=vl([]);let t=0;function n(i,o="info",c=3e3){const r={id:++t,message:i,type:o};return e(f=>[...f,r]),c>0&&setTimeout(()=>s(r.id),c),r.id}function s(i){e(o=>o.filter(c=>c.id!==i))}return{subscribe:l,success:(i,o)=>n(i,"success",o),error:(i,o)=>n(i,"error",o),warning:(i,o)=>n(i,"warning",o),info:(i,o)=>n(i,"info",o),remove:s}}const ge=lc(),ka="/api/v1",wa=["/infra/servers","/infra/snapshots","/infra/setup","/infra/deploy","/infra/registry","/infra/agent","/infra/architecture","/infra/fleet","/infra/projects","/infra/containers","/infra/services","/infra/deployments"];function ya(l,e={}){const t=on($t),n={"Content-Type":"application/json"},s=l.startsWith("/auth/login")||l.startsWith("/auth/register");t.token&&!s&&!e.skipAuth&&(n.Authorization=`Bearer ${t.token}`);let i=ka+l;if(!e.skipDoToken&&wa.some(c=>l.startsWith(c))){const c=_l();if(!c)return{error:"DO token not set",url:null,headers:null};const r=i.includes("?")?"&":"?";i+=`${r}do_token=${encodeURIComponent(c)}`}return{url:i,headers:n,error:null}}async function os(l){if(l.status===401){let e="Authentication failed";try{const n=await l.json();e=n.detail||n.error||n.message||e}catch{}throw on($t).token&&($t.logout(),e="Session expired - please login again"),new Error(e)}if(!l.ok){const e=await l.json().catch(()=>({detail:"Request failed"}));throw new Error(e.detail||e.error||e.message||"Request failed")}}async function Oe(l,e,t=null,n={}){const{url:s,headers:i,error:o}=ya(e,n);if(o)return console.debug(`Skipping ${e} - ${o}`),null;const c={method:l,headers:i};t&&(c.body=JSON.stringify(t));const r=await fetch(s,c);if(await os(r),r.status===204)return null;const f=await r.json();return f&&f.success===!0&&f.data!==void 0?f.data:f}async function Ca(l,e,t=null,n,s={}){const{url:i,headers:o,error:c}=ya(e,s);if(c)throw new Error(c);const r={method:l,headers:o};t&&(r.body=JSON.stringify(t));const f=await fetch(i,r);await os(f);const u=f.body.getReader(),d=new TextDecoder;let v="";for(;;){const{done:h,value:m}=await u.read();if(h)break;v+=d.decode(m,{stream:!0});const g=v.split(`
`);v=g.pop()||"";for(const C of g)if(C.startsWith("data: "))try{const y=JSON.parse(C.slice(6));n(y)}catch{}}}async function nc(l,e,t,n={}){const s=on($t);let i=ka+l;if(!n.skipDoToken&&wa.some(v=>l.startsWith(v))){const v=_l();if(!v)throw new Error("DO token not set");const h=i.includes("?")?"&":"?";i+=`${h}do_token=${encodeURIComponent(v)}`}const c={};s.token&&(c.Authorization=`Bearer ${s.token}`);const r=await fetch(i,{method:"POST",headers:c,body:e});await os(r);const f=r.body.getReader(),u=new TextDecoder;let d="";for(;;){const{done:v,value:h}=await f.read();if(v)break;d+=u.decode(h,{stream:!0});const m=d.split(`
`);d=m.pop()||"";for(const g of m)if(g.startsWith("data: "))try{const C=JSON.parse(g.slice(6));t(C)}catch{}}}async function sc(){if(!on($t).token)return!1;try{const e=await Oe("GET","/auth/me");return $t.setUser(e),!0}catch{return $t.logout(),!1}}function oc(l,e,t={}){const{refreshInterval:n=0,revalidateOnFocus:s=!0,revalidateOnMount:i=!0,dedupingInterval:o=2e3,initialData:c=null}=t,r=vl({data:c,error:null,loading:!1,lastFetched:null});let f=0,u=null,d=null,v=0;async function h(q=!1){const D=Date.now();return!q&&u&&D-f<o||(f=D,r.update(T=>{var M;return{...T,loading:T.data===null||((M=T.data)==null?void 0:M.length)===0}}),u=(async()=>{try{const T=await e();return r.set({data:T,error:null,loading:!1,lastFetched:new Date}),T}catch(T){throw r.update(M=>({...M,error:T.message||"Fetch failed",loading:!1})),T}finally{u=null}})()),u}function m(){document.visibilityState==="visible"&&s&&h()}function g(){n>0&&!d&&(d=setInterval(()=>h(),n))}function C(){d&&(clearInterval(d),d=null)}const{subscribe:y}=r;function $(q){v++,v===1&&(s&&typeof document<"u"&&document.addEventListener("visibilitychange",m),i&&h(),g());const D=y(q);return()=>{D(),v--,v===0&&(typeof document<"u"&&document.removeEventListener("visibilitychange",m),C())}}return{subscribe:$,refresh:()=>h(!0),mutate:q=>r.update(D=>({...D,data:q})),get:()=>on(r)}}function Hn(l,e={}){const{transform:t=s=>s,...n}=e;return oc(l,async()=>{const s=await Oe("GET",l);return t(s)},n)}function ic(l,e={}){const{transform:t=r=>r,...n}=e,s=vl({data:null,error:null,loading:!1,lastFetched:null});let i=null,o=null;async function c(r){const f=l(r);if(!f){s.set({data:null,error:null,loading:!1,lastFetched:null});return}return o&&JSON.stringify(r)===JSON.stringify(i)||(i=r,s.update(u=>({...u,loading:!0})),o=(async()=>{try{const u=await Oe("GET",f),d=t(u);return s.set({data:d,error:null,loading:!1,lastFetched:new Date}),d}catch(u){throw s.update(d=>({...d,error:u.message||"Fetch failed",loading:!1})),u}finally{o=null}})()),o}return{subscribe:s.subscribe,fetch:c,refresh:()=>i&&c(i),clear:()=>{i=null,s.set({data:null,error:null,loading:!1,lastFetched:null})}}}const bs=vl("infra"),pl=vl({project:"",env:"",server:"",container:"",range:"30d",tail:!1}),rc=["infra","metrics","logs","deployments"],Gt=Hn("/infra/servers",{transform:l=>(l==null?void 0:l.servers)||l||[],refreshInterval:6e4,revalidateOnFocus:!0,initialData:[]}),Sa=Hn("/infra/projects",{transform:l=>(l==null?void 0:l.projects)||[],refreshInterval:12e4,initialData:[]}),sn=Hn("/infra/snapshots",{transform:l=>(l==null?void 0:l.snapshots)||[],refreshInterval:6e4,initialData:[]}),zl=Hn("/infra/deployments/history",{transform:l=>(l==null?void 0:l.deployments)||[],refreshInterval:3e4,initialData:[]}),Xn=ic(l=>l!=null&&l.server?`/infra/agent/${l.server}/containers`:null,{transform:l=>{const e=(l==null?void 0:l.containers)||l||[];return(Array.isArray(e)?e:[]).map(t=>({id:t.ID||t.Id||t.id,name:t.Names||t.Name||t.name||"unknown",image:t.Image||t.image,status:t.Status||t.State||t.status,state:t.State||t.state}))}}),Ul=Gl(Gt,l=>(l==null?void 0:l.data)||[]),qa=Gl(Sa,l=>(l==null?void 0:l.data)||[]),Da=Gl(sn,l=>(l==null?void 0:l.data)||[]);Gl(zl,l=>(l==null?void 0:l.data)||[]);const ac=Gl(Xn,l=>(l==null?void 0:l.data)||[]),cc="1.9.5";function uc(){const l=typeof localStorage<"u"&&localStorage.getItem("theme")||"dark",{subscribe:e,set:t}=vl(l);return typeof document<"u"&&document.documentElement.setAttribute("data-theme",l),{subscribe:e,set(n){typeof localStorage<"u"&&localStorage.setItem("theme",n),typeof document<"u"&&document.documentElement.setAttribute("data-theme",n),t(n)}}}const Yn=uc();function $s(l){let e;return{c(){e=_("span"),p(e,"class","brand-dot svelte-16ksbsk")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function ks(l){let e,t,n,s,i,o;return{c(){e=_("div"),t=_("button"),t.textContent="Sign In",n=b(),s=_("button"),s.textContent="Sign Up",p(t,"class","tab svelte-16ksbsk"),Te(t,"active",l[4]==="login"),p(s,"class","tab svelte-16ksbsk"),Te(s,"active",l[4]==="signup"),p(e,"class","tabs svelte-16ksbsk")},m(c,r){w(c,e,r),a(e,t),a(e,n),a(e,s),i||(o=[le(t,"click",l[16]),le(s,"click",l[17])],i=!0)},p(c,r){r&16&&Te(t,"active",c[4]==="login"),r&16&&Te(s,"active",c[4]==="signup")},d(c){c&&k(e),i=!1,We(o)}}}function fc(l){let e,t,n,s,i,o,c,r,f,u,d,v,h,m,g,C,y,$,q;function D(E,j){return E[5]?dc:_c}let T=D(l),M=T(l);return{c(){e=_("form"),t=_("div"),n=_("label"),n.textContent="Email",s=b(),i=_("input"),o=b(),c=_("div"),r=_("label"),r.textContent="Password",f=b(),u=_("input"),d=b(),v=_("div"),h=_("label"),h.textContent="Confirm Password",m=b(),g=_("input"),C=b(),y=_("button"),M.c(),p(n,"for","signup-email"),p(n,"class","svelte-16ksbsk"),p(i,"type","email"),p(i,"id","signup-email"),p(i,"placeholder","you@example.com"),i.required=!0,i.disabled=l[5],p(i,"class","svelte-16ksbsk"),p(t,"class","form-group svelte-16ksbsk"),p(r,"for","signup-password"),p(r,"class","svelte-16ksbsk"),p(u,"type","password"),p(u,"id","signup-password"),p(u,"placeholder","••••••••"),u.required=!0,u.disabled=l[5],p(u,"class","svelte-16ksbsk"),p(c,"class","form-group svelte-16ksbsk"),p(h,"for","signup-confirm"),p(h,"class","svelte-16ksbsk"),p(g,"type","password"),p(g,"id","signup-confirm"),p(g,"placeholder","••••••••"),g.required=!0,g.disabled=l[5],p(g,"class","svelte-16ksbsk"),p(v,"class","form-group svelte-16ksbsk"),p(y,"type","submit"),p(y,"class","btn btn-primary btn-full svelte-16ksbsk"),y.disabled=l[5]},m(E,j){w(E,e,j),a(e,t),a(t,n),a(t,s),a(t,i),ee(i,l[9]),a(e,o),a(e,c),a(c,r),a(c,f),a(c,u),ee(u,l[10]),a(e,d),a(e,v),a(v,h),a(v,m),a(v,g),ee(g,l[11]),a(e,C),a(e,y),M.m(y,null),$||(q=[le(i,"input",l[20]),le(u,"input",l[21]),le(g,"input",l[22]),le(e,"submit",l[14])],$=!0)},p(E,j){j&32&&(i.disabled=E[5]),j&512&&i.value!==E[9]&&ee(i,E[9]),j&32&&(u.disabled=E[5]),j&1024&&u.value!==E[10]&&ee(u,E[10]),j&32&&(g.disabled=E[5]),j&2048&&g.value!==E[11]&&ee(g,E[11]),T!==(T=D(E))&&(M.d(1),M=T(E),M&&(M.c(),M.m(y,null))),j&32&&(y.disabled=E[5])},d(E){E&&k(e),M.d(),$=!1,We(q)}}}function pc(l){let e,t,n,s,i,o,c,r,f,u,d,v,h,m;function g($,q){return $[5]?mc:vc}let C=g(l),y=C(l);return{c(){e=_("form"),t=_("div"),n=_("label"),n.textContent="Email",s=b(),i=_("input"),o=b(),c=_("div"),r=_("label"),r.textContent="Password",f=b(),u=_("input"),d=b(),v=_("button"),y.c(),p(n,"for","login-email"),p(n,"class","svelte-16ksbsk"),p(i,"type","email"),p(i,"id","login-email"),p(i,"placeholder","you@example.com"),i.required=!0,i.disabled=l[5],p(i,"class","svelte-16ksbsk"),p(t,"class","form-group svelte-16ksbsk"),p(r,"for","login-password"),p(r,"class","svelte-16ksbsk"),p(u,"type","password"),p(u,"id","login-password"),p(u,"placeholder","••••••••"),u.required=!0,u.disabled=l[5],p(u,"class","svelte-16ksbsk"),p(c,"class","form-group svelte-16ksbsk"),p(v,"type","submit"),p(v,"class","btn btn-primary btn-full svelte-16ksbsk"),v.disabled=l[5]},m($,q){w($,e,q),a(e,t),a(t,n),a(t,s),a(t,i),ee(i,l[7]),a(e,o),a(e,c),a(c,r),a(c,f),a(c,u),ee(u,l[8]),a(e,d),a(e,v),y.m(v,null),h||(m=[le(i,"input",l[18]),le(u,"input",l[19]),le(e,"submit",l[13])],h=!0)},p($,q){q&32&&(i.disabled=$[5]),q&128&&i.value!==$[7]&&ee(i,$[7]),q&32&&(u.disabled=$[5]),q&256&&u.value!==$[8]&&ee(u,$[8]),C!==(C=g($))&&(y.d(1),y=C($),y&&(y.c(),y.m(v,null))),q&32&&(v.disabled=$[5])},d($){$&&k(e),y.d(),h=!1,We(m)}}}function _c(l){let e;return{c(){e=S("Create Account")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function dc(l){let e;return{c(){e=_("span"),p(e,"class","spinner svelte-16ksbsk")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function vc(l){let e;return{c(){e=S("Sign In")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function mc(l){let e;return{c(){e=_("span"),p(e,"class","spinner svelte-16ksbsk")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function ws(l){let e,t;return{c(){e=_("p"),t=S(l[6]),p(e,"class","error-message svelte-16ksbsk")},m(n,s){w(n,e,s),a(e,t)},p(n,s){s&64&&z(t,n[6])},d(n){n&&k(e)}}}function hc(l){let e,t,n,s,i,o,c,r,f,u,d,v,h=l[2]&&$s(),m=l[3]&&ks(l);function g(q,D){return q[4]==="login"?pc:fc}let C=g(l),y=C(l),$=l[6]&&ws(l);return{c(){e=_("div"),t=_("div"),n=_("div"),s=_("h1"),h&&h.c(),i=b(),o=S(l[0]),c=b(),r=_("p"),f=S(l[1]),u=b(),m&&m.c(),d=b(),y.c(),v=b(),$&&$.c(),p(s,"class","svelte-16ksbsk"),p(r,"class","svelte-16ksbsk"),p(n,"class","auth-title svelte-16ksbsk"),p(t,"class","auth-card glass svelte-16ksbsk"),p(e,"class","auth-container svelte-16ksbsk")},m(q,D){w(q,e,D),a(e,t),a(t,n),a(n,s),h&&h.m(s,null),a(s,i),a(s,o),a(n,c),a(n,r),a(r,f),a(t,u),m&&m.m(t,null),a(t,d),y.m(t,null),a(t,v),$&&$.m(t,null)},p(q,[D]){q[2]?h||(h=$s(),h.c(),h.m(s,i)):h&&(h.d(1),h=null),D&1&&z(o,q[0]),D&2&&z(f,q[1]),q[3]?m?m.p(q,D):(m=ks(q),m.c(),m.m(t,d)):m&&(m.d(1),m=null),C===(C=g(q))&&y?y.p(q,D):(y.d(1),y=C(q),y&&(y.c(),y.m(t,v))),q[6]?$?$.p(q,D):($=ws(q),$.c(),$.m(t,null)):$&&($.d(1),$=null)},i:ie,o:ie,d(q){q&&k(e),h&&h.d(),m&&m.d(),y.d(),$&&$.d()}}}function gc(l,e,t){let{title:n="Welcome"}=e,{subtitle:s="Sign in to your account"}=e,{apiBase:i="/api/v1"}=e,{showLogo:o=!0}=e,{allowSignup:c=!0}=e;const r=rn();let f="login",u=!1,d=null,v="",h="",m="",g="",C="";function y(I){t(4,f=I),t(6,d=null)}async function $(I,W,V){return await Oe(I,W,V,{skipDoToken:!0})}async function q(I){I.preventDefault(),t(5,u=!0),t(6,d=null);try{const W=await $("POST","/auth/login",{username:v,password:h}),V=(W==null?void 0:W.access_token)||(W==null?void 0:W.token),H=(W==null?void 0:W.user)||await $("GET","/auth/me");if(!V||!H)throw new Error("Login failed");r("success",{user:H,token:V})}catch(W){t(6,d=W.message),r("error",{error:W.message,type:"login"})}finally{t(5,u=!1)}}async function D(I){if(I.preventDefault(),g!==C){t(6,d="Passwords do not match");return}t(5,u=!0),t(6,d=null);try{await $("POST","/auth/register",{username:m,email:m,password:g});const W=await $("POST","/auth/login",{username:m,password:g}),V=(W==null?void 0:W.access_token)||(W==null?void 0:W.token),H=(W==null?void 0:W.user)||await $("GET","/auth/me");if(!V||!H)throw new Error("Signup failed");r("success",{user:H,token:V})}catch(W){t(6,d=W.message),r("error",{error:W.message,type:"signup"})}finally{t(5,u=!1)}}const T=()=>y("login"),M=()=>y("signup");function E(){v=this.value,t(7,v)}function j(){h=this.value,t(8,h)}function R(){m=this.value,t(9,m)}function O(){g=this.value,t(10,g)}function F(){C=this.value,t(11,C)}return l.$$set=I=>{"title"in I&&t(0,n=I.title),"subtitle"in I&&t(1,s=I.subtitle),"apiBase"in I&&t(15,i=I.apiBase),"showLogo"in I&&t(2,o=I.showLogo),"allowSignup"in I&&t(3,c=I.allowSignup)},[n,s,o,c,f,u,d,v,h,m,g,C,y,q,D,i,T,M,E,j,R,O,F]}class bc extends tt{constructor(e){super(),et(this,e,gc,hc,xe,{title:0,subtitle:1,apiBase:15,showLogo:2,allowSignup:3})}}function Ta(l){const e=l-1;return e*e*e+1}function ys(l,{delay:e=0,duration:t=400,easing:n=oa}={}){const s=+getComputedStyle(l).opacity;return{delay:e,duration:t,easing:n,css:i=>`opacity: ${i*s}`}}function Cs(l,{delay:e=0,duration:t=400,easing:n=Ta,x:s=0,y:i=0,opacity:o=0}={}){const c=getComputedStyle(l),r=+c.opacity,f=c.transform==="none"?"":c.transform,u=r*(1-o),[d,v]=vs(s),[h,m]=vs(i);return{delay:e,duration:t,easing:n,css:(g,C)=>`
			transform: ${f} translate(${(1-g)*d}${v}, ${(1-g)*h}${m});
			opacity: ${r-u*C}`}}function Ss(l,{delay:e=0,duration:t=400,easing:n=Ta,start:s=0,opacity:i=0}={}){const o=getComputedStyle(l),c=+o.opacity,r=o.transform==="none"?"":o.transform,f=1-s,u=c*(1-i);return{delay:e,duration:t,easing:n,css:(d,v)=>`
			transform: ${r} scale(${1-f*v});
			opacity: ${c-u*v}
		`}}function qs(l,e,t){const n=l.slice();return n[2]=e[t],n}function Ds(l,e){let t,n,s=e[2].message+"",i,o,c,r,f,u,d,v,h;function m(){return e[1](e[2])}return{key:l,first:null,c(){t=_("div"),n=_("span"),i=S(s),o=b(),c=_("button"),c.textContent="×",r=b(),p(n,"class","toast-message svelte-1l5lsfn"),p(c,"class","toast-close svelte-1l5lsfn"),p(t,"class",f="toast toast-"+e[2].type+" svelte-1l5lsfn"),this.first=t},m(g,C){w(g,t,C),a(t,n),a(n,i),a(t,o),a(t,c),a(t,r),d=!0,v||(h=le(c,"click",m),v=!0)},p(g,C){e=g,(!d||C&1)&&s!==(s=e[2].message+"")&&z(i,s),(!d||C&1&&f!==(f="toast toast-"+e[2].type+" svelte-1l5lsfn"))&&p(t,"class",f)},i(g){d||(g&&Qe(()=>{d&&(u||(u=Fl(t,Cs,{x:100,duration:200},!0)),u.run(1))}),d=!0)},o(g){g&&(u||(u=Fl(t,Cs,{x:100,duration:200},!1)),u.run(0)),d=!1},d(g){g&&k(t),g&&u&&u.end(),v=!1,h()}}}function $c(l){let e,t=[],n=new Map,s,i=ve(l[0]);const o=c=>c[2].id;for(let c=0;c<i.length;c+=1){let r=qs(l,i,c),f=o(r);n.set(f,t[c]=Ds(f,r))}return{c(){e=_("div");for(let c=0;c<t.length;c+=1)t[c].c();p(e,"class","toast-container svelte-1l5lsfn")},m(c,r){w(c,e,r);for(let f=0;f<t.length;f+=1)t[f]&&t[f].m(e,null);s=!0},p(c,[r]){r&1&&(i=ve(c[0]),ke(),t=$a(t,r,o,1,c,i,n,e,ba,Ds,null,qs),we())},i(c){if(!s){for(let r=0;r<i.length;r+=1)P(t[r]);s=!0}},o(c){for(let r=0;r<t.length;r+=1)L(t[r]);s=!1},d(c){c&&k(e);for(let r=0;r<t.length;r+=1)t[r].d()}}}function kc(l,e,t){let n;return Xe(l,ge,i=>t(0,n=i)),[n,i=>ge.remove(i.id)]}class wc extends tt{constructor(e){super(),et(this,e,kc,$c,xe,{})}}function yc(l){let e,t,n,s,i,o,c=l[3]&&Ts();const r=l[9].default,f=Vt(r,l,l[8],null);return{c(){e=_("button"),c&&c.c(),t=b(),f&&f.c(),p(e,"type",l[4]),p(e,"title",l[6]),p(e,"aria-label",l[7]),p(e,"class",n="btn btn-"+l[0]+" btn-"+l[1]+" svelte-1vvc8tv"),e.disabled=l[2]},m(u,d){w(u,e,d),c&&c.m(e,null),a(e,t),f&&f.m(e,null),s=!0,i||(o=le(e,"click",l[11]),i=!0)},p(u,d){u[3]?c||(c=Ts(),c.c(),c.m(e,t)):c&&(c.d(1),c=null),f&&f.p&&(!s||d&256)&&Kt(f,r,u,u[8],s?Yt(r,u[8],d,null):Qt(u[8]),null),(!s||d&16)&&p(e,"type",u[4]),(!s||d&64)&&p(e,"title",u[6]),(!s||d&128)&&p(e,"aria-label",u[7]),(!s||d&3&&n!==(n="btn btn-"+u[0]+" btn-"+u[1]+" svelte-1vvc8tv"))&&p(e,"class",n),(!s||d&4)&&(e.disabled=u[2])},i(u){s||(P(f,u),s=!0)},o(u){L(f,u),s=!1},d(u){u&&k(e),c&&c.d(),f&&f.d(u),i=!1,o()}}}function Cc(l){let e,t,n,s,i,o,c=l[3]&&Ps();const r=l[9].default,f=Vt(r,l,l[8],null);return{c(){e=_("a"),c&&c.c(),t=b(),f&&f.c(),p(e,"href",l[5]),p(e,"title",l[6]),p(e,"aria-label",l[7]),p(e,"class",n="btn btn-"+l[0]+" btn-"+l[1]+" svelte-1vvc8tv"),Te(e,"disabled",l[2])},m(u,d){w(u,e,d),c&&c.m(e,null),a(e,t),f&&f.m(e,null),s=!0,i||(o=le(e,"click",l[10]),i=!0)},p(u,d){u[3]?c||(c=Ps(),c.c(),c.m(e,t)):c&&(c.d(1),c=null),f&&f.p&&(!s||d&256)&&Kt(f,r,u,u[8],s?Yt(r,u[8],d,null):Qt(u[8]),null),(!s||d&32)&&p(e,"href",u[5]),(!s||d&64)&&p(e,"title",u[6]),(!s||d&128)&&p(e,"aria-label",u[7]),(!s||d&3&&n!==(n="btn btn-"+u[0]+" btn-"+u[1]+" svelte-1vvc8tv"))&&p(e,"class",n),(!s||d&7)&&Te(e,"disabled",u[2])},i(u){s||(P(f,u),s=!0)},o(u){L(f,u),s=!1},d(u){u&&k(e),c&&c.d(),f&&f.d(u),i=!1,o()}}}function Ts(l){let e;return{c(){e=_("span"),p(e,"class","spinner svelte-1vvc8tv")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function Ps(l){let e;return{c(){e=_("span"),p(e,"class","spinner svelte-1vvc8tv")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function Sc(l){let e,t,n,s;const i=[Cc,yc],o=[];function c(r,f){return r[5]?0:1}return e=c(l),t=o[e]=i[e](l),{c(){t.c(),n=Ae()},m(r,f){o[e].m(r,f),w(r,n,f),s=!0},p(r,[f]){let u=e;e=c(r),e===u?o[e].p(r,f):(ke(),L(o[u],1,1,()=>{o[u]=null}),we(),t=o[e],t?t.p(r,f):(t=o[e]=i[e](r),t.c()),P(t,1),t.m(n.parentNode,n))},i(r){s||(P(t),s=!0)},o(r){L(t),s=!1},d(r){r&&k(n),o[e].d(r)}}}function qc(l,e,t){let{$$slots:n={},$$scope:s}=e,{variant:i="default"}=e,{size:o="md"}=e,{disabled:c=!1}=e,{loading:r=!1}=e,{type:f="button"}=e,{href:u=null}=e,{title:d=void 0}=e,{ariaLabel:v=void 0}=e;function h(g){hs.call(this,l,g)}function m(g){hs.call(this,l,g)}return l.$$set=g=>{"variant"in g&&t(0,i=g.variant),"size"in g&&t(1,o=g.size),"disabled"in g&&t(2,c=g.disabled),"loading"in g&&t(3,r=g.loading),"type"in g&&t(4,f=g.type),"href"in g&&t(5,u=g.href),"title"in g&&t(6,d=g.title),"ariaLabel"in g&&t(7,v=g.ariaLabel),"$$scope"in g&&t(8,s=g.$$scope)},[i,o,c,r,f,u,d,v,s,n,h,m]}class Ne extends tt{constructor(e){super(),et(this,e,qc,Sc,xe,{variant:0,size:1,disabled:2,loading:3,type:4,href:5,title:6,ariaLabel:7})}}function Es(l){let e;return{c(){e=_("span"),e.textContent="MOCK",p(e,"class","badge svelte-12krgw5")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function Ms(l){let e,t=l[2].user.email+"",n;return{c(){e=_("span"),n=S(t),p(e,"class","user-email svelte-12krgw5")},m(s,i){w(s,e,i),a(e,n)},p(s,i){i&4&&t!==(t=s[2].user.email+"")&&z(n,t)},d(s){s&&k(e)}}}function Dc(l){let e;return{c(){e=S("Logout")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function Tc(l){let e,t,n,s,i,o,c,r,f,u,d,v=l[1]&&Es(),h=l[2].user&&Ms(l);return u=new Ne({props:{variant:"ghost",size:"sm",$$slots:{default:[Dc]},$$scope:{ctx:l}}}),u.$on("click",l[3]),{c(){e=_("header"),t=_("h1"),n=_("span"),s=b(),i=S(l[0]),o=b(),c=_("div"),v&&v.c(),r=b(),h&&h.c(),f=b(),X(u.$$.fragment),p(n,"class","brand-dot svelte-12krgw5"),p(t,"class","svelte-12krgw5"),p(c,"class","header-actions svelte-12krgw5"),p(e,"class","header glass svelte-12krgw5")},m(m,g){w(m,e,g),a(e,t),a(t,n),a(t,s),a(t,i),a(e,o),a(e,c),v&&v.m(c,null),a(c,r),h&&h.m(c,null),a(c,f),Y(u,c,null),d=!0},p(m,[g]){(!d||g&1)&&z(i,m[0]),m[1]?v||(v=Es(),v.c(),v.m(c,r)):v&&(v.d(1),v=null),m[2].user?h?h.p(m,g):(h=Ms(m),h.c(),h.m(c,f)):h&&(h.d(1),h=null);const C={};g&16&&(C.$$scope={dirty:g,ctx:m}),u.$set(C)},i(m){d||(P(u.$$.fragment,m),d=!0)},o(m){L(u.$$.fragment,m),d=!1},d(m){m&&k(e),v&&v.d(),h&&h.d(),K(u)}}}function Pc(l,e,t){var c,r;let n;Xe(l,$t,f=>t(2,n=f));let s=!1;try{s=((r=(c=import.meta)==null?void 0:c.env)==null?void 0:r.VITE_MOCK_API)==="1"||typeof localStorage<"u"&&localStorage.getItem("mockApi")==="1"}catch{s=!1}let{title:i="Deploy Dashboard"}=e;function o(){$t.logout()}return l.$$set=f=>{"title"in f&&t(0,i=f.title)},[i,s,n,o]}class Ec extends tt{constructor(e){super(),et(this,e,Pc,Tc,xe,{title:0})}}function Ls(l,e,t){const n=l.slice();return n[6]=e[t],n}function Ns(l){let e,t=l[6].icon+"",n;return{c(){e=_("span"),n=S(t),p(e,"class","tab-icon svelte-1po08a6")},m(s,i){w(s,e,i),a(e,n)},p(s,i){i&2&&t!==(t=s[6].icon+"")&&z(n,t)},d(s){s&&k(e)}}}function js(l){let e,t,n=l[6].label+"",s,i,o,c,r=l[6].icon&&Ns(l);function f(){return l[4](l[6])}return{c(){e=_("button"),r&&r.c(),t=b(),s=S(n),i=b(),p(e,"class","tab svelte-1po08a6"),Te(e,"active",l[0]===l[6].id)},m(u,d){w(u,e,d),r&&r.m(e,null),a(e,t),a(e,s),a(e,i),o||(c=le(e,"click",f),o=!0)},p(u,d){l=u,l[6].icon?r?r.p(l,d):(r=Ns(l),r.c(),r.m(e,t)):r&&(r.d(1),r=null),d&2&&n!==(n=l[6].label+"")&&z(s,n),d&3&&Te(e,"active",l[0]===l[6].id)},d(u){u&&k(e),r&&r.d(),o=!1,c()}}}function Mc(l){let e,t=ve(l[1]),n=[];for(let s=0;s<t.length;s+=1)n[s]=js(Ls(l,t,s));return{c(){e=_("div");for(let s=0;s<n.length;s+=1)n[s].c();p(e,"class","tabs svelte-1po08a6"),Te(e,"scrollable",l[2])},m(s,i){w(s,e,i);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null)},p(s,[i]){if(i&11){t=ve(s[1]);let o;for(o=0;o<t.length;o+=1){const c=Ls(s,t,o);n[o]?n[o].p(c,i):(n[o]=js(c),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=t.length}i&4&&Te(e,"scrollable",s[2])},i:ie,o:ie,d(s){s&&k(e),Re(n,s)}}}function Lc(l,e,t){let{tabs:n=[]}=e,{active:s=""}=e,{scrollable:i=!0}=e;const o=rn();function c(f){t(0,s=f),o("change",f)}const r=f=>c(f.id);return l.$$set=f=>{"tabs"in f&&t(1,n=f.tabs),"active"in f&&t(0,s=f.active),"scrollable"in f&&t(2,i=f.scrollable)},[s,n,i,c,r]}class Nc extends tt{constructor(e){super(),et(this,e,Lc,Mc,xe,{tabs:1,active:0,scrollable:2})}}function Rs(l,e,t){const n=l.slice();return n[17]=e[t],n}function As(l,e,t){var i,o,c;const n=l.slice();n[20]=e[t];const s=n[20].ip||((c=(o=(i=n[20].networks)==null?void 0:i.v4)==null?void 0:o[0])==null?void 0:c.ip_address);return n[21]=s,n}function Os(l,e,t){const n=l.slice();return n[24]=e[t],n}function Fs(l){let e,t=l[24]+"",n,s;return{c(){e=_("option"),n=S(t),e.__value=s=l[24],ee(e,e.__value)},m(i,o){w(i,e,o),a(e,n)},p(i,o){o&8&&t!==(t=i[24]+"")&&z(n,t),o&8&&s!==(s=i[24])&&(e.__value=s,ee(e,e.__value))},d(i){i&&k(e)}}}function zs(l){let e,t=(l[20].name||"unnamed")+"",n,s,i=l[21]+"",o,c,r;return{c(){e=_("option"),n=S(t),s=S(" ("),o=S(i),c=S(")"),e.__value=r=l[21],ee(e,e.__value)},m(f,u){w(f,e,u),a(e,n),a(e,s),a(e,o),a(e,c)},p(f,u){u&16&&t!==(t=(f[20].name||"unnamed")+"")&&z(n,t),u&16&&i!==(i=f[21]+"")&&z(o,i),u&16&&r!==(r=f[21])&&(e.__value=r,ee(e,e.__value))},d(f){f&&k(e)}}}function Bs(l){let e,t=l[21]&&zs(l);return{c(){t&&t.c(),e=Ae()},m(n,s){t&&t.m(n,s),w(n,e,s)},p(n,s){n[21]?t?t.p(n,s):(t=zs(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(n){n&&k(e),t&&t.d(n)}}}function Is(l){let e,t,n,s,i,o,c,r,f=ve(l[5]||[]),u=[];for(let d=0;d<f.length;d+=1)u[d]=Us(Rs(l,f,d));return{c(){e=_("div"),t=_("label"),t.textContent="Container:",n=b(),s=_("select"),i=_("option"),i.textContent="(All)";for(let d=0;d<u.length;d+=1)u[d].c();p(t,"class","svelte-1wvrz0m"),i.__value="",ee(i,i.__value),p(s,"class","svelte-1wvrz0m"),p(e,"class","scope-field svelte-1wvrz0m")},m(d,v){w(d,e,v),a(e,t),a(e,n),a(e,s),a(s,i);for(let h=0;h<u.length;h+=1)u[h]&&u[h].m(s,null);je(s,l[2].container),c||(r=le(s,"change",l[13]),c=!0)},p(d,v){if(v&32){f=ve(d[5]||[]);let h;for(h=0;h<f.length;h+=1){const m=Rs(d,f,h);u[h]?u[h].p(m,v):(u[h]=Us(m),u[h].c(),u[h].m(s,null))}for(;h<u.length;h+=1)u[h].d(1);u.length=f.length}v&12&&o!==(o=d[2].container)&&je(s,d[2].container)},d(d){d&&k(e),Re(u,d),c=!1,r()}}}function Us(l){let e,t=l[17].name+"",n,s;return{c(){e=_("option"),n=S(t),e.__value=s=l[17].name,ee(e,e.__value)},m(i,o){w(i,e,o),a(e,n)},p(i,o){o&32&&t!==(t=i[17].name+"")&&z(n,t),o&32&&s!==(s=i[17].name)&&(e.__value=s,ee(e,e.__value))},d(i){i&&k(e)}}}function Hs(l){let e,t,n,s,i,o;return{c(){e=_("label"),t=_("input"),s=S(`
      Tail`),p(t,"type","checkbox"),t.checked=n=l[2].tail,p(t,"class","svelte-1wvrz0m"),p(e,"class","tail-toggle svelte-1wvrz0m")},m(c,r){w(c,e,r),a(e,t),a(e,s),i||(o=le(t,"change",l[15]),i=!0)},p(c,r){r&12&&n!==(n=c[2].tail)&&(t.checked=n)},d(c){c&&k(e),i=!1,o()}}}function jc(l){let e,t,n,s,i,o,c,r,f,u,d,v,h,m,g,C,y,$,q,D,T,M,E,j,R,O,F,I,W,V,H,B,N,G,A,U,x,Q,ne,te,oe,pe,ae,Ee,me,re=ve(l[3]||[]),_e=[];for(let he=0;he<re.length;he+=1)_e[he]=Fs(Os(l,re,he));let Ce=ve(l[4]||[]),ce=[];for(let he=0;he<Ce.length;he+=1)ce[he]=Bs(As(l,Ce,he));let ue=l[1]&&l[2].server&&Is(l),be=l[0]&&Hs(l);return{c(){e=_("div"),t=_("div"),n=_("div"),n.innerHTML='<span class="brand-dot svelte-1wvrz0m"></span> <span>cc</span>',s=b(),i=_("div"),o=_("label"),o.textContent="Project:",c=b(),r=_("select"),f=_("option"),f.textContent="All";for(let he=0;he<_e.length;he+=1)_e[he].c();d=b(),v=_("div"),h=_("label"),h.textContent="Env:",m=b(),g=_("select"),C=_("option"),C.textContent="All",y=_("option"),y.textContent="prod",$=_("option"),$.textContent="staging",q=_("option"),q.textContent="dev",T=b(),M=_("div"),E=_("label"),E.textContent="Server:",j=b(),R=_("select"),O=_("option"),O.textContent="(Fleet)";for(let he=0;he<ce.length;he+=1)ce[he].c();I=b(),ue&&ue.c(),W=b(),V=_("div"),H=_("label"),H.textContent="Last",B=b(),N=_("select"),G=_("option"),G.textContent="15m",A=_("option"),A.textContent="1h",U=_("option"),U.textContent="6h",x=_("option"),x.textContent="24h",Q=_("option"),Q.textContent="7d",ne=_("option"),ne.textContent="30d",oe=b(),pe=_("button"),pe.innerHTML='<svg viewBox="0 0 24 24" fill="none" class="svelte-1wvrz0m"><path d="M20 12a8 8 0 1 1-2.34-5.66" stroke="currentColor" stroke-width="2" stroke-linecap="round"></path><path d="M20 4v6h-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg>',ae=b(),be&&be.c(),p(n,"class","scope-brand svelte-1wvrz0m"),p(o,"class","svelte-1wvrz0m"),f.__value="",ee(f,f.__value),p(r,"class","svelte-1wvrz0m"),p(i,"class","scope-field svelte-1wvrz0m"),p(h,"class","svelte-1wvrz0m"),C.__value="",ee(C,C.__value),y.__value="prod",ee(y,y.__value),$.__value="staging",ee($,$.__value),q.__value="dev",ee(q,q.__value),p(g,"class","svelte-1wvrz0m"),p(v,"class","scope-field svelte-1wvrz0m"),p(E,"class","svelte-1wvrz0m"),O.__value="",ee(O,O.__value),p(R,"class","svelte-1wvrz0m"),p(M,"class","scope-field svelte-1wvrz0m"),p(H,"class","svelte-1wvrz0m"),G.__value="15m",ee(G,G.__value),A.__value="1h",ee(A,A.__value),U.__value="6h",ee(U,U.__value),x.__value="24h",ee(x,x.__value),Q.__value="7d",ee(Q,Q.__value),ne.__value="30d",ee(ne,ne.__value),p(N,"class","svelte-1wvrz0m"),p(V,"class","scope-field svelte-1wvrz0m"),p(pe,"class","iconbtn svelte-1wvrz0m"),p(pe,"title","Refresh"),p(t,"class","scope-bar-inner svelte-1wvrz0m"),p(e,"class","scope-bar glass svelte-1wvrz0m")},m(he,He){w(he,e,He),a(e,t),a(t,n),a(t,s),a(t,i),a(i,o),a(i,c),a(i,r),a(r,f);for(let De=0;De<_e.length;De+=1)_e[De]&&_e[De].m(r,null);je(r,l[2].project),a(t,d),a(t,v),a(v,h),a(v,m),a(v,g),a(g,C),a(g,y),a(g,$),a(g,q),je(g,l[2].env),a(t,T),a(t,M),a(M,E),a(M,j),a(M,R),a(R,O);for(let De=0;De<ce.length;De+=1)ce[De]&&ce[De].m(R,null);je(R,l[2].server),a(t,I),ue&&ue.m(t,null),a(t,W),a(t,V),a(V,H),a(V,B),a(V,N),a(N,G),a(N,A),a(N,U),a(N,x),a(N,Q),a(N,ne),je(N,l[2].range),a(t,oe),a(t,pe),a(e,ae),be&&be.m(e,null),Ee||(me=[le(r,"change",l[10]),le(g,"change",l[11]),le(R,"change",l[12]),le(N,"change",l[14]),le(pe,"click",l[9])],Ee=!0)},p(he,[He]){if(He&8){re=ve(he[3]||[]);let De;for(De=0;De<re.length;De+=1){const lt=Os(he,re,De);_e[De]?_e[De].p(lt,He):(_e[De]=Fs(lt),_e[De].c(),_e[De].m(r,null))}for(;De<_e.length;De+=1)_e[De].d(1);_e.length=re.length}if(He&12&&u!==(u=he[2].project)&&je(r,he[2].project),He&12&&D!==(D=he[2].env)&&je(g,he[2].env),He&16){Ce=ve(he[4]||[]);let De;for(De=0;De<Ce.length;De+=1){const lt=As(he,Ce,De);ce[De]?ce[De].p(lt,He):(ce[De]=Bs(lt),ce[De].c(),ce[De].m(R,null))}for(;De<ce.length;De+=1)ce[De].d(1);ce.length=Ce.length}He&12&&F!==(F=he[2].server)&&je(R,he[2].server),he[1]&&he[2].server?ue?ue.p(he,He):(ue=Is(he),ue.c(),ue.m(t,W)):ue&&(ue.d(1),ue=null),He&12&&te!==(te=he[2].range)&&je(N,he[2].range),he[0]?be?be.p(he,He):(be=Hs(he),be.c(),be.m(e,null)):be&&(be.d(1),be=null)},i:ie,o:ie,d(he){he&&k(e),Re(_e,he),Re(ce,he),ue&&ue.d(),be&&be.d(),Ee=!1,We(me)}}}function Rc(l,e,t){let n,s,i,o;Xe(l,pl,D=>t(2,n=D)),Xe(l,qa,D=>t(3,s=D)),Xe(l,Ul,D=>t(4,i=D)),Xe(l,ac,D=>t(5,o=D));let{showTail:c=!1}=e,{showContainer:r=!1}=e;const f=rn();function u(D,T){pl.update(M=>({...M,[D]:T})),f("change")}function d(D){pl.update(T=>({...T,server:D,container:""})),f("change")}function v(D){pl.update(T=>({...T,tail:D})),f("change")}function h(){f("refresh")}const m=D=>u("project",D.target.value),g=D=>u("env",D.target.value),C=D=>d(D.target.value),y=D=>u("container",D.target.value),$=D=>u("range",D.target.value),q=D=>v(D.target.checked);return l.$$set=D=>{"showTail"in D&&t(0,c=D.showTail),"showContainer"in D&&t(1,r=D.showContainer)},l.$$.update=()=>{l.$$.dirty&4&&(n.server?Xn.fetch({server:n.server}):(Xn.clear(),n.container&&pl.update(D=>({...D,container:""}))))},[c,r,n,s,i,o,u,d,v,h,m,g,C,y,$,q]}class Ac extends tt{constructor(e){super(),et(this,e,Rc,jc,xe,{showTail:0,showContainer:1})}}const Oc=l=>({}),Gs=l=>({}),Fc=l=>({}),Ws=l=>({});function Js(l){let e,t,n,s=l[0]&&Vs(l);const i=l[5].header,o=Vt(i,l,l[4],Ws);return{c(){e=_("div"),s&&s.c(),t=b(),o&&o.c(),p(e,"class","card-header svelte-1qbuf8h")},m(c,r){w(c,e,r),s&&s.m(e,null),a(e,t),o&&o.m(e,null),n=!0},p(c,r){c[0]?s?s.p(c,r):(s=Vs(c),s.c(),s.m(e,t)):s&&(s.d(1),s=null),o&&o.p&&(!n||r&16)&&Kt(o,i,c,c[4],n?Yt(i,c[4],r,Fc):Qt(c[4]),Ws)},i(c){n||(P(o,c),n=!0)},o(c){L(o,c),n=!1},d(c){c&&k(e),s&&s.d(),o&&o.d(c)}}}function Vs(l){let e,t;return{c(){e=_("span"),t=S(l[0]),p(e,"class","card-title svelte-1qbuf8h")},m(n,s){w(n,e,s),a(e,t)},p(n,s){s&1&&z(t,n[0])},d(n){n&&k(e)}}}function Ys(l){let e,t;const n=l[5].footer,s=Vt(n,l,l[4],Gs);return{c(){e=_("div"),s&&s.c(),p(e,"class","card-footer svelte-1qbuf8h")},m(i,o){w(i,e,o),s&&s.m(e,null),t=!0},p(i,o){s&&s.p&&(!t||o&16)&&Kt(s,n,i,i[4],t?Yt(n,i[4],o,Oc):Qt(i[4]),Gs)},i(i){t||(P(s,i),t=!0)},o(i){L(s,i),t=!1},d(i){i&&k(e),s&&s.d(i)}}}function zc(l){let e,t,n,s,i,o=(l[0]||l[3].header)&&Js(l);const c=l[5].default,r=Vt(c,l,l[4],null);let f=l[3].footer&&Ys(l);return{c(){e=_("div"),o&&o.c(),t=b(),n=_("div"),r&&r.c(),s=b(),f&&f.c(),p(n,"class","card-body svelte-1qbuf8h"),p(e,"class","card svelte-1qbuf8h"),Te(e,"glass",l[1]),Te(e,"no-padding",!l[2])},m(u,d){w(u,e,d),o&&o.m(e,null),a(e,t),a(e,n),r&&r.m(n,null),a(e,s),f&&f.m(e,null),i=!0},p(u,[d]){u[0]||u[3].header?o?(o.p(u,d),d&9&&P(o,1)):(o=Js(u),o.c(),P(o,1),o.m(e,t)):o&&(ke(),L(o,1,1,()=>{o=null}),we()),r&&r.p&&(!i||d&16)&&Kt(r,c,u,u[4],i?Yt(c,u[4],d,null):Qt(u[4]),null),u[3].footer?f?(f.p(u,d),d&8&&P(f,1)):(f=Ys(u),f.c(),P(f,1),f.m(e,null)):f&&(ke(),L(f,1,1,()=>{f=null}),we()),(!i||d&2)&&Te(e,"glass",u[1]),(!i||d&4)&&Te(e,"no-padding",!u[2])},i(u){i||(P(o),P(r,u),P(f),i=!0)},o(u){L(o),L(r,u),L(f),i=!1},d(u){u&&k(e),o&&o.d(),r&&r.d(u),f&&f.d()}}}function Bc(l,e,t){let{$$slots:n={},$$scope:s}=e;const i=aa(n);let{title:o=""}=e,{glass:c=!1}=e,{padding:r=!0}=e;return l.$$set=f=>{"title"in f&&t(0,o=f.title),"glass"in f&&t(1,c=f.glass),"padding"in f&&t(2,r=f.padding),"$$scope"in f&&t(4,s=f.$$scope)},[o,c,r,i,s,n]}class ze extends tt{constructor(e){super(),et(this,e,Bc,zc,xe,{title:0,glass:1,padding:2})}}const Ic=l=>({}),Ks=l=>({}),Uc=l=>({}),Qs=l=>({});function Zs(l){let e,t,n,s,i,o,c,r,f,u,d=(l[1]||l[6].header)&&Xs(l);const v=l[9].default,h=Vt(v,l,l[8],null);let m=l[6].footer&&eo(l);return{c(){e=_("div"),t=_("div"),d&&d.c(),n=b(),s=_("div"),h&&h.c(),i=b(),m&&m.c(),p(s,"class","modal-body svelte-kno8vc"),p(t,"class","modal svelte-kno8vc"),Ue(t,"max-width",l[2]),p(e,"class","modal-overlay svelte-kno8vc"),p(e,"role","dialog"),p(e,"aria-modal","true")},m(g,C){w(g,e,C),a(e,t),d&&d.m(t,null),a(t,n),a(t,s),h&&h.m(s,null),a(t,i),m&&m.m(t,null),r=!0,f||(u=le(e,"click",l[4]),f=!0)},p(g,C){g[1]||g[6].header?d?(d.p(g,C),C&66&&P(d,1)):(d=Xs(g),d.c(),P(d,1),d.m(t,n)):d&&(ke(),L(d,1,1,()=>{d=null}),we()),h&&h.p&&(!r||C&256)&&Kt(h,v,g,g[8],r?Yt(v,g[8],C,null):Qt(g[8]),null),g[6].footer?m?(m.p(g,C),C&64&&P(m,1)):(m=eo(g),m.c(),P(m,1),m.m(t,null)):m&&(ke(),L(m,1,1,()=>{m=null}),we()),(!r||C&4)&&Ue(t,"max-width",g[2])},i(g){r||(P(d),P(h,g),P(m),g&&Qe(()=>{r&&(o||(o=Fl(t,Ss,{duration:200,start:.95},!0)),o.run(1))}),g&&Qe(()=>{r&&(c||(c=Fl(e,ys,{duration:150},!0)),c.run(1))}),r=!0)},o(g){L(d),L(h,g),L(m),g&&(o||(o=Fl(t,Ss,{duration:200,start:.95},!1)),o.run(0)),g&&(c||(c=Fl(e,ys,{duration:150},!1)),c.run(0)),r=!1},d(g){g&&k(e),d&&d.d(),h&&h.d(g),m&&m.d(),g&&o&&o.end(),g&&c&&c.end(),f=!1,u()}}}function Xs(l){let e,t,n,s,i,o,c,r=l[1]&&xs(l);const f=l[9].header,u=Vt(f,l,l[8],Qs);return{c(){e=_("div"),r&&r.c(),t=b(),u&&u.c(),n=b(),s=_("button"),s.innerHTML='<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-kno8vc"><path d="M18 6L6 18M6 6l12 12"></path></svg>',p(s,"class","modal-close svelte-kno8vc"),p(s,"aria-label","Close"),p(e,"class","modal-header svelte-kno8vc")},m(d,v){w(d,e,v),r&&r.m(e,null),a(e,t),u&&u.m(e,null),a(e,n),a(e,s),i=!0,o||(c=le(s,"click",l[3]),o=!0)},p(d,v){d[1]?r?r.p(d,v):(r=xs(d),r.c(),r.m(e,t)):r&&(r.d(1),r=null),u&&u.p&&(!i||v&256)&&Kt(u,f,d,d[8],i?Yt(f,d[8],v,Uc):Qt(d[8]),Qs)},i(d){i||(P(u,d),i=!0)},o(d){L(u,d),i=!1},d(d){d&&k(e),r&&r.d(),u&&u.d(d),o=!1,c()}}}function xs(l){let e,t;return{c(){e=_("h3"),t=S(l[1]),p(e,"class","svelte-kno8vc")},m(n,s){w(n,e,s),a(e,t)},p(n,s){s&2&&z(t,n[1])},d(n){n&&k(e)}}}function eo(l){let e,t;const n=l[9].footer,s=Vt(n,l,l[8],Ks);return{c(){e=_("div"),s&&s.c(),p(e,"class","modal-footer svelte-kno8vc")},m(i,o){w(i,e,o),s&&s.m(e,null),t=!0},p(i,o){s&&s.p&&(!t||o&256)&&Kt(s,n,i,i[8],t?Yt(n,i[8],o,Ic):Qt(i[8]),Ks)},i(i){t||(P(s,i),t=!0)},o(i){L(s,i),t=!1},d(i){i&&k(e),s&&s.d(i)}}}function Hc(l){let e,t,n,s,i=l[0]&&Zs(l);return{c(){i&&i.c(),e=Ae()},m(o,c){i&&i.m(o,c),w(o,e,c),t=!0,n||(s=le(window,"keydown",l[5]),n=!0)},p(o,[c]){o[0]?i?(i.p(o,c),c&1&&P(i,1)):(i=Zs(o),i.c(),P(i,1),i.m(e.parentNode,e)):i&&(ke(),L(i,1,1,()=>{i=null}),we())},i(o){t||(P(i),t=!0)},o(o){L(i),t=!1},d(o){o&&k(e),i&&i.d(o),n=!1,s()}}}function Gc(l,e,t){let{$$slots:n={},$$scope:s}=e;const i=aa(n);let{open:o=!1}=e,{title:c=""}=e,{width:r="500px"}=e,{closeOnOverlay:f=!0}=e;const u=rn();function d(){u("close")}function v(m){f&&m.target===m.currentTarget&&d()}function h(m){m.key==="Escape"&&d()}return l.$$set=m=>{"open"in m&&t(0,o=m.open),"title"in m&&t(1,c=m.title),"width"in m&&t(2,r=m.width),"closeOnOverlay"in m&&t(7,f=m.closeOnOverlay),"$$scope"in m&&t(8,s=m.$$scope)},[o,c,r,d,v,h,i,f,s,n]}class yl extends tt{constructor(e){super(),et(this,e,Gc,Hc,xe,{open:0,title:1,width:2,closeOnOverlay:7})}}function Wc(l){let e,t,n;const s=l[2].default,i=Vt(s,l,l[1],null);return{c(){e=_("span"),i&&i.c(),p(e,"class",t="badge badge-"+l[0]+" svelte-1d0la3i")},m(o,c){w(o,e,c),i&&i.m(e,null),n=!0},p(o,[c]){i&&i.p&&(!n||c&2)&&Kt(i,s,o,o[1],n?Yt(s,o[1],c,null):Qt(o[1]),null),(!n||c&1&&t!==(t="badge badge-"+o[0]+" svelte-1d0la3i"))&&p(e,"class",t)},i(o){n||(P(i,o),n=!0)},o(o){L(i,o),n=!1},d(o){o&&k(e),i&&i.d(o)}}}function Jc(l,e,t){let{$$slots:n={},$$scope:s}=e,{variant:i="info"}=e;return l.$$set=o=>{"variant"in o&&t(0,i=o.variant),"$$scope"in o&&t(1,s=o.$$scope)},[i,s,n]}class Be extends tt{constructor(e){super(),et(this,e,Jc,Wc,xe,{variant:0})}}function to(l,e,t){const n=l.slice();return n[15]=e[t],n}function lo(l){let e,t;return e=new Be({props:{variant:"info",$$slots:{default:[Vc]},$$scope:{ctx:l}}}),{c(){X(e.$$.fragment)},m(n,s){Y(e,n,s),t=!0},p(n,s){const i={};s&262145&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){K(e,n)}}}function Vc(l){let e=l[0].project+"",t;return{c(){t=S(e)},m(n,s){w(n,t,s)},p(n,s){s&1&&e!==(e=n[0].project+"")&&z(t,e)},d(n){n&&k(t)}}}function no(l){let e,t;return e=new Be({props:{variant:l[0].env==="prod"?"danger":"warning",$$slots:{default:[Yc]},$$scope:{ctx:l}}}),{c(){X(e.$$.fragment)},m(n,s){Y(e,n,s),t=!0},p(n,s){const i={};s&1&&(i.variant=n[0].env==="prod"?"danger":"warning"),s&262145&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){K(e,n)}}}function Yc(l){let e=l[0].env+"",t;return{c(){t=S(e)},m(n,s){w(n,t,s)},p(n,s){s&1&&e!==(e=n[0].env+"")&&z(t,e)},d(n){n&&k(t)}}}function so(l){let e,t,n,s,i=l[4].length+"",o;return{c(){e=_("div"),t=_("span"),t.textContent="Containers",n=b(),s=_("span"),o=S(i),p(t,"class","label svelte-1jkc1of"),p(e,"class","detail svelte-1jkc1of")},m(c,r){w(c,e,r),a(e,t),a(e,n),a(e,s),a(s,o)},p(c,r){r&16&&i!==(i=c[4].length+"")&&z(o,i)},d(c){c&&k(e)}}}function oo(l){let e,t,n,s,i,o;return{c(){e=_("div"),t=_("span"),t.textContent="Agent",n=b(),s=_("span"),i=S("v"),o=S(l[1]),p(t,"class","label svelte-1jkc1of"),p(s,"class","svelte-1jkc1of"),Te(s,"outdated",l[3]),p(e,"class","detail svelte-1jkc1of")},m(c,r){w(c,e,r),a(e,t),a(e,n),a(e,s),a(s,i),a(s,o)},p(c,r){r&2&&z(o,c[1]),r&8&&Te(s,"outdated",c[3])},d(c){c&&k(e)}}}function io(l){let e,t,n=ve(l[4].slice(0,5)),s=[];for(let o=0;o<n.length;o+=1)s[o]=ro(to(l,n,o));let i=l[4].length>5&&ao(l);return{c(){e=_("div");for(let o=0;o<s.length;o+=1)s[o].c();t=b(),i&&i.c(),p(e,"class","containers svelte-1jkc1of")},m(o,c){w(o,e,c);for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(e,null);a(e,t),i&&i.m(e,null)},p(o,c){if(c&16){n=ve(o[4].slice(0,5));let r;for(r=0;r<n.length;r+=1){const f=to(o,n,r);s[r]?s[r].p(f,c):(s[r]=ro(f),s[r].c(),s[r].m(e,t))}for(;r<s.length;r+=1)s[r].d(1);s.length=n.length}o[4].length>5?i?i.p(o,c):(i=ao(o),i.c(),i.m(e,null)):i&&(i.d(1),i=null)},d(o){o&&k(e),Re(s,o),i&&i.d()}}}function ro(l){let e,t=(l[15].name||l[15])+"",n;return{c(){e=_("span"),n=S(t),p(e,"class","container-tag svelte-1jkc1of")},m(s,i){w(s,e,i),a(e,n)},p(s,i){i&16&&t!==(t=(s[15].name||s[15])+"")&&z(n,t)},d(s){s&&k(e)}}}function ao(l){let e,t,n=l[4].length-5+"",s;return{c(){e=_("span"),t=S("+"),s=S(n),p(e,"class","container-tag more svelte-1jkc1of")},m(i,o){w(i,e,o),a(e,t),a(e,s)},p(i,o){o&16&&n!==(n=i[4].length-5+"")&&z(s,n)},d(i){i&&k(e)}}}function Kc(l){let e;return{c(){e=S("Terminal")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function Qc(l){let e;return{c(){e=S("Details")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function Zc(l){let e,t;return e=new Ne({props:{variant:"warning",size:"sm",$$slots:{default:[xc]},$$scope:{ctx:l}}}),e.$on("click",l[12]),{c(){X(e.$$.fragment)},m(n,s){Y(e,n,s),t=!0},p(n,s){const i={};s&262144&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){K(e,n)}}}function Xc(l){let e,t;return e=new Ne({props:{variant:"success",size:"sm",$$slots:{default:[eu]},$$scope:{ctx:l}}}),e.$on("click",l[11]),{c(){X(e.$$.fragment)},m(n,s){Y(e,n,s),t=!0},p(n,s){const i={};s&262144&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){K(e,n)}}}function xc(l){let e;return{c(){e=S("Stop")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function eu(l){let e;return{c(){e=S("Start")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function tu(l){let e;return{c(){e=S("Destroy")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function lu(l){var ot;let e,t,n,s,i,o,c,r=(l[0].name||"Unnamed")+"",f,u,d,v,h,m,g,C,y,$,q,D,T,M,E,j,R=(l[0].size_slug||l[0].size||"N/A")+"",O,F,I,W,V,H,B=(((ot=l[0].region)==null?void 0:ot.slug)||l[0].region||"N/A")+"",N,G,A,U,x,Q,ne,te,oe,pe,ae,Ee,me,re,_e,Ce=l[0].project&&lo(l),ce=l[0].env&&no(l),ue=l[4].length>0&&so(l),be=l[1]&&oo(l),he=l[4].length>0&&io(l);ne=new Ne({props:{variant:"ghost",size:"sm",$$slots:{default:[Kc]},$$scope:{ctx:l}}}),ne.$on("click",l[9]),oe=new Ne({props:{variant:"ghost",size:"sm",$$slots:{default:[Qc]},$$scope:{ctx:l}}}),oe.$on("click",l[10]);const He=[Xc,Zc],De=[];function lt(Pe,de){return Pe[5]?1:0}return ae=lt(l),Ee=De[ae]=He[ae](l),re=new Ne({props:{variant:"danger",size:"sm",$$slots:{default:[tu]},$$scope:{ctx:l}}}),re.$on("click",l[13]),{c(){e=_("div"),t=_("div"),n=_("div"),s=_("span"),o=b(),c=_("span"),f=S(r),u=b(),d=_("div"),Ce&&Ce.c(),v=b(),ce&&ce.c(),h=b(),m=_("div"),g=_("div"),C=_("span"),C.textContent="IP",y=b(),$=_("code"),q=S(l[6]),D=b(),T=_("div"),M=_("span"),M.textContent="Size",E=b(),j=_("span"),O=S(R),F=b(),I=_("div"),W=_("span"),W.textContent="Region",V=b(),H=_("span"),N=S(B),G=b(),ue&&ue.c(),A=b(),be&&be.c(),U=b(),he&&he.c(),x=b(),Q=_("div"),X(ne.$$.fragment),te=b(),X(oe.$$.fragment),pe=b(),Ee.c(),me=b(),X(re.$$.fragment),p(s,"class",i="status-dot "+l[7](l[2])+" svelte-1jkc1of"),p(n,"class","server-name svelte-1jkc1of"),p(d,"class","server-badges svelte-1jkc1of"),p(t,"class","server-header svelte-1jkc1of"),p(C,"class","label svelte-1jkc1of"),p($,"class","server-ip svelte-1jkc1of"),p(g,"class","detail svelte-1jkc1of"),p(M,"class","label svelte-1jkc1of"),p(T,"class","detail svelte-1jkc1of"),p(W,"class","label svelte-1jkc1of"),p(I,"class","detail svelte-1jkc1of"),p(m,"class","server-details svelte-1jkc1of"),p(Q,"class","server-actions svelte-1jkc1of"),p(e,"class","server-item svelte-1jkc1of")},m(Pe,de){w(Pe,e,de),a(e,t),a(t,n),a(n,s),a(n,o),a(n,c),a(c,f),a(t,u),a(t,d),Ce&&Ce.m(d,null),a(d,v),ce&&ce.m(d,null),a(e,h),a(e,m),a(m,g),a(g,C),a(g,y),a(g,$),a($,q),a(m,D),a(m,T),a(T,M),a(T,E),a(T,j),a(j,O),a(m,F),a(m,I),a(I,W),a(I,V),a(I,H),a(H,N),a(m,G),ue&&ue.m(m,null),a(m,A),be&&be.m(m,null),a(e,U),he&&he.m(e,null),a(e,x),a(e,Q),Y(ne,Q,null),a(Q,te),Y(oe,Q,null),a(Q,pe),De[ae].m(Q,null),a(Q,me),Y(re,Q,null),_e=!0},p(Pe,[de]){var Ve;(!_e||de&4&&i!==(i="status-dot "+Pe[7](Pe[2])+" svelte-1jkc1of"))&&p(s,"class",i),(!_e||de&1)&&r!==(r=(Pe[0].name||"Unnamed")+"")&&z(f,r),Pe[0].project?Ce?(Ce.p(Pe,de),de&1&&P(Ce,1)):(Ce=lo(Pe),Ce.c(),P(Ce,1),Ce.m(d,v)):Ce&&(ke(),L(Ce,1,1,()=>{Ce=null}),we()),Pe[0].env?ce?(ce.p(Pe,de),de&1&&P(ce,1)):(ce=no(Pe),ce.c(),P(ce,1),ce.m(d,null)):ce&&(ke(),L(ce,1,1,()=>{ce=null}),we()),(!_e||de&64)&&z(q,Pe[6]),(!_e||de&1)&&R!==(R=(Pe[0].size_slug||Pe[0].size||"N/A")+"")&&z(O,R),(!_e||de&1)&&B!==(B=(((Ve=Pe[0].region)==null?void 0:Ve.slug)||Pe[0].region||"N/A")+"")&&z(N,B),Pe[4].length>0?ue?ue.p(Pe,de):(ue=so(Pe),ue.c(),ue.m(m,A)):ue&&(ue.d(1),ue=null),Pe[1]?be?be.p(Pe,de):(be=oo(Pe),be.c(),be.m(m,null)):be&&(be.d(1),be=null),Pe[4].length>0?he?he.p(Pe,de):(he=io(Pe),he.c(),he.m(e,x)):he&&(he.d(1),he=null);const Fe={};de&262144&&(Fe.$$scope={dirty:de,ctx:Pe}),ne.$set(Fe);const Ke={};de&262144&&(Ke.$$scope={dirty:de,ctx:Pe}),oe.$set(Ke);let Je=ae;ae=lt(Pe),ae===Je?De[ae].p(Pe,de):(ke(),L(De[Je],1,1,()=>{De[Je]=null}),we(),Ee=De[ae],Ee?Ee.p(Pe,de):(Ee=De[ae]=He[ae](Pe),Ee.c()),P(Ee,1),Ee.m(Q,me));const it={};de&262144&&(it.$$scope={dirty:de,ctx:Pe}),re.$set(it)},i(Pe){_e||(P(Ce),P(ce),P(ne.$$.fragment,Pe),P(oe.$$.fragment,Pe),P(Ee),P(re.$$.fragment,Pe),_e=!0)},o(Pe){L(Ce),L(ce),L(ne.$$.fragment,Pe),L(oe.$$.fragment,Pe),L(Ee),L(re.$$.fragment,Pe),_e=!1},d(Pe){Pe&&k(e),Ce&&Ce.d(),ce&&ce.d(),ue&&ue.d(),be&&be.d(),he&&he.d(),K(ne),K(oe),De[ae].d(),K(re)}}}function nu(l,e,t){let n,s,i,o,c,r,{server:f}=e;const u=rn();function d($){switch($){case"active":case"online":return"green";case"new":case"starting":return"blue";case"off":case"stopped":return"yellow";default:return"red"}}function v($){u($,{server:f})}const h=()=>v("ssh"),m=()=>v("details"),g=()=>v("start"),C=()=>v("stop"),y=()=>v("destroy");return l.$$set=$=>{"server"in $&&t(0,f=$.server)},l.$$.update=()=>{var $,q,D;l.$$.dirty&1&&t(6,n=f.ip||((D=(q=($=f.networks)==null?void 0:$.v4)==null?void 0:q[0])==null?void 0:D.ip_address)||"N/A"),l.$$.dirty&1&&t(2,s=f.status||"unknown"),l.$$.dirty&4&&t(5,i=s==="active"||s==="online"),l.$$.dirty&1&&t(4,o=f.containers||[]),l.$$.dirty&1&&t(1,c=f.agent_version),l.$$.dirty&2&&t(3,r=c&&c!==cc)},[f,c,s,r,o,i,n,d,v,h,m,g,C,y]}class su extends tt{constructor(e){super(),et(this,e,nu,lu,xe,{server:0})}}function co(l,e,t){const n=l.slice();return n[22]=e[t],n}function uo(l,e,t){const n=l.slice();return n[25]=e[t],n}function fo(l,e,t){const n=l.slice();return n[28]=e[t],n}function ou(l){let e,t;return{c(){e=_("span"),e.textContent="+",t=S(`
      Provision`),p(e,"class","plus-icon svelte-156md29")},m(n,s){w(n,e,s),w(n,t,s)},p:ie,d(n){n&&(k(e),k(t))}}}function iu(l){let e=[],t=new Map,n,s,i=ve(l[3]);const o=c=>c[28].id;for(let c=0;c<i.length;c+=1){let r=fo(l,i,c),f=o(r);t.set(f,e[c]=po(f,r))}return{c(){for(let c=0;c<e.length;c+=1)e[c].c();n=Ae()},m(c,r){for(let f=0;f<e.length;f+=1)e[f]&&e[f].m(c,r);w(c,n,r),s=!0},p(c,r){r[0]&136&&(i=ve(c[3]),ke(),e=$a(e,r,o,1,c,i,t,n.parentNode,ba,po,n,fo),we())},i(c){if(!s){for(let r=0;r<i.length;r+=1)P(e[r]);s=!0}},o(c){for(let r=0;r<e.length;r+=1)L(e[r]);s=!1},d(c){c&&k(n);for(let r=0;r<e.length;r+=1)e[r].d(c)}}}function ru(l){let e;return{c(){e=_("div"),e.innerHTML="<p>No servers found. Provision one to get started.</p>",p(e,"class","empty-state svelte-156md29")},m(t,n){w(t,e,n)},p:ie,i:ie,o:ie,d(t){t&&k(e)}}}function au(l){let e;return{c(){e=_("div"),e.innerHTML="<p>Loading...</p>",p(e,"class","empty-state svelte-156md29")},m(t,n){w(t,e,n)},p:ie,i:ie,o:ie,d(t){t&&k(e)}}}function po(l,e){let t,n,s;return n=new su({props:{server:e[28]}}),n.$on("start",e[7]),n.$on("stop",e[7]),n.$on("destroy",e[7]),n.$on("ssh",e[7]),n.$on("details",e[7]),{key:l,first:null,c(){t=Ae(),X(n.$$.fragment),this.first=t},m(i,o){w(i,t,o),Y(n,i,o),s=!0},p(i,o){e=i;const c={};o[0]&8&&(c.server=e[28]),n.$set(c)},i(i){s||(P(n.$$.fragment,i),s=!0)},o(i){L(n.$$.fragment,i),s=!1},d(i){i&&k(t),K(n,i)}}}function cu(l){let e,t,n,s;const i=[au,ru,iu],o=[];function c(r,f){return r[0]?0:!r[3]||r[3].length===0?1:2}return t=c(l),n=o[t]=i[t](l),{c(){e=_("div"),n.c(),p(e,"class","server-list svelte-156md29")},m(r,f){w(r,e,f),o[t].m(e,null),s=!0},p(r,f){let u=t;t=c(r),t===u?o[t].p(r,f):(ke(),L(o[u],1,1,()=>{o[u]=null}),we(),n=o[t],n?n.p(r,f):(n=o[t]=i[t](r),n.c()),P(n,1),n.m(e,null))},i(r){s||(P(n),s=!0)},o(r){L(n),s=!1},d(r){r&&k(e),o[t].d()}}}function uu(l){let e;return{c(){e=S("↻ Refresh")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function fu(l){let e,t;return e=new Ne({props:{slot:"header",variant:"ghost",size:"sm",$$slots:{default:[uu]},$$scope:{ctx:l}}}),e.$on("click",l[12]),{c(){X(e.$$.fragment)},m(n,s){Y(e,n,s),t=!0},p(n,s){const i={};s[1]&1&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){K(e,n)}}}function _o(l){let e,t=l[25].label+"",n;return{c(){e=_("option"),n=S(t),e.__value=l[25].value,ee(e,e.__value)},m(s,i){w(s,e,i),a(e,n)},p:ie,d(s){s&&k(e)}}}function vo(l){let e,t=l[22].label+"",n;return{c(){e=_("option"),n=S(t),e.__value=l[22].value,ee(e,e.__value)},m(s,i){w(s,e,i),a(e,n)},p:ie,d(s){s&&k(e)}}}function pu(l){let e,t,n,s,i,o,c,r,f,u,d,v,h,m,g,C,y,$,q,D,T,M,E,j,R,O,F,I,W,V,H,B,N,G,A,U,x,Q,ne=ve(l[4]),te=[];for(let ae=0;ae<ne.length;ae+=1)te[ae]=_o(uo(l,ne,ae));let oe=ve(l[5]),pe=[];for(let ae=0;ae<oe.length;ae+=1)pe[ae]=vo(co(l,oe,ae));return{c(){e=_("form"),t=_("div"),n=_("div"),s=_("label"),s.textContent="Name *",i=b(),o=_("input"),c=b(),r=_("div"),f=_("div"),u=_("label"),u.textContent="Project",d=b(),v=_("input"),h=b(),m=_("div"),g=_("label"),g.textContent="Environment",C=b(),y=_("select"),$=_("option"),$.textContent="Production",q=_("option"),q.textContent="Staging",D=_("option"),D.textContent="Development",T=b(),M=_("div"),E=_("div"),j=_("label"),j.textContent="Region",R=b(),O=_("select");for(let ae=0;ae<te.length;ae+=1)te[ae].c();F=b(),I=_("div"),W=_("label"),W.textContent="Count",V=b(),H=_("input"),B=b(),N=_("div"),G=_("label"),G.textContent="Size",A=b(),U=_("select");for(let ae=0;ae<pe.length;ae+=1)pe[ae].c();p(s,"for","prov-name"),p(s,"class","svelte-156md29"),p(o,"id","prov-name"),p(o,"type","text"),p(o,"placeholder","web-server-01"),o.required=!0,p(o,"class","svelte-156md29"),p(n,"class","form-group svelte-156md29"),p(t,"class","form-row svelte-156md29"),p(u,"for","prov-project"),p(u,"class","svelte-156md29"),p(v,"id","prov-project"),p(v,"type","text"),p(v,"placeholder","myapp"),p(v,"class","svelte-156md29"),p(f,"class","form-group svelte-156md29"),p(g,"for","prov-env"),p(g,"class","svelte-156md29"),$.__value="prod",ee($,$.__value),q.__value="staging",ee(q,q.__value),D.__value="dev",ee(D,D.__value),p(y,"id","prov-env"),p(y,"class","svelte-156md29"),l[2].env===void 0&&Qe(()=>l[16].call(y)),p(m,"class","form-group svelte-156md29"),p(r,"class","form-row two-col svelte-156md29"),p(j,"for","prov-region"),p(j,"class","svelte-156md29"),p(O,"id","prov-region"),p(O,"class","svelte-156md29"),l[2].region===void 0&&Qe(()=>l[17].call(O)),p(E,"class","form-group svelte-156md29"),p(W,"for","prov-count"),p(W,"class","svelte-156md29"),p(H,"id","prov-count"),p(H,"type","number"),p(H,"min","1"),p(H,"max","10"),p(H,"class","svelte-156md29"),p(I,"class","form-group svelte-156md29"),p(M,"class","form-row two-col svelte-156md29"),p(G,"for","prov-size"),p(G,"class","svelte-156md29"),p(U,"id","prov-size"),p(U,"class","svelte-156md29"),l[2].size===void 0&&Qe(()=>l[19].call(U)),p(N,"class","form-group svelte-156md29")},m(ae,Ee){w(ae,e,Ee),a(e,t),a(t,n),a(n,s),a(n,i),a(n,o),ee(o,l[2].name),a(e,c),a(e,r),a(r,f),a(f,u),a(f,d),a(f,v),ee(v,l[2].project),a(r,h),a(r,m),a(m,g),a(m,C),a(m,y),a(y,$),a(y,q),a(y,D),je(y,l[2].env,!0),a(e,T),a(e,M),a(M,E),a(E,j),a(E,R),a(E,O);for(let me=0;me<te.length;me+=1)te[me]&&te[me].m(O,null);je(O,l[2].region,!0),a(M,F),a(M,I),a(I,W),a(I,V),a(I,H),ee(H,l[2].count),a(e,B),a(e,N),a(N,G),a(N,A),a(N,U);for(let me=0;me<pe.length;me+=1)pe[me]&&pe[me].m(U,null);je(U,l[2].size,!0),x||(Q=[le(o,"input",l[14]),le(v,"input",l[15]),le(y,"change",l[16]),le(O,"change",l[17]),le(H,"input",l[18]),le(U,"change",l[19]),le(e,"submit",_a(l[6]))],x=!0)},p(ae,Ee){if(Ee[0]&4&&o.value!==ae[2].name&&ee(o,ae[2].name),Ee[0]&4&&v.value!==ae[2].project&&ee(v,ae[2].project),Ee[0]&4&&je(y,ae[2].env),Ee[0]&16){ne=ve(ae[4]);let me;for(me=0;me<ne.length;me+=1){const re=uo(ae,ne,me);te[me]?te[me].p(re,Ee):(te[me]=_o(re),te[me].c(),te[me].m(O,null))}for(;me<te.length;me+=1)te[me].d(1);te.length=ne.length}if(Ee[0]&4&&je(O,ae[2].region),Ee[0]&4&&jt(H.value)!==ae[2].count&&ee(H,ae[2].count),Ee[0]&32){oe=ve(ae[5]);let me;for(me=0;me<oe.length;me+=1){const re=co(ae,oe,me);pe[me]?pe[me].p(re,Ee):(pe[me]=vo(re),pe[me].c(),pe[me].m(U,null))}for(;me<pe.length;me+=1)pe[me].d(1);pe.length=oe.length}Ee[0]&4&&je(U,ae[2].size)},d(ae){ae&&k(e),Re(te,ae),Re(pe,ae),x=!1,We(Q)}}}function _u(l){let e;return{c(){e=S("Cancel")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function du(l){let e;return{c(){e=S("🚀 Provision")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function vu(l){let e,t,n,s,i;return t=new Ne({props:{variant:"ghost",$$slots:{default:[_u]},$$scope:{ctx:l}}}),t.$on("click",l[13]),s=new Ne({props:{variant:"primary",$$slots:{default:[du]},$$scope:{ctx:l}}}),s.$on("click",l[6]),{c(){e=_("div"),X(t.$$.fragment),n=b(),X(s.$$.fragment),p(e,"slot","footer")},m(o,c){w(o,e,c),Y(t,e,null),a(e,n),Y(s,e,null),i=!0},p(o,c){const r={};c[1]&1&&(r.$$scope={dirty:c,ctx:o}),t.$set(r);const f={};c[1]&1&&(f.$$scope={dirty:c,ctx:o}),s.$set(f)},i(o){i||(P(t.$$.fragment,o),P(s.$$.fragment,o),i=!0)},o(o){L(t.$$.fragment,o),L(s.$$.fragment,o),i=!1},d(o){o&&k(e),K(t),K(s)}}}function mu(l){let e,t,n,s,i,o,c,r,f,u,d;i=new Ne({props:{variant:"primary",$$slots:{default:[ou]},$$scope:{ctx:l}}}),i.$on("click",l[11]),c=new ze({props:{title:"Servers",padding:!1,$$slots:{header:[fu],default:[cu]},$$scope:{ctx:l}}});function v(m){l[20](m)}let h={title:"Provision Server",width:"500px",$$slots:{footer:[vu],default:[pu]},$$scope:{ctx:l}};return l[1]!==void 0&&(h.open=l[1]),f=new yl({props:h}),_t.push(()=>wl(f,"open",v)),f.$on("close",l[21]),{c(){e=_("div"),t=_("div"),n=_("div"),n.innerHTML='<h1 class="svelte-156md29">Infrastructure</h1> <p class="subtitle svelte-156md29">Inventory &amp; lifecycle actions</p>',s=b(),X(i.$$.fragment),o=b(),X(c.$$.fragment),r=b(),X(f.$$.fragment),p(t,"class","page-header svelte-156md29"),p(e,"class","infrastructure svelte-156md29")},m(m,g){w(m,e,g),a(e,t),a(t,n),a(t,s),Y(i,t,null),a(e,o),Y(c,e,null),w(m,r,g),Y(f,m,g),d=!0},p(m,g){const C={};g[1]&1&&(C.$$scope={dirty:g,ctx:m}),i.$set(C);const y={};g[0]&9|g[1]&1&&(y.$$scope={dirty:g,ctx:m}),c.$set(y);const $={};g[0]&6|g[1]&1&&($.$$scope={dirty:g,ctx:m}),!u&&g[0]&2&&(u=!0,$.open=m[1],kl(()=>u=!1)),f.$set($)},i(m){d||(P(i.$$.fragment,m),P(c.$$.fragment,m),P(f.$$.fragment,m),d=!0)},o(m){L(i.$$.fragment,m),L(c.$$.fragment,m),L(f.$$.fragment,m),d=!1},d(m){m&&(k(e),k(r)),K(i),K(c),K(f,m)}}}function hu(l,e,t){let n,s,i;Xe(l,Gt,R=>t(10,s=R)),Xe(l,Ul,R=>t(3,i=R));let o=!1,c=!1,r={name:"",project:"",env:"prod",region:"nyc1",size:"s-1vcpu-1gb",count:1};const f=[{value:"nyc1",label:"New York 1"},{value:"nyc3",label:"New York 3"},{value:"sfo3",label:"San Francisco 3"},{value:"ams3",label:"Amsterdam 3"},{value:"sgp1",label:"Singapore 1"},{value:"lon1",label:"London 1"},{value:"fra1",label:"Frankfurt 1"},{value:"tor1",label:"Toronto 1"},{value:"blr1",label:"Bangalore 1"}],u=[{value:"s-1vcpu-512mb-10gb",label:"$4/mo - 1 vCPU, 512MB RAM"},{value:"s-1vcpu-1gb",label:"$6/mo - 1 vCPU, 1GB RAM"},{value:"s-1vcpu-2gb",label:"$12/mo - 1 vCPU, 2GB RAM"},{value:"s-2vcpu-2gb",label:"$18/mo - 2 vCPU, 2GB RAM"},{value:"s-2vcpu-4gb",label:"$24/mo - 2 vCPU, 4GB RAM"},{value:"s-4vcpu-8gb",label:"$48/mo - 4 vCPU, 8GB RAM"}];async function d(){try{const R=await Oe("POST","/infra/servers/provision",{name:r.name,project:r.project,env:r.env,region:r.region,size:r.size,count:r.count});ge.success(`Provisioned ${R.created||1} server(s)`),t(1,c=!1),Gt.refresh()}catch(R){ge.error("Failed to provision: "+R.message)}}async function v(R){const{server:O}=R.detail,F=R.type;try{switch(F){case"start":ge.info("Power actions not yet implemented. Use DigitalOcean console.");break;case"stop":ge.info("Power actions not yet implemented. Use DigitalOcean console.");break;case"destroy":confirm(`Are you sure you want to destroy ${O.name}? This cannot be undone.`)&&(await Oe("DELETE",`/infra/servers/${O.id}`),ge.success(`Destroyed ${O.name}`));break;case"ssh":ge.info("Terminal feature coming soon");break;case"details":ge.info("Details modal coming soon");break}Gt.refresh()}catch(I){ge.error(`Failed to ${F}: ${I.message}`)}}function h(){Gt.refresh()}const m=()=>t(1,c=!0),g=()=>Gt.refresh(),C=()=>t(1,c=!1);function y(){r.name=this.value,t(2,r)}function $(){r.project=this.value,t(2,r)}function q(){r.env=ct(this),t(2,r)}function D(){r.region=ct(this),t(2,r)}function T(){r.count=jt(this.value),t(2,r)}function M(){r.size=ct(this),t(2,r)}function E(R){c=R,t(1,c)}const j=()=>t(1,c=!1);return l.$$.update=()=>{l.$$.dirty[0]&1024&&t(9,n=s||{loading:!1}),l.$$.dirty[0]&512&&t(0,o=n.loading)},[o,c,r,i,f,u,d,v,h,n,s,m,g,C,y,$,q,D,T,M,E,j]}class gu extends tt{constructor(e){super(),et(this,e,hu,mu,xe,{refresh:8},null,[-1,-1])}get refresh(){return this.$$.ctx[8]}}const bu="modulepreload",$u=function(l){return"/static/"+l},mo={},ho=function(e,t,n){let s=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(t.map(r=>{if(r=$u(r),r in mo)return;mo[r]=!0;const f=r.endsWith(".css"),u=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${u}`))return;const d=document.createElement("link");if(d.rel=f?"stylesheet":bu,f||(d.as="script"),d.crossOrigin="",d.href=r,c&&d.setAttribute("nonce",c),document.head.appendChild(d),f)return new Promise((v,h)=>{d.addEventListener("load",v),d.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${r}`)))})}))}function i(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return s.then(o=>{for(const c of o||[])c.status==="rejected"&&i(c.reason);return e().catch(i)})},{Boolean:is}=fa;function go(l,e,t){const n=l.slice();return n[151]=e[t],n}function bo(l,e,t){const n=l.slice();return n[151]=e[t],n}function $o(l,e,t){const n=l.slice();return n[151]=e[t],n}function ko(l,e,t){const n=l.slice();return n[151]=e[t],n}function wo(l,e,t){const n=l.slice();return n[72]=e[t],n}function yo(l,e,t){const n=l.slice();return n[162]=e[t],n}function Co(l,e,t){const n=l.slice();return n[165]=e[t],n}function So(l,e,t){const n=l.slice();return n[168]=e[t],n}function qo(l,e,t){var i,o,c;const n=l.slice();n[151]=e[t];const s=n[151].ip||((c=(o=(i=n[151].networks)==null?void 0:i.v4)==null?void 0:o[0])==null?void 0:c.ip_address);return n[171]=s,n}function Do(l,e,t){const n=l.slice();return n[174]=e[t],n[176]=t,n}function ku(l){const e=l.slice(),t=e[19].find(s=>s.isMain);e[177]=t;const n=e[19].filter(s=>!s.isMain).length;return e[178]=n,e}function To(l,e,t){const n=l.slice();return n[174]=e[t],n[176]=t,n}function Po(l,e,t){const n=l.slice();return n[180]=e[t],n}function Eo(l){let e,t=l[180]+"",n;return{c(){e=_("option"),n=S(t),e.__value=l[180],ee(e,e.__value)},m(s,i){w(s,e,i),a(e,n)},p:ie,d(s){s&&k(e)}}}function wu(l){let e;return{c(){e=S("📥 Load")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function yu(l){let e;return{c(){e=S("💾 Save")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function Cu(l){let e;return{c(){e=S("🚫 Exclusions")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function Mo(l){let e,t;return{c(){e=_("span"),t=S(l[47]),p(e,"class","config-status svelte-oth49g")},m(n,s){w(n,e,s),a(e,t)},p(n,s){s[1]&65536&&z(t,n[47])},d(n){n&&k(e)}}}function Lo(l){let e,t,n,s,i,o,c,r,f,u,d,v;return i=new Ne({props:{variant:"ghost",size:"sm",$$slots:{default:[Su]},$$scope:{ctx:l}}}),i.$on("click",l[56]),{c(){e=_("div"),t=_("div"),n=_("label"),n.textContent="Exclusion Patterns",s=b(),X(i.$$.fragment),o=b(),c=_("textarea"),r=b(),f=_("small"),f.textContent="One pattern per line. Applied to folder uploads and git clones.",p(n,"class","svelte-oth49g"),p(t,"class","exclude-header svelte-oth49g"),p(c,"rows","6"),p(c,"placeholder","node_modules/ __pycache__/ *.pyc .git/"),p(c,"class","svelte-oth49g"),p(f,"class","svelte-oth49g"),p(e,"class","exclude-editor svelte-oth49g")},m(h,m){w(h,e,m),a(e,t),a(t,n),a(t,s),Y(i,t,null),a(e,o),a(e,c),ee(c,l[49]),a(e,r),a(e,f),u=!0,d||(v=le(c,"input",l[77]),d=!0)},p(h,m){const g={};m[5]&268435456&&(g.$$scope={dirty:m,ctx:h}),i.$set(g),m[1]&262144&&ee(c,h[49])},i(h){u||(P(i.$$.fragment,h),u=!0)},o(h){L(i.$$.fragment,h),u=!1},d(h){h&&k(e),K(i),d=!1,v()}}}function Su(l){let e;return{c(){e=S("Reset to Defaults")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function No(l){let e,t,n,s,i,o,c,r,f,u,d,v,h,m,g,C,y,$,q,D,T,M,E,j,R,O=l[22]&&jo(),F=l[19].length>0&&Ro(l);d=new Ne({props:{size:"sm",$$slots:{default:[Du]},$$scope:{ctx:l}}}),d.$on("click",l[59]);function I(N,G){return G[0]&524288&&(C=null),N[19].length===0?Pu:(C==null&&(C=!N[19].some(of)),C?Tu:Fo)}function W(N,G){return G===Fo?ku(N):N}let V=I(l,[-1,-1,-1,-1,-1,-1]),H=V(W(l,V)),B=l[25]&&Bo(l);return{c(){e=_("div"),t=_("div"),n=_("label"),n.textContent="Build Folders",s=b(),i=_("div"),O&&O.c(),o=b(),c=_("input"),r=b(),F&&F.c(),f=b(),u=_("div"),X(d.$$.fragment),v=b(),h=_("span"),h.textContent="or drag & drop folders here",m=b(),g=_("div"),H.c(),y=b(),$=_("label"),q=_("input"),D=b(),T=_("span"),T.textContent="Remember folder configuration for this service",M=b(),B&&B.c(),p(n,"class","svelte-oth49g"),p(c,"type","file"),p(c,"webkitdirectory",""),p(c,"directory",""),c.multiple=!0,Ue(c,"display","none"),p(c,"class","svelte-oth49g"),p(h,"class","drop-hint svelte-oth49g"),p(u,"class","folder-actions svelte-oth49g"),p(i,"class","folder-drop-zone svelte-oth49g"),Te(i,"dragover",l[22]),p(g,"class","code-selection-info svelte-oth49g"),Te(g,"success",l[19].some(hi)),Te(g,"warning",l[19].length>0&&!l[19].some(gi)),p(q,"type","checkbox"),p(q,"class","svelte-oth49g"),p($,"class","checkbox-label small-check svelte-oth49g"),p(t,"class","form-group svelte-oth49g"),p(e,"class","source-config svelte-oth49g")},m(N,G){w(N,e,G),a(e,t),a(t,n),a(t,s),a(t,i),O&&O.m(i,null),a(i,o),a(i,c),l[84](c),a(i,r),F&&F.m(i,null),a(i,f),a(i,u),Y(d,u,null),a(u,v),a(u,h),a(t,m),a(t,g),H.m(g,null),a(t,y),a(t,$),a($,q),q.checked=l[21],a($,D),a($,T),a(e,M),B&&B.m(e,null),E=!0,j||(R=[le(c,"change",l[60]),le(i,"dragenter",l[61]),le(i,"dragleave",l[62]),le(i,"dragover",sf),le(i,"drop",l[63]),le(q,"change",l[87])],j=!0)},p(N,G){N[22]?O||(O=jo(),O.c(),O.m(i,o)):O&&(O.d(1),O=null),N[19].length>0?F?(F.p(N,G),G[0]&524288&&P(F,1)):(F=Ro(N),F.c(),P(F,1),F.m(i,f)):F&&(ke(),L(F,1,1,()=>{F=null}),we());const A={};G[5]&268435456&&(A.$$scope={dirty:G,ctx:N}),d.$set(A),(!E||G[0]&4194304)&&Te(i,"dragover",N[22]),V===(V=I(N,G))&&H?H.p(W(N,V),G):(H.d(1),H=V(W(N,V)),H&&(H.c(),H.m(g,null))),(!E||G[0]&524288)&&Te(g,"success",N[19].some(hi)),(!E||G[0]&524288)&&Te(g,"warning",N[19].length>0&&!N[19].some(gi)),G[0]&2097152&&(q.checked=N[21]),N[25]?B?(B.p(N,G),G[0]&33554432&&P(B,1)):(B=Bo(N),B.c(),P(B,1),B.m(e,null)):B&&(ke(),L(B,1,1,()=>{B=null}),we())},i(N){E||(P(F),P(d.$$.fragment,N),P(B),E=!0)},o(N){L(F),L(d.$$.fragment,N),L(B),E=!1},d(N){N&&k(e),O&&O.d(),l[84](null),F&&F.d(),K(d),H.d(),B&&B.d(),j=!1,We(R)}}}function jo(l){let e;return{c(){e=_("div"),e.innerHTML='<span class="drop-icon svelte-oth49g">📂</span> <span>Drop folder here</span>',p(e,"class","drop-overlay svelte-oth49g")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function Ro(l){let e,t,n=ve(l[19]),s=[];for(let o=0;o<n.length;o+=1)s[o]=Oo(To(l,n,o));const i=o=>L(s[o],1,1,()=>{s[o]=null});return{c(){e=_("div");for(let o=0;o<s.length;o+=1)s[o].c();p(e,"class","folder-list svelte-oth49g")},m(o,c){w(o,e,c);for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(e,null);t=!0},p(o,c){if(c[0]&524288|c[2]&12){n=ve(o[19]);let r;for(r=0;r<n.length;r+=1){const f=To(o,n,r);s[r]?(s[r].p(f,c),P(s[r],1)):(s[r]=Oo(f),s[r].c(),P(s[r],1),s[r].m(e,null))}for(ke(),r=n.length;r<s.length;r+=1)i(r);we()}},i(o){if(!t){for(let c=0;c<n.length;c+=1)P(s[c]);t=!0}},o(o){s=s.filter(is);for(let c=0;c<s.length;c+=1)L(s[c]);t=!1},d(o){o&&k(e),Re(s,o)}}}function qu(l){let e=l[174].isMain?"MAIN":"dependency",t;return{c(){t=S(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&524288&&e!==(e=n[174].isMain?"MAIN":"dependency")&&z(t,e)},d(n){n&&k(t)}}}function Ao(l){let e,t,n;function s(){return l[85](l[176])}return{c(){e=_("button"),e.textContent="⭐",p(e,"type","button"),p(e,"class","set-main-btn svelte-oth49g"),p(e,"title","Set as main")},m(i,o){w(i,e,o),t||(n=le(e,"click",s),t=!0)},p(i,o){l=i},d(i){i&&k(e),t=!1,n()}}}function Oo(l){let e,t,n=l[174].isMain?"📁":"📂",s,i,o,c=l[174].name+"",r,f,u,d,v,h,m=l[174].fileCount+"",g,C,y,$,q,D,T,M,E;d=new Be({props:{variant:l[174].isMain?"success":"secondary",$$slots:{default:[qu]},$$scope:{ctx:l}}});let j=!l[174].isMain&&Ao(l);function R(){return l[86](l[176])}return{c(){e=_("div"),t=_("span"),s=S(n),i=b(),o=_("strong"),r=S(c),f=S("/"),u=b(),X(d.$$.fragment),v=b(),h=_("span"),g=S(m),C=S(" files"),y=b(),j&&j.c(),$=b(),q=_("button"),q.textContent="✕",D=b(),p(t,"class","folder-icon svelte-oth49g"),p(o,"class","svelte-oth49g"),p(h,"class","file-count svelte-oth49g"),p(q,"type","button"),p(q,"class","remove-btn svelte-oth49g"),p(e,"class","folder-item svelte-oth49g")},m(O,F){w(O,e,F),a(e,t),a(t,s),a(e,i),a(e,o),a(o,r),a(o,f),a(e,u),Y(d,e,null),a(e,v),a(e,h),a(h,g),a(h,C),a(e,y),j&&j.m(e,null),a(e,$),a(e,q),a(e,D),T=!0,M||(E=le(q,"click",R),M=!0)},p(O,F){l=O,(!T||F[0]&524288)&&n!==(n=l[174].isMain?"📁":"📂")&&z(s,n),(!T||F[0]&524288)&&c!==(c=l[174].name+"")&&z(r,c);const I={};F[0]&524288&&(I.variant=l[174].isMain?"success":"secondary"),F[0]&524288|F[5]&268435456&&(I.$$scope={dirty:F,ctx:l}),d.$set(I),(!T||F[0]&524288)&&m!==(m=l[174].fileCount+"")&&z(g,m),l[174].isMain?j&&(j.d(1),j=null):j?j.p(l,F):(j=Ao(l),j.c(),j.m(e,$))},i(O){T||(P(d.$$.fragment,O),T=!0)},o(O){L(d.$$.fragment,O),T=!1},d(O){O&&k(e),K(d),j&&j.d(),M=!1,E()}}}function Du(l){let e;return{c(){e=S("➕ Add Folder")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function Fo(l){let e,t,n=l[177].name+"",s,i,o,c,r=l[178]>0&&zo(l);return{c(){e=S("✓ Main: "),t=_("strong"),s=S(n),i=S("/"),o=b(),r&&r.c(),c=Ae()},m(f,u){w(f,e,u),w(f,t,u),a(t,s),a(t,i),w(f,o,u),r&&r.m(f,u),w(f,c,u)},p(f,u){u[0]&524288&&n!==(n=f[177].name+"")&&z(s,n),f[178]>0?r?r.p(f,u):(r=zo(f),r.c(),r.m(c.parentNode,c)):r&&(r.d(1),r=null)},d(f){f&&(k(e),k(t),k(o),k(c)),r&&r.d(f)}}}function Tu(l){let e;return{c(){e=S("⚠️ No main folder selected. Click ⭐ to set one as main.")},m(t,n){w(t,e,n)},p:ie,d(t){t&&k(e)}}}function Pu(l){let e;return{c(){e=S("No folders selected. Add your main service folder and any dependencies.")},m(t,n){w(t,e,n)},p:ie,d(t){t&&k(e)}}}function zo(l){let e,t=l[178]+"",n,s,i=l[178]===1?"y":"ies",o;return{c(){e=S("+ "),n=S(t),s=S(" dependenc"),o=S(i)},m(c,r){w(c,e,r),w(c,n,r),w(c,s,r),w(c,o,r)},p(c,r){r[0]&524288&&t!==(t=c[178]+"")&&z(n,t),r[0]&524288&&i!==(i=c[178]===1?"y":"ies")&&z(o,i)},d(c){c&&(k(e),k(n),k(s),k(o))}}}function Bo(l){let e,t,n,s,i,o,c,r,f,u,d,v,h,m,g,C,y,$,q,D,T,M;return i=new Be({props:{variant:l[24]==="from folder"?"success":l[24]==="multi-folder"?"info":"warning",$$slots:{default:[Eu]},$$scope:{ctx:l}}}),{c(){e=_("div"),t=_("div"),n=_("label"),s=S(`🐳 Dockerfile
                    `),X(i.$$.fragment),o=b(),c=_("textarea"),r=b(),f=_("div"),u=_("select"),d=_("option"),d.textContent="FROM...",v=_("option"),v.textContent="python:3.11-slim",h=_("option"),h.textContent="python:3.12-slim",m=_("option"),m.textContent="node:20-alpine",g=_("option"),g.textContent="node:18-alpine",C=_("option"),C.textContent="golang:1.21-alpine",y=_("option"),y.textContent="nginx:alpine",$=b(),q=_("input"),p(n,"class","svelte-oth49g"),p(t,"class","dockerfile-header svelte-oth49g"),p(c,"rows","8"),p(c,"class","dockerfile-editor svelte-oth49g"),p(c,"spellcheck","false"),d.__value="",ee(d,d.__value),v.__value="python:3.11-slim",ee(v,v.__value),h.__value="python:3.12-slim",ee(h,h.__value),m.__value="node:20-alpine",ee(m,m.__value),g.__value="node:18-alpine",ee(g,g.__value),C.__value="golang:1.21-alpine",ee(C,C.__value),y.__value="nginx:alpine",ee(y,y.__value),p(u,"class","svelte-oth49g"),l[26]===void 0&&Qe(()=>l[89].call(u)),p(q,"type","text"),p(q,"placeholder","CMD (e.g. uvicorn main:app ...)"),p(q,"class","svelte-oth49g"),p(f,"class","dockerfile-quick-fields svelte-oth49g"),p(e,"class","dockerfile-preview svelte-oth49g")},m(E,j){w(E,e,j),a(e,t),a(t,n),a(n,s),Y(i,n,null),a(e,o),a(e,c),ee(c,l[23]),a(e,r),a(e,f),a(f,u),a(u,d),a(u,v),a(u,h),a(u,m),a(u,g),a(u,C),a(u,y),je(u,l[26],!0),a(f,$),a(f,q),ee(q,l[27]),D=!0,T||(M=[le(c,"input",l[88]),le(u,"change",l[89]),le(u,"change",l[90]),le(q,"input",l[91]),le(q,"change",l[92])],T=!0)},p(E,j){const R={};j[0]&16777216&&(R.variant=E[24]==="from folder"?"success":E[24]==="multi-folder"?"info":"warning"),j[0]&16777216|j[5]&268435456&&(R.$$scope={dirty:j,ctx:E}),i.$set(R),j[0]&8388608&&ee(c,E[23]),j[0]&67108864&&je(u,E[26]),j[0]&134217728&&q.value!==E[27]&&ee(q,E[27])},i(E){D||(P(i.$$.fragment,E),D=!0)},o(E){L(i.$$.fragment,E),D=!1},d(E){E&&k(e),K(i),T=!1,We(M)}}}function Eu(l){let e;return{c(){e=S(l[24])},m(t,n){w(t,e,n)},p(t,n){n[0]&16777216&&z(e,t[24])},d(t){t&&k(e)}}}function Io(l){let e,t,n,s,i,o,c,r,f,u,d,v,h,m,g,C,y,$,q,D,T,M,E,j,R,O,F,I,W,V,H,B,N,G,A,U,x,Q,ne=l[12].length>0&&Uo(l);return T=new Ne({props:{size:"sm",$$slots:{default:[Lu]},$$scope:{ctx:l}}}),T.$on("click",l[97]),E=new Ne({props:{variant:"ghost",size:"sm",$$slots:{default:[Nu]},$$scope:{ctx:l}}}),E.$on("click",l[98]),{c(){e=_("div"),t=_("div"),n=_("label"),n.textContent="Git Repository URL *",s=b(),i=_("input"),o=b(),c=_("small"),c.textContent="HTTPS URL (SSH not supported)",r=b(),f=_("div"),u=_("label"),u.textContent="Branch",d=b(),v=_("input"),h=b(),m=_("div"),g=_("label"),g.textContent="Folders to Include",C=b(),ne&&ne.c(),y=b(),$=_("div"),q=_("input"),D=b(),X(T.$$.fragment),M=b(),X(E.$$.fragment),j=b(),R=_("small"),R.textContent="Leave empty to use entire repo. Add paths for multi-folder builds (main folder contains Dockerfile).",O=b(),F=_("details"),I=_("summary"),I.textContent="🔐 Private repository?",W=b(),V=_("div"),H=_("label"),H.textContent="Personal Access Token",B=b(),N=_("input"),G=b(),A=_("small"),A.innerHTML="Needs <code>repo</code> scope for private repos",p(n,"for","git-url"),p(n,"class","svelte-oth49g"),p(i,"id","git-url"),p(i,"type","url"),p(i,"placeholder","https://github.com/user/repo"),p(i,"class","svelte-oth49g"),p(c,"class","svelte-oth49g"),p(t,"class","form-group svelte-oth49g"),p(u,"for","git-branch"),p(u,"class","svelte-oth49g"),p(v,"id","git-branch"),p(v,"type","text"),p(v,"placeholder","main"),p(v,"class","svelte-oth49g"),p(f,"class","form-group svelte-oth49g"),p(g,"class","svelte-oth49g"),p(q,"type","text"),p(q,"placeholder","e.g. services/my_api"),p(q,"class","svelte-oth49g"),p($,"class","folder-input svelte-oth49g"),p(R,"class","svelte-oth49g"),p(m,"class","form-group svelte-oth49g"),p(I,"class","svelte-oth49g"),p(H,"for","git-token"),p(H,"class","svelte-oth49g"),p(N,"id","git-token"),p(N,"type","password"),p(N,"placeholder","ghp_xxxxxxxxxxxx"),p(N,"class","svelte-oth49g"),p(A,"class","svelte-oth49g"),p(V,"class","form-group svelte-oth49g"),p(F,"class","private-repo svelte-oth49g"),p(e,"class","source-config svelte-oth49g")},m(te,oe){w(te,e,oe),a(e,t),a(t,n),a(t,s),a(t,i),ee(i,l[9]),a(t,o),a(t,c),a(e,r),a(e,f),a(f,u),a(f,d),a(f,v),ee(v,l[10]),a(e,h),a(e,m),a(m,g),a(m,C),ne&&ne.m(m,null),a(m,y),a(m,$),a($,q),ee(q,l[13]),a($,D),Y(T,$,null),a($,M),Y(E,$,null),a(m,j),a(m,R),a(e,O),a(e,F),a(F,I),a(F,W),a(F,V),a(V,H),a(V,B),a(V,N),ee(N,l[11]),a(V,G),a(V,A),U=!0,x||(Q=[le(i,"input",l[93]),le(v,"input",l[94]),le(q,"input",l[96]),le(N,"input",l[99])],x=!0)},p(te,oe){oe[0]&512&&i.value!==te[9]&&ee(i,te[9]),oe[0]&1024&&v.value!==te[10]&&ee(v,te[10]),te[12].length>0?ne?(ne.p(te,oe),oe[0]&4096&&P(ne,1)):(ne=Uo(te),ne.c(),P(ne,1),ne.m(m,y)):ne&&(ke(),L(ne,1,1,()=>{ne=null}),we()),oe[0]&8192&&q.value!==te[13]&&ee(q,te[13]);const pe={};oe[5]&268435456&&(pe.$$scope={dirty:oe,ctx:te}),T.$set(pe);const ae={};oe[5]&268435456&&(ae.$$scope={dirty:oe,ctx:te}),E.$set(ae),oe[0]&2048&&N.value!==te[11]&&ee(N,te[11])},i(te){U||(P(ne),P(T.$$.fragment,te),P(E.$$.fragment,te),U=!0)},o(te){L(ne),L(T.$$.fragment,te),L(E.$$.fragment,te),U=!1},d(te){te&&k(e),ne&&ne.d(),K(T),K(E),x=!1,We(Q)}}}function Uo(l){let e,t,n=ve(l[12]),s=[];for(let o=0;o<n.length;o+=1)s[o]=Ho(Do(l,n,o));const i=o=>L(s[o],1,1,()=>{s[o]=null});return{c(){e=_("div");for(let o=0;o<s.length;o+=1)s[o].c();p(e,"class","folder-list svelte-oth49g")},m(o,c){w(o,e,c);for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(e,null);t=!0},p(o,c){if(c[0]&4096|c[2]&64){n=ve(o[12]);let r;for(r=0;r<n.length;r+=1){const f=Do(o,n,r);s[r]?(s[r].p(f,c),P(s[r],1)):(s[r]=Ho(f),s[r].c(),P(s[r],1),s[r].m(e,null))}for(ke(),r=n.length;r<s.length;r+=1)i(r);we()}},i(o){if(!t){for(let c=0;c<n.length;c+=1)P(s[c]);t=!0}},o(o){s=s.filter(is);for(let c=0;c<s.length;c+=1)L(s[c]);t=!1},d(o){o&&k(e),Re(s,o)}}}function Mu(l){let e=l[174].isMain?"MAIN":"dependency",t;return{c(){t=S(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&4096&&e!==(e=n[174].isMain?"MAIN":"dependency")&&z(t,e)},d(n){n&&k(t)}}}function Ho(l){let e,t,n=l[174].isMain?"📁":"📂",s,i,o,c=l[174].path+"",r,f,u,d,v,h,m,g,C;u=new Be({props:{variant:l[174].isMain?"success":"secondary",$$slots:{default:[Mu]},$$scope:{ctx:l}}});function y(){return l[95](l[176])}return{c(){e=_("div"),t=_("span"),s=S(n),i=b(),o=_("strong"),r=S(c),f=b(),X(u.$$.fragment),d=b(),v=_("button"),v.textContent="✕",h=b(),p(o,"class","svelte-oth49g"),p(v,"type","button"),p(v,"class","remove-btn svelte-oth49g"),p(e,"class","folder-item svelte-oth49g")},m($,q){w($,e,q),a(e,t),a(t,s),a(e,i),a(e,o),a(o,r),a(e,f),Y(u,e,null),a(e,d),a(e,v),a(e,h),m=!0,g||(C=le(v,"click",y),g=!0)},p($,q){l=$,(!m||q[0]&4096)&&n!==(n=l[174].isMain?"📁":"📂")&&z(s,n),(!m||q[0]&4096)&&c!==(c=l[174].path+"")&&z(r,c);const D={};q[0]&4096&&(D.variant=l[174].isMain?"success":"secondary"),q[0]&4096|q[5]&268435456&&(D.$$scope={dirty:q,ctx:l}),u.$set(D)},i($){m||(P(u.$$.fragment,$),m=!0)},o($){L(u.$$.fragment,$),m=!1},d($){$&&k(e),K(u),g=!1,C()}}}function Lu(l){let e;return{c(){e=S("+ Main")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function Nu(l){let e;return{c(){e=S("+ Dep")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function Go(l){let e,t,n,s,i,o,c,r,f;return{c(){e=_("div"),t=_("div"),n=_("label"),n.textContent="Docker Image *",s=b(),i=_("input"),o=b(),c=_("small"),c.textContent="Full image URL from DO Registry or Docker Hub",p(n,"for","image-url"),p(n,"class","svelte-oth49g"),p(i,"id","image-url"),p(i,"type","text"),p(i,"placeholder","registry.digitalocean.com/my-registry/app:latest"),p(i,"class","svelte-oth49g"),p(c,"class","svelte-oth49g"),p(t,"class","form-group svelte-oth49g"),p(e,"class","source-config svelte-oth49g")},m(u,d){w(u,e,d),a(e,t),a(t,n),a(t,s),a(t,i),ee(i,l[14]),a(t,o),a(t,c),r||(f=le(i,"input",l[100]),r=!0)},p(u,d){d[0]&16384&&i.value!==u[14]&&ee(i,u[14])},d(u){u&&k(e),r=!1,f()}}}function Wo(l){let e,t,n,s,i,o,c,r,f,u,d,v,h,m,g,C,y,$,q,D,T,M,E,j,R,O,F,I,W=l[15]&&Jo(l);return{c(){e=_("div"),t=_("div"),n=_("label"),n.textContent="Docker Image File (.tar) *",s=b(),i=_("input"),o=b(),W&&W.c(),c=b(),r=_("small"),r.innerHTML="Export from Docker with: <code>docker save myimage:latest -o image.tar</code>",f=b(),u=_("div"),d=_("label"),d.textContent="Image Name *",v=b(),h=_("input"),m=b(),g=_("small"),g.textContent="The image name/tag as it appears in the tar file",C=b(),y=_("div"),$=_("div"),q=_("label"),q.textContent="Container Port",D=b(),T=_("input"),M=b(),E=_("div"),j=_("label"),j.textContent="Host Port",R=b(),O=_("input"),p(n,"for","image-file"),p(n,"class","svelte-oth49g"),p(i,"id","image-file"),p(i,"type","file"),p(i,"accept",".tar,.tar.gz"),p(i,"class","svelte-oth49g"),p(r,"class","svelte-oth49g"),p(t,"class","form-group svelte-oth49g"),p(d,"for","image-name"),p(d,"class","svelte-oth49g"),p(h,"id","image-name"),p(h,"type","text"),p(h,"placeholder","myapp:latest"),p(h,"class","svelte-oth49g"),p(g,"class","svelte-oth49g"),p(u,"class","form-group svelte-oth49g"),p(q,"for","container-port"),p(q,"class","svelte-oth49g"),p(T,"id","container-port"),p(T,"type","number"),p(T,"placeholder",l[7]),p(T,"class","svelte-oth49g"),p($,"class","form-group svelte-oth49g"),p(j,"for","host-port"),p(j,"class","svelte-oth49g"),p(O,"id","host-port"),p(O,"type","number"),p(O,"placeholder",l[7]),p(O,"class","svelte-oth49g"),p(E,"class","form-group svelte-oth49g"),p(y,"class","form-row svelte-oth49g"),p(e,"class","source-config svelte-oth49g")},m(V,H){w(V,e,H),a(e,t),a(t,n),a(t,s),a(t,i),a(t,o),W&&W.m(t,null),a(t,c),a(t,r),a(e,f),a(e,u),a(u,d),a(u,v),a(u,h),ee(h,l[16]),a(u,m),a(u,g),a(e,C),a(e,y),a(y,$),a($,q),a($,D),a($,T),ee(T,l[17]),a(y,M),a(y,E),a(E,j),a(E,R),a(E,O),ee(O,l[18]),F||(I=[le(i,"change",l[69]),le(h,"input",l[101]),le(T,"input",l[102]),le(O,"input",l[103])],F=!0)},p(V,H){V[15]?W?W.p(V,H):(W=Jo(V),W.c(),W.m(t,c)):W&&(W.d(1),W=null),H[0]&65536&&h.value!==V[16]&&ee(h,V[16]),H[0]&128&&p(T,"placeholder",V[7]),H[0]&131072&&jt(T.value)!==V[17]&&ee(T,V[17]),H[0]&128&&p(O,"placeholder",V[7]),H[0]&262144&&jt(O.value)!==V[18]&&ee(O,V[18])},d(V){V&&k(e),W&&W.d(),F=!1,We(I)}}}function Jo(l){let e,t,n=l[15].name+"",s,i,o=(l[15].size/1024/1024).toFixed(2)+"",c,r;return{c(){e=_("div"),t=S("📦 "),s=S(n),i=S(" ("),c=S(o),r=S(" MB)"),p(e,"class","file-selected svelte-oth49g")},m(f,u){w(f,e,u),a(e,t),a(e,s),a(e,i),a(e,c),a(e,r)},p(f,u){u[0]&32768&&n!==(n=f[15].name+"")&&z(s,n),u[0]&32768&&o!==(o=(f[15].size/1024/1024).toFixed(2)+"")&&z(c,o)},d(f){f&&k(e)}}}function Vo(l){let e,t,n,s,i,o,c,r,f,u,d,v,h,m,g,C,y,$,q,D,T;return{c(){e=_("div"),t=_("label"),t.textContent="Dependencies:",n=b(),s=_("div"),i=_("label"),o=_("input"),c=S(`
                  🐘 PostgreSQL`),r=b(),f=_("label"),u=_("input"),d=S(`
                  ⚡ Redis`),v=b(),h=_("label"),m=_("input"),g=S(`
                  🐬 MySQL`),C=b(),y=_("label"),$=_("input"),q=S(`
                  🍃 MongoDB`),p(o,"type","checkbox"),p(o,"class","svelte-oth49g"),p(i,"class","dep-item svelte-oth49g"),p(u,"type","checkbox"),p(u,"class","svelte-oth49g"),p(f,"class","dep-item svelte-oth49g"),p(m,"type","checkbox"),p(m,"class","svelte-oth49g"),p(h,"class","dep-item svelte-oth49g"),p($,"type","checkbox"),p($,"class","svelte-oth49g"),p(y,"class","dep-item svelte-oth49g"),p(s,"class","dep-list svelte-oth49g"),p(e,"class","dependencies svelte-oth49g")},m(M,E){w(M,e,E),a(e,t),a(e,n),a(e,s),a(s,i),a(i,o),o.checked=l[44].postgres,a(i,c),a(s,r),a(s,f),a(f,u),u.checked=l[44].redis,a(f,d),a(s,v),a(s,h),a(h,m),m.checked=l[44].mysql,a(h,g),a(s,C),a(s,y),a(y,$),$.checked=l[44].mongo,a(y,q),D||(T=[le(o,"change",l[107]),le(u,"change",l[108]),le(m,"change",l[109]),le($,"change",l[110])],D=!0)},p(M,E){E[1]&8192&&(o.checked=M[44].postgres),E[1]&8192&&(u.checked=M[44].redis),E[1]&8192&&(m.checked=M[44].mysql),E[1]&8192&&($.checked=M[44].mongo)},d(M){M&&k(e),D=!1,We(T)}}}function Yo(l){let e,t,n,s,i,o=(l[50]||"app-project-env.domain.com")+"",c,r,f,u,d,v,h,m,g,C,y,$,q,D,T;return{c(){e=_("div"),t=_("div"),n=_("label"),n.textContent="Domain Preview:",s=b(),i=_("code"),c=S(o),r=b(),f=_("div"),u=_("label"),u.textContent="Base Domain",d=b(),v=_("input"),h=b(),m=_("div"),g=_("label"),g.innerHTML='Custom Aliases <small class="svelte-oth49g">(optional)</small>',C=b(),y=_("input"),$=b(),q=_("small"),q.textContent="Comma-separated custom domains (requires DNS setup)",p(n,"class","svelte-oth49g"),p(i,"class","svelte-oth49g"),p(t,"class","domain-preview svelte-oth49g"),p(u,"for","base-domain"),p(u,"class","svelte-oth49g"),p(v,"id","base-domain"),p(v,"type","text"),p(v,"placeholder","example.com"),p(v,"class","svelte-oth49g"),p(f,"class","form-group svelte-oth49g"),p(g,"for","domain-aliases"),p(g,"class","svelte-oth49g"),p(y,"id","domain-aliases"),p(y,"type","text"),p(y,"placeholder","api.myclient.com, app.example.com"),p(y,"class","svelte-oth49g"),p(q,"class","svelte-oth49g"),p(m,"class","form-group svelte-oth49g"),p(e,"class","domain-config svelte-oth49g")},m(M,E){w(M,e,E),a(e,t),a(t,n),a(t,s),a(t,i),a(i,c),a(e,r),a(e,f),a(f,u),a(f,d),a(f,v),ee(v,l[4]),a(e,h),a(e,m),a(m,g),a(m,C),a(m,y),ee(y,l[46]),a(m,$),a(m,q),D||(T=[le(v,"input",l[113]),le(y,"input",l[114])],D=!0)},p(M,E){E[1]&524288&&o!==(o=(M[50]||"app-project-env.domain.com")+"")&&z(c,o),E[0]&16&&v.value!==M[4]&&ee(v,M[4]),E[1]&32768&&y.value!==M[46]&&ee(y,M[46])},d(M){M&&k(e),D=!1,We(T)}}}function ju(l){let e=l[36].size+"",t,n;return{c(){t=S(e),n=S(" selected")},m(s,i){w(s,t,i),w(s,n,i)},p(s,i){i[1]&32&&e!==(e=s[36].size+"")&&z(t,e)},d(s){s&&(k(t),k(n))}}}function Ru(l){let e;return{c(){e=S("✓ All")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function Au(l){let e;return{c(){e=S("✕ None")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function Ou(l){let e,t,n=ve(l[32]),s=[];for(let o=0;o<n.length;o+=1)s[o]=Zo(qo(l,n,o));const i=o=>L(s[o],1,1,()=>{s[o]=null});return{c(){for(let o=0;o<s.length;o+=1)s[o].c();e=Ae()},m(o,c){for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(o,c);w(o,e,c),t=!0},p(o,c){if(c[1]&67108898){n=ve(o[32]);let r;for(r=0;r<n.length;r+=1){const f=qo(o,n,r);s[r]?(s[r].p(f,c),P(s[r],1)):(s[r]=Zo(f),s[r].c(),P(s[r],1),s[r].m(e.parentNode,e))}for(ke(),r=n.length;r<s.length;r+=1)i(r);we()}},i(o){if(!t){for(let c=0;c<n.length;c+=1)P(s[c]);t=!0}},o(o){s=s.filter(is);for(let c=0;c<s.length;c+=1)L(s[c]);t=!1},d(o){o&&k(e),Re(s,o)}}}function Fu(l){let e,t,n=(l[3]||"any region")+"",s;return{c(){e=_("div"),t=S("No servers in "),s=S(n),p(e,"class","empty svelte-oth49g")},m(i,o){w(i,e,o),a(e,t),a(e,s)},p(i,o){o[0]&8&&n!==(n=(i[3]||"any region")+"")&&z(s,n)},i:ie,o:ie,d(i){i&&k(e)}}}function Ko(l){let e,t,n,s,i,o=(l[151].name||"unnamed")+"",c,r,f,u=l[171]+"",d,v,h,m,g,C;function y(){return l[117](l[171])}let $=l[151].project&&Qo(l);return{c(){e=_("label"),t=_("input"),s=b(),i=_("span"),c=S(o),r=b(),f=_("code"),d=S(u),v=b(),$&&$.c(),h=b(),p(t,"type","checkbox"),t.checked=n=l[36].has(l[171]),p(t,"class","svelte-oth49g"),p(i,"class","server-name svelte-oth49g"),p(f,"class","server-ip svelte-oth49g"),p(e,"class","server-item svelte-oth49g"),Te(e,"selected",l[36].has(l[171]))},m(q,D){w(q,e,D),a(e,t),a(e,s),a(e,i),a(i,c),a(e,r),a(e,f),a(f,d),a(e,v),$&&$.m(e,null),a(e,h),m=!0,g||(C=le(t,"change",y),g=!0)},p(q,D){l=q,(!m||D[1]&34&&n!==(n=l[36].has(l[171])))&&(t.checked=n),(!m||D[1]&2)&&o!==(o=(l[151].name||"unnamed")+"")&&z(c,o),(!m||D[1]&2)&&u!==(u=l[171]+"")&&z(d,u),l[151].project?$?($.p(l,D),D[1]&2&&P($,1)):($=Qo(l),$.c(),P($,1),$.m(e,h)):$&&(ke(),L($,1,1,()=>{$=null}),we()),(!m||D[1]&34)&&Te(e,"selected",l[36].has(l[171]))},i(q){m||(P($),m=!0)},o(q){L($),m=!1},d(q){q&&k(e),$&&$.d(),g=!1,C()}}}function Qo(l){let e,t;return e=new Be({props:{variant:"info",$$slots:{default:[zu]},$$scope:{ctx:l}}}),{c(){X(e.$$.fragment)},m(n,s){Y(e,n,s),t=!0},p(n,s){const i={};s[1]&2|s[5]&268435456&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){K(e,n)}}}function zu(l){let e=l[151].project+"",t;return{c(){t=S(e)},m(n,s){w(n,t,s)},p(n,s){s[1]&2&&e!==(e=n[151].project+"")&&z(t,e)},d(n){n&&k(t)}}}function Zo(l){let e,t,n=l[171]&&Ko(l);return{c(){n&&n.c(),e=Ae()},m(s,i){n&&n.m(s,i),w(s,e,i),t=!0},p(s,i){s[171]?n?(n.p(s,i),i[1]&2&&P(n,1)):(n=Ko(s),n.c(),P(n,1),n.m(e.parentNode,e)):n&&(ke(),L(n,1,1,()=>{n=null}),we())},i(s){t||(P(n),t=!0)},o(s){L(n),t=!1},d(s){s&&k(e),n&&n.d(s)}}}function Xo(l){let e;return{c(){e=S("*")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function xo(l){let e,t=l[168].name+"",n,s;return{c(){e=_("option"),n=S(t),e.__value=s=l[168].id,ee(e,e.__value)},m(i,o){w(i,e,o),a(e,n)},p(i,o){o[1]&1048576&&t!==(t=i[168].name+"")&&z(n,t),o[1]&1048576&&s!==(s=i[168].id)&&(e.__value=s,ee(e,e.__value))},d(i){i&&k(e)}}}function ei(l){let e,t=(l[165].name||l[165].slug)+"",n,s;return{c(){e=_("option"),n=S(t),e.__value=s=l[165].slug,ee(e,e.__value)},m(i,o){w(i,e,o),a(e,n)},p(i,o){o[0]&1073741824&&t!==(t=(i[165].name||i[165].slug)+"")&&z(n,t),o[0]&1073741824&&s!==(s=i[165].slug)&&(e.__value=s,ee(e,e.__value))},d(i){i&&k(e)}}}function ti(l){let e,t=(l[162].description||l[162].slug)+"",n,s;return{c(){e=_("option"),n=S(t),e.__value=s=l[162].slug,ee(e,e.__value)},m(i,o){w(i,e,o),a(e,n)},p(i,o){o[1]&1&&t!==(t=(i[162].description||i[162].slug)+"")&&z(n,t),o[1]&1&&s!==(s=i[162].slug)&&(e.__value=s,ee(e,e.__value))},d(i){i&&k(e)}}}function li(l){let e;return{c(){e=_("small"),e.textContent="⚠️ Select a snapshot for new servers",p(e,"class","warning svelte-oth49g")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function Bu(l){let e;return{c(){e=S("🚀 Deploy")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function Iu(l){let e;return{c(){e=S("Deploying...")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function Uu(l){let e;function t(i,o){return i[33]?Iu:Bu}let n=t(l),s=n(l);return{c(){s.c(),e=Ae()},m(i,o){s.m(i,o),w(i,e,o)},p(i,o){n!==(n=t(i))&&(s.d(1),s=n(i),s&&(s.c(),s.m(e.parentNode,e)))},d(i){i&&k(e),s.d(i)}}}function Hu(l){let e,t,n,s,i,o,c,r,f,u,d,v,h,m,g,C,y,$,q,D,T,M,E,j,R,O,F,I,W,V,H,B,N,G,A,U,x,Q,ne,te,oe,pe,ae,Ee,me,re,_e,Ce,ce,ue,be,he,He,De,lt,ot,Pe,de,Fe,Ke,Je,it,Ve,Ot,St,Ft,ml,nt,Wl,Zt,an,Ge,Cl,cn,Xt,zt,un,Jl,Vl,Sl,ql,Yl,hl,fn,xt,Bt,Dl,Tl,Pl,El,pn,dt,_n,el,Tt,dn,Kl,vn,Ql,mn,hn,kt,tl,ll,Zl,gn,It,bn,nl,Pt,$n,Et,kn,gl,vt,mt,wn,Ml,Mt,sl,Ut,yn,Cn,ht,ol,Sn,il,bl,qn,wt,Dn,rl,$l,Tn,yt,Pn,qt,Xl,En,Lt,al,Mn,Ct,Ln,cl,Nn,jn,Ht,Nt,xl,en,J,se=ve(l[52]),fe=[];for(let Z=0;Z<se.length;Z+=1)fe[Z]=Eo(Po(l,se,Z));T=new Ne({props:{variant:"ghost",size:"sm",title:"Load saved config",$$slots:{default:[wu]},$$scope:{ctx:l}}}),T.$on("click",l[53]),E=new Ne({props:{variant:"ghost",size:"sm",title:"Save current settings",$$slots:{default:[yu]},$$scope:{ctx:l}}}),E.$on("click",l[54]),R=new Ne({props:{variant:"ghost",size:"sm",title:"Edit exclusion patterns",$$slots:{default:[Cu]},$$scope:{ctx:l}}}),R.$on("click",l[55]);let Se=l[47]&&Mo(l),ye=l[48]&&Lo(l),Me=l[6]==="code"&&No(l),qe=l[6]==="git"&&Io(l),Ie=l[6]==="image"&&Go(l),Ye=l[6]==="image_file"&&Wo(l),rt=l[42]&&Vo(l),at=l[45]&&Yo(l);It=new Be({props:{variant:"info",$$slots:{default:[ju]},$$scope:{ctx:l}}}),Pt=new Ne({props:{variant:"ghost",size:"sm",$$slots:{default:[Ru]},$$scope:{ctx:l}}}),Pt.$on("click",l[115]),Et=new Ne({props:{variant:"ghost",size:"sm",$$slots:{default:[Au]},$$scope:{ctx:l}}}),Et.$on("click",l[116]);const rs=[Fu,Ou],ul=[];function as(Z,$e){return!Z[32]||Z[32].length===0?0:1}vt=as(l),mt=ul[vt]=rs[vt](l);let gt=l[37]>0&&Xo(),Ll=ve(l[51]||[]),ut=[];for(let Z=0;Z<Ll.length;Z+=1)ut[Z]=xo(So(l,Ll,Z));let Nl=ve(l[30]||[]),ft=[];for(let Z=0;Z<Nl.length;Z+=1)ft[Z]=ei(Co(l,Nl,Z));let jl=ve(l[31]||[]),pt=[];for(let Z=0;Z<jl.length;Z+=1)pt[Z]=ti(yo(l,jl,Z));let bt=l[37]>0&&!l[28]&&li();return Ht=new Ne({props:{variant:"primary",type:"submit",disabled:l[33],$$slots:{default:[Uu]},$$scope:{ctx:l}}}),xl=da(l[80][0]),{c(){e=_("form"),t=_("div"),n=_("div"),s=_("label"),s.textContent="App Name *",i=b(),o=_("input"),c=b(),r=_("div"),f=_("label"),f.textContent="Project",u=b(),d=_("input"),v=b(),h=_("div"),m=_("label"),m.textContent="Environment",g=b(),C=_("select");for(let Z=0;Z<fe.length;Z+=1)fe[Z].c();y=b(),$=_("div"),q=_("span"),q.textContent="Config:",D=b(),X(T.$$.fragment),M=b(),X(E.$$.fragment),j=b(),X(R.$$.fragment),O=b(),Se&&Se.c(),F=b(),ye&&ye.c(),I=b(),W=_("div"),V=_("label"),V.innerHTML='Tags <small class="svelte-oth49g">(comma-separated)</small>',H=b(),B=_("input"),N=b(),G=_("div"),A=_("label"),A.textContent="Source Type *",U=b(),x=_("div"),Q=_("label"),ne=_("input"),te=S(`
              📁 Local Code`),oe=b(),pe=_("label"),ae=_("input"),Ee=S(`
              📦 Git Repo`),me=b(),re=_("label"),_e=_("input"),Ce=S(`
              🐳 Registry`),ce=b(),ue=_("label"),be=_("input"),he=S(`
              📦 Local Image`),He=b(),Me&&Me.c(),De=b(),qe&&qe.c(),lt=b(),Ie&&Ie.c(),ot=b(),Ye&&Ye.c(),Pe=b(),de=_("div"),Fe=_("label"),Fe.textContent="App Port",Ke=b(),Je=_("input"),it=b(),Ve=_("small"),Ve.textContent="Port your app listens on inside the container",Ot=b(),St=_("div"),Ft=_("label"),Ft.textContent="Environment Variables",ml=b(),nt=_("textarea"),Wl=b(),Zt=_("small"),Zt.textContent="One per line: KEY=value",an=b(),Ge=_("div"),Cl=_("div"),Cl.innerHTML="<span>🔧</span> <span>Service Configuration</span>",cn=b(),Xt=_("label"),zt=_("input"),un=b(),Jl=_("span"),Jl.textContent="Auto-inject service discovery",Vl=b(),Sl=_("small"),Sl.textContent="Injects DATABASE_URL, REDIS_URL, etc. based on dependencies",ql=b(),rt&&rt.c(),Yl=b(),hl=_("div"),fn=b(),xt=_("label"),Bt=_("input"),Dl=b(),Tl=_("span"),Tl.textContent="💾 Persist data (mount volume)",Pl=b(),El=_("small"),El.textContent="Mounts /data volume for databases and stateful services",pn=b(),dt=_("div"),_n=b(),el=_("label"),Tt=_("input"),dn=b(),Kl=_("span"),Kl.textContent="🌐 Setup domain (Cloudflare)",vn=b(),Ql=_("small"),Ql.textContent="Auto-provision subdomain with SSL via Cloudflare",mn=b(),at&&at.c(),hn=b(),kt=_("div"),tl=_("div"),ll=_("div"),Zl=_("span"),Zl.textContent="🖥️ Servers",gn=b(),X(It.$$.fragment),bn=b(),nl=_("div"),X(Pt.$$.fragment),$n=b(),X(Et.$$.fragment),kn=b(),gl=_("div"),mt.c(),wn=b(),Ml=_("div"),Mt=_("div"),sl=_("div"),Ut=_("label"),yn=S("Snapshot "),gt&&gt.c(),Cn=b(),ht=_("select"),ol=_("option"),ol.textContent="Select snapshot...";for(let Z=0;Z<ut.length;Z+=1)ut[Z].c();Sn=b(),il=_("div"),bl=_("label"),bl.textContent="Region",qn=b(),wt=_("select");for(let Z=0;Z<ft.length;Z+=1)ft[Z].c();Dn=b(),rl=_("div"),$l=_("label"),$l.textContent="Size",Tn=b(),yt=_("select");for(let Z=0;Z<pt.length;Z+=1)pt[Z].c();Pn=b(),qt=_("div"),Xl=_("span"),Xl.textContent="➕ New servers:",En=b(),Lt=_("div"),al=_("button"),al.textContent="−",Mn=b(),Ct=_("input"),Ln=b(),cl=_("button"),cl.textContent="+",Nn=b(),bt&&bt.c(),jn=b(),X(Ht.$$.fragment),p(s,"for","deploy-name"),p(s,"class","svelte-oth49g"),p(o,"id","deploy-name"),p(o,"type","text"),p(o,"placeholder","my-app"),o.required=!0,p(o,"pattern","[-a-z0-9]+"),p(o,"title","Lowercase letters, numbers, hyphens only"),p(o,"class","svelte-oth49g"),p(n,"class","form-group svelte-oth49g"),p(f,"for","deploy-project"),p(f,"class","svelte-oth49g"),p(d,"id","deploy-project"),p(d,"type","text"),p(d,"placeholder","my-project"),p(d,"pattern","[-a-z0-9]*"),p(d,"class","svelte-oth49g"),p(r,"class","form-group svelte-oth49g"),p(m,"for","deploy-env"),p(m,"class","svelte-oth49g"),p(C,"id","deploy-env"),p(C,"class","svelte-oth49g"),l[2]===void 0&&Qe(()=>l[76].call(C)),p(h,"class","form-group svelte-oth49g"),p(t,"class","form-row three-col svelte-oth49g"),p(q,"class","config-label svelte-oth49g"),p($,"class","config-bar svelte-oth49g"),p(V,"for","deploy-tags"),p(V,"class","svelte-oth49g"),p(B,"id","deploy-tags"),p(B,"type","text"),p(B,"placeholder","api, backend, v2"),p(B,"class","svelte-oth49g"),p(W,"class","form-group svelte-oth49g"),p(A,"class","svelte-oth49g"),p(ne,"type","radio"),ne.__value="code",ee(ne,ne.__value),p(ne,"class","svelte-oth49g"),p(Q,"class","source-option svelte-oth49g"),Te(Q,"active",l[6]==="code"),p(ae,"type","radio"),ae.__value="git",ee(ae,ae.__value),p(ae,"class","svelte-oth49g"),p(pe,"class","source-option svelte-oth49g"),Te(pe,"active",l[6]==="git"),p(_e,"type","radio"),_e.__value="image",ee(_e,_e.__value),p(_e,"class","svelte-oth49g"),p(re,"class","source-option svelte-oth49g"),Te(re,"active",l[6]==="image"),p(be,"type","radio"),be.__value="image_file",ee(be,be.__value),p(be,"class","svelte-oth49g"),p(ue,"class","source-option svelte-oth49g"),Te(ue,"active",l[6]==="image_file"),p(x,"class","source-radio-group svelte-oth49g"),p(G,"class","form-group svelte-oth49g"),p(Fe,"for","deploy-port"),p(Fe,"class","svelte-oth49g"),p(Je,"id","deploy-port"),p(Je,"type","number"),p(Je,"min","1"),p(Je,"max","65535"),p(Je,"class","svelte-oth49g"),p(Ve,"class","svelte-oth49g"),p(de,"class","form-group svelte-oth49g"),p(Ft,"for","deploy-envvars"),p(Ft,"class","svelte-oth49g"),p(nt,"id","deploy-envvars"),p(nt,"rows","3"),p(nt,"placeholder","KEY=value ANOTHER_KEY=value"),p(nt,"class","svelte-oth49g"),p(Zt,"class","svelte-oth49g"),p(St,"class","form-group svelte-oth49g"),p(Cl,"class","config-header svelte-oth49g"),p(zt,"type","checkbox"),p(zt,"class","svelte-oth49g"),p(Xt,"class","checkbox-label svelte-oth49g"),p(hl,"class","config-divider svelte-oth49g"),p(Bt,"type","checkbox"),p(Bt,"class","svelte-oth49g"),p(xt,"class","checkbox-label svelte-oth49g"),p(dt,"class","config-divider svelte-oth49g"),p(Tt,"type","checkbox"),p(Tt,"class","svelte-oth49g"),p(el,"class","checkbox-label svelte-oth49g"),p(Ge,"class","service-config svelte-oth49g"),p(ll,"class","server-title svelte-oth49g"),p(nl,"class","server-actions svelte-oth49g"),p(tl,"class","server-header svelte-oth49g"),p(gl,"class","server-list svelte-oth49g"),p(Ut,"for","snapshot-select"),p(Ut,"class","svelte-oth49g"),ol.__value="",ee(ol,ol.__value),p(ht,"id","snapshot-select"),p(ht,"class","svelte-oth49g"),l[28]===void 0&&Qe(()=>l[118].call(ht)),p(sl,"class","form-group svelte-oth49g"),p(bl,"for","region-select"),p(bl,"class","svelte-oth49g"),p(wt,"id","region-select"),p(wt,"class","svelte-oth49g"),l[3]===void 0&&Qe(()=>l[119].call(wt)),p(il,"class","form-group svelte-oth49g"),p($l,"for","size-select"),p($l,"class","svelte-oth49g"),p(yt,"id","size-select"),p(yt,"class","svelte-oth49g"),l[29]===void 0&&Qe(()=>l[120].call(yt)),p(rl,"class","form-group svelte-oth49g"),p(Mt,"class","form-row three-col svelte-oth49g"),p(Ml,"class","provisioning-config svelte-oth49g"),p(al,"type","button"),p(al,"class","svelte-oth49g"),p(Ct,"type","number"),p(Ct,"min","0"),p(Ct,"max","10"),p(Ct,"class","svelte-oth49g"),p(cl,"type","button"),p(cl,"class","svelte-oth49g"),p(Lt,"class","number-spinner svelte-oth49g"),p(qt,"class","new-servers svelte-oth49g"),p(kt,"class","server-selection svelte-oth49g"),xl.p(ne,ae,_e,be)},m(Z,$e){w(Z,e,$e),a(e,t),a(t,n),a(n,s),a(n,i),a(n,o),ee(o,l[0]),a(t,c),a(t,r),a(r,f),a(r,u),a(r,d),ee(d,l[1]),a(t,v),a(t,h),a(h,m),a(h,g),a(h,C);for(let Ze=0;Ze<fe.length;Ze+=1)fe[Ze]&&fe[Ze].m(C,null);je(C,l[2],!0),a(e,y),a(e,$),a($,q),a($,D),Y(T,$,null),a($,M),Y(E,$,null),a($,j),Y(R,$,null),a($,O),Se&&Se.m($,null),a(e,F),ye&&ye.m(e,null),a(e,I),a(e,W),a(W,V),a(W,H),a(W,B),ee(B,l[5]),a(e,N),a(e,G),a(G,A),a(G,U),a(G,x),a(x,Q),a(Q,ne),ne.checked=ne.__value===l[6],a(Q,te),a(x,oe),a(x,pe),a(pe,ae),ae.checked=ae.__value===l[6],a(pe,Ee),a(x,me),a(x,re),a(re,_e),_e.checked=_e.__value===l[6],a(re,Ce),a(x,ce),a(x,ue),a(ue,be),be.checked=be.__value===l[6],a(ue,he),a(e,He),Me&&Me.m(e,null),a(e,De),qe&&qe.m(e,null),a(e,lt),Ie&&Ie.m(e,null),a(e,ot),Ye&&Ye.m(e,null),a(e,Pe),a(e,de),a(de,Fe),a(de,Ke),a(de,Je),ee(Je,l[7]),a(de,it),a(de,Ve),a(e,Ot),a(e,St),a(St,Ft),a(St,ml),a(St,nt),ee(nt,l[8]),a(St,Wl),a(St,Zt),a(e,an),a(e,Ge),a(Ge,Cl),a(Ge,cn),a(Ge,Xt),a(Xt,zt),zt.checked=l[42],a(Xt,un),a(Xt,Jl),a(Ge,Vl),a(Ge,Sl),a(Ge,ql),rt&&rt.m(Ge,null),a(Ge,Yl),a(Ge,hl),a(Ge,fn),a(Ge,xt),a(xt,Bt),Bt.checked=l[43],a(xt,Dl),a(xt,Tl),a(Ge,Pl),a(Ge,El),a(Ge,pn),a(Ge,dt),a(Ge,_n),a(Ge,el),a(el,Tt),Tt.checked=l[45],a(el,dn),a(el,Kl),a(Ge,vn),a(Ge,Ql),a(Ge,mn),at&&at.m(Ge,null),a(e,hn),a(e,kt),a(kt,tl),a(tl,ll),a(ll,Zl),a(ll,gn),Y(It,ll,null),a(tl,bn),a(tl,nl),Y(Pt,nl,null),a(nl,$n),Y(Et,nl,null),a(kt,kn),a(kt,gl),ul[vt].m(gl,null),a(kt,wn),a(kt,Ml),a(Ml,Mt),a(Mt,sl),a(sl,Ut),a(Ut,yn),gt&&gt.m(Ut,null),a(sl,Cn),a(sl,ht),a(ht,ol);for(let Ze=0;Ze<ut.length;Ze+=1)ut[Ze]&&ut[Ze].m(ht,null);je(ht,l[28],!0),a(Mt,Sn),a(Mt,il),a(il,bl),a(il,qn),a(il,wt);for(let Ze=0;Ze<ft.length;Ze+=1)ft[Ze]&&ft[Ze].m(wt,null);je(wt,l[3],!0),a(Mt,Dn),a(Mt,rl),a(rl,$l),a(rl,Tn),a(rl,yt);for(let Ze=0;Ze<pt.length;Ze+=1)pt[Ze]&&pt[Ze].m(yt,null);je(yt,l[29],!0),a(kt,Pn),a(kt,qt),a(qt,Xl),a(qt,En),a(qt,Lt),a(Lt,al),a(Lt,Mn),a(Lt,Ct),ee(Ct,l[37]),a(Lt,Ln),a(Lt,cl),a(qt,Nn),bt&&bt.m(qt,null),a(e,jn),Y(Ht,e,null),Nt=!0,en||(J=[le(o,"input",l[74]),le(d,"input",l[75]),le(C,"change",l[76]),le(B,"input",l[78]),le(ne,"change",l[79]),le(ae,"change",l[81]),le(_e,"change",l[82]),le(be,"change",l[83]),le(Je,"input",l[104]),le(nt,"input",l[105]),le(zt,"change",l[106]),le(Bt,"change",l[111]),le(Tt,"change",l[112]),le(ht,"change",l[118]),le(wt,"change",l[119]),le(yt,"change",l[120]),le(al,"click",l[121]),le(Ct,"input",l[122]),le(cl,"click",l[123]),le(e,"submit",l[70])],en=!0)},p(Z,$e){if($e[0]&1&&o.value!==Z[0]&&ee(o,Z[0]),$e[0]&2&&d.value!==Z[1]&&ee(d,Z[1]),$e[1]&2097152){se=ve(Z[52]);let Le;for(Le=0;Le<se.length;Le+=1){const Dt=Po(Z,se,Le);fe[Le]?fe[Le].p(Dt,$e):(fe[Le]=Eo(Dt),fe[Le].c(),fe[Le].m(C,null))}for(;Le<fe.length;Le+=1)fe[Le].d(1);fe.length=se.length}$e[0]&4|$e[1]&2097152&&je(C,Z[2]);const Ze={};$e[5]&268435456&&(Ze.$$scope={dirty:$e,ctx:Z}),T.$set(Ze);const cs={};$e[5]&268435456&&(cs.$$scope={dirty:$e,ctx:Z}),E.$set(cs);const us={};$e[5]&268435456&&(us.$$scope={dirty:$e,ctx:Z}),R.$set(us),Z[47]?Se?Se.p(Z,$e):(Se=Mo(Z),Se.c(),Se.m($,null)):Se&&(Se.d(1),Se=null),Z[48]?ye?(ye.p(Z,$e),$e[1]&131072&&P(ye,1)):(ye=Lo(Z),ye.c(),P(ye,1),ye.m(e,I)):ye&&(ke(),L(ye,1,1,()=>{ye=null}),we()),$e[0]&32&&B.value!==Z[5]&&ee(B,Z[5]),$e[0]&64&&(ne.checked=ne.__value===Z[6]),(!Nt||$e[0]&64)&&Te(Q,"active",Z[6]==="code"),$e[0]&64&&(ae.checked=ae.__value===Z[6]),(!Nt||$e[0]&64)&&Te(pe,"active",Z[6]==="git"),$e[0]&64&&(_e.checked=_e.__value===Z[6]),(!Nt||$e[0]&64)&&Te(re,"active",Z[6]==="image"),$e[0]&64&&(be.checked=be.__value===Z[6]),(!Nt||$e[0]&64)&&Te(ue,"active",Z[6]==="image_file"),Z[6]==="code"?Me?(Me.p(Z,$e),$e[0]&64&&P(Me,1)):(Me=No(Z),Me.c(),P(Me,1),Me.m(e,De)):Me&&(ke(),L(Me,1,1,()=>{Me=null}),we()),Z[6]==="git"?qe?(qe.p(Z,$e),$e[0]&64&&P(qe,1)):(qe=Io(Z),qe.c(),P(qe,1),qe.m(e,lt)):qe&&(ke(),L(qe,1,1,()=>{qe=null}),we()),Z[6]==="image"?Ie?Ie.p(Z,$e):(Ie=Go(Z),Ie.c(),Ie.m(e,ot)):Ie&&(Ie.d(1),Ie=null),Z[6]==="image_file"?Ye?Ye.p(Z,$e):(Ye=Wo(Z),Ye.c(),Ye.m(e,Pe)):Ye&&(Ye.d(1),Ye=null),$e[0]&128&&jt(Je.value)!==Z[7]&&ee(Je,Z[7]),$e[0]&256&&ee(nt,Z[8]),$e[1]&2048&&(zt.checked=Z[42]),Z[42]?rt?rt.p(Z,$e):(rt=Vo(Z),rt.c(),rt.m(Ge,Yl)):rt&&(rt.d(1),rt=null),$e[1]&4096&&(Bt.checked=Z[43]),$e[1]&16384&&(Tt.checked=Z[45]),Z[45]?at?at.p(Z,$e):(at=Yo(Z),at.c(),at.m(Ge,null)):at&&(at.d(1),at=null);const fs={};$e[1]&32|$e[5]&268435456&&(fs.$$scope={dirty:$e,ctx:Z}),It.$set(fs);const ps={};$e[5]&268435456&&(ps.$$scope={dirty:$e,ctx:Z}),Pt.$set(ps);const _s={};$e[5]&268435456&&(_s.$$scope={dirty:$e,ctx:Z}),Et.$set(_s);let Gn=vt;if(vt=as(Z),vt===Gn?ul[vt].p(Z,$e):(ke(),L(ul[Gn],1,1,()=>{ul[Gn]=null}),we(),mt=ul[vt],mt?mt.p(Z,$e):(mt=ul[vt]=rs[vt](Z),mt.c()),P(mt,1),mt.m(gl,null)),Z[37]>0?gt||(gt=Xo(),gt.c(),gt.m(Ut,null)):gt&&(gt.d(1),gt=null),$e[1]&1048576){Ll=ve(Z[51]||[]);let Le;for(Le=0;Le<Ll.length;Le+=1){const Dt=So(Z,Ll,Le);ut[Le]?ut[Le].p(Dt,$e):(ut[Le]=xo(Dt),ut[Le].c(),ut[Le].m(ht,null))}for(;Le<ut.length;Le+=1)ut[Le].d(1);ut.length=Ll.length}if($e[0]&268435456|$e[1]&1048576&&je(ht,Z[28]),$e[0]&1073741824){Nl=ve(Z[30]||[]);let Le;for(Le=0;Le<Nl.length;Le+=1){const Dt=Co(Z,Nl,Le);ft[Le]?ft[Le].p(Dt,$e):(ft[Le]=ei(Dt),ft[Le].c(),ft[Le].m(wt,null))}for(;Le<ft.length;Le+=1)ft[Le].d(1);ft.length=Nl.length}if($e[0]&1073741832&&je(wt,Z[3]),$e[1]&1){jl=ve(Z[31]||[]);let Le;for(Le=0;Le<jl.length;Le+=1){const Dt=yo(Z,jl,Le);pt[Le]?pt[Le].p(Dt,$e):(pt[Le]=ti(Dt),pt[Le].c(),pt[Le].m(yt,null))}for(;Le<pt.length;Le+=1)pt[Le].d(1);pt.length=jl.length}$e[0]&536870912|$e[1]&1&&je(yt,Z[29]),$e[1]&64&&jt(Ct.value)!==Z[37]&&ee(Ct,Z[37]),Z[37]>0&&!Z[28]?bt||(bt=li(),bt.c(),bt.m(qt,null)):bt&&(bt.d(1),bt=null);const Wn={};$e[1]&4&&(Wn.disabled=Z[33]),$e[1]&4|$e[5]&268435456&&(Wn.$$scope={dirty:$e,ctx:Z}),Ht.$set(Wn)},i(Z){Nt||(P(T.$$.fragment,Z),P(E.$$.fragment,Z),P(R.$$.fragment,Z),P(ye),P(Me),P(qe),P(It.$$.fragment,Z),P(Pt.$$.fragment,Z),P(Et.$$.fragment,Z),P(mt),P(Ht.$$.fragment,Z),Nt=!0)},o(Z){L(T.$$.fragment,Z),L(E.$$.fragment,Z),L(R.$$.fragment,Z),L(ye),L(Me),L(qe),L(It.$$.fragment,Z),L(Pt.$$.fragment,Z),L(Et.$$.fragment,Z),L(mt),L(Ht.$$.fragment,Z),Nt=!1},d(Z){Z&&k(e),Re(fe,Z),K(T),K(E),K(R),Se&&Se.d(),ye&&ye.d(),Me&&Me.d(),qe&&qe.d(),Ie&&Ie.d(),Ye&&Ye.d(),rt&&rt.d(),at&&at.d(),K(It),K(Pt),K(Et),ul[vt].d(),gt&&gt.d(),Re(ut,Z),Re(ft,Z),Re(pt,Z),bt&&bt.d(),K(Ht),xl.r(),en=!1,We(J)}}}function Gu(l){let e;return{c(){e=_("div"),e.innerHTML='<p>No deployment in progress</p> <p class="hint svelte-oth49g">Fill in the form and click Deploy to start</p>',p(e,"class","empty-state svelte-oth49g")},m(t,n){w(t,e,n)},p:ie,d(t){t&&k(e)}}}function Wu(l){let e,t,n,s,i,o,c=ve(l[35]),r=[];for(let v=0;v<c.length;v+=1)r[v]=ni(wo(l,c,v));function f(v,h){if(v[38]&&v[38].success)return Vu;if(v[38]&&!v[38].success)return Ju}let u=f(l),d=u&&u(l);return{c(){e=_("div"),t=_("div"),n=_("div"),s=b(),i=_("div");for(let v=0;v<r.length;v+=1)r[v].c();o=b(),d&&d.c(),p(n,"class","progress-fill svelte-oth49g"),Ue(n,"width",l[34]+"%"),p(t,"class","progress-bar svelte-oth49g"),p(i,"class","log-output svelte-oth49g"),p(e,"class","progress-section svelte-oth49g")},m(v,h){w(v,e,h),a(e,t),a(t,n),a(e,s),a(e,i);for(let m=0;m<r.length;m+=1)r[m]&&r[m].m(i,null);a(e,o),d&&d.m(e,null)},p(v,h){if(h[1]&8&&Ue(n,"width",v[34]+"%"),h[1]&16){c=ve(v[35]);let m;for(m=0;m<c.length;m+=1){const g=wo(v,c,m);r[m]?r[m].p(g,h):(r[m]=ni(g),r[m].c(),r[m].m(i,null))}for(;m<r.length;m+=1)r[m].d(1);r.length=c.length}u===(u=f(v))&&d?d.p(v,h):(d&&d.d(1),d=u&&u(v),d&&(d.c(),d.m(e,null)))},d(v){v&&k(e),Re(r,v),d&&d.d()}}}function ni(l){let e,t,n=l[72].time.toLocaleTimeString()+"",s,i,o,c=vi(l[72].message)+"",r,f;return{c(){e=_("div"),t=_("span"),s=S(n),i=b(),o=new Ba(!1),r=b(),p(t,"class","log-time svelte-oth49g"),o.a=r,p(e,"class",f="log-line "+l[72].type+" svelte-oth49g")},m(u,d){w(u,e,d),a(e,t),a(t,s),a(e,i),o.m(c,e),a(e,r)},p(u,d){d[1]&16&&n!==(n=u[72].time.toLocaleTimeString()+"")&&z(s,n),d[1]&16&&c!==(c=vi(u[72].message)+"")&&o.p(c),d[1]&16&&f!==(f="log-line "+u[72].type+" svelte-oth49g")&&p(e,"class",f)},d(u){u&&k(e)}}}function Ju(l){let e,t,n,s,i,o=l[2].toUpperCase()+"",c,r,f,u=l[38].error&&si(l);function d(m,g){return m[38].servers&&m[38].servers.length>0?Ku:Yu}let v=d(l),h=v(l);return{c(){e=_("div"),t=_("div"),n=_("h4"),n.textContent="❌ Deployment Failed",s=b(),i=_("span"),c=S(o),r=b(),u&&u.c(),f=b(),h.c(),p(n,"class","svelte-oth49g"),p(i,"class","env-badge svelte-oth49g"),p(t,"class","result-header svelte-oth49g"),p(e,"class","deploy-failure-box svelte-oth49g")},m(m,g){w(m,e,g),a(e,t),a(t,n),a(t,s),a(t,i),a(i,c),a(e,r),u&&u.m(e,null),a(e,f),h.m(e,null)},p(m,g){g[0]&4&&o!==(o=m[2].toUpperCase()+"")&&z(c,o),m[38].error?u?u.p(m,g):(u=si(m),u.c(),u.m(e,f)):u&&(u.d(1),u=null),v===(v=d(m))&&h?h.p(m,g):(h.d(1),h=v(m),h&&(h.c(),h.m(e,null)))},d(m){m&&k(e),u&&u.d(),h.d()}}}function Vu(l){let e,t,n,s,i,o=l[2].toUpperCase()+"",c,r,f,u=l[38].domain&&ri(l),d=l[38].servers&&l[38].servers.length>0&&ai(l);return{c(){e=_("div"),t=_("div"),n=_("h4"),n.textContent="✅ Deployment Complete",s=b(),i=_("span"),c=S(o),r=b(),u&&u.c(),f=b(),d&&d.c(),p(n,"class","svelte-oth49g"),p(i,"class","env-badge svelte-oth49g"),p(t,"class","result-header svelte-oth49g"),p(e,"class","deploy-success-box svelte-oth49g")},m(v,h){w(v,e,h),a(e,t),a(t,n),a(t,s),a(t,i),a(i,c),a(e,r),u&&u.m(e,null),a(e,f),d&&d.m(e,null)},p(v,h){h[0]&4&&o!==(o=v[2].toUpperCase()+"")&&z(c,o),v[38].domain?u?u.p(v,h):(u=ri(v),u.c(),u.m(e,f)):u&&(u.d(1),u=null),v[38].servers&&v[38].servers.length>0?d?d.p(v,h):(d=ai(v),d.c(),d.m(e,null)):d&&(d.d(1),d=null)},d(v){v&&k(e),u&&u.d(),d&&d.d()}}}function si(l){let e,t=l[38].error+"",n;return{c(){e=_("p"),n=S(t)},m(s,i){w(s,e,i),a(e,n)},p(s,i){i[1]&128&&t!==(t=s[38].error+"")&&z(n,t)},d(s){s&&k(e)}}}function Yu(l){let e;return{c(){e=_("p"),e.textContent="No server details available",Ue(e,"margin-top","8px"),Ue(e,"opacity","0.8")},m(t,n){w(t,e,n)},p:ie,d(t){t&&k(e)}}}function Ku(l){let e,t,n,s,i=ve(l[38].servers),o=[];for(let c=0;c<i.length;c+=1)o[c]=ii(bo(l,i,c));return{c(){e=_("div"),t=_("span"),t.textContent="Server Status:",n=b(),s=_("div");for(let c=0;c<o.length;c+=1)o[c].c();p(t,"class","result-label svelte-oth49g"),p(s,"class","server-links svelte-oth49g"),p(e,"class","result-section svelte-oth49g"),Ue(e,"margin-top","12px")},m(c,r){w(c,e,r),a(e,t),a(e,n),a(e,s);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(s,null)},p(c,r){if(r[0]&1|r[1]&128){i=ve(c[38].servers);let f;for(f=0;f<i.length;f+=1){const u=bo(c,i,f);o[f]?o[f].p(u,r):(o[f]=ii(u),o[f].c(),o[f].m(s,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=i.length}},d(c){c&&k(e),Re(o,c)}}}function Qu(l){let e,t=l[151].ip+"",n,s,i=l[151].error&&oi(l);return{c(){e=S("❌ "),n=S(t),i&&i.c(),s=Ae()},m(o,c){w(o,e,c),w(o,n,c),i&&i.m(o,c),w(o,s,c)},p(o,c){c[1]&128&&t!==(t=o[151].ip+"")&&z(n,t),o[151].error?i?i.p(o,c):(i=oi(o),i.c(),i.m(s.parentNode,s)):i&&(i.d(1),i=null)},d(o){o&&(k(e),k(n),k(s)),i&&i.d(o)}}}function Zu(l){let e,t=l[151].ip+"",n;return{c(){e=S("✅ "),n=S(t)},m(s,i){w(s,e,i),w(s,n,i)},p(s,i){i[1]&128&&t!==(t=s[151].ip+"")&&z(n,t)},d(s){s&&(k(e),k(n))}}}function oi(l){let e,t=l[151].error+"",n;return{c(){e=S(": "),n=S(t)},m(s,i){w(s,e,i),w(s,n,i)},p(s,i){i[1]&128&&t!==(t=s[151].error+"")&&z(n,t)},d(s){s&&(k(e),k(n))}}}function ii(l){let e,t,n,s,i,o,c;function r(v,h){return v[151].success?Zu:Qu}let f=r(l),u=f(l);function d(){return l[126](l[151])}return{c(){e=_("div"),t=_("span"),u.c(),n=b(),s=_("button"),s.textContent="📋 Logs",i=b(),p(s,"class","log-btn svelte-oth49g"),p(e,"class","server-link-row svelte-oth49g")},m(v,h){w(v,e,h),a(e,t),u.m(t,null),a(e,n),a(e,s),a(e,i),o||(c=le(s,"click",d),o=!0)},p(v,h){l=v,f===(f=r(l))&&u?u.p(l,h):(u.d(1),u=f(l),u&&(u.c(),u.m(t,null)))},d(v){v&&k(e),u.d(),o=!1,c()}}}function ri(l){let e,t,n,s,i,o=l[38].domain+"",c,r;return{c(){e=_("div"),t=_("span"),t.textContent="Domain:",n=b(),s=_("a"),i=S("https://"),c=S(o),p(t,"class","result-label svelte-oth49g"),p(s,"href",r="https://"+l[38].domain),p(s,"target","_blank"),p(s,"class","result-link svelte-oth49g"),p(e,"class","result-section svelte-oth49g")},m(f,u){w(f,e,u),a(e,t),a(e,n),a(e,s),a(s,i),a(s,c)},p(f,u){u[1]&128&&o!==(o=f[38].domain+"")&&z(c,o),u[1]&128&&r!==(r="https://"+f[38].domain)&&p(s,"href",r)},d(f){f&&k(e)}}}function ai(l){let e,t,n,s,i,o=l[38].servers.some(mi),c,r=ve(l[38].servers.filter(bi)),f=[];for(let d=0;d<r.length;d+=1)f[d]=ci(ko(l,r,d));let u=o&&ui(l);return{c(){e=_("div"),t=_("span"),t.textContent="Servers:",n=b(),s=_("div");for(let d=0;d<f.length;d+=1)f[d].c();i=b(),u&&u.c(),c=Ae(),p(t,"class","result-label svelte-oth49g"),p(s,"class","server-links svelte-oth49g"),p(e,"class","result-section svelte-oth49g")},m(d,v){w(d,e,v),a(e,t),a(e,n),a(e,s);for(let h=0;h<f.length;h+=1)f[h]&&f[h].m(s,null);w(d,i,v),u&&u.m(d,v),w(d,c,v)},p(d,v){if(v[0]&1|v[1]&128){r=ve(d[38].servers.filter(bi));let h;for(h=0;h<r.length;h+=1){const m=ko(d,r,h);f[h]?f[h].p(m,v):(f[h]=ci(m),f[h].c(),f[h].m(s,null))}for(;h<f.length;h+=1)f[h].d(1);f.length=r.length}v[1]&128&&(o=d[38].servers.some(mi)),o?u?u.p(d,v):(u=ui(d),u.c(),u.m(c.parentNode,c)):u&&(u.d(1),u=null)},d(d){d&&(k(e),k(i),k(c)),Re(f,d),u&&u.d(d)}}}function ci(l){let e,t,n=l[151].url+"",s,i,o,c,r,f,u;function d(){return l[124](l[151])}return{c(){e=_("div"),t=_("a"),s=S(n),o=b(),c=_("button"),c.textContent="📋 Logs",r=b(),p(t,"href",i=l[151].url),p(t,"target","_blank"),p(t,"class","result-link svelte-oth49g"),p(c,"class","log-btn svelte-oth49g"),p(e,"class","server-link-row svelte-oth49g")},m(v,h){w(v,e,h),a(e,t),a(t,s),a(e,o),a(e,c),a(e,r),f||(u=le(c,"click",d),f=!0)},p(v,h){l=v,h[1]&128&&n!==(n=l[151].url+"")&&z(s,n),h[1]&128&&i!==(i=l[151].url)&&p(t,"href",i)},d(v){v&&k(e),f=!1,u()}}}function ui(l){let e,t,n,s=ve(l[38].servers.filter($i)),i=[];for(let o=0;o<s.length;o+=1)i[o]=fi($o(l,s,o));return{c(){e=_("div"),t=_("span"),t.textContent="Failed Servers:",n=b();for(let o=0;o<i.length;o+=1)i[o].c();p(t,"class","result-label svelte-oth49g"),Ue(t,"color","#fef3c7"),p(e,"class","failed-servers-section svelte-oth49g")},m(o,c){w(o,e,c),a(e,t),a(e,n);for(let r=0;r<i.length;r+=1)i[r]&&i[r].m(e,null)},p(o,c){if(c[0]&1|c[1]&128){s=ve(o[38].servers.filter($i));let r;for(r=0;r<s.length;r+=1){const f=$o(o,s,r);i[r]?i[r].p(f,c):(i[r]=fi(f),i[r].c(),i[r].m(e,null))}for(;r<i.length;r+=1)i[r].d(1);i.length=s.length}},d(o){o&&k(e),Re(i,o)}}}function fi(l){let e,t,n,s=l[151].ip+"",i,o,c=(l[151].error||"Unknown error")+"",r,f,u,d,v,h;function m(){return l[125](l[151])}return{c(){e=_("div"),t=_("span"),n=S("❌ "),i=S(s),o=S(": "),r=S(c),f=b(),u=_("button"),u.textContent="📋 Logs",d=b(),Ue(t,"color","#fef3c7"),p(u,"class","log-btn svelte-oth49g"),p(e,"class","server-link-row svelte-oth49g")},m(g,C){w(g,e,C),a(e,t),a(t,n),a(t,i),a(t,o),a(t,r),a(e,f),a(e,u),a(e,d),v||(h=le(u,"click",m),v=!0)},p(g,C){l=g,C[1]&128&&s!==(s=l[151].ip+"")&&z(i,s),C[1]&128&&c!==(c=(l[151].error||"Unknown error")+"")&&z(r,c)},d(g){g&&k(e),v=!1,h()}}}function Xu(l){let e;function t(i,o){return i[33]||i[35].length>0?Wu:Gu}let n=t(l),s=n(l);return{c(){s.c(),e=Ae()},m(i,o){s.m(i,o),w(i,e,o)},p(i,o){n===(n=t(i))&&s?s.p(i,o):(s.d(1),s=n(i),s&&(s.c(),s.m(e.parentNode,e)))},d(i){i&&k(e),s.d(i)}}}function pi(l){let e,t,n=(l[151].name||l[151].ip)+"",s,i,o,c=l[151].ip+"",r,f;return{c(){e=_("div"),t=_("span"),s=S(n),i=b(),o=_("span"),r=S(c),f=b(),p(t,"class","server-name svelte-oth49g"),p(o,"class","server-ip svelte-oth49g"),p(e,"class","cleanup-server-item svelte-oth49g")},m(u,d){w(u,e,d),a(e,t),a(t,s),a(e,i),a(e,o),a(o,r),a(e,f)},p(u,d){d[1]&512&&n!==(n=(u[151].name||u[151].ip)+"")&&z(s,n),d[1]&512&&c!==(c=u[151].ip+"")&&z(r,c)},d(u){u&&k(e)}}}function xu(l){let e,t,n,s,i=l[40].length+[...l[36]].length+"",o,c,r,f=[...l[36]].length+"",u,d,v,h,m,g,C=ve(l[40]),y=[];for(let $=0;$<C.length;$+=1)y[$]=pi(go(l,C,$));return{c(){e=_("div"),t=_("p"),n=S("This service is currently running on "),s=_("strong"),o=S(i),c=S(` servers.
      You're deploying to `),r=_("strong"),u=S(f),d=S(" servers."),v=b(),h=_("p"),h.textContent="Stop containers on the following servers?",m=b(),g=_("div");for(let $=0;$<y.length;$+=1)y[$].c();p(t,"class","svelte-oth49g"),p(h,"class","svelte-oth49g"),p(g,"class","cleanup-server-list svelte-oth49g"),p(e,"class","cleanup-confirm-content svelte-oth49g")},m($,q){w($,e,q),a(e,t),a(t,n),a(t,s),a(s,o),a(t,c),a(t,r),a(r,u),a(t,d),a(e,v),a(e,h),a(e,m),a(e,g);for(let D=0;D<y.length;D+=1)y[D]&&y[D].m(g,null)},p($,q){if(q[1]&544&&i!==(i=$[40].length+[...$[36]].length+"")&&z(o,i),q[1]&32&&f!==(f=[...$[36]].length+"")&&z(u,f),q[1]&512){C=ve($[40]);let D;for(D=0;D<C.length;D+=1){const T=go($,C,D);y[D]?y[D].p(T,q):(y[D]=pi(T),y[D].c(),y[D].m(g,null))}for(;D<y.length;D+=1)y[D].d(1);y.length=C.length}},d($){$&&k(e),Re(y,$)}}}function ef(l){let e;return{c(){e=S("Proceed")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function tf(l){let e;return{c(){e=S("Cancel")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function lf(l){let e,t,n,s,i;return t=new Ne({props:{variant:"primary",$$slots:{default:[ef]},$$scope:{ctx:l}}}),t.$on("click",l[71]),s=new Ne({props:{variant:"ghost",$$slots:{default:[tf]},$$scope:{ctx:l}}}),s.$on("click",l[127]),{c(){e=_("div"),X(t.$$.fragment),n=b(),X(s.$$.fragment),p(e,"slot","footer")},m(o,c){w(o,e,c),Y(t,e,null),a(e,n),Y(s,e,null),i=!0},p(o,c){const r={};c[5]&268435456&&(r.$$scope={dirty:c,ctx:o}),t.$set(r);const f={};c[5]&268435456&&(f.$$scope={dirty:c,ctx:o}),s.$set(f)},i(o){i||(P(t.$$.fragment,o),P(s.$$.fragment,o),i=!0)},o(o){L(t.$$.fragment,o),L(s.$$.fragment,o),i=!1},d(o){o&&k(e),K(t),K(s)}}}function nf(l){let e,t,n,s,i,o,c,r,f;n=new ze({props:{title:"🚀 Deploy Application",$$slots:{default:[Hu]},$$scope:{ctx:l}}}),i=new ze({props:{title:"📋 Deployment Progress",$$slots:{default:[Xu]},$$scope:{ctx:l}}});function u(v){l[128](v)}let d={title:"⚠️ Service Already Running",width:"500px",$$slots:{footer:[lf],default:[xu]},$$scope:{ctx:l}};return l[39]!==void 0&&(d.open=l[39]),c=new yl({props:d}),_t.push(()=>wl(c,"open",u)),c.$on("close",l[129]),{c(){e=_("div"),t=_("div"),X(n.$$.fragment),s=b(),X(i.$$.fragment),o=b(),X(c.$$.fragment),p(t,"class","deploy-grid svelte-oth49g"),p(e,"class","deploy-page svelte-oth49g")},m(v,h){w(v,e,h),a(e,t),Y(n,t,null),a(t,s),Y(i,t,null),w(v,o,h),Y(c,v,h),f=!0},p(v,h){const m={};h[0]&2147483647|h[1]&2095207|h[5]&268435456&&(m.$$scope={dirty:h,ctx:v}),n.$set(m);const g={};h[0]&5|h[1]&156|h[5]&268435456&&(g.$$scope={dirty:h,ctx:v}),i.$set(g);const C={};h[1]&1824|h[5]&268435456&&(C.$$scope={dirty:h,ctx:v}),!r&&h[1]&256&&(r=!0,C.open=v[39],kl(()=>r=!1)),c.$set(C)},i(v){f||(P(n.$$.fragment,v),P(i.$$.fragment,v),P(c.$$.fragment,v),f=!0)},o(v){L(n.$$.fragment,v),L(i.$$.fragment,v),L(c.$$.fragment,v),f=!1},d(v){v&&(k(e),k(o)),K(n),K(i),K(c,v)}}}function sf(l){l.preventDefault(),l.stopPropagation()}async function Pa(l,e){const t=[],n=l.createReader();let s=[],i;do i=await new Promise((o,c)=>{n.readEntries(o,c)}),s=s.concat(i);while(i.length>0);for(const o of s){const c=e?`${e}/${o.name}`:o.name;if(o.isFile){const r=await new Promise((f,u)=>{o.file(f,u)});r._relativePath=c,t.push(r)}else if(o.isDirectory){const r=await Pa(o,c);t.push(...r)}}return t}function _i(l){return new Promise((e,t)=>{const n=new FileReader;n.onload=()=>e(new Uint8Array(n.result)),n.onerror=t,n.readAsArrayBuffer(l)})}function di(l){return new Promise((e,t)=>{const n=new FileReader;n.onload=()=>e(n.result),n.onerror=t,n.readAsText(l)})}function vi(l){const e=/(https?:\/\/[^\s]+)/g;return l.replace(e,'<a href="$1" target="_blank" class="log-link">$1</a>')}const mi=l=>!l.success,of=l=>l.isMain,hi=l=>l.isMain,gi=l=>l.isMain,bi=l=>l.success,$i=l=>!l.success;function rf(l,e,t){let n,s,i;Xe(l,Da,J=>t(51,s=J)),Xe(l,Ul,J=>t(73,i=J));let o="",c="",r="prod",f="",u="code",d=8e3,v="",h="",m="main",g="",C=[],y="",$="",q=null,D="",T="",M="",E=[],j=null,R=null,O=!0,F=!1,I="",W="",V=!1,H="",B="",N="",G="lon1",A="s-1vcpu-2gb",U=[],x=[],Q=[],ne=!1,te=0,oe=[],pe=new Set,ae=0,Ee=null,me=!1,re=[],_e=null,Ce=!0,ce=!0,ue={postgres:!1,redis:!1,mysql:!1,mongo:!1},be=!0,he="digitalpixo.com",He="",De="",lt=!1,ot=["node_modules/","__pycache__/","*.pyc",".git/",".venv/","venv/",".env",".DS_Store",".idea/",".vscode/","dist/","build/",".pytest_cache/",".mypy_cache/"],Pe=ot.join(`
`);const de=[...ot],Fe=["dev","test","staging","uat","prod"];dl(()=>{Gt.refresh().catch(()=>{}),sn.refresh().catch(()=>{}),Ke(),Je()});async function Ke(){try{await Wa(),(s==null?void 0:s.length)>0&&!N&&t(28,N=s[0].id||s[0].name)}catch(J){console.warn("Snapshot auto-select failed:",J)}}async function Je(){try{try{const J=await Oe("GET","/infra/regions");t(30,U=J.regions||J||[])}catch{t(30,U=[{slug:"nyc1",name:"New York 1"},{slug:"nyc3",name:"New York 3"},{slug:"sfo3",name:"San Francisco 3"},{slug:"ams3",name:"Amsterdam 3"},{slug:"sgp1",name:"Singapore 1"},{slug:"lon1",name:"London 1"},{slug:"fra1",name:"Frankfurt 1"}])}try{const J=await Oe("GET","/infra/sizes");t(31,x=J.sizes||J||[])}catch{t(31,x=[{slug:"s-1vcpu-512mb-10gb",description:"512MB / 1 vCPU"},{slug:"s-1vcpu-1gb",description:"1GB / 1 vCPU"},{slug:"s-1vcpu-2gb",description:"2GB / 1 vCPU"},{slug:"s-2vcpu-2gb",description:"2GB / 2 vCPU"},{slug:"s-2vcpu-4gb",description:"4GB / 2 vCPU"},{slug:"s-4vcpu-8gb",description:"8GB / 4 vCPU"}])}}catch(J){console.error("Failed to load regions/sizes:",J)}}async function it(){var J;if(!o){ge.warning("Enter app name first");return}t(47,De="Loading...");try{const fe=await Oe("GET",`/infra/deploy-configs/${c||"default"}/${o}/${r}`);Ot(fe),t(47,De="✓ Loaded"),ge.success("Config loaded")}catch(se){(J=se.message)!=null&&J.includes("404")?(t(47,De="No saved config"),ge.info("No saved config found")):(t(47,De="Load failed"),ge.error("Failed to load config"))}}async function Ve(){try{const se=await Oe("GET",`/infra/deploy-configs/${c||"default"}/${o}/${r}`);Ot(se),t(47,De="✓ Auto-loaded")}catch{t(47,De="")}}function Ot(J){var se,fe;J.source_type&&t(6,u={folder:"code",git:"git",image:"image"}[J.source_type]||J.source_type),J.git_url&&t(9,h=J.git_url),J.git_branch&&t(10,m=J.git_branch),J.port&&t(7,d=J.port),J.env_vars&&Object.keys(J.env_vars).length>0&&t(8,v=Object.entries(J.env_vars).map(([Se,ye])=>`${Se}=${ye}`).join(`
`)),((se=J.exclude_patterns)==null?void 0:se.length)>0&&(ot=J.exclude_patterns,t(49,Pe=ot.join(`
`))),((fe=J.server_ips)==null?void 0:fe.length)>0&&t(36,pe=new Set(J.server_ips))}async function St(){if(!o){ge.warning("Enter app name first");return}t(47,De="Saving...");const J={};for(const Se of v.split(`
`)){const ye=Se.trim();if(ye&&ye.includes("=")){const[Me,...qe]=ye.split("=");J[Me.trim()]=qe.join("=").trim()}}const se=Pe.split(`
`).map(Se=>Se.trim()).filter(Boolean),fe={project_name:c||"default",service_name:o,env:r,source_type:u==="code"?"folder":u,git_url:h||null,git_branch:m||"main",exclude_patterns:se.length>0?se:de,port:d,env_vars:J,server_ips:Array.from(pe)};try{await Oe("POST","/infra/deploy-configs",fe),t(47,De="✓ Saved"),ge.success("Config saved")}catch{t(47,De="Save failed"),ge.error("Failed to save config")}}function Ft(){t(48,lt=!lt),lt||(ot=Pe.split(`
`).map(J=>J.trim()).filter(Boolean))}function ml(){ot=[...de],t(49,Pe=de.join(`
`)),ge.info("Reset to default patterns")}function nt(J){for(const se of ot)if(se.endsWith("/")){const fe=se.slice(0,-1);if(J.startsWith(fe+"/")||J.includes("/"+fe+"/"))return!0}else if(se.startsWith("*")){const fe=se.slice(1);if(J.endsWith(fe))return!0}else if(J===se||J.endsWith("/"+se))return!0;return!1}function Wl(J){pe.has(J)?pe.delete(J):pe.add(J),t(36,pe)}function Zt(J){J?(Q||[]).forEach(se=>{var Se,ye,Me;const fe=se.ip||((Me=(ye=(Se=se.networks)==null?void 0:Se.v4)==null?void 0:ye[0])==null?void 0:Me.ip_address);fe&&pe.add(fe)}):pe.clear(),t(36,pe)}function an(){R=async(J,se)=>{await Jl(J,se,E.length===0)},j==null||j.click()}async function Ge(J){const se=Array.from(J.target.files||[]);if(!se.length||!R)return;console.log(`[Deploy] Browser returned ${se.length} files`),se.length<50?console.log("[Deploy] Files:",se.map(ye=>ye.webkitRelativePath)):console.log("[Deploy] First 20 files:",se.slice(0,20).map(ye=>ye.webkitRelativePath));const Se=se[0].webkitRelativePath.split("/")[0];await R(se,Se),R=null,J.target.value=""}function Cl(J){J.preventDefault(),J.stopPropagation(),t(22,F=!0)}function cn(J){J.preventDefault(),J.stopPropagation(),J.currentTarget.contains(J.relatedTarget)||t(22,F=!1)}async function Xt(J){var fe,Se;J.preventDefault(),J.stopPropagation(),t(22,F=!1);const se=(fe=J.dataTransfer)==null?void 0:fe.items;if(!(!se||se.length===0)){for(const ye of se)if(ye.kind==="file"){const Me=(Se=ye.webkitGetAsEntry)==null?void 0:Se.call(ye);Me!=null&&Me.isDirectory&&await zt(Me)}}}async function zt(J){const se=J.name;if(E.some(ye=>ye.name===se)){ge.error(`Folder "${se}" is already added`);return}ge.info(`Reading ${se}/...`);const fe=await Pa(J,"");if(fe.length===0){ge.error(`No files found in ${se}/`);return}const Se=E.length===0;await un(fe,se,Se)}async function un(J,se,fe){fe&&E.some(qe=>qe.isMain)&&t(19,E=E.map(qe=>({...qe,isMain:!1})));const Se=[];let ye=null,Me=0;for(const qe of J){const Ie=qe._relativePath||qe.name;if(nt(Ie)){Me++;continue}const Ye=await _i(qe);Se.push({path:Ie,content:Ye}),fe&&Ie==="Dockerfile"&&(ye=await di(qe))}console.log(`[Deploy] Dropped ${se}/: ${J.length} total, ${Me} skipped, ${Se.length} included`),t(19,E=[...E,{name:se,fileContents:Se,isMain:fe,fileCount:Se.length}]),ql(),E.some(qe=>qe.isMain)&&hl(ye),O&&c&&o&&Tl(),ge.success(`Added ${se}/ (${Se.length} files)`)}async function Jl(J,se,fe){if(E.some(qe=>qe.name===se)){ge.error(`Folder "${se}" is already added`);return}fe&&E.some(qe=>qe.isMain)&&t(19,E=E.map(qe=>({...qe,isMain:!1})));const Se=[];let ye=null,Me=0;for(const qe of J){const Ie=qe.webkitRelativePath.replace(`${se}/`,"");if(nt(Ie)){Me++;continue}const Ye=await _i(qe);Se.push({path:Ie,content:Ye}),fe&&Ie==="Dockerfile"&&(ye=await di(qe))}console.log(`[Deploy] Processed ${se}/: ${J.length} total, ${Me} skipped, ${Se.length} included`),t(19,E=[...E,{name:se,fileContents:Se,isMain:fe,fileCount:Se.length}]),ql(),E.some(qe=>qe.isMain)&&hl(ye),O&&c&&o&&Tl(),ge.success(`Added ${se}/ (${Se.length} files)`)}function Vl(J){t(19,E=E.filter((se,fe)=>fe!==J)),ql(),E.length>0&&!E.some(se=>se.isMain)&&t(19,E=E.map((se,fe)=>({...se,isMain:fe===0})))}function Sl(J){t(19,E=E.map((se,fe)=>({...se,isMain:fe===J}))),hl()}function ql(){const J=E.some(se=>se.isMain);E.length&&J&&Yl()}async function Yl(){if(!E.length)return;const{default:J}=await ho(async()=>{const{default:fe}=await import("https://cdn.jsdelivr.net/npm/jszip@3.10.1/+esm");return{default:fe}},[]),se=new J;for(const fe of E)for(const{path:Se,content:ye}of fe.fileContents)se.file(`${fe.name}/${Se}`,ye);E.length>1&&I&&se.file("Dockerfile",I),await se.generateAsync({type:"blob"})}function hl(J=null){if(t(25,V=!0),J)t(23,I=J),t(24,W="from folder");else if(E.length>1)t(23,I=fn()),t(24,W="multi-folder");else if(E.length===1){const se=E[0];t(23,I=xt(se.fileContents.map(fe=>fe.path))),t(24,W="generated")}Bt()}function fn(){const J=E.find(ye=>ye.isMain);if(!J)return"";const se=E.filter(ye=>!ye.isMain),fe=J.fileContents.some(ye=>ye.path==="requirements.txt");J.fileContents.some(ye=>ye.path==="package.json");let Se=`FROM python:3.11-slim

WORKDIR /app

`;for(const ye of se)Se+=`# Copy ${ye.name}
COPY ${ye.name}/ ./${ye.name}/

`;return Se+=`# Copy main service
COPY ${J.name}/ ./${J.name}/

`,fe&&(Se+=`# Install dependencies
RUN pip install --no-cache-dir -r ${J.name}/requirements.txt

`),Se+=`EXPOSE ${d}

`,Se+=`CMD ["uvicorn", "${J.name}.main:app", "--host", "0.0.0.0", "--port", "${d}"]
`,Se}function xt(J){const se=J.includes("requirements.txt"),fe=J.includes("package.json"),Se=J.includes("pyproject.toml");return se||Se?`FROM python:3.11-slim

WORKDIR /app

COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

COPY . .

EXPOSE ${d}

CMD ["uvicorn", "main:app", "--host", "0.0.0.0", "--port", "${d}"]
`:fe?`FROM node:20-alpine

WORKDIR /app

COPY package*.json ./
RUN npm ci --only=production

COPY . .

EXPOSE ${d}

CMD ["node", "index.js"]
`:`FROM python:3.11-slim

WORKDIR /app

COPY . .

EXPOSE ${d}

CMD ["python", "main.py"]
`}function Bt(){const J=I.match(/^FROM\s+(\S+)/m),se=I.match(/^CMD\s+(.+)$/m);t(26,H=J?J[1]:""),t(27,B=se?se[1]:"")}function Dl(J){J==="from"&&H?t(23,I=I.replace(/^FROM\s+\S+/m,`FROM ${H}`)):J==="cmd"&&B&&(I.includes("CMD ")?t(23,I=I.replace(/^CMD\s+.+$/m,`CMD ${B}`)):t(23,I+=`
CMD ${B}
`)),t(24,W="edited")}function Tl(){if(!c||!o)return;const J=`build_folders_${c}_${o}`,se=E.map(fe=>({name:fe.name,isMain:fe.isMain}));localStorage.setItem(J,JSON.stringify(se))}function Pl(J){if(!y.trim()){ge.error("Please enter a folder path");return}const se=y.trim();if(J&&C.some(fe=>fe.isMain)&&t(12,C=C.map(fe=>({...fe,isMain:!1}))),C.some(fe=>fe.path===se)){ge.error("This folder is already added");return}t(12,C=[...C,{path:se,isMain:J}]),t(13,y="")}function El(J){t(12,C=C.filter((se,fe)=>fe!==J))}function pn(J){var fe;const se=(fe=J.target.files)==null?void 0:fe[0];if(se){if(!se.name.endsWith(".tar")&&!se.name.endsWith(".tar.gz")){ge.error("Only .tar or .tar.gz image files are supported");return}t(15,q=se),ge.success(`Selected: ${se.name}`)}}function dt(J,se="info"){t(35,oe=[...oe,{message:J,type:se,time:new Date}])}async function _n(J){if(J.preventDefault(),!o){ge.error("App name is required");return}if(u==="code"&&!E.some(fe=>fe.isMain)){ge.error("Add a main folder with your code");return}if(u==="git"&&!h){ge.error("Git URL is required");return}if(u==="image"&&!$){ge.error("Docker image URL is required");return}if(u==="image_file"&&!q){ge.error("Upload a Docker image file (.tar)");return}if(u==="image_file"&&!D){ge.error("Image name is required for local images");return}if(pe.size===0&&ae===0){ge.error("Select at least one server or add new servers");return}if(ae>0&&!N){ge.error("Select a snapshot for new servers");return}if(!_l()){ge.error("Configure your DO Token in Settings first");return}if(be&&!Zn()){ge.error("Configure your Cloudflare Token in Settings first (required for domain setup)");return}const se=[...pe];if(c&&o&&r)try{const fe=new URLSearchParams({project:c,environment:r,service_name:o}),Se=await Oe("GET",`/infra/services/state?${fe}`);if(Se.server_ips&&Se.server_ips.length>0){const ye=Se.servers.filter(Me=>!se.includes(Me.ip));if(ye.length>0){t(40,re=ye),t(41,_e=()=>Tt(J)),t(39,me=!0);return}}}catch(fe){console.log("Service state check:",fe.message||fe)}await Tt()}async function el(){t(39,me=!1);const J=`${c}_${o}_${r}`.replace(/[^a-zA-Z0-9_]/g,"_");if(re.length>0){const se=re.map(fe=>fe.ip);dt(`Stopping containers on ${re.length} server(s)...`);try{const fe=await Oe("POST",`/infra/services/cleanup?do_token=${_l()}`,{server_ips:se,container_name:J});dt(`Cleanup complete: ${fe.cleaned} stopped, ${fe.failed} failed`)}catch(fe){dt(`Cleanup warning: ${fe.message||fe}`,"warning")}}t(40,re=[]),_e&&(await _e(),t(41,_e=null))}async function Tt(J){t(33,ne=!0),t(34,te=0),t(35,oe=[]),t(38,Ee=null);try{dt(`Starting deployment of ${o}...`),t(34,te=10);let se=null;if(u==="code"){dt("Creating code archive...");const{default:qe}=await ho(async()=>{const{default:Ye}=await import("https://cdn.jsdelivr.net/npm/jszip@3.10.1/+esm");return{default:Ye}},[]),Ie=new qe;for(const Ye of E)for(const{path:rt,content:at}of Ye.fileContents)Ie.file(`${Ye.name}/${rt}`,at);E.length>1&&I&&Ie.file("Dockerfile",I),se=await Ie.generateAsync({type:"blob"})}dt("Sending deployment request... server provisioning may take 30-60s"),t(34,te=20);const fe=_l(),Se=Zn(),ye=new URLSearchParams({do_token:fe,snapshot_id:N||"",new_server_count:String(ae),region:G,size:A,project:c||"",environment:r,setup_domain:String(be),base_domain:he,domain_aliases:JSON.stringify(He.split(",").map(qe=>qe.trim()).filter(Boolean))});be&&Se&&ye.set("cf_token",Se);const Me=new FormData;Me.append("name",o),Me.append("port",String(d)),Me.append("source_type",u),Me.append("env_vars",v),Me.append("tags",f),Me.append("server_ips",JSON.stringify(Array.from(pe))),Me.append("depends_on",JSON.stringify(Object.entries(ue).filter(([qe,Ie])=>Ie).map(([qe])=>qe))),Me.append("exclude_patterns",JSON.stringify(ot)),I&&Me.append("dockerfile",I),h&&Me.append("git_url",h),m&&Me.append("git_branch",m),g&&Me.append("git_token",g),C.length&&Me.append("git_folders",JSON.stringify(C)),$&&Me.append("image",$),se&&Me.append("code_tar",se,"code.zip"),u==="image_file"&&(q&&Me.append("image_tar",q),D&&Me.append("image",D),T&&Me.append("container_port",String(T)),M&&Me.append("host_port",String(M))),await nc(`/infra/deploy/multipart?${ye}`,Me,qe=>{if(qe.type==="log")dt(qe.message);else if(qe.type==="progress")t(34,te=Math.min(20+(qe.percent||0)*.8,95));else if(qe.type==="done"){if(t(38,Ee=qe),t(34,te=100),!qe.success){const Ie=qe.failed_count||0,Ye=qe.error||`Deployment failed: ${Ie} server(s) failed`;throw new Error(Ye)}}else if(qe.type==="error")throw new Error(qe.message||"Deployment failed")}),dt("✅ Deployment complete!","success"),ge.success("Deployment successful!"),await loadServersForDeploy()}catch(se){let fe="Unknown error";if(typeof se=="string")fe=se;else if(se!=null&&se.message)fe=se.message;else if(se!=null&&se.detail)fe=se.detail;else if(se!=null&&se.error)fe=se.error;else try{fe=JSON.stringify(se)}catch{fe=String(se)}dt(`❌ Error: ${fe}`,"error"),ge.error(fe)}finally{t(33,ne=!1)}}const dn=[[]];function Kl(){o=this.value,t(0,o)}function vn(){c=this.value,t(1,c)}function Ql(){r=ct(this),t(2,r),t(52,Fe)}function mn(){Pe=this.value,t(49,Pe)}function hn(){f=this.value,t(5,f)}function kt(){u=this.__value,t(6,u)}function tl(){u=this.__value,t(6,u)}function ll(){u=this.__value,t(6,u)}function Zl(){u=this.__value,t(6,u)}function gn(J){_t[J?"unshift":"push"](()=>{j=J,t(20,j)})}const It=J=>Sl(J),bn=J=>Vl(J);function nl(){O=this.checked,t(21,O)}function Pt(){I=this.value,t(23,I)}function $n(){H=ct(this),t(26,H)}const Et=()=>Dl("from");function kn(){B=this.value,t(27,B)}const gl=()=>Dl("cmd");function vt(){h=this.value,t(9,h)}function mt(){m=this.value,t(10,m)}const wn=J=>El(J);function Ml(){y=this.value,t(13,y)}const Mt=()=>Pl(!0),sl=()=>Pl(!1);function Ut(){g=this.value,t(11,g)}function yn(){$=this.value,t(14,$)}function Cn(){D=this.value,t(16,D)}function ht(){T=jt(this.value),t(17,T)}function ol(){M=jt(this.value),t(18,M)}function Sn(){d=jt(this.value),t(7,d)}function il(){v=this.value,t(8,v)}function bl(){Ce=this.checked,t(42,Ce)}function qn(){ue.postgres=this.checked,t(44,ue)}function wt(){ue.redis=this.checked,t(44,ue)}function Dn(){ue.mysql=this.checked,t(44,ue)}function rl(){ue.mongo=this.checked,t(44,ue)}function $l(){ce=this.checked,t(43,ce)}function Tn(){be=this.checked,t(45,be)}function yt(){he=this.value,t(4,he)}function Pn(){He=this.value,t(46,He)}const qt=()=>Zt(!0),Xl=()=>Zt(!1),En=J=>Wl(J);function Lt(){N=ct(this),t(28,N)}function al(){G=ct(this),t(3,G),t(30,U)}function Mn(){A=ct(this),t(29,A),t(31,x)}const Ct=()=>t(37,ae=Math.max(0,ae-1));function Ln(){ae=jt(this.value),t(37,ae)}const cl=()=>t(37,ae=Math.min(10,ae+1)),Nn=J=>window.open(`/api/v1/infra/logs/${J.ip}/${J.container_name||Ee.container_name||o}`,"_blank"),jn=J=>window.open(`/api/v1/infra/logs/${J.ip}/${J.container_name||Ee.container_name||o}`,"_blank"),Ht=J=>window.open(`/api/v1/infra/logs/${J.ip}/${J.container_name||Ee.container_name||o}`,"_blank"),Nt=()=>{t(39,me=!1),t(41,_e=null)};function xl(J){me=J,t(39,me)}const en=()=>{t(39,me=!1),t(41,_e=null)};return l.$$.update=()=>{l.$$.dirty[0]&8|l.$$.dirty[2]&2048&&t(32,Q=(i||[]).filter(J=>!G||J.region===G)),l.$$.dirty[0]&23&&t(50,n=o&&c&&r?`${o}-${c}-${r}.${he}`:""),l.$$.dirty[0]&3&&o&&c&&Ve()},[o,c,r,G,he,f,u,d,v,h,m,g,C,y,$,q,D,T,M,E,j,O,F,I,W,V,H,B,N,A,U,x,Q,ne,te,oe,pe,ae,Ee,me,re,_e,Ce,ce,ue,be,He,De,lt,Pe,n,s,Fe,it,St,Ft,ml,Wl,Zt,an,Ge,Cl,cn,Xt,Vl,Sl,Dl,Pl,El,pn,_n,el,dt,i,Kl,vn,Ql,mn,hn,kt,dn,tl,ll,Zl,gn,It,bn,nl,Pt,$n,Et,kn,gl,vt,mt,wn,Ml,Mt,sl,Ut,yn,Cn,ht,ol,Sn,il,bl,qn,wt,Dn,rl,$l,Tn,yt,Pn,qt,Xl,En,Lt,al,Mn,Ct,Ln,cl,Nn,jn,Ht,Nt,xl,en]}class af extends tt{constructor(e){super(),et(this,e,rf,nf,xe,{},null,[-1,-1,-1,-1,-1,-1])}}function ki(l,e,t){const n=l.slice();return n[55]=e[t],n}function wi(l,e,t){const n=l.slice();return n[55]=e[t],n}function yi(l,e,t){const n=l.slice();return n[55]=e[t],n}function Ci(l,e,t){const n=l.slice();return n[62]=e[t],n}function Si(l,e,t){const n=l.slice();return n[66]=e[t],n}function qi(l,e,t){const n=l.slice();return n[69]=e[t][0],n[70]=e[t][1],n}function cf(l){const e=l.slice(),t=e[14].config_snapshot;return e[65]=t,e}function Di(l,e,t){const n=l.slice();return n[62]=e[t],n}function Ti(l,e,t){const n=l.slice();return n[75]=e[t],n}function Pi(l,e,t){const n=l.slice();n[78]=e[t];const s=Jt(n[78]);return n[79]=s,n}function Ei(l){let e,t,n=ur(l[20])+"",s;return{c(){e=_("span"),t=S("Updated "),s=S(n),p(e,"class","last-updated svelte-cuxyqu")},m(i,o){w(i,e,o),a(e,t),a(e,s)},p(i,o){o[0]&1048576&&n!==(n=ur(i[20])+"")&&z(s,n)},d(i){i&&k(e)}}}function uf(l){let e;return{c(){e=S("↻ Refresh")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function ff(l){let e,t,n=ve(l[19]),s=[];for(let o=0;o<n.length;o+=1)s[o]=ji(Pi(l,n,o));const i=o=>L(s[o],1,1,()=>{s[o]=null});return{c(){for(let o=0;o<s.length;o+=1)s[o].c();e=Ae()},m(o,c){for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(o,c);w(o,e,c),t=!0},p(o,c){if(c[0]&27787264){n=ve(o[19]);let r;for(r=0;r<n.length;r+=1){const f=Pi(o,n,r);s[r]?(s[r].p(f,c),P(s[r],1)):(s[r]=ji(f),s[r].c(),P(s[r],1),s[r].m(e.parentNode,e))}for(ke(),r=n.length;r<s.length;r+=1)i(r);we()}},i(o){if(!t){for(let c=0;c<n.length;c+=1)P(s[c]);t=!0}},o(o){s=s.filter(Boolean);for(let c=0;c<s.length;c+=1)L(s[c]);t=!1},d(o){o&&k(e),Re(s,o)}}}function pf(l){let e;return{c(){e=_("tr"),e.innerHTML='<td colspan="12" class="empty-cell svelte-cuxyqu">No deployments found</td>',p(e,"class","svelte-cuxyqu")},m(t,n){w(t,e,n)},p:ie,i:ie,o:ie,d(t){t&&k(e)}}}function _f(l){let e;return{c(){e=_("tr"),e.innerHTML='<td colspan="12" class="loading-cell svelte-cuxyqu">Loading deployment history...</td>',p(e,"class","svelte-cuxyqu")},m(t,n){w(t,e,n)},p:ie,i:ie,o:ie,d(t){t&&k(e)}}}function df(l){let e=(l[78].environment||"-")+"",t;return{c(){t=S(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&524288&&e!==(e=(n[78].environment||"-")+"")&&z(t,e)},d(n){n&&k(t)}}}function vf(l){let e;return{c(){e=_("span"),e.textContent="-",p(e,"class","version-none svelte-cuxyqu")},m(t,n){w(t,e,n)},p:ie,d(t){t&&k(e)}}}function mf(l){let e,t,n=l[78].version+"",s;return{c(){e=_("span"),t=S("v"),s=S(n),p(e,"class","version-badge svelte-cuxyqu")},m(i,o){w(i,e,o),a(e,t),a(e,s)},p(i,o){o[0]&524288&&n!==(n=i[78].version+"")&&z(s,n)},d(i){i&&k(e)}}}function hf(l){let e=l[78].is_rollback?"rollback":"deploy",t;return{c(){t=S(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&524288&&e!==(e=n[78].is_rollback?"rollback":"deploy")&&z(t,e)},d(n){n&&k(t)}}}function gf(l){let e=l[79]+"",t;return{c(){t=S(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&524288&&e!==(e=n[79]+"")&&z(t,e)},d(n){n&&k(t)}}}function Mi(l){let e,t,n;function s(){return l[34](l[78])}return{c(){e=_("button"),e.textContent="⚙️",p(e,"class","icon-btn svelte-cuxyqu"),p(e,"title","View config")},m(i,o){w(i,e,o),t||(n=le(e,"click",s),t=!0)},p(i,o){l=i},d(i){i&&k(e),t=!1,n()}}}function Li(l){let e,t,n;function s(){return l[35](l[78])}return{c(){e=_("button"),e.textContent="📋",p(e,"class","icon-btn svelte-cuxyqu"),p(e,"title","View logs")},m(i,o){w(i,e,o),t||(n=le(e,"click",s),t=!0)},p(i,o){l=i},d(i){i&&k(e),t=!1,n()}}}function Ni(l){let e,t,n;function s(){return l[36](l[78])}return{c(){e=_("button"),e.textContent="⏪",p(e,"class","icon-btn rollback-icon-btn svelte-cuxyqu"),p(e,"title","Rollback")},m(i,o){w(i,e,o),t||(n=le(e,"click",s),t=!0)},p(i,o){l=i},d(i){i&&k(e),t=!1,n()}}}function ji(l){let e,t,n,s=(l[78].project||"-")+"",i,o,c,r,f=(l[78].service||l[78].name)+"",u,d,v,h,m,g,C,y,$=At(l[78].deployed_at||l[78].created_at)+"",q,D,T,M=(l[78].deployed_by||l[78].user||"-")+"",E,j,R,O,F,I,W,V,H,B,N=(l[78].comment||"-")+"",G,A,U,x,Q,ne,te,oe,pe;h=new Be({props:{variant:l[78].environment==="prod"?"purple":l[78].environment==="staging"?"warning":"info",$$slots:{default:[df]},$$scope:{ctx:l}}});function ae(ce,ue){return ce[78].version?mf:vf}let Ee=ae(l),me=Ee(l);F=new Be({props:{variant:l[78].is_rollback?"warning":"info",$$slots:{default:[hf]},$$scope:{ctx:l}}}),V=new Be({props:{variant:Hl(l[79]),$$slots:{default:[gf]},$$scope:{ctx:l}}});let re=l[78].config_snapshot&&Mi(l),_e=l[78].has_logs&&Li(l),Ce=l[78].is_current_active&&Ni(l);return{c(){e=_("tr"),t=_("td"),n=_("span"),i=S(s),o=b(),c=_("td"),r=_("span"),u=S(f),d=b(),v=_("td"),X(h.$$.fragment),m=b(),g=_("td"),me.c(),C=b(),y=_("td"),q=S($),D=b(),T=_("td"),E=S(M),R=b(),O=_("td"),X(F.$$.fragment),I=b(),W=_("td"),X(V.$$.fragment),H=b(),B=_("td"),G=S(N),A=b(),U=_("td"),re&&re.c(),x=b(),Q=_("td"),_e&&_e.c(),ne=b(),te=_("td"),Ce&&Ce.c(),oe=b(),p(n,"class","project-name svelte-cuxyqu"),p(t,"class","svelte-cuxyqu"),p(r,"class","service-name svelte-cuxyqu"),p(c,"class","svelte-cuxyqu"),p(v,"class","svelte-cuxyqu"),p(g,"class","version-cell svelte-cuxyqu"),p(y,"class","date-cell svelte-cuxyqu"),p(T,"class","by-cell svelte-cuxyqu"),p(T,"title",j=l[78].deployed_by||l[78].user||"-"),p(O,"class","svelte-cuxyqu"),p(W,"class","svelte-cuxyqu"),p(B,"class","comment-cell svelte-cuxyqu"),p(U,"class","config-cell svelte-cuxyqu"),p(Q,"class","logs-cell svelte-cuxyqu"),p(te,"class","rollback-cell svelte-cuxyqu"),p(e,"class","svelte-cuxyqu")},m(ce,ue){w(ce,e,ue),a(e,t),a(t,n),a(n,i),a(e,o),a(e,c),a(c,r),a(r,u),a(e,d),a(e,v),Y(h,v,null),a(e,m),a(e,g),me.m(g,null),a(e,C),a(e,y),a(y,q),a(e,D),a(e,T),a(T,E),a(e,R),a(e,O),Y(F,O,null),a(e,I),a(e,W),Y(V,W,null),a(e,H),a(e,B),a(B,G),a(e,A),a(e,U),re&&re.m(U,null),a(e,x),a(e,Q),_e&&_e.m(Q,null),a(e,ne),a(e,te),Ce&&Ce.m(te,null),a(e,oe),pe=!0},p(ce,ue){(!pe||ue[0]&524288)&&s!==(s=(ce[78].project||"-")+"")&&z(i,s),(!pe||ue[0]&524288)&&f!==(f=(ce[78].service||ce[78].name)+"")&&z(u,f);const be={};ue[0]&524288&&(be.variant=ce[78].environment==="prod"?"purple":ce[78].environment==="staging"?"warning":"info"),ue[0]&524288|ue[2]&1048576&&(be.$$scope={dirty:ue,ctx:ce}),h.$set(be),Ee===(Ee=ae(ce))&&me?me.p(ce,ue):(me.d(1),me=Ee(ce),me&&(me.c(),me.m(g,null))),(!pe||ue[0]&524288)&&$!==($=At(ce[78].deployed_at||ce[78].created_at)+"")&&z(q,$),(!pe||ue[0]&524288)&&M!==(M=(ce[78].deployed_by||ce[78].user||"-")+"")&&z(E,M),(!pe||ue[0]&524288&&j!==(j=ce[78].deployed_by||ce[78].user||"-"))&&p(T,"title",j);const he={};ue[0]&524288&&(he.variant=ce[78].is_rollback?"warning":"info"),ue[0]&524288|ue[2]&1048576&&(he.$$scope={dirty:ue,ctx:ce}),F.$set(he);const He={};ue[0]&524288&&(He.variant=Hl(ce[79])),ue[0]&524288|ue[2]&1048576&&(He.$$scope={dirty:ue,ctx:ce}),V.$set(He),(!pe||ue[0]&524288)&&N!==(N=(ce[78].comment||"-")+"")&&z(G,N),ce[78].config_snapshot?re?re.p(ce,ue):(re=Mi(ce),re.c(),re.m(U,null)):re&&(re.d(1),re=null),ce[78].has_logs?_e?_e.p(ce,ue):(_e=Li(ce),_e.c(),_e.m(Q,null)):_e&&(_e.d(1),_e=null),ce[78].is_current_active?Ce?Ce.p(ce,ue):(Ce=Ni(ce),Ce.c(),Ce.m(te,null)):Ce&&(Ce.d(1),Ce=null)},i(ce){pe||(P(h.$$.fragment,ce),P(F.$$.fragment,ce),P(V.$$.fragment,ce),pe=!0)},o(ce){L(h.$$.fragment,ce),L(F.$$.fragment,ce),L(V.$$.fragment,ce),pe=!1},d(ce){ce&&k(e),K(h),me.d(),K(F),K(V),re&&re.d(),_e&&_e.d(),Ce&&Ce.d()}}}function bf(l){let e,t,n,s,i,o,c,r;const f=[_f,pf,ff],u=[];function d(v,h){return v[0]&&v[19].length===0?0:v[19].length===0?1:2}return o=d(l),c=u[o]=f[o](l),{c(){e=_("div"),t=_("table"),n=_("thead"),n.innerHTML='<tr class="svelte-cuxyqu"><th class="svelte-cuxyqu">Project</th> <th class="svelte-cuxyqu">Service</th> <th class="svelte-cuxyqu">Environment</th> <th class="version-col svelte-cuxyqu">v</th> <th class="svelte-cuxyqu">Deployed</th> <th class="svelte-cuxyqu">By</th> <th class="svelte-cuxyqu">Type</th> <th class="svelte-cuxyqu">Status</th> <th class="svelte-cuxyqu">Comment</th> <th class="config-col svelte-cuxyqu"></th> <th class="logs-col svelte-cuxyqu"></th> <th class="rollback-col svelte-cuxyqu"></th></tr>',s=b(),i=_("tbody"),c.c(),p(t,"class","table svelte-cuxyqu"),p(e,"class","table-container svelte-cuxyqu")},m(v,h){w(v,e,h),a(e,t),a(t,n),a(t,s),a(t,i),u[o].m(i,null),r=!0},p(v,h){let m=o;o=d(v),o===m?u[o].p(v,h):(ke(),L(u[m],1,1,()=>{u[m]=null}),we(),c=u[o],c?c.p(v,h):(c=u[o]=f[o](v),c.c()),P(c,1),c.m(i,null))},i(v){r||(P(c),r=!0)},o(v){L(c),r=!1},d(v){v&&k(e),u[o].d()}}}function Ri(l){let e,t,n,s=(l[2].service||l[2].name)+"",i,o,c,r=l[2].project+"",f,u,d=l[2].environment+"",v,h,m,g,C,y,$,q=At(l[2].deployed_at||l[2].created_at)+"",D,T,M,E,j=(l[2].deployed_by||l[2].user||"unknown")+"",R,O,F,I,W,V,H,B,N,G,A=l[2].comment&&Ai(l);const U=[kf,$f],x=[];function Q(te,oe){return te[3].length===0?0:1}H=Q(l),B=x[H]=U[H](l);let ne=l[6].length>0&&Fi(l);return{c(){e=_("div"),t=_("div"),n=_("div"),i=S(s),o=b(),c=_("div"),f=S(r),u=S(" / "),v=S(d),h=b(),m=_("div"),g=_("label"),g.textContent="📍 Current Deployment",C=b(),y=_("div"),$=_("div"),D=S(q),T=b(),M=_("div"),E=S("by "),R=S(j),O=b(),A&&A.c(),F=b(),I=_("div"),W=_("label"),W.textContent="🎯 Rollback to",V=b(),B.c(),N=b(),ne&&ne.c(),p(n,"class","service-name svelte-cuxyqu"),p(c,"class","service-coords svelte-cuxyqu"),p(t,"class","service-info svelte-cuxyqu"),p(g,"class","svelte-cuxyqu"),p($,"class","deploy-date svelte-cuxyqu"),p(M,"class","deploy-by svelte-cuxyqu"),p(y,"class","deployment-card current svelte-cuxyqu"),p(m,"class","section svelte-cuxyqu"),p(W,"class","svelte-cuxyqu"),p(I,"class","section svelte-cuxyqu"),p(e,"class","rollback-content svelte-cuxyqu")},m(te,oe){w(te,e,oe),a(e,t),a(t,n),a(n,i),a(t,o),a(t,c),a(c,f),a(c,u),a(c,v),a(e,h),a(e,m),a(m,g),a(m,C),a(m,y),a(y,$),a($,D),a(y,T),a(y,M),a(M,E),a(M,R),a(y,O),A&&A.m(y,null),a(e,F),a(e,I),a(I,W),a(I,V),x[H].m(I,null),a(e,N),ne&&ne.m(e,null),G=!0},p(te,oe){(!G||oe[0]&4)&&s!==(s=(te[2].service||te[2].name)+"")&&z(i,s),(!G||oe[0]&4)&&r!==(r=te[2].project+"")&&z(f,r),(!G||oe[0]&4)&&d!==(d=te[2].environment+"")&&z(v,d),(!G||oe[0]&4)&&q!==(q=At(te[2].deployed_at||te[2].created_at)+"")&&z(D,q),(!G||oe[0]&4)&&j!==(j=(te[2].deployed_by||te[2].user||"unknown")+"")&&z(R,j),te[2].comment?A?A.p(te,oe):(A=Ai(te),A.c(),A.m(y,null)):A&&(A.d(1),A=null);let pe=H;H=Q(te),H===pe?x[H].p(te,oe):(ke(),L(x[pe],1,1,()=>{x[pe]=null}),we(),B=x[H],B?B.p(te,oe):(B=x[H]=U[H](te),B.c()),P(B,1),B.m(I,null)),te[6].length>0?ne?ne.p(te,oe):(ne=Fi(te),ne.c(),ne.m(e,null)):ne&&(ne.d(1),ne=null)},i(te){G||(P(B),G=!0)},o(te){L(B),G=!1},d(te){te&&k(e),A&&A.d(),x[H].d(),ne&&ne.d()}}}function Ai(l){let e,t=l[2].comment+"",n;return{c(){e=_("div"),n=S(t),p(e,"class","deploy-comment svelte-cuxyqu")},m(s,i){w(s,e,i),a(e,n)},p(s,i){i[0]&4&&t!==(t=s[2].comment+"")&&z(n,t)},d(s){s&&k(e)}}}function $f(l){let e,t,n=ve(l[3]),s=[];for(let o=0;o<n.length;o+=1)s[o]=Oi(Ti(l,n,o));const i=o=>L(s[o],1,1,()=>{s[o]=null});return{c(){e=_("div");for(let o=0;o<s.length;o+=1)s[o].c();p(e,"class","deployment-list svelte-cuxyqu")},m(o,c){w(o,e,c);for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(e,null);t=!0},p(o,c){if(c[0]&56){n=ve(o[3]);let r;for(r=0;r<n.length;r+=1){const f=Ti(o,n,r);s[r]?(s[r].p(f,c),P(s[r],1)):(s[r]=Oi(f),s[r].c(),P(s[r],1),s[r].m(e,null))}for(ke(),r=n.length;r<s.length;r+=1)i(r);we()}},i(o){if(!t){for(let c=0;c<n.length;c+=1)P(s[c]);t=!0}},o(o){s=s.filter(Boolean);for(let c=0;c<s.length;c+=1)L(s[c]);t=!1},d(o){o&&k(e),Re(s,o)}}}function kf(l){let e;return{c(){e=_("div"),e.textContent="No previous deployments found",p(e,"class","no-deployments svelte-cuxyqu")},m(t,n){w(t,e,n)},p:ie,i:ie,o:ie,d(t){t&&k(e)}}}function wf(l){let e,t=l[75].id.substring(0,8)+"",n;return{c(){e=_("span"),n=S(t),p(e,"class","version-badge muted svelte-cuxyqu")},m(s,i){w(s,e,i),a(e,n)},p(s,i){i[0]&8&&t!==(t=s[75].id.substring(0,8)+"")&&z(n,t)},d(s){s&&k(e)}}}function yf(l){let e,t,n=l[75].version+"",s;return{c(){e=_("span"),t=S("v"),s=S(n),p(e,"class","version-badge svelte-cuxyqu")},m(i,o){w(i,e,o),a(e,t),a(e,s)},p(i,o){o[0]&8&&n!==(n=i[75].version+"")&&z(s,n)},d(i){i&&k(e)}}}function Cf(l){let e=Jt(l[75])+"",t;return{c(){t=S(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&8&&e!==(e=Jt(n[75])+"")&&z(t,e)},d(n){n&&k(t)}}}function Oi(l){let e,t,n,s=!1,i,o,c,r,f,u=At(l[75].deployed_at||l[75].created_at)+"",d,v,h,m,g=(l[75].deployed_by||l[75].user||"unknown")+"",C,y,$,q,D,T,M,E;function j(F,I){return F[75].version?yf:wf}let R=j(l),O=R(l);return $=new Be({props:{variant:Hl(Jt(l[75])),$$slots:{default:[Cf]},$$scope:{ctx:l}}}),T=da(l[39][0]),{c(){e=_("label"),t=_("input"),i=b(),o=_("div"),O.c(),c=b(),r=_("div"),f=_("div"),d=S(u),v=b(),h=_("div"),m=S("by "),C=S(g),y=b(),X($.$$.fragment),q=b(),p(t,"type","radio"),t.__value=n=l[75].id,ee(t,t.__value),t.disabled=l[5],p(t,"class","svelte-cuxyqu"),p(o,"class","deploy-version svelte-cuxyqu"),p(f,"class","deploy-date svelte-cuxyqu"),p(h,"class","deploy-by svelte-cuxyqu"),p(r,"class","deploy-info svelte-cuxyqu"),p(e,"class","deployment-option svelte-cuxyqu"),Te(e,"selected",l[4]===l[75].id),T.p(t)},m(F,I){w(F,e,I),a(e,t),t.checked=t.__value===l[4],a(e,i),a(e,o),O.m(o,null),a(e,c),a(e,r),a(r,f),a(f,d),a(r,v),a(r,h),a(h,m),a(h,C),a(e,y),Y($,e,null),a(e,q),D=!0,M||(E=le(t,"change",l[38]),M=!0)},p(F,I){(!D||I[0]&8&&n!==(n=F[75].id))&&(t.__value=n,ee(t,t.__value),s=!0),(!D||I[0]&32)&&(t.disabled=F[5]),(s||I[0]&24)&&(t.checked=t.__value===F[4]),R===(R=j(F))&&O?O.p(F,I):(O.d(1),O=R(F),O&&(O.c(),O.m(o,null))),(!D||I[0]&8)&&u!==(u=At(F[75].deployed_at||F[75].created_at)+"")&&z(d,u),(!D||I[0]&8)&&g!==(g=(F[75].deployed_by||F[75].user||"unknown")+"")&&z(C,g);const W={};I[0]&8&&(W.variant=Hl(Jt(F[75]))),I[0]&8|I[2]&1048576&&(W.$$scope={dirty:I,ctx:F}),$.$set(W),(!D||I[0]&24)&&Te(e,"selected",F[4]===F[75].id)},i(F){D||(P($.$$.fragment,F),D=!0)},o(F){L($.$$.fragment,F),D=!1},d(F){F&&k(e),O.d(),K($),T.r(),M=!1,E()}}}function Fi(l){let e,t,n,s,i,o=ve(l[6]),c=[];for(let f=0;f<o.length;f+=1)c[f]=zi(Di(l,o,f));let r=l[5]&&Bi();return{c(){e=_("div"),t=_("label"),t.textContent="📋 Progress",n=b(),s=_("div");for(let f=0;f<c.length;f+=1)c[f].c();i=b(),r&&r.c(),p(t,"class","svelte-cuxyqu"),p(s,"class","rollback-logs svelte-cuxyqu"),p(e,"class","section rollback-logs-section svelte-cuxyqu")},m(f,u){w(f,e,u),a(e,t),a(e,n),a(e,s);for(let d=0;d<c.length;d+=1)c[d]&&c[d].m(s,null);a(s,i),r&&r.m(s,null)},p(f,u){if(u[0]&64){o=ve(f[6]);let d;for(d=0;d<o.length;d+=1){const v=Di(f,o,d);c[d]?c[d].p(v,u):(c[d]=zi(v),c[d].c(),c[d].m(s,i))}for(;d<c.length;d+=1)c[d].d(1);c.length=o.length}f[5]?r||(r=Bi(),r.c(),r.m(s,null)):r&&(r.d(1),r=null)},d(f){f&&k(e),Re(c,f),r&&r.d()}}}function zi(l){let e,t=l[62].message+"",n,s;return{c(){e=_("div"),n=S(t),p(e,"class",s="log-entry log-"+l[62].type+" svelte-cuxyqu")},m(i,o){w(i,e,o),a(e,n)},p(i,o){o[0]&64&&t!==(t=i[62].message+"")&&z(n,t),o[0]&64&&s!==(s="log-entry log-"+i[62].type+" svelte-cuxyqu")&&p(e,"class",s)},d(i){i&&k(e)}}}function Bi(l){let e;return{c(){e=_("div"),e.innerHTML='<span class="spinner svelte-cuxyqu">⏳</span> Working...',p(e,"class","log-entry log-info svelte-cuxyqu")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function Sf(l){let e,t,n=l[2]&&Ri(l);return{c(){n&&n.c(),e=Ae()},m(s,i){n&&n.m(s,i),w(s,e,i),t=!0},p(s,i){s[2]?n?(n.p(s,i),i[0]&4&&P(n,1)):(n=Ri(s),n.c(),P(n,1),n.m(e.parentNode,e)):n&&(ke(),L(n,1,1,()=>{n=null}),we())},i(s){t||(P(n),t=!0)},o(s){L(n),t=!1},d(s){s&&k(e),n&&n.d(s)}}}function qf(l){let e=l[6].length>0?"Close":"Cancel",t;return{c(){t=S(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&64&&e!==(e=n[6].length>0?"Close":"Cancel")&&z(t,e)},d(n){n&&k(t)}}}function Df(l){let e;return{c(){e=S("⏪ Execute Rollback")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function Tf(l){let e;return{c(){e=S("⏳ Rolling back...")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function Pf(l){let e;function t(i,o){return i[5]?Tf:Df}let n=t(l),s=n(l);return{c(){s.c(),e=Ae()},m(i,o){s.m(i,o),w(i,e,o)},p(i,o){n!==(n=t(i))&&(s.d(1),s=n(i),s&&(s.c(),s.m(e.parentNode,e)))},d(i){i&&k(e),s.d(i)}}}function Ef(l){let e,t,n,s,i;return t=new Ne({props:{variant:"ghost",$$slots:{default:[qf]},$$scope:{ctx:l}}}),t.$on("click",l[37]),s=new Ne({props:{variant:"warning",disabled:!l[4]||l[5],$$slots:{default:[Pf]},$$scope:{ctx:l}}}),s.$on("click",l[25]),{c(){e=_("div"),X(t.$$.fragment),n=b(),X(s.$$.fragment),p(e,"slot","footer")},m(o,c){w(o,e,c),Y(t,e,null),a(e,n),Y(s,e,null),i=!0},p(o,c){const r={};c[0]&64|c[2]&1048576&&(r.$$scope={dirty:c,ctx:o}),t.$set(r);const f={};c[0]&48&&(f.disabled=!o[4]||o[5]),c[0]&32|c[2]&1048576&&(f.$$scope={dirty:c,ctx:o}),s.$set(f)},i(o){i||(P(t.$$.fragment,o),P(s.$$.fragment,o),i=!0)},o(o){L(t.$$.fragment,o),L(s.$$.fragment,o),i=!1},d(o){o&&k(e),K(t),K(s)}}}function Ii(l){let e,t,n,s=(l[14].service_name||l[14].service)+"",i,o,c,r=l[14].environment+"",f,u,d=At(l[14].deployed_at)+"",v,h,m,g,C;const y=[Lf,Mf],$=[];function q(T,M){return T[14].config_snapshot?0:1}function D(T,M){return M===0?cf(T):T}return m=q(l),g=$[m]=y[m](D(l,m)),{c(){e=_("div"),t=_("div"),n=_("span"),i=S(s),o=b(),c=_("span"),f=S(r),u=S(" • "),v=S(d),h=b(),g.c(),p(n,"class","service-name svelte-cuxyqu"),p(c,"class","meta svelte-cuxyqu"),p(t,"class","config-header-info svelte-cuxyqu"),p(e,"class","config-content svelte-cuxyqu")},m(T,M){w(T,e,M),a(e,t),a(t,n),a(n,i),a(t,o),a(t,c),a(c,f),a(c,u),a(c,v),a(e,h),$[m].m(e,null),C=!0},p(T,M){(!C||M[0]&16384)&&s!==(s=(T[14].service_name||T[14].service)+"")&&z(i,s),(!C||M[0]&16384)&&r!==(r=T[14].environment+"")&&z(f,r),(!C||M[0]&16384)&&d!==(d=At(T[14].deployed_at)+"")&&z(v,d);let E=m;m=q(T),m===E?$[m].p(D(T,m),M):(ke(),L($[E],1,1,()=>{$[E]=null}),we(),g=$[m],g?g.p(D(T,m),M):(g=$[m]=y[m](D(T,m)),g.c()),P(g,1),g.m(e,null))},i(T){C||(P(g),C=!0)},o(T){L(g),C=!1},d(T){T&&k(e),$[m].d()}}}function Mf(l){let e;return{c(){e=_("div"),e.textContent="No config snapshot available",p(e,"class","no-config svelte-cuxyqu")},m(t,n){w(t,e,n)},p:ie,i:ie,o:ie,d(t){t&&k(e)}}}function Lf(l){var Ee,me;let e,t,n,s,i,o,c=(l[65].source_type||"-")+"",r,f,u,d,v,h,m,g,C=(l[65].port||"-")+"",y,$,q,D,T,M,E,j,R,O,F=l[65].env_vars&&Object.keys(l[65].env_vars).length>0,I,W,V,H=l[65].git_url&&Ui(l),B=l[65].git_branch&&Hi(l),N=l[65].image&&Gi(l),G=l[65].container_port&&Wi(l),A=l[65].host_port&&Ji(l),U=l[65].snapshot_id&&Vi(l),x=l[65].region&&Yi(l),Q=l[65].size&&Ki(l),ne=((Ee=l[65].server_ips)==null?void 0:Ee.length)&&Qi(l),te=l[65].setup_domain&&Zi(),oe=l[65].base_domain&&Xi(l),pe=F&&xi(l),ae=((me=l[65].tags)==null?void 0:me.length)&&tr(l);return{c(){e=_("table"),t=_("tbody"),n=_("tr"),s=_("td"),s.textContent="Source Type",i=_("td"),o=_("strong"),r=S(c),f=b(),H&&H.c(),u=b(),B&&B.c(),d=b(),N&&N.c(),v=b(),h=_("tr"),m=_("td"),m.textContent="Port",g=_("td"),y=S(C),$=b(),G&&G.c(),q=b(),A&&A.c(),D=b(),U&&U.c(),T=b(),x&&x.c(),M=b(),Q&&Q.c(),E=b(),ne&&ne.c(),j=b(),te&&te.c(),R=b(),oe&&oe.c(),O=b(),pe&&pe.c(),I=b(),ae&&ae.c(),W=Ae(),p(s,"class","label svelte-cuxyqu"),p(i,"class","svelte-cuxyqu"),p(m,"class","label svelte-cuxyqu"),p(g,"class","svelte-cuxyqu"),p(t,"class","svelte-cuxyqu"),p(e,"class","config-table svelte-cuxyqu")},m(re,_e){w(re,e,_e),a(e,t),a(t,n),a(n,s),a(n,i),a(i,o),a(o,r),a(t,f),H&&H.m(t,null),a(t,u),B&&B.m(t,null),a(t,d),N&&N.m(t,null),a(t,v),a(t,h),a(h,m),a(h,g),a(g,y),a(t,$),G&&G.m(t,null),a(t,q),A&&A.m(t,null),a(t,D),U&&U.m(t,null),a(t,T),x&&x.m(t,null),a(t,M),Q&&Q.m(t,null),a(t,E),ne&&ne.m(t,null),a(t,j),te&&te.m(t,null),a(t,R),oe&&oe.m(t,null),w(re,O,_e),pe&&pe.m(re,_e),w(re,I,_e),ae&&ae.m(re,_e),w(re,W,_e),V=!0},p(re,_e){var Ce,ce;(!V||_e[0]&16384)&&c!==(c=(re[65].source_type||"-")+"")&&z(r,c),re[65].git_url?H?H.p(re,_e):(H=Ui(re),H.c(),H.m(t,u)):H&&(H.d(1),H=null),re[65].git_branch?B?B.p(re,_e):(B=Hi(re),B.c(),B.m(t,d)):B&&(B.d(1),B=null),re[65].image?N?N.p(re,_e):(N=Gi(re),N.c(),N.m(t,v)):N&&(N.d(1),N=null),(!V||_e[0]&16384)&&C!==(C=(re[65].port||"-")+"")&&z(y,C),re[65].container_port?G?G.p(re,_e):(G=Wi(re),G.c(),G.m(t,q)):G&&(G.d(1),G=null),re[65].host_port?A?A.p(re,_e):(A=Ji(re),A.c(),A.m(t,D)):A&&(A.d(1),A=null),re[65].snapshot_id?U?U.p(re,_e):(U=Vi(re),U.c(),U.m(t,T)):U&&(U.d(1),U=null),re[65].region?x?x.p(re,_e):(x=Yi(re),x.c(),x.m(t,M)):x&&(x.d(1),x=null),re[65].size?Q?Q.p(re,_e):(Q=Ki(re),Q.c(),Q.m(t,E)):Q&&(Q.d(1),Q=null),(Ce=re[65].server_ips)!=null&&Ce.length?ne?ne.p(re,_e):(ne=Qi(re),ne.c(),ne.m(t,j)):ne&&(ne.d(1),ne=null),re[65].setup_domain?te||(te=Zi(),te.c(),te.m(t,R)):te&&(te.d(1),te=null),re[65].base_domain?oe?oe.p(re,_e):(oe=Xi(re),oe.c(),oe.m(t,null)):oe&&(oe.d(1),oe=null),_e[0]&16384&&(F=re[65].env_vars&&Object.keys(re[65].env_vars).length>0),F?pe?pe.p(re,_e):(pe=xi(re),pe.c(),pe.m(I.parentNode,I)):pe&&(pe.d(1),pe=null),(ce=re[65].tags)!=null&&ce.length?ae?(ae.p(re,_e),_e[0]&16384&&P(ae,1)):(ae=tr(re),ae.c(),P(ae,1),ae.m(W.parentNode,W)):ae&&(ke(),L(ae,1,1,()=>{ae=null}),we())},i(re){V||(P(ae),V=!0)},o(re){L(ae),V=!1},d(re){re&&(k(e),k(O),k(I),k(W)),H&&H.d(),B&&B.d(),N&&N.d(),G&&G.d(),A&&A.d(),U&&U.d(),x&&x.d(),Q&&Q.d(),ne&&ne.d(),te&&te.d(),oe&&oe.d(),pe&&pe.d(re),ae&&ae.d(re)}}}function Ui(l){let e,t,n,s=l[65].git_url+"",i;return{c(){e=_("tr"),t=_("td"),t.textContent="Git URL",n=_("td"),i=S(s),p(t,"class","label svelte-cuxyqu"),p(n,"class","svelte-cuxyqu")},m(o,c){w(o,e,c),a(e,t),a(e,n),a(n,i)},p(o,c){c[0]&16384&&s!==(s=o[65].git_url+"")&&z(i,s)},d(o){o&&k(e)}}}function Hi(l){let e,t,n,s=l[65].git_branch+"",i;return{c(){e=_("tr"),t=_("td"),t.textContent="Git Branch",n=_("td"),i=S(s),p(t,"class","label svelte-cuxyqu"),p(n,"class","svelte-cuxyqu")},m(o,c){w(o,e,c),a(e,t),a(e,n),a(n,i)},p(o,c){c[0]&16384&&s!==(s=o[65].git_branch+"")&&z(i,s)},d(o){o&&k(e)}}}function Gi(l){let e,t,n,s=l[65].image+"",i;return{c(){e=_("tr"),t=_("td"),t.textContent="Image",n=_("td"),i=S(s),p(t,"class","label svelte-cuxyqu"),p(n,"class","svelte-cuxyqu")},m(o,c){w(o,e,c),a(e,t),a(e,n),a(n,i)},p(o,c){c[0]&16384&&s!==(s=o[65].image+"")&&z(i,s)},d(o){o&&k(e)}}}function Wi(l){let e,t,n,s=l[65].container_port+"",i;return{c(){e=_("tr"),t=_("td"),t.textContent="Container Port",n=_("td"),i=S(s),p(t,"class","label svelte-cuxyqu"),p(n,"class","svelte-cuxyqu")},m(o,c){w(o,e,c),a(e,t),a(e,n),a(n,i)},p(o,c){c[0]&16384&&s!==(s=o[65].container_port+"")&&z(i,s)},d(o){o&&k(e)}}}function Ji(l){let e,t,n,s=l[65].host_port+"",i;return{c(){e=_("tr"),t=_("td"),t.textContent="Host Port",n=_("td"),i=S(s),p(t,"class","label svelte-cuxyqu"),p(n,"class","svelte-cuxyqu")},m(o,c){w(o,e,c),a(e,t),a(e,n),a(n,i)},p(o,c){c[0]&16384&&s!==(s=o[65].host_port+"")&&z(i,s)},d(o){o&&k(e)}}}function Vi(l){let e,t,n,s=l[65].snapshot_id+"",i;return{c(){e=_("tr"),t=_("td"),t.textContent="Snapshot ID",n=_("td"),i=S(s),p(t,"class","label svelte-cuxyqu"),p(n,"class","svelte-cuxyqu")},m(o,c){w(o,e,c),a(e,t),a(e,n),a(n,i)},p(o,c){c[0]&16384&&s!==(s=o[65].snapshot_id+"")&&z(i,s)},d(o){o&&k(e)}}}function Yi(l){let e,t,n,s=l[65].region+"",i;return{c(){e=_("tr"),t=_("td"),t.textContent="Region",n=_("td"),i=S(s),p(t,"class","label svelte-cuxyqu"),p(n,"class","svelte-cuxyqu")},m(o,c){w(o,e,c),a(e,t),a(e,n),a(n,i)},p(o,c){c[0]&16384&&s!==(s=o[65].region+"")&&z(i,s)},d(o){o&&k(e)}}}function Ki(l){let e,t,n,s=l[65].size+"",i;return{c(){e=_("tr"),t=_("td"),t.textContent="Size",n=_("td"),i=S(s),p(t,"class","label svelte-cuxyqu"),p(n,"class","svelte-cuxyqu")},m(o,c){w(o,e,c),a(e,t),a(e,n),a(n,i)},p(o,c){c[0]&16384&&s!==(s=o[65].size+"")&&z(i,s)},d(o){o&&k(e)}}}function Qi(l){let e,t,n,s=l[65].server_ips.join(", ")+"",i;return{c(){e=_("tr"),t=_("td"),t.textContent="Servers",n=_("td"),i=S(s),p(t,"class","label svelte-cuxyqu"),p(n,"class","svelte-cuxyqu")},m(o,c){w(o,e,c),a(e,t),a(e,n),a(n,i)},p(o,c){c[0]&16384&&s!==(s=o[65].server_ips.join(", ")+"")&&z(i,s)},d(o){o&&k(e)}}}function Zi(l){let e;return{c(){e=_("tr"),e.innerHTML='<td class="label svelte-cuxyqu">Setup Domain</td><td class="svelte-cuxyqu">Yes</td>'},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function Xi(l){let e,t,n,s=l[65].base_domain+"",i;return{c(){e=_("tr"),t=_("td"),t.textContent="Base Domain",n=_("td"),i=S(s),p(t,"class","label svelte-cuxyqu"),p(n,"class","svelte-cuxyqu")},m(o,c){w(o,e,c),a(e,t),a(e,n),a(n,i)},p(o,c){c[0]&16384&&s!==(s=o[65].base_domain+"")&&z(i,s)},d(o){o&&k(e)}}}function xi(l){let e,t,n,s,i=ve(Object.entries(l[65].env_vars)),o=[];for(let c=0;c<i.length;c+=1)o[c]=er(qi(l,i,c));return{c(){e=_("div"),t=_("div"),t.textContent="Environment Variables",n=b(),s=_("div");for(let c=0;c<o.length;c+=1)o[c].c();p(t,"class","section-title svelte-cuxyqu"),p(s,"class","env-list svelte-cuxyqu"),p(e,"class","env-section svelte-cuxyqu")},m(c,r){w(c,e,r),a(e,t),a(e,n),a(e,s);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(s,null)},p(c,r){if(r[0]&16384){i=ve(Object.entries(c[65].env_vars));let f;for(f=0;f<i.length;f+=1){const u=qi(c,i,f);o[f]?o[f].p(u,r):(o[f]=er(u),o[f].c(),o[f].m(s,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=i.length}},d(c){c&&k(e),Re(o,c)}}}function er(l){let e,t=l[69]+"",n,s,i=(l[70].length>20?l[70].substring(0,20)+"...":l[70])+"",o;return{c(){e=_("div"),n=S(t),s=S("="),o=S(i),p(e,"class","env-item svelte-cuxyqu")},m(c,r){w(c,e,r),a(e,n),a(e,s),a(e,o)},p(c,r){r[0]&16384&&t!==(t=c[69]+"")&&z(n,t),r[0]&16384&&i!==(i=(c[70].length>20?c[70].substring(0,20)+"...":c[70])+"")&&z(o,i)},d(c){c&&k(e)}}}function tr(l){let e,t,n,s,i,o=ve(l[65].tags),c=[];for(let f=0;f<o.length;f+=1)c[f]=lr(Si(l,o,f));const r=f=>L(c[f],1,1,()=>{c[f]=null});return{c(){e=_("div"),t=_("div"),t.textContent="Tags",n=b(),s=_("div");for(let f=0;f<c.length;f+=1)c[f].c();p(t,"class","section-title svelte-cuxyqu"),p(s,"class","tags-list svelte-cuxyqu"),p(e,"class","tags-section svelte-cuxyqu")},m(f,u){w(f,e,u),a(e,t),a(e,n),a(e,s);for(let d=0;d<c.length;d+=1)c[d]&&c[d].m(s,null);i=!0},p(f,u){if(u[0]&16384){o=ve(f[65].tags);let d;for(d=0;d<o.length;d+=1){const v=Si(f,o,d);c[d]?(c[d].p(v,u),P(c[d],1)):(c[d]=lr(v),c[d].c(),P(c[d],1),c[d].m(s,null))}for(ke(),d=o.length;d<c.length;d+=1)r(d);we()}},i(f){if(!i){for(let u=0;u<o.length;u+=1)P(c[u]);i=!0}},o(f){c=c.filter(Boolean);for(let u=0;u<c.length;u+=1)L(c[u]);i=!1},d(f){f&&k(e),Re(c,f)}}}function Nf(l){let e=l[66]+"",t;return{c(){t=S(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&16384&&e!==(e=n[66]+"")&&z(t,e)},d(n){n&&k(t)}}}function lr(l){let e,t;return e=new Be({props:{$$slots:{default:[Nf]},$$scope:{ctx:l}}}),{c(){X(e.$$.fragment)},m(n,s){Y(e,n,s),t=!0},p(n,s){const i={};s[0]&16384|s[2]&1048576&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){K(e,n)}}}function jf(l){let e,t,n=l[14]&&Ii(l);return{c(){n&&n.c(),e=Ae()},m(s,i){n&&n.m(s,i),w(s,e,i),t=!0},p(s,i){s[14]?n?(n.p(s,i),i[0]&16384&&P(n,1)):(n=Ii(s),n.c(),P(n,1),n.m(e.parentNode,e)):n&&(ke(),L(n,1,1,()=>{n=null}),we())},i(s){t||(P(n),t=!0)},o(s){L(n),t=!1},d(s){s&&k(e),n&&n.d(s)}}}function Rf(l){let e;return{c(){e=S("🚀 Redeploy with this config")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function Af(l){let e;return{c(){e=S("Close")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function Of(l){let e,t,n,s,i;return t=new Ne({props:{variant:"primary",$$slots:{default:[Rf]},$$scope:{ctx:l}}}),t.$on("click",l[22]),s=new Ne({props:{variant:"ghost",$$slots:{default:[Af]},$$scope:{ctx:l}}}),s.$on("click",l[42]),{c(){e=_("div"),X(t.$$.fragment),n=b(),X(s.$$.fragment),p(e,"slot","footer")},m(o,c){w(o,e,c),Y(t,e,null),a(e,n),Y(s,e,null),i=!0},p(o,c){const r={};c[2]&1048576&&(r.$$scope={dirty:c,ctx:o}),t.$set(r);const f={};c[2]&1048576&&(f.$$scope={dirty:c,ctx:o}),s.$set(f)},i(o){i||(P(t.$$.fragment,o),P(s.$$.fragment,o),i=!0)},o(o){L(t.$$.fragment,o),L(s.$$.fragment,o),i=!1},d(o){o&&k(e),K(t),K(s)}}}function nr(l){let e,t,n,s=(l[16].service||l[16].name)+"",i,o,c,r=l[16].environment+"",f,u,d=At(l[16].deployed_at)+"",v,h,m,g,C,y,$=l[16].version&&sr(l);g=new Be({props:{variant:Hl(Jt(l[16])),$$slots:{default:[zf]},$$scope:{ctx:l}}});function q(M,E){return M[18]?Uf:M[17].length===0?If:Bf}let D=q(l),T=D(l);return{c(){e=_("div"),t=_("div"),n=_("span"),i=S(s),o=b(),c=_("span"),f=S(r),u=S(" • "),v=S(d),h=b(),$&&$.c(),m=b(),X(g.$$.fragment),C=b(),T.c(),p(n,"class","service-name svelte-cuxyqu"),p(c,"class","meta svelte-cuxyqu"),p(t,"class","logs-header-info svelte-cuxyqu"),p(e,"class","logs-modal-content svelte-cuxyqu")},m(M,E){w(M,e,E),a(e,t),a(t,n),a(n,i),a(t,o),a(t,c),a(c,f),a(c,u),a(c,v),a(t,h),$&&$.m(t,null),a(t,m),Y(g,t,null),a(e,C),T.m(e,null),y=!0},p(M,E){(!y||E[0]&65536)&&s!==(s=(M[16].service||M[16].name)+"")&&z(i,s),(!y||E[0]&65536)&&r!==(r=M[16].environment+"")&&z(f,r),(!y||E[0]&65536)&&d!==(d=At(M[16].deployed_at)+"")&&z(v,d),M[16].version?$?($.p(M,E),E[0]&65536&&P($,1)):($=sr(M),$.c(),P($,1),$.m(t,m)):$&&(ke(),L($,1,1,()=>{$=null}),we());const j={};E[0]&65536&&(j.variant=Hl(Jt(M[16]))),E[0]&65536|E[2]&1048576&&(j.$$scope={dirty:E,ctx:M}),g.$set(j),D===(D=q(M))&&T?T.p(M,E):(T.d(1),T=D(M),T&&(T.c(),T.m(e,null)))},i(M){y||(P($),P(g.$$.fragment,M),y=!0)},o(M){L($),L(g.$$.fragment,M),y=!1},d(M){M&&k(e),$&&$.d(),K(g),T.d()}}}function sr(l){let e,t;return e=new Be({props:{variant:"purple",$$slots:{default:[Ff]},$$scope:{ctx:l}}}),{c(){X(e.$$.fragment)},m(n,s){Y(e,n,s),t=!0},p(n,s){const i={};s[0]&65536|s[2]&1048576&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){K(e,n)}}}function Ff(l){let e,t=l[16].version+"",n;return{c(){e=S("v"),n=S(t)},m(s,i){w(s,e,i),w(s,n,i)},p(s,i){i[0]&65536&&t!==(t=s[16].version+"")&&z(n,t)},d(s){s&&(k(e),k(n))}}}function zf(l){let e=Jt(l[16])+"",t;return{c(){t=S(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&65536&&e!==(e=Jt(n[16])+"")&&z(t,e)},d(n){n&&k(t)}}}function Bf(l){let e,t=ve(l[17]),n=[];for(let s=0;s<t.length;s+=1)n[s]=or(Ci(l,t,s));return{c(){e=_("div");for(let s=0;s<n.length;s+=1)n[s].c();p(e,"class","logs-container svelte-cuxyqu")},m(s,i){w(s,e,i);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null)},p(s,i){if(i[0]&131072){t=ve(s[17]);let o;for(o=0;o<t.length;o+=1){const c=Ci(s,t,o);n[o]?n[o].p(c,i):(n[o]=or(c),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=t.length}},d(s){s&&k(e),Re(n,s)}}}function If(l){let e;return{c(){e=_("div"),e.textContent="No logs available for this deployment",p(e,"class","no-logs svelte-cuxyqu")},m(t,n){w(t,e,n)},p:ie,d(t){t&&k(e)}}}function Uf(l){let e;return{c(){e=_("div"),e.textContent="Loading logs...",p(e,"class","logs-loading svelte-cuxyqu")},m(t,n){w(t,e,n)},p:ie,d(t){t&&k(e)}}}function or(l){let e,t,n=(l[62].timestamp?new Date(l[62].timestamp).toLocaleTimeString():"")+"",s,i,o,c=l[62].message+"",r,f;return{c(){e=_("div"),t=_("span"),s=S(n),i=b(),o=_("span"),r=S(c),f=b(),p(t,"class","log-time svelte-cuxyqu"),p(o,"class","log-message svelte-cuxyqu"),p(e,"class","log-line svelte-cuxyqu")},m(u,d){w(u,e,d),a(e,t),a(t,s),a(e,i),a(e,o),a(o,r),a(e,f)},p(u,d){d[0]&131072&&n!==(n=(u[62].timestamp?new Date(u[62].timestamp).toLocaleTimeString():"")+"")&&z(s,n),d[0]&131072&&c!==(c=u[62].message+"")&&z(r,c)},d(u){u&&k(e)}}}function Hf(l){let e,t,n=l[16]&&nr(l);return{c(){n&&n.c(),e=Ae()},m(s,i){n&&n.m(s,i),w(s,e,i),t=!0},p(s,i){s[16]?n?(n.p(s,i),i[0]&65536&&P(n,1)):(n=nr(s),n.c(),P(n,1),n.m(e.parentNode,e)):n&&(ke(),L(n,1,1,()=>{n=null}),we())},i(s){t||(P(n),t=!0)},o(s){L(n),t=!1},d(s){s&&k(e),n&&n.d(s)}}}function Gf(l){let e;return{c(){e=S("Close")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function Wf(l){let e,t,n;return t=new Ne({props:{variant:"ghost",$$slots:{default:[Gf]},$$scope:{ctx:l}}}),t.$on("click",l[45]),{c(){e=_("div"),X(t.$$.fragment),p(e,"slot","footer")},m(s,i){w(s,e,i),Y(t,e,null),n=!0},p(s,i){const o={};i[2]&1048576&&(o.$$scope={dirty:i,ctx:s}),t.$set(o)},i(s){n||(P(t.$$.fragment,s),n=!0)},o(s){L(t.$$.fragment,s),n=!1},d(s){s&&k(e),K(t)}}}function Jf(l){let e,t,n,s=l[10].length+"",i,o,c,r,f,u,d=ve(l[10]),v=[];for(let g=0;g<d.length;g+=1)v[g]=ir(wi(l,d,g));const h=g=>L(v[g],1,1,()=>{v[g]=null});let m=l[11].length>0&&rr(l);return{c(){e=_("div"),t=_("p"),n=_("strong"),i=S(s),o=S(" server(s) from the original deployment are unavailable:"),c=b(),r=_("div");for(let g=0;g<v.length;g+=1)v[g].c();f=b(),m&&m.c(),p(t,"class","svelte-cuxyqu"),p(r,"class","confirm-server-list unavailable svelte-cuxyqu"),p(e,"class","rollback-confirm-content svelte-cuxyqu")},m(g,C){w(g,e,C),a(e,t),a(t,n),a(n,i),a(t,o),a(e,c),a(e,r);for(let y=0;y<v.length;y+=1)v[y]&&v[y].m(r,null);a(e,f),m&&m.m(e,null),u=!0},p(g,C){if((!u||C[0]&1024)&&s!==(s=g[10].length+"")&&z(i,s),C[0]&1024){d=ve(g[10]);let y;for(y=0;y<d.length;y+=1){const $=wi(g,d,y);v[y]?(v[y].p($,C),P(v[y],1)):(v[y]=ir($),v[y].c(),P(v[y],1),v[y].m(r,null))}for(ke(),y=d.length;y<v.length;y+=1)h(y);we()}g[11].length>0?m?(m.p(g,C),C[0]&2048&&P(m,1)):(m=rr(g),m.c(),P(m,1),m.m(e,null)):m&&(ke(),L(m,1,1,()=>{m=null}),we())},i(g){if(!u){for(let C=0;C<d.length;C+=1)P(v[C]);P(m),u=!0}},o(g){v=v.filter(Boolean);for(let C=0;C<v.length;C+=1)L(v[C]);L(m),u=!1},d(g){g&&k(e),Re(v,g),m&&m.d()}}}function Vf(l){let e,t,n,s,i=l[11].length+"",o,c,r,f=l[11].length+l[9].length+"",u,d,v,h,m,g,C=ve(l[9]),y=[];for(let $=0;$<C.length;$+=1)y[$]=cr(yi(l,C,$));return{c(){e=_("div"),t=_("p"),n=S("Rolling back will restore to "),s=_("strong"),o=S(i),c=S(` servers.
        Service currently runs on `),r=_("strong"),u=S(f),d=S(" servers."),v=b(),h=_("p"),h.textContent="Stop containers on the following servers?",m=b(),g=_("div");for(let $=0;$<y.length;$+=1)y[$].c();p(t,"class","svelte-cuxyqu"),p(h,"class","svelte-cuxyqu"),p(g,"class","confirm-server-list svelte-cuxyqu"),p(e,"class","rollback-confirm-content svelte-cuxyqu")},m($,q){w($,e,q),a(e,t),a(t,n),a(t,s),a(s,o),a(t,c),a(t,r),a(r,u),a(t,d),a(e,v),a(e,h),a(e,m),a(e,g);for(let D=0;D<y.length;D+=1)y[D]&&y[D].m(g,null)},p($,q){if(q[0]&2048&&i!==(i=$[11].length+"")&&z(o,i),q[0]&2560&&f!==(f=$[11].length+$[9].length+"")&&z(u,f),q[0]&512){C=ve($[9]);let D;for(D=0;D<C.length;D+=1){const T=yi($,C,D);y[D]?y[D].p(T,q):(y[D]=cr(T),y[D].c(),y[D].m(g,null))}for(;D<y.length;D+=1)y[D].d(1);y.length=C.length}},i:ie,o:ie,d($){$&&k(e),Re(y,$)}}}function Yf(l){let e;return{c(){e=S("offline")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function ir(l){let e,t,n=(l[55].name||l[55].ip)+"",s,i,o,c=l[55].ip+"",r,f,u,d,v;return u=new Be({props:{variant:"error",$$slots:{default:[Yf]},$$scope:{ctx:l}}}),{c(){e=_("div"),t=_("span"),s=S(n),i=b(),o=_("span"),r=S(c),f=b(),X(u.$$.fragment),d=b(),p(t,"class","server-name svelte-cuxyqu"),p(o,"class","server-ip svelte-cuxyqu"),p(e,"class","confirm-server-item svelte-cuxyqu")},m(h,m){w(h,e,m),a(e,t),a(t,s),a(e,i),a(e,o),a(o,r),a(e,f),Y(u,e,null),a(e,d),v=!0},p(h,m){(!v||m[0]&1024)&&n!==(n=(h[55].name||h[55].ip)+"")&&z(s,n),(!v||m[0]&1024)&&c!==(c=h[55].ip+"")&&z(r,c);const g={};m[2]&1048576&&(g.$$scope={dirty:m,ctx:h}),u.$set(g)},i(h){v||(P(u.$$.fragment,h),v=!0)},o(h){L(u.$$.fragment,h),v=!1},d(h){h&&k(e),K(u)}}}function rr(l){let e,t,n=l[11].length+"",s,i,o,c,r,f=ve(l[11]),u=[];for(let v=0;v<f.length;v+=1)u[v]=ar(ki(l,f,v));const d=v=>L(u[v],1,1,()=>{u[v]=null});return{c(){e=_("p"),t=S("Available servers ("),s=S(n),i=S("):"),o=b(),c=_("div");for(let v=0;v<u.length;v+=1)u[v].c();p(e,"class","svelte-cuxyqu"),p(c,"class","confirm-server-list available svelte-cuxyqu")},m(v,h){w(v,e,h),a(e,t),a(e,s),a(e,i),w(v,o,h),w(v,c,h);for(let m=0;m<u.length;m+=1)u[m]&&u[m].m(c,null);r=!0},p(v,h){if((!r||h[0]&2048)&&n!==(n=v[11].length+"")&&z(s,n),h[0]&2048){f=ve(v[11]);let m;for(m=0;m<f.length;m+=1){const g=ki(v,f,m);u[m]?(u[m].p(g,h),P(u[m],1)):(u[m]=ar(g),u[m].c(),P(u[m],1),u[m].m(c,null))}for(ke(),m=f.length;m<u.length;m+=1)d(m);we()}},i(v){if(!r){for(let h=0;h<f.length;h+=1)P(u[h]);r=!0}},o(v){u=u.filter(Boolean);for(let h=0;h<u.length;h+=1)L(u[h]);r=!1},d(v){v&&(k(e),k(o),k(c)),Re(u,v)}}}function Kf(l){let e;return{c(){e=S("online")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function ar(l){let e,t,n=(l[55].name||l[55].ip)+"",s,i,o,c=l[55].ip+"",r,f,u,d,v;return u=new Be({props:{variant:"success",$$slots:{default:[Kf]},$$scope:{ctx:l}}}),{c(){e=_("div"),t=_("span"),s=S(n),i=b(),o=_("span"),r=S(c),f=b(),X(u.$$.fragment),d=b(),p(t,"class","server-name svelte-cuxyqu"),p(o,"class","server-ip svelte-cuxyqu"),p(e,"class","confirm-server-item svelte-cuxyqu")},m(h,m){w(h,e,m),a(e,t),a(t,s),a(e,i),a(e,o),a(o,r),a(e,f),Y(u,e,null),a(e,d),v=!0},p(h,m){(!v||m[0]&2048)&&n!==(n=(h[55].name||h[55].ip)+"")&&z(s,n),(!v||m[0]&2048)&&c!==(c=h[55].ip+"")&&z(r,c);const g={};m[2]&1048576&&(g.$$scope={dirty:m,ctx:h}),u.$set(g)},i(h){v||(P(u.$$.fragment,h),v=!0)},o(h){L(u.$$.fragment,h),v=!1},d(h){h&&k(e),K(u)}}}function cr(l){let e,t,n=(l[55].name||l[55].ip)+"",s,i,o,c=l[55].ip+"",r,f;return{c(){e=_("div"),t=_("span"),s=S(n),i=b(),o=_("span"),r=S(c),f=b(),p(t,"class","server-name svelte-cuxyqu"),p(o,"class","server-ip svelte-cuxyqu"),p(e,"class","confirm-server-item svelte-cuxyqu")},m(u,d){w(u,e,d),a(e,t),a(t,s),a(e,i),a(e,o),a(o,r),a(e,f)},p(u,d){d[0]&512&&n!==(n=(u[55].name||u[55].ip)+"")&&z(s,n),d[0]&512&&c!==(c=u[55].ip+"")&&z(r,c)},d(u){u&&k(e)}}}function Qf(l){let e,t,n,s;const i=[Vf,Jf],o=[];function c(r,f){return r[8]==="cleanup"?0:r[8]==="missing"?1:-1}return~(e=c(l))&&(t=o[e]=i[e](l)),{c(){t&&t.c(),n=Ae()},m(r,f){~e&&o[e].m(r,f),w(r,n,f),s=!0},p(r,f){let u=e;e=c(r),e===u?~e&&o[e].p(r,f):(t&&(ke(),L(o[u],1,1,()=>{o[u]=null}),we()),~e?(t=o[e],t?t.p(r,f):(t=o[e]=i[e](r),t.c()),P(t,1),t.m(n.parentNode,n)):t=null)},i(r){s||(P(t),s=!0)},o(r){L(t),s=!1},d(r){r&&k(n),~e&&o[e].d(r)}}}function Zf(l){let e,t;return e=new Ne({props:{variant:"primary",$$slots:{default:[xf]},$$scope:{ctx:l}}}),e.$on("click",l[27]),{c(){X(e.$$.fragment)},m(n,s){Y(e,n,s),t=!0},p(n,s){const i={};s[2]&1048576&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){K(e,n)}}}function Xf(l){let e,t;return e=new Ne({props:{variant:"primary",$$slots:{default:[ep]},$$scope:{ctx:l}}}),e.$on("click",l[26]),{c(){X(e.$$.fragment)},m(n,s){Y(e,n,s),t=!0},p(n,s){const i={};s[2]&1048576&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){K(e,n)}}}function xf(l){let e;return{c(){e=S("Proceed with available only")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function ep(l){let e;return{c(){e=S("Proceed")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function tp(l){let e;return{c(){e=S("Cancel")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function lp(l){let e,t,n,s,i,o;const c=[Xf,Zf],r=[];function f(u,d){return u[8]==="cleanup"?0:u[8]==="missing"&&u[11].length>0?1:-1}return~(t=f(l))&&(n=r[t]=c[t](l)),i=new Ne({props:{variant:"ghost",$$slots:{default:[tp]},$$scope:{ctx:l}}}),i.$on("click",l[48]),{c(){e=_("div"),n&&n.c(),s=b(),X(i.$$.fragment),p(e,"slot","footer")},m(u,d){w(u,e,d),~t&&r[t].m(e,null),a(e,s),Y(i,e,null),o=!0},p(u,d){let v=t;t=f(u),t===v?~t&&r[t].p(u,d):(n&&(ke(),L(r[v],1,1,()=>{r[v]=null}),we()),~t?(n=r[t],n?n.p(u,d):(n=r[t]=c[t](u),n.c()),P(n,1),n.m(e,s)):n=null);const h={};d[2]&1048576&&(h.$$scope={dirty:d,ctx:u}),i.$set(h)},i(u){o||(P(n),P(i.$$.fragment,u),o=!0)},o(u){L(n),L(i.$$.fragment,u),o=!1},d(u){u&&k(e),~t&&r[t].d(),K(i)}}}function np(l){let e,t,n,s,i,o,c,r,f,u,d,v,h,m,g,C,y,$,q,D,T,M,E=l[20]&&Ei(l);c=new Ne({props:{variant:"ghost",$$slots:{default:[uf]},$$scope:{ctx:l}}}),c.$on("click",l[33]),f=new ze({props:{padding:!1,$$slots:{default:[bf]},$$scope:{ctx:l}}});function j(B){l[40](B)}let R={title:"⏪ Rollback",width:"600px",$$slots:{footer:[Ef],default:[Sf]},$$scope:{ctx:l}};l[1]!==void 0&&(R.open=l[1]),d=new yl({props:R}),_t.push(()=>wl(d,"open",j)),d.$on("close",l[41]);function O(B){l[43](B)}let F={title:"⚙️ Deployment Config",width:"500px",$$slots:{footer:[Of],default:[jf]},$$scope:{ctx:l}};l[13]!==void 0&&(F.open=l[13]),m=new yl({props:F}),_t.push(()=>wl(m,"open",O)),m.$on("close",l[44]);function I(B){l[46](B)}let W={title:"📋 Deployment Logs",width:"700px",$$slots:{footer:[Wf],default:[Hf]},$$scope:{ctx:l}};l[15]!==void 0&&(W.open=l[15]),y=new yl({props:W}),_t.push(()=>wl(y,"open",I)),y.$on("close",l[47]);function V(B){l[49](B)}let H={title:l[8]==="cleanup"?"⚠️ Stop Orphan Containers":"⚠️ Servers Unavailable",width:"500px",$$slots:{footer:[lp],default:[Qf]},$$scope:{ctx:l}};return l[7]!==void 0&&(H.open=l[7]),D=new yl({props:H}),_t.push(()=>wl(D,"open",V)),D.$on("close",l[50]),{c(){e=_("div"),t=_("div"),n=_("h1"),n.textContent="Deployment History",s=b(),i=_("div"),E&&E.c(),o=b(),X(c.$$.fragment),r=b(),X(f.$$.fragment),u=b(),X(d.$$.fragment),h=b(),X(m.$$.fragment),C=b(),X(y.$$.fragment),q=b(),X(D.$$.fragment),p(n,"class","svelte-cuxyqu"),p(i,"class","header-actions svelte-cuxyqu"),p(t,"class","page-header svelte-cuxyqu"),p(e,"class","deployments-page svelte-cuxyqu")},m(B,N){w(B,e,N),a(e,t),a(t,n),a(t,s),a(t,i),E&&E.m(i,null),a(i,o),Y(c,i,null),a(e,r),Y(f,e,null),w(B,u,N),Y(d,B,N),w(B,h,N),Y(m,B,N),w(B,C,N),Y(y,B,N),w(B,q,N),Y(D,B,N),M=!0},p(B,N){B[20]?E?E.p(B,N):(E=Ei(B),E.c(),E.m(i,o)):E&&(E.d(1),E=null);const G={};N[2]&1048576&&(G.$$scope={dirty:N,ctx:B}),c.$set(G);const A={};N[0]&524289|N[2]&1048576&&(A.$$scope={dirty:N,ctx:B}),f.$set(A);const U={};N[0]&126|N[2]&1048576&&(U.$$scope={dirty:N,ctx:B}),!v&&N[0]&2&&(v=!0,U.open=B[1],kl(()=>v=!1)),d.$set(U);const x={};N[0]&24576|N[2]&1048576&&(x.$$scope={dirty:N,ctx:B}),!g&&N[0]&8192&&(g=!0,x.open=B[13],kl(()=>g=!1)),m.$set(x);const Q={};N[0]&491520|N[2]&1048576&&(Q.$$scope={dirty:N,ctx:B}),!$&&N[0]&32768&&($=!0,Q.open=B[15],kl(()=>$=!1)),y.$set(Q);const ne={};N[0]&256&&(ne.title=B[8]==="cleanup"?"⚠️ Stop Orphan Containers":"⚠️ Servers Unavailable"),N[0]&8064|N[2]&1048576&&(ne.$$scope={dirty:N,ctx:B}),!T&&N[0]&128&&(T=!0,ne.open=B[7],kl(()=>T=!1)),D.$set(ne)},i(B){M||(P(c.$$.fragment,B),P(f.$$.fragment,B),P(d.$$.fragment,B),P(m.$$.fragment,B),P(y.$$.fragment,B),P(D.$$.fragment,B),M=!0)},o(B){L(c.$$.fragment,B),L(f.$$.fragment,B),L(d.$$.fragment,B),L(m.$$.fragment,B),L(y.$$.fragment,B),L(D.$$.fragment,B),M=!1},d(B){B&&(k(e),k(u),k(h),k(C),k(q)),E&&E.d(),K(c),K(f),K(d,B),K(m,B),K(y,B),K(D,B)}}}function ur(l){return l?l.toLocaleTimeString():""}function sp(l,e){return l?l.filter(t=>!(e.project&&t.project!==e.project||e.env&&t.environment!==e.env)):[]}function op(l){const e=[...l],t=new Set;for(const n of e){const s=`${n.project}/${n.service||n.name}/${n.environment}`;n.status==="success"&&n.can_rollback&&!t.has(s)?(n.is_current_active=!0,t.add(s)):n.is_current_active=!1}return e}function At(l){return l?new Date(l).toLocaleString():"-"}function Hl(l){switch(l){case"success":case"active":return"success";case"failed":case"error":return"danger";case"pending":case"deploying":return"warning";case"superseded":return"secondary";default:return"info"}}function Jt(l){const e=l.status||"unknown";return e==="rolled_back"?l.is_rollback?"failed":"superseded":e}function ip(l,e,t){let n,s,i,o;Xe(l,pl,de=>t(31,i=de)),Xe(l,zl,de=>t(32,o=de));let c=!1,r=!1,f=null,u=[],d=null,v=!1,h=[],m=!1,g="",C=[],y=[],$=[],q=null,D=!1,T=null,M=!1,E=null,j=[],R=!1,O=[],F=[];function I(de){t(14,T=de),t(13,D=!0)}function W(){if(!(T!=null&&T.config_snapshot))return;const de=new CustomEvent("redeploy",{detail:{deployment:T,config:T.config_snapshot},bubbles:!0});document.dispatchEvent(de),t(13,D=!1),ge.info("Config loaded - switch to Deploy tab")}async function V(de){t(16,E=de),t(15,M=!0),t(18,R=!0),t(17,j=[]);try{const Fe=await Oe("GET",`/infra/deployments/history/${de.id}/logs`);t(17,j=Fe.logs||[])}catch(Fe){ge.error("Failed to load logs: "+(Fe.message||Fe))}finally{t(18,R=!1)}}async function H(de){t(2,f=de);try{const Fe=new URLSearchParams({project:de.project||"",environment:de.environment||"",service_name:de.service_name||de.service||""}),Ke=await Oe("GET",`/infra/deployments/rollback/preview?${Fe}`);t(3,u=(Ke.recent_deployments||[]).filter(Je=>Je.id!==de.id&&Je.status==="success"))}catch{t(3,u=[])}t(1,r=!0)}async function B(){if(!f||!d){ge.error("Select a deployment to rollback to");return}const de=u.find(it=>it.id===d);if(!de){ge.error("Target deployment not found");return}const Fe=f.project||"",Ke=f.environment||"",Je=f.service_name||f.service||"";try{const it=new URLSearchParams({project:Fe,environment:Ke,service_name:Je}),Ve=await Oe("GET",`/infra/services/state?${it}`),Ot=de.server_ips||[],Ft=(Ve.server_ips||[]).filter(nt=>!Ot.includes(nt)),ml=(Ve.servers||[]).filter(nt=>Ft.includes(nt.ip));if(Ot.length>0){const nt=await Oe("POST",`/infra/services/check-servers?do_token=${_l()}&server_ips=${Ot.join(",")}`,null);if(t(10,y=nt.unavailable||[]),t(11,$=nt.available||[]),y.length>0){t(8,g="missing"),t(12,q=de),t(7,m=!0);return}}if(ml.length>0){t(9,C=ml),t(8,g="cleanup"),t(12,q=de),t(7,m=!0);return}}catch(it){console.log("Rollback pre-check:",it.message||it)}await x()}async function N(){if(t(7,m=!1),g==="cleanup"&&C.length>0){const de=`${f.project}_${f.service||f.service_name}_${f.environment}`.replace(/[^a-zA-Z0-9_]/g,"_"),Fe=C.map(Ke=>Ke.ip);try{const Ke=await Oe("POST",`/infra/services/cleanup?do_token=${_l()}`,{server_ips:Fe,container_name:de});t(6,h=[...h,{message:`Cleanup: ${Ke.cleaned} stopped`,type:"info",time:new Date}])}catch(Ke){t(6,h=[...h,{message:`Cleanup warning: ${Ke.message}`,type:"warning",time:new Date}])}}t(9,C=[]),t(10,y=[]),t(12,q=null),await x()}let G=!1,A=[];async function U(){t(7,m=!1),G=!0,A=$.map(de=>de.ip),t(10,y=[]),t(12,q=null),await x()}async function x(){t(6,h=[]),t(5,v=!0);const de=(Fe,Ke="info")=>{t(6,h=[...h,{message:Fe,type:Ke,time:new Date}])};try{const Fe=new URLSearchParams({project:f.project||"",environment:f.environment||"",service_name:f.service_name||f.service||""}).toString();de("Starting rollback...");let Ke=!1,Je="";const it={deployment_id:d};if(G&&A.length>0&&(it.server_ips=A,de(`Partial rollback to ${A.length} available server(s)`)),await Ca("POST",`/infra/deployments/rollback?${Fe}`,it,Ve=>{Ve.type==="progress"||Ve.type==="start"?de(Ve.message,"info"):Ve.type==="server_complete"?de(`✅ ${Ve.ip}: Success`,"success"):Ve.type==="error"?(de(`❌ ${Ve.message||Ve.error}`,"error"),Je=Ve.message||Ve.error||"Unknown error"):Ve.type==="complete"&&(Ke=Ve.success,Ke?de(`✅ ${Ve.message}`,"success"):(Je=Ve.message||"Rollback failed",de(`❌ ${Je}`,"error")))}),Ke)ge.success("Rollback completed successfully"),await Q();else throw new Error(Je||"Rollback failed")}catch(Fe){de(`❌ Error: ${Fe.message||String(Fe)}`,"error"),ge.error("Rollback failed: "+(Fe.message||String(Fe)))}finally{t(5,v=!1),G=!1,A=[]}}function Q(){zl.refresh()}function ne(){zl.refresh()}const te=[[]],oe=()=>zl.refresh(),pe=de=>I(de),ae=de=>V(de),Ee=de=>H(de),me=()=>{t(1,r=!1),t(6,h=[])};function re(){d=this.__value,t(4,d)}function _e(de){r=de,t(1,r)}const Ce=()=>t(1,r=!1),ce=()=>t(13,D=!1);function ue(de){D=de,t(13,D)}const be=()=>t(13,D=!1),he=()=>t(15,M=!1);function He(de){M=de,t(15,M)}const De=()=>t(15,M=!1),lt=()=>{t(7,m=!1),t(12,q=null)};function ot(de){m=de,t(7,m)}const Pe=()=>{t(7,m=!1),t(12,q=null)};return l.$$.update=()=>{l.$$.dirty[1]&2&&t(30,n=o||{loading:!1}),l.$$.dirty[0]&1073741824&&t(0,c=n.loading),l.$$.dirty[0]&1073741824&&t(20,s=n.lastFetched),l.$$.dirty[0]&1073741824&&n.data&&t(29,O=op(n.data)),l.$$.dirty[0]&536870912|l.$$.dirty[1]&1&&t(19,F=sp(O,i))},[c,r,f,u,d,v,h,m,g,C,y,$,q,D,T,M,E,j,R,F,s,I,W,V,H,B,N,U,ne,O,n,i,o,oe,pe,ae,Ee,me,re,te,_e,Ce,ce,ue,be,he,He,De,lt,ot,Pe]}class rp extends tt{constructor(e){super(),et(this,e,ip,np,xe,{refresh:28},null,[-1,-1,-1])}get refresh(){return this.$$.ctx[28]}}function ap(l){let e;return{c(){e=S("📋 Copy")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function cp(l){let e;return{c(){e=S("⬇ Download")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function fr(l){let e;return{c(){e=_("div"),e.textContent="Loading logs...",p(e,"class","loading-overlay svelte-vo5055")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function up(l){let e;return{c(){e=_("span"),e.textContent="Select a server and container from the scope bar above to view logs.",p(e,"class","placeholder svelte-vo5055")},m(t,n){w(t,e,n)},p:ie,d(t){t&&k(e)}}}function fp(l){let e;return{c(){e=S(l[0])},m(t,n){w(t,e,n)},p(t,n){n&1&&z(e,t[0])},d(t){t&&k(e)}}}function pp(l){let e,t,n,s,i,o,c,r,f,u,d,v,h,m,g,C,y,$,q,D,T,M,E;m=new Ne({props:{variant:"ghost",size:"sm",$$slots:{default:[ap]},$$scope:{ctx:l}}}),m.$on("click",l[6]),C=new Ne({props:{variant:"ghost",size:"sm",$$slots:{default:[cp]},$$scope:{ctx:l}}}),C.$on("click",l[7]);let j=l[1]&&fr();function R(I,W){return I[0]?fp:up}let O=R(l),F=O(l);return{c(){e=_("div"),t=_("div"),n=_("span"),n.textContent="🔍",s=b(),i=_("input"),o=b(),c=_("select"),r=_("option"),r.textContent="All Levels",f=_("option"),f.textContent="ERROR",u=_("option"),u.textContent="WARN",d=_("option"),d.textContent="INFO",v=_("option"),v.textContent="DEBUG",h=b(),X(m.$$.fragment),g=b(),X(C.$$.fragment),y=b(),$=_("div"),j&&j.c(),q=b(),D=_("pre"),F.c(),p(n,"class","search-icon svelte-vo5055"),p(i,"type","text"),p(i,"placeholder","Search logs..."),p(i,"class","svelte-vo5055"),p(t,"class","search-box svelte-vo5055"),r.__value="",ee(r,r.__value),f.__value="ERROR",ee(f,f.__value),u.__value="WARN",ee(u,u.__value),d.__value="INFO",ee(d,d.__value),v.__value="DEBUG",ee(v,v.__value),p(c,"class","svelte-vo5055"),l[3]===void 0&&Qe(()=>l[11].call(c)),p(e,"class","toolbar svelte-vo5055"),p(D,"class","log-content svelte-vo5055"),p($,"class","log-viewer svelte-vo5055")},m(I,W){w(I,e,W),a(e,t),a(t,n),a(t,s),a(t,i),ee(i,l[2]),a(e,o),a(e,c),a(c,r),a(c,f),a(c,u),a(c,d),a(c,v),je(c,l[3],!0),a(e,h),Y(m,e,null),a(e,g),Y(C,e,null),w(I,y,W),w(I,$,W),j&&j.m($,null),a($,q),a($,D),F.m(D,null),T=!0,M||(E=[le(i,"input",l[10]),le(i,"input",l[5]),le(c,"change",l[11]),le(c,"change",l[5])],M=!0)},p(I,W){W&4&&i.value!==I[2]&&ee(i,I[2]),W&8&&je(c,I[3]);const V={};W&131072&&(V.$$scope={dirty:W,ctx:I}),m.$set(V);const H={};W&131072&&(H.$$scope={dirty:W,ctx:I}),C.$set(H),I[1]?j||(j=fr(),j.c(),j.m($,q)):j&&(j.d(1),j=null),O===(O=R(I))&&F?F.p(I,W):(F.d(1),F=O(I),F&&(F.c(),F.m(D,null)))},i(I){T||(P(m.$$.fragment,I),P(C.$$.fragment,I),T=!0)},o(I){L(m.$$.fragment,I),L(C.$$.fragment,I),T=!1},d(I){I&&(k(e),k(y),k($)),K(m),K(C),j&&j.d(),F.d(),M=!1,We(E)}}}function _p(l){let e,t,n,s,i,o,c,r;return c=new ze({props:{padding:!1,$$slots:{default:[pp]},$$scope:{ctx:l}}}),{c(){e=_("div"),t=_("h2"),n=S("Logs · "),s=_("span"),i=S(l[4]),o=b(),X(c.$$.fragment),p(s,"class","context svelte-vo5055"),p(t,"class","page-title svelte-vo5055"),p(e,"class","logs-page svelte-vo5055")},m(f,u){w(f,e,u),a(e,t),a(t,n),a(t,s),a(s,i),a(e,o),Y(c,e,null),r=!0},p(f,[u]){(!r||u&16)&&z(i,f[4]);const d={};u&131087&&(d.$$scope={dirty:u,ctx:f}),c.$set(d)},i(f){r||(P(c.$$.fragment,f),r=!0)},o(f){L(c.$$.fragment,f),r=!1},d(f){f&&k(e),K(c)}}}function dp(l,e,t){let n,s;Xe(l,pl,D=>t(9,s=D));let i="",o="",c=!1,r="",f="",u=null;dl(()=>{s.server&&d()}),ls(()=>{m()});async function d(){if(!s.server){i="Select a server and container from the scope bar above to view logs.",t(0,o=i);return}t(1,c=!0);try{const D=s.server,T=s.container;if(!D){i="Select a server to view logs",t(0,o=i);return}if(!T||T==="all"){i=`Select a specific container from the scope bar above to view logs.

Tip: Use the Server dropdown to pick a server, then select a container.`,t(0,o=i),t(1,c=!1);return}const M=new URLSearchParams;M.set("lines","500");const E=`/infra/agent/${D}/containers/${T}/logs?${M}`,j=await Oe("GET",E);j.data&&j.data.logs!==void 0?i=j.data.logs:j.logs!==void 0?i=j.logs:typeof j=="string"?i=j:i=JSON.stringify(j,null,2),v()}catch(D){i=`Error loading logs: ${D.message}`,t(0,o=i),ge.error("Failed to load logs: "+D.message)}finally{t(1,c=!1)}}function v(){let D=i;r&&(D=D.split(`
`).filter(M=>M.toLowerCase().includes(r.toLowerCase())).join(`
`)),f&&(D=D.split(`
`).filter(M=>M.toUpperCase().includes(f)).join(`
`)),t(0,o=D)}function h(){u||(u=setInterval(d,5e3),ge.info("Tailing logs..."))}function m(){u&&(clearInterval(u),u=null)}function g(){navigator.clipboard.writeText(o),ge.success("Logs copied to clipboard")}function C(){const D=new Blob([o],{type:"text/plain"}),T=URL.createObjectURL(D),M=document.createElement("a");M.href=T,M.download=`logs-${s.server||"unknown"}-${new Date().toISOString()}.txt`,M.click(),URL.revokeObjectURL(T)}function y(){d()}function $(){r=this.value,t(2,r)}function q(){f=ct(this),t(3,f)}return l.$$.update=()=>{l.$$.dirty&512&&t(4,n=s.server?s.container?`${s.server} / ${s.container}`:s.server:"Select a server"),l.$$.dirty&512&&(s.server||s.container||s.range)&&d(),l.$$.dirty&512&&(s.tail?h():m())},v(),[o,c,r,f,n,v,g,C,y,s,$,q]}class vp extends tt{constructor(e){super(),et(this,e,dp,_p,xe,{refresh:8})}get refresh(){return this.$$.ctx[8]}}function pr(l,e,t){const n=l.slice();return n[23]=e[t],n}function _r(l,e,t){const n=l.slice();n[18]=e[t];const s=n[18].status==="online";n[19]=s;const i=n[18].containers>0?Math.round(n[18].healthy/n[18].containers*100):100;return n[20]=i,n}function mp(l){var D;let e,t,n,s,i=(((D=l[11])==null?void 0:D.name)||l[2].server)+"",o,c,r,f,u,d,v,h,m,g,C=l[4]&&dr(l);u=new Ne({props:{variant:"ghost",size:"sm",$$slots:{default:[gp]},$$scope:{ctx:l}}}),u.$on("click",l[0]);const y=[$p,bp],$=[];function q(T,M){return T[5]?0:1}return v=q(l),h=$[v]=y[v](l),{c(){e=_("div"),t=_("h2"),n=S("Metrics · "),s=_("span"),o=S(i),c=b(),r=_("div"),C&&C.c(),f=b(),X(u.$$.fragment),d=b(),h.c(),m=Ae(),p(s,"class","server-name svelte-9h3o9i"),p(t,"class","page-title svelte-9h3o9i"),p(r,"class","header-actions svelte-9h3o9i"),p(e,"class","page-header svelte-9h3o9i")},m(T,M){w(T,e,M),a(e,t),a(t,n),a(t,s),a(s,o),a(e,c),a(e,r),C&&C.m(r,null),a(r,f),Y(u,r,null),w(T,d,M),$[v].m(T,M),w(T,m,M),g=!0},p(T,M){var R;(!g||M&2052)&&i!==(i=(((R=T[11])==null?void 0:R.name)||T[2].server)+"")&&z(o,i),T[4]?C?C.p(T,M):(C=dr(T),C.c(),C.m(r,f)):C&&(C.d(1),C=null);const E={};M&67108864&&(E.$$scope={dirty:M,ctx:T}),u.$set(E);let j=v;v=q(T),v===j?$[v].p(T,M):(ke(),L($[j],1,1,()=>{$[j]=null}),we(),h=$[v],h?h.p(T,M):(h=$[v]=y[v](T),h.c()),P(h,1),h.m(m.parentNode,m))},i(T){g||(P(u.$$.fragment,T),P(h),g=!0)},o(T){L(u.$$.fragment,T),L(h),g=!1},d(T){T&&(k(e),k(d),k(m)),C&&C.d(),K(u),$[v].d(T)}}}function hp(l){let e,t,n,s,i,o,c,r,f,u,d,v=l[4]&&mr(l);o=new Ne({props:{variant:"ghost",size:"sm",$$slots:{default:[Ep]},$$scope:{ctx:l}}}),o.$on("click",l[0]);const h=[Lp,Mp],m=[];function g(C,y){return C[5]?0:1}return r=g(l),f=m[r]=h[r](l),{c(){e=_("div"),t=_("h2"),t.textContent="Metrics · Fleet",n=b(),s=_("div"),v&&v.c(),i=b(),X(o.$$.fragment),c=b(),f.c(),u=Ae(),p(t,"class","page-title svelte-9h3o9i"),p(s,"class","header-actions svelte-9h3o9i"),p(e,"class","page-header svelte-9h3o9i")},m(C,y){w(C,e,y),a(e,t),a(e,n),a(e,s),v&&v.m(s,null),a(s,i),Y(o,s,null),w(C,c,y),m[r].m(C,y),w(C,u,y),d=!0},p(C,y){C[4]?v?v.p(C,y):(v=mr(C),v.c(),v.m(s,i)):v&&(v.d(1),v=null);const $={};y&67108864&&($.$$scope={dirty:y,ctx:C}),o.$set($);let q=r;r=g(C),r===q?m[r].p(C,y):(ke(),L(m[q],1,1,()=>{m[q]=null}),we(),f=m[r],f?f.p(C,y):(f=m[r]=h[r](C),f.c()),P(f,1),f.m(u.parentNode,u))},i(C){d||(P(o.$$.fragment,C),P(f),d=!0)},o(C){L(o.$$.fragment,C),L(f),d=!1},d(C){C&&(k(e),k(c),k(u)),v&&v.d(),K(o),m[r].d(C)}}}function dr(l){let e,t,n=Fn(l[4])+"",s;return{c(){e=_("span"),t=S("Updated "),s=S(n),p(e,"class","last-updated svelte-9h3o9i")},m(i,o){w(i,e,o),a(e,t),a(e,s)},p(i,o){o&16&&n!==(n=Fn(i[4])+"")&&z(s,n)},d(i){i&&k(e)}}}function gp(l){let e;return{c(){e=S("↻ Refresh")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function bp(l){let e,t,n,s,i,o,c,r,f,u,d;return t=new ze({props:{$$slots:{default:[kp]},$$scope:{ctx:l}}}),s=new ze({props:{$$slots:{default:[wp]},$$scope:{ctx:l}}}),o=new ze({props:{$$slots:{default:[yp]},$$scope:{ctx:l}}}),r=new ze({props:{$$slots:{default:[Cp]},$$scope:{ctx:l}}}),u=new ze({props:{title:"🐳 Containers",$$slots:{default:[Pp]},$$scope:{ctx:l}}}),{c(){e=_("div"),X(t.$$.fragment),n=b(),X(s.$$.fragment),i=b(),X(o.$$.fragment),c=b(),X(r.$$.fragment),f=b(),X(u.$$.fragment),p(e,"class","metrics-grid svelte-9h3o9i")},m(v,h){w(v,e,h),Y(t,e,null),a(e,n),Y(s,e,null),a(e,i),Y(o,e,null),a(e,c),Y(r,e,null),w(v,f,h),Y(u,v,h),d=!0},p(v,h){const m={};h&67109120&&(m.$$scope={dirty:h,ctx:v}),t.$set(m);const g={};h&67109120&&(g.$$scope={dirty:h,ctx:v}),s.$set(g);const C={};h&67109120&&(C.$$scope={dirty:h,ctx:v}),o.$set(C);const y={};h&67109120&&(y.$$scope={dirty:h,ctx:v}),r.$set(y);const $={};h&67109e3&&($.$$scope={dirty:h,ctx:v}),u.$set($)},i(v){d||(P(t.$$.fragment,v),P(s.$$.fragment,v),P(o.$$.fragment,v),P(r.$$.fragment,v),P(u.$$.fragment,v),d=!0)},o(v){L(t.$$.fragment,v),L(s.$$.fragment,v),L(o.$$.fragment,v),L(r.$$.fragment,v),L(u.$$.fragment,v),d=!1},d(v){v&&(k(e),k(f)),K(t),K(s),K(o),K(r),K(u,v)}}}function $p(l){let e,t,n,s;return{c(){e=_("div"),t=_("p"),n=S("Failed to load: "),s=S(l[5]),p(e,"class","empty-state svelte-9h3o9i")},m(i,o){w(i,e,o),a(e,t),a(t,n),a(t,s)},p(i,o){o&32&&z(s,i[5])},i:ie,o:ie,d(i){i&&k(e)}}}function kp(l){var r;let e,t,n,s,i=(((r=l[8])==null?void 0:r.cpu)||0)+"",o,c;return{c(){var f;e=_("div"),t=_("div"),t.textContent="CPU",n=b(),s=_("div"),o=S(i),c=S("%"),p(t,"class","metric-label svelte-9h3o9i"),p(s,"class","metric-value svelte-9h3o9i"),Ue(s,"color",Rt(((f=l[8])==null?void 0:f.cpu)||0)),p(e,"class","metric-card svelte-9h3o9i")},m(f,u){w(f,e,u),a(e,t),a(e,n),a(e,s),a(s,o),a(s,c)},p(f,u){var d,v;u&256&&i!==(i=(((d=f[8])==null?void 0:d.cpu)||0)+"")&&z(o,i),u&256&&Ue(s,"color",Rt(((v=f[8])==null?void 0:v.cpu)||0))},d(f){f&&k(e)}}}function wp(l){var g,C,y;let e,t,n,s,i=(((g=l[8])==null?void 0:g.memory)||0)+"",o,c,r,f,u=st((C=l[8])==null?void 0:C.memoryUsed)+"",d,v,h=st((y=l[8])==null?void 0:y.memoryTotal)+"",m;return{c(){var $;e=_("div"),t=_("div"),t.textContent="Memory",n=b(),s=_("div"),o=S(i),c=S("%"),r=b(),f=_("div"),d=S(u),v=S(" / "),m=S(h),p(t,"class","metric-label svelte-9h3o9i"),p(s,"class","metric-value svelte-9h3o9i"),Ue(s,"color",Rt((($=l[8])==null?void 0:$.memory)||0)),p(f,"class","metric-detail svelte-9h3o9i"),p(e,"class","metric-card svelte-9h3o9i")},m($,q){w($,e,q),a(e,t),a(e,n),a(e,s),a(s,o),a(s,c),a(e,r),a(e,f),a(f,d),a(f,v),a(f,m)},p($,q){var D,T,M,E;q&256&&i!==(i=(((D=$[8])==null?void 0:D.memory)||0)+"")&&z(o,i),q&256&&Ue(s,"color",Rt(((T=$[8])==null?void 0:T.memory)||0)),q&256&&u!==(u=st((M=$[8])==null?void 0:M.memoryUsed)+"")&&z(d,u),q&256&&h!==(h=st((E=$[8])==null?void 0:E.memoryTotal)+"")&&z(m,h)},d($){$&&k(e)}}}function yp(l){var g,C,y;let e,t,n,s,i=(((g=l[8])==null?void 0:g.disk)||0)+"",o,c,r,f,u=st((C=l[8])==null?void 0:C.diskUsed)+"",d,v,h=st((y=l[8])==null?void 0:y.diskTotal)+"",m;return{c(){var $;e=_("div"),t=_("div"),t.textContent="Disk",n=b(),s=_("div"),o=S(i),c=S("%"),r=b(),f=_("div"),d=S(u),v=S(" / "),m=S(h),p(t,"class","metric-label svelte-9h3o9i"),p(s,"class","metric-value svelte-9h3o9i"),Ue(s,"color",Rt((($=l[8])==null?void 0:$.disk)||0)),p(f,"class","metric-detail svelte-9h3o9i"),p(e,"class","metric-card svelte-9h3o9i")},m($,q){w($,e,q),a(e,t),a(e,n),a(e,s),a(s,o),a(s,c),a(e,r),a(e,f),a(f,d),a(f,v),a(f,m)},p($,q){var D,T,M,E;q&256&&i!==(i=(((D=$[8])==null?void 0:D.disk)||0)+"")&&z(o,i),q&256&&Ue(s,"color",Rt(((T=$[8])==null?void 0:T.disk)||0)),q&256&&u!==(u=st((M=$[8])==null?void 0:M.diskUsed)+"")&&z(d,u),q&256&&h!==(h=st((E=$[8])==null?void 0:E.diskTotal)+"")&&z(m,h)},d($){$&&k(e)}}}function Cp(l){var g,C,y,$;let e,t,n,s,i,o=st(((C=(g=l[8])==null?void 0:g.network)==null?void 0:C.in)||0)+"",c,r,f,u,d,v=st((($=(y=l[8])==null?void 0:y.network)==null?void 0:$.out)||0)+"",h,m;return{c(){e=_("div"),t=_("div"),t.textContent="Network",n=b(),s=_("div"),i=S("↓ "),c=S(o),r=S("/s"),f=b(),u=_("div"),d=S("↑ "),h=S(v),m=S("/s"),p(t,"class","metric-label svelte-9h3o9i"),p(s,"class","metric-value small svelte-9h3o9i"),p(u,"class","metric-detail svelte-9h3o9i"),p(e,"class","metric-card svelte-9h3o9i")},m(q,D){w(q,e,D),a(e,t),a(e,n),a(e,s),a(s,i),a(s,c),a(s,r),a(e,f),a(e,u),a(u,d),a(u,h),a(u,m)},p(q,D){var T,M,E,j;D&256&&o!==(o=st(((M=(T=q[8])==null?void 0:T.network)==null?void 0:M.in)||0)+"")&&z(c,o),D&256&&v!==(v=st(((j=(E=q[8])==null?void 0:E.network)==null?void 0:j.out)||0)+"")&&z(h,v)},d(q){q&&k(e)}}}function Sp(l){let e,t,n,s,i,o,c=ve(l[7]),r=[];for(let u=0;u<c.length;u+=1)r[u]=vr(pr(l,c,u));const f=u=>L(r[u],1,1,()=>{r[u]=null});return{c(){e=_("div"),t=_("table"),n=_("thead"),n.innerHTML='<tr><th class="svelte-9h3o9i">Container</th> <th class="svelte-9h3o9i">Status</th> <th class="svelte-9h3o9i">CPU</th> <th class="svelte-9h3o9i">Memory</th> <th class="svelte-9h3o9i">Network I/O</th></tr>',s=b(),i=_("tbody");for(let u=0;u<r.length;u+=1)r[u].c();p(t,"class","table svelte-9h3o9i"),p(e,"class","table-container svelte-9h3o9i")},m(u,d){w(u,e,d),a(e,t),a(t,n),a(t,s),a(t,i);for(let v=0;v<r.length;v+=1)r[v]&&r[v].m(i,null);o=!0},p(u,d){if(d&128){c=ve(u[7]);let v;for(v=0;v<c.length;v+=1){const h=pr(u,c,v);r[v]?(r[v].p(h,d),P(r[v],1)):(r[v]=vr(h),r[v].c(),P(r[v],1),r[v].m(i,null))}for(ke(),v=c.length;v<r.length;v+=1)f(v);we()}},i(u){if(!o){for(let d=0;d<c.length;d+=1)P(r[d]);o=!0}},o(u){r=r.filter(Boolean);for(let d=0;d<r.length;d+=1)L(r[d]);o=!1},d(u){u&&k(e),Re(r,u)}}}function qp(l){let e;return{c(){e=_("div"),e.textContent="No containers found",p(e,"class","empty-state svelte-9h3o9i")},m(t,n){w(t,e,n)},p:ie,i:ie,o:ie,d(t){t&&k(e)}}}function Dp(l){let e;return{c(){e=_("div"),e.textContent="Loading containers...",p(e,"class","empty-state svelte-9h3o9i")},m(t,n){w(t,e,n)},p:ie,i:ie,o:ie,d(t){t&&k(e)}}}function Tp(l){let e=l[23].status+"",t;return{c(){t=S(e)},m(n,s){w(n,t,s)},p(n,s){s&128&&e!==(e=n[23].status+"")&&z(t,e)},d(n){n&&k(t)}}}function vr(l){let e,t,n=l[23].name+"",s,i,o,c,r,f,u=l[23].cpu.toFixed(2)+"",d,v,h,m,g,C=l[23].memory_percent.toFixed(2)+"",y,$,q,D,T,M=st(l[23].memory_used)+"",E,j,R,O,F,I=st(l[23].net_in)+"",W,V,H=st(l[23].net_out)+"",B,N,G;return c=new Be({props:{variant:l[23].status==="running"?"success":"warning",$$slots:{default:[Tp]},$$scope:{ctx:l}}}),{c(){e=_("tr"),t=_("td"),s=S(n),i=b(),o=_("td"),X(c.$$.fragment),r=b(),f=_("td"),d=S(u),v=S("%"),h=b(),m=_("td"),g=_("span"),y=S(C),$=S("%"),q=b(),D=_("span"),T=S("("),E=S(M),j=S(")"),R=b(),O=_("td"),F=S("↓"),W=S(I),V=S(" / ↑"),B=S(H),N=b(),p(t,"class","container-name svelte-9h3o9i"),p(o,"class","svelte-9h3o9i"),Ue(f,"color",Rt(l[23].cpu)),p(f,"class","svelte-9h3o9i"),Ue(g,"color",Rt(l[23].memory_percent)),p(D,"class","detail svelte-9h3o9i"),p(m,"class","svelte-9h3o9i"),p(O,"class","network-io svelte-9h3o9i")},m(A,U){w(A,e,U),a(e,t),a(t,s),a(e,i),a(e,o),Y(c,o,null),a(e,r),a(e,f),a(f,d),a(f,v),a(e,h),a(e,m),a(m,g),a(g,y),a(g,$),a(m,q),a(m,D),a(D,T),a(D,E),a(D,j),a(e,R),a(e,O),a(O,F),a(O,W),a(O,V),a(O,B),a(e,N),G=!0},p(A,U){(!G||U&128)&&n!==(n=A[23].name+"")&&z(s,n);const x={};U&128&&(x.variant=A[23].status==="running"?"success":"warning"),U&67108992&&(x.$$scope={dirty:U,ctx:A}),c.$set(x),(!G||U&128)&&u!==(u=A[23].cpu.toFixed(2)+"")&&z(d,u),(!G||U&128)&&Ue(f,"color",Rt(A[23].cpu)),(!G||U&128)&&C!==(C=A[23].memory_percent.toFixed(2)+"")&&z(y,C),(!G||U&128)&&Ue(g,"color",Rt(A[23].memory_percent)),(!G||U&128)&&M!==(M=st(A[23].memory_used)+"")&&z(E,M),(!G||U&128)&&I!==(I=st(A[23].net_in)+"")&&z(W,I),(!G||U&128)&&H!==(H=st(A[23].net_out)+"")&&z(B,H)},i(A){G||(P(c.$$.fragment,A),G=!0)},o(A){L(c.$$.fragment,A),G=!1},d(A){A&&k(e),K(c)}}}function Pp(l){let e,t,n,s;const i=[Dp,qp,Sp],o=[];function c(r,f){return r[3]?0:r[7].length===0?1:2}return e=c(l),t=o[e]=i[e](l),{c(){t.c(),n=Ae()},m(r,f){o[e].m(r,f),w(r,n,f),s=!0},p(r,f){let u=e;e=c(r),e===u?o[e].p(r,f):(ke(),L(o[u],1,1,()=>{o[u]=null}),we(),t=o[e],t?t.p(r,f):(t=o[e]=i[e](r),t.c()),P(t,1),t.m(n.parentNode,n))},i(r){s||(P(t),s=!0)},o(r){L(t),s=!1},d(r){r&&k(n),o[e].d(r)}}}function mr(l){let e,t,n=Fn(l[4])+"",s;return{c(){e=_("span"),t=S("Updated "),s=S(n),p(e,"class","last-updated svelte-9h3o9i")},m(i,o){w(i,e,o),a(e,t),a(e,s)},p(i,o){o&16&&n!==(n=Fn(i[4])+"")&&z(s,n)},d(i){i&&k(e)}}}function Ep(l){let e;return{c(){e=S("↻ Refresh")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function Mp(l){let e,t,n,s,i,o,c,r,f,u,d;return t=new ze({props:{$$slots:{default:[Np]},$$scope:{ctx:l}}}),s=new ze({props:{$$slots:{default:[jp]},$$scope:{ctx:l}}}),o=new ze({props:{$$slots:{default:[Rp]},$$scope:{ctx:l}}}),r=new ze({props:{$$slots:{default:[Op]},$$scope:{ctx:l}}}),u=new ze({props:{title:"Server Health",$$slots:{default:[Gp]},$$scope:{ctx:l}}}),{c(){e=_("div"),X(t.$$.fragment),n=b(),X(s.$$.fragment),i=b(),X(o.$$.fragment),c=b(),X(r.$$.fragment),f=b(),X(u.$$.fragment),p(e,"class","metrics-grid svelte-9h3o9i")},m(v,h){w(v,e,h),Y(t,e,null),a(e,n),Y(s,e,null),a(e,i),Y(o,e,null),a(e,c),Y(r,e,null),w(v,f,h),Y(u,v,h),d=!0},p(v,h){const m={};h&67109888&&(m.$$scope={dirty:h,ctx:v}),t.$set(m);const g={};h&67109888&&(g.$$scope={dirty:h,ctx:v}),s.$set(g);const C={};h&67109888&&(C.$$scope={dirty:h,ctx:v}),o.$set(C);const y={};h&67109888&&(y.$$scope={dirty:h,ctx:v}),r.$set(y);const $={};h&67109386&&($.$$scope={dirty:h,ctx:v}),u.$set($)},i(v){d||(P(t.$$.fragment,v),P(s.$$.fragment,v),P(o.$$.fragment,v),P(r.$$.fragment,v),P(u.$$.fragment,v),d=!0)},o(v){L(t.$$.fragment,v),L(s.$$.fragment,v),L(o.$$.fragment,v),L(r.$$.fragment,v),L(u.$$.fragment,v),d=!1},d(v){v&&(k(e),k(f)),K(t),K(s),K(o),K(r),K(u,v)}}}function Lp(l){let e,t,n,s;return{c(){e=_("div"),t=_("p"),n=S("Failed to load: "),s=S(l[5]),p(e,"class","empty-state svelte-9h3o9i")},m(i,o){w(i,e,o),a(e,t),a(t,n),a(t,s)},p(i,o){o&32&&z(s,i[5])},i:ie,o:ie,d(i){i&&k(e)}}}function Np(l){let e,t,n,s,i=l[10].serverCount+"",o;return{c(){e=_("div"),t=_("div"),t.textContent="Servers",n=b(),s=_("div"),o=S(i),p(t,"class","metric-label svelte-9h3o9i"),p(s,"class","metric-value svelte-9h3o9i"),p(e,"class","metric-card svelte-9h3o9i")},m(c,r){w(c,e,r),a(e,t),a(e,n),a(e,s),a(s,o)},p(c,r){r&1024&&i!==(i=c[10].serverCount+"")&&z(o,i)},d(c){c&&k(e)}}}function jp(l){let e,t,n,s,i=l[10].containerCount+"",o;return{c(){e=_("div"),t=_("div"),t.textContent="Containers",n=b(),s=_("div"),o=S(i),p(t,"class","metric-label svelte-9h3o9i"),p(s,"class","metric-value svelte-9h3o9i"),p(e,"class","metric-card svelte-9h3o9i")},m(c,r){w(c,e,r),a(e,t),a(e,n),a(e,s),a(s,o)},p(c,r){r&1024&&i!==(i=c[10].containerCount+"")&&z(o,i)},d(c){c&&k(e)}}}function Rp(l){let e,t,n,s,i=kr(l[10].monthlyCost)+"",o;return{c(){e=_("div"),t=_("div"),t.textContent="Monthly Cost",n=b(),s=_("div"),o=S(i),p(t,"class","metric-label svelte-9h3o9i"),p(s,"class","metric-value svelte-9h3o9i"),p(e,"class","metric-card svelte-9h3o9i")},m(c,r){w(c,e,r),a(e,t),a(e,n),a(e,s),a(s,o)},p(c,r){r&1024&&i!==(i=kr(c[10].monthlyCost)+"")&&z(o,i)},d(c){c&&k(e)}}}function Ap(l){let e=l[10].health+"",t;return{c(){t=S(e)},m(n,s){w(n,t,s)},p(n,s){s&1024&&e!==(e=n[10].health+"")&&z(t,e)},d(n){n&&k(t)}}}function Op(l){let e,t,n,s,i,o;return i=new Be({props:{variant:wr(l[10].health),$$slots:{default:[Ap]},$$scope:{ctx:l}}}),{c(){e=_("div"),t=_("div"),t.textContent="Health",n=b(),s=_("div"),X(i.$$.fragment),p(t,"class","metric-label svelte-9h3o9i"),p(s,"class","metric-value svelte-9h3o9i"),p(e,"class","metric-card svelte-9h3o9i")},m(c,r){w(c,e,r),a(e,t),a(e,n),a(e,s),Y(i,s,null),o=!0},p(c,r){const f={};r&1024&&(f.variant=wr(c[10].health)),r&67109888&&(f.$$scope={dirty:r,ctx:c}),i.$set(f)},i(c){o||(P(i.$$.fragment,c),o=!0)},o(c){L(i.$$.fragment,c),o=!1},d(c){c&&k(e),K(i)}}}function Fp(l){let e,t=ve(l[9]),n=[];for(let s=0;s<t.length;s+=1)n[s]=br(_r(l,t,s));return{c(){e=_("div");for(let s=0;s<n.length;s+=1)n[s].c();p(e,"class","usage-list svelte-9h3o9i")},m(s,i){w(s,e,i);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null)},p(s,i){if(i&512){t=ve(s[9]);let o;for(o=0;o<t.length;o+=1){const c=_r(s,t,o);n[o]?n[o].p(c,i):(n[o]=br(c),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=t.length}},d(s){s&&k(e),Re(n,s)}}}function zp(l){let e;return{c(){e=_("div"),e.textContent="No servers found",p(e,"class","empty-state svelte-9h3o9i")},m(t,n){w(t,e,n)},p:ie,d(t){t&&k(e)}}}function Bp(l){let e;return{c(){e=_("div"),e.textContent="Unable to load fleet health. Check your DO token.",p(e,"class","empty-state svelte-9h3o9i")},m(t,n){w(t,e,n)},p:ie,d(t){t&&k(e)}}}function Ip(l){let e;return{c(){e=_("div"),e.textContent="Loading fleet health...",p(e,"class","empty-state svelte-9h3o9i")},m(t,n){w(t,e,n)},p:ie,d(t){t&&k(e)}}}function Up(l){let e,t=l[18].status+"",n;return{c(){e=_("span"),n=S(t),p(e,"class","usage-value svelte-9h3o9i"),Ue(e,"color","var(--text-muted)")},m(s,i){w(s,e,i),a(e,n)},p(s,i){i&512&&t!==(t=s[18].status+"")&&z(n,t)},d(s){s&&k(e)}}}function Hp(l){let e,t=l[18].healthy+"",n,s,i=l[18].containers+"",o;return{c(){e=_("span"),n=S(t),s=S("/"),o=S(i),p(e,"class","usage-value svelte-9h3o9i"),Ue(e,"color",l[18].unhealthy>0?"var(--danger)":"var(--success)")},m(c,r){w(c,e,r),a(e,n),a(e,s),a(e,o)},p(c,r){r&512&&t!==(t=c[18].healthy+"")&&z(n,t),r&512&&i!==(i=c[18].containers+"")&&z(o,i),r&512&&Ue(e,"color",c[18].unhealthy>0?"var(--danger)":"var(--success)")},d(c){c&&k(e)}}}function hr(l){let e,t,n,s,i,o,c=l[18].containers+"",r,f,u,d,v=l[18].healthy+"",h,m,g=l[18].unhealthy>0&&gr(l);return{c(){e=_("div"),t=_("div"),n=b(),s=_("div"),i=_("span"),o=S("Containers: "),r=S(c),f=b(),u=_("span"),d=S("Healthy: "),h=S(v),m=b(),g&&g.c(),p(t,"class","usage-fill svelte-9h3o9i"),Ue(t,"width",l[20]+"%"),Ue(t,"background",l[18].unhealthy>0?"var(--warning)":"var(--success)"),p(e,"class","usage-bar svelte-9h3o9i"),p(s,"class","usage-details svelte-9h3o9i")},m(C,y){w(C,e,y),a(e,t),w(C,n,y),w(C,s,y),a(s,i),a(i,o),a(i,r),a(s,f),a(s,u),a(u,d),a(u,h),a(s,m),g&&g.m(s,null)},p(C,y){y&512&&Ue(t,"width",C[20]+"%"),y&512&&Ue(t,"background",C[18].unhealthy>0?"var(--warning)":"var(--success)"),y&512&&c!==(c=C[18].containers+"")&&z(r,c),y&512&&v!==(v=C[18].healthy+"")&&z(h,v),C[18].unhealthy>0?g?g.p(C,y):(g=gr(C),g.c(),g.m(s,null)):g&&(g.d(1),g=null)},d(C){C&&(k(e),k(n),k(s)),g&&g.d()}}}function gr(l){let e,t,n=l[18].unhealthy+"",s;return{c(){e=_("span"),t=S("Unhealthy: "),s=S(n),Ue(e,"color","var(--danger)")},m(i,o){w(i,e,o),a(e,t),a(e,s)},p(i,o){o&512&&n!==(n=i[18].unhealthy+"")&&z(s,n)},d(i){i&&k(e)}}}function br(l){let e,t,n,s,i,o=l[18].name+"",c,r,f,u;function d(g,C){return g[19]?Hp:Up}let v=d(l),h=v(l),m=l[19]&&hr(l);return{c(){e=_("div"),t=_("div"),n=_("span"),s=_("span"),i=b(),c=S(o),r=b(),h.c(),f=b(),m&&m.c(),u=b(),p(s,"class","status-dot svelte-9h3o9i"),Te(s,"online",l[19]),Te(s,"offline",!l[19]),p(n,"class","usage-name svelte-9h3o9i"),p(t,"class","usage-header svelte-9h3o9i"),p(e,"class","usage-item svelte-9h3o9i")},m(g,C){w(g,e,C),a(e,t),a(t,n),a(n,s),a(n,i),a(n,c),a(t,r),h.m(t,null),a(e,f),m&&m.m(e,null),a(e,u)},p(g,C){C&512&&Te(s,"online",g[19]),C&512&&Te(s,"offline",!g[19]),C&512&&o!==(o=g[18].name+"")&&z(c,o),v===(v=d(g))&&h?h.p(g,C):(h.d(1),h=v(g),h&&(h.c(),h.m(t,null))),g[19]?m?m.p(g,C):(m=hr(g),m.c(),m.m(e,u)):m&&(m.d(1),m=null)},d(g){g&&k(e),h.d(),m&&m.d()}}}function Gp(l){let e;function t(i,o){return i[3]&&!i[1]?Ip:i[1]?i[9].length===0?zp:Fp:Bp}let n=t(l),s=n(l);return{c(){s.c(),e=Ae()},m(i,o){s.m(i,o),w(i,e,o)},p(i,o){n===(n=t(i))&&s?s.p(i,o):(s.d(1),s=n(i),s&&(s.c(),s.m(e.parentNode,e)))},d(i){i&&k(e),s.d(i)}}}function Wp(l){let e,t,n,s;const i=[hp,mp],o=[];function c(r,f){return r[6]?0:1}return t=c(l),n=o[t]=i[t](l),{c(){e=_("div"),n.c(),p(e,"class","metrics-page svelte-9h3o9i")},m(r,f){w(r,e,f),o[t].m(e,null),s=!0},p(r,[f]){let u=t;t=c(r),t===u?o[t].p(r,f):(ke(),L(o[u],1,1,()=>{o[u]=null}),we(),n=o[t],n?n.p(r,f):(n=o[t]=i[t](r),n.c()),P(n,1),n.m(e,null))},i(r){s||(P(n),s=!0)},o(r){L(n),s=!1},d(r){r&&k(e),o[t].d()}}}function Fn(l){return l?l.toLocaleTimeString():""}function $r(l){if(!l)return 0;const e=l.match(/([\d.]+)\s*(B|KB|KiB|MB|MiB|GB|GiB|TB|TiB)?/i);if(!e)return 0;const t=parseFloat(e[1]),n=(e[2]||"B").toLowerCase(),s={b:1,kb:1024,kib:1024,mb:1024**2,mib:1024**2,gb:1024**3,gib:1024**3,tb:1024**4,tib:1024**4};return t*(s[n]||1)}function st(l){if(!l)return"0 B";const e=["B","KB","MB","GB","TB"];let t=0;for(;l>=1024&&t<e.length-1;)l/=1024,t++;return`${l.toFixed(1)} ${e[t]}`}function kr(l){return`$${(l||0).toFixed(2)}`}function wr(l){switch(l){case"healthy":return"success";case"degraded":return"warning";case"unhealthy":return"danger";default:return"info"}}function Rt(l){return l>=90?"var(--danger)":l>=70?"var(--warning)":"var(--success)"}function Jp(l,e,t){let n,s,i,o,c,r,f,u;Xe(l,pl,T=>t(2,f=T)),Xe(l,Ul,T=>t(15,u=T));let d=!1,v=null,h=null,m=!1,g=null,C=null,y=null;dl(()=>{q(),t(12,g=setInterval(q,n?3e4:15e3))}),ls(()=>{g&&clearInterval(g)});let $=null;async function q(){m||t(3,d=!0),t(5,h=null);try{n?t(1,C=await Oe("GET","/infra/fleet/health")):t(13,y=await Oe("GET",`/infra/agent/${f.server}/metrics`)),t(4,v=new Date),m=!0}catch(T){t(5,h=T.message)}finally{t(3,d=!1)}}function D(){q()}return l.$$.update=()=>{var T,M,E,j,R,O,F,I,W,V,H,B;if(l.$$.dirty&4&&t(6,n=!f.server),l.$$.dirty&32772&&t(11,s=(u||[]).find(N=>{var G,A,U;return(N.ip||((U=(A=(G=N.networks)==null?void 0:G.v4)==null?void 0:A[0])==null?void 0:U.ip_address))===f.server})),l.$$.dirty&32770&&t(10,i=C?{serverCount:((T=C.summary)==null?void 0:T.total)||(u||[]).length,containerCount:((M=C.servers)==null?void 0:M.reduce((N,G)=>{var A;return N+(((A=G.containers)==null?void 0:A.length)||0)},0))||0,monthlyCost:(((E=C.summary)==null?void 0:E.total)||0)*12,health:((j=C.summary)==null?void 0:j.healthy)===((R=C.summary)==null?void 0:R.total)?"healthy":"degraded"}:{serverCount:(u||[]).length,containerCount:0,monthlyCost:0,health:"unknown"}),l.$$.dirty&2&&t(9,o=((C==null?void 0:C.servers)||[]).map(N=>({name:N.name||N.ip||"Unknown",ip:N.ip,status:N.status||"unknown",containers:N.containers??0,healthy:N.healthy??0,unhealthy:N.unhealthy??0,healthStatus:N.health_status||"unknown"}))),l.$$.dirty&8192&&t(8,c=y?{cpu:((O=y.system)==null?void 0:O.load_1m)||0,memory:((F=y.system)==null?void 0:F.mem_percent)||0,memoryUsed:((I=y.system)==null?void 0:I.mem_used)||0,memoryTotal:((W=y.system)==null?void 0:W.mem_total)||0,disk:((V=y.system)==null?void 0:V.disk_percent)||0,diskUsed:((H=y.system)==null?void 0:H.disk_used)||0,diskTotal:((B=y.system)==null?void 0:B.disk_total)||0,network:{in:0,out:0}}:null),l.$$.dirty&8192&&t(7,r=((y==null?void 0:y.containers)||[]).map(N=>{var Q;const G=N.cpu||"0%",A=N.memory||"0B / 0B",U=N.mem_perc||"0%",x=A.split("/");return{name:N.name||"unknown",cpu:parseFloat(G.replace("%",""))||0,memory_percent:parseFloat(U.replace("%",""))||0,memory_used:$r((Q=x[0])==null?void 0:Q.trim()),memory_total:x[1]?$r(x[1].trim()):0,net_in:N.net_in||0,net_out:N.net_out||0,status:N.state||"running"}})),l.$$.dirty&20484){const N=f.server;N!==$&&$!==null&&(g&&clearInterval(g),m=!1,q(),t(12,g=setInterval(q,N?15e3:3e4))),t(14,$=N)}},[D,C,f,d,v,h,n,r,c,o,i,s,g,y,$,u]}class Vp extends tt{constructor(e){super(),et(this,e,Jp,Wp,xe,{refresh:0})}get refresh(){return this.$$.ctx[0]}}function yr(l,e,t){const n=l.slice();return n[32]=e[t],n}function Cr(l,e,t){const n=l.slice();return n[35]=e[t],n}function Sr(l,e,t){const n=l.slice();return n[38]=e[t],n}function Yp(l){let e,t,n=ve(l[12]),s=[];for(let o=0;o<n.length;o+=1)s[o]=qr(Sr(l,n,o));const i=o=>L(s[o],1,1,()=>{s[o]=null});return{c(){e=_("div");for(let o=0;o<s.length;o+=1)s[o].c();p(e,"class","snapshot-list svelte-m8qcvw")},m(o,c){w(o,e,c);for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(e,null);t=!0},p(o,c){if(c[0]&135168){n=ve(o[12]);let r;for(r=0;r<n.length;r+=1){const f=Sr(o,n,r);s[r]?(s[r].p(f,c),P(s[r],1)):(s[r]=qr(f),s[r].c(),P(s[r],1),s[r].m(e,null))}for(ke(),r=n.length;r<s.length;r+=1)i(r);we()}},i(o){if(!t){for(let c=0;c<n.length;c+=1)P(s[c]);t=!0}},o(o){s=s.filter(Boolean);for(let c=0;c<s.length;c+=1)L(s[c]);t=!1},d(o){o&&k(e),Re(s,o)}}}function Kp(l){let e;return{c(){e=_("div"),e.textContent="No snapshots found",p(e,"class","empty-state svelte-m8qcvw")},m(t,n){w(t,e,n)},p:ie,i:ie,o:ie,d(t){t&&k(e)}}}function Qp(l){let e;return{c(){e=_("div"),e.textContent="Loading...",p(e,"class","empty-state svelte-m8qcvw")},m(t,n){w(t,e,n)},p:ie,i:ie,o:ie,d(t){t&&k(e)}}}function Zp(l){let e;return{c(){e=S("🗑️")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function qr(l){var W;let e,t,n,s=l[38].name+"",i,o,c,r,f=zn(l[38].created_at)+"",u,d,v,h,m,g=Er(l[38].size_gigabytes)+"",C,y,$,q,D,T=(((W=l[38].regions)==null?void 0:W.join(", "))||"-")+"",M,E,j,R,O,F;function I(){return l[21](l[38])}return R=new Ne({props:{variant:"danger",size:"sm",$$slots:{default:[Zp]},$$scope:{ctx:l}}}),R.$on("click",I),{c(){e=_("div"),t=_("div"),n=_("div"),i=S(s),o=b(),c=_("div"),r=_("span"),u=S(f),d=b(),v=_("span"),v.textContent="•",h=b(),m=_("span"),C=S(g),y=b(),$=_("span"),$.textContent="•",q=b(),D=_("span"),M=S(T),E=b(),j=_("div"),X(R.$$.fragment),O=b(),p(n,"class","snapshot-name svelte-m8qcvw"),p(c,"class","snapshot-meta svelte-m8qcvw"),p(t,"class","snapshot-info"),p(j,"class","snapshot-actions"),p(e,"class","snapshot-item svelte-m8qcvw")},m(V,H){w(V,e,H),a(e,t),a(t,n),a(n,i),a(t,o),a(t,c),a(c,r),a(r,u),a(c,d),a(c,v),a(c,h),a(c,m),a(m,C),a(c,y),a(c,$),a(c,q),a(c,D),a(D,M),a(e,E),a(e,j),Y(R,j,null),a(e,O),F=!0},p(V,H){var N;l=V,(!F||H[0]&4096)&&s!==(s=l[38].name+"")&&z(i,s),(!F||H[0]&4096)&&f!==(f=zn(l[38].created_at)+"")&&z(u,f),(!F||H[0]&4096)&&g!==(g=Er(l[38].size_gigabytes)+"")&&z(C,g),(!F||H[0]&4096)&&T!==(T=(((N=l[38].regions)==null?void 0:N.join(", "))||"-")+"")&&z(M,T);const B={};H[1]&1024&&(B.$$scope={dirty:H,ctx:l}),R.$set(B)},i(V){F||(P(R.$$.fragment,V),F=!0)},o(V){L(R.$$.fragment,V),F=!1},d(V){V&&k(e),K(R)}}}function Xp(l){let e;return{c(){e=S("↻ Refresh")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function xp(l){let e,t,n,s,i,o;const c=[Qp,Kp,Yp],r=[];function f(u,d){return u[0]?0:!u[12]||u[12].length===0?1:2}return e=f(l),t=r[e]=c[e](l),i=new Ne({props:{variant:"ghost",size:"sm",$$slots:{default:[Xp]},$$scope:{ctx:l}}}),i.$on("click",l[14]),{c(){t.c(),n=b(),s=_("div"),X(i.$$.fragment),p(s,"class","card-footer svelte-m8qcvw")},m(u,d){r[e].m(u,d),w(u,n,d),w(u,s,d),Y(i,s,null),o=!0},p(u,d){let v=e;e=f(u),e===v?r[e].p(u,d):(ke(),L(r[v],1,1,()=>{r[v]=null}),we(),t=r[e],t?t.p(u,d):(t=r[e]=c[e](u),t.c()),P(t,1),t.m(n.parentNode,n));const h={};d[1]&1024&&(h.$$scope={dirty:d,ctx:u}),i.$set(h)},i(u){o||(P(t),P(i.$$.fragment,u),o=!0)},o(u){L(t),L(i.$$.fragment,u),o=!1},d(u){u&&(k(n),k(s)),r[e].d(u),K(i)}}}function e_(l){let e;return{c(){e=S("+ Custom")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function t_(l){let e,t;return e=new Ne({props:{slot:"header",variant:"success",size:"sm",$$slots:{default:[e_]},$$scope:{ctx:l}}}),e.$on("click",l[20]),{c(){X(e.$$.fragment)},m(n,s){Y(e,n,s),t=!0},p(n,s){const i={};s[1]&1024&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){K(e,n)}}}function l_(l){let e,t,n,s,i,o,c;return t=new Be({props:{variant:"warning",$$slots:{default:[o_]},$$scope:{ctx:l}}}),o=new Ne({props:{variant:"primary",$$slots:{default:[i_]},$$scope:{ctx:l}}}),o.$on("click",l[15]),{c(){e=_("div"),X(t.$$.fragment),n=b(),s=_("p"),s.textContent="Base snapshot is required for provisioning new servers.",i=b(),X(o.$$.fragment),p(s,"class","svelte-m8qcvw"),p(e,"class","status-missing svelte-m8qcvw")},m(r,f){w(r,e,f),Y(t,e,null),a(e,n),a(e,s),a(e,i),Y(o,e,null),c=!0},p(r,f){const u={};f[1]&1024&&(u.$$scope={dirty:f,ctx:r}),t.$set(u);const d={};f[1]&1024&&(d.$$scope={dirty:f,ctx:r}),o.$set(d)},i(r){c||(P(t.$$.fragment,r),P(o.$$.fragment,r),c=!0)},o(r){L(t.$$.fragment,r),L(o.$$.fragment,r),c=!1},d(r){r&&k(e),K(t),K(o)}}}function n_(l){let e,t,n,s,i,o,c=l[1].name+"",r,f,u,d,v=zn(l[1].created_at)+"",h,m;return t=new Be({props:{variant:"success",$$slots:{default:[r_]},$$scope:{ctx:l}}}),{c(){e=_("div"),X(t.$$.fragment),n=b(),s=_("div"),i=_("div"),o=S("Name: "),r=S(c),f=b(),u=_("div"),d=S("Created: "),h=S(v),p(s,"class","status-details svelte-m8qcvw"),p(e,"class","status-ok svelte-m8qcvw")},m(g,C){w(g,e,C),Y(t,e,null),a(e,n),a(e,s),a(s,i),a(i,o),a(i,r),a(s,f),a(s,u),a(u,d),a(u,h),m=!0},p(g,C){const y={};C[1]&1024&&(y.$$scope={dirty:C,ctx:g}),t.$set(y),(!m||C[0]&2)&&c!==(c=g[1].name+"")&&z(r,c),(!m||C[0]&2)&&v!==(v=zn(g[1].created_at)+"")&&z(h,v)},i(g){m||(P(t.$$.fragment,g),m=!0)},o(g){L(t.$$.fragment,g),m=!1},d(g){g&&k(e),K(t)}}}function s_(l){let e;return{c(){e=_("div"),e.textContent="Checking...",p(e,"class","status-checking svelte-m8qcvw")},m(t,n){w(t,e,n)},p:ie,i:ie,o:ie,d(t){t&&k(e)}}}function o_(l){let e;return{c(){e=S("Not found")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function i_(l){let e;return{c(){e=S("Create Base Snapshot")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function r_(l){let e;return{c(){e=S("✓ Ready")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function a_(l){let e,t,n,s;const i=[s_,n_,l_],o=[];function c(r,f){return r[1]===null?0:r[1].exists?1:2}return e=c(l),t=o[e]=i[e](l),{c(){t.c(),n=Ae()},m(r,f){o[e].m(r,f),w(r,n,f),s=!0},p(r,f){let u=e;e=c(r),e===u?o[e].p(r,f):(ke(),L(o[u],1,1,()=>{o[u]=null}),we(),t=o[e],t?t.p(r,f):(t=o[e]=i[e](r),t.c()),P(t,1),t.m(n.parentNode,n))},i(r){s||(P(t),s=!0)},o(r){L(t),s=!1},d(r){r&&k(n),o[e].d(r)}}}function c_(l){let e,t,n,s,i;return t=new Be({props:{variant:"info",$$slots:{default:[p_]},$$scope:{ctx:l}}}),{c(){e=_("div"),X(t.$$.fragment),n=b(),s=_("p"),s.textContent="Optional: Use DO Container Registry for private images.",p(s,"class","svelte-m8qcvw"),p(e,"class","status-missing svelte-m8qcvw")},m(o,c){w(o,e,c),Y(t,e,null),a(e,n),a(e,s),i=!0},p(o,c){const r={};c[1]&1024&&(r.$$scope={dirty:c,ctx:o}),t.$set(r)},i(o){i||(P(t.$$.fragment,o),i=!0)},o(o){L(t.$$.fragment,o),i=!1},d(o){o&&k(e),K(t)}}}function u_(l){let e,t,n,s,i,o,c=l[2].name+"",r,f,u,d,v=l[2].region+"",h,m;return t=new Be({props:{variant:"success",$$slots:{default:[__]},$$scope:{ctx:l}}}),{c(){e=_("div"),X(t.$$.fragment),n=b(),s=_("div"),i=_("div"),o=S("Name: "),r=S(c),f=b(),u=_("div"),d=S("Region: "),h=S(v),p(s,"class","status-details svelte-m8qcvw"),p(e,"class","status-ok svelte-m8qcvw")},m(g,C){w(g,e,C),Y(t,e,null),a(e,n),a(e,s),a(s,i),a(i,o),a(i,r),a(s,f),a(s,u),a(u,d),a(u,h),m=!0},p(g,C){const y={};C[1]&1024&&(y.$$scope={dirty:C,ctx:g}),t.$set(y),(!m||C[0]&4)&&c!==(c=g[2].name+"")&&z(r,c),(!m||C[0]&4)&&v!==(v=g[2].region+"")&&z(h,v)},i(g){m||(P(t.$$.fragment,g),m=!0)},o(g){L(t.$$.fragment,g),m=!1},d(g){g&&k(e),K(t)}}}function f_(l){let e;return{c(){e=_("div"),e.textContent="Checking...",p(e,"class","status-checking svelte-m8qcvw")},m(t,n){w(t,e,n)},p:ie,i:ie,o:ie,d(t){t&&k(e)}}}function p_(l){let e;return{c(){e=S("Not configured")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function __(l){let e;return{c(){e=S("✓ Connected")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function d_(l){let e,t,n,s;const i=[f_,u_,c_],o=[];function c(r,f){return r[2]===null?0:r[2].exists?1:2}return e=c(l),t=o[e]=i[e](l),{c(){t.c(),n=Ae()},m(r,f){o[e].m(r,f),w(r,n,f),s=!0},p(r,f){let u=e;e=c(r),e===u?o[e].p(r,f):(ke(),L(o[u],1,1,()=>{o[u]=null}),we(),t=o[e],t?t.p(r,f):(t=o[e]=i[e](r),t.c()),P(t,1),t.m(n.parentNode,n))},i(r){s||(P(t),s=!0)},o(r){L(t),s=!1},d(r){r&&k(n),o[e].d(r)}}}function Dr(l){let e,t;return e=new ze({props:{title:"📋 Progress",$$slots:{default:[v_]},$$scope:{ctx:l}}}),{c(){X(e.$$.fragment)},m(n,s){Y(e,n,s),t=!0},p(n,s){const i={};s[0]&48|s[1]&1024&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){K(e,n)}}}function Tr(l){let e,t=l[35].message+"",n,s;return{c(){e=_("div"),n=S(t),p(e,"class",s="log-line "+l[35].type+" svelte-m8qcvw")},m(i,o){w(i,e,o),a(e,n)},p(i,o){o[0]&32&&t!==(t=i[35].message+"")&&z(n,t),o[0]&32&&s!==(s="log-line "+i[35].type+" svelte-m8qcvw")&&p(e,"class",s)},d(i){i&&k(e)}}}function v_(l){let e,t,n,s,i=ve(l[5]),o=[];for(let c=0;c<i.length;c+=1)o[c]=Tr(Cr(l,i,c));return{c(){e=_("div"),t=_("div"),n=b(),s=_("div");for(let c=0;c<o.length;c+=1)o[c].c();p(t,"class","progress-fill svelte-m8qcvw"),Ue(t,"width",l[4]+"%"),p(e,"class","progress-bar svelte-m8qcvw"),p(s,"class","log-container svelte-m8qcvw")},m(c,r){w(c,e,r),a(e,t),w(c,n,r),w(c,s,r);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(s,null)},p(c,r){if(r[0]&16&&Ue(t,"width",c[4]+"%"),r[0]&32){i=ve(c[5]);let f;for(f=0;f<i.length;f+=1){const u=Cr(c,i,f);o[f]?o[f].p(u,r):(o[f]=Tr(u),o[f].c(),o[f].m(s,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=i.length}},d(c){c&&(k(e),k(n),k(s)),Re(o,c)}}}function Pr(l){let e,t=l[32].label+"",n;return{c(){e=_("option"),n=S(t),e.__value=l[32].value,ee(e,e.__value)},m(s,i){w(s,e,i),a(e,n)},p:ie,d(s){s&&k(e)}}}function m_(l){let e,t,n,s,i,o,c,r,f,u,d,v,h,m,g,C,y,$,q,D,T,M,E,j,R,O,F,I,W=ve(l[13]),V=[];for(let H=0;H<W.length;H+=1)V[H]=Pr(yr(l,W,H));return{c(){e=_("form"),t=_("div"),n=_("label"),n.textContent="Snapshot Name *",s=b(),i=_("input"),o=b(),c=_("div"),r=_("label"),r.textContent="Base Image",f=b(),u=_("select");for(let H=0;H<V.length;H+=1)V[H].c();d=b(),v=_("div"),h=_("label"),h.textContent="Pre-install",m=b(),g=_("div"),C=_("label"),y=_("input"),$=S(`
          Docker`),q=b(),D=_("label"),T=_("input"),M=S(`
          Nginx`),E=b(),j=_("label"),R=_("input"),O=S(`
          Certbot (SSL)`),p(n,"for","snap-name"),p(n,"class","svelte-m8qcvw"),p(i,"id","snap-name"),p(i,"type","text"),p(i,"placeholder","my-base-snapshot"),i.required=!0,p(i,"class","svelte-m8qcvw"),p(t,"class","form-group svelte-m8qcvw"),p(r,"for","base-image"),p(r,"class","svelte-m8qcvw"),p(u,"id","base-image"),p(u,"class","svelte-m8qcvw"),l[8]===void 0&&Qe(()=>l[24].call(u)),p(c,"class","form-group svelte-m8qcvw"),p(h,"class","svelte-m8qcvw"),p(y,"type","checkbox"),p(y,"class","svelte-m8qcvw"),p(C,"class","checkbox-item svelte-m8qcvw"),p(T,"type","checkbox"),p(T,"class","svelte-m8qcvw"),p(D,"class","checkbox-item svelte-m8qcvw"),p(R,"type","checkbox"),p(R,"class","svelte-m8qcvw"),p(j,"class","checkbox-item svelte-m8qcvw"),p(g,"class","checkbox-list svelte-m8qcvw"),p(v,"class","form-group svelte-m8qcvw")},m(H,B){w(H,e,B),a(e,t),a(t,n),a(t,s),a(t,i),ee(i,l[7]),a(e,o),a(e,c),a(c,r),a(c,f),a(c,u);for(let N=0;N<V.length;N+=1)V[N]&&V[N].m(u,null);je(u,l[8],!0),a(e,d),a(e,v),a(v,h),a(v,m),a(v,g),a(g,C),a(C,y),y.checked=l[9],a(C,$),a(g,q),a(g,D),a(D,T),T.checked=l[10],a(D,M),a(g,E),a(g,j),a(j,R),R.checked=l[11],a(j,O),F||(I=[le(i,"input",l[23]),le(u,"change",l[24]),le(y,"change",l[25]),le(T,"change",l[26]),le(R,"change",l[27]),le(e,"submit",_a(l[16]))],F=!0)},p(H,B){if(B[0]&128&&i.value!==H[7]&&ee(i,H[7]),B[0]&8192){W=ve(H[13]);let N;for(N=0;N<W.length;N+=1){const G=yr(H,W,N);V[N]?V[N].p(G,B):(V[N]=Pr(G),V[N].c(),V[N].m(u,null))}for(;N<V.length;N+=1)V[N].d(1);V.length=W.length}B[0]&8448&&je(u,H[8]),B[0]&512&&(y.checked=H[9]),B[0]&1024&&(T.checked=H[10]),B[0]&2048&&(R.checked=H[11])},d(H){H&&k(e),Re(V,H),F=!1,We(I)}}}function h_(l){let e;return{c(){e=S("Cancel")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function g_(l){let e;return{c(){e=S("🔨 Build Snapshot")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function b_(l){let e;return{c(){e=S("Building...")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function $_(l){let e;function t(i,o){return i[6]?b_:g_}let n=t(l),s=n(l);return{c(){s.c(),e=Ae()},m(i,o){s.m(i,o),w(i,e,o)},p(i,o){n!==(n=t(i))&&(s.d(1),s=n(i),s&&(s.c(),s.m(e.parentNode,e)))},d(i){i&&k(e),s.d(i)}}}function k_(l){let e,t,n,s,i;return t=new Ne({props:{variant:"ghost",$$slots:{default:[h_]},$$scope:{ctx:l}}}),t.$on("click",l[22]),s=new Ne({props:{variant:"primary",disabled:l[6],$$slots:{default:[$_]},$$scope:{ctx:l}}}),s.$on("click",l[16]),{c(){e=_("div"),X(t.$$.fragment),n=b(),X(s.$$.fragment),p(e,"slot","footer")},m(o,c){w(o,e,c),Y(t,e,null),a(e,n),Y(s,e,null),i=!0},p(o,c){const r={};c[1]&1024&&(r.$$scope={dirty:c,ctx:o}),t.$set(r);const f={};c[0]&64&&(f.disabled=o[6]),c[0]&64|c[1]&1024&&(f.$$scope={dirty:c,ctx:o}),s.$set(f)},i(o){i||(P(t.$$.fragment,o),P(s.$$.fragment,o),i=!0)},o(o){L(t.$$.fragment,o),L(s.$$.fragment,o),i=!1},d(o){o&&k(e),K(t),K(s)}}}function w_(l){let e,t,n,s,i,o,c,r,f,u,d,v,h;n=new ze({props:{title:"📸 Your Snapshots",$$slots:{header:[t_],default:[xp]},$$scope:{ctx:l}}}),o=new ze({props:{title:"🏗️ Base Snapshot",$$slots:{default:[a_]},$$scope:{ctx:l}}}),r=new ze({props:{title:"📦 App Registry (DO)",$$slots:{default:[d_]},$$scope:{ctx:l}}});let m=l[5].length>0&&Dr(l);function g(y){l[28](y)}let C={title:"Build Custom Snapshot",width:"500px",$$slots:{footer:[k_],default:[m_]},$$scope:{ctx:l}};return l[3]!==void 0&&(C.open=l[3]),d=new yl({props:C}),_t.push(()=>wl(d,"open",g)),d.$on("close",l[29]),{c(){e=_("div"),t=_("div"),X(n.$$.fragment),s=b(),i=_("div"),X(o.$$.fragment),c=b(),X(r.$$.fragment),f=b(),m&&m.c(),u=b(),X(d.$$.fragment),p(i,"class","right-column svelte-m8qcvw"),p(t,"class","snapshots-grid svelte-m8qcvw"),p(e,"class","snapshots-page svelte-m8qcvw")},m(y,$){w(y,e,$),a(e,t),Y(n,t,null),a(t,s),a(t,i),Y(o,i,null),a(i,c),Y(r,i,null),a(i,f),m&&m.m(i,null),w(y,u,$),Y(d,y,$),h=!0},p(y,$){const q={};$[0]&4105|$[1]&1024&&(q.$$scope={dirty:$,ctx:y}),n.$set(q);const D={};$[0]&2|$[1]&1024&&(D.$$scope={dirty:$,ctx:y}),o.$set(D);const T={};$[0]&4|$[1]&1024&&(T.$$scope={dirty:$,ctx:y}),r.$set(T),y[5].length>0?m?(m.p(y,$),$[0]&32&&P(m,1)):(m=Dr(y),m.c(),P(m,1),m.m(i,null)):m&&(ke(),L(m,1,1,()=>{m=null}),we());const M={};$[0]&4040|$[1]&1024&&(M.$$scope={dirty:$,ctx:y}),!v&&$[0]&8&&(v=!0,M.open=y[3],kl(()=>v=!1)),d.$set(M)},i(y){h||(P(n.$$.fragment,y),P(o.$$.fragment,y),P(r.$$.fragment,y),P(m),P(d.$$.fragment,y),h=!0)},o(y){L(n.$$.fragment,y),L(o.$$.fragment,y),L(r.$$.fragment,y),L(m),L(d.$$.fragment,y),h=!1},d(y){y&&(k(e),k(u)),K(n),K(o),K(r),m&&m.d(),K(d,y)}}}function zn(l){return l?new Date(l).toLocaleDateString():"-"}function Er(l){return l?`${l} GB`:"-"}function y_(l,e,t){let n,s,i;Xe(l,sn,A=>t(19,s=A)),Xe(l,Da,A=>t(12,i=A));let o=!1,c=null,r=null,f=!1,u=0,d=[],v=!1,h="",m="ubuntu-22-04-x64",g=!0,C=!0,y=!0;const $=[{value:"ubuntu-22-04-x64",label:"Ubuntu 22.04 LTS"},{value:"ubuntu-20-04-x64",label:"Ubuntu 20.04 LTS"},{value:"debian-11-x64",label:"Debian 11"},{value:"debian-12-x64",label:"Debian 12"}];dl(()=>{D(),T()});function q(){sn.refresh()}async function D(){try{const A=await Oe("GET","/infra/setup/status");t(1,c=A)}catch(A){t(1,c={exists:!1,error:A.message})}}async function T(){try{const A=await Oe("GET","/infra/registry");t(2,r=A)}catch(A){t(2,r={exists:!1,error:A.message})}}async function M(){t(6,v=!0),t(4,u=0),t(5,d=[]);try{d.push({message:"🚀 Creating base snapshot...",type:"info"}),t(4,u=5),await Ca("POST","/infra/setup/init/stream",{},A=>{A.message&&(d.push({message:A.message,type:A.type||"info"}),t(5,d)),A.progress&&t(4,u=A.progress),(A.type==="done"||A.type==="complete")&&t(4,u=100)}),d.push({message:"✅ Base snapshot created successfully",type:"success"}),ge.success("Base snapshot created!"),await D(),await q()}catch(A){d.push({message:`❌ Error: ${A.message}`,type:"error"}),ge.error("Failed to create base snapshot: "+A.message)}finally{t(6,v=!1)}}async function E(){if(!h){ge.error("Snapshot name is required");return}t(6,v=!0),t(4,u=0),t(5,d=[]);try{d.push({message:`Building snapshot: ${h}`,type:"info"}),t(4,u=10);const A=await Oe("POST","/infra/snapshots/build",{name:h,base_image:m,install_docker:g,install_nginx:C,install_certbot:y});t(4,u=100),d.push({message:"✅ Snapshot created successfully",type:"success"}),ge.success("Snapshot created!"),await q(),t(3,f=!1)}catch(A){d.push({message:`❌ Error: ${A.message}`,type:"error"}),ge.error(A.message)}finally{t(6,v=!1)}}async function j(A,U){if(confirm(`Delete snapshot "${U}"? This cannot be undone.`))try{await Oe("DELETE",`/infra/snapshots/${A}`),ge.success("Snapshot deleted"),await q()}catch(x){ge.error("Failed to delete snapshot: "+x.message)}}const R=()=>t(3,f=!0),O=A=>j(A.id,A.name),F=()=>t(3,f=!1);function I(){h=this.value,t(7,h)}function W(){m=ct(this),t(8,m),t(13,$)}function V(){g=this.checked,t(9,g)}function H(){C=this.checked,t(10,C)}function B(){y=this.checked,t(11,y)}function N(A){f=A,t(3,f)}const G=()=>t(3,f=!1);return l.$$.update=()=>{l.$$.dirty[0]&524288&&t(18,n=s||{loading:!1}),l.$$.dirty[0]&262144&&t(0,o=n.loading)},[o,c,r,f,u,d,v,h,m,g,C,y,i,$,q,M,E,j,n,s,R,O,F,I,W,V,H,B,N,G]}class C_ extends tt{constructor(e){super(),et(this,e,y_,w_,xe,{},null,[-1,-1])}}function Mr(l,e,t){var i,o,c;const n=l.slice();n[22]=e[t];const s=n[22].ip||((c=(o=(i=n[22].networks)==null?void 0:i.v4)==null?void 0:o[0])==null?void 0:c.ip_address);return n[23]=s,n}function Lr(l,e,t){const n=l.slice();return n[26]=e[t],n}function Nr(l,e,t){const n=l.slice();return n[29]=e[t],n}function jr(l){let e,t=l[29].label+"",n;return{c(){e=_("option"),n=S(t),e.__value=l[29].value,ee(e,e.__value)},m(s,i){w(s,e,i),a(e,n)},p:ie,d(s){s&&k(e)}}}function Rr(l){let e,t=l[26].charAt(0).toUpperCase()+l[26].slice(1)+"",n;return{c(){e=_("option"),n=S(t),e.__value=l[26],ee(e,e.__value)},m(s,i){w(s,e,i),a(e,n)},p:ie,d(s){s&&k(e)}}}function Ar(l){let e,t=(l[22].name||"unnamed")+"",n,s,i=l[23]+"",o,c,r;return{c(){e=_("option"),n=S(t),s=S(" ("),o=S(i),c=S(")"),e.__value=r=l[23],ee(e,e.__value)},m(f,u){w(f,e,u),a(e,n),a(e,s),a(e,o),a(e,c)},p(f,u){u[0]&64&&t!==(t=(f[22].name||"unnamed")+"")&&z(n,t),u[0]&64&&i!==(i=f[23]+"")&&z(o,i),u[0]&64&&r!==(r=f[23])&&(e.__value=r,ee(e,e.__value))},d(f){f&&k(e)}}}function Or(l){let e,t=l[23]&&Ar(l);return{c(){t&&t.c(),e=Ae()},m(n,s){t&&t.m(n,s),w(n,e,s)},p(n,s){n[23]?t?t.p(n,s):(t=Ar(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(n){n&&k(e),t&&t.d(n)}}}function S_(l){let e;return{c(){e=S("🚀 Deploy Service")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function q_(l){let e;return{c(){e=S("Deploying...")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function D_(l){let e;function t(i,o){return i[4]?q_:S_}let n=t(l),s=n(l);return{c(){s.c(),e=Ae()},m(i,o){s.m(i,o),w(i,e,o)},p(i,o){n!==(n=t(i))&&(s.d(1),s=n(i),s&&(s.c(),s.m(e.parentNode,e)))},d(i){i&&k(e),s.d(i)}}}function T_(l){let e,t,n,s,i,o,c,r,f,u,d,v,h,m,g,C,y,$,q,D,T,M,E,j,R,O,F,I,W,V,H,B=ve(l[7]),N=[];for(let Q=0;Q<B.length;Q+=1)N[Q]=jr(Nr(l,B,Q));let G=ve(l[8]),A=[];for(let Q=0;Q<G.length;Q+=1)A[Q]=Rr(Lr(l,G,Q));let U=ve(l[6]||[]),x=[];for(let Q=0;Q<U.length;Q+=1)x[Q]=Or(Mr(l,U,Q));return I=new Ne({props:{variant:"primary",type:"submit",disabled:l[4],$$slots:{default:[D_]},$$scope:{ctx:l}}}),{c(){e=_("p"),e.textContent="Deploy stateful services with automatic configuration, persistence, and service mesh.",t=b(),n=_("form"),s=_("div"),i=_("label"),i.textContent="Service Type *",o=b(),c=_("select"),r=_("option"),r.textContent="Select service...";for(let Q=0;Q<N.length;Q+=1)N[Q].c();f=b(),u=_("div"),d=_("label"),d.textContent="Project *",v=b(),h=_("input"),m=b(),g=_("div"),C=_("label"),C.textContent="Environment",y=b(),$=_("select");for(let Q=0;Q<A.length;Q+=1)A[Q].c();q=b(),D=_("div"),T=_("label"),T.textContent="Target Server *",M=b(),E=_("select"),j=_("option"),j.textContent="Select server...";for(let Q=0;Q<x.length;Q+=1)x[Q].c();R=b(),O=_("small"),O.textContent="Servers from Infrastructure tab",F=b(),X(I.$$.fragment),p(e,"class","description svelte-2vlpp7"),p(i,"for","svc-type"),p(i,"class","svelte-2vlpp7"),r.__value="",ee(r,r.__value),p(c,"id","svc-type"),c.required=!0,p(c,"class","svelte-2vlpp7"),l[0]===void 0&&Qe(()=>l[11].call(c)),p(s,"class","form-group svelte-2vlpp7"),p(d,"for","svc-project"),p(d,"class","svelte-2vlpp7"),p(h,"id","svc-project"),p(h,"type","text"),p(h,"placeholder","myapp"),h.required=!0,p(h,"class","svelte-2vlpp7"),p(u,"class","form-group svelte-2vlpp7"),p(C,"for","svc-env"),p(C,"class","svelte-2vlpp7"),p($,"id","svc-env"),p($,"class","svelte-2vlpp7"),l[2]===void 0&&Qe(()=>l[13].call($)),p(g,"class","form-group svelte-2vlpp7"),p(T,"for","svc-server"),p(T,"class","svelte-2vlpp7"),j.__value="",ee(j,j.__value),p(E,"id","svc-server"),E.required=!0,p(E,"class","svelte-2vlpp7"),l[3]===void 0&&Qe(()=>l[14].call(E)),p(O,"class","svelte-2vlpp7"),p(D,"class","form-group svelte-2vlpp7")},m(Q,ne){w(Q,e,ne),w(Q,t,ne),w(Q,n,ne),a(n,s),a(s,i),a(s,o),a(s,c),a(c,r);for(let te=0;te<N.length;te+=1)N[te]&&N[te].m(c,null);je(c,l[0],!0),a(n,f),a(n,u),a(u,d),a(u,v),a(u,h),ee(h,l[1]),a(n,m),a(n,g),a(g,C),a(g,y),a(g,$);for(let te=0;te<A.length;te+=1)A[te]&&A[te].m($,null);je($,l[2],!0),a(n,q),a(n,D),a(D,T),a(D,M),a(D,E),a(E,j);for(let te=0;te<x.length;te+=1)x[te]&&x[te].m(E,null);je(E,l[3],!0),a(D,R),a(D,O),a(n,F),Y(I,n,null),W=!0,V||(H=[le(c,"change",l[11]),le(h,"input",l[12]),le($,"change",l[13]),le(E,"change",l[14]),le(n,"submit",l[9])],V=!0)},p(Q,ne){if(ne[0]&128){B=ve(Q[7]);let oe;for(oe=0;oe<B.length;oe+=1){const pe=Nr(Q,B,oe);N[oe]?N[oe].p(pe,ne):(N[oe]=jr(pe),N[oe].c(),N[oe].m(c,null))}for(;oe<N.length;oe+=1)N[oe].d(1);N.length=B.length}if(ne[0]&129&&je(c,Q[0]),ne[0]&2&&h.value!==Q[1]&&ee(h,Q[1]),ne[0]&256){G=ve(Q[8]);let oe;for(oe=0;oe<G.length;oe+=1){const pe=Lr(Q,G,oe);A[oe]?A[oe].p(pe,ne):(A[oe]=Rr(pe),A[oe].c(),A[oe].m($,null))}for(;oe<A.length;oe+=1)A[oe].d(1);A.length=G.length}if(ne[0]&260&&je($,Q[2]),ne[0]&64){U=ve(Q[6]||[]);let oe;for(oe=0;oe<U.length;oe+=1){const pe=Mr(Q,U,oe);x[oe]?x[oe].p(pe,ne):(x[oe]=Or(pe),x[oe].c(),x[oe].m(E,null))}for(;oe<x.length;oe+=1)x[oe].d(1);x.length=U.length}ne[0]&72&&je(E,Q[3]);const te={};ne[0]&16&&(te.disabled=Q[4]),ne[0]&16|ne[1]&2&&(te.$$scope={dirty:ne,ctx:Q}),I.$set(te)},i(Q){W||(P(I.$$.fragment,Q),W=!0)},o(Q){L(I.$$.fragment,Q),W=!1},d(Q){Q&&(k(e),k(t),k(n)),Re(N,Q),Re(A,Q),Re(x,Q),K(I),V=!1,We(H)}}}function P_(l){let e;return{c(){e=_("div"),e.innerHTML='<div class="empty-icon svelte-2vlpp7">🗄️</div> <div>Deploy a service to see connection details</div>',p(e,"class","empty-result svelte-2vlpp7")},m(t,n){w(t,e,n)},p:ie,d(t){t&&k(e)}}}function E_(l){let e,t,n,s,i,o=l[5].service_type+"",c,r,f,u,d,v,h,m,g=(l[5].host||"localhost")+"",C,y,$,q,D,T,M=l[5].port+"",E,j,R,O,F,I,W,V,H,B=l[5].database&&Fr(l),N=l[5].username&&zr(l),G=l[5].password&&Br(l),A=l[5].connection_url&&Ir(l);return{c(){e=_("div"),t=_("div"),n=_("span"),n.textContent="✅",s=b(),i=_("span"),c=S(o),r=S(" deployed"),f=b(),u=_("div"),d=_("div"),v=_("span"),v.textContent="Host:",h=b(),m=_("code"),C=S(g),y=b(),$=_("div"),q=_("span"),q.textContent="Port:",D=b(),T=_("code"),E=S(M),j=b(),B&&B.c(),R=b(),N&&N.c(),O=b(),G&&G.c(),F=b(),A&&A.c(),I=b(),W=_("small"),W.textContent="Click any value to copy",p(n,"class","result-icon svelte-2vlpp7"),p(i,"class","result-title svelte-2vlpp7"),p(t,"class","result-header svelte-2vlpp7"),p(v,"class","label svelte-2vlpp7"),p(m,"class","value clickable svelte-2vlpp7"),p(d,"class","info-row svelte-2vlpp7"),p(q,"class","label svelte-2vlpp7"),p(T,"class","value clickable svelte-2vlpp7"),p($,"class","info-row svelte-2vlpp7"),p(u,"class","connection-info svelte-2vlpp7"),p(W,"class","copy-hint svelte-2vlpp7"),p(e,"class","result-content svelte-2vlpp7")},m(U,x){w(U,e,x),a(e,t),a(t,n),a(t,s),a(t,i),a(i,c),a(i,r),a(e,f),a(e,u),a(u,d),a(d,v),a(d,h),a(d,m),a(m,C),a(u,y),a(u,$),a($,q),a($,D),a($,T),a(T,E),a(u,j),B&&B.m(u,null),a(u,R),N&&N.m(u,null),a(u,O),G&&G.m(u,null),a(u,F),A&&A.m(u,null),a(e,I),a(e,W),V||(H=[le(m,"click",l[15]),le(T,"click",l[16])],V=!0)},p(U,x){x[0]&32&&o!==(o=U[5].service_type+"")&&z(c,o),x[0]&32&&g!==(g=(U[5].host||"localhost")+"")&&z(C,g),x[0]&32&&M!==(M=U[5].port+"")&&z(E,M),U[5].database?B?B.p(U,x):(B=Fr(U),B.c(),B.m(u,R)):B&&(B.d(1),B=null),U[5].username?N?N.p(U,x):(N=zr(U),N.c(),N.m(u,O)):N&&(N.d(1),N=null),U[5].password?G?G.p(U,x):(G=Br(U),G.c(),G.m(u,F)):G&&(G.d(1),G=null),U[5].connection_url?A?A.p(U,x):(A=Ir(U),A.c(),A.m(u,null)):A&&(A.d(1),A=null)},d(U){U&&k(e),B&&B.d(),N&&N.d(),G&&G.d(),A&&A.d(),V=!1,We(H)}}}function Fr(l){let e,t,n,s,i=l[5].database+"",o,c,r;return{c(){e=_("div"),t=_("span"),t.textContent="Database:",n=b(),s=_("code"),o=S(i),p(t,"class","label svelte-2vlpp7"),p(s,"class","value clickable svelte-2vlpp7"),p(e,"class","info-row svelte-2vlpp7")},m(f,u){w(f,e,u),a(e,t),a(e,n),a(e,s),a(s,o),c||(r=le(s,"click",l[17]),c=!0)},p(f,u){u[0]&32&&i!==(i=f[5].database+"")&&z(o,i)},d(f){f&&k(e),c=!1,r()}}}function zr(l){let e,t,n,s,i=l[5].username+"",o,c,r;return{c(){e=_("div"),t=_("span"),t.textContent="Username:",n=b(),s=_("code"),o=S(i),p(t,"class","label svelte-2vlpp7"),p(s,"class","value clickable svelte-2vlpp7"),p(e,"class","info-row svelte-2vlpp7")},m(f,u){w(f,e,u),a(e,t),a(e,n),a(e,s),a(s,o),c||(r=le(s,"click",l[18]),c=!0)},p(f,u){u[0]&32&&i!==(i=f[5].username+"")&&z(o,i)},d(f){f&&k(e),c=!1,r()}}}function Br(l){let e,t,n,s,i=l[5].password+"",o,c,r;return{c(){e=_("div"),t=_("span"),t.textContent="Password:",n=b(),s=_("code"),o=S(i),p(t,"class","label svelte-2vlpp7"),p(s,"class","value clickable svelte-2vlpp7"),p(e,"class","info-row svelte-2vlpp7")},m(f,u){w(f,e,u),a(e,t),a(e,n),a(e,s),a(s,o),c||(r=le(s,"click",l[19]),c=!0)},p(f,u){u[0]&32&&i!==(i=f[5].password+"")&&z(o,i)},d(f){f&&k(e),c=!1,r()}}}function Ir(l){let e,t,n,s,i=l[5].connection_url+"",o,c,r;return{c(){e=_("div"),t=_("span"),t.textContent="Connection URL:",n=b(),s=_("code"),o=S(i),p(t,"class","label svelte-2vlpp7"),p(s,"class","value url clickable svelte-2vlpp7"),p(e,"class","info-row full-width svelte-2vlpp7")},m(f,u){w(f,e,u),a(e,t),a(e,n),a(e,s),a(s,o),c||(r=le(s,"click",l[20]),c=!0)},p(f,u){u[0]&32&&i!==(i=f[5].connection_url+"")&&z(o,i)},d(f){f&&k(e),c=!1,r()}}}function M_(l){let e;function t(i,o){return i[5]?E_:P_}let n=t(l),s=n(l);return{c(){s.c(),e=Ae()},m(i,o){s.m(i,o),w(i,e,o)},p(i,o){n===(n=t(i))&&s?s.p(i,o):(s.d(1),s=n(i),s&&(s.c(),s.m(e.parentNode,e)))},d(i){i&&k(e),s.d(i)}}}function L_(l){let e;return{c(){e=_("div"),e.innerHTML='<div class="feature svelte-2vlpp7"><strong class="svelte-2vlpp7">🔐 Auto Credentials</strong> <p class="svelte-2vlpp7">Deterministic passwords generated from project/env. Same inputs = same password.</p></div> <div class="feature svelte-2vlpp7"><strong class="svelte-2vlpp7">💾 Persistent Storage</strong> <p class="svelte-2vlpp7">Data volumes mounted at /data. Survives container restarts and redeploys.</p></div> <div class="feature svelte-2vlpp7"><strong class="svelte-2vlpp7">🔀 Service Mesh</strong> <p class="svelte-2vlpp7">Nginx proxy on internal ports. Apps connect to localhost:PORT.</p></div> <div class="feature svelte-2vlpp7"><strong class="svelte-2vlpp7">🔧 Auto-Inject</strong> <p class="svelte-2vlpp7">Enable &quot;Auto-inject&quot; in Deploy tab to get DATABASE_URL automatically.</p></div>',p(e,"class","features-grid svelte-2vlpp7")},m(t,n){w(t,e,n)},p:ie,d(t){t&&k(e)}}}function N_(l){let e,t,n,s,i,o,c,r;return n=new ze({props:{title:"🗄️ Deploy Database/Cache",$$slots:{default:[T_]},$$scope:{ctx:l}}}),i=new ze({props:{title:"📋 Deployment Result",$$slots:{default:[M_]},$$scope:{ctx:l}}}),c=new ze({props:{title:"ℹ️ How It Works",$$slots:{default:[L_]},$$scope:{ctx:l}}}),{c(){e=_("div"),t=_("div"),X(n.$$.fragment),s=b(),X(i.$$.fragment),o=b(),X(c.$$.fragment),p(t,"class","services-grid svelte-2vlpp7"),p(e,"class","services-page svelte-2vlpp7")},m(f,u){w(f,e,u),a(e,t),Y(n,t,null),a(t,s),Y(i,t,null),a(e,o),Y(c,e,null),r=!0},p(f,u){const d={};u[0]&95|u[1]&2&&(d.$$scope={dirty:u,ctx:f}),n.$set(d);const v={};u[0]&32|u[1]&2&&(v.$$scope={dirty:u,ctx:f}),i.$set(v);const h={};u[1]&2&&(h.$$scope={dirty:u,ctx:f}),c.$set(h)},i(f){r||(P(n.$$.fragment,f),P(i.$$.fragment,f),P(c.$$.fragment,f),r=!0)},o(f){L(n.$$.fragment,f),L(i.$$.fragment,f),L(c.$$.fragment,f),r=!1},d(f){f&&k(e),K(n),K(i),K(c)}}}function j_(l,e,t){let n;Xe(l,Ul,R=>t(6,n=R));let s="",i="",o="prod",c="",r=!1,f=null;const u=[{value:"postgres",label:"🐘 PostgreSQL",port:5432},{value:"redis",label:"⚡ Redis",port:6379},{value:"mysql",label:"🐬 MySQL",port:3306},{value:"mongo",label:"🍃 MongoDB",port:27017}],d=["prod","staging","dev"];dl(()=>{v()});async function v(){try{const R=await Oe("GET","/infra/servers");Ul.set(R.servers||R||[])}catch(R){console.error("Failed to load servers:",R)}}async function h(R){if(R.preventDefault(),!s||!i||!c){ge.error("Please fill in all required fields");return}t(4,r=!0),t(5,f=null);try{ge.error("Service deployment not yet implemented. Use Deploy tab instead.");return}catch(O){ge.error("Deployment failed: "+O.message)}finally{t(4,r=!1)}}function m(R){navigator.clipboard.writeText(R),ge.success("Copied to clipboard")}function g(){s=ct(this),t(0,s),t(7,u)}function C(){i=this.value,t(1,i)}function y(){o=ct(this),t(2,o),t(8,d)}function $(){c=ct(this),t(3,c)}return[s,i,o,c,r,f,n,u,d,h,m,g,C,y,$,()=>m(f.host||"localhost"),()=>m(String(f.port)),()=>m(f.database),()=>m(f.username),()=>m(f.password),()=>m(f.connection_url)]}class R_ extends tt{constructor(e){super(),et(this,e,j_,N_,xe,{},null,[-1,-1])}}const{Boolean:A_}=fa;function Ur(l,e,t){const n=l.slice();return n[32]=e[t],n}function O_(l){let e,t,n,s,i,o,c,r,f,u;return{c(){e=_("div"),t=_("label"),t.textContent="Theme",n=b(),s=_("select"),i=_("option"),i.textContent="🌙 Dark (Space)",o=_("option"),o.textContent="☀️ Light",c=b(),r=_("p"),r.textContent="Theme preference is saved to your browser.",p(t,"for","theme-select"),p(t,"class","svelte-16vnl3x"),i.__value="dark",ee(i,i.__value),o.__value="light",ee(o,o.__value),p(s,"id","theme-select"),p(s,"class","svelte-16vnl3x"),l[14]===void 0&&Qe(()=>l[21].call(s)),p(e,"class","form-group svelte-16vnl3x"),p(r,"class","hint svelte-16vnl3x")},m(d,v){w(d,e,v),a(e,t),a(e,n),a(e,s),a(s,i),a(s,o),je(s,l[14],!0),w(d,c,v),w(d,r,v),f||(u=[le(s,"change",l[21]),le(s,"change",l[22])],f=!0)},p(d,v){v[0]&16384&&je(s,d[14])},d(d){d&&(k(e),k(c),k(r)),f=!1,We(u)}}}function F_(l){let e;return{c(){e=S("Save Token")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function z_(l){let e,t;return e=new Be({props:{variant:"danger",$$slots:{default:[U_]},$$scope:{ctx:l}}}),{c(){X(e.$$.fragment)},m(n,s){Y(e,n,s),t=!0},p(n,s){const i={};s[1]&16&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){K(e,n)}}}function B_(l){let e,t;return e=new Be({props:{variant:"warning",$$slots:{default:[H_]},$$scope:{ctx:l}}}),{c(){X(e.$$.fragment)},m(n,s){Y(e,n,s),t=!0},p(n,s){const i={};s[1]&16&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){K(e,n)}}}function I_(l){let e,t,n,s,i;return e=new Be({props:{variant:"success",$$slots:{default:[G_]},$$scope:{ctx:l}}}),{c(){X(e.$$.fragment),t=b(),n=_("span"),s=S(l[0]),p(n,"class","token-preview svelte-16vnl3x")},m(o,c){Y(e,o,c),w(o,t,c),w(o,n,c),a(n,s),i=!0},p(o,c){const r={};c[1]&16&&(r.$$scope={dirty:c,ctx:o}),e.$set(r),(!i||c[0]&1)&&z(s,o[0])},i(o){i||(P(e.$$.fragment,o),i=!0)},o(o){L(e.$$.fragment,o),i=!1},d(o){o&&(k(t),k(n)),K(e,o)}}}function U_(l){let e;return{c(){e=S("Invalid token")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function H_(l){let e;return{c(){e=S("Not configured")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function G_(l){let e;return{c(){e=S("✓ Connected")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function W_(l){let e,t,n,s,i,o,c,r,f,u,d,v,h,m,g;r=new Ne({props:{variant:"primary",type:"submit",$$slots:{default:[F_]},$$scope:{ctx:l}}});const C=[I_,B_,z_],y=[];function $(q,D){var T,M;return(T=q[1])!=null&&T.valid?0:(M=q[1])!=null&&M.missing?1:2}return d=$(l),v=y[d]=C[d](l),{c(){e=_("p"),e.innerHTML=`Get your token from 
      <a href="https://cloud.digitalocean.com/account/api/tokens" target="_blank" class="svelte-16vnl3x">DO Control Panel</a>.`,t=b(),n=_("div"),n.innerHTML='<div class="info-title svelte-16vnl3x">🔒 Browser Storage</div> <div class="info-text svelte-16vnl3x">Token stored in browser cookie. Passed with each API request. Never stored on server.</div>',s=b(),i=_("form"),o=_("div"),o.innerHTML='<label for="do-token" class="svelte-16vnl3x">DigitalOcean API Token</label> <input id="do-token" type="password" placeholder="dop_v1_xxxxx" class="svelte-16vnl3x"/>',c=b(),X(r.$$.fragment),f=b(),u=_("div"),v.c(),p(e,"class","description svelte-16vnl3x"),p(n,"class","info-box svelte-16vnl3x"),p(o,"class","form-group svelte-16vnl3x"),p(u,"class","token-status svelte-16vnl3x")},m(q,D){w(q,e,D),w(q,t,D),w(q,n,D),w(q,s,D),w(q,i,D),a(i,o),a(i,c),Y(r,i,null),w(q,f,D),w(q,u,D),y[d].m(u,null),h=!0,m||(g=le(i,"submit",l[15]),m=!0)},p(q,D){const T={};D[1]&16&&(T.$$scope={dirty:D,ctx:q}),r.$set(T);let M=d;d=$(q),d===M?y[d].p(q,D):(ke(),L(y[M],1,1,()=>{y[M]=null}),we(),v=y[d],v?v.p(q,D):(v=y[d]=C[d](q),v.c()),P(v,1),v.m(u,null))},i(q){h||(P(r.$$.fragment,q),P(v),h=!0)},o(q){L(r.$$.fragment,q),L(v),h=!1},d(q){q&&(k(e),k(t),k(n),k(s),k(i),k(f),k(u)),K(r),y[d].d(),m=!1,g()}}}function J_(l){let e;return{c(){e=S("Save Token")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function V_(l){let e,t;return e=new Be({props:{variant:"warning",$$slots:{default:[K_]},$$scope:{ctx:l}}}),{c(){X(e.$$.fragment)},m(n,s){Y(e,n,s),t=!0},p(n,s){const i={};s[1]&16&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){K(e,n)}}}function Y_(l){let e,t,n,s,i;return e=new Be({props:{variant:"success",$$slots:{default:[Q_]},$$scope:{ctx:l}}}),{c(){X(e.$$.fragment),t=b(),n=_("span"),s=S(l[2]),p(n,"class","token-preview svelte-16vnl3x")},m(o,c){Y(e,o,c),w(o,t,c),w(o,n,c),a(n,s),i=!0},p(o,c){const r={};c[1]&16&&(r.$$scope={dirty:c,ctx:o}),e.$set(r),(!i||c[0]&4)&&z(s,o[2])},i(o){i||(P(e.$$.fragment,o),i=!0)},o(o){L(e.$$.fragment,o),i=!1},d(o){o&&(k(t),k(n)),K(e,o)}}}function K_(l){let e;return{c(){e=S("Not configured")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function Q_(l){let e;return{c(){e=S("✓ Connected")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function Z_(l){let e,t,n,s,i,o,c,r,f,u,d,v,h;o=new Ne({props:{variant:"primary",type:"submit",$$slots:{default:[J_]},$$scope:{ctx:l}}});const m=[Y_,V_],g=[];function C(y,$){var q;return(q=y[3])!=null&&q.valid?0:1}return f=C(l),u=g[f]=m[f](l),{c(){e=_("p"),e.innerHTML=`Get your token from 
      <a href="https://dash.cloudflare.com/profile/api-tokens" target="_blank" class="svelte-16vnl3x">Cloudflare Dashboard</a>.`,t=b(),n=_("form"),s=_("div"),s.innerHTML='<label for="cf-token" class="svelte-16vnl3x">Cloudflare API Token</label> <input id="cf-token" type="password" placeholder="xxxxx" class="svelte-16vnl3x"/>',i=b(),X(o.$$.fragment),c=b(),r=_("div"),u.c(),p(e,"class","description svelte-16vnl3x"),p(s,"class","form-group svelte-16vnl3x"),p(r,"class","token-status svelte-16vnl3x")},m(y,$){w(y,e,$),w(y,t,$),w(y,n,$),a(n,s),a(n,i),Y(o,n,null),w(y,c,$),w(y,r,$),g[f].m(r,null),d=!0,v||(h=le(n,"submit",l[16]),v=!0)},p(y,$){const q={};$[1]&16&&(q.$$scope={dirty:$,ctx:y}),o.$set(q);let D=f;f=C(y),f===D?g[f].p(y,$):(ke(),L(g[D],1,1,()=>{g[D]=null}),we(),u=g[f],u?u.p(y,$):(u=g[f]=m[f](y),u.c()),P(u,1),u.m(r,null))},i(y){d||(P(o.$$.fragment,y),P(u),d=!0)},o(y){L(o.$$.fragment,y),L(u),d=!1},d(y){y&&(k(e),k(t),k(n),k(c),k(r)),K(o),g[f].d(),v=!1,h()}}}function X_(l){let e;return{c(){e=S("Setup Domain")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function Hr(l){let e,t=l[7].message+"",n;return{c(){e=_("div"),n=S(t),p(e,"class","result svelte-16vnl3x"),Te(e,"success",l[7].success),Te(e,"error",!l[7].success)},m(s,i){w(s,e,i),a(e,n)},p(s,i){i[0]&128&&t!==(t=s[7].message+"")&&z(n,t),i[0]&128&&Te(e,"success",s[7].success),i[0]&128&&Te(e,"error",!s[7].success)},d(s){s&&k(e)}}}function x_(l){let e,t,n,s,i,o,c,r,f,u,d,v,h,m,g,C,y,$,q,D,T,M,E,j;q=new Ne({props:{variant:"primary",type:"submit",$$slots:{default:[X_]},$$scope:{ctx:l}}});let R=l[7]&&Hr(l);return{c(){e=_("p"),e.textContent='Point a domain to your server. With "Proxied" enabled, HTTPS works automatically.',t=b(),n=_("form"),s=_("div"),i=_("label"),i.textContent="Domain",o=b(),c=_("input"),r=b(),f=_("div"),u=_("label"),u.textContent="Server IP",d=b(),v=_("input"),h=b(),m=_("label"),g=_("input"),C=S(`
        Proxied (Cloudflare handles SSL)`),y=b(),$=_("div"),X(q.$$.fragment),D=b(),R&&R.c(),T=Ae(),p(e,"class","description svelte-16vnl3x"),p(i,"for","domain-name"),p(i,"class","svelte-16vnl3x"),p(c,"id","domain-name"),p(c,"type","text"),p(c,"placeholder","api.example.com"),c.required=!0,p(c,"class","svelte-16vnl3x"),p(s,"class","form-group svelte-16vnl3x"),p(u,"for","domain-ip"),p(u,"class","svelte-16vnl3x"),p(v,"id","domain-ip"),p(v,"type","text"),p(v,"placeholder","1.2.3.4"),v.required=!0,p(v,"class","svelte-16vnl3x"),p(f,"class","form-group svelte-16vnl3x"),p(g,"type","checkbox"),p(g,"class","svelte-16vnl3x"),p(m,"class","checkbox-label svelte-16vnl3x"),p($,"class","form-actions svelte-16vnl3x")},m(O,F){w(O,e,F),w(O,t,F),w(O,n,F),a(n,s),a(s,i),a(s,o),a(s,c),ee(c,l[4]),a(n,r),a(n,f),a(f,u),a(f,d),a(f,v),ee(v,l[5]),a(n,h),a(n,m),a(m,g),g.checked=l[6],a(m,C),a(n,y),a(n,$),Y(q,$,null),w(O,D,F),R&&R.m(O,F),w(O,T,F),M=!0,E||(j=[le(c,"input",l[23]),le(v,"input",l[24]),le(g,"change",l[25]),le(n,"submit",l[17])],E=!0)},p(O,F){F[0]&16&&c.value!==O[4]&&ee(c,O[4]),F[0]&32&&v.value!==O[5]&&ee(v,O[5]),F[0]&64&&(g.checked=O[6]);const I={};F[1]&16&&(I.$$scope={dirty:F,ctx:O}),q.$set(I),O[7]?R?R.p(O,F):(R=Hr(O),R.c(),R.m(T.parentNode,T)):R&&(R.d(1),R=null)},i(O){M||(P(q.$$.fragment,O),M=!0)},o(O){L(q.$$.fragment,O),M=!1},d(O){O&&(k(e),k(t),k(n),k(D),k(T)),K(q),R&&R.d(O),E=!1,We(j)}}}function ed(l){let e;return{c(){e=S("Setup DNS Round-Robin")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function Gr(l){let e,t=l[11].message+"",n;return{c(){e=_("div"),n=S(t),p(e,"class","result svelte-16vnl3x"),Te(e,"success",l[11].success),Te(e,"error",!l[11].success)},m(s,i){w(s,e,i),a(e,n)},p(s,i){i[0]&2048&&t!==(t=s[11].message+"")&&z(n,t),i[0]&2048&&Te(e,"success",s[11].success),i[0]&2048&&Te(e,"error",!s[11].success)},d(s){s&&k(e)}}}function td(l){let e,t,n,s,i,o,c,r,f,u,d,v,h,m,g,C,y,$,q,D,T,M,E,j;q=new Ne({props:{variant:"primary",type:"submit",$$slots:{default:[ed]},$$scope:{ctx:l}}});let R=l[11]&&Gr(l);return{c(){e=_("p"),e.innerHTML=`Simple load distribution via multiple A records. Cloudflare rotates between IPs at DNS level.
      <strong>FREE</strong>, but no health checks.`,t=b(),n=_("form"),s=_("div"),i=_("label"),i.textContent="Domain",o=b(),c=_("input"),r=b(),f=_("div"),u=_("label"),u.textContent="Server IPs (comma-separated)",d=b(),v=_("input"),h=b(),m=_("label"),g=_("input"),C=S(`
        Proxied (SSL + CDN)`),y=b(),$=_("div"),X(q.$$.fragment),D=b(),R&&R.c(),T=Ae(),p(e,"class","description svelte-16vnl3x"),p(i,"for","lb-domain"),p(i,"class","svelte-16vnl3x"),p(c,"id","lb-domain"),p(c,"type","text"),p(c,"placeholder","api.example.com"),c.required=!0,p(c,"class","svelte-16vnl3x"),p(s,"class","form-group svelte-16vnl3x"),p(u,"for","lb-ips"),p(u,"class","svelte-16vnl3x"),p(v,"id","lb-ips"),p(v,"type","text"),p(v,"placeholder","1.2.3.4, 5.6.7.8"),v.required=!0,p(v,"class","svelte-16vnl3x"),p(f,"class","form-group svelte-16vnl3x"),p(g,"type","checkbox"),p(g,"class","svelte-16vnl3x"),p(m,"class","checkbox-label svelte-16vnl3x"),p($,"class","form-actions svelte-16vnl3x")},m(O,F){w(O,e,F),w(O,t,F),w(O,n,F),a(n,s),a(s,i),a(s,o),a(s,c),ee(c,l[8]),a(n,r),a(n,f),a(f,u),a(f,d),a(f,v),ee(v,l[9]),a(n,h),a(n,m),a(m,g),g.checked=l[10],a(m,C),a(n,y),a(n,$),Y(q,$,null),w(O,D,F),R&&R.m(O,F),w(O,T,F),M=!0,E||(j=[le(c,"input",l[26]),le(v,"input",l[27]),le(g,"change",l[28]),le(n,"submit",l[18])],E=!0)},p(O,F){F[0]&256&&c.value!==O[8]&&ee(c,O[8]),F[0]&512&&v.value!==O[9]&&ee(v,O[9]),F[0]&1024&&(g.checked=O[10]);const I={};F[1]&16&&(I.$$scope={dirty:F,ctx:O}),q.$set(I),O[11]?R?R.p(O,F):(R=Gr(O),R.c(),R.m(T.parentNode,T)):R&&(R.d(1),R=null)},i(O){M||(P(q.$$.fragment,O),M=!0)},o(O){L(q.$$.fragment,O),M=!1},d(O){O&&(k(e),k(t),k(n),k(D),k(T)),K(q),R&&R.d(O),E=!1,We(j)}}}function ld(l){let e,t,n=ve(l[12]),s=[];for(let o=0;o<n.length;o+=1)s[o]=Wr(Ur(l,n,o));const i=o=>L(s[o],1,1,()=>{s[o]=null});return{c(){e=_("div");for(let o=0;o<s.length;o+=1)s[o].c();p(e,"class","task-list svelte-16vnl3x")},m(o,c){w(o,e,c);for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(e,null);t=!0},p(o,c){if(c[0]&1052672){n=ve(o[12]);let r;for(r=0;r<n.length;r+=1){const f=Ur(o,n,r);s[r]?(s[r].p(f,c),P(s[r],1)):(s[r]=Wr(f),s[r].c(),P(s[r],1),s[r].m(e,null))}for(ke(),r=n.length;r<s.length;r+=1)i(r);we()}},i(o){if(!t){for(let c=0;c<n.length;c+=1)P(s[c]);t=!0}},o(o){s=s.filter(A_);for(let c=0;c<s.length;c+=1)L(s[c]);t=!1},d(o){o&&k(e),Re(s,o)}}}function nd(l){let e;return{c(){e=_("div"),e.textContent="No scheduled tasks",p(e,"class","empty-state svelte-16vnl3x")},m(t,n){w(t,e,n)},p:ie,i:ie,o:ie,d(t){t&&k(e)}}}function sd(l){let e;return{c(){e=_("div"),e.textContent="Loading tasks...",p(e,"class","empty-state svelte-16vnl3x")},m(t,n){w(t,e,n)},p:ie,i:ie,o:ie,d(t){t&&k(e)}}}function od(l){let e=l[32].type+"",t;return{c(){t=S(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&4096&&e!==(e=n[32].type+"")&&z(t,e)},d(n){n&&k(t)}}}function id(l){let e;return{c(){e=S("🗑️")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function Wr(l){let e,t,n,s=l[32].name+"",i,o,c,r,f,u,d,v=l[32].interval+"",h,m,g,C,y,$;r=new Be({props:{variant:"info",$$slots:{default:[od]},$$scope:{ctx:l}}});function q(){return l[29](l[32])}return C=new Ne({props:{variant:"danger",size:"sm",$$slots:{default:[id]},$$scope:{ctx:l}}}),C.$on("click",q),{c(){e=_("div"),t=_("div"),n=_("div"),i=S(s),o=b(),c=_("div"),X(r.$$.fragment),f=b(),u=_("span"),d=S("Every "),h=S(v),m=S(" min"),g=b(),X(C.$$.fragment),y=b(),p(n,"class","task-name svelte-16vnl3x"),p(c,"class","task-meta svelte-16vnl3x"),p(t,"class","task-info"),p(e,"class","task-item svelte-16vnl3x")},m(D,T){w(D,e,T),a(e,t),a(t,n),a(n,i),a(t,o),a(t,c),Y(r,c,null),a(c,f),a(c,u),a(u,d),a(u,h),a(u,m),a(e,g),Y(C,e,null),a(e,y),$=!0},p(D,T){l=D,(!$||T[0]&4096)&&s!==(s=l[32].name+"")&&z(i,s);const M={};T[0]&4096|T[1]&16&&(M.$$scope={dirty:T,ctx:l}),r.$set(M),(!$||T[0]&4096)&&v!==(v=l[32].interval+"")&&z(h,v);const E={};T[1]&16&&(E.$$scope={dirty:T,ctx:l}),C.$set(E)},i(D){$||(P(r.$$.fragment,D),P(C.$$.fragment,D),$=!0)},o(D){L(r.$$.fragment,D),L(C.$$.fragment,D),$=!1},d(D){D&&k(e),K(r),K(C)}}}function rd(l){let e,t,n,s,i,o;const c=[sd,nd,ld],r=[];function f(u,d){return u[13]?0:u[12].length===0?1:2}return n=f(l),s=r[n]=c[n](l),{c(){e=_("p"),e.textContent="Schedule recurring tasks like health checks, auto-restart, and backups.",t=b(),s.c(),i=Ae(),p(e,"class","description svelte-16vnl3x")},m(u,d){w(u,e,d),w(u,t,d),r[n].m(u,d),w(u,i,d),o=!0},p(u,d){let v=n;n=f(u),n===v?r[n].p(u,d):(ke(),L(r[v],1,1,()=>{r[v]=null}),we(),s=r[n],s?s.p(u,d):(s=r[n]=c[n](u),s.c()),P(s,1),s.m(i.parentNode,i))},i(u){o||(P(s),o=!0)},o(u){L(s),o=!1},d(u){u&&(k(e),k(t),k(i)),r[n].d(u)}}}function ad(l){let e;return{c(){e=S("↻ Refresh")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function cd(l){let e,t;return e=new Ne({props:{slot:"header",variant:"ghost",size:"sm",$$slots:{default:[ad]},$$scope:{ctx:l}}}),e.$on("click",l[19]),{c(){X(e.$$.fragment)},m(n,s){Y(e,n,s),t=!0},p(n,s){const i={};s[1]&16&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){K(e,n)}}}function ud(l){let e,t,n,s,i,o,c,r,f,u,d,v,h;return t=new ze({props:{title:"🎨 Appearance",$$slots:{default:[O_]},$$scope:{ctx:l}}}),s=new ze({props:{title:"⚙️ DigitalOcean Credentials",$$slots:{default:[W_]},$$scope:{ctx:l}}}),o=new ze({props:{title:"☁️ Cloudflare Credentials",$$slots:{default:[Z_]},$$scope:{ctx:l}}}),r=new ze({props:{title:"🌐 Domain Setup",$$slots:{default:[x_]},$$scope:{ctx:l}}}),u=new ze({props:{title:"🌐 DNS Round-Robin (Cloudflare)",$$slots:{default:[td]},$$scope:{ctx:l}}}),v=new ze({props:{title:"⏰ Task Scheduler",$$slots:{header:[cd],default:[rd]},$$scope:{ctx:l}}}),{c(){e=_("div"),X(t.$$.fragment),n=b(),X(s.$$.fragment),i=b(),X(o.$$.fragment),c=b(),X(r.$$.fragment),f=b(),X(u.$$.fragment),d=b(),X(v.$$.fragment),p(e,"class","settings-page svelte-16vnl3x")},m(m,g){w(m,e,g),Y(t,e,null),a(e,n),Y(s,e,null),a(e,i),Y(o,e,null),a(e,c),Y(r,e,null),a(e,f),Y(u,e,null),a(e,d),Y(v,e,null),h=!0},p(m,g){const C={};g[0]&16384|g[1]&16&&(C.$$scope={dirty:g,ctx:m}),t.$set(C);const y={};g[0]&3|g[1]&16&&(y.$$scope={dirty:g,ctx:m}),s.$set(y);const $={};g[0]&12|g[1]&16&&($.$$scope={dirty:g,ctx:m}),o.$set($);const q={};g[0]&240|g[1]&16&&(q.$$scope={dirty:g,ctx:m}),r.$set(q);const D={};g[0]&3840|g[1]&16&&(D.$$scope={dirty:g,ctx:m}),u.$set(D);const T={};g[0]&12288|g[1]&16&&(T.$$scope={dirty:g,ctx:m}),v.$set(T)},i(m){h||(P(t.$$.fragment,m),P(s.$$.fragment,m),P(o.$$.fragment,m),P(r.$$.fragment,m),P(u.$$.fragment,m),P(v.$$.fragment,m),h=!0)},o(m){L(t.$$.fragment,m),L(s.$$.fragment,m),L(o.$$.fragment,m),L(r.$$.fragment,m),L(u.$$.fragment,m),L(v.$$.fragment,m),h=!1},d(m){m&&k(e),K(t),K(s),K(o),K(r),K(u),K(v)}}}function fd(l,e,t){let n;Xe(l,Yn,A=>t(14,n=A));let s="",i=null,o="",c=null,r="",f="",u=!0,d=null,v="",h="",m=!0,g=null,C=[],y=!1;dl(()=>{$(),q(),j()});async function $(){const A=_l();if(A){t(0,s=A.substring(0,10)+"...");try{await Oe("GET","/infra/snapshots"),t(1,i={valid:!0})}catch{t(1,i={valid:!1})}}else t(1,i={valid:!1,missing:!0})}async function q(){const A=Zn();A?(t(2,o=A.substring(0,10)+"..."),t(3,c={valid:!0})):t(3,c={valid:!1,missing:!0})}async function D(A){A.preventDefault();const U=A.target.querySelector("input"),x=U.value;if(!x){ge.error("Token is required");return}ec(x),U.value="",ge.success("DigitalOcean token saved"),await $()}async function T(A){A.preventDefault();const U=A.target.querySelector("input"),x=U.value;if(!x){ge.error("Token is required");return}tc(x),U.value="",ge.success("Cloudflare token saved"),await q()}async function M(A){A.preventDefault();try{const U=await Oe("POST","/infra/cloudflare/domain",{domain:r,ip:f,proxied:u});t(7,d={success:!0,message:"Domain configured successfully"}),ge.success("Domain setup complete")}catch(U){t(7,d={success:!1,message:U.message}),ge.error(U.message)}}async function E(A){A.preventDefault();try{const U=h.split(",").map(Q=>Q.trim()).filter(Boolean),x=await Oe("POST","/infra/cloudflare/lb",{domain:v,server_ips:U,proxied:m});t(11,g={success:!0,message:`Created load balancer with ${U.length} servers`}),ge.success("Load balancer configured")}catch(U){t(11,g={success:!1,message:U.message}),ge.error(U.message)}}async function j(){t(13,y=!0);try{const A=await Oe("GET","/infra/scheduler/tasks");t(12,C=A.tasks||A||[])}catch{t(12,C=[])}finally{t(13,y=!1)}}async function R(A){if(confirm("Delete this scheduled task?"))try{await Oe("DELETE",`/infra/scheduler/tasks/${A}`),ge.success("Task deleted"),await j()}catch(U){ge.error(U.message)}}function O(){n=ct(this),Yn.set(n)}const F=()=>Yn.set(n);function I(){r=this.value,t(4,r)}function W(){f=this.value,t(5,f)}function V(){u=this.checked,t(6,u)}function H(){v=this.value,t(8,v)}function B(){h=this.value,t(9,h)}function N(){m=this.checked,t(10,m)}return[s,i,o,c,r,f,u,d,v,h,m,g,C,y,n,D,T,M,E,j,R,O,F,I,W,V,H,B,N,A=>R(A.id)]}class pd extends tt{constructor(e){super(),et(this,e,fd,ud,xe,{},null,[-1,-1])}}function Jr(l,e,t){const n=l.slice();n[21]=e[t];const s=n[1].filter(function(...r){return l[17](n[21],...r)});n[22]=s;const i=n[21].domain;n[23]=i;const o=n[22].length>1;return n[24]=o,n}function Vr(l,e,t){const n=l.slice();return n[27]=e[t],n}function Yr(l,e,t){const n=l.slice();return n[21]=e[t],n}function Kr(l,e,t){const n=l.slice();return n[32]=e[t],n}function _d(l){let e,t,n,s,i,o,c,r,f,u,d,v,h,m,g,C,y,$,q=l[1].length+"",D,T,M,E,j,R,O,F,I=l[7].length+"",W,V,H,B;const N=[gd,hd],G=[];function A(U,x){return U[11]?1:0}return v=A(l),h=G[v]=N[v](l),{c(){e=_("div"),t=_("div"),n=_("div"),n.innerHTML='<span class="summary-icon svelte-odhywp">🔀</span> <span>Nginx Sidecar</span>',s=b(),i=_("div"),o=S(l[3]),c=S("/"),r=S(l[2]),f=b(),u=_("div"),u.textContent="servers with nginx",d=b(),h.c(),m=b(),g=_("div"),C=_("div"),C.innerHTML='<span class="summary-icon svelte-odhywp">🤖</span> <span>Node Agents</span>',y=b(),$=_("div"),D=S(q),T=b(),M=_("div"),M.textContent="servers monitored",E=b(),j=_("div"),R=_("div"),R.innerHTML='<span class="summary-icon svelte-odhywp">📦</span> <span>Services</span>',O=b(),F=_("div"),W=S(I),V=b(),H=_("div"),H.textContent="deployed services",p(n,"class","summary-header svelte-odhywp"),p(i,"class","summary-value svelte-odhywp"),p(u,"class","summary-label svelte-odhywp"),p(t,"class","summary-card svelte-odhywp"),Te(t,"ok",l[11]),Te(t,"warn",!l[11]),p(C,"class","summary-header svelte-odhywp"),p($,"class","summary-value svelte-odhywp"),p(M,"class","summary-label svelte-odhywp"),p(g,"class","summary-card info svelte-odhywp"),p(R,"class","summary-header svelte-odhywp"),p(F,"class","summary-value svelte-odhywp"),p(H,"class","summary-label svelte-odhywp"),p(j,"class","summary-card info svelte-odhywp"),p(e,"class","summary-grid svelte-odhywp")},m(U,x){w(U,e,x),a(e,t),a(t,n),a(t,s),a(t,i),a(i,o),a(i,c),a(i,r),a(t,f),a(t,u),a(t,d),G[v].m(t,null),a(e,m),a(e,g),a(g,C),a(g,y),a(g,$),a($,D),a(g,T),a(g,M),a(e,E),a(e,j),a(j,R),a(j,O),a(j,F),a(F,W),a(j,V),a(j,H),B=!0},p(U,x){(!B||x[0]&8)&&z(o,U[3]),(!B||x[0]&4)&&z(r,U[2]);let Q=v;v=A(U),v===Q?G[v].p(U,x):(ke(),L(G[Q],1,1,()=>{G[Q]=null}),we(),h=G[v],h?h.p(U,x):(h=G[v]=N[v](U),h.c()),P(h,1),h.m(t,null)),(!B||x[0]&2048)&&Te(t,"ok",U[11]),(!B||x[0]&2048)&&Te(t,"warn",!U[11]),(!B||x[0]&2)&&q!==(q=U[1].length+"")&&z(D,q),(!B||x[0]&128)&&I!==(I=U[7].length+"")&&z(W,I)},i(U){B||(P(h),B=!0)},o(U){L(h),B=!1},d(U){U&&k(e),G[v].d()}}}function dd(l){let e;return{c(){e=_("div"),e.innerHTML='<p>No services deployed yet</p> <p class="hint svelte-odhywp">Deploy your first service to see the architecture</p>',p(e,"class","empty-state svelte-odhywp")},m(t,n){w(t,e,n)},p:ie,i:ie,o:ie,d(t){t&&k(e)}}}function vd(l){let e,t,n,s,i,o;return{c(){e=_("div"),t=_("p"),n=S("Failed to load: "),s=S(l[9]),i=b(),o=_("p"),o.textContent="Check your connection and try refreshing",p(o,"class","hint svelte-odhywp"),p(e,"class","empty-state svelte-odhywp")},m(c,r){w(c,e,r),a(e,t),a(t,n),a(t,s),a(e,i),a(e,o)},p(c,r){r[0]&512&&z(s,c[9])},i:ie,o:ie,d(c){c&&k(e)}}}function md(l){let e;return{c(){e=_("div"),e.textContent="Loading architecture...",p(e,"class","empty-state svelte-odhywp")},m(t,n){w(t,e,n)},p:ie,i:ie,o:ie,d(t){t&&k(e)}}}function hd(l){let e;return{c(){e=_("div"),e.textContent="✅ All servers OK",p(e,"class","summary-ok svelte-odhywp")},m(t,n){w(t,e,n)},p:ie,i:ie,o:ie,d(t){t&&k(e)}}}function gd(l){let e,t;return e=new Ne({props:{variant:"warning",size:"sm",$$slots:{default:[bd]},$$scope:{ctx:l}}}),e.$on("click",l[13]),{c(){X(e.$$.fragment)},m(n,s){Y(e,n,s),t=!0},p(n,s){const i={};s[0]&12|s[1]&16&&(i.$$scope={dirty:s,ctx:n}),e.$set(i)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){K(e,n)}}}function bd(l){let e,t=l[2]-l[3]+"",n,s;return{c(){e=S("🔧 Fix "),n=S(t),s=S(" server(s)")},m(i,o){w(i,e,o),w(i,n,o),w(i,s,o)},p(i,o){o[0]&12&&t!==(t=i[2]-i[3]+"")&&z(n,t)},d(i){i&&(k(e),k(n),k(s))}}}function $d(l){let e,t,n,s;const i=[md,vd,dd,_d],o=[];function c(r,f){return r[6]&&!r[10]?0:r[9]?1:r[7].length===0&&r[1].length===0?2:3}return e=c(l),t=o[e]=i[e](l),{c(){t.c(),n=Ae()},m(r,f){o[e].m(r,f),w(r,n,f),s=!0},p(r,f){let u=e;e=c(r),e===u?o[e].p(r,f):(ke(),L(o[u],1,1,()=>{o[u]=null}),we(),t=o[e],t?t.p(r,f):(t=o[e]=i[e](r),t.c()),P(t,1),t.m(n.parentNode,n))},i(r){s||(P(t),s=!0)},o(r){L(t),s=!1},d(r){r&&k(n),o[e].d(r)}}}function Qr(l){let e,t=l[32]+"",n,s;return{c(){e=_("option"),n=S(t),e.__value=s=l[32],ee(e,e.__value)},m(i,o){w(i,e,o),a(e,n)},p(i,o){o[0]&4096&&t!==(t=i[32]+"")&&z(n,t),o[0]&4096&&s!==(s=i[32])&&(e.__value=s,ee(e,e.__value))},d(i){i&&k(e)}}}function Zr(l){let e,t,n=na(l[8])+"",s;return{c(){e=_("span"),t=S("Updated "),s=S(n),p(e,"class","last-updated svelte-odhywp")},m(i,o){w(i,e,o),a(e,t),a(e,s)},p(i,o){o[0]&256&&n!==(n=na(i[8])+"")&&z(s,n)},d(i){i&&k(e)}}}function kd(l){let e;return{c(){e=S("↻ Refresh")},m(t,n){w(t,e,n)},d(t){t&&k(e)}}}function wd(l){let e,t,n,s,i,o,c,r,f,u,d,v,h,m,g,C=ve(l[12]||[]),y=[];for(let q=0;q<C.length;q+=1)y[q]=Qr(Kr(l,C,q));let $=l[8]&&Zr(l);return v=new Ne({props:{variant:"ghost",size:"sm",$$slots:{default:[kd]},$$scope:{ctx:l}}}),v.$on("click",l[0]),{c(){e=_("div"),t=_("select"),n=_("option"),n.textContent="All Projects";for(let q=0;q<y.length;q+=1)y[q].c();s=b(),i=_("select"),o=_("option"),o.textContent="All Envs",c=_("option"),c.textContent="prod",r=_("option"),r.textContent="staging",f=_("option"),f.textContent="dev",u=b(),$&&$.c(),d=b(),X(v.$$.fragment),n.__value="",ee(n,n.__value),p(t,"class","svelte-odhywp"),l[4]===void 0&&Qe(()=>l[15].call(t)),o.__value="",ee(o,o.__value),c.__value="prod",ee(c,c.__value),r.__value="staging",ee(r,r.__value),f.__value="dev",ee(f,f.__value),p(i,"class","svelte-odhywp"),l[5]===void 0&&Qe(()=>l[16].call(i)),p(e,"slot","header"),p(e,"class","filters svelte-odhywp")},m(q,D){w(q,e,D),a(e,t),a(t,n);for(let T=0;T<y.length;T+=1)y[T]&&y[T].m(t,null);je(t,l[4],!0),a(e,s),a(e,i),a(i,o),a(i,c),a(i,r),a(i,f),je(i,l[5],!0),a(e,u),$&&$.m(e,null),a(e,d),Y(v,e,null),h=!0,m||(g=[le(t,"change",l[15]),le(t,"change",l[14]),le(i,"change",l[16]),le(i,"change",l[14])],m=!0)},p(q,D){if(D[0]&4096){C=ve(q[12]||[]);let M;for(M=0;M<C.length;M+=1){const E=Kr(q,C,M);y[M]?y[M].p(E,D):(y[M]=Qr(E),y[M].c(),y[M].m(t,null))}for(;M<y.length;M+=1)y[M].d(1);y.length=C.length}D[0]&4112&&je(t,q[4]),D[0]&32&&je(i,q[5]),q[8]?$?$.p(q,D):($=Zr(q),$.c(),$.m(e,d)):$&&($.d(1),$=null);const T={};D[1]&16&&(T.$$scope={dirty:D,ctx:q}),v.$set(T)},i(q){h||(P(v.$$.fragment,q),h=!0)},o(q){L(v.$$.fragment,q),h=!1},d(q){q&&k(e),Re(y,q),$&&$.d(),K(v),m=!1,We(g)}}}function yd(l){let e,t,n=ve(l[7]),s=[];for(let o=0;o<n.length;o+=1)s[o]=Xr(Yr(l,n,o));const i=o=>L(s[o],1,1,()=>{s[o]=null});return{c(){e=_("div");for(let o=0;o<s.length;o+=1)s[o].c();p(e,"class","list svelte-odhywp")},m(o,c){w(o,e,c);for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(e,null);t=!0},p(o,c){if(c[0]&128){n=ve(o[7]);let r;for(r=0;r<n.length;r+=1){const f=Yr(o,n,r);s[r]?(s[r].p(f,c),P(s[r],1)):(s[r]=Xr(f),s[r].c(),P(s[r],1),s[r].m(e,null))}for(ke(),r=n.length;r<s.length;r+=1)i(r);we()}},i(o){if(!t){for(let c=0;c<n.length;c+=1)P(s[c]);t=!0}},o(o){s=s.filter(Boolean);for(let c=0;c<s.length;c+=1)L(s[c]);t=!1},d(o){o&&k(e),Re(s,o)}}}function Cd(l){let e;return{c(){e=_("div"),e.textContent="No services found",p(e,"class","empty-panel svelte-odhywp")},m(t,n){w(t,e,n)},p:ie,i:ie,o:ie,d(t){t&&k(e)}}}function Sd(l){let e=l[21].type+"",t;return{c(){t=S(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&128&&e!==(e=n[21].type+"")&&z(t,e)},d(n){n&&k(t)}}}function Xr(l){var H,B;let e,t,n=Bn(l[21])+"",s,i,o,c,r=l[21].service+"",f,u,d,v=l[21].project+"",h,m,g=l[21].env+"",C,y,$,q,D=(((H=l[21].servers)==null?void 0:H.length)||0)+"",T,M,E,j,R=(((B=l[21].ports)==null?void 0:B.join(", "))||"-")+"",O,F,I,W,V;return I=new Be({props:{variant:l[21].type==="stateful"?"warning":"info",$$slots:{default:[Sd]},$$scope:{ctx:l}}}),{c(){e=_("div"),t=_("div"),s=S(n),i=b(),o=_("div"),c=_("div"),f=S(r),u=b(),d=_("div"),h=S(v),m=S(" / "),C=S(g),y=b(),$=_("div"),q=_("div"),T=S(D),M=S(" server(s)"),E=b(),j=_("div"),O=S(R),F=b(),X(I.$$.fragment),W=b(),p(t,"class","item-icon svelte-odhywp"),p(c,"class","item-name svelte-odhywp"),p(d,"class","item-meta svelte-odhywp"),p(o,"class","item-info svelte-odhywp"),p(j,"class","ports svelte-odhywp"),p($,"class","item-stats svelte-odhywp"),p(e,"class","list-item svelte-odhywp")},m(N,G){w(N,e,G),a(e,t),a(t,s),a(e,i),a(e,o),a(o,c),a(c,f),a(o,u),a(o,d),a(d,h),a(d,m),a(d,C),a(e,y),a(e,$),a($,q),a(q,T),a(q,M),a($,E),a($,j),a(j,O),a(e,F),Y(I,e,null),a(e,W),V=!0},p(N,G){var U,x;(!V||G[0]&128)&&n!==(n=Bn(N[21])+"")&&z(s,n),(!V||G[0]&128)&&r!==(r=N[21].service+"")&&z(f,r),(!V||G[0]&128)&&v!==(v=N[21].project+"")&&z(h,v),(!V||G[0]&128)&&g!==(g=N[21].env+"")&&z(C,g),(!V||G[0]&128)&&D!==(D=(((U=N[21].servers)==null?void 0:U.length)||0)+"")&&z(T,D),(!V||G[0]&128)&&R!==(R=(((x=N[21].ports)==null?void 0:x.join(", "))||"-")+"")&&z(O,R);const A={};G[0]&128&&(A.variant=N[21].type==="stateful"?"warning":"info"),G[0]&128|G[1]&16&&(A.$$scope={dirty:G,ctx:N}),I.$set(A)},i(N){V||(P(I.$$.fragment,N),V=!0)},o(N){L(I.$$.fragment,N),V=!1},d(N){N&&k(e),K(I)}}}function qd(l){let e,t,n,s;const i=[Cd,yd],o=[];function c(r,f){return r[7].length===0?0:1}return e=c(l),t=o[e]=i[e](l),{c(){t.c(),n=Ae()},m(r,f){o[e].m(r,f),w(r,n,f),s=!0},p(r,f){let u=e;e=c(r),e===u?o[e].p(r,f):(ke(),L(o[u],1,1,()=>{o[u]=null}),we(),t=o[e],t?t.p(r,f):(t=o[e]=i[e](r),t.c()),P(t,1),t.m(n.parentNode,n))},i(r){s||(P(t),s=!0)},o(r){L(t),s=!1},d(r){r&&k(n),o[e].d(r)}}}function Dd(l){let e,t,n=ve(l[1]),s=[];for(let o=0;o<n.length;o+=1)s[o]=xr(Vr(l,n,o));const i=o=>L(s[o],1,1,()=>{s[o]=null});return{c(){e=_("div");for(let o=0;o<s.length;o+=1)s[o].c();p(e,"class","list svelte-odhywp")},m(o,c){w(o,e,c);for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(e,null);t=!0},p(o,c){if(c[0]&2){n=ve(o[1]);let r;for(r=0;r<n.length;r+=1){const f=Vr(o,n,r);s[r]?(s[r].p(f,c),P(s[r],1)):(s[r]=xr(f),s[r].c(),P(s[r],1),s[r].m(e,null))}for(ke(),r=n.length;r<s.length;r+=1)i(r);we()}},i(o){if(!t){for(let c=0;c<n.length;c+=1)P(s[c]);t=!0}},o(o){s=s.filter(Boolean);for(let c=0;c<s.length;c+=1)L(s[c]);t=!1},d(o){o&&k(e),Re(s,o)}}}function Td(l){let e;return{c(){e=_("div"),e.textContent="No servers found",p(e,"class","empty-panel svelte-odhywp")},m(t,n){w(t,e,n)},p:ie,i:ie,o:ie,d(t){t&&k(e)}}}function Pd(l){let e=In(l[27])?"🔀 nginx":"⚠️ no nginx",t;return{c(){t=S(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&2&&e!==(e=In(n[27])?"🔀 nginx":"⚠️ no nginx")&&z(t,e)},d(n){n&&k(t)}}}function Ed(l){let e,t=(l[27].agent_version||"?")+"",n;return{c(){e=S("🤖 v"),n=S(t)},m(s,i){w(s,e,i),w(s,n,i)},p(s,i){i[0]&2&&t!==(t=(s[27].agent_version||"?")+"")&&z(n,t)},d(s){s&&(k(e),k(n))}}}function xr(l){let e,t,n=l[27].status==="online"?"🟢":"🔴",s,i,o,c,r=l[27].ip+"",f,u,d,v=(l[27].containers||0)+"",h,m,g,C,y,$,q,D,T;return y=new Be({props:{variant:In(l[27])?"success":"warning",$$slots:{default:[Pd]},$$scope:{ctx:l}}}),q=new Be({props:{variant:"info",$$slots:{default:[Ed]},$$scope:{ctx:l}}}),{c(){e=_("div"),t=_("div"),s=S(n),i=b(),o=_("div"),c=_("code"),f=S(r),u=b(),d=_("div"),h=S(v),m=S(" container(s)"),g=b(),C=_("div"),X(y.$$.fragment),$=b(),X(q.$$.fragment),D=b(),p(t,"class","item-icon svelte-odhywp"),p(c,"class","server-ip svelte-odhywp"),p(d,"class","item-meta svelte-odhywp"),p(o,"class","item-info svelte-odhywp"),p(C,"class","item-badges svelte-odhywp"),p(e,"class","list-item svelte-odhywp")},m(M,E){w(M,e,E),a(e,t),a(t,s),a(e,i),a(e,o),a(o,c),a(c,f),a(o,u),a(o,d),a(d,h),a(d,m),a(e,g),a(e,C),Y(y,C,null),a(C,$),Y(q,C,null),a(e,D),T=!0},p(M,E){(!T||E[0]&2)&&n!==(n=M[27].status==="online"?"🟢":"🔴")&&z(s,n),(!T||E[0]&2)&&r!==(r=M[27].ip+"")&&z(f,r),(!T||E[0]&2)&&v!==(v=(M[27].containers||0)+"")&&z(h,v);const j={};E[0]&2&&(j.variant=In(M[27])?"success":"warning"),E[0]&2|E[1]&16&&(j.$$scope={dirty:E,ctx:M}),y.$set(j);const R={};E[0]&2|E[1]&16&&(R.$$scope={dirty:E,ctx:M}),q.$set(R)},i(M){T||(P(y.$$.fragment,M),P(q.$$.fragment,M),T=!0)},o(M){L(y.$$.fragment,M),L(q.$$.fragment,M),T=!1},d(M){M&&k(e),K(y),K(q)}}}function Md(l){let e,t,n,s;const i=[Td,Dd],o=[];function c(r,f){return r[1].length===0?0:1}return e=c(l),t=o[e]=i[e](l),{c(){t.c(),n=Ae()},m(r,f){o[e].m(r,f),w(r,n,f),s=!0},p(r,f){let u=e;e=c(r),e===u?o[e].p(r,f):(ke(),L(o[u],1,1,()=>{o[u]=null}),we(),t=o[e],t?t.p(r,f):(t=o[e]=i[e](r),t.c()),P(t,1),t.m(n.parentNode,n))},i(r){s||(P(t),s=!0)},o(r){L(t),s=!1},d(r){r&&k(n),o[e].d(r)}}}function Ld(l){let e,t,n=ve(l[7]),s=[];for(let o=0;o<n.length;o+=1)s[o]=la(Jr(l,n,o));const i=o=>L(s[o],1,1,()=>{s[o]=null});return{c(){e=_("div");for(let o=0;o<s.length;o+=1)s[o].c();p(e,"class","traffic-flow svelte-odhywp")},m(o,c){w(o,e,c);for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(e,null);t=!0},p(o,c){if(c[0]&130){n=ve(o[7]);let r;for(r=0;r<n.length;r+=1){const f=Jr(o,n,r);s[r]?(s[r].p(f,c),P(s[r],1)):(s[r]=la(f),s[r].c(),P(s[r],1),s[r].m(e,null))}for(ke(),r=n.length;r<s.length;r+=1)i(r);we()}},i(o){if(!t){for(let c=0;c<n.length;c+=1)P(s[c]);t=!0}},o(o){s=s.filter(Boolean);for(let c=0;c<s.length;c+=1)L(s[c]);t=!1},d(o){o&&k(e),Re(s,o)}}}function Nd(l){let e;return{c(){e=_("div"),e.textContent="Deploy services to see traffic flow",p(e,"class","empty-panel svelte-odhywp")},m(t,n){w(t,e,n)},p:ie,i:ie,o:ie,d(t){t&&k(e)}}}function jd(l){let e=l[21].env+"",t;return{c(){t=S(e)},m(n,s){w(n,t,s)},p(n,s){s[0]&128&&e!==(e=n[21].env+"")&&z(t,e)},d(n){n&&k(t)}}}function ea(l){let e,t,n,s,i,o,c=l[21].domain+"",r,f,u;return{c(){e=_("div"),t=_("span"),t.textContent="☁️",n=b(),s=_("span"),s.textContent="Cloudflare",i=b(),o=_("span"),r=S(c),f=b(),u=_("div"),u.textContent="→",p(t,"class","svelte-odhywp"),p(s,"class","node-label svelte-odhywp"),p(o,"class","node-detail svelte-odhywp"),p(e,"class","flow-node cloudflare svelte-odhywp"),p(u,"class","flow-arrow svelte-odhywp")},m(d,v){w(d,e,v),a(e,t),a(e,n),a(e,s),a(e,i),a(e,o),a(o,r),w(d,f,v),w(d,u,v)},p(d,v){v[0]&128&&c!==(c=d[21].domain+"")&&z(r,c)},d(d){d&&(k(e),k(f),k(u))}}}function Rd(l){let e;return{c(){e=S("Server")},m(t,n){w(t,e,n)},p:ie,d(t){t&&k(e)}}}function Ad(l){let e,t=l[22].length+"",n,s;return{c(){e=S("⚖️ Load Balanced ("),n=S(t),s=S(")")},m(i,o){w(i,e,o),w(i,n,o),w(i,s,o)},p(i,o){o[0]&130&&t!==(t=i[22].length+"")&&z(n,t)},d(i){i&&(k(e),k(n),k(s))}}}function ta(l){let e,t,n,s=l[21].domain+"",i,o;return{c(){e=_("span"),t=S("Domain: "),n=_("a"),i=S(s),p(n,"href",o="https://"+l[21].domain),p(n,"target","_blank"),p(n,"class","svelte-odhywp")},m(c,r){w(c,e,r),a(e,t),a(e,n),a(n,i)},p(c,r){r[0]&128&&s!==(s=c[21].domain+"")&&z(i,s),r[0]&128&&o!==(o="https://"+c[21].domain)&&p(n,"href",o)},d(c){c&&k(e)}}}function la(l){let e,t,n,s=Bn(l[21])+"",i,o,c,r=l[21].service+"",f,u,d,v,h,m,g,C,y,$,q,D,T,M,E,j,R,O,F,I,W,V,H,B,N=(l[21].host_port||"8000")+"",G,A,U,x,Q,ne,te,oe=(l[21].container_name||l[21].id)+"",pe,ae,Ee;d=new Be({props:{variant:l[21].env==="prod"?"danger":"info",$$slots:{default:[jd]},$$scope:{ctx:l}}});let me=l[23]&&ea(l);function re(ue,be){return ue[24]?Ad:Rd}let _e=re(l),Ce=_e(l),ce=l[23]&&ta(l);return{c(){e=_("div"),t=_("div"),n=_("span"),i=S(s),o=b(),c=_("span"),f=S(r),u=b(),X(d.$$.fragment),v=b(),h=_("div"),me&&me.c(),m=b(),g=_("div"),C=_("span"),C.textContent="🖥️",y=b(),$=_("span"),Ce.c(),q=b(),D=_("div"),D.textContent="→",T=b(),M=_("div"),M.innerHTML='<span class="svelte-odhywp">🔀</span> <span class="node-label svelte-odhywp">nginx</span> <span class="node-detail svelte-odhywp">:443</span>',E=b(),j=_("div"),j.textContent="→",R=b(),O=_("div"),F=_("span"),F.textContent="🐳",I=b(),W=_("span"),W.textContent="Container",V=b(),H=_("span"),B=S(":"),G=S(N),A=b(),U=_("div"),ce&&ce.c(),x=b(),Q=_("span"),ne=S("Container: "),te=_("code"),pe=S(oe),ae=b(),p(n,"class","flow-icon svelte-odhywp"),p(c,"class","flow-name svelte-odhywp"),p(t,"class","flow-header svelte-odhywp"),p(C,"class","svelte-odhywp"),p($,"class","node-label svelte-odhywp"),p(g,"class","flow-node server svelte-odhywp"),p(D,"class","flow-arrow svelte-odhywp"),p(M,"class","flow-node nginx svelte-odhywp"),p(j,"class","flow-arrow svelte-odhywp"),p(F,"class","svelte-odhywp"),p(W,"class","node-label svelte-odhywp"),p(H,"class","node-detail svelte-odhywp"),p(O,"class","flow-node container svelte-odhywp"),p(h,"class","flow-path svelte-odhywp"),p(te,"class","svelte-odhywp"),p(U,"class","flow-details svelte-odhywp"),p(e,"class","flow-card svelte-odhywp")},m(ue,be){w(ue,e,be),a(e,t),a(t,n),a(n,i),a(t,o),a(t,c),a(c,f),a(t,u),Y(d,t,null),a(e,v),a(e,h),me&&me.m(h,null),a(h,m),a(h,g),a(g,C),a(g,y),a(g,$),Ce.m($,null),a(h,q),a(h,D),a(h,T),a(h,M),a(h,E),a(h,j),a(h,R),a(h,O),a(O,F),a(O,I),a(O,W),a(O,V),a(O,H),a(H,B),a(H,G),a(e,A),a(e,U),ce&&ce.m(U,null),a(U,x),a(U,Q),a(Q,ne),a(Q,te),a(te,pe),a(e,ae),Ee=!0},p(ue,be){(!Ee||be[0]&128)&&s!==(s=Bn(ue[21])+"")&&z(i,s),(!Ee||be[0]&128)&&r!==(r=ue[21].service+"")&&z(f,r);const he={};be[0]&128&&(he.variant=ue[21].env==="prod"?"danger":"info"),be[0]&128|be[1]&16&&(he.$$scope={dirty:be,ctx:ue}),d.$set(he),ue[23]?me?me.p(ue,be):(me=ea(ue),me.c(),me.m(h,m)):me&&(me.d(1),me=null),_e===(_e=re(ue))&&Ce?Ce.p(ue,be):(Ce.d(1),Ce=_e(ue),Ce&&(Ce.c(),Ce.m($,null))),(!Ee||be[0]&128)&&N!==(N=(ue[21].host_port||"8000")+"")&&z(G,N),ue[23]?ce?ce.p(ue,be):(ce=ta(ue),ce.c(),ce.m(U,x)):ce&&(ce.d(1),ce=null),(!Ee||be[0]&128)&&oe!==(oe=(ue[21].container_name||ue[21].id)+"")&&z(pe,oe)},i(ue){Ee||(P(d.$$.fragment,ue),Ee=!0)},o(ue){L(d.$$.fragment,ue),Ee=!1},d(ue){ue&&k(e),K(d),me&&me.d(),Ce.d(),ce&&ce.d()}}}function Od(l){let e,t,n,s;const i=[Nd,Ld],o=[];function c(r,f){return r[7].length===0?0:1}return e=c(l),t=o[e]=i[e](l),{c(){t.c(),n=Ae()},m(r,f){o[e].m(r,f),w(r,n,f),s=!0},p(r,f){let u=e;e=c(r),e===u?o[e].p(r,f):(ke(),L(o[u],1,1,()=>{o[u]=null}),we(),t=o[e],t?t.p(r,f):(t=o[e]=i[e](r),t.c()),P(t,1),t.m(n.parentNode,n))},i(r){s||(P(t),s=!0)},o(r){L(t),s=!1},d(r){r&&k(n),o[e].d(r)}}}function Fd(l){let e;return{c(){e=_("span"),e.textContent="Request path from client to container",p(e,"slot","header"),p(e,"class","subtitle svelte-odhywp")},m(t,n){w(t,e,n)},p:ie,d(t){t&&k(e)}}}function zd(l){let e,t,n,s,i,o,c,r,f,u;return t=new ze({props:{title:"🏗️ Architecture View",$$slots:{header:[wd],default:[$d]},$$scope:{ctx:l}}}),i=new ze({props:{title:"📦 Services",padding:!1,$$slots:{default:[qd]},$$scope:{ctx:l}}}),c=new ze({props:{title:"🖥️ Servers",padding:!1,$$slots:{default:[Md]},$$scope:{ctx:l}}}),f=new ze({props:{title:"🚦 Traffic Flow",$$slots:{header:[Fd],default:[Od]},$$scope:{ctx:l}}}),{c(){e=_("div"),X(t.$$.fragment),n=b(),s=_("div"),X(i.$$.fragment),o=b(),X(c.$$.fragment),r=b(),X(f.$$.fragment),p(s,"class","panels-grid svelte-odhywp"),p(e,"class","architecture-page svelte-odhywp")},m(d,v){w(d,e,v),Y(t,e,null),a(e,n),a(e,s),Y(i,s,null),a(s,o),Y(c,s,null),a(e,r),Y(f,e,null),u=!0},p(d,v){const h={};v[0]&8190|v[1]&16&&(h.$$scope={dirty:v,ctx:d}),t.$set(h);const m={};v[0]&128|v[1]&16&&(m.$$scope={dirty:v,ctx:d}),i.$set(m);const g={};v[0]&2|v[1]&16&&(g.$$scope={dirty:v,ctx:d}),c.$set(g);const C={};v[0]&130|v[1]&16&&(C.$$scope={dirty:v,ctx:d}),f.$set(C)},i(d){u||(P(t.$$.fragment,d),P(i.$$.fragment,d),P(c.$$.fragment,d),P(f.$$.fragment,d),u=!0)},o(d){L(t.$$.fragment,d),L(i.$$.fragment,d),L(c.$$.fragment,d),L(f.$$.fragment,d),u=!1},d(d){d&&k(e),K(t),K(i),K(c),K(f)}}}function na(l){return l?l.toLocaleTimeString():""}function Bn(l){switch(l.type){case"stateful":return"🗄️";case"frontend":return"🌐";case"api":return"⚡";case"worker":return"⚙️";default:return"📦"}}function In(l){return l.nginx_status==="running"}function Bd(l,e,t){let n,s,i,o;Xe(l,qa,j=>t(12,o=j));let c="",r="",f=!1,u=[],d=[],v=[],h=null,m=null,g=!1,C=null;dl(()=>{g||(y(),C=setInterval(y,6e4))}),ls(()=>{C&&clearInterval(C)});async function y(){g||t(6,f=!0),t(9,m=null);try{const j=await Oe("POST","/infra/architecture",{project:c||null,environment:r||null});t(7,u=j.nodes||[]),t(1,d=j.servers||[]),v=j.infrastructure||[],t(8,h=new Date),t(10,g=!0)}catch(j){t(9,m=j.message),g||ge.error("Failed to load architecture: "+j.message)}finally{t(6,f=!1)}}async function $(){const j=d.filter(R=>R.nginx_status!=="running").map(R=>R.ip);if(j.length===0){ge.info("All servers already have nginx running");return}ge.info(`Fixing ${j.length} server(s)...`);try{await Oe("POST","/infra/nginx/ensure",{server_ips:j}),ge.success("Nginx sidecar installed"),architectureStore.refresh()}catch(R){ge.error(R.message)}}function q(){y()}function D(){y()}function T(){c=ct(this),t(4,c)}function M(){r=ct(this),t(5,r)}const E=(j,R)=>{var O;return(O=j.servers)==null?void 0:O.includes(R.ip)};return l.$$.update=()=>{l.$$.dirty[0]&2&&t(3,n=d.filter(j=>j.nginx_status==="running").length),l.$$.dirty[0]&2&&t(2,s=d.length),l.$$.dirty[0]&12&&t(11,i=n===s)},[D,d,s,n,c,r,f,u,h,m,g,i,o,$,q,T,M,E]}class Id extends tt{constructor(e){super(),et(this,e,Bd,zd,xe,{refresh:0},null,[-1,-1])}get refresh(){return this.$$.ctx[0]}}function Ud(l){let e,t,n,s,i,o,c,r,f,u,d,v,h,m,g,C,y,$,q,D,T,M,E,j,R,O;n=new Ec({}),i=new Nc({props:{tabs:l[11],active:l[0],scrollable:!0}}),i.$on("change",l[13]);let F=l[9]&&sa(l),I={};u=new gu({props:I}),l[16](u),h=new af({});let W={};C=new rp({props:W}),l[17](C);let V={};q=new Id({props:V}),l[18](q);let H={};M=new Vp({props:H}),l[19](M);const B=[Yd,Vd,Jd,Wd],N=[];function G(A,U){return A[0]==="logs"?0:A[0]==="snapshots"?1:A[0]==="services"?2:A[0]==="settings"?3:-1}return~(j=G(l))&&(R=N[j]=B[j](l)),{c(){e=_("div"),t=_("div"),X(n.$$.fragment),s=b(),X(i.$$.fragment),o=b(),F&&F.c(),c=b(),r=_("main"),f=_("div"),X(u.$$.fragment),d=b(),v=_("div"),X(h.$$.fragment),m=b(),g=_("div"),X(C.$$.fragment),y=b(),$=_("div"),X(q.$$.fragment),D=b(),T=_("div"),X(M.$$.fragment),E=b(),R&&R.c(),p(f,"class","svelte-p7g5el"),Te(f,"hidden",l[0]!=="infra"),p(v,"class","svelte-p7g5el"),Te(v,"hidden",l[0]!=="deploy"),p(g,"class","svelte-p7g5el"),Te(g,"hidden",l[0]!=="deployments"),p($,"class","svelte-p7g5el"),Te($,"hidden",l[0]!=="architecture"),p(T,"class","svelte-p7g5el"),Te(T,"hidden",l[0]!=="metrics"),p(r,"class","content glass svelte-p7g5el"),p(t,"class","container svelte-p7g5el"),p(e,"class","app svelte-p7g5el")},m(A,U){w(A,e,U),a(e,t),Y(n,t,null),a(t,s),Y(i,t,null),a(t,o),F&&F.m(t,null),a(t,c),a(t,r),a(r,f),Y(u,f,null),a(r,d),a(r,v),Y(h,v,null),a(r,m),a(r,g),Y(C,g,null),a(r,y),a(r,$),Y(q,$,null),a(r,D),a(r,T),Y(M,T,null),a(r,E),~j&&N[j].m(r,null),O=!0},p(A,U){const x={};U&1&&(x.active=A[0]),i.$set(x),A[9]?F?(F.p(A,U),U&512&&P(F,1)):(F=sa(A),F.c(),P(F,1),F.m(t,c)):F&&(ke(),L(F,1,1,()=>{F=null}),we());const Q={};u.$set(Q),(!O||U&1)&&Te(f,"hidden",A[0]!=="infra"),(!O||U&1)&&Te(v,"hidden",A[0]!=="deploy");const ne={};C.$set(ne),(!O||U&1)&&Te(g,"hidden",A[0]!=="deployments");const te={};q.$set(te),(!O||U&1)&&Te($,"hidden",A[0]!=="architecture");const oe={};M.$set(oe),(!O||U&1)&&Te(T,"hidden",A[0]!=="metrics");let pe=j;j=G(A),j===pe?~j&&N[j].p(A,U):(R&&(ke(),L(N[pe],1,1,()=>{N[pe]=null}),we()),~j?(R=N[j],R?R.p(A,U):(R=N[j]=B[j](A),R.c()),P(R,1),R.m(r,null)):R=null)},i(A){O||(P(n.$$.fragment,A),P(i.$$.fragment,A),P(F),P(u.$$.fragment,A),P(h.$$.fragment,A),P(C.$$.fragment,A),P(q.$$.fragment,A),P(M.$$.fragment,A),P(R),O=!0)},o(A){L(n.$$.fragment,A),L(i.$$.fragment,A),L(F),L(u.$$.fragment,A),L(h.$$.fragment,A),L(C.$$.fragment,A),L(q.$$.fragment,A),L(M.$$.fragment,A),L(R),O=!1},d(A){A&&k(e),K(n),K(i),F&&F.d(),l[16](null),K(u),K(h),l[17](null),K(C),l[18](null),K(q),l[19](null),K(M),~j&&N[j].d()}}}function Hd(l){let e,t;return e=new bc({props:{title:"Deploy Dashboard",subtitle:"Sign in to manage your infrastructure"}}),e.$on("success",l[12]),{c(){X(e.$$.fragment)},m(n,s){Y(e,n,s),t=!0},p:ie,i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){K(e,n)}}}function Gd(l){let e;return{c(){e=_("div"),e.innerHTML='<div class="spinner svelte-p7g5el"></div>',p(e,"class","loading-screen svelte-p7g5el")},m(t,n){w(t,e,n)},p:ie,i:ie,o:ie,d(t){t&&k(e)}}}function sa(l){let e,t;return e=new Ac({props:{showTail:l[8],showContainer:l[7]}}),e.$on("change",l[14]),e.$on("refresh",l[15]),{c(){X(e.$$.fragment)},m(n,s){Y(e,n,s),t=!0},p(n,s){const i={};s&256&&(i.showTail=n[8]),s&128&&(i.showContainer=n[7]),e.$set(i)},i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){K(e,n)}}}function Wd(l){let e,t;return e=new pd({}),{c(){X(e.$$.fragment)},m(n,s){Y(e,n,s),t=!0},p:ie,i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){K(e,n)}}}function Jd(l){let e,t;return e=new R_({}),{c(){X(e.$$.fragment)},m(n,s){Y(e,n,s),t=!0},p:ie,i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){K(e,n)}}}function Vd(l){let e,t;return e=new C_({}),{c(){X(e.$$.fragment)},m(n,s){Y(e,n,s),t=!0},p:ie,i(n){t||(P(e.$$.fragment,n),t=!0)},o(n){L(e.$$.fragment,n),t=!1},d(n){K(e,n)}}}function Yd(l){let e,t,n={};return e=new vp({props:n}),l[20](e),{c(){X(e.$$.fragment)},m(s,i){Y(e,s,i),t=!0},p(s,i){const o={};e.$set(o)},i(s){t||(P(e.$$.fragment,s),t=!0)},o(s){L(e.$$.fragment,s),t=!1},d(s){l[20](null),K(e,s)}}}function Kd(l){let e,t,n,s,i,o;e=new wc({});const c=[Gd,Hd,Ud],r=[];function f(u,d){return u[1]?!u[10].token||!u[10].user?1:2:0}return n=f(l),s=r[n]=c[n](l),{c(){X(e.$$.fragment),t=b(),s.c(),i=Ae()},m(u,d){Y(e,u,d),w(u,t,d),r[n].m(u,d),w(u,i,d),o=!0},p(u,[d]){let v=n;n=f(u),n===v?r[n].p(u,d):(ke(),L(r[v],1,1,()=>{r[v]=null}),we(),s=r[n],s?s.p(u,d):(s=r[n]=c[n](u),s.c()),P(s,1),s.m(i.parentNode,i))},i(u){o||(P(e.$$.fragment,u),P(s),o=!0)},o(u){L(e.$$.fragment,u),L(s),o=!1},d(u){u&&(k(t),k(i)),K(e,u),r[n].d(u)}}}function Qd(l,e,t){let n,s,i,o,c;Xe(l,bs,R=>t(0,o=R)),Xe(l,$t,R=>t(10,c=R));let r=!1,f,u,d,v,h;const m=[{id:"infra",label:"Infrastructure"},{id:"deploy",label:"Deploy"},{id:"deployments",label:"Deployments"},{id:"architecture",label:"Architecture"},{id:"logs",label:"Logs"},{id:"metrics",label:"Metrics"},{id:"snapshots",label:"Snapshots"},{id:"services",label:"Services"},{id:"settings",label:"Settings"}];dl(async()=>{const R=await sc();t(1,r=!0),R&&g()});function g(){Gt.refresh(),Sa.refresh(),sn.refresh(),zl.refresh()}async function C(R){const{user:O,token:F}=R.detail;$t.setToken(F),$t.setUser(O),g()}function y(R){bs.set(R.detail)}function $(){q()}function q(){switch(o){case"infra":f==null||f.refresh(),Gt.refresh();break;case"deployments":u==null||u.refresh();break;case"logs":d==null||d.refresh();break;case"metrics":v==null||v.refresh();break;case"architecture":h==null||h.refresh();break}}function D(R){_t[R?"unshift":"push"](()=>{f=R,t(2,f)})}function T(R){_t[R?"unshift":"push"](()=>{u=R,t(3,u)})}function M(R){_t[R?"unshift":"push"](()=>{h=R,t(6,h)})}function E(R){_t[R?"unshift":"push"](()=>{v=R,t(5,v)})}function j(R){_t[R?"unshift":"push"](()=>{d=R,t(4,d)})}return l.$$.update=()=>{l.$$.dirty&1&&t(9,n=rc.includes(o)),l.$$.dirty&1&&t(8,s=o==="logs"),l.$$.dirty&1&&t(7,i=o==="logs")},[o,r,f,u,d,v,h,i,s,n,c,m,C,y,$,q,D,T,M,E,j]}class Zd extends tt{constructor(e){super(),et(this,e,Qd,Kd,xe,{})}}new Zd({target:document.getElementById("app")});
